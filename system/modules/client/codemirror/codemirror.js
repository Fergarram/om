// node_modules/@marijn/find-cluster-break/src/index.js
var rangeFrom = [];
var rangeTo = [];
(() => {
  let numbers = "lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map((s) => s ? parseInt(s, 36) : 1);
  for (let i = 0, n = 0;i < numbers.length; i++)
    (i % 2 ? rangeTo : rangeFrom).push(n = n + numbers[i]);
})();
function isExtendingChar(code) {
  if (code < 768)
    return false;
  for (let from = 0, to = rangeFrom.length;; ) {
    let mid = from + to >> 1;
    if (code < rangeFrom[mid])
      to = mid;
    else if (code >= rangeTo[mid])
      from = mid + 1;
    else
      return true;
    if (from == to)
      return false;
  }
}
function isRegionalIndicator(code) {
  return code >= 127462 && code <= 127487;
}
var ZWJ = 8205;
function findClusterBreak(str, pos, forward = true, includeExtending = true) {
  return (forward ? nextClusterBreak : prevClusterBreak)(str, pos, includeExtending);
}
function nextClusterBreak(str, pos, includeExtending) {
  if (pos == str.length)
    return pos;
  if (pos && surrogateLow(str.charCodeAt(pos)) && surrogateHigh(str.charCodeAt(pos - 1)))
    pos--;
  let prev = codePointAt(str, pos);
  pos += codePointSize(prev);
  while (pos < str.length) {
    let next = codePointAt(str, pos);
    if (prev == ZWJ || next == ZWJ || includeExtending && isExtendingChar(next)) {
      pos += codePointSize(next);
      prev = next;
    } else if (isRegionalIndicator(next)) {
      let countBefore = 0, i = pos - 2;
      while (i >= 0 && isRegionalIndicator(codePointAt(str, i))) {
        countBefore++;
        i -= 2;
      }
      if (countBefore % 2 == 0)
        break;
      else
        pos += 2;
    } else {
      break;
    }
  }
  return pos;
}
function prevClusterBreak(str, pos, includeExtending) {
  while (pos > 0) {
    let found = nextClusterBreak(str, pos - 2, includeExtending);
    if (found < pos)
      return found;
    pos--;
  }
  return 0;
}
function codePointAt(str, pos) {
  let code0 = str.charCodeAt(pos);
  if (!surrogateHigh(code0) || pos + 1 == str.length)
    return code0;
  let code1 = str.charCodeAt(pos + 1);
  if (!surrogateLow(code1))
    return code0;
  return (code0 - 55296 << 10) + (code1 - 56320) + 65536;
}
function surrogateLow(ch) {
  return ch >= 56320 && ch < 57344;
}
function surrogateHigh(ch) {
  return ch >= 55296 && ch < 56320;
}
function codePointSize(code) {
  return code < 65536 ? 1 : 2;
}

// node_modules/@codemirror/state/dist/index.js
class Text {
  lineAt(pos) {
    if (pos < 0 || pos > this.length)
      throw new RangeError(`Invalid position ${pos} in document of length ${this.length}`);
    return this.lineInner(pos, false, 1, 0);
  }
  line(n) {
    if (n < 1 || n > this.lines)
      throw new RangeError(`Invalid line number ${n} in ${this.lines}-line document`);
    return this.lineInner(n, true, 1, 0);
  }
  replace(from, to, text) {
    [from, to] = clip(this, from, to);
    let parts = [];
    this.decompose(0, from, parts, 2);
    if (text.length)
      text.decompose(0, text.length, parts, 1 | 2);
    this.decompose(to, this.length, parts, 1);
    return TextNode.from(parts, this.length - (to - from) + text.length);
  }
  append(other) {
    return this.replace(this.length, this.length, other);
  }
  slice(from, to = this.length) {
    [from, to] = clip(this, from, to);
    let parts = [];
    this.decompose(from, to, parts, 0);
    return TextNode.from(parts, to - from);
  }
  eq(other) {
    if (other == this)
      return true;
    if (other.length != this.length || other.lines != this.lines)
      return false;
    let start = this.scanIdentical(other, 1), end = this.length - this.scanIdentical(other, -1);
    let a = new RawTextCursor(this), b = new RawTextCursor(other);
    for (let skip = start, pos = start;; ) {
      a.next(skip);
      b.next(skip);
      skip = 0;
      if (a.lineBreak != b.lineBreak || a.done != b.done || a.value != b.value)
        return false;
      pos += a.value.length;
      if (a.done || pos >= end)
        return true;
    }
  }
  iter(dir = 1) {
    return new RawTextCursor(this, dir);
  }
  iterRange(from, to = this.length) {
    return new PartialTextCursor(this, from, to);
  }
  iterLines(from, to) {
    let inner;
    if (from == null) {
      inner = this.iter();
    } else {
      if (to == null)
        to = this.lines + 1;
      let start = this.line(from).from;
      inner = this.iterRange(start, Math.max(start, to == this.lines + 1 ? this.length : to <= 1 ? 0 : this.line(to - 1).to));
    }
    return new LineCursor(inner);
  }
  toString() {
    return this.sliceString(0);
  }
  toJSON() {
    let lines = [];
    this.flatten(lines);
    return lines;
  }
  constructor() {}
  static of(text) {
    if (text.length == 0)
      throw new RangeError("A document must have at least one line");
    if (text.length == 1 && !text[0])
      return Text.empty;
    return text.length <= 32 ? new TextLeaf(text) : TextNode.from(TextLeaf.split(text, []));
  }
}

class TextLeaf extends Text {
  constructor(text, length = textLength(text)) {
    super();
    this.text = text;
    this.length = length;
  }
  get lines() {
    return this.text.length;
  }
  get children() {
    return null;
  }
  lineInner(target, isLine, line, offset) {
    for (let i = 0;; i++) {
      let string = this.text[i], end = offset + string.length;
      if ((isLine ? line : end) >= target)
        return new Line(offset, end, line, string);
      offset = end + 1;
      line++;
    }
  }
  decompose(from, to, target, open) {
    let text = from <= 0 && to >= this.length ? this : new TextLeaf(sliceText(this.text, from, to), Math.min(to, this.length) - Math.max(0, from));
    if (open & 1) {
      let prev = target.pop();
      let joined = appendText(text.text, prev.text.slice(), 0, text.length);
      if (joined.length <= 32) {
        target.push(new TextLeaf(joined, prev.length + text.length));
      } else {
        let mid = joined.length >> 1;
        target.push(new TextLeaf(joined.slice(0, mid)), new TextLeaf(joined.slice(mid)));
      }
    } else {
      target.push(text);
    }
  }
  replace(from, to, text) {
    if (!(text instanceof TextLeaf))
      return super.replace(from, to, text);
    [from, to] = clip(this, from, to);
    let lines = appendText(this.text, appendText(text.text, sliceText(this.text, 0, from)), to);
    let newLen = this.length + text.length - (to - from);
    if (lines.length <= 32)
      return new TextLeaf(lines, newLen);
    return TextNode.from(TextLeaf.split(lines, []), newLen);
  }
  sliceString(from, to = this.length, lineSep = `
`) {
    [from, to] = clip(this, from, to);
    let result = "";
    for (let pos = 0, i = 0;pos <= to && i < this.text.length; i++) {
      let line = this.text[i], end = pos + line.length;
      if (pos > from && i)
        result += lineSep;
      if (from < end && to > pos)
        result += line.slice(Math.max(0, from - pos), to - pos);
      pos = end + 1;
    }
    return result;
  }
  flatten(target) {
    for (let line of this.text)
      target.push(line);
  }
  scanIdentical() {
    return 0;
  }
  static split(text, target) {
    let part = [], len = -1;
    for (let line of text) {
      part.push(line);
      len += line.length + 1;
      if (part.length == 32) {
        target.push(new TextLeaf(part, len));
        part = [];
        len = -1;
      }
    }
    if (len > -1)
      target.push(new TextLeaf(part, len));
    return target;
  }
}

class TextNode extends Text {
  constructor(children, length) {
    super();
    this.children = children;
    this.length = length;
    this.lines = 0;
    for (let child of children)
      this.lines += child.lines;
  }
  lineInner(target, isLine, line, offset) {
    for (let i = 0;; i++) {
      let child = this.children[i], end = offset + child.length, endLine = line + child.lines - 1;
      if ((isLine ? endLine : end) >= target)
        return child.lineInner(target, isLine, line, offset);
      offset = end + 1;
      line = endLine + 1;
    }
  }
  decompose(from, to, target, open) {
    for (let i = 0, pos = 0;pos <= to && i < this.children.length; i++) {
      let child = this.children[i], end = pos + child.length;
      if (from <= end && to >= pos) {
        let childOpen = open & ((pos <= from ? 1 : 0) | (end >= to ? 2 : 0));
        if (pos >= from && end <= to && !childOpen)
          target.push(child);
        else
          child.decompose(from - pos, to - pos, target, childOpen);
      }
      pos = end + 1;
    }
  }
  replace(from, to, text) {
    [from, to] = clip(this, from, to);
    if (text.lines < this.lines)
      for (let i = 0, pos = 0;i < this.children.length; i++) {
        let child = this.children[i], end = pos + child.length;
        if (from >= pos && to <= end) {
          let updated = child.replace(from - pos, to - pos, text);
          let totalLines = this.lines - child.lines + updated.lines;
          if (updated.lines < totalLines >> 5 - 1 && updated.lines > totalLines >> 5 + 1) {
            let copy = this.children.slice();
            copy[i] = updated;
            return new TextNode(copy, this.length - (to - from) + text.length);
          }
          return super.replace(pos, end, updated);
        }
        pos = end + 1;
      }
    return super.replace(from, to, text);
  }
  sliceString(from, to = this.length, lineSep = `
`) {
    [from, to] = clip(this, from, to);
    let result = "";
    for (let i = 0, pos = 0;i < this.children.length && pos <= to; i++) {
      let child = this.children[i], end = pos + child.length;
      if (pos > from && i)
        result += lineSep;
      if (from < end && to > pos)
        result += child.sliceString(from - pos, to - pos, lineSep);
      pos = end + 1;
    }
    return result;
  }
  flatten(target) {
    for (let child of this.children)
      child.flatten(target);
  }
  scanIdentical(other, dir) {
    if (!(other instanceof TextNode))
      return 0;
    let length = 0;
    let [iA, iB, eA, eB] = dir > 0 ? [0, 0, this.children.length, other.children.length] : [this.children.length - 1, other.children.length - 1, -1, -1];
    for (;; iA += dir, iB += dir) {
      if (iA == eA || iB == eB)
        return length;
      let chA = this.children[iA], chB = other.children[iB];
      if (chA != chB)
        return length + chA.scanIdentical(chB, dir);
      length += chA.length + 1;
    }
  }
  static from(children, length = children.reduce((l, ch) => l + ch.length + 1, -1)) {
    let lines = 0;
    for (let ch of children)
      lines += ch.lines;
    if (lines < 32) {
      let flat = [];
      for (let ch of children)
        ch.flatten(flat);
      return new TextLeaf(flat, length);
    }
    let chunk = Math.max(32, lines >> 5), maxChunk = chunk << 1, minChunk = chunk >> 1;
    let chunked = [], currentLines = 0, currentLen = -1, currentChunk = [];
    function add(child) {
      let last;
      if (child.lines > maxChunk && child instanceof TextNode) {
        for (let node of child.children)
          add(node);
      } else if (child.lines > minChunk && (currentLines > minChunk || !currentLines)) {
        flush();
        chunked.push(child);
      } else if (child instanceof TextLeaf && currentLines && (last = currentChunk[currentChunk.length - 1]) instanceof TextLeaf && child.lines + last.lines <= 32) {
        currentLines += child.lines;
        currentLen += child.length + 1;
        currentChunk[currentChunk.length - 1] = new TextLeaf(last.text.concat(child.text), last.length + 1 + child.length);
      } else {
        if (currentLines + child.lines > chunk)
          flush();
        currentLines += child.lines;
        currentLen += child.length + 1;
        currentChunk.push(child);
      }
    }
    function flush() {
      if (currentLines == 0)
        return;
      chunked.push(currentChunk.length == 1 ? currentChunk[0] : TextNode.from(currentChunk, currentLen));
      currentLen = -1;
      currentLines = currentChunk.length = 0;
    }
    for (let child of children)
      add(child);
    flush();
    return chunked.length == 1 ? chunked[0] : new TextNode(chunked, length);
  }
}
Text.empty = /* @__PURE__ */ new TextLeaf([""], 0);
function textLength(text) {
  let length = -1;
  for (let line of text)
    length += line.length + 1;
  return length;
}
function appendText(text, target, from = 0, to = 1e9) {
  for (let pos = 0, i = 0, first = true;i < text.length && pos <= to; i++) {
    let line = text[i], end = pos + line.length;
    if (end >= from) {
      if (end > to)
        line = line.slice(0, to - pos);
      if (pos < from)
        line = line.slice(from - pos);
      if (first) {
        target[target.length - 1] += line;
        first = false;
      } else
        target.push(line);
    }
    pos = end + 1;
  }
  return target;
}
function sliceText(text, from, to) {
  return appendText(text, [""], from, to);
}

class RawTextCursor {
  constructor(text, dir = 1) {
    this.dir = dir;
    this.done = false;
    this.lineBreak = false;
    this.value = "";
    this.nodes = [text];
    this.offsets = [dir > 0 ? 1 : (text instanceof TextLeaf ? text.text.length : text.children.length) << 1];
  }
  nextInner(skip, dir) {
    this.done = this.lineBreak = false;
    for (;; ) {
      let last = this.nodes.length - 1;
      let top = this.nodes[last], offsetValue = this.offsets[last], offset = offsetValue >> 1;
      let size = top instanceof TextLeaf ? top.text.length : top.children.length;
      if (offset == (dir > 0 ? size : 0)) {
        if (last == 0) {
          this.done = true;
          this.value = "";
          return this;
        }
        if (dir > 0)
          this.offsets[last - 1]++;
        this.nodes.pop();
        this.offsets.pop();
      } else if ((offsetValue & 1) == (dir > 0 ? 0 : 1)) {
        this.offsets[last] += dir;
        if (skip == 0) {
          this.lineBreak = true;
          this.value = `
`;
          return this;
        }
        skip--;
      } else if (top instanceof TextLeaf) {
        let next = top.text[offset + (dir < 0 ? -1 : 0)];
        this.offsets[last] += dir;
        if (next.length > Math.max(0, skip)) {
          this.value = skip == 0 ? next : dir > 0 ? next.slice(skip) : next.slice(0, next.length - skip);
          return this;
        }
        skip -= next.length;
      } else {
        let next = top.children[offset + (dir < 0 ? -1 : 0)];
        if (skip > next.length) {
          skip -= next.length;
          this.offsets[last] += dir;
        } else {
          if (dir < 0)
            this.offsets[last]--;
          this.nodes.push(next);
          this.offsets.push(dir > 0 ? 1 : (next instanceof TextLeaf ? next.text.length : next.children.length) << 1);
        }
      }
    }
  }
  next(skip = 0) {
    if (skip < 0) {
      this.nextInner(-skip, -this.dir);
      skip = this.value.length;
    }
    return this.nextInner(skip, this.dir);
  }
}

class PartialTextCursor {
  constructor(text, start, end) {
    this.value = "";
    this.done = false;
    this.cursor = new RawTextCursor(text, start > end ? -1 : 1);
    this.pos = start > end ? text.length : 0;
    this.from = Math.min(start, end);
    this.to = Math.max(start, end);
  }
  nextInner(skip, dir) {
    if (dir < 0 ? this.pos <= this.from : this.pos >= this.to) {
      this.value = "";
      this.done = true;
      return this;
    }
    skip += Math.max(0, dir < 0 ? this.pos - this.to : this.from - this.pos);
    let limit = dir < 0 ? this.pos - this.from : this.to - this.pos;
    if (skip > limit)
      skip = limit;
    limit -= skip;
    let { value } = this.cursor.next(skip);
    this.pos += (value.length + skip) * dir;
    this.value = value.length <= limit ? value : dir < 0 ? value.slice(value.length - limit) : value.slice(0, limit);
    this.done = !this.value;
    return this;
  }
  next(skip = 0) {
    if (skip < 0)
      skip = Math.max(skip, this.from - this.pos);
    else if (skip > 0)
      skip = Math.min(skip, this.to - this.pos);
    return this.nextInner(skip, this.cursor.dir);
  }
  get lineBreak() {
    return this.cursor.lineBreak && this.value != "";
  }
}

class LineCursor {
  constructor(inner) {
    this.inner = inner;
    this.afterBreak = true;
    this.value = "";
    this.done = false;
  }
  next(skip = 0) {
    let { done, lineBreak, value } = this.inner.next(skip);
    if (done && this.afterBreak) {
      this.value = "";
      this.afterBreak = false;
    } else if (done) {
      this.done = true;
      this.value = "";
    } else if (lineBreak) {
      if (this.afterBreak) {
        this.value = "";
      } else {
        this.afterBreak = true;
        this.next();
      }
    } else {
      this.value = value;
      this.afterBreak = false;
    }
    return this;
  }
  get lineBreak() {
    return false;
  }
}
if (typeof Symbol != "undefined") {
  Text.prototype[Symbol.iterator] = function() {
    return this.iter();
  };
  RawTextCursor.prototype[Symbol.iterator] = PartialTextCursor.prototype[Symbol.iterator] = LineCursor.prototype[Symbol.iterator] = function() {
    return this;
  };
}

class Line {
  constructor(from, to, number, text) {
    this.from = from;
    this.to = to;
    this.number = number;
    this.text = text;
  }
  get length() {
    return this.to - this.from;
  }
}
function clip(text, from, to) {
  from = Math.max(0, Math.min(text.length, from));
  return [from, Math.max(from, Math.min(text.length, to))];
}
function findClusterBreak2(str, pos, forward = true, includeExtending = true) {
  return findClusterBreak(str, pos, forward, includeExtending);
}
function surrogateLow2(ch) {
  return ch >= 56320 && ch < 57344;
}
function surrogateHigh2(ch) {
  return ch >= 55296 && ch < 56320;
}
function codePointAt2(str, pos) {
  let code0 = str.charCodeAt(pos);
  if (!surrogateHigh2(code0) || pos + 1 == str.length)
    return code0;
  let code1 = str.charCodeAt(pos + 1);
  if (!surrogateLow2(code1))
    return code0;
  return (code0 - 55296 << 10) + (code1 - 56320) + 65536;
}
function fromCodePoint(code) {
  if (code <= 65535)
    return String.fromCharCode(code);
  code -= 65536;
  return String.fromCharCode((code >> 10) + 55296, (code & 1023) + 56320);
}
function codePointSize2(code) {
  return code < 65536 ? 1 : 2;
}
var DefaultSplit = /\r\n?|\n/;
var MapMode = /* @__PURE__ */ function(MapMode2) {
  MapMode2[MapMode2["Simple"] = 0] = "Simple";
  MapMode2[MapMode2["TrackDel"] = 1] = "TrackDel";
  MapMode2[MapMode2["TrackBefore"] = 2] = "TrackBefore";
  MapMode2[MapMode2["TrackAfter"] = 3] = "TrackAfter";
  return MapMode2;
}(MapMode || (MapMode = {}));

class ChangeDesc {
  constructor(sections) {
    this.sections = sections;
  }
  get length() {
    let result = 0;
    for (let i = 0;i < this.sections.length; i += 2)
      result += this.sections[i];
    return result;
  }
  get newLength() {
    let result = 0;
    for (let i = 0;i < this.sections.length; i += 2) {
      let ins = this.sections[i + 1];
      result += ins < 0 ? this.sections[i] : ins;
    }
    return result;
  }
  get empty() {
    return this.sections.length == 0 || this.sections.length == 2 && this.sections[1] < 0;
  }
  iterGaps(f) {
    for (let i = 0, posA = 0, posB = 0;i < this.sections.length; ) {
      let len = this.sections[i++], ins = this.sections[i++];
      if (ins < 0) {
        f(posA, posB, len);
        posB += len;
      } else {
        posB += ins;
      }
      posA += len;
    }
  }
  iterChangedRanges(f, individual = false) {
    iterChanges(this, f, individual);
  }
  get invertedDesc() {
    let sections = [];
    for (let i = 0;i < this.sections.length; ) {
      let len = this.sections[i++], ins = this.sections[i++];
      if (ins < 0)
        sections.push(len, ins);
      else
        sections.push(ins, len);
    }
    return new ChangeDesc(sections);
  }
  composeDesc(other) {
    return this.empty ? other : other.empty ? this : composeSets(this, other);
  }
  mapDesc(other, before = false) {
    return other.empty ? this : mapSet(this, other, before);
  }
  mapPos(pos, assoc = -1, mode = MapMode.Simple) {
    let posA = 0, posB = 0;
    for (let i = 0;i < this.sections.length; ) {
      let len = this.sections[i++], ins = this.sections[i++], endA = posA + len;
      if (ins < 0) {
        if (endA > pos)
          return posB + (pos - posA);
        posB += len;
      } else {
        if (mode != MapMode.Simple && endA >= pos && (mode == MapMode.TrackDel && posA < pos && endA > pos || mode == MapMode.TrackBefore && posA < pos || mode == MapMode.TrackAfter && endA > pos))
          return null;
        if (endA > pos || endA == pos && assoc < 0 && !len)
          return pos == posA || assoc < 0 ? posB : posB + ins;
        posB += ins;
      }
      posA = endA;
    }
    if (pos > posA)
      throw new RangeError(`Position ${pos} is out of range for changeset of length ${posA}`);
    return posB;
  }
  touchesRange(from, to = from) {
    for (let i = 0, pos = 0;i < this.sections.length && pos <= to; ) {
      let len = this.sections[i++], ins = this.sections[i++], end = pos + len;
      if (ins >= 0 && pos <= to && end >= from)
        return pos < from && end > to ? "cover" : true;
      pos = end;
    }
    return false;
  }
  toString() {
    let result = "";
    for (let i = 0;i < this.sections.length; ) {
      let len = this.sections[i++], ins = this.sections[i++];
      result += (result ? " " : "") + len + (ins >= 0 ? ":" + ins : "");
    }
    return result;
  }
  toJSON() {
    return this.sections;
  }
  static fromJSON(json) {
    if (!Array.isArray(json) || json.length % 2 || json.some((a) => typeof a != "number"))
      throw new RangeError("Invalid JSON representation of ChangeDesc");
    return new ChangeDesc(json);
  }
  static create(sections) {
    return new ChangeDesc(sections);
  }
}

class ChangeSet extends ChangeDesc {
  constructor(sections, inserted) {
    super(sections);
    this.inserted = inserted;
  }
  apply(doc) {
    if (this.length != doc.length)
      throw new RangeError("Applying change set to a document with the wrong length");
    iterChanges(this, (fromA, toA, fromB, _toB, text) => doc = doc.replace(fromB, fromB + (toA - fromA), text), false);
    return doc;
  }
  mapDesc(other, before = false) {
    return mapSet(this, other, before, true);
  }
  invert(doc) {
    let sections = this.sections.slice(), inserted = [];
    for (let i = 0, pos = 0;i < sections.length; i += 2) {
      let len = sections[i], ins = sections[i + 1];
      if (ins >= 0) {
        sections[i] = ins;
        sections[i + 1] = len;
        let index = i >> 1;
        while (inserted.length < index)
          inserted.push(Text.empty);
        inserted.push(len ? doc.slice(pos, pos + len) : Text.empty);
      }
      pos += len;
    }
    return new ChangeSet(sections, inserted);
  }
  compose(other) {
    return this.empty ? other : other.empty ? this : composeSets(this, other, true);
  }
  map(other, before = false) {
    return other.empty ? this : mapSet(this, other, before, true);
  }
  iterChanges(f, individual = false) {
    iterChanges(this, f, individual);
  }
  get desc() {
    return ChangeDesc.create(this.sections);
  }
  filter(ranges) {
    let resultSections = [], resultInserted = [], filteredSections = [];
    let iter = new SectionIter(this);
    done:
      for (let i = 0, pos = 0;; ) {
        let next = i == ranges.length ? 1e9 : ranges[i++];
        while (pos < next || pos == next && iter.len == 0) {
          if (iter.done)
            break done;
          let len = Math.min(iter.len, next - pos);
          addSection(filteredSections, len, -1);
          let ins = iter.ins == -1 ? -1 : iter.off == 0 ? iter.ins : 0;
          addSection(resultSections, len, ins);
          if (ins > 0)
            addInsert(resultInserted, resultSections, iter.text);
          iter.forward(len);
          pos += len;
        }
        let end = ranges[i++];
        while (pos < end) {
          if (iter.done)
            break done;
          let len = Math.min(iter.len, end - pos);
          addSection(resultSections, len, -1);
          addSection(filteredSections, len, iter.ins == -1 ? -1 : iter.off == 0 ? iter.ins : 0);
          iter.forward(len);
          pos += len;
        }
      }
    return {
      changes: new ChangeSet(resultSections, resultInserted),
      filtered: ChangeDesc.create(filteredSections)
    };
  }
  toJSON() {
    let parts = [];
    for (let i = 0;i < this.sections.length; i += 2) {
      let len = this.sections[i], ins = this.sections[i + 1];
      if (ins < 0)
        parts.push(len);
      else if (ins == 0)
        parts.push([len]);
      else
        parts.push([len].concat(this.inserted[i >> 1].toJSON()));
    }
    return parts;
  }
  static of(changes, length, lineSep) {
    let sections = [], inserted = [], pos = 0;
    let total = null;
    function flush(force = false) {
      if (!force && !sections.length)
        return;
      if (pos < length)
        addSection(sections, length - pos, -1);
      let set = new ChangeSet(sections, inserted);
      total = total ? total.compose(set.map(total)) : set;
      sections = [];
      inserted = [];
      pos = 0;
    }
    function process2(spec) {
      if (Array.isArray(spec)) {
        for (let sub of spec)
          process2(sub);
      } else if (spec instanceof ChangeSet) {
        if (spec.length != length)
          throw new RangeError(`Mismatched change set length (got ${spec.length}, expected ${length})`);
        flush();
        total = total ? total.compose(spec.map(total)) : spec;
      } else {
        let { from, to = from, insert } = spec;
        if (from > to || from < 0 || to > length)
          throw new RangeError(`Invalid change range ${from} to ${to} (in doc of length ${length})`);
        let insText = !insert ? Text.empty : typeof insert == "string" ? Text.of(insert.split(lineSep || DefaultSplit)) : insert;
        let insLen = insText.length;
        if (from == to && insLen == 0)
          return;
        if (from < pos)
          flush();
        if (from > pos)
          addSection(sections, from - pos, -1);
        addSection(sections, to - from, insLen);
        addInsert(inserted, sections, insText);
        pos = to;
      }
    }
    process2(changes);
    flush(!total);
    return total;
  }
  static empty(length) {
    return new ChangeSet(length ? [length, -1] : [], []);
  }
  static fromJSON(json) {
    if (!Array.isArray(json))
      throw new RangeError("Invalid JSON representation of ChangeSet");
    let sections = [], inserted = [];
    for (let i = 0;i < json.length; i++) {
      let part = json[i];
      if (typeof part == "number") {
        sections.push(part, -1);
      } else if (!Array.isArray(part) || typeof part[0] != "number" || part.some((e, i2) => i2 && typeof e != "string")) {
        throw new RangeError("Invalid JSON representation of ChangeSet");
      } else if (part.length == 1) {
        sections.push(part[0], 0);
      } else {
        while (inserted.length < i)
          inserted.push(Text.empty);
        inserted[i] = Text.of(part.slice(1));
        sections.push(part[0], inserted[i].length);
      }
    }
    return new ChangeSet(sections, inserted);
  }
  static createSet(sections, inserted) {
    return new ChangeSet(sections, inserted);
  }
}
function addSection(sections, len, ins, forceJoin = false) {
  if (len == 0 && ins <= 0)
    return;
  let last = sections.length - 2;
  if (last >= 0 && ins <= 0 && ins == sections[last + 1])
    sections[last] += len;
  else if (last >= 0 && len == 0 && sections[last] == 0)
    sections[last + 1] += ins;
  else if (forceJoin) {
    sections[last] += len;
    sections[last + 1] += ins;
  } else
    sections.push(len, ins);
}
function addInsert(values, sections, value) {
  if (value.length == 0)
    return;
  let index = sections.length - 2 >> 1;
  if (index < values.length) {
    values[values.length - 1] = values[values.length - 1].append(value);
  } else {
    while (values.length < index)
      values.push(Text.empty);
    values.push(value);
  }
}
function iterChanges(desc, f, individual) {
  let inserted = desc.inserted;
  for (let posA = 0, posB = 0, i = 0;i < desc.sections.length; ) {
    let len = desc.sections[i++], ins = desc.sections[i++];
    if (ins < 0) {
      posA += len;
      posB += len;
    } else {
      let endA = posA, endB = posB, text = Text.empty;
      for (;; ) {
        endA += len;
        endB += ins;
        if (ins && inserted)
          text = text.append(inserted[i - 2 >> 1]);
        if (individual || i == desc.sections.length || desc.sections[i + 1] < 0)
          break;
        len = desc.sections[i++];
        ins = desc.sections[i++];
      }
      f(posA, endA, posB, endB, text);
      posA = endA;
      posB = endB;
    }
  }
}
function mapSet(setA, setB, before, mkSet = false) {
  let sections = [], insert = mkSet ? [] : null;
  let a = new SectionIter(setA), b = new SectionIter(setB);
  for (let inserted = -1;; ) {
    if (a.done && b.len || b.done && a.len) {
      throw new Error("Mismatched change set lengths");
    } else if (a.ins == -1 && b.ins == -1) {
      let len = Math.min(a.len, b.len);
      addSection(sections, len, -1);
      a.forward(len);
      b.forward(len);
    } else if (b.ins >= 0 && (a.ins < 0 || inserted == a.i || a.off == 0 && (b.len < a.len || b.len == a.len && !before))) {
      let len = b.len;
      addSection(sections, b.ins, -1);
      while (len) {
        let piece = Math.min(a.len, len);
        if (a.ins >= 0 && inserted < a.i && a.len <= piece) {
          addSection(sections, 0, a.ins);
          if (insert)
            addInsert(insert, sections, a.text);
          inserted = a.i;
        }
        a.forward(piece);
        len -= piece;
      }
      b.next();
    } else if (a.ins >= 0) {
      let len = 0, left = a.len;
      while (left) {
        if (b.ins == -1) {
          let piece = Math.min(left, b.len);
          len += piece;
          left -= piece;
          b.forward(piece);
        } else if (b.ins == 0 && b.len < left) {
          left -= b.len;
          b.next();
        } else {
          break;
        }
      }
      addSection(sections, len, inserted < a.i ? a.ins : 0);
      if (insert && inserted < a.i)
        addInsert(insert, sections, a.text);
      inserted = a.i;
      a.forward(a.len - left);
    } else if (a.done && b.done) {
      return insert ? ChangeSet.createSet(sections, insert) : ChangeDesc.create(sections);
    } else {
      throw new Error("Mismatched change set lengths");
    }
  }
}
function composeSets(setA, setB, mkSet = false) {
  let sections = [];
  let insert = mkSet ? [] : null;
  let a = new SectionIter(setA), b = new SectionIter(setB);
  for (let open = false;; ) {
    if (a.done && b.done) {
      return insert ? ChangeSet.createSet(sections, insert) : ChangeDesc.create(sections);
    } else if (a.ins == 0) {
      addSection(sections, a.len, 0, open);
      a.next();
    } else if (b.len == 0 && !b.done) {
      addSection(sections, 0, b.ins, open);
      if (insert)
        addInsert(insert, sections, b.text);
      b.next();
    } else if (a.done || b.done) {
      throw new Error("Mismatched change set lengths");
    } else {
      let len = Math.min(a.len2, b.len), sectionLen = sections.length;
      if (a.ins == -1) {
        let insB = b.ins == -1 ? -1 : b.off ? 0 : b.ins;
        addSection(sections, len, insB, open);
        if (insert && insB)
          addInsert(insert, sections, b.text);
      } else if (b.ins == -1) {
        addSection(sections, a.off ? 0 : a.len, len, open);
        if (insert)
          addInsert(insert, sections, a.textBit(len));
      } else {
        addSection(sections, a.off ? 0 : a.len, b.off ? 0 : b.ins, open);
        if (insert && !b.off)
          addInsert(insert, sections, b.text);
      }
      open = (a.ins > len || b.ins >= 0 && b.len > len) && (open || sections.length > sectionLen);
      a.forward2(len);
      b.forward(len);
    }
  }
}

class SectionIter {
  constructor(set) {
    this.set = set;
    this.i = 0;
    this.next();
  }
  next() {
    let { sections } = this.set;
    if (this.i < sections.length) {
      this.len = sections[this.i++];
      this.ins = sections[this.i++];
    } else {
      this.len = 0;
      this.ins = -2;
    }
    this.off = 0;
  }
  get done() {
    return this.ins == -2;
  }
  get len2() {
    return this.ins < 0 ? this.len : this.ins;
  }
  get text() {
    let { inserted } = this.set, index = this.i - 2 >> 1;
    return index >= inserted.length ? Text.empty : inserted[index];
  }
  textBit(len) {
    let { inserted } = this.set, index = this.i - 2 >> 1;
    return index >= inserted.length && !len ? Text.empty : inserted[index].slice(this.off, len == null ? undefined : this.off + len);
  }
  forward(len) {
    if (len == this.len)
      this.next();
    else {
      this.len -= len;
      this.off += len;
    }
  }
  forward2(len) {
    if (this.ins == -1)
      this.forward(len);
    else if (len == this.ins)
      this.next();
    else {
      this.ins -= len;
      this.off += len;
    }
  }
}

class SelectionRange {
  constructor(from, to, flags) {
    this.from = from;
    this.to = to;
    this.flags = flags;
  }
  get anchor() {
    return this.flags & 32 ? this.to : this.from;
  }
  get head() {
    return this.flags & 32 ? this.from : this.to;
  }
  get empty() {
    return this.from == this.to;
  }
  get assoc() {
    return this.flags & 8 ? -1 : this.flags & 16 ? 1 : 0;
  }
  get bidiLevel() {
    let level = this.flags & 7;
    return level == 7 ? null : level;
  }
  get goalColumn() {
    let value = this.flags >> 6;
    return value == 16777215 ? undefined : value;
  }
  map(change, assoc = -1) {
    let from, to;
    if (this.empty) {
      from = to = change.mapPos(this.from, assoc);
    } else {
      from = change.mapPos(this.from, 1);
      to = change.mapPos(this.to, -1);
    }
    return from == this.from && to == this.to ? this : new SelectionRange(from, to, this.flags);
  }
  extend(from, to = from) {
    if (from <= this.anchor && to >= this.anchor)
      return EditorSelection.range(from, to);
    let head = Math.abs(from - this.anchor) > Math.abs(to - this.anchor) ? from : to;
    return EditorSelection.range(this.anchor, head);
  }
  eq(other, includeAssoc = false) {
    return this.anchor == other.anchor && this.head == other.head && (!includeAssoc || !this.empty || this.assoc == other.assoc);
  }
  toJSON() {
    return { anchor: this.anchor, head: this.head };
  }
  static fromJSON(json) {
    if (!json || typeof json.anchor != "number" || typeof json.head != "number")
      throw new RangeError("Invalid JSON representation for SelectionRange");
    return EditorSelection.range(json.anchor, json.head);
  }
  static create(from, to, flags) {
    return new SelectionRange(from, to, flags);
  }
}

class EditorSelection {
  constructor(ranges, mainIndex) {
    this.ranges = ranges;
    this.mainIndex = mainIndex;
  }
  map(change, assoc = -1) {
    if (change.empty)
      return this;
    return EditorSelection.create(this.ranges.map((r) => r.map(change, assoc)), this.mainIndex);
  }
  eq(other, includeAssoc = false) {
    if (this.ranges.length != other.ranges.length || this.mainIndex != other.mainIndex)
      return false;
    for (let i = 0;i < this.ranges.length; i++)
      if (!this.ranges[i].eq(other.ranges[i], includeAssoc))
        return false;
    return true;
  }
  get main() {
    return this.ranges[this.mainIndex];
  }
  asSingle() {
    return this.ranges.length == 1 ? this : new EditorSelection([this.main], 0);
  }
  addRange(range, main = true) {
    return EditorSelection.create([range].concat(this.ranges), main ? 0 : this.mainIndex + 1);
  }
  replaceRange(range, which = this.mainIndex) {
    let ranges = this.ranges.slice();
    ranges[which] = range;
    return EditorSelection.create(ranges, this.mainIndex);
  }
  toJSON() {
    return { ranges: this.ranges.map((r) => r.toJSON()), main: this.mainIndex };
  }
  static fromJSON(json) {
    if (!json || !Array.isArray(json.ranges) || typeof json.main != "number" || json.main >= json.ranges.length)
      throw new RangeError("Invalid JSON representation for EditorSelection");
    return new EditorSelection(json.ranges.map((r) => SelectionRange.fromJSON(r)), json.main);
  }
  static single(anchor, head = anchor) {
    return new EditorSelection([EditorSelection.range(anchor, head)], 0);
  }
  static create(ranges, mainIndex = 0) {
    if (ranges.length == 0)
      throw new RangeError("A selection needs at least one range");
    for (let pos = 0, i = 0;i < ranges.length; i++) {
      let range = ranges[i];
      if (range.empty ? range.from <= pos : range.from < pos)
        return EditorSelection.normalized(ranges.slice(), mainIndex);
      pos = range.to;
    }
    return new EditorSelection(ranges, mainIndex);
  }
  static cursor(pos, assoc = 0, bidiLevel, goalColumn) {
    return SelectionRange.create(pos, pos, (assoc == 0 ? 0 : assoc < 0 ? 8 : 16) | (bidiLevel == null ? 7 : Math.min(6, bidiLevel)) | (goalColumn !== null && goalColumn !== undefined ? goalColumn : 16777215) << 6);
  }
  static range(anchor, head, goalColumn, bidiLevel) {
    let flags = (goalColumn !== null && goalColumn !== undefined ? goalColumn : 16777215) << 6 | (bidiLevel == null ? 7 : Math.min(6, bidiLevel));
    return head < anchor ? SelectionRange.create(head, anchor, 32 | 16 | flags) : SelectionRange.create(anchor, head, (head > anchor ? 8 : 0) | flags);
  }
  static normalized(ranges, mainIndex = 0) {
    let main = ranges[mainIndex];
    ranges.sort((a, b) => a.from - b.from);
    mainIndex = ranges.indexOf(main);
    for (let i = 1;i < ranges.length; i++) {
      let range = ranges[i], prev = ranges[i - 1];
      if (range.empty ? range.from <= prev.to : range.from < prev.to) {
        let from = prev.from, to = Math.max(range.to, prev.to);
        if (i <= mainIndex)
          mainIndex--;
        ranges.splice(--i, 2, range.anchor > range.head ? EditorSelection.range(to, from) : EditorSelection.range(from, to));
      }
    }
    return new EditorSelection(ranges, mainIndex);
  }
}
function checkSelection(selection, docLength) {
  for (let range of selection.ranges)
    if (range.to > docLength)
      throw new RangeError("Selection points outside of document");
}
var nextID = 0;

class Facet {
  constructor(combine, compareInput, compare, isStatic, enables) {
    this.combine = combine;
    this.compareInput = compareInput;
    this.compare = compare;
    this.isStatic = isStatic;
    this.id = nextID++;
    this.default = combine([]);
    this.extensions = typeof enables == "function" ? enables(this) : enables;
  }
  get reader() {
    return this;
  }
  static define(config = {}) {
    return new Facet(config.combine || ((a) => a), config.compareInput || ((a, b) => a === b), config.compare || (!config.combine ? sameArray : (a, b) => a === b), !!config.static, config.enables);
  }
  of(value) {
    return new FacetProvider([], this, 0, value);
  }
  compute(deps, get) {
    if (this.isStatic)
      throw new Error("Can't compute a static facet");
    return new FacetProvider(deps, this, 1, get);
  }
  computeN(deps, get) {
    if (this.isStatic)
      throw new Error("Can't compute a static facet");
    return new FacetProvider(deps, this, 2, get);
  }
  from(field, get) {
    if (!get)
      get = (x) => x;
    return this.compute([field], (state) => get(state.field(field)));
  }
}
function sameArray(a, b) {
  return a == b || a.length == b.length && a.every((e, i) => e === b[i]);
}

class FacetProvider {
  constructor(dependencies, facet, type, value) {
    this.dependencies = dependencies;
    this.facet = facet;
    this.type = type;
    this.value = value;
    this.id = nextID++;
  }
  dynamicSlot(addresses) {
    var _a;
    let getter = this.value;
    let compare = this.facet.compareInput;
    let id = this.id, idx = addresses[id] >> 1, multi = this.type == 2;
    let depDoc = false, depSel = false, depAddrs = [];
    for (let dep of this.dependencies) {
      if (dep == "doc")
        depDoc = true;
      else if (dep == "selection")
        depSel = true;
      else if ((((_a = addresses[dep.id]) !== null && _a !== undefined ? _a : 1) & 1) == 0)
        depAddrs.push(addresses[dep.id]);
    }
    return {
      create(state) {
        state.values[idx] = getter(state);
        return 1;
      },
      update(state, tr) {
        if (depDoc && tr.docChanged || depSel && (tr.docChanged || tr.selection) || ensureAll(state, depAddrs)) {
          let newVal = getter(state);
          if (multi ? !compareArray(newVal, state.values[idx], compare) : !compare(newVal, state.values[idx])) {
            state.values[idx] = newVal;
            return 1;
          }
        }
        return 0;
      },
      reconfigure: (state, oldState) => {
        let newVal, oldAddr = oldState.config.address[id];
        if (oldAddr != null) {
          let oldVal = getAddr(oldState, oldAddr);
          if (this.dependencies.every((dep) => {
            return dep instanceof Facet ? oldState.facet(dep) === state.facet(dep) : dep instanceof StateField ? oldState.field(dep, false) == state.field(dep, false) : true;
          }) || (multi ? compareArray(newVal = getter(state), oldVal, compare) : compare(newVal = getter(state), oldVal))) {
            state.values[idx] = oldVal;
            return 0;
          }
        } else {
          newVal = getter(state);
        }
        state.values[idx] = newVal;
        return 1;
      }
    };
  }
}
function compareArray(a, b, compare) {
  if (a.length != b.length)
    return false;
  for (let i = 0;i < a.length; i++)
    if (!compare(a[i], b[i]))
      return false;
  return true;
}
function ensureAll(state, addrs) {
  let changed = false;
  for (let addr of addrs)
    if (ensureAddr(state, addr) & 1)
      changed = true;
  return changed;
}
function dynamicFacetSlot(addresses, facet, providers) {
  let providerAddrs = providers.map((p) => addresses[p.id]);
  let providerTypes = providers.map((p) => p.type);
  let dynamic = providerAddrs.filter((p) => !(p & 1));
  let idx = addresses[facet.id] >> 1;
  function get(state) {
    let values = [];
    for (let i = 0;i < providerAddrs.length; i++) {
      let value = getAddr(state, providerAddrs[i]);
      if (providerTypes[i] == 2)
        for (let val of value)
          values.push(val);
      else
        values.push(value);
    }
    return facet.combine(values);
  }
  return {
    create(state) {
      for (let addr of providerAddrs)
        ensureAddr(state, addr);
      state.values[idx] = get(state);
      return 1;
    },
    update(state, tr) {
      if (!ensureAll(state, dynamic))
        return 0;
      let value = get(state);
      if (facet.compare(value, state.values[idx]))
        return 0;
      state.values[idx] = value;
      return 1;
    },
    reconfigure(state, oldState) {
      let depChanged = ensureAll(state, providerAddrs);
      let oldProviders = oldState.config.facets[facet.id], oldValue = oldState.facet(facet);
      if (oldProviders && !depChanged && sameArray(providers, oldProviders)) {
        state.values[idx] = oldValue;
        return 0;
      }
      let value = get(state);
      if (facet.compare(value, oldValue)) {
        state.values[idx] = oldValue;
        return 0;
      }
      state.values[idx] = value;
      return 1;
    }
  };
}
var initField = /* @__PURE__ */ Facet.define({ static: true });

class StateField {
  constructor(id, createF, updateF, compareF, spec) {
    this.id = id;
    this.createF = createF;
    this.updateF = updateF;
    this.compareF = compareF;
    this.spec = spec;
    this.provides = undefined;
  }
  static define(config) {
    let field = new StateField(nextID++, config.create, config.update, config.compare || ((a, b) => a === b), config);
    if (config.provide)
      field.provides = config.provide(field);
    return field;
  }
  create(state) {
    let init = state.facet(initField).find((i) => i.field == this);
    return ((init === null || init === undefined ? undefined : init.create) || this.createF)(state);
  }
  slot(addresses) {
    let idx = addresses[this.id] >> 1;
    return {
      create: (state) => {
        state.values[idx] = this.create(state);
        return 1;
      },
      update: (state, tr) => {
        let oldVal = state.values[idx];
        let value = this.updateF(oldVal, tr);
        if (this.compareF(oldVal, value))
          return 0;
        state.values[idx] = value;
        return 1;
      },
      reconfigure: (state, oldState) => {
        let init = state.facet(initField), oldInit = oldState.facet(initField), reInit;
        if ((reInit = init.find((i) => i.field == this)) && reInit != oldInit.find((i) => i.field == this)) {
          state.values[idx] = reInit.create(state);
          return 1;
        }
        if (oldState.config.address[this.id] != null) {
          state.values[idx] = oldState.field(this);
          return 0;
        }
        state.values[idx] = this.create(state);
        return 1;
      }
    };
  }
  init(create) {
    return [this, initField.of({ field: this, create })];
  }
  get extension() {
    return this;
  }
}
var Prec_ = { lowest: 4, low: 3, default: 2, high: 1, highest: 0 };
function prec(value) {
  return (ext) => new PrecExtension(ext, value);
}
var Prec = {
  highest: /* @__PURE__ */ prec(Prec_.highest),
  high: /* @__PURE__ */ prec(Prec_.high),
  default: /* @__PURE__ */ prec(Prec_.default),
  low: /* @__PURE__ */ prec(Prec_.low),
  lowest: /* @__PURE__ */ prec(Prec_.lowest)
};

class PrecExtension {
  constructor(inner, prec2) {
    this.inner = inner;
    this.prec = prec2;
  }
}

class Compartment {
  of(ext) {
    return new CompartmentInstance(this, ext);
  }
  reconfigure(content) {
    return Compartment.reconfigure.of({ compartment: this, extension: content });
  }
  get(state) {
    return state.config.compartments.get(this);
  }
}

class CompartmentInstance {
  constructor(compartment, inner) {
    this.compartment = compartment;
    this.inner = inner;
  }
}

class Configuration {
  constructor(base, compartments, dynamicSlots, address, staticValues, facets) {
    this.base = base;
    this.compartments = compartments;
    this.dynamicSlots = dynamicSlots;
    this.address = address;
    this.staticValues = staticValues;
    this.facets = facets;
    this.statusTemplate = [];
    while (this.statusTemplate.length < dynamicSlots.length)
      this.statusTemplate.push(0);
  }
  staticFacet(facet) {
    let addr = this.address[facet.id];
    return addr == null ? facet.default : this.staticValues[addr >> 1];
  }
  static resolve(base, compartments, oldState) {
    let fields = [];
    let facets = Object.create(null);
    let newCompartments = new Map;
    for (let ext of flatten(base, compartments, newCompartments)) {
      if (ext instanceof StateField)
        fields.push(ext);
      else
        (facets[ext.facet.id] || (facets[ext.facet.id] = [])).push(ext);
    }
    let address = Object.create(null);
    let staticValues = [];
    let dynamicSlots = [];
    for (let field of fields) {
      address[field.id] = dynamicSlots.length << 1;
      dynamicSlots.push((a) => field.slot(a));
    }
    let oldFacets = oldState === null || oldState === undefined ? undefined : oldState.config.facets;
    for (let id in facets) {
      let providers = facets[id], facet = providers[0].facet;
      let oldProviders = oldFacets && oldFacets[id] || [];
      if (providers.every((p) => p.type == 0)) {
        address[facet.id] = staticValues.length << 1 | 1;
        if (sameArray(oldProviders, providers)) {
          staticValues.push(oldState.facet(facet));
        } else {
          let value = facet.combine(providers.map((p) => p.value));
          staticValues.push(oldState && facet.compare(value, oldState.facet(facet)) ? oldState.facet(facet) : value);
        }
      } else {
        for (let p of providers) {
          if (p.type == 0) {
            address[p.id] = staticValues.length << 1 | 1;
            staticValues.push(p.value);
          } else {
            address[p.id] = dynamicSlots.length << 1;
            dynamicSlots.push((a) => p.dynamicSlot(a));
          }
        }
        address[facet.id] = dynamicSlots.length << 1;
        dynamicSlots.push((a) => dynamicFacetSlot(a, facet, providers));
      }
    }
    let dynamic = dynamicSlots.map((f) => f(address));
    return new Configuration(base, newCompartments, dynamic, address, staticValues, facets);
  }
}
function flatten(extension, compartments, newCompartments) {
  let result = [[], [], [], [], []];
  let seen = new Map;
  function inner(ext, prec2) {
    let known = seen.get(ext);
    if (known != null) {
      if (known <= prec2)
        return;
      let found = result[known].indexOf(ext);
      if (found > -1)
        result[known].splice(found, 1);
      if (ext instanceof CompartmentInstance)
        newCompartments.delete(ext.compartment);
    }
    seen.set(ext, prec2);
    if (Array.isArray(ext)) {
      for (let e of ext)
        inner(e, prec2);
    } else if (ext instanceof CompartmentInstance) {
      if (newCompartments.has(ext.compartment))
        throw new RangeError(`Duplicate use of compartment in extensions`);
      let content = compartments.get(ext.compartment) || ext.inner;
      newCompartments.set(ext.compartment, content);
      inner(content, prec2);
    } else if (ext instanceof PrecExtension) {
      inner(ext.inner, ext.prec);
    } else if (ext instanceof StateField) {
      result[prec2].push(ext);
      if (ext.provides)
        inner(ext.provides, prec2);
    } else if (ext instanceof FacetProvider) {
      result[prec2].push(ext);
      if (ext.facet.extensions)
        inner(ext.facet.extensions, Prec_.default);
    } else {
      let content = ext.extension;
      if (!content)
        throw new Error(`Unrecognized extension value in extension set (${ext}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);
      inner(content, prec2);
    }
  }
  inner(extension, Prec_.default);
  return result.reduce((a, b) => a.concat(b));
}
function ensureAddr(state, addr) {
  if (addr & 1)
    return 2;
  let idx = addr >> 1;
  let status = state.status[idx];
  if (status == 4)
    throw new Error("Cyclic dependency between fields and/or facets");
  if (status & 2)
    return status;
  state.status[idx] = 4;
  let changed = state.computeSlot(state, state.config.dynamicSlots[idx]);
  return state.status[idx] = 2 | changed;
}
function getAddr(state, addr) {
  return addr & 1 ? state.config.staticValues[addr >> 1] : state.values[addr >> 1];
}
var languageData = /* @__PURE__ */ Facet.define();
var allowMultipleSelections = /* @__PURE__ */ Facet.define({
  combine: (values) => values.some((v) => v),
  static: true
});
var lineSeparator = /* @__PURE__ */ Facet.define({
  combine: (values) => values.length ? values[0] : undefined,
  static: true
});
var changeFilter = /* @__PURE__ */ Facet.define();
var transactionFilter = /* @__PURE__ */ Facet.define();
var transactionExtender = /* @__PURE__ */ Facet.define();
var readOnly = /* @__PURE__ */ Facet.define({
  combine: (values) => values.length ? values[0] : false
});

class Annotation {
  constructor(type, value) {
    this.type = type;
    this.value = value;
  }
  static define() {
    return new AnnotationType;
  }
}

class AnnotationType {
  of(value) {
    return new Annotation(this, value);
  }
}

class StateEffectType {
  constructor(map) {
    this.map = map;
  }
  of(value) {
    return new StateEffect(this, value);
  }
}

class StateEffect {
  constructor(type, value) {
    this.type = type;
    this.value = value;
  }
  map(mapping) {
    let mapped = this.type.map(this.value, mapping);
    return mapped === undefined ? undefined : mapped == this.value ? this : new StateEffect(this.type, mapped);
  }
  is(type) {
    return this.type == type;
  }
  static define(spec = {}) {
    return new StateEffectType(spec.map || ((v) => v));
  }
  static mapEffects(effects, mapping) {
    if (!effects.length)
      return effects;
    let result = [];
    for (let effect of effects) {
      let mapped = effect.map(mapping);
      if (mapped)
        result.push(mapped);
    }
    return result;
  }
}
StateEffect.reconfigure = /* @__PURE__ */ StateEffect.define();
StateEffect.appendConfig = /* @__PURE__ */ StateEffect.define();

class Transaction {
  constructor(startState, changes, selection, effects, annotations, scrollIntoView) {
    this.startState = startState;
    this.changes = changes;
    this.selection = selection;
    this.effects = effects;
    this.annotations = annotations;
    this.scrollIntoView = scrollIntoView;
    this._doc = null;
    this._state = null;
    if (selection)
      checkSelection(selection, changes.newLength);
    if (!annotations.some((a) => a.type == Transaction.time))
      this.annotations = annotations.concat(Transaction.time.of(Date.now()));
  }
  static create(startState, changes, selection, effects, annotations, scrollIntoView) {
    return new Transaction(startState, changes, selection, effects, annotations, scrollIntoView);
  }
  get newDoc() {
    return this._doc || (this._doc = this.changes.apply(this.startState.doc));
  }
  get newSelection() {
    return this.selection || this.startState.selection.map(this.changes);
  }
  get state() {
    if (!this._state)
      this.startState.applyTransaction(this);
    return this._state;
  }
  annotation(type) {
    for (let ann of this.annotations)
      if (ann.type == type)
        return ann.value;
    return;
  }
  get docChanged() {
    return !this.changes.empty;
  }
  get reconfigured() {
    return this.startState.config != this.state.config;
  }
  isUserEvent(event) {
    let e = this.annotation(Transaction.userEvent);
    return !!(e && (e == event || e.length > event.length && e.slice(0, event.length) == event && e[event.length] == "."));
  }
}
Transaction.time = /* @__PURE__ */ Annotation.define();
Transaction.userEvent = /* @__PURE__ */ Annotation.define();
Transaction.addToHistory = /* @__PURE__ */ Annotation.define();
Transaction.remote = /* @__PURE__ */ Annotation.define();
function joinRanges(a, b) {
  let result = [];
  for (let iA = 0, iB = 0;; ) {
    let from, to;
    if (iA < a.length && (iB == b.length || b[iB] >= a[iA])) {
      from = a[iA++];
      to = a[iA++];
    } else if (iB < b.length) {
      from = b[iB++];
      to = b[iB++];
    } else
      return result;
    if (!result.length || result[result.length - 1] < from)
      result.push(from, to);
    else if (result[result.length - 1] < to)
      result[result.length - 1] = to;
  }
}
function mergeTransaction(a, b, sequential) {
  var _a;
  let mapForA, mapForB, changes;
  if (sequential) {
    mapForA = b.changes;
    mapForB = ChangeSet.empty(b.changes.length);
    changes = a.changes.compose(b.changes);
  } else {
    mapForA = b.changes.map(a.changes);
    mapForB = a.changes.mapDesc(b.changes, true);
    changes = a.changes.compose(mapForA);
  }
  return {
    changes,
    selection: b.selection ? b.selection.map(mapForB) : (_a = a.selection) === null || _a === undefined ? undefined : _a.map(mapForA),
    effects: StateEffect.mapEffects(a.effects, mapForA).concat(StateEffect.mapEffects(b.effects, mapForB)),
    annotations: a.annotations.length ? a.annotations.concat(b.annotations) : b.annotations,
    scrollIntoView: a.scrollIntoView || b.scrollIntoView
  };
}
function resolveTransactionInner(state, spec, docSize) {
  let sel = spec.selection, annotations = asArray(spec.annotations);
  if (spec.userEvent)
    annotations = annotations.concat(Transaction.userEvent.of(spec.userEvent));
  return {
    changes: spec.changes instanceof ChangeSet ? spec.changes : ChangeSet.of(spec.changes || [], docSize, state.facet(lineSeparator)),
    selection: sel && (sel instanceof EditorSelection ? sel : EditorSelection.single(sel.anchor, sel.head)),
    effects: asArray(spec.effects),
    annotations,
    scrollIntoView: !!spec.scrollIntoView
  };
}
function resolveTransaction(state, specs, filter) {
  let s = resolveTransactionInner(state, specs.length ? specs[0] : {}, state.doc.length);
  if (specs.length && specs[0].filter === false)
    filter = false;
  for (let i = 1;i < specs.length; i++) {
    if (specs[i].filter === false)
      filter = false;
    let seq = !!specs[i].sequential;
    s = mergeTransaction(s, resolveTransactionInner(state, specs[i], seq ? s.changes.newLength : state.doc.length), seq);
  }
  let tr = Transaction.create(state, s.changes, s.selection, s.effects, s.annotations, s.scrollIntoView);
  return extendTransaction(filter ? filterTransaction(tr) : tr);
}
function filterTransaction(tr) {
  let state = tr.startState;
  let result = true;
  for (let filter of state.facet(changeFilter)) {
    let value = filter(tr);
    if (value === false) {
      result = false;
      break;
    }
    if (Array.isArray(value))
      result = result === true ? value : joinRanges(result, value);
  }
  if (result !== true) {
    let changes, back;
    if (result === false) {
      back = tr.changes.invertedDesc;
      changes = ChangeSet.empty(state.doc.length);
    } else {
      let filtered = tr.changes.filter(result);
      changes = filtered.changes;
      back = filtered.filtered.mapDesc(filtered.changes).invertedDesc;
    }
    tr = Transaction.create(state, changes, tr.selection && tr.selection.map(back), StateEffect.mapEffects(tr.effects, back), tr.annotations, tr.scrollIntoView);
  }
  let filters = state.facet(transactionFilter);
  for (let i = filters.length - 1;i >= 0; i--) {
    let filtered = filters[i](tr);
    if (filtered instanceof Transaction)
      tr = filtered;
    else if (Array.isArray(filtered) && filtered.length == 1 && filtered[0] instanceof Transaction)
      tr = filtered[0];
    else
      tr = resolveTransaction(state, asArray(filtered), false);
  }
  return tr;
}
function extendTransaction(tr) {
  let state = tr.startState, extenders = state.facet(transactionExtender), spec = tr;
  for (let i = extenders.length - 1;i >= 0; i--) {
    let extension = extenders[i](tr);
    if (extension && Object.keys(extension).length)
      spec = mergeTransaction(spec, resolveTransactionInner(state, extension, tr.changes.newLength), true);
  }
  return spec == tr ? tr : Transaction.create(state, tr.changes, tr.selection, spec.effects, spec.annotations, spec.scrollIntoView);
}
var none = [];
function asArray(value) {
  return value == null ? none : Array.isArray(value) ? value : [value];
}
var CharCategory = /* @__PURE__ */ function(CharCategory2) {
  CharCategory2[CharCategory2["Word"] = 0] = "Word";
  CharCategory2[CharCategory2["Space"] = 1] = "Space";
  CharCategory2[CharCategory2["Other"] = 2] = "Other";
  return CharCategory2;
}(CharCategory || (CharCategory = {}));
var nonASCIISingleCaseWordChar = /[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;
var wordChar;
try {
  wordChar = /* @__PURE__ */ new RegExp("[\\p{Alphabetic}\\p{Number}_]", "u");
} catch (_) {}
function hasWordChar(str) {
  if (wordChar)
    return wordChar.test(str);
  for (let i = 0;i < str.length; i++) {
    let ch = str[i];
    if (/\w/.test(ch) || ch > "" && (ch.toUpperCase() != ch.toLowerCase() || nonASCIISingleCaseWordChar.test(ch)))
      return true;
  }
  return false;
}
function makeCategorizer(wordChars) {
  return (char) => {
    if (!/\S/.test(char))
      return CharCategory.Space;
    if (hasWordChar(char))
      return CharCategory.Word;
    for (let i = 0;i < wordChars.length; i++)
      if (char.indexOf(wordChars[i]) > -1)
        return CharCategory.Word;
    return CharCategory.Other;
  };
}

class EditorState {
  constructor(config, doc, selection, values, computeSlot, tr) {
    this.config = config;
    this.doc = doc;
    this.selection = selection;
    this.values = values;
    this.status = config.statusTemplate.slice();
    this.computeSlot = computeSlot;
    if (tr)
      tr._state = this;
    for (let i = 0;i < this.config.dynamicSlots.length; i++)
      ensureAddr(this, i << 1);
    this.computeSlot = null;
  }
  field(field, require2 = true) {
    let addr = this.config.address[field.id];
    if (addr == null) {
      if (require2)
        throw new RangeError("Field is not present in this state");
      return;
    }
    ensureAddr(this, addr);
    return getAddr(this, addr);
  }
  update(...specs) {
    return resolveTransaction(this, specs, true);
  }
  applyTransaction(tr) {
    let conf = this.config, { base, compartments } = conf;
    for (let effect of tr.effects) {
      if (effect.is(Compartment.reconfigure)) {
        if (conf) {
          compartments = new Map;
          conf.compartments.forEach((val, key) => compartments.set(key, val));
          conf = null;
        }
        compartments.set(effect.value.compartment, effect.value.extension);
      } else if (effect.is(StateEffect.reconfigure)) {
        conf = null;
        base = effect.value;
      } else if (effect.is(StateEffect.appendConfig)) {
        conf = null;
        base = asArray(base).concat(effect.value);
      }
    }
    let startValues;
    if (!conf) {
      conf = Configuration.resolve(base, compartments, this);
      let intermediateState = new EditorState(conf, this.doc, this.selection, conf.dynamicSlots.map(() => null), (state, slot) => slot.reconfigure(state, this), null);
      startValues = intermediateState.values;
    } else {
      startValues = tr.startState.values.slice();
    }
    let selection = tr.startState.facet(allowMultipleSelections) ? tr.newSelection : tr.newSelection.asSingle();
    new EditorState(conf, tr.newDoc, selection, startValues, (state, slot) => slot.update(state, tr), tr);
  }
  replaceSelection(text) {
    if (typeof text == "string")
      text = this.toText(text);
    return this.changeByRange((range) => ({
      changes: { from: range.from, to: range.to, insert: text },
      range: EditorSelection.cursor(range.from + text.length)
    }));
  }
  changeByRange(f) {
    let sel = this.selection;
    let result1 = f(sel.ranges[0]);
    let changes = this.changes(result1.changes), ranges = [result1.range];
    let effects = asArray(result1.effects);
    for (let i = 1;i < sel.ranges.length; i++) {
      let result = f(sel.ranges[i]);
      let newChanges = this.changes(result.changes), newMapped = newChanges.map(changes);
      for (let j = 0;j < i; j++)
        ranges[j] = ranges[j].map(newMapped);
      let mapBy = changes.mapDesc(newChanges, true);
      ranges.push(result.range.map(mapBy));
      changes = changes.compose(newMapped);
      effects = StateEffect.mapEffects(effects, newMapped).concat(StateEffect.mapEffects(asArray(result.effects), mapBy));
    }
    return {
      changes,
      selection: EditorSelection.create(ranges, sel.mainIndex),
      effects
    };
  }
  changes(spec = []) {
    if (spec instanceof ChangeSet)
      return spec;
    return ChangeSet.of(spec, this.doc.length, this.facet(EditorState.lineSeparator));
  }
  toText(string) {
    return Text.of(string.split(this.facet(EditorState.lineSeparator) || DefaultSplit));
  }
  sliceDoc(from = 0, to = this.doc.length) {
    return this.doc.sliceString(from, to, this.lineBreak);
  }
  facet(facet) {
    let addr = this.config.address[facet.id];
    if (addr == null)
      return facet.default;
    ensureAddr(this, addr);
    return getAddr(this, addr);
  }
  toJSON(fields) {
    let result = {
      doc: this.sliceDoc(),
      selection: this.selection.toJSON()
    };
    if (fields)
      for (let prop in fields) {
        let value = fields[prop];
        if (value instanceof StateField && this.config.address[value.id] != null)
          result[prop] = value.spec.toJSON(this.field(fields[prop]), this);
      }
    return result;
  }
  static fromJSON(json, config = {}, fields) {
    if (!json || typeof json.doc != "string")
      throw new RangeError("Invalid JSON representation for EditorState");
    let fieldInit = [];
    if (fields)
      for (let prop in fields) {
        if (Object.prototype.hasOwnProperty.call(json, prop)) {
          let field = fields[prop], value = json[prop];
          fieldInit.push(field.init((state) => field.spec.fromJSON(value, state)));
        }
      }
    return EditorState.create({
      doc: json.doc,
      selection: EditorSelection.fromJSON(json.selection),
      extensions: config.extensions ? fieldInit.concat([config.extensions]) : fieldInit
    });
  }
  static create(config = {}) {
    let configuration = Configuration.resolve(config.extensions || [], new Map);
    let doc = config.doc instanceof Text ? config.doc : Text.of((config.doc || "").split(configuration.staticFacet(EditorState.lineSeparator) || DefaultSplit));
    let selection = !config.selection ? EditorSelection.single(0) : config.selection instanceof EditorSelection ? config.selection : EditorSelection.single(config.selection.anchor, config.selection.head);
    checkSelection(selection, doc.length);
    if (!configuration.staticFacet(allowMultipleSelections))
      selection = selection.asSingle();
    return new EditorState(configuration, doc, selection, configuration.dynamicSlots.map(() => null), (state, slot) => slot.create(state), null);
  }
  get tabSize() {
    return this.facet(EditorState.tabSize);
  }
  get lineBreak() {
    return this.facet(EditorState.lineSeparator) || `
`;
  }
  get readOnly() {
    return this.facet(readOnly);
  }
  phrase(phrase, ...insert) {
    for (let map of this.facet(EditorState.phrases))
      if (Object.prototype.hasOwnProperty.call(map, phrase)) {
        phrase = map[phrase];
        break;
      }
    if (insert.length)
      phrase = phrase.replace(/\$(\$|\d*)/g, (m, i) => {
        if (i == "$")
          return "$";
        let n = +(i || 1);
        return !n || n > insert.length ? m : insert[n - 1];
      });
    return phrase;
  }
  languageDataAt(name, pos, side = -1) {
    let values = [];
    for (let provider of this.facet(languageData)) {
      for (let result of provider(this, pos, side)) {
        if (Object.prototype.hasOwnProperty.call(result, name))
          values.push(result[name]);
      }
    }
    return values;
  }
  charCategorizer(at) {
    let chars = this.languageDataAt("wordChars", at);
    return makeCategorizer(chars.length ? chars[0] : "");
  }
  wordAt(pos) {
    let { text, from, length } = this.doc.lineAt(pos);
    let cat = this.charCategorizer(pos);
    let start = pos - from, end = pos - from;
    while (start > 0) {
      let prev = findClusterBreak2(text, start, false);
      if (cat(text.slice(prev, start)) != CharCategory.Word)
        break;
      start = prev;
    }
    while (end < length) {
      let next = findClusterBreak2(text, end);
      if (cat(text.slice(end, next)) != CharCategory.Word)
        break;
      end = next;
    }
    return start == end ? null : EditorSelection.range(start + from, end + from);
  }
}
EditorState.allowMultipleSelections = allowMultipleSelections;
EditorState.tabSize = /* @__PURE__ */ Facet.define({
  combine: (values) => values.length ? values[0] : 4
});
EditorState.lineSeparator = lineSeparator;
EditorState.readOnly = readOnly;
EditorState.phrases = /* @__PURE__ */ Facet.define({
  compare(a, b) {
    let kA = Object.keys(a), kB = Object.keys(b);
    return kA.length == kB.length && kA.every((k) => a[k] == b[k]);
  }
});
EditorState.languageData = languageData;
EditorState.changeFilter = changeFilter;
EditorState.transactionFilter = transactionFilter;
EditorState.transactionExtender = transactionExtender;
Compartment.reconfigure = /* @__PURE__ */ StateEffect.define();
function combineConfig(configs, defaults, combine = {}) {
  let result = {};
  for (let config of configs)
    for (let key of Object.keys(config)) {
      let value = config[key], current = result[key];
      if (current === undefined)
        result[key] = value;
      else if (current === value || value === undefined)
        ;
      else if (Object.hasOwnProperty.call(combine, key))
        result[key] = combine[key](current, value);
      else
        throw new Error("Config merge conflict for field " + key);
    }
  for (let key in defaults)
    if (result[key] === undefined)
      result[key] = defaults[key];
  return result;
}

class RangeValue {
  eq(other) {
    return this == other;
  }
  range(from, to = from) {
    return Range.create(from, to, this);
  }
}
RangeValue.prototype.startSide = RangeValue.prototype.endSide = 0;
RangeValue.prototype.point = false;
RangeValue.prototype.mapMode = MapMode.TrackDel;
function cmpVal(a, b) {
  return a == b || a.constructor == b.constructor && a.eq(b);
}

class Range {
  constructor(from, to, value) {
    this.from = from;
    this.to = to;
    this.value = value;
  }
  static create(from, to, value) {
    return new Range(from, to, value);
  }
}
function cmpRange(a, b) {
  return a.from - b.from || a.value.startSide - b.value.startSide;
}

class Chunk {
  constructor(from, to, value, maxPoint) {
    this.from = from;
    this.to = to;
    this.value = value;
    this.maxPoint = maxPoint;
  }
  get length() {
    return this.to[this.to.length - 1];
  }
  findIndex(pos, side, end, startAt = 0) {
    let arr = end ? this.to : this.from;
    for (let lo = startAt, hi = arr.length;; ) {
      if (lo == hi)
        return lo;
      let mid = lo + hi >> 1;
      let diff = arr[mid] - pos || (end ? this.value[mid].endSide : this.value[mid].startSide) - side;
      if (mid == lo)
        return diff >= 0 ? lo : hi;
      if (diff >= 0)
        hi = mid;
      else
        lo = mid + 1;
    }
  }
  between(offset, from, to, f) {
    for (let i = this.findIndex(from, -1e9, true), e = this.findIndex(to, 1e9, false, i);i < e; i++)
      if (f(this.from[i] + offset, this.to[i] + offset, this.value[i]) === false)
        return false;
  }
  map(offset, changes) {
    let value = [], from = [], to = [], newPos = -1, maxPoint = -1;
    for (let i = 0;i < this.value.length; i++) {
      let val = this.value[i], curFrom = this.from[i] + offset, curTo = this.to[i] + offset, newFrom, newTo;
      if (curFrom == curTo) {
        let mapped = changes.mapPos(curFrom, val.startSide, val.mapMode);
        if (mapped == null)
          continue;
        newFrom = newTo = mapped;
        if (val.startSide != val.endSide) {
          newTo = changes.mapPos(curFrom, val.endSide);
          if (newTo < newFrom)
            continue;
        }
      } else {
        newFrom = changes.mapPos(curFrom, val.startSide);
        newTo = changes.mapPos(curTo, val.endSide);
        if (newFrom > newTo || newFrom == newTo && val.startSide > 0 && val.endSide <= 0)
          continue;
      }
      if ((newTo - newFrom || val.endSide - val.startSide) < 0)
        continue;
      if (newPos < 0)
        newPos = newFrom;
      if (val.point)
        maxPoint = Math.max(maxPoint, newTo - newFrom);
      value.push(val);
      from.push(newFrom - newPos);
      to.push(newTo - newPos);
    }
    return { mapped: value.length ? new Chunk(from, to, value, maxPoint) : null, pos: newPos };
  }
}

class RangeSet {
  constructor(chunkPos, chunk, nextLayer, maxPoint) {
    this.chunkPos = chunkPos;
    this.chunk = chunk;
    this.nextLayer = nextLayer;
    this.maxPoint = maxPoint;
  }
  static create(chunkPos, chunk, nextLayer, maxPoint) {
    return new RangeSet(chunkPos, chunk, nextLayer, maxPoint);
  }
  get length() {
    let last = this.chunk.length - 1;
    return last < 0 ? 0 : Math.max(this.chunkEnd(last), this.nextLayer.length);
  }
  get size() {
    if (this.isEmpty)
      return 0;
    let size = this.nextLayer.size;
    for (let chunk of this.chunk)
      size += chunk.value.length;
    return size;
  }
  chunkEnd(index) {
    return this.chunkPos[index] + this.chunk[index].length;
  }
  update(updateSpec) {
    let { add = [], sort = false, filterFrom = 0, filterTo = this.length } = updateSpec;
    let filter = updateSpec.filter;
    if (add.length == 0 && !filter)
      return this;
    if (sort)
      add = add.slice().sort(cmpRange);
    if (this.isEmpty)
      return add.length ? RangeSet.of(add) : this;
    let cur = new LayerCursor(this, null, -1).goto(0), i = 0, spill = [];
    let builder = new RangeSetBuilder;
    while (cur.value || i < add.length) {
      if (i < add.length && (cur.from - add[i].from || cur.startSide - add[i].value.startSide) >= 0) {
        let range = add[i++];
        if (!builder.addInner(range.from, range.to, range.value))
          spill.push(range);
      } else if (cur.rangeIndex == 1 && cur.chunkIndex < this.chunk.length && (i == add.length || this.chunkEnd(cur.chunkIndex) < add[i].from) && (!filter || filterFrom > this.chunkEnd(cur.chunkIndex) || filterTo < this.chunkPos[cur.chunkIndex]) && builder.addChunk(this.chunkPos[cur.chunkIndex], this.chunk[cur.chunkIndex])) {
        cur.nextChunk();
      } else {
        if (!filter || filterFrom > cur.to || filterTo < cur.from || filter(cur.from, cur.to, cur.value)) {
          if (!builder.addInner(cur.from, cur.to, cur.value))
            spill.push(Range.create(cur.from, cur.to, cur.value));
        }
        cur.next();
      }
    }
    return builder.finishInner(this.nextLayer.isEmpty && !spill.length ? RangeSet.empty : this.nextLayer.update({ add: spill, filter, filterFrom, filterTo }));
  }
  map(changes) {
    if (changes.empty || this.isEmpty)
      return this;
    let chunks = [], chunkPos = [], maxPoint = -1;
    for (let i = 0;i < this.chunk.length; i++) {
      let start = this.chunkPos[i], chunk = this.chunk[i];
      let touch = changes.touchesRange(start, start + chunk.length);
      if (touch === false) {
        maxPoint = Math.max(maxPoint, chunk.maxPoint);
        chunks.push(chunk);
        chunkPos.push(changes.mapPos(start));
      } else if (touch === true) {
        let { mapped, pos } = chunk.map(start, changes);
        if (mapped) {
          maxPoint = Math.max(maxPoint, mapped.maxPoint);
          chunks.push(mapped);
          chunkPos.push(pos);
        }
      }
    }
    let next = this.nextLayer.map(changes);
    return chunks.length == 0 ? next : new RangeSet(chunkPos, chunks, next || RangeSet.empty, maxPoint);
  }
  between(from, to, f) {
    if (this.isEmpty)
      return;
    for (let i = 0;i < this.chunk.length; i++) {
      let start = this.chunkPos[i], chunk = this.chunk[i];
      if (to >= start && from <= start + chunk.length && chunk.between(start, from - start, to - start, f) === false)
        return;
    }
    this.nextLayer.between(from, to, f);
  }
  iter(from = 0) {
    return HeapCursor.from([this]).goto(from);
  }
  get isEmpty() {
    return this.nextLayer == this;
  }
  static iter(sets, from = 0) {
    return HeapCursor.from(sets).goto(from);
  }
  static compare(oldSets, newSets, textDiff, comparator, minPointSize = -1) {
    let a = oldSets.filter((set) => set.maxPoint > 0 || !set.isEmpty && set.maxPoint >= minPointSize);
    let b = newSets.filter((set) => set.maxPoint > 0 || !set.isEmpty && set.maxPoint >= minPointSize);
    let sharedChunks = findSharedChunks(a, b, textDiff);
    let sideA = new SpanCursor(a, sharedChunks, minPointSize);
    let sideB = new SpanCursor(b, sharedChunks, minPointSize);
    textDiff.iterGaps((fromA, fromB, length) => compare(sideA, fromA, sideB, fromB, length, comparator));
    if (textDiff.empty && textDiff.length == 0)
      compare(sideA, 0, sideB, 0, 0, comparator);
  }
  static eq(oldSets, newSets, from = 0, to) {
    if (to == null)
      to = 1e9 - 1;
    let a = oldSets.filter((set) => !set.isEmpty && newSets.indexOf(set) < 0);
    let b = newSets.filter((set) => !set.isEmpty && oldSets.indexOf(set) < 0);
    if (a.length != b.length)
      return false;
    if (!a.length)
      return true;
    let sharedChunks = findSharedChunks(a, b);
    let sideA = new SpanCursor(a, sharedChunks, 0).goto(from), sideB = new SpanCursor(b, sharedChunks, 0).goto(from);
    for (;; ) {
      if (sideA.to != sideB.to || !sameValues(sideA.active, sideB.active) || sideA.point && (!sideB.point || !cmpVal(sideA.point, sideB.point)))
        return false;
      if (sideA.to > to)
        return true;
      sideA.next();
      sideB.next();
    }
  }
  static spans(sets, from, to, iterator, minPointSize = -1) {
    let cursor = new SpanCursor(sets, null, minPointSize).goto(from), pos = from;
    let openRanges = cursor.openStart;
    for (;; ) {
      let curTo = Math.min(cursor.to, to);
      if (cursor.point) {
        let active = cursor.activeForPoint(cursor.to);
        let openCount = cursor.pointFrom < from ? active.length + 1 : cursor.point.startSide < 0 ? active.length : Math.min(active.length, openRanges);
        iterator.point(pos, curTo, cursor.point, active, openCount, cursor.pointRank);
        openRanges = Math.min(cursor.openEnd(curTo), active.length);
      } else if (curTo > pos) {
        iterator.span(pos, curTo, cursor.active, openRanges);
        openRanges = cursor.openEnd(curTo);
      }
      if (cursor.to > to)
        return openRanges + (cursor.point && cursor.to > to ? 1 : 0);
      pos = cursor.to;
      cursor.next();
    }
  }
  static of(ranges, sort = false) {
    let build = new RangeSetBuilder;
    for (let range of ranges instanceof Range ? [ranges] : sort ? lazySort(ranges) : ranges)
      build.add(range.from, range.to, range.value);
    return build.finish();
  }
  static join(sets) {
    if (!sets.length)
      return RangeSet.empty;
    let result = sets[sets.length - 1];
    for (let i = sets.length - 2;i >= 0; i--) {
      for (let layer = sets[i];layer != RangeSet.empty; layer = layer.nextLayer)
        result = new RangeSet(layer.chunkPos, layer.chunk, result, Math.max(layer.maxPoint, result.maxPoint));
    }
    return result;
  }
}
RangeSet.empty = /* @__PURE__ */ new RangeSet([], [], null, -1);
function lazySort(ranges) {
  if (ranges.length > 1)
    for (let prev = ranges[0], i = 1;i < ranges.length; i++) {
      let cur = ranges[i];
      if (cmpRange(prev, cur) > 0)
        return ranges.slice().sort(cmpRange);
      prev = cur;
    }
  return ranges;
}
RangeSet.empty.nextLayer = RangeSet.empty;

class RangeSetBuilder {
  finishChunk(newArrays) {
    this.chunks.push(new Chunk(this.from, this.to, this.value, this.maxPoint));
    this.chunkPos.push(this.chunkStart);
    this.chunkStart = -1;
    this.setMaxPoint = Math.max(this.setMaxPoint, this.maxPoint);
    this.maxPoint = -1;
    if (newArrays) {
      this.from = [];
      this.to = [];
      this.value = [];
    }
  }
  constructor() {
    this.chunks = [];
    this.chunkPos = [];
    this.chunkStart = -1;
    this.last = null;
    this.lastFrom = -1e9;
    this.lastTo = -1e9;
    this.from = [];
    this.to = [];
    this.value = [];
    this.maxPoint = -1;
    this.setMaxPoint = -1;
    this.nextLayer = null;
  }
  add(from, to, value) {
    if (!this.addInner(from, to, value))
      (this.nextLayer || (this.nextLayer = new RangeSetBuilder)).add(from, to, value);
  }
  addInner(from, to, value) {
    let diff = from - this.lastTo || value.startSide - this.last.endSide;
    if (diff <= 0 && (from - this.lastFrom || value.startSide - this.last.startSide) < 0)
      throw new Error("Ranges must be added sorted by `from` position and `startSide`");
    if (diff < 0)
      return false;
    if (this.from.length == 250)
      this.finishChunk(true);
    if (this.chunkStart < 0)
      this.chunkStart = from;
    this.from.push(from - this.chunkStart);
    this.to.push(to - this.chunkStart);
    this.last = value;
    this.lastFrom = from;
    this.lastTo = to;
    this.value.push(value);
    if (value.point)
      this.maxPoint = Math.max(this.maxPoint, to - from);
    return true;
  }
  addChunk(from, chunk) {
    if ((from - this.lastTo || chunk.value[0].startSide - this.last.endSide) < 0)
      return false;
    if (this.from.length)
      this.finishChunk(true);
    this.setMaxPoint = Math.max(this.setMaxPoint, chunk.maxPoint);
    this.chunks.push(chunk);
    this.chunkPos.push(from);
    let last = chunk.value.length - 1;
    this.last = chunk.value[last];
    this.lastFrom = chunk.from[last] + from;
    this.lastTo = chunk.to[last] + from;
    return true;
  }
  finish() {
    return this.finishInner(RangeSet.empty);
  }
  finishInner(next) {
    if (this.from.length)
      this.finishChunk(false);
    if (this.chunks.length == 0)
      return next;
    let result = RangeSet.create(this.chunkPos, this.chunks, this.nextLayer ? this.nextLayer.finishInner(next) : next, this.setMaxPoint);
    this.from = null;
    return result;
  }
}
function findSharedChunks(a, b, textDiff) {
  let inA = new Map;
  for (let set of a)
    for (let i = 0;i < set.chunk.length; i++)
      if (set.chunk[i].maxPoint <= 0)
        inA.set(set.chunk[i], set.chunkPos[i]);
  let shared = new Set;
  for (let set of b)
    for (let i = 0;i < set.chunk.length; i++) {
      let known = inA.get(set.chunk[i]);
      if (known != null && (textDiff ? textDiff.mapPos(known) : known) == set.chunkPos[i] && !(textDiff === null || textDiff === undefined ? undefined : textDiff.touchesRange(known, known + set.chunk[i].length)))
        shared.add(set.chunk[i]);
    }
  return shared;
}

class LayerCursor {
  constructor(layer, skip, minPoint, rank = 0) {
    this.layer = layer;
    this.skip = skip;
    this.minPoint = minPoint;
    this.rank = rank;
  }
  get startSide() {
    return this.value ? this.value.startSide : 0;
  }
  get endSide() {
    return this.value ? this.value.endSide : 0;
  }
  goto(pos, side = -1e9) {
    this.chunkIndex = this.rangeIndex = 0;
    this.gotoInner(pos, side, false);
    return this;
  }
  gotoInner(pos, side, forward) {
    while (this.chunkIndex < this.layer.chunk.length) {
      let next = this.layer.chunk[this.chunkIndex];
      if (!(this.skip && this.skip.has(next) || this.layer.chunkEnd(this.chunkIndex) < pos || next.maxPoint < this.minPoint))
        break;
      this.chunkIndex++;
      forward = false;
    }
    if (this.chunkIndex < this.layer.chunk.length) {
      let rangeIndex = this.layer.chunk[this.chunkIndex].findIndex(pos - this.layer.chunkPos[this.chunkIndex], side, true);
      if (!forward || this.rangeIndex < rangeIndex)
        this.setRangeIndex(rangeIndex);
    }
    this.next();
  }
  forward(pos, side) {
    if ((this.to - pos || this.endSide - side) < 0)
      this.gotoInner(pos, side, true);
  }
  next() {
    for (;; ) {
      if (this.chunkIndex == this.layer.chunk.length) {
        this.from = this.to = 1e9;
        this.value = null;
        break;
      } else {
        let chunkPos = this.layer.chunkPos[this.chunkIndex], chunk = this.layer.chunk[this.chunkIndex];
        let from = chunkPos + chunk.from[this.rangeIndex];
        this.from = from;
        this.to = chunkPos + chunk.to[this.rangeIndex];
        this.value = chunk.value[this.rangeIndex];
        this.setRangeIndex(this.rangeIndex + 1);
        if (this.minPoint < 0 || this.value.point && this.to - this.from >= this.minPoint)
          break;
      }
    }
  }
  setRangeIndex(index) {
    if (index == this.layer.chunk[this.chunkIndex].value.length) {
      this.chunkIndex++;
      if (this.skip) {
        while (this.chunkIndex < this.layer.chunk.length && this.skip.has(this.layer.chunk[this.chunkIndex]))
          this.chunkIndex++;
      }
      this.rangeIndex = 0;
    } else {
      this.rangeIndex = index;
    }
  }
  nextChunk() {
    this.chunkIndex++;
    this.rangeIndex = 0;
    this.next();
  }
  compare(other) {
    return this.from - other.from || this.startSide - other.startSide || this.rank - other.rank || this.to - other.to || this.endSide - other.endSide;
  }
}

class HeapCursor {
  constructor(heap) {
    this.heap = heap;
  }
  static from(sets, skip = null, minPoint = -1) {
    let heap = [];
    for (let i = 0;i < sets.length; i++) {
      for (let cur = sets[i];!cur.isEmpty; cur = cur.nextLayer) {
        if (cur.maxPoint >= minPoint)
          heap.push(new LayerCursor(cur, skip, minPoint, i));
      }
    }
    return heap.length == 1 ? heap[0] : new HeapCursor(heap);
  }
  get startSide() {
    return this.value ? this.value.startSide : 0;
  }
  goto(pos, side = -1e9) {
    for (let cur of this.heap)
      cur.goto(pos, side);
    for (let i = this.heap.length >> 1;i >= 0; i--)
      heapBubble(this.heap, i);
    this.next();
    return this;
  }
  forward(pos, side) {
    for (let cur of this.heap)
      cur.forward(pos, side);
    for (let i = this.heap.length >> 1;i >= 0; i--)
      heapBubble(this.heap, i);
    if ((this.to - pos || this.value.endSide - side) < 0)
      this.next();
  }
  next() {
    if (this.heap.length == 0) {
      this.from = this.to = 1e9;
      this.value = null;
      this.rank = -1;
    } else {
      let top = this.heap[0];
      this.from = top.from;
      this.to = top.to;
      this.value = top.value;
      this.rank = top.rank;
      if (top.value)
        top.next();
      heapBubble(this.heap, 0);
    }
  }
}
function heapBubble(heap, index) {
  for (let cur = heap[index];; ) {
    let childIndex = (index << 1) + 1;
    if (childIndex >= heap.length)
      break;
    let child = heap[childIndex];
    if (childIndex + 1 < heap.length && child.compare(heap[childIndex + 1]) >= 0) {
      child = heap[childIndex + 1];
      childIndex++;
    }
    if (cur.compare(child) < 0)
      break;
    heap[childIndex] = cur;
    heap[index] = child;
    index = childIndex;
  }
}

class SpanCursor {
  constructor(sets, skip, minPoint) {
    this.minPoint = minPoint;
    this.active = [];
    this.activeTo = [];
    this.activeRank = [];
    this.minActive = -1;
    this.point = null;
    this.pointFrom = 0;
    this.pointRank = 0;
    this.to = -1e9;
    this.endSide = 0;
    this.openStart = -1;
    this.cursor = HeapCursor.from(sets, skip, minPoint);
  }
  goto(pos, side = -1e9) {
    this.cursor.goto(pos, side);
    this.active.length = this.activeTo.length = this.activeRank.length = 0;
    this.minActive = -1;
    this.to = pos;
    this.endSide = side;
    this.openStart = -1;
    this.next();
    return this;
  }
  forward(pos, side) {
    while (this.minActive > -1 && (this.activeTo[this.minActive] - pos || this.active[this.minActive].endSide - side) < 0)
      this.removeActive(this.minActive);
    this.cursor.forward(pos, side);
  }
  removeActive(index) {
    remove(this.active, index);
    remove(this.activeTo, index);
    remove(this.activeRank, index);
    this.minActive = findMinIndex(this.active, this.activeTo);
  }
  addActive(trackOpen) {
    let i = 0, { value, to, rank } = this.cursor;
    while (i < this.activeRank.length && (rank - this.activeRank[i] || to - this.activeTo[i]) > 0)
      i++;
    insert(this.active, i, value);
    insert(this.activeTo, i, to);
    insert(this.activeRank, i, rank);
    if (trackOpen)
      insert(trackOpen, i, this.cursor.from);
    this.minActive = findMinIndex(this.active, this.activeTo);
  }
  next() {
    let from = this.to, wasPoint = this.point;
    this.point = null;
    let trackOpen = this.openStart < 0 ? [] : null;
    for (;; ) {
      let a = this.minActive;
      if (a > -1 && (this.activeTo[a] - this.cursor.from || this.active[a].endSide - this.cursor.startSide) < 0) {
        if (this.activeTo[a] > from) {
          this.to = this.activeTo[a];
          this.endSide = this.active[a].endSide;
          break;
        }
        this.removeActive(a);
        if (trackOpen)
          remove(trackOpen, a);
      } else if (!this.cursor.value) {
        this.to = this.endSide = 1e9;
        break;
      } else if (this.cursor.from > from) {
        this.to = this.cursor.from;
        this.endSide = this.cursor.startSide;
        break;
      } else {
        let nextVal = this.cursor.value;
        if (!nextVal.point) {
          this.addActive(trackOpen);
          this.cursor.next();
        } else if (wasPoint && this.cursor.to == this.to && this.cursor.from < this.cursor.to) {
          this.cursor.next();
        } else {
          this.point = nextVal;
          this.pointFrom = this.cursor.from;
          this.pointRank = this.cursor.rank;
          this.to = this.cursor.to;
          this.endSide = nextVal.endSide;
          this.cursor.next();
          this.forward(this.to, this.endSide);
          break;
        }
      }
    }
    if (trackOpen) {
      this.openStart = 0;
      for (let i = trackOpen.length - 1;i >= 0 && trackOpen[i] < from; i--)
        this.openStart++;
    }
  }
  activeForPoint(to) {
    if (!this.active.length)
      return this.active;
    let active = [];
    for (let i = this.active.length - 1;i >= 0; i--) {
      if (this.activeRank[i] < this.pointRank)
        break;
      if (this.activeTo[i] > to || this.activeTo[i] == to && this.active[i].endSide >= this.point.endSide)
        active.push(this.active[i]);
    }
    return active.reverse();
  }
  openEnd(to) {
    let open = 0;
    for (let i = this.activeTo.length - 1;i >= 0 && this.activeTo[i] > to; i--)
      open++;
    return open;
  }
}
function compare(a, startA, b, startB, length, comparator) {
  a.goto(startA);
  b.goto(startB);
  let endB = startB + length;
  let pos = startB, dPos = startB - startA;
  let bounds = !!comparator.boundChange;
  for (let boundChange = false;; ) {
    let dEnd = a.to + dPos - b.to, diff = dEnd || a.endSide - b.endSide;
    let end = diff < 0 ? a.to + dPos : b.to, clipEnd = Math.min(end, endB);
    let point = a.point || b.point;
    if (point) {
      if (!(a.point && b.point && cmpVal(a.point, b.point) && sameValues(a.activeForPoint(a.to), b.activeForPoint(b.to))))
        comparator.comparePoint(pos, clipEnd, a.point, b.point);
      boundChange = false;
    } else {
      if (boundChange)
        comparator.boundChange(pos);
      if (clipEnd > pos && !sameValues(a.active, b.active))
        comparator.compareRange(pos, clipEnd, a.active, b.active);
      if (bounds && clipEnd < endB && (dEnd || a.openEnd(end) != b.openEnd(end)))
        boundChange = true;
    }
    if (end > endB)
      break;
    pos = end;
    if (diff <= 0)
      a.next();
    if (diff >= 0)
      b.next();
  }
}
function sameValues(a, b) {
  if (a.length != b.length)
    return false;
  for (let i = 0;i < a.length; i++)
    if (a[i] != b[i] && !cmpVal(a[i], b[i]))
      return false;
  return true;
}
function remove(array, index) {
  for (let i = index, e = array.length - 1;i < e; i++)
    array[i] = array[i + 1];
  array.pop();
}
function insert(array, index, value) {
  for (let i = array.length - 1;i >= index; i--)
    array[i + 1] = array[i];
  array[index] = value;
}
function findMinIndex(value, array) {
  let found = -1, foundPos = 1e9;
  for (let i = 0;i < array.length; i++)
    if ((array[i] - foundPos || value[i].endSide - value[found].endSide) < 0) {
      found = i;
      foundPos = array[i];
    }
  return found;
}
function countColumn(string, tabSize, to = string.length) {
  let n = 0;
  for (let i = 0;i < to && i < string.length; ) {
    if (string.charCodeAt(i) == 9) {
      n += tabSize - n % tabSize;
      i++;
    } else {
      n++;
      i = findClusterBreak2(string, i);
    }
  }
  return n;
}
function findColumn(string, col, tabSize, strict) {
  for (let i = 0, n = 0;; ) {
    if (n >= col)
      return i;
    if (i == string.length)
      break;
    n += string.charCodeAt(i) == 9 ? tabSize - n % tabSize : 1;
    i = findClusterBreak2(string, i);
  }
  return strict === true ? -1 : string.length;
}

// node_modules/style-mod/src/style-mod.js
var C = "";
var COUNT = typeof Symbol == "undefined" ? "__" + C : Symbol.for(C);
var SET = typeof Symbol == "undefined" ? "__styleSet" + Math.floor(Math.random() * 1e8) : Symbol("styleSet");
var top = typeof globalThis != "undefined" ? globalThis : typeof window != "undefined" ? window : {};

class StyleModule {
  constructor(spec, options) {
    this.rules = [];
    let { finish } = options || {};
    function splitSelector(selector) {
      return /^@/.test(selector) ? [selector] : selector.split(/,\s*/);
    }
    function render(selectors, spec2, target, isKeyframes) {
      let local = [], isAt = /^@(\w+)\b/.exec(selectors[0]), keyframes = isAt && isAt[1] == "keyframes";
      if (isAt && spec2 == null)
        return target.push(selectors[0] + ";");
      for (let prop in spec2) {
        let value = spec2[prop];
        if (/&/.test(prop)) {
          render(prop.split(/,\s*/).map((part) => selectors.map((sel) => part.replace(/&/, sel))).reduce((a, b) => a.concat(b)), value, target);
        } else if (value && typeof value == "object") {
          if (!isAt)
            throw new RangeError("The value of a property (" + prop + ") should be a primitive value.");
          render(splitSelector(prop), value, local, keyframes);
        } else if (value != null) {
          local.push(prop.replace(/_.*/, "").replace(/[A-Z]/g, (l) => "-" + l.toLowerCase()) + ": " + value + ";");
        }
      }
      if (local.length || keyframes) {
        target.push((finish && !isAt && !isKeyframes ? selectors.map(finish) : selectors).join(", ") + " {" + local.join(" ") + "}");
      }
    }
    for (let prop in spec)
      render(splitSelector(prop), spec[prop], this.rules);
  }
  getRules() {
    return this.rules.join(`
`);
  }
  static newName() {
    let id = top[COUNT] || 1;
    top[COUNT] = id + 1;
    return C + id.toString(36);
  }
  static mount(root, modules, options) {
    let set = root[SET], nonce = options && options.nonce;
    if (!set)
      set = new StyleSet(root, nonce);
    else if (nonce)
      set.setNonce(nonce);
    set.mount(Array.isArray(modules) ? modules : [modules], root);
  }
}
var adoptedSet = new Map;

class StyleSet {
  constructor(root, nonce) {
    let doc = root.ownerDocument || root, win = doc.defaultView;
    if (!root.head && root.adoptedStyleSheets && win.CSSStyleSheet) {
      let adopted = adoptedSet.get(doc);
      if (adopted)
        return root[SET] = adopted;
      this.sheet = new win.CSSStyleSheet;
      adoptedSet.set(doc, this);
    } else {
      this.styleTag = doc.createElement("style");
      if (nonce)
        this.styleTag.setAttribute("nonce", nonce);
    }
    this.modules = [];
    root[SET] = this;
  }
  mount(modules, root) {
    let sheet = this.sheet;
    let pos = 0, j = 0;
    for (let i = 0;i < modules.length; i++) {
      let mod = modules[i], index = this.modules.indexOf(mod);
      if (index < j && index > -1) {
        this.modules.splice(index, 1);
        j--;
        index = -1;
      }
      if (index == -1) {
        this.modules.splice(j++, 0, mod);
        if (sheet)
          for (let k = 0;k < mod.rules.length; k++)
            sheet.insertRule(mod.rules[k], pos++);
      } else {
        while (j < index)
          pos += this.modules[j++].rules.length;
        pos += mod.rules.length;
        j++;
      }
    }
    if (sheet) {
      if (root.adoptedStyleSheets.indexOf(this.sheet) < 0)
        root.adoptedStyleSheets = [this.sheet, ...root.adoptedStyleSheets];
    } else {
      let text = "";
      for (let i = 0;i < this.modules.length; i++)
        text += this.modules[i].getRules() + `
`;
      this.styleTag.textContent = text;
      let target = root.head || root;
      if (this.styleTag.parentNode != target)
        target.insertBefore(this.styleTag, target.firstChild);
    }
  }
  setNonce(nonce) {
    if (this.styleTag && this.styleTag.getAttribute("nonce") != nonce)
      this.styleTag.setAttribute("nonce", nonce);
  }
}

// node_modules/w3c-keyname/index.js
var base = {
  8: "Backspace",
  9: "Tab",
  10: "Enter",
  12: "NumLock",
  13: "Enter",
  16: "Shift",
  17: "Control",
  18: "Alt",
  20: "CapsLock",
  27: "Escape",
  32: " ",
  33: "PageUp",
  34: "PageDown",
  35: "End",
  36: "Home",
  37: "ArrowLeft",
  38: "ArrowUp",
  39: "ArrowRight",
  40: "ArrowDown",
  44: "PrintScreen",
  45: "Insert",
  46: "Delete",
  59: ";",
  61: "=",
  91: "Meta",
  92: "Meta",
  106: "*",
  107: "+",
  108: ",",
  109: "-",
  110: ".",
  111: "/",
  144: "NumLock",
  145: "ScrollLock",
  160: "Shift",
  161: "Shift",
  162: "Control",
  163: "Control",
  164: "Alt",
  165: "Alt",
  173: "-",
  186: ";",
  187: "=",
  188: ",",
  189: "-",
  190: ".",
  191: "/",
  192: "`",
  219: "[",
  220: "\\",
  221: "]",
  222: "'"
};
var shift = {
  48: ")",
  49: "!",
  50: "@",
  51: "#",
  52: "$",
  53: "%",
  54: "^",
  55: "&",
  56: "*",
  57: "(",
  59: ":",
  61: "+",
  173: "_",
  186: ":",
  187: "+",
  188: "<",
  189: "_",
  190: ">",
  191: "?",
  192: "~",
  219: "{",
  220: "|",
  221: "}",
  222: '"'
};
var mac = typeof navigator != "undefined" && /Mac/.test(navigator.platform);
var ie = typeof navigator != "undefined" && /MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);
for (i = 0;i < 10; i++)
  base[48 + i] = base[96 + i] = String(i);
var i;
for (i = 1;i <= 24; i++)
  base[i + 111] = "F" + i;
var i;
for (i = 65;i <= 90; i++) {
  base[i] = String.fromCharCode(i + 32);
  shift[i] = String.fromCharCode(i);
}
var i;
for (code in base)
  if (!shift.hasOwnProperty(code))
    shift[code] = base[code];
var code;
function keyName(event) {
  var ignoreKey = mac && event.metaKey && event.shiftKey && !event.ctrlKey && !event.altKey || ie && event.shiftKey && event.key && event.key.length == 1 || event.key == "Unidentified";
  var name = !ignoreKey && event.key || (event.shiftKey ? shift : base)[event.keyCode] || event.key || "Unidentified";
  if (name == "Esc")
    name = "Escape";
  if (name == "Del")
    name = "Delete";
  if (name == "Left")
    name = "ArrowLeft";
  if (name == "Up")
    name = "ArrowUp";
  if (name == "Right")
    name = "ArrowRight";
  if (name == "Down")
    name = "ArrowDown";
  return name;
}

// node_modules/crelt/index.js
function crelt() {
  var elt = arguments[0];
  if (typeof elt == "string")
    elt = document.createElement(elt);
  var i2 = 1, next = arguments[1];
  if (next && typeof next == "object" && next.nodeType == null && !Array.isArray(next)) {
    for (var name in next)
      if (Object.prototype.hasOwnProperty.call(next, name)) {
        var value = next[name];
        if (typeof value == "string")
          elt.setAttribute(name, value);
        else if (value != null)
          elt[name] = value;
      }
    i2++;
  }
  for (;i2 < arguments.length; i2++)
    add(elt, arguments[i2]);
  return elt;
}
function add(elt, child) {
  if (typeof child == "string") {
    elt.appendChild(document.createTextNode(child));
  } else if (child == null) {} else if (child.nodeType != null) {
    elt.appendChild(child);
  } else if (Array.isArray(child)) {
    for (var i2 = 0;i2 < child.length; i2++)
      add(elt, child[i2]);
  } else {
    throw new RangeError("Unsupported child node: " + child);
  }
}

// node_modules/@codemirror/view/dist/index.js
var nav = typeof navigator != "undefined" ? navigator : { userAgent: "", vendor: "", platform: "" };
var doc = typeof document != "undefined" ? document : { documentElement: { style: {} } };
var ie_edge = /* @__PURE__ */ /Edge\/(\d+)/.exec(nav.userAgent);
var ie_upto10 = /* @__PURE__ */ /MSIE \d/.test(nav.userAgent);
var ie_11up = /* @__PURE__ */ /Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(nav.userAgent);
var ie2 = !!(ie_upto10 || ie_11up || ie_edge);
var gecko = !ie2 && /* @__PURE__ */ /gecko\/(\d+)/i.test(nav.userAgent);
var chrome = !ie2 && /* @__PURE__ */ /Chrome\/(\d+)/.exec(nav.userAgent);
var webkit = "webkitFontSmoothing" in doc.documentElement.style;
var safari = !ie2 && /* @__PURE__ */ /Apple Computer/.test(nav.vendor);
var ios = safari && (/* @__PURE__ */ /Mobile\/\w+/.test(nav.userAgent) || nav.maxTouchPoints > 2);
var browser = {
  mac: ios || /* @__PURE__ */ /Mac/.test(nav.platform),
  windows: /* @__PURE__ */ /Win/.test(nav.platform),
  linux: /* @__PURE__ */ /Linux|X11/.test(nav.platform),
  ie: ie2,
  ie_version: ie_upto10 ? doc.documentMode || 6 : ie_11up ? +ie_11up[1] : ie_edge ? +ie_edge[1] : 0,
  gecko,
  gecko_version: gecko ? +(/* @__PURE__ */ /Firefox\/(\d+)/.exec(nav.userAgent) || [0, 0])[1] : 0,
  chrome: !!chrome,
  chrome_version: chrome ? +chrome[1] : 0,
  ios,
  android: /* @__PURE__ */ /Android\b/.test(nav.userAgent),
  webkit,
  webkit_version: webkit ? +(/* @__PURE__ */ /\bAppleWebKit\/(\d+)/.exec(nav.userAgent) || [0, 0])[1] : 0,
  safari,
  safari_version: safari ? +(/* @__PURE__ */ /\bVersion\/(\d+(\.\d+)?)/.exec(nav.userAgent) || [0, 0])[1] : 0,
  tabSize: doc.documentElement.style.tabSize != null ? "tab-size" : "-moz-tab-size"
};
function combineAttrs(source, target) {
  for (let name in source) {
    if (name == "class" && target.class)
      target.class += " " + source.class;
    else if (name == "style" && target.style)
      target.style += ";" + source.style;
    else
      target[name] = source[name];
  }
  return target;
}
var noAttrs = /* @__PURE__ */ Object.create(null);
function attrsEq(a, b, ignore) {
  if (a == b)
    return true;
  if (!a)
    a = noAttrs;
  if (!b)
    b = noAttrs;
  let keysA = Object.keys(a), keysB = Object.keys(b);
  if (keysA.length - (ignore && keysA.indexOf(ignore) > -1 ? 1 : 0) != keysB.length - (ignore && keysB.indexOf(ignore) > -1 ? 1 : 0))
    return false;
  for (let key of keysA) {
    if (key != ignore && (keysB.indexOf(key) == -1 || a[key] !== b[key]))
      return false;
  }
  return true;
}
function setAttrs(dom, attrs) {
  for (let i2 = dom.attributes.length - 1;i2 >= 0; i2--) {
    let name = dom.attributes[i2].name;
    if (attrs[name] == null)
      dom.removeAttribute(name);
  }
  for (let name in attrs) {
    let value = attrs[name];
    if (name == "style")
      dom.style.cssText = value;
    else if (dom.getAttribute(name) != value)
      dom.setAttribute(name, value);
  }
}
function updateAttrs(dom, prev, attrs) {
  let changed = false;
  if (prev) {
    for (let name in prev)
      if (!(attrs && (name in attrs))) {
        changed = true;
        if (name == "style")
          dom.style.cssText = "";
        else
          dom.removeAttribute(name);
      }
  }
  if (attrs) {
    for (let name in attrs)
      if (!(prev && prev[name] == attrs[name])) {
        changed = true;
        if (name == "style")
          dom.style.cssText = attrs[name];
        else
          dom.setAttribute(name, attrs[name]);
      }
  }
  return changed;
}
function getAttrs(dom) {
  let attrs = Object.create(null);
  for (let i2 = 0;i2 < dom.attributes.length; i2++) {
    let attr = dom.attributes[i2];
    attrs[attr.name] = attr.value;
  }
  return attrs;
}

class WidgetType {
  eq(widget) {
    return false;
  }
  updateDOM(dom, view) {
    return false;
  }
  compare(other) {
    return this == other || this.constructor == other.constructor && this.eq(other);
  }
  get estimatedHeight() {
    return -1;
  }
  get lineBreaks() {
    return 0;
  }
  ignoreEvent(event) {
    return true;
  }
  coordsAt(dom, pos, side) {
    return null;
  }
  get isHidden() {
    return false;
  }
  get editable() {
    return false;
  }
  destroy(dom) {}
}
var BlockType = /* @__PURE__ */ function(BlockType2) {
  BlockType2[BlockType2["Text"] = 0] = "Text";
  BlockType2[BlockType2["WidgetBefore"] = 1] = "WidgetBefore";
  BlockType2[BlockType2["WidgetAfter"] = 2] = "WidgetAfter";
  BlockType2[BlockType2["WidgetRange"] = 3] = "WidgetRange";
  return BlockType2;
}(BlockType || (BlockType = {}));

class Decoration extends RangeValue {
  constructor(startSide, endSide, widget, spec) {
    super();
    this.startSide = startSide;
    this.endSide = endSide;
    this.widget = widget;
    this.spec = spec;
  }
  get heightRelevant() {
    return false;
  }
  static mark(spec) {
    return new MarkDecoration(spec);
  }
  static widget(spec) {
    let side = Math.max(-1e4, Math.min(1e4, spec.side || 0)), block = !!spec.block;
    side += block && !spec.inlineOrder ? side > 0 ? 300000000 : -400000000 : side > 0 ? 1e8 : -1e8;
    return new PointDecoration(spec, side, side, block, spec.widget || null, false);
  }
  static replace(spec) {
    let block = !!spec.block, startSide, endSide;
    if (spec.isBlockGap) {
      startSide = -500000000;
      endSide = 400000000;
    } else {
      let { start, end } = getInclusive(spec, block);
      startSide = (start ? block ? -300000000 : -1 : 500000000) - 1;
      endSide = (end ? block ? 200000000 : 1 : -600000000) + 1;
    }
    return new PointDecoration(spec, startSide, endSide, block, spec.widget || null, true);
  }
  static line(spec) {
    return new LineDecoration(spec);
  }
  static set(of, sort = false) {
    return RangeSet.of(of, sort);
  }
  hasHeight() {
    return this.widget ? this.widget.estimatedHeight > -1 : false;
  }
}
Decoration.none = RangeSet.empty;

class MarkDecoration extends Decoration {
  constructor(spec) {
    let { start, end } = getInclusive(spec);
    super(start ? -1 : 500000000, end ? 1 : -600000000, null, spec);
    this.tagName = spec.tagName || "span";
    this.attrs = spec.class && spec.attributes ? combineAttrs(spec.attributes, { class: spec.class }) : spec.class ? { class: spec.class } : spec.attributes || noAttrs;
  }
  eq(other) {
    return this == other || other instanceof MarkDecoration && this.tagName == other.tagName && attrsEq(this.attrs, other.attrs);
  }
  range(from, to = from) {
    if (from >= to)
      throw new RangeError("Mark decorations may not be empty");
    return super.range(from, to);
  }
}
MarkDecoration.prototype.point = false;

class LineDecoration extends Decoration {
  constructor(spec) {
    super(-200000000, -200000000, null, spec);
  }
  eq(other) {
    return other instanceof LineDecoration && this.spec.class == other.spec.class && attrsEq(this.spec.attributes, other.spec.attributes);
  }
  range(from, to = from) {
    if (to != from)
      throw new RangeError("Line decoration ranges must be zero-length");
    return super.range(from, to);
  }
}
LineDecoration.prototype.mapMode = MapMode.TrackBefore;
LineDecoration.prototype.point = true;

class PointDecoration extends Decoration {
  constructor(spec, startSide, endSide, block, widget, isReplace) {
    super(startSide, endSide, widget, spec);
    this.block = block;
    this.isReplace = isReplace;
    this.mapMode = !block ? MapMode.TrackDel : startSide <= 0 ? MapMode.TrackBefore : MapMode.TrackAfter;
  }
  get type() {
    return this.startSide != this.endSide ? BlockType.WidgetRange : this.startSide <= 0 ? BlockType.WidgetBefore : BlockType.WidgetAfter;
  }
  get heightRelevant() {
    return this.block || !!this.widget && (this.widget.estimatedHeight >= 5 || this.widget.lineBreaks > 0);
  }
  eq(other) {
    return other instanceof PointDecoration && widgetsEq(this.widget, other.widget) && this.block == other.block && this.startSide == other.startSide && this.endSide == other.endSide;
  }
  range(from, to = from) {
    if (this.isReplace && (from > to || from == to && this.startSide > 0 && this.endSide <= 0))
      throw new RangeError("Invalid range for replacement decoration");
    if (!this.isReplace && to != from)
      throw new RangeError("Widget decorations can only have zero-length ranges");
    return super.range(from, to);
  }
}
PointDecoration.prototype.point = true;
function getInclusive(spec, block = false) {
  let { inclusiveStart: start, inclusiveEnd: end } = spec;
  if (start == null)
    start = spec.inclusive;
  if (end == null)
    end = spec.inclusive;
  return { start: start !== null && start !== undefined ? start : block, end: end !== null && end !== undefined ? end : block };
}
function widgetsEq(a, b) {
  return a == b || !!(a && b && a.compare(b));
}
function addRange(from, to, ranges, margin = 0) {
  let last = ranges.length - 1;
  if (last >= 0 && ranges[last] + margin >= from)
    ranges[last] = Math.max(ranges[last], to);
  else
    ranges.push(from, to);
}

class BlockWrapper extends RangeValue {
  constructor(tagName, attributes) {
    super();
    this.tagName = tagName;
    this.attributes = attributes;
  }
  eq(other) {
    return other == this || other instanceof BlockWrapper && this.tagName == other.tagName && attrsEq(this.attributes, other.attributes);
  }
  static create(spec) {
    return new BlockWrapper(spec.tagName, spec.attributes || noAttrs);
  }
  static set(of, sort = false) {
    return RangeSet.of(of, sort);
  }
}
BlockWrapper.prototype.startSide = BlockWrapper.prototype.endSide = -1;
function getSelection(root) {
  let target;
  if (root.nodeType == 11) {
    target = root.getSelection ? root : root.ownerDocument;
  } else {
    target = root;
  }
  return target.getSelection();
}
function contains(dom, node) {
  return node ? dom == node || dom.contains(node.nodeType != 1 ? node.parentNode : node) : false;
}
function hasSelection(dom, selection) {
  if (!selection.anchorNode)
    return false;
  try {
    return contains(dom, selection.anchorNode);
  } catch (_) {
    return false;
  }
}
function clientRectsFor(dom) {
  if (dom.nodeType == 3)
    return textRange(dom, 0, dom.nodeValue.length).getClientRects();
  else if (dom.nodeType == 1)
    return dom.getClientRects();
  else
    return [];
}
function isEquivalentPosition(node, off, targetNode, targetOff) {
  return targetNode ? scanFor(node, off, targetNode, targetOff, -1) || scanFor(node, off, targetNode, targetOff, 1) : false;
}
function domIndex(node) {
  for (var index = 0;; index++) {
    node = node.previousSibling;
    if (!node)
      return index;
  }
}
function isBlockElement(node) {
  return node.nodeType == 1 && /^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(node.nodeName);
}
function scanFor(node, off, targetNode, targetOff, dir) {
  for (;; ) {
    if (node == targetNode && off == targetOff)
      return true;
    if (off == (dir < 0 ? 0 : maxOffset(node))) {
      if (node.nodeName == "DIV")
        return false;
      let parent = node.parentNode;
      if (!parent || parent.nodeType != 1)
        return false;
      off = domIndex(node) + (dir < 0 ? 0 : 1);
      node = parent;
    } else if (node.nodeType == 1) {
      node = node.childNodes[off + (dir < 0 ? -1 : 0)];
      if (node.nodeType == 1 && node.contentEditable == "false")
        return false;
      off = dir < 0 ? maxOffset(node) : 0;
    } else {
      return false;
    }
  }
}
function maxOffset(node) {
  return node.nodeType == 3 ? node.nodeValue.length : node.childNodes.length;
}
function flattenRect(rect, left) {
  let x = left ? rect.left : rect.right;
  return { left: x, right: x, top: rect.top, bottom: rect.bottom };
}
function windowRect(win) {
  let vp = win.visualViewport;
  if (vp)
    return {
      left: 0,
      right: vp.width,
      top: 0,
      bottom: vp.height
    };
  return {
    left: 0,
    right: win.innerWidth,
    top: 0,
    bottom: win.innerHeight
  };
}
function getScale(elt, rect) {
  let scaleX = rect.width / elt.offsetWidth;
  let scaleY = rect.height / elt.offsetHeight;
  if (scaleX > 0.995 && scaleX < 1.005 || !isFinite(scaleX) || Math.abs(rect.width - elt.offsetWidth) < 1)
    scaleX = 1;
  if (scaleY > 0.995 && scaleY < 1.005 || !isFinite(scaleY) || Math.abs(rect.height - elt.offsetHeight) < 1)
    scaleY = 1;
  return { scaleX, scaleY };
}
function scrollRectIntoView(dom, rect, side, x, y, xMargin, yMargin, ltr) {
  let doc2 = dom.ownerDocument, win = doc2.defaultView || window;
  for (let cur = dom, stop = false;cur && !stop; ) {
    if (cur.nodeType == 1) {
      let bounding, top2 = cur == doc2.body;
      let scaleX = 1, scaleY = 1;
      if (top2) {
        bounding = windowRect(win);
      } else {
        if (/^(fixed|sticky)$/.test(getComputedStyle(cur).position))
          stop = true;
        if (cur.scrollHeight <= cur.clientHeight && cur.scrollWidth <= cur.clientWidth) {
          cur = cur.assignedSlot || cur.parentNode;
          continue;
        }
        let rect2 = cur.getBoundingClientRect();
        ({ scaleX, scaleY } = getScale(cur, rect2));
        bounding = {
          left: rect2.left,
          right: rect2.left + cur.clientWidth * scaleX,
          top: rect2.top,
          bottom: rect2.top + cur.clientHeight * scaleY
        };
      }
      let moveX = 0, moveY = 0;
      if (y == "nearest") {
        if (rect.top < bounding.top) {
          moveY = rect.top - (bounding.top + yMargin);
          if (side > 0 && rect.bottom > bounding.bottom + moveY)
            moveY = rect.bottom - bounding.bottom + yMargin;
        } else if (rect.bottom > bounding.bottom) {
          moveY = rect.bottom - bounding.bottom + yMargin;
          if (side < 0 && rect.top - moveY < bounding.top)
            moveY = rect.top - (bounding.top + yMargin);
        }
      } else {
        let rectHeight = rect.bottom - rect.top, boundingHeight = bounding.bottom - bounding.top;
        let targetTop = y == "center" && rectHeight <= boundingHeight ? rect.top + rectHeight / 2 - boundingHeight / 2 : y == "start" || y == "center" && side < 0 ? rect.top - yMargin : rect.bottom - boundingHeight + yMargin;
        moveY = targetTop - bounding.top;
      }
      if (x == "nearest") {
        if (rect.left < bounding.left) {
          moveX = rect.left - (bounding.left + xMargin);
          if (side > 0 && rect.right > bounding.right + moveX)
            moveX = rect.right - bounding.right + xMargin;
        } else if (rect.right > bounding.right) {
          moveX = rect.right - bounding.right + xMargin;
          if (side < 0 && rect.left < bounding.left + moveX)
            moveX = rect.left - (bounding.left + xMargin);
        }
      } else {
        let targetLeft = x == "center" ? rect.left + (rect.right - rect.left) / 2 - (bounding.right - bounding.left) / 2 : x == "start" == ltr ? rect.left - xMargin : rect.right - (bounding.right - bounding.left) + xMargin;
        moveX = targetLeft - bounding.left;
      }
      if (moveX || moveY) {
        if (top2) {
          win.scrollBy(moveX, moveY);
        } else {
          let movedX = 0, movedY = 0;
          if (moveY) {
            let start = cur.scrollTop;
            cur.scrollTop += moveY / scaleY;
            movedY = (cur.scrollTop - start) * scaleY;
          }
          if (moveX) {
            let start = cur.scrollLeft;
            cur.scrollLeft += moveX / scaleX;
            movedX = (cur.scrollLeft - start) * scaleX;
          }
          rect = {
            left: rect.left - movedX,
            top: rect.top - movedY,
            right: rect.right - movedX,
            bottom: rect.bottom - movedY
          };
          if (movedX && Math.abs(movedX - moveX) < 1)
            x = "nearest";
          if (movedY && Math.abs(movedY - moveY) < 1)
            y = "nearest";
        }
      }
      if (top2)
        break;
      if (rect.top < bounding.top || rect.bottom > bounding.bottom || rect.left < bounding.left || rect.right > bounding.right)
        rect = {
          left: Math.max(rect.left, bounding.left),
          right: Math.min(rect.right, bounding.right),
          top: Math.max(rect.top, bounding.top),
          bottom: Math.min(rect.bottom, bounding.bottom)
        };
      cur = cur.assignedSlot || cur.parentNode;
    } else if (cur.nodeType == 11) {
      cur = cur.host;
    } else {
      break;
    }
  }
}
function scrollableParents(dom) {
  let doc2 = dom.ownerDocument, x, y;
  for (let cur = dom.parentNode;cur; ) {
    if (cur == doc2.body || x && y) {
      break;
    } else if (cur.nodeType == 1) {
      if (!y && cur.scrollHeight > cur.clientHeight)
        y = cur;
      if (!x && cur.scrollWidth > cur.clientWidth)
        x = cur;
      cur = cur.assignedSlot || cur.parentNode;
    } else if (cur.nodeType == 11) {
      cur = cur.host;
    } else {
      break;
    }
  }
  return { x, y };
}

class DOMSelectionState {
  constructor() {
    this.anchorNode = null;
    this.anchorOffset = 0;
    this.focusNode = null;
    this.focusOffset = 0;
  }
  eq(domSel) {
    return this.anchorNode == domSel.anchorNode && this.anchorOffset == domSel.anchorOffset && this.focusNode == domSel.focusNode && this.focusOffset == domSel.focusOffset;
  }
  setRange(range) {
    let { anchorNode, focusNode } = range;
    this.set(anchorNode, Math.min(range.anchorOffset, anchorNode ? maxOffset(anchorNode) : 0), focusNode, Math.min(range.focusOffset, focusNode ? maxOffset(focusNode) : 0));
  }
  set(anchorNode, anchorOffset, focusNode, focusOffset) {
    this.anchorNode = anchorNode;
    this.anchorOffset = anchorOffset;
    this.focusNode = focusNode;
    this.focusOffset = focusOffset;
  }
}
var preventScrollSupported = null;
if (browser.safari && browser.safari_version >= 26)
  preventScrollSupported = false;
function focusPreventScroll(dom) {
  if (dom.setActive)
    return dom.setActive();
  if (preventScrollSupported)
    return dom.focus(preventScrollSupported);
  let stack = [];
  for (let cur = dom;cur; cur = cur.parentNode) {
    stack.push(cur, cur.scrollTop, cur.scrollLeft);
    if (cur == cur.ownerDocument)
      break;
  }
  dom.focus(preventScrollSupported == null ? {
    get preventScroll() {
      preventScrollSupported = { preventScroll: true };
      return true;
    }
  } : undefined);
  if (!preventScrollSupported) {
    preventScrollSupported = false;
    for (let i2 = 0;i2 < stack.length; ) {
      let elt = stack[i2++], top2 = stack[i2++], left = stack[i2++];
      if (elt.scrollTop != top2)
        elt.scrollTop = top2;
      if (elt.scrollLeft != left)
        elt.scrollLeft = left;
    }
  }
}
var scratchRange;
function textRange(node, from, to = from) {
  let range = scratchRange || (scratchRange = document.createRange());
  range.setEnd(node, to);
  range.setStart(node, from);
  return range;
}
function dispatchKey(elt, name, code2, mods) {
  let options = { key: name, code: name, keyCode: code2, which: code2, cancelable: true };
  if (mods)
    ({ altKey: options.altKey, ctrlKey: options.ctrlKey, shiftKey: options.shiftKey, metaKey: options.metaKey } = mods);
  let down = new KeyboardEvent("keydown", options);
  down.synthetic = true;
  elt.dispatchEvent(down);
  let up = new KeyboardEvent("keyup", options);
  up.synthetic = true;
  elt.dispatchEvent(up);
  return down.defaultPrevented || up.defaultPrevented;
}
function getRoot(node) {
  while (node) {
    if (node && (node.nodeType == 9 || node.nodeType == 11 && node.host))
      return node;
    node = node.assignedSlot || node.parentNode;
  }
  return null;
}
function atElementStart(doc2, selection) {
  let { focusNode: node, focusOffset: offset } = selection;
  if (!node || selection.anchorNode != node || selection.anchorOffset != offset)
    return false;
  offset = Math.min(offset, maxOffset(node));
  for (;; ) {
    if (offset) {
      if (node.nodeType != 1)
        return false;
      let prev = node.childNodes[offset - 1];
      if (prev.contentEditable == "false")
        offset--;
      else {
        node = prev;
        offset = maxOffset(node);
      }
    } else if (node == doc2) {
      return true;
    } else {
      offset = domIndex(node);
      node = node.parentNode;
    }
  }
}
function isScrolledToBottom(elt) {
  return elt.scrollTop > Math.max(1, elt.scrollHeight - elt.clientHeight - 4);
}
function textNodeBefore(startNode, startOffset) {
  for (let node = startNode, offset = startOffset;; ) {
    if (node.nodeType == 3 && offset > 0) {
      return { node, offset };
    } else if (node.nodeType == 1 && offset > 0) {
      if (node.contentEditable == "false")
        return null;
      node = node.childNodes[offset - 1];
      offset = maxOffset(node);
    } else if (node.parentNode && !isBlockElement(node)) {
      offset = domIndex(node);
      node = node.parentNode;
    } else {
      return null;
    }
  }
}
function textNodeAfter(startNode, startOffset) {
  for (let node = startNode, offset = startOffset;; ) {
    if (node.nodeType == 3 && offset < node.nodeValue.length) {
      return { node, offset };
    } else if (node.nodeType == 1 && offset < node.childNodes.length) {
      if (node.contentEditable == "false")
        return null;
      node = node.childNodes[offset];
      offset = 0;
    } else if (node.parentNode && !isBlockElement(node)) {
      offset = domIndex(node) + 1;
      node = node.parentNode;
    } else {
      return null;
    }
  }
}

class DOMPos {
  constructor(node, offset, precise = true) {
    this.node = node;
    this.offset = offset;
    this.precise = precise;
  }
  static before(dom, precise) {
    return new DOMPos(dom.parentNode, domIndex(dom), precise);
  }
  static after(dom, precise) {
    return new DOMPos(dom.parentNode, domIndex(dom) + 1, precise);
  }
}
var Direction = /* @__PURE__ */ function(Direction2) {
  Direction2[Direction2["LTR"] = 0] = "LTR";
  Direction2[Direction2["RTL"] = 1] = "RTL";
  return Direction2;
}(Direction || (Direction = {}));
var LTR = Direction.LTR;
var RTL = Direction.RTL;
function dec(str) {
  let result = [];
  for (let i2 = 0;i2 < str.length; i2++)
    result.push(1 << +str[i2]);
  return result;
}
var LowTypes = /* @__PURE__ */ dec("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008");
var ArabicTypes = /* @__PURE__ */ dec("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333");
var Brackets = /* @__PURE__ */ Object.create(null);
var BracketStack = [];
for (let p of ["()", "[]", "{}"]) {
  let l = /* @__PURE__ */ p.charCodeAt(0), r = /* @__PURE__ */ p.charCodeAt(1);
  Brackets[l] = r;
  Brackets[r] = -l;
}
function charType(ch) {
  return ch <= 247 ? LowTypes[ch] : 1424 <= ch && ch <= 1524 ? 2 : 1536 <= ch && ch <= 1785 ? ArabicTypes[ch - 1536] : 1774 <= ch && ch <= 2220 ? 4 : 8192 <= ch && ch <= 8204 ? 256 : 64336 <= ch && ch <= 65023 ? 4 : 1;
}
var BidiRE = /[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;

class BidiSpan {
  get dir() {
    return this.level % 2 ? RTL : LTR;
  }
  constructor(from, to, level) {
    this.from = from;
    this.to = to;
    this.level = level;
  }
  side(end, dir) {
    return this.dir == dir == end ? this.to : this.from;
  }
  forward(forward, dir) {
    return forward == (this.dir == dir);
  }
  static find(order, index, level, assoc) {
    let maybe = -1;
    for (let i2 = 0;i2 < order.length; i2++) {
      let span = order[i2];
      if (span.from <= index && span.to >= index) {
        if (span.level == level)
          return i2;
        if (maybe < 0 || (assoc != 0 ? assoc < 0 ? span.from < index : span.to > index : order[maybe].level > span.level))
          maybe = i2;
      }
    }
    if (maybe < 0)
      throw new RangeError("Index out of range");
    return maybe;
  }
}
function isolatesEq(a, b) {
  if (a.length != b.length)
    return false;
  for (let i2 = 0;i2 < a.length; i2++) {
    let iA = a[i2], iB = b[i2];
    if (iA.from != iB.from || iA.to != iB.to || iA.direction != iB.direction || !isolatesEq(iA.inner, iB.inner))
      return false;
  }
  return true;
}
var types = [];
function computeCharTypes(line, rFrom, rTo, isolates, outerType) {
  for (let iI = 0;iI <= isolates.length; iI++) {
    let from = iI ? isolates[iI - 1].to : rFrom, to = iI < isolates.length ? isolates[iI].from : rTo;
    let prevType = iI ? 256 : outerType;
    for (let i2 = from, prev = prevType, prevStrong = prevType;i2 < to; i2++) {
      let type = charType(line.charCodeAt(i2));
      if (type == 512)
        type = prev;
      else if (type == 8 && prevStrong == 4)
        type = 16;
      types[i2] = type == 4 ? 2 : type;
      if (type & 7)
        prevStrong = type;
      prev = type;
    }
    for (let i2 = from, prev = prevType, prevStrong = prevType;i2 < to; i2++) {
      let type = types[i2];
      if (type == 128) {
        if (i2 < to - 1 && prev == types[i2 + 1] && prev & 24)
          type = types[i2] = prev;
        else
          types[i2] = 256;
      } else if (type == 64) {
        let end = i2 + 1;
        while (end < to && types[end] == 64)
          end++;
        let replace = i2 && prev == 8 || end < rTo && types[end] == 8 ? prevStrong == 1 ? 1 : 8 : 256;
        for (let j = i2;j < end; j++)
          types[j] = replace;
        i2 = end - 1;
      } else if (type == 8 && prevStrong == 1) {
        types[i2] = 1;
      }
      prev = type;
      if (type & 7)
        prevStrong = type;
    }
  }
}
function processBracketPairs(line, rFrom, rTo, isolates, outerType) {
  let oppositeType = outerType == 1 ? 2 : 1;
  for (let iI = 0, sI = 0, context = 0;iI <= isolates.length; iI++) {
    let from = iI ? isolates[iI - 1].to : rFrom, to = iI < isolates.length ? isolates[iI].from : rTo;
    for (let i2 = from, ch, br, type;i2 < to; i2++) {
      if (br = Brackets[ch = line.charCodeAt(i2)]) {
        if (br < 0) {
          for (let sJ = sI - 3;sJ >= 0; sJ -= 3) {
            if (BracketStack[sJ + 1] == -br) {
              let flags = BracketStack[sJ + 2];
              let type2 = flags & 2 ? outerType : !(flags & 4) ? 0 : flags & 1 ? oppositeType : outerType;
              if (type2)
                types[i2] = types[BracketStack[sJ]] = type2;
              sI = sJ;
              break;
            }
          }
        } else if (BracketStack.length == 189) {
          break;
        } else {
          BracketStack[sI++] = i2;
          BracketStack[sI++] = ch;
          BracketStack[sI++] = context;
        }
      } else if ((type = types[i2]) == 2 || type == 1) {
        let embed = type == outerType;
        context = embed ? 0 : 1;
        for (let sJ = sI - 3;sJ >= 0; sJ -= 3) {
          let cur = BracketStack[sJ + 2];
          if (cur & 2)
            break;
          if (embed) {
            BracketStack[sJ + 2] |= 2;
          } else {
            if (cur & 4)
              break;
            BracketStack[sJ + 2] |= 4;
          }
        }
      }
    }
  }
}
function processNeutrals(rFrom, rTo, isolates, outerType) {
  for (let iI = 0, prev = outerType;iI <= isolates.length; iI++) {
    let from = iI ? isolates[iI - 1].to : rFrom, to = iI < isolates.length ? isolates[iI].from : rTo;
    for (let i2 = from;i2 < to; ) {
      let type = types[i2];
      if (type == 256) {
        let end = i2 + 1;
        for (;; ) {
          if (end == to) {
            if (iI == isolates.length)
              break;
            end = isolates[iI++].to;
            to = iI < isolates.length ? isolates[iI].from : rTo;
          } else if (types[end] == 256) {
            end++;
          } else {
            break;
          }
        }
        let beforeL = prev == 1;
        let afterL = (end < rTo ? types[end] : outerType) == 1;
        let replace = beforeL == afterL ? beforeL ? 1 : 2 : outerType;
        for (let j = end, jI = iI, fromJ = jI ? isolates[jI - 1].to : rFrom;j > i2; ) {
          if (j == fromJ) {
            j = isolates[--jI].from;
            fromJ = jI ? isolates[jI - 1].to : rFrom;
          }
          types[--j] = replace;
        }
        i2 = end;
      } else {
        prev = type;
        i2++;
      }
    }
  }
}
function emitSpans(line, from, to, level, baseLevel, isolates, order) {
  let ourType = level % 2 ? 2 : 1;
  if (level % 2 == baseLevel % 2) {
    for (let iCh = from, iI = 0;iCh < to; ) {
      let sameDir = true, isNum = false;
      if (iI == isolates.length || iCh < isolates[iI].from) {
        let next = types[iCh];
        if (next != ourType) {
          sameDir = false;
          isNum = next == 16;
        }
      }
      let recurse = !sameDir && ourType == 1 ? [] : null;
      let localLevel = sameDir ? level : level + 1;
      let iScan = iCh;
      run:
        for (;; ) {
          if (iI < isolates.length && iScan == isolates[iI].from) {
            if (isNum)
              break run;
            let iso = isolates[iI];
            if (!sameDir)
              for (let upto = iso.to, jI = iI + 1;; ) {
                if (upto == to)
                  break run;
                if (jI < isolates.length && isolates[jI].from == upto)
                  upto = isolates[jI++].to;
                else if (types[upto] == ourType)
                  break run;
                else
                  break;
              }
            iI++;
            if (recurse) {
              recurse.push(iso);
            } else {
              if (iso.from > iCh)
                order.push(new BidiSpan(iCh, iso.from, localLevel));
              let dirSwap = iso.direction == LTR != !(localLevel % 2);
              computeSectionOrder(line, dirSwap ? level + 1 : level, baseLevel, iso.inner, iso.from, iso.to, order);
              iCh = iso.to;
            }
            iScan = iso.to;
          } else if (iScan == to || (sameDir ? types[iScan] != ourType : types[iScan] == ourType)) {
            break;
          } else {
            iScan++;
          }
        }
      if (recurse)
        emitSpans(line, iCh, iScan, level + 1, baseLevel, recurse, order);
      else if (iCh < iScan)
        order.push(new BidiSpan(iCh, iScan, localLevel));
      iCh = iScan;
    }
  } else {
    for (let iCh = to, iI = isolates.length;iCh > from; ) {
      let sameDir = true, isNum = false;
      if (!iI || iCh > isolates[iI - 1].to) {
        let next = types[iCh - 1];
        if (next != ourType) {
          sameDir = false;
          isNum = next == 16;
        }
      }
      let recurse = !sameDir && ourType == 1 ? [] : null;
      let localLevel = sameDir ? level : level + 1;
      let iScan = iCh;
      run:
        for (;; ) {
          if (iI && iScan == isolates[iI - 1].to) {
            if (isNum)
              break run;
            let iso = isolates[--iI];
            if (!sameDir)
              for (let upto = iso.from, jI = iI;; ) {
                if (upto == from)
                  break run;
                if (jI && isolates[jI - 1].to == upto)
                  upto = isolates[--jI].from;
                else if (types[upto - 1] == ourType)
                  break run;
                else
                  break;
              }
            if (recurse) {
              recurse.push(iso);
            } else {
              if (iso.to < iCh)
                order.push(new BidiSpan(iso.to, iCh, localLevel));
              let dirSwap = iso.direction == LTR != !(localLevel % 2);
              computeSectionOrder(line, dirSwap ? level + 1 : level, baseLevel, iso.inner, iso.from, iso.to, order);
              iCh = iso.from;
            }
            iScan = iso.from;
          } else if (iScan == from || (sameDir ? types[iScan - 1] != ourType : types[iScan - 1] == ourType)) {
            break;
          } else {
            iScan--;
          }
        }
      if (recurse)
        emitSpans(line, iScan, iCh, level + 1, baseLevel, recurse, order);
      else if (iScan < iCh)
        order.push(new BidiSpan(iScan, iCh, localLevel));
      iCh = iScan;
    }
  }
}
function computeSectionOrder(line, level, baseLevel, isolates, from, to, order) {
  let outerType = level % 2 ? 2 : 1;
  computeCharTypes(line, from, to, isolates, outerType);
  processBracketPairs(line, from, to, isolates, outerType);
  processNeutrals(from, to, isolates, outerType);
  emitSpans(line, from, to, level, baseLevel, isolates, order);
}
function computeOrder(line, direction, isolates) {
  if (!line)
    return [new BidiSpan(0, 0, direction == RTL ? 1 : 0)];
  if (direction == LTR && !isolates.length && !BidiRE.test(line))
    return trivialOrder(line.length);
  if (isolates.length)
    while (line.length > types.length)
      types[types.length] = 256;
  let order = [], level = direction == LTR ? 0 : 1;
  computeSectionOrder(line, level, level, isolates, 0, line.length, order);
  return order;
}
function trivialOrder(length) {
  return [new BidiSpan(0, length, 0)];
}
var movedOver = "";
function moveVisually(line, order, dir, start, forward) {
  var _a;
  let startIndex = start.head - line.from;
  let spanI = BidiSpan.find(order, startIndex, (_a = start.bidiLevel) !== null && _a !== undefined ? _a : -1, start.assoc);
  let span = order[spanI], spanEnd = span.side(forward, dir);
  if (startIndex == spanEnd) {
    let nextI = spanI += forward ? 1 : -1;
    if (nextI < 0 || nextI >= order.length)
      return null;
    span = order[spanI = nextI];
    startIndex = span.side(!forward, dir);
    spanEnd = span.side(forward, dir);
  }
  let nextIndex = findClusterBreak2(line.text, startIndex, span.forward(forward, dir));
  if (nextIndex < span.from || nextIndex > span.to)
    nextIndex = spanEnd;
  movedOver = line.text.slice(Math.min(startIndex, nextIndex), Math.max(startIndex, nextIndex));
  let nextSpan = spanI == (forward ? order.length - 1 : 0) ? null : order[spanI + (forward ? 1 : -1)];
  if (nextSpan && nextIndex == spanEnd && nextSpan.level + (forward ? 0 : 1) < span.level)
    return EditorSelection.cursor(nextSpan.side(!forward, dir) + line.from, nextSpan.forward(forward, dir) ? 1 : -1, nextSpan.level);
  return EditorSelection.cursor(nextIndex + line.from, span.forward(forward, dir) ? -1 : 1, span.level);
}
function autoDirection(text, from, to) {
  for (let i2 = from;i2 < to; i2++) {
    let type = charType(text.charCodeAt(i2));
    if (type == 1)
      return LTR;
    if (type == 2 || type == 4)
      return RTL;
  }
  return LTR;
}
var clickAddsSelectionRange = /* @__PURE__ */ Facet.define();
var dragMovesSelection$1 = /* @__PURE__ */ Facet.define();
var mouseSelectionStyle = /* @__PURE__ */ Facet.define();
var exceptionSink = /* @__PURE__ */ Facet.define();
var updateListener = /* @__PURE__ */ Facet.define();
var inputHandler = /* @__PURE__ */ Facet.define();
var focusChangeEffect = /* @__PURE__ */ Facet.define();
var clipboardInputFilter = /* @__PURE__ */ Facet.define();
var clipboardOutputFilter = /* @__PURE__ */ Facet.define();
var perLineTextDirection = /* @__PURE__ */ Facet.define({
  combine: (values) => values.some((x) => x)
});
var nativeSelectionHidden = /* @__PURE__ */ Facet.define({
  combine: (values) => values.some((x) => x)
});
var scrollHandler = /* @__PURE__ */ Facet.define();

class ScrollTarget {
  constructor(range, y = "nearest", x = "nearest", yMargin = 5, xMargin = 5, isSnapshot = false) {
    this.range = range;
    this.y = y;
    this.x = x;
    this.yMargin = yMargin;
    this.xMargin = xMargin;
    this.isSnapshot = isSnapshot;
  }
  map(changes) {
    return changes.empty ? this : new ScrollTarget(this.range.map(changes), this.y, this.x, this.yMargin, this.xMargin, this.isSnapshot);
  }
  clip(state) {
    return this.range.to <= state.doc.length ? this : new ScrollTarget(EditorSelection.cursor(state.doc.length), this.y, this.x, this.yMargin, this.xMargin, this.isSnapshot);
  }
}
var scrollIntoView = /* @__PURE__ */ StateEffect.define({ map: (t, ch) => t.map(ch) });
var setEditContextFormatting = /* @__PURE__ */ StateEffect.define();
function logException(state, exception, context) {
  let handler = state.facet(exceptionSink);
  if (handler.length)
    handler[0](exception);
  else if (window.onerror && window.onerror(String(exception), context, undefined, undefined, exception))
    ;
  else if (context)
    console.error(context + ":", exception);
  else
    console.error(exception);
}
var editable = /* @__PURE__ */ Facet.define({ combine: (values) => values.length ? values[0] : true });
var nextPluginID = 0;
var viewPlugin = /* @__PURE__ */ Facet.define({
  combine(plugins) {
    return plugins.filter((p, i2) => {
      for (let j = 0;j < i2; j++)
        if (plugins[j].plugin == p.plugin)
          return false;
      return true;
    });
  }
});

class ViewPlugin {
  constructor(id, create, domEventHandlers, domEventObservers, buildExtensions) {
    this.id = id;
    this.create = create;
    this.domEventHandlers = domEventHandlers;
    this.domEventObservers = domEventObservers;
    this.baseExtensions = buildExtensions(this);
    this.extension = this.baseExtensions.concat(viewPlugin.of({ plugin: this, arg: undefined }));
  }
  of(arg) {
    return this.baseExtensions.concat(viewPlugin.of({ plugin: this, arg }));
  }
  static define(create, spec) {
    const { eventHandlers, eventObservers, provide, decorations: deco } = spec || {};
    return new ViewPlugin(nextPluginID++, create, eventHandlers, eventObservers, (plugin) => {
      let ext = [];
      if (deco)
        ext.push(decorations.of((view) => {
          let pluginInst = view.plugin(plugin);
          return pluginInst ? deco(pluginInst) : Decoration.none;
        }));
      if (provide)
        ext.push(provide(plugin));
      return ext;
    });
  }
  static fromClass(cls, spec) {
    return ViewPlugin.define((view, arg) => new cls(view, arg), spec);
  }
}

class PluginInstance {
  constructor(spec) {
    this.spec = spec;
    this.mustUpdate = null;
    this.value = null;
  }
  get plugin() {
    return this.spec && this.spec.plugin;
  }
  update(view) {
    if (!this.value) {
      if (this.spec) {
        try {
          this.value = this.spec.plugin.create(view, this.spec.arg);
        } catch (e) {
          logException(view.state, e, "CodeMirror plugin crashed");
          this.deactivate();
        }
      }
    } else if (this.mustUpdate) {
      let update = this.mustUpdate;
      this.mustUpdate = null;
      if (this.value.update) {
        try {
          this.value.update(update);
        } catch (e) {
          logException(update.state, e, "CodeMirror plugin crashed");
          if (this.value.destroy)
            try {
              this.value.destroy();
            } catch (_) {}
          this.deactivate();
        }
      }
    }
    return this;
  }
  destroy(view) {
    var _a;
    if ((_a = this.value) === null || _a === undefined ? undefined : _a.destroy) {
      try {
        this.value.destroy();
      } catch (e) {
        logException(view.state, e, "CodeMirror plugin crashed");
      }
    }
  }
  deactivate() {
    this.spec = this.value = null;
  }
}
var editorAttributes = /* @__PURE__ */ Facet.define();
var contentAttributes = /* @__PURE__ */ Facet.define();
var decorations = /* @__PURE__ */ Facet.define();
var blockWrappers = /* @__PURE__ */ Facet.define();
var outerDecorations = /* @__PURE__ */ Facet.define();
var atomicRanges = /* @__PURE__ */ Facet.define();
var bidiIsolatedRanges = /* @__PURE__ */ Facet.define();
function getIsolatedRanges(view, line) {
  let isolates = view.state.facet(bidiIsolatedRanges);
  if (!isolates.length)
    return isolates;
  let sets = isolates.map((i2) => i2 instanceof Function ? i2(view) : i2);
  let result = [];
  RangeSet.spans(sets, line.from, line.to, {
    point() {},
    span(fromDoc, toDoc, active, open) {
      let from = fromDoc - line.from, to = toDoc - line.from;
      let level = result;
      for (let i2 = active.length - 1;i2 >= 0; i2--, open--) {
        let direction = active[i2].spec.bidiIsolate, update;
        if (direction == null)
          direction = autoDirection(line.text, from, to);
        if (open > 0 && level.length && (update = level[level.length - 1]).to == from && update.direction == direction) {
          update.to = to;
          level = update.inner;
        } else {
          let add2 = { from, to, direction, inner: [] };
          level.push(add2);
          level = add2.inner;
        }
      }
    }
  });
  return result;
}
var scrollMargins = /* @__PURE__ */ Facet.define();
function getScrollMargins(view) {
  let left = 0, right = 0, top2 = 0, bottom = 0;
  for (let source of view.state.facet(scrollMargins)) {
    let m = source(view);
    if (m) {
      if (m.left != null)
        left = Math.max(left, m.left);
      if (m.right != null)
        right = Math.max(right, m.right);
      if (m.top != null)
        top2 = Math.max(top2, m.top);
      if (m.bottom != null)
        bottom = Math.max(bottom, m.bottom);
    }
  }
  return { left, right, top: top2, bottom };
}
var styleModule = /* @__PURE__ */ Facet.define();

class ChangedRange {
  constructor(fromA, toA, fromB, toB) {
    this.fromA = fromA;
    this.toA = toA;
    this.fromB = fromB;
    this.toB = toB;
  }
  join(other) {
    return new ChangedRange(Math.min(this.fromA, other.fromA), Math.max(this.toA, other.toA), Math.min(this.fromB, other.fromB), Math.max(this.toB, other.toB));
  }
  addToSet(set) {
    let i2 = set.length, me = this;
    for (;i2 > 0; i2--) {
      let range = set[i2 - 1];
      if (range.fromA > me.toA)
        continue;
      if (range.toA < me.fromA)
        break;
      me = me.join(range);
      set.splice(i2 - 1, 1);
    }
    set.splice(i2, 0, me);
    return set;
  }
  static extendWithRanges(diff, ranges) {
    if (ranges.length == 0)
      return diff;
    let result = [];
    for (let dI = 0, rI = 0, off = 0;; ) {
      let nextD = dI < diff.length ? diff[dI].fromB : 1e9;
      let nextR = rI < ranges.length ? ranges[rI] : 1e9;
      let fromB = Math.min(nextD, nextR);
      if (fromB == 1e9)
        break;
      let fromA = fromB + off, toB = fromB, toA = fromA;
      for (;; ) {
        if (rI < ranges.length && ranges[rI] <= toB) {
          let end = ranges[rI + 1];
          rI += 2;
          toB = Math.max(toB, end);
          for (let i2 = dI;i2 < diff.length && diff[i2].fromB <= toB; i2++)
            off = diff[i2].toA - diff[i2].toB;
          toA = Math.max(toA, end + off);
        } else if (dI < diff.length && diff[dI].fromB <= toB) {
          let next = diff[dI++];
          toB = Math.max(toB, next.toB);
          toA = Math.max(toA, next.toA);
          off = next.toA - next.toB;
        } else {
          break;
        }
      }
      result.push(new ChangedRange(fromA, toA, fromB, toB));
    }
    return result;
  }
}

class ViewUpdate {
  constructor(view, state, transactions) {
    this.view = view;
    this.state = state;
    this.transactions = transactions;
    this.flags = 0;
    this.startState = view.state;
    this.changes = ChangeSet.empty(this.startState.doc.length);
    for (let tr of transactions)
      this.changes = this.changes.compose(tr.changes);
    let changedRanges = [];
    this.changes.iterChangedRanges((fromA, toA, fromB, toB) => changedRanges.push(new ChangedRange(fromA, toA, fromB, toB)));
    this.changedRanges = changedRanges;
  }
  static create(view, state, transactions) {
    return new ViewUpdate(view, state, transactions);
  }
  get viewportChanged() {
    return (this.flags & 4) > 0;
  }
  get viewportMoved() {
    return (this.flags & 8) > 0;
  }
  get heightChanged() {
    return (this.flags & 2) > 0;
  }
  get geometryChanged() {
    return this.docChanged || (this.flags & (16 | 2)) > 0;
  }
  get focusChanged() {
    return (this.flags & 1) > 0;
  }
  get docChanged() {
    return !this.changes.empty;
  }
  get selectionSet() {
    return this.transactions.some((tr) => tr.selection);
  }
  get empty() {
    return this.flags == 0 && this.transactions.length == 0;
  }
}
var noChildren = [];

class Tile {
  constructor(dom, length, flags = 0) {
    this.dom = dom;
    this.length = length;
    this.flags = flags;
    this.parent = null;
    dom.cmTile = this;
  }
  get breakAfter() {
    return this.flags & 1;
  }
  get children() {
    return noChildren;
  }
  isWidget() {
    return false;
  }
  get isHidden() {
    return false;
  }
  isComposite() {
    return false;
  }
  isLine() {
    return false;
  }
  isText() {
    return false;
  }
  isBlock() {
    return false;
  }
  get domAttrs() {
    return null;
  }
  sync(track) {
    this.flags |= 2;
    if (this.flags & 4) {
      this.flags &= ~4;
      let attrs = this.domAttrs;
      if (attrs)
        setAttrs(this.dom, attrs);
    }
  }
  toString() {
    return this.constructor.name + (this.children.length ? `(${this.children})` : "") + (this.breakAfter ? "#" : "");
  }
  destroy() {
    this.parent = null;
  }
  setDOM(dom) {
    this.dom = dom;
    dom.cmTile = this;
  }
  get posAtStart() {
    return this.parent ? this.parent.posBefore(this) : 0;
  }
  get posAtEnd() {
    return this.posAtStart + this.length;
  }
  posBefore(tile, start = this.posAtStart) {
    let pos = start;
    for (let child of this.children) {
      if (child == tile)
        return pos;
      pos += child.length + child.breakAfter;
    }
    throw new RangeError("Invalid child in posBefore");
  }
  posAfter(tile) {
    return this.posBefore(tile) + tile.length;
  }
  covers(side) {
    return true;
  }
  coordsIn(pos, side) {
    return null;
  }
  domPosFor(off, side) {
    let index = domIndex(this.dom);
    let after = this.length ? off > 0 : side > 0;
    return new DOMPos(this.parent.dom, index + (after ? 1 : 0), off == 0 || off == this.length);
  }
  markDirty(attrs) {
    this.flags &= ~2;
    if (attrs)
      this.flags |= 4;
    if (this.parent && this.parent.flags & 2)
      this.parent.markDirty(false);
  }
  get overrideDOMText() {
    return null;
  }
  get root() {
    for (let t = this;t; t = t.parent)
      if (t instanceof DocTile)
        return t;
    return null;
  }
  static get(dom) {
    return dom.cmTile;
  }
}

class CompositeTile extends Tile {
  constructor(dom) {
    super(dom, 0);
    this._children = [];
  }
  isComposite() {
    return true;
  }
  get children() {
    return this._children;
  }
  get lastChild() {
    return this.children.length ? this.children[this.children.length - 1] : null;
  }
  append(child) {
    this.children.push(child);
    child.parent = this;
  }
  sync(track) {
    if (this.flags & 2)
      return;
    super.sync(track);
    let parent = this.dom, prev = null, next;
    let tracking = (track === null || track === undefined ? undefined : track.node) == parent ? track : null;
    let length = 0;
    for (let child of this.children) {
      child.sync(track);
      length += child.length + child.breakAfter;
      next = prev ? prev.nextSibling : parent.firstChild;
      if (tracking && next != child.dom)
        tracking.written = true;
      if (child.dom.parentNode == parent) {
        while (next && next != child.dom)
          next = rm$1(next);
      } else {
        parent.insertBefore(child.dom, next);
      }
      prev = child.dom;
    }
    next = prev ? prev.nextSibling : parent.firstChild;
    if (tracking && next)
      tracking.written = true;
    while (next)
      next = rm$1(next);
    this.length = length;
  }
}
function rm$1(dom) {
  let next = dom.nextSibling;
  dom.parentNode.removeChild(dom);
  return next;
}

class DocTile extends CompositeTile {
  constructor(view, dom) {
    super(dom);
    this.view = view;
  }
  owns(tile) {
    for (;tile; tile = tile.parent)
      if (tile == this)
        return true;
    return false;
  }
  isBlock() {
    return true;
  }
  nearest(dom) {
    for (;; ) {
      if (!dom)
        return null;
      let tile = Tile.get(dom);
      if (tile && this.owns(tile))
        return tile;
      dom = dom.parentNode;
    }
  }
  blockTiles(f) {
    for (let stack = [], cur = this, i2 = 0, pos = 0;; ) {
      if (i2 == cur.children.length) {
        if (!stack.length)
          return;
        cur = cur.parent;
        if (cur.breakAfter)
          pos++;
        i2 = stack.pop();
      } else {
        let next = cur.children[i2++];
        if (next instanceof BlockWrapperTile) {
          stack.push(i2);
          cur = next;
          i2 = 0;
        } else {
          let end = pos + next.length;
          let result = f(next, pos);
          if (result !== undefined)
            return result;
          pos = end + next.breakAfter;
        }
      }
    }
  }
  resolveBlock(pos, side) {
    let before, beforeOff = -1, after, afterOff = -1;
    this.blockTiles((tile, off) => {
      let end = off + tile.length;
      if (pos >= off && pos <= end) {
        if (tile.isWidget() && side >= -1 && side <= 1) {
          if (tile.flags & 32)
            return true;
          if (tile.flags & 16)
            before = undefined;
        }
        if ((off < pos || pos == end && (side < -1 ? tile.length : tile.covers(1))) && (!before || !tile.isWidget() && before.isWidget())) {
          before = tile;
          beforeOff = pos - off;
        }
        if ((end > pos || pos == off && (side > 1 ? tile.length : tile.covers(-1))) && (!after || !tile.isWidget() && after.isWidget())) {
          after = tile;
          afterOff = pos - off;
        }
      }
    });
    if (!before && !after)
      throw new Error("No tile at position " + pos);
    return before && side < 0 || !after ? { tile: before, offset: beforeOff } : { tile: after, offset: afterOff };
  }
}

class BlockWrapperTile extends CompositeTile {
  constructor(dom, wrapper) {
    super(dom);
    this.wrapper = wrapper;
  }
  isBlock() {
    return true;
  }
  covers(side) {
    if (!this.children.length)
      return false;
    return side < 0 ? this.children[0].covers(-1) : this.lastChild.covers(1);
  }
  get domAttrs() {
    return this.wrapper.attributes;
  }
  static of(wrapper, dom) {
    let tile = new BlockWrapperTile(dom || document.createElement(wrapper.tagName), wrapper);
    if (!dom)
      tile.flags |= 4;
    return tile;
  }
}

class LineTile extends CompositeTile {
  constructor(dom, attrs) {
    super(dom);
    this.attrs = attrs;
  }
  isLine() {
    return true;
  }
  static start(attrs, dom, keepAttrs) {
    let line = new LineTile(dom || document.createElement("div"), attrs);
    if (!dom || !keepAttrs)
      line.flags |= 4;
    return line;
  }
  get domAttrs() {
    return this.attrs;
  }
  resolveInline(pos, side, forCoords) {
    let before = null, beforeOff = -1, after = null, afterOff = -1;
    function scan(tile, pos2) {
      for (let i2 = 0, off = 0;i2 < tile.children.length && off <= pos2; i2++) {
        let child = tile.children[i2], end = off + child.length;
        if (end >= pos2) {
          if (child.isComposite()) {
            scan(child, pos2 - off);
          } else if ((!after || after.isHidden && (side > 0 || forCoords && onSameLine(after, child))) && (end > pos2 || child.flags & 32)) {
            after = child;
            afterOff = pos2 - off;
          } else if (off < pos2 || child.flags & 16 && !child.isHidden) {
            before = child;
            beforeOff = pos2 - off;
          }
        }
        off = end;
      }
    }
    scan(this, pos);
    let target = (side < 0 ? before : after) || before || after;
    return target ? { tile: target, offset: target == before ? beforeOff : afterOff } : null;
  }
  coordsIn(pos, side) {
    let found = this.resolveInline(pos, side, true);
    if (!found)
      return fallbackRect(this);
    return found.tile.coordsIn(Math.max(0, found.offset), side);
  }
  domIn(pos, side) {
    let found = this.resolveInline(pos, side);
    if (found) {
      let { tile, offset } = found;
      if (this.dom.contains(tile.dom)) {
        if (tile.isText())
          return new DOMPos(tile.dom, Math.min(tile.dom.nodeValue.length, offset));
        return tile.domPosFor(offset, tile.flags & 16 ? 1 : tile.flags & 32 ? -1 : side);
      }
      let parent = found.tile.parent, saw = false;
      for (let ch of parent.children) {
        if (saw)
          return new DOMPos(ch.dom, 0);
        if (ch == found.tile) {
          saw = true;
        }
      }
    }
    return new DOMPos(this.dom, 0);
  }
}
function fallbackRect(tile) {
  let last = tile.dom.lastChild;
  if (!last)
    return tile.dom.getBoundingClientRect();
  let rects = clientRectsFor(last);
  return rects[rects.length - 1] || null;
}
function onSameLine(a, b) {
  let posA = a.coordsIn(0, 1), posB = b.coordsIn(0, 1);
  return posA && posB && posB.top < posA.bottom;
}

class MarkTile extends CompositeTile {
  constructor(dom, mark) {
    super(dom);
    this.mark = mark;
  }
  get domAttrs() {
    return this.mark.attrs;
  }
  static of(mark, dom) {
    let tile = new MarkTile(dom || document.createElement(mark.tagName), mark);
    if (!dom)
      tile.flags |= 4;
    return tile;
  }
}

class TextTile extends Tile {
  constructor(dom, text) {
    super(dom, text.length);
    this.text = text;
  }
  sync(track) {
    if (this.flags & 2)
      return;
    super.sync(track);
    if (this.dom.nodeValue != this.text) {
      if (track && track.node == this.dom)
        track.written = true;
      this.dom.nodeValue = this.text;
    }
  }
  isText() {
    return true;
  }
  toString() {
    return JSON.stringify(this.text);
  }
  coordsIn(pos, side) {
    let length = this.dom.nodeValue.length;
    if (pos > length)
      pos = length;
    let from = pos, to = pos, flatten2 = 0;
    if (pos == 0 && side < 0 || pos == length && side >= 0) {
      if (!(browser.chrome || browser.gecko)) {
        if (pos) {
          from--;
          flatten2 = 1;
        } else if (to < length) {
          to++;
          flatten2 = -1;
        }
      }
    } else {
      if (side < 0)
        from--;
      else if (to < length)
        to++;
    }
    let rects = textRange(this.dom, from, to).getClientRects();
    if (!rects.length)
      return null;
    let rect = rects[(flatten2 ? flatten2 < 0 : side >= 0) ? 0 : rects.length - 1];
    if (browser.safari && !flatten2 && rect.width == 0)
      rect = Array.prototype.find.call(rects, (r) => r.width) || rect;
    return flatten2 ? flattenRect(rect, flatten2 < 0) : rect || null;
  }
  static of(text, dom) {
    let tile = new TextTile(dom || document.createTextNode(text), text);
    if (!dom)
      tile.flags |= 2;
    return tile;
  }
}

class WidgetTile extends Tile {
  constructor(dom, length, widget, flags) {
    super(dom, length, flags);
    this.widget = widget;
  }
  isWidget() {
    return true;
  }
  get isHidden() {
    return this.widget.isHidden;
  }
  covers(side) {
    if (this.flags & 48)
      return false;
    return (this.flags & (side < 0 ? 64 : 128)) > 0;
  }
  coordsIn(pos, side) {
    return this.coordsInWidget(pos, side, false);
  }
  coordsInWidget(pos, side, block) {
    let custom = this.widget.coordsAt(this.dom, pos, side);
    if (custom)
      return custom;
    if (block) {
      return flattenRect(this.dom.getBoundingClientRect(), this.length ? pos == 0 : side <= 0);
    } else {
      let rects = this.dom.getClientRects(), rect = null;
      if (!rects.length)
        return null;
      let fromBack = this.flags & 16 ? true : this.flags & 32 ? false : pos > 0;
      for (let i2 = fromBack ? rects.length - 1 : 0;; i2 += fromBack ? -1 : 1) {
        rect = rects[i2];
        if (pos > 0 ? i2 == 0 : i2 == rects.length - 1 || rect.top < rect.bottom)
          break;
      }
      return flattenRect(rect, !fromBack);
    }
  }
  get overrideDOMText() {
    if (!this.length)
      return Text.empty;
    let { root } = this;
    if (!root)
      return Text.empty;
    let start = this.posAtStart;
    return root.view.state.doc.slice(start, start + this.length);
  }
  destroy() {
    super.destroy();
    this.widget.destroy(this.dom);
  }
  static of(widget, view, length, flags, dom) {
    if (!dom) {
      dom = widget.toDOM(view);
      if (!widget.editable)
        dom.contentEditable = "false";
    }
    return new WidgetTile(dom, length, widget, flags);
  }
}

class WidgetBufferTile extends Tile {
  constructor(flags) {
    let img = document.createElement("img");
    img.className = "cm-widgetBuffer";
    img.setAttribute("aria-hidden", "true");
    super(img, 0, flags);
  }
  get isHidden() {
    return false;
  }
  get overrideDOMText() {
    return Text.empty;
  }
  coordsIn(pos) {
    return this.dom.getBoundingClientRect();
  }
}

class TilePointer {
  constructor(top2) {
    this.index = 0;
    this.beforeBreak = false;
    this.parents = [];
    this.tile = top2;
  }
  advance(dist, side, walker) {
    let { tile, index, beforeBreak, parents } = this;
    while (dist || side > 0) {
      if (!tile.isComposite()) {
        if (index == tile.length) {
          beforeBreak = !!tile.breakAfter;
          ({ tile, index } = parents.pop());
          index++;
        } else if (!dist) {
          break;
        } else {
          let take = Math.min(dist, tile.length - index);
          if (walker)
            walker.skip(tile, index, index + take);
          dist -= take;
          index += take;
        }
      } else if (beforeBreak) {
        if (!dist)
          break;
        if (walker)
          walker.break();
        dist--;
        beforeBreak = false;
      } else if (index == tile.children.length) {
        if (!dist && !parents.length)
          break;
        if (walker)
          walker.leave(tile);
        beforeBreak = !!tile.breakAfter;
        ({ tile, index } = parents.pop());
        index++;
      } else {
        let next = tile.children[index], brk = next.breakAfter;
        if ((side > 0 ? next.length <= dist : next.length < dist) && (!walker || walker.skip(next, 0, next.length) !== false || !next.isComposite)) {
          beforeBreak = !!brk;
          index++;
          dist -= next.length;
        } else {
          parents.push({ tile, index });
          tile = next;
          index = 0;
          if (walker && next.isComposite())
            walker.enter(next);
        }
      }
    }
    this.tile = tile;
    this.index = index;
    this.beforeBreak = beforeBreak;
    return this;
  }
  get root() {
    return this.parents.length ? this.parents[0].tile : this.tile;
  }
}

class OpenWrapper {
  constructor(from, to, wrapper, rank) {
    this.from = from;
    this.to = to;
    this.wrapper = wrapper;
    this.rank = rank;
  }
}

class TileBuilder {
  constructor(cache, root, blockWrappers2) {
    this.cache = cache;
    this.root = root;
    this.blockWrappers = blockWrappers2;
    this.curLine = null;
    this.lastBlock = null;
    this.afterWidget = null;
    this.pos = 0;
    this.wrappers = [];
    this.wrapperPos = 0;
  }
  addText(text, marks, openStart, tile) {
    var _a;
    this.flushBuffer();
    let parent = this.ensureMarks(marks, openStart);
    let prev = parent.lastChild;
    if (prev && prev.isText() && !(prev.flags & 8)) {
      this.cache.reused.set(prev, 2);
      let tile2 = parent.children[parent.children.length - 1] = new TextTile(prev.dom, prev.text + text);
      tile2.parent = parent;
    } else {
      parent.append(tile || TextTile.of(text, (_a = this.cache.find(TextTile)) === null || _a === undefined ? undefined : _a.dom));
    }
    this.pos += text.length;
    this.afterWidget = null;
  }
  addComposition(composition, context) {
    let line = this.curLine;
    if (line.dom != context.line.dom) {
      line.setDOM(this.cache.reused.has(context.line) ? freeNode(context.line.dom) : context.line.dom);
      this.cache.reused.set(context.line, 2);
    }
    let head = line;
    for (let i2 = context.marks.length - 1;i2 >= 0; i2--) {
      let mark = context.marks[i2];
      let last = head.lastChild;
      if (last instanceof MarkTile && last.mark.eq(mark.mark)) {
        if (last.dom != mark.dom)
          last.setDOM(freeNode(mark.dom));
        head = last;
      } else {
        if (this.cache.reused.get(mark)) {
          let tile = Tile.get(mark.dom);
          if (tile)
            tile.setDOM(freeNode(mark.dom));
        }
        let nw = MarkTile.of(mark.mark, mark.dom);
        head.append(nw);
        head = nw;
      }
      this.cache.reused.set(mark, 2);
    }
    let oldTile = Tile.get(composition.text);
    if (oldTile)
      this.cache.reused.set(oldTile, 2);
    let text = new TextTile(composition.text, composition.text.nodeValue);
    text.flags |= 8;
    head.append(text);
  }
  addInlineWidget(widget, marks, openStart) {
    let noSpace = this.afterWidget && widget.flags & 48 && (this.afterWidget.flags & 48) == (widget.flags & 48);
    if (!noSpace)
      this.flushBuffer();
    let parent = this.ensureMarks(marks, openStart);
    if (!noSpace && !(widget.flags & 16))
      parent.append(this.getBuffer(1));
    parent.append(widget);
    this.pos += widget.length;
    this.afterWidget = widget;
  }
  addMark(tile, marks, openStart) {
    this.flushBuffer();
    let parent = this.ensureMarks(marks, openStart);
    parent.append(tile);
    this.pos += tile.length;
    this.afterWidget = null;
  }
  addBlockWidget(widget) {
    this.getBlockPos().append(widget);
    this.pos += widget.length;
    this.lastBlock = widget;
    this.endLine();
  }
  continueWidget(length) {
    let widget = this.afterWidget || this.lastBlock;
    widget.length += length;
    this.pos += length;
  }
  addLineStart(attrs, dom) {
    var _a;
    if (!attrs)
      attrs = lineBaseAttrs;
    let tile = LineTile.start(attrs, dom || ((_a = this.cache.find(LineTile)) === null || _a === undefined ? undefined : _a.dom), !!dom);
    this.getBlockPos().append(this.lastBlock = this.curLine = tile);
  }
  addLine(tile) {
    this.getBlockPos().append(tile);
    this.pos += tile.length;
    this.lastBlock = tile;
    this.endLine();
  }
  addBreak() {
    this.lastBlock.flags |= 1;
    this.endLine();
    this.pos++;
  }
  addLineStartIfNotCovered(attrs) {
    if (!this.blockPosCovered())
      this.addLineStart(attrs);
  }
  ensureLine(attrs) {
    if (!this.curLine)
      this.addLineStart(attrs);
  }
  ensureMarks(marks, openStart) {
    var _a;
    let parent = this.curLine;
    for (let i2 = marks.length - 1;i2 >= 0; i2--) {
      let mark = marks[i2], last;
      if (openStart > 0 && (last = parent.lastChild) && last instanceof MarkTile && last.mark.eq(mark)) {
        parent = last;
        openStart--;
      } else {
        let tile = MarkTile.of(mark, (_a = this.cache.find(MarkTile, (m) => m.mark.eq(mark))) === null || _a === undefined ? undefined : _a.dom);
        parent.append(tile);
        parent = tile;
        openStart = 0;
      }
    }
    return parent;
  }
  endLine() {
    if (this.curLine) {
      this.flushBuffer();
      let last = this.curLine.lastChild;
      if (!last || !hasContent(this.curLine, false) || last.dom.nodeName != "BR" && last.isWidget() && !(browser.ios && hasContent(this.curLine, true)))
        this.curLine.append(this.cache.findWidget(BreakWidget, 0, 32) || new WidgetTile(BreakWidget.toDOM(), 0, BreakWidget, 32));
      this.curLine = this.afterWidget = null;
    }
  }
  updateBlockWrappers() {
    if (this.wrapperPos > this.pos + 1e4) {
      this.blockWrappers.goto(this.pos);
      this.wrappers.length = 0;
    }
    for (let i2 = this.wrappers.length - 1;i2 >= 0; i2--)
      if (this.wrappers[i2].to < this.pos)
        this.wrappers.splice(i2, 1);
    for (let cur = this.blockWrappers;cur.value && cur.from <= this.pos; cur.next())
      if (cur.to >= this.pos) {
        let wrap = new OpenWrapper(cur.from, cur.to, cur.value, cur.rank), i2 = this.wrappers.length;
        while (i2 > 0 && (this.wrappers[i2 - 1].rank - wrap.rank || this.wrappers[i2 - 1].to - wrap.to) < 0)
          i2--;
        this.wrappers.splice(i2, 0, wrap);
      }
    this.wrapperPos = this.pos;
  }
  getBlockPos() {
    var _a;
    this.updateBlockWrappers();
    let parent = this.root;
    for (let wrap of this.wrappers) {
      let last = parent.lastChild;
      if (wrap.from < this.pos && last instanceof BlockWrapperTile && last.wrapper.eq(wrap.wrapper)) {
        parent = last;
      } else {
        let tile = BlockWrapperTile.of(wrap.wrapper, (_a = this.cache.find(BlockWrapperTile, (t) => t.wrapper.eq(wrap.wrapper))) === null || _a === undefined ? undefined : _a.dom);
        parent.append(tile);
        parent = tile;
      }
    }
    return parent;
  }
  blockPosCovered() {
    let last = this.lastBlock;
    return last != null && !last.breakAfter && (!last.isWidget() || (last.flags & (32 | 128)) > 0);
  }
  getBuffer(side) {
    let flags = 2 | (side < 0 ? 16 : 32);
    let found = this.cache.find(WidgetBufferTile, undefined, 1);
    if (found)
      found.flags = flags;
    return found || new WidgetBufferTile(flags);
  }
  flushBuffer() {
    if (this.afterWidget && !(this.afterWidget.flags & 32)) {
      this.afterWidget.parent.append(this.getBuffer(-1));
      this.afterWidget = null;
    }
  }
}

class TextStream {
  constructor(doc2) {
    this.skipCount = 0;
    this.text = "";
    this.textOff = 0;
    this.cursor = doc2.iter();
  }
  skip(len) {
    if (this.textOff + len <= this.text.length) {
      this.textOff += len;
    } else {
      this.skipCount += len - (this.text.length - this.textOff);
      this.text = "";
      this.textOff = 0;
    }
  }
  next(maxLen) {
    if (this.textOff == this.text.length) {
      let { value, lineBreak, done } = this.cursor.next(this.skipCount);
      this.skipCount = 0;
      if (done)
        throw new Error("Ran out of text content when drawing inline views");
      this.text = value;
      let len = this.textOff = Math.min(maxLen, value.length);
      return lineBreak ? null : value.slice(0, len);
    }
    let end = Math.min(this.text.length, this.textOff + maxLen);
    let chars = this.text.slice(this.textOff, end);
    this.textOff = end;
    return chars;
  }
}
var buckets = [WidgetTile, LineTile, TextTile, MarkTile, WidgetBufferTile, BlockWrapperTile, DocTile];
for (let i2 = 0;i2 < buckets.length; i2++)
  buckets[i2].bucket = i2;

class TileCache {
  constructor(view) {
    this.view = view;
    this.buckets = buckets.map(() => []);
    this.index = buckets.map(() => 0);
    this.reused = new Map;
  }
  add(tile) {
    let i2 = tile.constructor.bucket, bucket = this.buckets[i2];
    if (bucket.length < 6)
      bucket.push(tile);
    else
      bucket[this.index[i2] = (this.index[i2] + 1) % 6] = tile;
  }
  find(cls, test, type = 2) {
    let i2 = cls.bucket;
    let bucket = this.buckets[i2], off = this.index[i2];
    for (let j = bucket.length - 1;j >= 0; j--) {
      let index = (j + off) % bucket.length, tile = bucket[index];
      if ((!test || test(tile)) && !this.reused.has(tile)) {
        bucket.splice(index, 1);
        if (index < off)
          this.index[i2]--;
        this.reused.set(tile, type);
        return tile;
      }
    }
    return null;
  }
  findWidget(widget, length, flags) {
    let widgets = this.buckets[0];
    if (widgets.length)
      for (let i2 = 0, pass = 0;; i2++) {
        if (i2 == widgets.length) {
          if (pass)
            return null;
          pass = 1;
          i2 = 0;
        }
        let tile = widgets[i2];
        if (!this.reused.has(tile) && (pass == 0 ? tile.widget.compare(widget) : tile.widget.constructor == widget.constructor && widget.updateDOM(tile.dom, this.view))) {
          widgets.splice(i2, 1);
          if (i2 < this.index[0])
            this.index[0]--;
          this.reused.set(tile, 1);
          tile.length = length;
          tile.flags = tile.flags & ~(496 | 1) | flags;
          return tile;
        }
      }
  }
  reuse(tile) {
    this.reused.set(tile, 1);
    return tile;
  }
  maybeReuse(tile, type = 2) {
    if (this.reused.has(tile))
      return;
    this.reused.set(tile, type);
    return tile.dom;
  }
}

class TileUpdate {
  constructor(view, old, blockWrappers2, decorations2, disallowBlockEffectsFor) {
    this.view = view;
    this.decorations = decorations2;
    this.disallowBlockEffectsFor = disallowBlockEffectsFor;
    this.openWidget = false;
    this.openMarks = 0;
    this.cache = new TileCache(view);
    this.text = new TextStream(view.state.doc);
    this.builder = new TileBuilder(this.cache, new DocTile(view, view.contentDOM), RangeSet.iter(blockWrappers2));
    this.cache.reused.set(old, 2);
    this.old = new TilePointer(old);
    this.reuseWalker = {
      skip: (tile, from, to) => {
        this.cache.add(tile);
        if (tile.isComposite())
          return false;
      },
      enter: (tile) => this.cache.add(tile),
      leave: () => {},
      break: () => {}
    };
  }
  run(changes, composition) {
    let compositionContext = composition && this.getCompositionContext(composition.text);
    for (let posA = 0, posB = 0, i2 = 0;; ) {
      let next = i2 < changes.length ? changes[i2++] : null;
      let skipA = next ? next.fromA : this.old.root.length;
      if (skipA > posA) {
        let len = skipA - posA;
        this.preserve(len, !i2, !next);
        posA = skipA;
        posB += len;
      }
      if (!next)
        break;
      this.forward(next.fromA, next.toA);
      if (composition && next.fromA <= composition.range.fromA && next.toA >= composition.range.toA) {
        this.emit(posB, composition.range.fromB);
        this.builder.addComposition(composition, compositionContext);
        this.text.skip(composition.range.toB - composition.range.fromB);
        this.emit(composition.range.toB, next.toB);
      } else {
        this.emit(posB, next.toB);
      }
      posB = next.toB;
      posA = next.toA;
    }
    if (this.builder.curLine)
      this.builder.endLine();
    return this.builder.root;
  }
  preserve(length, incStart, incEnd) {
    let activeMarks = getMarks(this.old), openMarks = this.openMarks;
    this.old.advance(length, incEnd ? 1 : -1, {
      skip: (tile, from, to) => {
        if (tile.isWidget()) {
          if (this.openWidget) {
            this.builder.continueWidget(to - from);
          } else {
            let widget = to > 0 || from < tile.length ? WidgetTile.of(tile.widget, this.view, to - from, tile.flags & 496, this.cache.maybeReuse(tile)) : this.cache.reuse(tile);
            if (widget.flags & 256) {
              widget.flags &= ~1;
              this.builder.addBlockWidget(widget);
            } else {
              this.builder.ensureLine(null);
              this.builder.addInlineWidget(widget, activeMarks, openMarks);
              openMarks = activeMarks.length;
            }
          }
        } else if (tile.isText()) {
          this.builder.ensureLine(null);
          if (!from && to == tile.length) {
            this.builder.addText(tile.text, activeMarks, openMarks, this.cache.reuse(tile));
          } else {
            this.cache.add(tile);
            this.builder.addText(tile.text.slice(from, to), activeMarks, openMarks);
          }
          openMarks = activeMarks.length;
        } else if (tile.isLine()) {
          tile.flags &= ~1;
          this.cache.reused.set(tile, 1);
          this.builder.addLine(tile);
        } else if (tile instanceof WidgetBufferTile) {
          this.cache.add(tile);
        } else if (tile instanceof MarkTile) {
          this.builder.ensureLine(null);
          this.builder.addMark(tile, activeMarks, openMarks);
          this.cache.reused.set(tile, 1);
          openMarks = activeMarks.length;
        } else {
          return false;
        }
        this.openWidget = false;
      },
      enter: (tile) => {
        if (tile.isLine()) {
          this.builder.addLineStart(tile.attrs, this.cache.maybeReuse(tile));
        } else {
          this.cache.add(tile);
          if (tile instanceof MarkTile)
            activeMarks.unshift(tile.mark);
        }
        this.openWidget = false;
      },
      leave: (tile) => {
        if (tile.isLine()) {
          if (activeMarks.length)
            activeMarks.length = openMarks = 0;
        } else if (tile instanceof MarkTile) {
          activeMarks.shift();
          openMarks = Math.min(openMarks, activeMarks.length);
        }
      },
      break: () => {
        this.builder.addBreak();
        this.openWidget = false;
      }
    });
    this.text.skip(length);
  }
  emit(from, to) {
    let pendingLineAttrs = null;
    let b = this.builder, markCount = 0;
    let openEnd = RangeSet.spans(this.decorations, from, to, {
      point: (from2, to2, deco, active, openStart, index) => {
        if (deco instanceof PointDecoration) {
          if (this.disallowBlockEffectsFor[index]) {
            if (deco.block)
              throw new RangeError("Block decorations may not be specified via plugins");
            if (to2 > this.view.state.doc.lineAt(from2).to)
              throw new RangeError("Decorations that replace line breaks may not be specified via plugins");
          }
          markCount = active.length;
          if (openStart > active.length) {
            b.continueWidget(to2 - from2);
          } else {
            let widget = deco.widget || (deco.block ? NullWidget.block : NullWidget.inline);
            let flags = widgetFlags(deco);
            let tile = this.cache.findWidget(widget, to2 - from2, flags) || WidgetTile.of(widget, this.view, to2 - from2, flags);
            if (deco.block) {
              if (deco.startSide > 0)
                b.addLineStartIfNotCovered(pendingLineAttrs);
              b.addBlockWidget(tile);
            } else {
              b.ensureLine(pendingLineAttrs);
              b.addInlineWidget(tile, active, openStart);
            }
          }
          pendingLineAttrs = null;
        } else {
          pendingLineAttrs = addLineDeco(pendingLineAttrs, deco);
        }
        if (to2 > from2)
          this.text.skip(to2 - from2);
      },
      span: (from2, to2, active, openStart) => {
        for (let pos = from2;pos < to2; ) {
          let chars = this.text.next(Math.min(512, to2 - pos));
          if (chars == null) {
            b.addLineStartIfNotCovered(pendingLineAttrs);
            b.addBreak();
            pos++;
          } else {
            b.ensureLine(pendingLineAttrs);
            b.addText(chars, active, openStart);
            pos += chars.length;
          }
          pendingLineAttrs = null;
        }
      }
    });
    b.addLineStartIfNotCovered(pendingLineAttrs);
    this.openWidget = openEnd > markCount;
    this.openMarks = openEnd;
  }
  forward(from, to) {
    if (to - from <= 10) {
      this.old.advance(to - from, 1, this.reuseWalker);
    } else {
      this.old.advance(5, -1, this.reuseWalker);
      this.old.advance(to - from - 10, -1);
      this.old.advance(5, 1, this.reuseWalker);
    }
  }
  getCompositionContext(text) {
    let marks = [], line = null;
    for (let parent = text.parentNode;; parent = parent.parentNode) {
      let tile = Tile.get(parent);
      if (parent == this.view.contentDOM)
        break;
      if (tile instanceof MarkTile)
        marks.push(tile);
      else if (tile === null || tile === undefined ? undefined : tile.isLine())
        line = tile;
      else if (parent.nodeName == "DIV" && !line && parent != this.view.contentDOM)
        line = new LineTile(parent, lineBaseAttrs);
      else
        marks.push(MarkTile.of(new MarkDecoration({ tagName: parent.nodeName.toLowerCase(), attributes: getAttrs(parent) }), parent));
    }
    return { line, marks };
  }
}
function hasContent(tile, requireText) {
  let scan = (tile2) => {
    for (let ch of tile2.children)
      if ((requireText ? ch.isText() : ch.length) || scan(ch))
        return true;
    return false;
  };
  return scan(tile);
}
function widgetFlags(deco) {
  let flags = deco.isReplace ? (deco.startSide < 0 ? 64 : 0) | (deco.endSide > 0 ? 128 : 0) : deco.startSide > 0 ? 32 : 16;
  if (deco.block)
    flags |= 256;
  return flags;
}
var lineBaseAttrs = { class: "cm-line" };
function addLineDeco(value, deco) {
  let attrs = deco.spec.attributes, cls = deco.spec.class;
  if (!attrs && !cls)
    return value;
  if (!value)
    value = { class: "cm-line" };
  if (attrs)
    combineAttrs(attrs, value);
  if (cls)
    value.class += " " + cls;
  return value;
}
function getMarks(ptr) {
  let found = [];
  for (let i2 = ptr.parents.length;i2 > 1; i2--) {
    let tile = i2 == ptr.parents.length ? ptr.tile : ptr.parents[i2].tile;
    if (tile instanceof MarkTile)
      found.push(tile.mark);
  }
  return found;
}
function freeNode(node) {
  let tile = Tile.get(node);
  if (tile)
    tile.setDOM(node.cloneNode());
  return node;
}

class NullWidget extends WidgetType {
  constructor(tag) {
    super();
    this.tag = tag;
  }
  eq(other) {
    return other.tag == this.tag;
  }
  toDOM() {
    return document.createElement(this.tag);
  }
  updateDOM(elt) {
    return elt.nodeName.toLowerCase() == this.tag;
  }
  get isHidden() {
    return true;
  }
}
NullWidget.inline = /* @__PURE__ */ new NullWidget("span");
NullWidget.block = /* @__PURE__ */ new NullWidget("div");
var BreakWidget = /* @__PURE__ */ new class extends WidgetType {
  toDOM() {
    return document.createElement("br");
  }
  get isHidden() {
    return true;
  }
  get editable() {
    return true;
  }
};

class DocView {
  constructor(view) {
    this.view = view;
    this.decorations = [];
    this.blockWrappers = [];
    this.dynamicDecorationMap = [false];
    this.domChanged = null;
    this.hasComposition = null;
    this.editContextFormatting = Decoration.none;
    this.lastCompositionAfterCursor = false;
    this.minWidth = 0;
    this.minWidthFrom = 0;
    this.minWidthTo = 0;
    this.impreciseAnchor = null;
    this.impreciseHead = null;
    this.forceSelection = false;
    this.lastUpdate = Date.now();
    this.updateDeco();
    this.tile = new DocTile(view, view.contentDOM);
    this.updateInner([new ChangedRange(0, 0, 0, view.state.doc.length)], null);
  }
  update(update) {
    var _a;
    let changedRanges = update.changedRanges;
    if (this.minWidth > 0 && changedRanges.length) {
      if (!changedRanges.every(({ fromA, toA }) => toA < this.minWidthFrom || fromA > this.minWidthTo)) {
        this.minWidth = this.minWidthFrom = this.minWidthTo = 0;
      } else {
        this.minWidthFrom = update.changes.mapPos(this.minWidthFrom, 1);
        this.minWidthTo = update.changes.mapPos(this.minWidthTo, 1);
      }
    }
    this.updateEditContextFormatting(update);
    let readCompositionAt = -1;
    if (this.view.inputState.composing >= 0 && !this.view.observer.editContext) {
      if ((_a = this.domChanged) === null || _a === undefined ? undefined : _a.newSel)
        readCompositionAt = this.domChanged.newSel.head;
      else if (!touchesComposition(update.changes, this.hasComposition) && !update.selectionSet)
        readCompositionAt = update.state.selection.main.head;
    }
    let composition = readCompositionAt > -1 ? findCompositionRange(this.view, update.changes, readCompositionAt) : null;
    this.domChanged = null;
    if (this.hasComposition) {
      let { from, to } = this.hasComposition;
      changedRanges = new ChangedRange(from, to, update.changes.mapPos(from, -1), update.changes.mapPos(to, 1)).addToSet(changedRanges.slice());
    }
    this.hasComposition = composition ? { from: composition.range.fromB, to: composition.range.toB } : null;
    if ((browser.ie || browser.chrome) && !composition && update && update.state.doc.lines != update.startState.doc.lines)
      this.forceSelection = true;
    let prevDeco = this.decorations, prevWrappers = this.blockWrappers;
    this.updateDeco();
    let decoDiff = findChangedDeco(prevDeco, this.decorations, update.changes);
    if (decoDiff.length)
      changedRanges = ChangedRange.extendWithRanges(changedRanges, decoDiff);
    let blockDiff = findChangedWrappers(prevWrappers, this.blockWrappers, update.changes);
    if (blockDiff.length)
      changedRanges = ChangedRange.extendWithRanges(changedRanges, blockDiff);
    if (composition && !changedRanges.some((r) => r.fromA <= composition.range.fromA && r.toA >= composition.range.toA))
      changedRanges = composition.range.addToSet(changedRanges.slice());
    if (this.tile.flags & 2 && changedRanges.length == 0) {
      return false;
    } else {
      this.updateInner(changedRanges, composition);
      if (update.transactions.length)
        this.lastUpdate = Date.now();
      return true;
    }
  }
  updateInner(changes, composition) {
    this.view.viewState.mustMeasureContent = true;
    let { observer } = this.view;
    observer.ignore(() => {
      if (composition || changes.length) {
        let oldTile = this.tile;
        let builder = new TileUpdate(this.view, oldTile, this.blockWrappers, this.decorations, this.dynamicDecorationMap);
        this.tile = builder.run(changes, composition);
        destroyDropped(oldTile, builder.cache.reused);
      }
      this.tile.dom.style.height = this.view.viewState.contentHeight / this.view.scaleY + "px";
      this.tile.dom.style.flexBasis = this.minWidth ? this.minWidth + "px" : "";
      let track = browser.chrome || browser.ios ? { node: observer.selectionRange.focusNode, written: false } : undefined;
      this.tile.sync(track);
      if (track && (track.written || observer.selectionRange.focusNode != track.node || !this.tile.dom.contains(track.node)))
        this.forceSelection = true;
      this.tile.dom.style.height = "";
    });
    let gaps = [];
    if (this.view.viewport.from || this.view.viewport.to < this.view.state.doc.length) {
      for (let child of this.tile.children)
        if (child.isWidget() && child.widget instanceof BlockGapWidget)
          gaps.push(child.dom);
    }
    observer.updateGaps(gaps);
  }
  updateEditContextFormatting(update) {
    this.editContextFormatting = this.editContextFormatting.map(update.changes);
    for (let tr of update.transactions)
      for (let effect of tr.effects)
        if (effect.is(setEditContextFormatting)) {
          this.editContextFormatting = effect.value;
        }
  }
  updateSelection(mustRead = false, fromPointer = false) {
    if (mustRead || !this.view.observer.selectionRange.focusNode)
      this.view.observer.readSelectionRange();
    let { dom } = this.tile;
    let activeElt = this.view.root.activeElement, focused = activeElt == dom;
    let selectionNotFocus = !focused && !(this.view.state.facet(editable) || dom.tabIndex > -1) && hasSelection(dom, this.view.observer.selectionRange) && !(activeElt && dom.contains(activeElt));
    if (!(focused || fromPointer || selectionNotFocus))
      return;
    let force = this.forceSelection;
    this.forceSelection = false;
    let main = this.view.state.selection.main, anchor, head;
    if (main.empty) {
      head = anchor = this.inlineDOMNearPos(main.anchor, main.assoc || 1);
    } else {
      head = this.inlineDOMNearPos(main.head, main.head == main.from ? 1 : -1);
      anchor = this.inlineDOMNearPos(main.anchor, main.anchor == main.from ? 1 : -1);
    }
    if (browser.gecko && main.empty && !this.hasComposition && betweenUneditable(anchor)) {
      let dummy = document.createTextNode("");
      this.view.observer.ignore(() => anchor.node.insertBefore(dummy, anchor.node.childNodes[anchor.offset] || null));
      anchor = head = new DOMPos(dummy, 0);
      force = true;
    }
    let domSel = this.view.observer.selectionRange;
    if (force || !domSel.focusNode || (!isEquivalentPosition(anchor.node, anchor.offset, domSel.anchorNode, domSel.anchorOffset) || !isEquivalentPosition(head.node, head.offset, domSel.focusNode, domSel.focusOffset)) && !this.suppressWidgetCursorChange(domSel, main)) {
      this.view.observer.ignore(() => {
        if (browser.android && browser.chrome && dom.contains(domSel.focusNode) && inUneditable(domSel.focusNode, dom)) {
          dom.blur();
          dom.focus({ preventScroll: true });
        }
        let rawSel = getSelection(this.view.root);
        if (!rawSel)
          ;
        else if (main.empty) {
          if (browser.gecko) {
            let nextTo = nextToUneditable(anchor.node, anchor.offset);
            if (nextTo && nextTo != (1 | 2)) {
              let text = (nextTo == 1 ? textNodeBefore : textNodeAfter)(anchor.node, anchor.offset);
              if (text)
                anchor = new DOMPos(text.node, text.offset);
            }
          }
          rawSel.collapse(anchor.node, anchor.offset);
          if (main.bidiLevel != null && rawSel.caretBidiLevel !== undefined)
            rawSel.caretBidiLevel = main.bidiLevel;
        } else if (rawSel.extend) {
          rawSel.collapse(anchor.node, anchor.offset);
          try {
            rawSel.extend(head.node, head.offset);
          } catch (_) {}
        } else {
          let range = document.createRange();
          if (main.anchor > main.head)
            [anchor, head] = [head, anchor];
          range.setEnd(head.node, head.offset);
          range.setStart(anchor.node, anchor.offset);
          rawSel.removeAllRanges();
          rawSel.addRange(range);
        }
        if (selectionNotFocus && this.view.root.activeElement == dom) {
          dom.blur();
          if (activeElt)
            activeElt.focus();
        }
      });
      this.view.observer.setSelectionRange(anchor, head);
    }
    this.impreciseAnchor = anchor.precise ? null : new DOMPos(domSel.anchorNode, domSel.anchorOffset);
    this.impreciseHead = head.precise ? null : new DOMPos(domSel.focusNode, domSel.focusOffset);
  }
  suppressWidgetCursorChange(sel, cursor) {
    return this.hasComposition && cursor.empty && isEquivalentPosition(sel.focusNode, sel.focusOffset, sel.anchorNode, sel.anchorOffset) && this.posFromDOM(sel.focusNode, sel.focusOffset) == cursor.head;
  }
  enforceCursorAssoc() {
    if (this.hasComposition)
      return;
    let { view } = this, cursor = view.state.selection.main;
    let sel = getSelection(view.root);
    let { anchorNode, anchorOffset } = view.observer.selectionRange;
    if (!sel || !cursor.empty || !cursor.assoc || !sel.modify)
      return;
    let line = this.lineAt(cursor.head, cursor.assoc);
    if (!line)
      return;
    let lineStart = line.posAtStart;
    if (cursor.head == lineStart || cursor.head == lineStart + line.length)
      return;
    let before = this.coordsAt(cursor.head, -1), after = this.coordsAt(cursor.head, 1);
    if (!before || !after || before.bottom > after.top)
      return;
    let dom = this.domAtPos(cursor.head + cursor.assoc, cursor.assoc);
    sel.collapse(dom.node, dom.offset);
    sel.modify("move", cursor.assoc < 0 ? "forward" : "backward", "lineboundary");
    view.observer.readSelectionRange();
    let newRange = view.observer.selectionRange;
    if (view.docView.posFromDOM(newRange.anchorNode, newRange.anchorOffset) != cursor.from)
      sel.collapse(anchorNode, anchorOffset);
  }
  posFromDOM(node, offset) {
    let tile = this.tile.nearest(node);
    if (!tile)
      return this.tile.dom.compareDocumentPosition(node) & 2 ? 0 : this.view.state.doc.length;
    let start = tile.posAtStart;
    if (tile.isComposite()) {
      let after;
      if (node == tile.dom) {
        after = tile.dom.childNodes[offset];
      } else {
        let bias = maxOffset(node) == 0 ? 0 : offset == 0 ? -1 : 1;
        for (;; ) {
          let parent = node.parentNode;
          if (parent == tile.dom)
            break;
          if (bias == 0 && parent.firstChild != parent.lastChild) {
            if (node == parent.firstChild)
              bias = -1;
            else
              bias = 1;
          }
          node = parent;
        }
        if (bias < 0)
          after = node;
        else
          after = node.nextSibling;
      }
      if (after == tile.dom.firstChild)
        return start;
      while (after && !Tile.get(after))
        after = after.nextSibling;
      if (!after)
        return start + tile.length;
      for (let i2 = 0, pos = start;; i2++) {
        let child = tile.children[i2];
        if (child.dom == after)
          return pos;
        pos += child.length + child.breakAfter;
      }
    } else if (tile.isText()) {
      return node == tile.dom ? start + offset : start + (offset ? tile.length : 0);
    } else {
      return start;
    }
  }
  domAtPos(pos, side) {
    let { tile, offset } = this.tile.resolveBlock(pos, side);
    if (tile.isWidget())
      return tile.domPosFor(pos, side);
    return tile.domIn(offset, side);
  }
  inlineDOMNearPos(pos, side) {
    let before, beforeOff = -1, beforeBad = false;
    let after, afterOff = -1, afterBad = false;
    this.tile.blockTiles((tile, off) => {
      if (tile.isWidget()) {
        if (tile.flags & 32 && off >= pos)
          return true;
        if (tile.flags & 16)
          beforeBad = true;
      } else {
        let end = off + tile.length;
        if (off <= pos) {
          before = tile;
          beforeOff = pos - off;
          beforeBad = end < pos;
        }
        if (end >= pos && !after) {
          after = tile;
          afterOff = pos - off;
          afterBad = off > pos;
        }
        if (off > pos && after)
          return true;
      }
    });
    if (!before && !after)
      return this.domAtPos(pos, side);
    if (beforeBad && after)
      before = null;
    else if (afterBad && before)
      after = null;
    return before && side < 0 || !after ? before.domIn(beforeOff, side) : after.domIn(afterOff, side);
  }
  coordsAt(pos, side) {
    let { tile, offset } = this.tile.resolveBlock(pos, side);
    if (tile.isWidget()) {
      if (tile.widget instanceof BlockGapWidget)
        return null;
      return tile.coordsInWidget(offset, side, true);
    }
    return tile.coordsIn(offset, side);
  }
  lineAt(pos, side) {
    let { tile } = this.tile.resolveBlock(pos, side);
    return tile.isLine() ? tile : null;
  }
  coordsForChar(pos) {
    let { tile, offset } = this.tile.resolveBlock(pos, 1);
    if (!tile.isLine())
      return null;
    function scan(tile2, offset2) {
      if (tile2.isComposite()) {
        for (let ch of tile2.children) {
          if (ch.length >= offset2) {
            let found = scan(ch, offset2);
            if (found)
              return found;
          }
          offset2 -= ch.length;
          if (offset2 < 0)
            break;
        }
      } else if (tile2.isText() && offset2 < tile2.length) {
        let end = findClusterBreak2(tile2.text, offset2);
        if (end == offset2)
          return null;
        let rects = textRange(tile2.dom, offset2, end).getClientRects();
        for (let i2 = 0;i2 < rects.length; i2++) {
          let rect = rects[i2];
          if (i2 == rects.length - 1 || rect.top < rect.bottom && rect.left < rect.right)
            return rect;
        }
      }
      return null;
    }
    return scan(tile, offset);
  }
  measureVisibleLineHeights(viewport) {
    let result = [], { from, to } = viewport;
    let contentWidth = this.view.contentDOM.clientWidth;
    let isWider = contentWidth > Math.max(this.view.scrollDOM.clientWidth, this.minWidth) + 1;
    let widest = -1, ltr = this.view.textDirection == Direction.LTR;
    let spaceAbove = 0;
    let scan = (tile, pos, measureBounds) => {
      for (let i2 = 0;i2 < tile.children.length; i2++) {
        if (pos > to)
          break;
        let child = tile.children[i2], end = pos + child.length;
        let childRect = child.dom.getBoundingClientRect(), { height } = childRect;
        if (measureBounds && !i2)
          spaceAbove += childRect.top - measureBounds.top;
        if (child instanceof BlockWrapperTile) {
          if (end > from)
            scan(child, pos, childRect);
        } else if (pos >= from) {
          if (spaceAbove > 0)
            result.push(-spaceAbove);
          result.push(height + spaceAbove);
          spaceAbove = 0;
          if (isWider) {
            let last = child.dom.lastChild;
            let rects = last ? clientRectsFor(last) : [];
            if (rects.length) {
              let rect = rects[rects.length - 1];
              let width = ltr ? rect.right - childRect.left : childRect.right - rect.left;
              if (width > widest) {
                widest = width;
                this.minWidth = contentWidth;
                this.minWidthFrom = pos;
                this.minWidthTo = end;
              }
            }
          }
        }
        if (measureBounds && i2 == tile.children.length - 1)
          spaceAbove += measureBounds.bottom - childRect.bottom;
        pos = end + child.breakAfter;
      }
    };
    scan(this.tile, 0, null);
    return result;
  }
  textDirectionAt(pos) {
    let { tile } = this.tile.resolveBlock(pos, 1);
    return getComputedStyle(tile.dom).direction == "rtl" ? Direction.RTL : Direction.LTR;
  }
  measureTextSize() {
    let lineMeasure = this.tile.blockTiles((tile) => {
      if (tile.isLine() && tile.children.length && tile.length <= 20) {
        let totalWidth = 0, textHeight2;
        for (let child of tile.children) {
          if (!child.isText() || /[^ -~]/.test(child.text))
            return;
          let rects = clientRectsFor(child.dom);
          if (rects.length != 1)
            return;
          totalWidth += rects[0].width;
          textHeight2 = rects[0].height;
        }
        if (totalWidth)
          return {
            lineHeight: tile.dom.getBoundingClientRect().height,
            charWidth: totalWidth / tile.length,
            textHeight: textHeight2
          };
      }
    });
    if (lineMeasure)
      return lineMeasure;
    let dummy = document.createElement("div"), lineHeight, charWidth, textHeight;
    dummy.className = "cm-line";
    dummy.style.width = "99999px";
    dummy.style.position = "absolute";
    dummy.textContent = "abc def ghi jkl mno pqr stu";
    this.view.observer.ignore(() => {
      this.tile.dom.appendChild(dummy);
      let rect = clientRectsFor(dummy.firstChild)[0];
      lineHeight = dummy.getBoundingClientRect().height;
      charWidth = rect && rect.width ? rect.width / 27 : 7;
      textHeight = rect && rect.height ? rect.height : lineHeight;
      dummy.remove();
    });
    return { lineHeight, charWidth, textHeight };
  }
  computeBlockGapDeco() {
    let deco = [], vs = this.view.viewState;
    for (let pos = 0, i2 = 0;; i2++) {
      let next = i2 == vs.viewports.length ? null : vs.viewports[i2];
      let end = next ? next.from - 1 : this.view.state.doc.length;
      if (end > pos) {
        let height = (vs.lineBlockAt(end).bottom - vs.lineBlockAt(pos).top) / this.view.scaleY;
        deco.push(Decoration.replace({
          widget: new BlockGapWidget(height),
          block: true,
          inclusive: true,
          isBlockGap: true
        }).range(pos, end));
      }
      if (!next)
        break;
      pos = next.to + 1;
    }
    return Decoration.set(deco);
  }
  updateDeco() {
    let i2 = 1;
    let allDeco = this.view.state.facet(decorations).map((d) => {
      let dynamic = this.dynamicDecorationMap[i2++] = typeof d == "function";
      return dynamic ? d(this.view) : d;
    });
    let dynamicOuter = false, outerDeco = this.view.state.facet(outerDecorations).map((d, i3) => {
      let dynamic = typeof d == "function";
      if (dynamic)
        dynamicOuter = true;
      return dynamic ? d(this.view) : d;
    });
    if (outerDeco.length) {
      this.dynamicDecorationMap[i2++] = dynamicOuter;
      allDeco.push(RangeSet.join(outerDeco));
    }
    this.decorations = [
      this.editContextFormatting,
      ...allDeco,
      this.computeBlockGapDeco(),
      this.view.viewState.lineGapDeco
    ];
    while (i2 < this.decorations.length)
      this.dynamicDecorationMap[i2++] = false;
    this.blockWrappers = this.view.state.facet(blockWrappers).map((v) => typeof v == "function" ? v(this.view) : v);
  }
  scrollIntoView(target) {
    if (target.isSnapshot) {
      let ref = this.view.viewState.lineBlockAt(target.range.head);
      this.view.scrollDOM.scrollTop = ref.top - target.yMargin;
      this.view.scrollDOM.scrollLeft = target.xMargin;
      return;
    }
    for (let handler of this.view.state.facet(scrollHandler)) {
      try {
        if (handler(this.view, target.range, target))
          return true;
      } catch (e) {
        logException(this.view.state, e, "scroll handler");
      }
    }
    let { range } = target;
    let rect = this.coordsAt(range.head, range.empty ? range.assoc : range.head > range.anchor ? -1 : 1), other;
    if (!rect)
      return;
    if (!range.empty && (other = this.coordsAt(range.anchor, range.anchor > range.head ? -1 : 1)))
      rect = {
        left: Math.min(rect.left, other.left),
        top: Math.min(rect.top, other.top),
        right: Math.max(rect.right, other.right),
        bottom: Math.max(rect.bottom, other.bottom)
      };
    let margins = getScrollMargins(this.view);
    let targetRect = {
      left: rect.left - margins.left,
      top: rect.top - margins.top,
      right: rect.right + margins.right,
      bottom: rect.bottom + margins.bottom
    };
    let { offsetWidth, offsetHeight } = this.view.scrollDOM;
    scrollRectIntoView(this.view.scrollDOM, targetRect, range.head < range.anchor ? -1 : 1, target.x, target.y, Math.max(Math.min(target.xMargin, offsetWidth), -offsetWidth), Math.max(Math.min(target.yMargin, offsetHeight), -offsetHeight), this.view.textDirection == Direction.LTR);
  }
  lineHasWidget(pos) {
    let scan = (child) => child.isWidget() || child.children.some(scan);
    return scan(this.tile.resolveBlock(pos, 1).tile);
  }
  destroy() {
    destroyDropped(this.tile);
  }
}
function destroyDropped(tile, reused) {
  let r = reused === null || reused === undefined ? undefined : reused.get(tile);
  if (r != 1) {
    if (r == null)
      tile.destroy();
    for (let ch of tile.children)
      destroyDropped(ch, reused);
  }
}
function betweenUneditable(pos) {
  return pos.node.nodeType == 1 && pos.node.firstChild && (pos.offset == 0 || pos.node.childNodes[pos.offset - 1].contentEditable == "false") && (pos.offset == pos.node.childNodes.length || pos.node.childNodes[pos.offset].contentEditable == "false");
}
function findCompositionNode(view, headPos) {
  let sel = view.observer.selectionRange;
  if (!sel.focusNode)
    return null;
  let textBefore = textNodeBefore(sel.focusNode, sel.focusOffset);
  let textAfter = textNodeAfter(sel.focusNode, sel.focusOffset);
  let textNode = textBefore || textAfter;
  if (textAfter && textBefore && textAfter.node != textBefore.node) {
    let tileAfter = Tile.get(textAfter.node);
    if (!tileAfter || tileAfter.isText() && tileAfter.text != textAfter.node.nodeValue) {
      textNode = textAfter;
    } else if (view.docView.lastCompositionAfterCursor) {
      let tileBefore = Tile.get(textBefore.node);
      if (!(!tileBefore || tileBefore.isText() && tileBefore.text != textBefore.node.nodeValue))
        textNode = textAfter;
    }
  }
  view.docView.lastCompositionAfterCursor = textNode != textBefore;
  if (!textNode)
    return null;
  let from = headPos - textNode.offset;
  return { from, to: from + textNode.node.nodeValue.length, node: textNode.node };
}
function findCompositionRange(view, changes, headPos) {
  let found = findCompositionNode(view, headPos);
  if (!found)
    return null;
  let { node: textNode, from, to } = found, text = textNode.nodeValue;
  if (/[\n\r]/.test(text))
    return null;
  if (view.state.doc.sliceString(found.from, found.to) != text)
    return null;
  let inv = changes.invertedDesc;
  return { range: new ChangedRange(inv.mapPos(from), inv.mapPos(to), from, to), text: textNode };
}
function nextToUneditable(node, offset) {
  if (node.nodeType != 1)
    return 0;
  return (offset && node.childNodes[offset - 1].contentEditable == "false" ? 1 : 0) | (offset < node.childNodes.length && node.childNodes[offset].contentEditable == "false" ? 2 : 0);
}
var DecorationComparator$1 = class DecorationComparator {
  constructor() {
    this.changes = [];
  }
  compareRange(from, to) {
    addRange(from, to, this.changes);
  }
  comparePoint(from, to) {
    addRange(from, to, this.changes);
  }
  boundChange(pos) {
    addRange(pos, pos, this.changes);
  }
};
function findChangedDeco(a, b, diff) {
  let comp = new DecorationComparator$1;
  RangeSet.compare(a, b, diff, comp);
  return comp.changes;
}

class WrapperComparator {
  constructor() {
    this.changes = [];
  }
  compareRange(from, to) {
    addRange(from, to, this.changes);
  }
  comparePoint() {}
  boundChange(pos) {
    addRange(pos, pos, this.changes);
  }
}
function findChangedWrappers(a, b, diff) {
  let comp = new WrapperComparator;
  RangeSet.compare(a, b, diff, comp);
  return comp.changes;
}
function inUneditable(node, inside) {
  for (let cur = node;cur && cur != inside; cur = cur.assignedSlot || cur.parentNode) {
    if (cur.nodeType == 1 && cur.contentEditable == "false") {
      return true;
    }
  }
  return false;
}
function touchesComposition(changes, composition) {
  let touched = false;
  if (composition)
    changes.iterChangedRanges((from, to) => {
      if (from < composition.to && to > composition.from)
        touched = true;
    });
  return touched;
}

class BlockGapWidget extends WidgetType {
  constructor(height) {
    super();
    this.height = height;
  }
  toDOM() {
    let elt = document.createElement("div");
    elt.className = "cm-gap";
    this.updateDOM(elt);
    return elt;
  }
  eq(other) {
    return other.height == this.height;
  }
  updateDOM(elt) {
    elt.style.height = this.height + "px";
    return true;
  }
  get editable() {
    return true;
  }
  get estimatedHeight() {
    return this.height;
  }
  ignoreEvent() {
    return false;
  }
}
function groupAt(state, pos, bias = 1) {
  let categorize = state.charCategorizer(pos);
  let line = state.doc.lineAt(pos), linePos = pos - line.from;
  if (line.length == 0)
    return EditorSelection.cursor(pos);
  if (linePos == 0)
    bias = 1;
  else if (linePos == line.length)
    bias = -1;
  let from = linePos, to = linePos;
  if (bias < 0)
    from = findClusterBreak2(line.text, linePos, false);
  else
    to = findClusterBreak2(line.text, linePos);
  let cat = categorize(line.text.slice(from, to));
  while (from > 0) {
    let prev = findClusterBreak2(line.text, from, false);
    if (categorize(line.text.slice(prev, from)) != cat)
      break;
    from = prev;
  }
  while (to < line.length) {
    let next = findClusterBreak2(line.text, to);
    if (categorize(line.text.slice(to, next)) != cat)
      break;
    to = next;
  }
  return EditorSelection.range(from + line.from, to + line.from);
}
function posAtCoordsImprecise(view, contentRect, block, x, y) {
  let into = Math.round((x - contentRect.left) * view.defaultCharacterWidth);
  if (view.lineWrapping && block.height > view.defaultLineHeight * 1.5) {
    let textHeight = view.viewState.heightOracle.textHeight;
    let line = Math.floor((y - block.top - (view.defaultLineHeight - textHeight) * 0.5) / textHeight);
    into += line * view.viewState.heightOracle.lineLength;
  }
  let content = view.state.sliceDoc(block.from, block.to);
  return block.from + findColumn(content, into, view.state.tabSize);
}
function blockAt(view, pos, side) {
  let line = view.lineBlockAt(pos);
  if (Array.isArray(line.type)) {
    let best;
    for (let l of line.type) {
      if (l.from > pos)
        break;
      if (l.to < pos)
        continue;
      if (l.from < pos && l.to > pos)
        return l;
      if (!best || l.type == BlockType.Text && (best.type != l.type || (side < 0 ? l.from < pos : l.to > pos)))
        best = l;
    }
    return best || line;
  }
  return line;
}
function moveToLineBoundary(view, start, forward, includeWrap) {
  let line = blockAt(view, start.head, start.assoc || -1);
  let coords = !includeWrap || line.type != BlockType.Text || !(view.lineWrapping || line.widgetLineBreaks) ? null : view.coordsAtPos(start.assoc < 0 && start.head > line.from ? start.head - 1 : start.head);
  if (coords) {
    let editorRect = view.dom.getBoundingClientRect();
    let direction = view.textDirectionAt(line.from);
    let pos = view.posAtCoords({
      x: forward == (direction == Direction.LTR) ? editorRect.right - 1 : editorRect.left + 1,
      y: (coords.top + coords.bottom) / 2
    });
    if (pos != null)
      return EditorSelection.cursor(pos, forward ? -1 : 1);
  }
  return EditorSelection.cursor(forward ? line.to : line.from, forward ? -1 : 1);
}
function moveByChar(view, start, forward, by) {
  let line = view.state.doc.lineAt(start.head), spans = view.bidiSpans(line);
  let direction = view.textDirectionAt(line.from);
  for (let cur = start, check = null;; ) {
    let next = moveVisually(line, spans, direction, cur, forward), char = movedOver;
    if (!next) {
      if (line.number == (forward ? view.state.doc.lines : 1))
        return cur;
      char = `
`;
      line = view.state.doc.line(line.number + (forward ? 1 : -1));
      spans = view.bidiSpans(line);
      next = view.visualLineSide(line, !forward);
    }
    if (!check) {
      if (!by)
        return next;
      check = by(char);
    } else if (!check(char)) {
      return cur;
    }
    cur = next;
  }
}
function byGroup(view, pos, start) {
  let categorize = view.state.charCategorizer(pos);
  let cat = categorize(start);
  return (next) => {
    let nextCat = categorize(next);
    if (cat == CharCategory.Space)
      cat = nextCat;
    return cat == nextCat;
  };
}
function moveVertically(view, start, forward, distance) {
  let startPos = start.head, dir = forward ? 1 : -1;
  if (startPos == (forward ? view.state.doc.length : 0))
    return EditorSelection.cursor(startPos, start.assoc);
  let goal = start.goalColumn, startY;
  let rect = view.contentDOM.getBoundingClientRect();
  let startCoords = view.coordsAtPos(startPos, start.assoc || -1), docTop = view.documentTop;
  if (startCoords) {
    if (goal == null)
      goal = startCoords.left - rect.left;
    startY = dir < 0 ? startCoords.top : startCoords.bottom;
  } else {
    let line = view.viewState.lineBlockAt(startPos);
    if (goal == null)
      goal = Math.min(rect.right - rect.left, view.defaultCharacterWidth * (startPos - line.from));
    startY = (dir < 0 ? line.top : line.bottom) + docTop;
  }
  let resolvedGoal = rect.left + goal;
  let dist = distance !== null && distance !== undefined ? distance : view.viewState.heightOracle.textHeight >> 1;
  for (let extra = 0;; extra += 10) {
    let curY = startY + (dist + extra) * dir;
    let pos = posAtCoords(view, { x: resolvedGoal, y: curY }, false, dir);
    return EditorSelection.cursor(pos.pos, pos.assoc, undefined, goal);
  }
}
function skipAtomicRanges(atoms, pos, bias) {
  for (;; ) {
    let moved = 0;
    for (let set of atoms) {
      set.between(pos - 1, pos + 1, (from, to, value) => {
        if (pos > from && pos < to) {
          let side = moved || bias || (pos - from < to - pos ? -1 : 1);
          pos = side < 0 ? from : to;
          moved = side;
        }
      });
    }
    if (!moved)
      return pos;
  }
}
function skipAtomsForSelection(atoms, sel) {
  let ranges = null;
  for (let i2 = 0;i2 < sel.ranges.length; i2++) {
    let range = sel.ranges[i2], updated = null;
    if (range.empty) {
      let pos = skipAtomicRanges(atoms, range.from, 0);
      if (pos != range.from)
        updated = EditorSelection.cursor(pos, -1);
    } else {
      let from = skipAtomicRanges(atoms, range.from, -1);
      let to = skipAtomicRanges(atoms, range.to, 1);
      if (from != range.from || to != range.to)
        updated = EditorSelection.range(range.from == range.anchor ? from : to, range.from == range.head ? from : to);
    }
    if (updated) {
      if (!ranges)
        ranges = sel.ranges.slice();
      ranges[i2] = updated;
    }
  }
  return ranges ? EditorSelection.create(ranges, sel.mainIndex) : sel;
}
function skipAtoms(view, oldPos, pos) {
  let newPos = skipAtomicRanges(view.state.facet(atomicRanges).map((f) => f(view)), pos.from, oldPos.head > pos.from ? -1 : 1);
  return newPos == pos.from ? pos : EditorSelection.cursor(newPos, newPos < pos.from ? 1 : -1);
}

class PosAssoc {
  constructor(pos, assoc) {
    this.pos = pos;
    this.assoc = assoc;
  }
}
function posAtCoords(view, coords, precise, scanY) {
  let content = view.contentDOM.getBoundingClientRect(), docTop = content.top + view.viewState.paddingTop;
  let { x, y } = coords, yOffset = y - docTop, block;
  for (;; ) {
    if (yOffset < 0)
      return new PosAssoc(0, 1);
    if (yOffset > view.viewState.docHeight)
      return new PosAssoc(view.state.doc.length, -1);
    block = view.elementAtHeight(yOffset);
    if (scanY == null)
      break;
    if (block.type == BlockType.Text) {
      let rect = view.docView.coordsAt(scanY < 0 ? block.from : block.to, scanY);
      if (rect && (scanY < 0 ? rect.top <= yOffset + docTop : rect.bottom >= yOffset + docTop))
        break;
    }
    let halfLine = view.viewState.heightOracle.textHeight / 2;
    yOffset = scanY > 0 ? block.bottom + halfLine : block.top - halfLine;
  }
  if (view.viewport.from >= block.to || view.viewport.to <= block.from) {
    if (precise)
      return null;
    if (block.type == BlockType.Text) {
      let pos = posAtCoordsImprecise(view, content, block, x, y);
      return new PosAssoc(pos, pos == block.from ? 1 : -1);
    }
  }
  if (block.type != BlockType.Text)
    return yOffset < (block.top + block.bottom) / 2 ? new PosAssoc(block.from, 1) : new PosAssoc(block.to, -1);
  let line = view.docView.lineAt(block.from, 2);
  if (!line || line.length != block.length)
    line = view.docView.lineAt(block.from, -2);
  return posAtCoordsInline(view, line, block.from, x, y);
}
function posAtCoordsInline(view, tile, offset, x, y) {
  let closest = -1, closestRect = null;
  let dxClosest = 1e9, dyClosest = 1e9;
  let rowTop = y, rowBot = y;
  let checkRects = (rects, index) => {
    for (let i2 = 0;i2 < rects.length; i2++) {
      let rect = rects[i2];
      if (rect.top == rect.bottom)
        continue;
      let dx = rect.left > x ? rect.left - x : rect.right < x ? x - rect.right : 0;
      let dy = rect.top > y ? rect.top - y : rect.bottom < y ? y - rect.bottom : 0;
      if (rect.top <= rowBot && rect.bottom >= rowTop) {
        rowTop = Math.min(rect.top, rowTop);
        rowBot = Math.max(rect.bottom, rowBot);
        dy = 0;
      }
      if (closest < 0 || (dy - dyClosest || dx - dxClosest) < 0) {
        if (closest >= 0 && dyClosest && dxClosest < dx && closestRect.top <= rowBot - 2 && closestRect.bottom >= rowTop + 2) {
          dyClosest = 0;
        } else {
          closest = index;
          dxClosest = dx;
          dyClosest = dy;
          closestRect = rect;
        }
      }
    }
  };
  if (tile.isText()) {
    for (let i2 = 0;i2 < tile.length; ) {
      let next = findClusterBreak2(tile.text, i2);
      checkRects(textRange(tile.dom, i2, next).getClientRects(), i2);
      if (!dxClosest && !dyClosest)
        break;
      i2 = next;
    }
    let after = x > (closestRect.left + closestRect.right) / 2 == (dirAt(view, closest + offset) == Direction.LTR);
    return after ? new PosAssoc(offset + findClusterBreak2(tile.text, closest), -1) : new PosAssoc(offset + closest, 1);
  } else {
    if (!tile.length)
      return new PosAssoc(offset, 1);
    for (let i2 = 0;i2 < tile.children.length; i2++) {
      let child = tile.children[i2];
      if (child.flags & 48)
        continue;
      let rects = (child.dom.nodeType == 1 ? child.dom : textRange(child.dom, 0, child.length)).getClientRects();
      checkRects(rects, i2);
      if (!dxClosest && !dyClosest)
        break;
    }
    let inner = tile.children[closest], innerOff = tile.posBefore(inner, offset);
    if (inner.isComposite() || inner.isText())
      return posAtCoordsInline(view, inner, innerOff, Math.max(closestRect.left, Math.min(closestRect.right, x)), y);
    let after = x > (closestRect.left + closestRect.right) / 2 == (dirAt(view, closest + offset) == Direction.LTR);
    return after ? new PosAssoc(innerOff + inner.length, -1) : new PosAssoc(innerOff, 1);
  }
}
function dirAt(view, pos) {
  let line = view.state.doc.lineAt(pos), spans = view.bidiSpans(line);
  return spans[BidiSpan.find(view.bidiSpans(line), pos - line.from, -1, 1)].dir;
}
var LineBreakPlaceholder = "";

class DOMReader {
  constructor(points, view) {
    this.points = points;
    this.view = view;
    this.text = "";
    this.lineSeparator = view.state.facet(EditorState.lineSeparator);
  }
  append(text) {
    this.text += text;
  }
  lineBreak() {
    this.text += LineBreakPlaceholder;
  }
  readRange(start, end) {
    if (!start)
      return this;
    let parent = start.parentNode;
    for (let cur = start;; ) {
      this.findPointBefore(parent, cur);
      let oldLen = this.text.length;
      this.readNode(cur);
      let tile = Tile.get(cur), next = cur.nextSibling;
      if (next == end) {
        if ((tile === null || tile === undefined ? undefined : tile.breakAfter) && !next && parent != this.view.contentDOM)
          this.lineBreak();
        break;
      }
      let nextTile = Tile.get(next);
      if ((tile && nextTile ? tile.breakAfter : (tile ? tile.breakAfter : isBlockElement(cur)) || isBlockElement(next) && (cur.nodeName != "BR" || (tile === null || tile === undefined ? undefined : tile.isWidget())) && this.text.length > oldLen) && !isEmptyToEnd(next, end))
        this.lineBreak();
      cur = next;
    }
    this.findPointBefore(parent, end);
    return this;
  }
  readTextNode(node) {
    let text = node.nodeValue;
    for (let point of this.points)
      if (point.node == node)
        point.pos = this.text.length + Math.min(point.offset, text.length);
    for (let off = 0, re = this.lineSeparator ? null : /\r\n?|\n/g;; ) {
      let nextBreak = -1, breakSize = 1, m;
      if (this.lineSeparator) {
        nextBreak = text.indexOf(this.lineSeparator, off);
        breakSize = this.lineSeparator.length;
      } else if (m = re.exec(text)) {
        nextBreak = m.index;
        breakSize = m[0].length;
      }
      this.append(text.slice(off, nextBreak < 0 ? text.length : nextBreak));
      if (nextBreak < 0)
        break;
      this.lineBreak();
      if (breakSize > 1) {
        for (let point of this.points)
          if (point.node == node && point.pos > this.text.length)
            point.pos -= breakSize - 1;
      }
      off = nextBreak + breakSize;
    }
  }
  readNode(node) {
    let tile = Tile.get(node);
    let fromView = tile && tile.overrideDOMText;
    if (fromView != null) {
      this.findPointInside(node, fromView.length);
      for (let i2 = fromView.iter();!i2.next().done; ) {
        if (i2.lineBreak)
          this.lineBreak();
        else
          this.append(i2.value);
      }
    } else if (node.nodeType == 3) {
      this.readTextNode(node);
    } else if (node.nodeName == "BR") {
      if (node.nextSibling)
        this.lineBreak();
    } else if (node.nodeType == 1) {
      this.readRange(node.firstChild, null);
    }
  }
  findPointBefore(node, next) {
    for (let point of this.points)
      if (point.node == node && node.childNodes[point.offset] == next)
        point.pos = this.text.length;
  }
  findPointInside(node, length) {
    for (let point of this.points)
      if (node.nodeType == 3 ? point.node == node : node.contains(point.node))
        point.pos = this.text.length + (isAtEnd(node, point.node, point.offset) ? length : 0);
  }
}
function isAtEnd(parent, node, offset) {
  for (;; ) {
    if (!node || offset < maxOffset(node))
      return false;
    if (node == parent)
      return true;
    offset = domIndex(node) + 1;
    node = node.parentNode;
  }
}
function isEmptyToEnd(node, end) {
  let widgets;
  for (;; node = node.nextSibling) {
    if (node == end || !node)
      break;
    let view = Tile.get(node);
    if (!(view === null || view === undefined ? undefined : view.isWidget()))
      return false;
    if (view)
      (widgets || (widgets = [])).push(view);
  }
  if (widgets)
    for (let w of widgets) {
      let override = w.overrideDOMText;
      if (override === null || override === undefined ? undefined : override.length)
        return false;
    }
  return true;
}

class DOMPoint {
  constructor(node, offset) {
    this.node = node;
    this.offset = offset;
    this.pos = -1;
  }
}

class DOMChange {
  constructor(view, start, end, typeOver) {
    this.typeOver = typeOver;
    this.bounds = null;
    this.text = "";
    this.domChanged = start > -1;
    let { impreciseHead: iHead, impreciseAnchor: iAnchor } = view.docView;
    if (view.state.readOnly && start > -1) {
      this.newSel = null;
    } else if (start > -1 && (this.bounds = domBoundsAround(view.docView.tile, start, end, 0))) {
      let selPoints = iHead || iAnchor ? [] : selectionPoints(view);
      let reader = new DOMReader(selPoints, view);
      reader.readRange(this.bounds.startDOM, this.bounds.endDOM);
      this.text = reader.text;
      this.newSel = selectionFromPoints(selPoints, this.bounds.from);
    } else {
      let domSel = view.observer.selectionRange;
      let head = iHead && iHead.node == domSel.focusNode && iHead.offset == domSel.focusOffset || !contains(view.contentDOM, domSel.focusNode) ? view.state.selection.main.head : view.docView.posFromDOM(domSel.focusNode, domSel.focusOffset);
      let anchor = iAnchor && iAnchor.node == domSel.anchorNode && iAnchor.offset == domSel.anchorOffset || !contains(view.contentDOM, domSel.anchorNode) ? view.state.selection.main.anchor : view.docView.posFromDOM(domSel.anchorNode, domSel.anchorOffset);
      let vp = view.viewport;
      if ((browser.ios || browser.chrome) && view.state.selection.main.empty && head != anchor && (vp.from > 0 || vp.to < view.state.doc.length)) {
        let from = Math.min(head, anchor), to = Math.max(head, anchor);
        let offFrom = vp.from - from, offTo = vp.to - to;
        if ((offFrom == 0 || offFrom == 1 || from == 0) && (offTo == 0 || offTo == -1 || to == view.state.doc.length)) {
          head = 0;
          anchor = view.state.doc.length;
        }
      }
      if (view.inputState.composing > -1 && view.state.selection.ranges.length > 1)
        this.newSel = view.state.selection.replaceRange(EditorSelection.range(anchor, head));
      else
        this.newSel = EditorSelection.single(anchor, head);
    }
  }
}
function domBoundsAround(tile, from, to, offset) {
  if (tile.isComposite()) {
    let fromI = -1, fromStart = -1, toI = -1, toEnd = -1;
    for (let i2 = 0, pos = offset, prevEnd = offset;i2 < tile.children.length; i2++) {
      let child = tile.children[i2], end = pos + child.length;
      if (pos < from && end > to)
        return domBoundsAround(child, from, to, pos);
      if (end >= from && fromI == -1) {
        fromI = i2;
        fromStart = pos;
      }
      if (pos > to && child.dom.parentNode == tile.dom) {
        toI = i2;
        toEnd = prevEnd;
        break;
      }
      prevEnd = end;
      pos = end + child.breakAfter;
    }
    return {
      from: fromStart,
      to: toEnd < 0 ? offset + tile.length : toEnd,
      startDOM: (fromI ? tile.children[fromI - 1].dom.nextSibling : null) || tile.dom.firstChild,
      endDOM: toI < tile.children.length && toI >= 0 ? tile.children[toI].dom : null
    };
  } else if (tile.isText()) {
    return { from: offset, to: offset + tile.length, startDOM: tile.dom, endDOM: tile.dom.nextSibling };
  } else {
    return null;
  }
}
function applyDOMChange(view, domChange) {
  let change;
  let { newSel } = domChange, sel = view.state.selection.main;
  let lastKey = view.inputState.lastKeyTime > Date.now() - 100 ? view.inputState.lastKeyCode : -1;
  if (domChange.bounds) {
    let { from, to } = domChange.bounds;
    let preferredPos = sel.from, preferredSide = null;
    if (lastKey === 8 || browser.android && domChange.text.length < to - from) {
      preferredPos = sel.to;
      preferredSide = "end";
    }
    let diff = findDiff(view.state.doc.sliceString(from, to, LineBreakPlaceholder), domChange.text, preferredPos - from, preferredSide);
    if (diff) {
      if (browser.chrome && lastKey == 13 && diff.toB == diff.from + 2 && domChange.text.slice(diff.from, diff.toB) == LineBreakPlaceholder + LineBreakPlaceholder)
        diff.toB--;
      change = {
        from: from + diff.from,
        to: from + diff.toA,
        insert: Text.of(domChange.text.slice(diff.from, diff.toB).split(LineBreakPlaceholder))
      };
    }
  } else if (newSel && (!view.hasFocus && view.state.facet(editable) || newSel.main.eq(sel))) {
    newSel = null;
  }
  if (!change && !newSel)
    return false;
  if (!change && domChange.typeOver && !sel.empty && newSel && newSel.main.empty) {
    change = { from: sel.from, to: sel.to, insert: view.state.doc.slice(sel.from, sel.to) };
  } else if ((browser.mac || browser.android) && change && change.from == change.to && change.from == sel.head - 1 && /^\. ?$/.test(change.insert.toString()) && view.contentDOM.getAttribute("autocorrect") == "off") {
    if (newSel && change.insert.length == 2)
      newSel = EditorSelection.single(newSel.main.anchor - 1, newSel.main.head - 1);
    change = { from: change.from, to: change.to, insert: Text.of([change.insert.toString().replace(".", " ")]) };
  } else if (change && change.from >= sel.from && change.to <= sel.to && (change.from != sel.from || change.to != sel.to) && sel.to - sel.from - (change.to - change.from) <= 4) {
    change = {
      from: sel.from,
      to: sel.to,
      insert: view.state.doc.slice(sel.from, change.from).append(change.insert).append(view.state.doc.slice(change.to, sel.to))
    };
  } else if (view.state.doc.lineAt(sel.from).to < sel.to && view.docView.lineHasWidget(sel.to) && view.inputState.insertingTextAt > Date.now() - 50) {
    change = {
      from: sel.from,
      to: sel.to,
      insert: view.state.toText(view.inputState.insertingText)
    };
  } else if (browser.chrome && change && change.from == change.to && change.from == sel.head && change.insert.toString() == `
 ` && view.lineWrapping) {
    if (newSel)
      newSel = EditorSelection.single(newSel.main.anchor - 1, newSel.main.head - 1);
    change = { from: sel.from, to: sel.to, insert: Text.of([" "]) };
  }
  if (change) {
    return applyDOMChangeInner(view, change, newSel, lastKey);
  } else if (newSel && !newSel.main.eq(sel)) {
    let scrollIntoView2 = false, userEvent = "select";
    if (view.inputState.lastSelectionTime > Date.now() - 50) {
      if (view.inputState.lastSelectionOrigin == "select")
        scrollIntoView2 = true;
      userEvent = view.inputState.lastSelectionOrigin;
      if (userEvent == "select.pointer")
        newSel = skipAtomsForSelection(view.state.facet(atomicRanges).map((f) => f(view)), newSel);
    }
    view.dispatch({ selection: newSel, scrollIntoView: scrollIntoView2, userEvent });
    return true;
  } else {
    return false;
  }
}
function applyDOMChangeInner(view, change, newSel, lastKey = -1) {
  if (browser.ios && view.inputState.flushIOSKey(change))
    return true;
  let sel = view.state.selection.main;
  if (browser.android && (change.to == sel.to && (change.from == sel.from || change.from == sel.from - 1 && view.state.sliceDoc(change.from, sel.from) == " ") && change.insert.length == 1 && change.insert.lines == 2 && dispatchKey(view.contentDOM, "Enter", 13) || (change.from == sel.from - 1 && change.to == sel.to && change.insert.length == 0 || lastKey == 8 && change.insert.length < change.to - change.from && change.to > sel.head) && dispatchKey(view.contentDOM, "Backspace", 8) || change.from == sel.from && change.to == sel.to + 1 && change.insert.length == 0 && dispatchKey(view.contentDOM, "Delete", 46)))
    return true;
  let text = change.insert.toString();
  if (view.inputState.composing >= 0)
    view.inputState.composing++;
  let defaultTr;
  let defaultInsert = () => defaultTr || (defaultTr = applyDefaultInsert(view, change, newSel));
  if (!view.state.facet(inputHandler).some((h) => h(view, change.from, change.to, text, defaultInsert)))
    view.dispatch(defaultInsert());
  return true;
}
function applyDefaultInsert(view, change, newSel) {
  let tr, startState = view.state, sel = startState.selection.main, inAtomic = -1;
  if (change.from == change.to && change.from < sel.from || change.from > sel.to) {
    let side = change.from < sel.from ? -1 : 1, pos = side < 0 ? sel.from : sel.to;
    let moved = skipAtomicRanges(startState.facet(atomicRanges).map((f) => f(view)), pos, side);
    if (change.from == moved)
      inAtomic = moved;
  }
  if (inAtomic > -1) {
    tr = {
      changes: change,
      selection: EditorSelection.cursor(change.from + change.insert.length, -1)
    };
  } else if (change.from >= sel.from && change.to <= sel.to && change.to - change.from >= (sel.to - sel.from) / 3 && (!newSel || newSel.main.empty && newSel.main.from == change.from + change.insert.length) && view.inputState.composing < 0) {
    let before = sel.from < change.from ? startState.sliceDoc(sel.from, change.from) : "";
    let after = sel.to > change.to ? startState.sliceDoc(change.to, sel.to) : "";
    tr = startState.replaceSelection(view.state.toText(before + change.insert.sliceString(0, undefined, view.state.lineBreak) + after));
  } else {
    let changes = startState.changes(change);
    let mainSel = newSel && newSel.main.to <= changes.newLength ? newSel.main : undefined;
    if (startState.selection.ranges.length > 1 && (view.inputState.composing >= 0 || view.inputState.compositionPendingChange) && change.to <= sel.to + 10 && change.to >= sel.to - 10) {
      let replaced = view.state.sliceDoc(change.from, change.to);
      let compositionRange, composition = newSel && findCompositionNode(view, newSel.main.head);
      if (composition) {
        let dLen = change.insert.length - (change.to - change.from);
        compositionRange = { from: composition.from, to: composition.to - dLen };
      } else {
        compositionRange = view.state.doc.lineAt(sel.head);
      }
      let offset = sel.to - change.to;
      tr = startState.changeByRange((range) => {
        if (range.from == sel.from && range.to == sel.to)
          return { changes, range: mainSel || range.map(changes) };
        let to = range.to - offset, from = to - replaced.length;
        if (view.state.sliceDoc(from, to) != replaced || to >= compositionRange.from && from <= compositionRange.to)
          return { range };
        let rangeChanges = startState.changes({ from, to, insert: change.insert }), selOff = range.to - sel.to;
        return {
          changes: rangeChanges,
          range: !mainSel ? range.map(rangeChanges) : EditorSelection.range(Math.max(0, mainSel.anchor + selOff), Math.max(0, mainSel.head + selOff))
        };
      });
    } else {
      tr = {
        changes,
        selection: mainSel && startState.selection.replaceRange(mainSel)
      };
    }
  }
  let userEvent = "input.type";
  if (view.composing || view.inputState.compositionPendingChange && view.inputState.compositionEndedAt > Date.now() - 50) {
    view.inputState.compositionPendingChange = false;
    userEvent += ".compose";
    if (view.inputState.compositionFirstChange) {
      userEvent += ".start";
      view.inputState.compositionFirstChange = false;
    }
  }
  return startState.update(tr, { userEvent, scrollIntoView: true });
}
function findDiff(a, b, preferredPos, preferredSide) {
  let minLen = Math.min(a.length, b.length);
  let from = 0;
  while (from < minLen && a.charCodeAt(from) == b.charCodeAt(from))
    from++;
  if (from == minLen && a.length == b.length)
    return null;
  let toA = a.length, toB = b.length;
  while (toA > 0 && toB > 0 && a.charCodeAt(toA - 1) == b.charCodeAt(toB - 1)) {
    toA--;
    toB--;
  }
  if (preferredSide == "end") {
    let adjust = Math.max(0, from - Math.min(toA, toB));
    preferredPos -= toA + adjust - from;
  }
  if (toA < from && a.length < b.length) {
    let move = preferredPos <= from && preferredPos >= toA ? from - preferredPos : 0;
    from -= move;
    toB = from + (toB - toA);
    toA = from;
  } else if (toB < from) {
    let move = preferredPos <= from && preferredPos >= toB ? from - preferredPos : 0;
    from -= move;
    toA = from + (toA - toB);
    toB = from;
  }
  return { from, toA, toB };
}
function selectionPoints(view) {
  let result = [];
  if (view.root.activeElement != view.contentDOM)
    return result;
  let { anchorNode, anchorOffset, focusNode, focusOffset } = view.observer.selectionRange;
  if (anchorNode) {
    result.push(new DOMPoint(anchorNode, anchorOffset));
    if (focusNode != anchorNode || focusOffset != anchorOffset)
      result.push(new DOMPoint(focusNode, focusOffset));
  }
  return result;
}
function selectionFromPoints(points, base2) {
  if (points.length == 0)
    return null;
  let anchor = points[0].pos, head = points.length == 2 ? points[1].pos : anchor;
  return anchor > -1 && head > -1 ? EditorSelection.single(anchor + base2, head + base2) : null;
}

class InputState {
  setSelectionOrigin(origin) {
    this.lastSelectionOrigin = origin;
    this.lastSelectionTime = Date.now();
  }
  constructor(view) {
    this.view = view;
    this.lastKeyCode = 0;
    this.lastKeyTime = 0;
    this.lastTouchTime = 0;
    this.lastFocusTime = 0;
    this.lastScrollTop = 0;
    this.lastScrollLeft = 0;
    this.pendingIOSKey = undefined;
    this.tabFocusMode = -1;
    this.lastSelectionOrigin = null;
    this.lastSelectionTime = 0;
    this.lastContextMenu = 0;
    this.scrollHandlers = [];
    this.handlers = Object.create(null);
    this.composing = -1;
    this.compositionFirstChange = null;
    this.compositionEndedAt = 0;
    this.compositionPendingKey = false;
    this.compositionPendingChange = false;
    this.insertingText = "";
    this.insertingTextAt = 0;
    this.mouseSelection = null;
    this.draggedContent = null;
    this.handleEvent = this.handleEvent.bind(this);
    this.notifiedFocused = view.hasFocus;
    if (browser.safari)
      view.contentDOM.addEventListener("input", () => null);
    if (browser.gecko)
      firefoxCopyCutHack(view.contentDOM.ownerDocument);
  }
  handleEvent(event) {
    if (!eventBelongsToEditor(this.view, event) || this.ignoreDuringComposition(event))
      return;
    if (event.type == "keydown" && this.keydown(event))
      return;
    if (this.view.updateState != 0)
      Promise.resolve().then(() => this.runHandlers(event.type, event));
    else
      this.runHandlers(event.type, event);
  }
  runHandlers(type, event) {
    let handlers = this.handlers[type];
    if (handlers) {
      for (let observer of handlers.observers)
        observer(this.view, event);
      for (let handler of handlers.handlers) {
        if (event.defaultPrevented)
          break;
        if (handler(this.view, event)) {
          event.preventDefault();
          break;
        }
      }
    }
  }
  ensureHandlers(plugins) {
    let handlers = computeHandlers(plugins), prev = this.handlers, dom = this.view.contentDOM;
    for (let type in handlers)
      if (type != "scroll") {
        let passive = !handlers[type].handlers.length;
        let exists = prev[type];
        if (exists && passive != !exists.handlers.length) {
          dom.removeEventListener(type, this.handleEvent);
          exists = null;
        }
        if (!exists)
          dom.addEventListener(type, this.handleEvent, { passive });
      }
    for (let type in prev)
      if (type != "scroll" && !handlers[type])
        dom.removeEventListener(type, this.handleEvent);
    this.handlers = handlers;
  }
  keydown(event) {
    this.lastKeyCode = event.keyCode;
    this.lastKeyTime = Date.now();
    if (event.keyCode == 9 && this.tabFocusMode > -1 && (!this.tabFocusMode || Date.now() <= this.tabFocusMode))
      return true;
    if (this.tabFocusMode > 0 && event.keyCode != 27 && modifierCodes.indexOf(event.keyCode) < 0)
      this.tabFocusMode = -1;
    if (browser.android && browser.chrome && !event.synthetic && (event.keyCode == 13 || event.keyCode == 8)) {
      this.view.observer.delayAndroidKey(event.key, event.keyCode);
      return true;
    }
    let pending;
    if (browser.ios && !event.synthetic && !event.altKey && !event.metaKey && ((pending = PendingKeys.find((key) => key.keyCode == event.keyCode)) && !event.ctrlKey || EmacsyPendingKeys.indexOf(event.key) > -1 && event.ctrlKey && !event.shiftKey)) {
      this.pendingIOSKey = pending || event;
      setTimeout(() => this.flushIOSKey(), 250);
      return true;
    }
    if (event.keyCode != 229)
      this.view.observer.forceFlush();
    return false;
  }
  flushIOSKey(change) {
    let key = this.pendingIOSKey;
    if (!key)
      return false;
    if (key.key == "Enter" && change && change.from < change.to && /^\S+$/.test(change.insert.toString()))
      return false;
    this.pendingIOSKey = undefined;
    return dispatchKey(this.view.contentDOM, key.key, key.keyCode, key instanceof KeyboardEvent ? key : undefined);
  }
  ignoreDuringComposition(event) {
    if (!/^key/.test(event.type) || event.synthetic)
      return false;
    if (this.composing > 0)
      return true;
    if (browser.safari && !browser.ios && this.compositionPendingKey && Date.now() - this.compositionEndedAt < 100) {
      this.compositionPendingKey = false;
      return true;
    }
    return false;
  }
  startMouseSelection(mouseSelection) {
    if (this.mouseSelection)
      this.mouseSelection.destroy();
    this.mouseSelection = mouseSelection;
  }
  update(update) {
    this.view.observer.update(update);
    if (this.mouseSelection)
      this.mouseSelection.update(update);
    if (this.draggedContent && update.docChanged)
      this.draggedContent = this.draggedContent.map(update.changes);
    if (update.transactions.length)
      this.lastKeyCode = this.lastSelectionTime = 0;
  }
  destroy() {
    if (this.mouseSelection)
      this.mouseSelection.destroy();
  }
}
function bindHandler(plugin, handler) {
  return (view, event) => {
    try {
      return handler.call(plugin, event, view);
    } catch (e) {
      logException(view.state, e);
    }
  };
}
function computeHandlers(plugins) {
  let result = Object.create(null);
  function record(type) {
    return result[type] || (result[type] = { observers: [], handlers: [] });
  }
  for (let plugin of plugins) {
    let spec = plugin.spec, handlers = spec && spec.plugin.domEventHandlers, observers = spec && spec.plugin.domEventObservers;
    if (handlers)
      for (let type in handlers) {
        let f = handlers[type];
        if (f)
          record(type).handlers.push(bindHandler(plugin.value, f));
      }
    if (observers)
      for (let type in observers) {
        let f = observers[type];
        if (f)
          record(type).observers.push(bindHandler(plugin.value, f));
      }
  }
  for (let type in handlers)
    record(type).handlers.push(handlers[type]);
  for (let type in observers)
    record(type).observers.push(observers[type]);
  return result;
}
var PendingKeys = [
  { key: "Backspace", keyCode: 8, inputType: "deleteContentBackward" },
  { key: "Enter", keyCode: 13, inputType: "insertParagraph" },
  { key: "Enter", keyCode: 13, inputType: "insertLineBreak" },
  { key: "Delete", keyCode: 46, inputType: "deleteContentForward" }
];
var EmacsyPendingKeys = "dthko";
var modifierCodes = [16, 17, 18, 20, 91, 92, 224, 225];
var dragScrollMargin = 6;
function dragScrollSpeed(dist) {
  return Math.max(0, dist) * 0.7 + 8;
}
function dist(a, b) {
  return Math.max(Math.abs(a.clientX - b.clientX), Math.abs(a.clientY - b.clientY));
}

class MouseSelection {
  constructor(view, startEvent, style, mustSelect) {
    this.view = view;
    this.startEvent = startEvent;
    this.style = style;
    this.mustSelect = mustSelect;
    this.scrollSpeed = { x: 0, y: 0 };
    this.scrolling = -1;
    this.lastEvent = startEvent;
    this.scrollParents = scrollableParents(view.contentDOM);
    this.atoms = view.state.facet(atomicRanges).map((f) => f(view));
    let doc2 = view.contentDOM.ownerDocument;
    doc2.addEventListener("mousemove", this.move = this.move.bind(this));
    doc2.addEventListener("mouseup", this.up = this.up.bind(this));
    this.extend = startEvent.shiftKey;
    this.multiple = view.state.facet(EditorState.allowMultipleSelections) && addsSelectionRange(view, startEvent);
    this.dragging = isInPrimarySelection(view, startEvent) && getClickType(startEvent) == 1 ? null : false;
  }
  start(event) {
    if (this.dragging === false)
      this.select(event);
  }
  move(event) {
    if (event.buttons == 0)
      return this.destroy();
    if (this.dragging || this.dragging == null && dist(this.startEvent, event) < 10)
      return;
    this.select(this.lastEvent = event);
    let sx = 0, sy = 0;
    let left = 0, top2 = 0, right = this.view.win.innerWidth, bottom = this.view.win.innerHeight;
    if (this.scrollParents.x)
      ({ left, right } = this.scrollParents.x.getBoundingClientRect());
    if (this.scrollParents.y)
      ({ top: top2, bottom } = this.scrollParents.y.getBoundingClientRect());
    let margins = getScrollMargins(this.view);
    if (event.clientX - margins.left <= left + dragScrollMargin)
      sx = -dragScrollSpeed(left - event.clientX);
    else if (event.clientX + margins.right >= right - dragScrollMargin)
      sx = dragScrollSpeed(event.clientX - right);
    if (event.clientY - margins.top <= top2 + dragScrollMargin)
      sy = -dragScrollSpeed(top2 - event.clientY);
    else if (event.clientY + margins.bottom >= bottom - dragScrollMargin)
      sy = dragScrollSpeed(event.clientY - bottom);
    this.setScrollSpeed(sx, sy);
  }
  up(event) {
    if (this.dragging == null)
      this.select(this.lastEvent);
    if (!this.dragging)
      event.preventDefault();
    this.destroy();
  }
  destroy() {
    this.setScrollSpeed(0, 0);
    let doc2 = this.view.contentDOM.ownerDocument;
    doc2.removeEventListener("mousemove", this.move);
    doc2.removeEventListener("mouseup", this.up);
    this.view.inputState.mouseSelection = this.view.inputState.draggedContent = null;
  }
  setScrollSpeed(sx, sy) {
    this.scrollSpeed = { x: sx, y: sy };
    if (sx || sy) {
      if (this.scrolling < 0)
        this.scrolling = setInterval(() => this.scroll(), 50);
    } else if (this.scrolling > -1) {
      clearInterval(this.scrolling);
      this.scrolling = -1;
    }
  }
  scroll() {
    let { x, y } = this.scrollSpeed;
    if (x && this.scrollParents.x) {
      this.scrollParents.x.scrollLeft += x;
      x = 0;
    }
    if (y && this.scrollParents.y) {
      this.scrollParents.y.scrollTop += y;
      y = 0;
    }
    if (x || y)
      this.view.win.scrollBy(x, y);
    if (this.dragging === false)
      this.select(this.lastEvent);
  }
  select(event) {
    let { view } = this, selection = skipAtomsForSelection(this.atoms, this.style.get(event, this.extend, this.multiple));
    if (this.mustSelect || !selection.eq(view.state.selection, this.dragging === false))
      this.view.dispatch({
        selection,
        userEvent: "select.pointer"
      });
    this.mustSelect = false;
  }
  update(update) {
    if (update.transactions.some((tr) => tr.isUserEvent("input.type")))
      this.destroy();
    else if (this.style.update(update))
      setTimeout(() => this.select(this.lastEvent), 20);
  }
}
function addsSelectionRange(view, event) {
  let facet = view.state.facet(clickAddsSelectionRange);
  return facet.length ? facet[0](event) : browser.mac ? event.metaKey : event.ctrlKey;
}
function dragMovesSelection(view, event) {
  let facet = view.state.facet(dragMovesSelection$1);
  return facet.length ? facet[0](event) : browser.mac ? !event.altKey : !event.ctrlKey;
}
function isInPrimarySelection(view, event) {
  let { main } = view.state.selection;
  if (main.empty)
    return false;
  let sel = getSelection(view.root);
  if (!sel || sel.rangeCount == 0)
    return true;
  let rects = sel.getRangeAt(0).getClientRects();
  for (let i2 = 0;i2 < rects.length; i2++) {
    let rect = rects[i2];
    if (rect.left <= event.clientX && rect.right >= event.clientX && rect.top <= event.clientY && rect.bottom >= event.clientY)
      return true;
  }
  return false;
}
function eventBelongsToEditor(view, event) {
  if (!event.bubbles)
    return true;
  if (event.defaultPrevented)
    return false;
  for (let node = event.target, tile;node != view.contentDOM; node = node.parentNode)
    if (!node || node.nodeType == 11 || (tile = Tile.get(node)) && tile.isWidget() && !tile.isHidden && tile.widget.ignoreEvent(event))
      return false;
  return true;
}
var handlers = /* @__PURE__ */ Object.create(null);
var observers = /* @__PURE__ */ Object.create(null);
var brokenClipboardAPI = browser.ie && browser.ie_version < 15 || browser.ios && browser.webkit_version < 604;
function capturePaste(view) {
  let parent = view.dom.parentNode;
  if (!parent)
    return;
  let target = parent.appendChild(document.createElement("textarea"));
  target.style.cssText = "position: fixed; left: -10000px; top: 10px";
  target.focus();
  setTimeout(() => {
    view.focus();
    target.remove();
    doPaste(view, target.value);
  }, 50);
}
function textFilter(state, facet, text) {
  for (let filter of state.facet(facet))
    text = filter(text, state);
  return text;
}
function doPaste(view, input) {
  input = textFilter(view.state, clipboardInputFilter, input);
  let { state } = view, changes, i2 = 1, text = state.toText(input);
  let byLine = text.lines == state.selection.ranges.length;
  let linewise = lastLinewiseCopy != null && state.selection.ranges.every((r) => r.empty) && lastLinewiseCopy == text.toString();
  if (linewise) {
    let lastLine = -1;
    changes = state.changeByRange((range) => {
      let line = state.doc.lineAt(range.from);
      if (line.from == lastLine)
        return { range };
      lastLine = line.from;
      let insert2 = state.toText((byLine ? text.line(i2++).text : input) + state.lineBreak);
      return {
        changes: { from: line.from, insert: insert2 },
        range: EditorSelection.cursor(range.from + insert2.length)
      };
    });
  } else if (byLine) {
    changes = state.changeByRange((range) => {
      let line = text.line(i2++);
      return {
        changes: { from: range.from, to: range.to, insert: line.text },
        range: EditorSelection.cursor(range.from + line.length)
      };
    });
  } else {
    changes = state.replaceSelection(text);
  }
  view.dispatch(changes, {
    userEvent: "input.paste",
    scrollIntoView: true
  });
}
observers.scroll = (view) => {
  view.inputState.lastScrollTop = view.scrollDOM.scrollTop;
  view.inputState.lastScrollLeft = view.scrollDOM.scrollLeft;
};
handlers.keydown = (view, event) => {
  view.inputState.setSelectionOrigin("select");
  if (event.keyCode == 27 && view.inputState.tabFocusMode != 0)
    view.inputState.tabFocusMode = Date.now() + 2000;
  return false;
};
observers.touchstart = (view, e) => {
  view.inputState.lastTouchTime = Date.now();
  view.inputState.setSelectionOrigin("select.pointer");
};
observers.touchmove = (view) => {
  view.inputState.setSelectionOrigin("select.pointer");
};
handlers.mousedown = (view, event) => {
  view.observer.flush();
  if (view.inputState.lastTouchTime > Date.now() - 2000)
    return false;
  let style = null;
  for (let makeStyle of view.state.facet(mouseSelectionStyle)) {
    style = makeStyle(view, event);
    if (style)
      break;
  }
  if (!style && event.button == 0)
    style = basicMouseSelection(view, event);
  if (style) {
    let mustFocus = !view.hasFocus;
    view.inputState.startMouseSelection(new MouseSelection(view, event, style, mustFocus));
    if (mustFocus)
      view.observer.ignore(() => {
        focusPreventScroll(view.contentDOM);
        let active = view.root.activeElement;
        if (active && !active.contains(view.contentDOM))
          active.blur();
      });
    let mouseSel = view.inputState.mouseSelection;
    if (mouseSel) {
      mouseSel.start(event);
      return mouseSel.dragging === false;
    }
  } else {
    view.inputState.setSelectionOrigin("select.pointer");
  }
  return false;
};
function rangeForClick(view, pos, bias, type) {
  if (type == 1) {
    return EditorSelection.cursor(pos, bias);
  } else if (type == 2) {
    return groupAt(view.state, pos, bias);
  } else {
    let visual = view.docView.lineAt(pos, bias), line = view.state.doc.lineAt(visual ? visual.posAtEnd : pos);
    let from = visual ? visual.posAtStart : line.from, to = visual ? visual.posAtEnd : line.to;
    if (to < view.state.doc.length && to == line.to)
      to++;
    return EditorSelection.range(from, to);
  }
}
var BadMouseDetail = browser.ie && browser.ie_version <= 11;
var lastMouseDown = null;
var lastMouseDownCount = 0;
var lastMouseDownTime = 0;
function getClickType(event) {
  if (!BadMouseDetail)
    return event.detail;
  let last = lastMouseDown, lastTime = lastMouseDownTime;
  lastMouseDown = event;
  lastMouseDownTime = Date.now();
  return lastMouseDownCount = !last || lastTime > Date.now() - 400 && Math.abs(last.clientX - event.clientX) < 2 && Math.abs(last.clientY - event.clientY) < 2 ? (lastMouseDownCount + 1) % 3 : 1;
}
function basicMouseSelection(view, event) {
  let start = view.posAndSideAtCoords({ x: event.clientX, y: event.clientY }, false), type = getClickType(event);
  let startSel = view.state.selection;
  return {
    update(update) {
      if (update.docChanged) {
        start.pos = update.changes.mapPos(start.pos);
        startSel = startSel.map(update.changes);
      }
    },
    get(event2, extend, multiple) {
      let cur = view.posAndSideAtCoords({ x: event2.clientX, y: event2.clientY }, false), removed;
      let range = rangeForClick(view, cur.pos, cur.assoc, type);
      if (start.pos != cur.pos && !extend) {
        let startRange = rangeForClick(view, start.pos, start.assoc, type);
        let from = Math.min(startRange.from, range.from), to = Math.max(startRange.to, range.to);
        range = from < range.from ? EditorSelection.range(from, to) : EditorSelection.range(to, from);
      }
      if (extend)
        return startSel.replaceRange(startSel.main.extend(range.from, range.to));
      else if (multiple && type == 1 && startSel.ranges.length > 1 && (removed = removeRangeAround(startSel, cur.pos)))
        return removed;
      else if (multiple)
        return startSel.addRange(range);
      else
        return EditorSelection.create([range]);
    }
  };
}
function removeRangeAround(sel, pos) {
  for (let i2 = 0;i2 < sel.ranges.length; i2++) {
    let { from, to } = sel.ranges[i2];
    if (from <= pos && to >= pos)
      return EditorSelection.create(sel.ranges.slice(0, i2).concat(sel.ranges.slice(i2 + 1)), sel.mainIndex == i2 ? 0 : sel.mainIndex - (sel.mainIndex > i2 ? 1 : 0));
  }
  return null;
}
handlers.dragstart = (view, event) => {
  let { selection: { main: range } } = view.state;
  if (event.target.draggable) {
    let tile = view.docView.tile.nearest(event.target);
    if (tile && tile.isWidget()) {
      let from = tile.posAtStart, to = from + tile.length;
      if (from >= range.to || to <= range.from)
        range = EditorSelection.range(from, to);
    }
  }
  let { inputState } = view;
  if (inputState.mouseSelection)
    inputState.mouseSelection.dragging = true;
  inputState.draggedContent = range;
  if (event.dataTransfer) {
    event.dataTransfer.setData("Text", textFilter(view.state, clipboardOutputFilter, view.state.sliceDoc(range.from, range.to)));
    event.dataTransfer.effectAllowed = "copyMove";
  }
  return false;
};
handlers.dragend = (view) => {
  view.inputState.draggedContent = null;
  return false;
};
function dropText(view, event, text, direct) {
  text = textFilter(view.state, clipboardInputFilter, text);
  if (!text)
    return;
  let dropPos = view.posAtCoords({ x: event.clientX, y: event.clientY }, false);
  let { draggedContent } = view.inputState;
  let del = direct && draggedContent && dragMovesSelection(view, event) ? { from: draggedContent.from, to: draggedContent.to } : null;
  let ins = { from: dropPos, insert: text };
  let changes = view.state.changes(del ? [del, ins] : ins);
  view.focus();
  view.dispatch({
    changes,
    selection: { anchor: changes.mapPos(dropPos, -1), head: changes.mapPos(dropPos, 1) },
    userEvent: del ? "move.drop" : "input.drop"
  });
  view.inputState.draggedContent = null;
}
handlers.drop = (view, event) => {
  if (!event.dataTransfer)
    return false;
  if (view.state.readOnly)
    return true;
  let files = event.dataTransfer.files;
  if (files && files.length) {
    let text = Array(files.length), read = 0;
    let finishFile = () => {
      if (++read == files.length)
        dropText(view, event, text.filter((s) => s != null).join(view.state.lineBreak), false);
    };
    for (let i2 = 0;i2 < files.length; i2++) {
      let reader = new FileReader;
      reader.onerror = finishFile;
      reader.onload = () => {
        if (!/[\x00-\x08\x0e-\x1f]{2}/.test(reader.result))
          text[i2] = reader.result;
        finishFile();
      };
      reader.readAsText(files[i2]);
    }
    return true;
  } else {
    let text = event.dataTransfer.getData("Text");
    if (text) {
      dropText(view, event, text, true);
      return true;
    }
  }
  return false;
};
handlers.paste = (view, event) => {
  if (view.state.readOnly)
    return true;
  view.observer.flush();
  let data = brokenClipboardAPI ? null : event.clipboardData;
  if (data) {
    doPaste(view, data.getData("text/plain") || data.getData("text/uri-list"));
    return true;
  } else {
    capturePaste(view);
    return false;
  }
};
function captureCopy(view, text) {
  let parent = view.dom.parentNode;
  if (!parent)
    return;
  let target = parent.appendChild(document.createElement("textarea"));
  target.style.cssText = "position: fixed; left: -10000px; top: 10px";
  target.value = text;
  target.focus();
  target.selectionEnd = text.length;
  target.selectionStart = 0;
  setTimeout(() => {
    target.remove();
    view.focus();
  }, 50);
}
function copiedRange(state) {
  let content = [], ranges = [], linewise = false;
  for (let range of state.selection.ranges)
    if (!range.empty) {
      content.push(state.sliceDoc(range.from, range.to));
      ranges.push(range);
    }
  if (!content.length) {
    let upto = -1;
    for (let { from } of state.selection.ranges) {
      let line = state.doc.lineAt(from);
      if (line.number > upto) {
        content.push(line.text);
        ranges.push({ from: line.from, to: Math.min(state.doc.length, line.to + 1) });
      }
      upto = line.number;
    }
    linewise = true;
  }
  return { text: textFilter(state, clipboardOutputFilter, content.join(state.lineBreak)), ranges, linewise };
}
var lastLinewiseCopy = null;
handlers.copy = handlers.cut = (view, event) => {
  let { text, ranges, linewise } = copiedRange(view.state);
  if (!text && !linewise)
    return false;
  lastLinewiseCopy = linewise ? text : null;
  if (event.type == "cut" && !view.state.readOnly)
    view.dispatch({
      changes: ranges,
      scrollIntoView: true,
      userEvent: "delete.cut"
    });
  let data = brokenClipboardAPI ? null : event.clipboardData;
  if (data) {
    data.clearData();
    data.setData("text/plain", text);
    return true;
  } else {
    captureCopy(view, text);
    return false;
  }
};
var isFocusChange = /* @__PURE__ */ Annotation.define();
function focusChangeTransaction(state, focus) {
  let effects = [];
  for (let getEffect of state.facet(focusChangeEffect)) {
    let effect = getEffect(state, focus);
    if (effect)
      effects.push(effect);
  }
  return effects.length ? state.update({ effects, annotations: isFocusChange.of(true) }) : null;
}
function updateForFocusChange(view) {
  setTimeout(() => {
    let focus = view.hasFocus;
    if (focus != view.inputState.notifiedFocused) {
      let tr = focusChangeTransaction(view.state, focus);
      if (tr)
        view.dispatch(tr);
      else
        view.update([]);
    }
  }, 10);
}
observers.focus = (view) => {
  view.inputState.lastFocusTime = Date.now();
  if (!view.scrollDOM.scrollTop && (view.inputState.lastScrollTop || view.inputState.lastScrollLeft)) {
    view.scrollDOM.scrollTop = view.inputState.lastScrollTop;
    view.scrollDOM.scrollLeft = view.inputState.lastScrollLeft;
  }
  updateForFocusChange(view);
};
observers.blur = (view) => {
  view.observer.clearSelectionRange();
  updateForFocusChange(view);
};
observers.compositionstart = observers.compositionupdate = (view) => {
  if (view.observer.editContext)
    return;
  if (view.inputState.compositionFirstChange == null)
    view.inputState.compositionFirstChange = true;
  if (view.inputState.composing < 0) {
    view.inputState.composing = 0;
  }
};
observers.compositionend = (view) => {
  if (view.observer.editContext)
    return;
  view.inputState.composing = -1;
  view.inputState.compositionEndedAt = Date.now();
  view.inputState.compositionPendingKey = true;
  view.inputState.compositionPendingChange = view.observer.pendingRecords().length > 0;
  view.inputState.compositionFirstChange = null;
  if (browser.chrome && browser.android) {
    view.observer.flushSoon();
  } else if (view.inputState.compositionPendingChange) {
    Promise.resolve().then(() => view.observer.flush());
  } else {
    setTimeout(() => {
      if (view.inputState.composing < 0 && view.docView.hasComposition)
        view.update([]);
    }, 50);
  }
};
observers.contextmenu = (view) => {
  view.inputState.lastContextMenu = Date.now();
};
handlers.beforeinput = (view, event) => {
  var _a, _b;
  if (event.inputType == "insertText" || event.inputType == "insertCompositionText") {
    view.inputState.insertingText = event.data;
    view.inputState.insertingTextAt = Date.now();
  }
  if (event.inputType == "insertReplacementText" && view.observer.editContext) {
    let text = (_a = event.dataTransfer) === null || _a === undefined ? undefined : _a.getData("text/plain"), ranges = event.getTargetRanges();
    if (text && ranges.length) {
      let r = ranges[0];
      let from = view.posAtDOM(r.startContainer, r.startOffset), to = view.posAtDOM(r.endContainer, r.endOffset);
      applyDOMChangeInner(view, { from, to, insert: view.state.toText(text) }, null);
      return true;
    }
  }
  let pending;
  if (browser.chrome && browser.android && (pending = PendingKeys.find((key) => key.inputType == event.inputType))) {
    view.observer.delayAndroidKey(pending.key, pending.keyCode);
    if (pending.key == "Backspace" || pending.key == "Delete") {
      let startViewHeight = ((_b = window.visualViewport) === null || _b === undefined ? undefined : _b.height) || 0;
      setTimeout(() => {
        var _a2;
        if ((((_a2 = window.visualViewport) === null || _a2 === undefined ? undefined : _a2.height) || 0) > startViewHeight + 10 && view.hasFocus) {
          view.contentDOM.blur();
          view.focus();
        }
      }, 100);
    }
  }
  if (browser.ios && event.inputType == "deleteContentForward") {
    view.observer.flushSoon();
  }
  if (browser.safari && event.inputType == "insertText" && view.inputState.composing >= 0) {
    setTimeout(() => observers.compositionend(view, event), 20);
  }
  return false;
};
var appliedFirefoxHack = /* @__PURE__ */ new Set;
function firefoxCopyCutHack(doc2) {
  if (!appliedFirefoxHack.has(doc2)) {
    appliedFirefoxHack.add(doc2);
    doc2.addEventListener("copy", () => {});
    doc2.addEventListener("cut", () => {});
  }
}
var wrappingWhiteSpace = ["pre-wrap", "normal", "pre-line", "break-spaces"];
var heightChangeFlag = false;
function clearHeightChangeFlag() {
  heightChangeFlag = false;
}

class HeightOracle {
  constructor(lineWrapping) {
    this.lineWrapping = lineWrapping;
    this.doc = Text.empty;
    this.heightSamples = {};
    this.lineHeight = 14;
    this.charWidth = 7;
    this.textHeight = 14;
    this.lineLength = 30;
  }
  heightForGap(from, to) {
    let lines = this.doc.lineAt(to).number - this.doc.lineAt(from).number + 1;
    if (this.lineWrapping)
      lines += Math.max(0, Math.ceil((to - from - lines * this.lineLength * 0.5) / this.lineLength));
    return this.lineHeight * lines;
  }
  heightForLine(length) {
    if (!this.lineWrapping)
      return this.lineHeight;
    let lines = 1 + Math.max(0, Math.ceil((length - this.lineLength) / Math.max(1, this.lineLength - 5)));
    return lines * this.lineHeight;
  }
  setDoc(doc2) {
    this.doc = doc2;
    return this;
  }
  mustRefreshForWrapping(whiteSpace) {
    return wrappingWhiteSpace.indexOf(whiteSpace) > -1 != this.lineWrapping;
  }
  mustRefreshForHeights(lineHeights) {
    let newHeight = false;
    for (let i2 = 0;i2 < lineHeights.length; i2++) {
      let h = lineHeights[i2];
      if (h < 0) {
        i2++;
      } else if (!this.heightSamples[Math.floor(h * 10)]) {
        newHeight = true;
        this.heightSamples[Math.floor(h * 10)] = true;
      }
    }
    return newHeight;
  }
  refresh(whiteSpace, lineHeight, charWidth, textHeight, lineLength, knownHeights) {
    let lineWrapping = wrappingWhiteSpace.indexOf(whiteSpace) > -1;
    let changed = Math.round(lineHeight) != Math.round(this.lineHeight) || this.lineWrapping != lineWrapping;
    this.lineWrapping = lineWrapping;
    this.lineHeight = lineHeight;
    this.charWidth = charWidth;
    this.textHeight = textHeight;
    this.lineLength = lineLength;
    if (changed) {
      this.heightSamples = {};
      for (let i2 = 0;i2 < knownHeights.length; i2++) {
        let h = knownHeights[i2];
        if (h < 0)
          i2++;
        else
          this.heightSamples[Math.floor(h * 10)] = true;
      }
    }
    return changed;
  }
}

class MeasuredHeights {
  constructor(from, heights) {
    this.from = from;
    this.heights = heights;
    this.index = 0;
  }
  get more() {
    return this.index < this.heights.length;
  }
}

class BlockInfo {
  constructor(from, length, top2, height, _content) {
    this.from = from;
    this.length = length;
    this.top = top2;
    this.height = height;
    this._content = _content;
  }
  get type() {
    return typeof this._content == "number" ? BlockType.Text : Array.isArray(this._content) ? this._content : this._content.type;
  }
  get to() {
    return this.from + this.length;
  }
  get bottom() {
    return this.top + this.height;
  }
  get widget() {
    return this._content instanceof PointDecoration ? this._content.widget : null;
  }
  get widgetLineBreaks() {
    return typeof this._content == "number" ? this._content : 0;
  }
  join(other) {
    let content = (Array.isArray(this._content) ? this._content : [this]).concat(Array.isArray(other._content) ? other._content : [other]);
    return new BlockInfo(this.from, this.length + other.length, this.top, this.height + other.height, content);
  }
}
var QueryType = /* @__PURE__ */ function(QueryType2) {
  QueryType2[QueryType2["ByPos"] = 0] = "ByPos";
  QueryType2[QueryType2["ByHeight"] = 1] = "ByHeight";
  QueryType2[QueryType2["ByPosNoHeight"] = 2] = "ByPosNoHeight";
  return QueryType2;
}(QueryType || (QueryType = {}));
var Epsilon = 0.001;

class HeightMap {
  constructor(length, height, flags = 2) {
    this.length = length;
    this.height = height;
    this.flags = flags;
  }
  get outdated() {
    return (this.flags & 2) > 0;
  }
  set outdated(value) {
    this.flags = (value ? 2 : 0) | this.flags & ~2;
  }
  setHeight(height) {
    if (this.height != height) {
      if (Math.abs(this.height - height) > Epsilon)
        heightChangeFlag = true;
      this.height = height;
    }
  }
  replace(_from, _to, nodes) {
    return HeightMap.of(nodes);
  }
  decomposeLeft(_to, result) {
    result.push(this);
  }
  decomposeRight(_from, result) {
    result.push(this);
  }
  applyChanges(decorations2, oldDoc, oracle, changes) {
    let me = this, doc2 = oracle.doc;
    for (let i2 = changes.length - 1;i2 >= 0; i2--) {
      let { fromA, toA, fromB, toB } = changes[i2];
      let start = me.lineAt(fromA, QueryType.ByPosNoHeight, oracle.setDoc(oldDoc), 0, 0);
      let end = start.to >= toA ? start : me.lineAt(toA, QueryType.ByPosNoHeight, oracle, 0, 0);
      toB += end.to - toA;
      toA = end.to;
      while (i2 > 0 && start.from <= changes[i2 - 1].toA) {
        fromA = changes[i2 - 1].fromA;
        fromB = changes[i2 - 1].fromB;
        i2--;
        if (fromA < start.from)
          start = me.lineAt(fromA, QueryType.ByPosNoHeight, oracle, 0, 0);
      }
      fromB += start.from - fromA;
      fromA = start.from;
      let nodes = NodeBuilder.build(oracle.setDoc(doc2), decorations2, fromB, toB);
      me = replace(me, me.replace(fromA, toA, nodes));
    }
    return me.updateHeight(oracle, 0);
  }
  static empty() {
    return new HeightMapText(0, 0, 0);
  }
  static of(nodes) {
    if (nodes.length == 1)
      return nodes[0];
    let i2 = 0, j = nodes.length, before = 0, after = 0;
    for (;; ) {
      if (i2 == j) {
        if (before > after * 2) {
          let split = nodes[i2 - 1];
          if (split.break)
            nodes.splice(--i2, 1, split.left, null, split.right);
          else
            nodes.splice(--i2, 1, split.left, split.right);
          j += 1 + split.break;
          before -= split.size;
        } else if (after > before * 2) {
          let split = nodes[j];
          if (split.break)
            nodes.splice(j, 1, split.left, null, split.right);
          else
            nodes.splice(j, 1, split.left, split.right);
          j += 2 + split.break;
          after -= split.size;
        } else {
          break;
        }
      } else if (before < after) {
        let next = nodes[i2++];
        if (next)
          before += next.size;
      } else {
        let next = nodes[--j];
        if (next)
          after += next.size;
      }
    }
    let brk = 0;
    if (nodes[i2 - 1] == null) {
      brk = 1;
      i2--;
    } else if (nodes[i2] == null) {
      brk = 1;
      j++;
    }
    return new HeightMapBranch(HeightMap.of(nodes.slice(0, i2)), brk, HeightMap.of(nodes.slice(j)));
  }
}
function replace(old, val) {
  if (old == val)
    return old;
  if (old.constructor != val.constructor)
    heightChangeFlag = true;
  return val;
}
HeightMap.prototype.size = 1;
var SpaceDeco = /* @__PURE__ */ Decoration.replace({});

class HeightMapBlock extends HeightMap {
  constructor(length, height, deco) {
    super(length, height);
    this.deco = deco;
    this.spaceAbove = 0;
  }
  mainBlock(top2, offset) {
    return new BlockInfo(offset, this.length, top2 + this.spaceAbove, this.height - this.spaceAbove, this.deco || 0);
  }
  blockAt(height, _oracle, top2, offset) {
    return this.spaceAbove && height < top2 + this.spaceAbove ? new BlockInfo(offset, 0, top2, this.spaceAbove, SpaceDeco) : this.mainBlock(top2, offset);
  }
  lineAt(_value, _type, oracle, top2, offset) {
    let main = this.mainBlock(top2, offset);
    return this.spaceAbove ? this.blockAt(0, oracle, top2, offset).join(main) : main;
  }
  forEachLine(from, to, oracle, top2, offset, f) {
    if (from <= offset + this.length && to >= offset)
      f(this.lineAt(0, QueryType.ByPos, oracle, top2, offset));
  }
  setMeasuredHeight(measured) {
    let next = measured.heights[measured.index++];
    if (next < 0) {
      this.spaceAbove = -next;
      next = measured.heights[measured.index++];
    } else {
      this.spaceAbove = 0;
    }
    this.setHeight(next);
  }
  updateHeight(oracle, offset = 0, _force = false, measured) {
    if (measured && measured.from <= offset && measured.more)
      this.setMeasuredHeight(measured);
    this.outdated = false;
    return this;
  }
  toString() {
    return `block(${this.length})`;
  }
}

class HeightMapText extends HeightMapBlock {
  constructor(length, height, above) {
    super(length, height, null);
    this.collapsed = 0;
    this.widgetHeight = 0;
    this.breaks = 0;
    this.spaceAbove = above;
  }
  mainBlock(top2, offset) {
    return new BlockInfo(offset, this.length, top2 + this.spaceAbove, this.height - this.spaceAbove, this.breaks);
  }
  replace(_from, _to, nodes) {
    let node = nodes[0];
    if (nodes.length == 1 && (node instanceof HeightMapText || node instanceof HeightMapGap && node.flags & 4) && Math.abs(this.length - node.length) < 10) {
      if (node instanceof HeightMapGap)
        node = new HeightMapText(node.length, this.height, this.spaceAbove);
      else
        node.height = this.height;
      if (!this.outdated)
        node.outdated = false;
      return node;
    } else {
      return HeightMap.of(nodes);
    }
  }
  updateHeight(oracle, offset = 0, force = false, measured) {
    if (measured && measured.from <= offset && measured.more) {
      this.setMeasuredHeight(measured);
    } else if (force || this.outdated) {
      this.spaceAbove = 0;
      this.setHeight(Math.max(this.widgetHeight, oracle.heightForLine(this.length - this.collapsed)) + this.breaks * oracle.lineHeight);
    }
    this.outdated = false;
    return this;
  }
  toString() {
    return `line(${this.length}${this.collapsed ? -this.collapsed : ""}${this.widgetHeight ? ":" + this.widgetHeight : ""})`;
  }
}

class HeightMapGap extends HeightMap {
  constructor(length) {
    super(length, 0);
  }
  heightMetrics(oracle, offset) {
    let firstLine = oracle.doc.lineAt(offset).number, lastLine = oracle.doc.lineAt(offset + this.length).number;
    let lines = lastLine - firstLine + 1;
    let perLine, perChar = 0;
    if (oracle.lineWrapping) {
      let totalPerLine = Math.min(this.height, oracle.lineHeight * lines);
      perLine = totalPerLine / lines;
      if (this.length > lines + 1)
        perChar = (this.height - totalPerLine) / (this.length - lines - 1);
    } else {
      perLine = this.height / lines;
    }
    return { firstLine, lastLine, perLine, perChar };
  }
  blockAt(height, oracle, top2, offset) {
    let { firstLine, lastLine, perLine, perChar } = this.heightMetrics(oracle, offset);
    if (oracle.lineWrapping) {
      let guess = offset + (height < oracle.lineHeight ? 0 : Math.round(Math.max(0, Math.min(1, (height - top2) / this.height)) * this.length));
      let line = oracle.doc.lineAt(guess), lineHeight = perLine + line.length * perChar;
      let lineTop = Math.max(top2, height - lineHeight / 2);
      return new BlockInfo(line.from, line.length, lineTop, lineHeight, 0);
    } else {
      let line = Math.max(0, Math.min(lastLine - firstLine, Math.floor((height - top2) / perLine)));
      let { from, length } = oracle.doc.line(firstLine + line);
      return new BlockInfo(from, length, top2 + perLine * line, perLine, 0);
    }
  }
  lineAt(value, type, oracle, top2, offset) {
    if (type == QueryType.ByHeight)
      return this.blockAt(value, oracle, top2, offset);
    if (type == QueryType.ByPosNoHeight) {
      let { from, to } = oracle.doc.lineAt(value);
      return new BlockInfo(from, to - from, 0, 0, 0);
    }
    let { firstLine, perLine, perChar } = this.heightMetrics(oracle, offset);
    let line = oracle.doc.lineAt(value), lineHeight = perLine + line.length * perChar;
    let linesAbove = line.number - firstLine;
    let lineTop = top2 + perLine * linesAbove + perChar * (line.from - offset - linesAbove);
    return new BlockInfo(line.from, line.length, Math.max(top2, Math.min(lineTop, top2 + this.height - lineHeight)), lineHeight, 0);
  }
  forEachLine(from, to, oracle, top2, offset, f) {
    from = Math.max(from, offset);
    to = Math.min(to, offset + this.length);
    let { firstLine, perLine, perChar } = this.heightMetrics(oracle, offset);
    for (let pos = from, lineTop = top2;pos <= to; ) {
      let line = oracle.doc.lineAt(pos);
      if (pos == from) {
        let linesAbove = line.number - firstLine;
        lineTop += perLine * linesAbove + perChar * (from - offset - linesAbove);
      }
      let lineHeight = perLine + perChar * line.length;
      f(new BlockInfo(line.from, line.length, lineTop, lineHeight, 0));
      lineTop += lineHeight;
      pos = line.to + 1;
    }
  }
  replace(from, to, nodes) {
    let after = this.length - to;
    if (after > 0) {
      let last = nodes[nodes.length - 1];
      if (last instanceof HeightMapGap)
        nodes[nodes.length - 1] = new HeightMapGap(last.length + after);
      else
        nodes.push(null, new HeightMapGap(after - 1));
    }
    if (from > 0) {
      let first = nodes[0];
      if (first instanceof HeightMapGap)
        nodes[0] = new HeightMapGap(from + first.length);
      else
        nodes.unshift(new HeightMapGap(from - 1), null);
    }
    return HeightMap.of(nodes);
  }
  decomposeLeft(to, result) {
    result.push(new HeightMapGap(to - 1), null);
  }
  decomposeRight(from, result) {
    result.push(null, new HeightMapGap(this.length - from - 1));
  }
  updateHeight(oracle, offset = 0, force = false, measured) {
    let end = offset + this.length;
    if (measured && measured.from <= offset + this.length && measured.more) {
      let nodes = [], pos = Math.max(offset, measured.from), singleHeight = -1;
      if (measured.from > offset)
        nodes.push(new HeightMapGap(measured.from - offset - 1).updateHeight(oracle, offset));
      while (pos <= end && measured.more) {
        let len = oracle.doc.lineAt(pos).length;
        if (nodes.length)
          nodes.push(null);
        let height = measured.heights[measured.index++], above = 0;
        if (height < 0) {
          above = -height;
          height = measured.heights[measured.index++];
        }
        if (singleHeight == -1)
          singleHeight = height;
        else if (Math.abs(height - singleHeight) >= Epsilon)
          singleHeight = -2;
        let line = new HeightMapText(len, height, above);
        line.outdated = false;
        nodes.push(line);
        pos += len + 1;
      }
      if (pos <= end)
        nodes.push(null, new HeightMapGap(end - pos).updateHeight(oracle, pos));
      let result = HeightMap.of(nodes);
      if (singleHeight < 0 || Math.abs(result.height - this.height) >= Epsilon || Math.abs(singleHeight - this.heightMetrics(oracle, offset).perLine) >= Epsilon)
        heightChangeFlag = true;
      return replace(this, result);
    } else if (force || this.outdated) {
      this.setHeight(oracle.heightForGap(offset, offset + this.length));
      this.outdated = false;
    }
    return this;
  }
  toString() {
    return `gap(${this.length})`;
  }
}

class HeightMapBranch extends HeightMap {
  constructor(left, brk, right) {
    super(left.length + brk + right.length, left.height + right.height, brk | (left.outdated || right.outdated ? 2 : 0));
    this.left = left;
    this.right = right;
    this.size = left.size + right.size;
  }
  get break() {
    return this.flags & 1;
  }
  blockAt(height, oracle, top2, offset) {
    let mid = top2 + this.left.height;
    return height < mid ? this.left.blockAt(height, oracle, top2, offset) : this.right.blockAt(height, oracle, mid, offset + this.left.length + this.break);
  }
  lineAt(value, type, oracle, top2, offset) {
    let rightTop = top2 + this.left.height, rightOffset = offset + this.left.length + this.break;
    let left = type == QueryType.ByHeight ? value < rightTop : value < rightOffset;
    let base2 = left ? this.left.lineAt(value, type, oracle, top2, offset) : this.right.lineAt(value, type, oracle, rightTop, rightOffset);
    if (this.break || (left ? base2.to < rightOffset : base2.from > rightOffset))
      return base2;
    let subQuery = type == QueryType.ByPosNoHeight ? QueryType.ByPosNoHeight : QueryType.ByPos;
    if (left)
      return base2.join(this.right.lineAt(rightOffset, subQuery, oracle, rightTop, rightOffset));
    else
      return this.left.lineAt(rightOffset, subQuery, oracle, top2, offset).join(base2);
  }
  forEachLine(from, to, oracle, top2, offset, f) {
    let rightTop = top2 + this.left.height, rightOffset = offset + this.left.length + this.break;
    if (this.break) {
      if (from < rightOffset)
        this.left.forEachLine(from, to, oracle, top2, offset, f);
      if (to >= rightOffset)
        this.right.forEachLine(from, to, oracle, rightTop, rightOffset, f);
    } else {
      let mid = this.lineAt(rightOffset, QueryType.ByPos, oracle, top2, offset);
      if (from < mid.from)
        this.left.forEachLine(from, mid.from - 1, oracle, top2, offset, f);
      if (mid.to >= from && mid.from <= to)
        f(mid);
      if (to > mid.to)
        this.right.forEachLine(mid.to + 1, to, oracle, rightTop, rightOffset, f);
    }
  }
  replace(from, to, nodes) {
    let rightStart = this.left.length + this.break;
    if (to < rightStart)
      return this.balanced(this.left.replace(from, to, nodes), this.right);
    if (from > this.left.length)
      return this.balanced(this.left, this.right.replace(from - rightStart, to - rightStart, nodes));
    let result = [];
    if (from > 0)
      this.decomposeLeft(from, result);
    let left = result.length;
    for (let node of nodes)
      result.push(node);
    if (from > 0)
      mergeGaps(result, left - 1);
    if (to < this.length) {
      let right = result.length;
      this.decomposeRight(to, result);
      mergeGaps(result, right);
    }
    return HeightMap.of(result);
  }
  decomposeLeft(to, result) {
    let left = this.left.length;
    if (to <= left)
      return this.left.decomposeLeft(to, result);
    result.push(this.left);
    if (this.break) {
      left++;
      if (to >= left)
        result.push(null);
    }
    if (to > left)
      this.right.decomposeLeft(to - left, result);
  }
  decomposeRight(from, result) {
    let left = this.left.length, right = left + this.break;
    if (from >= right)
      return this.right.decomposeRight(from - right, result);
    if (from < left)
      this.left.decomposeRight(from, result);
    if (this.break && from < right)
      result.push(null);
    result.push(this.right);
  }
  balanced(left, right) {
    if (left.size > 2 * right.size || right.size > 2 * left.size)
      return HeightMap.of(this.break ? [left, null, right] : [left, right]);
    this.left = replace(this.left, left);
    this.right = replace(this.right, right);
    this.setHeight(left.height + right.height);
    this.outdated = left.outdated || right.outdated;
    this.size = left.size + right.size;
    this.length = left.length + this.break + right.length;
    return this;
  }
  updateHeight(oracle, offset = 0, force = false, measured) {
    let { left, right } = this, rightStart = offset + left.length + this.break, rebalance = null;
    if (measured && measured.from <= offset + left.length && measured.more)
      rebalance = left = left.updateHeight(oracle, offset, force, measured);
    else
      left.updateHeight(oracle, offset, force);
    if (measured && measured.from <= rightStart + right.length && measured.more)
      rebalance = right = right.updateHeight(oracle, rightStart, force, measured);
    else
      right.updateHeight(oracle, rightStart, force);
    if (rebalance)
      return this.balanced(left, right);
    this.height = this.left.height + this.right.height;
    this.outdated = false;
    return this;
  }
  toString() {
    return this.left + (this.break ? " " : "-") + this.right;
  }
}
function mergeGaps(nodes, around) {
  let before, after;
  if (nodes[around] == null && (before = nodes[around - 1]) instanceof HeightMapGap && (after = nodes[around + 1]) instanceof HeightMapGap)
    nodes.splice(around - 1, 3, new HeightMapGap(before.length + 1 + after.length));
}
var relevantWidgetHeight = 5;

class NodeBuilder {
  constructor(pos, oracle) {
    this.pos = pos;
    this.oracle = oracle;
    this.nodes = [];
    this.lineStart = -1;
    this.lineEnd = -1;
    this.covering = null;
    this.writtenTo = pos;
  }
  get isCovered() {
    return this.covering && this.nodes[this.nodes.length - 1] == this.covering;
  }
  span(_from, to) {
    if (this.lineStart > -1) {
      let end = Math.min(to, this.lineEnd), last = this.nodes[this.nodes.length - 1];
      if (last instanceof HeightMapText)
        last.length += end - this.pos;
      else if (end > this.pos || !this.isCovered)
        this.nodes.push(new HeightMapText(end - this.pos, -1, 0));
      this.writtenTo = end;
      if (to > end) {
        this.nodes.push(null);
        this.writtenTo++;
        this.lineStart = -1;
      }
    }
    this.pos = to;
  }
  point(from, to, deco) {
    if (from < to || deco.heightRelevant) {
      let height = deco.widget ? deco.widget.estimatedHeight : 0;
      let breaks = deco.widget ? deco.widget.lineBreaks : 0;
      if (height < 0)
        height = this.oracle.lineHeight;
      let len = to - from;
      if (deco.block) {
        this.addBlock(new HeightMapBlock(len, height, deco));
      } else if (len || breaks || height >= relevantWidgetHeight) {
        this.addLineDeco(height, breaks, len);
      }
    } else if (to > from) {
      this.span(from, to);
    }
    if (this.lineEnd > -1 && this.lineEnd < this.pos)
      this.lineEnd = this.oracle.doc.lineAt(this.pos).to;
  }
  enterLine() {
    if (this.lineStart > -1)
      return;
    let { from, to } = this.oracle.doc.lineAt(this.pos);
    this.lineStart = from;
    this.lineEnd = to;
    if (this.writtenTo < from) {
      if (this.writtenTo < from - 1 || this.nodes[this.nodes.length - 1] == null)
        this.nodes.push(this.blankContent(this.writtenTo, from - 1));
      this.nodes.push(null);
    }
    if (this.pos > from)
      this.nodes.push(new HeightMapText(this.pos - from, -1, 0));
    this.writtenTo = this.pos;
  }
  blankContent(from, to) {
    let gap = new HeightMapGap(to - from);
    if (this.oracle.doc.lineAt(from).to == to)
      gap.flags |= 4;
    return gap;
  }
  ensureLine() {
    this.enterLine();
    let last = this.nodes.length ? this.nodes[this.nodes.length - 1] : null;
    if (last instanceof HeightMapText)
      return last;
    let line = new HeightMapText(0, -1, 0);
    this.nodes.push(line);
    return line;
  }
  addBlock(block) {
    this.enterLine();
    let deco = block.deco;
    if (deco && deco.startSide > 0 && !this.isCovered)
      this.ensureLine();
    this.nodes.push(block);
    this.writtenTo = this.pos = this.pos + block.length;
    if (deco && deco.endSide > 0)
      this.covering = block;
  }
  addLineDeco(height, breaks, length) {
    let line = this.ensureLine();
    line.length += length;
    line.collapsed += length;
    line.widgetHeight = Math.max(line.widgetHeight, height);
    line.breaks += breaks;
    this.writtenTo = this.pos = this.pos + length;
  }
  finish(from) {
    let last = this.nodes.length == 0 ? null : this.nodes[this.nodes.length - 1];
    if (this.lineStart > -1 && !(last instanceof HeightMapText) && !this.isCovered)
      this.nodes.push(new HeightMapText(0, -1, 0));
    else if (this.writtenTo < this.pos || last == null)
      this.nodes.push(this.blankContent(this.writtenTo, this.pos));
    let pos = from;
    for (let node of this.nodes) {
      if (node instanceof HeightMapText)
        node.updateHeight(this.oracle, pos);
      pos += node ? node.length : 1;
    }
    return this.nodes;
  }
  static build(oracle, decorations2, from, to) {
    let builder = new NodeBuilder(from, oracle);
    RangeSet.spans(decorations2, from, to, builder, 0);
    return builder.finish(from);
  }
}
function heightRelevantDecoChanges(a, b, diff) {
  let comp = new DecorationComparator2;
  RangeSet.compare(a, b, diff, comp, 0);
  return comp.changes;
}

class DecorationComparator2 {
  constructor() {
    this.changes = [];
  }
  compareRange() {}
  comparePoint(from, to, a, b) {
    if (from < to || a && a.heightRelevant || b && b.heightRelevant)
      addRange(from, to, this.changes, 5);
  }
}
function visiblePixelRange(dom, paddingTop) {
  let rect = dom.getBoundingClientRect();
  let doc2 = dom.ownerDocument, win = doc2.defaultView || window;
  let left = Math.max(0, rect.left), right = Math.min(win.innerWidth, rect.right);
  let top2 = Math.max(0, rect.top), bottom = Math.min(win.innerHeight, rect.bottom);
  for (let parent = dom.parentNode;parent && parent != doc2.body; ) {
    if (parent.nodeType == 1) {
      let elt = parent;
      let style = window.getComputedStyle(elt);
      if ((elt.scrollHeight > elt.clientHeight || elt.scrollWidth > elt.clientWidth) && style.overflow != "visible") {
        let parentRect = elt.getBoundingClientRect();
        left = Math.max(left, parentRect.left);
        right = Math.min(right, parentRect.right);
        top2 = Math.max(top2, parentRect.top);
        bottom = Math.min(parent == dom.parentNode ? win.innerHeight : bottom, parentRect.bottom);
      }
      parent = style.position == "absolute" || style.position == "fixed" ? elt.offsetParent : elt.parentNode;
    } else if (parent.nodeType == 11) {
      parent = parent.host;
    } else {
      break;
    }
  }
  return {
    left: left - rect.left,
    right: Math.max(left, right) - rect.left,
    top: top2 - (rect.top + paddingTop),
    bottom: Math.max(top2, bottom) - (rect.top + paddingTop)
  };
}
function inWindow(elt) {
  let rect = elt.getBoundingClientRect(), win = elt.ownerDocument.defaultView || window;
  return rect.left < win.innerWidth && rect.right > 0 && rect.top < win.innerHeight && rect.bottom > 0;
}
function fullPixelRange(dom, paddingTop) {
  let rect = dom.getBoundingClientRect();
  return {
    left: 0,
    right: rect.right - rect.left,
    top: paddingTop,
    bottom: rect.bottom - (rect.top + paddingTop)
  };
}

class LineGap {
  constructor(from, to, size, displaySize) {
    this.from = from;
    this.to = to;
    this.size = size;
    this.displaySize = displaySize;
  }
  static same(a, b) {
    if (a.length != b.length)
      return false;
    for (let i2 = 0;i2 < a.length; i2++) {
      let gA = a[i2], gB = b[i2];
      if (gA.from != gB.from || gA.to != gB.to || gA.size != gB.size)
        return false;
    }
    return true;
  }
  draw(viewState, wrapping) {
    return Decoration.replace({
      widget: new LineGapWidget(this.displaySize * (wrapping ? viewState.scaleY : viewState.scaleX), wrapping)
    }).range(this.from, this.to);
  }
}

class LineGapWidget extends WidgetType {
  constructor(size, vertical) {
    super();
    this.size = size;
    this.vertical = vertical;
  }
  eq(other) {
    return other.size == this.size && other.vertical == this.vertical;
  }
  toDOM() {
    let elt = document.createElement("div");
    if (this.vertical) {
      elt.style.height = this.size + "px";
    } else {
      elt.style.width = this.size + "px";
      elt.style.height = "2px";
      elt.style.display = "inline-block";
    }
    return elt;
  }
  get estimatedHeight() {
    return this.vertical ? this.size : -1;
  }
}

class ViewState {
  constructor(state) {
    this.state = state;
    this.pixelViewport = { left: 0, right: window.innerWidth, top: 0, bottom: 0 };
    this.inView = true;
    this.paddingTop = 0;
    this.paddingBottom = 0;
    this.contentDOMWidth = 0;
    this.contentDOMHeight = 0;
    this.editorHeight = 0;
    this.editorWidth = 0;
    this.scrollTop = 0;
    this.scrolledToBottom = false;
    this.scaleX = 1;
    this.scaleY = 1;
    this.scrollAnchorPos = 0;
    this.scrollAnchorHeight = -1;
    this.scaler = IdScaler;
    this.scrollTarget = null;
    this.printing = false;
    this.mustMeasureContent = true;
    this.defaultTextDirection = Direction.LTR;
    this.visibleRanges = [];
    this.mustEnforceCursorAssoc = false;
    let guessWrapping = state.facet(contentAttributes).some((v) => typeof v != "function" && v.class == "cm-lineWrapping");
    this.heightOracle = new HeightOracle(guessWrapping);
    this.stateDeco = state.facet(decorations).filter((d) => typeof d != "function");
    this.heightMap = HeightMap.empty().applyChanges(this.stateDeco, Text.empty, this.heightOracle.setDoc(state.doc), [new ChangedRange(0, 0, 0, state.doc.length)]);
    for (let i2 = 0;i2 < 2; i2++) {
      this.viewport = this.getViewport(0, null);
      if (!this.updateForViewport())
        break;
    }
    this.updateViewportLines();
    this.lineGaps = this.ensureLineGaps([]);
    this.lineGapDeco = Decoration.set(this.lineGaps.map((gap) => gap.draw(this, false)));
    this.computeVisibleRanges();
  }
  updateForViewport() {
    let viewports = [this.viewport], { main } = this.state.selection;
    for (let i2 = 0;i2 <= 1; i2++) {
      let pos = i2 ? main.head : main.anchor;
      if (!viewports.some(({ from, to }) => pos >= from && pos <= to)) {
        let { from, to } = this.lineBlockAt(pos);
        viewports.push(new Viewport(from, to));
      }
    }
    this.viewports = viewports.sort((a, b) => a.from - b.from);
    return this.updateScaler();
  }
  updateScaler() {
    let scaler = this.scaler;
    this.scaler = this.heightMap.height <= 7000000 ? IdScaler : new BigScaler(this.heightOracle, this.heightMap, this.viewports);
    return scaler.eq(this.scaler) ? 0 : 2;
  }
  updateViewportLines() {
    this.viewportLines = [];
    this.heightMap.forEachLine(this.viewport.from, this.viewport.to, this.heightOracle.setDoc(this.state.doc), 0, 0, (block) => {
      this.viewportLines.push(scaleBlock(block, this.scaler));
    });
  }
  update(update, scrollTarget = null) {
    this.state = update.state;
    let prevDeco = this.stateDeco;
    this.stateDeco = this.state.facet(decorations).filter((d) => typeof d != "function");
    let contentChanges = update.changedRanges;
    let heightChanges = ChangedRange.extendWithRanges(contentChanges, heightRelevantDecoChanges(prevDeco, this.stateDeco, update ? update.changes : ChangeSet.empty(this.state.doc.length)));
    let prevHeight = this.heightMap.height;
    let scrollAnchor = this.scrolledToBottom ? null : this.scrollAnchorAt(this.scrollTop);
    clearHeightChangeFlag();
    this.heightMap = this.heightMap.applyChanges(this.stateDeco, update.startState.doc, this.heightOracle.setDoc(this.state.doc), heightChanges);
    if (this.heightMap.height != prevHeight || heightChangeFlag)
      update.flags |= 2;
    if (scrollAnchor) {
      this.scrollAnchorPos = update.changes.mapPos(scrollAnchor.from, -1);
      this.scrollAnchorHeight = scrollAnchor.top;
    } else {
      this.scrollAnchorPos = -1;
      this.scrollAnchorHeight = prevHeight;
    }
    let viewport = heightChanges.length ? this.mapViewport(this.viewport, update.changes) : this.viewport;
    if (scrollTarget && (scrollTarget.range.head < viewport.from || scrollTarget.range.head > viewport.to) || !this.viewportIsAppropriate(viewport))
      viewport = this.getViewport(0, scrollTarget);
    let viewportChange = viewport.from != this.viewport.from || viewport.to != this.viewport.to;
    this.viewport = viewport;
    update.flags |= this.updateForViewport();
    if (viewportChange || !update.changes.empty || update.flags & 2)
      this.updateViewportLines();
    if (this.lineGaps.length || this.viewport.to - this.viewport.from > 2000 << 1)
      this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps, update.changes)));
    update.flags |= this.computeVisibleRanges(update.changes);
    if (scrollTarget)
      this.scrollTarget = scrollTarget;
    if (!this.mustEnforceCursorAssoc && update.selectionSet && update.view.lineWrapping && update.state.selection.main.empty && update.state.selection.main.assoc && !update.state.facet(nativeSelectionHidden))
      this.mustEnforceCursorAssoc = true;
  }
  measure(view) {
    let dom = view.contentDOM, style = window.getComputedStyle(dom);
    let oracle = this.heightOracle;
    let whiteSpace = style.whiteSpace;
    this.defaultTextDirection = style.direction == "rtl" ? Direction.RTL : Direction.LTR;
    let refresh = this.heightOracle.mustRefreshForWrapping(whiteSpace);
    let domRect = dom.getBoundingClientRect();
    let measureContent = refresh || this.mustMeasureContent || this.contentDOMHeight != domRect.height;
    this.contentDOMHeight = domRect.height;
    this.mustMeasureContent = false;
    let result = 0, bias = 0;
    if (domRect.width && domRect.height) {
      let { scaleX, scaleY } = getScale(dom, domRect);
      if (scaleX > 0.005 && Math.abs(this.scaleX - scaleX) > 0.005 || scaleY > 0.005 && Math.abs(this.scaleY - scaleY) > 0.005) {
        this.scaleX = scaleX;
        this.scaleY = scaleY;
        result |= 16;
        refresh = measureContent = true;
      }
    }
    let paddingTop = (parseInt(style.paddingTop) || 0) * this.scaleY;
    let paddingBottom = (parseInt(style.paddingBottom) || 0) * this.scaleY;
    if (this.paddingTop != paddingTop || this.paddingBottom != paddingBottom) {
      this.paddingTop = paddingTop;
      this.paddingBottom = paddingBottom;
      result |= 16 | 2;
    }
    if (this.editorWidth != view.scrollDOM.clientWidth) {
      if (oracle.lineWrapping)
        measureContent = true;
      this.editorWidth = view.scrollDOM.clientWidth;
      result |= 16;
    }
    let scrollTop = view.scrollDOM.scrollTop * this.scaleY;
    if (this.scrollTop != scrollTop) {
      this.scrollAnchorHeight = -1;
      this.scrollTop = scrollTop;
    }
    this.scrolledToBottom = isScrolledToBottom(view.scrollDOM);
    let pixelViewport = (this.printing ? fullPixelRange : visiblePixelRange)(dom, this.paddingTop);
    let dTop = pixelViewport.top - this.pixelViewport.top, dBottom = pixelViewport.bottom - this.pixelViewport.bottom;
    this.pixelViewport = pixelViewport;
    let inView = this.pixelViewport.bottom > this.pixelViewport.top && this.pixelViewport.right > this.pixelViewport.left;
    if (inView != this.inView) {
      this.inView = inView;
      if (inView)
        measureContent = true;
    }
    if (!this.inView && !this.scrollTarget && !inWindow(view.dom))
      return 0;
    let contentWidth = domRect.width;
    if (this.contentDOMWidth != contentWidth || this.editorHeight != view.scrollDOM.clientHeight) {
      this.contentDOMWidth = domRect.width;
      this.editorHeight = view.scrollDOM.clientHeight;
      result |= 16;
    }
    if (measureContent) {
      let lineHeights = view.docView.measureVisibleLineHeights(this.viewport);
      if (oracle.mustRefreshForHeights(lineHeights))
        refresh = true;
      if (refresh || oracle.lineWrapping && Math.abs(contentWidth - this.contentDOMWidth) > oracle.charWidth) {
        let { lineHeight, charWidth, textHeight } = view.docView.measureTextSize();
        refresh = lineHeight > 0 && oracle.refresh(whiteSpace, lineHeight, charWidth, textHeight, Math.max(5, contentWidth / charWidth), lineHeights);
        if (refresh) {
          view.docView.minWidth = 0;
          result |= 16;
        }
      }
      if (dTop > 0 && dBottom > 0)
        bias = Math.max(dTop, dBottom);
      else if (dTop < 0 && dBottom < 0)
        bias = Math.min(dTop, dBottom);
      clearHeightChangeFlag();
      for (let vp of this.viewports) {
        let heights = vp.from == this.viewport.from ? lineHeights : view.docView.measureVisibleLineHeights(vp);
        this.heightMap = (refresh ? HeightMap.empty().applyChanges(this.stateDeco, Text.empty, this.heightOracle, [new ChangedRange(0, 0, 0, view.state.doc.length)]) : this.heightMap).updateHeight(oracle, 0, refresh, new MeasuredHeights(vp.from, heights));
      }
      if (heightChangeFlag)
        result |= 2;
    }
    let viewportChange = !this.viewportIsAppropriate(this.viewport, bias) || this.scrollTarget && (this.scrollTarget.range.head < this.viewport.from || this.scrollTarget.range.head > this.viewport.to);
    if (viewportChange) {
      if (result & 2)
        result |= this.updateScaler();
      this.viewport = this.getViewport(bias, this.scrollTarget);
      result |= this.updateForViewport();
    }
    if (result & 2 || viewportChange)
      this.updateViewportLines();
    if (this.lineGaps.length || this.viewport.to - this.viewport.from > 2000 << 1)
      this.updateLineGaps(this.ensureLineGaps(refresh ? [] : this.lineGaps, view));
    result |= this.computeVisibleRanges();
    if (this.mustEnforceCursorAssoc) {
      this.mustEnforceCursorAssoc = false;
      view.docView.enforceCursorAssoc();
    }
    return result;
  }
  get visibleTop() {
    return this.scaler.fromDOM(this.pixelViewport.top);
  }
  get visibleBottom() {
    return this.scaler.fromDOM(this.pixelViewport.bottom);
  }
  getViewport(bias, scrollTarget) {
    let marginTop = 0.5 - Math.max(-0.5, Math.min(0.5, bias / 1000 / 2));
    let map = this.heightMap, oracle = this.heightOracle;
    let { visibleTop, visibleBottom } = this;
    let viewport = new Viewport(map.lineAt(visibleTop - marginTop * 1000, QueryType.ByHeight, oracle, 0, 0).from, map.lineAt(visibleBottom + (1 - marginTop) * 1000, QueryType.ByHeight, oracle, 0, 0).to);
    if (scrollTarget) {
      let { head } = scrollTarget.range;
      if (head < viewport.from || head > viewport.to) {
        let viewHeight = Math.min(this.editorHeight, this.pixelViewport.bottom - this.pixelViewport.top);
        let block = map.lineAt(head, QueryType.ByPos, oracle, 0, 0), topPos;
        if (scrollTarget.y == "center")
          topPos = (block.top + block.bottom) / 2 - viewHeight / 2;
        else if (scrollTarget.y == "start" || scrollTarget.y == "nearest" && head < viewport.from)
          topPos = block.top;
        else
          topPos = block.bottom - viewHeight;
        viewport = new Viewport(map.lineAt(topPos - 1000 / 2, QueryType.ByHeight, oracle, 0, 0).from, map.lineAt(topPos + viewHeight + 1000 / 2, QueryType.ByHeight, oracle, 0, 0).to);
      }
    }
    return viewport;
  }
  mapViewport(viewport, changes) {
    let from = changes.mapPos(viewport.from, -1), to = changes.mapPos(viewport.to, 1);
    return new Viewport(this.heightMap.lineAt(from, QueryType.ByPos, this.heightOracle, 0, 0).from, this.heightMap.lineAt(to, QueryType.ByPos, this.heightOracle, 0, 0).to);
  }
  viewportIsAppropriate({ from, to }, bias = 0) {
    if (!this.inView)
      return true;
    let { top: top2 } = this.heightMap.lineAt(from, QueryType.ByPos, this.heightOracle, 0, 0);
    let { bottom } = this.heightMap.lineAt(to, QueryType.ByPos, this.heightOracle, 0, 0);
    let { visibleTop, visibleBottom } = this;
    return (from == 0 || top2 <= visibleTop - Math.max(10, Math.min(-bias, 250))) && (to == this.state.doc.length || bottom >= visibleBottom + Math.max(10, Math.min(bias, 250))) && (top2 > visibleTop - 2 * 1000 && bottom < visibleBottom + 2 * 1000);
  }
  mapLineGaps(gaps, changes) {
    if (!gaps.length || changes.empty)
      return gaps;
    let mapped = [];
    for (let gap of gaps)
      if (!changes.touchesRange(gap.from, gap.to))
        mapped.push(new LineGap(changes.mapPos(gap.from), changes.mapPos(gap.to), gap.size, gap.displaySize));
    return mapped;
  }
  ensureLineGaps(current, mayMeasure) {
    let wrapping = this.heightOracle.lineWrapping;
    let margin = wrapping ? 1e4 : 2000, halfMargin = margin >> 1, doubleMargin = margin << 1;
    if (this.defaultTextDirection != Direction.LTR && !wrapping)
      return [];
    let gaps = [];
    let addGap = (from, to, line, structure) => {
      if (to - from < halfMargin)
        return;
      let sel = this.state.selection.main, avoid = [sel.from];
      if (!sel.empty)
        avoid.push(sel.to);
      for (let pos of avoid) {
        if (pos > from && pos < to) {
          addGap(from, pos - 10, line, structure);
          addGap(pos + 10, to, line, structure);
          return;
        }
      }
      let gap = find(current, (gap2) => gap2.from >= line.from && gap2.to <= line.to && Math.abs(gap2.from - from) < halfMargin && Math.abs(gap2.to - to) < halfMargin && !avoid.some((pos) => gap2.from < pos && gap2.to > pos));
      if (!gap) {
        if (to < line.to && mayMeasure && wrapping && mayMeasure.visibleRanges.some((r) => r.from <= to && r.to >= to)) {
          let lineStart = mayMeasure.moveToLineBoundary(EditorSelection.cursor(to), false, true).head;
          if (lineStart > from)
            to = lineStart;
        }
        let size = this.gapSize(line, from, to, structure);
        let displaySize = wrapping || size < 2000000 ? size : 2000000;
        gap = new LineGap(from, to, size, displaySize);
      }
      gaps.push(gap);
    };
    let checkLine = (line) => {
      if (line.length < doubleMargin || line.type != BlockType.Text)
        return;
      let structure = lineStructure(line.from, line.to, this.stateDeco);
      if (structure.total < doubleMargin)
        return;
      let target = this.scrollTarget ? this.scrollTarget.range.head : null;
      let viewFrom, viewTo;
      if (wrapping) {
        let marginHeight = margin / this.heightOracle.lineLength * this.heightOracle.lineHeight;
        let top2, bot;
        if (target != null) {
          let targetFrac = findFraction(structure, target);
          let spaceFrac = ((this.visibleBottom - this.visibleTop) / 2 + marginHeight) / line.height;
          top2 = targetFrac - spaceFrac;
          bot = targetFrac + spaceFrac;
        } else {
          top2 = (this.visibleTop - line.top - marginHeight) / line.height;
          bot = (this.visibleBottom - line.top + marginHeight) / line.height;
        }
        viewFrom = findPosition(structure, top2);
        viewTo = findPosition(structure, bot);
      } else {
        let totalWidth = structure.total * this.heightOracle.charWidth;
        let marginWidth = margin * this.heightOracle.charWidth;
        let horizOffset = 0;
        if (totalWidth > 2000000)
          for (let old of current) {
            if (old.from >= line.from && old.from < line.to && old.size != old.displaySize && old.from * this.heightOracle.charWidth + horizOffset < this.pixelViewport.left)
              horizOffset = old.size - old.displaySize;
          }
        let pxLeft = this.pixelViewport.left + horizOffset, pxRight = this.pixelViewport.right + horizOffset;
        let left, right;
        if (target != null) {
          let targetFrac = findFraction(structure, target);
          let spaceFrac = ((pxRight - pxLeft) / 2 + marginWidth) / totalWidth;
          left = targetFrac - spaceFrac;
          right = targetFrac + spaceFrac;
        } else {
          left = (pxLeft - marginWidth) / totalWidth;
          right = (pxRight + marginWidth) / totalWidth;
        }
        viewFrom = findPosition(structure, left);
        viewTo = findPosition(structure, right);
      }
      if (viewFrom > line.from)
        addGap(line.from, viewFrom, line, structure);
      if (viewTo < line.to)
        addGap(viewTo, line.to, line, structure);
    };
    for (let line of this.viewportLines) {
      if (Array.isArray(line.type))
        line.type.forEach(checkLine);
      else
        checkLine(line);
    }
    return gaps;
  }
  gapSize(line, from, to, structure) {
    let fraction = findFraction(structure, to) - findFraction(structure, from);
    if (this.heightOracle.lineWrapping) {
      return line.height * fraction;
    } else {
      return structure.total * this.heightOracle.charWidth * fraction;
    }
  }
  updateLineGaps(gaps) {
    if (!LineGap.same(gaps, this.lineGaps)) {
      this.lineGaps = gaps;
      this.lineGapDeco = Decoration.set(gaps.map((gap) => gap.draw(this, this.heightOracle.lineWrapping)));
    }
  }
  computeVisibleRanges(changes) {
    let deco = this.stateDeco;
    if (this.lineGaps.length)
      deco = deco.concat(this.lineGapDeco);
    let ranges = [];
    RangeSet.spans(deco, this.viewport.from, this.viewport.to, {
      span(from, to) {
        ranges.push({ from, to });
      },
      point() {}
    }, 20);
    let changed = 0;
    if (ranges.length != this.visibleRanges.length) {
      changed = 8 | 4;
    } else {
      for (let i2 = 0;i2 < ranges.length && !(changed & 8); i2++) {
        let old = this.visibleRanges[i2], nw = ranges[i2];
        if (old.from != nw.from || old.to != nw.to) {
          changed |= 4;
          if (!(changes && changes.mapPos(old.from, -1) == nw.from && changes.mapPos(old.to, 1) == nw.to))
            changed |= 8;
        }
      }
    }
    this.visibleRanges = ranges;
    return changed;
  }
  lineBlockAt(pos) {
    return pos >= this.viewport.from && pos <= this.viewport.to && this.viewportLines.find((b) => b.from <= pos && b.to >= pos) || scaleBlock(this.heightMap.lineAt(pos, QueryType.ByPos, this.heightOracle, 0, 0), this.scaler);
  }
  lineBlockAtHeight(height) {
    return height >= this.viewportLines[0].top && height <= this.viewportLines[this.viewportLines.length - 1].bottom && this.viewportLines.find((l) => l.top <= height && l.bottom >= height) || scaleBlock(this.heightMap.lineAt(this.scaler.fromDOM(height), QueryType.ByHeight, this.heightOracle, 0, 0), this.scaler);
  }
  scrollAnchorAt(scrollTop) {
    let block = this.lineBlockAtHeight(scrollTop + 8);
    return block.from >= this.viewport.from || this.viewportLines[0].top - scrollTop > 200 ? block : this.viewportLines[0];
  }
  elementAtHeight(height) {
    return scaleBlock(this.heightMap.blockAt(this.scaler.fromDOM(height), this.heightOracle, 0, 0), this.scaler);
  }
  get docHeight() {
    return this.scaler.toDOM(this.heightMap.height);
  }
  get contentHeight() {
    return this.docHeight + this.paddingTop + this.paddingBottom;
  }
}

class Viewport {
  constructor(from, to) {
    this.from = from;
    this.to = to;
  }
}
function lineStructure(from, to, stateDeco) {
  let ranges = [], pos = from, total = 0;
  RangeSet.spans(stateDeco, from, to, {
    span() {},
    point(from2, to2) {
      if (from2 > pos) {
        ranges.push({ from: pos, to: from2 });
        total += from2 - pos;
      }
      pos = to2;
    }
  }, 20);
  if (pos < to) {
    ranges.push({ from: pos, to });
    total += to - pos;
  }
  return { total, ranges };
}
function findPosition({ total, ranges }, ratio) {
  if (ratio <= 0)
    return ranges[0].from;
  if (ratio >= 1)
    return ranges[ranges.length - 1].to;
  let dist2 = Math.floor(total * ratio);
  for (let i2 = 0;; i2++) {
    let { from, to } = ranges[i2], size = to - from;
    if (dist2 <= size)
      return from + dist2;
    dist2 -= size;
  }
}
function findFraction(structure, pos) {
  let counted = 0;
  for (let { from, to } of structure.ranges) {
    if (pos <= to) {
      counted += pos - from;
      break;
    }
    counted += to - from;
  }
  return counted / structure.total;
}
function find(array, f) {
  for (let val of array)
    if (f(val))
      return val;
  return;
}
var IdScaler = {
  toDOM(n) {
    return n;
  },
  fromDOM(n) {
    return n;
  },
  scale: 1,
  eq(other) {
    return other == this;
  }
};

class BigScaler {
  constructor(oracle, heightMap, viewports) {
    let vpHeight = 0, base2 = 0, domBase = 0;
    this.viewports = viewports.map(({ from, to }) => {
      let top2 = heightMap.lineAt(from, QueryType.ByPos, oracle, 0, 0).top;
      let bottom = heightMap.lineAt(to, QueryType.ByPos, oracle, 0, 0).bottom;
      vpHeight += bottom - top2;
      return { from, to, top: top2, bottom, domTop: 0, domBottom: 0 };
    });
    this.scale = (7000000 - vpHeight) / (heightMap.height - vpHeight);
    for (let obj of this.viewports) {
      obj.domTop = domBase + (obj.top - base2) * this.scale;
      domBase = obj.domBottom = obj.domTop + (obj.bottom - obj.top);
      base2 = obj.bottom;
    }
  }
  toDOM(n) {
    for (let i2 = 0, base2 = 0, domBase = 0;; i2++) {
      let vp = i2 < this.viewports.length ? this.viewports[i2] : null;
      if (!vp || n < vp.top)
        return domBase + (n - base2) * this.scale;
      if (n <= vp.bottom)
        return vp.domTop + (n - vp.top);
      base2 = vp.bottom;
      domBase = vp.domBottom;
    }
  }
  fromDOM(n) {
    for (let i2 = 0, base2 = 0, domBase = 0;; i2++) {
      let vp = i2 < this.viewports.length ? this.viewports[i2] : null;
      if (!vp || n < vp.domTop)
        return base2 + (n - domBase) / this.scale;
      if (n <= vp.domBottom)
        return vp.top + (n - vp.domTop);
      base2 = vp.bottom;
      domBase = vp.domBottom;
    }
  }
  eq(other) {
    if (!(other instanceof BigScaler))
      return false;
    return this.scale == other.scale && this.viewports.length == other.viewports.length && this.viewports.every((vp, i2) => vp.from == other.viewports[i2].from && vp.to == other.viewports[i2].to);
  }
}
function scaleBlock(block, scaler) {
  if (scaler.scale == 1)
    return block;
  let bTop = scaler.toDOM(block.top), bBottom = scaler.toDOM(block.bottom);
  return new BlockInfo(block.from, block.length, bTop, bBottom - bTop, Array.isArray(block._content) ? block._content.map((b) => scaleBlock(b, scaler)) : block._content);
}
var theme = /* @__PURE__ */ Facet.define({ combine: (strs) => strs.join(" ") });
var darkTheme = /* @__PURE__ */ Facet.define({ combine: (values) => values.indexOf(true) > -1 });
var baseThemeID = /* @__PURE__ */ StyleModule.newName();
var baseLightID = /* @__PURE__ */ StyleModule.newName();
var baseDarkID = /* @__PURE__ */ StyleModule.newName();
var lightDarkIDs = { "&light": "." + baseLightID, "&dark": "." + baseDarkID };
function buildTheme(main, spec, scopes) {
  return new StyleModule(spec, {
    finish(sel) {
      return /&/.test(sel) ? sel.replace(/&\w*/, (m) => {
        if (m == "&")
          return main;
        if (!scopes || !scopes[m])
          throw new RangeError(`Unsupported selector: ${m}`);
        return scopes[m];
      }) : main + " " + sel;
    }
  });
}
var baseTheme$1 = /* @__PURE__ */ buildTheme("." + baseThemeID, {
  "&": {
    position: "relative !important",
    boxSizing: "border-box",
    "&.cm-focused": {
      outline: "1px dotted #212121"
    },
    display: "flex !important",
    flexDirection: "column"
  },
  ".cm-scroller": {
    display: "flex !important",
    alignItems: "flex-start !important",
    fontFamily: "monospace",
    lineHeight: 1.4,
    height: "100%",
    overflowX: "auto",
    position: "relative",
    zIndex: 0,
    overflowAnchor: "none"
  },
  ".cm-content": {
    margin: 0,
    flexGrow: 2,
    flexShrink: 0,
    display: "block",
    whiteSpace: "pre",
    wordWrap: "normal",
    boxSizing: "border-box",
    minHeight: "100%",
    padding: "4px 0",
    outline: "none",
    "&[contenteditable=true]": {
      WebkitUserModify: "read-write-plaintext-only"
    }
  },
  ".cm-lineWrapping": {
    whiteSpace_fallback: "pre-wrap",
    whiteSpace: "break-spaces",
    wordBreak: "break-word",
    overflowWrap: "anywhere",
    flexShrink: 1
  },
  "&light .cm-content": { caretColor: "black" },
  "&dark .cm-content": { caretColor: "white" },
  ".cm-line": {
    display: "block",
    padding: "0 2px 0 6px"
  },
  ".cm-layer": {
    position: "absolute",
    left: 0,
    top: 0,
    contain: "size style",
    "& > *": {
      position: "absolute"
    }
  },
  "&light .cm-selectionBackground": {
    background: "#d9d9d9"
  },
  "&dark .cm-selectionBackground": {
    background: "#222"
  },
  "&light.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground": {
    background: "#d7d4f0"
  },
  "&dark.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground": {
    background: "#233"
  },
  ".cm-cursorLayer": {
    pointerEvents: "none"
  },
  "&.cm-focused > .cm-scroller > .cm-cursorLayer": {
    animation: "steps(1) cm-blink 1.2s infinite"
  },
  "@keyframes cm-blink": { "0%": {}, "50%": { opacity: 0 }, "100%": {} },
  "@keyframes cm-blink2": { "0%": {}, "50%": { opacity: 0 }, "100%": {} },
  ".cm-cursor, .cm-dropCursor": {
    borderLeft: "1.2px solid black",
    marginLeft: "-0.6px",
    pointerEvents: "none"
  },
  ".cm-cursor": {
    display: "none"
  },
  "&dark .cm-cursor": {
    borderLeftColor: "#ddd"
  },
  ".cm-dropCursor": {
    position: "absolute"
  },
  "&.cm-focused > .cm-scroller > .cm-cursorLayer .cm-cursor": {
    display: "block"
  },
  ".cm-iso": {
    unicodeBidi: "isolate"
  },
  ".cm-announced": {
    position: "fixed",
    top: "-10000px"
  },
  "@media print": {
    ".cm-announced": { display: "none" }
  },
  "&light .cm-activeLine": { backgroundColor: "#cceeff44" },
  "&dark .cm-activeLine": { backgroundColor: "#99eeff33" },
  "&light .cm-specialChar": { color: "red" },
  "&dark .cm-specialChar": { color: "#f78" },
  ".cm-gutters": {
    flexShrink: 0,
    display: "flex",
    height: "100%",
    boxSizing: "border-box",
    zIndex: 200
  },
  ".cm-gutters-before": { insetInlineStart: 0 },
  ".cm-gutters-after": { insetInlineEnd: 0 },
  "&light .cm-gutters": {
    backgroundColor: "#f5f5f5",
    color: "#6c6c6c",
    border: "0px solid #ddd",
    "&.cm-gutters-before": { borderRightWidth: "1px" },
    "&.cm-gutters-after": { borderLeftWidth: "1px" }
  },
  "&dark .cm-gutters": {
    backgroundColor: "#333338",
    color: "#ccc"
  },
  ".cm-gutter": {
    display: "flex !important",
    flexDirection: "column",
    flexShrink: 0,
    boxSizing: "border-box",
    minHeight: "100%",
    overflow: "hidden"
  },
  ".cm-gutterElement": {
    boxSizing: "border-box"
  },
  ".cm-lineNumbers .cm-gutterElement": {
    padding: "0 3px 0 5px",
    minWidth: "20px",
    textAlign: "right",
    whiteSpace: "nowrap"
  },
  "&light .cm-activeLineGutter": {
    backgroundColor: "#e2f2ff"
  },
  "&dark .cm-activeLineGutter": {
    backgroundColor: "#222227"
  },
  ".cm-panels": {
    boxSizing: "border-box",
    position: "sticky",
    left: 0,
    right: 0,
    zIndex: 300
  },
  "&light .cm-panels": {
    backgroundColor: "#f5f5f5",
    color: "black"
  },
  "&light .cm-panels-top": {
    borderBottom: "1px solid #ddd"
  },
  "&light .cm-panels-bottom": {
    borderTop: "1px solid #ddd"
  },
  "&dark .cm-panels": {
    backgroundColor: "#333338",
    color: "white"
  },
  ".cm-dialog": {
    padding: "2px 19px 4px 6px",
    position: "relative",
    "& label": { fontSize: "80%" }
  },
  ".cm-dialog-close": {
    position: "absolute",
    top: "3px",
    right: "4px",
    backgroundColor: "inherit",
    border: "none",
    font: "inherit",
    fontSize: "14px",
    padding: "0"
  },
  ".cm-tab": {
    display: "inline-block",
    overflow: "hidden",
    verticalAlign: "bottom"
  },
  ".cm-widgetBuffer": {
    verticalAlign: "text-top",
    height: "1em",
    width: 0,
    display: "inline"
  },
  ".cm-placeholder": {
    color: "#888",
    display: "inline-block",
    verticalAlign: "top",
    userSelect: "none"
  },
  ".cm-highlightSpace": {
    backgroundImage: "radial-gradient(circle at 50% 55%, #aaa 20%, transparent 5%)",
    backgroundPosition: "center"
  },
  ".cm-highlightTab": {
    backgroundImage: `url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>')`,
    backgroundSize: "auto 100%",
    backgroundPosition: "right 90%",
    backgroundRepeat: "no-repeat"
  },
  ".cm-trailingSpace": {
    backgroundColor: "#ff332255"
  },
  ".cm-button": {
    verticalAlign: "middle",
    color: "inherit",
    fontSize: "70%",
    padding: ".2em 1em",
    borderRadius: "1px"
  },
  "&light .cm-button": {
    backgroundImage: "linear-gradient(#eff1f5, #d9d9df)",
    border: "1px solid #888",
    "&:active": {
      backgroundImage: "linear-gradient(#b4b4b4, #d0d3d6)"
    }
  },
  "&dark .cm-button": {
    backgroundImage: "linear-gradient(#393939, #111)",
    border: "1px solid #888",
    "&:active": {
      backgroundImage: "linear-gradient(#111, #333)"
    }
  },
  ".cm-textfield": {
    verticalAlign: "middle",
    color: "inherit",
    fontSize: "70%",
    border: "1px solid silver",
    padding: ".2em .5em"
  },
  "&light .cm-textfield": {
    backgroundColor: "white"
  },
  "&dark .cm-textfield": {
    border: "1px solid #555",
    backgroundColor: "inherit"
  }
}, lightDarkIDs);
var observeOptions = {
  childList: true,
  characterData: true,
  subtree: true,
  attributes: true,
  characterDataOldValue: true
};
var useCharData = browser.ie && browser.ie_version <= 11;

class DOMObserver {
  constructor(view) {
    this.view = view;
    this.active = false;
    this.editContext = null;
    this.selectionRange = new DOMSelectionState;
    this.selectionChanged = false;
    this.delayedFlush = -1;
    this.resizeTimeout = -1;
    this.queue = [];
    this.delayedAndroidKey = null;
    this.flushingAndroidKey = -1;
    this.lastChange = 0;
    this.scrollTargets = [];
    this.intersection = null;
    this.resizeScroll = null;
    this.intersecting = false;
    this.gapIntersection = null;
    this.gaps = [];
    this.printQuery = null;
    this.parentCheck = -1;
    this.dom = view.contentDOM;
    this.observer = new MutationObserver((mutations) => {
      for (let mut of mutations)
        this.queue.push(mut);
      if ((browser.ie && browser.ie_version <= 11 || browser.ios && view.composing) && mutations.some((m) => m.type == "childList" && m.removedNodes.length || m.type == "characterData" && m.oldValue.length > m.target.nodeValue.length))
        this.flushSoon();
      else
        this.flush();
    });
    if (window.EditContext && browser.android && view.constructor.EDIT_CONTEXT !== false && !(browser.chrome && browser.chrome_version < 126)) {
      this.editContext = new EditContextManager(view);
      if (view.state.facet(editable))
        view.contentDOM.editContext = this.editContext.editContext;
    }
    if (useCharData)
      this.onCharData = (event) => {
        this.queue.push({
          target: event.target,
          type: "characterData",
          oldValue: event.prevValue
        });
        this.flushSoon();
      };
    this.onSelectionChange = this.onSelectionChange.bind(this);
    this.onResize = this.onResize.bind(this);
    this.onPrint = this.onPrint.bind(this);
    this.onScroll = this.onScroll.bind(this);
    if (window.matchMedia)
      this.printQuery = window.matchMedia("print");
    if (typeof ResizeObserver == "function") {
      this.resizeScroll = new ResizeObserver(() => {
        var _a;
        if (((_a = this.view.docView) === null || _a === undefined ? undefined : _a.lastUpdate) < Date.now() - 75)
          this.onResize();
      });
      this.resizeScroll.observe(view.scrollDOM);
    }
    this.addWindowListeners(this.win = view.win);
    this.start();
    if (typeof IntersectionObserver == "function") {
      this.intersection = new IntersectionObserver((entries) => {
        if (this.parentCheck < 0)
          this.parentCheck = setTimeout(this.listenForScroll.bind(this), 1000);
        if (entries.length > 0 && entries[entries.length - 1].intersectionRatio > 0 != this.intersecting) {
          this.intersecting = !this.intersecting;
          if (this.intersecting != this.view.inView)
            this.onScrollChanged(document.createEvent("Event"));
        }
      }, { threshold: [0, 0.001] });
      this.intersection.observe(this.dom);
      this.gapIntersection = new IntersectionObserver((entries) => {
        if (entries.length > 0 && entries[entries.length - 1].intersectionRatio > 0)
          this.onScrollChanged(document.createEvent("Event"));
      }, {});
    }
    this.listenForScroll();
    this.readSelectionRange();
  }
  onScrollChanged(e) {
    this.view.inputState.runHandlers("scroll", e);
    if (this.intersecting)
      this.view.measure();
  }
  onScroll(e) {
    if (this.intersecting)
      this.flush(false);
    if (this.editContext)
      this.view.requestMeasure(this.editContext.measureReq);
    this.onScrollChanged(e);
  }
  onResize() {
    if (this.resizeTimeout < 0)
      this.resizeTimeout = setTimeout(() => {
        this.resizeTimeout = -1;
        this.view.requestMeasure();
      }, 50);
  }
  onPrint(event) {
    if ((event.type == "change" || !event.type) && !event.matches)
      return;
    this.view.viewState.printing = true;
    this.view.measure();
    setTimeout(() => {
      this.view.viewState.printing = false;
      this.view.requestMeasure();
    }, 500);
  }
  updateGaps(gaps) {
    if (this.gapIntersection && (gaps.length != this.gaps.length || this.gaps.some((g, i2) => g != gaps[i2]))) {
      this.gapIntersection.disconnect();
      for (let gap of gaps)
        this.gapIntersection.observe(gap);
      this.gaps = gaps;
    }
  }
  onSelectionChange(event) {
    let wasChanged = this.selectionChanged;
    if (!this.readSelectionRange() || this.delayedAndroidKey)
      return;
    let { view } = this, sel = this.selectionRange;
    if (view.state.facet(editable) ? view.root.activeElement != this.dom : !hasSelection(this.dom, sel))
      return;
    let context = sel.anchorNode && view.docView.tile.nearest(sel.anchorNode);
    if (context && context.isWidget() && context.widget.ignoreEvent(event)) {
      if (!wasChanged)
        this.selectionChanged = false;
      return;
    }
    if ((browser.ie && browser.ie_version <= 11 || browser.android && browser.chrome) && !view.state.selection.main.empty && sel.focusNode && isEquivalentPosition(sel.focusNode, sel.focusOffset, sel.anchorNode, sel.anchorOffset))
      this.flushSoon();
    else
      this.flush(false);
  }
  readSelectionRange() {
    let { view } = this;
    let selection = getSelection(view.root);
    if (!selection)
      return false;
    let range = browser.safari && view.root.nodeType == 11 && view.root.activeElement == this.dom && safariSelectionRangeHack(this.view, selection) || selection;
    if (!range || this.selectionRange.eq(range))
      return false;
    let local = hasSelection(this.dom, range);
    if (local && !this.selectionChanged && view.inputState.lastFocusTime > Date.now() - 200 && view.inputState.lastTouchTime < Date.now() - 300 && atElementStart(this.dom, range)) {
      this.view.inputState.lastFocusTime = 0;
      view.docView.updateSelection();
      return false;
    }
    this.selectionRange.setRange(range);
    if (local)
      this.selectionChanged = true;
    return true;
  }
  setSelectionRange(anchor, head) {
    this.selectionRange.set(anchor.node, anchor.offset, head.node, head.offset);
    this.selectionChanged = false;
  }
  clearSelectionRange() {
    this.selectionRange.set(null, 0, null, 0);
  }
  listenForScroll() {
    this.parentCheck = -1;
    let i2 = 0, changed = null;
    for (let dom = this.dom;dom; ) {
      if (dom.nodeType == 1) {
        if (!changed && i2 < this.scrollTargets.length && this.scrollTargets[i2] == dom)
          i2++;
        else if (!changed)
          changed = this.scrollTargets.slice(0, i2);
        if (changed)
          changed.push(dom);
        dom = dom.assignedSlot || dom.parentNode;
      } else if (dom.nodeType == 11) {
        dom = dom.host;
      } else {
        break;
      }
    }
    if (i2 < this.scrollTargets.length && !changed)
      changed = this.scrollTargets.slice(0, i2);
    if (changed) {
      for (let dom of this.scrollTargets)
        dom.removeEventListener("scroll", this.onScroll);
      for (let dom of this.scrollTargets = changed)
        dom.addEventListener("scroll", this.onScroll);
    }
  }
  ignore(f) {
    if (!this.active)
      return f();
    try {
      this.stop();
      return f();
    } finally {
      this.start();
      this.clear();
    }
  }
  start() {
    if (this.active)
      return;
    this.observer.observe(this.dom, observeOptions);
    if (useCharData)
      this.dom.addEventListener("DOMCharacterDataModified", this.onCharData);
    this.active = true;
  }
  stop() {
    if (!this.active)
      return;
    this.active = false;
    this.observer.disconnect();
    if (useCharData)
      this.dom.removeEventListener("DOMCharacterDataModified", this.onCharData);
  }
  clear() {
    this.processRecords();
    this.queue.length = 0;
    this.selectionChanged = false;
  }
  delayAndroidKey(key, keyCode) {
    var _a;
    if (!this.delayedAndroidKey) {
      let flush = () => {
        let key2 = this.delayedAndroidKey;
        if (key2) {
          this.clearDelayedAndroidKey();
          this.view.inputState.lastKeyCode = key2.keyCode;
          this.view.inputState.lastKeyTime = Date.now();
          let flushed = this.flush();
          if (!flushed && key2.force)
            dispatchKey(this.dom, key2.key, key2.keyCode);
        }
      };
      this.flushingAndroidKey = this.view.win.requestAnimationFrame(flush);
    }
    if (!this.delayedAndroidKey || key == "Enter")
      this.delayedAndroidKey = {
        key,
        keyCode,
        force: this.lastChange < Date.now() - 50 || !!((_a = this.delayedAndroidKey) === null || _a === undefined ? undefined : _a.force)
      };
  }
  clearDelayedAndroidKey() {
    this.win.cancelAnimationFrame(this.flushingAndroidKey);
    this.delayedAndroidKey = null;
    this.flushingAndroidKey = -1;
  }
  flushSoon() {
    if (this.delayedFlush < 0)
      this.delayedFlush = this.view.win.requestAnimationFrame(() => {
        this.delayedFlush = -1;
        this.flush();
      });
  }
  forceFlush() {
    if (this.delayedFlush >= 0) {
      this.view.win.cancelAnimationFrame(this.delayedFlush);
      this.delayedFlush = -1;
    }
    this.flush();
  }
  pendingRecords() {
    for (let mut of this.observer.takeRecords())
      this.queue.push(mut);
    return this.queue;
  }
  processRecords() {
    let records = this.pendingRecords();
    if (records.length)
      this.queue = [];
    let from = -1, to = -1, typeOver = false;
    for (let record of records) {
      let range = this.readMutation(record);
      if (!range)
        continue;
      if (range.typeOver)
        typeOver = true;
      if (from == -1) {
        ({ from, to } = range);
      } else {
        from = Math.min(range.from, from);
        to = Math.max(range.to, to);
      }
    }
    return { from, to, typeOver };
  }
  readChange() {
    let { from, to, typeOver } = this.processRecords();
    let newSel = this.selectionChanged && hasSelection(this.dom, this.selectionRange);
    if (from < 0 && !newSel)
      return null;
    if (from > -1)
      this.lastChange = Date.now();
    this.view.inputState.lastFocusTime = 0;
    this.selectionChanged = false;
    let change = new DOMChange(this.view, from, to, typeOver);
    this.view.docView.domChanged = { newSel: change.newSel ? change.newSel.main : null };
    return change;
  }
  flush(readSelection = true) {
    if (this.delayedFlush >= 0 || this.delayedAndroidKey)
      return false;
    if (readSelection)
      this.readSelectionRange();
    let domChange = this.readChange();
    if (!domChange) {
      this.view.requestMeasure();
      return false;
    }
    let startState = this.view.state;
    let handled = applyDOMChange(this.view, domChange);
    if (this.view.state == startState && (domChange.domChanged || domChange.newSel && !domChange.newSel.main.eq(this.view.state.selection.main)))
      this.view.update([]);
    return handled;
  }
  readMutation(rec) {
    let tile = this.view.docView.tile.nearest(rec.target);
    if (!tile || tile.isWidget())
      return null;
    tile.markDirty(rec.type == "attributes");
    if (rec.type == "childList") {
      let childBefore = findChild(tile, rec.previousSibling || rec.target.previousSibling, -1);
      let childAfter = findChild(tile, rec.nextSibling || rec.target.nextSibling, 1);
      return {
        from: childBefore ? tile.posAfter(childBefore) : tile.posAtStart,
        to: childAfter ? tile.posBefore(childAfter) : tile.posAtEnd,
        typeOver: false
      };
    } else if (rec.type == "characterData") {
      return { from: tile.posAtStart, to: tile.posAtEnd, typeOver: rec.target.nodeValue == rec.oldValue };
    } else {
      return null;
    }
  }
  setWindow(win) {
    if (win != this.win) {
      this.removeWindowListeners(this.win);
      this.win = win;
      this.addWindowListeners(this.win);
    }
  }
  addWindowListeners(win) {
    win.addEventListener("resize", this.onResize);
    if (this.printQuery) {
      if (this.printQuery.addEventListener)
        this.printQuery.addEventListener("change", this.onPrint);
      else
        this.printQuery.addListener(this.onPrint);
    } else
      win.addEventListener("beforeprint", this.onPrint);
    win.addEventListener("scroll", this.onScroll);
    win.document.addEventListener("selectionchange", this.onSelectionChange);
  }
  removeWindowListeners(win) {
    win.removeEventListener("scroll", this.onScroll);
    win.removeEventListener("resize", this.onResize);
    if (this.printQuery) {
      if (this.printQuery.removeEventListener)
        this.printQuery.removeEventListener("change", this.onPrint);
      else
        this.printQuery.removeListener(this.onPrint);
    } else
      win.removeEventListener("beforeprint", this.onPrint);
    win.document.removeEventListener("selectionchange", this.onSelectionChange);
  }
  update(update) {
    if (this.editContext) {
      this.editContext.update(update);
      if (update.startState.facet(editable) != update.state.facet(editable))
        update.view.contentDOM.editContext = update.state.facet(editable) ? this.editContext.editContext : null;
    }
  }
  destroy() {
    var _a, _b, _c;
    this.stop();
    (_a = this.intersection) === null || _a === undefined || _a.disconnect();
    (_b = this.gapIntersection) === null || _b === undefined || _b.disconnect();
    (_c = this.resizeScroll) === null || _c === undefined || _c.disconnect();
    for (let dom of this.scrollTargets)
      dom.removeEventListener("scroll", this.onScroll);
    this.removeWindowListeners(this.win);
    clearTimeout(this.parentCheck);
    clearTimeout(this.resizeTimeout);
    this.win.cancelAnimationFrame(this.delayedFlush);
    this.win.cancelAnimationFrame(this.flushingAndroidKey);
    if (this.editContext) {
      this.view.contentDOM.editContext = null;
      this.editContext.destroy();
    }
  }
}
function findChild(tile, dom, dir) {
  while (dom) {
    let curTile = Tile.get(dom);
    if (curTile && curTile.parent == tile)
      return curTile;
    let parent = dom.parentNode;
    dom = parent != tile.dom ? parent : dir > 0 ? dom.nextSibling : dom.previousSibling;
  }
  return null;
}
function buildSelectionRangeFromRange(view, range) {
  let { startContainer: anchorNode, startOffset: anchorOffset } = range;
  let { endContainer: focusNode, endOffset: focusOffset } = range;
  let curAnchor = view.docView.domAtPos(view.state.selection.main.anchor, 1);
  if (isEquivalentPosition(curAnchor.node, curAnchor.offset, focusNode, focusOffset))
    [anchorNode, anchorOffset, focusNode, focusOffset] = [focusNode, focusOffset, anchorNode, anchorOffset];
  return { anchorNode, anchorOffset, focusNode, focusOffset };
}
function safariSelectionRangeHack(view, selection) {
  if (selection.getComposedRanges) {
    let range = selection.getComposedRanges(view.root)[0];
    if (range)
      return buildSelectionRangeFromRange(view, range);
  }
  let found = null;
  function read(event) {
    event.preventDefault();
    event.stopImmediatePropagation();
    found = event.getTargetRanges()[0];
  }
  view.contentDOM.addEventListener("beforeinput", read, true);
  view.dom.ownerDocument.execCommand("indent");
  view.contentDOM.removeEventListener("beforeinput", read, true);
  return found ? buildSelectionRangeFromRange(view, found) : null;
}

class EditContextManager {
  constructor(view) {
    this.from = 0;
    this.to = 0;
    this.pendingContextChange = null;
    this.handlers = Object.create(null);
    this.composing = null;
    this.resetRange(view.state);
    let context = this.editContext = new window.EditContext({
      text: view.state.doc.sliceString(this.from, this.to),
      selectionStart: this.toContextPos(Math.max(this.from, Math.min(this.to, view.state.selection.main.anchor))),
      selectionEnd: this.toContextPos(view.state.selection.main.head)
    });
    this.handlers.textupdate = (e) => {
      let main = view.state.selection.main, { anchor, head } = main;
      let from = this.toEditorPos(e.updateRangeStart), to = this.toEditorPos(e.updateRangeEnd);
      if (view.inputState.composing >= 0 && !this.composing)
        this.composing = { contextBase: e.updateRangeStart, editorBase: from, drifted: false };
      let deletes = to - from > e.text.length;
      if (from == this.from && anchor < this.from)
        from = anchor;
      else if (to == this.to && anchor > this.to)
        to = anchor;
      let diff = findDiff(view.state.sliceDoc(from, to), e.text, (deletes ? main.from : main.to) - from, deletes ? "end" : null);
      if (!diff) {
        let newSel = EditorSelection.single(this.toEditorPos(e.selectionStart), this.toEditorPos(e.selectionEnd));
        if (!newSel.main.eq(main))
          view.dispatch({ selection: newSel, userEvent: "select" });
        return;
      }
      let change = {
        from: diff.from + from,
        to: diff.toA + from,
        insert: Text.of(e.text.slice(diff.from, diff.toB).split(`
`))
      };
      if ((browser.mac || browser.android) && change.from == head - 1 && /^\. ?$/.test(e.text) && view.contentDOM.getAttribute("autocorrect") == "off")
        change = { from, to, insert: Text.of([e.text.replace(".", " ")]) };
      this.pendingContextChange = change;
      if (!view.state.readOnly) {
        let newLen = this.to - this.from + (change.to - change.from + change.insert.length);
        applyDOMChangeInner(view, change, EditorSelection.single(this.toEditorPos(e.selectionStart, newLen), this.toEditorPos(e.selectionEnd, newLen)));
      }
      if (this.pendingContextChange) {
        this.revertPending(view.state);
        this.setSelection(view.state);
      }
      if (change.from < change.to && !change.insert.length && view.inputState.composing >= 0 && !/[\\p{Alphabetic}\\p{Number}_]/.test(context.text.slice(Math.max(0, e.updateRangeStart - 1), Math.min(context.text.length, e.updateRangeStart + 1))))
        this.handlers.compositionend(e);
    };
    this.handlers.characterboundsupdate = (e) => {
      let rects = [], prev = null;
      for (let i2 = this.toEditorPos(e.rangeStart), end = this.toEditorPos(e.rangeEnd);i2 < end; i2++) {
        let rect = view.coordsForChar(i2);
        prev = rect && new DOMRect(rect.left, rect.top, rect.right - rect.left, rect.bottom - rect.top) || prev || new DOMRect;
        rects.push(prev);
      }
      context.updateCharacterBounds(e.rangeStart, rects);
    };
    this.handlers.textformatupdate = (e) => {
      let deco = [];
      for (let format of e.getTextFormats()) {
        let { underlineStyle: lineStyle, underlineThickness: thickness } = format;
        if (!/none/i.test(lineStyle) && !/none/i.test(thickness)) {
          let from = this.toEditorPos(format.rangeStart), to = this.toEditorPos(format.rangeEnd);
          if (from < to) {
            let style = `text-decoration: underline ${/^[a-z]/.test(lineStyle) ? lineStyle + " " : lineStyle == "Dashed" ? "dashed " : lineStyle == "Squiggle" ? "wavy " : ""}${/thin/i.test(thickness) ? 1 : 2}px`;
            deco.push(Decoration.mark({ attributes: { style } }).range(from, to));
          }
        }
      }
      view.dispatch({ effects: setEditContextFormatting.of(Decoration.set(deco)) });
    };
    this.handlers.compositionstart = () => {
      if (view.inputState.composing < 0) {
        view.inputState.composing = 0;
        view.inputState.compositionFirstChange = true;
      }
    };
    this.handlers.compositionend = () => {
      view.inputState.composing = -1;
      view.inputState.compositionFirstChange = null;
      if (this.composing) {
        let { drifted } = this.composing;
        this.composing = null;
        if (drifted)
          this.reset(view.state);
      }
    };
    for (let event in this.handlers)
      context.addEventListener(event, this.handlers[event]);
    this.measureReq = { read: (view2) => {
      this.editContext.updateControlBounds(view2.contentDOM.getBoundingClientRect());
      let sel = getSelection(view2.root);
      if (sel && sel.rangeCount)
        this.editContext.updateSelectionBounds(sel.getRangeAt(0).getBoundingClientRect());
    } };
  }
  applyEdits(update) {
    let off = 0, abort = false, pending = this.pendingContextChange;
    update.changes.iterChanges((fromA, toA, _fromB, _toB, insert2) => {
      if (abort)
        return;
      let dLen = insert2.length - (toA - fromA);
      if (pending && toA >= pending.to) {
        if (pending.from == fromA && pending.to == toA && pending.insert.eq(insert2)) {
          pending = this.pendingContextChange = null;
          off += dLen;
          this.to += dLen;
          return;
        } else {
          pending = null;
          this.revertPending(update.state);
        }
      }
      fromA += off;
      toA += off;
      if (toA <= this.from) {
        this.from += dLen;
        this.to += dLen;
      } else if (fromA < this.to) {
        if (fromA < this.from || toA > this.to || this.to - this.from + insert2.length > 30000) {
          abort = true;
          return;
        }
        this.editContext.updateText(this.toContextPos(fromA), this.toContextPos(toA), insert2.toString());
        this.to += dLen;
      }
      off += dLen;
    });
    if (pending && !abort)
      this.revertPending(update.state);
    return !abort;
  }
  update(update) {
    let reverted = this.pendingContextChange, startSel = update.startState.selection.main;
    if (this.composing && (this.composing.drifted || !update.changes.touchesRange(startSel.from, startSel.to) && update.transactions.some((tr) => !tr.isUserEvent("input.type") && tr.changes.touchesRange(this.from, this.to)))) {
      this.composing.drifted = true;
      this.composing.editorBase = update.changes.mapPos(this.composing.editorBase);
    } else if (!this.applyEdits(update) || !this.rangeIsValid(update.state)) {
      this.pendingContextChange = null;
      this.reset(update.state);
    } else if (update.docChanged || update.selectionSet || reverted) {
      this.setSelection(update.state);
    }
    if (update.geometryChanged || update.docChanged || update.selectionSet)
      update.view.requestMeasure(this.measureReq);
  }
  resetRange(state) {
    let { head } = state.selection.main;
    this.from = Math.max(0, head - 1e4);
    this.to = Math.min(state.doc.length, head + 1e4);
  }
  reset(state) {
    this.resetRange(state);
    this.editContext.updateText(0, this.editContext.text.length, state.doc.sliceString(this.from, this.to));
    this.setSelection(state);
  }
  revertPending(state) {
    let pending = this.pendingContextChange;
    this.pendingContextChange = null;
    this.editContext.updateText(this.toContextPos(pending.from), this.toContextPos(pending.from + pending.insert.length), state.doc.sliceString(pending.from, pending.to));
  }
  setSelection(state) {
    let { main } = state.selection;
    let start = this.toContextPos(Math.max(this.from, Math.min(this.to, main.anchor)));
    let end = this.toContextPos(main.head);
    if (this.editContext.selectionStart != start || this.editContext.selectionEnd != end)
      this.editContext.updateSelection(start, end);
  }
  rangeIsValid(state) {
    let { head } = state.selection.main;
    return !(this.from > 0 && head - this.from < 500 || this.to < state.doc.length && this.to - head < 500 || this.to - this.from > 1e4 * 3);
  }
  toEditorPos(contextPos, clipLen = this.to - this.from) {
    contextPos = Math.min(contextPos, clipLen);
    let c = this.composing;
    return c && c.drifted ? c.editorBase + (contextPos - c.contextBase) : contextPos + this.from;
  }
  toContextPos(editorPos) {
    let c = this.composing;
    return c && c.drifted ? c.contextBase + (editorPos - c.editorBase) : editorPos - this.from;
  }
  destroy() {
    for (let event in this.handlers)
      this.editContext.removeEventListener(event, this.handlers[event]);
  }
}

class EditorView {
  get state() {
    return this.viewState.state;
  }
  get viewport() {
    return this.viewState.viewport;
  }
  get visibleRanges() {
    return this.viewState.visibleRanges;
  }
  get inView() {
    return this.viewState.inView;
  }
  get composing() {
    return !!this.inputState && this.inputState.composing > 0;
  }
  get compositionStarted() {
    return !!this.inputState && this.inputState.composing >= 0;
  }
  get root() {
    return this._root;
  }
  get win() {
    return this.dom.ownerDocument.defaultView || window;
  }
  constructor(config = {}) {
    var _a;
    this.plugins = [];
    this.pluginMap = new Map;
    this.editorAttrs = {};
    this.contentAttrs = {};
    this.bidiCache = [];
    this.destroyed = false;
    this.updateState = 2;
    this.measureScheduled = -1;
    this.measureRequests = [];
    this.contentDOM = document.createElement("div");
    this.scrollDOM = document.createElement("div");
    this.scrollDOM.tabIndex = -1;
    this.scrollDOM.className = "cm-scroller";
    this.scrollDOM.appendChild(this.contentDOM);
    this.announceDOM = document.createElement("div");
    this.announceDOM.className = "cm-announced";
    this.announceDOM.setAttribute("aria-live", "polite");
    this.dom = document.createElement("div");
    this.dom.appendChild(this.announceDOM);
    this.dom.appendChild(this.scrollDOM);
    if (config.parent)
      config.parent.appendChild(this.dom);
    let { dispatch } = config;
    this.dispatchTransactions = config.dispatchTransactions || dispatch && ((trs) => trs.forEach((tr) => dispatch(tr, this))) || ((trs) => this.update(trs));
    this.dispatch = this.dispatch.bind(this);
    this._root = config.root || getRoot(config.parent) || document;
    this.viewState = new ViewState(config.state || EditorState.create(config));
    if (config.scrollTo && config.scrollTo.is(scrollIntoView))
      this.viewState.scrollTarget = config.scrollTo.value.clip(this.viewState.state);
    this.plugins = this.state.facet(viewPlugin).map((spec) => new PluginInstance(spec));
    for (let plugin of this.plugins)
      plugin.update(this);
    this.observer = new DOMObserver(this);
    this.inputState = new InputState(this);
    this.inputState.ensureHandlers(this.plugins);
    this.docView = new DocView(this);
    this.mountStyles();
    this.updateAttrs();
    this.updateState = 0;
    this.requestMeasure();
    if ((_a = document.fonts) === null || _a === undefined ? undefined : _a.ready)
      document.fonts.ready.then(() => this.requestMeasure());
  }
  dispatch(...input) {
    let trs = input.length == 1 && input[0] instanceof Transaction ? input : input.length == 1 && Array.isArray(input[0]) ? input[0] : [this.state.update(...input)];
    this.dispatchTransactions(trs, this);
  }
  update(transactions) {
    if (this.updateState != 0)
      throw new Error("Calls to EditorView.update are not allowed while an update is in progress");
    let redrawn = false, attrsChanged = false, update;
    let state = this.state;
    for (let tr of transactions) {
      if (tr.startState != state)
        throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");
      state = tr.state;
    }
    if (this.destroyed) {
      this.viewState.state = state;
      return;
    }
    let focus = this.hasFocus, focusFlag = 0, dispatchFocus = null;
    if (transactions.some((tr) => tr.annotation(isFocusChange))) {
      this.inputState.notifiedFocused = focus;
      focusFlag = 1;
    } else if (focus != this.inputState.notifiedFocused) {
      this.inputState.notifiedFocused = focus;
      dispatchFocus = focusChangeTransaction(state, focus);
      if (!dispatchFocus)
        focusFlag = 1;
    }
    let pendingKey = this.observer.delayedAndroidKey, domChange = null;
    if (pendingKey) {
      this.observer.clearDelayedAndroidKey();
      domChange = this.observer.readChange();
      if (domChange && !this.state.doc.eq(state.doc) || !this.state.selection.eq(state.selection))
        domChange = null;
    } else {
      this.observer.clear();
    }
    if (state.facet(EditorState.phrases) != this.state.facet(EditorState.phrases))
      return this.setState(state);
    update = ViewUpdate.create(this, state, transactions);
    update.flags |= focusFlag;
    let scrollTarget = this.viewState.scrollTarget;
    try {
      this.updateState = 2;
      for (let tr of transactions) {
        if (scrollTarget)
          scrollTarget = scrollTarget.map(tr.changes);
        if (tr.scrollIntoView) {
          let { main } = tr.state.selection;
          scrollTarget = new ScrollTarget(main.empty ? main : EditorSelection.cursor(main.head, main.head > main.anchor ? -1 : 1));
        }
        for (let e of tr.effects)
          if (e.is(scrollIntoView))
            scrollTarget = e.value.clip(this.state);
      }
      this.viewState.update(update, scrollTarget);
      this.bidiCache = CachedOrder.update(this.bidiCache, update.changes);
      if (!update.empty) {
        this.updatePlugins(update);
        this.inputState.update(update);
      }
      redrawn = this.docView.update(update);
      if (this.state.facet(styleModule) != this.styleModules)
        this.mountStyles();
      attrsChanged = this.updateAttrs();
      this.showAnnouncements(transactions);
      this.docView.updateSelection(redrawn, transactions.some((tr) => tr.isUserEvent("select.pointer")));
    } finally {
      this.updateState = 0;
    }
    if (update.startState.facet(theme) != update.state.facet(theme))
      this.viewState.mustMeasureContent = true;
    if (redrawn || attrsChanged || scrollTarget || this.viewState.mustEnforceCursorAssoc || this.viewState.mustMeasureContent)
      this.requestMeasure();
    if (redrawn)
      this.docViewUpdate();
    if (!update.empty)
      for (let listener of this.state.facet(updateListener)) {
        try {
          listener(update);
        } catch (e) {
          logException(this.state, e, "update listener");
        }
      }
    if (dispatchFocus || domChange)
      Promise.resolve().then(() => {
        if (dispatchFocus && this.state == dispatchFocus.startState)
          this.dispatch(dispatchFocus);
        if (domChange) {
          if (!applyDOMChange(this, domChange) && pendingKey.force)
            dispatchKey(this.contentDOM, pendingKey.key, pendingKey.keyCode);
        }
      });
  }
  setState(newState) {
    if (this.updateState != 0)
      throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");
    if (this.destroyed) {
      this.viewState.state = newState;
      return;
    }
    this.updateState = 2;
    let hadFocus = this.hasFocus;
    try {
      for (let plugin of this.plugins)
        plugin.destroy(this);
      this.viewState = new ViewState(newState);
      this.plugins = newState.facet(viewPlugin).map((spec) => new PluginInstance(spec));
      this.pluginMap.clear();
      for (let plugin of this.plugins)
        plugin.update(this);
      this.docView.destroy();
      this.docView = new DocView(this);
      this.inputState.ensureHandlers(this.plugins);
      this.mountStyles();
      this.updateAttrs();
      this.bidiCache = [];
    } finally {
      this.updateState = 0;
    }
    if (hadFocus)
      this.focus();
    this.requestMeasure();
  }
  updatePlugins(update) {
    let prevSpecs = update.startState.facet(viewPlugin), specs = update.state.facet(viewPlugin);
    if (prevSpecs != specs) {
      let newPlugins = [];
      for (let spec of specs) {
        let found = prevSpecs.indexOf(spec);
        if (found < 0) {
          newPlugins.push(new PluginInstance(spec));
        } else {
          let plugin = this.plugins[found];
          plugin.mustUpdate = update;
          newPlugins.push(plugin);
        }
      }
      for (let plugin of this.plugins)
        if (plugin.mustUpdate != update)
          plugin.destroy(this);
      this.plugins = newPlugins;
      this.pluginMap.clear();
    } else {
      for (let p of this.plugins)
        p.mustUpdate = update;
    }
    for (let i2 = 0;i2 < this.plugins.length; i2++)
      this.plugins[i2].update(this);
    if (prevSpecs != specs)
      this.inputState.ensureHandlers(this.plugins);
  }
  docViewUpdate() {
    for (let plugin of this.plugins) {
      let val = plugin.value;
      if (val && val.docViewUpdate) {
        try {
          val.docViewUpdate(this);
        } catch (e) {
          logException(this.state, e, "doc view update listener");
        }
      }
    }
  }
  measure(flush = true) {
    if (this.destroyed)
      return;
    if (this.measureScheduled > -1)
      this.win.cancelAnimationFrame(this.measureScheduled);
    if (this.observer.delayedAndroidKey) {
      this.measureScheduled = -1;
      this.requestMeasure();
      return;
    }
    this.measureScheduled = 0;
    if (flush)
      this.observer.forceFlush();
    let updated = null;
    let sDOM = this.scrollDOM, scrollTop = sDOM.scrollTop * this.scaleY;
    let { scrollAnchorPos, scrollAnchorHeight } = this.viewState;
    if (Math.abs(scrollTop - this.viewState.scrollTop) > 1)
      scrollAnchorHeight = -1;
    this.viewState.scrollAnchorHeight = -1;
    try {
      for (let i2 = 0;; i2++) {
        if (scrollAnchorHeight < 0) {
          if (isScrolledToBottom(sDOM)) {
            scrollAnchorPos = -1;
            scrollAnchorHeight = this.viewState.heightMap.height;
          } else {
            let block = this.viewState.scrollAnchorAt(scrollTop);
            scrollAnchorPos = block.from;
            scrollAnchorHeight = block.top;
          }
        }
        this.updateState = 1;
        let changed = this.viewState.measure(this);
        if (!changed && !this.measureRequests.length && this.viewState.scrollTarget == null)
          break;
        if (i2 > 5) {
          console.warn(this.measureRequests.length ? "Measure loop restarted more than 5 times" : "Viewport failed to stabilize");
          break;
        }
        let measuring = [];
        if (!(changed & 4))
          [this.measureRequests, measuring] = [measuring, this.measureRequests];
        let measured = measuring.map((m) => {
          try {
            return m.read(this);
          } catch (e) {
            logException(this.state, e);
            return BadMeasure;
          }
        });
        let update = ViewUpdate.create(this, this.state, []), redrawn = false;
        update.flags |= changed;
        if (!updated)
          updated = update;
        else
          updated.flags |= changed;
        this.updateState = 2;
        if (!update.empty) {
          this.updatePlugins(update);
          this.inputState.update(update);
          this.updateAttrs();
          redrawn = this.docView.update(update);
          if (redrawn)
            this.docViewUpdate();
        }
        for (let i3 = 0;i3 < measuring.length; i3++)
          if (measured[i3] != BadMeasure) {
            try {
              let m = measuring[i3];
              if (m.write)
                m.write(measured[i3], this);
            } catch (e) {
              logException(this.state, e);
            }
          }
        if (redrawn)
          this.docView.updateSelection(true);
        if (!update.viewportChanged && this.measureRequests.length == 0) {
          if (this.viewState.editorHeight) {
            if (this.viewState.scrollTarget) {
              this.docView.scrollIntoView(this.viewState.scrollTarget);
              this.viewState.scrollTarget = null;
              scrollAnchorHeight = -1;
              continue;
            } else {
              let newAnchorHeight = scrollAnchorPos < 0 ? this.viewState.heightMap.height : this.viewState.lineBlockAt(scrollAnchorPos).top;
              let diff = newAnchorHeight - scrollAnchorHeight;
              if (diff > 1 || diff < -1) {
                scrollTop = scrollTop + diff;
                sDOM.scrollTop = scrollTop / this.scaleY;
                scrollAnchorHeight = -1;
                continue;
              }
            }
          }
          break;
        }
      }
    } finally {
      this.updateState = 0;
      this.measureScheduled = -1;
    }
    if (updated && !updated.empty)
      for (let listener of this.state.facet(updateListener))
        listener(updated);
  }
  get themeClasses() {
    return baseThemeID + " " + (this.state.facet(darkTheme) ? baseDarkID : baseLightID) + " " + this.state.facet(theme);
  }
  updateAttrs() {
    let editorAttrs = attrsFromFacet(this, editorAttributes, {
      class: "cm-editor" + (this.hasFocus ? " cm-focused " : " ") + this.themeClasses
    });
    let contentAttrs = {
      spellcheck: "false",
      autocorrect: "off",
      autocapitalize: "off",
      writingsuggestions: "false",
      translate: "no",
      contenteditable: !this.state.facet(editable) ? "false" : "true",
      class: "cm-content",
      style: `${browser.tabSize}: ${this.state.tabSize}`,
      role: "textbox",
      "aria-multiline": "true"
    };
    if (this.state.readOnly)
      contentAttrs["aria-readonly"] = "true";
    attrsFromFacet(this, contentAttributes, contentAttrs);
    let changed = this.observer.ignore(() => {
      let changedContent = updateAttrs(this.contentDOM, this.contentAttrs, contentAttrs);
      let changedEditor = updateAttrs(this.dom, this.editorAttrs, editorAttrs);
      return changedContent || changedEditor;
    });
    this.editorAttrs = editorAttrs;
    this.contentAttrs = contentAttrs;
    return changed;
  }
  showAnnouncements(trs) {
    let first = true;
    for (let tr of trs)
      for (let effect of tr.effects)
        if (effect.is(EditorView.announce)) {
          if (first)
            this.announceDOM.textContent = "";
          first = false;
          let div = this.announceDOM.appendChild(document.createElement("div"));
          div.textContent = effect.value;
        }
  }
  mountStyles() {
    this.styleModules = this.state.facet(styleModule);
    let nonce = this.state.facet(EditorView.cspNonce);
    StyleModule.mount(this.root, this.styleModules.concat(baseTheme$1).reverse(), nonce ? { nonce } : undefined);
  }
  readMeasured() {
    if (this.updateState == 2)
      throw new Error("Reading the editor layout isn't allowed during an update");
    if (this.updateState == 0 && this.measureScheduled > -1)
      this.measure(false);
  }
  requestMeasure(request) {
    if (this.measureScheduled < 0)
      this.measureScheduled = this.win.requestAnimationFrame(() => this.measure());
    if (request) {
      if (this.measureRequests.indexOf(request) > -1)
        return;
      if (request.key != null)
        for (let i2 = 0;i2 < this.measureRequests.length; i2++) {
          if (this.measureRequests[i2].key === request.key) {
            this.measureRequests[i2] = request;
            return;
          }
        }
      this.measureRequests.push(request);
    }
  }
  plugin(plugin) {
    let known = this.pluginMap.get(plugin);
    if (known === undefined || known && known.plugin != plugin)
      this.pluginMap.set(plugin, known = this.plugins.find((p) => p.plugin == plugin) || null);
    return known && known.update(this).value;
  }
  get documentTop() {
    return this.contentDOM.getBoundingClientRect().top + this.viewState.paddingTop;
  }
  get documentPadding() {
    return { top: this.viewState.paddingTop, bottom: this.viewState.paddingBottom };
  }
  get scaleX() {
    return this.viewState.scaleX;
  }
  get scaleY() {
    return this.viewState.scaleY;
  }
  elementAtHeight(height) {
    this.readMeasured();
    return this.viewState.elementAtHeight(height);
  }
  lineBlockAtHeight(height) {
    this.readMeasured();
    return this.viewState.lineBlockAtHeight(height);
  }
  get viewportLineBlocks() {
    return this.viewState.viewportLines;
  }
  lineBlockAt(pos) {
    return this.viewState.lineBlockAt(pos);
  }
  get contentHeight() {
    return this.viewState.contentHeight;
  }
  moveByChar(start, forward, by) {
    return skipAtoms(this, start, moveByChar(this, start, forward, by));
  }
  moveByGroup(start, forward) {
    return skipAtoms(this, start, moveByChar(this, start, forward, (initial) => byGroup(this, start.head, initial)));
  }
  visualLineSide(line, end) {
    let order = this.bidiSpans(line), dir = this.textDirectionAt(line.from);
    let span = order[end ? order.length - 1 : 0];
    return EditorSelection.cursor(span.side(end, dir) + line.from, span.forward(!end, dir) ? 1 : -1);
  }
  moveToLineBoundary(start, forward, includeWrap = true) {
    return moveToLineBoundary(this, start, forward, includeWrap);
  }
  moveVertically(start, forward, distance) {
    return skipAtoms(this, start, moveVertically(this, start, forward, distance));
  }
  domAtPos(pos, side = 1) {
    return this.docView.domAtPos(pos, side);
  }
  posAtDOM(node, offset = 0) {
    return this.docView.posFromDOM(node, offset);
  }
  posAtCoords(coords, precise = true) {
    this.readMeasured();
    let found = posAtCoords(this, coords, precise);
    return found && found.pos;
  }
  posAndSideAtCoords(coords, precise = true) {
    this.readMeasured();
    return posAtCoords(this, coords, precise);
  }
  coordsAtPos(pos, side = 1) {
    this.readMeasured();
    let rect = this.docView.coordsAt(pos, side);
    if (!rect || rect.left == rect.right)
      return rect;
    let line = this.state.doc.lineAt(pos), order = this.bidiSpans(line);
    let span = order[BidiSpan.find(order, pos - line.from, -1, side)];
    return flattenRect(rect, span.dir == Direction.LTR == side > 0);
  }
  coordsForChar(pos) {
    this.readMeasured();
    return this.docView.coordsForChar(pos);
  }
  get defaultCharacterWidth() {
    return this.viewState.heightOracle.charWidth;
  }
  get defaultLineHeight() {
    return this.viewState.heightOracle.lineHeight;
  }
  get textDirection() {
    return this.viewState.defaultTextDirection;
  }
  textDirectionAt(pos) {
    let perLine = this.state.facet(perLineTextDirection);
    if (!perLine || pos < this.viewport.from || pos > this.viewport.to)
      return this.textDirection;
    this.readMeasured();
    return this.docView.textDirectionAt(pos);
  }
  get lineWrapping() {
    return this.viewState.heightOracle.lineWrapping;
  }
  bidiSpans(line) {
    if (line.length > MaxBidiLine)
      return trivialOrder(line.length);
    let dir = this.textDirectionAt(line.from), isolates;
    for (let entry of this.bidiCache) {
      if (entry.from == line.from && entry.dir == dir && (entry.fresh || isolatesEq(entry.isolates, isolates = getIsolatedRanges(this, line))))
        return entry.order;
    }
    if (!isolates)
      isolates = getIsolatedRanges(this, line);
    let order = computeOrder(line.text, dir, isolates);
    this.bidiCache.push(new CachedOrder(line.from, line.to, dir, isolates, true, order));
    return order;
  }
  get hasFocus() {
    var _a;
    return (this.dom.ownerDocument.hasFocus() || browser.safari && ((_a = this.inputState) === null || _a === undefined ? undefined : _a.lastContextMenu) > Date.now() - 30000) && this.root.activeElement == this.contentDOM;
  }
  focus() {
    this.observer.ignore(() => {
      focusPreventScroll(this.contentDOM);
      this.docView.updateSelection();
    });
  }
  setRoot(root) {
    if (this._root != root) {
      this._root = root;
      this.observer.setWindow((root.nodeType == 9 ? root : root.ownerDocument).defaultView || window);
      this.mountStyles();
    }
  }
  destroy() {
    if (this.root.activeElement == this.contentDOM)
      this.contentDOM.blur();
    for (let plugin of this.plugins)
      plugin.destroy(this);
    this.plugins = [];
    this.inputState.destroy();
    this.docView.destroy();
    this.dom.remove();
    this.observer.destroy();
    if (this.measureScheduled > -1)
      this.win.cancelAnimationFrame(this.measureScheduled);
    this.destroyed = true;
  }
  static scrollIntoView(pos, options = {}) {
    return scrollIntoView.of(new ScrollTarget(typeof pos == "number" ? EditorSelection.cursor(pos) : pos, options.y, options.x, options.yMargin, options.xMargin));
  }
  scrollSnapshot() {
    let { scrollTop, scrollLeft } = this.scrollDOM;
    let ref = this.viewState.scrollAnchorAt(scrollTop);
    return scrollIntoView.of(new ScrollTarget(EditorSelection.cursor(ref.from), "start", "start", ref.top - scrollTop, scrollLeft, true));
  }
  setTabFocusMode(to) {
    if (to == null)
      this.inputState.tabFocusMode = this.inputState.tabFocusMode < 0 ? 0 : -1;
    else if (typeof to == "boolean")
      this.inputState.tabFocusMode = to ? 0 : -1;
    else if (this.inputState.tabFocusMode != 0)
      this.inputState.tabFocusMode = Date.now() + to;
  }
  static domEventHandlers(handlers2) {
    return ViewPlugin.define(() => ({}), { eventHandlers: handlers2 });
  }
  static domEventObservers(observers2) {
    return ViewPlugin.define(() => ({}), { eventObservers: observers2 });
  }
  static theme(spec, options) {
    let prefix = StyleModule.newName();
    let result = [theme.of(prefix), styleModule.of(buildTheme(`.${prefix}`, spec))];
    if (options && options.dark)
      result.push(darkTheme.of(true));
    return result;
  }
  static baseTheme(spec) {
    return Prec.lowest(styleModule.of(buildTheme("." + baseThemeID, spec, lightDarkIDs)));
  }
  static findFromDOM(dom) {
    var _a;
    let content = dom.querySelector(".cm-content");
    let tile = content && Tile.get(content) || Tile.get(dom);
    return ((_a = tile === null || tile === undefined ? undefined : tile.root) === null || _a === undefined ? undefined : _a.view) || null;
  }
}
EditorView.styleModule = styleModule;
EditorView.inputHandler = inputHandler;
EditorView.clipboardInputFilter = clipboardInputFilter;
EditorView.clipboardOutputFilter = clipboardOutputFilter;
EditorView.scrollHandler = scrollHandler;
EditorView.focusChangeEffect = focusChangeEffect;
EditorView.perLineTextDirection = perLineTextDirection;
EditorView.exceptionSink = exceptionSink;
EditorView.updateListener = updateListener;
EditorView.editable = editable;
EditorView.mouseSelectionStyle = mouseSelectionStyle;
EditorView.dragMovesSelection = dragMovesSelection$1;
EditorView.clickAddsSelectionRange = clickAddsSelectionRange;
EditorView.decorations = decorations;
EditorView.blockWrappers = blockWrappers;
EditorView.outerDecorations = outerDecorations;
EditorView.atomicRanges = atomicRanges;
EditorView.bidiIsolatedRanges = bidiIsolatedRanges;
EditorView.scrollMargins = scrollMargins;
EditorView.darkTheme = darkTheme;
EditorView.cspNonce = /* @__PURE__ */ Facet.define({ combine: (values) => values.length ? values[0] : "" });
EditorView.contentAttributes = contentAttributes;
EditorView.editorAttributes = editorAttributes;
EditorView.lineWrapping = /* @__PURE__ */ EditorView.contentAttributes.of({ class: "cm-lineWrapping" });
EditorView.announce = /* @__PURE__ */ StateEffect.define();
var MaxBidiLine = 4096;
var BadMeasure = {};

class CachedOrder {
  constructor(from, to, dir, isolates, fresh, order) {
    this.from = from;
    this.to = to;
    this.dir = dir;
    this.isolates = isolates;
    this.fresh = fresh;
    this.order = order;
  }
  static update(cache, changes) {
    if (changes.empty && !cache.some((c) => c.fresh))
      return cache;
    let result = [], lastDir = cache.length ? cache[cache.length - 1].dir : Direction.LTR;
    for (let i2 = Math.max(0, cache.length - 10);i2 < cache.length; i2++) {
      let entry = cache[i2];
      if (entry.dir == lastDir && !changes.touchesRange(entry.from, entry.to))
        result.push(new CachedOrder(changes.mapPos(entry.from, 1), changes.mapPos(entry.to, -1), entry.dir, entry.isolates, false, entry.order));
    }
    return result;
  }
}
function attrsFromFacet(view, facet, base2) {
  for (let sources = view.state.facet(facet), i2 = sources.length - 1;i2 >= 0; i2--) {
    let source = sources[i2], value = typeof source == "function" ? source(view) : source;
    if (value)
      combineAttrs(value, base2);
  }
  return base2;
}
var currentPlatform = browser.mac ? "mac" : browser.windows ? "win" : browser.linux ? "linux" : "key";
function normalizeKeyName(name, platform) {
  const parts = name.split(/-(?!$)/);
  let result = parts[parts.length - 1];
  if (result == "Space")
    result = " ";
  let alt, ctrl, shift2, meta;
  for (let i2 = 0;i2 < parts.length - 1; ++i2) {
    const mod = parts[i2];
    if (/^(cmd|meta|m)$/i.test(mod))
      meta = true;
    else if (/^a(lt)?$/i.test(mod))
      alt = true;
    else if (/^(c|ctrl|control)$/i.test(mod))
      ctrl = true;
    else if (/^s(hift)?$/i.test(mod))
      shift2 = true;
    else if (/^mod$/i.test(mod)) {
      if (platform == "mac")
        meta = true;
      else
        ctrl = true;
    } else
      throw new Error("Unrecognized modifier name: " + mod);
  }
  if (alt)
    result = "Alt-" + result;
  if (ctrl)
    result = "Ctrl-" + result;
  if (meta)
    result = "Meta-" + result;
  if (shift2)
    result = "Shift-" + result;
  return result;
}
function modifiers(name, event, shift2) {
  if (event.altKey)
    name = "Alt-" + name;
  if (event.ctrlKey)
    name = "Ctrl-" + name;
  if (event.metaKey)
    name = "Meta-" + name;
  if (shift2 !== false && event.shiftKey)
    name = "Shift-" + name;
  return name;
}
var handleKeyEvents = /* @__PURE__ */ Prec.default(/* @__PURE__ */ EditorView.domEventHandlers({
  keydown(event, view) {
    return runHandlers(getKeymap(view.state), event, view, "editor");
  }
}));
var keymap = /* @__PURE__ */ Facet.define({ enables: handleKeyEvents });
var Keymaps = /* @__PURE__ */ new WeakMap;
function getKeymap(state) {
  let bindings = state.facet(keymap);
  let map = Keymaps.get(bindings);
  if (!map)
    Keymaps.set(bindings, map = buildKeymap(bindings.reduce((a, b) => a.concat(b), [])));
  return map;
}
function runScopeHandlers(view, event, scope) {
  return runHandlers(getKeymap(view.state), event, view, scope);
}
var storedPrefix = null;
var PrefixTimeout = 4000;
function buildKeymap(bindings, platform = currentPlatform) {
  let bound = Object.create(null);
  let isPrefix = Object.create(null);
  let checkPrefix = (name, is) => {
    let current = isPrefix[name];
    if (current == null)
      isPrefix[name] = is;
    else if (current != is)
      throw new Error("Key binding " + name + " is used both as a regular binding and as a multi-stroke prefix");
  };
  let add2 = (scope, key, command, preventDefault, stopPropagation) => {
    var _a, _b;
    let scopeObj = bound[scope] || (bound[scope] = Object.create(null));
    let parts = key.split(/ (?!$)/).map((k) => normalizeKeyName(k, platform));
    for (let i2 = 1;i2 < parts.length; i2++) {
      let prefix = parts.slice(0, i2).join(" ");
      checkPrefix(prefix, true);
      if (!scopeObj[prefix])
        scopeObj[prefix] = {
          preventDefault: true,
          stopPropagation: false,
          run: [(view) => {
            let ourObj = storedPrefix = { view, prefix, scope };
            setTimeout(() => {
              if (storedPrefix == ourObj)
                storedPrefix = null;
            }, PrefixTimeout);
            return true;
          }]
        };
    }
    let full = parts.join(" ");
    checkPrefix(full, false);
    let binding = scopeObj[full] || (scopeObj[full] = {
      preventDefault: false,
      stopPropagation: false,
      run: ((_b = (_a = scopeObj._any) === null || _a === undefined ? undefined : _a.run) === null || _b === undefined ? undefined : _b.slice()) || []
    });
    if (command)
      binding.run.push(command);
    if (preventDefault)
      binding.preventDefault = true;
    if (stopPropagation)
      binding.stopPropagation = true;
  };
  for (let b of bindings) {
    let scopes = b.scope ? b.scope.split(" ") : ["editor"];
    if (b.any)
      for (let scope of scopes) {
        let scopeObj = bound[scope] || (bound[scope] = Object.create(null));
        if (!scopeObj._any)
          scopeObj._any = { preventDefault: false, stopPropagation: false, run: [] };
        let { any } = b;
        for (let key in scopeObj)
          scopeObj[key].run.push((view) => any(view, currentKeyEvent));
      }
    let name = b[platform] || b.key;
    if (!name)
      continue;
    for (let scope of scopes) {
      add2(scope, name, b.run, b.preventDefault, b.stopPropagation);
      if (b.shift)
        add2(scope, "Shift-" + name, b.shift, b.preventDefault, b.stopPropagation);
    }
  }
  return bound;
}
var currentKeyEvent = null;
function runHandlers(map, event, view, scope) {
  currentKeyEvent = event;
  let name = keyName(event);
  let charCode = codePointAt2(name, 0), isChar = codePointSize2(charCode) == name.length && name != " ";
  let prefix = "", handled = false, prevented = false, stopPropagation = false;
  if (storedPrefix && storedPrefix.view == view && storedPrefix.scope == scope) {
    prefix = storedPrefix.prefix + " ";
    if (modifierCodes.indexOf(event.keyCode) < 0) {
      prevented = true;
      storedPrefix = null;
    }
  }
  let ran = new Set;
  let runFor = (binding) => {
    if (binding) {
      for (let cmd of binding.run)
        if (!ran.has(cmd)) {
          ran.add(cmd);
          if (cmd(view)) {
            if (binding.stopPropagation)
              stopPropagation = true;
            return true;
          }
        }
      if (binding.preventDefault) {
        if (binding.stopPropagation)
          stopPropagation = true;
        prevented = true;
      }
    }
    return false;
  };
  let scopeObj = map[scope], baseName, shiftName;
  if (scopeObj) {
    if (runFor(scopeObj[prefix + modifiers(name, event, !isChar)])) {
      handled = true;
    } else if (isChar && (event.altKey || event.metaKey || event.ctrlKey) && !(browser.windows && event.ctrlKey && event.altKey) && !(browser.mac && event.altKey && !(event.ctrlKey || event.metaKey)) && (baseName = base[event.keyCode]) && baseName != name) {
      if (runFor(scopeObj[prefix + modifiers(baseName, event, true)])) {
        handled = true;
      } else if (event.shiftKey && (shiftName = shift[event.keyCode]) != name && shiftName != baseName && runFor(scopeObj[prefix + modifiers(shiftName, event, false)])) {
        handled = true;
      }
    } else if (isChar && event.shiftKey && runFor(scopeObj[prefix + modifiers(name, event, true)])) {
      handled = true;
    }
    if (!handled && runFor(scopeObj._any))
      handled = true;
  }
  if (prevented)
    handled = true;
  if (handled && stopPropagation)
    event.stopPropagation();
  currentKeyEvent = null;
  return handled;
}

class RectangleMarker {
  constructor(className, left, top2, width, height) {
    this.className = className;
    this.left = left;
    this.top = top2;
    this.width = width;
    this.height = height;
  }
  draw() {
    let elt = document.createElement("div");
    elt.className = this.className;
    this.adjust(elt);
    return elt;
  }
  update(elt, prev) {
    if (prev.className != this.className)
      return false;
    this.adjust(elt);
    return true;
  }
  adjust(elt) {
    elt.style.left = this.left + "px";
    elt.style.top = this.top + "px";
    if (this.width != null)
      elt.style.width = this.width + "px";
    elt.style.height = this.height + "px";
  }
  eq(p) {
    return this.left == p.left && this.top == p.top && this.width == p.width && this.height == p.height && this.className == p.className;
  }
  static forRange(view, className, range) {
    if (range.empty) {
      let pos = view.coordsAtPos(range.head, range.assoc || 1);
      if (!pos)
        return [];
      let base2 = getBase(view);
      return [new RectangleMarker(className, pos.left - base2.left, pos.top - base2.top, null, pos.bottom - pos.top)];
    } else {
      return rectanglesForRange(view, className, range);
    }
  }
}
function getBase(view) {
  let rect = view.scrollDOM.getBoundingClientRect();
  let left = view.textDirection == Direction.LTR ? rect.left : rect.right - view.scrollDOM.clientWidth * view.scaleX;
  return { left: left - view.scrollDOM.scrollLeft * view.scaleX, top: rect.top - view.scrollDOM.scrollTop * view.scaleY };
}
function wrappedLine(view, pos, side, inside) {
  let coords = view.coordsAtPos(pos, side * 2);
  if (!coords)
    return inside;
  let editorRect = view.dom.getBoundingClientRect();
  let y = (coords.top + coords.bottom) / 2;
  let left = view.posAtCoords({ x: editorRect.left + 1, y });
  let right = view.posAtCoords({ x: editorRect.right - 1, y });
  if (left == null || right == null)
    return inside;
  return { from: Math.max(inside.from, Math.min(left, right)), to: Math.min(inside.to, Math.max(left, right)) };
}
function rectanglesForRange(view, className, range) {
  if (range.to <= view.viewport.from || range.from >= view.viewport.to)
    return [];
  let from = Math.max(range.from, view.viewport.from), to = Math.min(range.to, view.viewport.to);
  let ltr = view.textDirection == Direction.LTR;
  let content = view.contentDOM, contentRect = content.getBoundingClientRect(), base2 = getBase(view);
  let lineElt = content.querySelector(".cm-line"), lineStyle = lineElt && window.getComputedStyle(lineElt);
  let leftSide = contentRect.left + (lineStyle ? parseInt(lineStyle.paddingLeft) + Math.min(0, parseInt(lineStyle.textIndent)) : 0);
  let rightSide = contentRect.right - (lineStyle ? parseInt(lineStyle.paddingRight) : 0);
  let startBlock = blockAt(view, from, 1), endBlock = blockAt(view, to, -1);
  let visualStart = startBlock.type == BlockType.Text ? startBlock : null;
  let visualEnd = endBlock.type == BlockType.Text ? endBlock : null;
  if (visualStart && (view.lineWrapping || startBlock.widgetLineBreaks))
    visualStart = wrappedLine(view, from, 1, visualStart);
  if (visualEnd && (view.lineWrapping || endBlock.widgetLineBreaks))
    visualEnd = wrappedLine(view, to, -1, visualEnd);
  if (visualStart && visualEnd && visualStart.from == visualEnd.from && visualStart.to == visualEnd.to) {
    return pieces(drawForLine(range.from, range.to, visualStart));
  } else {
    let top2 = visualStart ? drawForLine(range.from, null, visualStart) : drawForWidget(startBlock, false);
    let bottom = visualEnd ? drawForLine(null, range.to, visualEnd) : drawForWidget(endBlock, true);
    let between = [];
    if ((visualStart || startBlock).to < (visualEnd || endBlock).from - (visualStart && visualEnd ? 1 : 0) || startBlock.widgetLineBreaks > 1 && top2.bottom + view.defaultLineHeight / 2 < bottom.top)
      between.push(piece(leftSide, top2.bottom, rightSide, bottom.top));
    else if (top2.bottom < bottom.top && view.elementAtHeight((top2.bottom + bottom.top) / 2).type == BlockType.Text)
      top2.bottom = bottom.top = (top2.bottom + bottom.top) / 2;
    return pieces(top2).concat(between).concat(pieces(bottom));
  }
  function piece(left, top2, right, bottom) {
    return new RectangleMarker(className, left - base2.left, top2 - base2.top, right - left, bottom - top2);
  }
  function pieces({ top: top2, bottom, horizontal }) {
    let pieces2 = [];
    for (let i2 = 0;i2 < horizontal.length; i2 += 2)
      pieces2.push(piece(horizontal[i2], top2, horizontal[i2 + 1], bottom));
    return pieces2;
  }
  function drawForLine(from2, to2, line) {
    let top2 = 1e9, bottom = -1e9, horizontal = [];
    function addSpan(from3, fromOpen, to3, toOpen, dir) {
      let fromCoords = view.coordsAtPos(from3, from3 == line.to ? -2 : 2);
      let toCoords = view.coordsAtPos(to3, to3 == line.from ? 2 : -2);
      if (!fromCoords || !toCoords)
        return;
      top2 = Math.min(fromCoords.top, toCoords.top, top2);
      bottom = Math.max(fromCoords.bottom, toCoords.bottom, bottom);
      if (dir == Direction.LTR)
        horizontal.push(ltr && fromOpen ? leftSide : fromCoords.left, ltr && toOpen ? rightSide : toCoords.right);
      else
        horizontal.push(!ltr && toOpen ? leftSide : toCoords.left, !ltr && fromOpen ? rightSide : fromCoords.right);
    }
    let start = from2 !== null && from2 !== undefined ? from2 : line.from, end = to2 !== null && to2 !== undefined ? to2 : line.to;
    for (let r of view.visibleRanges)
      if (r.to > start && r.from < end) {
        for (let pos = Math.max(r.from, start), endPos = Math.min(r.to, end);; ) {
          let docLine = view.state.doc.lineAt(pos);
          for (let span of view.bidiSpans(docLine)) {
            let spanFrom = span.from + docLine.from, spanTo = span.to + docLine.from;
            if (spanFrom >= endPos)
              break;
            if (spanTo > pos)
              addSpan(Math.max(spanFrom, pos), from2 == null && spanFrom <= start, Math.min(spanTo, endPos), to2 == null && spanTo >= end, span.dir);
          }
          pos = docLine.to + 1;
          if (pos >= endPos)
            break;
        }
      }
    if (horizontal.length == 0)
      addSpan(start, from2 == null, end, to2 == null, view.textDirection);
    return { top: top2, bottom, horizontal };
  }
  function drawForWidget(block, top2) {
    let y = contentRect.top + (top2 ? block.top : block.bottom);
    return { top: y, bottom: y, horizontal: [] };
  }
}
function sameMarker(a, b) {
  return a.constructor == b.constructor && a.eq(b);
}

class LayerView {
  constructor(view, layer) {
    this.view = view;
    this.layer = layer;
    this.drawn = [];
    this.scaleX = 1;
    this.scaleY = 1;
    this.measureReq = { read: this.measure.bind(this), write: this.draw.bind(this) };
    this.dom = view.scrollDOM.appendChild(document.createElement("div"));
    this.dom.classList.add("cm-layer");
    if (layer.above)
      this.dom.classList.add("cm-layer-above");
    if (layer.class)
      this.dom.classList.add(layer.class);
    this.scale();
    this.dom.setAttribute("aria-hidden", "true");
    this.setOrder(view.state);
    view.requestMeasure(this.measureReq);
    if (layer.mount)
      layer.mount(this.dom, view);
  }
  update(update) {
    if (update.startState.facet(layerOrder) != update.state.facet(layerOrder))
      this.setOrder(update.state);
    if (this.layer.update(update, this.dom) || update.geometryChanged) {
      this.scale();
      update.view.requestMeasure(this.measureReq);
    }
  }
  docViewUpdate(view) {
    if (this.layer.updateOnDocViewUpdate !== false)
      view.requestMeasure(this.measureReq);
  }
  setOrder(state) {
    let pos = 0, order = state.facet(layerOrder);
    while (pos < order.length && order[pos] != this.layer)
      pos++;
    this.dom.style.zIndex = String((this.layer.above ? 150 : -1) - pos);
  }
  measure() {
    return this.layer.markers(this.view);
  }
  scale() {
    let { scaleX, scaleY } = this.view;
    if (scaleX != this.scaleX || scaleY != this.scaleY) {
      this.scaleX = scaleX;
      this.scaleY = scaleY;
      this.dom.style.transform = `scale(${1 / scaleX}, ${1 / scaleY})`;
    }
  }
  draw(markers) {
    if (markers.length != this.drawn.length || markers.some((p, i2) => !sameMarker(p, this.drawn[i2]))) {
      let old = this.dom.firstChild, oldI = 0;
      for (let marker of markers) {
        if (marker.update && old && marker.constructor && this.drawn[oldI].constructor && marker.update(old, this.drawn[oldI])) {
          old = old.nextSibling;
          oldI++;
        } else {
          this.dom.insertBefore(marker.draw(), old);
        }
      }
      while (old) {
        let next = old.nextSibling;
        old.remove();
        old = next;
      }
      this.drawn = markers;
      if (browser.safari && browser.safari_version >= 26)
        this.dom.style.display = this.dom.firstChild ? "" : "none";
    }
  }
  destroy() {
    if (this.layer.destroy)
      this.layer.destroy(this.dom, this.view);
    this.dom.remove();
  }
}
var layerOrder = /* @__PURE__ */ Facet.define();
function layer(config) {
  return [
    ViewPlugin.define((v) => new LayerView(v, config)),
    layerOrder.of(config)
  ];
}
var selectionConfig = /* @__PURE__ */ Facet.define({
  combine(configs) {
    return combineConfig(configs, {
      cursorBlinkRate: 1200,
      drawRangeCursor: true
    }, {
      cursorBlinkRate: (a, b) => Math.min(a, b),
      drawRangeCursor: (a, b) => a || b
    });
  }
});
function drawSelection(config = {}) {
  return [
    selectionConfig.of(config),
    cursorLayer,
    selectionLayer,
    hideNativeSelection,
    nativeSelectionHidden.of(true)
  ];
}
function configChanged(update) {
  return update.startState.facet(selectionConfig) != update.state.facet(selectionConfig);
}
var cursorLayer = /* @__PURE__ */ layer({
  above: true,
  markers(view) {
    let { state } = view, conf = state.facet(selectionConfig);
    let cursors = [];
    for (let r of state.selection.ranges) {
      let prim = r == state.selection.main;
      if (r.empty || conf.drawRangeCursor) {
        let className = prim ? "cm-cursor cm-cursor-primary" : "cm-cursor cm-cursor-secondary";
        let cursor = r.empty ? r : EditorSelection.cursor(r.head, r.head > r.anchor ? -1 : 1);
        for (let piece of RectangleMarker.forRange(view, className, cursor))
          cursors.push(piece);
      }
    }
    return cursors;
  },
  update(update, dom) {
    if (update.transactions.some((tr) => tr.selection))
      dom.style.animationName = dom.style.animationName == "cm-blink" ? "cm-blink2" : "cm-blink";
    let confChange = configChanged(update);
    if (confChange)
      setBlinkRate(update.state, dom);
    return update.docChanged || update.selectionSet || confChange;
  },
  mount(dom, view) {
    setBlinkRate(view.state, dom);
  },
  class: "cm-cursorLayer"
});
function setBlinkRate(state, dom) {
  dom.style.animationDuration = state.facet(selectionConfig).cursorBlinkRate + "ms";
}
var selectionLayer = /* @__PURE__ */ layer({
  above: false,
  markers(view) {
    return view.state.selection.ranges.map((r) => r.empty ? [] : RectangleMarker.forRange(view, "cm-selectionBackground", r)).reduce((a, b) => a.concat(b));
  },
  update(update, dom) {
    return update.docChanged || update.selectionSet || update.viewportChanged || configChanged(update);
  },
  class: "cm-selectionLayer"
});
var hideNativeSelection = /* @__PURE__ */ Prec.highest(/* @__PURE__ */ EditorView.theme({
  ".cm-line": {
    "& ::selection, &::selection": { backgroundColor: "transparent !important" },
    caretColor: "transparent !important"
  },
  ".cm-content": {
    caretColor: "transparent !important",
    "& :focus": {
      caretColor: "initial !important",
      "&::selection, & ::selection": {
        backgroundColor: "Highlight !important"
      }
    }
  }
}));
var setDropCursorPos = /* @__PURE__ */ StateEffect.define({
  map(pos, mapping) {
    return pos == null ? null : mapping.mapPos(pos);
  }
});
var dropCursorPos = /* @__PURE__ */ StateField.define({
  create() {
    return null;
  },
  update(pos, tr) {
    if (pos != null)
      pos = tr.changes.mapPos(pos);
    return tr.effects.reduce((pos2, e) => e.is(setDropCursorPos) ? e.value : pos2, pos);
  }
});
var drawDropCursor = /* @__PURE__ */ ViewPlugin.fromClass(class {
  constructor(view) {
    this.view = view;
    this.cursor = null;
    this.measureReq = { read: this.readPos.bind(this), write: this.drawCursor.bind(this) };
  }
  update(update) {
    var _a;
    let cursorPos = update.state.field(dropCursorPos);
    if (cursorPos == null) {
      if (this.cursor != null) {
        (_a = this.cursor) === null || _a === undefined || _a.remove();
        this.cursor = null;
      }
    } else {
      if (!this.cursor) {
        this.cursor = this.view.scrollDOM.appendChild(document.createElement("div"));
        this.cursor.className = "cm-dropCursor";
      }
      if (update.startState.field(dropCursorPos) != cursorPos || update.docChanged || update.geometryChanged)
        this.view.requestMeasure(this.measureReq);
    }
  }
  readPos() {
    let { view } = this;
    let pos = view.state.field(dropCursorPos);
    let rect = pos != null && view.coordsAtPos(pos);
    if (!rect)
      return null;
    let outer = view.scrollDOM.getBoundingClientRect();
    return {
      left: rect.left - outer.left + view.scrollDOM.scrollLeft * view.scaleX,
      top: rect.top - outer.top + view.scrollDOM.scrollTop * view.scaleY,
      height: rect.bottom - rect.top
    };
  }
  drawCursor(pos) {
    if (this.cursor) {
      let { scaleX, scaleY } = this.view;
      if (pos) {
        this.cursor.style.left = pos.left / scaleX + "px";
        this.cursor.style.top = pos.top / scaleY + "px";
        this.cursor.style.height = pos.height / scaleY + "px";
      } else {
        this.cursor.style.left = "-100000px";
      }
    }
  }
  destroy() {
    if (this.cursor)
      this.cursor.remove();
  }
  setDropPos(pos) {
    if (this.view.state.field(dropCursorPos) != pos)
      this.view.dispatch({ effects: setDropCursorPos.of(pos) });
  }
}, {
  eventObservers: {
    dragover(event) {
      this.setDropPos(this.view.posAtCoords({ x: event.clientX, y: event.clientY }));
    },
    dragleave(event) {
      if (event.target == this.view.contentDOM || !this.view.contentDOM.contains(event.relatedTarget))
        this.setDropPos(null);
    },
    dragend() {
      this.setDropPos(null);
    },
    drop() {
      this.setDropPos(null);
    }
  }
});
function dropCursor() {
  return [dropCursorPos, drawDropCursor];
}
function iterMatches(doc2, re, from, to, f) {
  re.lastIndex = 0;
  for (let cursor = doc2.iterRange(from, to), pos = from, m;!cursor.next().done; pos += cursor.value.length) {
    if (!cursor.lineBreak)
      while (m = re.exec(cursor.value))
        f(pos + m.index, m);
  }
}
function matchRanges(view, maxLength) {
  let visible = view.visibleRanges;
  if (visible.length == 1 && visible[0].from == view.viewport.from && visible[0].to == view.viewport.to)
    return visible;
  let result = [];
  for (let { from, to } of visible) {
    from = Math.max(view.state.doc.lineAt(from).from, from - maxLength);
    to = Math.min(view.state.doc.lineAt(to).to, to + maxLength);
    if (result.length && result[result.length - 1].to >= from)
      result[result.length - 1].to = to;
    else
      result.push({ from, to });
  }
  return result;
}

class MatchDecorator {
  constructor(config) {
    const { regexp, decoration, decorate, boundary, maxLength = 1000 } = config;
    if (!regexp.global)
      throw new RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");
    this.regexp = regexp;
    if (decorate) {
      this.addMatch = (match, view, from, add2) => decorate(add2, from, from + match[0].length, match, view);
    } else if (typeof decoration == "function") {
      this.addMatch = (match, view, from, add2) => {
        let deco = decoration(match, view, from);
        if (deco)
          add2(from, from + match[0].length, deco);
      };
    } else if (decoration) {
      this.addMatch = (match, _view, from, add2) => add2(from, from + match[0].length, decoration);
    } else {
      throw new RangeError("Either 'decorate' or 'decoration' should be provided to MatchDecorator");
    }
    this.boundary = boundary;
    this.maxLength = maxLength;
  }
  createDeco(view) {
    let build = new RangeSetBuilder, add2 = build.add.bind(build);
    for (let { from, to } of matchRanges(view, this.maxLength))
      iterMatches(view.state.doc, this.regexp, from, to, (from2, m) => this.addMatch(m, view, from2, add2));
    return build.finish();
  }
  updateDeco(update, deco) {
    let changeFrom = 1e9, changeTo = -1;
    if (update.docChanged)
      update.changes.iterChanges((_f, _t, from, to) => {
        if (to >= update.view.viewport.from && from <= update.view.viewport.to) {
          changeFrom = Math.min(from, changeFrom);
          changeTo = Math.max(to, changeTo);
        }
      });
    if (update.viewportMoved || changeTo - changeFrom > 1000)
      return this.createDeco(update.view);
    if (changeTo > -1)
      return this.updateRange(update.view, deco.map(update.changes), changeFrom, changeTo);
    return deco;
  }
  updateRange(view, deco, updateFrom, updateTo) {
    for (let r of view.visibleRanges) {
      let from = Math.max(r.from, updateFrom), to = Math.min(r.to, updateTo);
      if (to >= from) {
        let fromLine = view.state.doc.lineAt(from), toLine = fromLine.to < to ? view.state.doc.lineAt(to) : fromLine;
        let start = Math.max(r.from, fromLine.from), end = Math.min(r.to, toLine.to);
        if (this.boundary) {
          for (;from > fromLine.from; from--)
            if (this.boundary.test(fromLine.text[from - 1 - fromLine.from])) {
              start = from;
              break;
            }
          for (;to < toLine.to; to++)
            if (this.boundary.test(toLine.text[to - toLine.from])) {
              end = to;
              break;
            }
        }
        let ranges = [], m;
        let add2 = (from2, to2, deco2) => ranges.push(deco2.range(from2, to2));
        if (fromLine == toLine) {
          this.regexp.lastIndex = start - fromLine.from;
          while ((m = this.regexp.exec(fromLine.text)) && m.index < end - fromLine.from)
            this.addMatch(m, view, m.index + fromLine.from, add2);
        } else {
          iterMatches(view.state.doc, this.regexp, start, end, (from2, m2) => this.addMatch(m2, view, from2, add2));
        }
        deco = deco.update({ filterFrom: start, filterTo: end, filter: (from2, to2) => from2 < start || to2 > end, add: ranges });
      }
    }
    return deco;
  }
}
var UnicodeRegexpSupport = /x/.unicode != null ? "gu" : "g";
var Specials = /* @__PURE__ */ new RegExp(`[\x00-\b
-\x1F-\u2028\u2029\uFEFF-]`, UnicodeRegexpSupport);
var Names = {
  0: "null",
  7: "bell",
  8: "backspace",
  10: "newline",
  11: "vertical tab",
  13: "carriage return",
  27: "escape",
  8203: "zero width space",
  8204: "zero width non-joiner",
  8205: "zero width joiner",
  8206: "left-to-right mark",
  8207: "right-to-left mark",
  8232: "line separator",
  8237: "left-to-right override",
  8238: "right-to-left override",
  8294: "left-to-right isolate",
  8295: "right-to-left isolate",
  8297: "pop directional isolate",
  8233: "paragraph separator",
  65279: "zero width no-break space",
  65532: "object replacement"
};
var _supportsTabSize = null;
function supportsTabSize() {
  var _a;
  if (_supportsTabSize == null && typeof document != "undefined" && document.body) {
    let styles = document.body.style;
    _supportsTabSize = ((_a = styles.tabSize) !== null && _a !== undefined ? _a : styles.MozTabSize) != null;
  }
  return _supportsTabSize || false;
}
var specialCharConfig = /* @__PURE__ */ Facet.define({
  combine(configs) {
    let config = combineConfig(configs, {
      render: null,
      specialChars: Specials,
      addSpecialChars: null
    });
    if (config.replaceTabs = !supportsTabSize())
      config.specialChars = new RegExp("\t|" + config.specialChars.source, UnicodeRegexpSupport);
    if (config.addSpecialChars)
      config.specialChars = new RegExp(config.specialChars.source + "|" + config.addSpecialChars.source, UnicodeRegexpSupport);
    return config;
  }
});
function highlightSpecialChars(config = {}) {
  return [specialCharConfig.of(config), specialCharPlugin()];
}
var _plugin = null;
function specialCharPlugin() {
  return _plugin || (_plugin = ViewPlugin.fromClass(class {
    constructor(view) {
      this.view = view;
      this.decorations = Decoration.none;
      this.decorationCache = Object.create(null);
      this.decorator = this.makeDecorator(view.state.facet(specialCharConfig));
      this.decorations = this.decorator.createDeco(view);
    }
    makeDecorator(conf) {
      return new MatchDecorator({
        regexp: conf.specialChars,
        decoration: (m, view, pos) => {
          let { doc: doc2 } = view.state;
          let code2 = codePointAt2(m[0], 0);
          if (code2 == 9) {
            let line = doc2.lineAt(pos);
            let size = view.state.tabSize, col = countColumn(line.text, size, pos - line.from);
            return Decoration.replace({
              widget: new TabWidget((size - col % size) * this.view.defaultCharacterWidth / this.view.scaleX)
            });
          }
          return this.decorationCache[code2] || (this.decorationCache[code2] = Decoration.replace({ widget: new SpecialCharWidget(conf, code2) }));
        },
        boundary: conf.replaceTabs ? undefined : /[^]/
      });
    }
    update(update) {
      let conf = update.state.facet(specialCharConfig);
      if (update.startState.facet(specialCharConfig) != conf) {
        this.decorator = this.makeDecorator(conf);
        this.decorations = this.decorator.createDeco(update.view);
      } else {
        this.decorations = this.decorator.updateDeco(update, this.decorations);
      }
    }
  }, {
    decorations: (v) => v.decorations
  }));
}
var DefaultPlaceholder = "";
function placeholder$1(code2) {
  if (code2 >= 32)
    return DefaultPlaceholder;
  if (code2 == 10)
    return "";
  return String.fromCharCode(9216 + code2);
}

class SpecialCharWidget extends WidgetType {
  constructor(options, code2) {
    super();
    this.options = options;
    this.code = code2;
  }
  eq(other) {
    return other.code == this.code;
  }
  toDOM(view) {
    let ph = placeholder$1(this.code);
    let desc = view.state.phrase("Control character") + " " + (Names[this.code] || "0x" + this.code.toString(16));
    let custom = this.options.render && this.options.render(this.code, desc, ph);
    if (custom)
      return custom;
    let span = document.createElement("span");
    span.textContent = ph;
    span.title = desc;
    span.setAttribute("aria-label", desc);
    span.className = "cm-specialChar";
    return span;
  }
  ignoreEvent() {
    return false;
  }
}

class TabWidget extends WidgetType {
  constructor(width) {
    super();
    this.width = width;
  }
  eq(other) {
    return other.width == this.width;
  }
  toDOM() {
    let span = document.createElement("span");
    span.textContent = "\t";
    span.className = "cm-tab";
    span.style.width = this.width + "px";
    return span;
  }
  ignoreEvent() {
    return false;
  }
}
function highlightActiveLine() {
  return activeLineHighlighter;
}
var lineDeco = /* @__PURE__ */ Decoration.line({ class: "cm-activeLine" });
var activeLineHighlighter = /* @__PURE__ */ ViewPlugin.fromClass(class {
  constructor(view) {
    this.decorations = this.getDeco(view);
  }
  update(update) {
    if (update.docChanged || update.selectionSet)
      this.decorations = this.getDeco(update.view);
  }
  getDeco(view) {
    let lastLineStart = -1, deco = [];
    for (let r of view.state.selection.ranges) {
      let line = view.lineBlockAt(r.head);
      if (line.from > lastLineStart) {
        deco.push(lineDeco.range(line.from));
        lastLineStart = line.from;
      }
    }
    return Decoration.set(deco);
  }
}, {
  decorations: (v) => v.decorations
});
var MaxOff = 2000;
function rectangleFor(state, a, b) {
  let startLine = Math.min(a.line, b.line), endLine = Math.max(a.line, b.line);
  let ranges = [];
  if (a.off > MaxOff || b.off > MaxOff || a.col < 0 || b.col < 0) {
    let startOff = Math.min(a.off, b.off), endOff = Math.max(a.off, b.off);
    for (let i2 = startLine;i2 <= endLine; i2++) {
      let line = state.doc.line(i2);
      if (line.length <= endOff)
        ranges.push(EditorSelection.range(line.from + startOff, line.to + endOff));
    }
  } else {
    let startCol = Math.min(a.col, b.col), endCol = Math.max(a.col, b.col);
    for (let i2 = startLine;i2 <= endLine; i2++) {
      let line = state.doc.line(i2);
      let start = findColumn(line.text, startCol, state.tabSize, true);
      if (start < 0) {
        ranges.push(EditorSelection.cursor(line.to));
      } else {
        let end = findColumn(line.text, endCol, state.tabSize);
        ranges.push(EditorSelection.range(line.from + start, line.from + end));
      }
    }
  }
  return ranges;
}
function absoluteColumn(view, x) {
  let ref = view.coordsAtPos(view.viewport.from);
  return ref ? Math.round(Math.abs((ref.left - x) / view.defaultCharacterWidth)) : -1;
}
function getPos(view, event) {
  let offset = view.posAtCoords({ x: event.clientX, y: event.clientY }, false);
  let line = view.state.doc.lineAt(offset), off = offset - line.from;
  let col = off > MaxOff ? -1 : off == line.length ? absoluteColumn(view, event.clientX) : countColumn(line.text, view.state.tabSize, offset - line.from);
  return { line: line.number, col, off };
}
function rectangleSelectionStyle(view, event) {
  let start = getPos(view, event), startSel = view.state.selection;
  if (!start)
    return null;
  return {
    update(update) {
      if (update.docChanged) {
        let newStart = update.changes.mapPos(update.startState.doc.line(start.line).from);
        let newLine = update.state.doc.lineAt(newStart);
        start = { line: newLine.number, col: start.col, off: Math.min(start.off, newLine.length) };
        startSel = startSel.map(update.changes);
      }
    },
    get(event2, _extend, multiple) {
      let cur = getPos(view, event2);
      if (!cur)
        return startSel;
      let ranges = rectangleFor(view.state, start, cur);
      if (!ranges.length)
        return startSel;
      if (multiple)
        return EditorSelection.create(ranges.concat(startSel.ranges));
      else
        return EditorSelection.create(ranges);
    }
  };
}
function rectangularSelection(options) {
  let filter = (options === null || options === undefined ? undefined : options.eventFilter) || ((e) => e.altKey && e.button == 0);
  return EditorView.mouseSelectionStyle.of((view, event) => filter(event) ? rectangleSelectionStyle(view, event) : null);
}
var keys = {
  Alt: [18, (e) => !!e.altKey],
  Control: [17, (e) => !!e.ctrlKey],
  Shift: [16, (e) => !!e.shiftKey],
  Meta: [91, (e) => !!e.metaKey]
};
var showCrosshair = { style: "cursor: crosshair" };
function crosshairCursor(options = {}) {
  let [code2, getter] = keys[options.key || "Alt"];
  let plugin = ViewPlugin.fromClass(class {
    constructor(view) {
      this.view = view;
      this.isDown = false;
    }
    set(isDown) {
      if (this.isDown != isDown) {
        this.isDown = isDown;
        this.view.update([]);
      }
    }
  }, {
    eventObservers: {
      keydown(e) {
        this.set(e.keyCode == code2 || getter(e));
      },
      keyup(e) {
        if (e.keyCode == code2 || !getter(e))
          this.set(false);
      },
      mousemove(e) {
        this.set(getter(e));
      }
    }
  });
  return [
    plugin,
    EditorView.contentAttributes.of((view) => {
      var _a;
      return ((_a = view.plugin(plugin)) === null || _a === undefined ? undefined : _a.isDown) ? showCrosshair : null;
    })
  ];
}
var Outside = "-10000px";

class TooltipViewManager {
  constructor(view, facet, createTooltipView, removeTooltipView) {
    this.facet = facet;
    this.createTooltipView = createTooltipView;
    this.removeTooltipView = removeTooltipView;
    this.input = view.state.facet(facet);
    this.tooltips = this.input.filter((t) => t);
    let prev = null;
    this.tooltipViews = this.tooltips.map((t) => prev = createTooltipView(t, prev));
  }
  update(update, above) {
    var _a;
    let input = update.state.facet(this.facet);
    let tooltips = input.filter((x) => x);
    if (input === this.input) {
      for (let t of this.tooltipViews)
        if (t.update)
          t.update(update);
      return false;
    }
    let tooltipViews = [], newAbove = above ? [] : null;
    for (let i2 = 0;i2 < tooltips.length; i2++) {
      let tip = tooltips[i2], known = -1;
      if (!tip)
        continue;
      for (let i3 = 0;i3 < this.tooltips.length; i3++) {
        let other = this.tooltips[i3];
        if (other && other.create == tip.create)
          known = i3;
      }
      if (known < 0) {
        tooltipViews[i2] = this.createTooltipView(tip, i2 ? tooltipViews[i2 - 1] : null);
        if (newAbove)
          newAbove[i2] = !!tip.above;
      } else {
        let tooltipView = tooltipViews[i2] = this.tooltipViews[known];
        if (newAbove)
          newAbove[i2] = above[known];
        if (tooltipView.update)
          tooltipView.update(update);
      }
    }
    for (let t of this.tooltipViews)
      if (tooltipViews.indexOf(t) < 0) {
        this.removeTooltipView(t);
        (_a = t.destroy) === null || _a === undefined || _a.call(t);
      }
    if (above) {
      newAbove.forEach((val, i2) => above[i2] = val);
      above.length = newAbove.length;
    }
    this.input = input;
    this.tooltips = tooltips;
    this.tooltipViews = tooltipViews;
    return true;
  }
}
function windowSpace(view) {
  let docElt = view.dom.ownerDocument.documentElement;
  return { top: 0, left: 0, bottom: docElt.clientHeight, right: docElt.clientWidth };
}
var tooltipConfig = /* @__PURE__ */ Facet.define({
  combine: (values) => {
    var _a, _b, _c;
    return {
      position: browser.ios ? "absolute" : ((_a = values.find((conf) => conf.position)) === null || _a === undefined ? undefined : _a.position) || "fixed",
      parent: ((_b = values.find((conf) => conf.parent)) === null || _b === undefined ? undefined : _b.parent) || null,
      tooltipSpace: ((_c = values.find((conf) => conf.tooltipSpace)) === null || _c === undefined ? undefined : _c.tooltipSpace) || windowSpace
    };
  }
});
var knownHeight = /* @__PURE__ */ new WeakMap;
var tooltipPlugin = /* @__PURE__ */ ViewPlugin.fromClass(class {
  constructor(view) {
    this.view = view;
    this.above = [];
    this.inView = true;
    this.madeAbsolute = false;
    this.lastTransaction = 0;
    this.measureTimeout = -1;
    let config = view.state.facet(tooltipConfig);
    this.position = config.position;
    this.parent = config.parent;
    this.classes = view.themeClasses;
    this.createContainer();
    this.measureReq = { read: this.readMeasure.bind(this), write: this.writeMeasure.bind(this), key: this };
    this.resizeObserver = typeof ResizeObserver == "function" ? new ResizeObserver(() => this.measureSoon()) : null;
    this.manager = new TooltipViewManager(view, showTooltip, (t, p) => this.createTooltip(t, p), (t) => {
      if (this.resizeObserver)
        this.resizeObserver.unobserve(t.dom);
      t.dom.remove();
    });
    this.above = this.manager.tooltips.map((t) => !!t.above);
    this.intersectionObserver = typeof IntersectionObserver == "function" ? new IntersectionObserver((entries) => {
      if (Date.now() > this.lastTransaction - 50 && entries.length > 0 && entries[entries.length - 1].intersectionRatio < 1)
        this.measureSoon();
    }, { threshold: [1] }) : null;
    this.observeIntersection();
    view.win.addEventListener("resize", this.measureSoon = this.measureSoon.bind(this));
    this.maybeMeasure();
  }
  createContainer() {
    if (this.parent) {
      this.container = document.createElement("div");
      this.container.style.position = "relative";
      this.container.className = this.view.themeClasses;
      this.parent.appendChild(this.container);
    } else {
      this.container = this.view.dom;
    }
  }
  observeIntersection() {
    if (this.intersectionObserver) {
      this.intersectionObserver.disconnect();
      for (let tooltip of this.manager.tooltipViews)
        this.intersectionObserver.observe(tooltip.dom);
    }
  }
  measureSoon() {
    if (this.measureTimeout < 0)
      this.measureTimeout = setTimeout(() => {
        this.measureTimeout = -1;
        this.maybeMeasure();
      }, 50);
  }
  update(update) {
    if (update.transactions.length)
      this.lastTransaction = Date.now();
    let updated = this.manager.update(update, this.above);
    if (updated)
      this.observeIntersection();
    let shouldMeasure = updated || update.geometryChanged;
    let newConfig = update.state.facet(tooltipConfig);
    if (newConfig.position != this.position && !this.madeAbsolute) {
      this.position = newConfig.position;
      for (let t of this.manager.tooltipViews)
        t.dom.style.position = this.position;
      shouldMeasure = true;
    }
    if (newConfig.parent != this.parent) {
      if (this.parent)
        this.container.remove();
      this.parent = newConfig.parent;
      this.createContainer();
      for (let t of this.manager.tooltipViews)
        this.container.appendChild(t.dom);
      shouldMeasure = true;
    } else if (this.parent && this.view.themeClasses != this.classes) {
      this.classes = this.container.className = this.view.themeClasses;
    }
    if (shouldMeasure)
      this.maybeMeasure();
  }
  createTooltip(tooltip, prev) {
    let tooltipView = tooltip.create(this.view);
    let before = prev ? prev.dom : null;
    tooltipView.dom.classList.add("cm-tooltip");
    if (tooltip.arrow && !tooltipView.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")) {
      let arrow = document.createElement("div");
      arrow.className = "cm-tooltip-arrow";
      tooltipView.dom.appendChild(arrow);
    }
    tooltipView.dom.style.position = this.position;
    tooltipView.dom.style.top = Outside;
    tooltipView.dom.style.left = "0px";
    this.container.insertBefore(tooltipView.dom, before);
    if (tooltipView.mount)
      tooltipView.mount(this.view);
    if (this.resizeObserver)
      this.resizeObserver.observe(tooltipView.dom);
    return tooltipView;
  }
  destroy() {
    var _a, _b, _c;
    this.view.win.removeEventListener("resize", this.measureSoon);
    for (let tooltipView of this.manager.tooltipViews) {
      tooltipView.dom.remove();
      (_a = tooltipView.destroy) === null || _a === undefined || _a.call(tooltipView);
    }
    if (this.parent)
      this.container.remove();
    (_b = this.resizeObserver) === null || _b === undefined || _b.disconnect();
    (_c = this.intersectionObserver) === null || _c === undefined || _c.disconnect();
    clearTimeout(this.measureTimeout);
  }
  readMeasure() {
    let scaleX = 1, scaleY = 1, makeAbsolute = false;
    if (this.position == "fixed" && this.manager.tooltipViews.length) {
      let { dom } = this.manager.tooltipViews[0];
      if (browser.safari) {
        let rect = dom.getBoundingClientRect();
        makeAbsolute = Math.abs(rect.top + 1e4) > 1 || Math.abs(rect.left) > 1;
      } else {
        makeAbsolute = !!dom.offsetParent && dom.offsetParent != this.container.ownerDocument.body;
      }
    }
    if (makeAbsolute || this.position == "absolute") {
      if (this.parent) {
        let rect = this.parent.getBoundingClientRect();
        if (rect.width && rect.height) {
          scaleX = rect.width / this.parent.offsetWidth;
          scaleY = rect.height / this.parent.offsetHeight;
        }
      } else {
        ({ scaleX, scaleY } = this.view.viewState);
      }
    }
    let visible = this.view.scrollDOM.getBoundingClientRect(), margins = getScrollMargins(this.view);
    return {
      visible: {
        left: visible.left + margins.left,
        top: visible.top + margins.top,
        right: visible.right - margins.right,
        bottom: visible.bottom - margins.bottom
      },
      parent: this.parent ? this.container.getBoundingClientRect() : this.view.dom.getBoundingClientRect(),
      pos: this.manager.tooltips.map((t, i2) => {
        let tv = this.manager.tooltipViews[i2];
        return tv.getCoords ? tv.getCoords(t.pos) : this.view.coordsAtPos(t.pos);
      }),
      size: this.manager.tooltipViews.map(({ dom }) => dom.getBoundingClientRect()),
      space: this.view.state.facet(tooltipConfig).tooltipSpace(this.view),
      scaleX,
      scaleY,
      makeAbsolute
    };
  }
  writeMeasure(measured) {
    var _a;
    if (measured.makeAbsolute) {
      this.madeAbsolute = true;
      this.position = "absolute";
      for (let t of this.manager.tooltipViews)
        t.dom.style.position = "absolute";
    }
    let { visible, space, scaleX, scaleY } = measured;
    let others = [];
    for (let i2 = 0;i2 < this.manager.tooltips.length; i2++) {
      let tooltip = this.manager.tooltips[i2], tView = this.manager.tooltipViews[i2], { dom } = tView;
      let pos = measured.pos[i2], size = measured.size[i2];
      if (!pos || tooltip.clip !== false && (pos.bottom <= Math.max(visible.top, space.top) || pos.top >= Math.min(visible.bottom, space.bottom) || pos.right < Math.max(visible.left, space.left) - 0.1 || pos.left > Math.min(visible.right, space.right) + 0.1)) {
        dom.style.top = Outside;
        continue;
      }
      let arrow = tooltip.arrow ? tView.dom.querySelector(".cm-tooltip-arrow") : null;
      let arrowHeight = arrow ? 7 : 0;
      let width = size.right - size.left, height = (_a = knownHeight.get(tView)) !== null && _a !== undefined ? _a : size.bottom - size.top;
      let offset = tView.offset || noOffset, ltr = this.view.textDirection == Direction.LTR;
      let left = size.width > space.right - space.left ? ltr ? space.left : space.right - size.width : ltr ? Math.max(space.left, Math.min(pos.left - (arrow ? 14 : 0) + offset.x, space.right - width)) : Math.min(Math.max(space.left, pos.left - width + (arrow ? 14 : 0) - offset.x), space.right - width);
      let above = this.above[i2];
      if (!tooltip.strictSide && (above ? pos.top - height - arrowHeight - offset.y < space.top : pos.bottom + height + arrowHeight + offset.y > space.bottom) && above == space.bottom - pos.bottom > pos.top - space.top)
        above = this.above[i2] = !above;
      let spaceVert = (above ? pos.top - space.top : space.bottom - pos.bottom) - arrowHeight;
      if (spaceVert < height && tView.resize !== false) {
        if (spaceVert < this.view.defaultLineHeight) {
          dom.style.top = Outside;
          continue;
        }
        knownHeight.set(tView, height);
        dom.style.height = (height = spaceVert) / scaleY + "px";
      } else if (dom.style.height) {
        dom.style.height = "";
      }
      let top2 = above ? pos.top - height - arrowHeight - offset.y : pos.bottom + arrowHeight + offset.y;
      let right = left + width;
      if (tView.overlap !== true) {
        for (let r of others)
          if (r.left < right && r.right > left && r.top < top2 + height && r.bottom > top2)
            top2 = above ? r.top - height - 2 - arrowHeight : r.bottom + arrowHeight + 2;
      }
      if (this.position == "absolute") {
        dom.style.top = (top2 - measured.parent.top) / scaleY + "px";
        setLeftStyle(dom, (left - measured.parent.left) / scaleX);
      } else {
        dom.style.top = top2 / scaleY + "px";
        setLeftStyle(dom, left / scaleX);
      }
      if (arrow) {
        let arrowLeft = pos.left + (ltr ? offset.x : -offset.x) - (left + 14 - 7);
        arrow.style.left = arrowLeft / scaleX + "px";
      }
      if (tView.overlap !== true)
        others.push({ left, top: top2, right, bottom: top2 + height });
      dom.classList.toggle("cm-tooltip-above", above);
      dom.classList.toggle("cm-tooltip-below", !above);
      if (tView.positioned)
        tView.positioned(measured.space);
    }
  }
  maybeMeasure() {
    if (this.manager.tooltips.length) {
      if (this.view.inView)
        this.view.requestMeasure(this.measureReq);
      if (this.inView != this.view.inView) {
        this.inView = this.view.inView;
        if (!this.inView)
          for (let tv of this.manager.tooltipViews)
            tv.dom.style.top = Outside;
      }
    }
  }
}, {
  eventObservers: {
    scroll() {
      this.maybeMeasure();
    }
  }
});
function setLeftStyle(elt, value) {
  let current = parseInt(elt.style.left, 10);
  if (isNaN(current) || Math.abs(value - current) > 1)
    elt.style.left = value + "px";
}
var baseTheme = /* @__PURE__ */ EditorView.baseTheme({
  ".cm-tooltip": {
    zIndex: 500,
    boxSizing: "border-box"
  },
  "&light .cm-tooltip": {
    border: "1px solid #bbb",
    backgroundColor: "#f5f5f5"
  },
  "&light .cm-tooltip-section:not(:first-child)": {
    borderTop: "1px solid #bbb"
  },
  "&dark .cm-tooltip": {
    backgroundColor: "#333338",
    color: "white"
  },
  ".cm-tooltip-arrow": {
    height: `${7}px`,
    width: `${7 * 2}px`,
    position: "absolute",
    zIndex: -1,
    overflow: "hidden",
    "&:before, &:after": {
      content: "''",
      position: "absolute",
      width: 0,
      height: 0,
      borderLeft: `${7}px solid transparent`,
      borderRight: `${7}px solid transparent`
    },
    ".cm-tooltip-above &": {
      bottom: `-${7}px`,
      "&:before": {
        borderTop: `${7}px solid #bbb`
      },
      "&:after": {
        borderTop: `${7}px solid #f5f5f5`,
        bottom: "1px"
      }
    },
    ".cm-tooltip-below &": {
      top: `-${7}px`,
      "&:before": {
        borderBottom: `${7}px solid #bbb`
      },
      "&:after": {
        borderBottom: `${7}px solid #f5f5f5`,
        top: "1px"
      }
    }
  },
  "&dark .cm-tooltip .cm-tooltip-arrow": {
    "&:before": {
      borderTopColor: "#333338",
      borderBottomColor: "#333338"
    },
    "&:after": {
      borderTopColor: "transparent",
      borderBottomColor: "transparent"
    }
  }
});
var noOffset = { x: 0, y: 0 };
var showTooltip = /* @__PURE__ */ Facet.define({
  enables: [tooltipPlugin, baseTheme]
});
var showHoverTooltip = /* @__PURE__ */ Facet.define({
  combine: (inputs) => inputs.reduce((a, i2) => a.concat(i2), [])
});

class HoverTooltipHost {
  static create(view) {
    return new HoverTooltipHost(view);
  }
  constructor(view) {
    this.view = view;
    this.mounted = false;
    this.dom = document.createElement("div");
    this.dom.classList.add("cm-tooltip-hover");
    this.manager = new TooltipViewManager(view, showHoverTooltip, (t, p) => this.createHostedView(t, p), (t) => t.dom.remove());
  }
  createHostedView(tooltip, prev) {
    let hostedView = tooltip.create(this.view);
    hostedView.dom.classList.add("cm-tooltip-section");
    this.dom.insertBefore(hostedView.dom, prev ? prev.dom.nextSibling : this.dom.firstChild);
    if (this.mounted && hostedView.mount)
      hostedView.mount(this.view);
    return hostedView;
  }
  mount(view) {
    for (let hostedView of this.manager.tooltipViews) {
      if (hostedView.mount)
        hostedView.mount(view);
    }
    this.mounted = true;
  }
  positioned(space) {
    for (let hostedView of this.manager.tooltipViews) {
      if (hostedView.positioned)
        hostedView.positioned(space);
    }
  }
  update(update) {
    this.manager.update(update);
  }
  destroy() {
    var _a;
    for (let t of this.manager.tooltipViews)
      (_a = t.destroy) === null || _a === undefined || _a.call(t);
  }
  passProp(name) {
    let value = undefined;
    for (let view of this.manager.tooltipViews) {
      let given = view[name];
      if (given !== undefined) {
        if (value === undefined)
          value = given;
        else if (value !== given)
          return;
      }
    }
    return value;
  }
  get offset() {
    return this.passProp("offset");
  }
  get getCoords() {
    return this.passProp("getCoords");
  }
  get overlap() {
    return this.passProp("overlap");
  }
  get resize() {
    return this.passProp("resize");
  }
}
var showHoverTooltipHost = /* @__PURE__ */ showTooltip.compute([showHoverTooltip], (state) => {
  let tooltips = state.facet(showHoverTooltip);
  if (tooltips.length === 0)
    return null;
  return {
    pos: Math.min(...tooltips.map((t) => t.pos)),
    end: Math.max(...tooltips.map((t) => {
      var _a;
      return (_a = t.end) !== null && _a !== undefined ? _a : t.pos;
    })),
    create: HoverTooltipHost.create,
    above: tooltips[0].above,
    arrow: tooltips.some((t) => t.arrow)
  };
});

class HoverPlugin {
  constructor(view, source, field, setHover, hoverTime) {
    this.view = view;
    this.source = source;
    this.field = field;
    this.setHover = setHover;
    this.hoverTime = hoverTime;
    this.hoverTimeout = -1;
    this.restartTimeout = -1;
    this.pending = null;
    this.lastMove = { x: 0, y: 0, target: view.dom, time: 0 };
    this.checkHover = this.checkHover.bind(this);
    view.dom.addEventListener("mouseleave", this.mouseleave = this.mouseleave.bind(this));
    view.dom.addEventListener("mousemove", this.mousemove = this.mousemove.bind(this));
  }
  update() {
    if (this.pending) {
      this.pending = null;
      clearTimeout(this.restartTimeout);
      this.restartTimeout = setTimeout(() => this.startHover(), 20);
    }
  }
  get active() {
    return this.view.state.field(this.field);
  }
  checkHover() {
    this.hoverTimeout = -1;
    if (this.active.length)
      return;
    let hovered = Date.now() - this.lastMove.time;
    if (hovered < this.hoverTime)
      this.hoverTimeout = setTimeout(this.checkHover, this.hoverTime - hovered);
    else
      this.startHover();
  }
  startHover() {
    clearTimeout(this.restartTimeout);
    let { view, lastMove } = this;
    let tile = view.docView.tile.nearest(lastMove.target);
    if (!tile)
      return;
    let pos, side = 1;
    if (tile.isWidget()) {
      pos = tile.posAtStart;
    } else {
      pos = view.posAtCoords(lastMove);
      if (pos == null)
        return;
      let posCoords = view.coordsAtPos(pos);
      if (!posCoords || lastMove.y < posCoords.top || lastMove.y > posCoords.bottom || lastMove.x < posCoords.left - view.defaultCharacterWidth || lastMove.x > posCoords.right + view.defaultCharacterWidth)
        return;
      let bidi = view.bidiSpans(view.state.doc.lineAt(pos)).find((s) => s.from <= pos && s.to >= pos);
      let rtl = bidi && bidi.dir == Direction.RTL ? -1 : 1;
      side = lastMove.x < posCoords.left ? -rtl : rtl;
    }
    let open = this.source(view, pos, side);
    if (open === null || open === undefined ? undefined : open.then) {
      let pending = this.pending = { pos };
      open.then((result) => {
        if (this.pending == pending) {
          this.pending = null;
          if (result && !(Array.isArray(result) && !result.length))
            view.dispatch({ effects: this.setHover.of(Array.isArray(result) ? result : [result]) });
        }
      }, (e) => logException(view.state, e, "hover tooltip"));
    } else if (open && !(Array.isArray(open) && !open.length)) {
      view.dispatch({ effects: this.setHover.of(Array.isArray(open) ? open : [open]) });
    }
  }
  get tooltip() {
    let plugin = this.view.plugin(tooltipPlugin);
    let index = plugin ? plugin.manager.tooltips.findIndex((t) => t.create == HoverTooltipHost.create) : -1;
    return index > -1 ? plugin.manager.tooltipViews[index] : null;
  }
  mousemove(event) {
    var _a, _b;
    this.lastMove = { x: event.clientX, y: event.clientY, target: event.target, time: Date.now() };
    if (this.hoverTimeout < 0)
      this.hoverTimeout = setTimeout(this.checkHover, this.hoverTime);
    let { active, tooltip } = this;
    if (active.length && tooltip && !isInTooltip(tooltip.dom, event) || this.pending) {
      let { pos } = active[0] || this.pending, end = (_b = (_a = active[0]) === null || _a === undefined ? undefined : _a.end) !== null && _b !== undefined ? _b : pos;
      if (pos == end ? this.view.posAtCoords(this.lastMove) != pos : !isOverRange(this.view, pos, end, event.clientX, event.clientY)) {
        this.view.dispatch({ effects: this.setHover.of([]) });
        this.pending = null;
      }
    }
  }
  mouseleave(event) {
    clearTimeout(this.hoverTimeout);
    this.hoverTimeout = -1;
    let { active } = this;
    if (active.length) {
      let { tooltip } = this;
      let inTooltip = tooltip && tooltip.dom.contains(event.relatedTarget);
      if (!inTooltip)
        this.view.dispatch({ effects: this.setHover.of([]) });
      else
        this.watchTooltipLeave(tooltip.dom);
    }
  }
  watchTooltipLeave(tooltip) {
    let watch = (event) => {
      tooltip.removeEventListener("mouseleave", watch);
      if (this.active.length && !this.view.dom.contains(event.relatedTarget))
        this.view.dispatch({ effects: this.setHover.of([]) });
    };
    tooltip.addEventListener("mouseleave", watch);
  }
  destroy() {
    clearTimeout(this.hoverTimeout);
    this.view.dom.removeEventListener("mouseleave", this.mouseleave);
    this.view.dom.removeEventListener("mousemove", this.mousemove);
  }
}
var tooltipMargin = 4;
function isInTooltip(tooltip, event) {
  let { left, right, top: top2, bottom } = tooltip.getBoundingClientRect(), arrow;
  if (arrow = tooltip.querySelector(".cm-tooltip-arrow")) {
    let arrowRect = arrow.getBoundingClientRect();
    top2 = Math.min(arrowRect.top, top2);
    bottom = Math.max(arrowRect.bottom, bottom);
  }
  return event.clientX >= left - tooltipMargin && event.clientX <= right + tooltipMargin && event.clientY >= top2 - tooltipMargin && event.clientY <= bottom + tooltipMargin;
}
function isOverRange(view, from, to, x, y, margin) {
  let rect = view.scrollDOM.getBoundingClientRect();
  let docBottom = view.documentTop + view.documentPadding.top + view.contentHeight;
  if (rect.left > x || rect.right < x || rect.top > y || Math.min(rect.bottom, docBottom) < y)
    return false;
  let pos = view.posAtCoords({ x, y }, false);
  return pos >= from && pos <= to;
}
function hoverTooltip(source, options = {}) {
  let setHover = StateEffect.define();
  let hoverState = StateField.define({
    create() {
      return [];
    },
    update(value, tr) {
      if (value.length) {
        if (options.hideOnChange && (tr.docChanged || tr.selection))
          value = [];
        else if (options.hideOn)
          value = value.filter((v) => !options.hideOn(tr, v));
        if (tr.docChanged) {
          let mapped = [];
          for (let tooltip of value) {
            let newPos = tr.changes.mapPos(tooltip.pos, -1, MapMode.TrackDel);
            if (newPos != null) {
              let copy = Object.assign(Object.create(null), tooltip);
              copy.pos = newPos;
              if (copy.end != null)
                copy.end = tr.changes.mapPos(copy.end);
              mapped.push(copy);
            }
          }
          value = mapped;
        }
      }
      for (let effect of tr.effects) {
        if (effect.is(setHover))
          value = effect.value;
        if (effect.is(closeHoverTooltipEffect))
          value = [];
      }
      return value;
    },
    provide: (f) => showHoverTooltip.from(f)
  });
  return {
    active: hoverState,
    extension: [
      hoverState,
      ViewPlugin.define((view) => new HoverPlugin(view, source, hoverState, setHover, options.hoverTime || 300)),
      showHoverTooltipHost
    ]
  };
}
function getTooltip(view, tooltip) {
  let plugin = view.plugin(tooltipPlugin);
  if (!plugin)
    return null;
  let found = plugin.manager.tooltips.indexOf(tooltip);
  return found < 0 ? null : plugin.manager.tooltipViews[found];
}
var closeHoverTooltipEffect = /* @__PURE__ */ StateEffect.define();
var panelConfig = /* @__PURE__ */ Facet.define({
  combine(configs) {
    let topContainer, bottomContainer;
    for (let c of configs) {
      topContainer = topContainer || c.topContainer;
      bottomContainer = bottomContainer || c.bottomContainer;
    }
    return { topContainer, bottomContainer };
  }
});
function getPanel(view, panel) {
  let plugin = view.plugin(panelPlugin);
  let index = plugin ? plugin.specs.indexOf(panel) : -1;
  return index > -1 ? plugin.panels[index] : null;
}
var panelPlugin = /* @__PURE__ */ ViewPlugin.fromClass(class {
  constructor(view) {
    this.input = view.state.facet(showPanel);
    this.specs = this.input.filter((s) => s);
    this.panels = this.specs.map((spec) => spec(view));
    let conf = view.state.facet(panelConfig);
    this.top = new PanelGroup(view, true, conf.topContainer);
    this.bottom = new PanelGroup(view, false, conf.bottomContainer);
    this.top.sync(this.panels.filter((p) => p.top));
    this.bottom.sync(this.panels.filter((p) => !p.top));
    for (let p of this.panels) {
      p.dom.classList.add("cm-panel");
      if (p.mount)
        p.mount();
    }
  }
  update(update) {
    let conf = update.state.facet(panelConfig);
    if (this.top.container != conf.topContainer) {
      this.top.sync([]);
      this.top = new PanelGroup(update.view, true, conf.topContainer);
    }
    if (this.bottom.container != conf.bottomContainer) {
      this.bottom.sync([]);
      this.bottom = new PanelGroup(update.view, false, conf.bottomContainer);
    }
    this.top.syncClasses();
    this.bottom.syncClasses();
    let input = update.state.facet(showPanel);
    if (input != this.input) {
      let specs = input.filter((x) => x);
      let panels = [], top2 = [], bottom = [], mount = [];
      for (let spec of specs) {
        let known = this.specs.indexOf(spec), panel;
        if (known < 0) {
          panel = spec(update.view);
          mount.push(panel);
        } else {
          panel = this.panels[known];
          if (panel.update)
            panel.update(update);
        }
        panels.push(panel);
        (panel.top ? top2 : bottom).push(panel);
      }
      this.specs = specs;
      this.panels = panels;
      this.top.sync(top2);
      this.bottom.sync(bottom);
      for (let p of mount) {
        p.dom.classList.add("cm-panel");
        if (p.mount)
          p.mount();
      }
    } else {
      for (let p of this.panels)
        if (p.update)
          p.update(update);
    }
  }
  destroy() {
    this.top.sync([]);
    this.bottom.sync([]);
  }
}, {
  provide: (plugin) => EditorView.scrollMargins.of((view) => {
    let value = view.plugin(plugin);
    return value && { top: value.top.scrollMargin(), bottom: value.bottom.scrollMargin() };
  })
});

class PanelGroup {
  constructor(view, top2, container) {
    this.view = view;
    this.top = top2;
    this.container = container;
    this.dom = undefined;
    this.classes = "";
    this.panels = [];
    this.syncClasses();
  }
  sync(panels) {
    for (let p of this.panels)
      if (p.destroy && panels.indexOf(p) < 0)
        p.destroy();
    this.panels = panels;
    this.syncDOM();
  }
  syncDOM() {
    if (this.panels.length == 0) {
      if (this.dom) {
        this.dom.remove();
        this.dom = undefined;
      }
      return;
    }
    if (!this.dom) {
      this.dom = document.createElement("div");
      this.dom.className = this.top ? "cm-panels cm-panels-top" : "cm-panels cm-panels-bottom";
      this.dom.style[this.top ? "top" : "bottom"] = "0";
      let parent = this.container || this.view.dom;
      parent.insertBefore(this.dom, this.top ? parent.firstChild : null);
    }
    let curDOM = this.dom.firstChild;
    for (let panel of this.panels) {
      if (panel.dom.parentNode == this.dom) {
        while (curDOM != panel.dom)
          curDOM = rm(curDOM);
        curDOM = curDOM.nextSibling;
      } else {
        this.dom.insertBefore(panel.dom, curDOM);
      }
    }
    while (curDOM)
      curDOM = rm(curDOM);
  }
  scrollMargin() {
    return !this.dom || this.container ? 0 : Math.max(0, this.top ? this.dom.getBoundingClientRect().bottom - Math.max(0, this.view.scrollDOM.getBoundingClientRect().top) : Math.min(innerHeight, this.view.scrollDOM.getBoundingClientRect().bottom) - this.dom.getBoundingClientRect().top);
  }
  syncClasses() {
    if (!this.container || this.classes == this.view.themeClasses)
      return;
    for (let cls of this.classes.split(" "))
      if (cls)
        this.container.classList.remove(cls);
    for (let cls of (this.classes = this.view.themeClasses).split(" "))
      if (cls)
        this.container.classList.add(cls);
  }
}
function rm(node) {
  let next = node.nextSibling;
  node.remove();
  return next;
}
var showPanel = /* @__PURE__ */ Facet.define({
  enables: panelPlugin
});
class GutterMarker extends RangeValue {
  compare(other) {
    return this == other || this.constructor == other.constructor && this.eq(other);
  }
  eq(other) {
    return false;
  }
  destroy(dom) {}
}
GutterMarker.prototype.elementClass = "";
GutterMarker.prototype.toDOM = undefined;
GutterMarker.prototype.mapMode = MapMode.TrackBefore;
GutterMarker.prototype.startSide = GutterMarker.prototype.endSide = -1;
GutterMarker.prototype.point = true;
var gutterLineClass = /* @__PURE__ */ Facet.define();
var gutterWidgetClass = /* @__PURE__ */ Facet.define();
var defaults = {
  class: "",
  renderEmptyElements: false,
  elementStyle: "",
  markers: () => RangeSet.empty,
  lineMarker: () => null,
  widgetMarker: () => null,
  lineMarkerChange: null,
  initialSpacer: null,
  updateSpacer: null,
  domEventHandlers: {},
  side: "before"
};
var activeGutters = /* @__PURE__ */ Facet.define();
function gutter(config) {
  return [gutters(), activeGutters.of({ ...defaults, ...config })];
}
var unfixGutters = /* @__PURE__ */ Facet.define({
  combine: (values) => values.some((x) => x)
});
function gutters(config) {
  let result = [
    gutterView
  ];
  if (config && config.fixed === false)
    result.push(unfixGutters.of(true));
  return result;
}
var gutterView = /* @__PURE__ */ ViewPlugin.fromClass(class {
  constructor(view) {
    this.view = view;
    this.domAfter = null;
    this.prevViewport = view.viewport;
    this.dom = document.createElement("div");
    this.dom.className = "cm-gutters cm-gutters-before";
    this.dom.setAttribute("aria-hidden", "true");
    this.dom.style.minHeight = this.view.contentHeight / this.view.scaleY + "px";
    this.gutters = view.state.facet(activeGutters).map((conf) => new SingleGutterView(view, conf));
    this.fixed = !view.state.facet(unfixGutters);
    for (let gutter2 of this.gutters) {
      if (gutter2.config.side == "after")
        this.getDOMAfter().appendChild(gutter2.dom);
      else
        this.dom.appendChild(gutter2.dom);
    }
    if (this.fixed) {
      this.dom.style.position = "sticky";
    }
    this.syncGutters(false);
    view.scrollDOM.insertBefore(this.dom, view.contentDOM);
  }
  getDOMAfter() {
    if (!this.domAfter) {
      this.domAfter = document.createElement("div");
      this.domAfter.className = "cm-gutters cm-gutters-after";
      this.domAfter.setAttribute("aria-hidden", "true");
      this.domAfter.style.minHeight = this.view.contentHeight / this.view.scaleY + "px";
      this.domAfter.style.position = this.fixed ? "sticky" : "";
      this.view.scrollDOM.appendChild(this.domAfter);
    }
    return this.domAfter;
  }
  update(update) {
    if (this.updateGutters(update)) {
      let vpA = this.prevViewport, vpB = update.view.viewport;
      let vpOverlap = Math.min(vpA.to, vpB.to) - Math.max(vpA.from, vpB.from);
      this.syncGutters(vpOverlap < (vpB.to - vpB.from) * 0.8);
    }
    if (update.geometryChanged) {
      let min = this.view.contentHeight / this.view.scaleY + "px";
      this.dom.style.minHeight = min;
      if (this.domAfter)
        this.domAfter.style.minHeight = min;
    }
    if (this.view.state.facet(unfixGutters) != !this.fixed) {
      this.fixed = !this.fixed;
      this.dom.style.position = this.fixed ? "sticky" : "";
      if (this.domAfter)
        this.domAfter.style.position = this.fixed ? "sticky" : "";
    }
    this.prevViewport = update.view.viewport;
  }
  syncGutters(detach) {
    let after = this.dom.nextSibling;
    if (detach) {
      this.dom.remove();
      if (this.domAfter)
        this.domAfter.remove();
    }
    let lineClasses = RangeSet.iter(this.view.state.facet(gutterLineClass), this.view.viewport.from);
    let classSet = [];
    let contexts = this.gutters.map((gutter2) => new UpdateContext(gutter2, this.view.viewport, -this.view.documentPadding.top));
    for (let line of this.view.viewportLineBlocks) {
      if (classSet.length)
        classSet = [];
      if (Array.isArray(line.type)) {
        let first = true;
        for (let b of line.type) {
          if (b.type == BlockType.Text && first) {
            advanceCursor(lineClasses, classSet, b.from);
            for (let cx of contexts)
              cx.line(this.view, b, classSet);
            first = false;
          } else if (b.widget) {
            for (let cx of contexts)
              cx.widget(this.view, b);
          }
        }
      } else if (line.type == BlockType.Text) {
        advanceCursor(lineClasses, classSet, line.from);
        for (let cx of contexts)
          cx.line(this.view, line, classSet);
      } else if (line.widget) {
        for (let cx of contexts)
          cx.widget(this.view, line);
      }
    }
    for (let cx of contexts)
      cx.finish();
    if (detach) {
      this.view.scrollDOM.insertBefore(this.dom, after);
      if (this.domAfter)
        this.view.scrollDOM.appendChild(this.domAfter);
    }
  }
  updateGutters(update) {
    let prev = update.startState.facet(activeGutters), cur = update.state.facet(activeGutters);
    let change = update.docChanged || update.heightChanged || update.viewportChanged || !RangeSet.eq(update.startState.facet(gutterLineClass), update.state.facet(gutterLineClass), update.view.viewport.from, update.view.viewport.to);
    if (prev == cur) {
      for (let gutter2 of this.gutters)
        if (gutter2.update(update))
          change = true;
    } else {
      change = true;
      let gutters2 = [];
      for (let conf of cur) {
        let known = prev.indexOf(conf);
        if (known < 0) {
          gutters2.push(new SingleGutterView(this.view, conf));
        } else {
          this.gutters[known].update(update);
          gutters2.push(this.gutters[known]);
        }
      }
      for (let g of this.gutters) {
        g.dom.remove();
        if (gutters2.indexOf(g) < 0)
          g.destroy();
      }
      for (let g of gutters2) {
        if (g.config.side == "after")
          this.getDOMAfter().appendChild(g.dom);
        else
          this.dom.appendChild(g.dom);
      }
      this.gutters = gutters2;
    }
    return change;
  }
  destroy() {
    for (let view of this.gutters)
      view.destroy();
    this.dom.remove();
    if (this.domAfter)
      this.domAfter.remove();
  }
}, {
  provide: (plugin) => EditorView.scrollMargins.of((view) => {
    let value = view.plugin(plugin);
    if (!value || value.gutters.length == 0 || !value.fixed)
      return null;
    let before = value.dom.offsetWidth * view.scaleX, after = value.domAfter ? value.domAfter.offsetWidth * view.scaleX : 0;
    return view.textDirection == Direction.LTR ? { left: before, right: after } : { right: before, left: after };
  })
});
function asArray2(val) {
  return Array.isArray(val) ? val : [val];
}
function advanceCursor(cursor, collect, pos) {
  while (cursor.value && cursor.from <= pos) {
    if (cursor.from == pos)
      collect.push(cursor.value);
    cursor.next();
  }
}

class UpdateContext {
  constructor(gutter2, viewport, height) {
    this.gutter = gutter2;
    this.height = height;
    this.i = 0;
    this.cursor = RangeSet.iter(gutter2.markers, viewport.from);
  }
  addElement(view, block, markers) {
    let { gutter: gutter2 } = this, above = (block.top - this.height) / view.scaleY, height = block.height / view.scaleY;
    if (this.i == gutter2.elements.length) {
      let newElt = new GutterElement(view, height, above, markers);
      gutter2.elements.push(newElt);
      gutter2.dom.appendChild(newElt.dom);
    } else {
      gutter2.elements[this.i].update(view, height, above, markers);
    }
    this.height = block.bottom;
    this.i++;
  }
  line(view, line, extraMarkers) {
    let localMarkers = [];
    advanceCursor(this.cursor, localMarkers, line.from);
    if (extraMarkers.length)
      localMarkers = localMarkers.concat(extraMarkers);
    let forLine = this.gutter.config.lineMarker(view, line, localMarkers);
    if (forLine)
      localMarkers.unshift(forLine);
    let gutter2 = this.gutter;
    if (localMarkers.length == 0 && !gutter2.config.renderEmptyElements)
      return;
    this.addElement(view, line, localMarkers);
  }
  widget(view, block) {
    let marker = this.gutter.config.widgetMarker(view, block.widget, block), markers = marker ? [marker] : null;
    for (let cls of view.state.facet(gutterWidgetClass)) {
      let marker2 = cls(view, block.widget, block);
      if (marker2)
        (markers || (markers = [])).push(marker2);
    }
    if (markers)
      this.addElement(view, block, markers);
  }
  finish() {
    let gutter2 = this.gutter;
    while (gutter2.elements.length > this.i) {
      let last = gutter2.elements.pop();
      gutter2.dom.removeChild(last.dom);
      last.destroy();
    }
  }
}

class SingleGutterView {
  constructor(view, config) {
    this.view = view;
    this.config = config;
    this.elements = [];
    this.spacer = null;
    this.dom = document.createElement("div");
    this.dom.className = "cm-gutter" + (this.config.class ? " " + this.config.class : "");
    for (let prop in config.domEventHandlers) {
      this.dom.addEventListener(prop, (event) => {
        let target = event.target, y;
        if (target != this.dom && this.dom.contains(target)) {
          while (target.parentNode != this.dom)
            target = target.parentNode;
          let rect = target.getBoundingClientRect();
          y = (rect.top + rect.bottom) / 2;
        } else {
          y = event.clientY;
        }
        let line = view.lineBlockAtHeight(y - view.documentTop);
        if (config.domEventHandlers[prop](view, line, event))
          event.preventDefault();
      });
    }
    this.markers = asArray2(config.markers(view));
    if (config.initialSpacer) {
      this.spacer = new GutterElement(view, 0, 0, [config.initialSpacer(view)]);
      this.dom.appendChild(this.spacer.dom);
      this.spacer.dom.style.cssText += "visibility: hidden; pointer-events: none";
    }
  }
  update(update) {
    let prevMarkers = this.markers;
    this.markers = asArray2(this.config.markers(update.view));
    if (this.spacer && this.config.updateSpacer) {
      let updated = this.config.updateSpacer(this.spacer.markers[0], update);
      if (updated != this.spacer.markers[0])
        this.spacer.update(update.view, 0, 0, [updated]);
    }
    let vp = update.view.viewport;
    return !RangeSet.eq(this.markers, prevMarkers, vp.from, vp.to) || (this.config.lineMarkerChange ? this.config.lineMarkerChange(update) : false);
  }
  destroy() {
    for (let elt of this.elements)
      elt.destroy();
  }
}

class GutterElement {
  constructor(view, height, above, markers) {
    this.height = -1;
    this.above = 0;
    this.markers = [];
    this.dom = document.createElement("div");
    this.dom.className = "cm-gutterElement";
    this.update(view, height, above, markers);
  }
  update(view, height, above, markers) {
    if (this.height != height) {
      this.height = height;
      this.dom.style.height = height + "px";
    }
    if (this.above != above)
      this.dom.style.marginTop = (this.above = above) ? above + "px" : "";
    if (!sameMarkers(this.markers, markers))
      this.setMarkers(view, markers);
  }
  setMarkers(view, markers) {
    let cls = "cm-gutterElement", domPos = this.dom.firstChild;
    for (let iNew = 0, iOld = 0;; ) {
      let skipTo = iOld, marker = iNew < markers.length ? markers[iNew++] : null, matched = false;
      if (marker) {
        let c = marker.elementClass;
        if (c)
          cls += " " + c;
        for (let i2 = iOld;i2 < this.markers.length; i2++)
          if (this.markers[i2].compare(marker)) {
            skipTo = i2;
            matched = true;
            break;
          }
      } else {
        skipTo = this.markers.length;
      }
      while (iOld < skipTo) {
        let next = this.markers[iOld++];
        if (next.toDOM) {
          next.destroy(domPos);
          let after = domPos.nextSibling;
          domPos.remove();
          domPos = after;
        }
      }
      if (!marker)
        break;
      if (marker.toDOM) {
        if (matched)
          domPos = domPos.nextSibling;
        else
          this.dom.insertBefore(marker.toDOM(view), domPos);
      }
      if (matched)
        iOld++;
    }
    this.dom.className = cls;
    this.markers = markers;
  }
  destroy() {
    this.setMarkers(null, []);
  }
}
function sameMarkers(a, b) {
  if (a.length != b.length)
    return false;
  for (let i2 = 0;i2 < a.length; i2++)
    if (!a[i2].compare(b[i2]))
      return false;
  return true;
}
var lineNumberMarkers = /* @__PURE__ */ Facet.define();
var lineNumberWidgetMarker = /* @__PURE__ */ Facet.define();
var lineNumberConfig = /* @__PURE__ */ Facet.define({
  combine(values) {
    return combineConfig(values, { formatNumber: String, domEventHandlers: {} }, {
      domEventHandlers(a, b) {
        let result = Object.assign({}, a);
        for (let event in b) {
          let exists = result[event], add2 = b[event];
          result[event] = exists ? (view, line, event2) => exists(view, line, event2) || add2(view, line, event2) : add2;
        }
        return result;
      }
    });
  }
});

class NumberMarker extends GutterMarker {
  constructor(number) {
    super();
    this.number = number;
  }
  eq(other) {
    return this.number == other.number;
  }
  toDOM() {
    return document.createTextNode(this.number);
  }
}
function formatNumber(view, number) {
  return view.state.facet(lineNumberConfig).formatNumber(number, view.state);
}
var lineNumberGutter = /* @__PURE__ */ activeGutters.compute([lineNumberConfig], (state) => ({
  class: "cm-lineNumbers",
  renderEmptyElements: false,
  markers(view) {
    return view.state.facet(lineNumberMarkers);
  },
  lineMarker(view, line, others) {
    if (others.some((m) => m.toDOM))
      return null;
    return new NumberMarker(formatNumber(view, view.state.doc.lineAt(line.from).number));
  },
  widgetMarker: (view, widget, block) => {
    for (let m of view.state.facet(lineNumberWidgetMarker)) {
      let result = m(view, widget, block);
      if (result)
        return result;
    }
    return null;
  },
  lineMarkerChange: (update) => update.startState.facet(lineNumberConfig) != update.state.facet(lineNumberConfig),
  initialSpacer(view) {
    return new NumberMarker(formatNumber(view, maxLineNumber(view.state.doc.lines)));
  },
  updateSpacer(spacer, update) {
    let max = formatNumber(update.view, maxLineNumber(update.view.state.doc.lines));
    return max == spacer.number ? spacer : new NumberMarker(max);
  },
  domEventHandlers: state.facet(lineNumberConfig).domEventHandlers,
  side: "before"
}));
function lineNumbers(config = {}) {
  return [
    lineNumberConfig.of(config),
    gutters(),
    lineNumberGutter
  ];
}
function maxLineNumber(lines) {
  let last = 9;
  while (last < lines)
    last = last * 10 + 9;
  return last;
}
var activeLineGutterMarker = /* @__PURE__ */ new class extends GutterMarker {
  constructor() {
    super(...arguments);
    this.elementClass = "cm-activeLineGutter";
  }
};
var activeLineGutterHighlighter = /* @__PURE__ */ gutterLineClass.compute(["selection"], (state) => {
  let marks = [], last = -1;
  for (let range of state.selection.ranges) {
    let linePos = state.doc.lineAt(range.head).from;
    if (linePos > last) {
      last = linePos;
      marks.push(activeLineGutterMarker.range(linePos));
    }
  }
  return RangeSet.of(marks);
});
function highlightActiveLineGutter() {
  return activeLineGutterHighlighter;
}
// node_modules/@lezer/common/dist/index.js
var DefaultBufferLength = 1024;
var nextPropID = 0;

class Range2 {
  constructor(from, to) {
    this.from = from;
    this.to = to;
  }
}

class NodeProp {
  constructor(config = {}) {
    this.id = nextPropID++;
    this.perNode = !!config.perNode;
    this.deserialize = config.deserialize || (() => {
      throw new Error("This node type doesn't define a deserialize function");
    });
    this.combine = config.combine || null;
  }
  add(match) {
    if (this.perNode)
      throw new RangeError("Can't add per-node props to node types");
    if (typeof match != "function")
      match = NodeType.match(match);
    return (type) => {
      let result = match(type);
      return result === undefined ? null : [this, result];
    };
  }
}
NodeProp.closedBy = new NodeProp({ deserialize: (str) => str.split(" ") });
NodeProp.openedBy = new NodeProp({ deserialize: (str) => str.split(" ") });
NodeProp.group = new NodeProp({ deserialize: (str) => str.split(" ") });
NodeProp.isolate = new NodeProp({ deserialize: (value) => {
  if (value && value != "rtl" && value != "ltr" && value != "auto")
    throw new RangeError("Invalid value for isolate: " + value);
  return value || "auto";
} });
NodeProp.contextHash = new NodeProp({ perNode: true });
NodeProp.lookAhead = new NodeProp({ perNode: true });
NodeProp.mounted = new NodeProp({ perNode: true });

class MountedTree {
  constructor(tree, overlay, parser, bracketed = false) {
    this.tree = tree;
    this.overlay = overlay;
    this.parser = parser;
    this.bracketed = bracketed;
  }
  static get(tree) {
    return tree && tree.props && tree.props[NodeProp.mounted.id];
  }
}
var noProps = Object.create(null);

class NodeType {
  constructor(name, props, id, flags = 0) {
    this.name = name;
    this.props = props;
    this.id = id;
    this.flags = flags;
  }
  static define(spec) {
    let props = spec.props && spec.props.length ? Object.create(null) : noProps;
    let flags = (spec.top ? 1 : 0) | (spec.skipped ? 2 : 0) | (spec.error ? 4 : 0) | (spec.name == null ? 8 : 0);
    let type = new NodeType(spec.name || "", props, spec.id, flags);
    if (spec.props)
      for (let src of spec.props) {
        if (!Array.isArray(src))
          src = src(type);
        if (src) {
          if (src[0].perNode)
            throw new RangeError("Can't store a per-node prop on a node type");
          props[src[0].id] = src[1];
        }
      }
    return type;
  }
  prop(prop) {
    return this.props[prop.id];
  }
  get isTop() {
    return (this.flags & 1) > 0;
  }
  get isSkipped() {
    return (this.flags & 2) > 0;
  }
  get isError() {
    return (this.flags & 4) > 0;
  }
  get isAnonymous() {
    return (this.flags & 8) > 0;
  }
  is(name) {
    if (typeof name == "string") {
      if (this.name == name)
        return true;
      let group = this.prop(NodeProp.group);
      return group ? group.indexOf(name) > -1 : false;
    }
    return this.id == name;
  }
  static match(map) {
    let direct = Object.create(null);
    for (let prop in map)
      for (let name of prop.split(" "))
        direct[name] = map[prop];
    return (node) => {
      for (let groups = node.prop(NodeProp.group), i2 = -1;i2 < (groups ? groups.length : 0); i2++) {
        let found = direct[i2 < 0 ? node.name : groups[i2]];
        if (found)
          return found;
      }
    };
  }
}
NodeType.none = new NodeType("", Object.create(null), 0, 8);

class NodeSet {
  constructor(types2) {
    this.types = types2;
    for (let i2 = 0;i2 < types2.length; i2++)
      if (types2[i2].id != i2)
        throw new RangeError("Node type ids should correspond to array positions when creating a node set");
  }
  extend(...props) {
    let newTypes = [];
    for (let type of this.types) {
      let newProps = null;
      for (let source of props) {
        let add2 = source(type);
        if (add2) {
          if (!newProps)
            newProps = Object.assign({}, type.props);
          let value = add2[1], prop = add2[0];
          if (prop.combine && prop.id in newProps)
            value = prop.combine(newProps[prop.id], value);
          newProps[prop.id] = value;
        }
      }
      newTypes.push(newProps ? new NodeType(type.name, newProps, type.id, type.flags) : type);
    }
    return new NodeSet(newTypes);
  }
}
var CachedNode = new WeakMap;
var CachedInnerNode = new WeakMap;
var IterMode;
(function(IterMode2) {
  IterMode2[IterMode2["ExcludeBuffers"] = 1] = "ExcludeBuffers";
  IterMode2[IterMode2["IncludeAnonymous"] = 2] = "IncludeAnonymous";
  IterMode2[IterMode2["IgnoreMounts"] = 4] = "IgnoreMounts";
  IterMode2[IterMode2["IgnoreOverlays"] = 8] = "IgnoreOverlays";
  IterMode2[IterMode2["EnterBracketed"] = 16] = "EnterBracketed";
})(IterMode || (IterMode = {}));

class Tree {
  constructor(type, children, positions, length, props) {
    this.type = type;
    this.children = children;
    this.positions = positions;
    this.length = length;
    this.props = null;
    if (props && props.length) {
      this.props = Object.create(null);
      for (let [prop, value] of props)
        this.props[typeof prop == "number" ? prop : prop.id] = value;
    }
  }
  toString() {
    let mounted = MountedTree.get(this);
    if (mounted && !mounted.overlay)
      return mounted.tree.toString();
    let children = "";
    for (let ch of this.children) {
      let str = ch.toString();
      if (str) {
        if (children)
          children += ",";
        children += str;
      }
    }
    return !this.type.name ? children : (/\W/.test(this.type.name) && !this.type.isError ? JSON.stringify(this.type.name) : this.type.name) + (children.length ? "(" + children + ")" : "");
  }
  cursor(mode = 0) {
    return new TreeCursor(this.topNode, mode);
  }
  cursorAt(pos, side = 0, mode = 0) {
    let scope = CachedNode.get(this) || this.topNode;
    let cursor = new TreeCursor(scope);
    cursor.moveTo(pos, side);
    CachedNode.set(this, cursor._tree);
    return cursor;
  }
  get topNode() {
    return new TreeNode(this, 0, 0, null);
  }
  resolve(pos, side = 0) {
    let node = resolveNode(CachedNode.get(this) || this.topNode, pos, side, false);
    CachedNode.set(this, node);
    return node;
  }
  resolveInner(pos, side = 0) {
    let node = resolveNode(CachedInnerNode.get(this) || this.topNode, pos, side, true);
    CachedInnerNode.set(this, node);
    return node;
  }
  resolveStack(pos, side = 0) {
    return stackIterator(this, pos, side);
  }
  iterate(spec) {
    let { enter, leave, from = 0, to = this.length } = spec;
    let mode = spec.mode || 0, anon = (mode & IterMode.IncludeAnonymous) > 0;
    for (let c = this.cursor(mode | IterMode.IncludeAnonymous);; ) {
      let entered = false;
      if (c.from <= to && c.to >= from && (!anon && c.type.isAnonymous || enter(c) !== false)) {
        if (c.firstChild())
          continue;
        entered = true;
      }
      for (;; ) {
        if (entered && leave && (anon || !c.type.isAnonymous))
          leave(c);
        if (c.nextSibling())
          break;
        if (!c.parent())
          return;
        entered = true;
      }
    }
  }
  prop(prop) {
    return !prop.perNode ? this.type.prop(prop) : this.props ? this.props[prop.id] : undefined;
  }
  get propValues() {
    let result = [];
    if (this.props)
      for (let id in this.props)
        result.push([+id, this.props[id]]);
    return result;
  }
  balance(config = {}) {
    return this.children.length <= 8 ? this : balanceRange(NodeType.none, this.children, this.positions, 0, this.children.length, 0, this.length, (children, positions, length) => new Tree(this.type, children, positions, length, this.propValues), config.makeTree || ((children, positions, length) => new Tree(NodeType.none, children, positions, length)));
  }
  static build(data) {
    return buildTree(data);
  }
}
Tree.empty = new Tree(NodeType.none, [], [], 0);

class FlatBufferCursor {
  constructor(buffer, index) {
    this.buffer = buffer;
    this.index = index;
  }
  get id() {
    return this.buffer[this.index - 4];
  }
  get start() {
    return this.buffer[this.index - 3];
  }
  get end() {
    return this.buffer[this.index - 2];
  }
  get size() {
    return this.buffer[this.index - 1];
  }
  get pos() {
    return this.index;
  }
  next() {
    this.index -= 4;
  }
  fork() {
    return new FlatBufferCursor(this.buffer, this.index);
  }
}

class TreeBuffer {
  constructor(buffer, length, set) {
    this.buffer = buffer;
    this.length = length;
    this.set = set;
  }
  get type() {
    return NodeType.none;
  }
  toString() {
    let result = [];
    for (let index = 0;index < this.buffer.length; ) {
      result.push(this.childString(index));
      index = this.buffer[index + 3];
    }
    return result.join(",");
  }
  childString(index) {
    let id = this.buffer[index], endIndex = this.buffer[index + 3];
    let type = this.set.types[id], result = type.name;
    if (/\W/.test(result) && !type.isError)
      result = JSON.stringify(result);
    index += 4;
    if (endIndex == index)
      return result;
    let children = [];
    while (index < endIndex) {
      children.push(this.childString(index));
      index = this.buffer[index + 3];
    }
    return result + "(" + children.join(",") + ")";
  }
  findChild(startIndex, endIndex, dir, pos, side) {
    let { buffer } = this, pick = -1;
    for (let i2 = startIndex;i2 != endIndex; i2 = buffer[i2 + 3]) {
      if (checkSide(side, pos, buffer[i2 + 1], buffer[i2 + 2])) {
        pick = i2;
        if (dir > 0)
          break;
      }
    }
    return pick;
  }
  slice(startI, endI, from) {
    let b = this.buffer;
    let copy = new Uint16Array(endI - startI), len = 0;
    for (let i2 = startI, j = 0;i2 < endI; ) {
      copy[j++] = b[i2++];
      copy[j++] = b[i2++] - from;
      let to = copy[j++] = b[i2++] - from;
      copy[j++] = b[i2++] - startI;
      len = Math.max(len, to);
    }
    return new TreeBuffer(copy, len, this.set);
  }
}
function checkSide(side, pos, from, to) {
  switch (side) {
    case -2:
      return from < pos;
    case -1:
      return to >= pos && from < pos;
    case 0:
      return from < pos && to > pos;
    case 1:
      return from <= pos && to > pos;
    case 2:
      return to > pos;
    case 4:
      return true;
  }
}
function resolveNode(node, pos, side, overlays) {
  var _a;
  while (node.from == node.to || (side < 1 ? node.from >= pos : node.from > pos) || (side > -1 ? node.to <= pos : node.to < pos)) {
    let parent = !overlays && node instanceof TreeNode && node.index < 0 ? null : node.parent;
    if (!parent)
      return node;
    node = parent;
  }
  let mode = overlays ? 0 : IterMode.IgnoreOverlays;
  if (overlays)
    for (let scan = node, parent = scan.parent;parent; scan = parent, parent = scan.parent) {
      if (scan instanceof TreeNode && scan.index < 0 && ((_a = parent.enter(pos, side, mode)) === null || _a === undefined ? undefined : _a.from) != scan.from)
        node = parent;
    }
  for (;; ) {
    let inner = node.enter(pos, side, mode);
    if (!inner)
      return node;
    node = inner;
  }
}

class BaseNode {
  cursor(mode = 0) {
    return new TreeCursor(this, mode);
  }
  getChild(type, before = null, after = null) {
    let r = getChildren(this, type, before, after);
    return r.length ? r[0] : null;
  }
  getChildren(type, before = null, after = null) {
    return getChildren(this, type, before, after);
  }
  resolve(pos, side = 0) {
    return resolveNode(this, pos, side, false);
  }
  resolveInner(pos, side = 0) {
    return resolveNode(this, pos, side, true);
  }
  matchContext(context) {
    return matchNodeContext(this.parent, context);
  }
  enterUnfinishedNodesBefore(pos) {
    let scan = this.childBefore(pos), node = this;
    while (scan) {
      let last = scan.lastChild;
      if (!last || last.to != scan.to)
        break;
      if (last.type.isError && last.from == last.to) {
        node = scan;
        scan = last.prevSibling;
      } else {
        scan = last;
      }
    }
    return node;
  }
  get node() {
    return this;
  }
  get next() {
    return this.parent;
  }
}

class TreeNode extends BaseNode {
  constructor(_tree, from, index, _parent) {
    super();
    this._tree = _tree;
    this.from = from;
    this.index = index;
    this._parent = _parent;
  }
  get type() {
    return this._tree.type;
  }
  get name() {
    return this._tree.type.name;
  }
  get to() {
    return this.from + this._tree.length;
  }
  nextChild(i2, dir, pos, side, mode = 0) {
    var _a;
    for (let parent = this;; ) {
      for (let { children, positions } = parent._tree, e = dir > 0 ? children.length : -1;i2 != e; i2 += dir) {
        let next = children[i2], start = positions[i2] + parent.from;
        if (!(mode & IterMode.EnterBracketed && next instanceof Tree && ((_a = MountedTree.get(next)) === null || _a === undefined ? undefined : _a.overlay) === null && (start >= pos || start + next.length <= pos)) && !checkSide(side, pos, start, start + next.length))
          continue;
        if (next instanceof TreeBuffer) {
          if (mode & IterMode.ExcludeBuffers)
            continue;
          let index = next.findChild(0, next.buffer.length, dir, pos - start, side);
          if (index > -1)
            return new BufferNode(new BufferContext(parent, next, i2, start), null, index);
        } else if (mode & IterMode.IncludeAnonymous || (!next.type.isAnonymous || hasChild(next))) {
          let mounted;
          if (!(mode & IterMode.IgnoreMounts) && (mounted = MountedTree.get(next)) && !mounted.overlay)
            return new TreeNode(mounted.tree, start, i2, parent);
          let inner = new TreeNode(next, start, i2, parent);
          return mode & IterMode.IncludeAnonymous || !inner.type.isAnonymous ? inner : inner.nextChild(dir < 0 ? next.children.length - 1 : 0, dir, pos, side, mode);
        }
      }
      if (mode & IterMode.IncludeAnonymous || !parent.type.isAnonymous)
        return null;
      if (parent.index >= 0)
        i2 = parent.index + dir;
      else
        i2 = dir < 0 ? -1 : parent._parent._tree.children.length;
      parent = parent._parent;
      if (!parent)
        return null;
    }
  }
  get firstChild() {
    return this.nextChild(0, 1, 0, 4);
  }
  get lastChild() {
    return this.nextChild(this._tree.children.length - 1, -1, 0, 4);
  }
  childAfter(pos) {
    return this.nextChild(0, 1, pos, 2);
  }
  childBefore(pos) {
    return this.nextChild(this._tree.children.length - 1, -1, pos, -2);
  }
  prop(prop) {
    return this._tree.prop(prop);
  }
  enter(pos, side, mode = 0) {
    let mounted;
    if (!(mode & IterMode.IgnoreOverlays) && (mounted = MountedTree.get(this._tree)) && mounted.overlay) {
      let rPos = pos - this.from, enterBracketed = mode & IterMode.EnterBracketed && mounted.bracketed;
      for (let { from, to } of mounted.overlay) {
        if ((side > 0 || enterBracketed ? from <= rPos : from < rPos) && (side < 0 || enterBracketed ? to >= rPos : to > rPos))
          return new TreeNode(mounted.tree, mounted.overlay[0].from + this.from, -1, this);
      }
    }
    return this.nextChild(0, 1, pos, side, mode);
  }
  nextSignificantParent() {
    let val = this;
    while (val.type.isAnonymous && val._parent)
      val = val._parent;
    return val;
  }
  get parent() {
    return this._parent ? this._parent.nextSignificantParent() : null;
  }
  get nextSibling() {
    return this._parent && this.index >= 0 ? this._parent.nextChild(this.index + 1, 1, 0, 4) : null;
  }
  get prevSibling() {
    return this._parent && this.index >= 0 ? this._parent.nextChild(this.index - 1, -1, 0, 4) : null;
  }
  get tree() {
    return this._tree;
  }
  toTree() {
    return this._tree;
  }
  toString() {
    return this._tree.toString();
  }
}
function getChildren(node, type, before, after) {
  let cur = node.cursor(), result = [];
  if (!cur.firstChild())
    return result;
  if (before != null)
    for (let found = false;!found; ) {
      found = cur.type.is(before);
      if (!cur.nextSibling())
        return result;
    }
  for (;; ) {
    if (after != null && cur.type.is(after))
      return result;
    if (cur.type.is(type))
      result.push(cur.node);
    if (!cur.nextSibling())
      return after == null ? result : [];
  }
}
function matchNodeContext(node, context, i2 = context.length - 1) {
  for (let p = node;i2 >= 0; p = p.parent) {
    if (!p)
      return false;
    if (!p.type.isAnonymous) {
      if (context[i2] && context[i2] != p.name)
        return false;
      i2--;
    }
  }
  return true;
}

class BufferContext {
  constructor(parent, buffer, index, start) {
    this.parent = parent;
    this.buffer = buffer;
    this.index = index;
    this.start = start;
  }
}

class BufferNode extends BaseNode {
  get name() {
    return this.type.name;
  }
  get from() {
    return this.context.start + this.context.buffer.buffer[this.index + 1];
  }
  get to() {
    return this.context.start + this.context.buffer.buffer[this.index + 2];
  }
  constructor(context, _parent, index) {
    super();
    this.context = context;
    this._parent = _parent;
    this.index = index;
    this.type = context.buffer.set.types[context.buffer.buffer[index]];
  }
  child(dir, pos, side) {
    let { buffer } = this.context;
    let index = buffer.findChild(this.index + 4, buffer.buffer[this.index + 3], dir, pos - this.context.start, side);
    return index < 0 ? null : new BufferNode(this.context, this, index);
  }
  get firstChild() {
    return this.child(1, 0, 4);
  }
  get lastChild() {
    return this.child(-1, 0, 4);
  }
  childAfter(pos) {
    return this.child(1, pos, 2);
  }
  childBefore(pos) {
    return this.child(-1, pos, -2);
  }
  prop(prop) {
    return this.type.prop(prop);
  }
  enter(pos, side, mode = 0) {
    if (mode & IterMode.ExcludeBuffers)
      return null;
    let { buffer } = this.context;
    let index = buffer.findChild(this.index + 4, buffer.buffer[this.index + 3], side > 0 ? 1 : -1, pos - this.context.start, side);
    return index < 0 ? null : new BufferNode(this.context, this, index);
  }
  get parent() {
    return this._parent || this.context.parent.nextSignificantParent();
  }
  externalSibling(dir) {
    return this._parent ? null : this.context.parent.nextChild(this.context.index + dir, dir, 0, 4);
  }
  get nextSibling() {
    let { buffer } = this.context;
    let after = buffer.buffer[this.index + 3];
    if (after < (this._parent ? buffer.buffer[this._parent.index + 3] : buffer.buffer.length))
      return new BufferNode(this.context, this._parent, after);
    return this.externalSibling(1);
  }
  get prevSibling() {
    let { buffer } = this.context;
    let parentStart = this._parent ? this._parent.index + 4 : 0;
    if (this.index == parentStart)
      return this.externalSibling(-1);
    return new BufferNode(this.context, this._parent, buffer.findChild(parentStart, this.index, -1, 0, 4));
  }
  get tree() {
    return null;
  }
  toTree() {
    let children = [], positions = [];
    let { buffer } = this.context;
    let startI = this.index + 4, endI = buffer.buffer[this.index + 3];
    if (endI > startI) {
      let from = buffer.buffer[this.index + 1];
      children.push(buffer.slice(startI, endI, from));
      positions.push(0);
    }
    return new Tree(this.type, children, positions, this.to - this.from);
  }
  toString() {
    return this.context.buffer.childString(this.index);
  }
}
function iterStack(heads) {
  if (!heads.length)
    return null;
  let pick = 0, picked = heads[0];
  for (let i2 = 1;i2 < heads.length; i2++) {
    let node = heads[i2];
    if (node.from > picked.from || node.to < picked.to) {
      picked = node;
      pick = i2;
    }
  }
  let next = picked instanceof TreeNode && picked.index < 0 ? null : picked.parent;
  let newHeads = heads.slice();
  if (next)
    newHeads[pick] = next;
  else
    newHeads.splice(pick, 1);
  return new StackIterator(newHeads, picked);
}

class StackIterator {
  constructor(heads, node) {
    this.heads = heads;
    this.node = node;
  }
  get next() {
    return iterStack(this.heads);
  }
}
function stackIterator(tree, pos, side) {
  let inner = tree.resolveInner(pos, side), layers = null;
  for (let scan = inner instanceof TreeNode ? inner : inner.context.parent;scan; scan = scan.parent) {
    if (scan.index < 0) {
      let parent = scan.parent;
      (layers || (layers = [inner])).push(parent.resolve(pos, side));
      scan = parent;
    } else {
      let mount = MountedTree.get(scan.tree);
      if (mount && mount.overlay && mount.overlay[0].from <= pos && mount.overlay[mount.overlay.length - 1].to >= pos) {
        let root = new TreeNode(mount.tree, mount.overlay[0].from + scan.from, -1, scan);
        (layers || (layers = [inner])).push(resolveNode(root, pos, side, false));
      }
    }
  }
  return layers ? iterStack(layers) : inner;
}

class TreeCursor {
  get name() {
    return this.type.name;
  }
  constructor(node, mode = 0) {
    this.buffer = null;
    this.stack = [];
    this.index = 0;
    this.bufferNode = null;
    this.mode = mode & ~IterMode.EnterBracketed;
    if (node instanceof TreeNode) {
      this.yieldNode(node);
    } else {
      this._tree = node.context.parent;
      this.buffer = node.context;
      for (let n = node._parent;n; n = n._parent)
        this.stack.unshift(n.index);
      this.bufferNode = node;
      this.yieldBuf(node.index);
    }
  }
  yieldNode(node) {
    if (!node)
      return false;
    this._tree = node;
    this.type = node.type;
    this.from = node.from;
    this.to = node.to;
    return true;
  }
  yieldBuf(index, type) {
    this.index = index;
    let { start, buffer } = this.buffer;
    this.type = type || buffer.set.types[buffer.buffer[index]];
    this.from = start + buffer.buffer[index + 1];
    this.to = start + buffer.buffer[index + 2];
    return true;
  }
  yield(node) {
    if (!node)
      return false;
    if (node instanceof TreeNode) {
      this.buffer = null;
      return this.yieldNode(node);
    }
    this.buffer = node.context;
    return this.yieldBuf(node.index, node.type);
  }
  toString() {
    return this.buffer ? this.buffer.buffer.childString(this.index) : this._tree.toString();
  }
  enterChild(dir, pos, side) {
    if (!this.buffer)
      return this.yield(this._tree.nextChild(dir < 0 ? this._tree._tree.children.length - 1 : 0, dir, pos, side, this.mode));
    let { buffer } = this.buffer;
    let index = buffer.findChild(this.index + 4, buffer.buffer[this.index + 3], dir, pos - this.buffer.start, side);
    if (index < 0)
      return false;
    this.stack.push(this.index);
    return this.yieldBuf(index);
  }
  firstChild() {
    return this.enterChild(1, 0, 4);
  }
  lastChild() {
    return this.enterChild(-1, 0, 4);
  }
  childAfter(pos) {
    return this.enterChild(1, pos, 2);
  }
  childBefore(pos) {
    return this.enterChild(-1, pos, -2);
  }
  enter(pos, side, mode = this.mode) {
    if (!this.buffer)
      return this.yield(this._tree.enter(pos, side, mode));
    return mode & IterMode.ExcludeBuffers ? false : this.enterChild(1, pos, side);
  }
  parent() {
    if (!this.buffer)
      return this.yieldNode(this.mode & IterMode.IncludeAnonymous ? this._tree._parent : this._tree.parent);
    if (this.stack.length)
      return this.yieldBuf(this.stack.pop());
    let parent = this.mode & IterMode.IncludeAnonymous ? this.buffer.parent : this.buffer.parent.nextSignificantParent();
    this.buffer = null;
    return this.yieldNode(parent);
  }
  sibling(dir) {
    if (!this.buffer)
      return !this._tree._parent ? false : this.yield(this._tree.index < 0 ? null : this._tree._parent.nextChild(this._tree.index + dir, dir, 0, 4, this.mode));
    let { buffer } = this.buffer, d = this.stack.length - 1;
    if (dir < 0) {
      let parentStart = d < 0 ? 0 : this.stack[d] + 4;
      if (this.index != parentStart)
        return this.yieldBuf(buffer.findChild(parentStart, this.index, -1, 0, 4));
    } else {
      let after = buffer.buffer[this.index + 3];
      if (after < (d < 0 ? buffer.buffer.length : buffer.buffer[this.stack[d] + 3]))
        return this.yieldBuf(after);
    }
    return d < 0 ? this.yield(this.buffer.parent.nextChild(this.buffer.index + dir, dir, 0, 4, this.mode)) : false;
  }
  nextSibling() {
    return this.sibling(1);
  }
  prevSibling() {
    return this.sibling(-1);
  }
  atLastNode(dir) {
    let index, parent, { buffer } = this;
    if (buffer) {
      if (dir > 0) {
        if (this.index < buffer.buffer.buffer.length)
          return false;
      } else {
        for (let i2 = 0;i2 < this.index; i2++)
          if (buffer.buffer.buffer[i2 + 3] < this.index)
            return false;
      }
      ({ index, parent } = buffer);
    } else {
      ({ index, _parent: parent } = this._tree);
    }
    for (;parent; { index, _parent: parent } = parent) {
      if (index > -1)
        for (let i2 = index + dir, e = dir < 0 ? -1 : parent._tree.children.length;i2 != e; i2 += dir) {
          let child = parent._tree.children[i2];
          if (this.mode & IterMode.IncludeAnonymous || child instanceof TreeBuffer || !child.type.isAnonymous || hasChild(child))
            return false;
        }
    }
    return true;
  }
  move(dir, enter) {
    if (enter && this.enterChild(dir, 0, 4))
      return true;
    for (;; ) {
      if (this.sibling(dir))
        return true;
      if (this.atLastNode(dir) || !this.parent())
        return false;
    }
  }
  next(enter = true) {
    return this.move(1, enter);
  }
  prev(enter = true) {
    return this.move(-1, enter);
  }
  moveTo(pos, side = 0) {
    while (this.from == this.to || (side < 1 ? this.from >= pos : this.from > pos) || (side > -1 ? this.to <= pos : this.to < pos))
      if (!this.parent())
        break;
    while (this.enterChild(1, pos, side)) {}
    return this;
  }
  get node() {
    if (!this.buffer)
      return this._tree;
    let cache = this.bufferNode, result = null, depth = 0;
    if (cache && cache.context == this.buffer) {
      scan:
        for (let index = this.index, d = this.stack.length;d >= 0; ) {
          for (let c = cache;c; c = c._parent)
            if (c.index == index) {
              if (index == this.index)
                return c;
              result = c;
              depth = d + 1;
              break scan;
            }
          index = this.stack[--d];
        }
    }
    for (let i2 = depth;i2 < this.stack.length; i2++)
      result = new BufferNode(this.buffer, result, this.stack[i2]);
    return this.bufferNode = new BufferNode(this.buffer, result, this.index);
  }
  get tree() {
    return this.buffer ? null : this._tree._tree;
  }
  iterate(enter, leave) {
    for (let depth = 0;; ) {
      let mustLeave = false;
      if (this.type.isAnonymous || enter(this) !== false) {
        if (this.firstChild()) {
          depth++;
          continue;
        }
        if (!this.type.isAnonymous)
          mustLeave = true;
      }
      for (;; ) {
        if (mustLeave && leave)
          leave(this);
        mustLeave = this.type.isAnonymous;
        if (!depth)
          return;
        if (this.nextSibling())
          break;
        this.parent();
        depth--;
        mustLeave = true;
      }
    }
  }
  matchContext(context) {
    if (!this.buffer)
      return matchNodeContext(this.node.parent, context);
    let { buffer } = this.buffer, { types: types2 } = buffer.set;
    for (let i2 = context.length - 1, d = this.stack.length - 1;i2 >= 0; d--) {
      if (d < 0)
        return matchNodeContext(this._tree, context, i2);
      let type = types2[buffer.buffer[this.stack[d]]];
      if (!type.isAnonymous) {
        if (context[i2] && context[i2] != type.name)
          return false;
        i2--;
      }
    }
    return true;
  }
}
function hasChild(tree) {
  return tree.children.some((ch) => ch instanceof TreeBuffer || !ch.type.isAnonymous || hasChild(ch));
}
function buildTree(data) {
  var _a;
  let { buffer, nodeSet, maxBufferLength = DefaultBufferLength, reused = [], minRepeatType = nodeSet.types.length } = data;
  let cursor = Array.isArray(buffer) ? new FlatBufferCursor(buffer, buffer.length) : buffer;
  let types2 = nodeSet.types;
  let contextHash = 0, lookAhead = 0;
  function takeNode(parentStart, minPos, children2, positions2, inRepeat, depth) {
    let { id, start, end, size } = cursor;
    let lookAheadAtStart = lookAhead, contextAtStart = contextHash;
    if (size < 0) {
      cursor.next();
      if (size == -1) {
        let node2 = reused[id];
        children2.push(node2);
        positions2.push(start - parentStart);
        return;
      } else if (size == -3) {
        contextHash = id;
        return;
      } else if (size == -4) {
        lookAhead = id;
        return;
      } else {
        throw new RangeError(`Unrecognized record size: ${size}`);
      }
    }
    let type = types2[id], node, buffer2;
    let startPos = start - parentStart;
    if (end - start <= maxBufferLength && (buffer2 = findBufferSize(cursor.pos - minPos, inRepeat))) {
      let data2 = new Uint16Array(buffer2.size - buffer2.skip);
      let endPos = cursor.pos - buffer2.size, index = data2.length;
      while (cursor.pos > endPos)
        index = copyToBuffer(buffer2.start, data2, index);
      node = new TreeBuffer(data2, end - buffer2.start, nodeSet);
      startPos = buffer2.start - parentStart;
    } else {
      let endPos = cursor.pos - size;
      cursor.next();
      let localChildren = [], localPositions = [];
      let localInRepeat = id >= minRepeatType ? id : -1;
      let lastGroup = 0, lastEnd = end;
      while (cursor.pos > endPos) {
        if (localInRepeat >= 0 && cursor.id == localInRepeat && cursor.size >= 0) {
          if (cursor.end <= lastEnd - maxBufferLength) {
            makeRepeatLeaf(localChildren, localPositions, start, lastGroup, cursor.end, lastEnd, localInRepeat, lookAheadAtStart, contextAtStart);
            lastGroup = localChildren.length;
            lastEnd = cursor.end;
          }
          cursor.next();
        } else if (depth > 2500) {
          takeFlatNode(start, endPos, localChildren, localPositions);
        } else {
          takeNode(start, endPos, localChildren, localPositions, localInRepeat, depth + 1);
        }
      }
      if (localInRepeat >= 0 && lastGroup > 0 && lastGroup < localChildren.length)
        makeRepeatLeaf(localChildren, localPositions, start, lastGroup, start, lastEnd, localInRepeat, lookAheadAtStart, contextAtStart);
      localChildren.reverse();
      localPositions.reverse();
      if (localInRepeat > -1 && lastGroup > 0) {
        let make = makeBalanced(type, contextAtStart);
        node = balanceRange(type, localChildren, localPositions, 0, localChildren.length, 0, end - start, make, make);
      } else {
        node = makeTree(type, localChildren, localPositions, end - start, lookAheadAtStart - end, contextAtStart);
      }
    }
    children2.push(node);
    positions2.push(startPos);
  }
  function takeFlatNode(parentStart, minPos, children2, positions2) {
    let nodes = [];
    let nodeCount = 0, stopAt = -1;
    while (cursor.pos > minPos) {
      let { id, start, end, size } = cursor;
      if (size > 4) {
        cursor.next();
      } else if (stopAt > -1 && start < stopAt) {
        break;
      } else {
        if (stopAt < 0)
          stopAt = end - maxBufferLength;
        nodes.push(id, start, end);
        nodeCount++;
        cursor.next();
      }
    }
    if (nodeCount) {
      let buffer2 = new Uint16Array(nodeCount * 4);
      let start = nodes[nodes.length - 2];
      for (let i2 = nodes.length - 3, j = 0;i2 >= 0; i2 -= 3) {
        buffer2[j++] = nodes[i2];
        buffer2[j++] = nodes[i2 + 1] - start;
        buffer2[j++] = nodes[i2 + 2] - start;
        buffer2[j++] = j;
      }
      children2.push(new TreeBuffer(buffer2, nodes[2] - start, nodeSet));
      positions2.push(start - parentStart);
    }
  }
  function makeBalanced(type, contextHash2) {
    return (children2, positions2, length2) => {
      let lookAhead2 = 0, lastI = children2.length - 1, last, lookAheadProp;
      if (lastI >= 0 && (last = children2[lastI]) instanceof Tree) {
        if (!lastI && last.type == type && last.length == length2)
          return last;
        if (lookAheadProp = last.prop(NodeProp.lookAhead))
          lookAhead2 = positions2[lastI] + last.length + lookAheadProp;
      }
      return makeTree(type, children2, positions2, length2, lookAhead2, contextHash2);
    };
  }
  function makeRepeatLeaf(children2, positions2, base2, i2, from, to, type, lookAhead2, contextHash2) {
    let localChildren = [], localPositions = [];
    while (children2.length > i2) {
      localChildren.push(children2.pop());
      localPositions.push(positions2.pop() + base2 - from);
    }
    children2.push(makeTree(nodeSet.types[type], localChildren, localPositions, to - from, lookAhead2 - to, contextHash2));
    positions2.push(from - base2);
  }
  function makeTree(type, children2, positions2, length2, lookAhead2, contextHash2, props) {
    if (contextHash2) {
      let pair = [NodeProp.contextHash, contextHash2];
      props = props ? [pair].concat(props) : [pair];
    }
    if (lookAhead2 > 25) {
      let pair = [NodeProp.lookAhead, lookAhead2];
      props = props ? [pair].concat(props) : [pair];
    }
    return new Tree(type, children2, positions2, length2, props);
  }
  function findBufferSize(maxSize, inRepeat) {
    let fork = cursor.fork();
    let size = 0, start = 0, skip = 0, minStart = fork.end - maxBufferLength;
    let result = { size: 0, start: 0, skip: 0 };
    scan:
      for (let minPos = fork.pos - maxSize;fork.pos > minPos; ) {
        let nodeSize = fork.size;
        if (fork.id == inRepeat && nodeSize >= 0) {
          result.size = size;
          result.start = start;
          result.skip = skip;
          skip += 4;
          size += 4;
          fork.next();
          continue;
        }
        let startPos = fork.pos - nodeSize;
        if (nodeSize < 0 || startPos < minPos || fork.start < minStart)
          break;
        let localSkipped = fork.id >= minRepeatType ? 4 : 0;
        let nodeStart = fork.start;
        fork.next();
        while (fork.pos > startPos) {
          if (fork.size < 0) {
            if (fork.size == -3 || fork.size == -4)
              localSkipped += 4;
            else
              break scan;
          } else if (fork.id >= minRepeatType) {
            localSkipped += 4;
          }
          fork.next();
        }
        start = nodeStart;
        size += nodeSize;
        skip += localSkipped;
      }
    if (inRepeat < 0 || size == maxSize) {
      result.size = size;
      result.start = start;
      result.skip = skip;
    }
    return result.size > 4 ? result : undefined;
  }
  function copyToBuffer(bufferStart, buffer2, index) {
    let { id, start, end, size } = cursor;
    cursor.next();
    if (size >= 0 && id < minRepeatType) {
      let startIndex = index;
      if (size > 4) {
        let endPos = cursor.pos - (size - 4);
        while (cursor.pos > endPos)
          index = copyToBuffer(bufferStart, buffer2, index);
      }
      buffer2[--index] = startIndex;
      buffer2[--index] = end - bufferStart;
      buffer2[--index] = start - bufferStart;
      buffer2[--index] = id;
    } else if (size == -3) {
      contextHash = id;
    } else if (size == -4) {
      lookAhead = id;
    }
    return index;
  }
  let children = [], positions = [];
  while (cursor.pos > 0)
    takeNode(data.start || 0, data.bufferStart || 0, children, positions, -1, 0);
  let length = (_a = data.length) !== null && _a !== undefined ? _a : children.length ? positions[0] + children[0].length : 0;
  return new Tree(types2[data.topID], children.reverse(), positions.reverse(), length);
}
var nodeSizeCache = new WeakMap;
function nodeSize(balanceType, node) {
  if (!balanceType.isAnonymous || node instanceof TreeBuffer || node.type != balanceType)
    return 1;
  let size = nodeSizeCache.get(node);
  if (size == null) {
    size = 1;
    for (let child of node.children) {
      if (child.type != balanceType || !(child instanceof Tree)) {
        size = 1;
        break;
      }
      size += nodeSize(balanceType, child);
    }
    nodeSizeCache.set(node, size);
  }
  return size;
}
function balanceRange(balanceType, children, positions, from, to, start, length, mkTop, mkTree) {
  let total = 0;
  for (let i2 = from;i2 < to; i2++)
    total += nodeSize(balanceType, children[i2]);
  let maxChild = Math.ceil(total * 1.5 / 8);
  let localChildren = [], localPositions = [];
  function divide(children2, positions2, from2, to2, offset) {
    for (let i2 = from2;i2 < to2; ) {
      let groupFrom = i2, groupStart = positions2[i2], groupSize = nodeSize(balanceType, children2[i2]);
      i2++;
      for (;i2 < to2; i2++) {
        let nextSize = nodeSize(balanceType, children2[i2]);
        if (groupSize + nextSize >= maxChild)
          break;
        groupSize += nextSize;
      }
      if (i2 == groupFrom + 1) {
        if (groupSize > maxChild) {
          let only = children2[groupFrom];
          divide(only.children, only.positions, 0, only.children.length, positions2[groupFrom] + offset);
          continue;
        }
        localChildren.push(children2[groupFrom]);
      } else {
        let length2 = positions2[i2 - 1] + children2[i2 - 1].length - groupStart;
        localChildren.push(balanceRange(balanceType, children2, positions2, groupFrom, i2, groupStart, length2, null, mkTree));
      }
      localPositions.push(groupStart + offset - start);
    }
  }
  divide(children, positions, from, to, 0);
  return (mkTop || mkTree)(localChildren, localPositions, length);
}

class NodeWeakMap {
  constructor() {
    this.map = new WeakMap;
  }
  setBuffer(buffer, index, value) {
    let inner = this.map.get(buffer);
    if (!inner)
      this.map.set(buffer, inner = new Map);
    inner.set(index, value);
  }
  getBuffer(buffer, index) {
    let inner = this.map.get(buffer);
    return inner && inner.get(index);
  }
  set(node, value) {
    if (node instanceof BufferNode)
      this.setBuffer(node.context.buffer, node.index, value);
    else if (node instanceof TreeNode)
      this.map.set(node.tree, value);
  }
  get(node) {
    return node instanceof BufferNode ? this.getBuffer(node.context.buffer, node.index) : node instanceof TreeNode ? this.map.get(node.tree) : undefined;
  }
  cursorSet(cursor, value) {
    if (cursor.buffer)
      this.setBuffer(cursor.buffer.buffer, cursor.index, value);
    else
      this.map.set(cursor.tree, value);
  }
  cursorGet(cursor) {
    return cursor.buffer ? this.getBuffer(cursor.buffer.buffer, cursor.index) : this.map.get(cursor.tree);
  }
}

class TreeFragment {
  constructor(from, to, tree, offset, openStart = false, openEnd = false) {
    this.from = from;
    this.to = to;
    this.tree = tree;
    this.offset = offset;
    this.open = (openStart ? 1 : 0) | (openEnd ? 2 : 0);
  }
  get openStart() {
    return (this.open & 1) > 0;
  }
  get openEnd() {
    return (this.open & 2) > 0;
  }
  static addTree(tree, fragments = [], partial = false) {
    let result = [new TreeFragment(0, tree.length, tree, 0, false, partial)];
    for (let f of fragments)
      if (f.to > tree.length)
        result.push(f);
    return result;
  }
  static applyChanges(fragments, changes, minGap = 128) {
    if (!changes.length)
      return fragments;
    let result = [];
    let fI = 1, nextF = fragments.length ? fragments[0] : null;
    for (let cI = 0, pos = 0, off = 0;; cI++) {
      let nextC = cI < changes.length ? changes[cI] : null;
      let nextPos = nextC ? nextC.fromA : 1e9;
      if (nextPos - pos >= minGap)
        while (nextF && nextF.from < nextPos) {
          let cut = nextF;
          if (pos >= cut.from || nextPos <= cut.to || off) {
            let fFrom = Math.max(cut.from, pos) - off, fTo = Math.min(cut.to, nextPos) - off;
            cut = fFrom >= fTo ? null : new TreeFragment(fFrom, fTo, cut.tree, cut.offset + off, cI > 0, !!nextC);
          }
          if (cut)
            result.push(cut);
          if (nextF.to > nextPos)
            break;
          nextF = fI < fragments.length ? fragments[fI++] : null;
        }
      if (!nextC)
        break;
      pos = nextC.toA;
      off = nextC.toA - nextC.toB;
    }
    return result;
  }
}

class Parser {
  startParse(input, fragments, ranges) {
    if (typeof input == "string")
      input = new StringInput(input);
    ranges = !ranges ? [new Range2(0, input.length)] : ranges.length ? ranges.map((r) => new Range2(r.from, r.to)) : [new Range2(0, 0)];
    return this.createParse(input, fragments || [], ranges);
  }
  parse(input, fragments, ranges) {
    let parse = this.startParse(input, fragments, ranges);
    for (;; ) {
      let done = parse.advance();
      if (done)
        return done;
    }
  }
}

class StringInput {
  constructor(string) {
    this.string = string;
  }
  get length() {
    return this.string.length;
  }
  chunk(from) {
    return this.string.slice(from);
  }
  get lineChunks() {
    return false;
  }
  read(from, to) {
    return this.string.slice(from, to);
  }
}
function parseMixed(nest) {
  return (parse, input, fragments, ranges) => new MixedParse(parse, nest, input, fragments, ranges);
}

class InnerParse {
  constructor(parser, parse, overlay, bracketed, target, from) {
    this.parser = parser;
    this.parse = parse;
    this.overlay = overlay;
    this.bracketed = bracketed;
    this.target = target;
    this.from = from;
  }
}
function checkRanges(ranges) {
  if (!ranges.length || ranges.some((r) => r.from >= r.to))
    throw new RangeError("Invalid inner parse ranges given: " + JSON.stringify(ranges));
}

class ActiveOverlay {
  constructor(parser, predicate, mounts, index, start, bracketed, target, prev) {
    this.parser = parser;
    this.predicate = predicate;
    this.mounts = mounts;
    this.index = index;
    this.start = start;
    this.bracketed = bracketed;
    this.target = target;
    this.prev = prev;
    this.depth = 0;
    this.ranges = [];
  }
}
var stoppedInner = new NodeProp({ perNode: true });

class MixedParse {
  constructor(base2, nest, input, fragments, ranges) {
    this.nest = nest;
    this.input = input;
    this.fragments = fragments;
    this.ranges = ranges;
    this.inner = [];
    this.innerDone = 0;
    this.baseTree = null;
    this.stoppedAt = null;
    this.baseParse = base2;
  }
  advance() {
    if (this.baseParse) {
      let done2 = this.baseParse.advance();
      if (!done2)
        return null;
      this.baseParse = null;
      this.baseTree = done2;
      this.startInner();
      if (this.stoppedAt != null)
        for (let inner2 of this.inner)
          inner2.parse.stopAt(this.stoppedAt);
    }
    if (this.innerDone == this.inner.length) {
      let result = this.baseTree;
      if (this.stoppedAt != null)
        result = new Tree(result.type, result.children, result.positions, result.length, result.propValues.concat([[stoppedInner, this.stoppedAt]]));
      return result;
    }
    let inner = this.inner[this.innerDone], done = inner.parse.advance();
    if (done) {
      this.innerDone++;
      let props = Object.assign(Object.create(null), inner.target.props);
      props[NodeProp.mounted.id] = new MountedTree(done, inner.overlay, inner.parser, inner.bracketed);
      inner.target.props = props;
    }
    return null;
  }
  get parsedPos() {
    if (this.baseParse)
      return 0;
    let pos = this.input.length;
    for (let i2 = this.innerDone;i2 < this.inner.length; i2++) {
      if (this.inner[i2].from < pos)
        pos = Math.min(pos, this.inner[i2].parse.parsedPos);
    }
    return pos;
  }
  stopAt(pos) {
    this.stoppedAt = pos;
    if (this.baseParse)
      this.baseParse.stopAt(pos);
    else
      for (let i2 = this.innerDone;i2 < this.inner.length; i2++)
        this.inner[i2].parse.stopAt(pos);
  }
  startInner() {
    let fragmentCursor = new FragmentCursor(this.fragments);
    let overlay = null;
    let covered = null;
    let cursor = new TreeCursor(new TreeNode(this.baseTree, this.ranges[0].from, 0, null), IterMode.IncludeAnonymous | IterMode.IgnoreMounts);
    scan:
      for (let nest, isCovered;; ) {
        let enter = true, range;
        if (this.stoppedAt != null && cursor.from >= this.stoppedAt) {
          enter = false;
        } else if (fragmentCursor.hasNode(cursor)) {
          if (overlay) {
            let match = overlay.mounts.find((m) => m.frag.from <= cursor.from && m.frag.to >= cursor.to && m.mount.overlay);
            if (match)
              for (let r of match.mount.overlay) {
                let from = r.from + match.pos, to = r.to + match.pos;
                if (from >= cursor.from && to <= cursor.to && !overlay.ranges.some((r2) => r2.from < to && r2.to > from))
                  overlay.ranges.push({ from, to });
              }
          }
          enter = false;
        } else if (covered && (isCovered = checkCover(covered.ranges, cursor.from, cursor.to))) {
          enter = isCovered != 2;
        } else if (!cursor.type.isAnonymous && (nest = this.nest(cursor, this.input)) && (cursor.from < cursor.to || !nest.overlay)) {
          if (!cursor.tree) {
            materialize(cursor);
            if (overlay)
              overlay.depth++;
            if (covered)
              covered.depth++;
          }
          let oldMounts = fragmentCursor.findMounts(cursor.from, nest.parser);
          if (typeof nest.overlay == "function") {
            overlay = new ActiveOverlay(nest.parser, nest.overlay, oldMounts, this.inner.length, cursor.from, !!nest.bracketed, cursor.tree, overlay);
          } else {
            let ranges = punchRanges(this.ranges, nest.overlay || (cursor.from < cursor.to ? [new Range2(cursor.from, cursor.to)] : []));
            if (ranges.length)
              checkRanges(ranges);
            if (ranges.length || !nest.overlay)
              this.inner.push(new InnerParse(nest.parser, ranges.length ? nest.parser.startParse(this.input, enterFragments(oldMounts, ranges), ranges) : nest.parser.startParse(""), nest.overlay ? nest.overlay.map((r) => new Range2(r.from - cursor.from, r.to - cursor.from)) : null, !!nest.bracketed, cursor.tree, ranges.length ? ranges[0].from : cursor.from));
            if (!nest.overlay)
              enter = false;
            else if (ranges.length)
              covered = { ranges, depth: 0, prev: covered };
          }
        } else if (overlay && (range = overlay.predicate(cursor))) {
          if (range === true)
            range = new Range2(cursor.from, cursor.to);
          if (range.from < range.to) {
            let last = overlay.ranges.length - 1;
            if (last >= 0 && overlay.ranges[last].to == range.from)
              overlay.ranges[last] = { from: overlay.ranges[last].from, to: range.to };
            else
              overlay.ranges.push(range);
          }
        }
        if (enter && cursor.firstChild()) {
          if (overlay)
            overlay.depth++;
          if (covered)
            covered.depth++;
        } else {
          for (;; ) {
            if (cursor.nextSibling())
              break;
            if (!cursor.parent())
              break scan;
            if (overlay && !--overlay.depth) {
              let ranges = punchRanges(this.ranges, overlay.ranges);
              if (ranges.length) {
                checkRanges(ranges);
                this.inner.splice(overlay.index, 0, new InnerParse(overlay.parser, overlay.parser.startParse(this.input, enterFragments(overlay.mounts, ranges), ranges), overlay.ranges.map((r) => new Range2(r.from - overlay.start, r.to - overlay.start)), overlay.bracketed, overlay.target, ranges[0].from));
              }
              overlay = overlay.prev;
            }
            if (covered && !--covered.depth)
              covered = covered.prev;
          }
        }
      }
  }
}
function checkCover(covered, from, to) {
  for (let range of covered) {
    if (range.from >= to)
      break;
    if (range.to > from)
      return range.from <= from && range.to >= to ? 2 : 1;
  }
  return 0;
}
function sliceBuf(buf, startI, endI, nodes, positions, off) {
  if (startI < endI) {
    let from = buf.buffer[startI + 1];
    nodes.push(buf.slice(startI, endI, from));
    positions.push(from - off);
  }
}
function materialize(cursor) {
  let { node } = cursor, stack = [];
  let buffer = node.context.buffer;
  do {
    stack.push(cursor.index);
    cursor.parent();
  } while (!cursor.tree);
  let base2 = cursor.tree, i2 = base2.children.indexOf(buffer);
  let buf = base2.children[i2], b = buf.buffer, newStack = [i2];
  function split(startI, endI, type, innerOffset, length, stackPos) {
    let targetI = stack[stackPos];
    let children = [], positions = [];
    sliceBuf(buf, startI, targetI, children, positions, innerOffset);
    let from = b[targetI + 1], to = b[targetI + 2];
    newStack.push(children.length);
    let child = stackPos ? split(targetI + 4, b[targetI + 3], buf.set.types[b[targetI]], from, to - from, stackPos - 1) : node.toTree();
    children.push(child);
    positions.push(from - innerOffset);
    sliceBuf(buf, b[targetI + 3], endI, children, positions, innerOffset);
    return new Tree(type, children, positions, length);
  }
  base2.children[i2] = split(0, b.length, NodeType.none, 0, buf.length, stack.length - 1);
  for (let index of newStack) {
    let tree = cursor.tree.children[index], pos = cursor.tree.positions[index];
    cursor.yield(new TreeNode(tree, pos + cursor.from, index, cursor._tree));
  }
}

class StructureCursor {
  constructor(root, offset) {
    this.offset = offset;
    this.done = false;
    this.cursor = root.cursor(IterMode.IncludeAnonymous | IterMode.IgnoreMounts);
  }
  moveTo(pos) {
    let { cursor } = this, p = pos - this.offset;
    while (!this.done && cursor.from < p) {
      if (cursor.to >= pos && cursor.enter(p, 1, IterMode.IgnoreOverlays | IterMode.ExcludeBuffers))
        ;
      else if (!cursor.next(false))
        this.done = true;
    }
  }
  hasNode(cursor) {
    this.moveTo(cursor.from);
    if (!this.done && this.cursor.from + this.offset == cursor.from && this.cursor.tree) {
      for (let tree = this.cursor.tree;; ) {
        if (tree == cursor.tree)
          return true;
        if (tree.children.length && tree.positions[0] == 0 && tree.children[0] instanceof Tree)
          tree = tree.children[0];
        else
          break;
      }
    }
    return false;
  }
}

class FragmentCursor {
  constructor(fragments) {
    var _a;
    this.fragments = fragments;
    this.curTo = 0;
    this.fragI = 0;
    if (fragments.length) {
      let first = this.curFrag = fragments[0];
      this.curTo = (_a = first.tree.prop(stoppedInner)) !== null && _a !== undefined ? _a : first.to;
      this.inner = new StructureCursor(first.tree, -first.offset);
    } else {
      this.curFrag = this.inner = null;
    }
  }
  hasNode(node) {
    while (this.curFrag && node.from >= this.curTo)
      this.nextFrag();
    return this.curFrag && this.curFrag.from <= node.from && this.curTo >= node.to && this.inner.hasNode(node);
  }
  nextFrag() {
    var _a;
    this.fragI++;
    if (this.fragI == this.fragments.length) {
      this.curFrag = this.inner = null;
    } else {
      let frag = this.curFrag = this.fragments[this.fragI];
      this.curTo = (_a = frag.tree.prop(stoppedInner)) !== null && _a !== undefined ? _a : frag.to;
      this.inner = new StructureCursor(frag.tree, -frag.offset);
    }
  }
  findMounts(pos, parser) {
    var _a;
    let result = [];
    if (this.inner) {
      this.inner.cursor.moveTo(pos, 1);
      for (let pos2 = this.inner.cursor.node;pos2; pos2 = pos2.parent) {
        let mount = (_a = pos2.tree) === null || _a === undefined ? undefined : _a.prop(NodeProp.mounted);
        if (mount && mount.parser == parser) {
          for (let i2 = this.fragI;i2 < this.fragments.length; i2++) {
            let frag = this.fragments[i2];
            if (frag.from >= pos2.to)
              break;
            if (frag.tree == this.curFrag.tree)
              result.push({
                frag,
                pos: pos2.from - frag.offset,
                mount
              });
          }
        }
      }
    }
    return result;
  }
}
function punchRanges(outer, ranges) {
  let copy = null, current = ranges;
  for (let i2 = 1, j = 0;i2 < outer.length; i2++) {
    let gapFrom = outer[i2 - 1].to, gapTo = outer[i2].from;
    for (;j < current.length; j++) {
      let r = current[j];
      if (r.from >= gapTo)
        break;
      if (r.to <= gapFrom)
        continue;
      if (!copy)
        current = copy = ranges.slice();
      if (r.from < gapFrom) {
        copy[j] = new Range2(r.from, gapFrom);
        if (r.to > gapTo)
          copy.splice(j + 1, 0, new Range2(gapTo, r.to));
      } else if (r.to > gapTo) {
        copy[j--] = new Range2(gapTo, r.to);
      } else {
        copy.splice(j--, 1);
      }
    }
  }
  return current;
}
function findCoverChanges(a, b, from, to) {
  let iA = 0, iB = 0, inA = false, inB = false, pos = -1e9;
  let result = [];
  for (;; ) {
    let nextA = iA == a.length ? 1e9 : inA ? a[iA].to : a[iA].from;
    let nextB = iB == b.length ? 1e9 : inB ? b[iB].to : b[iB].from;
    if (inA != inB) {
      let start = Math.max(pos, from), end = Math.min(nextA, nextB, to);
      if (start < end)
        result.push(new Range2(start, end));
    }
    pos = Math.min(nextA, nextB);
    if (pos == 1e9)
      break;
    if (nextA == pos) {
      if (!inA)
        inA = true;
      else {
        inA = false;
        iA++;
      }
    }
    if (nextB == pos) {
      if (!inB)
        inB = true;
      else {
        inB = false;
        iB++;
      }
    }
  }
  return result;
}
function enterFragments(mounts, ranges) {
  let result = [];
  for (let { pos, mount, frag } of mounts) {
    let startPos = pos + (mount.overlay ? mount.overlay[0].from : 0), endPos = startPos + mount.tree.length;
    let from = Math.max(frag.from, startPos), to = Math.min(frag.to, endPos);
    if (mount.overlay) {
      let overlay = mount.overlay.map((r) => new Range2(r.from + pos, r.to + pos));
      let changes = findCoverChanges(ranges, overlay, from, to);
      for (let i2 = 0, pos2 = from;; i2++) {
        let last = i2 == changes.length, end = last ? to : changes[i2].from;
        if (end > pos2)
          result.push(new TreeFragment(pos2, end, mount.tree, -startPos, frag.from >= pos2 || frag.openStart, frag.to <= end || frag.openEnd));
        if (last)
          break;
        pos2 = changes[i2].to;
      }
    } else {
      result.push(new TreeFragment(from, to, mount.tree, -startPos, frag.from >= startPos || frag.openStart, frag.to <= endPos || frag.openEnd));
    }
  }
  return result;
}

// node_modules/@lezer/highlight/dist/index.js
var nextTagID = 0;

class Tag {
  constructor(name, set, base2, modified) {
    this.name = name;
    this.set = set;
    this.base = base2;
    this.modified = modified;
    this.id = nextTagID++;
  }
  toString() {
    let { name } = this;
    for (let mod of this.modified)
      if (mod.name)
        name = `${mod.name}(${name})`;
    return name;
  }
  static define(nameOrParent, parent) {
    let name = typeof nameOrParent == "string" ? nameOrParent : "?";
    if (nameOrParent instanceof Tag)
      parent = nameOrParent;
    if (parent === null || parent === undefined ? undefined : parent.base)
      throw new Error("Can not derive from a modified tag");
    let tag = new Tag(name, [], null, []);
    tag.set.push(tag);
    if (parent)
      for (let t of parent.set)
        tag.set.push(t);
    return tag;
  }
  static defineModifier(name) {
    let mod = new Modifier(name);
    return (tag) => {
      if (tag.modified.indexOf(mod) > -1)
        return tag;
      return Modifier.get(tag.base || tag, tag.modified.concat(mod).sort((a, b) => a.id - b.id));
    };
  }
}
var nextModifierID = 0;

class Modifier {
  constructor(name) {
    this.name = name;
    this.instances = [];
    this.id = nextModifierID++;
  }
  static get(base2, mods) {
    if (!mods.length)
      return base2;
    let exists = mods[0].instances.find((t) => t.base == base2 && sameArray2(mods, t.modified));
    if (exists)
      return exists;
    let set = [], tag = new Tag(base2.name, set, base2, mods);
    for (let m of mods)
      m.instances.push(tag);
    let configs = powerSet(mods);
    for (let parent of base2.set)
      if (!parent.modified.length)
        for (let config of configs)
          set.push(Modifier.get(parent, config));
    return tag;
  }
}
function sameArray2(a, b) {
  return a.length == b.length && a.every((x, i2) => x == b[i2]);
}
function powerSet(array) {
  let sets = [[]];
  for (let i2 = 0;i2 < array.length; i2++) {
    for (let j = 0, e = sets.length;j < e; j++) {
      sets.push(sets[j].concat(array[i2]));
    }
  }
  return sets.sort((a, b) => b.length - a.length);
}
function styleTags(spec) {
  let byName = Object.create(null);
  for (let prop in spec) {
    let tags = spec[prop];
    if (!Array.isArray(tags))
      tags = [tags];
    for (let part of prop.split(" "))
      if (part) {
        let pieces = [], mode = 2, rest = part;
        for (let pos = 0;; ) {
          if (rest == "..." && pos > 0 && pos + 3 == part.length) {
            mode = 1;
            break;
          }
          let m = /^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(rest);
          if (!m)
            throw new RangeError("Invalid path: " + part);
          pieces.push(m[0] == "*" ? "" : m[0][0] == '"' ? JSON.parse(m[0]) : m[0]);
          pos += m[0].length;
          if (pos == part.length)
            break;
          let next = part[pos++];
          if (pos == part.length && next == "!") {
            mode = 0;
            break;
          }
          if (next != "/")
            throw new RangeError("Invalid path: " + part);
          rest = part.slice(pos);
        }
        let last = pieces.length - 1, inner = pieces[last];
        if (!inner)
          throw new RangeError("Invalid path: " + part);
        let rule = new Rule(tags, mode, last > 0 ? pieces.slice(0, last) : null);
        byName[inner] = rule.sort(byName[inner]);
      }
  }
  return ruleNodeProp.add(byName);
}
var ruleNodeProp = new NodeProp({
  combine(a, b) {
    let cur, root, take;
    while (a || b) {
      if (!a || b && a.depth >= b.depth) {
        take = b;
        b = b.next;
      } else {
        take = a;
        a = a.next;
      }
      if (cur && cur.mode == take.mode && !take.context && !cur.context)
        continue;
      let copy = new Rule(take.tags, take.mode, take.context);
      if (cur)
        cur.next = copy;
      else
        root = copy;
      cur = copy;
    }
    return root;
  }
});

class Rule {
  constructor(tags, mode, context, next) {
    this.tags = tags;
    this.mode = mode;
    this.context = context;
    this.next = next;
  }
  get opaque() {
    return this.mode == 0;
  }
  get inherit() {
    return this.mode == 1;
  }
  sort(other) {
    if (!other || other.depth < this.depth) {
      this.next = other;
      return this;
    }
    other.next = this.sort(other.next);
    return other;
  }
  get depth() {
    return this.context ? this.context.length : 0;
  }
}
Rule.empty = new Rule([], 2, null);
function tagHighlighter(tags, options) {
  let map = Object.create(null);
  for (let style of tags) {
    if (!Array.isArray(style.tag))
      map[style.tag.id] = style.class;
    else
      for (let tag of style.tag)
        map[tag.id] = style.class;
  }
  let { scope, all = null } = options || {};
  return {
    style: (tags2) => {
      let cls = all;
      for (let tag of tags2) {
        for (let sub of tag.set) {
          let tagClass = map[sub.id];
          if (tagClass) {
            cls = cls ? cls + " " + tagClass : tagClass;
            break;
          }
        }
      }
      return cls;
    },
    scope
  };
}
function highlightTags(highlighters, tags) {
  let result = null;
  for (let highlighter of highlighters) {
    let value = highlighter.style(tags);
    if (value)
      result = result ? result + " " + value : value;
  }
  return result;
}
function highlightTree(tree, highlighter, putStyle, from = 0, to = tree.length) {
  let builder = new HighlightBuilder(from, Array.isArray(highlighter) ? highlighter : [highlighter], putStyle);
  builder.highlightRange(tree.cursor(), from, to, "", builder.highlighters);
  builder.flush(to);
}
class HighlightBuilder {
  constructor(at, highlighters, span) {
    this.at = at;
    this.highlighters = highlighters;
    this.span = span;
    this.class = "";
  }
  startSpan(at, cls) {
    if (cls != this.class) {
      this.flush(at);
      if (at > this.at)
        this.at = at;
      this.class = cls;
    }
  }
  flush(to) {
    if (to > this.at && this.class)
      this.span(this.at, to, this.class);
  }
  highlightRange(cursor, from, to, inheritedClass, highlighters) {
    let { type, from: start, to: end } = cursor;
    if (start >= to || end <= from)
      return;
    if (type.isTop)
      highlighters = this.highlighters.filter((h) => !h.scope || h.scope(type));
    let cls = inheritedClass;
    let rule = getStyleTags(cursor) || Rule.empty;
    let tagCls = highlightTags(highlighters, rule.tags);
    if (tagCls) {
      if (cls)
        cls += " ";
      cls += tagCls;
      if (rule.mode == 1)
        inheritedClass += (inheritedClass ? " " : "") + tagCls;
    }
    this.startSpan(Math.max(from, start), cls);
    if (rule.opaque)
      return;
    let mounted = cursor.tree && cursor.tree.prop(NodeProp.mounted);
    if (mounted && mounted.overlay) {
      let inner = cursor.node.enter(mounted.overlay[0].from + start, 1);
      let innerHighlighters = this.highlighters.filter((h) => !h.scope || h.scope(mounted.tree.type));
      let hasChild2 = cursor.firstChild();
      for (let i2 = 0, pos = start;; i2++) {
        let next = i2 < mounted.overlay.length ? mounted.overlay[i2] : null;
        let nextPos = next ? next.from + start : end;
        let rangeFrom2 = Math.max(from, pos), rangeTo2 = Math.min(to, nextPos);
        if (rangeFrom2 < rangeTo2 && hasChild2) {
          while (cursor.from < rangeTo2) {
            this.highlightRange(cursor, rangeFrom2, rangeTo2, inheritedClass, highlighters);
            this.startSpan(Math.min(rangeTo2, cursor.to), cls);
            if (cursor.to >= nextPos || !cursor.nextSibling())
              break;
          }
        }
        if (!next || nextPos > to)
          break;
        pos = next.to + start;
        if (pos > from) {
          this.highlightRange(inner.cursor(), Math.max(from, next.from + start), Math.min(to, pos), "", innerHighlighters);
          this.startSpan(Math.min(to, pos), cls);
        }
      }
      if (hasChild2)
        cursor.parent();
    } else if (cursor.firstChild()) {
      if (mounted)
        inheritedClass = "";
      do {
        if (cursor.to <= from)
          continue;
        if (cursor.from >= to)
          break;
        this.highlightRange(cursor, from, to, inheritedClass, highlighters);
        this.startSpan(Math.min(to, cursor.to), cls);
      } while (cursor.nextSibling());
      cursor.parent();
    }
  }
}
function getStyleTags(node) {
  let rule = node.type.prop(ruleNodeProp);
  while (rule && rule.context && !node.matchContext(rule.context))
    rule = rule.next;
  return rule || null;
}
var t = Tag.define;
var comment = t();
var name = t();
var typeName = t(name);
var propertyName = t(name);
var literal = t();
var string = t(literal);
var number = t(literal);
var content = t();
var heading = t(content);
var keyword = t();
var operator = t();
var punctuation = t();
var bracket = t(punctuation);
var meta = t();
var tags = {
  comment,
  lineComment: t(comment),
  blockComment: t(comment),
  docComment: t(comment),
  name,
  variableName: t(name),
  typeName,
  tagName: t(typeName),
  propertyName,
  attributeName: t(propertyName),
  className: t(name),
  labelName: t(name),
  namespace: t(name),
  macroName: t(name),
  literal,
  string,
  docString: t(string),
  character: t(string),
  attributeValue: t(string),
  number,
  integer: t(number),
  float: t(number),
  bool: t(literal),
  regexp: t(literal),
  escape: t(literal),
  color: t(literal),
  url: t(literal),
  keyword,
  self: t(keyword),
  null: t(keyword),
  atom: t(keyword),
  unit: t(keyword),
  modifier: t(keyword),
  operatorKeyword: t(keyword),
  controlKeyword: t(keyword),
  definitionKeyword: t(keyword),
  moduleKeyword: t(keyword),
  operator,
  derefOperator: t(operator),
  arithmeticOperator: t(operator),
  logicOperator: t(operator),
  bitwiseOperator: t(operator),
  compareOperator: t(operator),
  updateOperator: t(operator),
  definitionOperator: t(operator),
  typeOperator: t(operator),
  controlOperator: t(operator),
  punctuation,
  separator: t(punctuation),
  bracket,
  angleBracket: t(bracket),
  squareBracket: t(bracket),
  paren: t(bracket),
  brace: t(bracket),
  content,
  heading,
  heading1: t(heading),
  heading2: t(heading),
  heading3: t(heading),
  heading4: t(heading),
  heading5: t(heading),
  heading6: t(heading),
  contentSeparator: t(content),
  list: t(content),
  quote: t(content),
  emphasis: t(content),
  strong: t(content),
  link: t(content),
  monospace: t(content),
  strikethrough: t(content),
  inserted: t(),
  deleted: t(),
  changed: t(),
  invalid: t(),
  meta,
  documentMeta: t(meta),
  annotation: t(meta),
  processingInstruction: t(meta),
  definition: Tag.defineModifier("definition"),
  constant: Tag.defineModifier("constant"),
  function: Tag.defineModifier("function"),
  standard: Tag.defineModifier("standard"),
  local: Tag.defineModifier("local"),
  special: Tag.defineModifier("special")
};
for (let name2 in tags) {
  let val = tags[name2];
  if (val instanceof Tag)
    val.name = name2;
}
var classHighlighter = tagHighlighter([
  { tag: tags.link, class: "tok-link" },
  { tag: tags.heading, class: "tok-heading" },
  { tag: tags.emphasis, class: "tok-emphasis" },
  { tag: tags.strong, class: "tok-strong" },
  { tag: tags.keyword, class: "tok-keyword" },
  { tag: tags.atom, class: "tok-atom" },
  { tag: tags.bool, class: "tok-bool" },
  { tag: tags.url, class: "tok-url" },
  { tag: tags.labelName, class: "tok-labelName" },
  { tag: tags.inserted, class: "tok-inserted" },
  { tag: tags.deleted, class: "tok-deleted" },
  { tag: tags.literal, class: "tok-literal" },
  { tag: tags.string, class: "tok-string" },
  { tag: tags.number, class: "tok-number" },
  { tag: [tags.regexp, tags.escape, tags.special(tags.string)], class: "tok-string2" },
  { tag: tags.variableName, class: "tok-variableName" },
  { tag: tags.local(tags.variableName), class: "tok-variableName tok-local" },
  { tag: tags.definition(tags.variableName), class: "tok-variableName tok-definition" },
  { tag: tags.special(tags.variableName), class: "tok-variableName2" },
  { tag: tags.definition(tags.propertyName), class: "tok-propertyName tok-definition" },
  { tag: tags.typeName, class: "tok-typeName" },
  { tag: tags.namespace, class: "tok-namespace" },
  { tag: tags.className, class: "tok-className" },
  { tag: tags.macroName, class: "tok-macroName" },
  { tag: tags.propertyName, class: "tok-propertyName" },
  { tag: tags.operator, class: "tok-operator" },
  { tag: tags.comment, class: "tok-comment" },
  { tag: tags.meta, class: "tok-meta" },
  { tag: tags.invalid, class: "tok-invalid" },
  { tag: tags.punctuation, class: "tok-punctuation" }
]);

// node_modules/@codemirror/language/dist/index.js
var _a;
var languageDataProp = /* @__PURE__ */ new NodeProp;
function defineLanguageFacet(baseData) {
  return Facet.define({
    combine: baseData ? (values) => values.concat(baseData) : undefined
  });
}
var sublanguageProp = /* @__PURE__ */ new NodeProp;

class Language {
  constructor(data, parser, extraExtensions = [], name2 = "") {
    this.data = data;
    this.name = name2;
    if (!EditorState.prototype.hasOwnProperty("tree"))
      Object.defineProperty(EditorState.prototype, "tree", { get() {
        return syntaxTree(this);
      } });
    this.parser = parser;
    this.extension = [
      language.of(this),
      EditorState.languageData.of((state, pos, side) => {
        let top2 = topNodeAt(state, pos, side), data2 = top2.type.prop(languageDataProp);
        if (!data2)
          return [];
        let base2 = state.facet(data2), sub = top2.type.prop(sublanguageProp);
        if (sub) {
          let innerNode = top2.resolve(pos - top2.from, side);
          for (let sublang of sub)
            if (sublang.test(innerNode, state)) {
              let data3 = state.facet(sublang.facet);
              return sublang.type == "replace" ? data3 : data3.concat(base2);
            }
        }
        return base2;
      })
    ].concat(extraExtensions);
  }
  isActiveAt(state, pos, side = -1) {
    return topNodeAt(state, pos, side).type.prop(languageDataProp) == this.data;
  }
  findRegions(state) {
    let lang = state.facet(language);
    if ((lang === null || lang === undefined ? undefined : lang.data) == this.data)
      return [{ from: 0, to: state.doc.length }];
    if (!lang || !lang.allowsNesting)
      return [];
    let result = [];
    let explore = (tree, from) => {
      if (tree.prop(languageDataProp) == this.data) {
        result.push({ from, to: from + tree.length });
        return;
      }
      let mount = tree.prop(NodeProp.mounted);
      if (mount) {
        if (mount.tree.prop(languageDataProp) == this.data) {
          if (mount.overlay)
            for (let r of mount.overlay)
              result.push({ from: r.from + from, to: r.to + from });
          else
            result.push({ from, to: from + tree.length });
          return;
        } else if (mount.overlay) {
          let size = result.length;
          explore(mount.tree, mount.overlay[0].from + from);
          if (result.length > size)
            return;
        }
      }
      for (let i2 = 0;i2 < tree.children.length; i2++) {
        let ch = tree.children[i2];
        if (ch instanceof Tree)
          explore(ch, tree.positions[i2] + from);
      }
    };
    explore(syntaxTree(state), 0);
    return result;
  }
  get allowsNesting() {
    return true;
  }
}
Language.setState = /* @__PURE__ */ StateEffect.define();
function topNodeAt(state, pos, side) {
  let topLang = state.facet(language), tree = syntaxTree(state).topNode;
  if (!topLang || topLang.allowsNesting) {
    for (let node = tree;node; node = node.enter(pos, side, IterMode.ExcludeBuffers | IterMode.EnterBracketed))
      if (node.type.isTop)
        tree = node;
  }
  return tree;
}

class LRLanguage extends Language {
  constructor(data, parser, name2) {
    super(data, parser, [], name2);
    this.parser = parser;
  }
  static define(spec) {
    let data = defineLanguageFacet(spec.languageData);
    return new LRLanguage(data, spec.parser.configure({
      props: [languageDataProp.add((type) => type.isTop ? data : undefined)]
    }), spec.name);
  }
  configure(options, name2) {
    return new LRLanguage(this.data, this.parser.configure(options), name2 || this.name);
  }
  get allowsNesting() {
    return this.parser.hasWrappers();
  }
}
function syntaxTree(state) {
  let field = state.field(Language.state, false);
  return field ? field.tree : Tree.empty;
}
class DocInput {
  constructor(doc2) {
    this.doc = doc2;
    this.cursorPos = 0;
    this.string = "";
    this.cursor = doc2.iter();
  }
  get length() {
    return this.doc.length;
  }
  syncTo(pos) {
    this.string = this.cursor.next(pos - this.cursorPos).value;
    this.cursorPos = pos + this.string.length;
    return this.cursorPos - this.string.length;
  }
  chunk(pos) {
    this.syncTo(pos);
    return this.string;
  }
  get lineChunks() {
    return true;
  }
  read(from, to) {
    let stringStart = this.cursorPos - this.string.length;
    if (from < stringStart || to >= this.cursorPos)
      return this.doc.sliceString(from, to);
    else
      return this.string.slice(from - stringStart, to - stringStart);
  }
}
var currentContext = null;

class ParseContext {
  constructor(parser, state, fragments = [], tree, treeLen, viewport, skipped, scheduleOn) {
    this.parser = parser;
    this.state = state;
    this.fragments = fragments;
    this.tree = tree;
    this.treeLen = treeLen;
    this.viewport = viewport;
    this.skipped = skipped;
    this.scheduleOn = scheduleOn;
    this.parse = null;
    this.tempSkipped = [];
  }
  static create(parser, state, viewport) {
    return new ParseContext(parser, state, [], Tree.empty, 0, viewport, [], null);
  }
  startParse() {
    return this.parser.startParse(new DocInput(this.state.doc), this.fragments);
  }
  work(until, upto) {
    if (upto != null && upto >= this.state.doc.length)
      upto = undefined;
    if (this.tree != Tree.empty && this.isDone(upto !== null && upto !== undefined ? upto : this.state.doc.length)) {
      this.takeTree();
      return true;
    }
    return this.withContext(() => {
      var _a2;
      if (typeof until == "number") {
        let endTime = Date.now() + until;
        until = () => Date.now() > endTime;
      }
      if (!this.parse)
        this.parse = this.startParse();
      if (upto != null && (this.parse.stoppedAt == null || this.parse.stoppedAt > upto) && upto < this.state.doc.length)
        this.parse.stopAt(upto);
      for (;; ) {
        let done = this.parse.advance();
        if (done) {
          this.fragments = this.withoutTempSkipped(TreeFragment.addTree(done, this.fragments, this.parse.stoppedAt != null));
          this.treeLen = (_a2 = this.parse.stoppedAt) !== null && _a2 !== undefined ? _a2 : this.state.doc.length;
          this.tree = done;
          this.parse = null;
          if (this.treeLen < (upto !== null && upto !== undefined ? upto : this.state.doc.length))
            this.parse = this.startParse();
          else
            return true;
        }
        if (until())
          return false;
      }
    });
  }
  takeTree() {
    let pos, tree;
    if (this.parse && (pos = this.parse.parsedPos) >= this.treeLen) {
      if (this.parse.stoppedAt == null || this.parse.stoppedAt > pos)
        this.parse.stopAt(pos);
      this.withContext(() => {
        while (!(tree = this.parse.advance())) {}
      });
      this.treeLen = pos;
      this.tree = tree;
      this.fragments = this.withoutTempSkipped(TreeFragment.addTree(this.tree, this.fragments, true));
      this.parse = null;
    }
  }
  withContext(f) {
    let prev = currentContext;
    currentContext = this;
    try {
      return f();
    } finally {
      currentContext = prev;
    }
  }
  withoutTempSkipped(fragments) {
    for (let r;r = this.tempSkipped.pop(); )
      fragments = cutFragments(fragments, r.from, r.to);
    return fragments;
  }
  changes(changes, newState) {
    let { fragments, tree, treeLen, viewport, skipped } = this;
    this.takeTree();
    if (!changes.empty) {
      let ranges = [];
      changes.iterChangedRanges((fromA, toA, fromB, toB) => ranges.push({ fromA, toA, fromB, toB }));
      fragments = TreeFragment.applyChanges(fragments, ranges);
      tree = Tree.empty;
      treeLen = 0;
      viewport = { from: changes.mapPos(viewport.from, -1), to: changes.mapPos(viewport.to, 1) };
      if (this.skipped.length) {
        skipped = [];
        for (let r of this.skipped) {
          let from = changes.mapPos(r.from, 1), to = changes.mapPos(r.to, -1);
          if (from < to)
            skipped.push({ from, to });
        }
      }
    }
    return new ParseContext(this.parser, newState, fragments, tree, treeLen, viewport, skipped, this.scheduleOn);
  }
  updateViewport(viewport) {
    if (this.viewport.from == viewport.from && this.viewport.to == viewport.to)
      return false;
    this.viewport = viewport;
    let startLen = this.skipped.length;
    for (let i2 = 0;i2 < this.skipped.length; i2++) {
      let { from, to } = this.skipped[i2];
      if (from < viewport.to && to > viewport.from) {
        this.fragments = cutFragments(this.fragments, from, to);
        this.skipped.splice(i2--, 1);
      }
    }
    if (this.skipped.length >= startLen)
      return false;
    this.reset();
    return true;
  }
  reset() {
    if (this.parse) {
      this.takeTree();
      this.parse = null;
    }
  }
  skipUntilInView(from, to) {
    this.skipped.push({ from, to });
  }
  static getSkippingParser(until) {
    return new class extends Parser {
      createParse(input, fragments, ranges) {
        let from = ranges[0].from, to = ranges[ranges.length - 1].to;
        let parser = {
          parsedPos: from,
          advance() {
            let cx = currentContext;
            if (cx) {
              for (let r of ranges)
                cx.tempSkipped.push(r);
              if (until)
                cx.scheduleOn = cx.scheduleOn ? Promise.all([cx.scheduleOn, until]) : until;
            }
            this.parsedPos = to;
            return new Tree(NodeType.none, [], [], to - from);
          },
          stoppedAt: null,
          stopAt() {}
        };
        return parser;
      }
    };
  }
  isDone(upto) {
    upto = Math.min(upto, this.state.doc.length);
    let frags = this.fragments;
    return this.treeLen >= upto && frags.length && frags[0].from == 0 && frags[0].to >= upto;
  }
  static get() {
    return currentContext;
  }
}
function cutFragments(fragments, from, to) {
  return TreeFragment.applyChanges(fragments, [{ fromA: from, toA: to, fromB: from, toB: to }]);
}

class LanguageState {
  constructor(context) {
    this.context = context;
    this.tree = context.tree;
  }
  apply(tr) {
    if (!tr.docChanged && this.tree == this.context.tree)
      return this;
    let newCx = this.context.changes(tr.changes, tr.state);
    let upto = this.context.treeLen == tr.startState.doc.length ? undefined : Math.max(tr.changes.mapPos(this.context.treeLen), newCx.viewport.to);
    if (!newCx.work(20, upto))
      newCx.takeTree();
    return new LanguageState(newCx);
  }
  static init(state) {
    let vpTo = Math.min(3000, state.doc.length);
    let parseState = ParseContext.create(state.facet(language).parser, state, { from: 0, to: vpTo });
    if (!parseState.work(20, vpTo))
      parseState.takeTree();
    return new LanguageState(parseState);
  }
}
Language.state = /* @__PURE__ */ StateField.define({
  create: LanguageState.init,
  update(value, tr) {
    for (let e of tr.effects)
      if (e.is(Language.setState))
        return e.value;
    if (tr.startState.facet(language) != tr.state.facet(language))
      return LanguageState.init(tr.state);
    return value.apply(tr);
  }
});
var requestIdle = (callback) => {
  let timeout = setTimeout(() => callback(), 500);
  return () => clearTimeout(timeout);
};
if (typeof requestIdleCallback != "undefined")
  requestIdle = (callback) => {
    let idle = -1, timeout = setTimeout(() => {
      idle = requestIdleCallback(callback, { timeout: 500 - 100 });
    }, 100);
    return () => idle < 0 ? clearTimeout(timeout) : cancelIdleCallback(idle);
  };
var isInputPending = typeof navigator != "undefined" && ((_a = navigator.scheduling) === null || _a === undefined ? undefined : _a.isInputPending) ? () => navigator.scheduling.isInputPending() : null;
var parseWorker = /* @__PURE__ */ ViewPlugin.fromClass(class ParseWorker {
  constructor(view) {
    this.view = view;
    this.working = null;
    this.workScheduled = 0;
    this.chunkEnd = -1;
    this.chunkBudget = -1;
    this.work = this.work.bind(this);
    this.scheduleWork();
  }
  update(update) {
    let cx = this.view.state.field(Language.state).context;
    if (cx.updateViewport(update.view.viewport) || this.view.viewport.to > cx.treeLen)
      this.scheduleWork();
    if (update.docChanged || update.selectionSet) {
      if (this.view.hasFocus)
        this.chunkBudget += 50;
      this.scheduleWork();
    }
    this.checkAsyncSchedule(cx);
  }
  scheduleWork() {
    if (this.working)
      return;
    let { state } = this.view, field = state.field(Language.state);
    if (field.tree != field.context.tree || !field.context.isDone(state.doc.length))
      this.working = requestIdle(this.work);
  }
  work(deadline) {
    this.working = null;
    let now = Date.now();
    if (this.chunkEnd < now && (this.chunkEnd < 0 || this.view.hasFocus)) {
      this.chunkEnd = now + 30000;
      this.chunkBudget = 3000;
    }
    if (this.chunkBudget <= 0)
      return;
    let { state, viewport: { to: vpTo } } = this.view, field = state.field(Language.state);
    if (field.tree == field.context.tree && field.context.isDone(vpTo + 1e5))
      return;
    let endTime = Date.now() + Math.min(this.chunkBudget, 100, deadline && !isInputPending ? Math.max(25, deadline.timeRemaining() - 5) : 1e9);
    let viewportFirst = field.context.treeLen < vpTo && state.doc.length > vpTo + 1000;
    let done = field.context.work(() => {
      return isInputPending && isInputPending() || Date.now() > endTime;
    }, vpTo + (viewportFirst ? 0 : 1e5));
    this.chunkBudget -= Date.now() - now;
    if (done || this.chunkBudget <= 0) {
      field.context.takeTree();
      this.view.dispatch({ effects: Language.setState.of(new LanguageState(field.context)) });
    }
    if (this.chunkBudget > 0 && !(done && !viewportFirst))
      this.scheduleWork();
    this.checkAsyncSchedule(field.context);
  }
  checkAsyncSchedule(cx) {
    if (cx.scheduleOn) {
      this.workScheduled++;
      cx.scheduleOn.then(() => this.scheduleWork()).catch((err) => logException(this.view.state, err)).then(() => this.workScheduled--);
      cx.scheduleOn = null;
    }
  }
  destroy() {
    if (this.working)
      this.working();
  }
  isWorking() {
    return !!(this.working || this.workScheduled > 0);
  }
}, {
  eventHandlers: { focus() {
    this.scheduleWork();
  } }
});
var language = /* @__PURE__ */ Facet.define({
  combine(languages) {
    return languages.length ? languages[0] : null;
  },
  enables: (language2) => [
    Language.state,
    parseWorker,
    EditorView.contentAttributes.compute([language2], (state) => {
      let lang = state.facet(language2);
      return lang && lang.name ? { "data-language": lang.name } : {};
    })
  ]
});

class LanguageSupport {
  constructor(language2, support = []) {
    this.language = language2;
    this.support = support;
    this.extension = [language2, support];
  }
}

class LanguageDescription {
  constructor(name2, alias, extensions, filename, loadFunc, support = undefined) {
    this.name = name2;
    this.alias = alias;
    this.extensions = extensions;
    this.filename = filename;
    this.loadFunc = loadFunc;
    this.support = support;
    this.loading = null;
  }
  load() {
    return this.loading || (this.loading = this.loadFunc().then((support) => this.support = support, (err) => {
      this.loading = null;
      throw err;
    }));
  }
  static of(spec) {
    let { load, support } = spec;
    if (!load) {
      if (!support)
        throw new RangeError("Must pass either 'load' or 'support' to LanguageDescription.of");
      load = () => Promise.resolve(support);
    }
    return new LanguageDescription(spec.name, (spec.alias || []).concat(spec.name).map((s) => s.toLowerCase()), spec.extensions || [], spec.filename, load, support);
  }
  static matchFilename(descs, filename) {
    for (let d of descs)
      if (d.filename && d.filename.test(filename))
        return d;
    let ext = /\.([^.]+)$/.exec(filename);
    if (ext) {
      for (let d of descs)
        if (d.extensions.indexOf(ext[1]) > -1)
          return d;
    }
    return null;
  }
  static matchLanguageName(descs, name2, fuzzy = true) {
    name2 = name2.toLowerCase();
    for (let d of descs)
      if (d.alias.some((a) => a == name2))
        return d;
    if (fuzzy)
      for (let d of descs)
        for (let a of d.alias) {
          let found = name2.indexOf(a);
          if (found > -1 && (a.length > 2 || !/\w/.test(name2[found - 1]) && !/\w/.test(name2[found + a.length])))
            return d;
        }
    return null;
  }
}
var indentService = /* @__PURE__ */ Facet.define();
var indentUnit = /* @__PURE__ */ Facet.define({
  combine: (values) => {
    if (!values.length)
      return "  ";
    let unit = values[0];
    if (!unit || /\S/.test(unit) || Array.from(unit).some((e) => e != unit[0]))
      throw new Error("Invalid indent unit: " + JSON.stringify(values[0]));
    return unit;
  }
});
function getIndentUnit(state) {
  let unit = state.facet(indentUnit);
  return unit.charCodeAt(0) == 9 ? state.tabSize * unit.length : unit.length;
}
function indentString(state, cols) {
  let result = "", ts = state.tabSize, ch = state.facet(indentUnit)[0];
  if (ch == "\t") {
    while (cols >= ts) {
      result += "\t";
      cols -= ts;
    }
    ch = " ";
  }
  for (let i2 = 0;i2 < cols; i2++)
    result += ch;
  return result;
}
function getIndentation(context, pos) {
  if (context instanceof EditorState)
    context = new IndentContext(context);
  for (let service of context.state.facet(indentService)) {
    let result = service(context, pos);
    if (result !== undefined)
      return result;
  }
  let tree = syntaxTree(context.state);
  return tree.length >= pos ? syntaxIndentation(context, tree, pos) : null;
}
class IndentContext {
  constructor(state, options = {}) {
    this.state = state;
    this.options = options;
    this.unit = getIndentUnit(state);
  }
  lineAt(pos, bias = 1) {
    let line = this.state.doc.lineAt(pos);
    let { simulateBreak, simulateDoubleBreak } = this.options;
    if (simulateBreak != null && simulateBreak >= line.from && simulateBreak <= line.to) {
      if (simulateDoubleBreak && simulateBreak == pos)
        return { text: "", from: pos };
      else if (bias < 0 ? simulateBreak < pos : simulateBreak <= pos)
        return { text: line.text.slice(simulateBreak - line.from), from: simulateBreak };
      else
        return { text: line.text.slice(0, simulateBreak - line.from), from: line.from };
    }
    return line;
  }
  textAfterPos(pos, bias = 1) {
    if (this.options.simulateDoubleBreak && pos == this.options.simulateBreak)
      return "";
    let { text, from } = this.lineAt(pos, bias);
    return text.slice(pos - from, Math.min(text.length, pos + 100 - from));
  }
  column(pos, bias = 1) {
    let { text, from } = this.lineAt(pos, bias);
    let result = this.countColumn(text, pos - from);
    let override = this.options.overrideIndentation ? this.options.overrideIndentation(from) : -1;
    if (override > -1)
      result += override - this.countColumn(text, text.search(/\S|$/));
    return result;
  }
  countColumn(line, pos = line.length) {
    return countColumn(line, this.state.tabSize, pos);
  }
  lineIndent(pos, bias = 1) {
    let { text, from } = this.lineAt(pos, bias);
    let override = this.options.overrideIndentation;
    if (override) {
      let overriden = override(from);
      if (overriden > -1)
        return overriden;
    }
    return this.countColumn(text, text.search(/\S|$/));
  }
  get simulatedBreak() {
    return this.options.simulateBreak || null;
  }
}
var indentNodeProp = /* @__PURE__ */ new NodeProp;
function syntaxIndentation(cx, ast, pos) {
  let stack = ast.resolveStack(pos);
  let inner = ast.resolveInner(pos, -1).resolve(pos, 0).enterUnfinishedNodesBefore(pos);
  if (inner != stack.node) {
    let add2 = [];
    for (let cur = inner;cur && !(cur.from < stack.node.from || cur.to > stack.node.to || cur.from == stack.node.from && cur.type == stack.node.type); cur = cur.parent)
      add2.push(cur);
    for (let i2 = add2.length - 1;i2 >= 0; i2--)
      stack = { node: add2[i2], next: stack };
  }
  return indentFor(stack, cx, pos);
}
function indentFor(stack, cx, pos) {
  for (let cur = stack;cur; cur = cur.next) {
    let strategy = indentStrategy(cur.node);
    if (strategy)
      return strategy(TreeIndentContext.create(cx, pos, cur));
  }
  return 0;
}
function ignoreClosed(cx) {
  return cx.pos == cx.options.simulateBreak && cx.options.simulateDoubleBreak;
}
function indentStrategy(tree) {
  let strategy = tree.type.prop(indentNodeProp);
  if (strategy)
    return strategy;
  let first = tree.firstChild, close;
  if (first && (close = first.type.prop(NodeProp.closedBy))) {
    let last = tree.lastChild, closed = last && close.indexOf(last.name) > -1;
    return (cx) => delimitedStrategy(cx, true, 1, undefined, closed && !ignoreClosed(cx) ? last.from : undefined);
  }
  return tree.parent == null ? topIndent : null;
}
function topIndent() {
  return 0;
}

class TreeIndentContext extends IndentContext {
  constructor(base2, pos, context) {
    super(base2.state, base2.options);
    this.base = base2;
    this.pos = pos;
    this.context = context;
  }
  get node() {
    return this.context.node;
  }
  static create(base2, pos, context) {
    return new TreeIndentContext(base2, pos, context);
  }
  get textAfter() {
    return this.textAfterPos(this.pos);
  }
  get baseIndent() {
    return this.baseIndentFor(this.node);
  }
  baseIndentFor(node) {
    let line = this.state.doc.lineAt(node.from);
    for (;; ) {
      let atBreak = node.resolve(line.from);
      while (atBreak.parent && atBreak.parent.from == atBreak.from)
        atBreak = atBreak.parent;
      if (isParent(atBreak, node))
        break;
      line = this.state.doc.lineAt(atBreak.from);
    }
    return this.lineIndent(line.from);
  }
  continue() {
    return indentFor(this.context.next, this.base, this.pos);
  }
}
function isParent(parent, of) {
  for (let cur = of;cur; cur = cur.parent)
    if (parent == cur)
      return true;
  return false;
}
function bracketedAligned(context) {
  let tree = context.node;
  let openToken = tree.childAfter(tree.from), last = tree.lastChild;
  if (!openToken)
    return null;
  let sim = context.options.simulateBreak;
  let openLine = context.state.doc.lineAt(openToken.from);
  let lineEnd = sim == null || sim <= openLine.from ? openLine.to : Math.min(openLine.to, sim);
  for (let pos = openToken.to;; ) {
    let next = tree.childAfter(pos);
    if (!next || next == last)
      return null;
    if (!next.type.isSkipped) {
      if (next.from >= lineEnd)
        return null;
      let space = /^ */.exec(openLine.text.slice(openToken.to - openLine.from))[0].length;
      return { from: openToken.from, to: openToken.to + space };
    }
    pos = next.to;
  }
}
function delimitedIndent({ closing, align = true, units = 1 }) {
  return (context) => delimitedStrategy(context, align, units, closing);
}
function delimitedStrategy(context, align, units, closing, closedAt) {
  let after = context.textAfter, space = after.match(/^\s*/)[0].length;
  let closed = closing && after.slice(space, space + closing.length) == closing || closedAt == context.pos + space;
  let aligned = align ? bracketedAligned(context) : null;
  if (aligned)
    return closed ? context.column(aligned.from) : context.column(aligned.to);
  return context.baseIndent + (closed ? 0 : context.unit * units);
}
var flatIndent = (context) => context.baseIndent;
function continuedIndent({ except, units = 1 } = {}) {
  return (context) => {
    let matchExcept = except && except.test(context.textAfter);
    return context.baseIndent + (matchExcept ? 0 : units * context.unit);
  };
}
var DontIndentBeyond = 200;
function indentOnInput() {
  return EditorState.transactionFilter.of((tr) => {
    if (!tr.docChanged || !tr.isUserEvent("input.type") && !tr.isUserEvent("input.complete"))
      return tr;
    let rules = tr.startState.languageDataAt("indentOnInput", tr.startState.selection.main.head);
    if (!rules.length)
      return tr;
    let doc2 = tr.newDoc, { head } = tr.newSelection.main, line = doc2.lineAt(head);
    if (head > line.from + DontIndentBeyond)
      return tr;
    let lineStart = doc2.sliceString(line.from, head);
    if (!rules.some((r) => r.test(lineStart)))
      return tr;
    let { state } = tr, last = -1, changes = [];
    for (let { head: head2 } of state.selection.ranges) {
      let line2 = state.doc.lineAt(head2);
      if (line2.from == last)
        continue;
      last = line2.from;
      let indent = getIndentation(state, line2.from);
      if (indent == null)
        continue;
      let cur = /^\s*/.exec(line2.text)[0];
      let norm = indentString(state, indent);
      if (cur != norm)
        changes.push({ from: line2.from, to: line2.from + cur.length, insert: norm });
    }
    return changes.length ? [tr, { changes, sequential: true }] : tr;
  });
}
var foldService = /* @__PURE__ */ Facet.define();
var foldNodeProp = /* @__PURE__ */ new NodeProp;
function foldInside(node) {
  let { firstChild: first, lastChild: last } = node;
  return first && first.to < last.from ? { from: first.to, to: last.type.isError ? node.to : last.from } : null;
}
function syntaxFolding(state, start, end) {
  let tree = syntaxTree(state);
  if (tree.length < end)
    return null;
  let stack = tree.resolveStack(end, 1);
  let found = null;
  for (let iter = stack;iter; iter = iter.next) {
    let cur = iter.node;
    if (cur.to <= end || cur.from > end)
      continue;
    if (found && cur.from < start)
      break;
    let prop = cur.type.prop(foldNodeProp);
    if (prop && (cur.to < tree.length - 50 || tree.length == state.doc.length || !isUnfinished(cur))) {
      let value = prop(cur, state);
      if (value && value.from <= end && value.from >= start && value.to > end)
        found = value;
    }
  }
  return found;
}
function isUnfinished(node) {
  let ch = node.lastChild;
  return ch && ch.to == node.to && ch.type.isError;
}
function foldable(state, lineStart, lineEnd) {
  for (let service of state.facet(foldService)) {
    let result = service(state, lineStart, lineEnd);
    if (result)
      return result;
  }
  return syntaxFolding(state, lineStart, lineEnd);
}
function mapRange(range, mapping) {
  let from = mapping.mapPos(range.from, 1), to = mapping.mapPos(range.to, -1);
  return from >= to ? undefined : { from, to };
}
var foldEffect = /* @__PURE__ */ StateEffect.define({ map: mapRange });
var unfoldEffect = /* @__PURE__ */ StateEffect.define({ map: mapRange });
function selectedLines(view) {
  let lines = [];
  for (let { head } of view.state.selection.ranges) {
    if (lines.some((l) => l.from <= head && l.to >= head))
      continue;
    lines.push(view.lineBlockAt(head));
  }
  return lines;
}
var foldState = /* @__PURE__ */ StateField.define({
  create() {
    return Decoration.none;
  },
  update(folded, tr) {
    if (tr.isUserEvent("delete"))
      tr.changes.iterChangedRanges((fromA, toA) => folded = clearTouchedFolds(folded, fromA, toA));
    folded = folded.map(tr.changes);
    for (let e of tr.effects) {
      if (e.is(foldEffect) && !foldExists(folded, e.value.from, e.value.to)) {
        let { preparePlaceholder } = tr.state.facet(foldConfig);
        let widget = !preparePlaceholder ? foldWidget : Decoration.replace({ widget: new PreparedFoldWidget(preparePlaceholder(tr.state, e.value)) });
        folded = folded.update({ add: [widget.range(e.value.from, e.value.to)] });
      } else if (e.is(unfoldEffect)) {
        folded = folded.update({
          filter: (from, to) => e.value.from != from || e.value.to != to,
          filterFrom: e.value.from,
          filterTo: e.value.to
        });
      }
    }
    if (tr.selection)
      folded = clearTouchedFolds(folded, tr.selection.main.head);
    return folded;
  },
  provide: (f) => EditorView.decorations.from(f),
  toJSON(folded, state) {
    let ranges = [];
    folded.between(0, state.doc.length, (from, to) => {
      ranges.push(from, to);
    });
    return ranges;
  },
  fromJSON(value) {
    if (!Array.isArray(value) || value.length % 2)
      throw new RangeError("Invalid JSON for fold state");
    let ranges = [];
    for (let i2 = 0;i2 < value.length; ) {
      let from = value[i2++], to = value[i2++];
      if (typeof from != "number" || typeof to != "number")
        throw new RangeError("Invalid JSON for fold state");
      ranges.push(foldWidget.range(from, to));
    }
    return Decoration.set(ranges, true);
  }
});
function clearTouchedFolds(folded, from, to = from) {
  let touched = false;
  folded.between(from, to, (a, b) => {
    if (a < to && b > from)
      touched = true;
  });
  return !touched ? folded : folded.update({
    filterFrom: from,
    filterTo: to,
    filter: (a, b) => a >= to || b <= from
  });
}
function findFold(state, from, to) {
  var _a2;
  let found = null;
  (_a2 = state.field(foldState, false)) === null || _a2 === undefined || _a2.between(from, to, (from2, to2) => {
    if (!found || found.from > from2)
      found = { from: from2, to: to2 };
  });
  return found;
}
function foldExists(folded, from, to) {
  let found = false;
  folded.between(from, from, (a, b) => {
    if (a == from && b == to)
      found = true;
  });
  return found;
}
function maybeEnable(state, other) {
  return state.field(foldState, false) ? other : other.concat(StateEffect.appendConfig.of(codeFolding()));
}
var foldCode = (view) => {
  for (let line of selectedLines(view)) {
    let range = foldable(view.state, line.from, line.to);
    if (range) {
      view.dispatch({ effects: maybeEnable(view.state, [foldEffect.of(range), announceFold(view, range)]) });
      return true;
    }
  }
  return false;
};
var unfoldCode = (view) => {
  if (!view.state.field(foldState, false))
    return false;
  let effects = [];
  for (let line of selectedLines(view)) {
    let folded = findFold(view.state, line.from, line.to);
    if (folded)
      effects.push(unfoldEffect.of(folded), announceFold(view, folded, false));
  }
  if (effects.length)
    view.dispatch({ effects });
  return effects.length > 0;
};
function announceFold(view, range, fold = true) {
  let lineFrom = view.state.doc.lineAt(range.from).number, lineTo = view.state.doc.lineAt(range.to).number;
  return EditorView.announce.of(`${view.state.phrase(fold ? "Folded lines" : "Unfolded lines")} ${lineFrom} ${view.state.phrase("to")} ${lineTo}.`);
}
var foldAll = (view) => {
  let { state } = view, effects = [];
  for (let pos = 0;pos < state.doc.length; ) {
    let line = view.lineBlockAt(pos), range = foldable(state, line.from, line.to);
    if (range)
      effects.push(foldEffect.of(range));
    pos = (range ? view.lineBlockAt(range.to) : line).to + 1;
  }
  if (effects.length)
    view.dispatch({ effects: maybeEnable(view.state, effects) });
  return !!effects.length;
};
var unfoldAll = (view) => {
  let field = view.state.field(foldState, false);
  if (!field || !field.size)
    return false;
  let effects = [];
  field.between(0, view.state.doc.length, (from, to) => {
    effects.push(unfoldEffect.of({ from, to }));
  });
  view.dispatch({ effects });
  return true;
};
var foldKeymap = [
  { key: "Ctrl-Shift-[", mac: "Cmd-Alt-[", run: foldCode },
  { key: "Ctrl-Shift-]", mac: "Cmd-Alt-]", run: unfoldCode },
  { key: "Ctrl-Alt-[", run: foldAll },
  { key: "Ctrl-Alt-]", run: unfoldAll }
];
var defaultConfig = {
  placeholderDOM: null,
  preparePlaceholder: null,
  placeholderText: ""
};
var foldConfig = /* @__PURE__ */ Facet.define({
  combine(values) {
    return combineConfig(values, defaultConfig);
  }
});
function codeFolding(config) {
  let result = [foldState, baseTheme$12];
  if (config)
    result.push(foldConfig.of(config));
  return result;
}
function widgetToDOM(view, prepared) {
  let { state } = view, conf = state.facet(foldConfig);
  let onclick = (event) => {
    let line = view.lineBlockAt(view.posAtDOM(event.target));
    let folded = findFold(view.state, line.from, line.to);
    if (folded)
      view.dispatch({ effects: unfoldEffect.of(folded) });
    event.preventDefault();
  };
  if (conf.placeholderDOM)
    return conf.placeholderDOM(view, onclick, prepared);
  let element = document.createElement("span");
  element.textContent = conf.placeholderText;
  element.setAttribute("aria-label", state.phrase("folded code"));
  element.title = state.phrase("unfold");
  element.className = "cm-foldPlaceholder";
  element.onclick = onclick;
  return element;
}
var foldWidget = /* @__PURE__ */ Decoration.replace({ widget: /* @__PURE__ */ new class extends WidgetType {
  toDOM(view) {
    return widgetToDOM(view, null);
  }
} });

class PreparedFoldWidget extends WidgetType {
  constructor(value) {
    super();
    this.value = value;
  }
  eq(other) {
    return this.value == other.value;
  }
  toDOM(view) {
    return widgetToDOM(view, this.value);
  }
}
var foldGutterDefaults = {
  openText: "",
  closedText: "",
  markerDOM: null,
  domEventHandlers: {},
  foldingChanged: () => false
};

class FoldMarker extends GutterMarker {
  constructor(config, open) {
    super();
    this.config = config;
    this.open = open;
  }
  eq(other) {
    return this.config == other.config && this.open == other.open;
  }
  toDOM(view) {
    if (this.config.markerDOM)
      return this.config.markerDOM(this.open);
    let span = document.createElement("span");
    span.textContent = this.open ? this.config.openText : this.config.closedText;
    span.title = view.state.phrase(this.open ? "Fold line" : "Unfold line");
    return span;
  }
}
function foldGutter(config = {}) {
  let fullConfig = { ...foldGutterDefaults, ...config };
  let canFold = new FoldMarker(fullConfig, true), canUnfold = new FoldMarker(fullConfig, false);
  let markers = ViewPlugin.fromClass(class {
    constructor(view) {
      this.from = view.viewport.from;
      this.markers = this.buildMarkers(view);
    }
    update(update) {
      if (update.docChanged || update.viewportChanged || update.startState.facet(language) != update.state.facet(language) || update.startState.field(foldState, false) != update.state.field(foldState, false) || syntaxTree(update.startState) != syntaxTree(update.state) || fullConfig.foldingChanged(update))
        this.markers = this.buildMarkers(update.view);
    }
    buildMarkers(view) {
      let builder = new RangeSetBuilder;
      for (let line of view.viewportLineBlocks) {
        let mark = findFold(view.state, line.from, line.to) ? canUnfold : foldable(view.state, line.from, line.to) ? canFold : null;
        if (mark)
          builder.add(line.from, line.from, mark);
      }
      return builder.finish();
    }
  });
  let { domEventHandlers } = fullConfig;
  return [
    markers,
    gutter({
      class: "cm-foldGutter",
      markers(view) {
        var _a2;
        return ((_a2 = view.plugin(markers)) === null || _a2 === undefined ? undefined : _a2.markers) || RangeSet.empty;
      },
      initialSpacer() {
        return new FoldMarker(fullConfig, false);
      },
      domEventHandlers: {
        ...domEventHandlers,
        click: (view, line, event) => {
          if (domEventHandlers.click && domEventHandlers.click(view, line, event))
            return true;
          let folded = findFold(view.state, line.from, line.to);
          if (folded) {
            view.dispatch({ effects: unfoldEffect.of(folded) });
            return true;
          }
          let range = foldable(view.state, line.from, line.to);
          if (range) {
            view.dispatch({ effects: foldEffect.of(range) });
            return true;
          }
          return false;
        }
      }
    }),
    codeFolding()
  ];
}
var baseTheme$12 = /* @__PURE__ */ EditorView.baseTheme({
  ".cm-foldPlaceholder": {
    backgroundColor: "#eee",
    border: "1px solid #ddd",
    color: "#888",
    borderRadius: ".2em",
    margin: "0 1px",
    padding: "0 1px",
    cursor: "pointer"
  },
  ".cm-foldGutter span": {
    padding: "0 1px",
    cursor: "pointer"
  }
});

class HighlightStyle {
  constructor(specs, options) {
    this.specs = specs;
    let modSpec;
    function def(spec) {
      let cls = StyleModule.newName();
      (modSpec || (modSpec = Object.create(null)))["." + cls] = spec;
      return cls;
    }
    const all = typeof options.all == "string" ? options.all : options.all ? def(options.all) : undefined;
    const scopeOpt = options.scope;
    this.scope = scopeOpt instanceof Language ? (type) => type.prop(languageDataProp) == scopeOpt.data : scopeOpt ? (type) => type == scopeOpt : undefined;
    this.style = tagHighlighter(specs.map((style) => ({
      tag: style.tag,
      class: style.class || def(Object.assign({}, style, { tag: null }))
    })), {
      all
    }).style;
    this.module = modSpec ? new StyleModule(modSpec) : null;
    this.themeType = options.themeType;
  }
  static define(specs, options) {
    return new HighlightStyle(specs, options || {});
  }
}
var highlighterFacet = /* @__PURE__ */ Facet.define();
var fallbackHighlighter = /* @__PURE__ */ Facet.define({
  combine(values) {
    return values.length ? [values[0]] : null;
  }
});
function getHighlighters(state) {
  let main = state.facet(highlighterFacet);
  return main.length ? main : state.facet(fallbackHighlighter);
}
function syntaxHighlighting(highlighter, options) {
  let ext = [treeHighlighter], themeType;
  if (highlighter instanceof HighlightStyle) {
    if (highlighter.module)
      ext.push(EditorView.styleModule.of(highlighter.module));
    themeType = highlighter.themeType;
  }
  if (options === null || options === undefined ? undefined : options.fallback)
    ext.push(fallbackHighlighter.of(highlighter));
  else if (themeType)
    ext.push(highlighterFacet.computeN([EditorView.darkTheme], (state) => {
      return state.facet(EditorView.darkTheme) == (themeType == "dark") ? [highlighter] : [];
    }));
  else
    ext.push(highlighterFacet.of(highlighter));
  return ext;
}
class TreeHighlighter {
  constructor(view) {
    this.markCache = Object.create(null);
    this.tree = syntaxTree(view.state);
    this.decorations = this.buildDeco(view, getHighlighters(view.state));
    this.decoratedTo = view.viewport.to;
  }
  update(update) {
    let tree = syntaxTree(update.state), highlighters = getHighlighters(update.state);
    let styleChange = highlighters != getHighlighters(update.startState);
    let { viewport } = update.view, decoratedToMapped = update.changes.mapPos(this.decoratedTo, 1);
    if (tree.length < viewport.to && !styleChange && tree.type == this.tree.type && decoratedToMapped >= viewport.to) {
      this.decorations = this.decorations.map(update.changes);
      this.decoratedTo = decoratedToMapped;
    } else if (tree != this.tree || update.viewportChanged || styleChange) {
      this.tree = tree;
      this.decorations = this.buildDeco(update.view, highlighters);
      this.decoratedTo = viewport.to;
    }
  }
  buildDeco(view, highlighters) {
    if (!highlighters || !this.tree.length)
      return Decoration.none;
    let builder = new RangeSetBuilder;
    for (let { from, to } of view.visibleRanges) {
      highlightTree(this.tree, highlighters, (from2, to2, style) => {
        builder.add(from2, to2, this.markCache[style] || (this.markCache[style] = Decoration.mark({ class: style })));
      }, from, to);
    }
    return builder.finish();
  }
}
var treeHighlighter = /* @__PURE__ */ Prec.high(/* @__PURE__ */ ViewPlugin.fromClass(TreeHighlighter, {
  decorations: (v) => v.decorations
}));
var defaultHighlightStyle = /* @__PURE__ */ HighlightStyle.define([
  {
    tag: tags.meta,
    color: "#404740"
  },
  {
    tag: tags.link,
    textDecoration: "underline"
  },
  {
    tag: tags.heading,
    textDecoration: "underline",
    fontWeight: "bold"
  },
  {
    tag: tags.emphasis,
    fontStyle: "italic"
  },
  {
    tag: tags.strong,
    fontWeight: "bold"
  },
  {
    tag: tags.strikethrough,
    textDecoration: "line-through"
  },
  {
    tag: tags.keyword,
    color: "#708"
  },
  {
    tag: [tags.atom, tags.bool, tags.url, tags.contentSeparator, tags.labelName],
    color: "#219"
  },
  {
    tag: [tags.literal, tags.inserted],
    color: "#164"
  },
  {
    tag: [tags.string, tags.deleted],
    color: "#a11"
  },
  {
    tag: [tags.regexp, tags.escape, /* @__PURE__ */ tags.special(tags.string)],
    color: "#e40"
  },
  {
    tag: /* @__PURE__ */ tags.definition(tags.variableName),
    color: "#00f"
  },
  {
    tag: /* @__PURE__ */ tags.local(tags.variableName),
    color: "#30a"
  },
  {
    tag: [tags.typeName, tags.namespace],
    color: "#085"
  },
  {
    tag: tags.className,
    color: "#167"
  },
  {
    tag: [/* @__PURE__ */ tags.special(tags.variableName), tags.macroName],
    color: "#256"
  },
  {
    tag: /* @__PURE__ */ tags.definition(tags.propertyName),
    color: "#00c"
  },
  {
    tag: tags.comment,
    color: "#940"
  },
  {
    tag: tags.invalid,
    color: "#f00"
  }
]);
var baseTheme2 = /* @__PURE__ */ EditorView.baseTheme({
  "&.cm-focused .cm-matchingBracket": { backgroundColor: "#328c8252" },
  "&.cm-focused .cm-nonmatchingBracket": { backgroundColor: "#bb555544" }
});
var DefaultScanDist = 1e4;
var DefaultBrackets = "()[]{}";
var bracketMatchingConfig = /* @__PURE__ */ Facet.define({
  combine(configs) {
    return combineConfig(configs, {
      afterCursor: true,
      brackets: DefaultBrackets,
      maxScanDistance: DefaultScanDist,
      renderMatch: defaultRenderMatch
    });
  }
});
var matchingMark = /* @__PURE__ */ Decoration.mark({ class: "cm-matchingBracket" });
var nonmatchingMark = /* @__PURE__ */ Decoration.mark({ class: "cm-nonmatchingBracket" });
function defaultRenderMatch(match) {
  let decorations2 = [];
  let mark = match.matched ? matchingMark : nonmatchingMark;
  decorations2.push(mark.range(match.start.from, match.start.to));
  if (match.end)
    decorations2.push(mark.range(match.end.from, match.end.to));
  return decorations2;
}
var bracketMatchingState = /* @__PURE__ */ StateField.define({
  create() {
    return Decoration.none;
  },
  update(deco, tr) {
    if (!tr.docChanged && !tr.selection)
      return deco;
    let decorations2 = [];
    let config = tr.state.facet(bracketMatchingConfig);
    for (let range of tr.state.selection.ranges) {
      if (!range.empty)
        continue;
      let match = matchBrackets(tr.state, range.head, -1, config) || range.head > 0 && matchBrackets(tr.state, range.head - 1, 1, config) || config.afterCursor && (matchBrackets(tr.state, range.head, 1, config) || range.head < tr.state.doc.length && matchBrackets(tr.state, range.head + 1, -1, config));
      if (match)
        decorations2 = decorations2.concat(config.renderMatch(match, tr.state));
    }
    return Decoration.set(decorations2, true);
  },
  provide: (f) => EditorView.decorations.from(f)
});
var bracketMatchingUnique = [
  bracketMatchingState,
  baseTheme2
];
function bracketMatching(config = {}) {
  return [bracketMatchingConfig.of(config), bracketMatchingUnique];
}
var bracketMatchingHandle = /* @__PURE__ */ new NodeProp;
function matchingNodes(node, dir, brackets) {
  let byProp = node.prop(dir < 0 ? NodeProp.openedBy : NodeProp.closedBy);
  if (byProp)
    return byProp;
  if (node.name.length == 1) {
    let index = brackets.indexOf(node.name);
    if (index > -1 && index % 2 == (dir < 0 ? 1 : 0))
      return [brackets[index + dir]];
  }
  return null;
}
function findHandle(node) {
  let hasHandle = node.type.prop(bracketMatchingHandle);
  return hasHandle ? hasHandle(node.node) : node;
}
function matchBrackets(state, pos, dir, config = {}) {
  let maxScanDistance = config.maxScanDistance || DefaultScanDist, brackets = config.brackets || DefaultBrackets;
  let tree = syntaxTree(state), node = tree.resolveInner(pos, dir);
  for (let cur = node;cur; cur = cur.parent) {
    let matches = matchingNodes(cur.type, dir, brackets);
    if (matches && cur.from < cur.to) {
      let handle = findHandle(cur);
      if (handle && (dir > 0 ? pos >= handle.from && pos < handle.to : pos > handle.from && pos <= handle.to))
        return matchMarkedBrackets(state, pos, dir, cur, handle, matches, brackets);
    }
  }
  return matchPlainBrackets(state, pos, dir, tree, node.type, maxScanDistance, brackets);
}
function matchMarkedBrackets(_state, _pos, dir, token, handle, matching, brackets) {
  let parent = token.parent, firstToken = { from: handle.from, to: handle.to };
  let depth = 0, cursor = parent === null || parent === undefined ? undefined : parent.cursor();
  if (cursor && (dir < 0 ? cursor.childBefore(token.from) : cursor.childAfter(token.to)))
    do {
      if (dir < 0 ? cursor.to <= token.from : cursor.from >= token.to) {
        if (depth == 0 && matching.indexOf(cursor.type.name) > -1 && cursor.from < cursor.to) {
          let endHandle = findHandle(cursor);
          return { start: firstToken, end: endHandle ? { from: endHandle.from, to: endHandle.to } : undefined, matched: true };
        } else if (matchingNodes(cursor.type, dir, brackets)) {
          depth++;
        } else if (matchingNodes(cursor.type, -dir, brackets)) {
          if (depth == 0) {
            let endHandle = findHandle(cursor);
            return {
              start: firstToken,
              end: endHandle && endHandle.from < endHandle.to ? { from: endHandle.from, to: endHandle.to } : undefined,
              matched: false
            };
          }
          depth--;
        }
      }
    } while (dir < 0 ? cursor.prevSibling() : cursor.nextSibling());
  return { start: firstToken, matched: false };
}
function matchPlainBrackets(state, pos, dir, tree, tokenType, maxScanDistance, brackets) {
  let startCh = dir < 0 ? state.sliceDoc(pos - 1, pos) : state.sliceDoc(pos, pos + 1);
  let bracket2 = brackets.indexOf(startCh);
  if (bracket2 < 0 || bracket2 % 2 == 0 != dir > 0)
    return null;
  let startToken = { from: dir < 0 ? pos - 1 : pos, to: dir > 0 ? pos + 1 : pos };
  let iter = state.doc.iterRange(pos, dir > 0 ? state.doc.length : 0), depth = 0;
  for (let distance = 0;!iter.next().done && distance <= maxScanDistance; ) {
    let text = iter.value;
    if (dir < 0)
      distance += text.length;
    let basePos = pos + distance * dir;
    for (let pos2 = dir > 0 ? 0 : text.length - 1, end = dir > 0 ? text.length : -1;pos2 != end; pos2 += dir) {
      let found = brackets.indexOf(text[pos2]);
      if (found < 0 || tree.resolveInner(basePos + pos2, 1).type != tokenType)
        continue;
      if (found % 2 == 0 == dir > 0) {
        depth++;
      } else if (depth == 1) {
        return { start: startToken, end: { from: basePos + pos2, to: basePos + pos2 + 1 }, matched: found >> 1 == bracket2 >> 1 };
      } else {
        depth--;
      }
    }
    if (dir > 0)
      distance += text.length;
  }
  return iter.done ? { start: startToken, matched: false } : null;
}
var noTokens = /* @__PURE__ */ Object.create(null);
var typeArray = [NodeType.none];
var warned = [];
var byTag = /* @__PURE__ */ Object.create(null);
var defaultTable = /* @__PURE__ */ Object.create(null);
for (let [legacyName, name2] of [
  ["variable", "variableName"],
  ["variable-2", "variableName.special"],
  ["string-2", "string.special"],
  ["def", "variableName.definition"],
  ["tag", "tagName"],
  ["attribute", "attributeName"],
  ["type", "typeName"],
  ["builtin", "variableName.standard"],
  ["qualifier", "modifier"],
  ["error", "invalid"],
  ["header", "heading"],
  ["property", "propertyName"]
])
  defaultTable[legacyName] = /* @__PURE__ */ createTokenType(noTokens, name2);
function warnForPart(part, msg) {
  if (warned.indexOf(part) > -1)
    return;
  warned.push(part);
  console.warn(msg);
}
function createTokenType(extra, tagStr) {
  let tags$1 = [];
  for (let name3 of tagStr.split(" ")) {
    let found = [];
    for (let part of name3.split(".")) {
      let value = extra[part] || tags[part];
      if (!value) {
        warnForPart(part, `Unknown highlighting tag ${part}`);
      } else if (typeof value == "function") {
        if (!found.length)
          warnForPart(part, `Modifier ${part} used at start of tag`);
        else
          found = found.map(value);
      } else {
        if (found.length)
          warnForPart(part, `Tag ${part} used as modifier`);
        else
          found = Array.isArray(value) ? value : [value];
      }
    }
    for (let tag of found)
      tags$1.push(tag);
  }
  if (!tags$1.length)
    return 0;
  let name2 = tagStr.replace(/ /g, "_"), key = name2 + " " + tags$1.map((t2) => t2.id);
  let known = byTag[key];
  if (known)
    return known.id;
  let type = byTag[key] = NodeType.define({
    id: typeArray.length,
    name: name2,
    props: [styleTags({ [name2]: tags$1 })]
  });
  typeArray.push(type);
  return type.id;
}
var marks = {
  rtl: /* @__PURE__ */ Decoration.mark({ class: "cm-iso", inclusive: true, attributes: { dir: "rtl" }, bidiIsolate: Direction.RTL }),
  ltr: /* @__PURE__ */ Decoration.mark({ class: "cm-iso", inclusive: true, attributes: { dir: "ltr" }, bidiIsolate: Direction.LTR }),
  auto: /* @__PURE__ */ Decoration.mark({ class: "cm-iso", inclusive: true, attributes: { dir: "auto" }, bidiIsolate: null })
};

// node_modules/@codemirror/commands/dist/index.js
var toggleComment = (target) => {
  let { state } = target, line = state.doc.lineAt(state.selection.main.from), config = getConfig(target.state, line.from);
  return config.line ? toggleLineComment(target) : config.block ? toggleBlockCommentByLine(target) : false;
};
function command(f, option) {
  return ({ state, dispatch }) => {
    if (state.readOnly)
      return false;
    let tr = f(option, state);
    if (!tr)
      return false;
    dispatch(state.update(tr));
    return true;
  };
}
var toggleLineComment = /* @__PURE__ */ command(changeLineComment, 0);
var toggleBlockComment = /* @__PURE__ */ command(changeBlockComment, 0);
var toggleBlockCommentByLine = /* @__PURE__ */ command((o, s) => changeBlockComment(o, s, selectedLineRanges(s)), 0);
function getConfig(state, pos) {
  let data = state.languageDataAt("commentTokens", pos, 1);
  return data.length ? data[0] : {};
}
var SearchMargin = 50;
function findBlockComment(state, { open, close }, from, to) {
  let textBefore = state.sliceDoc(from - SearchMargin, from);
  let textAfter = state.sliceDoc(to, to + SearchMargin);
  let spaceBefore = /\s*$/.exec(textBefore)[0].length, spaceAfter = /^\s*/.exec(textAfter)[0].length;
  let beforeOff = textBefore.length - spaceBefore;
  if (textBefore.slice(beforeOff - open.length, beforeOff) == open && textAfter.slice(spaceAfter, spaceAfter + close.length) == close) {
    return {
      open: { pos: from - spaceBefore, margin: spaceBefore && 1 },
      close: { pos: to + spaceAfter, margin: spaceAfter && 1 }
    };
  }
  let startText, endText;
  if (to - from <= 2 * SearchMargin) {
    startText = endText = state.sliceDoc(from, to);
  } else {
    startText = state.sliceDoc(from, from + SearchMargin);
    endText = state.sliceDoc(to - SearchMargin, to);
  }
  let startSpace = /^\s*/.exec(startText)[0].length, endSpace = /\s*$/.exec(endText)[0].length;
  let endOff = endText.length - endSpace - close.length;
  if (startText.slice(startSpace, startSpace + open.length) == open && endText.slice(endOff, endOff + close.length) == close) {
    return {
      open: {
        pos: from + startSpace + open.length,
        margin: /\s/.test(startText.charAt(startSpace + open.length)) ? 1 : 0
      },
      close: {
        pos: to - endSpace - close.length,
        margin: /\s/.test(endText.charAt(endOff - 1)) ? 1 : 0
      }
    };
  }
  return null;
}
function selectedLineRanges(state) {
  let ranges = [];
  for (let r of state.selection.ranges) {
    let fromLine = state.doc.lineAt(r.from);
    let toLine = r.to <= fromLine.to ? fromLine : state.doc.lineAt(r.to);
    if (toLine.from > fromLine.from && toLine.from == r.to)
      toLine = r.to == fromLine.to + 1 ? fromLine : state.doc.lineAt(r.to - 1);
    let last = ranges.length - 1;
    if (last >= 0 && ranges[last].to > fromLine.from)
      ranges[last].to = toLine.to;
    else
      ranges.push({ from: fromLine.from + /^\s*/.exec(fromLine.text)[0].length, to: toLine.to });
  }
  return ranges;
}
function changeBlockComment(option, state, ranges = state.selection.ranges) {
  let tokens = ranges.map((r) => getConfig(state, r.from).block);
  if (!tokens.every((c) => c))
    return null;
  let comments = ranges.map((r, i2) => findBlockComment(state, tokens[i2], r.from, r.to));
  if (option != 2 && !comments.every((c) => c)) {
    return { changes: state.changes(ranges.map((range, i2) => {
      if (comments[i2])
        return [];
      return [{ from: range.from, insert: tokens[i2].open + " " }, { from: range.to, insert: " " + tokens[i2].close }];
    })) };
  } else if (option != 1 && comments.some((c) => c)) {
    let changes = [];
    for (let i2 = 0, comment2;i2 < comments.length; i2++)
      if (comment2 = comments[i2]) {
        let token = tokens[i2], { open, close } = comment2;
        changes.push({ from: open.pos - token.open.length, to: open.pos + open.margin }, { from: close.pos - close.margin, to: close.pos + token.close.length });
      }
    return { changes };
  }
  return null;
}
function changeLineComment(option, state, ranges = state.selection.ranges) {
  let lines = [];
  let prevLine = -1;
  for (let { from, to } of ranges) {
    let startI = lines.length, minIndent = 1e9;
    let token = getConfig(state, from).line;
    if (!token)
      continue;
    for (let pos = from;pos <= to; ) {
      let line = state.doc.lineAt(pos);
      if (line.from > prevLine && (from == to || to > line.from)) {
        prevLine = line.from;
        let indent = /^\s*/.exec(line.text)[0].length;
        let empty = indent == line.length;
        let comment2 = line.text.slice(indent, indent + token.length) == token ? indent : -1;
        if (indent < line.text.length && indent < minIndent)
          minIndent = indent;
        lines.push({ line, comment: comment2, token, indent, empty, single: false });
      }
      pos = line.to + 1;
    }
    if (minIndent < 1e9) {
      for (let i2 = startI;i2 < lines.length; i2++)
        if (lines[i2].indent < lines[i2].line.text.length)
          lines[i2].indent = minIndent;
    }
    if (lines.length == startI + 1)
      lines[startI].single = true;
  }
  if (option != 2 && lines.some((l) => l.comment < 0 && (!l.empty || l.single))) {
    let changes = [];
    for (let { line, token, indent, empty, single } of lines)
      if (single || !empty)
        changes.push({ from: line.from + indent, insert: token + " " });
    let changeSet = state.changes(changes);
    return { changes: changeSet, selection: state.selection.map(changeSet, 1) };
  } else if (option != 1 && lines.some((l) => l.comment >= 0)) {
    let changes = [];
    for (let { line, comment: comment2, token } of lines)
      if (comment2 >= 0) {
        let from = line.from + comment2, to = from + token.length;
        if (line.text[to - line.from] == " ")
          to++;
        changes.push({ from, to });
      }
    return { changes };
  }
  return null;
}
var fromHistory = /* @__PURE__ */ Annotation.define();
var isolateHistory = /* @__PURE__ */ Annotation.define();
var invertedEffects = /* @__PURE__ */ Facet.define();
var historyConfig = /* @__PURE__ */ Facet.define({
  combine(configs) {
    return combineConfig(configs, {
      minDepth: 100,
      newGroupDelay: 500,
      joinToEvent: (_t, isAdjacent) => isAdjacent
    }, {
      minDepth: Math.max,
      newGroupDelay: Math.min,
      joinToEvent: (a, b) => (tr, adj) => a(tr, adj) || b(tr, adj)
    });
  }
});
var historyField_ = /* @__PURE__ */ StateField.define({
  create() {
    return HistoryState.empty;
  },
  update(state, tr) {
    let config = tr.state.facet(historyConfig);
    let fromHist = tr.annotation(fromHistory);
    if (fromHist) {
      let item = HistEvent.fromTransaction(tr, fromHist.selection), from = fromHist.side;
      let other = from == 0 ? state.undone : state.done;
      if (item)
        other = updateBranch(other, other.length, config.minDepth, item);
      else
        other = addSelection(other, tr.startState.selection);
      return new HistoryState(from == 0 ? fromHist.rest : other, from == 0 ? other : fromHist.rest);
    }
    let isolate = tr.annotation(isolateHistory);
    if (isolate == "full" || isolate == "before")
      state = state.isolate();
    if (tr.annotation(Transaction.addToHistory) === false)
      return !tr.changes.empty ? state.addMapping(tr.changes.desc) : state;
    let event = HistEvent.fromTransaction(tr);
    let time = tr.annotation(Transaction.time), userEvent = tr.annotation(Transaction.userEvent);
    if (event)
      state = state.addChanges(event, time, userEvent, config, tr);
    else if (tr.selection)
      state = state.addSelection(tr.startState.selection, time, userEvent, config.newGroupDelay);
    if (isolate == "full" || isolate == "after")
      state = state.isolate();
    return state;
  },
  toJSON(value) {
    return { done: value.done.map((e) => e.toJSON()), undone: value.undone.map((e) => e.toJSON()) };
  },
  fromJSON(json) {
    return new HistoryState(json.done.map(HistEvent.fromJSON), json.undone.map(HistEvent.fromJSON));
  }
});
function history(config = {}) {
  return [
    historyField_,
    historyConfig.of(config),
    EditorView.domEventHandlers({
      beforeinput(e, view) {
        let command2 = e.inputType == "historyUndo" ? undo : e.inputType == "historyRedo" ? redo : null;
        if (!command2)
          return false;
        e.preventDefault();
        return command2(view);
      }
    })
  ];
}
function cmd(side, selection) {
  return function({ state, dispatch }) {
    if (!selection && state.readOnly)
      return false;
    let historyState = state.field(historyField_, false);
    if (!historyState)
      return false;
    let tr = historyState.pop(side, state, selection);
    if (!tr)
      return false;
    dispatch(tr);
    return true;
  };
}
var undo = /* @__PURE__ */ cmd(0, false);
var redo = /* @__PURE__ */ cmd(1, false);
var undoSelection = /* @__PURE__ */ cmd(0, true);
var redoSelection = /* @__PURE__ */ cmd(1, true);
class HistEvent {
  constructor(changes, effects, mapped, startSelection, selectionsAfter) {
    this.changes = changes;
    this.effects = effects;
    this.mapped = mapped;
    this.startSelection = startSelection;
    this.selectionsAfter = selectionsAfter;
  }
  setSelAfter(after) {
    return new HistEvent(this.changes, this.effects, this.mapped, this.startSelection, after);
  }
  toJSON() {
    var _a2, _b, _c;
    return {
      changes: (_a2 = this.changes) === null || _a2 === undefined ? undefined : _a2.toJSON(),
      mapped: (_b = this.mapped) === null || _b === undefined ? undefined : _b.toJSON(),
      startSelection: (_c = this.startSelection) === null || _c === undefined ? undefined : _c.toJSON(),
      selectionsAfter: this.selectionsAfter.map((s) => s.toJSON())
    };
  }
  static fromJSON(json) {
    return new HistEvent(json.changes && ChangeSet.fromJSON(json.changes), [], json.mapped && ChangeDesc.fromJSON(json.mapped), json.startSelection && EditorSelection.fromJSON(json.startSelection), json.selectionsAfter.map(EditorSelection.fromJSON));
  }
  static fromTransaction(tr, selection) {
    let effects = none2;
    for (let invert of tr.startState.facet(invertedEffects)) {
      let result = invert(tr);
      if (result.length)
        effects = effects.concat(result);
    }
    if (!effects.length && tr.changes.empty)
      return null;
    return new HistEvent(tr.changes.invert(tr.startState.doc), effects, undefined, selection || tr.startState.selection, none2);
  }
  static selection(selections) {
    return new HistEvent(undefined, none2, undefined, undefined, selections);
  }
}
function updateBranch(branch, to, maxLen, newEvent) {
  let start = to + 1 > maxLen + 20 ? to - maxLen - 1 : 0;
  let newBranch = branch.slice(start, to);
  newBranch.push(newEvent);
  return newBranch;
}
function isAdjacent(a, b) {
  let ranges = [], isAdjacent2 = false;
  a.iterChangedRanges((f, t2) => ranges.push(f, t2));
  b.iterChangedRanges((_f, _t, f, t2) => {
    for (let i2 = 0;i2 < ranges.length; ) {
      let from = ranges[i2++], to = ranges[i2++];
      if (t2 >= from && f <= to)
        isAdjacent2 = true;
    }
  });
  return isAdjacent2;
}
function eqSelectionShape(a, b) {
  return a.ranges.length == b.ranges.length && a.ranges.filter((r, i2) => r.empty != b.ranges[i2].empty).length === 0;
}
function conc(a, b) {
  return !a.length ? b : !b.length ? a : a.concat(b);
}
var none2 = [];
var MaxSelectionsPerEvent = 200;
function addSelection(branch, selection) {
  if (!branch.length) {
    return [HistEvent.selection([selection])];
  } else {
    let lastEvent = branch[branch.length - 1];
    let sels = lastEvent.selectionsAfter.slice(Math.max(0, lastEvent.selectionsAfter.length - MaxSelectionsPerEvent));
    if (sels.length && sels[sels.length - 1].eq(selection))
      return branch;
    sels.push(selection);
    return updateBranch(branch, branch.length - 1, 1e9, lastEvent.setSelAfter(sels));
  }
}
function popSelection(branch) {
  let last = branch[branch.length - 1];
  let newBranch = branch.slice();
  newBranch[branch.length - 1] = last.setSelAfter(last.selectionsAfter.slice(0, last.selectionsAfter.length - 1));
  return newBranch;
}
function addMappingToBranch(branch, mapping) {
  if (!branch.length)
    return branch;
  let length = branch.length, selections = none2;
  while (length) {
    let event = mapEvent(branch[length - 1], mapping, selections);
    if (event.changes && !event.changes.empty || event.effects.length) {
      let result = branch.slice(0, length);
      result[length - 1] = event;
      return result;
    } else {
      mapping = event.mapped;
      length--;
      selections = event.selectionsAfter;
    }
  }
  return selections.length ? [HistEvent.selection(selections)] : none2;
}
function mapEvent(event, mapping, extraSelections) {
  let selections = conc(event.selectionsAfter.length ? event.selectionsAfter.map((s) => s.map(mapping)) : none2, extraSelections);
  if (!event.changes)
    return HistEvent.selection(selections);
  let mappedChanges = event.changes.map(mapping), before = mapping.mapDesc(event.changes, true);
  let fullMapping = event.mapped ? event.mapped.composeDesc(before) : before;
  return new HistEvent(mappedChanges, StateEffect.mapEffects(event.effects, mapping), fullMapping, event.startSelection.map(before), selections);
}
var joinableUserEvent = /^(input\.type|delete)($|\.)/;

class HistoryState {
  constructor(done, undone, prevTime = 0, prevUserEvent = undefined) {
    this.done = done;
    this.undone = undone;
    this.prevTime = prevTime;
    this.prevUserEvent = prevUserEvent;
  }
  isolate() {
    return this.prevTime ? new HistoryState(this.done, this.undone) : this;
  }
  addChanges(event, time, userEvent, config, tr) {
    let done = this.done, lastEvent = done[done.length - 1];
    if (lastEvent && lastEvent.changes && !lastEvent.changes.empty && event.changes && (!userEvent || joinableUserEvent.test(userEvent)) && (!lastEvent.selectionsAfter.length && time - this.prevTime < config.newGroupDelay && config.joinToEvent(tr, isAdjacent(lastEvent.changes, event.changes)) || userEvent == "input.type.compose")) {
      done = updateBranch(done, done.length - 1, config.minDepth, new HistEvent(event.changes.compose(lastEvent.changes), conc(StateEffect.mapEffects(event.effects, lastEvent.changes), lastEvent.effects), lastEvent.mapped, lastEvent.startSelection, none2));
    } else {
      done = updateBranch(done, done.length, config.minDepth, event);
    }
    return new HistoryState(done, none2, time, userEvent);
  }
  addSelection(selection, time, userEvent, newGroupDelay) {
    let last = this.done.length ? this.done[this.done.length - 1].selectionsAfter : none2;
    if (last.length > 0 && time - this.prevTime < newGroupDelay && userEvent == this.prevUserEvent && userEvent && /^select($|\.)/.test(userEvent) && eqSelectionShape(last[last.length - 1], selection))
      return this;
    return new HistoryState(addSelection(this.done, selection), this.undone, time, userEvent);
  }
  addMapping(mapping) {
    return new HistoryState(addMappingToBranch(this.done, mapping), addMappingToBranch(this.undone, mapping), this.prevTime, this.prevUserEvent);
  }
  pop(side, state, onlySelection) {
    let branch = side == 0 ? this.done : this.undone;
    if (branch.length == 0)
      return null;
    let event = branch[branch.length - 1], selection = event.selectionsAfter[0] || state.selection;
    if (onlySelection && event.selectionsAfter.length) {
      return state.update({
        selection: event.selectionsAfter[event.selectionsAfter.length - 1],
        annotations: fromHistory.of({ side, rest: popSelection(branch), selection }),
        userEvent: side == 0 ? "select.undo" : "select.redo",
        scrollIntoView: true
      });
    } else if (!event.changes) {
      return null;
    } else {
      let rest = branch.length == 1 ? none2 : branch.slice(0, branch.length - 1);
      if (event.mapped)
        rest = addMappingToBranch(rest, event.mapped);
      return state.update({
        changes: event.changes,
        selection: event.startSelection,
        effects: event.effects,
        annotations: fromHistory.of({ side, rest, selection }),
        filter: false,
        userEvent: side == 0 ? "undo" : "redo",
        scrollIntoView: true
      });
    }
  }
}
HistoryState.empty = /* @__PURE__ */ new HistoryState(none2, none2);
var historyKeymap = [
  { key: "Mod-z", run: undo, preventDefault: true },
  { key: "Mod-y", mac: "Mod-Shift-z", run: redo, preventDefault: true },
  { linux: "Ctrl-Shift-z", run: redo, preventDefault: true },
  { key: "Mod-u", run: undoSelection, preventDefault: true },
  { key: "Alt-u", mac: "Mod-Shift-u", run: redoSelection, preventDefault: true }
];
function updateSel(sel, by) {
  return EditorSelection.create(sel.ranges.map(by), sel.mainIndex);
}
function setSel(state, selection) {
  return state.update({ selection, scrollIntoView: true, userEvent: "select" });
}
function moveSel({ state, dispatch }, how) {
  let selection = updateSel(state.selection, how);
  if (selection.eq(state.selection, true))
    return false;
  dispatch(setSel(state, selection));
  return true;
}
function rangeEnd(range, forward) {
  return EditorSelection.cursor(forward ? range.to : range.from);
}
function cursorByChar(view, forward) {
  return moveSel(view, (range) => range.empty ? view.moveByChar(range, forward) : rangeEnd(range, forward));
}
function ltrAtCursor(view) {
  return view.textDirectionAt(view.state.selection.main.head) == Direction.LTR;
}
var cursorCharLeft = (view) => cursorByChar(view, !ltrAtCursor(view));
var cursorCharRight = (view) => cursorByChar(view, ltrAtCursor(view));
function cursorByGroup(view, forward) {
  return moveSel(view, (range) => range.empty ? view.moveByGroup(range, forward) : rangeEnd(range, forward));
}
var cursorGroupLeft = (view) => cursorByGroup(view, !ltrAtCursor(view));
var cursorGroupRight = (view) => cursorByGroup(view, ltrAtCursor(view));
var segmenter = typeof Intl != "undefined" && Intl.Segmenter ? /* @__PURE__ */ new Intl.Segmenter(undefined, { granularity: "word" }) : null;
function interestingNode(state, node, bracketProp) {
  if (node.type.prop(bracketProp))
    return true;
  let len = node.to - node.from;
  return len && (len > 2 || /[^\s,.;:]/.test(state.sliceDoc(node.from, node.to))) || node.firstChild;
}
function moveBySyntax(state, start, forward) {
  let pos = syntaxTree(state).resolveInner(start.head);
  let bracketProp = forward ? NodeProp.closedBy : NodeProp.openedBy;
  for (let at = start.head;; ) {
    let next = forward ? pos.childAfter(at) : pos.childBefore(at);
    if (!next)
      break;
    if (interestingNode(state, next, bracketProp))
      pos = next;
    else
      at = forward ? next.to : next.from;
  }
  let bracket2 = pos.type.prop(bracketProp), match, newPos;
  if (bracket2 && (match = forward ? matchBrackets(state, pos.from, 1) : matchBrackets(state, pos.to, -1)) && match.matched)
    newPos = forward ? match.end.to : match.end.from;
  else
    newPos = forward ? pos.to : pos.from;
  return EditorSelection.cursor(newPos, forward ? -1 : 1);
}
var cursorSyntaxLeft = (view) => moveSel(view, (range) => moveBySyntax(view.state, range, !ltrAtCursor(view)));
var cursorSyntaxRight = (view) => moveSel(view, (range) => moveBySyntax(view.state, range, ltrAtCursor(view)));
function cursorByLine(view, forward) {
  return moveSel(view, (range) => {
    if (!range.empty)
      return rangeEnd(range, forward);
    let moved = view.moveVertically(range, forward);
    return moved.head != range.head ? moved : view.moveToLineBoundary(range, forward);
  });
}
var cursorLineUp = (view) => cursorByLine(view, false);
var cursorLineDown = (view) => cursorByLine(view, true);
function pageInfo(view) {
  let selfScroll = view.scrollDOM.clientHeight < view.scrollDOM.scrollHeight - 2;
  let marginTop = 0, marginBottom = 0, height;
  if (selfScroll) {
    for (let source of view.state.facet(EditorView.scrollMargins)) {
      let margins = source(view);
      if (margins === null || margins === undefined ? undefined : margins.top)
        marginTop = Math.max(margins === null || margins === undefined ? undefined : margins.top, marginTop);
      if (margins === null || margins === undefined ? undefined : margins.bottom)
        marginBottom = Math.max(margins === null || margins === undefined ? undefined : margins.bottom, marginBottom);
    }
    height = view.scrollDOM.clientHeight - marginTop - marginBottom;
  } else {
    height = (view.dom.ownerDocument.defaultView || window).innerHeight;
  }
  return {
    marginTop,
    marginBottom,
    selfScroll,
    height: Math.max(view.defaultLineHeight, height - 5)
  };
}
function cursorByPage(view, forward) {
  let page = pageInfo(view);
  let { state } = view, selection = updateSel(state.selection, (range) => {
    return range.empty ? view.moveVertically(range, forward, page.height) : rangeEnd(range, forward);
  });
  if (selection.eq(state.selection))
    return false;
  let effect;
  if (page.selfScroll) {
    let startPos = view.coordsAtPos(state.selection.main.head);
    let scrollRect = view.scrollDOM.getBoundingClientRect();
    let scrollTop = scrollRect.top + page.marginTop, scrollBottom = scrollRect.bottom - page.marginBottom;
    if (startPos && startPos.top > scrollTop && startPos.bottom < scrollBottom)
      effect = EditorView.scrollIntoView(selection.main.head, { y: "start", yMargin: startPos.top - scrollTop });
  }
  view.dispatch(setSel(state, selection), { effects: effect });
  return true;
}
var cursorPageUp = (view) => cursorByPage(view, false);
var cursorPageDown = (view) => cursorByPage(view, true);
function moveByLineBoundary(view, start, forward) {
  let line = view.lineBlockAt(start.head), moved = view.moveToLineBoundary(start, forward);
  if (moved.head == start.head && moved.head != (forward ? line.to : line.from))
    moved = view.moveToLineBoundary(start, forward, false);
  if (!forward && moved.head == line.from && line.length) {
    let space = /^\s*/.exec(view.state.sliceDoc(line.from, Math.min(line.from + 100, line.to)))[0].length;
    if (space && start.head != line.from + space)
      moved = EditorSelection.cursor(line.from + space);
  }
  return moved;
}
var cursorLineBoundaryForward = (view) => moveSel(view, (range) => moveByLineBoundary(view, range, true));
var cursorLineBoundaryBackward = (view) => moveSel(view, (range) => moveByLineBoundary(view, range, false));
var cursorLineBoundaryLeft = (view) => moveSel(view, (range) => moveByLineBoundary(view, range, !ltrAtCursor(view)));
var cursorLineBoundaryRight = (view) => moveSel(view, (range) => moveByLineBoundary(view, range, ltrAtCursor(view)));
var cursorLineStart = (view) => moveSel(view, (range) => EditorSelection.cursor(view.lineBlockAt(range.head).from, 1));
var cursorLineEnd = (view) => moveSel(view, (range) => EditorSelection.cursor(view.lineBlockAt(range.head).to, -1));
function toMatchingBracket(state, dispatch, extend) {
  let found = false, selection = updateSel(state.selection, (range) => {
    let matching = matchBrackets(state, range.head, -1) || matchBrackets(state, range.head, 1) || range.head > 0 && matchBrackets(state, range.head - 1, 1) || range.head < state.doc.length && matchBrackets(state, range.head + 1, -1);
    if (!matching || !matching.end)
      return range;
    found = true;
    let head = matching.start.from == range.head ? matching.end.to : matching.end.from;
    return extend ? EditorSelection.range(range.anchor, head) : EditorSelection.cursor(head);
  });
  if (!found)
    return false;
  dispatch(setSel(state, selection));
  return true;
}
var cursorMatchingBracket = ({ state, dispatch }) => toMatchingBracket(state, dispatch, false);
function extendSel(target, how) {
  let selection = updateSel(target.state.selection, (range) => {
    let head = how(range);
    return EditorSelection.range(range.anchor, head.head, head.goalColumn, head.bidiLevel || undefined);
  });
  if (selection.eq(target.state.selection))
    return false;
  target.dispatch(setSel(target.state, selection));
  return true;
}
function selectByChar(view, forward) {
  return extendSel(view, (range) => view.moveByChar(range, forward));
}
var selectCharLeft = (view) => selectByChar(view, !ltrAtCursor(view));
var selectCharRight = (view) => selectByChar(view, ltrAtCursor(view));
function selectByGroup(view, forward) {
  return extendSel(view, (range) => view.moveByGroup(range, forward));
}
var selectGroupLeft = (view) => selectByGroup(view, !ltrAtCursor(view));
var selectGroupRight = (view) => selectByGroup(view, ltrAtCursor(view));
var selectSyntaxLeft = (view) => extendSel(view, (range) => moveBySyntax(view.state, range, !ltrAtCursor(view)));
var selectSyntaxRight = (view) => extendSel(view, (range) => moveBySyntax(view.state, range, ltrAtCursor(view)));
function selectByLine(view, forward) {
  return extendSel(view, (range) => view.moveVertically(range, forward));
}
var selectLineUp = (view) => selectByLine(view, false);
var selectLineDown = (view) => selectByLine(view, true);
function selectByPage(view, forward) {
  return extendSel(view, (range) => view.moveVertically(range, forward, pageInfo(view).height));
}
var selectPageUp = (view) => selectByPage(view, false);
var selectPageDown = (view) => selectByPage(view, true);
var selectLineBoundaryForward = (view) => extendSel(view, (range) => moveByLineBoundary(view, range, true));
var selectLineBoundaryBackward = (view) => extendSel(view, (range) => moveByLineBoundary(view, range, false));
var selectLineBoundaryLeft = (view) => extendSel(view, (range) => moveByLineBoundary(view, range, !ltrAtCursor(view)));
var selectLineBoundaryRight = (view) => extendSel(view, (range) => moveByLineBoundary(view, range, ltrAtCursor(view)));
var selectLineStart = (view) => extendSel(view, (range) => EditorSelection.cursor(view.lineBlockAt(range.head).from));
var selectLineEnd = (view) => extendSel(view, (range) => EditorSelection.cursor(view.lineBlockAt(range.head).to));
var cursorDocStart = ({ state, dispatch }) => {
  dispatch(setSel(state, { anchor: 0 }));
  return true;
};
var cursorDocEnd = ({ state, dispatch }) => {
  dispatch(setSel(state, { anchor: state.doc.length }));
  return true;
};
var selectDocStart = ({ state, dispatch }) => {
  dispatch(setSel(state, { anchor: state.selection.main.anchor, head: 0 }));
  return true;
};
var selectDocEnd = ({ state, dispatch }) => {
  dispatch(setSel(state, { anchor: state.selection.main.anchor, head: state.doc.length }));
  return true;
};
var selectAll = ({ state, dispatch }) => {
  dispatch(state.update({ selection: { anchor: 0, head: state.doc.length }, userEvent: "select" }));
  return true;
};
var selectLine = ({ state, dispatch }) => {
  let ranges = selectedLineBlocks(state).map(({ from, to }) => EditorSelection.range(from, Math.min(to + 1, state.doc.length)));
  dispatch(state.update({ selection: EditorSelection.create(ranges), userEvent: "select" }));
  return true;
};
var selectParentSyntax = ({ state, dispatch }) => {
  let selection = updateSel(state.selection, (range) => {
    let tree = syntaxTree(state), stack = tree.resolveStack(range.from, 1);
    if (range.empty) {
      let stackBefore = tree.resolveStack(range.from, -1);
      if (stackBefore.node.from >= stack.node.from && stackBefore.node.to <= stack.node.to)
        stack = stackBefore;
    }
    for (let cur = stack;cur; cur = cur.next) {
      let { node } = cur;
      if ((node.from < range.from && node.to >= range.to || node.to > range.to && node.from <= range.from) && cur.next)
        return EditorSelection.range(node.to, node.from);
    }
    return range;
  });
  if (selection.eq(state.selection))
    return false;
  dispatch(setSel(state, selection));
  return true;
};
function addCursorVertically(view, forward) {
  let { state } = view, sel = state.selection, ranges = state.selection.ranges.slice();
  for (let range of state.selection.ranges) {
    let line = state.doc.lineAt(range.head);
    if (forward ? line.to < view.state.doc.length : line.from > 0)
      for (let cur = range;; ) {
        let next = view.moveVertically(cur, forward);
        if (next.head < line.from || next.head > line.to) {
          if (!ranges.some((r) => r.head == next.head))
            ranges.push(next);
          break;
        } else if (next.head == cur.head) {
          break;
        } else {
          cur = next;
        }
      }
  }
  if (ranges.length == sel.ranges.length)
    return false;
  view.dispatch(setSel(state, EditorSelection.create(ranges, ranges.length - 1)));
  return true;
}
var addCursorAbove = (view) => addCursorVertically(view, false);
var addCursorBelow = (view) => addCursorVertically(view, true);
var simplifySelection = ({ state, dispatch }) => {
  let cur = state.selection, selection = null;
  if (cur.ranges.length > 1)
    selection = EditorSelection.create([cur.main]);
  else if (!cur.main.empty)
    selection = EditorSelection.create([EditorSelection.cursor(cur.main.head)]);
  if (!selection)
    return false;
  dispatch(setSel(state, selection));
  return true;
};
function deleteBy(target, by) {
  if (target.state.readOnly)
    return false;
  let event = "delete.selection", { state } = target;
  let changes = state.changeByRange((range) => {
    let { from, to } = range;
    if (from == to) {
      let towards = by(range);
      if (towards < from) {
        event = "delete.backward";
        towards = skipAtomic(target, towards, false);
      } else if (towards > from) {
        event = "delete.forward";
        towards = skipAtomic(target, towards, true);
      }
      from = Math.min(from, towards);
      to = Math.max(to, towards);
    } else {
      from = skipAtomic(target, from, false);
      to = skipAtomic(target, to, true);
    }
    return from == to ? { range } : { changes: { from, to }, range: EditorSelection.cursor(from, from < range.head ? -1 : 1) };
  });
  if (changes.changes.empty)
    return false;
  target.dispatch(state.update(changes, {
    scrollIntoView: true,
    userEvent: event,
    effects: event == "delete.selection" ? EditorView.announce.of(state.phrase("Selection deleted")) : undefined
  }));
  return true;
}
function skipAtomic(target, pos, forward) {
  if (target instanceof EditorView)
    for (let ranges of target.state.facet(EditorView.atomicRanges).map((f) => f(target)))
      ranges.between(pos, pos, (from, to) => {
        if (from < pos && to > pos)
          pos = forward ? to : from;
      });
  return pos;
}
var deleteByChar = (target, forward, byIndentUnit) => deleteBy(target, (range) => {
  let pos = range.from, { state } = target, line = state.doc.lineAt(pos), before, targetPos;
  if (byIndentUnit && !forward && pos > line.from && pos < line.from + 200 && !/[^ \t]/.test(before = line.text.slice(0, pos - line.from))) {
    if (before[before.length - 1] == "\t")
      return pos - 1;
    let col = countColumn(before, state.tabSize), drop = col % getIndentUnit(state) || getIndentUnit(state);
    for (let i2 = 0;i2 < drop && before[before.length - 1 - i2] == " "; i2++)
      pos--;
    targetPos = pos;
  } else {
    targetPos = findClusterBreak2(line.text, pos - line.from, forward, forward) + line.from;
    if (targetPos == pos && line.number != (forward ? state.doc.lines : 1))
      targetPos += forward ? 1 : -1;
    else if (!forward && /[\ufe00-\ufe0f]/.test(line.text.slice(targetPos - line.from, pos - line.from)))
      targetPos = findClusterBreak2(line.text, targetPos - line.from, false, false) + line.from;
  }
  return targetPos;
});
var deleteCharBackward = (view) => deleteByChar(view, false, true);
var deleteCharForward = (view) => deleteByChar(view, true, false);
var deleteByGroup = (target, forward) => deleteBy(target, (range) => {
  let pos = range.head, { state } = target, line = state.doc.lineAt(pos);
  let categorize = state.charCategorizer(pos);
  for (let cat = null;; ) {
    if (pos == (forward ? line.to : line.from)) {
      if (pos == range.head && line.number != (forward ? state.doc.lines : 1))
        pos += forward ? 1 : -1;
      break;
    }
    let next = findClusterBreak2(line.text, pos - line.from, forward) + line.from;
    let nextChar = line.text.slice(Math.min(pos, next) - line.from, Math.max(pos, next) - line.from);
    let nextCat = categorize(nextChar);
    if (cat != null && nextCat != cat)
      break;
    if (nextChar != " " || pos != range.head)
      cat = nextCat;
    pos = next;
  }
  return pos;
});
var deleteGroupBackward = (target) => deleteByGroup(target, false);
var deleteGroupForward = (target) => deleteByGroup(target, true);
var deleteToLineEnd = (view) => deleteBy(view, (range) => {
  let lineEnd = view.lineBlockAt(range.head).to;
  return range.head < lineEnd ? lineEnd : Math.min(view.state.doc.length, range.head + 1);
});
var deleteLineBoundaryBackward = (view) => deleteBy(view, (range) => {
  let lineStart = view.moveToLineBoundary(range, false).head;
  return range.head > lineStart ? lineStart : Math.max(0, range.head - 1);
});
var deleteLineBoundaryForward = (view) => deleteBy(view, (range) => {
  let lineStart = view.moveToLineBoundary(range, true).head;
  return range.head < lineStart ? lineStart : Math.min(view.state.doc.length, range.head + 1);
});
var splitLine = ({ state, dispatch }) => {
  if (state.readOnly)
    return false;
  let changes = state.changeByRange((range) => {
    return {
      changes: { from: range.from, to: range.to, insert: Text.of(["", ""]) },
      range: EditorSelection.cursor(range.from)
    };
  });
  dispatch(state.update(changes, { scrollIntoView: true, userEvent: "input" }));
  return true;
};
var transposeChars = ({ state, dispatch }) => {
  if (state.readOnly)
    return false;
  let changes = state.changeByRange((range) => {
    if (!range.empty || range.from == 0 || range.from == state.doc.length)
      return { range };
    let pos = range.from, line = state.doc.lineAt(pos);
    let from = pos == line.from ? pos - 1 : findClusterBreak2(line.text, pos - line.from, false) + line.from;
    let to = pos == line.to ? pos + 1 : findClusterBreak2(line.text, pos - line.from, true) + line.from;
    return {
      changes: { from, to, insert: state.doc.slice(pos, to).append(state.doc.slice(from, pos)) },
      range: EditorSelection.cursor(to)
    };
  });
  if (changes.changes.empty)
    return false;
  dispatch(state.update(changes, { scrollIntoView: true, userEvent: "move.character" }));
  return true;
};
function selectedLineBlocks(state) {
  let blocks = [], upto = -1;
  for (let range of state.selection.ranges) {
    let startLine = state.doc.lineAt(range.from), endLine = state.doc.lineAt(range.to);
    if (!range.empty && range.to == endLine.from)
      endLine = state.doc.lineAt(range.to - 1);
    if (upto >= startLine.number) {
      let prev = blocks[blocks.length - 1];
      prev.to = endLine.to;
      prev.ranges.push(range);
    } else {
      blocks.push({ from: startLine.from, to: endLine.to, ranges: [range] });
    }
    upto = endLine.number + 1;
  }
  return blocks;
}
function moveLine(state, dispatch, forward) {
  if (state.readOnly)
    return false;
  let changes = [], ranges = [];
  for (let block of selectedLineBlocks(state)) {
    if (forward ? block.to == state.doc.length : block.from == 0)
      continue;
    let nextLine = state.doc.lineAt(forward ? block.to + 1 : block.from - 1);
    let size = nextLine.length + 1;
    if (forward) {
      changes.push({ from: block.to, to: nextLine.to }, { from: block.from, insert: nextLine.text + state.lineBreak });
      for (let r of block.ranges)
        ranges.push(EditorSelection.range(Math.min(state.doc.length, r.anchor + size), Math.min(state.doc.length, r.head + size)));
    } else {
      changes.push({ from: nextLine.from, to: block.from }, { from: block.to, insert: state.lineBreak + nextLine.text });
      for (let r of block.ranges)
        ranges.push(EditorSelection.range(r.anchor - size, r.head - size));
    }
  }
  if (!changes.length)
    return false;
  dispatch(state.update({
    changes,
    scrollIntoView: true,
    selection: EditorSelection.create(ranges, state.selection.mainIndex),
    userEvent: "move.line"
  }));
  return true;
}
var moveLineUp = ({ state, dispatch }) => moveLine(state, dispatch, false);
var moveLineDown = ({ state, dispatch }) => moveLine(state, dispatch, true);
function copyLine(state, dispatch, forward) {
  if (state.readOnly)
    return false;
  let changes = [];
  for (let block of selectedLineBlocks(state)) {
    if (forward)
      changes.push({ from: block.from, insert: state.doc.slice(block.from, block.to) + state.lineBreak });
    else
      changes.push({ from: block.to, insert: state.lineBreak + state.doc.slice(block.from, block.to) });
  }
  let changeSet = state.changes(changes);
  dispatch(state.update({
    changes: changeSet,
    selection: state.selection.map(changeSet, forward ? 1 : -1),
    scrollIntoView: true,
    userEvent: "input.copyline"
  }));
  return true;
}
var copyLineUp = ({ state, dispatch }) => copyLine(state, dispatch, false);
var copyLineDown = ({ state, dispatch }) => copyLine(state, dispatch, true);
var deleteLine = (view) => {
  if (view.state.readOnly)
    return false;
  let { state } = view, changes = state.changes(selectedLineBlocks(state).map(({ from, to }) => {
    if (from > 0)
      from--;
    else if (to < state.doc.length)
      to++;
    return { from, to };
  }));
  let selection = updateSel(state.selection, (range) => {
    let dist2 = undefined;
    if (view.lineWrapping) {
      let block = view.lineBlockAt(range.head), pos = view.coordsAtPos(range.head, range.assoc || 1);
      if (pos)
        dist2 = block.bottom + view.documentTop - pos.bottom + view.defaultLineHeight / 2;
    }
    return view.moveVertically(range, true, dist2);
  }).map(changes);
  view.dispatch({ changes, selection, scrollIntoView: true, userEvent: "delete.line" });
  return true;
};
function isBetweenBrackets(state, pos) {
  if (/\(\)|\[\]|\{\}/.test(state.sliceDoc(pos - 1, pos + 1)))
    return { from: pos, to: pos };
  let context = syntaxTree(state).resolveInner(pos);
  let before = context.childBefore(pos), after = context.childAfter(pos), closedBy;
  if (before && after && before.to <= pos && after.from >= pos && (closedBy = before.type.prop(NodeProp.closedBy)) && closedBy.indexOf(after.name) > -1 && state.doc.lineAt(before.to).from == state.doc.lineAt(after.from).from && !/\S/.test(state.sliceDoc(before.to, after.from)))
    return { from: before.to, to: after.from };
  return null;
}
var insertNewlineAndIndent = /* @__PURE__ */ newlineAndIndent(false);
var insertBlankLine = /* @__PURE__ */ newlineAndIndent(true);
function newlineAndIndent(atEof) {
  return ({ state, dispatch }) => {
    if (state.readOnly)
      return false;
    let changes = state.changeByRange((range) => {
      let { from, to } = range, line = state.doc.lineAt(from);
      let explode = !atEof && from == to && isBetweenBrackets(state, from);
      if (atEof)
        from = to = (to <= line.to ? line : state.doc.lineAt(to)).to;
      let cx = new IndentContext(state, { simulateBreak: from, simulateDoubleBreak: !!explode });
      let indent = getIndentation(cx, from);
      if (indent == null)
        indent = countColumn(/^\s*/.exec(state.doc.lineAt(from).text)[0], state.tabSize);
      while (to < line.to && /\s/.test(line.text[to - line.from]))
        to++;
      if (explode)
        ({ from, to } = explode);
      else if (from > line.from && from < line.from + 100 && !/\S/.test(line.text.slice(0, from)))
        from = line.from;
      let insert2 = ["", indentString(state, indent)];
      if (explode)
        insert2.push(indentString(state, cx.lineIndent(line.from, -1)));
      return {
        changes: { from, to, insert: Text.of(insert2) },
        range: EditorSelection.cursor(from + 1 + insert2[1].length)
      };
    });
    dispatch(state.update(changes, { scrollIntoView: true, userEvent: "input" }));
    return true;
  };
}
function changeBySelectedLine(state, f) {
  let atLine = -1;
  return state.changeByRange((range) => {
    let changes = [];
    for (let pos = range.from;pos <= range.to; ) {
      let line = state.doc.lineAt(pos);
      if (line.number > atLine && (range.empty || range.to > line.from)) {
        f(line, changes, range);
        atLine = line.number;
      }
      pos = line.to + 1;
    }
    let changeSet = state.changes(changes);
    return {
      changes,
      range: EditorSelection.range(changeSet.mapPos(range.anchor, 1), changeSet.mapPos(range.head, 1))
    };
  });
}
var indentSelection = ({ state, dispatch }) => {
  if (state.readOnly)
    return false;
  let updated = Object.create(null);
  let context = new IndentContext(state, { overrideIndentation: (start) => {
    let found = updated[start];
    return found == null ? -1 : found;
  } });
  let changes = changeBySelectedLine(state, (line, changes2, range) => {
    let indent = getIndentation(context, line.from);
    if (indent == null)
      return;
    if (!/\S/.test(line.text))
      indent = 0;
    let cur = /^\s*/.exec(line.text)[0];
    let norm = indentString(state, indent);
    if (cur != norm || range.from < line.from + cur.length) {
      updated[line.from] = indent;
      changes2.push({ from: line.from, to: line.from + cur.length, insert: norm });
    }
  });
  if (!changes.changes.empty)
    dispatch(state.update(changes, { userEvent: "indent" }));
  return true;
};
var indentMore = ({ state, dispatch }) => {
  if (state.readOnly)
    return false;
  dispatch(state.update(changeBySelectedLine(state, (line, changes) => {
    changes.push({ from: line.from, insert: state.facet(indentUnit) });
  }), { userEvent: "input.indent" }));
  return true;
};
var indentLess = ({ state, dispatch }) => {
  if (state.readOnly)
    return false;
  dispatch(state.update(changeBySelectedLine(state, (line, changes) => {
    let space = /^\s*/.exec(line.text)[0];
    if (!space)
      return;
    let col = countColumn(space, state.tabSize), keep = 0;
    let insert2 = indentString(state, Math.max(0, col - getIndentUnit(state)));
    while (keep < space.length && keep < insert2.length && space.charCodeAt(keep) == insert2.charCodeAt(keep))
      keep++;
    changes.push({ from: line.from + keep, to: line.from + space.length, insert: insert2.slice(keep) });
  }), { userEvent: "delete.dedent" }));
  return true;
};
var toggleTabFocusMode = (view) => {
  view.setTabFocusMode();
  return true;
};
var insertTab = ({ state, dispatch }) => {
  if (state.selection.ranges.some((r) => !r.empty))
    return indentMore({ state, dispatch });
  dispatch(state.update(state.replaceSelection("\t"), { scrollIntoView: true, userEvent: "input" }));
  return true;
};
var emacsStyleKeymap = [
  { key: "Ctrl-b", run: cursorCharLeft, shift: selectCharLeft, preventDefault: true },
  { key: "Ctrl-f", run: cursorCharRight, shift: selectCharRight },
  { key: "Ctrl-p", run: cursorLineUp, shift: selectLineUp },
  { key: "Ctrl-n", run: cursorLineDown, shift: selectLineDown },
  { key: "Ctrl-a", run: cursorLineStart, shift: selectLineStart },
  { key: "Ctrl-e", run: cursorLineEnd, shift: selectLineEnd },
  { key: "Ctrl-d", run: deleteCharForward },
  { key: "Ctrl-h", run: deleteCharBackward },
  { key: "Ctrl-k", run: deleteToLineEnd },
  { key: "Ctrl-Alt-h", run: deleteGroupBackward },
  { key: "Ctrl-o", run: splitLine },
  { key: "Ctrl-t", run: transposeChars },
  { key: "Ctrl-v", run: cursorPageDown }
];
var standardKeymap = /* @__PURE__ */ [
  { key: "ArrowLeft", run: cursorCharLeft, shift: selectCharLeft, preventDefault: true },
  { key: "Mod-ArrowLeft", mac: "Alt-ArrowLeft", run: cursorGroupLeft, shift: selectGroupLeft, preventDefault: true },
  { mac: "Cmd-ArrowLeft", run: cursorLineBoundaryLeft, shift: selectLineBoundaryLeft, preventDefault: true },
  { key: "ArrowRight", run: cursorCharRight, shift: selectCharRight, preventDefault: true },
  { key: "Mod-ArrowRight", mac: "Alt-ArrowRight", run: cursorGroupRight, shift: selectGroupRight, preventDefault: true },
  { mac: "Cmd-ArrowRight", run: cursorLineBoundaryRight, shift: selectLineBoundaryRight, preventDefault: true },
  { key: "ArrowUp", run: cursorLineUp, shift: selectLineUp, preventDefault: true },
  { mac: "Cmd-ArrowUp", run: cursorDocStart, shift: selectDocStart },
  { mac: "Ctrl-ArrowUp", run: cursorPageUp, shift: selectPageUp },
  { key: "ArrowDown", run: cursorLineDown, shift: selectLineDown, preventDefault: true },
  { mac: "Cmd-ArrowDown", run: cursorDocEnd, shift: selectDocEnd },
  { mac: "Ctrl-ArrowDown", run: cursorPageDown, shift: selectPageDown },
  { key: "PageUp", run: cursorPageUp, shift: selectPageUp },
  { key: "PageDown", run: cursorPageDown, shift: selectPageDown },
  { key: "Home", run: cursorLineBoundaryBackward, shift: selectLineBoundaryBackward, preventDefault: true },
  { key: "Mod-Home", run: cursorDocStart, shift: selectDocStart },
  { key: "End", run: cursorLineBoundaryForward, shift: selectLineBoundaryForward, preventDefault: true },
  { key: "Mod-End", run: cursorDocEnd, shift: selectDocEnd },
  { key: "Enter", run: insertNewlineAndIndent, shift: insertNewlineAndIndent },
  { key: "Mod-a", run: selectAll },
  { key: "Backspace", run: deleteCharBackward, shift: deleteCharBackward, preventDefault: true },
  { key: "Delete", run: deleteCharForward, preventDefault: true },
  { key: "Mod-Backspace", mac: "Alt-Backspace", run: deleteGroupBackward, preventDefault: true },
  { key: "Mod-Delete", mac: "Alt-Delete", run: deleteGroupForward, preventDefault: true },
  { mac: "Mod-Backspace", run: deleteLineBoundaryBackward, preventDefault: true },
  { mac: "Mod-Delete", run: deleteLineBoundaryForward, preventDefault: true }
].concat(/* @__PURE__ */ emacsStyleKeymap.map((b) => ({ mac: b.key, run: b.run, shift: b.shift })));
var defaultKeymap = /* @__PURE__ */ [
  { key: "Alt-ArrowLeft", mac: "Ctrl-ArrowLeft", run: cursorSyntaxLeft, shift: selectSyntaxLeft },
  { key: "Alt-ArrowRight", mac: "Ctrl-ArrowRight", run: cursorSyntaxRight, shift: selectSyntaxRight },
  { key: "Alt-ArrowUp", run: moveLineUp },
  { key: "Shift-Alt-ArrowUp", run: copyLineUp },
  { key: "Alt-ArrowDown", run: moveLineDown },
  { key: "Shift-Alt-ArrowDown", run: copyLineDown },
  { key: "Mod-Alt-ArrowUp", run: addCursorAbove },
  { key: "Mod-Alt-ArrowDown", run: addCursorBelow },
  { key: "Escape", run: simplifySelection },
  { key: "Mod-Enter", run: insertBlankLine },
  { key: "Alt-l", mac: "Ctrl-l", run: selectLine },
  { key: "Mod-i", run: selectParentSyntax, preventDefault: true },
  { key: "Mod-[", run: indentLess },
  { key: "Mod-]", run: indentMore },
  { key: "Mod-Alt-\\", run: indentSelection },
  { key: "Shift-Mod-k", run: deleteLine },
  { key: "Shift-Mod-\\", run: cursorMatchingBracket },
  { key: "Mod-/", run: toggleComment },
  { key: "Alt-A", run: toggleBlockComment },
  { key: "Ctrl-m", mac: "Shift-Alt-m", run: toggleTabFocusMode }
].concat(standardKeymap);

// node_modules/@codemirror/search/dist/index.js
var basicNormalize = typeof String.prototype.normalize == "function" ? (x) => x.normalize("NFKD") : (x) => x;

class SearchCursor {
  constructor(text, query, from = 0, to = text.length, normalize, test) {
    this.test = test;
    this.value = { from: 0, to: 0 };
    this.done = false;
    this.matches = [];
    this.buffer = "";
    this.bufferPos = 0;
    this.iter = text.iterRange(from, to);
    this.bufferStart = from;
    this.normalize = normalize ? (x) => normalize(basicNormalize(x)) : basicNormalize;
    this.query = this.normalize(query);
  }
  peek() {
    if (this.bufferPos == this.buffer.length) {
      this.bufferStart += this.buffer.length;
      this.iter.next();
      if (this.iter.done)
        return -1;
      this.bufferPos = 0;
      this.buffer = this.iter.value;
    }
    return codePointAt2(this.buffer, this.bufferPos);
  }
  next() {
    while (this.matches.length)
      this.matches.pop();
    return this.nextOverlapping();
  }
  nextOverlapping() {
    for (;; ) {
      let next = this.peek();
      if (next < 0) {
        this.done = true;
        return this;
      }
      let str = fromCodePoint(next), start = this.bufferStart + this.bufferPos;
      this.bufferPos += codePointSize2(next);
      let norm = this.normalize(str);
      if (norm.length)
        for (let i2 = 0, pos = start;; i2++) {
          let code2 = norm.charCodeAt(i2);
          let match = this.match(code2, pos, this.bufferPos + this.bufferStart);
          if (i2 == norm.length - 1) {
            if (match) {
              this.value = match;
              return this;
            }
            break;
          }
          if (pos == start && i2 < str.length && str.charCodeAt(i2) == code2)
            pos++;
        }
    }
  }
  match(code2, pos, end) {
    let match = null;
    for (let i2 = 0;i2 < this.matches.length; i2 += 2) {
      let index = this.matches[i2], keep = false;
      if (this.query.charCodeAt(index) == code2) {
        if (index == this.query.length - 1) {
          match = { from: this.matches[i2 + 1], to: end };
        } else {
          this.matches[i2]++;
          keep = true;
        }
      }
      if (!keep) {
        this.matches.splice(i2, 2);
        i2 -= 2;
      }
    }
    if (this.query.charCodeAt(0) == code2) {
      if (this.query.length == 1)
        match = { from: pos, to: end };
      else
        this.matches.push(1, pos);
    }
    if (match && this.test && !this.test(match.from, match.to, this.buffer, this.bufferStart))
      match = null;
    return match;
  }
}
if (typeof Symbol != "undefined")
  SearchCursor.prototype[Symbol.iterator] = function() {
    return this;
  };
var empty = { from: -1, to: -1, match: /* @__PURE__ */ /.*/.exec("") };
var baseFlags = "gm" + (/x/.unicode == null ? "" : "u");

class RegExpCursor {
  constructor(text, query, options, from = 0, to = text.length) {
    this.text = text;
    this.to = to;
    this.curLine = "";
    this.done = false;
    this.value = empty;
    if (/\\[sWDnr]|\n|\r|\[\^/.test(query))
      return new MultilineRegExpCursor(text, query, options, from, to);
    this.re = new RegExp(query, baseFlags + ((options === null || options === undefined ? undefined : options.ignoreCase) ? "i" : ""));
    this.test = options === null || options === undefined ? undefined : options.test;
    this.iter = text.iter();
    let startLine = text.lineAt(from);
    this.curLineStart = startLine.from;
    this.matchPos = toCharEnd(text, from);
    this.getLine(this.curLineStart);
  }
  getLine(skip) {
    this.iter.next(skip);
    if (this.iter.lineBreak) {
      this.curLine = "";
    } else {
      this.curLine = this.iter.value;
      if (this.curLineStart + this.curLine.length > this.to)
        this.curLine = this.curLine.slice(0, this.to - this.curLineStart);
      this.iter.next();
    }
  }
  nextLine() {
    this.curLineStart = this.curLineStart + this.curLine.length + 1;
    if (this.curLineStart > this.to)
      this.curLine = "";
    else
      this.getLine(0);
  }
  next() {
    for (let off = this.matchPos - this.curLineStart;; ) {
      this.re.lastIndex = off;
      let match = this.matchPos <= this.to && this.re.exec(this.curLine);
      if (match) {
        let from = this.curLineStart + match.index, to = from + match[0].length;
        this.matchPos = toCharEnd(this.text, to + (from == to ? 1 : 0));
        if (from == this.curLineStart + this.curLine.length)
          this.nextLine();
        if ((from < to || from > this.value.to) && (!this.test || this.test(from, to, match))) {
          this.value = { from, to, match };
          return this;
        }
        off = this.matchPos - this.curLineStart;
      } else if (this.curLineStart + this.curLine.length < this.to) {
        this.nextLine();
        off = 0;
      } else {
        this.done = true;
        return this;
      }
    }
  }
}
var flattened = /* @__PURE__ */ new WeakMap;

class FlattenedDoc {
  constructor(from, text) {
    this.from = from;
    this.text = text;
  }
  get to() {
    return this.from + this.text.length;
  }
  static get(doc2, from, to) {
    let cached = flattened.get(doc2);
    if (!cached || cached.from >= to || cached.to <= from) {
      let flat = new FlattenedDoc(from, doc2.sliceString(from, to));
      flattened.set(doc2, flat);
      return flat;
    }
    if (cached.from == from && cached.to == to)
      return cached;
    let { text, from: cachedFrom } = cached;
    if (cachedFrom > from) {
      text = doc2.sliceString(from, cachedFrom) + text;
      cachedFrom = from;
    }
    if (cached.to < to)
      text += doc2.sliceString(cached.to, to);
    flattened.set(doc2, new FlattenedDoc(cachedFrom, text));
    return new FlattenedDoc(from, text.slice(from - cachedFrom, to - cachedFrom));
  }
}

class MultilineRegExpCursor {
  constructor(text, query, options, from, to) {
    this.text = text;
    this.to = to;
    this.done = false;
    this.value = empty;
    this.matchPos = toCharEnd(text, from);
    this.re = new RegExp(query, baseFlags + ((options === null || options === undefined ? undefined : options.ignoreCase) ? "i" : ""));
    this.test = options === null || options === undefined ? undefined : options.test;
    this.flat = FlattenedDoc.get(text, from, this.chunkEnd(from + 5000));
  }
  chunkEnd(pos) {
    return pos >= this.to ? this.to : this.text.lineAt(pos).to;
  }
  next() {
    for (;; ) {
      let off = this.re.lastIndex = this.matchPos - this.flat.from;
      let match = this.re.exec(this.flat.text);
      if (match && !match[0] && match.index == off) {
        this.re.lastIndex = off + 1;
        match = this.re.exec(this.flat.text);
      }
      if (match) {
        let from = this.flat.from + match.index, to = from + match[0].length;
        if ((this.flat.to >= this.to || match.index + match[0].length <= this.flat.text.length - 10) && (!this.test || this.test(from, to, match))) {
          this.value = { from, to, match };
          this.matchPos = toCharEnd(this.text, to + (from == to ? 1 : 0));
          return this;
        }
      }
      if (this.flat.to == this.to) {
        this.done = true;
        return this;
      }
      this.flat = FlattenedDoc.get(this.text, this.flat.from, this.chunkEnd(this.flat.from + this.flat.text.length * 2));
    }
  }
}
if (typeof Symbol != "undefined") {
  RegExpCursor.prototype[Symbol.iterator] = MultilineRegExpCursor.prototype[Symbol.iterator] = function() {
    return this;
  };
}
function validRegExp(source) {
  try {
    new RegExp(source, baseFlags);
    return true;
  } catch (_a2) {
    return false;
  }
}
function toCharEnd(text, pos) {
  if (pos >= text.length)
    return pos;
  let line = text.lineAt(pos), next;
  while (pos < line.to && (next = line.text.charCodeAt(pos - line.from)) >= 56320 && next < 57344)
    pos++;
  return pos;
}
function createLineDialog(view) {
  let line = String(view.state.doc.lineAt(view.state.selection.main.head).number);
  let input = crelt("input", { class: "cm-textfield", name: "line", value: line });
  let dom = crelt("form", {
    class: "cm-gotoLine",
    onkeydown: (event) => {
      if (event.keyCode == 27) {
        event.preventDefault();
        view.dispatch({ effects: dialogEffect.of(false) });
        view.focus();
      } else if (event.keyCode == 13) {
        event.preventDefault();
        go();
      }
    },
    onsubmit: (event) => {
      event.preventDefault();
      go();
    }
  }, crelt("label", view.state.phrase("Go to line"), ": ", input), " ", crelt("button", { class: "cm-button", type: "submit" }, view.state.phrase("go")), crelt("button", {
    name: "close",
    onclick: () => {
      view.dispatch({ effects: dialogEffect.of(false) });
      view.focus();
    },
    "aria-label": view.state.phrase("close"),
    type: "button"
  }, [""]));
  function go() {
    let match = /^([+-])?(\d+)?(:\d+)?(%)?$/.exec(input.value);
    if (!match)
      return;
    let { state } = view, startLine = state.doc.lineAt(state.selection.main.head);
    let [, sign, ln, cl, percent] = match;
    let col = cl ? +cl.slice(1) : 0;
    let line2 = ln ? +ln : startLine.number;
    if (ln && percent) {
      let pc = line2 / 100;
      if (sign)
        pc = pc * (sign == "-" ? -1 : 1) + startLine.number / state.doc.lines;
      line2 = Math.round(state.doc.lines * pc);
    } else if (ln && sign) {
      line2 = line2 * (sign == "-" ? -1 : 1) + startLine.number;
    }
    let docLine = state.doc.line(Math.max(1, Math.min(state.doc.lines, line2)));
    let selection = EditorSelection.cursor(docLine.from + Math.max(0, Math.min(col, docLine.length)));
    view.dispatch({
      effects: [dialogEffect.of(false), EditorView.scrollIntoView(selection.from, { y: "center" })],
      selection
    });
    view.focus();
  }
  return { dom };
}
var dialogEffect = /* @__PURE__ */ StateEffect.define();
var dialogField = /* @__PURE__ */ StateField.define({
  create() {
    return true;
  },
  update(value, tr) {
    for (let e of tr.effects)
      if (e.is(dialogEffect))
        value = e.value;
    return value;
  },
  provide: (f) => showPanel.from(f, (val) => val ? createLineDialog : null)
});
var gotoLine = (view) => {
  let panel = getPanel(view, createLineDialog);
  if (!panel) {
    let effects = [dialogEffect.of(true)];
    if (view.state.field(dialogField, false) == null)
      effects.push(StateEffect.appendConfig.of([dialogField, baseTheme$13]));
    view.dispatch({ effects });
    panel = getPanel(view, createLineDialog);
  }
  if (panel)
    panel.dom.querySelector("input").select();
  return true;
};
var baseTheme$13 = /* @__PURE__ */ EditorView.baseTheme({
  ".cm-panel.cm-gotoLine": {
    padding: "2px 6px 4px",
    position: "relative",
    "& label": { fontSize: "80%" },
    "& [name=close]": {
      position: "absolute",
      top: "0",
      bottom: "0",
      right: "4px",
      backgroundColor: "inherit",
      border: "none",
      font: "inherit",
      padding: "0"
    }
  }
});
var defaultHighlightOptions = {
  highlightWordAroundCursor: false,
  minSelectionLength: 1,
  maxMatches: 100,
  wholeWords: false
};
var highlightConfig = /* @__PURE__ */ Facet.define({
  combine(options) {
    return combineConfig(options, defaultHighlightOptions, {
      highlightWordAroundCursor: (a, b) => a || b,
      minSelectionLength: Math.min,
      maxMatches: Math.min
    });
  }
});
function highlightSelectionMatches(options) {
  let ext = [defaultTheme, matchHighlighter];
  if (options)
    ext.push(highlightConfig.of(options));
  return ext;
}
var matchDeco = /* @__PURE__ */ Decoration.mark({ class: "cm-selectionMatch" });
var mainMatchDeco = /* @__PURE__ */ Decoration.mark({ class: "cm-selectionMatch cm-selectionMatch-main" });
function insideWordBoundaries(check, state, from, to) {
  return (from == 0 || check(state.sliceDoc(from - 1, from)) != CharCategory.Word) && (to == state.doc.length || check(state.sliceDoc(to, to + 1)) != CharCategory.Word);
}
function insideWord(check, state, from, to) {
  return check(state.sliceDoc(from, from + 1)) == CharCategory.Word && check(state.sliceDoc(to - 1, to)) == CharCategory.Word;
}
var matchHighlighter = /* @__PURE__ */ ViewPlugin.fromClass(class {
  constructor(view) {
    this.decorations = this.getDeco(view);
  }
  update(update) {
    if (update.selectionSet || update.docChanged || update.viewportChanged)
      this.decorations = this.getDeco(update.view);
  }
  getDeco(view) {
    let conf = view.state.facet(highlightConfig);
    let { state } = view, sel = state.selection;
    if (sel.ranges.length > 1)
      return Decoration.none;
    let range = sel.main, query, check = null;
    if (range.empty) {
      if (!conf.highlightWordAroundCursor)
        return Decoration.none;
      let word = state.wordAt(range.head);
      if (!word)
        return Decoration.none;
      check = state.charCategorizer(range.head);
      query = state.sliceDoc(word.from, word.to);
    } else {
      let len = range.to - range.from;
      if (len < conf.minSelectionLength || len > 200)
        return Decoration.none;
      if (conf.wholeWords) {
        query = state.sliceDoc(range.from, range.to);
        check = state.charCategorizer(range.head);
        if (!(insideWordBoundaries(check, state, range.from, range.to) && insideWord(check, state, range.from, range.to)))
          return Decoration.none;
      } else {
        query = state.sliceDoc(range.from, range.to);
        if (!query)
          return Decoration.none;
      }
    }
    let deco = [];
    for (let part of view.visibleRanges) {
      let cursor = new SearchCursor(state.doc, query, part.from, part.to);
      while (!cursor.next().done) {
        let { from, to } = cursor.value;
        if (!check || insideWordBoundaries(check, state, from, to)) {
          if (range.empty && from <= range.from && to >= range.to)
            deco.push(mainMatchDeco.range(from, to));
          else if (from >= range.to || to <= range.from)
            deco.push(matchDeco.range(from, to));
          if (deco.length > conf.maxMatches)
            return Decoration.none;
        }
      }
    }
    return Decoration.set(deco);
  }
}, {
  decorations: (v) => v.decorations
});
var defaultTheme = /* @__PURE__ */ EditorView.baseTheme({
  ".cm-selectionMatch": { backgroundColor: "#99ff7780" },
  ".cm-searchMatch .cm-selectionMatch": { backgroundColor: "transparent" }
});
var selectWord = ({ state, dispatch }) => {
  let { selection } = state;
  let newSel = EditorSelection.create(selection.ranges.map((range) => state.wordAt(range.head) || EditorSelection.cursor(range.head)), selection.mainIndex);
  if (newSel.eq(selection))
    return false;
  dispatch(state.update({ selection: newSel }));
  return true;
};
function findNextOccurrence(state, query) {
  let { main, ranges } = state.selection;
  let word = state.wordAt(main.head), fullWord = word && word.from == main.from && word.to == main.to;
  for (let cycled = false, cursor = new SearchCursor(state.doc, query, ranges[ranges.length - 1].to);; ) {
    cursor.next();
    if (cursor.done) {
      if (cycled)
        return null;
      cursor = new SearchCursor(state.doc, query, 0, Math.max(0, ranges[ranges.length - 1].from - 1));
      cycled = true;
    } else {
      if (cycled && ranges.some((r) => r.from == cursor.value.from))
        continue;
      if (fullWord) {
        let word2 = state.wordAt(cursor.value.from);
        if (!word2 || word2.from != cursor.value.from || word2.to != cursor.value.to)
          continue;
      }
      return cursor.value;
    }
  }
}
var selectNextOccurrence = ({ state, dispatch }) => {
  let { ranges } = state.selection;
  if (ranges.some((sel) => sel.from === sel.to))
    return selectWord({ state, dispatch });
  let searchedText = state.sliceDoc(ranges[0].from, ranges[0].to);
  if (state.selection.ranges.some((r) => state.sliceDoc(r.from, r.to) != searchedText))
    return false;
  let range = findNextOccurrence(state, searchedText);
  if (!range)
    return false;
  dispatch(state.update({
    selection: state.selection.addRange(EditorSelection.range(range.from, range.to), false),
    effects: EditorView.scrollIntoView(range.to)
  }));
  return true;
};
var searchConfigFacet = /* @__PURE__ */ Facet.define({
  combine(configs) {
    return combineConfig(configs, {
      top: false,
      caseSensitive: false,
      literal: false,
      regexp: false,
      wholeWord: false,
      createPanel: (view) => new SearchPanel(view),
      scrollToMatch: (range) => EditorView.scrollIntoView(range)
    });
  }
});
function search(config) {
  return config ? [searchConfigFacet.of(config), searchExtensions] : searchExtensions;
}

class SearchQuery {
  constructor(config) {
    this.search = config.search;
    this.caseSensitive = !!config.caseSensitive;
    this.literal = !!config.literal;
    this.regexp = !!config.regexp;
    this.replace = config.replace || "";
    this.valid = !!this.search && (!this.regexp || validRegExp(this.search));
    this.unquoted = this.unquote(this.search);
    this.wholeWord = !!config.wholeWord;
  }
  unquote(text) {
    return this.literal ? text : text.replace(/\\([nrt\\])/g, (_, ch) => ch == "n" ? `
` : ch == "r" ? "\r" : ch == "t" ? "\t" : "\\");
  }
  eq(other) {
    return this.search == other.search && this.replace == other.replace && this.caseSensitive == other.caseSensitive && this.regexp == other.regexp && this.wholeWord == other.wholeWord;
  }
  create() {
    return this.regexp ? new RegExpQuery(this) : new StringQuery(this);
  }
  getCursor(state, from = 0, to) {
    let st = state.doc ? state : EditorState.create({ doc: state });
    if (to == null)
      to = st.doc.length;
    return this.regexp ? regexpCursor(this, st, from, to) : stringCursor(this, st, from, to);
  }
}

class QueryType2 {
  constructor(spec) {
    this.spec = spec;
  }
}
function stringCursor(spec, state, from, to) {
  return new SearchCursor(state.doc, spec.unquoted, from, to, spec.caseSensitive ? undefined : (x) => x.toLowerCase(), spec.wholeWord ? stringWordTest(state.doc, state.charCategorizer(state.selection.main.head)) : undefined);
}
function stringWordTest(doc2, categorizer) {
  return (from, to, buf, bufPos) => {
    if (bufPos > from || bufPos + buf.length < to) {
      bufPos = Math.max(0, from - 2);
      buf = doc2.sliceString(bufPos, Math.min(doc2.length, to + 2));
    }
    return (categorizer(charBefore(buf, from - bufPos)) != CharCategory.Word || categorizer(charAfter(buf, from - bufPos)) != CharCategory.Word) && (categorizer(charAfter(buf, to - bufPos)) != CharCategory.Word || categorizer(charBefore(buf, to - bufPos)) != CharCategory.Word);
  };
}

class StringQuery extends QueryType2 {
  constructor(spec) {
    super(spec);
  }
  nextMatch(state, curFrom, curTo) {
    let cursor = stringCursor(this.spec, state, curTo, state.doc.length).nextOverlapping();
    if (cursor.done) {
      let end = Math.min(state.doc.length, curFrom + this.spec.unquoted.length);
      cursor = stringCursor(this.spec, state, 0, end).nextOverlapping();
    }
    return cursor.done || cursor.value.from == curFrom && cursor.value.to == curTo ? null : cursor.value;
  }
  prevMatchInRange(state, from, to) {
    for (let pos = to;; ) {
      let start = Math.max(from, pos - 1e4 - this.spec.unquoted.length);
      let cursor = stringCursor(this.spec, state, start, pos), range = null;
      while (!cursor.nextOverlapping().done)
        range = cursor.value;
      if (range)
        return range;
      if (start == from)
        return null;
      pos -= 1e4;
    }
  }
  prevMatch(state, curFrom, curTo) {
    let found = this.prevMatchInRange(state, 0, curFrom);
    if (!found)
      found = this.prevMatchInRange(state, Math.max(0, curTo - this.spec.unquoted.length), state.doc.length);
    return found && (found.from != curFrom || found.to != curTo) ? found : null;
  }
  getReplacement(_result) {
    return this.spec.unquote(this.spec.replace);
  }
  matchAll(state, limit) {
    let cursor = stringCursor(this.spec, state, 0, state.doc.length), ranges = [];
    while (!cursor.next().done) {
      if (ranges.length >= limit)
        return null;
      ranges.push(cursor.value);
    }
    return ranges;
  }
  highlight(state, from, to, add2) {
    let cursor = stringCursor(this.spec, state, Math.max(0, from - this.spec.unquoted.length), Math.min(to + this.spec.unquoted.length, state.doc.length));
    while (!cursor.next().done)
      add2(cursor.value.from, cursor.value.to);
  }
}
function regexpCursor(spec, state, from, to) {
  return new RegExpCursor(state.doc, spec.search, {
    ignoreCase: !spec.caseSensitive,
    test: spec.wholeWord ? regexpWordTest(state.charCategorizer(state.selection.main.head)) : undefined
  }, from, to);
}
function charBefore(str, index) {
  return str.slice(findClusterBreak2(str, index, false), index);
}
function charAfter(str, index) {
  return str.slice(index, findClusterBreak2(str, index));
}
function regexpWordTest(categorizer) {
  return (_from, _to, match) => !match[0].length || (categorizer(charBefore(match.input, match.index)) != CharCategory.Word || categorizer(charAfter(match.input, match.index)) != CharCategory.Word) && (categorizer(charAfter(match.input, match.index + match[0].length)) != CharCategory.Word || categorizer(charBefore(match.input, match.index + match[0].length)) != CharCategory.Word);
}

class RegExpQuery extends QueryType2 {
  nextMatch(state, curFrom, curTo) {
    let cursor = regexpCursor(this.spec, state, curTo, state.doc.length).next();
    if (cursor.done)
      cursor = regexpCursor(this.spec, state, 0, curFrom).next();
    return cursor.done ? null : cursor.value;
  }
  prevMatchInRange(state, from, to) {
    for (let size = 1;; size++) {
      let start = Math.max(from, to - size * 1e4);
      let cursor = regexpCursor(this.spec, state, start, to), range = null;
      while (!cursor.next().done)
        range = cursor.value;
      if (range && (start == from || range.from > start + 10))
        return range;
      if (start == from)
        return null;
    }
  }
  prevMatch(state, curFrom, curTo) {
    return this.prevMatchInRange(state, 0, curFrom) || this.prevMatchInRange(state, curTo, state.doc.length);
  }
  getReplacement(result) {
    return this.spec.unquote(this.spec.replace).replace(/\$([$&]|\d+)/g, (m, i2) => {
      if (i2 == "&")
        return result.match[0];
      if (i2 == "$")
        return "$";
      for (let l = i2.length;l > 0; l--) {
        let n = +i2.slice(0, l);
        if (n > 0 && n < result.match.length)
          return result.match[n] + i2.slice(l);
      }
      return m;
    });
  }
  matchAll(state, limit) {
    let cursor = regexpCursor(this.spec, state, 0, state.doc.length), ranges = [];
    while (!cursor.next().done) {
      if (ranges.length >= limit)
        return null;
      ranges.push(cursor.value);
    }
    return ranges;
  }
  highlight(state, from, to, add2) {
    let cursor = regexpCursor(this.spec, state, Math.max(0, from - 250), Math.min(to + 250, state.doc.length));
    while (!cursor.next().done)
      add2(cursor.value.from, cursor.value.to);
  }
}
var setSearchQuery = /* @__PURE__ */ StateEffect.define();
var togglePanel = /* @__PURE__ */ StateEffect.define();
var searchState = /* @__PURE__ */ StateField.define({
  create(state) {
    return new SearchState(defaultQuery(state).create(), null);
  },
  update(value, tr) {
    for (let effect of tr.effects) {
      if (effect.is(setSearchQuery))
        value = new SearchState(effect.value.create(), value.panel);
      else if (effect.is(togglePanel))
        value = new SearchState(value.query, effect.value ? createSearchPanel : null);
    }
    return value;
  },
  provide: (f) => showPanel.from(f, (val) => val.panel)
});
class SearchState {
  constructor(query, panel) {
    this.query = query;
    this.panel = panel;
  }
}
var matchMark = /* @__PURE__ */ Decoration.mark({ class: "cm-searchMatch" });
var selectedMatchMark = /* @__PURE__ */ Decoration.mark({ class: "cm-searchMatch cm-searchMatch-selected" });
var searchHighlighter = /* @__PURE__ */ ViewPlugin.fromClass(class {
  constructor(view) {
    this.view = view;
    this.decorations = this.highlight(view.state.field(searchState));
  }
  update(update) {
    let state = update.state.field(searchState);
    if (state != update.startState.field(searchState) || update.docChanged || update.selectionSet || update.viewportChanged)
      this.decorations = this.highlight(state);
  }
  highlight({ query, panel }) {
    if (!panel || !query.spec.valid)
      return Decoration.none;
    let { view } = this;
    let builder = new RangeSetBuilder;
    for (let i2 = 0, ranges = view.visibleRanges, l = ranges.length;i2 < l; i2++) {
      let { from, to } = ranges[i2];
      while (i2 < l - 1 && to > ranges[i2 + 1].from - 2 * 250)
        to = ranges[++i2].to;
      query.highlight(view.state, from, to, (from2, to2) => {
        let selected = view.state.selection.ranges.some((r) => r.from == from2 && r.to == to2);
        builder.add(from2, to2, selected ? selectedMatchMark : matchMark);
      });
    }
    return builder.finish();
  }
}, {
  decorations: (v) => v.decorations
});
function searchCommand(f) {
  return (view) => {
    let state = view.state.field(searchState, false);
    return state && state.query.spec.valid ? f(view, state) : openSearchPanel(view);
  };
}
var findNext = /* @__PURE__ */ searchCommand((view, { query }) => {
  let { to } = view.state.selection.main;
  let next = query.nextMatch(view.state, to, to);
  if (!next)
    return false;
  let selection = EditorSelection.single(next.from, next.to);
  let config = view.state.facet(searchConfigFacet);
  view.dispatch({
    selection,
    effects: [announceMatch(view, next), config.scrollToMatch(selection.main, view)],
    userEvent: "select.search"
  });
  selectSearchInput(view);
  return true;
});
var findPrevious = /* @__PURE__ */ searchCommand((view, { query }) => {
  let { state } = view, { from } = state.selection.main;
  let prev = query.prevMatch(state, from, from);
  if (!prev)
    return false;
  let selection = EditorSelection.single(prev.from, prev.to);
  let config = view.state.facet(searchConfigFacet);
  view.dispatch({
    selection,
    effects: [announceMatch(view, prev), config.scrollToMatch(selection.main, view)],
    userEvent: "select.search"
  });
  selectSearchInput(view);
  return true;
});
var selectMatches = /* @__PURE__ */ searchCommand((view, { query }) => {
  let ranges = query.matchAll(view.state, 1000);
  if (!ranges || !ranges.length)
    return false;
  view.dispatch({
    selection: EditorSelection.create(ranges.map((r) => EditorSelection.range(r.from, r.to))),
    userEvent: "select.search.matches"
  });
  return true;
});
var selectSelectionMatches = ({ state, dispatch }) => {
  let sel = state.selection;
  if (sel.ranges.length > 1 || sel.main.empty)
    return false;
  let { from, to } = sel.main;
  let ranges = [], main = 0;
  for (let cur = new SearchCursor(state.doc, state.sliceDoc(from, to));!cur.next().done; ) {
    if (ranges.length > 1000)
      return false;
    if (cur.value.from == from)
      main = ranges.length;
    ranges.push(EditorSelection.range(cur.value.from, cur.value.to));
  }
  dispatch(state.update({
    selection: EditorSelection.create(ranges, main),
    userEvent: "select.search.matches"
  }));
  return true;
};
var replaceNext = /* @__PURE__ */ searchCommand((view, { query }) => {
  let { state } = view, { from, to } = state.selection.main;
  if (state.readOnly)
    return false;
  let match = query.nextMatch(state, from, from);
  if (!match)
    return false;
  let next = match;
  let changes = [], selection, replacement;
  let effects = [];
  if (next.from == from && next.to == to) {
    replacement = state.toText(query.getReplacement(next));
    changes.push({ from: next.from, to: next.to, insert: replacement });
    next = query.nextMatch(state, next.from, next.to);
    effects.push(EditorView.announce.of(state.phrase("replaced match on line $", state.doc.lineAt(from).number) + "."));
  }
  let changeSet = view.state.changes(changes);
  if (next) {
    selection = EditorSelection.single(next.from, next.to).map(changeSet);
    effects.push(announceMatch(view, next));
    effects.push(state.facet(searchConfigFacet).scrollToMatch(selection.main, view));
  }
  view.dispatch({
    changes: changeSet,
    selection,
    effects,
    userEvent: "input.replace"
  });
  return true;
});
var replaceAll = /* @__PURE__ */ searchCommand((view, { query }) => {
  if (view.state.readOnly)
    return false;
  let changes = query.matchAll(view.state, 1e9).map((match) => {
    let { from, to } = match;
    return { from, to, insert: query.getReplacement(match) };
  });
  if (!changes.length)
    return false;
  let announceText = view.state.phrase("replaced $ matches", changes.length) + ".";
  view.dispatch({
    changes,
    effects: EditorView.announce.of(announceText),
    userEvent: "input.replace.all"
  });
  return true;
});
function createSearchPanel(view) {
  return view.state.facet(searchConfigFacet).createPanel(view);
}
function defaultQuery(state, fallback) {
  var _a2, _b, _c, _d, _e;
  let sel = state.selection.main;
  let selText = sel.empty || sel.to > sel.from + 100 ? "" : state.sliceDoc(sel.from, sel.to);
  if (fallback && !selText)
    return fallback;
  let config = state.facet(searchConfigFacet);
  return new SearchQuery({
    search: ((_a2 = fallback === null || fallback === undefined ? undefined : fallback.literal) !== null && _a2 !== undefined ? _a2 : config.literal) ? selText : selText.replace(/\n/g, "\\n"),
    caseSensitive: (_b = fallback === null || fallback === undefined ? undefined : fallback.caseSensitive) !== null && _b !== undefined ? _b : config.caseSensitive,
    literal: (_c = fallback === null || fallback === undefined ? undefined : fallback.literal) !== null && _c !== undefined ? _c : config.literal,
    regexp: (_d = fallback === null || fallback === undefined ? undefined : fallback.regexp) !== null && _d !== undefined ? _d : config.regexp,
    wholeWord: (_e = fallback === null || fallback === undefined ? undefined : fallback.wholeWord) !== null && _e !== undefined ? _e : config.wholeWord
  });
}
function getSearchInput(view) {
  let panel = getPanel(view, createSearchPanel);
  return panel && panel.dom.querySelector("[main-field]");
}
function selectSearchInput(view) {
  let input = getSearchInput(view);
  if (input && input == view.root.activeElement)
    input.select();
}
var openSearchPanel = (view) => {
  let state = view.state.field(searchState, false);
  if (state && state.panel) {
    let searchInput = getSearchInput(view);
    if (searchInput && searchInput != view.root.activeElement) {
      let query = defaultQuery(view.state, state.query.spec);
      if (query.valid)
        view.dispatch({ effects: setSearchQuery.of(query) });
      searchInput.focus();
      searchInput.select();
    }
  } else {
    view.dispatch({ effects: [
      togglePanel.of(true),
      state ? setSearchQuery.of(defaultQuery(view.state, state.query.spec)) : StateEffect.appendConfig.of(searchExtensions)
    ] });
  }
  return true;
};
var closeSearchPanel = (view) => {
  let state = view.state.field(searchState, false);
  if (!state || !state.panel)
    return false;
  let panel = getPanel(view, createSearchPanel);
  if (panel && panel.dom.contains(view.root.activeElement))
    view.focus();
  view.dispatch({ effects: togglePanel.of(false) });
  return true;
};
var searchKeymap = [
  { key: "Mod-f", run: openSearchPanel, scope: "editor search-panel" },
  { key: "F3", run: findNext, shift: findPrevious, scope: "editor search-panel", preventDefault: true },
  { key: "Mod-g", run: findNext, shift: findPrevious, scope: "editor search-panel", preventDefault: true },
  { key: "Escape", run: closeSearchPanel, scope: "editor search-panel" },
  { key: "Mod-Shift-l", run: selectSelectionMatches },
  { key: "Mod-Alt-g", run: gotoLine },
  { key: "Mod-d", run: selectNextOccurrence, preventDefault: true }
];

class SearchPanel {
  constructor(view) {
    this.view = view;
    let query = this.query = view.state.field(searchState).query.spec;
    this.commit = this.commit.bind(this);
    this.searchField = crelt("input", {
      value: query.search,
      placeholder: phrase(view, "Find"),
      "aria-label": phrase(view, "Find"),
      class: "cm-textfield",
      name: "search",
      form: "",
      "main-field": "true",
      onchange: this.commit,
      onkeyup: this.commit
    });
    this.replaceField = crelt("input", {
      value: query.replace,
      placeholder: phrase(view, "Replace"),
      "aria-label": phrase(view, "Replace"),
      class: "cm-textfield",
      name: "replace",
      form: "",
      onchange: this.commit,
      onkeyup: this.commit
    });
    this.caseField = crelt("input", {
      type: "checkbox",
      name: "case",
      form: "",
      checked: query.caseSensitive,
      onchange: this.commit
    });
    this.reField = crelt("input", {
      type: "checkbox",
      name: "re",
      form: "",
      checked: query.regexp,
      onchange: this.commit
    });
    this.wordField = crelt("input", {
      type: "checkbox",
      name: "word",
      form: "",
      checked: query.wholeWord,
      onchange: this.commit
    });
    function button(name2, onclick, content2) {
      return crelt("button", { class: "cm-button", name: name2, onclick, type: "button" }, content2);
    }
    this.dom = crelt("div", { onkeydown: (e) => this.keydown(e), class: "cm-search" }, [
      this.searchField,
      button("next", () => findNext(view), [phrase(view, "next")]),
      button("prev", () => findPrevious(view), [phrase(view, "previous")]),
      button("select", () => selectMatches(view), [phrase(view, "all")]),
      crelt("label", null, [this.caseField, phrase(view, "match case")]),
      crelt("label", null, [this.reField, phrase(view, "regexp")]),
      crelt("label", null, [this.wordField, phrase(view, "by word")]),
      ...view.state.readOnly ? [] : [
        crelt("br"),
        this.replaceField,
        button("replace", () => replaceNext(view), [phrase(view, "replace")]),
        button("replaceAll", () => replaceAll(view), [phrase(view, "replace all")])
      ],
      crelt("button", {
        name: "close",
        onclick: () => closeSearchPanel(view),
        "aria-label": phrase(view, "close"),
        type: "button"
      }, [""])
    ]);
  }
  commit() {
    let query = new SearchQuery({
      search: this.searchField.value,
      caseSensitive: this.caseField.checked,
      regexp: this.reField.checked,
      wholeWord: this.wordField.checked,
      replace: this.replaceField.value
    });
    if (!query.eq(this.query)) {
      this.query = query;
      this.view.dispatch({ effects: setSearchQuery.of(query) });
    }
  }
  keydown(e) {
    if (runScopeHandlers(this.view, e, "search-panel")) {
      e.preventDefault();
    } else if (e.keyCode == 13 && e.target == this.searchField) {
      e.preventDefault();
      (e.shiftKey ? findPrevious : findNext)(this.view);
    } else if (e.keyCode == 13 && e.target == this.replaceField) {
      e.preventDefault();
      replaceNext(this.view);
    }
  }
  update(update) {
    for (let tr of update.transactions)
      for (let effect of tr.effects) {
        if (effect.is(setSearchQuery) && !effect.value.eq(this.query))
          this.setQuery(effect.value);
      }
  }
  setQuery(query) {
    this.query = query;
    this.searchField.value = query.search;
    this.replaceField.value = query.replace;
    this.caseField.checked = query.caseSensitive;
    this.reField.checked = query.regexp;
    this.wordField.checked = query.wholeWord;
  }
  mount() {
    this.searchField.select();
  }
  get pos() {
    return 80;
  }
  get top() {
    return this.view.state.facet(searchConfigFacet).top;
  }
}
function phrase(view, phrase2) {
  return view.state.phrase(phrase2);
}
var AnnounceMargin = 30;
var Break = /[\s\.,:;?!]/;
function announceMatch(view, { from, to }) {
  let line = view.state.doc.lineAt(from), lineEnd = view.state.doc.lineAt(to).to;
  let start = Math.max(line.from, from - AnnounceMargin), end = Math.min(lineEnd, to + AnnounceMargin);
  let text = view.state.sliceDoc(start, end);
  if (start != line.from) {
    for (let i2 = 0;i2 < AnnounceMargin; i2++)
      if (!Break.test(text[i2 + 1]) && Break.test(text[i2])) {
        text = text.slice(i2);
        break;
      }
  }
  if (end != lineEnd) {
    for (let i2 = text.length - 1;i2 > text.length - AnnounceMargin; i2--)
      if (!Break.test(text[i2 - 1]) && Break.test(text[i2])) {
        text = text.slice(0, i2);
        break;
      }
  }
  return EditorView.announce.of(`${view.state.phrase("current match")}. ${text} ${view.state.phrase("on line")} ${line.number}.`);
}
var baseTheme3 = /* @__PURE__ */ EditorView.baseTheme({
  ".cm-panel.cm-search": {
    padding: "2px 6px 4px",
    position: "relative",
    "& [name=close]": {
      position: "absolute",
      top: "0",
      right: "4px",
      backgroundColor: "inherit",
      border: "none",
      font: "inherit",
      padding: 0,
      margin: 0
    },
    "& input, & button, & label": {
      margin: ".2em .6em .2em 0"
    },
    "& input[type=checkbox]": {
      marginRight: ".2em"
    },
    "& label": {
      fontSize: "80%",
      whiteSpace: "pre"
    }
  },
  "&light .cm-searchMatch": { backgroundColor: "#ffff0054" },
  "&dark .cm-searchMatch": { backgroundColor: "#00ffff8a" },
  "&light .cm-searchMatch-selected": { backgroundColor: "#ff6a0054" },
  "&dark .cm-searchMatch-selected": { backgroundColor: "#ff00ff8a" }
});
var searchExtensions = [
  searchState,
  /* @__PURE__ */ Prec.low(searchHighlighter),
  baseTheme3
];

// node_modules/@codemirror/autocomplete/dist/index.js
class CompletionContext {
  constructor(state, pos, explicit, view) {
    this.state = state;
    this.pos = pos;
    this.explicit = explicit;
    this.view = view;
    this.abortListeners = [];
    this.abortOnDocChange = false;
  }
  tokenBefore(types2) {
    let token = syntaxTree(this.state).resolveInner(this.pos, -1);
    while (token && types2.indexOf(token.name) < 0)
      token = token.parent;
    return token ? {
      from: token.from,
      to: this.pos,
      text: this.state.sliceDoc(token.from, this.pos),
      type: token.type
    } : null;
  }
  matchBefore(expr) {
    let line = this.state.doc.lineAt(this.pos);
    let start = Math.max(line.from, this.pos - 250);
    let str = line.text.slice(start - line.from, this.pos - line.from);
    let found = str.search(ensureAnchor(expr, false));
    return found < 0 ? null : { from: start + found, to: this.pos, text: str.slice(found) };
  }
  get aborted() {
    return this.abortListeners == null;
  }
  addEventListener(type, listener, options) {
    if (type == "abort" && this.abortListeners) {
      this.abortListeners.push(listener);
      if (options && options.onDocChange)
        this.abortOnDocChange = true;
    }
  }
}
function toSet(chars) {
  let flat = Object.keys(chars).join("");
  let words = /\w/.test(flat);
  if (words)
    flat = flat.replace(/\w/g, "");
  return `[${words ? "\\w" : ""}${flat.replace(/[^\w\s]/g, "\\$&")}]`;
}
function prefixMatch(options) {
  let first = Object.create(null), rest = Object.create(null);
  for (let { label } of options) {
    first[label[0]] = true;
    for (let i2 = 1;i2 < label.length; i2++)
      rest[label[i2]] = true;
  }
  let source = toSet(first) + toSet(rest) + "*$";
  return [new RegExp("^" + source), new RegExp(source)];
}
function completeFromList(list) {
  let options = list.map((o) => typeof o == "string" ? { label: o } : o);
  let [validFor, match] = options.every((o) => /^\w+$/.test(o.label)) ? [/\w*$/, /\w+$/] : prefixMatch(options);
  return (context) => {
    let token = context.matchBefore(match);
    return token || context.explicit ? { from: token ? token.from : context.pos, options, validFor } : null;
  };
}
function ifNotIn(nodes, source) {
  return (context) => {
    for (let pos = syntaxTree(context.state).resolveInner(context.pos, -1);pos; pos = pos.parent) {
      if (nodes.indexOf(pos.name) > -1)
        return null;
      if (pos.type.isTop)
        break;
    }
    return source(context);
  };
}

class Option {
  constructor(completion, source, match, score) {
    this.completion = completion;
    this.source = source;
    this.match = match;
    this.score = score;
  }
}
function cur(state) {
  return state.selection.main.from;
}
function ensureAnchor(expr, start) {
  var _a2;
  let { source } = expr;
  let addStart = start && source[0] != "^", addEnd = source[source.length - 1] != "$";
  if (!addStart && !addEnd)
    return expr;
  return new RegExp(`${addStart ? "^" : ""}(?:${source})${addEnd ? "$" : ""}`, (_a2 = expr.flags) !== null && _a2 !== undefined ? _a2 : expr.ignoreCase ? "i" : "");
}
var pickedCompletion = /* @__PURE__ */ Annotation.define();
function insertCompletionText(state, text, from, to) {
  let { main } = state.selection, fromOff = from - main.from, toOff = to - main.from;
  return {
    ...state.changeByRange((range) => {
      if (range != main && from != to && state.sliceDoc(range.from + fromOff, range.from + toOff) != state.sliceDoc(from, to))
        return { range };
      let lines = state.toText(text);
      return {
        changes: { from: range.from + fromOff, to: to == main.from ? range.to : range.from + toOff, insert: lines },
        range: EditorSelection.cursor(range.from + fromOff + lines.length)
      };
    }),
    scrollIntoView: true,
    userEvent: "input.complete"
  };
}
var SourceCache = /* @__PURE__ */ new WeakMap;
function asSource(source) {
  if (!Array.isArray(source))
    return source;
  let known = SourceCache.get(source);
  if (!known)
    SourceCache.set(source, known = completeFromList(source));
  return known;
}
var startCompletionEffect = /* @__PURE__ */ StateEffect.define();
var closeCompletionEffect = /* @__PURE__ */ StateEffect.define();

class FuzzyMatcher {
  constructor(pattern) {
    this.pattern = pattern;
    this.chars = [];
    this.folded = [];
    this.any = [];
    this.precise = [];
    this.byWord = [];
    this.score = 0;
    this.matched = [];
    for (let p = 0;p < pattern.length; ) {
      let char = codePointAt2(pattern, p), size = codePointSize2(char);
      this.chars.push(char);
      let part = pattern.slice(p, p + size), upper = part.toUpperCase();
      this.folded.push(codePointAt2(upper == part ? part.toLowerCase() : upper, 0));
      p += size;
    }
    this.astral = pattern.length != this.chars.length;
  }
  ret(score, matched) {
    this.score = score;
    this.matched = matched;
    return this;
  }
  match(word) {
    if (this.pattern.length == 0)
      return this.ret(-100, []);
    if (word.length < this.pattern.length)
      return null;
    let { chars, folded, any, precise, byWord } = this;
    if (chars.length == 1) {
      let first = codePointAt2(word, 0), firstSize = codePointSize2(first);
      let score = firstSize == word.length ? 0 : -100;
      if (first == chars[0])
        ;
      else if (first == folded[0])
        score += -200;
      else
        return null;
      return this.ret(score, [0, firstSize]);
    }
    let direct = word.indexOf(this.pattern);
    if (direct == 0)
      return this.ret(word.length == this.pattern.length ? 0 : -100, [0, this.pattern.length]);
    let len = chars.length, anyTo = 0;
    if (direct < 0) {
      for (let i2 = 0, e = Math.min(word.length, 200);i2 < e && anyTo < len; ) {
        let next = codePointAt2(word, i2);
        if (next == chars[anyTo] || next == folded[anyTo])
          any[anyTo++] = i2;
        i2 += codePointSize2(next);
      }
      if (anyTo < len)
        return null;
    }
    let preciseTo = 0;
    let byWordTo = 0, byWordFolded = false;
    let adjacentTo = 0, adjacentStart = -1, adjacentEnd = -1;
    let hasLower = /[a-z]/.test(word), wordAdjacent = true;
    for (let i2 = 0, e = Math.min(word.length, 200), prevType = 0;i2 < e && byWordTo < len; ) {
      let next = codePointAt2(word, i2);
      if (direct < 0) {
        if (preciseTo < len && next == chars[preciseTo])
          precise[preciseTo++] = i2;
        if (adjacentTo < len) {
          if (next == chars[adjacentTo] || next == folded[adjacentTo]) {
            if (adjacentTo == 0)
              adjacentStart = i2;
            adjacentEnd = i2 + 1;
            adjacentTo++;
          } else {
            adjacentTo = 0;
          }
        }
      }
      let ch, type = next < 255 ? next >= 48 && next <= 57 || next >= 97 && next <= 122 ? 2 : next >= 65 && next <= 90 ? 1 : 0 : (ch = fromCodePoint(next)) != ch.toLowerCase() ? 1 : ch != ch.toUpperCase() ? 2 : 0;
      if (!i2 || type == 1 && hasLower || prevType == 0 && type != 0) {
        if (chars[byWordTo] == next || folded[byWordTo] == next && (byWordFolded = true))
          byWord[byWordTo++] = i2;
        else if (byWord.length)
          wordAdjacent = false;
      }
      prevType = type;
      i2 += codePointSize2(next);
    }
    if (byWordTo == len && byWord[0] == 0 && wordAdjacent)
      return this.result(-100 + (byWordFolded ? -200 : 0), byWord, word);
    if (adjacentTo == len && adjacentStart == 0)
      return this.ret(-200 - word.length + (adjacentEnd == word.length ? 0 : -100), [0, adjacentEnd]);
    if (direct > -1)
      return this.ret(-700 - word.length, [direct, direct + this.pattern.length]);
    if (adjacentTo == len)
      return this.ret(-200 + -700 - word.length, [adjacentStart, adjacentEnd]);
    if (byWordTo == len)
      return this.result(-100 + (byWordFolded ? -200 : 0) + -700 + (wordAdjacent ? 0 : -1100), byWord, word);
    return chars.length == 2 ? null : this.result((any[0] ? -700 : 0) + -200 + -1100, any, word);
  }
  result(score, positions, word) {
    let result = [], i2 = 0;
    for (let pos of positions) {
      let to = pos + (this.astral ? codePointSize2(codePointAt2(word, pos)) : 1);
      if (i2 && result[i2 - 1] == pos)
        result[i2 - 1] = to;
      else {
        result[i2++] = pos;
        result[i2++] = to;
      }
    }
    return this.ret(score - word.length, result);
  }
}

class StrictMatcher {
  constructor(pattern) {
    this.pattern = pattern;
    this.matched = [];
    this.score = 0;
    this.folded = pattern.toLowerCase();
  }
  match(word) {
    if (word.length < this.pattern.length)
      return null;
    let start = word.slice(0, this.pattern.length);
    let match = start == this.pattern ? 0 : start.toLowerCase() == this.folded ? -200 : null;
    if (match == null)
      return null;
    this.matched = [0, start.length];
    this.score = match + (word.length == this.pattern.length ? 0 : -100);
    return this;
  }
}
var completionConfig = /* @__PURE__ */ Facet.define({
  combine(configs) {
    return combineConfig(configs, {
      activateOnTyping: true,
      activateOnCompletion: () => false,
      activateOnTypingDelay: 100,
      selectOnOpen: true,
      override: null,
      closeOnBlur: true,
      maxRenderedOptions: 100,
      defaultKeymap: true,
      tooltipClass: () => "",
      optionClass: () => "",
      aboveCursor: false,
      icons: true,
      addToOptions: [],
      positionInfo: defaultPositionInfo,
      filterStrict: false,
      compareCompletions: (a, b) => (a.sortText || a.label).localeCompare(b.sortText || b.label),
      interactionDelay: 75,
      updateSyncTime: 100
    }, {
      defaultKeymap: (a, b) => a && b,
      closeOnBlur: (a, b) => a && b,
      icons: (a, b) => a && b,
      tooltipClass: (a, b) => (c) => joinClass(a(c), b(c)),
      optionClass: (a, b) => (c) => joinClass(a(c), b(c)),
      addToOptions: (a, b) => a.concat(b),
      filterStrict: (a, b) => a || b
    });
  }
});
function joinClass(a, b) {
  return a ? b ? a + " " + b : a : b;
}
function defaultPositionInfo(view, list, option, info, space, tooltip) {
  let rtl = view.textDirection == Direction.RTL, left = rtl, narrow = false;
  let side = "top", offset, maxWidth;
  let spaceLeft = list.left - space.left, spaceRight = space.right - list.right;
  let infoWidth = info.right - info.left, infoHeight = info.bottom - info.top;
  if (left && spaceLeft < Math.min(infoWidth, spaceRight))
    left = false;
  else if (!left && spaceRight < Math.min(infoWidth, spaceLeft))
    left = true;
  if (infoWidth <= (left ? spaceLeft : spaceRight)) {
    offset = Math.max(space.top, Math.min(option.top, space.bottom - infoHeight)) - list.top;
    maxWidth = Math.min(400, left ? spaceLeft : spaceRight);
  } else {
    narrow = true;
    maxWidth = Math.min(400, (rtl ? list.right : space.right - list.left) - 30);
    let spaceBelow = space.bottom - list.bottom;
    if (spaceBelow >= infoHeight || spaceBelow > list.top) {
      offset = option.bottom - list.top;
    } else {
      side = "bottom";
      offset = list.bottom - option.top;
    }
  }
  let scaleY = (list.bottom - list.top) / tooltip.offsetHeight;
  let scaleX = (list.right - list.left) / tooltip.offsetWidth;
  return {
    style: `${side}: ${offset / scaleY}px; max-width: ${maxWidth / scaleX}px`,
    class: "cm-completionInfo-" + (narrow ? rtl ? "left-narrow" : "right-narrow" : left ? "left" : "right")
  };
}
function optionContent(config) {
  let content2 = config.addToOptions.slice();
  if (config.icons)
    content2.push({
      render(completion) {
        let icon = document.createElement("div");
        icon.classList.add("cm-completionIcon");
        if (completion.type)
          icon.classList.add(...completion.type.split(/\s+/g).map((cls) => "cm-completionIcon-" + cls));
        icon.setAttribute("aria-hidden", "true");
        return icon;
      },
      position: 20
    });
  content2.push({
    render(completion, _s, _v, match) {
      let labelElt = document.createElement("span");
      labelElt.className = "cm-completionLabel";
      let label = completion.displayLabel || completion.label, off = 0;
      for (let j = 0;j < match.length; ) {
        let from = match[j++], to = match[j++];
        if (from > off)
          labelElt.appendChild(document.createTextNode(label.slice(off, from)));
        let span = labelElt.appendChild(document.createElement("span"));
        span.appendChild(document.createTextNode(label.slice(from, to)));
        span.className = "cm-completionMatchedText";
        off = to;
      }
      if (off < label.length)
        labelElt.appendChild(document.createTextNode(label.slice(off)));
      return labelElt;
    },
    position: 50
  }, {
    render(completion) {
      if (!completion.detail)
        return null;
      let detailElt = document.createElement("span");
      detailElt.className = "cm-completionDetail";
      detailElt.textContent = completion.detail;
      return detailElt;
    },
    position: 80
  });
  return content2.sort((a, b) => a.position - b.position).map((a) => a.render);
}
function rangeAroundSelected(total, selected, max) {
  if (total <= max)
    return { from: 0, to: total };
  if (selected < 0)
    selected = 0;
  if (selected <= total >> 1) {
    let off2 = Math.floor(selected / max);
    return { from: off2 * max, to: (off2 + 1) * max };
  }
  let off = Math.floor((total - selected) / max);
  return { from: total - (off + 1) * max, to: total - off * max };
}

class CompletionTooltip {
  constructor(view, stateField, applyCompletion) {
    this.view = view;
    this.stateField = stateField;
    this.applyCompletion = applyCompletion;
    this.info = null;
    this.infoDestroy = null;
    this.placeInfoReq = {
      read: () => this.measureInfo(),
      write: (pos) => this.placeInfo(pos),
      key: this
    };
    this.space = null;
    this.currentClass = "";
    let cState = view.state.field(stateField);
    let { options, selected } = cState.open;
    let config = view.state.facet(completionConfig);
    this.optionContent = optionContent(config);
    this.optionClass = config.optionClass;
    this.tooltipClass = config.tooltipClass;
    this.range = rangeAroundSelected(options.length, selected, config.maxRenderedOptions);
    this.dom = document.createElement("div");
    this.dom.className = "cm-tooltip-autocomplete";
    this.updateTooltipClass(view.state);
    this.dom.addEventListener("mousedown", (e) => {
      let { options: options2 } = view.state.field(stateField).open;
      for (let dom = e.target, match;dom && dom != this.dom; dom = dom.parentNode) {
        if (dom.nodeName == "LI" && (match = /-(\d+)$/.exec(dom.id)) && +match[1] < options2.length) {
          this.applyCompletion(view, options2[+match[1]]);
          e.preventDefault();
          return;
        }
      }
    });
    this.dom.addEventListener("focusout", (e) => {
      let state = view.state.field(this.stateField, false);
      if (state && state.tooltip && view.state.facet(completionConfig).closeOnBlur && e.relatedTarget != view.contentDOM)
        view.dispatch({ effects: closeCompletionEffect.of(null) });
    });
    this.showOptions(options, cState.id);
  }
  mount() {
    this.updateSel();
  }
  showOptions(options, id) {
    if (this.list)
      this.list.remove();
    this.list = this.dom.appendChild(this.createListBox(options, id, this.range));
    this.list.addEventListener("scroll", () => {
      if (this.info)
        this.view.requestMeasure(this.placeInfoReq);
    });
  }
  update(update) {
    var _a2;
    let cState = update.state.field(this.stateField);
    let prevState = update.startState.field(this.stateField);
    this.updateTooltipClass(update.state);
    if (cState != prevState) {
      let { options, selected, disabled } = cState.open;
      if (!prevState.open || prevState.open.options != options) {
        this.range = rangeAroundSelected(options.length, selected, update.state.facet(completionConfig).maxRenderedOptions);
        this.showOptions(options, cState.id);
      }
      this.updateSel();
      if (disabled != ((_a2 = prevState.open) === null || _a2 === undefined ? undefined : _a2.disabled))
        this.dom.classList.toggle("cm-tooltip-autocomplete-disabled", !!disabled);
    }
  }
  updateTooltipClass(state) {
    let cls = this.tooltipClass(state);
    if (cls != this.currentClass) {
      for (let c of this.currentClass.split(" "))
        if (c)
          this.dom.classList.remove(c);
      for (let c of cls.split(" "))
        if (c)
          this.dom.classList.add(c);
      this.currentClass = cls;
    }
  }
  positioned(space) {
    this.space = space;
    if (this.info)
      this.view.requestMeasure(this.placeInfoReq);
  }
  updateSel() {
    let cState = this.view.state.field(this.stateField), open = cState.open;
    if (open.selected > -1 && open.selected < this.range.from || open.selected >= this.range.to) {
      this.range = rangeAroundSelected(open.options.length, open.selected, this.view.state.facet(completionConfig).maxRenderedOptions);
      this.showOptions(open.options, cState.id);
    }
    let newSel = this.updateSelectedOption(open.selected);
    if (newSel) {
      this.destroyInfo();
      let { completion } = open.options[open.selected];
      let { info } = completion;
      if (!info)
        return;
      let infoResult = typeof info === "string" ? document.createTextNode(info) : info(completion);
      if (!infoResult)
        return;
      if ("then" in infoResult) {
        infoResult.then((obj) => {
          if (obj && this.view.state.field(this.stateField, false) == cState)
            this.addInfoPane(obj, completion);
        }).catch((e) => logException(this.view.state, e, "completion info"));
      } else {
        this.addInfoPane(infoResult, completion);
        newSel.setAttribute("aria-describedby", this.info.id);
      }
    }
  }
  addInfoPane(content2, completion) {
    this.destroyInfo();
    let wrap = this.info = document.createElement("div");
    wrap.className = "cm-tooltip cm-completionInfo";
    wrap.id = "cm-completionInfo-" + Math.floor(Math.random() * 65535).toString(16);
    if (content2.nodeType != null) {
      wrap.appendChild(content2);
      this.infoDestroy = null;
    } else {
      let { dom, destroy } = content2;
      wrap.appendChild(dom);
      this.infoDestroy = destroy || null;
    }
    this.dom.appendChild(wrap);
    this.view.requestMeasure(this.placeInfoReq);
  }
  updateSelectedOption(selected) {
    let set = null;
    for (let opt = this.list.firstChild, i2 = this.range.from;opt; opt = opt.nextSibling, i2++) {
      if (opt.nodeName != "LI" || !opt.id) {
        i2--;
      } else if (i2 == selected) {
        if (!opt.hasAttribute("aria-selected")) {
          opt.setAttribute("aria-selected", "true");
          set = opt;
        }
      } else {
        if (opt.hasAttribute("aria-selected")) {
          opt.removeAttribute("aria-selected");
          opt.removeAttribute("aria-describedby");
        }
      }
    }
    if (set)
      scrollIntoView2(this.list, set);
    return set;
  }
  measureInfo() {
    let sel = this.dom.querySelector("[aria-selected]");
    if (!sel || !this.info)
      return null;
    let listRect = this.dom.getBoundingClientRect();
    let infoRect = this.info.getBoundingClientRect();
    let selRect = sel.getBoundingClientRect();
    let space = this.space;
    if (!space) {
      let docElt = this.dom.ownerDocument.documentElement;
      space = { left: 0, top: 0, right: docElt.clientWidth, bottom: docElt.clientHeight };
    }
    if (selRect.top > Math.min(space.bottom, listRect.bottom) - 10 || selRect.bottom < Math.max(space.top, listRect.top) + 10)
      return null;
    return this.view.state.facet(completionConfig).positionInfo(this.view, listRect, selRect, infoRect, space, this.dom);
  }
  placeInfo(pos) {
    if (this.info) {
      if (pos) {
        if (pos.style)
          this.info.style.cssText = pos.style;
        this.info.className = "cm-tooltip cm-completionInfo " + (pos.class || "");
      } else {
        this.info.style.cssText = "top: -1e6px";
      }
    }
  }
  createListBox(options, id, range) {
    const ul = document.createElement("ul");
    ul.id = id;
    ul.setAttribute("role", "listbox");
    ul.setAttribute("aria-expanded", "true");
    ul.setAttribute("aria-label", this.view.state.phrase("Completions"));
    ul.addEventListener("mousedown", (e) => {
      if (e.target == ul)
        e.preventDefault();
    });
    let curSection = null;
    for (let i2 = range.from;i2 < range.to; i2++) {
      let { completion, match } = options[i2], { section } = completion;
      if (section) {
        let name2 = typeof section == "string" ? section : section.name;
        if (name2 != curSection && (i2 > range.from || range.from == 0)) {
          curSection = name2;
          if (typeof section != "string" && section.header) {
            ul.appendChild(section.header(section));
          } else {
            let header = ul.appendChild(document.createElement("completion-section"));
            header.textContent = name2;
          }
        }
      }
      const li = ul.appendChild(document.createElement("li"));
      li.id = id + "-" + i2;
      li.setAttribute("role", "option");
      let cls = this.optionClass(completion);
      if (cls)
        li.className = cls;
      for (let source of this.optionContent) {
        let node = source(completion, this.view.state, this.view, match);
        if (node)
          li.appendChild(node);
      }
    }
    if (range.from)
      ul.classList.add("cm-completionListIncompleteTop");
    if (range.to < options.length)
      ul.classList.add("cm-completionListIncompleteBottom");
    return ul;
  }
  destroyInfo() {
    if (this.info) {
      if (this.infoDestroy)
        this.infoDestroy();
      this.info.remove();
      this.info = null;
    }
  }
  destroy() {
    this.destroyInfo();
  }
}
function completionTooltip(stateField, applyCompletion) {
  return (view) => new CompletionTooltip(view, stateField, applyCompletion);
}
function scrollIntoView2(container, element) {
  let parent = container.getBoundingClientRect();
  let self = element.getBoundingClientRect();
  let scaleY = parent.height / container.offsetHeight;
  if (self.top < parent.top)
    container.scrollTop -= (parent.top - self.top) / scaleY;
  else if (self.bottom > parent.bottom)
    container.scrollTop += (self.bottom - parent.bottom) / scaleY;
}
function score(option) {
  return (option.boost || 0) * 100 + (option.apply ? 10 : 0) + (option.info ? 5 : 0) + (option.type ? 1 : 0);
}
function sortOptions(active, state) {
  let options = [];
  let sections = null, dynamicSectionScore = null;
  let addOption = (option) => {
    options.push(option);
    let { section } = option.completion;
    if (section) {
      if (!sections)
        sections = [];
      let name2 = typeof section == "string" ? section : section.name;
      if (!sections.some((s) => s.name == name2))
        sections.push(typeof section == "string" ? { name: name2 } : section);
    }
  };
  let conf = state.facet(completionConfig);
  for (let a of active)
    if (a.hasResult()) {
      let getMatch = a.result.getMatch;
      if (a.result.filter === false) {
        for (let option of a.result.options) {
          addOption(new Option(option, a.source, getMatch ? getMatch(option) : [], 1e9 - options.length));
        }
      } else {
        let pattern = state.sliceDoc(a.from, a.to), match;
        let matcher = conf.filterStrict ? new StrictMatcher(pattern) : new FuzzyMatcher(pattern);
        for (let option of a.result.options)
          if (match = matcher.match(option.label)) {
            let matched = !option.displayLabel ? match.matched : getMatch ? getMatch(option, match.matched) : [];
            let score2 = match.score + (option.boost || 0);
            addOption(new Option(option, a.source, matched, score2));
            if (typeof option.section == "object" && option.section.rank === "dynamic") {
              let { name: name2 } = option.section;
              if (!dynamicSectionScore)
                dynamicSectionScore = Object.create(null);
              dynamicSectionScore[name2] = Math.max(score2, dynamicSectionScore[name2] || -1e9);
            }
          }
      }
    }
  if (sections) {
    let sectionOrder = Object.create(null), pos = 0;
    let cmp = (a, b) => {
      return (a.rank === "dynamic" && b.rank === "dynamic" ? dynamicSectionScore[b.name] - dynamicSectionScore[a.name] : 0) || (typeof a.rank == "number" ? a.rank : 1e9) - (typeof b.rank == "number" ? b.rank : 1e9) || (a.name < b.name ? -1 : 1);
    };
    for (let s of sections.sort(cmp)) {
      pos -= 1e5;
      sectionOrder[s.name] = pos;
    }
    for (let option of options) {
      let { section } = option.completion;
      if (section)
        option.score += sectionOrder[typeof section == "string" ? section : section.name];
    }
  }
  let result = [], prev = null;
  let compare2 = conf.compareCompletions;
  for (let opt of options.sort((a, b) => b.score - a.score || compare2(a.completion, b.completion))) {
    let cur2 = opt.completion;
    if (!prev || prev.label != cur2.label || prev.detail != cur2.detail || prev.type != null && cur2.type != null && prev.type != cur2.type || prev.apply != cur2.apply || prev.boost != cur2.boost)
      result.push(opt);
    else if (score(opt.completion) > score(prev))
      result[result.length - 1] = opt;
    prev = opt.completion;
  }
  return result;
}

class CompletionDialog {
  constructor(options, attrs, tooltip, timestamp, selected, disabled) {
    this.options = options;
    this.attrs = attrs;
    this.tooltip = tooltip;
    this.timestamp = timestamp;
    this.selected = selected;
    this.disabled = disabled;
  }
  setSelected(selected, id) {
    return selected == this.selected || selected >= this.options.length ? this : new CompletionDialog(this.options, makeAttrs(id, selected), this.tooltip, this.timestamp, selected, this.disabled);
  }
  static build(active, state, id, prev, conf, didSetActive) {
    if (prev && !didSetActive && active.some((s) => s.isPending))
      return prev.setDisabled();
    let options = sortOptions(active, state);
    if (!options.length)
      return prev && active.some((a) => a.isPending) ? prev.setDisabled() : null;
    let selected = state.facet(completionConfig).selectOnOpen ? 0 : -1;
    if (prev && prev.selected != selected && prev.selected != -1) {
      let selectedValue = prev.options[prev.selected].completion;
      for (let i2 = 0;i2 < options.length; i2++)
        if (options[i2].completion == selectedValue) {
          selected = i2;
          break;
        }
    }
    return new CompletionDialog(options, makeAttrs(id, selected), {
      pos: active.reduce((a, b) => b.hasResult() ? Math.min(a, b.from) : a, 1e8),
      create: createTooltip,
      above: conf.aboveCursor
    }, prev ? prev.timestamp : Date.now(), selected, false);
  }
  map(changes) {
    return new CompletionDialog(this.options, this.attrs, { ...this.tooltip, pos: changes.mapPos(this.tooltip.pos) }, this.timestamp, this.selected, this.disabled);
  }
  setDisabled() {
    return new CompletionDialog(this.options, this.attrs, this.tooltip, this.timestamp, this.selected, true);
  }
}

class CompletionState {
  constructor(active, id, open) {
    this.active = active;
    this.id = id;
    this.open = open;
  }
  static start() {
    return new CompletionState(none3, "cm-ac-" + Math.floor(Math.random() * 2000000).toString(36), null);
  }
  update(tr) {
    let { state } = tr, conf = state.facet(completionConfig);
    let sources = conf.override || state.languageDataAt("autocomplete", cur(state)).map(asSource);
    let active = sources.map((source) => {
      let value = this.active.find((s) => s.source == source) || new ActiveSource(source, this.active.some((a) => a.state != 0) ? 1 : 0);
      return value.update(tr, conf);
    });
    if (active.length == this.active.length && active.every((a, i2) => a == this.active[i2]))
      active = this.active;
    let open = this.open, didSet = tr.effects.some((e) => e.is(setActiveEffect));
    if (open && tr.docChanged)
      open = open.map(tr.changes);
    if (tr.selection || active.some((a) => a.hasResult() && tr.changes.touchesRange(a.from, a.to)) || !sameResults(active, this.active) || didSet)
      open = CompletionDialog.build(active, state, this.id, open, conf, didSet);
    else if (open && open.disabled && !active.some((a) => a.isPending))
      open = null;
    if (!open && active.every((a) => !a.isPending) && active.some((a) => a.hasResult()))
      active = active.map((a) => a.hasResult() ? new ActiveSource(a.source, 0) : a);
    for (let effect of tr.effects)
      if (effect.is(setSelectedEffect))
        open = open && open.setSelected(effect.value, this.id);
    return active == this.active && open == this.open ? this : new CompletionState(active, this.id, open);
  }
  get tooltip() {
    return this.open ? this.open.tooltip : null;
  }
  get attrs() {
    return this.open ? this.open.attrs : this.active.length ? baseAttrs : noAttrs2;
  }
}
function sameResults(a, b) {
  if (a == b)
    return true;
  for (let iA = 0, iB = 0;; ) {
    while (iA < a.length && !a[iA].hasResult())
      iA++;
    while (iB < b.length && !b[iB].hasResult())
      iB++;
    let endA = iA == a.length, endB = iB == b.length;
    if (endA || endB)
      return endA == endB;
    if (a[iA++].result != b[iB++].result)
      return false;
  }
}
var baseAttrs = {
  "aria-autocomplete": "list"
};
var noAttrs2 = {};
function makeAttrs(id, selected) {
  let result = {
    "aria-autocomplete": "list",
    "aria-haspopup": "listbox",
    "aria-controls": id
  };
  if (selected > -1)
    result["aria-activedescendant"] = id + "-" + selected;
  return result;
}
var none3 = [];
function getUpdateType(tr, conf) {
  if (tr.isUserEvent("input.complete")) {
    let completion = tr.annotation(pickedCompletion);
    if (completion && conf.activateOnCompletion(completion))
      return 4 | 8;
  }
  let typing = tr.isUserEvent("input.type");
  return typing && conf.activateOnTyping ? 4 | 1 : typing ? 1 : tr.isUserEvent("delete.backward") ? 2 : tr.selection ? 8 : tr.docChanged ? 16 : 0;
}

class ActiveSource {
  constructor(source, state, explicit = false) {
    this.source = source;
    this.state = state;
    this.explicit = explicit;
  }
  hasResult() {
    return false;
  }
  get isPending() {
    return this.state == 1;
  }
  update(tr, conf) {
    let type = getUpdateType(tr, conf), value = this;
    if (type & 8 || type & 16 && this.touches(tr))
      value = new ActiveSource(value.source, 0);
    if (type & 4 && value.state == 0)
      value = new ActiveSource(this.source, 1);
    value = value.updateFor(tr, type);
    for (let effect of tr.effects) {
      if (effect.is(startCompletionEffect))
        value = new ActiveSource(value.source, 1, effect.value);
      else if (effect.is(closeCompletionEffect))
        value = new ActiveSource(value.source, 0);
      else if (effect.is(setActiveEffect)) {
        for (let active of effect.value)
          if (active.source == value.source)
            value = active;
      }
    }
    return value;
  }
  updateFor(tr, type) {
    return this.map(tr.changes);
  }
  map(changes) {
    return this;
  }
  touches(tr) {
    return tr.changes.touchesRange(cur(tr.state));
  }
}

class ActiveResult extends ActiveSource {
  constructor(source, explicit, limit, result, from, to) {
    super(source, 3, explicit);
    this.limit = limit;
    this.result = result;
    this.from = from;
    this.to = to;
  }
  hasResult() {
    return true;
  }
  updateFor(tr, type) {
    var _a2;
    if (!(type & 3))
      return this.map(tr.changes);
    let result = this.result;
    if (result.map && !tr.changes.empty)
      result = result.map(result, tr.changes);
    let from = tr.changes.mapPos(this.from), to = tr.changes.mapPos(this.to, 1);
    let pos = cur(tr.state);
    if (pos > to || !result || type & 2 && (cur(tr.startState) == this.from || pos < this.limit))
      return new ActiveSource(this.source, type & 4 ? 1 : 0);
    let limit = tr.changes.mapPos(this.limit);
    if (checkValid(result.validFor, tr.state, from, to))
      return new ActiveResult(this.source, this.explicit, limit, result, from, to);
    if (result.update && (result = result.update(result, from, to, new CompletionContext(tr.state, pos, false))))
      return new ActiveResult(this.source, this.explicit, limit, result, result.from, (_a2 = result.to) !== null && _a2 !== undefined ? _a2 : cur(tr.state));
    return new ActiveSource(this.source, 1, this.explicit);
  }
  map(mapping) {
    if (mapping.empty)
      return this;
    let result = this.result.map ? this.result.map(this.result, mapping) : this.result;
    if (!result)
      return new ActiveSource(this.source, 0);
    return new ActiveResult(this.source, this.explicit, mapping.mapPos(this.limit), this.result, mapping.mapPos(this.from), mapping.mapPos(this.to, 1));
  }
  touches(tr) {
    return tr.changes.touchesRange(this.from, this.to);
  }
}
function checkValid(validFor, state, from, to) {
  if (!validFor)
    return false;
  let text = state.sliceDoc(from, to);
  return typeof validFor == "function" ? validFor(text, from, to, state) : ensureAnchor(validFor, true).test(text);
}
var setActiveEffect = /* @__PURE__ */ StateEffect.define({
  map(sources, mapping) {
    return sources.map((s) => s.map(mapping));
  }
});
var setSelectedEffect = /* @__PURE__ */ StateEffect.define();
var completionState = /* @__PURE__ */ StateField.define({
  create() {
    return CompletionState.start();
  },
  update(value, tr) {
    return value.update(tr);
  },
  provide: (f) => [
    showTooltip.from(f, (val) => val.tooltip),
    EditorView.contentAttributes.from(f, (state) => state.attrs)
  ]
});
function applyCompletion(view, option) {
  const apply = option.completion.apply || option.completion.label;
  let result = view.state.field(completionState).active.find((a) => a.source == option.source);
  if (!(result instanceof ActiveResult))
    return false;
  if (typeof apply == "string")
    view.dispatch({
      ...insertCompletionText(view.state, apply, result.from, result.to),
      annotations: pickedCompletion.of(option.completion)
    });
  else
    apply(view, option.completion, result.from, result.to);
  return true;
}
var createTooltip = /* @__PURE__ */ completionTooltip(completionState, applyCompletion);
function moveCompletionSelection(forward, by = "option") {
  return (view) => {
    let cState = view.state.field(completionState, false);
    if (!cState || !cState.open || cState.open.disabled || Date.now() - cState.open.timestamp < view.state.facet(completionConfig).interactionDelay)
      return false;
    let step = 1, tooltip;
    if (by == "page" && (tooltip = getTooltip(view, cState.open.tooltip)))
      step = Math.max(2, Math.floor(tooltip.dom.offsetHeight / tooltip.dom.querySelector("li").offsetHeight) - 1);
    let { length } = cState.open.options;
    let selected = cState.open.selected > -1 ? cState.open.selected + step * (forward ? 1 : -1) : forward ? 0 : length - 1;
    if (selected < 0)
      selected = by == "page" ? 0 : length - 1;
    else if (selected >= length)
      selected = by == "page" ? length - 1 : 0;
    view.dispatch({ effects: setSelectedEffect.of(selected) });
    return true;
  };
}
var acceptCompletion = (view) => {
  let cState = view.state.field(completionState, false);
  if (view.state.readOnly || !cState || !cState.open || cState.open.selected < 0 || cState.open.disabled || Date.now() - cState.open.timestamp < view.state.facet(completionConfig).interactionDelay)
    return false;
  return applyCompletion(view, cState.open.options[cState.open.selected]);
};
var startCompletion = (view) => {
  let cState = view.state.field(completionState, false);
  if (!cState)
    return false;
  view.dispatch({ effects: startCompletionEffect.of(true) });
  return true;
};
var closeCompletion = (view) => {
  let cState = view.state.field(completionState, false);
  if (!cState || !cState.active.some((a) => a.state != 0))
    return false;
  view.dispatch({ effects: closeCompletionEffect.of(null) });
  return true;
};

class RunningQuery {
  constructor(active, context) {
    this.active = active;
    this.context = context;
    this.time = Date.now();
    this.updates = [];
    this.done = undefined;
  }
}
var MaxUpdateCount = 50;
var MinAbortTime = 1000;
var completionPlugin = /* @__PURE__ */ ViewPlugin.fromClass(class {
  constructor(view) {
    this.view = view;
    this.debounceUpdate = -1;
    this.running = [];
    this.debounceAccept = -1;
    this.pendingStart = false;
    this.composing = 0;
    for (let active of view.state.field(completionState).active)
      if (active.isPending)
        this.startQuery(active);
  }
  update(update) {
    let cState = update.state.field(completionState);
    let conf = update.state.facet(completionConfig);
    if (!update.selectionSet && !update.docChanged && update.startState.field(completionState) == cState)
      return;
    let doesReset = update.transactions.some((tr) => {
      let type = getUpdateType(tr, conf);
      return type & 8 || (tr.selection || tr.docChanged) && !(type & 3);
    });
    for (let i2 = 0;i2 < this.running.length; i2++) {
      let query = this.running[i2];
      if (doesReset || query.context.abortOnDocChange && update.docChanged || query.updates.length + update.transactions.length > MaxUpdateCount && Date.now() - query.time > MinAbortTime) {
        for (let handler of query.context.abortListeners) {
          try {
            handler();
          } catch (e) {
            logException(this.view.state, e);
          }
        }
        query.context.abortListeners = null;
        this.running.splice(i2--, 1);
      } else {
        query.updates.push(...update.transactions);
      }
    }
    if (this.debounceUpdate > -1)
      clearTimeout(this.debounceUpdate);
    if (update.transactions.some((tr) => tr.effects.some((e) => e.is(startCompletionEffect))))
      this.pendingStart = true;
    let delay = this.pendingStart ? 50 : conf.activateOnTypingDelay;
    this.debounceUpdate = cState.active.some((a) => a.isPending && !this.running.some((q) => q.active.source == a.source)) ? setTimeout(() => this.startUpdate(), delay) : -1;
    if (this.composing != 0)
      for (let tr of update.transactions) {
        if (tr.isUserEvent("input.type"))
          this.composing = 2;
        else if (this.composing == 2 && tr.selection)
          this.composing = 3;
      }
  }
  startUpdate() {
    this.debounceUpdate = -1;
    this.pendingStart = false;
    let { state } = this.view, cState = state.field(completionState);
    for (let active of cState.active) {
      if (active.isPending && !this.running.some((r) => r.active.source == active.source))
        this.startQuery(active);
    }
    if (this.running.length && cState.open && cState.open.disabled)
      this.debounceAccept = setTimeout(() => this.accept(), this.view.state.facet(completionConfig).updateSyncTime);
  }
  startQuery(active) {
    let { state } = this.view, pos = cur(state);
    let context = new CompletionContext(state, pos, active.explicit, this.view);
    let pending = new RunningQuery(active, context);
    this.running.push(pending);
    Promise.resolve(active.source(context)).then((result) => {
      if (!pending.context.aborted) {
        pending.done = result || null;
        this.scheduleAccept();
      }
    }, (err) => {
      this.view.dispatch({ effects: closeCompletionEffect.of(null) });
      logException(this.view.state, err);
    });
  }
  scheduleAccept() {
    if (this.running.every((q) => q.done !== undefined))
      this.accept();
    else if (this.debounceAccept < 0)
      this.debounceAccept = setTimeout(() => this.accept(), this.view.state.facet(completionConfig).updateSyncTime);
  }
  accept() {
    var _a2;
    if (this.debounceAccept > -1)
      clearTimeout(this.debounceAccept);
    this.debounceAccept = -1;
    let updated = [];
    let conf = this.view.state.facet(completionConfig), cState = this.view.state.field(completionState);
    for (let i2 = 0;i2 < this.running.length; i2++) {
      let query = this.running[i2];
      if (query.done === undefined)
        continue;
      this.running.splice(i2--, 1);
      if (query.done) {
        let pos = cur(query.updates.length ? query.updates[0].startState : this.view.state);
        let limit = Math.min(pos, query.done.from + (query.active.explicit ? 0 : 1));
        let active = new ActiveResult(query.active.source, query.active.explicit, limit, query.done, query.done.from, (_a2 = query.done.to) !== null && _a2 !== undefined ? _a2 : pos);
        for (let tr of query.updates)
          active = active.update(tr, conf);
        if (active.hasResult()) {
          updated.push(active);
          continue;
        }
      }
      let current = cState.active.find((a) => a.source == query.active.source);
      if (current && current.isPending) {
        if (query.done == null) {
          let active = new ActiveSource(query.active.source, 0);
          for (let tr of query.updates)
            active = active.update(tr, conf);
          if (!active.isPending)
            updated.push(active);
        } else {
          this.startQuery(current);
        }
      }
    }
    if (updated.length || cState.open && cState.open.disabled)
      this.view.dispatch({ effects: setActiveEffect.of(updated) });
  }
}, {
  eventHandlers: {
    blur(event) {
      let state = this.view.state.field(completionState, false);
      if (state && state.tooltip && this.view.state.facet(completionConfig).closeOnBlur) {
        let dialog = state.open && getTooltip(this.view, state.open.tooltip);
        if (!dialog || !dialog.dom.contains(event.relatedTarget))
          setTimeout(() => this.view.dispatch({ effects: closeCompletionEffect.of(null) }), 10);
      }
    },
    compositionstart() {
      this.composing = 1;
    },
    compositionend() {
      if (this.composing == 3) {
        setTimeout(() => this.view.dispatch({ effects: startCompletionEffect.of(false) }), 20);
      }
      this.composing = 0;
    }
  }
});
var windows = typeof navigator == "object" && /* @__PURE__ */ /Win/.test(navigator.platform);
var commitCharacters = /* @__PURE__ */ Prec.highest(/* @__PURE__ */ EditorView.domEventHandlers({
  keydown(event, view) {
    let field = view.state.field(completionState, false);
    if (!field || !field.open || field.open.disabled || field.open.selected < 0 || event.key.length > 1 || event.ctrlKey && !(windows && event.altKey) || event.metaKey)
      return false;
    let option = field.open.options[field.open.selected];
    let result = field.active.find((a) => a.source == option.source);
    let commitChars = option.completion.commitCharacters || result.result.commitCharacters;
    if (commitChars && commitChars.indexOf(event.key) > -1)
      applyCompletion(view, option);
    return false;
  }
}));
var baseTheme4 = /* @__PURE__ */ EditorView.baseTheme({
  ".cm-tooltip.cm-tooltip-autocomplete": {
    "& > ul": {
      fontFamily: "monospace",
      whiteSpace: "nowrap",
      overflow: "hidden auto",
      maxWidth_fallback: "700px",
      maxWidth: "min(700px, 95vw)",
      minWidth: "250px",
      maxHeight: "10em",
      height: "100%",
      listStyle: "none",
      margin: 0,
      padding: 0,
      "& > li, & > completion-section": {
        padding: "1px 3px",
        lineHeight: 1.2
      },
      "& > li": {
        overflowX: "hidden",
        textOverflow: "ellipsis",
        cursor: "pointer"
      },
      "& > completion-section": {
        display: "list-item",
        borderBottom: "1px solid silver",
        paddingLeft: "0.5em",
        opacity: 0.7
      }
    }
  },
  "&light .cm-tooltip-autocomplete ul li[aria-selected]": {
    background: "#17c",
    color: "white"
  },
  "&light .cm-tooltip-autocomplete-disabled ul li[aria-selected]": {
    background: "#777"
  },
  "&dark .cm-tooltip-autocomplete ul li[aria-selected]": {
    background: "#347",
    color: "white"
  },
  "&dark .cm-tooltip-autocomplete-disabled ul li[aria-selected]": {
    background: "#444"
  },
  ".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after": {
    content: '""',
    opacity: 0.5,
    display: "block",
    textAlign: "center"
  },
  ".cm-tooltip.cm-completionInfo": {
    position: "absolute",
    padding: "3px 9px",
    width: "max-content",
    maxWidth: `${400}px`,
    boxSizing: "border-box",
    whiteSpace: "pre-line"
  },
  ".cm-completionInfo.cm-completionInfo-left": { right: "100%" },
  ".cm-completionInfo.cm-completionInfo-right": { left: "100%" },
  ".cm-completionInfo.cm-completionInfo-left-narrow": { right: `${30}px` },
  ".cm-completionInfo.cm-completionInfo-right-narrow": { left: `${30}px` },
  "&light .cm-snippetField": { backgroundColor: "#00000022" },
  "&dark .cm-snippetField": { backgroundColor: "#ffffff22" },
  ".cm-snippetFieldPosition": {
    verticalAlign: "text-top",
    width: 0,
    height: "1.15em",
    display: "inline-block",
    margin: "0 -0.7px -.7em",
    borderLeft: "1.4px dotted #888"
  },
  ".cm-completionMatchedText": {
    textDecoration: "underline"
  },
  ".cm-completionDetail": {
    marginLeft: "0.5em",
    fontStyle: "italic"
  },
  ".cm-completionIcon": {
    fontSize: "90%",
    width: ".8em",
    display: "inline-block",
    textAlign: "center",
    paddingRight: ".6em",
    opacity: "0.6",
    boxSizing: "content-box"
  },
  ".cm-completionIcon-function, .cm-completionIcon-method": {
    "&:after": { content: "''" }
  },
  ".cm-completionIcon-class": {
    "&:after": { content: "''" }
  },
  ".cm-completionIcon-interface": {
    "&:after": { content: "''" }
  },
  ".cm-completionIcon-variable": {
    "&:after": { content: "'\uD835\uDC65'" }
  },
  ".cm-completionIcon-constant": {
    "&:after": { content: "'\uD835\uDC36'" }
  },
  ".cm-completionIcon-type": {
    "&:after": { content: "'\uD835\uDC61'" }
  },
  ".cm-completionIcon-enum": {
    "&:after": { content: "''" }
  },
  ".cm-completionIcon-property": {
    "&:after": { content: "''" }
  },
  ".cm-completionIcon-keyword": {
    "&:after": { content: "'\uD83D\uDD11'" }
  },
  ".cm-completionIcon-namespace": {
    "&:after": { content: "''" }
  },
  ".cm-completionIcon-text": {
    "&:after": { content: "'abc'", fontSize: "50%", verticalAlign: "middle" }
  }
});

class FieldPos {
  constructor(field, line, from, to) {
    this.field = field;
    this.line = line;
    this.from = from;
    this.to = to;
  }
}

class FieldRange {
  constructor(field, from, to) {
    this.field = field;
    this.from = from;
    this.to = to;
  }
  map(changes) {
    let from = changes.mapPos(this.from, -1, MapMode.TrackDel);
    let to = changes.mapPos(this.to, 1, MapMode.TrackDel);
    return from == null || to == null ? null : new FieldRange(this.field, from, to);
  }
}

class Snippet {
  constructor(lines, fieldPositions) {
    this.lines = lines;
    this.fieldPositions = fieldPositions;
  }
  instantiate(state, pos) {
    let text = [], lineStart = [pos];
    let lineObj = state.doc.lineAt(pos), baseIndent = /^\s*/.exec(lineObj.text)[0];
    for (let line of this.lines) {
      if (text.length) {
        let indent = baseIndent, tabs = /^\t*/.exec(line)[0].length;
        for (let i2 = 0;i2 < tabs; i2++)
          indent += state.facet(indentUnit);
        lineStart.push(pos + indent.length - tabs);
        line = indent + line.slice(tabs);
      }
      text.push(line);
      pos += line.length + 1;
    }
    let ranges = this.fieldPositions.map((pos2) => new FieldRange(pos2.field, lineStart[pos2.line] + pos2.from, lineStart[pos2.line] + pos2.to));
    return { text, ranges };
  }
  static parse(template) {
    let fields = [];
    let lines = [], positions = [], m;
    for (let line of template.split(/\r\n?|\n/)) {
      while (m = /[#$]\{(?:(\d+)(?::([^{}]*))?|((?:\\[{}]|[^{}])*))\}/.exec(line)) {
        let seq = m[1] ? +m[1] : null, rawName = m[2] || m[3] || "", found = -1;
        let name2 = rawName.replace(/\\[{}]/g, (m2) => m2[1]);
        for (let i2 = 0;i2 < fields.length; i2++) {
          if (seq != null ? fields[i2].seq == seq : name2 ? fields[i2].name == name2 : false)
            found = i2;
        }
        if (found < 0) {
          let i2 = 0;
          while (i2 < fields.length && (seq == null || fields[i2].seq != null && fields[i2].seq < seq))
            i2++;
          fields.splice(i2, 0, { seq, name: name2 });
          found = i2;
          for (let pos of positions)
            if (pos.field >= found)
              pos.field++;
        }
        for (let pos of positions)
          if (pos.line == lines.length && pos.from > m.index) {
            let snip = m[2] ? 3 + (m[1] || "").length : 2;
            pos.from -= snip;
            pos.to -= snip;
          }
        positions.push(new FieldPos(found, lines.length, m.index, m.index + name2.length));
        line = line.slice(0, m.index) + rawName + line.slice(m.index + m[0].length);
      }
      line = line.replace(/\\([{}])/g, (_, brace, index) => {
        for (let pos of positions)
          if (pos.line == lines.length && pos.from > index) {
            pos.from--;
            pos.to--;
          }
        return brace;
      });
      lines.push(line);
    }
    return new Snippet(lines, positions);
  }
}
var fieldMarker = /* @__PURE__ */ Decoration.widget({ widget: /* @__PURE__ */ new class extends WidgetType {
  toDOM() {
    let span = document.createElement("span");
    span.className = "cm-snippetFieldPosition";
    return span;
  }
  ignoreEvent() {
    return false;
  }
} });
var fieldRange = /* @__PURE__ */ Decoration.mark({ class: "cm-snippetField" });

class ActiveSnippet {
  constructor(ranges, active) {
    this.ranges = ranges;
    this.active = active;
    this.deco = Decoration.set(ranges.map((r) => (r.from == r.to ? fieldMarker : fieldRange).range(r.from, r.to)), true);
  }
  map(changes) {
    let ranges = [];
    for (let r of this.ranges) {
      let mapped = r.map(changes);
      if (!mapped)
        return null;
      ranges.push(mapped);
    }
    return new ActiveSnippet(ranges, this.active);
  }
  selectionInsideField(sel) {
    return sel.ranges.every((range) => this.ranges.some((r) => r.field == this.active && r.from <= range.from && r.to >= range.to));
  }
}
var setActive = /* @__PURE__ */ StateEffect.define({
  map(value, changes) {
    return value && value.map(changes);
  }
});
var moveToField = /* @__PURE__ */ StateEffect.define();
var snippetState = /* @__PURE__ */ StateField.define({
  create() {
    return null;
  },
  update(value, tr) {
    for (let effect of tr.effects) {
      if (effect.is(setActive))
        return effect.value;
      if (effect.is(moveToField) && value)
        return new ActiveSnippet(value.ranges, effect.value);
    }
    if (value && tr.docChanged)
      value = value.map(tr.changes);
    if (value && tr.selection && !value.selectionInsideField(tr.selection))
      value = null;
    return value;
  },
  provide: (f) => EditorView.decorations.from(f, (val) => val ? val.deco : Decoration.none)
});
function fieldSelection(ranges, field) {
  return EditorSelection.create(ranges.filter((r) => r.field == field).map((r) => EditorSelection.range(r.from, r.to)));
}
function snippet(template) {
  let snippet2 = Snippet.parse(template);
  return (editor, completion, from, to) => {
    let { text, ranges } = snippet2.instantiate(editor.state, from);
    let { main } = editor.state.selection;
    let spec = {
      changes: { from, to: to == main.from ? main.to : to, insert: Text.of(text) },
      scrollIntoView: true,
      annotations: completion ? [pickedCompletion.of(completion), Transaction.userEvent.of("input.complete")] : undefined
    };
    if (ranges.length)
      spec.selection = fieldSelection(ranges, 0);
    if (ranges.some((r) => r.field > 0)) {
      let active = new ActiveSnippet(ranges, 0);
      let effects = spec.effects = [setActive.of(active)];
      if (editor.state.field(snippetState, false) === undefined)
        effects.push(StateEffect.appendConfig.of([snippetState, addSnippetKeymap, snippetPointerHandler, baseTheme4]));
    }
    editor.dispatch(editor.state.update(spec));
  };
}
function moveField(dir) {
  return ({ state, dispatch }) => {
    let active = state.field(snippetState, false);
    if (!active || dir < 0 && active.active == 0)
      return false;
    let next = active.active + dir, last = dir > 0 && !active.ranges.some((r) => r.field == next + dir);
    dispatch(state.update({
      selection: fieldSelection(active.ranges, next),
      effects: setActive.of(last ? null : new ActiveSnippet(active.ranges, next)),
      scrollIntoView: true
    }));
    return true;
  };
}
var clearSnippet = ({ state, dispatch }) => {
  let active = state.field(snippetState, false);
  if (!active)
    return false;
  dispatch(state.update({ effects: setActive.of(null) }));
  return true;
};
var nextSnippetField = /* @__PURE__ */ moveField(1);
var prevSnippetField = /* @__PURE__ */ moveField(-1);
var defaultSnippetKeymap = [
  { key: "Tab", run: nextSnippetField, shift: prevSnippetField },
  { key: "Escape", run: clearSnippet }
];
var snippetKeymap = /* @__PURE__ */ Facet.define({
  combine(maps) {
    return maps.length ? maps[0] : defaultSnippetKeymap;
  }
});
var addSnippetKeymap = /* @__PURE__ */ Prec.highest(/* @__PURE__ */ keymap.compute([snippetKeymap], (state) => state.facet(snippetKeymap)));
function snippetCompletion(template, completion) {
  return { ...completion, apply: snippet(template) };
}
var snippetPointerHandler = /* @__PURE__ */ EditorView.domEventHandlers({
  mousedown(event, view) {
    let active = view.state.field(snippetState, false), pos;
    if (!active || (pos = view.posAtCoords({ x: event.clientX, y: event.clientY })) == null)
      return false;
    let match = active.ranges.find((r) => r.from <= pos && r.to >= pos);
    if (!match || match.field == active.active)
      return false;
    view.dispatch({
      selection: fieldSelection(active.ranges, match.field),
      effects: setActive.of(active.ranges.some((r) => r.field > match.field) ? new ActiveSnippet(active.ranges, match.field) : null),
      scrollIntoView: true
    });
    return true;
  }
});
var defaults2 = {
  brackets: ["(", "[", "{", "'", '"'],
  before: ")]}:;>",
  stringPrefixes: []
};
var closeBracketEffect = /* @__PURE__ */ StateEffect.define({
  map(value, mapping) {
    let mapped = mapping.mapPos(value, -1, MapMode.TrackAfter);
    return mapped == null ? undefined : mapped;
  }
});
var closedBracket = /* @__PURE__ */ new class extends RangeValue {
};
closedBracket.startSide = 1;
closedBracket.endSide = -1;
var bracketState = /* @__PURE__ */ StateField.define({
  create() {
    return RangeSet.empty;
  },
  update(value, tr) {
    value = value.map(tr.changes);
    if (tr.selection) {
      let line = tr.state.doc.lineAt(tr.selection.main.head);
      value = value.update({ filter: (from) => from >= line.from && from <= line.to });
    }
    for (let effect of tr.effects)
      if (effect.is(closeBracketEffect))
        value = value.update({ add: [closedBracket.range(effect.value, effect.value + 1)] });
    return value;
  }
});
function closeBrackets() {
  return [inputHandler2, bracketState];
}
var definedClosing = "()[]{}<>";
function closing(ch) {
  for (let i2 = 0;i2 < definedClosing.length; i2 += 2)
    if (definedClosing.charCodeAt(i2) == ch)
      return definedClosing.charAt(i2 + 1);
  return fromCodePoint(ch < 128 ? ch : ch + 1);
}
function config(state, pos) {
  return state.languageDataAt("closeBrackets", pos)[0] || defaults2;
}
var android = typeof navigator == "object" && /* @__PURE__ */ /Android\b/.test(navigator.userAgent);
var inputHandler2 = /* @__PURE__ */ EditorView.inputHandler.of((view, from, to, insert2) => {
  if ((android ? view.composing : view.compositionStarted) || view.state.readOnly)
    return false;
  let sel = view.state.selection.main;
  if (insert2.length > 2 || insert2.length == 2 && codePointSize2(codePointAt2(insert2, 0)) == 1 || from != sel.from || to != sel.to)
    return false;
  let tr = insertBracket(view.state, insert2);
  if (!tr)
    return false;
  view.dispatch(tr);
  return true;
});
var deleteBracketPair = ({ state, dispatch }) => {
  if (state.readOnly)
    return false;
  let conf = config(state, state.selection.main.head);
  let tokens = conf.brackets || defaults2.brackets;
  let dont = null, changes = state.changeByRange((range) => {
    if (range.empty) {
      let before = prevChar(state.doc, range.head);
      for (let token of tokens) {
        if (token == before && nextChar(state.doc, range.head) == closing(codePointAt2(token, 0)))
          return {
            changes: { from: range.head - token.length, to: range.head + token.length },
            range: EditorSelection.cursor(range.head - token.length)
          };
      }
    }
    return { range: dont = range };
  });
  if (!dont)
    dispatch(state.update(changes, { scrollIntoView: true, userEvent: "delete.backward" }));
  return !dont;
};
var closeBracketsKeymap = [
  { key: "Backspace", run: deleteBracketPair }
];
function insertBracket(state, bracket2) {
  let conf = config(state, state.selection.main.head);
  let tokens = conf.brackets || defaults2.brackets;
  for (let tok of tokens) {
    let closed = closing(codePointAt2(tok, 0));
    if (bracket2 == tok)
      return closed == tok ? handleSame(state, tok, tokens.indexOf(tok + tok + tok) > -1, conf) : handleOpen(state, tok, closed, conf.before || defaults2.before);
    if (bracket2 == closed && closedBracketAt(state, state.selection.main.from))
      return handleClose(state, tok, closed);
  }
  return null;
}
function closedBracketAt(state, pos) {
  let found = false;
  state.field(bracketState).between(0, state.doc.length, (from) => {
    if (from == pos)
      found = true;
  });
  return found;
}
function nextChar(doc2, pos) {
  let next = doc2.sliceString(pos, pos + 2);
  return next.slice(0, codePointSize2(codePointAt2(next, 0)));
}
function prevChar(doc2, pos) {
  let prev = doc2.sliceString(pos - 2, pos);
  return codePointSize2(codePointAt2(prev, 0)) == prev.length ? prev : prev.slice(1);
}
function handleOpen(state, open, close, closeBefore) {
  let dont = null, changes = state.changeByRange((range) => {
    if (!range.empty)
      return {
        changes: [{ insert: open, from: range.from }, { insert: close, from: range.to }],
        effects: closeBracketEffect.of(range.to + open.length),
        range: EditorSelection.range(range.anchor + open.length, range.head + open.length)
      };
    let next = nextChar(state.doc, range.head);
    if (!next || /\s/.test(next) || closeBefore.indexOf(next) > -1)
      return {
        changes: { insert: open + close, from: range.head },
        effects: closeBracketEffect.of(range.head + open.length),
        range: EditorSelection.cursor(range.head + open.length)
      };
    return { range: dont = range };
  });
  return dont ? null : state.update(changes, {
    scrollIntoView: true,
    userEvent: "input.type"
  });
}
function handleClose(state, _open, close) {
  let dont = null, changes = state.changeByRange((range) => {
    if (range.empty && nextChar(state.doc, range.head) == close)
      return {
        changes: { from: range.head, to: range.head + close.length, insert: close },
        range: EditorSelection.cursor(range.head + close.length)
      };
    return dont = { range };
  });
  return dont ? null : state.update(changes, {
    scrollIntoView: true,
    userEvent: "input.type"
  });
}
function handleSame(state, token, allowTriple, config2) {
  let stringPrefixes = config2.stringPrefixes || defaults2.stringPrefixes;
  let dont = null, changes = state.changeByRange((range) => {
    if (!range.empty)
      return {
        changes: [{ insert: token, from: range.from }, { insert: token, from: range.to }],
        effects: closeBracketEffect.of(range.to + token.length),
        range: EditorSelection.range(range.anchor + token.length, range.head + token.length)
      };
    let pos = range.head, next = nextChar(state.doc, pos), start;
    if (next == token) {
      if (nodeStart(state, pos)) {
        return {
          changes: { insert: token + token, from: pos },
          effects: closeBracketEffect.of(pos + token.length),
          range: EditorSelection.cursor(pos + token.length)
        };
      } else if (closedBracketAt(state, pos)) {
        let isTriple = allowTriple && state.sliceDoc(pos, pos + token.length * 3) == token + token + token;
        let content2 = isTriple ? token + token + token : token;
        return {
          changes: { from: pos, to: pos + content2.length, insert: content2 },
          range: EditorSelection.cursor(pos + content2.length)
        };
      }
    } else if (allowTriple && state.sliceDoc(pos - 2 * token.length, pos) == token + token && (start = canStartStringAt(state, pos - 2 * token.length, stringPrefixes)) > -1 && nodeStart(state, start)) {
      return {
        changes: { insert: token + token + token + token, from: pos },
        effects: closeBracketEffect.of(pos + token.length),
        range: EditorSelection.cursor(pos + token.length)
      };
    } else if (state.charCategorizer(pos)(next) != CharCategory.Word) {
      if (canStartStringAt(state, pos, stringPrefixes) > -1 && !probablyInString(state, pos, token, stringPrefixes))
        return {
          changes: { insert: token + token, from: pos },
          effects: closeBracketEffect.of(pos + token.length),
          range: EditorSelection.cursor(pos + token.length)
        };
    }
    return { range: dont = range };
  });
  return dont ? null : state.update(changes, {
    scrollIntoView: true,
    userEvent: "input.type"
  });
}
function nodeStart(state, pos) {
  let tree = syntaxTree(state).resolveInner(pos + 1);
  return tree.parent && tree.from == pos;
}
function probablyInString(state, pos, quoteToken, prefixes) {
  let node = syntaxTree(state).resolveInner(pos, -1);
  let maxPrefix = prefixes.reduce((m, p) => Math.max(m, p.length), 0);
  for (let i2 = 0;i2 < 5; i2++) {
    let start = state.sliceDoc(node.from, Math.min(node.to, node.from + quoteToken.length + maxPrefix));
    let quotePos = start.indexOf(quoteToken);
    if (!quotePos || quotePos > -1 && prefixes.indexOf(start.slice(0, quotePos)) > -1) {
      let first = node.firstChild;
      while (first && first.from == node.from && first.to - first.from > quoteToken.length + quotePos) {
        if (state.sliceDoc(first.to - quoteToken.length, first.to) == quoteToken)
          return false;
        first = first.firstChild;
      }
      return true;
    }
    let parent = node.to == pos && node.parent;
    if (!parent)
      break;
    node = parent;
  }
  return false;
}
function canStartStringAt(state, pos, prefixes) {
  let charCat = state.charCategorizer(pos);
  if (charCat(state.sliceDoc(pos - 1, pos)) != CharCategory.Word)
    return pos;
  for (let prefix of prefixes) {
    let start = pos - prefix.length;
    if (state.sliceDoc(start, pos) == prefix && charCat(state.sliceDoc(start - 1, start)) != CharCategory.Word)
      return start;
  }
  return -1;
}
function autocompletion(config2 = {}) {
  return [
    commitCharacters,
    completionState,
    completionConfig.of(config2),
    completionPlugin,
    completionKeymapExt,
    baseTheme4
  ];
}
var completionKeymap = [
  { key: "Ctrl-Space", run: startCompletion },
  { mac: "Alt-`", run: startCompletion },
  { mac: "Alt-i", run: startCompletion },
  { key: "Escape", run: closeCompletion },
  { key: "ArrowDown", run: /* @__PURE__ */ moveCompletionSelection(true) },
  { key: "ArrowUp", run: /* @__PURE__ */ moveCompletionSelection(false) },
  { key: "PageDown", run: /* @__PURE__ */ moveCompletionSelection(true, "page") },
  { key: "PageUp", run: /* @__PURE__ */ moveCompletionSelection(false, "page") },
  { key: "Enter", run: acceptCompletion }
];
var completionKeymapExt = /* @__PURE__ */ Prec.highest(/* @__PURE__ */ keymap.computeN([completionConfig], (state) => state.facet(completionConfig).defaultKeymap ? [completionKeymap] : []));

// node_modules/@codemirror/lint/dist/index.js
class SelectedDiagnostic {
  constructor(from, to, diagnostic) {
    this.from = from;
    this.to = to;
    this.diagnostic = diagnostic;
  }
}

class LintState {
  constructor(diagnostics, panel, selected) {
    this.diagnostics = diagnostics;
    this.panel = panel;
    this.selected = selected;
  }
  static init(diagnostics, panel, state) {
    let diagnosticFilter = state.facet(lintConfig).markerFilter;
    if (diagnosticFilter)
      diagnostics = diagnosticFilter(diagnostics, state);
    let sorted = diagnostics.slice().sort((a, b) => a.from - b.from || a.to - b.to);
    let deco = new RangeSetBuilder, active = [], pos = 0;
    let scan = state.doc.iter(), scanPos = 0, docLen = state.doc.length;
    for (let i2 = 0;; ) {
      let next = i2 == sorted.length ? null : sorted[i2];
      if (!next && !active.length)
        break;
      let from, to;
      if (active.length) {
        from = pos;
        to = active.reduce((p, d) => Math.min(p, d.to), next && next.from > from ? next.from : 1e8);
      } else {
        from = next.from;
        if (from > docLen)
          break;
        to = next.to;
        active.push(next);
        i2++;
      }
      while (i2 < sorted.length) {
        let next2 = sorted[i2];
        if (next2.from == from && (next2.to > next2.from || next2.to == from)) {
          active.push(next2);
          i2++;
          to = Math.min(next2.to, to);
        } else {
          to = Math.min(next2.from, to);
          break;
        }
      }
      to = Math.min(to, docLen);
      let widget = false;
      if (active.some((d) => d.from == from && (d.to == to || to == docLen))) {
        widget = from == to;
        if (!widget && to - from < 10) {
          let behind = from - (scanPos + scan.value.length);
          if (behind > 0) {
            scan.next(behind);
            scanPos = from;
          }
          for (let check = from;; ) {
            if (check >= to) {
              widget = true;
              break;
            }
            if (!scan.lineBreak && scanPos + scan.value.length > check)
              break;
            check = scanPos + scan.value.length;
            scanPos += scan.value.length;
            scan.next();
          }
        }
      }
      let sev = maxSeverity(active);
      if (widget) {
        deco.add(from, from, Decoration.widget({
          widget: new DiagnosticWidget(sev),
          diagnostics: active.slice()
        }));
      } else {
        let markClass = active.reduce((c, d) => d.markClass ? c + " " + d.markClass : c, "");
        deco.add(from, to, Decoration.mark({
          class: "cm-lintRange cm-lintRange-" + sev + markClass,
          diagnostics: active.slice(),
          inclusiveEnd: active.some((a) => a.to > to)
        }));
      }
      pos = to;
      if (pos == docLen)
        break;
      for (let i3 = 0;i3 < active.length; i3++)
        if (active[i3].to <= pos)
          active.splice(i3--, 1);
    }
    let set = deco.finish();
    return new LintState(set, panel, findDiagnostic(set));
  }
}
function findDiagnostic(diagnostics, diagnostic = null, after = 0) {
  let found = null;
  diagnostics.between(after, 1e9, (from, to, { spec }) => {
    if (diagnostic && spec.diagnostics.indexOf(diagnostic) < 0)
      return;
    if (!found)
      found = new SelectedDiagnostic(from, to, diagnostic || spec.diagnostics[0]);
    else if (spec.diagnostics.indexOf(found.diagnostic) < 0)
      return false;
    else
      found = new SelectedDiagnostic(found.from, to, found.diagnostic);
  });
  return found;
}
function hideTooltip(tr, tooltip) {
  let from = tooltip.pos, to = tooltip.end || from;
  let result = tr.state.facet(lintConfig).hideOn(tr, from, to);
  if (result != null)
    return result;
  let line = tr.startState.doc.lineAt(tooltip.pos);
  return !!(tr.effects.some((e) => e.is(setDiagnosticsEffect)) || tr.changes.touchesRange(line.from, Math.max(line.to, to)));
}
function maybeEnableLint(state, effects) {
  return state.field(lintState, false) ? effects : effects.concat(StateEffect.appendConfig.of(lintExtensions));
}
var setDiagnosticsEffect = /* @__PURE__ */ StateEffect.define();
var togglePanel2 = /* @__PURE__ */ StateEffect.define();
var movePanelSelection = /* @__PURE__ */ StateEffect.define();
var lintState = /* @__PURE__ */ StateField.define({
  create() {
    return new LintState(Decoration.none, null, null);
  },
  update(value, tr) {
    if (tr.docChanged && value.diagnostics.size) {
      let mapped = value.diagnostics.map(tr.changes), selected = null, panel = value.panel;
      if (value.selected) {
        let selPos = tr.changes.mapPos(value.selected.from, 1);
        selected = findDiagnostic(mapped, value.selected.diagnostic, selPos) || findDiagnostic(mapped, null, selPos);
      }
      if (!mapped.size && panel && tr.state.facet(lintConfig).autoPanel)
        panel = null;
      value = new LintState(mapped, panel, selected);
    }
    for (let effect of tr.effects) {
      if (effect.is(setDiagnosticsEffect)) {
        let panel = !tr.state.facet(lintConfig).autoPanel ? value.panel : effect.value.length ? LintPanel.open : null;
        value = LintState.init(effect.value, panel, tr.state);
      } else if (effect.is(togglePanel2)) {
        value = new LintState(value.diagnostics, effect.value ? LintPanel.open : null, value.selected);
      } else if (effect.is(movePanelSelection)) {
        value = new LintState(value.diagnostics, value.panel, effect.value);
      }
    }
    return value;
  },
  provide: (f) => [
    showPanel.from(f, (val) => val.panel),
    EditorView.decorations.from(f, (s) => s.diagnostics)
  ]
});
var activeMark = /* @__PURE__ */ Decoration.mark({ class: "cm-lintRange cm-lintRange-active" });
function lintTooltip(view, pos, side) {
  let { diagnostics } = view.state.field(lintState);
  let found, start = -1, end = -1;
  diagnostics.between(pos - (side < 0 ? 1 : 0), pos + (side > 0 ? 1 : 0), (from, to, { spec }) => {
    if (pos >= from && pos <= to && (from == to || (pos > from || side > 0) && (pos < to || side < 0))) {
      found = spec.diagnostics;
      start = from;
      end = to;
      return false;
    }
  });
  let diagnosticFilter = view.state.facet(lintConfig).tooltipFilter;
  if (found && diagnosticFilter)
    found = diagnosticFilter(found, view.state);
  if (!found)
    return null;
  return {
    pos: start,
    end,
    above: view.state.doc.lineAt(start).to < end,
    create() {
      return { dom: diagnosticsTooltip(view, found) };
    }
  };
}
function diagnosticsTooltip(view, diagnostics) {
  return crelt("ul", { class: "cm-tooltip-lint" }, diagnostics.map((d) => renderDiagnostic(view, d, false)));
}
var openLintPanel = (view) => {
  let field = view.state.field(lintState, false);
  if (!field || !field.panel)
    view.dispatch({ effects: maybeEnableLint(view.state, [togglePanel2.of(true)]) });
  let panel = getPanel(view, LintPanel.open);
  if (panel)
    panel.dom.querySelector(".cm-panel-lint ul").focus();
  return true;
};
var closeLintPanel = (view) => {
  let field = view.state.field(lintState, false);
  if (!field || !field.panel)
    return false;
  view.dispatch({ effects: togglePanel2.of(false) });
  return true;
};
var nextDiagnostic = (view) => {
  let field = view.state.field(lintState, false);
  if (!field)
    return false;
  let sel = view.state.selection.main, next = field.diagnostics.iter(sel.to + 1);
  if (!next.value) {
    next = field.diagnostics.iter(0);
    if (!next.value || next.from == sel.from && next.to == sel.to)
      return false;
  }
  view.dispatch({ selection: { anchor: next.from, head: next.to }, scrollIntoView: true });
  return true;
};
var lintKeymap = [
  { key: "Mod-Shift-m", run: openLintPanel, preventDefault: true },
  { key: "F8", run: nextDiagnostic }
];
var lintConfig = /* @__PURE__ */ Facet.define({
  combine(input) {
    return {
      sources: input.map((i2) => i2.source).filter((x) => x != null),
      ...combineConfig(input.map((i2) => i2.config), {
        delay: 750,
        markerFilter: null,
        tooltipFilter: null,
        needsRefresh: null,
        hideOn: () => null
      }, {
        delay: Math.max,
        markerFilter: combineFilter,
        tooltipFilter: combineFilter,
        needsRefresh: (a, b) => !a ? b : !b ? a : (u) => a(u) || b(u),
        hideOn: (a, b) => !a ? b : !b ? a : (t2, x, y) => a(t2, x, y) || b(t2, x, y),
        autoPanel: (a, b) => a || b
      })
    };
  }
});
function combineFilter(a, b) {
  return !a ? b : !b ? a : (d, s) => b(a(d, s), s);
}
function assignKeys(actions) {
  let assigned = [];
  if (actions)
    actions:
      for (let { name: name2 } of actions) {
        for (let i2 = 0;i2 < name2.length; i2++) {
          let ch = name2[i2];
          if (/[a-zA-Z]/.test(ch) && !assigned.some((c) => c.toLowerCase() == ch.toLowerCase())) {
            assigned.push(ch);
            continue actions;
          }
        }
        assigned.push("");
      }
  return assigned;
}
function renderDiagnostic(view, diagnostic, inPanel) {
  var _a2;
  let keys2 = inPanel ? assignKeys(diagnostic.actions) : [];
  return crelt("li", { class: "cm-diagnostic cm-diagnostic-" + diagnostic.severity }, crelt("span", { class: "cm-diagnosticText" }, diagnostic.renderMessage ? diagnostic.renderMessage(view) : diagnostic.message), (_a2 = diagnostic.actions) === null || _a2 === undefined ? undefined : _a2.map((action, i2) => {
    let fired = false, click = (e) => {
      e.preventDefault();
      if (fired)
        return;
      fired = true;
      let found = findDiagnostic(view.state.field(lintState).diagnostics, diagnostic);
      if (found)
        action.apply(view, found.from, found.to);
    };
    let { name: name2 } = action, keyIndex = keys2[i2] ? name2.indexOf(keys2[i2]) : -1;
    let nameElt = keyIndex < 0 ? name2 : [
      name2.slice(0, keyIndex),
      crelt("u", name2.slice(keyIndex, keyIndex + 1)),
      name2.slice(keyIndex + 1)
    ];
    let markClass = action.markClass ? " " + action.markClass : "";
    return crelt("button", {
      type: "button",
      class: "cm-diagnosticAction" + markClass,
      onclick: click,
      onmousedown: click,
      "aria-label": ` Action: ${name2}${keyIndex < 0 ? "" : ` (access key "${keys2[i2]})"`}.`
    }, nameElt);
  }), diagnostic.source && crelt("div", { class: "cm-diagnosticSource" }, diagnostic.source));
}

class DiagnosticWidget extends WidgetType {
  constructor(sev) {
    super();
    this.sev = sev;
  }
  eq(other) {
    return other.sev == this.sev;
  }
  toDOM() {
    return crelt("span", { class: "cm-lintPoint cm-lintPoint-" + this.sev });
  }
}

class PanelItem {
  constructor(view, diagnostic) {
    this.diagnostic = diagnostic;
    this.id = "item_" + Math.floor(Math.random() * 4294967295).toString(16);
    this.dom = renderDiagnostic(view, diagnostic, true);
    this.dom.id = this.id;
    this.dom.setAttribute("role", "option");
  }
}

class LintPanel {
  constructor(view) {
    this.view = view;
    this.items = [];
    let onkeydown = (event) => {
      if (event.keyCode == 27) {
        closeLintPanel(this.view);
        this.view.focus();
      } else if (event.keyCode == 38 || event.keyCode == 33) {
        this.moveSelection((this.selectedIndex - 1 + this.items.length) % this.items.length);
      } else if (event.keyCode == 40 || event.keyCode == 34) {
        this.moveSelection((this.selectedIndex + 1) % this.items.length);
      } else if (event.keyCode == 36) {
        this.moveSelection(0);
      } else if (event.keyCode == 35) {
        this.moveSelection(this.items.length - 1);
      } else if (event.keyCode == 13) {
        this.view.focus();
      } else if (event.keyCode >= 65 && event.keyCode <= 90 && this.selectedIndex >= 0) {
        let { diagnostic } = this.items[this.selectedIndex], keys2 = assignKeys(diagnostic.actions);
        for (let i2 = 0;i2 < keys2.length; i2++)
          if (keys2[i2].toUpperCase().charCodeAt(0) == event.keyCode) {
            let found = findDiagnostic(this.view.state.field(lintState).diagnostics, diagnostic);
            if (found)
              diagnostic.actions[i2].apply(view, found.from, found.to);
          }
      } else {
        return;
      }
      event.preventDefault();
    };
    let onclick = (event) => {
      for (let i2 = 0;i2 < this.items.length; i2++) {
        if (this.items[i2].dom.contains(event.target))
          this.moveSelection(i2);
      }
    };
    this.list = crelt("ul", {
      tabIndex: 0,
      role: "listbox",
      "aria-label": this.view.state.phrase("Diagnostics"),
      onkeydown,
      onclick
    });
    this.dom = crelt("div", { class: "cm-panel-lint" }, this.list, crelt("button", {
      type: "button",
      name: "close",
      "aria-label": this.view.state.phrase("close"),
      onclick: () => closeLintPanel(this.view)
    }, ""));
    this.update();
  }
  get selectedIndex() {
    let selected = this.view.state.field(lintState).selected;
    if (!selected)
      return -1;
    for (let i2 = 0;i2 < this.items.length; i2++)
      if (this.items[i2].diagnostic == selected.diagnostic)
        return i2;
    return -1;
  }
  update() {
    let { diagnostics, selected } = this.view.state.field(lintState);
    let i2 = 0, needsSync = false, newSelectedItem = null;
    let seen = new Set;
    diagnostics.between(0, this.view.state.doc.length, (_start, _end, { spec }) => {
      for (let diagnostic of spec.diagnostics) {
        if (seen.has(diagnostic))
          continue;
        seen.add(diagnostic);
        let found = -1, item;
        for (let j = i2;j < this.items.length; j++)
          if (this.items[j].diagnostic == diagnostic) {
            found = j;
            break;
          }
        if (found < 0) {
          item = new PanelItem(this.view, diagnostic);
          this.items.splice(i2, 0, item);
          needsSync = true;
        } else {
          item = this.items[found];
          if (found > i2) {
            this.items.splice(i2, found - i2);
            needsSync = true;
          }
        }
        if (selected && item.diagnostic == selected.diagnostic) {
          if (!item.dom.hasAttribute("aria-selected")) {
            item.dom.setAttribute("aria-selected", "true");
            newSelectedItem = item;
          }
        } else if (item.dom.hasAttribute("aria-selected")) {
          item.dom.removeAttribute("aria-selected");
        }
        i2++;
      }
    });
    while (i2 < this.items.length && !(this.items.length == 1 && this.items[0].diagnostic.from < 0)) {
      needsSync = true;
      this.items.pop();
    }
    if (this.items.length == 0) {
      this.items.push(new PanelItem(this.view, {
        from: -1,
        to: -1,
        severity: "info",
        message: this.view.state.phrase("No diagnostics")
      }));
      needsSync = true;
    }
    if (newSelectedItem) {
      this.list.setAttribute("aria-activedescendant", newSelectedItem.id);
      this.view.requestMeasure({
        key: this,
        read: () => ({ sel: newSelectedItem.dom.getBoundingClientRect(), panel: this.list.getBoundingClientRect() }),
        write: ({ sel, panel }) => {
          let scaleY = panel.height / this.list.offsetHeight;
          if (sel.top < panel.top)
            this.list.scrollTop -= (panel.top - sel.top) / scaleY;
          else if (sel.bottom > panel.bottom)
            this.list.scrollTop += (sel.bottom - panel.bottom) / scaleY;
        }
      });
    } else if (this.selectedIndex < 0) {
      this.list.removeAttribute("aria-activedescendant");
    }
    if (needsSync)
      this.sync();
  }
  sync() {
    let domPos = this.list.firstChild;
    function rm2() {
      let prev = domPos;
      domPos = prev.nextSibling;
      prev.remove();
    }
    for (let item of this.items) {
      if (item.dom.parentNode == this.list) {
        while (domPos != item.dom)
          rm2();
        domPos = item.dom.nextSibling;
      } else {
        this.list.insertBefore(item.dom, domPos);
      }
    }
    while (domPos)
      rm2();
  }
  moveSelection(selectedIndex) {
    if (this.selectedIndex < 0)
      return;
    let field = this.view.state.field(lintState);
    let selection = findDiagnostic(field.diagnostics, this.items[selectedIndex].diagnostic);
    if (!selection)
      return;
    this.view.dispatch({
      selection: { anchor: selection.from, head: selection.to },
      scrollIntoView: true,
      effects: movePanelSelection.of(selection)
    });
  }
  static open(view) {
    return new LintPanel(view);
  }
}
function svg(content2, attrs = `viewBox="0 0 40 40"`) {
  return `url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" ${attrs}>${encodeURIComponent(content2)}</svg>')`;
}
function underline(color) {
  return svg(`<path d="m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0" stroke="${color}" fill="none" stroke-width=".7"/>`, `width="6" height="3"`);
}
var baseTheme5 = /* @__PURE__ */ EditorView.baseTheme({
  ".cm-diagnostic": {
    padding: "3px 6px 3px 8px",
    marginLeft: "-1px",
    display: "block",
    whiteSpace: "pre-wrap"
  },
  ".cm-diagnostic-error": { borderLeft: "5px solid #d11" },
  ".cm-diagnostic-warning": { borderLeft: "5px solid orange" },
  ".cm-diagnostic-info": { borderLeft: "5px solid #999" },
  ".cm-diagnostic-hint": { borderLeft: "5px solid #66d" },
  ".cm-diagnosticAction": {
    font: "inherit",
    border: "none",
    padding: "2px 4px",
    backgroundColor: "#444",
    color: "white",
    borderRadius: "3px",
    marginLeft: "8px",
    cursor: "pointer"
  },
  ".cm-diagnosticSource": {
    fontSize: "70%",
    opacity: 0.7
  },
  ".cm-lintRange": {
    backgroundPosition: "left bottom",
    backgroundRepeat: "repeat-x",
    paddingBottom: "0.7px"
  },
  ".cm-lintRange-error": { backgroundImage: /* @__PURE__ */ underline("#d11") },
  ".cm-lintRange-warning": { backgroundImage: /* @__PURE__ */ underline("orange") },
  ".cm-lintRange-info": { backgroundImage: /* @__PURE__ */ underline("#999") },
  ".cm-lintRange-hint": { backgroundImage: /* @__PURE__ */ underline("#66d") },
  ".cm-lintRange-active": { backgroundColor: "#ffdd9980" },
  ".cm-tooltip-lint": {
    padding: 0,
    margin: 0
  },
  ".cm-lintPoint": {
    position: "relative",
    "&:after": {
      content: '""',
      position: "absolute",
      bottom: 0,
      left: "-2px",
      borderLeft: "3px solid transparent",
      borderRight: "3px solid transparent",
      borderBottom: "4px solid #d11"
    }
  },
  ".cm-lintPoint-warning": {
    "&:after": { borderBottomColor: "orange" }
  },
  ".cm-lintPoint-info": {
    "&:after": { borderBottomColor: "#999" }
  },
  ".cm-lintPoint-hint": {
    "&:after": { borderBottomColor: "#66d" }
  },
  ".cm-panel.cm-panel-lint": {
    position: "relative",
    "& ul": {
      maxHeight: "100px",
      overflowY: "auto",
      "& [aria-selected]": {
        backgroundColor: "#ddd",
        "& u": { textDecoration: "underline" }
      },
      "&:focus [aria-selected]": {
        background_fallback: "#bdf",
        backgroundColor: "Highlight",
        color_fallback: "white",
        color: "HighlightText"
      },
      "& u": { textDecoration: "none" },
      padding: 0,
      margin: 0
    },
    "& [name=close]": {
      position: "absolute",
      top: "0",
      right: "2px",
      background: "inherit",
      border: "none",
      font: "inherit",
      padding: 0,
      margin: 0
    }
  }
});
function severityWeight(sev) {
  return sev == "error" ? 4 : sev == "warning" ? 3 : sev == "info" ? 2 : 1;
}
function maxSeverity(diagnostics) {
  let sev = "hint", weight = 1;
  for (let d of diagnostics) {
    let w = severityWeight(d.severity);
    if (w > weight) {
      weight = w;
      sev = d.severity;
    }
  }
  return sev;
}
var lintExtensions = [
  lintState,
  /* @__PURE__ */ EditorView.decorations.compute([lintState], (state) => {
    let { selected, panel } = state.field(lintState);
    return !selected || !panel || selected.from == selected.to ? Decoration.none : Decoration.set([
      activeMark.range(selected.from, selected.to)
    ]);
  }),
  /* @__PURE__ */ hoverTooltip(lintTooltip, { hideOn: hideTooltip }),
  baseTheme5
];

// node_modules/codemirror/dist/index.js
var basicSetup = /* @__PURE__ */ (() => [
  lineNumbers(),
  highlightActiveLineGutter(),
  highlightSpecialChars(),
  history(),
  foldGutter(),
  drawSelection(),
  dropCursor(),
  EditorState.allowMultipleSelections.of(true),
  indentOnInput(),
  syntaxHighlighting(defaultHighlightStyle, { fallback: true }),
  bracketMatching(),
  closeBrackets(),
  autocompletion(),
  rectangularSelection(),
  crosshairCursor(),
  highlightActiveLine(),
  highlightSelectionMatches(),
  keymap.of([
    ...closeBracketsKeymap,
    ...defaultKeymap,
    ...searchKeymap,
    ...historyKeymap,
    ...foldKeymap,
    ...completionKeymap,
    ...lintKeymap
  ])
])();

// node_modules/@lezer/lr/dist/index.js
class Stack {
  constructor(p, stack, state, reducePos, pos, score2, buffer, bufferBase, curContext, lookAhead = 0, parent) {
    this.p = p;
    this.stack = stack;
    this.state = state;
    this.reducePos = reducePos;
    this.pos = pos;
    this.score = score2;
    this.buffer = buffer;
    this.bufferBase = bufferBase;
    this.curContext = curContext;
    this.lookAhead = lookAhead;
    this.parent = parent;
  }
  toString() {
    return `[${this.stack.filter((_, i2) => i2 % 3 == 0).concat(this.state)}]@${this.pos}${this.score ? "!" + this.score : ""}`;
  }
  static start(p, state, pos = 0) {
    let cx = p.parser.context;
    return new Stack(p, [], state, pos, pos, 0, [], 0, cx ? new StackContext(cx, cx.start) : null, 0, null);
  }
  get context() {
    return this.curContext ? this.curContext.context : null;
  }
  pushState(state, start) {
    this.stack.push(this.state, start, this.bufferBase + this.buffer.length);
    this.state = state;
  }
  reduce(action) {
    var _a2;
    let depth = action >> 19, type = action & 65535;
    let { parser } = this.p;
    let lookaheadRecord = this.reducePos < this.pos - 25 && this.setLookAhead(this.pos);
    let dPrec = parser.dynamicPrecedence(type);
    if (dPrec)
      this.score += dPrec;
    if (depth == 0) {
      this.pushState(parser.getGoto(this.state, type, true), this.reducePos);
      if (type < parser.minRepeatTerm)
        this.storeNode(type, this.reducePos, this.reducePos, lookaheadRecord ? 8 : 4, true);
      this.reduceContext(type, this.reducePos);
      return;
    }
    let base2 = this.stack.length - (depth - 1) * 3 - (action & 262144 ? 6 : 0);
    let start = base2 ? this.stack[base2 - 2] : this.p.ranges[0].from, size = this.reducePos - start;
    if (size >= 2000 && !((_a2 = this.p.parser.nodeSet.types[type]) === null || _a2 === undefined ? undefined : _a2.isAnonymous)) {
      if (start == this.p.lastBigReductionStart) {
        this.p.bigReductionCount++;
        this.p.lastBigReductionSize = size;
      } else if (this.p.lastBigReductionSize < size) {
        this.p.bigReductionCount = 1;
        this.p.lastBigReductionStart = start;
        this.p.lastBigReductionSize = size;
      }
    }
    let bufferBase = base2 ? this.stack[base2 - 1] : 0, count = this.bufferBase + this.buffer.length - bufferBase;
    if (type < parser.minRepeatTerm || action & 131072) {
      let pos = parser.stateFlag(this.state, 1) ? this.pos : this.reducePos;
      this.storeNode(type, start, pos, count + 4, true);
    }
    if (action & 262144) {
      this.state = this.stack[base2];
    } else {
      let baseStateID = this.stack[base2 - 3];
      this.state = parser.getGoto(baseStateID, type, true);
    }
    while (this.stack.length > base2)
      this.stack.pop();
    this.reduceContext(type, start);
  }
  storeNode(term, start, end, size = 4, mustSink = false) {
    if (term == 0 && (!this.stack.length || this.stack[this.stack.length - 1] < this.buffer.length + this.bufferBase)) {
      let cur2 = this, top2 = this.buffer.length;
      if (top2 == 0 && cur2.parent) {
        top2 = cur2.bufferBase - cur2.parent.bufferBase;
        cur2 = cur2.parent;
      }
      if (top2 > 0 && cur2.buffer[top2 - 4] == 0 && cur2.buffer[top2 - 1] > -1) {
        if (start == end)
          return;
        if (cur2.buffer[top2 - 2] >= start) {
          cur2.buffer[top2 - 2] = end;
          return;
        }
      }
    }
    if (!mustSink || this.pos == end) {
      this.buffer.push(term, start, end, size);
    } else {
      let index = this.buffer.length;
      if (index > 0 && (this.buffer[index - 4] != 0 || this.buffer[index - 1] < 0)) {
        let mustMove = false;
        for (let scan = index;scan > 0 && this.buffer[scan - 2] > end; scan -= 4) {
          if (this.buffer[scan - 1] >= 0) {
            mustMove = true;
            break;
          }
        }
        if (mustMove)
          while (index > 0 && this.buffer[index - 2] > end) {
            this.buffer[index] = this.buffer[index - 4];
            this.buffer[index + 1] = this.buffer[index - 3];
            this.buffer[index + 2] = this.buffer[index - 2];
            this.buffer[index + 3] = this.buffer[index - 1];
            index -= 4;
            if (size > 4)
              size -= 4;
          }
      }
      this.buffer[index] = term;
      this.buffer[index + 1] = start;
      this.buffer[index + 2] = end;
      this.buffer[index + 3] = size;
    }
  }
  shift(action, type, start, end) {
    if (action & 131072) {
      this.pushState(action & 65535, this.pos);
    } else if ((action & 262144) == 0) {
      let nextState = action, { parser } = this.p;
      if (end > this.pos || type <= parser.maxNode) {
        this.pos = end;
        if (!parser.stateFlag(nextState, 1))
          this.reducePos = end;
      }
      this.pushState(nextState, start);
      this.shiftContext(type, start);
      if (type <= parser.maxNode)
        this.buffer.push(type, start, end, 4);
    } else {
      this.pos = end;
      this.shiftContext(type, start);
      if (type <= this.p.parser.maxNode)
        this.buffer.push(type, start, end, 4);
    }
  }
  apply(action, next, nextStart, nextEnd) {
    if (action & 65536)
      this.reduce(action);
    else
      this.shift(action, next, nextStart, nextEnd);
  }
  useNode(value, next) {
    let index = this.p.reused.length - 1;
    if (index < 0 || this.p.reused[index] != value) {
      this.p.reused.push(value);
      index++;
    }
    let start = this.pos;
    this.reducePos = this.pos = start + value.length;
    this.pushState(next, start);
    this.buffer.push(index, start, this.reducePos, -1);
    if (this.curContext)
      this.updateContext(this.curContext.tracker.reuse(this.curContext.context, value, this, this.p.stream.reset(this.pos - value.length)));
  }
  split() {
    let parent = this;
    let off = parent.buffer.length;
    while (off > 0 && parent.buffer[off - 2] > parent.reducePos)
      off -= 4;
    let buffer = parent.buffer.slice(off), base2 = parent.bufferBase + off;
    while (parent && base2 == parent.bufferBase)
      parent = parent.parent;
    return new Stack(this.p, this.stack.slice(), this.state, this.reducePos, this.pos, this.score, buffer, base2, this.curContext, this.lookAhead, parent);
  }
  recoverByDelete(next, nextEnd) {
    let isNode = next <= this.p.parser.maxNode;
    if (isNode)
      this.storeNode(next, this.pos, nextEnd, 4);
    this.storeNode(0, this.pos, nextEnd, isNode ? 8 : 4);
    this.pos = this.reducePos = nextEnd;
    this.score -= 190;
  }
  canShift(term) {
    for (let sim = new SimulatedStack(this);; ) {
      let action = this.p.parser.stateSlot(sim.state, 4) || this.p.parser.hasAction(sim.state, term);
      if (action == 0)
        return false;
      if ((action & 65536) == 0)
        return true;
      sim.reduce(action);
    }
  }
  recoverByInsert(next) {
    if (this.stack.length >= 300)
      return [];
    let nextStates = this.p.parser.nextStates(this.state);
    if (nextStates.length > 4 << 1 || this.stack.length >= 120) {
      let best = [];
      for (let i2 = 0, s;i2 < nextStates.length; i2 += 2) {
        if ((s = nextStates[i2 + 1]) != this.state && this.p.parser.hasAction(s, next))
          best.push(nextStates[i2], s);
      }
      if (this.stack.length < 120)
        for (let i2 = 0;best.length < 4 << 1 && i2 < nextStates.length; i2 += 2) {
          let s = nextStates[i2 + 1];
          if (!best.some((v, i3) => i3 & 1 && v == s))
            best.push(nextStates[i2], s);
        }
      nextStates = best;
    }
    let result = [];
    for (let i2 = 0;i2 < nextStates.length && result.length < 4; i2 += 2) {
      let s = nextStates[i2 + 1];
      if (s == this.state)
        continue;
      let stack = this.split();
      stack.pushState(s, this.pos);
      stack.storeNode(0, stack.pos, stack.pos, 4, true);
      stack.shiftContext(nextStates[i2], this.pos);
      stack.reducePos = this.pos;
      stack.score -= 200;
      result.push(stack);
    }
    return result;
  }
  forceReduce() {
    let { parser } = this.p;
    let reduce = parser.stateSlot(this.state, 5);
    if ((reduce & 65536) == 0)
      return false;
    if (!parser.validAction(this.state, reduce)) {
      let depth = reduce >> 19, term = reduce & 65535;
      let target = this.stack.length - depth * 3;
      if (target < 0 || parser.getGoto(this.stack[target], term, false) < 0) {
        let backup = this.findForcedReduction();
        if (backup == null)
          return false;
        reduce = backup;
      }
      this.storeNode(0, this.pos, this.pos, 4, true);
      this.score -= 100;
    }
    this.reducePos = this.pos;
    this.reduce(reduce);
    return true;
  }
  findForcedReduction() {
    let { parser } = this.p, seen = [];
    let explore = (state, depth) => {
      if (seen.includes(state))
        return;
      seen.push(state);
      return parser.allActions(state, (action) => {
        if (action & (262144 | 131072))
          ;
        else if (action & 65536) {
          let rDepth = (action >> 19) - depth;
          if (rDepth > 1) {
            let term = action & 65535, target = this.stack.length - rDepth * 3;
            if (target >= 0 && parser.getGoto(this.stack[target], term, false) >= 0)
              return rDepth << 19 | 65536 | term;
          }
        } else {
          let found = explore(action, depth + 1);
          if (found != null)
            return found;
        }
      });
    };
    return explore(this.state, 0);
  }
  forceAll() {
    while (!this.p.parser.stateFlag(this.state, 2)) {
      if (!this.forceReduce()) {
        this.storeNode(0, this.pos, this.pos, 4, true);
        break;
      }
    }
    return this;
  }
  get deadEnd() {
    if (this.stack.length != 3)
      return false;
    let { parser } = this.p;
    return parser.data[parser.stateSlot(this.state, 1)] == 65535 && !parser.stateSlot(this.state, 4);
  }
  restart() {
    this.storeNode(0, this.pos, this.pos, 4, true);
    this.state = this.stack[0];
    this.stack.length = 0;
  }
  sameState(other) {
    if (this.state != other.state || this.stack.length != other.stack.length)
      return false;
    for (let i2 = 0;i2 < this.stack.length; i2 += 3)
      if (this.stack[i2] != other.stack[i2])
        return false;
    return true;
  }
  get parser() {
    return this.p.parser;
  }
  dialectEnabled(dialectID) {
    return this.p.parser.dialect.flags[dialectID];
  }
  shiftContext(term, start) {
    if (this.curContext)
      this.updateContext(this.curContext.tracker.shift(this.curContext.context, term, this, this.p.stream.reset(start)));
  }
  reduceContext(term, start) {
    if (this.curContext)
      this.updateContext(this.curContext.tracker.reduce(this.curContext.context, term, this, this.p.stream.reset(start)));
  }
  emitContext() {
    let last = this.buffer.length - 1;
    if (last < 0 || this.buffer[last] != -3)
      this.buffer.push(this.curContext.hash, this.pos, this.pos, -3);
  }
  emitLookAhead() {
    let last = this.buffer.length - 1;
    if (last < 0 || this.buffer[last] != -4)
      this.buffer.push(this.lookAhead, this.pos, this.pos, -4);
  }
  updateContext(context) {
    if (context != this.curContext.context) {
      let newCx = new StackContext(this.curContext.tracker, context);
      if (newCx.hash != this.curContext.hash)
        this.emitContext();
      this.curContext = newCx;
    }
  }
  setLookAhead(lookAhead) {
    if (lookAhead <= this.lookAhead)
      return false;
    this.emitLookAhead();
    this.lookAhead = lookAhead;
    return true;
  }
  close() {
    if (this.curContext && this.curContext.tracker.strict)
      this.emitContext();
    if (this.lookAhead > 0)
      this.emitLookAhead();
  }
}

class StackContext {
  constructor(tracker, context) {
    this.tracker = tracker;
    this.context = context;
    this.hash = tracker.strict ? tracker.hash(context) : 0;
  }
}

class SimulatedStack {
  constructor(start) {
    this.start = start;
    this.state = start.state;
    this.stack = start.stack;
    this.base = this.stack.length;
  }
  reduce(action) {
    let term = action & 65535, depth = action >> 19;
    if (depth == 0) {
      if (this.stack == this.start.stack)
        this.stack = this.stack.slice();
      this.stack.push(this.state, 0, 0);
      this.base += 3;
    } else {
      this.base -= (depth - 1) * 3;
    }
    let goto = this.start.p.parser.getGoto(this.stack[this.base - 3], term, true);
    this.state = goto;
  }
}

class StackBufferCursor {
  constructor(stack, pos, index) {
    this.stack = stack;
    this.pos = pos;
    this.index = index;
    this.buffer = stack.buffer;
    if (this.index == 0)
      this.maybeNext();
  }
  static create(stack, pos = stack.bufferBase + stack.buffer.length) {
    return new StackBufferCursor(stack, pos, pos - stack.bufferBase);
  }
  maybeNext() {
    let next = this.stack.parent;
    if (next != null) {
      this.index = this.stack.bufferBase - next.bufferBase;
      this.stack = next;
      this.buffer = next.buffer;
    }
  }
  get id() {
    return this.buffer[this.index - 4];
  }
  get start() {
    return this.buffer[this.index - 3];
  }
  get end() {
    return this.buffer[this.index - 2];
  }
  get size() {
    return this.buffer[this.index - 1];
  }
  next() {
    this.index -= 4;
    this.pos -= 4;
    if (this.index == 0)
      this.maybeNext();
  }
  fork() {
    return new StackBufferCursor(this.stack, this.pos, this.index);
  }
}
function decodeArray(input, Type = Uint16Array) {
  if (typeof input != "string")
    return input;
  let array = null;
  for (let pos = 0, out = 0;pos < input.length; ) {
    let value = 0;
    for (;; ) {
      let next = input.charCodeAt(pos++), stop = false;
      if (next == 126) {
        value = 65535;
        break;
      }
      if (next >= 92)
        next--;
      if (next >= 34)
        next--;
      let digit = next - 32;
      if (digit >= 46) {
        digit -= 46;
        stop = true;
      }
      value += digit;
      if (stop)
        break;
      value *= 46;
    }
    if (array)
      array[out++] = value;
    else
      array = new Type(value);
  }
  return array;
}

class CachedToken {
  constructor() {
    this.start = -1;
    this.value = -1;
    this.end = -1;
    this.extended = -1;
    this.lookAhead = 0;
    this.mask = 0;
    this.context = 0;
  }
}
var nullToken = new CachedToken;

class InputStream {
  constructor(input, ranges) {
    this.input = input;
    this.ranges = ranges;
    this.chunk = "";
    this.chunkOff = 0;
    this.chunk2 = "";
    this.chunk2Pos = 0;
    this.next = -1;
    this.token = nullToken;
    this.rangeIndex = 0;
    this.pos = this.chunkPos = ranges[0].from;
    this.range = ranges[0];
    this.end = ranges[ranges.length - 1].to;
    this.readNext();
  }
  resolveOffset(offset, assoc) {
    let range = this.range, index = this.rangeIndex;
    let pos = this.pos + offset;
    while (pos < range.from) {
      if (!index)
        return null;
      let next = this.ranges[--index];
      pos -= range.from - next.to;
      range = next;
    }
    while (assoc < 0 ? pos > range.to : pos >= range.to) {
      if (index == this.ranges.length - 1)
        return null;
      let next = this.ranges[++index];
      pos += next.from - range.to;
      range = next;
    }
    return pos;
  }
  clipPos(pos) {
    if (pos >= this.range.from && pos < this.range.to)
      return pos;
    for (let range of this.ranges)
      if (range.to > pos)
        return Math.max(pos, range.from);
    return this.end;
  }
  peek(offset) {
    let idx = this.chunkOff + offset, pos, result;
    if (idx >= 0 && idx < this.chunk.length) {
      pos = this.pos + offset;
      result = this.chunk.charCodeAt(idx);
    } else {
      let resolved = this.resolveOffset(offset, 1);
      if (resolved == null)
        return -1;
      pos = resolved;
      if (pos >= this.chunk2Pos && pos < this.chunk2Pos + this.chunk2.length) {
        result = this.chunk2.charCodeAt(pos - this.chunk2Pos);
      } else {
        let i2 = this.rangeIndex, range = this.range;
        while (range.to <= pos)
          range = this.ranges[++i2];
        this.chunk2 = this.input.chunk(this.chunk2Pos = pos);
        if (pos + this.chunk2.length > range.to)
          this.chunk2 = this.chunk2.slice(0, range.to - pos);
        result = this.chunk2.charCodeAt(0);
      }
    }
    if (pos >= this.token.lookAhead)
      this.token.lookAhead = pos + 1;
    return result;
  }
  acceptToken(token, endOffset = 0) {
    let end = endOffset ? this.resolveOffset(endOffset, -1) : this.pos;
    if (end == null || end < this.token.start)
      throw new RangeError("Token end out of bounds");
    this.token.value = token;
    this.token.end = end;
  }
  acceptTokenTo(token, endPos) {
    this.token.value = token;
    this.token.end = endPos;
  }
  getChunk() {
    if (this.pos >= this.chunk2Pos && this.pos < this.chunk2Pos + this.chunk2.length) {
      let { chunk, chunkPos } = this;
      this.chunk = this.chunk2;
      this.chunkPos = this.chunk2Pos;
      this.chunk2 = chunk;
      this.chunk2Pos = chunkPos;
      this.chunkOff = this.pos - this.chunkPos;
    } else {
      this.chunk2 = this.chunk;
      this.chunk2Pos = this.chunkPos;
      let nextChunk = this.input.chunk(this.pos);
      let end = this.pos + nextChunk.length;
      this.chunk = end > this.range.to ? nextChunk.slice(0, this.range.to - this.pos) : nextChunk;
      this.chunkPos = this.pos;
      this.chunkOff = 0;
    }
  }
  readNext() {
    if (this.chunkOff >= this.chunk.length) {
      this.getChunk();
      if (this.chunkOff == this.chunk.length)
        return this.next = -1;
    }
    return this.next = this.chunk.charCodeAt(this.chunkOff);
  }
  advance(n = 1) {
    this.chunkOff += n;
    while (this.pos + n >= this.range.to) {
      if (this.rangeIndex == this.ranges.length - 1)
        return this.setDone();
      n -= this.range.to - this.pos;
      this.range = this.ranges[++this.rangeIndex];
      this.pos = this.range.from;
    }
    this.pos += n;
    if (this.pos >= this.token.lookAhead)
      this.token.lookAhead = this.pos + 1;
    return this.readNext();
  }
  setDone() {
    this.pos = this.chunkPos = this.end;
    this.range = this.ranges[this.rangeIndex = this.ranges.length - 1];
    this.chunk = "";
    return this.next = -1;
  }
  reset(pos, token) {
    if (token) {
      this.token = token;
      token.start = pos;
      token.lookAhead = pos + 1;
      token.value = token.extended = -1;
    } else {
      this.token = nullToken;
    }
    if (this.pos != pos) {
      this.pos = pos;
      if (pos == this.end) {
        this.setDone();
        return this;
      }
      while (pos < this.range.from)
        this.range = this.ranges[--this.rangeIndex];
      while (pos >= this.range.to)
        this.range = this.ranges[++this.rangeIndex];
      if (pos >= this.chunkPos && pos < this.chunkPos + this.chunk.length) {
        this.chunkOff = pos - this.chunkPos;
      } else {
        this.chunk = "";
        this.chunkOff = 0;
      }
      this.readNext();
    }
    return this;
  }
  read(from, to) {
    if (from >= this.chunkPos && to <= this.chunkPos + this.chunk.length)
      return this.chunk.slice(from - this.chunkPos, to - this.chunkPos);
    if (from >= this.chunk2Pos && to <= this.chunk2Pos + this.chunk2.length)
      return this.chunk2.slice(from - this.chunk2Pos, to - this.chunk2Pos);
    if (from >= this.range.from && to <= this.range.to)
      return this.input.read(from, to);
    let result = "";
    for (let r of this.ranges) {
      if (r.from >= to)
        break;
      if (r.to > from)
        result += this.input.read(Math.max(r.from, from), Math.min(r.to, to));
    }
    return result;
  }
}

class TokenGroup {
  constructor(data, id) {
    this.data = data;
    this.id = id;
  }
  token(input, stack) {
    let { parser } = stack.p;
    readToken(this.data, input, stack, this.id, parser.data, parser.tokenPrecTable);
  }
}
TokenGroup.prototype.contextual = TokenGroup.prototype.fallback = TokenGroup.prototype.extend = false;

class LocalTokenGroup {
  constructor(data, precTable, elseToken) {
    this.precTable = precTable;
    this.elseToken = elseToken;
    this.data = typeof data == "string" ? decodeArray(data) : data;
  }
  token(input, stack) {
    let start = input.pos, skipped = 0;
    for (;; ) {
      let atEof = input.next < 0, nextPos = input.resolveOffset(1, 1);
      readToken(this.data, input, stack, 0, this.data, this.precTable);
      if (input.token.value > -1)
        break;
      if (this.elseToken == null)
        return;
      if (!atEof)
        skipped++;
      if (nextPos == null)
        break;
      input.reset(nextPos, input.token);
    }
    if (skipped) {
      input.reset(start, input.token);
      input.acceptToken(this.elseToken, skipped);
    }
  }
}
LocalTokenGroup.prototype.contextual = TokenGroup.prototype.fallback = TokenGroup.prototype.extend = false;

class ExternalTokenizer {
  constructor(token, options = {}) {
    this.token = token;
    this.contextual = !!options.contextual;
    this.fallback = !!options.fallback;
    this.extend = !!options.extend;
  }
}
function readToken(data, input, stack, group, precTable, precOffset) {
  let state = 0, groupMask = 1 << group, { dialect } = stack.p.parser;
  scan:
    for (;; ) {
      if ((groupMask & data[state]) == 0)
        break;
      let accEnd = data[state + 1];
      for (let i2 = state + 3;i2 < accEnd; i2 += 2)
        if ((data[i2 + 1] & groupMask) > 0) {
          let term = data[i2];
          if (dialect.allows(term) && (input.token.value == -1 || input.token.value == term || overrides(term, input.token.value, precTable, precOffset))) {
            input.acceptToken(term);
            break;
          }
        }
      let next = input.next, low = 0, high = data[state + 2];
      if (input.next < 0 && high > low && data[accEnd + high * 3 - 3] == 65535) {
        state = data[accEnd + high * 3 - 1];
        continue scan;
      }
      for (;low < high; ) {
        let mid = low + high >> 1;
        let index = accEnd + mid + (mid << 1);
        let from = data[index], to = data[index + 1] || 65536;
        if (next < from)
          high = mid;
        else if (next >= to)
          low = mid + 1;
        else {
          state = data[index + 2];
          input.advance();
          continue scan;
        }
      }
      break;
    }
}
function findOffset(data, start, term) {
  for (let i2 = start, next;(next = data[i2]) != 65535; i2++)
    if (next == term)
      return i2 - start;
  return -1;
}
function overrides(token, prev, tableData, tableOffset) {
  let iPrev = findOffset(tableData, tableOffset, prev);
  return iPrev < 0 || findOffset(tableData, tableOffset, token) < iPrev;
}
var verbose = typeof process != "undefined" && process.env && /\bparse\b/.test(process.env.LOG);
var stackIDs = null;
function cutAt(tree, pos, side) {
  let cursor = tree.cursor(IterMode.IncludeAnonymous);
  cursor.moveTo(pos);
  for (;; ) {
    if (!(side < 0 ? cursor.childBefore(pos) : cursor.childAfter(pos)))
      for (;; ) {
        if ((side < 0 ? cursor.to < pos : cursor.from > pos) && !cursor.type.isError)
          return side < 0 ? Math.max(0, Math.min(cursor.to - 1, pos - 25)) : Math.min(tree.length, Math.max(cursor.from + 1, pos + 25));
        if (side < 0 ? cursor.prevSibling() : cursor.nextSibling())
          break;
        if (!cursor.parent())
          return side < 0 ? 0 : tree.length;
      }
  }
}

class FragmentCursor2 {
  constructor(fragments, nodeSet) {
    this.fragments = fragments;
    this.nodeSet = nodeSet;
    this.i = 0;
    this.fragment = null;
    this.safeFrom = -1;
    this.safeTo = -1;
    this.trees = [];
    this.start = [];
    this.index = [];
    this.nextFragment();
  }
  nextFragment() {
    let fr = this.fragment = this.i == this.fragments.length ? null : this.fragments[this.i++];
    if (fr) {
      this.safeFrom = fr.openStart ? cutAt(fr.tree, fr.from + fr.offset, 1) - fr.offset : fr.from;
      this.safeTo = fr.openEnd ? cutAt(fr.tree, fr.to + fr.offset, -1) - fr.offset : fr.to;
      while (this.trees.length) {
        this.trees.pop();
        this.start.pop();
        this.index.pop();
      }
      this.trees.push(fr.tree);
      this.start.push(-fr.offset);
      this.index.push(0);
      this.nextStart = this.safeFrom;
    } else {
      this.nextStart = 1e9;
    }
  }
  nodeAt(pos) {
    if (pos < this.nextStart)
      return null;
    while (this.fragment && this.safeTo <= pos)
      this.nextFragment();
    if (!this.fragment)
      return null;
    for (;; ) {
      let last = this.trees.length - 1;
      if (last < 0) {
        this.nextFragment();
        return null;
      }
      let top2 = this.trees[last], index = this.index[last];
      if (index == top2.children.length) {
        this.trees.pop();
        this.start.pop();
        this.index.pop();
        continue;
      }
      let next = top2.children[index];
      let start = this.start[last] + top2.positions[index];
      if (start > pos) {
        this.nextStart = start;
        return null;
      }
      if (next instanceof Tree) {
        if (start == pos) {
          if (start < this.safeFrom)
            return null;
          let end = start + next.length;
          if (end <= this.safeTo) {
            let lookAhead = next.prop(NodeProp.lookAhead);
            if (!lookAhead || end + lookAhead < this.fragment.to)
              return next;
          }
        }
        this.index[last]++;
        if (start + next.length >= Math.max(this.safeFrom, pos)) {
          this.trees.push(next);
          this.start.push(start);
          this.index.push(0);
        }
      } else {
        this.index[last]++;
        this.nextStart = start + next.length;
      }
    }
  }
}

class TokenCache {
  constructor(parser, stream) {
    this.stream = stream;
    this.tokens = [];
    this.mainToken = null;
    this.actions = [];
    this.tokens = parser.tokenizers.map((_) => new CachedToken);
  }
  getActions(stack) {
    let actionIndex = 0;
    let main = null;
    let { parser } = stack.p, { tokenizers } = parser;
    let mask = parser.stateSlot(stack.state, 3);
    let context = stack.curContext ? stack.curContext.hash : 0;
    let lookAhead = 0;
    for (let i2 = 0;i2 < tokenizers.length; i2++) {
      if ((1 << i2 & mask) == 0)
        continue;
      let tokenizer = tokenizers[i2], token = this.tokens[i2];
      if (main && !tokenizer.fallback)
        continue;
      if (tokenizer.contextual || token.start != stack.pos || token.mask != mask || token.context != context) {
        this.updateCachedToken(token, tokenizer, stack);
        token.mask = mask;
        token.context = context;
      }
      if (token.lookAhead > token.end + 25)
        lookAhead = Math.max(token.lookAhead, lookAhead);
      if (token.value != 0) {
        let startIndex = actionIndex;
        if (token.extended > -1)
          actionIndex = this.addActions(stack, token.extended, token.end, actionIndex);
        actionIndex = this.addActions(stack, token.value, token.end, actionIndex);
        if (!tokenizer.extend) {
          main = token;
          if (actionIndex > startIndex)
            break;
        }
      }
    }
    while (this.actions.length > actionIndex)
      this.actions.pop();
    if (lookAhead)
      stack.setLookAhead(lookAhead);
    if (!main && stack.pos == this.stream.end) {
      main = new CachedToken;
      main.value = stack.p.parser.eofTerm;
      main.start = main.end = stack.pos;
      actionIndex = this.addActions(stack, main.value, main.end, actionIndex);
    }
    this.mainToken = main;
    return this.actions;
  }
  getMainToken(stack) {
    if (this.mainToken)
      return this.mainToken;
    let main = new CachedToken, { pos, p } = stack;
    main.start = pos;
    main.end = Math.min(pos + 1, p.stream.end);
    main.value = pos == p.stream.end ? p.parser.eofTerm : 0;
    return main;
  }
  updateCachedToken(token, tokenizer, stack) {
    let start = this.stream.clipPos(stack.pos);
    tokenizer.token(this.stream.reset(start, token), stack);
    if (token.value > -1) {
      let { parser } = stack.p;
      for (let i2 = 0;i2 < parser.specialized.length; i2++)
        if (parser.specialized[i2] == token.value) {
          let result = parser.specializers[i2](this.stream.read(token.start, token.end), stack);
          if (result >= 0 && stack.p.parser.dialect.allows(result >> 1)) {
            if ((result & 1) == 0)
              token.value = result >> 1;
            else
              token.extended = result >> 1;
            break;
          }
        }
    } else {
      token.value = 0;
      token.end = this.stream.clipPos(start + 1);
    }
  }
  putAction(action, token, end, index) {
    for (let i2 = 0;i2 < index; i2 += 3)
      if (this.actions[i2] == action)
        return index;
    this.actions[index++] = action;
    this.actions[index++] = token;
    this.actions[index++] = end;
    return index;
  }
  addActions(stack, token, end, index) {
    let { state } = stack, { parser } = stack.p, { data } = parser;
    for (let set = 0;set < 2; set++) {
      for (let i2 = parser.stateSlot(state, set ? 2 : 1);; i2 += 3) {
        if (data[i2] == 65535) {
          if (data[i2 + 1] == 1) {
            i2 = pair(data, i2 + 2);
          } else {
            if (index == 0 && data[i2 + 1] == 2)
              index = this.putAction(pair(data, i2 + 2), token, end, index);
            break;
          }
        }
        if (data[i2] == token)
          index = this.putAction(pair(data, i2 + 1), token, end, index);
      }
    }
    return index;
  }
}

class Parse {
  constructor(parser, input, fragments, ranges) {
    this.parser = parser;
    this.input = input;
    this.ranges = ranges;
    this.recovering = 0;
    this.nextStackID = 9812;
    this.minStackPos = 0;
    this.reused = [];
    this.stoppedAt = null;
    this.lastBigReductionStart = -1;
    this.lastBigReductionSize = 0;
    this.bigReductionCount = 0;
    this.stream = new InputStream(input, ranges);
    this.tokens = new TokenCache(parser, this.stream);
    this.topTerm = parser.top[1];
    let { from } = ranges[0];
    this.stacks = [Stack.start(this, parser.top[0], from)];
    this.fragments = fragments.length && this.stream.end - from > parser.bufferLength * 4 ? new FragmentCursor2(fragments, parser.nodeSet) : null;
  }
  get parsedPos() {
    return this.minStackPos;
  }
  advance() {
    let stacks = this.stacks, pos = this.minStackPos;
    let newStacks = this.stacks = [];
    let stopped, stoppedTokens;
    if (this.bigReductionCount > 300 && stacks.length == 1) {
      let [s] = stacks;
      while (s.forceReduce() && s.stack.length && s.stack[s.stack.length - 2] >= this.lastBigReductionStart) {}
      this.bigReductionCount = this.lastBigReductionSize = 0;
    }
    for (let i2 = 0;i2 < stacks.length; i2++) {
      let stack = stacks[i2];
      for (;; ) {
        this.tokens.mainToken = null;
        if (stack.pos > pos) {
          newStacks.push(stack);
        } else if (this.advanceStack(stack, newStacks, stacks)) {
          continue;
        } else {
          if (!stopped) {
            stopped = [];
            stoppedTokens = [];
          }
          stopped.push(stack);
          let tok = this.tokens.getMainToken(stack);
          stoppedTokens.push(tok.value, tok.end);
        }
        break;
      }
    }
    if (!newStacks.length) {
      let finished = stopped && findFinished(stopped);
      if (finished) {
        if (verbose)
          console.log("Finish with " + this.stackID(finished));
        return this.stackToTree(finished);
      }
      if (this.parser.strict) {
        if (verbose && stopped)
          console.log("Stuck with token " + (this.tokens.mainToken ? this.parser.getName(this.tokens.mainToken.value) : "none"));
        throw new SyntaxError("No parse at " + pos);
      }
      if (!this.recovering)
        this.recovering = 5;
    }
    if (this.recovering && stopped) {
      let finished = this.stoppedAt != null && stopped[0].pos > this.stoppedAt ? stopped[0] : this.runRecovery(stopped, stoppedTokens, newStacks);
      if (finished) {
        if (verbose)
          console.log("Force-finish " + this.stackID(finished));
        return this.stackToTree(finished.forceAll());
      }
    }
    if (this.recovering) {
      let maxRemaining = this.recovering == 1 ? 1 : this.recovering * 3;
      if (newStacks.length > maxRemaining) {
        newStacks.sort((a, b) => b.score - a.score);
        while (newStacks.length > maxRemaining)
          newStacks.pop();
      }
      if (newStacks.some((s) => s.reducePos > pos))
        this.recovering--;
    } else if (newStacks.length > 1) {
      outer:
        for (let i2 = 0;i2 < newStacks.length - 1; i2++) {
          let stack = newStacks[i2];
          for (let j = i2 + 1;j < newStacks.length; j++) {
            let other = newStacks[j];
            if (stack.sameState(other) || stack.buffer.length > 500 && other.buffer.length > 500) {
              if ((stack.score - other.score || stack.buffer.length - other.buffer.length) > 0) {
                newStacks.splice(j--, 1);
              } else {
                newStacks.splice(i2--, 1);
                continue outer;
              }
            }
          }
        }
      if (newStacks.length > 12) {
        newStacks.sort((a, b) => b.score - a.score);
        newStacks.splice(12, newStacks.length - 12);
      }
    }
    this.minStackPos = newStacks[0].pos;
    for (let i2 = 1;i2 < newStacks.length; i2++)
      if (newStacks[i2].pos < this.minStackPos)
        this.minStackPos = newStacks[i2].pos;
    return null;
  }
  stopAt(pos) {
    if (this.stoppedAt != null && this.stoppedAt < pos)
      throw new RangeError("Can't move stoppedAt forward");
    this.stoppedAt = pos;
  }
  advanceStack(stack, stacks, split) {
    let start = stack.pos, { parser } = this;
    let base2 = verbose ? this.stackID(stack) + " -> " : "";
    if (this.stoppedAt != null && start > this.stoppedAt)
      return stack.forceReduce() ? stack : null;
    if (this.fragments) {
      let strictCx = stack.curContext && stack.curContext.tracker.strict, cxHash = strictCx ? stack.curContext.hash : 0;
      for (let cached = this.fragments.nodeAt(start);cached; ) {
        let match = this.parser.nodeSet.types[cached.type.id] == cached.type ? parser.getGoto(stack.state, cached.type.id) : -1;
        if (match > -1 && cached.length && (!strictCx || (cached.prop(NodeProp.contextHash) || 0) == cxHash)) {
          stack.useNode(cached, match);
          if (verbose)
            console.log(base2 + this.stackID(stack) + ` (via reuse of ${parser.getName(cached.type.id)})`);
          return true;
        }
        if (!(cached instanceof Tree) || cached.children.length == 0 || cached.positions[0] > 0)
          break;
        let inner = cached.children[0];
        if (inner instanceof Tree && cached.positions[0] == 0)
          cached = inner;
        else
          break;
      }
    }
    let defaultReduce = parser.stateSlot(stack.state, 4);
    if (defaultReduce > 0) {
      stack.reduce(defaultReduce);
      if (verbose)
        console.log(base2 + this.stackID(stack) + ` (via always-reduce ${parser.getName(defaultReduce & 65535)})`);
      return true;
    }
    if (stack.stack.length >= 8400) {
      while (stack.stack.length > 6000 && stack.forceReduce()) {}
    }
    let actions = this.tokens.getActions(stack);
    for (let i2 = 0;i2 < actions.length; ) {
      let action = actions[i2++], term = actions[i2++], end = actions[i2++];
      let last = i2 == actions.length || !split;
      let localStack = last ? stack : stack.split();
      let main = this.tokens.mainToken;
      localStack.apply(action, term, main ? main.start : localStack.pos, end);
      if (verbose)
        console.log(base2 + this.stackID(localStack) + ` (via ${(action & 65536) == 0 ? "shift" : `reduce of ${parser.getName(action & 65535)}`} for ${parser.getName(term)} @ ${start}${localStack == stack ? "" : ", split"})`);
      if (last)
        return true;
      else if (localStack.pos > start)
        stacks.push(localStack);
      else
        split.push(localStack);
    }
    return false;
  }
  advanceFully(stack, newStacks) {
    let pos = stack.pos;
    for (;; ) {
      if (!this.advanceStack(stack, null, null))
        return false;
      if (stack.pos > pos) {
        pushStackDedup(stack, newStacks);
        return true;
      }
    }
  }
  runRecovery(stacks, tokens, newStacks) {
    let finished = null, restarted = false;
    for (let i2 = 0;i2 < stacks.length; i2++) {
      let stack = stacks[i2], token = tokens[i2 << 1], tokenEnd = tokens[(i2 << 1) + 1];
      let base2 = verbose ? this.stackID(stack) + " -> " : "";
      if (stack.deadEnd) {
        if (restarted)
          continue;
        restarted = true;
        stack.restart();
        if (verbose)
          console.log(base2 + this.stackID(stack) + " (restarted)");
        let done = this.advanceFully(stack, newStacks);
        if (done)
          continue;
      }
      let force = stack.split(), forceBase = base2;
      for (let j = 0;j < 10 && force.forceReduce(); j++) {
        if (verbose)
          console.log(forceBase + this.stackID(force) + " (via force-reduce)");
        let done = this.advanceFully(force, newStacks);
        if (done)
          break;
        if (verbose)
          forceBase = this.stackID(force) + " -> ";
      }
      for (let insert2 of stack.recoverByInsert(token)) {
        if (verbose)
          console.log(base2 + this.stackID(insert2) + " (via recover-insert)");
        this.advanceFully(insert2, newStacks);
      }
      if (this.stream.end > stack.pos) {
        if (tokenEnd == stack.pos) {
          tokenEnd++;
          token = 0;
        }
        stack.recoverByDelete(token, tokenEnd);
        if (verbose)
          console.log(base2 + this.stackID(stack) + ` (via recover-delete ${this.parser.getName(token)})`);
        pushStackDedup(stack, newStacks);
      } else if (!finished || finished.score < stack.score) {
        finished = stack;
      }
    }
    return finished;
  }
  stackToTree(stack) {
    stack.close();
    return Tree.build({
      buffer: StackBufferCursor.create(stack),
      nodeSet: this.parser.nodeSet,
      topID: this.topTerm,
      maxBufferLength: this.parser.bufferLength,
      reused: this.reused,
      start: this.ranges[0].from,
      length: stack.pos - this.ranges[0].from,
      minRepeatType: this.parser.minRepeatTerm
    });
  }
  stackID(stack) {
    let id = (stackIDs || (stackIDs = new WeakMap)).get(stack);
    if (!id)
      stackIDs.set(stack, id = String.fromCodePoint(this.nextStackID++));
    return id + stack;
  }
}
function pushStackDedup(stack, newStacks) {
  for (let i2 = 0;i2 < newStacks.length; i2++) {
    let other = newStacks[i2];
    if (other.pos == stack.pos && other.sameState(stack)) {
      if (newStacks[i2].score < stack.score)
        newStacks[i2] = stack;
      return;
    }
  }
  newStacks.push(stack);
}

class Dialect {
  constructor(source, flags, disabled) {
    this.source = source;
    this.flags = flags;
    this.disabled = disabled;
  }
  allows(term) {
    return !this.disabled || this.disabled[term] == 0;
  }
}
var id = (x) => x;

class ContextTracker {
  constructor(spec) {
    this.start = spec.start;
    this.shift = spec.shift || id;
    this.reduce = spec.reduce || id;
    this.reuse = spec.reuse || id;
    this.hash = spec.hash || (() => 0);
    this.strict = spec.strict !== false;
  }
}

class LRParser extends Parser {
  constructor(spec) {
    super();
    this.wrappers = [];
    if (spec.version != 14)
      throw new RangeError(`Parser version (${spec.version}) doesn't match runtime version (${14})`);
    let nodeNames = spec.nodeNames.split(" ");
    this.minRepeatTerm = nodeNames.length;
    for (let i2 = 0;i2 < spec.repeatNodeCount; i2++)
      nodeNames.push("");
    let topTerms = Object.keys(spec.topRules).map((r) => spec.topRules[r][1]);
    let nodeProps = [];
    for (let i2 = 0;i2 < nodeNames.length; i2++)
      nodeProps.push([]);
    function setProp(nodeID, prop, value) {
      nodeProps[nodeID].push([prop, prop.deserialize(String(value))]);
    }
    if (spec.nodeProps)
      for (let propSpec of spec.nodeProps) {
        let prop = propSpec[0];
        if (typeof prop == "string")
          prop = NodeProp[prop];
        for (let i2 = 1;i2 < propSpec.length; ) {
          let next = propSpec[i2++];
          if (next >= 0) {
            setProp(next, prop, propSpec[i2++]);
          } else {
            let value = propSpec[i2 + -next];
            for (let j = -next;j > 0; j--)
              setProp(propSpec[i2++], prop, value);
            i2++;
          }
        }
      }
    this.nodeSet = new NodeSet(nodeNames.map((name2, i2) => NodeType.define({
      name: i2 >= this.minRepeatTerm ? undefined : name2,
      id: i2,
      props: nodeProps[i2],
      top: topTerms.indexOf(i2) > -1,
      error: i2 == 0,
      skipped: spec.skippedNodes && spec.skippedNodes.indexOf(i2) > -1
    })));
    if (spec.propSources)
      this.nodeSet = this.nodeSet.extend(...spec.propSources);
    this.strict = false;
    this.bufferLength = DefaultBufferLength;
    let tokenArray = decodeArray(spec.tokenData);
    this.context = spec.context;
    this.specializerSpecs = spec.specialized || [];
    this.specialized = new Uint16Array(this.specializerSpecs.length);
    for (let i2 = 0;i2 < this.specializerSpecs.length; i2++)
      this.specialized[i2] = this.specializerSpecs[i2].term;
    this.specializers = this.specializerSpecs.map(getSpecializer);
    this.states = decodeArray(spec.states, Uint32Array);
    this.data = decodeArray(spec.stateData);
    this.goto = decodeArray(spec.goto);
    this.maxTerm = spec.maxTerm;
    this.tokenizers = spec.tokenizers.map((value) => typeof value == "number" ? new TokenGroup(tokenArray, value) : value);
    this.topRules = spec.topRules;
    this.dialects = spec.dialects || {};
    this.dynamicPrecedences = spec.dynamicPrecedences || null;
    this.tokenPrecTable = spec.tokenPrec;
    this.termNames = spec.termNames || null;
    this.maxNode = this.nodeSet.types.length - 1;
    this.dialect = this.parseDialect();
    this.top = this.topRules[Object.keys(this.topRules)[0]];
  }
  createParse(input, fragments, ranges) {
    let parse = new Parse(this, input, fragments, ranges);
    for (let w of this.wrappers)
      parse = w(parse, input, fragments, ranges);
    return parse;
  }
  getGoto(state, term, loose = false) {
    let table = this.goto;
    if (term >= table[0])
      return -1;
    for (let pos = table[term + 1];; ) {
      let groupTag = table[pos++], last = groupTag & 1;
      let target = table[pos++];
      if (last && loose)
        return target;
      for (let end = pos + (groupTag >> 1);pos < end; pos++)
        if (table[pos] == state)
          return target;
      if (last)
        return -1;
    }
  }
  hasAction(state, terminal) {
    let data = this.data;
    for (let set = 0;set < 2; set++) {
      for (let i2 = this.stateSlot(state, set ? 2 : 1), next;; i2 += 3) {
        if ((next = data[i2]) == 65535) {
          if (data[i2 + 1] == 1)
            next = data[i2 = pair(data, i2 + 2)];
          else if (data[i2 + 1] == 2)
            return pair(data, i2 + 2);
          else
            break;
        }
        if (next == terminal || next == 0)
          return pair(data, i2 + 1);
      }
    }
    return 0;
  }
  stateSlot(state, slot) {
    return this.states[state * 6 + slot];
  }
  stateFlag(state, flag) {
    return (this.stateSlot(state, 0) & flag) > 0;
  }
  validAction(state, action) {
    return !!this.allActions(state, (a) => a == action ? true : null);
  }
  allActions(state, action) {
    let deflt = this.stateSlot(state, 4);
    let result = deflt ? action(deflt) : undefined;
    for (let i2 = this.stateSlot(state, 1);result == null; i2 += 3) {
      if (this.data[i2] == 65535) {
        if (this.data[i2 + 1] == 1)
          i2 = pair(this.data, i2 + 2);
        else
          break;
      }
      result = action(pair(this.data, i2 + 1));
    }
    return result;
  }
  nextStates(state) {
    let result = [];
    for (let i2 = this.stateSlot(state, 1);; i2 += 3) {
      if (this.data[i2] == 65535) {
        if (this.data[i2 + 1] == 1)
          i2 = pair(this.data, i2 + 2);
        else
          break;
      }
      if ((this.data[i2 + 2] & 65536 >> 16) == 0) {
        let value = this.data[i2 + 1];
        if (!result.some((v, i3) => i3 & 1 && v == value))
          result.push(this.data[i2], value);
      }
    }
    return result;
  }
  configure(config2) {
    let copy = Object.assign(Object.create(LRParser.prototype), this);
    if (config2.props)
      copy.nodeSet = this.nodeSet.extend(...config2.props);
    if (config2.top) {
      let info = this.topRules[config2.top];
      if (!info)
        throw new RangeError(`Invalid top rule name ${config2.top}`);
      copy.top = info;
    }
    if (config2.tokenizers)
      copy.tokenizers = this.tokenizers.map((t2) => {
        let found = config2.tokenizers.find((r) => r.from == t2);
        return found ? found.to : t2;
      });
    if (config2.specializers) {
      copy.specializers = this.specializers.slice();
      copy.specializerSpecs = this.specializerSpecs.map((s, i2) => {
        let found = config2.specializers.find((r) => r.from == s.external);
        if (!found)
          return s;
        let spec = Object.assign(Object.assign({}, s), { external: found.to });
        copy.specializers[i2] = getSpecializer(spec);
        return spec;
      });
    }
    if (config2.contextTracker)
      copy.context = config2.contextTracker;
    if (config2.dialect)
      copy.dialect = this.parseDialect(config2.dialect);
    if (config2.strict != null)
      copy.strict = config2.strict;
    if (config2.wrap)
      copy.wrappers = copy.wrappers.concat(config2.wrap);
    if (config2.bufferLength != null)
      copy.bufferLength = config2.bufferLength;
    return copy;
  }
  hasWrappers() {
    return this.wrappers.length > 0;
  }
  getName(term) {
    return this.termNames ? this.termNames[term] : String(term <= this.maxNode && this.nodeSet.types[term].name || term);
  }
  get eofTerm() {
    return this.maxNode + 1;
  }
  get topNode() {
    return this.nodeSet.types[this.top[1]];
  }
  dynamicPrecedence(term) {
    let prec2 = this.dynamicPrecedences;
    return prec2 == null ? 0 : prec2[term] || 0;
  }
  parseDialect(dialect) {
    let values = Object.keys(this.dialects), flags = values.map(() => false);
    if (dialect)
      for (let part of dialect.split(" ")) {
        let id2 = values.indexOf(part);
        if (id2 >= 0)
          flags[id2] = true;
      }
    let disabled = null;
    for (let i2 = 0;i2 < values.length; i2++)
      if (!flags[i2]) {
        for (let j = this.dialects[values[i2]], id2;(id2 = this.data[j++]) != 65535; )
          (disabled || (disabled = new Uint8Array(this.maxTerm + 1)))[id2] = 1;
      }
    return new Dialect(dialect, flags, disabled);
  }
  static deserialize(spec) {
    return new LRParser(spec);
  }
}
function pair(data, off) {
  return data[off] | data[off + 1] << 16;
}
function findFinished(stacks) {
  let best = null;
  for (let stack of stacks) {
    let stopped = stack.p.stoppedAt;
    if ((stack.pos == stack.p.stream.end || stopped != null && stack.pos > stopped) && stack.p.parser.stateFlag(stack.state, 2) && (!best || best.score < stack.score))
      best = stack;
  }
  return best;
}
function getSpecializer(spec) {
  if (spec.external) {
    let mask = spec.extend ? 1 : 0;
    return (value, stack) => spec.external(value, stack) << 1 | mask;
  }
  return spec.get;
}

// node_modules/@lezer/javascript/dist/index.js
var noSemi = 316;
var noSemiType = 317;
var incdec = 1;
var incdecPrefix = 2;
var questionDot = 3;
var JSXStartTag = 4;
var insertSemi = 318;
var spaces = 320;
var newline = 321;
var LineComment = 5;
var BlockComment = 6;
var Dialect_jsx = 0;
var space = [
  9,
  10,
  11,
  12,
  13,
  32,
  133,
  160,
  5760,
  8192,
  8193,
  8194,
  8195,
  8196,
  8197,
  8198,
  8199,
  8200,
  8201,
  8202,
  8232,
  8233,
  8239,
  8287,
  12288
];
var braceR = 125;
var semicolon = 59;
var slash = 47;
var star = 42;
var plus = 43;
var minus = 45;
var lt = 60;
var comma = 44;
var question = 63;
var dot = 46;
var bracketL = 91;
var trackNewline = new ContextTracker({
  start: false,
  shift(context, term) {
    return term == LineComment || term == BlockComment || term == spaces ? context : term == newline;
  },
  strict: false
});
var insertSemicolon = new ExternalTokenizer((input, stack) => {
  let { next } = input;
  if (next == braceR || next == -1 || stack.context)
    input.acceptToken(insertSemi);
}, { contextual: true, fallback: true });
var noSemicolon = new ExternalTokenizer((input, stack) => {
  let { next } = input, after;
  if (space.indexOf(next) > -1)
    return;
  if (next == slash && ((after = input.peek(1)) == slash || after == star))
    return;
  if (next != braceR && next != semicolon && next != -1 && !stack.context)
    input.acceptToken(noSemi);
}, { contextual: true });
var noSemicolonType = new ExternalTokenizer((input, stack) => {
  if (input.next == bracketL && !stack.context)
    input.acceptToken(noSemiType);
}, { contextual: true });
var operatorToken = new ExternalTokenizer((input, stack) => {
  let { next } = input;
  if (next == plus || next == minus) {
    input.advance();
    if (next == input.next) {
      input.advance();
      let mayPostfix = !stack.context && stack.canShift(incdec);
      input.acceptToken(mayPostfix ? incdec : incdecPrefix);
    }
  } else if (next == question && input.peek(1) == dot) {
    input.advance();
    input.advance();
    if (input.next < 48 || input.next > 57)
      input.acceptToken(questionDot);
  }
}, { contextual: true });
function identifierChar(ch, start) {
  return ch >= 65 && ch <= 90 || ch >= 97 && ch <= 122 || ch == 95 || ch >= 192 || !start && ch >= 48 && ch <= 57;
}
var jsx = new ExternalTokenizer((input, stack) => {
  if (input.next != lt || !stack.dialectEnabled(Dialect_jsx))
    return;
  input.advance();
  if (input.next == slash)
    return;
  let back = 0;
  while (space.indexOf(input.next) > -1) {
    input.advance();
    back++;
  }
  if (identifierChar(input.next, true)) {
    input.advance();
    back++;
    while (identifierChar(input.next, false)) {
      input.advance();
      back++;
    }
    while (space.indexOf(input.next) > -1) {
      input.advance();
      back++;
    }
    if (input.next == comma)
      return;
    for (let i2 = 0;; i2++) {
      if (i2 == 7) {
        if (!identifierChar(input.next, true))
          return;
        break;
      }
      if (input.next != "extends".charCodeAt(i2))
        break;
      input.advance();
      back++;
    }
  }
  input.acceptToken(JSXStartTag, -back);
});
var jsHighlight = styleTags({
  "get set async static": tags.modifier,
  "for while do if else switch try catch finally return throw break continue default case defer": tags.controlKeyword,
  "in of await yield void typeof delete instanceof as satisfies": tags.operatorKeyword,
  "let var const using function class extends": tags.definitionKeyword,
  "import export from": tags.moduleKeyword,
  "with debugger new": tags.keyword,
  TemplateString: tags.special(tags.string),
  super: tags.atom,
  BooleanLiteral: tags.bool,
  this: tags.self,
  null: tags.null,
  Star: tags.modifier,
  VariableName: tags.variableName,
  "CallExpression/VariableName TaggedTemplateExpression/VariableName": tags.function(tags.variableName),
  VariableDefinition: tags.definition(tags.variableName),
  Label: tags.labelName,
  PropertyName: tags.propertyName,
  PrivatePropertyName: tags.special(tags.propertyName),
  "CallExpression/MemberExpression/PropertyName": tags.function(tags.propertyName),
  "FunctionDeclaration/VariableDefinition": tags.function(tags.definition(tags.variableName)),
  "ClassDeclaration/VariableDefinition": tags.definition(tags.className),
  "NewExpression/VariableName": tags.className,
  PropertyDefinition: tags.definition(tags.propertyName),
  PrivatePropertyDefinition: tags.definition(tags.special(tags.propertyName)),
  UpdateOp: tags.updateOperator,
  "LineComment Hashbang": tags.lineComment,
  BlockComment: tags.blockComment,
  Number: tags.number,
  String: tags.string,
  Escape: tags.escape,
  ArithOp: tags.arithmeticOperator,
  LogicOp: tags.logicOperator,
  BitOp: tags.bitwiseOperator,
  CompareOp: tags.compareOperator,
  RegExp: tags.regexp,
  Equals: tags.definitionOperator,
  Arrow: tags.function(tags.punctuation),
  ": Spread": tags.punctuation,
  "( )": tags.paren,
  "[ ]": tags.squareBracket,
  "{ }": tags.brace,
  "InterpolationStart InterpolationEnd": tags.special(tags.brace),
  ".": tags.derefOperator,
  ", ;": tags.separator,
  "@": tags.meta,
  TypeName: tags.typeName,
  TypeDefinition: tags.definition(tags.typeName),
  "type enum interface implements namespace module declare": tags.definitionKeyword,
  "abstract global Privacy readonly override": tags.modifier,
  "is keyof unique infer asserts": tags.operatorKeyword,
  JSXAttributeValue: tags.attributeValue,
  JSXText: tags.content,
  "JSXStartTag JSXStartCloseTag JSXSelfCloseEndTag JSXEndTag": tags.angleBracket,
  "JSXIdentifier JSXNameSpacedName": tags.tagName,
  "JSXAttribute/JSXIdentifier JSXAttribute/JSXNameSpacedName": tags.attributeName,
  "JSXBuiltin/JSXIdentifier": tags.standard(tags.tagName)
});
var spec_identifier = { __proto__: null, export: 20, as: 25, from: 33, default: 36, async: 41, function: 42, in: 52, out: 55, const: 56, extends: 60, this: 64, true: 72, false: 72, null: 84, void: 88, typeof: 92, super: 108, new: 142, delete: 154, yield: 163, await: 167, class: 172, public: 235, private: 235, protected: 235, readonly: 237, instanceof: 256, satisfies: 259, import: 292, keyof: 349, unique: 353, infer: 359, asserts: 395, is: 397, abstract: 417, implements: 419, type: 421, let: 424, var: 426, using: 429, interface: 435, enum: 439, namespace: 445, module: 447, declare: 451, global: 455, defer: 471, for: 476, of: 485, while: 488, with: 492, do: 496, if: 500, else: 502, switch: 506, case: 512, try: 518, catch: 522, finally: 526, return: 530, throw: 534, break: 538, continue: 542, debugger: 546 };
var spec_word = { __proto__: null, async: 129, get: 131, set: 133, declare: 195, public: 197, private: 197, protected: 197, static: 199, abstract: 201, override: 203, readonly: 209, accessor: 211, new: 401 };
var spec_LessThan = { __proto__: null, "<": 193 };
var parser = LRParser.deserialize({
  version: 14,
  states: "$F|Q%TQlOOO%[QlOOO'_QpOOP(lO`OOO*zQ!0MxO'#CiO+RO#tO'#CjO+aO&jO'#CjO+oO#@ItO'#DaO.QQlO'#DgO.bQlO'#DrO%[QlO'#DzO0fQlO'#ESOOQ!0Lf'#E['#E[O1PQ`O'#EXOOQO'#Ep'#EpOOQO'#Il'#IlO1XQ`O'#GsO1dQ`O'#EoO1iQ`O'#EoO3hQ!0MxO'#JrO6[Q!0MxO'#JsO6uQ`O'#F]O6zQ,UO'#FtOOQ!0Lf'#Ff'#FfO7VO7dO'#FfO9XQMhO'#F|O9`Q`O'#F{OOQ!0Lf'#Js'#JsOOQ!0Lb'#Jr'#JrO9eQ`O'#GwOOQ['#K_'#K_O9pQ`O'#IYO9uQ!0LrO'#IZOOQ['#J`'#J`OOQ['#I_'#I_Q`QlOOQ`QlOOO9}Q!L^O'#DvO:UQlO'#EOO:]QlO'#EQO9kQ`O'#GsO:dQMhO'#CoO:rQ`O'#EnO:}Q`O'#EyO;hQMhO'#FeO;xQ`O'#GsOOQO'#K`'#K`O;}Q`O'#K`O<]Q`O'#G{O<]Q`O'#G|O<]Q`O'#HOO9kQ`O'#HRO=SQ`O'#HUO>kQ`O'#CeO>{Q`O'#HcO?TQ`O'#HiO?TQ`O'#HkO`QlO'#HmO?TQ`O'#HoO?TQ`O'#HrO?YQ`O'#HxO?_Q!0LsO'#IOO%[QlO'#IQO?jQ!0LsO'#ISO?uQ!0LsO'#IUO9uQ!0LrO'#IWO@QQ!0MxO'#CiOASQpO'#DlQOQ`OOO%[QlO'#EQOAjQ`O'#ETO:dQMhO'#EnOAuQ`O'#EnOBQQ!bO'#FeOOQ['#Cg'#CgOOQ!0Lb'#Dq'#DqOOQ!0Lb'#Jv'#JvO%[QlO'#JvOOQO'#Jy'#JyOOQO'#Ih'#IhOCQQpO'#EgOOQ!0Lb'#Ef'#EfOOQ!0Lb'#J}'#J}OC|Q!0MSO'#EgODWQpO'#EWOOQO'#Jx'#JxODlQpO'#JyOEyQpO'#EWODWQpO'#EgPFWO&2DjO'#CbPOOO)CD})CD}OOOO'#I`'#I`OFcO#tO,59UOOQ!0Lh,59U,59UOOOO'#Ia'#IaOFqO&jO,59UOGPQ!L^O'#DcOOOO'#Ic'#IcOGWO#@ItO,59{OOQ!0Lf,59{,59{OGfQlO'#IdOGyQ`O'#JtOIxQ!fO'#JtO+}QlO'#JtOJPQ`O,5:ROJgQ`O'#EpOJtQ`O'#KTOKPQ`O'#KSOKPQ`O'#KSOKXQ`O,5;^OK^Q`O'#KROOQ!0Ln,5:^,5:^OKeQlO,5:^OMcQ!0MxO,5:fONSQ`O,5:nONmQ!0LrO'#KQONtQ`O'#KPO9eQ`O'#KPO! YQ`O'#KPO! bQ`O,5;]O! gQ`O'#KPO!#lQ!fO'#JsOOQ!0Lh'#Ci'#CiO%[QlO'#ESO!$[Q!fO,5:sOOQS'#Jz'#JzOOQO-E<j-E<jO9kQ`O,5=_O!$rQ`O,5=_O!$wQlO,5;ZO!&zQMhO'#EkO!(eQ`O,5;ZO!(jQlO'#DyO!(tQpO,5;dO!(|QpO,5;dO%[QlO,5;dOOQ['#FT'#FTOOQ['#FV'#FVO%[QlO,5;eO%[QlO,5;eO%[QlO,5;eO%[QlO,5;eO%[QlO,5;eO%[QlO,5;eO%[QlO,5;eO%[QlO,5;eO%[QlO,5;eO%[QlO,5;eOOQ['#FZ'#FZO!)[QlO,5;tOOQ!0Lf,5;y,5;yOOQ!0Lf,5;z,5;zOOQ!0Lf,5;|,5;|O%[QlO'#IpO!+_Q!0LrO,5<iO%[QlO,5;eO!&zQMhO,5;eO!+|QMhO,5;eO!-nQMhO'#E^O%[QlO,5;wOOQ!0Lf,5;{,5;{O!-uQ,UO'#FjO!.rQ,UO'#KXO!.^Q,UO'#KXO!.yQ,UO'#KXOOQO'#KX'#KXO!/_Q,UO,5<SOOOW,5<`,5<`O!/pQlO'#FvOOOW'#Io'#IoO7VO7dO,5<QO!/wQ,UO'#FxOOQ!0Lf,5<Q,5<QO!0hQ$IUO'#CyOOQ!0Lh'#C}'#C}O!0{O#@ItO'#DRO!1iQMjO,5<eO!1pQ`O,5<hO!3YQ(CWO'#GXO!3jQ`O'#GYO!3oQ`O'#GYO!5_Q(CWO'#G^O!6dQpO'#GbOOQO'#Gn'#GnO!,TQMhO'#GmOOQO'#Gp'#GpO!,TQMhO'#GoO!7VQ$IUO'#JlOOQ!0Lh'#Jl'#JlO!7aQ`O'#JkO!7oQ`O'#JjO!7wQ`O'#CuOOQ!0Lh'#C{'#C{O!8YQ`O'#C}OOQ!0Lh'#DV'#DVOOQ!0Lh'#DX'#DXO!8_Q`O,5<eO1SQ`O'#DZO!,TQMhO'#GPO!,TQMhO'#GRO!8gQ`O'#GTO!8lQ`O'#GUO!3oQ`O'#G[O!,TQMhO'#GaO<]Q`O'#JkO!8qQ`O'#EqO!9`Q`O,5<gOOQ!0Lb'#Cr'#CrO!9hQ`O'#ErO!:bQpO'#EsOOQ!0Lb'#KR'#KRO!:iQ!0LrO'#KaO9uQ!0LrO,5=cO`QlO,5>tOOQ['#Jh'#JhOOQ[,5>u,5>uOOQ[-E<]-E<]O!<hQ!0MxO,5:bO!:]QpO,5:`O!?RQ!0MxO,5:jO%[QlO,5:jO!AiQ!0MxO,5:lOOQO,5@z,5@zO!BYQMhO,5=_O!BhQ!0LrO'#JiO9`Q`O'#JiO!ByQ!0LrO,59ZO!CUQpO,59ZO!C^QMhO,59ZO:dQMhO,59ZO!CiQ`O,5;ZO!CqQ`O'#HbO!DVQ`O'#KdO%[QlO,5;}O!:]QpO,5<PO!D_Q`O,5=zO!DdQ`O,5=zO!DiQ`O,5=zO!DwQ`O,5=zO9uQ!0LrO,5=zO<]Q`O,5=jOOQO'#Cy'#CyO!EOQpO,5=gO!EWQMhO,5=hO!EcQ`O,5=jO!EhQ!bO,5=mO!EpQ`O'#K`O?YQ`O'#HWO9kQ`O'#HYO!EuQ`O'#HYO:dQMhO'#H[O!EzQ`O'#H[OOQ[,5=p,5=pO!FPQ`O'#H]O!FbQ`O'#CoO!FgQ`O,59PO!FqQ`O,59PO!HvQlO,59POOQ[,59P,59PO!IWQ!0LrO,59PO%[QlO,59PO!KcQlO'#HeOOQ['#Hf'#HfOOQ['#Hg'#HgO`QlO,5=}O!KyQ`O,5=}O`QlO,5>TO`QlO,5>VO!LOQ`O,5>XO`QlO,5>ZO!LTQ`O,5>^O!LYQlO,5>dOOQ[,5>j,5>jO%[QlO,5>jO9uQ!0LrO,5>lOOQ[,5>n,5>nO#!dQ`O,5>nOOQ[,5>p,5>pO#!dQ`O,5>pOOQ[,5>r,5>rO##QQpO'#D_O%[QlO'#JvO##sQpO'#JvO##}QpO'#DmO#$`QpO'#DmO#&qQlO'#DmO#&xQ`O'#JuO#'QQ`O,5:WO#'VQ`O'#EtO#'eQ`O'#KUO#'mQ`O,5;_O#'rQpO'#DmO#(PQpO'#EVOOQ!0Lf,5:o,5:oO%[QlO,5:oO#(WQ`O,5:oO?YQ`O,5;YO!CUQpO,5;YO!C^QMhO,5;YO:dQMhO,5;YO#(`Q`O,5@bO#(eQ07dO,5:sOOQO-E<f-E<fO#)kQ!0MSO,5;RODWQpO,5:rO#)uQpO,5:rODWQpO,5;RO!ByQ!0LrO,5:rOOQ!0Lb'#Ej'#EjOOQO,5;R,5;RO%[QlO,5;RO#*SQ!0LrO,5;RO#*_Q!0LrO,5;RO!CUQpO,5:rOOQO,5;X,5;XO#*mQ!0LrO,5;RPOOO'#I^'#I^P#+RO&2DjO,58|POOO,58|,58|OOOO-E<^-E<^OOQ!0Lh1G.p1G.pOOOO-E<_-E<_OOOO,59},59}O#+^Q!bO,59}OOOO-E<a-E<aOOQ!0Lf1G/g1G/gO#+cQ!fO,5?OO+}QlO,5?OOOQO,5?U,5?UO#+mQlO'#IdOOQO-E<b-E<bO#+zQ`O,5@`O#,SQ!fO,5@`O#,ZQ`O,5@nOOQ!0Lf1G/m1G/mO%[QlO,5@oO#,cQ`O'#IjOOQO-E<h-E<hO#,ZQ`O,5@nOOQ!0Lb1G0x1G0xOOQ!0Ln1G/x1G/xOOQ!0Ln1G0Y1G0YO%[QlO,5@lO#,wQ!0LrO,5@lO#-YQ!0LrO,5@lO#-aQ`O,5@kO9eQ`O,5@kO#-iQ`O,5@kO#-wQ`O'#ImO#-aQ`O,5@kOOQ!0Lb1G0w1G0wO!(tQpO,5:uO!)PQpO,5:uOOQS,5:w,5:wO#.iQdO,5:wO#.qQMhO1G2yO9kQ`O1G2yOOQ!0Lf1G0u1G0uO#/PQ!0MxO1G0uO#0UQ!0MvO,5;VOOQ!0Lh'#GW'#GWO#0rQ!0MzO'#JlO!$wQlO1G0uO#2}Q!fO'#JwO%[QlO'#JwO#3XQ`O,5:eOOQ!0Lh'#D_'#D_OOQ!0Lf1G1O1G1OO%[QlO1G1OOOQ!0Lf1G1f1G1fO#3^Q`O1G1OO#5rQ!0MxO1G1PO#5yQ!0MxO1G1PO#8aQ!0MxO1G1PO#8hQ!0MxO1G1PO#;OQ!0MxO1G1PO#=fQ!0MxO1G1PO#=mQ!0MxO1G1PO#=tQ!0MxO1G1PO#@[Q!0MxO1G1PO#@cQ!0MxO1G1PO#BpQ?MtO'#CiO#DkQ?MtO1G1`O#DrQ?MtO'#JsO#EVQ!0MxO,5?[OOQ!0Lb-E<n-E<nO#GdQ!0MxO1G1PO#HaQ!0MzO1G1POOQ!0Lf1G1P1G1PO#IdQMjO'#J|O#InQ`O,5:xO#IsQ!0MxO1G1cO#JgQ,UO,5<WO#JoQ,UO,5<XO#JwQ,UO'#FoO#K`Q`O'#FnOOQO'#KY'#KYOOQO'#In'#InO#KeQ,UO1G1nOOQ!0Lf1G1n1G1nOOOW1G1y1G1yO#KvQ?MtO'#JrO#LQQ`O,5<bO!)[QlO,5<bOOOW-E<m-E<mOOQ!0Lf1G1l1G1lO#LVQpO'#KXOOQ!0Lf,5<d,5<dO#L_QpO,5<dO#LdQMhO'#DTOOOO'#Ib'#IbO#LkO#@ItO,59mOOQ!0Lh,59m,59mO%[QlO1G2PO!8lQ`O'#IrO#LvQ`O,5<zOOQ!0Lh,5<w,5<wO!,TQMhO'#IuO#MdQMjO,5=XO!,TQMhO'#IwO#NVQMjO,5=ZO!&zQMhO,5=]OOQO1G2S1G2SO#NaQ!dO'#CrO#NtQ(CWO'#ErO$ |QpO'#GbO$!dQ!dO,5<sO$!kQ`O'#K[O9eQ`O'#K[O$!yQ`O,5<uO$#aQ!dO'#C{O!,TQMhO,5<tO$#kQ`O'#GZO$$PQ`O,5<tO$$UQ!dO'#GWO$$cQ!dO'#K]O$$mQ`O'#K]O!&zQMhO'#K]O$$rQ`O,5<xO$$wQlO'#JvO$%RQpO'#GcO#$`QpO'#GcO$%dQ`O'#GgO!3oQ`O'#GkO$%iQ!0LrO'#ItO$%tQpO,5<|OOQ!0Lp,5<|,5<|O$%{QpO'#GcO$&YQpO'#GdO$&kQpO'#GdO$&pQMjO,5=XO$'QQMjO,5=ZOOQ!0Lh,5=^,5=^O!,TQMhO,5@VO!,TQMhO,5@VO$'bQ`O'#IyO$'vQ`O,5@UO$(OQ`O,59aOOQ!0Lh,59i,59iO$(TQ`O,5@VO$)TQ$IYO,59uOOQ!0Lh'#Jp'#JpO$)vQMjO,5<kO$*iQMjO,5<mO@zQ`O,5<oOOQ!0Lh,5<p,5<pO$*sQ`O,5<vO$*xQMjO,5<{O$+YQ`O'#KPO!$wQlO1G2RO$+_Q`O1G2RO9eQ`O'#KSO9eQ`O'#EtO%[QlO'#EtO9eQ`O'#I{O$+dQ!0LrO,5@{OOQ[1G2}1G2}OOQ[1G4`1G4`OOQ!0Lf1G/|1G/|OOQ!0Lf1G/z1G/zO$-fQ!0MxO1G0UOOQ[1G2y1G2yO!&zQMhO1G2yO%[QlO1G2yO#.tQ`O1G2yO$/jQMhO'#EkOOQ!0Lb,5@T,5@TO$/wQ!0LrO,5@TOOQ[1G.u1G.uO!ByQ!0LrO1G.uO!CUQpO1G.uO!C^QMhO1G.uO$0YQ`O1G0uO$0_Q`O'#CiO$0jQ`O'#KeO$0rQ`O,5=|O$0wQ`O'#KeO$0|Q`O'#KeO$1[Q`O'#JRO$1jQ`O,5AOO$1rQ!fO1G1iOOQ!0Lf1G1k1G1kO9kQ`O1G3fO@zQ`O1G3fO$1yQ`O1G3fO$2OQ`O1G3fO!DiQ`O1G3fO9uQ!0LrO1G3fOOQ[1G3f1G3fO!EcQ`O1G3UO!&zQMhO1G3RO$2TQ`O1G3ROOQ[1G3S1G3SO!&zQMhO1G3SO$2YQ`O1G3SO$2bQpO'#HQOOQ[1G3U1G3UO!6_QpO'#I}O!EhQ!bO1G3XOOQ[1G3X1G3XOOQ[,5=r,5=rO$2jQMhO,5=tO9kQ`O,5=tO$%dQ`O,5=vO9`Q`O,5=vO!CUQpO,5=vO!C^QMhO,5=vO:dQMhO,5=vO$2xQ`O'#KcO$3TQ`O,5=wOOQ[1G.k1G.kO$3YQ!0LrO1G.kO@zQ`O1G.kO$3eQ`O1G.kO9uQ!0LrO1G.kO$5mQ!fO,5AQO$5zQ`O,5AQO9eQ`O,5AQO$6VQlO,5>PO$6^Q`O,5>POOQ[1G3i1G3iO`QlO1G3iOOQ[1G3o1G3oOOQ[1G3q1G3qO?TQ`O1G3sO$6cQlO1G3uO$:gQlO'#HtOOQ[1G3x1G3xO$:tQ`O'#HzO?YQ`O'#H|OOQ[1G4O1G4OO$:|QlO1G4OO9uQ!0LrO1G4UOOQ[1G4W1G4WOOQ!0Lb'#G_'#G_O9uQ!0LrO1G4YO9uQ!0LrO1G4[O$?TQ`O,5@bO!)[QlO,5;`O9eQ`O,5;`O?YQ`O,5:XO!)[QlO,5:XO!CUQpO,5:XO$?YQ?MtO,5:XOOQO,5;`,5;`O$?dQpO'#IeO$?zQ`O,5@aOOQ!0Lf1G/r1G/rO$@SQpO'#IkO$@^Q`O,5@pOOQ!0Lb1G0y1G0yO#$`QpO,5:XOOQO'#Ig'#IgO$@fQpO,5:qOOQ!0Ln,5:q,5:qO#(ZQ`O1G0ZOOQ!0Lf1G0Z1G0ZO%[QlO1G0ZOOQ!0Lf1G0t1G0tO?YQ`O1G0tO!CUQpO1G0tO!C^QMhO1G0tOOQ!0Lb1G5|1G5|O!ByQ!0LrO1G0^OOQO1G0m1G0mO%[QlO1G0mO$@mQ!0LrO1G0mO$@xQ!0LrO1G0mO!CUQpO1G0^ODWQpO1G0^O$AWQ!0LrO1G0mOOQO1G0^1G0^O$AlQ!0MxO1G0mPOOO-E<[-E<[POOO1G.h1G.hOOOO1G/i1G/iO$AvQ!bO,5<iO$BOQ!fO1G4jOOQO1G4p1G4pO%[QlO,5?OO$BYQ`O1G5zO$BbQ`O1G6YO$BjQ!fO1G6ZO9eQ`O,5?UO$BtQ!0MxO1G6WO%[QlO1G6WO$CUQ!0LrO1G6WO$CgQ`O1G6VO$CgQ`O1G6VO9eQ`O1G6VO$CoQ`O,5?XO9eQ`O,5?XOOQO,5?X,5?XO$DTQ`O,5?XO$+YQ`O,5?XOOQO-E<k-E<kOOQS1G0a1G0aOOQS1G0c1G0cO#.lQ`O1G0cOOQ[7+(e7+(eO!&zQMhO7+(eO%[QlO7+(eO$DcQ`O7+(eO$DnQMhO7+(eO$D|Q!0MzO,5=XO$GXQ!0MzO,5=ZO$IdQ!0MzO,5=XO$KuQ!0MzO,5=ZO$NWQ!0MzO,59uO%!]Q!0MzO,5<kO%$hQ!0MzO,5<mO%&sQ!0MzO,5<{OOQ!0Lf7+&a7+&aO%)UQ!0MxO7+&aO%)xQlO'#IfO%*VQ`O,5@cO%*_Q!fO,5@cOOQ!0Lf1G0P1G0PO%*iQ`O7+&jOOQ!0Lf7+&j7+&jO%*nQ?MtO,5:fO%[QlO7+&zO%*xQ?MtO,5:bO%+VQ?MtO,5:jO%+aQ?MtO,5:lO%+kQMhO'#IiO%+uQ`O,5@hOOQ!0Lh1G0d1G0dOOQO1G1r1G1rOOQO1G1s1G1sO%+}Q!jO,5<ZO!)[QlO,5<YOOQO-E<l-E<lOOQ!0Lf7+'Y7+'YOOOW7+'e7+'eOOOW1G1|1G1|O%,YQ`O1G1|OOQ!0Lf1G2O1G2OOOOO,59o,59oO%,_Q!dO,59oOOOO-E<`-E<`OOQ!0Lh1G/X1G/XO%,fQ!0MxO7+'kOOQ!0Lh,5?^,5?^O%-YQMhO1G2fP%-aQ`O'#IrPOQ!0Lh-E<p-E<pO%-}QMjO,5?aOOQ!0Lh-E<s-E<sO%.pQMjO,5?cOOQ!0Lh-E<u-E<uO%.zQ!dO1G2wO%/RQ!dO'#CrO%/iQMhO'#KSO$$wQlO'#JvOOQ!0Lh1G2_1G2_O%/sQ`O'#IqO%0[Q`O,5@vO%0[Q`O,5@vO%0dQ`O,5@vO%0oQ`O,5@vOOQO1G2a1G2aO%0}QMjO1G2`O$+YQ`O'#K[O!,TQMhO1G2`O%1_Q(CWO'#IsO%1lQ`O,5@wO!&zQMhO,5@wO%1tQ!dO,5@wOOQ!0Lh1G2d1G2dO%4UQ!fO'#CiO%4`Q`O,5=POOQ!0Lb,5<},5<}O%4hQpO,5<}OOQ!0Lb,5=O,5=OOCwQ`O,5<}O%4sQpO,5<}OOQ!0Lb,5=R,5=RO$+YQ`O,5=VOOQO,5?`,5?`OOQO-E<r-E<rOOQ!0Lp1G2h1G2hO#$`QpO,5<}O$$wQlO,5=PO%5RQ`O,5=OO%5^QpO,5=OO!,TQMhO'#IuO%6WQMjO1G2sO!,TQMhO'#IwO%6yQMjO1G2uO%7TQMjO1G5qO%7_QMjO1G5qOOQO,5?e,5?eOOQO-E<w-E<wOOQO1G.{1G.{O!,TQMhO1G5qO!,TQMhO1G5qO!:]QpO,59wO%[QlO,59wOOQ!0Lh,5<j,5<jO%7lQ`O1G2ZO!,TQMhO1G2bO%7qQ!0MxO7+'mOOQ!0Lf7+'m7+'mO!$wQlO7+'mO%8eQ`O,5;`OOQ!0Lb,5?g,5?gOOQ!0Lb-E<y-E<yO%8jQ!dO'#K^O#(ZQ`O7+(eO4UQ!fO7+(eO$DfQ`O7+(eO%8tQ!0MvO'#CiO%9XQ!0MvO,5=SO%9lQ`O,5=SO%9tQ`O,5=SOOQ!0Lb1G5o1G5oOOQ[7+$a7+$aO!ByQ!0LrO7+$aO!CUQpO7+$aO!$wQlO7+&aO%9yQ`O'#JQO%:bQ`O,5APOOQO1G3h1G3hO9kQ`O,5APO%:bQ`O,5APO%:jQ`O,5APOOQO,5?m,5?mOOQO-E=P-E=POOQ!0Lf7+'T7+'TO%:oQ`O7+)QO9uQ!0LrO7+)QO9kQ`O7+)QO@zQ`O7+)QO%:tQ`O7+)QOOQ[7+)Q7+)QOOQ[7+(p7+(pO%:yQ!0MvO7+(mO!&zQMhO7+(mO!E^Q`O7+(nOOQ[7+(n7+(nO!&zQMhO7+(nO%;TQ`O'#KbO%;`Q`O,5=lOOQO,5?i,5?iOOQO-E<{-E<{OOQ[7+(s7+(sO%<rQpO'#HZOOQ[1G3`1G3`O!&zQMhO1G3`O%[QlO1G3`O%<yQ`O1G3`O%=UQMhO1G3`O9uQ!0LrO1G3bO$%dQ`O1G3bO9`Q`O1G3bO!CUQpO1G3bO!C^QMhO1G3bO%=dQ`O'#JPO%=xQ`O,5@}O%>QQpO,5@}OOQ!0Lb1G3c1G3cOOQ[7+$V7+$VO@zQ`O7+$VO9uQ!0LrO7+$VO%>]Q`O7+$VO%[QlO1G6lO%[QlO1G6mO%>bQ!0LrO1G6lO%>lQlO1G3kO%>sQ`O1G3kO%>xQlO1G3kOOQ[7+)T7+)TO9uQ!0LrO7+)_O`QlO7+)aOOQ['#Kh'#KhOOQ['#JS'#JSO%?PQlO,5>`OOQ[,5>`,5>`O%[QlO'#HuO%?^Q`O'#HwOOQ[,5>f,5>fO9eQ`O,5>fOOQ[,5>h,5>hOOQ[7+)j7+)jOOQ[7+)p7+)pOOQ[7+)t7+)tOOQ[7+)v7+)vO%?cQpO1G5|O%?}Q?MtO1G0zO%@XQ`O1G0zOOQO1G/s1G/sO%@dQ?MtO1G/sO?YQ`O1G/sO!)[QlO'#DmOOQO,5?P,5?POOQO-E<c-E<cOOQO,5?V,5?VOOQO-E<i-E<iO!CUQpO1G/sOOQO-E<e-E<eOOQ!0Ln1G0]1G0]OOQ!0Lf7+%u7+%uO#(ZQ`O7+%uOOQ!0Lf7+&`7+&`O?YQ`O7+&`O!CUQpO7+&`OOQO7+%x7+%xO$AlQ!0MxO7+&XOOQO7+&X7+&XO%[QlO7+&XO%@nQ!0LrO7+&XO!ByQ!0LrO7+%xO!CUQpO7+%xO%@yQ!0LrO7+&XO%AXQ!0MxO7++rO%[QlO7++rO%AiQ`O7++qO%AiQ`O7++qOOQO1G4s1G4sO9eQ`O1G4sO%AqQ`O1G4sOOQS7+%}7+%}O#(ZQ`O<<LPO4UQ!fO<<LPO%BPQ`O<<LPOOQ[<<LP<<LPO!&zQMhO<<LPO%[QlO<<LPO%BXQ`O<<LPO%BdQ!0MzO,5?aO%DoQ!0MzO,5?cO%FzQ!0MzO1G2`O%I]Q!0MzO1G2sO%KhQ!0MzO1G2uO%MsQ!fO,5?QO%[QlO,5?QOOQO-E<d-E<dO%M}Q`O1G5}OOQ!0Lf<<JU<<JUO%NVQ?MtO1G0uO&!^Q?MtO1G1PO&!eQ?MtO1G1PO&$fQ?MtO1G1PO&$mQ?MtO1G1PO&&nQ?MtO1G1PO&(oQ?MtO1G1PO&(vQ?MtO1G1PO&(}Q?MtO1G1PO&+OQ?MtO1G1PO&+VQ?MtO1G1PO&+^Q!0MxO<<JfO&-UQ?MtO1G1PO&.RQ?MvO1G1PO&/UQ?MvO'#JlO&1[Q?MtO1G1cO&1iQ?MtO1G0UO&1sQMjO,5?TOOQO-E<g-E<gO!)[QlO'#FqOOQO'#KZ'#KZOOQO1G1u1G1uO&1}Q`O1G1tO&2SQ?MtO,5?[OOOW7+'h7+'hOOOO1G/Z1G/ZO&2^Q!dO1G4xOOQ!0Lh7+(Q7+(QP!&zQMhO,5?^O!,TQMhO7+(cO&2eQ`O,5?]O9eQ`O,5?]O$+YQ`O,5?]OOQO-E<o-E<oO&2sQ`O1G6bO&2sQ`O1G6bO&2{Q`O1G6bO&3WQMjO7+'zO&3hQ!dO,5?_O&3rQ`O,5?_O!&zQMhO,5?_OOQO-E<q-E<qO&3wQ!dO1G6cO&4RQ`O1G6cO&4ZQ`O1G2kO!&zQMhO1G2kOOQ!0Lb1G2i1G2iOOQ!0Lb1G2j1G2jO%4hQpO1G2iO!CUQpO1G2iOCwQ`O1G2iOOQ!0Lb1G2q1G2qO&4`QpO1G2iO&4nQ`O1G2kO$+YQ`O1G2jOCwQ`O1G2jO$$wQlO1G2kO&4vQ`O1G2jO&5jQMjO,5?aOOQ!0Lh-E<t-E<tO&6]QMjO,5?cOOQ!0Lh-E<v-E<vO!,TQMhO7++]O&6gQMjO7++]O&6qQMjO7++]OOQ!0Lh1G/c1G/cO&7OQ`O1G/cOOQ!0Lh7+'u7+'uO&7TQMjO7+'|O&7eQ!0MxO<<KXOOQ!0Lf<<KX<<KXO&8XQ`O1G0zO!&zQMhO'#IzO&8^Q`O,5@xO&:`Q!fO<<LPO!&zQMhO1G2nO&:gQ!0LrO1G2nOOQ[<<G{<<G{O!ByQ!0LrO<<G{O&:xQ!0MxO<<I{OOQ!0Lf<<I{<<I{OOQO,5?l,5?lO&;lQ`O,5?lO&;qQ`O,5?lOOQO-E=O-E=OO&<PQ`O1G6kO&<PQ`O1G6kO9kQ`O1G6kO@zQ`O<<LlOOQ[<<Ll<<LlO&<XQ`O<<LlO9uQ!0LrO<<LlO9kQ`O<<LlOOQ[<<LX<<LXO%:yQ!0MvO<<LXOOQ[<<LY<<LYO!E^Q`O<<LYO&<^QpO'#I|O&<iQ`O,5@|O!)[QlO,5@|OOQ[1G3W1G3WOOQO'#JO'#JOO9uQ!0LrO'#JOO&<qQpO,5=uOOQ[,5=u,5=uO&<xQpO'#EgO&=PQpO'#GeO&=UQ`O7+(zO&=ZQ`O7+(zOOQ[7+(z7+(zO!&zQMhO7+(zO%[QlO7+(zO&=cQ`O7+(zOOQ[7+(|7+(|O9uQ!0LrO7+(|O$%dQ`O7+(|O9`Q`O7+(|O!CUQpO7+(|O&=nQ`O,5?kOOQO-E<}-E<}OOQO'#H^'#H^O&=yQ`O1G6iO9uQ!0LrO<<GqOOQ[<<Gq<<GqO@zQ`O<<GqO&>RQ`O7+,WO&>WQ`O7+,XO%[QlO7+,WO%[QlO7+,XOOQ[7+)V7+)VO&>]Q`O7+)VO&>bQlO7+)VO&>iQ`O7+)VOOQ[<<Ly<<LyOOQ[<<L{<<L{OOQ[-E=Q-E=QOOQ[1G3z1G3zO&>nQ`O,5>aOOQ[,5>c,5>cO&>sQ`O1G4QO9eQ`O7+&fO!)[QlO7+&fOOQO7+%_7+%_O&>xQ?MtO1G6ZO?YQ`O7+%_OOQ!0Lf<<Ia<<IaOOQ!0Lf<<Iz<<IzO?YQ`O<<IzOOQO<<Is<<IsO$AlQ!0MxO<<IsO%[QlO<<IsOOQO<<Id<<IdO!ByQ!0LrO<<IdO&?SQ!0LrO<<IsO&?_Q!0MxO<= ^O&?oQ`O<= ]OOQO7+*_7+*_O9eQ`O7+*_OOQ[ANAkANAkO&?wQ!fOANAkO!&zQMhOANAkO#(ZQ`OANAkO4UQ!fOANAkO&@OQ`OANAkO%[QlOANAkO&@WQ!0MzO7+'zO&BiQ!0MzO,5?aO&DtQ!0MzO,5?cO&GPQ!0MzO7+'|O&IbQ!fO1G4lO&IlQ?MtO7+&aO&KpQ?MvO,5=XO&MwQ?MvO,5=ZO&NXQ?MvO,5=XO&NiQ?MvO,5=ZO&NyQ?MvO,59uO'#PQ?MvO,5<kO'%SQ?MvO,5<mO''hQ?MvO,5<{O')^Q?MtO7+'kO')kQ?MtO7+'mO')xQ`O,5<]OOQO7+'`7+'`OOQ!0Lh7+*d7+*dO')}QMjO<<K}OOQO1G4w1G4wO'*UQ`O1G4wO'*aQ`O1G4wO'*oQ`O7++|O'*oQ`O7++|O!&zQMhO1G4yO'*wQ!dO1G4yO'+RQ`O7++}O'+ZQ`O7+(VO'+fQ!dO7+(VOOQ!0Lb7+(T7+(TOOQ!0Lb7+(U7+(UO!CUQpO7+(TOCwQ`O7+(TO'+pQ`O7+(VO!&zQMhO7+(VO$+YQ`O7+(UO'+uQ`O7+(VOCwQ`O7+(UO'+}QMjO<<NwO!,TQMhO<<NwOOQ!0Lh7+$}7+$}O',XQ!dO,5?fOOQO-E<x-E<xO',cQ!0MvO7+(YO!&zQMhO7+(YOOQ[AN=gAN=gO9kQ`O1G5WOOQO1G5W1G5WO',sQ`O1G5WO',xQ`O7+,VO',xQ`O7+,VO9uQ!0LrOANBWO@zQ`OANBWOOQ[ANBWANBWO'-QQ`OANBWOOQ[ANAsANAsOOQ[ANAtANAtO'-VQ`O,5?hOOQO-E<z-E<zO'-bQ?MtO1G6hOOQO,5?j,5?jOOQO-E<|-E<|OOQ[1G3a1G3aO'-lQ`O,5=POOQ[<<Lf<<LfO!&zQMhO<<LfO&=UQ`O<<LfO'-qQ`O<<LfO%[QlO<<LfOOQ[<<Lh<<LhO9uQ!0LrO<<LhO$%dQ`O<<LhO9`Q`O<<LhO'-yQpO1G5VO'.UQ`O7+,TOOQ[AN=]AN=]O9uQ!0LrOAN=]OOQ[<= r<= rOOQ[<= s<= sO'.^Q`O<= rO'.cQ`O<= sOOQ[<<Lq<<LqO'.hQ`O<<LqO'.mQlO<<LqOOQ[1G3{1G3{O?YQ`O7+)lO'.tQ`O<<JQO'/PQ?MtO<<JQOOQO<<Hy<<HyOOQ!0LfAN?fAN?fOOQOAN?_AN?_O$AlQ!0MxOAN?_OOQOAN?OAN?OO%[QlOAN?_OOQO<<My<<MyOOQ[G27VG27VO!&zQMhOG27VO#(ZQ`OG27VO'/ZQ!fOG27VO4UQ!fOG27VO'/bQ`OG27VO'/jQ?MtO<<JfO'/wQ?MvO1G2`O'1mQ?MvO,5?aO'3pQ?MvO,5?cO'5sQ?MvO1G2sO'7vQ?MvO1G2uO'9yQ?MtO<<KXO':WQ?MtO<<I{OOQO1G1w1G1wO!,TQMhOANAiOOQO7+*c7+*cO':eQ`O7+*cO':pQ`O<= hO':xQ!dO7+*eOOQ!0Lb<<Kq<<KqO$+YQ`O<<KqOCwQ`O<<KqO';SQ`O<<KqO!&zQMhO<<KqOOQ!0Lb<<Ko<<KoO!CUQpO<<KoO';_Q!dO<<KqOOQ!0Lb<<Kp<<KpO';iQ`O<<KqO!&zQMhO<<KqO$+YQ`O<<KpO';nQMjOANDcO';xQ!0MvO<<KtOOQO7+*r7+*rO9kQ`O7+*rO'<YQ`O<= qOOQ[G27rG27rO9uQ!0LrOG27rO@zQ`OG27rO!)[QlO1G5SO'<bQ`O7+,SO'<jQ`O1G2kO&=UQ`OANBQOOQ[ANBQANBQO!&zQMhOANBQO'<oQ`OANBQOOQ[ANBSANBSO9uQ!0LrOANBSO$%dQ`OANBSOOQO'#H_'#H_OOQO7+*q7+*qOOQ[G22wG22wOOQ[ANE^ANE^OOQ[ANE_ANE_OOQ[ANB]ANB]O'<wQ`OANB]OOQ[<<MW<<MWO!)[QlOAN?lOOQOG24yG24yO$AlQ!0MxOG24yO#(ZQ`OLD,qOOQ[LD,qLD,qO!&zQMhOLD,qO'<|Q!fOLD,qO'=TQ?MvO7+'zO'>yQ?MvO,5?aO'@|Q?MvO,5?cO'CPQ?MvO7+'|O'DuQMjOG27TOOQO<<M}<<M}OOQ!0LbANA]ANA]O$+YQ`OANA]OCwQ`OANA]O'EVQ!dOANA]OOQ!0LbANAZANAZO'E^Q`OANA]O!&zQMhOANA]O'EiQ!dOANA]OOQ!0LbANA[ANA[OOQO<<N^<<N^OOQ[LD-^LD-^O9uQ!0LrOLD-^O'EsQ?MtO7+*nOOQO'#Gf'#GfOOQ[G27lG27lO&=UQ`OG27lO!&zQMhOG27lOOQ[G27nG27nO9uQ!0LrOG27nOOQ[G27wG27wO'E}Q?MtOG25WOOQOLD*eLD*eOOQ[!$(!]!$(!]O#(ZQ`O!$(!]O!&zQMhO!$(!]O'FXQ!0MzOG27TOOQ!0LbG26wG26wO$+YQ`OG26wO'HjQ`OG26wOCwQ`OG26wO'HuQ!dOG26wO!&zQMhOG26wOOQ[!$(!x!$(!xOOQ[LD-WLD-WO&=UQ`OLD-WOOQ[LD-YLD-YOOQ[!)9Ew!)9EwO#(ZQ`O!)9EwOOQ!0LbLD,cLD,cO$+YQ`OLD,cOCwQ`OLD,cO'H|Q`OLD,cO'IXQ!dOLD,cOOQ[!$(!r!$(!rOOQ[!.K;c!.K;cO'I`Q?MvOG27TOOQ!0Lb!$( }!$( }O$+YQ`O!$( }OCwQ`O!$( }O'KUQ`O!$( }OOQ!0Lb!)9Ei!)9EiO$+YQ`O!)9EiOCwQ`O!)9EiOOQ!0Lb!.K;T!.K;TO$+YQ`O!.K;TOOQ!0Lb!4/0o!4/0oO!)[QlO'#DzO1PQ`O'#EXO'KaQ!fO'#JrO'KhQ!L^O'#DvO'KoQlO'#EOO'KvQ!fO'#CiO'N^Q!fO'#CiO!)[QlO'#EQO'NnQlO,5;ZO!)[QlO,5;eO!)[QlO,5;eO!)[QlO,5;eO!)[QlO,5;eO!)[QlO,5;eO!)[QlO,5;eO!)[QlO,5;eO!)[QlO,5;eO!)[QlO,5;eO!)[QlO,5;eO!)[QlO'#IpO(!qQ`O,5<iO!)[QlO,5;eO(!yQMhO,5;eO($dQMhO,5;eO!)[QlO,5;wO!&zQMhO'#GmO(!yQMhO'#GmO!&zQMhO'#GoO(!yQMhO'#GoO1SQ`O'#DZO1SQ`O'#DZO!&zQMhO'#GPO(!yQMhO'#GPO!&zQMhO'#GRO(!yQMhO'#GRO!&zQMhO'#GaO(!yQMhO'#GaO!)[QlO,5:jO($kQpO'#D_O($uQpO'#JvO!)[QlO,5@oO'NnQlO1G0uO(%PQ?MtO'#CiO!)[QlO1G2PO!&zQMhO'#IuO(!yQMhO'#IuO!&zQMhO'#IwO(!yQMhO'#IwO(%ZQ!dO'#CrO!&zQMhO,5<tO(!yQMhO,5<tO'NnQlO1G2RO!)[QlO7+&zO!&zQMhO1G2`O(!yQMhO1G2`O!&zQMhO'#IuO(!yQMhO'#IuO!&zQMhO'#IwO(!yQMhO'#IwO!&zQMhO1G2bO(!yQMhO1G2bO'NnQlO7+'mO'NnQlO7+&aO!&zQMhOANAiO(!yQMhOANAiO(%nQ`O'#EoO(%sQ`O'#EoO(%{Q`O'#F]O(&QQ`O'#EyO(&VQ`O'#KTO(&bQ`O'#KRO(&mQ`O,5;ZO(&rQMjO,5<eO(&yQ`O'#GYO('OQ`O'#GYO('TQ`O,5<eO(']Q`O,5<gO('eQ`O,5;ZO('mQ?MtO1G1`O('tQ`O,5<tO('yQ`O,5<tO((OQ`O,5<vO((TQ`O,5<vO((YQ`O1G2RO((_Q`O1G0uO((dQMjO<<K}O((kQMjO<<K}O((rQMhO'#F|O9`Q`O'#F{OAuQ`O'#EnO!)[QlO,5;tO!3oQ`O'#GYO!3oQ`O'#GYO!3oQ`O'#G[O!3oQ`O'#G[O!,TQMhO7+(cO!,TQMhO7+(cO%.zQ!dO1G2wO%.zQ!dO1G2wO!&zQMhO,5=]O!&zQMhO,5=]",
  stateData: "()x~O'|OS'}OSTOS(ORQ~OPYOQYOSfOY!VOaqOdzOeyOl!POpkOrYOskOtkOzkO|YO!OYO!SWO!WkO!XkO!_XO!iuO!lZO!oYO!pYO!qYO!svO!uwO!xxO!|]O$W|O$niO%h}O%j!QO%l!OO%m!OO%n!OO%q!RO%s!SO%v!TO%w!TO%y!UO&W!WO&^!XO&`!YO&b!ZO&d![O&g!]O&m!^O&s!_O&u!`O&w!aO&y!bO&{!cO(TSO(VTO(YUO(aVO(o[O~OWtO~P`OPYOQYOSfOd!jOe!iOpkOrYOskOtkOzkO|YO!OYO!SWO!WkO!XkO!_!eO!iuO!lZO!oYO!pYO!qYO!svO!u!gO!x!hO$W!kO$niO(T!dO(VTO(YUO(aVO(o[O~Oa!wOs!nO!S!oO!b!yO!c!vO!d!vO!|<VO#T!pO#U!pO#V!xO#W!pO#X!pO#[!zO#]!zO(U!lO(VTO(YUO(e!mO(o!sO~O(O!{O~OP]XR]X[]Xa]Xj]Xr]X!Q]X!S]X!]]X!l]X!p]X#R]X#S]X#`]X#kfX#n]X#o]X#p]X#q]X#r]X#s]X#t]X#u]X#v]X#x]X#z]X#{]X$Q]X'z]X(a]X(r]X(y]X(z]X~O!g%RX~P(qO_!}O(V#PO(W!}O(X#PO~O_#QO(X#PO(Y#PO(Z#QO~Ox#SO!U#TO(b#TO(c#VO~OPYOQYOSfOd!jOe!iOpkOrYOskOtkOzkO|YO!OYO!SWO!WkO!XkO!_!eO!iuO!lZO!oYO!pYO!qYO!svO!u!gO!x!hO$W!kO$niO(T<ZO(VTO(YUO(aVO(o[O~O![#ZO!]#WO!Y(hP!Y(vP~P+}O!^#cO~P`OPYOQYOSfOd!jOe!iOrYOskOtkOzkO|YO!OYO!SWO!WkO!XkO!_!eO!iuO!lZO!oYO!pYO!qYO!svO!u!gO!x!hO$W!kO$niO(VTO(YUO(aVO(o[O~Op#mO![#iO!|]O#i#lO#j#iO(T<[O!k(sP~P.iO!l#oO(T#nO~O!x#sO!|]O%h#tO~O#k#uO~O!g#vO#k#uO~OP$[OR#zO[$cOj$ROr$aO!Q#yO!S#{O!]$_O!l#xO!p$[O#R$RO#n$OO#o$PO#p$PO#q$PO#r$QO#s$RO#t$RO#u$bO#v$SO#x$UO#z$WO#{$XO(aVO(r$YO(y#|O(z#}O~Oa(fX'z(fX'w(fX!k(fX!Y(fX!_(fX%i(fX!g(fX~P1qO#S$dO#`$eO$Q$eOP(gXR(gX[(gXj(gXr(gX!Q(gX!S(gX!](gX!l(gX!p(gX#R(gX#n(gX#o(gX#p(gX#q(gX#r(gX#s(gX#t(gX#u(gX#v(gX#x(gX#z(gX#{(gX(a(gX(r(gX(y(gX(z(gX!_(gX%i(gX~Oa(gX'z(gX'w(gX!Y(gX!k(gXv(gX!g(gX~P4UO#`$eO~O$]$hO$_$gO$f$mO~OSfO!_$nO$i$oO$k$qO~Oh%VOj%dOk%dOp%WOr%XOs$tOt$tOz%YO|%ZO!O%]O!S${O!_$|O!i%bO!l$xO#j%cO$W%`O$t%^O$v%_O$y%aO(T$sO(VTO(YUO(a$uO(y$}O(z%POg(^P~Ol%[O~P7eO!l%eO~O!S%hO!_%iO(T%gO~O!g%mO~Oa%nO'z%nO~O!Q%rO~P%[O(U!lO~P%[O%n%vO~P%[Oh%VO!l%eO(T%gO(U!lO~Oe%}O!l%eO(T%gO~Oj$RO~O!_&PO(T%gO(U!lO(VTO(YUO`)WP~O!Q&SO!l&RO%j&VO&T&WO~P;SO!x#sO~O%s&YO!S)SX!_)SX(T)SX~O(T&ZO~Ol!PO!u&`O%j!QO%l!OO%m!OO%n!OO%q!RO%s!SO%v!TO%w!TO~Od&eOe&dO!x&bO%h&cO%{&aO~P<bOd&hOeyOl!PO!_&gO!u&`O!xxO!|]O%h}O%l!OO%m!OO%n!OO%q!RO%s!SO%v!TO%w!TO%y!UO~Ob&kO#`&nO%j&iO(U!lO~P=gO!l&oO!u&sO~O!l#oO~O!_XO~Oa%nO'x&{O'z%nO~Oa%nO'x'OO'z%nO~Oa%nO'x'QO'z%nO~O'w]X!Y]Xv]X!k]X&[]X!_]X%i]X!g]X~P(qO!b'_O!c'WO!d'WO(U!lO(VTO(YUO~Os'UO!S'TO!['XO(e'SO!^(iP!^(xP~P@nOn'bO!_'`O(T%gO~Oe'gO!l%eO(T%gO~O!Q&SO!l&RO~Os!nO!S!oO!|<VO#T!pO#U!pO#W!pO#X!pO(U!lO(VTO(YUO(e!mO(o!sO~O!b'mO!c'lO!d'lO#V!pO#['nO#]'nO~PBYOa%nOh%VO!g#vO!l%eO'z%nO(r'pO~O!p'tO#`'rO~PChOs!nO!S!oO(VTO(YUO(e!mO(o!sO~O!_XOs(mX!S(mX!b(mX!c(mX!d(mX!|(mX#T(mX#U(mX#V(mX#W(mX#X(mX#[(mX#](mX(U(mX(V(mX(Y(mX(e(mX(o(mX~O!c'lO!d'lO(U!lO~PDWO(P'xO(Q'xO(R'zO~O_!}O(V'|O(W!}O(X'|O~O_#QO(X'|O(Y'|O(Z#QO~Ov(OO~P%[Ox#SO!U#TO(b#TO(c(RO~O![(TO!Y'WX!Y'^X!]'WX!]'^X~P+}O!](VO!Y(hX~OP$[OR#zO[$cOj$ROr$aO!Q#yO!S#{O!](VO!l#xO!p$[O#R$RO#n$OO#o$PO#p$PO#q$PO#r$QO#s$RO#t$RO#u$bO#v$SO#x$UO#z$WO#{$XO(aVO(r$YO(y#|O(z#}O~O!Y(hX~PHRO!Y([O~O!Y(uX!](uX!g(uX!k(uX(r(uX~O#`(uX#k#dX!^(uX~PJUO#`(]O!Y(wX!](wX~O!](^O!Y(vX~O!Y(aO~O#`$eO~PJUO!^(bO~P`OR#zO!Q#yO!S#{O!l#xO(aVOP!na[!naj!nar!na!]!na!p!na#R!na#n!na#o!na#p!na#q!na#r!na#s!na#t!na#u!na#v!na#x!na#z!na#{!na(r!na(y!na(z!na~Oa!na'z!na'w!na!Y!na!k!nav!na!_!na%i!na!g!na~PKlO!k(cO~O!g#vO#`(dO(r'pO!](tXa(tX'z(tX~O!k(tX~PNXO!S%hO!_%iO!|]O#i(iO#j(hO(T%gO~O!](jO!k(sX~O!k(lO~O!S%hO!_%iO#j(hO(T%gO~OP(gXR(gX[(gXj(gXr(gX!Q(gX!S(gX!](gX!l(gX!p(gX#R(gX#n(gX#o(gX#p(gX#q(gX#r(gX#s(gX#t(gX#u(gX#v(gX#x(gX#z(gX#{(gX(a(gX(r(gX(y(gX(z(gX~O!g#vO!k(gX~P! uOR(nO!Q(mO!l#xO#S$dO!|!{a!S!{a~O!x!{a%h!{a!_!{a#i!{a#j!{a(T!{a~P!#vO!x(rO~OPYOQYOSfOd!jOe!iOpkOrYOskOtkOzkO|YO!OYO!SWO!WkO!XkO!_XO!iuO!lZO!oYO!pYO!qYO!svO!u!gO!x!hO$W!kO$niO(T!dO(VTO(YUO(aVO(o[O~Oh%VOp%WOr%XOs$tOt$tOz%YO|%ZO!O<sO!S${O!_$|O!i>VO!l$xO#j<yO$W%`O$t<uO$v<wO$y%aO(T(vO(VTO(YUO(a$uO(y$}O(z%PO~O#k(xO~O![(zO!k(kP~P%[O(e(|O(o[O~O!S)OO!l#xO(e(|O(o[O~OP<UOQ<UOSfOd>ROe!iOpkOr<UOskOtkOzkO|<UO!O<UO!SWO!WkO!XkO!_!eO!i<XO!lZO!o<UO!p<UO!q<UO!s<YO!u<]O!x!hO$W!kO$n>PO(T)]O(VTO(YUO(aVO(o[O~O!]$_Oa$qa'z$qa'w$qa!k$qa!Y$qa!_$qa%i$qa!g$qa~Ol)dO~P!&zOh%VOp%WOr%XOs$tOt$tOz%YO|%ZO!O%]O!S${O!_$|O!i%bO!l$xO#j%cO$W%`O$t%^O$v%_O$y%aO(T(vO(VTO(YUO(a$uO(y$}O(z%PO~Og(pP~P!,TO!Q)iO!g)hO!_$^X$Z$^X$]$^X$_$^X$f$^X~O!g)hO!_({X$Z({X$]({X$_({X$f({X~O!Q)iO~P!.^O!Q)iO!_({X$Z({X$]({X$_({X$f({X~O!_)kO$Z)oO$])jO$_)jO$f)pO~O![)sO~P!)[O$]$hO$_$gO$f)wO~On$zX!Q$zX#S$zX'y$zX(y$zX(z$zX~OgmXg$zXnmX!]mX#`mX~P!0SOx)yO(b)zO(c)|O~On*VO!Q*OO'y*PO(y$}O(z%PO~Og)}O~P!1WOg*WO~Oh%VOr%XOs$tOt$tOz%YO|%ZO!O<sO!S*YO!_*ZO!i>VO!l$xO#j<yO$W%`O$t<uO$v<wO$y%aO(VTO(YUO(a$uO(y$}O(z%PO~Op*`O![*^O(T*XO!k)OP~P!1uO#k*aO~O!l*bO~Oh%VOp%WOr%XOs$tOt$tOz%YO|%ZO!O<sO!S${O!_$|O!i>VO!l$xO#j<yO$W%`O$t<uO$v<wO$y%aO(T*dO(VTO(YUO(a$uO(y$}O(z%PO~O![*gO!Y)PP~P!3tOr*sOs!nO!S*iO!b*qO!c*kO!d*kO!l*bO#[*rO%`*mO(U!lO(VTO(YUO(e!mO~O!^*pO~P!5iO#S$dOn(`X!Q(`X'y(`X(y(`X(z(`X!](`X#`(`X~Og(`X$O(`X~P!6kOn*xO#`*wOg(_X!](_X~O!]*yOg(^X~Oj%dOk%dOl%dO(T&ZOg(^P~Os*|O~Og)}O(T&ZO~O!l+SO~O(T(vO~Op+WO!S%hO![#iO!_%iO!|]O#i#lO#j#iO(T%gO!k(sP~O!g#vO#k+XO~O!S%hO![+ZO!](^O!_%iO(T%gO!Y(vP~Os'[O!S+]O![+[O(VTO(YUO(e(|O~O!^(xP~P!9|O!]+^Oa)TX'z)TX~OP$[OR#zO[$cOj$ROr$aO!Q#yO!S#{O!l#xO!p$[O#R$RO#n$OO#o$PO#p$PO#q$PO#r$QO#s$RO#t$RO#u$bO#v$SO#x$UO#z$WO#{$XO(aVO(r$YO(y#|O(z#}O~Oa!ja!]!ja'z!ja'w!ja!Y!ja!k!jav!ja!_!ja%i!ja!g!ja~P!:tOR#zO!Q#yO!S#{O!l#xO(aVOP!ra[!raj!rar!ra!]!ra!p!ra#R!ra#n!ra#o!ra#p!ra#q!ra#r!ra#s!ra#t!ra#u!ra#v!ra#x!ra#z!ra#{!ra(r!ra(y!ra(z!ra~Oa!ra'z!ra'w!ra!Y!ra!k!rav!ra!_!ra%i!ra!g!ra~P!=[OR#zO!Q#yO!S#{O!l#xO(aVOP!ta[!taj!tar!ta!]!ta!p!ta#R!ta#n!ta#o!ta#p!ta#q!ta#r!ta#s!ta#t!ta#u!ta#v!ta#x!ta#z!ta#{!ta(r!ta(y!ta(z!ta~Oa!ta'z!ta'w!ta!Y!ta!k!tav!ta!_!ta%i!ta!g!ta~P!?rOh%VOn+gO!_'`O%i+fO~O!g+iOa(]X!_(]X'z(]X!](]X~Oa%nO!_XO'z%nO~Oh%VO!l%eO~Oh%VO!l%eO(T%gO~O!g#vO#k(xO~Ob+tO%j+uO(T+qO(VTO(YUO!^)XP~O!]+vO`)WX~O[+zO~O`+{O~O!_&PO(T%gO(U!lO`)WP~O%j,OO~P;SOh%VO#`,SO~Oh%VOn,VO!_$|O~O!_,XO~O!Q,ZO!_XO~O%n%vO~O!x,`O~Oe,eO~Ob,fO(T#nO(VTO(YUO!^)VP~Oe%}O~O%j!QO(T&ZO~P=gO[,kO`,jO~OPYOQYOSfOdzOeyOpkOrYOskOtkOzkO|YO!OYO!SWO!WkO!XkO!iuO!lZO!oYO!pYO!qYO!svO!xxO!|]O$niO%h}O(VTO(YUO(aVO(o[O~O!_!eO!u!gO$W!kO(T!dO~P!FyO`,jOa%nO'z%nO~OPYOQYOSfOd!jOe!iOpkOrYOskOtkOzkO|YO!OYO!SWO!WkO!XkO!_!eO!iuO!lZO!oYO!pYO!qYO!svO!x!hO$W!kO$niO(T!dO(VTO(YUO(aVO(o[O~Oa,pOl!OO!uwO%l!OO%m!OO%n!OO~P!IcO!l&oO~O&^,vO~O!_,xO~O&o,zO&q,{OP&laQ&laS&laY&laa&lad&lae&lal&lap&lar&las&lat&laz&la|&la!O&la!S&la!W&la!X&la!_&la!i&la!l&la!o&la!p&la!q&la!s&la!u&la!x&la!|&la$W&la$n&la%h&la%j&la%l&la%m&la%n&la%q&la%s&la%v&la%w&la%y&la&W&la&^&la&`&la&b&la&d&la&g&la&m&la&s&la&u&la&w&la&y&la&{&la'w&la(T&la(V&la(Y&la(a&la(o&la!^&la&e&lab&la&j&la~O(T-QO~Oh!eX!]!RX!^!RX!g!RX!g!eX!l!eX#`!RX~O!]!eX!^!eX~P#!iO!g-VO#`-UOh(jX!]#hX!^#hX!g(jX!l(jX~O!](jX!^(jX~P##[Oh%VO!g-XO!l%eO!]!aX!^!aX~Os!nO!S!oO(VTO(YUO(e!mO~OP<UOQ<UOSfOd>ROe!iOpkOr<UOskOtkOzkO|<UO!O<UO!SWO!WkO!XkO!_!eO!i<XO!lZO!o<UO!p<UO!q<UO!s<YO!u<]O!x!hO$W!kO$n>PO(VTO(YUO(aVO(o[O~O(T=QO~P#$qO!]-]O!^(iX~O!^-_O~O!g-VO#`-UO!]#hX!^#hX~O!]-`O!^(xX~O!^-bO~O!c-cO!d-cO(U!lO~P#$`O!^-fO~P'_On-iO!_'`O~O!Y-nO~Os!{a!b!{a!c!{a!d!{a#T!{a#U!{a#V!{a#W!{a#X!{a#[!{a#]!{a(U!{a(V!{a(Y!{a(e!{a(o!{a~P!#vO!p-sO#`-qO~PChO!c-uO!d-uO(U!lO~PDWOa%nO#`-qO'z%nO~Oa%nO!g#vO#`-qO'z%nO~Oa%nO!g#vO!p-sO#`-qO'z%nO(r'pO~O(P'xO(Q'xO(R-zO~Ov-{O~O!Y'Wa!]'Wa~P!:tO![.PO!Y'WX!]'WX~P%[O!](VO!Y(ha~O!Y(ha~PHRO!](^O!Y(va~O!S%hO![.TO!_%iO(T%gO!Y'^X!]'^X~O#`.VO!](ta!k(taa(ta'z(ta~O!g#vO~P#,wO!](jO!k(sa~O!S%hO!_%iO#j.ZO(T%gO~Op.`O!S%hO![.]O!_%iO!|]O#i._O#j.]O(T%gO!]'aX!k'aX~OR.dO!l#xO~Oh%VOn.gO!_'`O%i.fO~Oa#ci!]#ci'z#ci'w#ci!Y#ci!k#civ#ci!_#ci%i#ci!g#ci~P!:tOn>]O!Q*OO'y*PO(y$}O(z%PO~O#k#_aa#_a#`#_a'z#_a!]#_a!k#_a!_#_a!Y#_a~P#/sO#k(`XP(`XR(`X[(`Xa(`Xj(`Xr(`X!S(`X!l(`X!p(`X#R(`X#n(`X#o(`X#p(`X#q(`X#r(`X#s(`X#t(`X#u(`X#v(`X#x(`X#z(`X#{(`X'z(`X(a(`X(r(`X!k(`X!Y(`X'w(`Xv(`X!_(`X%i(`X!g(`X~P!6kO!].tO!k(kX~P!:tO!k.wO~O!Y.yO~OP$[OR#zO!Q#yO!S#{O!l#xO!p$[O(aVO[#mia#mij#mir#mi!]#mi#R#mi#o#mi#p#mi#q#mi#r#mi#s#mi#t#mi#u#mi#v#mi#x#mi#z#mi#{#mi'z#mi(r#mi(y#mi(z#mi'w#mi!Y#mi!k#miv#mi!_#mi%i#mi!g#mi~O#n#mi~P#3cO#n$OO~P#3cOP$[OR#zOr$aO!Q#yO!S#{O!l#xO!p$[O#n$OO#o$PO#p$PO#q$PO(aVO[#mia#mij#mi!]#mi#R#mi#s#mi#t#mi#u#mi#v#mi#x#mi#z#mi#{#mi'z#mi(r#mi(y#mi(z#mi'w#mi!Y#mi!k#miv#mi!_#mi%i#mi!g#mi~O#r#mi~P#6QO#r$QO~P#6QOP$[OR#zO[$cOj$ROr$aO!Q#yO!S#{O!l#xO!p$[O#R$RO#n$OO#o$PO#p$PO#q$PO#r$QO#s$RO#t$RO#u$bO(aVOa#mi!]#mi#x#mi#z#mi#{#mi'z#mi(r#mi(y#mi(z#mi'w#mi!Y#mi!k#miv#mi!_#mi%i#mi!g#mi~O#v#mi~P#8oOP$[OR#zO[$cOj$ROr$aO!Q#yO!S#{O!l#xO!p$[O#R$RO#n$OO#o$PO#p$PO#q$PO#r$QO#s$RO#t$RO#u$bO#v$SO(aVO(z#}Oa#mi!]#mi#z#mi#{#mi'z#mi(r#mi(y#mi'w#mi!Y#mi!k#miv#mi!_#mi%i#mi!g#mi~O#x$UO~P#;VO#x#mi~P#;VO#v$SO~P#8oOP$[OR#zO[$cOj$ROr$aO!Q#yO!S#{O!l#xO!p$[O#R$RO#n$OO#o$PO#p$PO#q$PO#r$QO#s$RO#t$RO#u$bO#v$SO#x$UO(aVO(y#|O(z#}Oa#mi!]#mi#{#mi'z#mi(r#mi'w#mi!Y#mi!k#miv#mi!_#mi%i#mi!g#mi~O#z#mi~P#={O#z$WO~P#={OP]XR]X[]Xj]Xr]X!Q]X!S]X!l]X!p]X#R]X#S]X#`]X#kfX#n]X#o]X#p]X#q]X#r]X#s]X#t]X#u]X#v]X#x]X#z]X#{]X$Q]X(a]X(r]X(y]X(z]X!]]X!^]X~O$O]X~P#@jOP$[OR#zO[<mOj<bOr<kO!Q#yO!S#{O!l#xO!p$[O#R<bO#n<_O#o<`O#p<`O#q<`O#r<aO#s<bO#t<bO#u<lO#v<cO#x<eO#z<gO#{<hO(aVO(r$YO(y#|O(z#}O~O$O.{O~P#BwO#S$dO#`<nO$Q<nO$O(gX!^(gX~P! uOa'da!]'da'z'da'w'da!k'da!Y'dav'da!_'da%i'da!g'da~P!:tO[#mia#mij#mir#mi!]#mi#R#mi#r#mi#s#mi#t#mi#u#mi#v#mi#x#mi#z#mi#{#mi'z#mi(r#mi'w#mi!Y#mi!k#miv#mi!_#mi%i#mi!g#mi~OP$[OR#zO!Q#yO!S#{O!l#xO!p$[O#n$OO#o$PO#p$PO#q$PO(aVO(y#mi(z#mi~P#EyOn>]O!Q*OO'y*PO(y$}O(z%POP#miR#mi!S#mi!l#mi!p#mi#n#mi#o#mi#p#mi#q#mi(a#mi~P#EyO!]/POg(pX~P!1WOg/RO~Oa$Pi!]$Pi'z$Pi'w$Pi!Y$Pi!k$Piv$Pi!_$Pi%i$Pi!g$Pi~P!:tO$]/SO$_/SO~O$]/TO$_/TO~O!g)hO#`/UO!_$cX$Z$cX$]$cX$_$cX$f$cX~O![/VO~O!_)kO$Z/XO$])jO$_)jO$f/YO~O!]<iO!^(fX~P#BwO!^/ZO~O!g)hO$f({X~O$f/]O~Ov/^O~P!&zOx)yO(b)zO(c/aO~O!S/dO~O(y$}On%aa!Q%aa'y%aa(z%aa!]%aa#`%aa~Og%aa$O%aa~P#L{O(z%POn%ca!Q%ca'y%ca(y%ca!]%ca#`%ca~Og%ca$O%ca~P#MnO!]fX!gfX!kfX!k$zX(rfX~P!0SOp%WO![/mO!](^O(T/lO!Y(vP!Y)PP~P!1uOr*sO!b*qO!c*kO!d*kO!l*bO#[*rO%`*mO(U!lO(VTO(YUO~Os<}O!S/nO![+[O!^*pO(e<|O!^(xP~P$ [O!k/oO~P#/sO!]/pO!g#vO(r'pO!k)OX~O!k/uO~OnoX!QoX'yoX(yoX(zoX~O!g#vO!koX~P$#OOp/wO!S%hO![*^O!_%iO(T%gO!k)OP~O#k/xO~O!Y$zX!]$zX!g%RX~P!0SO!]/yO!Y)PX~P#/sO!g/{O~O!Y/}O~OpkO(T0OO~P.iOh%VOr0TO!g#vO!l%eO(r'pO~O!g+iO~Oa%nO!]0XO'z%nO~O!^0ZO~P!5iO!c0[O!d0[O(U!lO~P#$`Os!nO!S0]O(VTO(YUO(e!mO~O#[0_O~Og%aa!]%aa#`%aa$O%aa~P!1WOg%ca!]%ca#`%ca$O%ca~P!1WOj%dOk%dOl%dO(T&ZOg'mX!]'mX~O!]*yOg(^a~Og0hO~On0jO#`0iOg(_a!](_a~OR0kO!Q0kO!S0lO#S$dOn}a'y}a(y}a(z}a!]}a#`}a~Og}a$O}a~P$(cO!Q*OO'y*POn$sa(y$sa(z$sa!]$sa#`$sa~Og$sa$O$sa~P$)_O!Q*OO'y*POn$ua(y$ua(z$ua!]$ua#`$ua~Og$ua$O$ua~P$*QO#k0oO~Og%Ta!]%Ta#`%Ta$O%Ta~P!1WO!g#vO~O#k0rO~O!]+^Oa)Ta'z)Ta~OR#zO!Q#yO!S#{O!l#xO(aVOP!ri[!rij!rir!ri!]!ri!p!ri#R!ri#n!ri#o!ri#p!ri#q!ri#r!ri#s!ri#t!ri#u!ri#v!ri#x!ri#z!ri#{!ri(r!ri(y!ri(z!ri~Oa!ri'z!ri'w!ri!Y!ri!k!riv!ri!_!ri%i!ri!g!ri~P$+oOh%VOr%XOs$tOt$tOz%YO|%ZO!O<sO!S${O!_$|O!i>VO!l$xO#j<yO$W%`O$t<uO$v<wO$y%aO(VTO(YUO(a$uO(y$}O(z%PO~Op0{O%]0|O(T0zO~P$.VO!g+iOa(]a!_(]a'z(]a!](]a~O#k1SO~O[]X!]fX!^fX~O!]1TO!^)XX~O!^1VO~O[1WO~Ob1YO(T+qO(VTO(YUO~O!_&PO(T%gO`'uX!]'uX~O!]+vO`)Wa~O!k1]O~P!:tO[1`O~O`1aO~O#`1fO~On1iO!_$|O~O(e(|O!^)UP~Oh%VOn1rO!_1oO%i1qO~O[1|O!]1zO!^)VX~O!^1}O~O`2POa%nO'z%nO~O(T#nO(VTO(YUO~O#S$dO#`$eO$Q$eOP(gXR(gX[(gXr(gX!Q(gX!S(gX!](gX!l(gX!p(gX#R(gX#n(gX#o(gX#p(gX#q(gX#r(gX#s(gX#t(gX#u(gX#v(gX#x(gX#z(gX#{(gX(a(gX(r(gX(y(gX(z(gX~Oj2SO&[2TOa(gX~P$3pOj2SO#`$eO&[2TO~Oa2VO~P%[Oa2XO~O&e2[OP&ciQ&ciS&ciY&cia&cid&cie&cil&cip&cir&cis&cit&ciz&ci|&ci!O&ci!S&ci!W&ci!X&ci!_&ci!i&ci!l&ci!o&ci!p&ci!q&ci!s&ci!u&ci!x&ci!|&ci$W&ci$n&ci%h&ci%j&ci%l&ci%m&ci%n&ci%q&ci%s&ci%v&ci%w&ci%y&ci&W&ci&^&ci&`&ci&b&ci&d&ci&g&ci&m&ci&s&ci&u&ci&w&ci&y&ci&{&ci'w&ci(T&ci(V&ci(Y&ci(a&ci(o&ci!^&cib&ci&j&ci~Ob2bO!^2`O&j2aO~P`O!_XO!l2dO~O&q,{OP&liQ&liS&liY&lia&lid&lie&lil&lip&lir&lis&lit&liz&li|&li!O&li!S&li!W&li!X&li!_&li!i&li!l&li!o&li!p&li!q&li!s&li!u&li!x&li!|&li$W&li$n&li%h&li%j&li%l&li%m&li%n&li%q&li%s&li%v&li%w&li%y&li&W&li&^&li&`&li&b&li&d&li&g&li&m&li&s&li&u&li&w&li&y&li&{&li'w&li(T&li(V&li(Y&li(a&li(o&li!^&li&e&lib&li&j&li~O!Y2jO~O!]!aa!^!aa~P#BwOs!nO!S!oO![2pO(e!mO!]'XX!^'XX~P@nO!]-]O!^(ia~O!]'_X!^'_X~P!9|O!]-`O!^(xa~O!^2wO~P'_Oa%nO#`3QO'z%nO~Oa%nO!g#vO#`3QO'z%nO~Oa%nO!g#vO!p3UO#`3QO'z%nO(r'pO~Oa%nO'z%nO~P!:tO!]$_Ov$qa~O!Y'Wi!]'Wi~P!:tO!](VO!Y(hi~O!](^O!Y(vi~O!Y(wi!](wi~P!:tO!](ti!k(tia(ti'z(ti~P!:tO#`3WO!](ti!k(tia(ti'z(ti~O!](jO!k(si~O!S%hO!_%iO!|]O#i3]O#j3[O(T%gO~O!S%hO!_%iO#j3[O(T%gO~On3dO!_'`O%i3cO~Oh%VOn3dO!_'`O%i3cO~O#k%aaP%aaR%aa[%aaa%aaj%aar%aa!S%aa!l%aa!p%aa#R%aa#n%aa#o%aa#p%aa#q%aa#r%aa#s%aa#t%aa#u%aa#v%aa#x%aa#z%aa#{%aa'z%aa(a%aa(r%aa!k%aa!Y%aa'w%aav%aa!_%aa%i%aa!g%aa~P#L{O#k%caP%caR%ca[%caa%caj%car%ca!S%ca!l%ca!p%ca#R%ca#n%ca#o%ca#p%ca#q%ca#r%ca#s%ca#t%ca#u%ca#v%ca#x%ca#z%ca#{%ca'z%ca(a%ca(r%ca!k%ca!Y%ca'w%cav%ca!_%ca%i%ca!g%ca~P#MnO#k%aaP%aaR%aa[%aaa%aaj%aar%aa!S%aa!]%aa!l%aa!p%aa#R%aa#n%aa#o%aa#p%aa#q%aa#r%aa#s%aa#t%aa#u%aa#v%aa#x%aa#z%aa#{%aa'z%aa(a%aa(r%aa!k%aa!Y%aa'w%aa#`%aav%aa!_%aa%i%aa!g%aa~P#/sO#k%caP%caR%ca[%caa%caj%car%ca!S%ca!]%ca!l%ca!p%ca#R%ca#n%ca#o%ca#p%ca#q%ca#r%ca#s%ca#t%ca#u%ca#v%ca#x%ca#z%ca#{%ca'z%ca(a%ca(r%ca!k%ca!Y%ca'w%ca#`%cav%ca!_%ca%i%ca!g%ca~P#/sO#k}aP}a[}aa}aj}ar}a!l}a!p}a#R}a#n}a#o}a#p}a#q}a#r}a#s}a#t}a#u}a#v}a#x}a#z}a#{}a'z}a(a}a(r}a!k}a!Y}a'w}av}a!_}a%i}a!g}a~P$(cO#k$saP$saR$sa[$saa$saj$sar$sa!S$sa!l$sa!p$sa#R$sa#n$sa#o$sa#p$sa#q$sa#r$sa#s$sa#t$sa#u$sa#v$sa#x$sa#z$sa#{$sa'z$sa(a$sa(r$sa!k$sa!Y$sa'w$sav$sa!_$sa%i$sa!g$sa~P$)_O#k$uaP$uaR$ua[$uaa$uaj$uar$ua!S$ua!l$ua!p$ua#R$ua#n$ua#o$ua#p$ua#q$ua#r$ua#s$ua#t$ua#u$ua#v$ua#x$ua#z$ua#{$ua'z$ua(a$ua(r$ua!k$ua!Y$ua'w$uav$ua!_$ua%i$ua!g$ua~P$*QO#k%TaP%TaR%Ta[%Taa%Taj%Tar%Ta!S%Ta!]%Ta!l%Ta!p%Ta#R%Ta#n%Ta#o%Ta#p%Ta#q%Ta#r%Ta#s%Ta#t%Ta#u%Ta#v%Ta#x%Ta#z%Ta#{%Ta'z%Ta(a%Ta(r%Ta!k%Ta!Y%Ta'w%Ta#`%Tav%Ta!_%Ta%i%Ta!g%Ta~P#/sOa#cq!]#cq'z#cq'w#cq!Y#cq!k#cqv#cq!_#cq%i#cq!g#cq~P!:tO![3lO!]'YX!k'YX~P%[O!].tO!k(ka~O!].tO!k(ka~P!:tO!Y3oO~O$O!na!^!na~PKlO$O!ja!]!ja!^!ja~P#BwO$O!ra!^!ra~P!=[O$O!ta!^!ta~P!?rOg']X!]']X~P!,TO!]/POg(pa~OSfO!_4TO$d4UO~O!^4YO~Ov4ZO~P#/sOa$mq!]$mq'z$mq'w$mq!Y$mq!k$mqv$mq!_$mq%i$mq!g$mq~P!:tO!Y4]O~P!&zO!S4^O~O!Q*OO'y*PO(z%POn'ia(y'ia!]'ia#`'ia~Og'ia$O'ia~P%-fO!Q*OO'y*POn'ka(y'ka(z'ka!]'ka#`'ka~Og'ka$O'ka~P%.XO(r$YO~P#/sO!YfX!Y$zX!]fX!]$zX!g%RX#`fX~P!0SOp%WO(T=WO~P!1uOp4bO!S%hO![4aO!_%iO(T%gO!]'eX!k'eX~O!]/pO!k)Oa~O!]/pO!g#vO!k)Oa~O!]/pO!g#vO(r'pO!k)Oa~Og$|i!]$|i#`$|i$O$|i~P!1WO![4jO!Y'gX!]'gX~P!3tO!]/yO!Y)Pa~O!]/yO!Y)Pa~P#/sOP]XR]X[]Xj]Xr]X!Q]X!S]X!Y]X!]]X!l]X!p]X#R]X#S]X#`]X#kfX#n]X#o]X#p]X#q]X#r]X#s]X#t]X#u]X#v]X#x]X#z]X#{]X$Q]X(a]X(r]X(y]X(z]X~Oj%YX!g%YX~P%2OOj4oO!g#vO~Oh%VO!g#vO!l%eO~Oh%VOr4tO!l%eO(r'pO~Or4yO!g#vO(r'pO~Os!nO!S4zO(VTO(YUO(e!mO~O(y$}On%ai!Q%ai'y%ai(z%ai!]%ai#`%ai~Og%ai$O%ai~P%5oO(z%POn%ci!Q%ci'y%ci(y%ci!]%ci#`%ci~Og%ci$O%ci~P%6bOg(_i!](_i~P!1WO#`5QOg(_i!](_i~P!1WO!k5VO~Oa$oq!]$oq'z$oq'w$oq!Y$oq!k$oqv$oq!_$oq%i$oq!g$oq~P!:tO!Y5ZO~O!]5[O!_)QX~P#/sOa$zX!_$zX%^]X'z$zX!]$zX~P!0SO%^5_OaoX!_oX'zoX!]oX~P$#OOp5`O(T#nO~O%^5_O~Ob5fO%j5gO(T+qO(VTO(YUO!]'tX!^'tX~O!]1TO!^)Xa~O[5kO~O`5lO~O[5pO~Oa%nO'z%nO~P#/sO!]5uO#`5wO!^)UX~O!^5xO~Or6OOs!nO!S*iO!b!yO!c!vO!d!vO!|<VO#T!pO#U!pO#V!pO#W!pO#X!pO#[5}O#]!zO(U!lO(VTO(YUO(e!mO(o!sO~O!^5|O~P%;eOn6TO!_1oO%i6SO~Oh%VOn6TO!_1oO%i6SO~Ob6[O(T#nO(VTO(YUO!]'sX!^'sX~O!]1zO!^)Va~O(VTO(YUO(e6^O~O`6bO~Oj6eO&[6fO~PNXO!k6gO~P%[Oa6iO~Oa6iO~P%[Ob2bO!^6nO&j2aO~P`O!g6pO~O!g6rOh(ji!](ji!^(ji!g(ji!l(jir(ji(r(ji~O!]#hi!^#hi~P#BwO#`6sO!]#hi!^#hi~O!]!ai!^!ai~P#BwOa%nO#`6|O'z%nO~Oa%nO!g#vO#`6|O'z%nO~O!](tq!k(tqa(tq'z(tq~P!:tO!](jO!k(sq~O!S%hO!_%iO#j7TO(T%gO~O!_'`O%i7WO~On7[O!_'`O%i7WO~O#k'iaP'iaR'ia['iaa'iaj'iar'ia!S'ia!l'ia!p'ia#R'ia#n'ia#o'ia#p'ia#q'ia#r'ia#s'ia#t'ia#u'ia#v'ia#x'ia#z'ia#{'ia'z'ia(a'ia(r'ia!k'ia!Y'ia'w'iav'ia!_'ia%i'ia!g'ia~P%-fO#k'kaP'kaR'ka['kaa'kaj'kar'ka!S'ka!l'ka!p'ka#R'ka#n'ka#o'ka#p'ka#q'ka#r'ka#s'ka#t'ka#u'ka#v'ka#x'ka#z'ka#{'ka'z'ka(a'ka(r'ka!k'ka!Y'ka'w'kav'ka!_'ka%i'ka!g'ka~P%.XO#k$|iP$|iR$|i[$|ia$|ij$|ir$|i!S$|i!]$|i!l$|i!p$|i#R$|i#n$|i#o$|i#p$|i#q$|i#r$|i#s$|i#t$|i#u$|i#v$|i#x$|i#z$|i#{$|i'z$|i(a$|i(r$|i!k$|i!Y$|i'w$|i#`$|iv$|i!_$|i%i$|i!g$|i~P#/sO#k%aiP%aiR%ai[%aia%aij%air%ai!S%ai!l%ai!p%ai#R%ai#n%ai#o%ai#p%ai#q%ai#r%ai#s%ai#t%ai#u%ai#v%ai#x%ai#z%ai#{%ai'z%ai(a%ai(r%ai!k%ai!Y%ai'w%aiv%ai!_%ai%i%ai!g%ai~P%5oO#k%ciP%ciR%ci[%cia%cij%cir%ci!S%ci!l%ci!p%ci#R%ci#n%ci#o%ci#p%ci#q%ci#r%ci#s%ci#t%ci#u%ci#v%ci#x%ci#z%ci#{%ci'z%ci(a%ci(r%ci!k%ci!Y%ci'w%civ%ci!_%ci%i%ci!g%ci~P%6bO!]'Ya!k'Ya~P!:tO!].tO!k(ki~O$O#ci!]#ci!^#ci~P#BwOP$[OR#zO!Q#yO!S#{O!l#xO!p$[O(aVO[#mij#mir#mi#R#mi#o#mi#p#mi#q#mi#r#mi#s#mi#t#mi#u#mi#v#mi#x#mi#z#mi#{#mi$O#mi(r#mi(y#mi(z#mi!]#mi!^#mi~O#n#mi~P%NdO#n<_O~P%NdOP$[OR#zOr<kO!Q#yO!S#{O!l#xO!p$[O#n<_O#o<`O#p<`O#q<`O(aVO[#mij#mi#R#mi#s#mi#t#mi#u#mi#v#mi#x#mi#z#mi#{#mi$O#mi(r#mi(y#mi(z#mi!]#mi!^#mi~O#r#mi~P&!lO#r<aO~P&!lOP$[OR#zO[<mOj<bOr<kO!Q#yO!S#{O!l#xO!p$[O#R<bO#n<_O#o<`O#p<`O#q<`O#r<aO#s<bO#t<bO#u<lO(aVO#x#mi#z#mi#{#mi$O#mi(r#mi(y#mi(z#mi!]#mi!^#mi~O#v#mi~P&$tOP$[OR#zO[<mOj<bOr<kO!Q#yO!S#{O!l#xO!p$[O#R<bO#n<_O#o<`O#p<`O#q<`O#r<aO#s<bO#t<bO#u<lO#v<cO(aVO(z#}O#z#mi#{#mi$O#mi(r#mi(y#mi!]#mi!^#mi~O#x<eO~P&&uO#x#mi~P&&uO#v<cO~P&$tOP$[OR#zO[<mOj<bOr<kO!Q#yO!S#{O!l#xO!p$[O#R<bO#n<_O#o<`O#p<`O#q<`O#r<aO#s<bO#t<bO#u<lO#v<cO#x<eO(aVO(y#|O(z#}O#{#mi$O#mi(r#mi!]#mi!^#mi~O#z#mi~P&)UO#z<gO~P&)UOa#|y!]#|y'z#|y'w#|y!Y#|y!k#|yv#|y!_#|y%i#|y!g#|y~P!:tO[#mij#mir#mi#R#mi#r#mi#s#mi#t#mi#u#mi#v#mi#x#mi#z#mi#{#mi$O#mi(r#mi!]#mi!^#mi~OP$[OR#zO!Q#yO!S#{O!l#xO!p$[O#n<_O#o<`O#p<`O#q<`O(aVO(y#mi(z#mi~P&,QOn>^O!Q*OO'y*PO(y$}O(z%POP#miR#mi!S#mi!l#mi!p#mi#n#mi#o#mi#p#mi#q#mi(a#mi~P&,QO#S$dOP(`XR(`X[(`Xj(`Xn(`Xr(`X!Q(`X!S(`X!l(`X!p(`X#R(`X#n(`X#o(`X#p(`X#q(`X#r(`X#s(`X#t(`X#u(`X#v(`X#x(`X#z(`X#{(`X$O(`X'y(`X(a(`X(r(`X(y(`X(z(`X!](`X!^(`X~O$O$Pi!]$Pi!^$Pi~P#BwO$O!ri!^!ri~P$+oOg']a!]']a~P!1WO!^7nO~O!]'da!^'da~P#BwO!Y7oO~P#/sO!g#vO(r'pO!]'ea!k'ea~O!]/pO!k)Oi~O!]/pO!g#vO!k)Oi~Og$|q!]$|q#`$|q$O$|q~P!1WO!Y'ga!]'ga~P#/sO!g7vO~O!]/yO!Y)Pi~P#/sO!]/yO!Y)Pi~O!Y7yO~Oh%VOr8OO!l%eO(r'pO~Oj8QO!g#vO~Or8TO!g#vO(r'pO~O!Q*OO'y*PO(z%POn'ja(y'ja!]'ja#`'ja~Og'ja$O'ja~P&5RO!Q*OO'y*POn'la(y'la(z'la!]'la#`'la~Og'la$O'la~P&5tOg(_q!](_q~P!1WO#`8VOg(_q!](_q~P!1WO!Y8WO~Og%Oq!]%Oq#`%Oq$O%Oq~P!1WOa$oy!]$oy'z$oy'w$oy!Y$oy!k$oyv$oy!_$oy%i$oy!g$oy~P!:tO!g6rO~O!]5[O!_)Qa~O!_'`OP$TaR$Ta[$Taj$Tar$Ta!Q$Ta!S$Ta!]$Ta!l$Ta!p$Ta#R$Ta#n$Ta#o$Ta#p$Ta#q$Ta#r$Ta#s$Ta#t$Ta#u$Ta#v$Ta#x$Ta#z$Ta#{$Ta(a$Ta(r$Ta(y$Ta(z$Ta~O%i7WO~P&8fO%^8[Oa%[i!_%[i'z%[i!]%[i~Oa#cy!]#cy'z#cy'w#cy!Y#cy!k#cyv#cy!_#cy%i#cy!g#cy~P!:tO[8^O~Ob8`O(T+qO(VTO(YUO~O!]1TO!^)Xi~O`8dO~O(e(|O!]'pX!^'pX~O!]5uO!^)Ua~O!^8nO~P%;eO(o!sO~P$&YO#[8oO~O!_1oO~O!_1oO%i8qO~On8tO!_1oO%i8qO~O[8yO!]'sa!^'sa~O!]1zO!^)Vi~O!k8}O~O!k9OO~O!k9RO~O!k9RO~P%[Oa9TO~O!g9UO~O!k9VO~O!](wi!^(wi~P#BwOa%nO#`9_O'z%nO~O!](ty!k(tya(ty'z(ty~P!:tO!](jO!k(sy~O%i9bO~P&8fO!_'`O%i9bO~O#k$|qP$|qR$|q[$|qa$|qj$|qr$|q!S$|q!]$|q!l$|q!p$|q#R$|q#n$|q#o$|q#p$|q#q$|q#r$|q#s$|q#t$|q#u$|q#v$|q#x$|q#z$|q#{$|q'z$|q(a$|q(r$|q!k$|q!Y$|q'w$|q#`$|qv$|q!_$|q%i$|q!g$|q~P#/sO#k'jaP'jaR'ja['jaa'jaj'jar'ja!S'ja!l'ja!p'ja#R'ja#n'ja#o'ja#p'ja#q'ja#r'ja#s'ja#t'ja#u'ja#v'ja#x'ja#z'ja#{'ja'z'ja(a'ja(r'ja!k'ja!Y'ja'w'jav'ja!_'ja%i'ja!g'ja~P&5RO#k'laP'laR'la['laa'laj'lar'la!S'la!l'la!p'la#R'la#n'la#o'la#p'la#q'la#r'la#s'la#t'la#u'la#v'la#x'la#z'la#{'la'z'la(a'la(r'la!k'la!Y'la'w'lav'la!_'la%i'la!g'la~P&5tO#k%OqP%OqR%Oq[%Oqa%Oqj%Oqr%Oq!S%Oq!]%Oq!l%Oq!p%Oq#R%Oq#n%Oq#o%Oq#p%Oq#q%Oq#r%Oq#s%Oq#t%Oq#u%Oq#v%Oq#x%Oq#z%Oq#{%Oq'z%Oq(a%Oq(r%Oq!k%Oq!Y%Oq'w%Oq#`%Oqv%Oq!_%Oq%i%Oq!g%Oq~P#/sO!]'Yi!k'Yi~P!:tO$O#cq!]#cq!^#cq~P#BwO(y$}OP%aaR%aa[%aaj%aar%aa!S%aa!l%aa!p%aa#R%aa#n%aa#o%aa#p%aa#q%aa#r%aa#s%aa#t%aa#u%aa#v%aa#x%aa#z%aa#{%aa$O%aa(a%aa(r%aa!]%aa!^%aa~On%aa!Q%aa'y%aa(z%aa~P&IyO(z%POP%caR%ca[%caj%car%ca!S%ca!l%ca!p%ca#R%ca#n%ca#o%ca#p%ca#q%ca#r%ca#s%ca#t%ca#u%ca#v%ca#x%ca#z%ca#{%ca$O%ca(a%ca(r%ca!]%ca!^%ca~On%ca!Q%ca'y%ca(y%ca~P&LQOn>^O!Q*OO'y*PO(z%PO~P&IyOn>^O!Q*OO'y*PO(y$}O~P&LQOR0kO!Q0kO!S0lO#S$dOP}a[}aj}an}ar}a!l}a!p}a#R}a#n}a#o}a#p}a#q}a#r}a#s}a#t}a#u}a#v}a#x}a#z}a#{}a$O}a'y}a(a}a(r}a(y}a(z}a!]}a!^}a~O!Q*OO'y*POP$saR$sa[$saj$san$sar$sa!S$sa!l$sa!p$sa#R$sa#n$sa#o$sa#p$sa#q$sa#r$sa#s$sa#t$sa#u$sa#v$sa#x$sa#z$sa#{$sa$O$sa(a$sa(r$sa(y$sa(z$sa!]$sa!^$sa~O!Q*OO'y*POP$uaR$ua[$uaj$uan$uar$ua!S$ua!l$ua!p$ua#R$ua#n$ua#o$ua#p$ua#q$ua#r$ua#s$ua#t$ua#u$ua#v$ua#x$ua#z$ua#{$ua$O$ua(a$ua(r$ua(y$ua(z$ua!]$ua!^$ua~On>^O!Q*OO'y*PO(y$}O(z%PO~OP%TaR%Ta[%Taj%Tar%Ta!S%Ta!l%Ta!p%Ta#R%Ta#n%Ta#o%Ta#p%Ta#q%Ta#r%Ta#s%Ta#t%Ta#u%Ta#v%Ta#x%Ta#z%Ta#{%Ta$O%Ta(a%Ta(r%Ta!]%Ta!^%Ta~P''VO$O$mq!]$mq!^$mq~P#BwO$O$oq!]$oq!^$oq~P#BwO!^9oO~O$O9pO~P!1WO!g#vO!]'ei!k'ei~O!g#vO(r'pO!]'ei!k'ei~O!]/pO!k)Oq~O!Y'gi!]'gi~P#/sO!]/yO!Y)Pq~Or9wO!g#vO(r'pO~O[9yO!Y9xO~P#/sO!Y9xO~Oj:PO!g#vO~Og(_y!](_y~P!1WO!]'na!_'na~P#/sOa%[q!_%[q'z%[q!]%[q~P#/sO[:UO~O!]1TO!^)Xq~O`:YO~O#`:ZO!]'pa!^'pa~O!]5uO!^)Ui~P#BwO!S:]O~O!_1oO%i:`O~O(VTO(YUO(e:eO~O!]1zO!^)Vq~O!k:hO~O!k:iO~O!k:jO~O!k:jO~P%[O#`:mO!]#hy!^#hy~O!]#hy!^#hy~P#BwO%i:rO~P&8fO!_'`O%i:rO~O$O#|y!]#|y!^#|y~P#BwOP$|iR$|i[$|ij$|ir$|i!S$|i!l$|i!p$|i#R$|i#n$|i#o$|i#p$|i#q$|i#r$|i#s$|i#t$|i#u$|i#v$|i#x$|i#z$|i#{$|i$O$|i(a$|i(r$|i!]$|i!^$|i~P''VO!Q*OO'y*PO(z%POP'iaR'ia['iaj'ian'iar'ia!S'ia!l'ia!p'ia#R'ia#n'ia#o'ia#p'ia#q'ia#r'ia#s'ia#t'ia#u'ia#v'ia#x'ia#z'ia#{'ia$O'ia(a'ia(r'ia(y'ia!]'ia!^'ia~O!Q*OO'y*POP'kaR'ka['kaj'kan'kar'ka!S'ka!l'ka!p'ka#R'ka#n'ka#o'ka#p'ka#q'ka#r'ka#s'ka#t'ka#u'ka#v'ka#x'ka#z'ka#{'ka$O'ka(a'ka(r'ka(y'ka(z'ka!]'ka!^'ka~O(y$}OP%aiR%ai[%aij%ain%air%ai!Q%ai!S%ai!l%ai!p%ai#R%ai#n%ai#o%ai#p%ai#q%ai#r%ai#s%ai#t%ai#u%ai#v%ai#x%ai#z%ai#{%ai$O%ai'y%ai(a%ai(r%ai(z%ai!]%ai!^%ai~O(z%POP%ciR%ci[%cij%cin%cir%ci!Q%ci!S%ci!l%ci!p%ci#R%ci#n%ci#o%ci#p%ci#q%ci#r%ci#s%ci#t%ci#u%ci#v%ci#x%ci#z%ci#{%ci$O%ci'y%ci(a%ci(r%ci(y%ci!]%ci!^%ci~O$O$oy!]$oy!^$oy~P#BwO$O#cy!]#cy!^#cy~P#BwO!g#vO!]'eq!k'eq~O!]/pO!k)Oy~O!Y'gq!]'gq~P#/sOr:|O!g#vO(r'pO~O[;QO!Y;PO~P#/sO!Y;PO~Og(_!R!](_!R~P!1WOa%[y!_%[y'z%[y!]%[y~P#/sO!]1TO!^)Xy~O!]5uO!^)Uq~O(T;XO~O!_1oO%i;[O~O!k;_O~O%i;dO~P&8fOP$|qR$|q[$|qj$|qr$|q!S$|q!l$|q!p$|q#R$|q#n$|q#o$|q#p$|q#q$|q#r$|q#s$|q#t$|q#u$|q#v$|q#x$|q#z$|q#{$|q$O$|q(a$|q(r$|q!]$|q!^$|q~P''VO!Q*OO'y*PO(z%POP'jaR'ja['jaj'jan'jar'ja!S'ja!l'ja!p'ja#R'ja#n'ja#o'ja#p'ja#q'ja#r'ja#s'ja#t'ja#u'ja#v'ja#x'ja#z'ja#{'ja$O'ja(a'ja(r'ja(y'ja!]'ja!^'ja~O!Q*OO'y*POP'laR'la['laj'lan'lar'la!S'la!l'la!p'la#R'la#n'la#o'la#p'la#q'la#r'la#s'la#t'la#u'la#v'la#x'la#z'la#{'la$O'la(a'la(r'la(y'la(z'la!]'la!^'la~OP%OqR%Oq[%Oqj%Oqr%Oq!S%Oq!l%Oq!p%Oq#R%Oq#n%Oq#o%Oq#p%Oq#q%Oq#r%Oq#s%Oq#t%Oq#u%Oq#v%Oq#x%Oq#z%Oq#{%Oq$O%Oq(a%Oq(r%Oq!]%Oq!^%Oq~P''VOg%e!Z!]%e!Z#`%e!Z$O%e!Z~P!1WO!Y;hO~P#/sOr;iO!g#vO(r'pO~O[;kO!Y;hO~P#/sO!]'pq!^'pq~P#BwO!]#h!Z!^#h!Z~P#BwO#k%e!ZP%e!ZR%e!Z[%e!Za%e!Zj%e!Zr%e!Z!S%e!Z!]%e!Z!l%e!Z!p%e!Z#R%e!Z#n%e!Z#o%e!Z#p%e!Z#q%e!Z#r%e!Z#s%e!Z#t%e!Z#u%e!Z#v%e!Z#x%e!Z#z%e!Z#{%e!Z'z%e!Z(a%e!Z(r%e!Z!k%e!Z!Y%e!Z'w%e!Z#`%e!Zv%e!Z!_%e!Z%i%e!Z!g%e!Z~P#/sOr;tO!g#vO(r'pO~O!Y;uO~P#/sOr;|O!g#vO(r'pO~O!Y;}O~P#/sOP%e!ZR%e!Z[%e!Zj%e!Zr%e!Z!S%e!Z!l%e!Z!p%e!Z#R%e!Z#n%e!Z#o%e!Z#p%e!Z#q%e!Z#r%e!Z#s%e!Z#t%e!Z#u%e!Z#v%e!Z#x%e!Z#z%e!Z#{%e!Z$O%e!Z(a%e!Z(r%e!Z!]%e!Z!^%e!Z~P''VOr<QO!g#vO(r'pO~Ov(fX~P1qO!Q%rO~P!)[O(U!lO~P!)[O!YfX!]fX#`fX~P%2OOP]XR]X[]Xj]Xr]X!Q]X!S]X!]]X!]fX!l]X!p]X#R]X#S]X#`]X#`fX#kfX#n]X#o]X#p]X#q]X#r]X#s]X#t]X#u]X#v]X#x]X#z]X#{]X$Q]X(a]X(r]X(y]X(z]X~O!gfX!k]X!kfX(rfX~P'LTOP<UOQ<UOSfOd>ROe!iOpkOr<UOskOtkOzkO|<UO!O<UO!SWO!WkO!XkO!_XO!i<XO!lZO!o<UO!p<UO!q<UO!s<YO!u<]O!x!hO$W!kO$n>PO(T)]O(VTO(YUO(aVO(o[O~O!]<iO!^$qa~Oh%VOp%WOr%XOs$tOt$tOz%YO|%ZO!O<tO!S${O!_$|O!i>WO!l$xO#j<zO$W%`O$t<vO$v<xO$y%aO(T(vO(VTO(YUO(a$uO(y$}O(z%PO~Ol)dO~P(!yOr!eX(r!eX~P#!iOr(jX(r(jX~P##[O!^]X!^fX~P'LTO!YfX!Y$zX!]fX!]$zX#`fX~P!0SO#k<^O~O!g#vO#k<^O~O#`<nO~Oj<bO~O#`=OO!](wX!^(wX~O#`<nO!](uX!^(uX~O#k=PO~Og=RO~P!1WO#k=XO~O#k=YO~Og=RO(T&ZO~O!g#vO#k=ZO~O!g#vO#k=PO~O$O=[O~P#BwO#k=]O~O#k=^O~O#k=cO~O#k=dO~O#k=eO~O#k=fO~O$O=gO~P!1WO$O=hO~P!1WOl=sO~P7eOk#S#T#U#W#X#[#i#j#u$n$t$v$y%]%^%h%i%j%q%s%v%w%y%{~(OT#o!X'|(U#ps#n#qr!Q'}$]'}(T$_(e~",
  goto: "$9Y)]PPPPPP)^PP)aP)rP+W/]PPPP6mPP7TPP=QPPP@tPA^PA^PPPA^PCfPA^PA^PA^PCjPCoPD^PIWPPPI[PPPPI[L_PPPLeMVPI[PI[PP! eI[PPPI[PI[P!#lI[P!'S!(X!(bP!)U!)Y!)U!,gPPPPPPP!-W!(XPP!-h!/YP!2iI[I[!2n!5z!:h!:h!>gPPP!>oI[PPPPPPPPP!BOP!C]PPI[!DnPI[PI[I[I[I[I[PI[!FQP!I[P!LbP!Lf!Lp!Lt!LtP!IXP!Lx!LxP#!OP#!SI[PI[#!Y#%_CjA^PA^PA^A^P#&lA^A^#)OA^#+vA^#.SA^A^#.r#1W#1W#1]#1f#1W#1qPP#1WPA^#2ZA^#6YA^A^6mPPP#:_PPP#:x#:xP#:xP#;`#:xPP#;fP#;]P#;]#;y#;]#<e#<k#<n)aP#<q)aP#<z#<z#<zP)aP)aP)aP)aPP)aP#=Q#=TP#=T)aP#=XP#=[P)aP)aP)aP)aP)aP)a)aPP#=b#=h#=s#=y#>P#>V#>]#>k#>q#>{#?R#?]#?c#?s#?y#@k#@}#AT#AZ#Ai#BO#Cs#DR#DY#Et#FS#Gt#HS#HY#H`#Hf#Hp#Hv#H|#IW#Ij#IpPPPPPPPPPPP#IvPPPPPPP#Jk#Mx$ b$ i$ qPPP$']P$'f$*_$0x$0{$1O$1}$2Q$2X$2aP$2g$2jP$3W$3[$4S$5b$5g$5}PP$6S$6Y$6^$6a$6e$6i$7e$7|$8e$8i$8l$8o$8y$8|$9Q$9UR!|RoqOXst!Z#d%m&r&t&u&w,s,x2[2_Y!vQ'`-e1o5{Q%tvQ%|yQ&T|Q&j!VS'W!e-]Q'f!iS'l!r!yU*k$|*Z*oQ+o%}S+|&V&WQ,d&dQ-c'_Q-m'gQ-u'mQ0[*qQ1b,OQ1y,eR<{<Y%SdOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$_$a$e%m%t&R&k&n&r&t&u&w&{'T'b'r(T(V(](d(x(z)O)}*i+X+],p,s,x-i-q.P.V.t.{/n0]0l0r1S1r2S2T2V2X2[2_2a3Q3W3l4z6T6e6f6i6|8t9T9_S#q]<V!r)_$Z$n'X)s-U-X/V2p4T5w6s:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>SU+P%]<s<tQ+t&PQ,f&gQ,m&oQ0x+gQ0}+iQ1Y+uQ2R,kQ3`.gQ5`0|Q5f1TQ6[1zQ7Y3dQ8`5gR9e7['QkOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n%m%t&R&k&n&o&r&t&u&w&{'T'X'b'r(T(V(](d(x(z)O)s)}*i+X+]+g,p,s,x-U-X-i-q.P.V.g.t.{/V/n0]0l0r1S1r2S2T2V2X2[2_2a2p3Q3W3d3l4T4z5w6T6e6f6i6s6|7[8t9T9_:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>S!S!nQ!r!v!y!z$|'W'_'`'l'm'n*k*o*q*r-]-c-e-u0[0_1o5{5}%[$ti#v$b$c$d$x${%O%Q%^%_%c)y*R*T*V*Y*a*g*w*x+f+i,S,V.f/P/d/m/x/y/{0`0b0i0j0o1f1i1q3c4^4_4j4o5Q5[5_6S7W7v8Q8V8[8q9b9p9y:P:`:r;Q;[;d;k<l<m<o<p<q<r<u<v<w<x<y<z=S=T=U=V=X=Y=]=^=_=`=a=b=c=d=g=h>P>X>Y>]>^Q&X|Q'U!eS'[%i-`Q+t&PQ,P&WQ,f&gQ0n+SQ1Y+uQ1_+{Q2Q,jQ2R,kQ5f1TQ5o1aQ6[1zQ6_1|Q6`2PQ8`5gQ8c5lQ8|6bQ:X8dQ:f8yQ;V:YR<}*ZrnOXst!V!Z#d%m&i&r&t&u&w,s,x2[2_R,h&k&z^OPXYstuvwz!Z!`!g!j!o#S#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n%m%t&R&k&n&o&r&t&u&w&{'T'b'r(V(](d(x(z)O)s)}*i+X+]+g,p,s,x-U-X-i-q.P.V.g.t.{/V/n0]0l0r1S1r2S2T2V2X2[2_2a2p3Q3W3d3l4T4z5w6T6e6f6i6s6|7[8t9T9_:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>R>S[#]WZ#W#Z'X(T!b%jm#h#i#l$x%e%h(^(h(i(j*Y*^*b+Z+[+^,o-V.T.Z.[.]._/m/p2d3[3]4a6r7TQ%wxQ%{yW&Q|&V&W,OQ&_!TQ'c!hQ'e!iQ(q#sS+n%|%}Q+r&PQ,_&bQ,c&dS-l'f'gQ.i(rQ1R+oQ1X+uQ1Z+vQ1^+zQ1t,`S1x,d,eQ2|-mQ5e1TQ5i1WQ5n1`Q6Z1yQ8_5gQ8b5kQ8f5pQ:T8^R;T:U!U$zi$d%O%Q%^%_%c*R*T*a*w*x/P/x0`0b0i0j0o4_5Q8V9p>P>X>Y!^%yy!i!u%{%|%}'V'e'f'g'k'u*j+n+o-Y-l-m-t0R0U1R2u2|3T4r4s4v7}9{Q+h%wQ,T&[Q,W&]Q,b&dQ.h(qQ1s,_U1w,c,d,eQ3e.iQ6U1tS6Y1x1yQ8x6Z#f>T#v$b$c$x${)y*V*Y*g+f+i,S,V.f/d/m/y/{1f1i1q3c4^4j4o5[5_6S7W7v8Q8[8q9b9y:P:`:r;Q;[;d;k<o<q<u<w<y=S=U=X=]=_=a=c=g>]>^o>U<l<m<p<r<v<x<z=T=V=Y=^=`=b=d=hW%Ti%V*y>PS&[!Q&iQ&]!RQ&^!SU*}%[%d=sR,R&Y%]%Si#v$b$c$d$x${%O%Q%^%_%c)y*R*T*V*Y*a*g*w*x+f+i,S,V.f/P/d/m/x/y/{0`0b0i0j0o1f1i1q3c4^4_4j4o5Q5[5_6S7W7v8Q8V8[8q9b9p9y:P:`:r;Q;[;d;k<l<m<o<p<q<r<u<v<w<x<y<z=S=T=U=V=X=Y=]=^=_=`=a=b=c=d=g=h>P>X>Y>]>^T)z$u){V+P%]<s<tW'[!e%i*Z-`S(}#y#zQ+c%rQ+y&SS.b(m(nQ1j,XQ5T0kR8i5u'QkOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n%m%t&R&k&n&o&r&t&u&w&{'T'X'b'r(T(V(](d(x(z)O)s)}*i+X+]+g,p,s,x-U-X-i-q.P.V.g.t.{/V/n0]0l0r1S1r2S2T2V2X2[2_2a2p3Q3W3d3l4T4z5w6T6e6f6i6s6|7[8t9T9_:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>S$i$^c#Y#e%q%s%u(S(Y(t(y)R)S)T)U)V)W)X)Y)Z)[)^)`)b)g)q+d+x-Z-x-}.S.U.s.v.z.|.}/O/b0p2k2n3O3V3k3p3q3r3s3t3u3v3w3x3y3z3{3|4P4Q4X5X5c6u6{7Q7a7b7k7l8k9X9]9g9m9n:o;W;`<W=vT#TV#U'RkOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n%m%t&R&k&n&o&r&t&u&w&{'T'X'b'r(T(V(](d(x(z)O)s)}*i+X+]+g,p,s,x-U-X-i-q.P.V.g.t.{/V/n0]0l0r1S1r2S2T2V2X2[2_2a2p3Q3W3d3l4T4z5w6T6e6f6i6s6|7[8t9T9_:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>SQ'Y!eR2q-]!W!nQ!e!r!v!y!z$|'W'_'`'l'm'n*Z*k*o*q*r-]-c-e-u0[0_1o5{5}R1l,ZnqOXst!Z#d%m&r&t&u&w,s,x2[2_Q&y!^Q'v!xS(s#u<^Q+l%zQ,]&_Q,^&aQ-j'dQ-w'oS.r(x=PS0q+X=ZQ1P+mQ1n,[Q2c,zQ2e,{Q2m-WQ2z-kQ2}-oS5Y0r=eQ5a1QS5d1S=fQ6t2oQ6x2{Q6}3SQ8]5bQ9Y6vQ9Z6yQ9^7OR:l9V$d$]c#Y#e%s%u(S(Y(t(y)R)S)T)U)V)W)X)Y)Z)[)^)`)b)g)q+d+x-Z-x-}.S.U.s.v.z.}/O/b0p2k2n3O3V3k3p3q3r3s3t3u3v3w3x3y3z3{3|4P4Q4X5X5c6u6{7Q7a7b7k7l8k9X9]9g9m9n:o;W;`<W=vS(o#p'iQ)P#zS+b%q.|S.c(n(pR3^.d'QkOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n%m%t&R&k&n&o&r&t&u&w&{'T'X'b'r(T(V(](d(x(z)O)s)}*i+X+]+g,p,s,x-U-X-i-q.P.V.g.t.{/V/n0]0l0r1S1r2S2T2V2X2[2_2a2p3Q3W3d3l4T4z5w6T6e6f6i6s6|7[8t9T9_:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>SS#q]<VQ&t!XQ&u!YQ&w![Q&x!]R2Z,vQ'a!hQ+e%wQ-h'cS.e(q+hQ2x-gW3b.h.i0w0yQ6w2yW7U3_3a3e5^U9a7V7X7ZU:q9c9d9fS;b:p:sQ;p;cR;x;qU!wQ'`-eT5y1o5{!Q_OXZ`st!V!Z#d#h%e%m&i&k&r&t&u&w(j,s,x.[2[2_]!pQ!r'`-e1o5{T#q]<V%^{OPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$_$a$e%m%t&R&k&n&o&r&t&u&w&{'T'b'r(T(V(](d(x(z)O)}*i+X+]+g,p,s,x-i-q.P.V.g.t.{/n0]0l0r1S1r2S2T2V2X2[2_2a3Q3W3d3l4z6T6e6f6i6|7[8t9T9_S(}#y#zS.b(m(n!s=l$Z$n'X)s-U-X/V2p4T5w6s:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>SU$fd)_,mS(p#p'iU*v%R(w4OU0m+O.n7gQ5^0xQ7V3`Q9d7YR:s9em!tQ!r!v!y!z'`'l'm'n-e-u1o5{5}Q't!uS(f#g2US-s'k'wQ/s*]Q0R*jQ3U-vQ4f/tQ4r0TQ4s0UQ4x0^Q7r4`S7}4t4vS8R4y4{Q9r7sQ9v7yQ9{8OQ:Q8TS:{9w9xS;g:|;PS;s;h;iS;{;t;uS<P;|;}R<S<QQ#wbQ's!uS(e#g2US(g#m+WQ+Y%fQ+j%xQ+p&OU-r'k't'wQ.W(fU/r*]*`/wQ0S*jQ0V*lQ1O+kQ1u,aS3R-s-vQ3Z.`S4e/s/tQ4n0PS4q0R0^Q4u0WQ6W1vQ7P3US7q4`4bQ7u4fU7|4r4x4{Q8P4wQ8v6XS9q7r7sQ9u7yQ9}8RQ:O8SQ:c8wQ:y9rS:z9v9xQ;S:QQ;^:dS;f:{;PS;r;g;hS;z;s;uS<O;{;}Q<R<PQ<T<SQ=o=jQ={=tR=|=uV!wQ'`-e%^aOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$_$a$e%m%t&R&k&n&o&r&t&u&w&{'T'b'r(T(V(](d(x(z)O)}*i+X+]+g,p,s,x-i-q.P.V.g.t.{/n0]0l0r1S1r2S2T2V2X2[2_2a3Q3W3d3l4z6T6e6f6i6|7[8t9T9_S#wz!j!r=i$Z$n'X)s-U-X/V2p4T5w6s:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>SR=o>R%^bOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$_$a$e%m%t&R&k&n&o&r&t&u&w&{'T'b'r(T(V(](d(x(z)O)}*i+X+]+g,p,s,x-i-q.P.V.g.t.{/n0]0l0r1S1r2S2T2V2X2[2_2a3Q3W3d3l4z6T6e6f6i6|7[8t9T9_Q%fj!^%xy!i!u%{%|%}'V'e'f'g'k'u*j+n+o-Y-l-m-t0R0U1R2u2|3T4r4s4v7}9{S&Oz!jQ+k%yQ,a&dW1v,b,c,d,eU6X1w1x1yS8w6Y6ZQ:d8x!r=j$Z$n'X)s-U-X/V2p4T5w6s:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>SQ=t>QR=u>R%QeOPXYstuvw!Z!`!g!o#S#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$_$a$e%m%t&R&k&n&r&t&u&w&{'T'b'r(V(](d(x(z)O)}*i+X+]+g,p,s,x-i-q.P.V.g.t.{/n0]0l0r1S1r2S2T2V2X2[2_2a3Q3W3d3l4z6T6e6f6i6|7[8t9T9_Y#bWZ#W#Z(T!b%jm#h#i#l$x%e%h(^(h(i(j*Y*^*b+Z+[+^,o-V.T.Z.[.]._/m/p2d3[3]4a6r7TQ,n&o!p=k$Z$n)s-U-X/V2p4T5w6s:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>SR=n'XU']!e%i*ZR2s-`%SdOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$_$a$e%m%t&R&k&n&r&t&u&w&{'T'b'r(T(V(](d(x(z)O)}*i+X+],p,s,x-i-q.P.V.t.{/n0]0l0r1S1r2S2T2V2X2[2_2a3Q3W3l4z6T6e6f6i6|8t9T9_!r)_$Z$n'X)s-U-X/V2p4T5w6s:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>SQ,m&oQ0x+gQ3`.gQ7Y3dR9e7[!b$Tc#Y%q(S(Y(t(y)Z)[)`)g+x-x-}.S.U.s.v/b0p3O3V3k3{5X5c6{7Q7a9]:o<W!P<d)^)q-Z.|2k2n3p3y3z4P4X6u7b7k7l8k9X9g9m9n;W;`=v!f$Vc#Y%q(S(Y(t(y)W)X)Z)[)`)g+x-x-}.S.U.s.v/b0p3O3V3k3{5X5c6{7Q7a9]:o<W!T<f)^)q-Z.|2k2n3p3v3w3y3z4P4X6u7b7k7l8k9X9g9m9n;W;`=v!^$Zc#Y%q(S(Y(t(y)`)g+x-x-}.S.U.s.v/b0p3O3V3k3{5X5c6{7Q7a9]:o<WQ4_/kz>S)^)q-Z.|2k2n3p4P4X6u7b7k7l8k9X9g9m9n;W;`=vQ>X>ZR>Y>['QkOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n%m%t&R&k&n&o&r&t&u&w&{'T'X'b'r(T(V(](d(x(z)O)s)}*i+X+]+g,p,s,x-U-X-i-q.P.V.g.t.{/V/n0]0l0r1S1r2S2T2V2X2[2_2a2p3Q3W3d3l4T4z5w6T6e6f6i6s6|7[8t9T9_:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>SS$oh$pR4U/U'XgOPWXYZhstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n$p%m%t&R&k&n&o&r&t&u&w&{'T'X'b'r(T(V(](d(x(z)O)s)}*i+X+]+g,p,s,x-U-X-i-q.P.V.g.t.{/U/V/n0]0l0r1S1r2S2T2V2X2[2_2a2p3Q3W3d3l4T4z5w6T6e6f6i6s6|7[8t9T9_:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>ST$kf$qQ$ifS)j$l)nR)v$qT$jf$qT)l$l)n'XhOPWXYZhstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n$p%m%t&R&k&n&o&r&t&u&w&{'T'X'b'r(T(V(](d(x(z)O)s)}*i+X+]+g,p,s,x-U-X-i-q.P.V.g.t.{/U/V/n0]0l0r1S1r2S2T2V2X2[2_2a2p3Q3W3d3l4T4z5w6T6e6f6i6s6|7[8t9T9_:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>ST$oh$pQ$rhR)u$p%^jOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$_$a$e%m%t&R&k&n&o&r&t&u&w&{'T'b'r(T(V(](d(x(z)O)}*i+X+]+g,p,s,x-i-q.P.V.g.t.{/n0]0l0r1S1r2S2T2V2X2[2_2a3Q3W3d3l4z6T6e6f6i6|7[8t9T9_!s>Q$Z$n'X)s-U-X/V2p4T5w6s:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>S#glOPXZst!Z!`!o#S#d#o#{$n%m&k&n&o&r&t&u&w&{'T'b)O)s*i+]+g,p,s,x-i.g/V/n0]0l1r2S2T2V2X2[2_2a3d4T4z6T6e6f6i7[8t9T!U%Ri$d%O%Q%^%_%c*R*T*a*w*x/P/x0`0b0i0j0o4_5Q8V9p>P>X>Y#f(w#v$b$c$x${)y*V*Y*g+f+i,S,V.f/d/m/y/{1f1i1q3c4^4j4o5[5_6S7W7v8Q8[8q9b9y:P:`:r;Q;[;d;k<o<q<u<w<y=S=U=X=]=_=a=c=g>]>^Q+T%aQ/c*Oo4O<l<m<p<r<v<x<z=T=V=Y=^=`=b=d=h!U$yi$d%O%Q%^%_%c*R*T*a*w*x/P/x0`0b0i0j0o4_5Q8V9p>P>X>YQ*c$zU*l$|*Z*oQ+U%bQ0W*m#f=q#v$b$c$x${)y*V*Y*g+f+i,S,V.f/d/m/y/{1f1i1q3c4^4j4o5[5_6S7W7v8Q8[8q9b9y:P:`:r;Q;[;d;k<o<q<u<w<y=S=U=X=]=_=a=c=g>]>^n=r<l<m<p<r<v<x<z=T=V=Y=^=`=b=d=hQ=w>TQ=x>UQ=y>VR=z>W!U%Ri$d%O%Q%^%_%c*R*T*a*w*x/P/x0`0b0i0j0o4_5Q8V9p>P>X>Y#f(w#v$b$c$x${)y*V*Y*g+f+i,S,V.f/d/m/y/{1f1i1q3c4^4j4o5[5_6S7W7v8Q8[8q9b9y:P:`:r;Q;[;d;k<o<q<u<w<y=S=U=X=]=_=a=c=g>]>^o4O<l<m<p<r<v<x<z=T=V=Y=^=`=b=d=hnoOXst!Z#d%m&r&t&u&w,s,x2[2_S*f${*YQ-R'OQ-S'QR4i/y%[%Si#v$b$c$d$x${%O%Q%^%_%c)y*R*T*V*Y*a*g*w*x+f+i,S,V.f/P/d/m/x/y/{0`0b0i0j0o1f1i1q3c4^4_4j4o5Q5[5_6S7W7v8Q8V8[8q9b9p9y:P:`:r;Q;[;d;k<l<m<o<p<q<r<u<v<w<x<y<z=S=T=U=V=X=Y=]=^=_=`=a=b=c=d=g=h>P>X>Y>]>^Q,U&]Q1h,WQ5s1gR8h5tV*n$|*Z*oU*n$|*Z*oT5z1o5{S0P*i/nQ4w0]T8S4z:]Q+j%xQ0V*lQ1O+kQ1u,aQ6W1vQ8v6XQ:c8wR;^:d!U%Oi$d%O%Q%^%_%c*R*T*a*w*x/P/x0`0b0i0j0o4_5Q8V9p>P>X>Yx*R$v)e*S*u+V/v0d0e4R4g5R5S5W7p8U:R:x=p=}>OS0`*t0a#f<o#v$b$c$x${)y*V*Y*g+f+i,S,V.f/d/m/y/{1f1i1q3c4^4j4o5[5_6S7W7v8Q8[8q9b9y:P:`:r;Q;[;d;k<o<q<u<w<y=S=U=X=]=_=a=c=g>]>^n<p<l<m<p<r<v<x<z=T=V=Y=^=`=b=d=h!d=S(u)c*[*e.j.m.q/_/k/|0v1e3h4[4h4l5r7]7`7w7z8X8Z9t9|:S:};R;e;j;v>Z>[`=T3}7c7f7j9h:t:w;yS=_.l3iT=`7e9k!U%Qi$d%O%Q%^%_%c*R*T*a*w*x/P/x0`0b0i0j0o4_5Q8V9p>P>X>Y|*T$v)e*U*t+V/g/v0d0e4R4g4|5R5S5W7p8U:R:x=p=}>OS0b*u0c#f<q#v$b$c$x${)y*V*Y*g+f+i,S,V.f/d/m/y/{1f1i1q3c4^4j4o5[5_6S7W7v8Q8[8q9b9y:P:`:r;Q;[;d;k<o<q<u<w<y=S=U=X=]=_=a=c=g>]>^n<r<l<m<p<r<v<x<z=T=V=Y=^=`=b=d=h!h=U(u)c*[*e.k.l.q/_/k/|0v1e3f3h4[4h4l5r7]7^7`7w7z8X8Z9t9|:S:};R;e;j;v>Z>[d=V3}7d7e7j9h9i:t:u:w;yS=a.m3jT=b7f9lrnOXst!V!Z#d%m&i&r&t&u&w,s,x2[2_Q&f!UR,p&ornOXst!V!Z#d%m&i&r&t&u&w,s,x2[2_R&f!UQ,Y&^R1d,RsnOXst!V!Z#d%m&i&r&t&u&w,s,x2[2_Q1p,_S6R1s1tU8p6P6Q6US:_8r8sS;Y:^:aQ;m;ZR;w;nQ&m!VR,i&iR6_1|R:f8yW&Q|&V&W,OR1Z+vQ&r!WR,s&sR,y&xT2],x2_R,}&yQ,|&yR2f,}Q'y!{R-y'ySsOtQ#dXT%ps#dQ#OTR'{#OQ#RUR'}#RQ){$uR/`){Q#UVR(Q#UQ#XWU(W#X(X.QQ(X#YR.Q(YQ-^'YR2r-^Q.u(yS3m.u3nR3n.vQ-e'`R2v-eY!rQ'`-e1o5{R'j!rQ/Q)eR4S/QU#_W%h*YU(_#_(`.RQ(`#`R.R(ZQ-a']R2t-at`OXst!V!Z#d%m&i&k&r&t&u&w,s,x2[2_S#hZ%eU#r`#h.[R.[(jQ(k#jQ.X(gW.a(k.X3X7RQ3X.YR7R3YQ)n$lR/W)nQ$phR)t$pQ$`cU)a$`-|<jQ-|<WR<j)qQ/q*]W4c/q4d7t9sU4d/r/s/tS7t4e4fR9s7u$e*Q$v(u)c)e*[*e*t*u+Q+R+V.l.m.o.p.q/_/g/i/k/v/|0d0e0v1e3f3g3h3}4R4[4g4h4l4|5O5R5S5W5r7]7^7_7`7e7f7h7i7j7p7w7z8U8X8Z9h9i9j9t9|:R:S:t:u:v:w:x:};R;e;j;v;y=p=}>O>Z>[Q/z*eU4k/z4m7xQ4m/|R7x4lS*o$|*ZR0Y*ox*S$v)e*t*u+V/v0d0e4R4g5R5S5W7p8U:R:x=p=}>O!d.j(u)c*[*e.l.m.q/_/k/|0v1e3h4[4h4l5r7]7`7w7z8X8Z9t9|:S:};R;e;j;v>Z>[U/h*S.j7ca7c3}7e7f7j9h:t:w;yQ0a*tQ3i.lU4}0a3i9kR9k7e|*U$v)e*t*u+V/g/v0d0e4R4g4|5R5S5W7p8U:R:x=p=}>O!h.k(u)c*[*e.l.m.q/_/k/|0v1e3f3h4[4h4l5r7]7^7`7w7z8X8Z9t9|:S:};R;e;j;v>Z>[U/j*U.k7de7d3}7e7f7j9h9i:t:u:w;yQ0c*uQ3j.mU5P0c3j9lR9l7fQ*z%UR0g*zQ5]0vR8Y5]Q+_%kR0u+_Q5v1jS8j5v:[R:[8kQ,[&_R1m,[Q5{1oR8m5{Q1{,fS6]1{8zR8z6_Q1U+rW5h1U5j8a:VQ5j1XQ8a5iR:V8bQ+w&QR1[+wQ2_,xR6m2_YrOXst#dQ&v!ZQ+a%mQ,r&rQ,t&tQ,u&uQ,w&wQ2Y,sS2],x2_R6l2[Q%opQ&z!_Q&}!aQ'P!bQ'R!cQ'q!uQ+`%lQ+l%zQ,Q&XQ,h&mQ-P&|W-p'k's't'wQ-w'oQ0X*nQ1P+mQ1c,PS2O,i,lQ2g-OQ2h-RQ2i-SQ2}-oW3P-r-s-v-xQ5a1QQ5m1_Q5q1eQ6V1uQ6a2QQ6k2ZU6z3O3R3UQ6}3SQ8]5bQ8e5oQ8g5rQ8l5zQ8u6WQ8{6`S9[6{7PQ9^7OQ:W8cQ:b8vQ:g8|Q:n9]Q;U:XQ;]:cQ;a:oQ;l;VR;o;^Q%zyQ'd!iQ'o!uU+m%{%|%}Q-W'VU-k'e'f'gS-o'k'uQ0Q*jS1Q+n+oQ2o-YS2{-l-mQ3S-tS4p0R0UQ5b1RQ6v2uQ6y2|Q7O3TU7{4r4s4vQ9z7}R;O9{S$wi>PR*{%VU%Ui%V>PR0f*yQ$viS(u#v+iS)c$b$cQ)e$dQ*[$xS*e${*YQ*t%OQ*u%QQ+Q%^Q+R%_Q+V%cQ.l<oQ.m<qQ.o<uQ.p<wQ.q<yQ/_)yQ/g*RQ/i*TQ/k*VQ/v*aS/|*g/mQ0d*wQ0e*xl0v+f,V.f1i1q3c6S7W8q9b:`:r;[;dQ1e,SQ3f=SQ3g=UQ3h=XS3}<l<mQ4R/PS4[/d4^Q4g/xQ4h/yQ4l/{Q4|0`Q5O0bQ5R0iQ5S0jQ5W0oQ5r1fQ7]=]Q7^=_Q7_=aQ7`=cQ7e<pQ7f<rQ7h<vQ7i<xQ7j<zQ7p4_Q7w4jQ7z4oQ8U5QQ8X5[Q8Z5_Q9h=YQ9i=TQ9j=VQ9t7vQ9|8QQ:R8VQ:S8[Q:t=^Q:u=`Q:v=bQ:w=dQ:x9pQ:}9yQ;R:PQ;e=gQ;j;QQ;v;kQ;y=hQ=p>PQ=}>XQ>O>YQ>Z>]R>[>^Q+O%]Q.n<sR7g<tnpOXst!Z#d%m&r&t&u&w,s,x2[2_Q!fPS#fZ#oQ&|!`W'h!o*i0]4zQ(P#SQ)Q#{Q)r$nS,l&k&nQ,q&oQ-O&{S-T'T/nQ-g'bQ.x)OQ/[)sQ0s+]Q0y+gQ2W,pQ2y-iQ3a.gQ4W/VQ5U0lQ6Q1rQ6c2SQ6d2TQ6h2VQ6j2XQ6o2aQ7Z3dQ7m4TQ8s6TQ9P6eQ9Q6fQ9S6iQ9f7[Q:a8tR:k9T#[cOPXZst!Z!`!o#d#o#{%m&k&n&o&r&t&u&w&{'T'b)O*i+]+g,p,s,x-i.g/n0]0l1r2S2T2V2X2[2_2a3d4z6T6e6f6i7[8t9TQ#YWQ#eYQ%quQ%svS%uw!gS(S#W(VQ(Y#ZQ(t#uQ(y#xQ)R$OQ)S$PQ)T$QQ)U$RQ)V$SQ)W$TQ)X$UQ)Y$VQ)Z$WQ)[$XQ)^$ZQ)`$_Q)b$aQ)g$eW)q$n)s/V4TQ+d%tQ+x&RS-Z'X2pQ-x'rS-}(T.PQ.S(]Q.U(dQ.s(xQ.v(zQ.z<UQ.|<XQ.}<YQ/O<]Q/b)}Q0p+XQ2k-UQ2n-XQ3O-qQ3V.VQ3k.tQ3p<^Q3q<_Q3r<`Q3s<aQ3t<bQ3u<cQ3v<dQ3w<eQ3x<fQ3y<gQ3z<hQ3{.{Q3|<kQ4P<nQ4Q<{Q4X<iQ5X0rQ5c1SQ6u=OQ6{3QQ7Q3WQ7a3lQ7b=PQ7k=RQ7l=ZQ8k5wQ9X6sQ9]6|Q9g=[Q9m=eQ9n=fQ:o9_Q;W:ZQ;`:mQ<W#SR=v>SR#[WR'Z!el!tQ!r!v!y!z'`'l'm'n-e-u1o5{5}S'V!e-]U*j$|*Z*oS-Y'W'_S0U*k*qQ0^*rQ2u-cQ4v0[R4{0_R({#xQ!fQT-d'`-e]!qQ!r'`-e1o5{Q#p]R'i<VR)f$dY!uQ'`-e1o5{Q'k!rS'u!v!yS'w!z5}S-t'l'mQ-v'nR3T-uT#kZ%eS#jZ%eS%km,oU(g#h#i#lS.Y(h(iQ.^(jQ0t+^Q3Y.ZU3Z.[.]._S7S3[3]R9`7Td#^W#W#Z%h(T(^*Y+Z.T/mr#gZm#h#i#l%e(h(i(j+^.Z.[.]._3[3]7TS*]$x*bQ/t*^Q2U,oQ2l-VQ4`/pQ6q2dQ7s4aQ9W6rT=m'X+[V#aW%h*YU#`W%h*YS(U#W(^U(Z#Z+Z/mS-['X+[T.O(T.TV'^!e%i*ZQ$lfR)x$qT)m$l)nR4V/UT*_$x*bT*h${*YQ0w+fQ1g,VQ3_.fQ5t1iQ6P1qQ7X3cQ8r6SQ9c7WQ:^8qQ:p9bQ;Z:`Q;c:rQ;n;[R;q;dnqOXst!Z#d%m&r&t&u&w,s,x2[2_Q&l!VR,h&itmOXst!U!V!Z#d%m&i&r&t&u&w,s,x2[2_R,o&oT%lm,oR1k,XR,g&gQ&U|S+}&V&WR1^,OR+s&PT&p!W&sT&q!W&sT2^,x2_",
  nodeNames: " ArithOp ArithOp ?. JSXStartTag LineComment BlockComment Script Hashbang ExportDeclaration export Star as VariableName String Escape from ; default FunctionDeclaration async function VariableDefinition > < TypeParamList in out const TypeDefinition extends ThisType this LiteralType ArithOp Number BooleanLiteral TemplateType InterpolationEnd Interpolation InterpolationStart NullType null VoidType void TypeofType typeof MemberExpression . PropertyName [ TemplateString Escape Interpolation super RegExp ] ArrayExpression Spread , } { ObjectExpression Property async get set PropertyDefinition Block : NewTarget new NewExpression ) ( ArgList UnaryExpression delete LogicOp BitOp YieldExpression yield AwaitExpression await ParenthesizedExpression ClassExpression class ClassBody MethodDeclaration Decorator @ MemberExpression PrivatePropertyName CallExpression TypeArgList CompareOp < declare Privacy static abstract override PrivatePropertyDefinition PropertyDeclaration readonly accessor Optional TypeAnnotation Equals StaticBlock FunctionExpression ArrowFunction ParamList ParamList ArrayPattern ObjectPattern PatternProperty Privacy readonly Arrow MemberExpression BinaryExpression ArithOp ArithOp ArithOp ArithOp BitOp CompareOp instanceof satisfies CompareOp BitOp BitOp BitOp LogicOp LogicOp ConditionalExpression LogicOp LogicOp AssignmentExpression UpdateOp PostfixExpression CallExpression InstantiationExpression TaggedTemplateExpression DynamicImport import ImportMeta JSXElement JSXSelfCloseEndTag JSXSelfClosingTag JSXIdentifier JSXBuiltin JSXIdentifier JSXNamespacedName JSXMemberExpression JSXSpreadAttribute JSXAttribute JSXAttributeValue JSXEscape JSXEndTag JSXOpenTag JSXFragmentTag JSXText JSXEscape JSXStartCloseTag JSXCloseTag PrefixCast < ArrowFunction TypeParamList SequenceExpression InstantiationExpression KeyofType keyof UniqueType unique ImportType InferredType infer TypeName ParenthesizedType FunctionSignature ParamList NewSignature IndexedType TupleType Label ArrayType ReadonlyType ObjectType MethodType PropertyType IndexSignature PropertyDefinition CallSignature TypePredicate asserts is NewSignature new UnionType LogicOp IntersectionType LogicOp ConditionalType ParameterizedType ClassDeclaration abstract implements type VariableDeclaration let var using TypeAliasDeclaration InterfaceDeclaration interface EnumDeclaration enum EnumBody NamespaceDeclaration namespace module AmbientDeclaration declare GlobalDeclaration global ClassDeclaration ClassBody AmbientFunctionDeclaration ExportGroup VariableName VariableName ImportDeclaration defer ImportGroup ForStatement for ForSpec ForInSpec ForOfSpec of WhileStatement while WithStatement with DoStatement do IfStatement if else SwitchStatement switch SwitchBody CaseLabel case DefaultLabel TryStatement try CatchClause catch FinallyClause finally ReturnStatement return ThrowStatement throw BreakStatement break ContinueStatement continue DebuggerStatement debugger LabeledStatement ExpressionStatement SingleExpression SingleClassItem",
  maxTerm: 380,
  context: trackNewline,
  nodeProps: [
    ["isolate", -8, 5, 6, 14, 37, 39, 51, 53, 55, ""],
    ["group", -26, 9, 17, 19, 68, 207, 211, 215, 216, 218, 221, 224, 234, 237, 243, 245, 247, 249, 252, 258, 264, 266, 268, 270, 272, 274, 275, "Statement", -34, 13, 14, 32, 35, 36, 42, 51, 54, 55, 57, 62, 70, 72, 76, 80, 82, 84, 85, 110, 111, 120, 121, 136, 139, 141, 142, 143, 144, 145, 147, 148, 167, 169, 171, "Expression", -23, 31, 33, 37, 41, 43, 45, 173, 175, 177, 178, 180, 181, 182, 184, 185, 186, 188, 189, 190, 201, 203, 205, 206, "Type", -3, 88, 103, 109, "ClassItem"],
    ["openedBy", 23, "<", 38, "InterpolationStart", 56, "[", 60, "{", 73, "(", 160, "JSXStartCloseTag"],
    ["closedBy", -2, 24, 168, ">", 40, "InterpolationEnd", 50, "]", 61, "}", 74, ")", 165, "JSXEndTag"]
  ],
  propSources: [jsHighlight],
  skippedNodes: [0, 5, 6, 278],
  repeatNodeCount: 37,
  tokenData: "$Fq07[R!bOX%ZXY+gYZ-yZ[+g[]%Z]^.c^p%Zpq+gqr/mrs3cst:_tuEruvJSvwLkwx! Yxy!'iyz!(sz{!)}{|!,q|}!.O}!O!,q!O!P!/Y!P!Q!9j!Q!R#:O!R![#<_![!]#I_!]!^#Jk!^!_#Ku!_!`$![!`!a$$v!a!b$*T!b!c$,r!c!}Er!}#O$-|#O#P$/W#P#Q$4o#Q#R$5y#R#SEr#S#T$7W#T#o$8b#o#p$<r#p#q$=h#q#r$>x#r#s$@U#s$f%Z$f$g+g$g#BYEr#BY#BZ$A`#BZ$ISEr$IS$I_$A`$I_$I|Er$I|$I}$Dk$I}$JO$Dk$JO$JTEr$JT$JU$A`$JU$KVEr$KV$KW$A`$KW&FUEr&FU&FV$A`&FV;'SEr;'S;=`I|<%l?HTEr?HT?HU$A`?HUOEr(n%d_$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z&j&hT$i&jO!^&c!_#o&c#p;'S&c;'S;=`&w<%lO&c&j&zP;=`<%l&c'|'U]$i&j(Z!bOY&}YZ&cZw&}wx&cx!^&}!^!_'}!_#O&}#O#P&c#P#o&}#o#p'}#p;'S&};'S;=`(l<%lO&}!b(SU(Z!bOY'}Zw'}x#O'}#P;'S'};'S;=`(f<%lO'}!b(iP;=`<%l'}'|(oP;=`<%l&}'[(y]$i&j(WpOY(rYZ&cZr(rrs&cs!^(r!^!_)r!_#O(r#O#P&c#P#o(r#o#p)r#p;'S(r;'S;=`*a<%lO(rp)wU(WpOY)rZr)rs#O)r#P;'S)r;'S;=`*Z<%lO)rp*^P;=`<%l)r'[*dP;=`<%l(r#S*nX(Wp(Z!bOY*gZr*grs'}sw*gwx)rx#O*g#P;'S*g;'S;=`+Z<%lO*g#S+^P;=`<%l*g(n+dP;=`<%l%Z07[+rq$i&j(Wp(Z!b'|0/lOX%ZXY+gYZ&cZ[+g[p%Zpq+gqr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p$f%Z$f$g+g$g#BY%Z#BY#BZ+g#BZ$IS%Z$IS$I_+g$I_$JT%Z$JT$JU+g$JU$KV%Z$KV$KW+g$KW&FU%Z&FU&FV+g&FV;'S%Z;'S;=`+a<%l?HT%Z?HT?HU+g?HUO%Z07[.ST(X#S$i&j'}0/lO!^&c!_#o&c#p;'S&c;'S;=`&w<%lO&c07[.n_$i&j(Wp(Z!b'}0/lOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z)3p/x`$i&j!p),Q(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`0z!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW1V`#v(Ch$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`2X!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW2d_#v(Ch$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'At3l_(V':f$i&j(Z!bOY4kYZ5qZr4krs7nsw4kwx5qx!^4k!^!_8p!_#O4k#O#P5q#P#o4k#o#p8p#p;'S4k;'S;=`:X<%lO4k(^4r_$i&j(Z!bOY4kYZ5qZr4krs7nsw4kwx5qx!^4k!^!_8p!_#O4k#O#P5q#P#o4k#o#p8p#p;'S4k;'S;=`:X<%lO4k&z5vX$i&jOr5qrs6cs!^5q!^!_6y!_#o5q#o#p6y#p;'S5q;'S;=`7h<%lO5q&z6jT$d`$i&jO!^&c!_#o&c#p;'S&c;'S;=`&w<%lO&c`6|TOr6yrs7]s;'S6y;'S;=`7b<%lO6y`7bO$d``7eP;=`<%l6y&z7kP;=`<%l5q(^7w]$d`$i&j(Z!bOY&}YZ&cZw&}wx&cx!^&}!^!_'}!_#O&}#O#P&c#P#o&}#o#p'}#p;'S&};'S;=`(l<%lO&}!r8uZ(Z!bOY8pYZ6yZr8prs9hsw8pwx6yx#O8p#O#P6y#P;'S8p;'S;=`:R<%lO8p!r9oU$d`(Z!bOY'}Zw'}x#O'}#P;'S'};'S;=`(f<%lO'}!r:UP;=`<%l8p(^:[P;=`<%l4k%9[:hh$i&j(Wp(Z!bOY%ZYZ&cZq%Zqr<Srs&}st%ZtuCruw%Zwx(rx!^%Z!^!_*g!_!c%Z!c!}Cr!}#O%Z#O#P&c#P#R%Z#R#SCr#S#T%Z#T#oCr#o#p*g#p$g%Z$g;'SCr;'S;=`El<%lOCr(r<__WS$i&j(Wp(Z!bOY<SYZ&cZr<Srs=^sw<Swx@nx!^<S!^!_Bm!_#O<S#O#P>`#P#o<S#o#pBm#p;'S<S;'S;=`Cl<%lO<S(Q=g]WS$i&j(Z!bOY=^YZ&cZw=^wx>`x!^=^!^!_?q!_#O=^#O#P>`#P#o=^#o#p?q#p;'S=^;'S;=`@h<%lO=^&n>gXWS$i&jOY>`YZ&cZ!^>`!^!_?S!_#o>`#o#p?S#p;'S>`;'S;=`?k<%lO>`S?XSWSOY?SZ;'S?S;'S;=`?e<%lO?SS?hP;=`<%l?S&n?nP;=`<%l>`!f?xWWS(Z!bOY?qZw?qwx?Sx#O?q#O#P?S#P;'S?q;'S;=`@b<%lO?q!f@eP;=`<%l?q(Q@kP;=`<%l=^'`@w]WS$i&j(WpOY@nYZ&cZr@nrs>`s!^@n!^!_Ap!_#O@n#O#P>`#P#o@n#o#pAp#p;'S@n;'S;=`Bg<%lO@ntAwWWS(WpOYApZrAprs?Ss#OAp#O#P?S#P;'SAp;'S;=`Ba<%lOAptBdP;=`<%lAp'`BjP;=`<%l@n#WBvYWS(Wp(Z!bOYBmZrBmrs?qswBmwxApx#OBm#O#P?S#P;'SBm;'S;=`Cf<%lOBm#WCiP;=`<%lBm(rCoP;=`<%l<S%9[C}i$i&j(o%1l(Wp(Z!bOY%ZYZ&cZr%Zrs&}st%ZtuCruw%Zwx(rx!Q%Z!Q![Cr![!^%Z!^!_*g!_!c%Z!c!}Cr!}#O%Z#O#P&c#P#R%Z#R#SCr#S#T%Z#T#oCr#o#p*g#p$g%Z$g;'SCr;'S;=`El<%lOCr%9[EoP;=`<%lCr07[FRk$i&j(Wp(Z!b$]#t(T,2j(e$I[OY%ZYZ&cZr%Zrs&}st%ZtuEruw%Zwx(rx}%Z}!OGv!O!Q%Z!Q![Er![!^%Z!^!_*g!_!c%Z!c!}Er!}#O%Z#O#P&c#P#R%Z#R#SEr#S#T%Z#T#oEr#o#p*g#p$g%Z$g;'SEr;'S;=`I|<%lOEr+dHRk$i&j(Wp(Z!b$]#tOY%ZYZ&cZr%Zrs&}st%ZtuGvuw%Zwx(rx}%Z}!OGv!O!Q%Z!Q![Gv![!^%Z!^!_*g!_!c%Z!c!}Gv!}#O%Z#O#P&c#P#R%Z#R#SGv#S#T%Z#T#oGv#o#p*g#p$g%Z$g;'SGv;'S;=`Iv<%lOGv+dIyP;=`<%lGv07[JPP;=`<%lEr(KWJ_`$i&j(Wp(Z!b#p(ChOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KWKl_$i&j$Q(Ch(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z,#xLva(z+JY$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sv%ZvwM{wx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KWNW`$i&j#z(Ch(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'At! c_(Y';W$i&j(WpOY!!bYZ!#hZr!!brs!#hsw!!bwx!$xx!^!!b!^!_!%z!_#O!!b#O#P!#h#P#o!!b#o#p!%z#p;'S!!b;'S;=`!'c<%lO!!b'l!!i_$i&j(WpOY!!bYZ!#hZr!!brs!#hsw!!bwx!$xx!^!!b!^!_!%z!_#O!!b#O#P!#h#P#o!!b#o#p!%z#p;'S!!b;'S;=`!'c<%lO!!b&z!#mX$i&jOw!#hwx6cx!^!#h!^!_!$Y!_#o!#h#o#p!$Y#p;'S!#h;'S;=`!$r<%lO!#h`!$]TOw!$Ywx7]x;'S!$Y;'S;=`!$l<%lO!$Y`!$oP;=`<%l!$Y&z!$uP;=`<%l!#h'l!%R]$d`$i&j(WpOY(rYZ&cZr(rrs&cs!^(r!^!_)r!_#O(r#O#P&c#P#o(r#o#p)r#p;'S(r;'S;=`*a<%lO(r!Q!&PZ(WpOY!%zYZ!$YZr!%zrs!$Ysw!%zwx!&rx#O!%z#O#P!$Y#P;'S!%z;'S;=`!']<%lO!%z!Q!&yU$d`(WpOY)rZr)rs#O)r#P;'S)r;'S;=`*Z<%lO)r!Q!'`P;=`<%l!%z'l!'fP;=`<%l!!b/5|!'t_!l/.^$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z#&U!)O_!k!Lf$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z-!n!*[b$i&j(Wp(Z!b(U%&f#q(ChOY%ZYZ&cZr%Zrs&}sw%Zwx(rxz%Zz{!+d{!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW!+o`$i&j(Wp(Z!b#n(ChOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z+;x!,|`$i&j(Wp(Z!br+4YOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z,$U!.Z_!]+Jf$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z07[!/ec$i&j(Wp(Z!b!Q.2^OY%ZYZ&cZr%Zrs&}sw%Zwx(rx!O%Z!O!P!0p!P!Q%Z!Q![!3Y![!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z#%|!0ya$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!O%Z!O!P!2O!P!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z#%|!2Z_![!L^$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad!3eg$i&j(Wp(Z!bs'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q![!3Y![!^%Z!^!_*g!_!g%Z!g!h!4|!h#O%Z#O#P&c#P#R%Z#R#S!3Y#S#X%Z#X#Y!4|#Y#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad!5Vg$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx{%Z{|!6n|}%Z}!O!6n!O!Q%Z!Q![!8S![!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S!8S#S#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad!6wc$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q![!8S![!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S!8S#S#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad!8_c$i&j(Wp(Z!bs'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q![!8S![!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S!8S#S#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z07[!9uf$i&j(Wp(Z!b#o(ChOY!;ZYZ&cZr!;Zrs!<nsw!;Zwx!Lcxz!;Zz{#-}{!P!;Z!P!Q#/d!Q!^!;Z!^!_#(i!_!`#7S!`!a#8i!a!}!;Z!}#O#,f#O#P!Dy#P#o!;Z#o#p#(i#p;'S!;Z;'S;=`#-w<%lO!;Z?O!;fb$i&j(Wp(Z!b!X7`OY!;ZYZ&cZr!;Zrs!<nsw!;Zwx!Lcx!P!;Z!P!Q#&`!Q!^!;Z!^!_#(i!_!}!;Z!}#O#,f#O#P!Dy#P#o!;Z#o#p#(i#p;'S!;Z;'S;=`#-w<%lO!;Z>^!<w`$i&j(Z!b!X7`OY!<nYZ&cZw!<nwx!=yx!P!<n!P!Q!Eq!Q!^!<n!^!_!Gr!_!}!<n!}#O!KS#O#P!Dy#P#o!<n#o#p!Gr#p;'S!<n;'S;=`!L]<%lO!<n<z!>Q^$i&j!X7`OY!=yYZ&cZ!P!=y!P!Q!>|!Q!^!=y!^!_!@c!_!}!=y!}#O!CW#O#P!Dy#P#o!=y#o#p!@c#p;'S!=y;'S;=`!Ek<%lO!=y<z!?Td$i&j!X7`O!^&c!_#W&c#W#X!>|#X#Z&c#Z#[!>|#[#]&c#]#^!>|#^#a&c#a#b!>|#b#g&c#g#h!>|#h#i&c#i#j!>|#j#k!>|#k#m&c#m#n!>|#n#o&c#p;'S&c;'S;=`&w<%lO&c7`!@hX!X7`OY!@cZ!P!@c!P!Q!AT!Q!}!@c!}#O!Ar#O#P!Bq#P;'S!@c;'S;=`!CQ<%lO!@c7`!AYW!X7`#W#X!AT#Z#[!AT#]#^!AT#a#b!AT#g#h!AT#i#j!AT#j#k!AT#m#n!AT7`!AuVOY!ArZ#O!Ar#O#P!B[#P#Q!@c#Q;'S!Ar;'S;=`!Bk<%lO!Ar7`!B_SOY!ArZ;'S!Ar;'S;=`!Bk<%lO!Ar7`!BnP;=`<%l!Ar7`!BtSOY!@cZ;'S!@c;'S;=`!CQ<%lO!@c7`!CTP;=`<%l!@c<z!C][$i&jOY!CWYZ&cZ!^!CW!^!_!Ar!_#O!CW#O#P!DR#P#Q!=y#Q#o!CW#o#p!Ar#p;'S!CW;'S;=`!Ds<%lO!CW<z!DWX$i&jOY!CWYZ&cZ!^!CW!^!_!Ar!_#o!CW#o#p!Ar#p;'S!CW;'S;=`!Ds<%lO!CW<z!DvP;=`<%l!CW<z!EOX$i&jOY!=yYZ&cZ!^!=y!^!_!@c!_#o!=y#o#p!@c#p;'S!=y;'S;=`!Ek<%lO!=y<z!EnP;=`<%l!=y>^!Ezl$i&j(Z!b!X7`OY&}YZ&cZw&}wx&cx!^&}!^!_'}!_#O&}#O#P&c#P#W&}#W#X!Eq#X#Z&}#Z#[!Eq#[#]&}#]#^!Eq#^#a&}#a#b!Eq#b#g&}#g#h!Eq#h#i&}#i#j!Eq#j#k!Eq#k#m&}#m#n!Eq#n#o&}#o#p'}#p;'S&};'S;=`(l<%lO&}8r!GyZ(Z!b!X7`OY!GrZw!Grwx!@cx!P!Gr!P!Q!Hl!Q!}!Gr!}#O!JU#O#P!Bq#P;'S!Gr;'S;=`!J|<%lO!Gr8r!Hse(Z!b!X7`OY'}Zw'}x#O'}#P#W'}#W#X!Hl#X#Z'}#Z#[!Hl#[#]'}#]#^!Hl#^#a'}#a#b!Hl#b#g'}#g#h!Hl#h#i'}#i#j!Hl#j#k!Hl#k#m'}#m#n!Hl#n;'S'};'S;=`(f<%lO'}8r!JZX(Z!bOY!JUZw!JUwx!Arx#O!JU#O#P!B[#P#Q!Gr#Q;'S!JU;'S;=`!Jv<%lO!JU8r!JyP;=`<%l!JU8r!KPP;=`<%l!Gr>^!KZ^$i&j(Z!bOY!KSYZ&cZw!KSwx!CWx!^!KS!^!_!JU!_#O!KS#O#P!DR#P#Q!<n#Q#o!KS#o#p!JU#p;'S!KS;'S;=`!LV<%lO!KS>^!LYP;=`<%l!KS>^!L`P;=`<%l!<n=l!Ll`$i&j(Wp!X7`OY!LcYZ&cZr!Lcrs!=ys!P!Lc!P!Q!Mn!Q!^!Lc!^!_# o!_!}!Lc!}#O#%P#O#P!Dy#P#o!Lc#o#p# o#p;'S!Lc;'S;=`#&Y<%lO!Lc=l!Mwl$i&j(Wp!X7`OY(rYZ&cZr(rrs&cs!^(r!^!_)r!_#O(r#O#P&c#P#W(r#W#X!Mn#X#Z(r#Z#[!Mn#[#](r#]#^!Mn#^#a(r#a#b!Mn#b#g(r#g#h!Mn#h#i(r#i#j!Mn#j#k!Mn#k#m(r#m#n!Mn#n#o(r#o#p)r#p;'S(r;'S;=`*a<%lO(r8Q# vZ(Wp!X7`OY# oZr# ors!@cs!P# o!P!Q#!i!Q!}# o!}#O#$R#O#P!Bq#P;'S# o;'S;=`#$y<%lO# o8Q#!pe(Wp!X7`OY)rZr)rs#O)r#P#W)r#W#X#!i#X#Z)r#Z#[#!i#[#])r#]#^#!i#^#a)r#a#b#!i#b#g)r#g#h#!i#h#i)r#i#j#!i#j#k#!i#k#m)r#m#n#!i#n;'S)r;'S;=`*Z<%lO)r8Q#$WX(WpOY#$RZr#$Rrs!Ars#O#$R#O#P!B[#P#Q# o#Q;'S#$R;'S;=`#$s<%lO#$R8Q#$vP;=`<%l#$R8Q#$|P;=`<%l# o=l#%W^$i&j(WpOY#%PYZ&cZr#%Prs!CWs!^#%P!^!_#$R!_#O#%P#O#P!DR#P#Q!Lc#Q#o#%P#o#p#$R#p;'S#%P;'S;=`#&S<%lO#%P=l#&VP;=`<%l#%P=l#&]P;=`<%l!Lc?O#&kn$i&j(Wp(Z!b!X7`OY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#W%Z#W#X#&`#X#Z%Z#Z#[#&`#[#]%Z#]#^#&`#^#a%Z#a#b#&`#b#g%Z#g#h#&`#h#i%Z#i#j#&`#j#k#&`#k#m%Z#m#n#&`#n#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z9d#(r](Wp(Z!b!X7`OY#(iZr#(irs!Grsw#(iwx# ox!P#(i!P!Q#)k!Q!}#(i!}#O#+`#O#P!Bq#P;'S#(i;'S;=`#,`<%lO#(i9d#)th(Wp(Z!b!X7`OY*gZr*grs'}sw*gwx)rx#O*g#P#W*g#W#X#)k#X#Z*g#Z#[#)k#[#]*g#]#^#)k#^#a*g#a#b#)k#b#g*g#g#h#)k#h#i*g#i#j#)k#j#k#)k#k#m*g#m#n#)k#n;'S*g;'S;=`+Z<%lO*g9d#+gZ(Wp(Z!bOY#+`Zr#+`rs!JUsw#+`wx#$Rx#O#+`#O#P!B[#P#Q#(i#Q;'S#+`;'S;=`#,Y<%lO#+`9d#,]P;=`<%l#+`9d#,cP;=`<%l#(i?O#,o`$i&j(Wp(Z!bOY#,fYZ&cZr#,frs!KSsw#,fwx#%Px!^#,f!^!_#+`!_#O#,f#O#P!DR#P#Q!;Z#Q#o#,f#o#p#+`#p;'S#,f;'S;=`#-q<%lO#,f?O#-tP;=`<%l#,f?O#-zP;=`<%l!;Z07[#.[b$i&j(Wp(Z!b(O0/l!X7`OY!;ZYZ&cZr!;Zrs!<nsw!;Zwx!Lcx!P!;Z!P!Q#&`!Q!^!;Z!^!_#(i!_!}!;Z!}#O#,f#O#P!Dy#P#o!;Z#o#p#(i#p;'S!;Z;'S;=`#-w<%lO!;Z07[#/o_$i&j(Wp(Z!bT0/lOY#/dYZ&cZr#/drs#0nsw#/dwx#4Ox!^#/d!^!_#5}!_#O#/d#O#P#1p#P#o#/d#o#p#5}#p;'S#/d;'S;=`#6|<%lO#/d06j#0w]$i&j(Z!bT0/lOY#0nYZ&cZw#0nwx#1px!^#0n!^!_#3R!_#O#0n#O#P#1p#P#o#0n#o#p#3R#p;'S#0n;'S;=`#3x<%lO#0n05W#1wX$i&jT0/lOY#1pYZ&cZ!^#1p!^!_#2d!_#o#1p#o#p#2d#p;'S#1p;'S;=`#2{<%lO#1p0/l#2iST0/lOY#2dZ;'S#2d;'S;=`#2u<%lO#2d0/l#2xP;=`<%l#2d05W#3OP;=`<%l#1p01O#3YW(Z!bT0/lOY#3RZw#3Rwx#2dx#O#3R#O#P#2d#P;'S#3R;'S;=`#3r<%lO#3R01O#3uP;=`<%l#3R06j#3{P;=`<%l#0n05x#4X]$i&j(WpT0/lOY#4OYZ&cZr#4Ors#1ps!^#4O!^!_#5Q!_#O#4O#O#P#1p#P#o#4O#o#p#5Q#p;'S#4O;'S;=`#5w<%lO#4O00^#5XW(WpT0/lOY#5QZr#5Qrs#2ds#O#5Q#O#P#2d#P;'S#5Q;'S;=`#5q<%lO#5Q00^#5tP;=`<%l#5Q05x#5zP;=`<%l#4O01p#6WY(Wp(Z!bT0/lOY#5}Zr#5}rs#3Rsw#5}wx#5Qx#O#5}#O#P#2d#P;'S#5};'S;=`#6v<%lO#5}01p#6yP;=`<%l#5}07[#7PP;=`<%l#/d)3h#7ab$i&j$Q(Ch(Wp(Z!b!X7`OY!;ZYZ&cZr!;Zrs!<nsw!;Zwx!Lcx!P!;Z!P!Q#&`!Q!^!;Z!^!_#(i!_!}!;Z!}#O#,f#O#P!Dy#P#o!;Z#o#p#(i#p;'S!;Z;'S;=`#-w<%lO!;ZAt#8vb$Z#t$i&j(Wp(Z!b!X7`OY!;ZYZ&cZr!;Zrs!<nsw!;Zwx!Lcx!P!;Z!P!Q#&`!Q!^!;Z!^!_#(i!_!}!;Z!}#O#,f#O#P!Dy#P#o!;Z#o#p#(i#p;'S!;Z;'S;=`#-w<%lO!;Z'Ad#:Zp$i&j(Wp(Z!bs'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!O%Z!O!P!3Y!P!Q%Z!Q![#<_![!^%Z!^!_*g!_!g%Z!g!h!4|!h#O%Z#O#P&c#P#R%Z#R#S#<_#S#U%Z#U#V#?i#V#X%Z#X#Y!4|#Y#b%Z#b#c#>_#c#d#Bq#d#l%Z#l#m#Es#m#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#<jk$i&j(Wp(Z!bs'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!O%Z!O!P!3Y!P!Q%Z!Q![#<_![!^%Z!^!_*g!_!g%Z!g!h!4|!h#O%Z#O#P&c#P#R%Z#R#S#<_#S#X%Z#X#Y!4|#Y#b%Z#b#c#>_#c#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#>j_$i&j(Wp(Z!bs'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#?rd$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q!R#AQ!R!S#AQ!S!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S#AQ#S#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#A]f$i&j(Wp(Z!bs'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q!R#AQ!R!S#AQ!S!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S#AQ#S#b%Z#b#c#>_#c#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#Bzc$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q!Y#DV!Y!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S#DV#S#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#Dbe$i&j(Wp(Z!bs'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q!Y#DV!Y!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S#DV#S#b%Z#b#c#>_#c#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#E|g$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q![#Ge![!^%Z!^!_*g!_!c%Z!c!i#Ge!i#O%Z#O#P&c#P#R%Z#R#S#Ge#S#T%Z#T#Z#Ge#Z#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#Gpi$i&j(Wp(Z!bs'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q![#Ge![!^%Z!^!_*g!_!c%Z!c!i#Ge!i#O%Z#O#P&c#P#R%Z#R#S#Ge#S#T%Z#T#Z#Ge#Z#b%Z#b#c#>_#c#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z*)x#Il_!g$b$i&j$O)Lv(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z)[#Jv_al$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z04f#LS^h#)`#R-<U(Wp(Z!b$n7`OY*gZr*grs'}sw*gwx)rx!P*g!P!Q#MO!Q!^*g!^!_#Mt!_!`$ f!`#O*g#P;'S*g;'S;=`+Z<%lO*g(n#MXX$k&j(Wp(Z!bOY*gZr*grs'}sw*gwx)rx#O*g#P;'S*g;'S;=`+Z<%lO*g(El#M}Z#r(Ch(Wp(Z!bOY*gZr*grs'}sw*gwx)rx!_*g!_!`#Np!`#O*g#P;'S*g;'S;=`+Z<%lO*g(El#NyX$Q(Ch(Wp(Z!bOY*gZr*grs'}sw*gwx)rx#O*g#P;'S*g;'S;=`+Z<%lO*g(El$ oX#s(Ch(Wp(Z!bOY*gZr*grs'}sw*gwx)rx#O*g#P;'S*g;'S;=`+Z<%lO*g*)x$!ga#`*!Y$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`0z!`!a$#l!a#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(K[$#w_#k(Cl$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z*)x$%Vag!*r#s(Ch$f#|$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`$&[!`!a$'f!a#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW$&g_#s(Ch$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW$'qa#r(Ch$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`!a$(v!a#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW$)R`#r(Ch$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(Kd$*`a(r(Ct$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!a%Z!a!b$+e!b#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW$+p`$i&j#{(Ch(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z%#`$,}_!|$Ip$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z04f$.X_!S0,v$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(n$/]Z$i&jO!^$0O!^!_$0f!_#i$0O#i#j$0k#j#l$0O#l#m$2^#m#o$0O#o#p$0f#p;'S$0O;'S;=`$4i<%lO$0O(n$0VT_#S$i&jO!^&c!_#o&c#p;'S&c;'S;=`&w<%lO&c#S$0kO_#S(n$0p[$i&jO!Q&c!Q![$1f![!^&c!_!c&c!c!i$1f!i#T&c#T#Z$1f#Z#o&c#o#p$3|#p;'S&c;'S;=`&w<%lO&c(n$1kZ$i&jO!Q&c!Q![$2^![!^&c!_!c&c!c!i$2^!i#T&c#T#Z$2^#Z#o&c#p;'S&c;'S;=`&w<%lO&c(n$2cZ$i&jO!Q&c!Q![$3U![!^&c!_!c&c!c!i$3U!i#T&c#T#Z$3U#Z#o&c#p;'S&c;'S;=`&w<%lO&c(n$3ZZ$i&jO!Q&c!Q![$0O![!^&c!_!c&c!c!i$0O!i#T&c#T#Z$0O#Z#o&c#p;'S&c;'S;=`&w<%lO&c#S$4PR!Q![$4Y!c!i$4Y#T#Z$4Y#S$4]S!Q![$4Y!c!i$4Y#T#Z$4Y#q#r$0f(n$4lP;=`<%l$0O#1[$4z_!Y#)l$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW$6U`#x(Ch$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z+;p$7c_$i&j(Wp(Z!b(a+4QOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z07[$8qk$i&j(Wp(Z!b(T,2j$_#t(e$I[OY%ZYZ&cZr%Zrs&}st%Ztu$8buw%Zwx(rx}%Z}!O$:f!O!Q%Z!Q![$8b![!^%Z!^!_*g!_!c%Z!c!}$8b!}#O%Z#O#P&c#P#R%Z#R#S$8b#S#T%Z#T#o$8b#o#p*g#p$g%Z$g;'S$8b;'S;=`$<l<%lO$8b+d$:qk$i&j(Wp(Z!b$_#tOY%ZYZ&cZr%Zrs&}st%Ztu$:fuw%Zwx(rx}%Z}!O$:f!O!Q%Z!Q![$:f![!^%Z!^!_*g!_!c%Z!c!}$:f!}#O%Z#O#P&c#P#R%Z#R#S$:f#S#T%Z#T#o$:f#o#p*g#p$g%Z$g;'S$:f;'S;=`$<f<%lO$:f+d$<iP;=`<%l$:f07[$<oP;=`<%l$8b#Jf$<{X!_#Hb(Wp(Z!bOY*gZr*grs'}sw*gwx)rx#O*g#P;'S*g;'S;=`+Z<%lO*g,#x$=sa(y+JY$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p#q$+e#q;'S%Z;'S;=`+a<%lO%Z)>v$?V_!^(CdvBr$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z?O$@a_!q7`$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z07[$Aq|$i&j(Wp(Z!b'|0/l$]#t(T,2j(e$I[OX%ZXY+gYZ&cZ[+g[p%Zpq+gqr%Zrs&}st%ZtuEruw%Zwx(rx}%Z}!OGv!O!Q%Z!Q![Er![!^%Z!^!_*g!_!c%Z!c!}Er!}#O%Z#O#P&c#P#R%Z#R#SEr#S#T%Z#T#oEr#o#p*g#p$f%Z$f$g+g$g#BYEr#BY#BZ$A`#BZ$ISEr$IS$I_$A`$I_$JTEr$JT$JU$A`$JU$KVEr$KV$KW$A`$KW&FUEr&FU&FV$A`&FV;'SEr;'S;=`I|<%l?HTEr?HT?HU$A`?HUOEr07[$D|k$i&j(Wp(Z!b'}0/l$]#t(T,2j(e$I[OY%ZYZ&cZr%Zrs&}st%ZtuEruw%Zwx(rx}%Z}!OGv!O!Q%Z!Q![Er![!^%Z!^!_*g!_!c%Z!c!}Er!}#O%Z#O#P&c#P#R%Z#R#SEr#S#T%Z#T#oEr#o#p*g#p$g%Z$g;'SEr;'S;=`I|<%lOEr",
  tokenizers: [noSemicolon, noSemicolonType, operatorToken, jsx, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, insertSemicolon, new LocalTokenGroup("$S~RRtu[#O#Pg#S#T#|~_P#o#pb~gOx~~jVO#i!P#i#j!U#j#l!P#l#m!q#m;'S!P;'S;=`#v<%lO!P~!UO!U~~!XS!Q![!e!c!i!e#T#Z!e#o#p#Z~!hR!Q![!q!c!i!q#T#Z!q~!tR!Q![!}!c!i!}#T#Z!}~#QR!Q![!P!c!i!P#T#Z!P~#^R!Q![#g!c!i#g#T#Z#g~#jS!Q![#g!c!i#g#T#Z#g#q#r!P~#yP;=`<%l!P~$RO(c~~", 141, 340), new LocalTokenGroup("j~RQYZXz{^~^O(Q~~aP!P!Qd~iO(R~~", 25, 323)],
  topRules: { Script: [0, 7], SingleExpression: [1, 276], SingleClassItem: [2, 277] },
  dialects: { jsx: 0, ts: 15175 },
  dynamicPrecedences: { "80": 1, "82": 1, "94": 1, "169": 1, "199": 1 },
  specialized: [{ term: 327, get: (value) => spec_identifier[value] || -1 }, { term: 343, get: (value) => spec_word[value] || -1 }, { term: 95, get: (value) => spec_LessThan[value] || -1 }],
  tokenPrec: 15201
});

// node_modules/@codemirror/lang-javascript/dist/index.js
var snippets = [
  /* @__PURE__ */ snippetCompletion("function ${name}(${params}) {\n\t${}\n}", {
    label: "function",
    detail: "definition",
    type: "keyword"
  }),
  /* @__PURE__ */ snippetCompletion("for (let ${index} = 0; ${index} < ${bound}; ${index}++) {\n\t${}\n}", {
    label: "for",
    detail: "loop",
    type: "keyword"
  }),
  /* @__PURE__ */ snippetCompletion("for (let ${name} of ${collection}) {\n\t${}\n}", {
    label: "for",
    detail: "of loop",
    type: "keyword"
  }),
  /* @__PURE__ */ snippetCompletion("do {\n\t${}\n} while (${})", {
    label: "do",
    detail: "loop",
    type: "keyword"
  }),
  /* @__PURE__ */ snippetCompletion("while (${}) {\n\t${}\n}", {
    label: "while",
    detail: "loop",
    type: "keyword"
  }),
  /* @__PURE__ */ snippetCompletion(`try {
	\${}
} catch (\${error}) {
	\${}
}`, {
    label: "try",
    detail: "/ catch block",
    type: "keyword"
  }),
  /* @__PURE__ */ snippetCompletion("if (${}) {\n\t${}\n}", {
    label: "if",
    detail: "block",
    type: "keyword"
  }),
  /* @__PURE__ */ snippetCompletion(`if (\${}) {
	\${}
} else {
	\${}
}`, {
    label: "if",
    detail: "/ else block",
    type: "keyword"
  }),
  /* @__PURE__ */ snippetCompletion(`class \${name} {
	constructor(\${params}) {
		\${}
	}
}`, {
    label: "class",
    detail: "definition",
    type: "keyword"
  }),
  /* @__PURE__ */ snippetCompletion('import {${names}} from "${module}"\n${}', {
    label: "import",
    detail: "named",
    type: "keyword"
  }),
  /* @__PURE__ */ snippetCompletion('import ${name} from "${module}"\n${}', {
    label: "import",
    detail: "default",
    type: "keyword"
  })
];
var typescriptSnippets = /* @__PURE__ */ snippets.concat([
  /* @__PURE__ */ snippetCompletion("interface ${name} {\n\t${}\n}", {
    label: "interface",
    detail: "definition",
    type: "keyword"
  }),
  /* @__PURE__ */ snippetCompletion("type ${name} = ${type}", {
    label: "type",
    detail: "definition",
    type: "keyword"
  }),
  /* @__PURE__ */ snippetCompletion("enum ${name} {\n\t${}\n}", {
    label: "enum",
    detail: "definition",
    type: "keyword"
  })
]);
var cache = /* @__PURE__ */ new NodeWeakMap;
var ScopeNodes = /* @__PURE__ */ new Set([
  "Script",
  "Block",
  "FunctionExpression",
  "FunctionDeclaration",
  "ArrowFunction",
  "MethodDeclaration",
  "ForStatement"
]);
function defID(type) {
  return (node, def) => {
    let id2 = node.node.getChild("VariableDefinition");
    if (id2)
      def(id2, type);
    return true;
  };
}
var functionContext = ["FunctionDeclaration"];
var gatherCompletions = {
  FunctionDeclaration: /* @__PURE__ */ defID("function"),
  ClassDeclaration: /* @__PURE__ */ defID("class"),
  ClassExpression: () => true,
  EnumDeclaration: /* @__PURE__ */ defID("constant"),
  TypeAliasDeclaration: /* @__PURE__ */ defID("type"),
  NamespaceDeclaration: /* @__PURE__ */ defID("namespace"),
  VariableDefinition(node, def) {
    if (!node.matchContext(functionContext))
      def(node, "variable");
  },
  TypeDefinition(node, def) {
    def(node, "type");
  },
  __proto__: null
};
function getScope(doc2, node) {
  let cached = cache.get(node);
  if (cached)
    return cached;
  let completions = [], top2 = true;
  function def(node2, type) {
    let name2 = doc2.sliceString(node2.from, node2.to);
    completions.push({ label: name2, type });
  }
  node.cursor(IterMode.IncludeAnonymous).iterate((node2) => {
    if (top2) {
      top2 = false;
    } else if (node2.name) {
      let gather = gatherCompletions[node2.name];
      if (gather && gather(node2, def) || ScopeNodes.has(node2.name))
        return false;
    } else if (node2.to - node2.from > 8192) {
      for (let c of getScope(doc2, node2.node))
        completions.push(c);
      return false;
    }
  });
  cache.set(node, completions);
  return completions;
}
var Identifier = /^[\w$\xa1-\uffff][\w$\d\xa1-\uffff]*$/;
var dontComplete = [
  "TemplateString",
  "String",
  "RegExp",
  "LineComment",
  "BlockComment",
  "VariableDefinition",
  "TypeDefinition",
  "Label",
  "PropertyDefinition",
  "PropertyName",
  "PrivatePropertyDefinition",
  "PrivatePropertyName",
  "JSXText",
  "JSXAttributeValue",
  "JSXOpenTag",
  "JSXCloseTag",
  "JSXSelfClosingTag",
  ".",
  "?."
];
function localCompletionSource(context) {
  let inner = syntaxTree(context.state).resolveInner(context.pos, -1);
  if (dontComplete.indexOf(inner.name) > -1)
    return null;
  let isWord = inner.name == "VariableName" || inner.to - inner.from < 20 && Identifier.test(context.state.sliceDoc(inner.from, inner.to));
  if (!isWord && !context.explicit)
    return null;
  let options = [];
  for (let pos = inner;pos; pos = pos.parent) {
    if (ScopeNodes.has(pos.name))
      options = options.concat(getScope(context.state.doc, pos));
  }
  return {
    options,
    from: isWord ? inner.from : context.pos,
    validFor: Identifier
  };
}
var javascriptLanguage = /* @__PURE__ */ LRLanguage.define({
  name: "javascript",
  parser: /* @__PURE__ */ parser.configure({
    props: [
      /* @__PURE__ */ indentNodeProp.add({
        IfStatement: /* @__PURE__ */ continuedIndent({ except: /^\s*({|else\b)/ }),
        TryStatement: /* @__PURE__ */ continuedIndent({ except: /^\s*({|catch\b|finally\b)/ }),
        LabeledStatement: flatIndent,
        SwitchBody: (context) => {
          let after = context.textAfter, closed = /^\s*\}/.test(after), isCase = /^\s*(case|default)\b/.test(after);
          return context.baseIndent + (closed ? 0 : isCase ? 1 : 2) * context.unit;
        },
        Block: /* @__PURE__ */ delimitedIndent({ closing: "}" }),
        ArrowFunction: (cx) => cx.baseIndent + cx.unit,
        "TemplateString BlockComment": () => null,
        "Statement Property": /* @__PURE__ */ continuedIndent({ except: /^\s*{/ }),
        JSXElement(context) {
          let closed = /^\s*<\//.test(context.textAfter);
          return context.lineIndent(context.node.from) + (closed ? 0 : context.unit);
        },
        JSXEscape(context) {
          let closed = /\s*\}/.test(context.textAfter);
          return context.lineIndent(context.node.from) + (closed ? 0 : context.unit);
        },
        "JSXOpenTag JSXSelfClosingTag"(context) {
          return context.column(context.node.from) + context.unit;
        }
      }),
      /* @__PURE__ */ foldNodeProp.add({
        "Block ClassBody SwitchBody EnumBody ObjectExpression ArrayExpression ObjectType": foldInside,
        BlockComment(tree) {
          return { from: tree.from + 2, to: tree.to - 2 };
        }
      })
    ]
  }),
  languageData: {
    closeBrackets: { brackets: ["(", "[", "{", "'", '"', "`"] },
    commentTokens: { line: "//", block: { open: "/*", close: "*/" } },
    indentOnInput: /^\s*(?:case |default:|\{|\}|<\/)$/,
    wordChars: "$"
  }
});
var jsxSublanguage = {
  test: (node) => /^JSX/.test(node.name),
  facet: /* @__PURE__ */ defineLanguageFacet({ commentTokens: { block: { open: "{/*", close: "*/}" } } })
};
var typescriptLanguage = /* @__PURE__ */ javascriptLanguage.configure({ dialect: "ts" }, "typescript");
var jsxLanguage = /* @__PURE__ */ javascriptLanguage.configure({
  dialect: "jsx",
  props: [/* @__PURE__ */ sublanguageProp.add((n) => n.isTop ? [jsxSublanguage] : undefined)]
});
var tsxLanguage = /* @__PURE__ */ javascriptLanguage.configure({
  dialect: "jsx ts",
  props: [/* @__PURE__ */ sublanguageProp.add((n) => n.isTop ? [jsxSublanguage] : undefined)]
}, "typescript");
var kwCompletion = (name2) => ({ label: name2, type: "keyword" });
var keywords = /* @__PURE__ */ "break case const continue default delete export extends false finally in instanceof let new return static super switch this throw true typeof var yield".split(" ").map(kwCompletion);
var typescriptKeywords = /* @__PURE__ */ keywords.concat(/* @__PURE__ */ ["declare", "implements", "private", "protected", "public"].map(kwCompletion));
function javascript(config2 = {}) {
  let lang = config2.jsx ? config2.typescript ? tsxLanguage : jsxLanguage : config2.typescript ? typescriptLanguage : javascriptLanguage;
  let completions = config2.typescript ? typescriptSnippets.concat(typescriptKeywords) : snippets.concat(keywords);
  return new LanguageSupport(lang, [
    javascriptLanguage.data.of({
      autocomplete: ifNotIn(dontComplete, completeFromList(completions))
    }),
    javascriptLanguage.data.of({
      autocomplete: localCompletionSource
    }),
    config2.jsx ? autoCloseTags : []
  ]);
}
function findOpenTag(node) {
  for (;; ) {
    if (node.name == "JSXOpenTag" || node.name == "JSXSelfClosingTag" || node.name == "JSXFragmentTag")
      return node;
    if (node.name == "JSXEscape" || !node.parent)
      return null;
    node = node.parent;
  }
}
function elementName(doc2, tree, max = doc2.length) {
  for (let ch = tree === null || tree === undefined ? undefined : tree.firstChild;ch; ch = ch.nextSibling) {
    if (ch.name == "JSXIdentifier" || ch.name == "JSXBuiltin" || ch.name == "JSXNamespacedName" || ch.name == "JSXMemberExpression")
      return doc2.sliceString(ch.from, Math.min(ch.to, max));
  }
  return "";
}
var android2 = typeof navigator == "object" && /* @__PURE__ */ /Android\b/.test(navigator.userAgent);
var autoCloseTags = /* @__PURE__ */ EditorView.inputHandler.of((view, from, to, text, defaultInsert) => {
  if ((android2 ? view.composing : view.compositionStarted) || view.state.readOnly || from != to || text != ">" && text != "/" || !javascriptLanguage.isActiveAt(view.state, from, -1))
    return false;
  let base2 = defaultInsert(), { state } = base2;
  let closeTags = state.changeByRange((range) => {
    var _a2;
    let { head } = range, around = syntaxTree(state).resolveInner(head - 1, -1), name2;
    if (around.name == "JSXStartTag")
      around = around.parent;
    if (state.doc.sliceString(head - 1, head) != text || around.name == "JSXAttributeValue" && around.to > head)
      ;
    else if (text == ">" && around.name == "JSXFragmentTag") {
      return { range, changes: { from: head, insert: `</>` } };
    } else if (text == "/" && around.name == "JSXStartCloseTag") {
      let empty2 = around.parent, base3 = empty2.parent;
      if (base3 && empty2.from == head - 2 && ((name2 = elementName(state.doc, base3.firstChild, head)) || ((_a2 = base3.firstChild) === null || _a2 === undefined ? undefined : _a2.name) == "JSXFragmentTag")) {
        let insert2 = `${name2}>`;
        return { range: EditorSelection.cursor(head + insert2.length, -1), changes: { from: head, insert: insert2 } };
      }
    } else if (text == ">") {
      let openTag = findOpenTag(around);
      if (openTag && openTag.name == "JSXOpenTag" && !/^\/?>|^<\//.test(state.doc.sliceString(head, head + 2)) && (name2 = elementName(state.doc, openTag, head)))
        return { range, changes: { from: head, insert: `</${name2}>` } };
    }
    return { range };
  });
  if (closeTags.changes.empty)
    return false;
  view.dispatch([
    base2,
    state.update(closeTags, { userEvent: "input.complete", scrollIntoView: true })
  ]);
  return true;
});

// node_modules/@lezer/css/dist/index.js
var descendantOp = 122;
var Unit = 1;
var identifier = 123;
var callee = 124;
var VariableName = 2;
var queryIdentifier = 125;
var queryVariableName = 3;
var QueryCallee = 4;
var space2 = [
  9,
  10,
  11,
  12,
  13,
  32,
  133,
  160,
  5760,
  8192,
  8193,
  8194,
  8195,
  8196,
  8197,
  8198,
  8199,
  8200,
  8201,
  8202,
  8232,
  8233,
  8239,
  8287,
  12288
];
var colon = 58;
var parenL = 40;
var underscore = 95;
var bracketL2 = 91;
var dash = 45;
var period = 46;
var hash = 35;
var percent = 37;
var ampersand = 38;
var backslash = 92;
var newline2 = 10;
var asterisk = 42;
function isAlpha(ch) {
  return ch >= 65 && ch <= 90 || ch >= 97 && ch <= 122 || ch >= 161;
}
function isDigit(ch) {
  return ch >= 48 && ch <= 57;
}
function isHex(ch) {
  return isDigit(ch) || ch >= 97 && ch <= 102 || ch >= 65 && ch <= 70;
}
var identifierTokens = (id2, varName, callee2) => (input, stack) => {
  for (let inside = false, dashes = 0, i2 = 0;; i2++) {
    let { next } = input;
    if (isAlpha(next) || next == dash || next == underscore || inside && isDigit(next)) {
      if (!inside && (next != dash || i2 > 0))
        inside = true;
      if (dashes === i2 && next == dash)
        dashes++;
      input.advance();
    } else if (next == backslash && input.peek(1) != newline2) {
      input.advance();
      if (isHex(input.next)) {
        do {
          input.advance();
        } while (isHex(input.next));
        if (input.next == 32)
          input.advance();
      } else if (input.next > -1) {
        input.advance();
      }
      inside = true;
    } else {
      if (inside)
        input.acceptToken(dashes == 2 && stack.canShift(VariableName) ? varName : next == parenL ? callee2 : id2);
      break;
    }
  }
};
var identifiers = new ExternalTokenizer(identifierTokens(identifier, VariableName, callee));
var queryIdentifiers = new ExternalTokenizer(identifierTokens(queryIdentifier, queryVariableName, QueryCallee));
var descendant = new ExternalTokenizer((input) => {
  if (space2.includes(input.peek(-1))) {
    let { next } = input;
    if (isAlpha(next) || next == underscore || next == hash || next == period || next == asterisk || next == bracketL2 || next == colon && isAlpha(input.peek(1)) || next == dash || next == ampersand)
      input.acceptToken(descendantOp);
  }
});
var unitToken = new ExternalTokenizer((input) => {
  if (!space2.includes(input.peek(-1))) {
    let { next } = input;
    if (next == percent) {
      input.advance();
      input.acceptToken(Unit);
    }
    if (isAlpha(next)) {
      do {
        input.advance();
      } while (isAlpha(input.next) || isDigit(input.next));
      input.acceptToken(Unit);
    }
  }
});
var cssHighlighting = styleTags({
  "AtKeyword import charset namespace keyframes media supports": tags.definitionKeyword,
  "from to selector": tags.keyword,
  NamespaceName: tags.namespace,
  KeyframeName: tags.labelName,
  KeyframeRangeName: tags.operatorKeyword,
  TagName: tags.tagName,
  ClassName: tags.className,
  PseudoClassName: tags.constant(tags.className),
  IdName: tags.labelName,
  "FeatureName PropertyName": tags.propertyName,
  AttributeName: tags.attributeName,
  NumberLiteral: tags.number,
  KeywordQuery: tags.keyword,
  UnaryQueryOp: tags.operatorKeyword,
  "CallTag ValueName": tags.atom,
  VariableName: tags.variableName,
  Callee: tags.operatorKeyword,
  Unit: tags.unit,
  "UniversalSelector NestingSelector": tags.definitionOperator,
  "MatchOp CompareOp": tags.compareOperator,
  "ChildOp SiblingOp, LogicOp": tags.logicOperator,
  BinOp: tags.arithmeticOperator,
  Important: tags.modifier,
  Comment: tags.blockComment,
  ColorLiteral: tags.color,
  "ParenthesizedContent StringLiteral": tags.string,
  ":": tags.punctuation,
  "PseudoOp #": tags.derefOperator,
  "; ,": tags.separator,
  "( )": tags.paren,
  "[ ]": tags.squareBracket,
  "{ }": tags.brace
});
var spec_callee = { __proto__: null, lang: 38, "nth-child": 38, "nth-last-child": 38, "nth-of-type": 38, "nth-last-of-type": 38, dir: 38, "host-context": 38, if: 84, url: 124, "url-prefix": 124, domain: 124, regexp: 124 };
var spec_queryIdentifier = { __proto__: null, or: 98, and: 98, not: 106, only: 106, layer: 170 };
var spec_QueryCallee = { __proto__: null, selector: 112, layer: 166 };
var spec_AtKeyword = { __proto__: null, "@import": 162, "@media": 174, "@charset": 178, "@namespace": 182, "@keyframes": 188, "@supports": 200, "@scope": 204 };
var spec_identifier2 = { __proto__: null, to: 207 };
var parser2 = LRParser.deserialize({
  version: 14,
  states: "EbQYQdOOO#qQdOOP#xO`OOOOQP'#Cf'#CfOOQP'#Ce'#CeO#}QdO'#ChO$nQaO'#CcO$xQdO'#CkO%TQdO'#DpO%YQdO'#DrO%_QdO'#DuO%_QdO'#DxOOQP'#FV'#FVO&eQhO'#EhOOQS'#FU'#FUOOQS'#Ek'#EkQYQdOOO&lQdO'#EOO&PQhO'#EUO&lQdO'#EWO'aQdO'#EYO'lQdO'#E]O'tQhO'#EcO(VQdO'#EeO(bQaO'#CfO)VQ`O'#D{O)[Q`O'#F`O)gQdO'#F`QOQ`OOP)qO&jO'#CaPOOO)C@t)C@tOOQP'#Cj'#CjOOQP,59S,59SO#}QdO,59SO)|QdO,59VO%TQdO,5:[O%YQdO,5:^O%_QdO,5:aO%_QdO,5:cO%_QdO,5:dO%_QdO'#ErO*XQ`O,58}O*aQdO'#DzOOQS,58},58}OOQP'#Cn'#CnOOQO'#Dn'#DnOOQP,59V,59VO*hQ`O,59VO*mQ`O,59VOOQP'#Dq'#DqOOQP,5:[,5:[OOQO'#Ds'#DsO*rQpO,5:^O+]QaO,5:aO+sQaO,5:dOOQW'#DZ'#DZO,ZQhO'#DdO,xQhO'#FaO'tQhO'#DbO-WQ`O'#DhOOQW'#F['#F[O-]Q`O,5;SO-eQ`O'#DeOOQS-E8i-E8iOOQ['#Cs'#CsO-jQdO'#CtO.QQdO'#CzO.hQdO'#C}O/OQ!pO'#DPO1RQ!jO,5:jOOQO'#DU'#DUO*mQ`O'#DTO1cQ!nO'#FXO3`Q`O'#DVO3eQ`O'#DkOOQ['#FX'#FXO-`Q`O,5:pO3jQ!bO,5:rOOQS'#E['#E[O3rQ`O,5:tO3wQdO,5:tOOQO'#E_'#E_O4PQ`O,5:wO4UQhO,5:}O%_QdO'#DgOOQS,5;P,5;PO-eQ`O,5;PO4^QdO,5;PO4fQdO,5:gO4vQdO'#EtO5TQ`O,5;zO5TQ`O,5;zPOOO'#Ej'#EjP5`O&jO,58{POOO,58{,58{OOQP1G.n1G.nOOQP1G.q1G.qO*hQ`O1G.qO*mQ`O1G.qOOQP1G/v1G/vO5kQpO1G/xO5sQaO1G/{O6ZQaO1G/}O6qQaO1G0OO7XQaO,5;^OOQO-E8p-E8pOOQS1G.i1G.iO7cQ`O,5:fO7hQdO'#DoO7oQdO'#CrOOQP1G/x1G/xO&lQdO1G/xO7vQ!jO'#DZO8UQ!bO,59vO8^QhO,5:OOOQO'#F]'#F]O8XQ!bO,59zO'tQhO,59xO8fQhO'#EvO8sQ`O,5;{O9OQhO,59|O9uQhO'#DiOOQW,5:S,5:SOOQS1G0n1G0nOOQW,5:P,5:PO9|Q!fO'#FYOOQS'#FY'#FYOOQS'#Em'#EmO;^QdO,59`OOQ[,59`,59`O;tQdO,59fOOQ[,59f,59fO<[QdO,59iOOQ[,59i,59iOOQ[,59k,59kO&lQdO,59mO<rQhO'#EQOOQW'#EQ'#EQO=WQ`O1G0UO1[QhO1G0UOOQ[,59o,59oO'tQhO'#DXOOQ[,59q,59qO=]Q#tO,5:VOOQS1G0[1G0[OOQS1G0^1G0^OOQS1G0`1G0`O=hQ`O1G0`O=mQdO'#E`OOQS1G0c1G0cOOQS1G0i1G0iO=xQaO,5:RO-`Q`O1G0kOOQS1G0k1G0kO-eQ`O1G0kO>PQ!fO1G0ROOQO1G0R1G0ROOQO,5;`,5;`O>gQdO,5;`OOQO-E8r-E8rO>tQ`O1G1fPOOO-E8h-E8hPOOO1G.g1G.gOOQP7+$]7+$]OOQP7+%d7+%dO&lQdO7+%dOOQS1G0Q1G0QO?PQaO'#F_O?ZQ`O,5:ZO?`Q!fO'#ElO@^QdO'#FWO@hQ`O,59^O@mQ!bO7+%dO&lQdO1G/bO@uQhO1G/fOOQW1G/j1G/jOOQW1G/d1G/dOAWQhO,5;bOOQO-E8t-E8tOAfQhO'#DZOAtQhO'#F^OBPQ`O'#F^OBUQ`O,5:TOOQS-E8k-E8kOOQ[1G.z1G.zOOQ[1G/Q1G/QOOQ[1G/T1G/TOOQ[1G/X1G/XOBZQdO,5:lOOQS7+%p7+%pOB`Q`O7+%pOBeQhO'#DYOBmQ`O,59sO'tQhO,59sOOQ[1G/q1G/qOBuQ`O1G/qOOQS7+%z7+%zOBzQbO'#DPOOQO'#Eb'#EbOCYQ`O'#EaOOQO'#Ea'#EaOCeQ`O'#EwOCmQdO,5:zOOQS,5:z,5:zOOQ[1G/m1G/mOOQS7+&V7+&VO-`Q`O7+&VOCxQ!fO'#EsO&lQdO'#EsOEPQdO7+%mOOQO7+%m7+%mOOQO1G0z1G0zOEdQ!bO<<IOOElQdO'#EqOEvQ`O,5;yOOQP1G/u1G/uOOQS-E8j-E8jOFOQdO'#EpOFYQ`O,5;rOOQ]1G.x1G.xOOQP<<IO<<IOOFbQdO7+$|OOQO'#D]'#D]OFiQ!bO7+%QOFqQhO'#EoOF{Q`O,5;xO&lQdO,5;xOOQW1G/o1G/oOOQO'#ES'#ESOGTQ`O1G0WOOQS<<I[<<I[O&lQdO,59tOGnQhO1G/_OOQ[1G/_1G/_OGuQ`O1G/_OOQW-E8l-E8lOOQ[7+%]7+%]OOQO,5:{,5:{O=pQdO'#ExOCeQ`O,5;cOOQS,5;c,5;cOOQS-E8u-E8uOOQS1G0f1G0fOOQS<<Iq<<IqOG}Q!fO,5;_OOQS-E8q-E8qOOQO<<IX<<IXOOQPAN>jAN>jOIUQaO,5;]OOQO-E8o-E8oOI`QdO,5;[OOQO-E8n-E8nOOQW<<Hh<<HhOOQW<<Hl<<HlOIjQhO<<HlOI{QhO,5;ZOJWQ`O,5;ZOOQO-E8m-E8mOJ]QdO1G1dOBZQdO'#EuOJgQ`O7+%rOOQW7+%r7+%rOJoQ!bO1G/`OOQ[7+$y7+$yOJzQhO7+$yPKRQ`O'#EnOOQO,5;d,5;dOOQO-E8v-E8vOOQS1G0}1G0}OKWQ`OAN>WO&lQdO1G0uOK]Q`O7+'OOOQO,5;a,5;aOOQO-E8s-E8sOOQW<<I^<<I^OOQ[<<He<<HePOQW,5;Y,5;YOOQWG23rG23rOKeQdO7+&a",
  stateData: "Kx~O#sOS#tQQ~OW[OZ[O]TO`VOaVOi]OjWOmXO!jYO!mZO!saO!ybO!{cO!}dO#QeO#WfO#YgO#oRO~OQiOW[OZ[O]TO`VOaVOi]OjWOmXO!jYO!mZO!saO!ybO!{cO!}dO#QeO#WfO#YgO#ohO~O#m$SP~P!dO#tmO~O#ooO~O]qO`rOarOjsOmtO!juO!mwO#nvO~OpzO!^xO~P$SOc!QO#o|O#p}O~O#o!RO~O#o!TO~OW[OZ[O]TO`VOaVOjWOmXO!jYO!mZO#oRO~OS!]Oe!YO!V![O!Y!`O#q!XOp$TP~Ok$TP~P&POQ!jOe!cOm!dOp!eOr!mOt!mOz!kO!`!lO#o!bO#p!hO#}!fO~Ot!qO!`!lO#o!pO~Ot!sO#o!sO~OS!]Oe!YO!V![O!Y!`O#q!XO~Oe!vOpzO#Z!xO~O]YX`YX`!pXaYXjYXmYXpYX!^YX!jYX!mYX#nYX~O`!zO~Ok!{O#m$SXo$SX~O#m$SXo$SX~P!dO#u#OO#v#OO#w#QO~Oc#UO#o|O#p}O~OpzO!^xO~Oo$SP~P!dOe#`O~Oe#aO~Ol#bO!h#cO~O]qO`rOarOjsOmtO~Op!ia!^!ia!j!ia!m!ia#n!iad!ia~P*zOp!la!^!la!j!la!m!la#n!lad!la~P*zOR#gOS!]Oe!YOr#gOt#gO!V![O!Y!`O#q#dO#}!fO~O!R#iO!^#jOk$TXp$TX~Oe#mO~Ok#oOpzO~Oe!vO~O]#rO`#rOd#uOi#rOj#rOk#rO~P&lO]#rO`#rOi#rOj#rOk#rOl#wO~P&lO]#rO`#rOi#rOj#rOk#rOo#yO~P&lOP#zOSsXesXksXvsX!VsX!YsX!usX!wsX#qsX!TsXQsX]sX`sXdsXisXjsXmsXpsXrsXtsXzsX!`sX#osX#psX#}sXlsXosX!^sX!qsX#msX~Ov#{O!u#|O!w#}Ok$TP~P'tOe#aOS#{Xk#{Xv#{X!V#{X!Y#{X!u#{X!w#{X#q#{XQ#{X]#{X`#{Xd#{Xi#{Xj#{Xm#{Xp#{Xr#{Xt#{Xz#{X!`#{X#o#{X#p#{X#}#{Xl#{Xo#{X!^#{X!q#{X#m#{X~Oe$RO~Oe$TO~Ok$VOv#{O~Ok$WO~Ot$XO!`!lO~Op$YO~OpzO!R#iO~OpzO#Z$`O~O!q$bOk!oa#m!oao!oa~P&lOk#hX#m#hXo#hX~P!dOk!{O#m$Sao$Sa~O#u#OO#v#OO#w$hO~Ol$jO!h$kO~Op!ii!^!ii!j!ii!m!ii#n!iid!ii~P*zOp!ki!^!ki!j!ki!m!ki#n!kid!ki~P*zOp!li!^!li!j!li!m!li#n!lid!li~P*zOp#fa!^#fa~P$SOo$lO~Od$RP~P%_Od#zP~P&lO`!PXd}X!R}X!T!PX~O`$sO!T$tO~Od$uO!R#iO~Ok#jXp#jX!^#jX~P'tO!^#jOk$Tap$Ta~O!R#iOk!Uap!Ua!^!Uad!Ua`!Ua~OS!]Oe!YO!V![O!Y!`O#q$yO~Od$QP~P9dOv#{OQ#|X]#|X`#|Xd#|Xe#|Xi#|Xj#|Xk#|Xm#|Xp#|Xr#|Xt#|Xz#|X!`#|X#o#|X#p#|X#}#|Xl#|Xo#|X~O]#rO`#rOd%OOi#rOj#rOk#rO~P&lO]#rO`#rOi#rOj#rOk#rOl%PO~P&lO]#rO`#rOi#rOj#rOk#rOo%QO~P&lOe%SOS!tXk!tX!V!tX!Y!tX#q!tX~Ok%TO~Od%YOt%ZO!a%ZO~Ok%[O~Oo%cO#o%^O#}%]O~Od%dO~P$SOv#{O!^%hO!q%jOk!oi#m!oio!oi~P&lOk#ha#m#hao#ha~P!dOk!{O#m$Sio$Si~O!^%mOd$RX~P$SOd%oO~Ov#{OQ#`Xd#`Xe#`Xm#`Xp#`Xr#`Xt#`Xz#`X!^#`X!`#`X#o#`X#p#`X#}#`X~O!^%qOd#zX~P&lOd%sO~Ol%tOv#{O~OR#gOr#gOt#gO#q%vO#}!fO~O!R#iOk#jap#ja!^#ja~O`!PXd}X!R}X!^}X~O!R#iO!^%xOd$QX~O`%zO~Od%{O~O#o%|O~Ok&OO~O`&PO!R#iO~Od&ROk&QO~Od&UO~OP#zOpsX!^sXdsX~O#}%]Op#TX!^#TX~OpzO!^&WO~Oo&[O#o%^O#}%]O~Ov#{OQ#gXe#gXk#gXm#gXp#gXr#gXt#gXz#gX!^#gX!`#gX!q#gX#m#gX#o#gX#p#gX#}#gXo#gX~O!^%hO!q&`Ok!oq#m!oqo!oq~P&lOl&aOv#{O~Od#eX!^#eX~P%_O!^%mOd$Ra~Od#dX!^#dX~P&lO!^%qOd#za~Od&fO~P&lOd&gO!T&hO~Od#cX!^#cX~P9dO!^%xOd$Qa~O]&mOd&oO~OS#bae#ba!V#ba!Y#ba#q#ba~Od&qO~PG]Od&qOk&rO~Ov#{OQ#gae#gak#gam#gap#gar#gat#gaz#ga!^#ga!`#ga!q#ga#m#ga#o#ga#p#ga#}#gao#ga~Od#ea!^#ea~P$SOd#da!^#da~P&lOR#gOr#gOt#gO#q%vO#}%]O~O!R#iOd#ca!^#ca~O`&xO~O!^%xOd$Qi~P&lO]&mOd&|O~Ov#{Od|ik|i~Od&}O~PG]Ok'OO~Od'PO~O!^%xOd$Qq~Od#cq!^#cq~P&lO#s!a#t#}]#}v!m~",
  goto: "2h$UPPPPP$VP$YP$c$uP$cP%X$cPP%_PPP%e%o%oPPPPP%oPP%oP&]P%oP%o'W%oP't'w'}'}(^'}P'}P'}P'}'}P(m'}(yP(|PP)p)v$c)|$c*SP$cP$c$cP*Y*{+YP$YP+aP+dP$YP$YP$YP+j$YP+m+p+s+z$YP$YPP$YP,P,V,f,|-[-b-l-r-x.O.U.`.f.l.rPPPPPPPPPPP.x/R/w/z0|P1U1u2O2R2U2[RnQ_^OP`kz!{$dq[OPYZ`kuvwxz!v!{#`$d%mqSOPYZ`kuvwxz!v!{#`$d%mQpTR#RqQ!OVR#SrQ#S!QS$Q!i!jR$i#U!V!mac!c!d!e!z#a#c#t#v#x#{$a$k$p$s%h%i%q%u%z&P&d&l&x'Q!U!mac!c!d!e!z#a#c#t#v#x#{$a$k$p$s%h%i%q%u%z&P&d&l&x'QU#g!Y$t&hU%`$Y%b&WR&V%_!V!iac!c!d!e!z#a#c#t#v#x#{$a$k$p$s%h%i%q%u%z&P&d&l&x'QR$S!kQ%W$RR&S%Xk!^]bf!Y![!g#i#j#m$P$R%X%xQ#e!YQ${#mQ%w$tQ&j%xR&w&hQ!ygQ#p!`Q$^!xR%f$`R#n!]!U!mac!c!d!e!z#a#c#t#v#x#{$a$k$p$s%h%i%q%u%z&P&d&l&x'QQ!qdR$X!rQ!PVR#TrQ#S!PR$i#TQ!SWR#VsQ!UXR#WtQ{UQ!wgQ#^yQ#o!_Q$U!nQ$[!uQ$_!yQ%e$^Q&Y%aQ&]%fR&v&XSjPzQ!}kQ$c!{R%k$dZiPkz!{$dR$P!gQ%}%SR&z&mR!rdR!teR$Z!tS%a$Y%bR&t&WV%_$Y%b&WQ#PmR$g#PQ`OSkPzU!a`k$dR$d!{Q$p#aY%p$p%u&d&l'QQ%u$sQ&d%qQ&l%zR'Q&xQ#t!cQ#v!dQ#x!eV$}#t#v#xQ%X$RR&T%XQ%y$zS&k%y&yR&y&lQ%r$pR&e%rQ%n$mR&c%nQyUR#]yQ%i$aR&_%iQ!|jS$e!|$fR$f!}Q&n%}R&{&nQ#k!ZR$x#kQ%b$YR&Z%bQ&X%aR&u&X__OP`kz!{$d^UOP`kz!{$dQ!VYQ!WZQ#XuQ#YvQ#ZwQ#[xQ$]!vQ$m#`R&b%mR$q#aQ!gaQ!oc[#q!c!d!e#t#v#xQ$a!zd$o#a$p$s%q%u%z&d&l&x'QQ$r#cQ%R#{S%g$a%iQ%l$kQ&^%hR&p&P]#s!c!d!e#t#v#xW!Z]b!g$PQ!ufQ#f!YQ#l![Q$v#iQ$w#jQ$z#mS%V$R%XR&i%xQ#h!YQ%w$tR&w&hR$|#mR$n#`QlPR#_zQ!_]Q!nbQ$O!gR%U$P",
  nodeNames: " Unit VariableName VariableName QueryCallee Comment StyleSheet RuleSet UniversalSelector TagSelector TagName NestingSelector ClassSelector . ClassName PseudoClassSelector : :: PseudoClassName PseudoClassName ) ( ArgList ValueName ParenthesizedValue AtKeyword # ; ] [ BracketedValue } { BracedValue ColorLiteral NumberLiteral StringLiteral BinaryExpression BinOp CallExpression Callee IfExpression if ArgList IfBranch KeywordQuery FeatureQuery FeatureName BinaryQuery LogicOp ComparisonQuery CompareOp UnaryQuery UnaryQueryOp ParenthesizedQuery SelectorQuery selector ParenthesizedSelector CallQuery ArgList , CallLiteral CallTag ParenthesizedContent PseudoClassName ArgList IdSelector IdName AttributeSelector AttributeName MatchOp ChildSelector ChildOp DescendantSelector SiblingSelector SiblingOp Block Declaration PropertyName Important ImportStatement import Layer layer LayerName layer MediaStatement media CharsetStatement charset NamespaceStatement namespace NamespaceName KeyframesStatement keyframes KeyframeName KeyframeList KeyframeSelector KeyframeRangeName SupportsStatement supports ScopeStatement scope to AtRule Styles",
  maxTerm: 143,
  nodeProps: [
    ["isolate", -2, 5, 36, ""],
    ["openedBy", 20, "(", 28, "[", 31, "{"],
    ["closedBy", 21, ")", 29, "]", 32, "}"]
  ],
  propSources: [cssHighlighting],
  skippedNodes: [0, 5, 106],
  repeatNodeCount: 15,
  tokenData: "JQ~R!YOX$qX^%i^p$qpq%iqr({rs-ust/itu6Wuv$qvw7Qwx7cxy9Qyz9cz{9h{|:R|}>t}!O?V!O!P?t!P!Q@]!Q![AU![!]BP!]!^B{!^!_C^!_!`DY!`!aDm!a!b$q!b!cEn!c!}$q!}#OG{#O#P$q#P#QH^#Q#R6W#R#o$q#o#pHo#p#q6W#q#rIQ#r#sIc#s#y$q#y#z%i#z$f$q$f$g%i$g#BY$q#BY#BZ%i#BZ$IS$q$IS$I_%i$I_$I|$q$I|$JO%i$JO$JT$q$JT$JU%i$JU$KV$q$KV$KW%i$KW&FU$q&FU&FV%i&FV;'S$q;'S;=`Iz<%lO$q`$tSOy%Qz;'S%Q;'S;=`%c<%lO%Q`%VS!a`Oy%Qz;'S%Q;'S;=`%c<%lO%Q`%fP;=`<%l%Q~%nh#s~OX%QX^'Y^p%Qpq'Yqy%Qz#y%Q#y#z'Y#z$f%Q$f$g'Y$g#BY%Q#BY#BZ'Y#BZ$IS%Q$IS$I_'Y$I_$I|%Q$I|$JO'Y$JO$JT%Q$JT$JU'Y$JU$KV%Q$KV$KW'Y$KW&FU%Q&FU&FV'Y&FV;'S%Q;'S;=`%c<%lO%Q~'ah#s~!a`OX%QX^'Y^p%Qpq'Yqy%Qz#y%Q#y#z'Y#z$f%Q$f$g'Y$g#BY%Q#BY#BZ'Y#BZ$IS%Q$IS$I_'Y$I_$I|%Q$I|$JO'Y$JO$JT%Q$JT$JU'Y$JU$KV%Q$KV$KW'Y$KW&FU%Q&FU&FV'Y&FV;'S%Q;'S;=`%c<%lO%Qj)OUOy%Qz#]%Q#]#^)b#^;'S%Q;'S;=`%c<%lO%Qj)gU!a`Oy%Qz#a%Q#a#b)y#b;'S%Q;'S;=`%c<%lO%Qj*OU!a`Oy%Qz#d%Q#d#e*b#e;'S%Q;'S;=`%c<%lO%Qj*gU!a`Oy%Qz#c%Q#c#d*y#d;'S%Q;'S;=`%c<%lO%Qj+OU!a`Oy%Qz#f%Q#f#g+b#g;'S%Q;'S;=`%c<%lO%Qj+gU!a`Oy%Qz#h%Q#h#i+y#i;'S%Q;'S;=`%c<%lO%Qj,OU!a`Oy%Qz#T%Q#T#U,b#U;'S%Q;'S;=`%c<%lO%Qj,gU!a`Oy%Qz#b%Q#b#c,y#c;'S%Q;'S;=`%c<%lO%Qj-OU!a`Oy%Qz#h%Q#h#i-b#i;'S%Q;'S;=`%c<%lO%Qj-iS!qY!a`Oy%Qz;'S%Q;'S;=`%c<%lO%Q~-xWOY-uZr-urs.bs#O-u#O#P.g#P;'S-u;'S;=`/c<%lO-u~.gOt~~.jRO;'S-u;'S;=`.s;=`O-u~.vXOY-uZr-urs.bs#O-u#O#P.g#P;'S-u;'S;=`/c;=`<%l-u<%lO-u~/fP;=`<%l-uj/nYjYOy%Qz!Q%Q!Q![0^![!c%Q!c!i0^!i#T%Q#T#Z0^#Z;'S%Q;'S;=`%c<%lO%Qj0cY!a`Oy%Qz!Q%Q!Q![1R![!c%Q!c!i1R!i#T%Q#T#Z1R#Z;'S%Q;'S;=`%c<%lO%Qj1WY!a`Oy%Qz!Q%Q!Q![1v![!c%Q!c!i1v!i#T%Q#T#Z1v#Z;'S%Q;'S;=`%c<%lO%Qj1}YrY!a`Oy%Qz!Q%Q!Q![2m![!c%Q!c!i2m!i#T%Q#T#Z2m#Z;'S%Q;'S;=`%c<%lO%Qj2tYrY!a`Oy%Qz!Q%Q!Q![3d![!c%Q!c!i3d!i#T%Q#T#Z3d#Z;'S%Q;'S;=`%c<%lO%Qj3iY!a`Oy%Qz!Q%Q!Q![4X![!c%Q!c!i4X!i#T%Q#T#Z4X#Z;'S%Q;'S;=`%c<%lO%Qj4`YrY!a`Oy%Qz!Q%Q!Q![5O![!c%Q!c!i5O!i#T%Q#T#Z5O#Z;'S%Q;'S;=`%c<%lO%Qj5TY!a`Oy%Qz!Q%Q!Q![5s![!c%Q!c!i5s!i#T%Q#T#Z5s#Z;'S%Q;'S;=`%c<%lO%Qj5zSrY!a`Oy%Qz;'S%Q;'S;=`%c<%lO%Qd6ZUOy%Qz!_%Q!_!`6m!`;'S%Q;'S;=`%c<%lO%Qd6tS!hS!a`Oy%Qz;'S%Q;'S;=`%c<%lO%Qb7VSZQOy%Qz;'S%Q;'S;=`%c<%lO%Q~7fWOY7cZw7cwx.bx#O7c#O#P8O#P;'S7c;'S;=`8z<%lO7c~8RRO;'S7c;'S;=`8[;=`O7c~8_XOY7cZw7cwx.bx#O7c#O#P8O#P;'S7c;'S;=`8z;=`<%l7c<%lO7c~8}P;=`<%l7cj9VSeYOy%Qz;'S%Q;'S;=`%c<%lO%Q~9hOd~n9oUWQvWOy%Qz!_%Q!_!`6m!`;'S%Q;'S;=`%c<%lO%Qj:YWvW!mQOy%Qz!O%Q!O!P:r!P!Q%Q!Q![=w![;'S%Q;'S;=`%c<%lO%Qj:wU!a`Oy%Qz!Q%Q!Q![;Z![;'S%Q;'S;=`%c<%lO%Qj;bY!a`#}YOy%Qz!Q%Q!Q![;Z![!g%Q!g!h<Q!h#X%Q#X#Y<Q#Y;'S%Q;'S;=`%c<%lO%Qj<VY!a`Oy%Qz{%Q{|<u|}%Q}!O<u!O!Q%Q!Q![=^![;'S%Q;'S;=`%c<%lO%Qj<zU!a`Oy%Qz!Q%Q!Q![=^![;'S%Q;'S;=`%c<%lO%Qj=eU!a`#}YOy%Qz!Q%Q!Q![=^![;'S%Q;'S;=`%c<%lO%Qj>O[!a`#}YOy%Qz!O%Q!O!P;Z!P!Q%Q!Q![=w![!g%Q!g!h<Q!h#X%Q#X#Y<Q#Y;'S%Q;'S;=`%c<%lO%Qj>yS!^YOy%Qz;'S%Q;'S;=`%c<%lO%Qj?[WvWOy%Qz!O%Q!O!P:r!P!Q%Q!Q![=w![;'S%Q;'S;=`%c<%lO%Qj?yU]YOy%Qz!Q%Q!Q![;Z![;'S%Q;'S;=`%c<%lO%Q~@bTvWOy%Qz{@q{;'S%Q;'S;=`%c<%lO%Q~@xS!a`#t~Oy%Qz;'S%Q;'S;=`%c<%lO%QjAZ[#}YOy%Qz!O%Q!O!P;Z!P!Q%Q!Q![=w![!g%Q!g!h<Q!h#X%Q#X#Y<Q#Y;'S%Q;'S;=`%c<%lO%QjBUU`YOy%Qz![%Q![!]Bh!];'S%Q;'S;=`%c<%lO%QbBoSaQ!a`Oy%Qz;'S%Q;'S;=`%c<%lO%QjCQSkYOy%Qz;'S%Q;'S;=`%c<%lO%QhCcU!TWOy%Qz!_%Q!_!`Cu!`;'S%Q;'S;=`%c<%lO%QhC|S!TW!a`Oy%Qz;'S%Q;'S;=`%c<%lO%QlDaS!TW!hSOy%Qz;'S%Q;'S;=`%c<%lO%QjDtV!jQ!TWOy%Qz!_%Q!_!`Cu!`!aEZ!a;'S%Q;'S;=`%c<%lO%QbEbS!jQ!a`Oy%Qz;'S%Q;'S;=`%c<%lO%QjEqYOy%Qz}%Q}!OFa!O!c%Q!c!}GO!}#T%Q#T#oGO#o;'S%Q;'S;=`%c<%lO%QjFfW!a`Oy%Qz!c%Q!c!}GO!}#T%Q#T#oGO#o;'S%Q;'S;=`%c<%lO%QjGV[iY!a`Oy%Qz}%Q}!OGO!O!Q%Q!Q![GO![!c%Q!c!}GO!}#T%Q#T#oGO#o;'S%Q;'S;=`%c<%lO%QjHQSmYOy%Qz;'S%Q;'S;=`%c<%lO%QnHcSl^Oy%Qz;'S%Q;'S;=`%c<%lO%QjHtSpYOy%Qz;'S%Q;'S;=`%c<%lO%QjIVSoYOy%Qz;'S%Q;'S;=`%c<%lO%QfIhU!mQOy%Qz!_%Q!_!`6m!`;'S%Q;'S;=`%c<%lO%Q`I}P;=`<%l$q",
  tokenizers: [descendant, unitToken, identifiers, queryIdentifiers, 1, 2, 3, 4, new LocalTokenGroup("m~RRYZ[z{a~~g~aO#v~~dP!P!Qg~lO#w~~", 28, 129)],
  topRules: { StyleSheet: [0, 6], Styles: [1, 105] },
  specialized: [{ term: 124, get: (value) => spec_callee[value] || -1 }, { term: 125, get: (value) => spec_queryIdentifier[value] || -1 }, { term: 4, get: (value) => spec_QueryCallee[value] || -1 }, { term: 25, get: (value) => spec_AtKeyword[value] || -1 }, { term: 123, get: (value) => spec_identifier2[value] || -1 }],
  tokenPrec: 1963
});

// node_modules/@codemirror/lang-css/dist/index.js
var _properties = null;
function properties() {
  if (!_properties && typeof document == "object" && document.body) {
    let { style } = document.body, names = [], seen = new Set;
    for (let prop in style)
      if (prop != "cssText" && prop != "cssFloat") {
        if (typeof style[prop] == "string") {
          if (/[A-Z]/.test(prop))
            prop = prop.replace(/[A-Z]/g, (ch) => "-" + ch.toLowerCase());
          if (!seen.has(prop)) {
            names.push(prop);
            seen.add(prop);
          }
        }
      }
    _properties = names.sort().map((name2) => ({ type: "property", label: name2, apply: name2 + ": " }));
  }
  return _properties || [];
}
var pseudoClasses = /* @__PURE__ */ [
  "active",
  "after",
  "any-link",
  "autofill",
  "backdrop",
  "before",
  "checked",
  "cue",
  "default",
  "defined",
  "disabled",
  "empty",
  "enabled",
  "file-selector-button",
  "first",
  "first-child",
  "first-letter",
  "first-line",
  "first-of-type",
  "focus",
  "focus-visible",
  "focus-within",
  "fullscreen",
  "has",
  "host",
  "host-context",
  "hover",
  "in-range",
  "indeterminate",
  "invalid",
  "is",
  "lang",
  "last-child",
  "last-of-type",
  "left",
  "link",
  "marker",
  "modal",
  "not",
  "nth-child",
  "nth-last-child",
  "nth-last-of-type",
  "nth-of-type",
  "only-child",
  "only-of-type",
  "optional",
  "out-of-range",
  "part",
  "placeholder",
  "placeholder-shown",
  "read-only",
  "read-write",
  "required",
  "right",
  "root",
  "scope",
  "selection",
  "slotted",
  "target",
  "target-text",
  "valid",
  "visited",
  "where"
].map((name2) => ({ type: "class", label: name2 }));
var values = /* @__PURE__ */ [
  "above",
  "absolute",
  "activeborder",
  "additive",
  "activecaption",
  "after-white-space",
  "ahead",
  "alias",
  "all",
  "all-scroll",
  "alphabetic",
  "alternate",
  "always",
  "antialiased",
  "appworkspace",
  "asterisks",
  "attr",
  "auto",
  "auto-flow",
  "avoid",
  "avoid-column",
  "avoid-page",
  "avoid-region",
  "axis-pan",
  "background",
  "backwards",
  "baseline",
  "below",
  "bidi-override",
  "blink",
  "block",
  "block-axis",
  "bold",
  "bolder",
  "border",
  "border-box",
  "both",
  "bottom",
  "break",
  "break-all",
  "break-word",
  "bullets",
  "button",
  "button-bevel",
  "buttonface",
  "buttonhighlight",
  "buttonshadow",
  "buttontext",
  "calc",
  "capitalize",
  "caps-lock-indicator",
  "caption",
  "captiontext",
  "caret",
  "cell",
  "center",
  "checkbox",
  "circle",
  "cjk-decimal",
  "clear",
  "clip",
  "close-quote",
  "col-resize",
  "collapse",
  "color",
  "color-burn",
  "color-dodge",
  "column",
  "column-reverse",
  "compact",
  "condensed",
  "contain",
  "content",
  "contents",
  "content-box",
  "context-menu",
  "continuous",
  "copy",
  "counter",
  "counters",
  "cover",
  "crop",
  "cross",
  "crosshair",
  "currentcolor",
  "cursive",
  "cyclic",
  "darken",
  "dashed",
  "decimal",
  "decimal-leading-zero",
  "default",
  "default-button",
  "dense",
  "destination-atop",
  "destination-in",
  "destination-out",
  "destination-over",
  "difference",
  "disc",
  "discard",
  "disclosure-closed",
  "disclosure-open",
  "document",
  "dot-dash",
  "dot-dot-dash",
  "dotted",
  "double",
  "down",
  "e-resize",
  "ease",
  "ease-in",
  "ease-in-out",
  "ease-out",
  "element",
  "ellipse",
  "ellipsis",
  "embed",
  "end",
  "ethiopic-abegede-gez",
  "ethiopic-halehame-aa-er",
  "ethiopic-halehame-gez",
  "ew-resize",
  "exclusion",
  "expanded",
  "extends",
  "extra-condensed",
  "extra-expanded",
  "fantasy",
  "fast",
  "fill",
  "fill-box",
  "fixed",
  "flat",
  "flex",
  "flex-end",
  "flex-start",
  "footnotes",
  "forwards",
  "from",
  "geometricPrecision",
  "graytext",
  "grid",
  "groove",
  "hand",
  "hard-light",
  "help",
  "hidden",
  "hide",
  "higher",
  "highlight",
  "highlighttext",
  "horizontal",
  "hsl",
  "hsla",
  "hue",
  "icon",
  "ignore",
  "inactiveborder",
  "inactivecaption",
  "inactivecaptiontext",
  "infinite",
  "infobackground",
  "infotext",
  "inherit",
  "initial",
  "inline",
  "inline-axis",
  "inline-block",
  "inline-flex",
  "inline-grid",
  "inline-table",
  "inset",
  "inside",
  "intrinsic",
  "invert",
  "italic",
  "justify",
  "keep-all",
  "landscape",
  "large",
  "larger",
  "left",
  "level",
  "lighter",
  "lighten",
  "line-through",
  "linear",
  "linear-gradient",
  "lines",
  "list-item",
  "listbox",
  "listitem",
  "local",
  "logical",
  "loud",
  "lower",
  "lower-hexadecimal",
  "lower-latin",
  "lower-norwegian",
  "lowercase",
  "ltr",
  "luminosity",
  "manipulation",
  "match",
  "matrix",
  "matrix3d",
  "medium",
  "menu",
  "menutext",
  "message-box",
  "middle",
  "min-intrinsic",
  "mix",
  "monospace",
  "move",
  "multiple",
  "multiple_mask_images",
  "multiply",
  "n-resize",
  "narrower",
  "ne-resize",
  "nesw-resize",
  "no-close-quote",
  "no-drop",
  "no-open-quote",
  "no-repeat",
  "none",
  "normal",
  "not-allowed",
  "nowrap",
  "ns-resize",
  "numbers",
  "numeric",
  "nw-resize",
  "nwse-resize",
  "oblique",
  "opacity",
  "open-quote",
  "optimizeLegibility",
  "optimizeSpeed",
  "outset",
  "outside",
  "outside-shape",
  "overlay",
  "overline",
  "padding",
  "padding-box",
  "painted",
  "page",
  "paused",
  "perspective",
  "pinch-zoom",
  "plus-darker",
  "plus-lighter",
  "pointer",
  "polygon",
  "portrait",
  "pre",
  "pre-line",
  "pre-wrap",
  "preserve-3d",
  "progress",
  "push-button",
  "radial-gradient",
  "radio",
  "read-only",
  "read-write",
  "read-write-plaintext-only",
  "rectangle",
  "region",
  "relative",
  "repeat",
  "repeating-linear-gradient",
  "repeating-radial-gradient",
  "repeat-x",
  "repeat-y",
  "reset",
  "reverse",
  "rgb",
  "rgba",
  "ridge",
  "right",
  "rotate",
  "rotate3d",
  "rotateX",
  "rotateY",
  "rotateZ",
  "round",
  "row",
  "row-resize",
  "row-reverse",
  "rtl",
  "run-in",
  "running",
  "s-resize",
  "sans-serif",
  "saturation",
  "scale",
  "scale3d",
  "scaleX",
  "scaleY",
  "scaleZ",
  "screen",
  "scroll",
  "scrollbar",
  "scroll-position",
  "se-resize",
  "self-start",
  "self-end",
  "semi-condensed",
  "semi-expanded",
  "separate",
  "serif",
  "show",
  "single",
  "skew",
  "skewX",
  "skewY",
  "skip-white-space",
  "slide",
  "slider-horizontal",
  "slider-vertical",
  "sliderthumb-horizontal",
  "sliderthumb-vertical",
  "slow",
  "small",
  "small-caps",
  "small-caption",
  "smaller",
  "soft-light",
  "solid",
  "source-atop",
  "source-in",
  "source-out",
  "source-over",
  "space",
  "space-around",
  "space-between",
  "space-evenly",
  "spell-out",
  "square",
  "start",
  "static",
  "status-bar",
  "stretch",
  "stroke",
  "stroke-box",
  "sub",
  "subpixel-antialiased",
  "svg_masks",
  "super",
  "sw-resize",
  "symbolic",
  "symbols",
  "system-ui",
  "table",
  "table-caption",
  "table-cell",
  "table-column",
  "table-column-group",
  "table-footer-group",
  "table-header-group",
  "table-row",
  "table-row-group",
  "text",
  "text-bottom",
  "text-top",
  "textarea",
  "textfield",
  "thick",
  "thin",
  "threeddarkshadow",
  "threedface",
  "threedhighlight",
  "threedlightshadow",
  "threedshadow",
  "to",
  "top",
  "transform",
  "translate",
  "translate3d",
  "translateX",
  "translateY",
  "translateZ",
  "transparent",
  "ultra-condensed",
  "ultra-expanded",
  "underline",
  "unidirectional-pan",
  "unset",
  "up",
  "upper-latin",
  "uppercase",
  "url",
  "var",
  "vertical",
  "vertical-text",
  "view-box",
  "visible",
  "visibleFill",
  "visiblePainted",
  "visibleStroke",
  "visual",
  "w-resize",
  "wait",
  "wave",
  "wider",
  "window",
  "windowframe",
  "windowtext",
  "words",
  "wrap",
  "wrap-reverse",
  "x-large",
  "x-small",
  "xor",
  "xx-large",
  "xx-small"
].map((name2) => ({ type: "keyword", label: name2 })).concat(/* @__PURE__ */ [
  "aliceblue",
  "antiquewhite",
  "aqua",
  "aquamarine",
  "azure",
  "beige",
  "bisque",
  "black",
  "blanchedalmond",
  "blue",
  "blueviolet",
  "brown",
  "burlywood",
  "cadetblue",
  "chartreuse",
  "chocolate",
  "coral",
  "cornflowerblue",
  "cornsilk",
  "crimson",
  "cyan",
  "darkblue",
  "darkcyan",
  "darkgoldenrod",
  "darkgray",
  "darkgreen",
  "darkkhaki",
  "darkmagenta",
  "darkolivegreen",
  "darkorange",
  "darkorchid",
  "darkred",
  "darksalmon",
  "darkseagreen",
  "darkslateblue",
  "darkslategray",
  "darkturquoise",
  "darkviolet",
  "deeppink",
  "deepskyblue",
  "dimgray",
  "dodgerblue",
  "firebrick",
  "floralwhite",
  "forestgreen",
  "fuchsia",
  "gainsboro",
  "ghostwhite",
  "gold",
  "goldenrod",
  "gray",
  "grey",
  "green",
  "greenyellow",
  "honeydew",
  "hotpink",
  "indianred",
  "indigo",
  "ivory",
  "khaki",
  "lavender",
  "lavenderblush",
  "lawngreen",
  "lemonchiffon",
  "lightblue",
  "lightcoral",
  "lightcyan",
  "lightgoldenrodyellow",
  "lightgray",
  "lightgreen",
  "lightpink",
  "lightsalmon",
  "lightseagreen",
  "lightskyblue",
  "lightslategray",
  "lightsteelblue",
  "lightyellow",
  "lime",
  "limegreen",
  "linen",
  "magenta",
  "maroon",
  "mediumaquamarine",
  "mediumblue",
  "mediumorchid",
  "mediumpurple",
  "mediumseagreen",
  "mediumslateblue",
  "mediumspringgreen",
  "mediumturquoise",
  "mediumvioletred",
  "midnightblue",
  "mintcream",
  "mistyrose",
  "moccasin",
  "navajowhite",
  "navy",
  "oldlace",
  "olive",
  "olivedrab",
  "orange",
  "orangered",
  "orchid",
  "palegoldenrod",
  "palegreen",
  "paleturquoise",
  "palevioletred",
  "papayawhip",
  "peachpuff",
  "peru",
  "pink",
  "plum",
  "powderblue",
  "purple",
  "rebeccapurple",
  "red",
  "rosybrown",
  "royalblue",
  "saddlebrown",
  "salmon",
  "sandybrown",
  "seagreen",
  "seashell",
  "sienna",
  "silver",
  "skyblue",
  "slateblue",
  "slategray",
  "snow",
  "springgreen",
  "steelblue",
  "tan",
  "teal",
  "thistle",
  "tomato",
  "turquoise",
  "violet",
  "wheat",
  "white",
  "whitesmoke",
  "yellow",
  "yellowgreen"
].map((name2) => ({ type: "constant", label: name2 })));
var tags2 = /* @__PURE__ */ [
  "a",
  "abbr",
  "address",
  "article",
  "aside",
  "b",
  "bdi",
  "bdo",
  "blockquote",
  "body",
  "br",
  "button",
  "canvas",
  "caption",
  "cite",
  "code",
  "col",
  "colgroup",
  "dd",
  "del",
  "details",
  "dfn",
  "dialog",
  "div",
  "dl",
  "dt",
  "em",
  "figcaption",
  "figure",
  "footer",
  "form",
  "header",
  "hgroup",
  "h1",
  "h2",
  "h3",
  "h4",
  "h5",
  "h6",
  "hr",
  "html",
  "i",
  "iframe",
  "img",
  "input",
  "ins",
  "kbd",
  "label",
  "legend",
  "li",
  "main",
  "meter",
  "nav",
  "ol",
  "output",
  "p",
  "pre",
  "ruby",
  "section",
  "select",
  "small",
  "source",
  "span",
  "strong",
  "sub",
  "summary",
  "sup",
  "table",
  "tbody",
  "td",
  "template",
  "textarea",
  "tfoot",
  "th",
  "thead",
  "tr",
  "u",
  "ul"
].map((name2) => ({ type: "type", label: name2 }));
var atRules = /* @__PURE__ */ [
  "@charset",
  "@color-profile",
  "@container",
  "@counter-style",
  "@font-face",
  "@font-feature-values",
  "@font-palette-values",
  "@import",
  "@keyframes",
  "@layer",
  "@media",
  "@namespace",
  "@page",
  "@position-try",
  "@property",
  "@scope",
  "@starting-style",
  "@supports",
  "@view-transition"
].map((label) => ({ type: "keyword", label }));
var identifier2 = /^(\w[\w-]*|-\w[\w-]*|)$/;
var variable = /^-(-[\w-]*)?$/;
function isVarArg(node, doc2) {
  var _a2;
  if (node.name == "(" || node.type.isError)
    node = node.parent || node;
  if (node.name != "ArgList")
    return false;
  let callee2 = (_a2 = node.parent) === null || _a2 === undefined ? undefined : _a2.firstChild;
  if ((callee2 === null || callee2 === undefined ? undefined : callee2.name) != "Callee")
    return false;
  return doc2.sliceString(callee2.from, callee2.to) == "var";
}
var VariablesByNode = /* @__PURE__ */ new NodeWeakMap;
var declSelector = ["Declaration"];
function astTop(node) {
  for (let cur2 = node;; ) {
    if (cur2.type.isTop)
      return cur2;
    if (!(cur2 = cur2.parent))
      return node;
  }
}
function variableNames(doc2, node, isVariable) {
  if (node.to - node.from > 4096) {
    let known = VariablesByNode.get(node);
    if (known)
      return known;
    let result = [], seen = new Set, cursor = node.cursor(IterMode.IncludeAnonymous);
    if (cursor.firstChild())
      do {
        for (let option of variableNames(doc2, cursor.node, isVariable))
          if (!seen.has(option.label)) {
            seen.add(option.label);
            result.push(option);
          }
      } while (cursor.nextSibling());
    VariablesByNode.set(node, result);
    return result;
  } else {
    let result = [], seen = new Set;
    node.cursor().iterate((node2) => {
      var _a2;
      if (isVariable(node2) && node2.matchContext(declSelector) && ((_a2 = node2.node.nextSibling) === null || _a2 === undefined ? undefined : _a2.name) == ":") {
        let name2 = doc2.sliceString(node2.from, node2.to);
        if (!seen.has(name2)) {
          seen.add(name2);
          result.push({ label: name2, type: "variable" });
        }
      }
    });
    return result;
  }
}
var defineCSSCompletionSource = (isVariable) => (context) => {
  let { state, pos } = context, node = syntaxTree(state).resolveInner(pos, -1);
  let isDash = node.type.isError && node.from == node.to - 1 && state.doc.sliceString(node.from, node.to) == "-";
  if (node.name == "PropertyName" || (isDash || node.name == "TagName") && /^(Block|Styles)$/.test(node.resolve(node.to).name))
    return { from: node.from, options: properties(), validFor: identifier2 };
  if (node.name == "ValueName")
    return { from: node.from, options: values, validFor: identifier2 };
  if (node.name == "PseudoClassName")
    return { from: node.from, options: pseudoClasses, validFor: identifier2 };
  if (isVariable(node) || (context.explicit || isDash) && isVarArg(node, state.doc))
    return {
      from: isVariable(node) || isDash ? node.from : pos,
      options: variableNames(state.doc, astTop(node), isVariable),
      validFor: variable
    };
  if (node.name == "TagName") {
    for (let { parent } = node;parent; parent = parent.parent)
      if (parent.name == "Block")
        return { from: node.from, options: properties(), validFor: identifier2 };
    return { from: node.from, options: tags2, validFor: identifier2 };
  }
  if (node.name == "AtKeyword")
    return { from: node.from, options: atRules, validFor: identifier2 };
  if (!context.explicit)
    return null;
  let above = node.resolve(pos), before = above.childBefore(pos);
  if (before && before.name == ":" && above.name == "PseudoClassSelector")
    return { from: pos, options: pseudoClasses, validFor: identifier2 };
  if (before && before.name == ":" && above.name == "Declaration" || above.name == "ArgList")
    return { from: pos, options: values, validFor: identifier2 };
  if (above.name == "Block" || above.name == "Styles")
    return { from: pos, options: properties(), validFor: identifier2 };
  return null;
};
var cssCompletionSource = /* @__PURE__ */ defineCSSCompletionSource((n) => n.name == "VariableName");
var cssLanguage = /* @__PURE__ */ LRLanguage.define({
  name: "css",
  parser: /* @__PURE__ */ parser2.configure({
    props: [
      /* @__PURE__ */ indentNodeProp.add({
        Declaration: /* @__PURE__ */ continuedIndent()
      }),
      /* @__PURE__ */ foldNodeProp.add({
        "Block KeyframeList": foldInside
      })
    ]
  }),
  languageData: {
    commentTokens: { block: { open: "/*", close: "*/" } },
    indentOnInput: /^\s*\}$/,
    wordChars: "-"
  }
});
function css() {
  return new LanguageSupport(cssLanguage, cssLanguage.data.of({ autocomplete: cssCompletionSource }));
}

// node_modules/@lezer/html/dist/index.js
var scriptText = 55;
var StartCloseScriptTag = 1;
var styleText = 56;
var StartCloseStyleTag = 2;
var textareaText = 57;
var StartCloseTextareaTag = 3;
var EndTag = 4;
var SelfClosingEndTag = 5;
var StartTag = 6;
var StartScriptTag = 7;
var StartStyleTag = 8;
var StartTextareaTag = 9;
var StartSelfClosingTag = 10;
var StartCloseTag = 11;
var NoMatchStartCloseTag = 12;
var MismatchedStartCloseTag = 13;
var missingCloseTag = 58;
var IncompleteTag = 14;
var IncompleteCloseTag = 15;
var commentContent$1 = 59;
var Element = 21;
var TagName = 23;
var Attribute = 24;
var AttributeName = 25;
var AttributeValue = 27;
var UnquotedAttributeValue = 28;
var ScriptText = 29;
var StyleText = 32;
var TextareaText = 35;
var OpenTag = 37;
var CloseTag = 38;
var Dialect_noMatch = 0;
var Dialect_selfClosing = 1;
var selfClosers = {
  area: true,
  base: true,
  br: true,
  col: true,
  command: true,
  embed: true,
  frame: true,
  hr: true,
  img: true,
  input: true,
  keygen: true,
  link: true,
  meta: true,
  param: true,
  source: true,
  track: true,
  wbr: true,
  menuitem: true
};
var implicitlyClosed = {
  dd: true,
  li: true,
  optgroup: true,
  option: true,
  p: true,
  rp: true,
  rt: true,
  tbody: true,
  td: true,
  tfoot: true,
  th: true,
  tr: true
};
var closeOnOpen = {
  dd: { dd: true, dt: true },
  dt: { dd: true, dt: true },
  li: { li: true },
  option: { option: true, optgroup: true },
  optgroup: { optgroup: true },
  p: {
    address: true,
    article: true,
    aside: true,
    blockquote: true,
    dir: true,
    div: true,
    dl: true,
    fieldset: true,
    footer: true,
    form: true,
    h1: true,
    h2: true,
    h3: true,
    h4: true,
    h5: true,
    h6: true,
    header: true,
    hgroup: true,
    hr: true,
    menu: true,
    nav: true,
    ol: true,
    p: true,
    pre: true,
    section: true,
    table: true,
    ul: true
  },
  rp: { rp: true, rt: true },
  rt: { rp: true, rt: true },
  tbody: { tbody: true, tfoot: true },
  td: { td: true, th: true },
  tfoot: { tbody: true },
  th: { td: true, th: true },
  thead: { tbody: true, tfoot: true },
  tr: { tr: true }
};
function nameChar(ch) {
  return ch == 45 || ch == 46 || ch == 58 || ch >= 65 && ch <= 90 || ch == 95 || ch >= 97 && ch <= 122 || ch >= 161;
}
var cachedName = null;
var cachedInput = null;
var cachedPos = 0;
function tagNameAfter(input, offset) {
  let pos = input.pos + offset;
  if (cachedPos == pos && cachedInput == input)
    return cachedName;
  let next = input.peek(offset), name2 = "";
  for (;; ) {
    if (!nameChar(next))
      break;
    name2 += String.fromCharCode(next);
    next = input.peek(++offset);
  }
  cachedInput = input;
  cachedPos = pos;
  return cachedName = name2 ? name2.toLowerCase() : next == question2 || next == bang ? undefined : null;
}
var lessThan = 60;
var greaterThan = 62;
var slash2 = 47;
var question2 = 63;
var bang = 33;
var dash2 = 45;
function ElementContext(name2, parent) {
  this.name = name2;
  this.parent = parent;
}
var startTagTerms = [StartTag, StartSelfClosingTag, StartScriptTag, StartStyleTag, StartTextareaTag];
var elementContext = new ContextTracker({
  start: null,
  shift(context, term, stack, input) {
    return startTagTerms.indexOf(term) > -1 ? new ElementContext(tagNameAfter(input, 1) || "", context) : context;
  },
  reduce(context, term) {
    return term == Element && context ? context.parent : context;
  },
  reuse(context, node, stack, input) {
    let type = node.type.id;
    return type == StartTag || type == OpenTag ? new ElementContext(tagNameAfter(input, 1) || "", context) : context;
  },
  strict: false
});
var tagStart = new ExternalTokenizer((input, stack) => {
  if (input.next != lessThan) {
    if (input.next < 0 && stack.context)
      input.acceptToken(missingCloseTag);
    return;
  }
  input.advance();
  let close = input.next == slash2;
  if (close)
    input.advance();
  let name2 = tagNameAfter(input, 0);
  if (name2 === undefined)
    return;
  if (!name2)
    return input.acceptToken(close ? IncompleteCloseTag : IncompleteTag);
  let parent = stack.context ? stack.context.name : null;
  if (close) {
    if (name2 == parent)
      return input.acceptToken(StartCloseTag);
    if (parent && implicitlyClosed[parent])
      return input.acceptToken(missingCloseTag, -2);
    if (stack.dialectEnabled(Dialect_noMatch))
      return input.acceptToken(NoMatchStartCloseTag);
    for (let cx = stack.context;cx; cx = cx.parent)
      if (cx.name == name2)
        return;
    input.acceptToken(MismatchedStartCloseTag);
  } else {
    if (name2 == "script")
      return input.acceptToken(StartScriptTag);
    if (name2 == "style")
      return input.acceptToken(StartStyleTag);
    if (name2 == "textarea")
      return input.acceptToken(StartTextareaTag);
    if (selfClosers.hasOwnProperty(name2))
      return input.acceptToken(StartSelfClosingTag);
    if (parent && closeOnOpen[parent] && closeOnOpen[parent][name2])
      input.acceptToken(missingCloseTag, -1);
    else
      input.acceptToken(StartTag);
  }
}, { contextual: true });
var commentContent = new ExternalTokenizer((input) => {
  for (let dashes = 0, i2 = 0;; i2++) {
    if (input.next < 0) {
      if (i2)
        input.acceptToken(commentContent$1);
      break;
    }
    if (input.next == dash2) {
      dashes++;
    } else if (input.next == greaterThan && dashes >= 2) {
      if (i2 >= 3)
        input.acceptToken(commentContent$1, -2);
      break;
    } else {
      dashes = 0;
    }
    input.advance();
  }
});
function inForeignElement(context) {
  for (;context; context = context.parent)
    if (context.name == "svg" || context.name == "math")
      return true;
  return false;
}
var endTag = new ExternalTokenizer((input, stack) => {
  if (input.next == slash2 && input.peek(1) == greaterThan) {
    let selfClosing = stack.dialectEnabled(Dialect_selfClosing) || inForeignElement(stack.context);
    input.acceptToken(selfClosing ? SelfClosingEndTag : EndTag, 2);
  } else if (input.next == greaterThan) {
    input.acceptToken(EndTag, 1);
  }
});
function contentTokenizer(tag, textToken, endToken) {
  let lastState = 2 + tag.length;
  return new ExternalTokenizer((input) => {
    for (let state = 0, matchedLen = 0, i2 = 0;; i2++) {
      if (input.next < 0) {
        if (i2)
          input.acceptToken(textToken);
        break;
      }
      if (state == 0 && input.next == lessThan || state == 1 && input.next == slash2 || state >= 2 && state < lastState && input.next == tag.charCodeAt(state - 2)) {
        state++;
        matchedLen++;
      } else if (state == lastState && input.next == greaterThan) {
        if (i2 > matchedLen)
          input.acceptToken(textToken, -matchedLen);
        else
          input.acceptToken(endToken, -(matchedLen - 2));
        break;
      } else if ((input.next == 10 || input.next == 13) && i2) {
        input.acceptToken(textToken, 1);
        break;
      } else {
        state = matchedLen = 0;
      }
      input.advance();
    }
  });
}
var scriptTokens = contentTokenizer("script", scriptText, StartCloseScriptTag);
var styleTokens = contentTokenizer("style", styleText, StartCloseStyleTag);
var textareaTokens = contentTokenizer("textarea", textareaText, StartCloseTextareaTag);
var htmlHighlighting = styleTags({
  "Text RawText IncompleteTag IncompleteCloseTag": tags.content,
  "StartTag StartCloseTag SelfClosingEndTag EndTag": tags.angleBracket,
  TagName: tags.tagName,
  "MismatchedCloseTag/TagName": [tags.tagName, tags.invalid],
  AttributeName: tags.attributeName,
  "AttributeValue UnquotedAttributeValue": tags.attributeValue,
  Is: tags.definitionOperator,
  "EntityReference CharacterReference": tags.character,
  Comment: tags.blockComment,
  ProcessingInst: tags.processingInstruction,
  DoctypeDecl: tags.documentMeta
});
var parser3 = LRParser.deserialize({
  version: 14,
  states: ",xOVO!rOOO!ZQ#tO'#CrO!`Q#tO'#C{O!eQ#tO'#DOO!jQ#tO'#DRO!oQ#tO'#DTO!tOaO'#CqO#PObO'#CqO#[OdO'#CqO$kO!rO'#CqOOO`'#Cq'#CqO$rO$fO'#DUO$zQ#tO'#DWO%PQ#tO'#DXOOO`'#Dl'#DlOOO`'#DZ'#DZQVO!rOOO%UQ&rO,59^O%aQ&rO,59gO%lQ&rO,59jO%wQ&rO,59mO&SQ&rO,59oOOOa'#D_'#D_O&_OaO'#CyO&jOaO,59]OOOb'#D`'#D`O&rObO'#C|O&}ObO,59]OOOd'#Da'#DaO'VOdO'#DPO'bOdO,59]OOO`'#Db'#DbO'jO!rO,59]O'qQ#tO'#DSOOO`,59],59]OOOp'#Dc'#DcO'vO$fO,59pOOO`,59p,59pO(OQ#|O,59rO(TQ#|O,59sOOO`-E7X-E7XO(YQ&rO'#CtOOQW'#D['#D[O(hQ&rO1G.xOOOa1G.x1G.xOOO`1G/Z1G/ZO(sQ&rO1G/ROOOb1G/R1G/RO)OQ&rO1G/UOOOd1G/U1G/UO)ZQ&rO1G/XOOO`1G/X1G/XO)fQ&rO1G/ZOOOa-E7]-E7]O)qQ#tO'#CzOOO`1G.w1G.wOOOb-E7^-E7^O)vQ#tO'#C}OOOd-E7_-E7_O){Q#tO'#DQOOO`-E7`-E7`O*QQ#|O,59nOOOp-E7a-E7aOOO`1G/[1G/[OOO`1G/^1G/^OOO`1G/_1G/_O*VQ,UO,59`OOQW-E7Y-E7YOOOa7+$d7+$dOOO`7+$u7+$uOOOb7+$m7+$mOOOd7+$p7+$pOOO`7+$s7+$sO*bQ#|O,59fO*gQ#|O,59iO*lQ#|O,59lOOO`1G/Y1G/YO*qO7[O'#CwO+SOMhO'#CwOOQW1G.z1G.zOOO`1G/Q1G/QOOO`1G/T1G/TOOO`1G/W1G/WOOOO'#D]'#D]O+eO7[O,59cOOQW,59c,59cOOOO'#D^'#D^O+vOMhO,59cOOOO-E7Z-E7ZOOQW1G.}1G.}OOOO-E7[-E7[",
  stateData: ",c~O!_OS~OUSOVPOWQOXROYTO[]O][O^^O_^Oa^Ob^Oc^Od^Oy^O|_O!eZO~OgaO~OgbO~OgcO~OgdO~OgeO~O!XfOPmP![mP~O!YiOQpP![pP~O!ZlORsP![sP~OUSOVPOWQOXROYTOZqO[]O][O^^O_^Oa^Ob^Oc^Od^Oy^O!eZO~O![rO~P#gO!]sO!fuO~OgvO~OgwO~OS|OT}OiyO~OS!POT}OiyO~OS!ROT}OiyO~OS!TOT}OiyO~OS}OT}OiyO~O!XfOPmX![mX~OP!WO![!XO~O!YiOQpX![pX~OQ!ZO![!XO~O!ZlORsX![sX~OR!]O![!XO~O![!XO~P#gOg!_O~O!]sO!f!aO~OS!bO~OS!cO~Oj!dOShXThXihX~OS!fOT!gOiyO~OS!hOT!gOiyO~OS!iOT!gOiyO~OS!jOT!gOiyO~OS!gOT!gOiyO~Og!kO~Og!lO~Og!mO~OS!nO~Ol!qO!a!oO!c!pO~OS!rO~OS!sO~OS!tO~Ob!uOc!uOd!uO!a!wO!b!uO~Ob!xOc!xOd!xO!c!wO!d!xO~Ob!uOc!uOd!uO!a!{O!b!uO~Ob!xOc!xOd!xO!c!{O!d!xO~OT~cbd!ey|!e~",
  goto: "%q!aPPPPPPPPPPPPPPPPPPPPP!b!hP!nPP!zP!}#Q#T#Z#^#a#g#j#m#s#y!bP!b!bP$P$V$m$s$y%P%V%]%cPPPPPPPP%iX^OX`pXUOX`pezabcde{!O!Q!S!UR!q!dRhUR!XhXVOX`pRkVR!XkXWOX`pRnWR!XnXXOX`pQrXR!XpXYOX`pQ`ORx`Q{aQ!ObQ!QcQ!SdQ!UeZ!e{!O!Q!S!UQ!v!oR!z!vQ!y!pR!|!yQgUR!VgQjVR!YjQmWR![mQpXR!^pQtZR!`tS_O`ToXp",
  nodeNames: " StartCloseTag StartCloseTag StartCloseTag EndTag SelfClosingEndTag StartTag StartTag StartTag StartTag StartTag StartCloseTag StartCloseTag StartCloseTag IncompleteTag IncompleteCloseTag Document Text EntityReference CharacterReference InvalidEntity Element OpenTag TagName Attribute AttributeName Is AttributeValue UnquotedAttributeValue ScriptText CloseTag OpenTag StyleText CloseTag OpenTag TextareaText CloseTag OpenTag CloseTag SelfClosingTag Comment ProcessingInst MismatchedCloseTag CloseTag DoctypeDecl",
  maxTerm: 68,
  context: elementContext,
  nodeProps: [
    ["closedBy", -10, 1, 2, 3, 7, 8, 9, 10, 11, 12, 13, "EndTag", 6, "EndTag SelfClosingEndTag", -4, 22, 31, 34, 37, "CloseTag"],
    ["openedBy", 4, "StartTag StartCloseTag", 5, "StartTag", -4, 30, 33, 36, 38, "OpenTag"],
    ["group", -10, 14, 15, 18, 19, 20, 21, 40, 41, 42, 43, "Entity", 17, "Entity TextContent", -3, 29, 32, 35, "TextContent Entity"],
    ["isolate", -11, 22, 30, 31, 33, 34, 36, 37, 38, 39, 42, 43, "ltr", -3, 27, 28, 40, ""]
  ],
  propSources: [htmlHighlighting],
  skippedNodes: [0],
  repeatNodeCount: 9,
  tokenData: "!<p!aR!YOX$qXY,QYZ,QZ[$q[]&X]^,Q^p$qpq,Qqr-_rs3_sv-_vw3}wxHYx}-_}!OH{!O!P-_!P!Q$q!Q![-_![!]Mz!]!^-_!^!_!$S!_!`!;x!`!a&X!a!c-_!c!}Mz!}#R-_#R#SMz#S#T1k#T#oMz#o#s-_#s$f$q$f%W-_%W%oMz%o%p-_%p&aMz&a&b-_&b1pMz1p4U-_4U4dMz4d4e-_4e$ISMz$IS$I`-_$I`$IbMz$Ib$Kh-_$Kh%#tMz%#t&/x-_&/x&EtMz&Et&FV-_&FV;'SMz;'S;:j!#|;:j;=`3X<%l?&r-_?&r?AhMz?Ah?BY$q?BY?MnMz?MnO$q!Z$|caPlW!b`!dpOX$qXZ&XZ[$q[^&X^p$qpq&Xqr$qrs&}sv$qvw+Pwx(tx!^$q!^!_*V!_!a&X!a#S$q#S#T&X#T;'S$q;'S;=`+z<%lO$q!R&bXaP!b`!dpOr&Xrs&}sv&Xwx(tx!^&X!^!_*V!_;'S&X;'S;=`*y<%lO&Xq'UVaP!dpOv&}wx'kx!^&}!^!_(V!_;'S&};'S;=`(n<%lO&}P'pTaPOv'kw!^'k!_;'S'k;'S;=`(P<%lO'kP(SP;=`<%l'kp([S!dpOv(Vx;'S(V;'S;=`(h<%lO(Vp(kP;=`<%l(Vq(qP;=`<%l&}a({WaP!b`Or(trs'ksv(tw!^(t!^!_)e!_;'S(t;'S;=`*P<%lO(t`)jT!b`Or)esv)ew;'S)e;'S;=`)y<%lO)e`)|P;=`<%l)ea*SP;=`<%l(t!Q*^V!b`!dpOr*Vrs(Vsv*Vwx)ex;'S*V;'S;=`*s<%lO*V!Q*vP;=`<%l*V!R*|P;=`<%l&XW+UYlWOX+PZ[+P^p+Pqr+Psw+Px!^+P!a#S+P#T;'S+P;'S;=`+t<%lO+PW+wP;=`<%l+P!Z+}P;=`<%l$q!a,]`aP!b`!dp!_^OX&XXY,QYZ,QZ]&X]^,Q^p&Xpq,Qqr&Xrs&}sv&Xwx(tx!^&X!^!_*V!_;'S&X;'S;=`*y<%lO&X!_-ljiSaPlW!b`!dpOX$qXZ&XZ[$q[^&X^p$qpq&Xqr-_rs&}sv-_vw/^wx(tx!P-_!P!Q$q!Q!^-_!^!_*V!_!a&X!a#S-_#S#T1k#T#s-_#s$f$q$f;'S-_;'S;=`3X<%l?Ah-_?Ah?BY$q?BY?Mn-_?MnO$q[/ebiSlWOX+PZ[+P^p+Pqr/^sw/^x!P/^!P!Q+P!Q!^/^!a#S/^#S#T0m#T#s/^#s$f+P$f;'S/^;'S;=`1e<%l?Ah/^?Ah?BY+P?BY?Mn/^?MnO+PS0rXiSqr0msw0mx!P0m!Q!^0m!a#s0m$f;'S0m;'S;=`1_<%l?Ah0m?BY?Mn0mS1bP;=`<%l0m[1hP;=`<%l/^!V1vciSaP!b`!dpOq&Xqr1krs&}sv1kvw0mwx(tx!P1k!P!Q&X!Q!^1k!^!_*V!_!a&X!a#s1k#s$f&X$f;'S1k;'S;=`3R<%l?Ah1k?Ah?BY&X?BY?Mn1k?MnO&X!V3UP;=`<%l1k!_3[P;=`<%l-_!Z3hV!ahaP!dpOv&}wx'kx!^&}!^!_(V!_;'S&};'S;=`(n<%lO&}!_4WiiSlWd!ROX5uXZ7SZ[5u[^7S^p5uqr8trs7Sst>]tw8twx7Sx!P8t!P!Q5u!Q!]8t!]!^/^!^!a7S!a#S8t#S#T;{#T#s8t#s$f5u$f;'S8t;'S;=`>V<%l?Ah8t?Ah?BY5u?BY?Mn8t?MnO5u!Z5zblWOX5uXZ7SZ[5u[^7S^p5uqr5urs7Sst+Ptw5uwx7Sx!]5u!]!^7w!^!a7S!a#S5u#S#T7S#T;'S5u;'S;=`8n<%lO5u!R7VVOp7Sqs7St!]7S!]!^7l!^;'S7S;'S;=`7q<%lO7S!R7qOb!R!R7tP;=`<%l7S!Z8OYlWb!ROX+PZ[+P^p+Pqr+Psw+Px!^+P!a#S+P#T;'S+P;'S;=`+t<%lO+P!Z8qP;=`<%l5u!_8{iiSlWOX5uXZ7SZ[5u[^7S^p5uqr8trs7Sst/^tw8twx7Sx!P8t!P!Q5u!Q!]8t!]!^:j!^!a7S!a#S8t#S#T;{#T#s8t#s$f5u$f;'S8t;'S;=`>V<%l?Ah8t?Ah?BY5u?BY?Mn8t?MnO5u!_:sbiSlWb!ROX+PZ[+P^p+Pqr/^sw/^x!P/^!P!Q+P!Q!^/^!a#S/^#S#T0m#T#s/^#s$f+P$f;'S/^;'S;=`1e<%l?Ah/^?Ah?BY+P?BY?Mn/^?MnO+P!V<QciSOp7Sqr;{rs7Sst0mtw;{wx7Sx!P;{!P!Q7S!Q!];{!]!^=]!^!a7S!a#s;{#s$f7S$f;'S;{;'S;=`>P<%l?Ah;{?Ah?BY7S?BY?Mn;{?MnO7S!V=dXiSb!Rqr0msw0mx!P0m!Q!^0m!a#s0m$f;'S0m;'S;=`1_<%l?Ah0m?BY?Mn0m!V>SP;=`<%l;{!_>YP;=`<%l8t!_>dhiSlWOX@OXZAYZ[@O[^AY^p@OqrBwrsAYswBwwxAYx!PBw!P!Q@O!Q!]Bw!]!^/^!^!aAY!a#SBw#S#TE{#T#sBw#s$f@O$f;'SBw;'S;=`HS<%l?AhBw?Ah?BY@O?BY?MnBw?MnO@O!Z@TalWOX@OXZAYZ[@O[^AY^p@Oqr@OrsAYsw@OwxAYx!]@O!]!^Az!^!aAY!a#S@O#S#TAY#T;'S@O;'S;=`Bq<%lO@O!RA]UOpAYq!]AY!]!^Ao!^;'SAY;'S;=`At<%lOAY!RAtOc!R!RAwP;=`<%lAY!ZBRYlWc!ROX+PZ[+P^p+Pqr+Psw+Px!^+P!a#S+P#T;'S+P;'S;=`+t<%lO+P!ZBtP;=`<%l@O!_COhiSlWOX@OXZAYZ[@O[^AY^p@OqrBwrsAYswBwwxAYx!PBw!P!Q@O!Q!]Bw!]!^Dj!^!aAY!a#SBw#S#TE{#T#sBw#s$f@O$f;'SBw;'S;=`HS<%l?AhBw?Ah?BY@O?BY?MnBw?MnO@O!_DsbiSlWc!ROX+PZ[+P^p+Pqr/^sw/^x!P/^!P!Q+P!Q!^/^!a#S/^#S#T0m#T#s/^#s$f+P$f;'S/^;'S;=`1e<%l?Ah/^?Ah?BY+P?BY?Mn/^?MnO+P!VFQbiSOpAYqrE{rsAYswE{wxAYx!PE{!P!QAY!Q!]E{!]!^GY!^!aAY!a#sE{#s$fAY$f;'SE{;'S;=`G|<%l?AhE{?Ah?BYAY?BY?MnE{?MnOAY!VGaXiSc!Rqr0msw0mx!P0m!Q!^0m!a#s0m$f;'S0m;'S;=`1_<%l?Ah0m?BY?Mn0m!VHPP;=`<%lE{!_HVP;=`<%lBw!ZHcW!cxaP!b`Or(trs'ksv(tw!^(t!^!_)e!_;'S(t;'S;=`*P<%lO(t!aIYliSaPlW!b`!dpOX$qXZ&XZ[$q[^&X^p$qpq&Xqr-_rs&}sv-_vw/^wx(tx}-_}!OKQ!O!P-_!P!Q$q!Q!^-_!^!_*V!_!a&X!a#S-_#S#T1k#T#s-_#s$f$q$f;'S-_;'S;=`3X<%l?Ah-_?Ah?BY$q?BY?Mn-_?MnO$q!aK_kiSaPlW!b`!dpOX$qXZ&XZ[$q[^&X^p$qpq&Xqr-_rs&}sv-_vw/^wx(tx!P-_!P!Q$q!Q!^-_!^!_*V!_!`&X!`!aMS!a#S-_#S#T1k#T#s-_#s$f$q$f;'S-_;'S;=`3X<%l?Ah-_?Ah?BY$q?BY?Mn-_?MnO$q!TM_XaP!b`!dp!fQOr&Xrs&}sv&Xwx(tx!^&X!^!_*V!_;'S&X;'S;=`*y<%lO&X!aNZ!ZiSgQaPlW!b`!dpOX$qXZ&XZ[$q[^&X^p$qpq&Xqr-_rs&}sv-_vw/^wx(tx}-_}!OMz!O!PMz!P!Q$q!Q![Mz![!]Mz!]!^-_!^!_*V!_!a&X!a!c-_!c!}Mz!}#R-_#R#SMz#S#T1k#T#oMz#o#s-_#s$f$q$f$}-_$}%OMz%O%W-_%W%oMz%o%p-_%p&aMz&a&b-_&b1pMz1p4UMz4U4dMz4d4e-_4e$ISMz$IS$I`-_$I`$IbMz$Ib$Je-_$Je$JgMz$Jg$Kh-_$Kh%#tMz%#t&/x-_&/x&EtMz&Et&FV-_&FV;'SMz;'S;:j!#|;:j;=`3X<%l?&r-_?&r?AhMz?Ah?BY$q?BY?MnMz?MnO$q!a!$PP;=`<%lMz!R!$ZY!b`!dpOq*Vqr!$yrs(Vsv*Vwx)ex!a*V!a!b!4t!b;'S*V;'S;=`*s<%lO*V!R!%Q]!b`!dpOr*Vrs(Vsv*Vwx)ex}*V}!O!%y!O!f*V!f!g!']!g#W*V#W#X!0`#X;'S*V;'S;=`*s<%lO*V!R!&QX!b`!dpOr*Vrs(Vsv*Vwx)ex}*V}!O!&m!O;'S*V;'S;=`*s<%lO*V!R!&vV!b`!dp!ePOr*Vrs(Vsv*Vwx)ex;'S*V;'S;=`*s<%lO*V!R!'dX!b`!dpOr*Vrs(Vsv*Vwx)ex!q*V!q!r!(P!r;'S*V;'S;=`*s<%lO*V!R!(WX!b`!dpOr*Vrs(Vsv*Vwx)ex!e*V!e!f!(s!f;'S*V;'S;=`*s<%lO*V!R!(zX!b`!dpOr*Vrs(Vsv*Vwx)ex!v*V!v!w!)g!w;'S*V;'S;=`*s<%lO*V!R!)nX!b`!dpOr*Vrs(Vsv*Vwx)ex!{*V!{!|!*Z!|;'S*V;'S;=`*s<%lO*V!R!*bX!b`!dpOr*Vrs(Vsv*Vwx)ex!r*V!r!s!*}!s;'S*V;'S;=`*s<%lO*V!R!+UX!b`!dpOr*Vrs(Vsv*Vwx)ex!g*V!g!h!+q!h;'S*V;'S;=`*s<%lO*V!R!+xY!b`!dpOr!+qrs!,hsv!+qvw!-Swx!.[x!`!+q!`!a!/j!a;'S!+q;'S;=`!0Y<%lO!+qq!,mV!dpOv!,hvx!-Sx!`!,h!`!a!-q!a;'S!,h;'S;=`!.U<%lO!,hP!-VTO!`!-S!`!a!-f!a;'S!-S;'S;=`!-k<%lO!-SP!-kO|PP!-nP;=`<%l!-Sq!-xS!dp|POv(Vx;'S(V;'S;=`(h<%lO(Vq!.XP;=`<%l!,ha!.aX!b`Or!.[rs!-Ssv!.[vw!-Sw!`!.[!`!a!.|!a;'S!.[;'S;=`!/d<%lO!.[a!/TT!b`|POr)esv)ew;'S)e;'S;=`)y<%lO)ea!/gP;=`<%l!.[!R!/sV!b`!dp|POr*Vrs(Vsv*Vwx)ex;'S*V;'S;=`*s<%lO*V!R!0]P;=`<%l!+q!R!0gX!b`!dpOr*Vrs(Vsv*Vwx)ex#c*V#c#d!1S#d;'S*V;'S;=`*s<%lO*V!R!1ZX!b`!dpOr*Vrs(Vsv*Vwx)ex#V*V#V#W!1v#W;'S*V;'S;=`*s<%lO*V!R!1}X!b`!dpOr*Vrs(Vsv*Vwx)ex#h*V#h#i!2j#i;'S*V;'S;=`*s<%lO*V!R!2qX!b`!dpOr*Vrs(Vsv*Vwx)ex#m*V#m#n!3^#n;'S*V;'S;=`*s<%lO*V!R!3eX!b`!dpOr*Vrs(Vsv*Vwx)ex#d*V#d#e!4Q#e;'S*V;'S;=`*s<%lO*V!R!4XX!b`!dpOr*Vrs(Vsv*Vwx)ex#X*V#X#Y!+q#Y;'S*V;'S;=`*s<%lO*V!R!4{Y!b`!dpOr!4trs!5ksv!4tvw!6Vwx!8]x!a!4t!a!b!:]!b;'S!4t;'S;=`!;r<%lO!4tq!5pV!dpOv!5kvx!6Vx!a!5k!a!b!7W!b;'S!5k;'S;=`!8V<%lO!5kP!6YTO!a!6V!a!b!6i!b;'S!6V;'S;=`!7Q<%lO!6VP!6lTO!`!6V!`!a!6{!a;'S!6V;'S;=`!7Q<%lO!6VP!7QOyPP!7TP;=`<%l!6Vq!7]V!dpOv!5kvx!6Vx!`!5k!`!a!7r!a;'S!5k;'S;=`!8V<%lO!5kq!7yS!dpyPOv(Vx;'S(V;'S;=`(h<%lO(Vq!8YP;=`<%l!5ka!8bX!b`Or!8]rs!6Vsv!8]vw!6Vw!a!8]!a!b!8}!b;'S!8];'S;=`!:V<%lO!8]a!9SX!b`Or!8]rs!6Vsv!8]vw!6Vw!`!8]!`!a!9o!a;'S!8];'S;=`!:V<%lO!8]a!9vT!b`yPOr)esv)ew;'S)e;'S;=`)y<%lO)ea!:YP;=`<%l!8]!R!:dY!b`!dpOr!4trs!5ksv!4tvw!6Vwx!8]x!`!4t!`!a!;S!a;'S!4t;'S;=`!;r<%lO!4t!R!;]V!b`!dpyPOr*Vrs(Vsv*Vwx)ex;'S*V;'S;=`*s<%lO*V!R!;uP;=`<%l!4t!V!<TXjSaP!b`!dpOr&Xrs&}sv&Xwx(tx!^&X!^!_*V!_;'S&X;'S;=`*y<%lO&X",
  tokenizers: [scriptTokens, styleTokens, textareaTokens, endTag, tagStart, commentContent, 0, 1, 2, 3, 4, 5],
  topRules: { Document: [0, 16] },
  dialects: { noMatch: 0, selfClosing: 515 },
  tokenPrec: 517
});
function getAttrs2(openTag, input) {
  let attrs = Object.create(null);
  for (let att of openTag.getChildren(Attribute)) {
    let name2 = att.getChild(AttributeName), value = att.getChild(AttributeValue) || att.getChild(UnquotedAttributeValue);
    if (name2)
      attrs[input.read(name2.from, name2.to)] = !value ? "" : value.type.id == AttributeValue ? input.read(value.from + 1, value.to - 1) : input.read(value.from, value.to);
  }
  return attrs;
}
function findTagName(openTag, input) {
  let tagNameNode = openTag.getChild(TagName);
  return tagNameNode ? input.read(tagNameNode.from, tagNameNode.to) : " ";
}
function maybeNest(node, input, tags3) {
  let attrs;
  for (let tag of tags3) {
    if (!tag.attrs || tag.attrs(attrs || (attrs = getAttrs2(node.node.parent.firstChild, input))))
      return { parser: tag.parser, bracketed: true };
  }
  return null;
}
function configureNesting(tags3 = [], attributes = []) {
  let script = [], style = [], textarea = [], other = [];
  for (let tag of tags3) {
    let array = tag.tag == "script" ? script : tag.tag == "style" ? style : tag.tag == "textarea" ? textarea : other;
    array.push(tag);
  }
  let attrs = attributes.length ? Object.create(null) : null;
  for (let attr of attributes)
    (attrs[attr.name] || (attrs[attr.name] = [])).push(attr);
  return parseMixed((node, input) => {
    let id2 = node.type.id;
    if (id2 == ScriptText)
      return maybeNest(node, input, script);
    if (id2 == StyleText)
      return maybeNest(node, input, style);
    if (id2 == TextareaText)
      return maybeNest(node, input, textarea);
    if (id2 == Element && other.length) {
      let n = node.node, open = n.firstChild, tagName = open && findTagName(open, input), attrs2;
      if (tagName)
        for (let tag of other) {
          if (tag.tag == tagName && (!tag.attrs || tag.attrs(attrs2 || (attrs2 = getAttrs2(open, input))))) {
            let close = n.lastChild;
            let to = close.type.id == CloseTag ? close.from : n.to;
            if (to > open.to)
              return { parser: tag.parser, overlay: [{ from: open.to, to }] };
          }
        }
    }
    if (attrs && id2 == Attribute) {
      let n = node.node, nameNode;
      if (nameNode = n.firstChild) {
        let matches = attrs[input.read(nameNode.from, nameNode.to)];
        if (matches)
          for (let attr of matches) {
            if (attr.tagName && attr.tagName != findTagName(n.parent, input))
              continue;
            let value = n.lastChild;
            if (value.type.id == AttributeValue) {
              let from = value.from + 1;
              let last = value.lastChild, to = value.to - (last && last.isError ? 0 : 1);
              if (to > from)
                return { parser: attr.parser, overlay: [{ from, to }], bracketed: true };
            } else if (value.type.id == UnquotedAttributeValue) {
              return { parser: attr.parser, overlay: [{ from: value.from, to: value.to }] };
            }
          }
      }
    }
    return null;
  });
}

// node_modules/@codemirror/lang-html/dist/index.js
var Targets = ["_blank", "_self", "_top", "_parent"];
var Charsets = ["ascii", "utf-8", "utf-16", "latin1", "latin1"];
var Methods = ["get", "post", "put", "delete"];
var Encs = ["application/x-www-form-urlencoded", "multipart/form-data", "text/plain"];
var Bool = ["true", "false"];
var S = {};
var Tags = {
  a: {
    attrs: {
      href: null,
      ping: null,
      type: null,
      media: null,
      target: Targets,
      hreflang: null
    }
  },
  abbr: S,
  address: S,
  area: {
    attrs: {
      alt: null,
      coords: null,
      href: null,
      target: null,
      ping: null,
      media: null,
      hreflang: null,
      type: null,
      shape: ["default", "rect", "circle", "poly"]
    }
  },
  article: S,
  aside: S,
  audio: {
    attrs: {
      src: null,
      mediagroup: null,
      crossorigin: ["anonymous", "use-credentials"],
      preload: ["none", "metadata", "auto"],
      autoplay: ["autoplay"],
      loop: ["loop"],
      controls: ["controls"]
    }
  },
  b: S,
  base: { attrs: { href: null, target: Targets } },
  bdi: S,
  bdo: S,
  blockquote: { attrs: { cite: null } },
  body: S,
  br: S,
  button: {
    attrs: {
      form: null,
      formaction: null,
      name: null,
      value: null,
      autofocus: ["autofocus"],
      disabled: ["autofocus"],
      formenctype: Encs,
      formmethod: Methods,
      formnovalidate: ["novalidate"],
      formtarget: Targets,
      type: ["submit", "reset", "button"]
    }
  },
  canvas: { attrs: { width: null, height: null } },
  caption: S,
  center: S,
  cite: S,
  code: S,
  col: { attrs: { span: null } },
  colgroup: { attrs: { span: null } },
  command: {
    attrs: {
      type: ["command", "checkbox", "radio"],
      label: null,
      icon: null,
      radiogroup: null,
      command: null,
      title: null,
      disabled: ["disabled"],
      checked: ["checked"]
    }
  },
  data: { attrs: { value: null } },
  datagrid: { attrs: { disabled: ["disabled"], multiple: ["multiple"] } },
  datalist: { attrs: { data: null } },
  dd: S,
  del: { attrs: { cite: null, datetime: null } },
  details: { attrs: { open: ["open"] } },
  dfn: S,
  div: S,
  dl: S,
  dt: S,
  em: S,
  embed: { attrs: { src: null, type: null, width: null, height: null } },
  eventsource: { attrs: { src: null } },
  fieldset: { attrs: { disabled: ["disabled"], form: null, name: null } },
  figcaption: S,
  figure: S,
  footer: S,
  form: {
    attrs: {
      action: null,
      name: null,
      "accept-charset": Charsets,
      autocomplete: ["on", "off"],
      enctype: Encs,
      method: Methods,
      novalidate: ["novalidate"],
      target: Targets
    }
  },
  h1: S,
  h2: S,
  h3: S,
  h4: S,
  h5: S,
  h6: S,
  head: {
    children: ["title", "base", "link", "style", "meta", "script", "noscript", "command"]
  },
  header: S,
  hgroup: S,
  hr: S,
  html: {
    attrs: { manifest: null }
  },
  i: S,
  iframe: {
    attrs: {
      src: null,
      srcdoc: null,
      name: null,
      width: null,
      height: null,
      sandbox: ["allow-top-navigation", "allow-same-origin", "allow-forms", "allow-scripts"],
      seamless: ["seamless"]
    }
  },
  img: {
    attrs: {
      alt: null,
      src: null,
      ismap: null,
      usemap: null,
      width: null,
      height: null,
      crossorigin: ["anonymous", "use-credentials"]
    }
  },
  input: {
    attrs: {
      alt: null,
      dirname: null,
      form: null,
      formaction: null,
      height: null,
      list: null,
      max: null,
      maxlength: null,
      min: null,
      name: null,
      pattern: null,
      placeholder: null,
      size: null,
      src: null,
      step: null,
      value: null,
      width: null,
      accept: ["audio/*", "video/*", "image/*"],
      autocomplete: ["on", "off"],
      autofocus: ["autofocus"],
      checked: ["checked"],
      disabled: ["disabled"],
      formenctype: Encs,
      formmethod: Methods,
      formnovalidate: ["novalidate"],
      formtarget: Targets,
      multiple: ["multiple"],
      readonly: ["readonly"],
      required: ["required"],
      type: [
        "hidden",
        "text",
        "search",
        "tel",
        "url",
        "email",
        "password",
        "datetime",
        "date",
        "month",
        "week",
        "time",
        "datetime-local",
        "number",
        "range",
        "color",
        "checkbox",
        "radio",
        "file",
        "submit",
        "image",
        "reset",
        "button"
      ]
    }
  },
  ins: { attrs: { cite: null, datetime: null } },
  kbd: S,
  keygen: {
    attrs: {
      challenge: null,
      form: null,
      name: null,
      autofocus: ["autofocus"],
      disabled: ["disabled"],
      keytype: ["RSA"]
    }
  },
  label: { attrs: { for: null, form: null } },
  legend: S,
  li: { attrs: { value: null } },
  link: {
    attrs: {
      href: null,
      type: null,
      hreflang: null,
      media: null,
      sizes: ["all", "16x16", "16x16 32x32", "16x16 32x32 64x64"]
    }
  },
  map: { attrs: { name: null } },
  mark: S,
  menu: { attrs: { label: null, type: ["list", "context", "toolbar"] } },
  meta: {
    attrs: {
      content: null,
      charset: Charsets,
      name: ["viewport", "application-name", "author", "description", "generator", "keywords"],
      "http-equiv": ["content-language", "content-type", "default-style", "refresh"]
    }
  },
  meter: { attrs: { value: null, min: null, low: null, high: null, max: null, optimum: null } },
  nav: S,
  noscript: S,
  object: {
    attrs: {
      data: null,
      type: null,
      name: null,
      usemap: null,
      form: null,
      width: null,
      height: null,
      typemustmatch: ["typemustmatch"]
    }
  },
  ol: {
    attrs: { reversed: ["reversed"], start: null, type: ["1", "a", "A", "i", "I"] },
    children: ["li", "script", "template", "ul", "ol"]
  },
  optgroup: { attrs: { disabled: ["disabled"], label: null } },
  option: { attrs: { disabled: ["disabled"], label: null, selected: ["selected"], value: null } },
  output: { attrs: { for: null, form: null, name: null } },
  p: S,
  param: { attrs: { name: null, value: null } },
  pre: S,
  progress: { attrs: { value: null, max: null } },
  q: { attrs: { cite: null } },
  rp: S,
  rt: S,
  ruby: S,
  samp: S,
  script: {
    attrs: {
      type: ["text/javascript"],
      src: null,
      async: ["async"],
      defer: ["defer"],
      charset: Charsets
    }
  },
  section: S,
  select: {
    attrs: {
      form: null,
      name: null,
      size: null,
      autofocus: ["autofocus"],
      disabled: ["disabled"],
      multiple: ["multiple"]
    }
  },
  slot: { attrs: { name: null } },
  small: S,
  source: { attrs: { src: null, type: null, media: null } },
  span: S,
  strong: S,
  style: {
    attrs: {
      type: ["text/css"],
      media: null,
      scoped: null
    }
  },
  sub: S,
  summary: S,
  sup: S,
  table: S,
  tbody: S,
  td: { attrs: { colspan: null, rowspan: null, headers: null } },
  template: S,
  textarea: {
    attrs: {
      dirname: null,
      form: null,
      maxlength: null,
      name: null,
      placeholder: null,
      rows: null,
      cols: null,
      autofocus: ["autofocus"],
      disabled: ["disabled"],
      readonly: ["readonly"],
      required: ["required"],
      wrap: ["soft", "hard"]
    }
  },
  tfoot: S,
  th: { attrs: { colspan: null, rowspan: null, headers: null, scope: ["row", "col", "rowgroup", "colgroup"] } },
  thead: S,
  time: { attrs: { datetime: null } },
  title: S,
  tr: S,
  track: {
    attrs: {
      src: null,
      label: null,
      default: null,
      kind: ["subtitles", "captions", "descriptions", "chapters", "metadata"],
      srclang: null
    }
  },
  ul: { children: ["li", "script", "template", "ul", "ol"] },
  var: S,
  video: {
    attrs: {
      src: null,
      poster: null,
      width: null,
      height: null,
      crossorigin: ["anonymous", "use-credentials"],
      preload: ["auto", "metadata", "none"],
      autoplay: ["autoplay"],
      mediagroup: ["movie"],
      muted: ["muted"],
      controls: ["controls"]
    }
  },
  wbr: S
};
var GlobalAttrs = {
  accesskey: null,
  class: null,
  contenteditable: Bool,
  contextmenu: null,
  dir: ["ltr", "rtl", "auto"],
  draggable: ["true", "false", "auto"],
  dropzone: ["copy", "move", "link", "string:", "file:"],
  hidden: ["hidden"],
  id: null,
  inert: ["inert"],
  itemid: null,
  itemprop: null,
  itemref: null,
  itemscope: ["itemscope"],
  itemtype: null,
  lang: ["ar", "bn", "de", "en-GB", "en-US", "es", "fr", "hi", "id", "ja", "pa", "pt", "ru", "tr", "zh"],
  spellcheck: Bool,
  autocorrect: Bool,
  autocapitalize: Bool,
  style: null,
  tabindex: null,
  title: null,
  translate: ["yes", "no"],
  rel: ["stylesheet", "alternate", "author", "bookmark", "help", "license", "next", "nofollow", "noreferrer", "prefetch", "prev", "search", "tag"],
  role: /* @__PURE__ */ "alert application article banner button cell checkbox complementary contentinfo dialog document feed figure form grid gridcell heading img list listbox listitem main navigation region row rowgroup search switch tab table tabpanel textbox timer".split(" "),
  "aria-activedescendant": null,
  "aria-atomic": Bool,
  "aria-autocomplete": ["inline", "list", "both", "none"],
  "aria-busy": Bool,
  "aria-checked": ["true", "false", "mixed", "undefined"],
  "aria-controls": null,
  "aria-describedby": null,
  "aria-disabled": Bool,
  "aria-dropeffect": null,
  "aria-expanded": ["true", "false", "undefined"],
  "aria-flowto": null,
  "aria-grabbed": ["true", "false", "undefined"],
  "aria-haspopup": Bool,
  "aria-hidden": Bool,
  "aria-invalid": ["true", "false", "grammar", "spelling"],
  "aria-label": null,
  "aria-labelledby": null,
  "aria-level": null,
  "aria-live": ["off", "polite", "assertive"],
  "aria-multiline": Bool,
  "aria-multiselectable": Bool,
  "aria-owns": null,
  "aria-posinset": null,
  "aria-pressed": ["true", "false", "mixed", "undefined"],
  "aria-readonly": Bool,
  "aria-relevant": null,
  "aria-required": Bool,
  "aria-selected": ["true", "false", "undefined"],
  "aria-setsize": null,
  "aria-sort": ["ascending", "descending", "none", "other"],
  "aria-valuemax": null,
  "aria-valuemin": null,
  "aria-valuenow": null,
  "aria-valuetext": null
};
var eventAttributes = /* @__PURE__ */ ("beforeunload copy cut dragstart dragover dragleave dragenter dragend " + "drag paste focus blur change click load mousedown mouseenter mouseleave " + "mouseup keydown keyup resize scroll unload").split(" ").map((n) => "on" + n);
for (let a of eventAttributes)
  GlobalAttrs[a] = null;

class Schema {
  constructor(extraTags, extraAttrs) {
    this.tags = { ...Tags, ...extraTags };
    this.globalAttrs = { ...GlobalAttrs, ...extraAttrs };
    this.allTags = Object.keys(this.tags);
    this.globalAttrNames = Object.keys(this.globalAttrs);
  }
}
Schema.default = /* @__PURE__ */ new Schema;
function elementName2(doc2, tree, max = doc2.length) {
  if (!tree)
    return "";
  let tag = tree.firstChild;
  let name2 = tag && tag.getChild("TagName");
  return name2 ? doc2.sliceString(name2.from, Math.min(name2.to, max)) : "";
}
function findParentElement(tree, skip = false) {
  for (;tree; tree = tree.parent)
    if (tree.name == "Element") {
      if (skip)
        skip = false;
      else
        return tree;
    }
  return null;
}
function allowedChildren(doc2, tree, schema) {
  let parentInfo = schema.tags[elementName2(doc2, findParentElement(tree))];
  return (parentInfo === null || parentInfo === undefined ? undefined : parentInfo.children) || schema.allTags;
}
function openTags(doc2, tree) {
  let open = [];
  for (let parent = findParentElement(tree);parent && !parent.type.isTop; parent = findParentElement(parent.parent)) {
    let tagName = elementName2(doc2, parent);
    if (tagName && parent.lastChild.name == "CloseTag")
      break;
    if (tagName && open.indexOf(tagName) < 0 && (tree.name == "EndTag" || tree.from >= parent.firstChild.to))
      open.push(tagName);
  }
  return open;
}
var identifier3 = /^[:\-\.\w\u00b7-\uffff]*$/;
function completeTag(state, schema, tree, from, to) {
  let end = /\s*>/.test(state.sliceDoc(to, to + 5)) ? "" : ">";
  let parent = findParentElement(tree, tree.name == "StartTag" || tree.name == "TagName");
  return {
    from,
    to,
    options: allowedChildren(state.doc, parent, schema).map((tagName) => ({ label: tagName, type: "type" })).concat(openTags(state.doc, tree).map((tag, i2) => ({
      label: "/" + tag,
      apply: "/" + tag + end,
      type: "type",
      boost: 99 - i2
    }))),
    validFor: /^\/?[:\-\.\w\u00b7-\uffff]*$/
  };
}
function completeCloseTag(state, tree, from, to) {
  let end = /\s*>/.test(state.sliceDoc(to, to + 5)) ? "" : ">";
  return {
    from,
    to,
    options: openTags(state.doc, tree).map((tag, i2) => ({ label: tag, apply: tag + end, type: "type", boost: 99 - i2 })),
    validFor: identifier3
  };
}
function completeStartTag(state, schema, tree, pos) {
  let options = [], level = 0;
  for (let tagName of allowedChildren(state.doc, tree, schema))
    options.push({ label: "<" + tagName, type: "type" });
  for (let open of openTags(state.doc, tree))
    options.push({ label: "</" + open + ">", type: "type", boost: 99 - level++ });
  return { from: pos, to: pos, options, validFor: /^<\/?[:\-\.\w\u00b7-\uffff]*$/ };
}
function completeAttrName(state, schema, tree, from, to) {
  let elt = findParentElement(tree), info = elt ? schema.tags[elementName2(state.doc, elt)] : null;
  let localAttrs = info && info.attrs ? Object.keys(info.attrs) : [];
  let names = info && info.globalAttrs === false ? localAttrs : localAttrs.length ? localAttrs.concat(schema.globalAttrNames) : schema.globalAttrNames;
  return {
    from,
    to,
    options: names.map((attrName) => ({ label: attrName, type: "property" })),
    validFor: identifier3
  };
}
function completeAttrValue(state, schema, tree, from, to) {
  var _a2;
  let nameNode = (_a2 = tree.parent) === null || _a2 === undefined ? undefined : _a2.getChild("AttributeName");
  let options = [], token = undefined;
  if (nameNode) {
    let attrName = state.sliceDoc(nameNode.from, nameNode.to);
    let attrs = schema.globalAttrs[attrName];
    if (!attrs) {
      let elt = findParentElement(tree), info = elt ? schema.tags[elementName2(state.doc, elt)] : null;
      attrs = (info === null || info === undefined ? undefined : info.attrs) && info.attrs[attrName];
    }
    if (attrs) {
      let base2 = state.sliceDoc(from, to).toLowerCase(), quoteStart = '"', quoteEnd = '"';
      if (/^['"]/.test(base2)) {
        token = base2[0] == '"' ? /^[^"]*$/ : /^[^']*$/;
        quoteStart = "";
        quoteEnd = state.sliceDoc(to, to + 1) == base2[0] ? "" : base2[0];
        base2 = base2.slice(1);
        from++;
      } else {
        token = /^[^\s<>='"]*$/;
      }
      for (let value of attrs)
        options.push({ label: value, apply: quoteStart + value + quoteEnd, type: "constant" });
    }
  }
  return { from, to, options, validFor: token };
}
function htmlCompletionFor(schema, context) {
  let { state, pos } = context, tree = syntaxTree(state).resolveInner(pos, -1), around = tree.resolve(pos);
  for (let scan = pos, before;around == tree && (before = tree.childBefore(scan)); ) {
    let last = before.lastChild;
    if (!last || !last.type.isError || last.from < last.to)
      break;
    around = tree = before;
    scan = last.from;
  }
  if (tree.name == "TagName") {
    return tree.parent && /CloseTag$/.test(tree.parent.name) ? completeCloseTag(state, tree, tree.from, pos) : completeTag(state, schema, tree, tree.from, pos);
  } else if (tree.name == "StartTag" || tree.name == "IncompleteTag") {
    return completeTag(state, schema, tree, pos, pos);
  } else if (tree.name == "StartCloseTag" || tree.name == "IncompleteCloseTag") {
    return completeCloseTag(state, tree, pos, pos);
  } else if (tree.name == "OpenTag" || tree.name == "SelfClosingTag" || tree.name == "AttributeName") {
    return completeAttrName(state, schema, tree, tree.name == "AttributeName" ? tree.from : pos, pos);
  } else if (tree.name == "Is" || tree.name == "AttributeValue" || tree.name == "UnquotedAttributeValue") {
    return completeAttrValue(state, schema, tree, tree.name == "Is" ? pos : tree.from, pos);
  } else if (context.explicit && (around.name == "Element" || around.name == "Text" || around.name == "Document")) {
    return completeStartTag(state, schema, tree, pos);
  } else {
    return null;
  }
}
function htmlCompletionSource(context) {
  return htmlCompletionFor(Schema.default, context);
}
function htmlCompletionSourceWith(config2) {
  let { extraTags, extraGlobalAttributes: extraAttrs } = config2;
  let schema = extraAttrs || extraTags ? new Schema(extraTags, extraAttrs) : Schema.default;
  return (context) => htmlCompletionFor(schema, context);
}
var jsonParser = /* @__PURE__ */ javascriptLanguage.parser.configure({ top: "SingleExpression" });
var defaultNesting = [
  {
    tag: "script",
    attrs: (attrs) => attrs.type == "text/typescript" || attrs.lang == "ts",
    parser: typescriptLanguage.parser
  },
  {
    tag: "script",
    attrs: (attrs) => attrs.type == "text/babel" || attrs.type == "text/jsx",
    parser: jsxLanguage.parser
  },
  {
    tag: "script",
    attrs: (attrs) => attrs.type == "text/typescript-jsx",
    parser: tsxLanguage.parser
  },
  {
    tag: "script",
    attrs(attrs) {
      return /^(importmap|speculationrules|application\/(.+\+)?json)$/i.test(attrs.type);
    },
    parser: jsonParser
  },
  {
    tag: "script",
    attrs(attrs) {
      return !attrs.type || /^(?:text|application)\/(?:x-)?(?:java|ecma)script$|^module$|^$/i.test(attrs.type);
    },
    parser: javascriptLanguage.parser
  },
  {
    tag: "style",
    attrs(attrs) {
      return (!attrs.lang || attrs.lang == "css") && (!attrs.type || /^(text\/)?(x-)?(stylesheet|css)$/i.test(attrs.type));
    },
    parser: cssLanguage.parser
  }
];
var defaultAttrs = /* @__PURE__ */ [
  {
    name: "style",
    parser: /* @__PURE__ */ cssLanguage.parser.configure({ top: "Styles" })
  }
].concat(/* @__PURE__ */ eventAttributes.map((name2) => ({ name: name2, parser: javascriptLanguage.parser })));
var htmlPlain = /* @__PURE__ */ LRLanguage.define({
  name: "html",
  parser: /* @__PURE__ */ parser3.configure({
    props: [
      /* @__PURE__ */ indentNodeProp.add({
        Element(context) {
          let after = /^(\s*)(<\/)?/.exec(context.textAfter);
          if (context.node.to <= context.pos + after[0].length)
            return context.continue();
          return context.lineIndent(context.node.from) + (after[2] ? 0 : context.unit);
        },
        "OpenTag CloseTag SelfClosingTag"(context) {
          return context.column(context.node.from) + context.unit;
        },
        Document(context) {
          if (context.pos + /\s*/.exec(context.textAfter)[0].length < context.node.to)
            return context.continue();
          let endElt = null, close;
          for (let cur2 = context.node;; ) {
            let last = cur2.lastChild;
            if (!last || last.name != "Element" || last.to != cur2.to)
              break;
            endElt = cur2 = last;
          }
          if (endElt && !((close = endElt.lastChild) && (close.name == "CloseTag" || close.name == "SelfClosingTag")))
            return context.lineIndent(endElt.from) + context.unit;
          return null;
        }
      }),
      /* @__PURE__ */ foldNodeProp.add({
        Element(node) {
          let { firstChild: first, lastChild: last } = node;
          if (!first || first.name != "OpenTag")
            return null;
          return { from: first.to, to: last.name == "CloseTag" ? last.from : node.to };
        }
      }),
      /* @__PURE__ */ bracketMatchingHandle.add({
        "OpenTag CloseTag": (node) => node.getChild("TagName")
      })
    ]
  }),
  languageData: {
    commentTokens: { block: { open: "<!--", close: "-->" } },
    indentOnInput: /^\s*<\/\w+\W$/,
    wordChars: "-_"
  }
});
var htmlLanguage = /* @__PURE__ */ htmlPlain.configure({
  wrap: /* @__PURE__ */ configureNesting(defaultNesting, defaultAttrs)
});
function html(config2 = {}) {
  let dialect = "", wrap;
  if (config2.matchClosingTags === false)
    dialect = "noMatch";
  if (config2.selfClosingTags === true)
    dialect = (dialect ? dialect + " " : "") + "selfClosing";
  if (config2.nestedLanguages && config2.nestedLanguages.length || config2.nestedAttributes && config2.nestedAttributes.length)
    wrap = configureNesting((config2.nestedLanguages || []).concat(defaultNesting), (config2.nestedAttributes || []).concat(defaultAttrs));
  let lang = wrap ? htmlPlain.configure({ wrap, dialect }) : dialect ? htmlLanguage.configure({ dialect }) : htmlLanguage;
  return new LanguageSupport(lang, [
    htmlLanguage.data.of({ autocomplete: htmlCompletionSourceWith(config2) }),
    config2.autoCloseTags !== false ? autoCloseTags2 : [],
    javascript().support,
    css().support
  ]);
}
var selfClosers2 = /* @__PURE__ */ new Set(/* @__PURE__ */ "area base br col command embed frame hr img input keygen link meta param source track wbr menuitem".split(" "));
var autoCloseTags2 = /* @__PURE__ */ EditorView.inputHandler.of((view, from, to, text, insertTransaction) => {
  if (view.composing || view.state.readOnly || from != to || text != ">" && text != "/" || !htmlLanguage.isActiveAt(view.state, from, -1))
    return false;
  let base2 = insertTransaction(), { state } = base2;
  let closeTags = state.changeByRange((range) => {
    var _a2, _b, _c;
    let didType = state.doc.sliceString(range.from - 1, range.to) == text;
    let { head } = range, after = syntaxTree(state).resolveInner(head, -1), name2;
    if (didType && text == ">" && after.name == "EndTag") {
      let tag = after.parent;
      if (((_b = (_a2 = tag.parent) === null || _a2 === undefined ? undefined : _a2.lastChild) === null || _b === undefined ? undefined : _b.name) != "CloseTag" && (name2 = elementName2(state.doc, tag.parent, head)) && !selfClosers2.has(name2)) {
        let to2 = head + (state.doc.sliceString(head, head + 1) === ">" ? 1 : 0);
        let insert2 = `</${name2}>`;
        return { range, changes: { from: head, to: to2, insert: insert2 } };
      }
    } else if (didType && text == "/" && after.name == "IncompleteCloseTag") {
      let tag = after.parent;
      if (after.from == head - 2 && ((_c = tag.lastChild) === null || _c === undefined ? undefined : _c.name) != "CloseTag" && (name2 = elementName2(state.doc, tag, head)) && !selfClosers2.has(name2)) {
        let to2 = head + (state.doc.sliceString(head, head + 1) === ">" ? 1 : 0);
        let insert2 = `${name2}>`;
        return {
          range: EditorSelection.cursor(head + insert2.length, -1),
          changes: { from: head, to: to2, insert: insert2 }
        };
      }
    }
    return { range };
  });
  if (closeTags.changes.empty)
    return false;
  view.dispatch([
    base2,
    state.update(closeTags, {
      userEvent: "input.complete",
      scrollIntoView: true
    })
  ]);
  return true;
});

// node_modules/@lezer/json/dist/index.js
var jsonHighlighting = styleTags({
  String: tags.string,
  Number: tags.number,
  "True False": tags.bool,
  PropertyName: tags.propertyName,
  Null: tags.null,
  ", :": tags.separator,
  "[ ]": tags.squareBracket,
  "{ }": tags.brace
});
var parser4 = LRParser.deserialize({
  version: 14,
  states: "$bOVQPOOOOQO'#Cb'#CbOnQPO'#CeOvQPO'#ClOOQO'#Cr'#CrQOQPOOOOQO'#Cg'#CgO}QPO'#CfO!SQPO'#CtOOQO,59P,59PO![QPO,59PO!aQPO'#CuOOQO,59W,59WO!iQPO,59WOVQPO,59QOqQPO'#CmO!nQPO,59`OOQO1G.k1G.kOVQPO'#CnO!vQPO,59aOOQO1G.r1G.rOOQO1G.l1G.lOOQO,59X,59XOOQO-E6k-E6kOOQO,59Y,59YOOQO-E6l-E6l",
  stateData: "#O~OeOS~OQSORSOSSOTSOWQO_ROgPO~OVXOgUO~O^[O~PVO[^O~O]_OVhX~OVaO~O]bO^iX~O^dO~O]_OVha~O]bO^ia~O",
  goto: "!kjPPPPPPkPPkqwPPPPk{!RPPP!XP!e!hXSOR^bQWQRf_TVQ_Q`WRg`QcZRicQTOQZRQe^RhbRYQR]R",
  nodeNames: " JsonText True False Null Number String } { Object Property PropertyName : , ] [ Array",
  maxTerm: 25,
  nodeProps: [
    ["isolate", -2, 6, 11, ""],
    ["openedBy", 7, "{", 14, "["],
    ["closedBy", 8, "}", 15, "]"]
  ],
  propSources: [jsonHighlighting],
  skippedNodes: [0],
  repeatNodeCount: 2,
  tokenData: "(|~RaXY!WYZ!W]^!Wpq!Wrs!]|}$u}!O$z!Q!R%T!R![&c![!]&t!}#O&y#P#Q'O#Y#Z'T#b#c'r#h#i(Z#o#p(r#q#r(w~!]Oe~~!`Wpq!]qr!]rs!xs#O!]#O#P!}#P;'S!];'S;=`$o<%lO!]~!}Og~~#QXrs!]!P!Q!]#O#P!]#U#V!]#Y#Z!]#b#c!]#f#g!]#h#i!]#i#j#m~#pR!Q![#y!c!i#y#T#Z#y~#|R!Q![$V!c!i$V#T#Z$V~$YR!Q![$c!c!i$c#T#Z$c~$fR!Q![!]!c!i!]#T#Z!]~$rP;=`<%l!]~$zO]~~$}Q!Q!R%T!R![&c~%YRT~!O!P%c!g!h%w#X#Y%w~%fP!Q![%i~%nRT~!Q![%i!g!h%w#X#Y%w~%zR{|&T}!O&T!Q![&Z~&WP!Q![&Z~&`PT~!Q![&Z~&hST~!O!P%c!Q![&c!g!h%w#X#Y%w~&yO[~~'OO_~~'TO^~~'WP#T#U'Z~'^P#`#a'a~'dP#g#h'g~'jP#X#Y'm~'rOR~~'uP#i#j'x~'{P#`#a(O~(RP#`#a(U~(ZOS~~(^P#f#g(a~(dP#i#j(g~(jP#X#Y(m~(rOQ~~(wOW~~(|OV~",
  tokenizers: [0],
  topRules: { JsonText: [0, 1] },
  tokenPrec: 0
});

// node_modules/@codemirror/lang-json/dist/index.js
var jsonLanguage = /* @__PURE__ */ LRLanguage.define({
  name: "json",
  parser: /* @__PURE__ */ parser4.configure({
    props: [
      /* @__PURE__ */ indentNodeProp.add({
        Object: /* @__PURE__ */ continuedIndent({ except: /^\s*\}/ }),
        Array: /* @__PURE__ */ continuedIndent({ except: /^\s*\]/ })
      }),
      /* @__PURE__ */ foldNodeProp.add({
        "Object Array": foldInside
      })
    ]
  }),
  languageData: {
    closeBrackets: { brackets: ["[", "{", '"'] },
    indentOnInput: /^\s*[\}\]]$/
  }
});
function json() {
  return new LanguageSupport(jsonLanguage);
}

// node_modules/@lezer/markdown/dist/index.js
class CompositeBlock {
  static create(type, value, from, parentHash, end) {
    let hash2 = parentHash + (parentHash << 8) + type + (value << 4) | 0;
    return new CompositeBlock(type, value, from, hash2, end, [], []);
  }
  constructor(type, value, from, hash2, end, children, positions) {
    this.type = type;
    this.value = value;
    this.from = from;
    this.hash = hash2;
    this.end = end;
    this.children = children;
    this.positions = positions;
    this.hashProp = [[NodeProp.contextHash, hash2]];
  }
  addChild(child, pos) {
    if (child.prop(NodeProp.contextHash) != this.hash)
      child = new Tree(child.type, child.children, child.positions, child.length, this.hashProp);
    this.children.push(child);
    this.positions.push(pos);
  }
  toTree(nodeSet, end = this.end) {
    let last = this.children.length - 1;
    if (last >= 0)
      end = Math.max(end, this.positions[last] + this.children[last].length + this.from);
    return new Tree(nodeSet.types[this.type], this.children, this.positions, end - this.from).balance({
      makeTree: (children, positions, length) => new Tree(NodeType.none, children, positions, length, this.hashProp)
    });
  }
}
var Type;
(function(Type2) {
  Type2[Type2["Document"] = 1] = "Document";
  Type2[Type2["CodeBlock"] = 2] = "CodeBlock";
  Type2[Type2["FencedCode"] = 3] = "FencedCode";
  Type2[Type2["Blockquote"] = 4] = "Blockquote";
  Type2[Type2["HorizontalRule"] = 5] = "HorizontalRule";
  Type2[Type2["BulletList"] = 6] = "BulletList";
  Type2[Type2["OrderedList"] = 7] = "OrderedList";
  Type2[Type2["ListItem"] = 8] = "ListItem";
  Type2[Type2["ATXHeading1"] = 9] = "ATXHeading1";
  Type2[Type2["ATXHeading2"] = 10] = "ATXHeading2";
  Type2[Type2["ATXHeading3"] = 11] = "ATXHeading3";
  Type2[Type2["ATXHeading4"] = 12] = "ATXHeading4";
  Type2[Type2["ATXHeading5"] = 13] = "ATXHeading5";
  Type2[Type2["ATXHeading6"] = 14] = "ATXHeading6";
  Type2[Type2["SetextHeading1"] = 15] = "SetextHeading1";
  Type2[Type2["SetextHeading2"] = 16] = "SetextHeading2";
  Type2[Type2["HTMLBlock"] = 17] = "HTMLBlock";
  Type2[Type2["LinkReference"] = 18] = "LinkReference";
  Type2[Type2["Paragraph"] = 19] = "Paragraph";
  Type2[Type2["CommentBlock"] = 20] = "CommentBlock";
  Type2[Type2["ProcessingInstructionBlock"] = 21] = "ProcessingInstructionBlock";
  Type2[Type2["Escape"] = 22] = "Escape";
  Type2[Type2["Entity"] = 23] = "Entity";
  Type2[Type2["HardBreak"] = 24] = "HardBreak";
  Type2[Type2["Emphasis"] = 25] = "Emphasis";
  Type2[Type2["StrongEmphasis"] = 26] = "StrongEmphasis";
  Type2[Type2["Link"] = 27] = "Link";
  Type2[Type2["Image"] = 28] = "Image";
  Type2[Type2["InlineCode"] = 29] = "InlineCode";
  Type2[Type2["HTMLTag"] = 30] = "HTMLTag";
  Type2[Type2["Comment"] = 31] = "Comment";
  Type2[Type2["ProcessingInstruction"] = 32] = "ProcessingInstruction";
  Type2[Type2["Autolink"] = 33] = "Autolink";
  Type2[Type2["HeaderMark"] = 34] = "HeaderMark";
  Type2[Type2["QuoteMark"] = 35] = "QuoteMark";
  Type2[Type2["ListMark"] = 36] = "ListMark";
  Type2[Type2["LinkMark"] = 37] = "LinkMark";
  Type2[Type2["EmphasisMark"] = 38] = "EmphasisMark";
  Type2[Type2["CodeMark"] = 39] = "CodeMark";
  Type2[Type2["CodeText"] = 40] = "CodeText";
  Type2[Type2["CodeInfo"] = 41] = "CodeInfo";
  Type2[Type2["LinkTitle"] = 42] = "LinkTitle";
  Type2[Type2["LinkLabel"] = 43] = "LinkLabel";
  Type2[Type2["URL"] = 44] = "URL";
})(Type || (Type = {}));

class LeafBlock {
  constructor(start, content2) {
    this.start = start;
    this.content = content2;
    this.marks = [];
    this.parsers = [];
  }
}

class Line2 {
  constructor() {
    this.text = "";
    this.baseIndent = 0;
    this.basePos = 0;
    this.depth = 0;
    this.markers = [];
    this.pos = 0;
    this.indent = 0;
    this.next = -1;
  }
  forward() {
    if (this.basePos > this.pos)
      this.forwardInner();
  }
  forwardInner() {
    let newPos = this.skipSpace(this.basePos);
    this.indent = this.countIndent(newPos, this.pos, this.indent);
    this.pos = newPos;
    this.next = newPos == this.text.length ? -1 : this.text.charCodeAt(newPos);
  }
  skipSpace(from) {
    return skipSpace(this.text, from);
  }
  reset(text) {
    this.text = text;
    this.baseIndent = this.basePos = this.pos = this.indent = 0;
    this.forwardInner();
    this.depth = 1;
    while (this.markers.length)
      this.markers.pop();
  }
  moveBase(to) {
    this.basePos = to;
    this.baseIndent = this.countIndent(to, this.pos, this.indent);
  }
  moveBaseColumn(indent) {
    this.baseIndent = indent;
    this.basePos = this.findColumn(indent);
  }
  addMarker(elt) {
    this.markers.push(elt);
  }
  countIndent(to, from = 0, indent = 0) {
    for (let i2 = from;i2 < to; i2++)
      indent += this.text.charCodeAt(i2) == 9 ? 4 - indent % 4 : 1;
    return indent;
  }
  findColumn(goal) {
    let i2 = 0;
    for (let indent = 0;i2 < this.text.length && indent < goal; i2++)
      indent += this.text.charCodeAt(i2) == 9 ? 4 - indent % 4 : 1;
    return i2;
  }
  scrub() {
    if (!this.baseIndent)
      return this.text;
    let result = "";
    for (let i2 = 0;i2 < this.basePos; i2++)
      result += " ";
    return result + this.text.slice(this.basePos);
  }
}
function skipForList(bl, cx, line) {
  if (line.pos == line.text.length || bl != cx.block && line.indent >= cx.stack[line.depth + 1].value + line.baseIndent)
    return true;
  if (line.indent >= line.baseIndent + 4)
    return false;
  let size = (bl.type == Type.OrderedList ? isOrderedList : isBulletList)(line, cx, false);
  return size > 0 && (bl.type != Type.BulletList || isHorizontalRule(line, cx, false) < 0) && line.text.charCodeAt(line.pos + size - 1) == bl.value;
}
var DefaultSkipMarkup = {
  [Type.Blockquote](bl, cx, line) {
    if (line.next != 62)
      return false;
    line.markers.push(elt(Type.QuoteMark, cx.lineStart + line.pos, cx.lineStart + line.pos + 1));
    line.moveBase(line.pos + (space3(line.text.charCodeAt(line.pos + 1)) ? 2 : 1));
    bl.end = cx.lineStart + line.text.length;
    return true;
  },
  [Type.ListItem](bl, _cx, line) {
    if (line.indent < line.baseIndent + bl.value && line.next > -1)
      return false;
    line.moveBaseColumn(line.baseIndent + bl.value);
    return true;
  },
  [Type.OrderedList]: skipForList,
  [Type.BulletList]: skipForList,
  [Type.Document]() {
    return true;
  }
};
function space3(ch) {
  return ch == 32 || ch == 9 || ch == 10 || ch == 13;
}
function skipSpace(line, i2 = 0) {
  while (i2 < line.length && space3(line.charCodeAt(i2)))
    i2++;
  return i2;
}
function skipSpaceBack(line, i2, to) {
  while (i2 > to && space3(line.charCodeAt(i2 - 1)))
    i2--;
  return i2;
}
function isFencedCode(line) {
  if (line.next != 96 && line.next != 126)
    return -1;
  let pos = line.pos + 1;
  while (pos < line.text.length && line.text.charCodeAt(pos) == line.next)
    pos++;
  if (pos < line.pos + 3)
    return -1;
  if (line.next == 96) {
    for (let i2 = pos;i2 < line.text.length; i2++)
      if (line.text.charCodeAt(i2) == 96)
        return -1;
  }
  return pos;
}
function isBlockquote(line) {
  return line.next != 62 ? -1 : line.text.charCodeAt(line.pos + 1) == 32 ? 2 : 1;
}
function isHorizontalRule(line, cx, breaking) {
  if (line.next != 42 && line.next != 45 && line.next != 95)
    return -1;
  let count = 1;
  for (let pos = line.pos + 1;pos < line.text.length; pos++) {
    let ch = line.text.charCodeAt(pos);
    if (ch == line.next)
      count++;
    else if (!space3(ch))
      return -1;
  }
  if (breaking && line.next == 45 && isSetextUnderline(line) > -1 && line.depth == cx.stack.length && cx.parser.leafBlockParsers.indexOf(DefaultLeafBlocks.SetextHeading) > -1)
    return -1;
  return count < 3 ? -1 : 1;
}
function inList(cx, type) {
  for (let i2 = cx.stack.length - 1;i2 >= 0; i2--)
    if (cx.stack[i2].type == type)
      return true;
  return false;
}
function isBulletList(line, cx, breaking) {
  return (line.next == 45 || line.next == 43 || line.next == 42) && (line.pos == line.text.length - 1 || space3(line.text.charCodeAt(line.pos + 1))) && (!breaking || inList(cx, Type.BulletList) || line.skipSpace(line.pos + 2) < line.text.length) ? 1 : -1;
}
function isOrderedList(line, cx, breaking) {
  let { pos, next } = line;
  for (;; ) {
    if (next >= 48 && next <= 57)
      pos++;
    else
      break;
    if (pos == line.text.length)
      return -1;
    next = line.text.charCodeAt(pos);
  }
  if (pos == line.pos || pos > line.pos + 9 || next != 46 && next != 41 || pos < line.text.length - 1 && !space3(line.text.charCodeAt(pos + 1)) || breaking && !inList(cx, Type.OrderedList) && (line.skipSpace(pos + 1) == line.text.length || pos > line.pos + 1 || line.next != 49))
    return -1;
  return pos + 1 - line.pos;
}
function isAtxHeading(line) {
  if (line.next != 35)
    return -1;
  let pos = line.pos + 1;
  while (pos < line.text.length && line.text.charCodeAt(pos) == 35)
    pos++;
  if (pos < line.text.length && line.text.charCodeAt(pos) != 32)
    return -1;
  let size = pos - line.pos;
  return size > 6 ? -1 : size;
}
function isSetextUnderline(line) {
  if (line.next != 45 && line.next != 61 || line.indent >= line.baseIndent + 4)
    return -1;
  let pos = line.pos + 1;
  while (pos < line.text.length && line.text.charCodeAt(pos) == line.next)
    pos++;
  let end = pos;
  while (pos < line.text.length && space3(line.text.charCodeAt(pos)))
    pos++;
  return pos == line.text.length ? end : -1;
}
var EmptyLine = /^[ \t]*$/;
var CommentEnd = /-->/;
var ProcessingEnd = /\?>/;
var HTMLBlockStyle = [
  [/^<(?:script|pre|style)(?:\s|>|$)/i, /<\/(?:script|pre|style)>/i],
  [/^\s*<!--/, CommentEnd],
  [/^\s*<\?/, ProcessingEnd],
  [/^\s*<![A-Z]/, />/],
  [/^\s*<!\[CDATA\[/, /\]\]>/],
  [/^\s*<\/?(?:address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h1|h2|h3|h4|h5|h6|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul)(?:\s|\/?>|$)/i, EmptyLine],
  [/^\s*(?:<\/[a-z][\w-]*\s*>|<[a-z][\w-]*(\s+[a-z:_][\w-.]*(?:\s*=\s*(?:[^\s"'=<>`]+|'[^']*'|"[^"]*"))?)*\s*>)\s*$/i, EmptyLine]
];
function isHTMLBlock(line, _cx, breaking) {
  if (line.next != 60)
    return -1;
  let rest = line.text.slice(line.pos);
  for (let i2 = 0, e = HTMLBlockStyle.length - (breaking ? 1 : 0);i2 < e; i2++)
    if (HTMLBlockStyle[i2][0].test(rest))
      return i2;
  return -1;
}
function getListIndent(line, pos) {
  let indentAfter = line.countIndent(pos, line.pos, line.indent);
  let indented = line.countIndent(line.skipSpace(pos), pos, indentAfter);
  return indented >= indentAfter + 5 ? indentAfter + 1 : indented;
}
function addCodeText(marks2, from, to) {
  let last = marks2.length - 1;
  if (last >= 0 && marks2[last].to == from && marks2[last].type == Type.CodeText)
    marks2[last].to = to;
  else
    marks2.push(elt(Type.CodeText, from, to));
}
var DefaultBlockParsers = {
  LinkReference: undefined,
  IndentedCode(cx, line) {
    let base2 = line.baseIndent + 4;
    if (line.indent < base2)
      return false;
    let start = line.findColumn(base2);
    let from = cx.lineStart + start, to = cx.lineStart + line.text.length;
    let marks2 = [], pendingMarks = [];
    addCodeText(marks2, from, to);
    while (cx.nextLine() && line.depth >= cx.stack.length) {
      if (line.pos == line.text.length) {
        addCodeText(pendingMarks, cx.lineStart - 1, cx.lineStart);
        for (let m of line.markers)
          pendingMarks.push(m);
      } else if (line.indent < base2) {
        break;
      } else {
        if (pendingMarks.length) {
          for (let m of pendingMarks) {
            if (m.type == Type.CodeText)
              addCodeText(marks2, m.from, m.to);
            else
              marks2.push(m);
          }
          pendingMarks = [];
        }
        addCodeText(marks2, cx.lineStart - 1, cx.lineStart);
        for (let m of line.markers)
          marks2.push(m);
        to = cx.lineStart + line.text.length;
        let codeStart = cx.lineStart + line.findColumn(line.baseIndent + 4);
        if (codeStart < to)
          addCodeText(marks2, codeStart, to);
      }
    }
    if (pendingMarks.length) {
      pendingMarks = pendingMarks.filter((m) => m.type != Type.CodeText);
      if (pendingMarks.length)
        line.markers = pendingMarks.concat(line.markers);
    }
    cx.addNode(cx.buffer.writeElements(marks2, -from).finish(Type.CodeBlock, to - from), from);
    return true;
  },
  FencedCode(cx, line) {
    let fenceEnd = isFencedCode(line);
    if (fenceEnd < 0)
      return false;
    let from = cx.lineStart + line.pos, ch = line.next, len = fenceEnd - line.pos;
    let infoFrom = line.skipSpace(fenceEnd), infoTo = skipSpaceBack(line.text, line.text.length, infoFrom);
    let marks2 = [elt(Type.CodeMark, from, from + len)];
    if (infoFrom < infoTo)
      marks2.push(elt(Type.CodeInfo, cx.lineStart + infoFrom, cx.lineStart + infoTo));
    for (let first = true, empty2 = true, hasLine = false;cx.nextLine() && line.depth >= cx.stack.length; first = false) {
      let i2 = line.pos;
      if (line.indent - line.baseIndent < 4)
        while (i2 < line.text.length && line.text.charCodeAt(i2) == ch)
          i2++;
      if (i2 - line.pos >= len && line.skipSpace(i2) == line.text.length) {
        for (let m of line.markers)
          marks2.push(m);
        if (empty2 && hasLine)
          addCodeText(marks2, cx.lineStart - 1, cx.lineStart);
        marks2.push(elt(Type.CodeMark, cx.lineStart + line.pos, cx.lineStart + i2));
        cx.nextLine();
        break;
      } else {
        hasLine = true;
        if (!first) {
          addCodeText(marks2, cx.lineStart - 1, cx.lineStart);
          empty2 = false;
        }
        for (let m of line.markers)
          marks2.push(m);
        let textStart = cx.lineStart + line.basePos, textEnd = cx.lineStart + line.text.length;
        if (textStart < textEnd) {
          addCodeText(marks2, textStart, textEnd);
          empty2 = false;
        }
      }
    }
    cx.addNode(cx.buffer.writeElements(marks2, -from).finish(Type.FencedCode, cx.prevLineEnd() - from), from);
    return true;
  },
  Blockquote(cx, line) {
    let size = isBlockquote(line);
    if (size < 0)
      return false;
    cx.startContext(Type.Blockquote, line.pos);
    cx.addNode(Type.QuoteMark, cx.lineStart + line.pos, cx.lineStart + line.pos + 1);
    line.moveBase(line.pos + size);
    return null;
  },
  HorizontalRule(cx, line) {
    if (isHorizontalRule(line, cx, false) < 0)
      return false;
    let from = cx.lineStart + line.pos;
    cx.nextLine();
    cx.addNode(Type.HorizontalRule, from);
    return true;
  },
  BulletList(cx, line) {
    let size = isBulletList(line, cx, false);
    if (size < 0)
      return false;
    if (cx.block.type != Type.BulletList)
      cx.startContext(Type.BulletList, line.basePos, line.next);
    let newBase = getListIndent(line, line.pos + 1);
    cx.startContext(Type.ListItem, line.basePos, newBase - line.baseIndent);
    cx.addNode(Type.ListMark, cx.lineStart + line.pos, cx.lineStart + line.pos + size);
    line.moveBaseColumn(newBase);
    return null;
  },
  OrderedList(cx, line) {
    let size = isOrderedList(line, cx, false);
    if (size < 0)
      return false;
    if (cx.block.type != Type.OrderedList)
      cx.startContext(Type.OrderedList, line.basePos, line.text.charCodeAt(line.pos + size - 1));
    let newBase = getListIndent(line, line.pos + size);
    cx.startContext(Type.ListItem, line.basePos, newBase - line.baseIndent);
    cx.addNode(Type.ListMark, cx.lineStart + line.pos, cx.lineStart + line.pos + size);
    line.moveBaseColumn(newBase);
    return null;
  },
  ATXHeading(cx, line) {
    let size = isAtxHeading(line);
    if (size < 0)
      return false;
    let off = line.pos, from = cx.lineStart + off;
    let endOfSpace = skipSpaceBack(line.text, line.text.length, off), after = endOfSpace;
    while (after > off && line.text.charCodeAt(after - 1) == line.next)
      after--;
    if (after == endOfSpace || after == off || !space3(line.text.charCodeAt(after - 1)))
      after = line.text.length;
    let buf = cx.buffer.write(Type.HeaderMark, 0, size).writeElements(cx.parser.parseInline(line.text.slice(off + size + 1, after), from + size + 1), -from);
    if (after < line.text.length)
      buf.write(Type.HeaderMark, after - off, endOfSpace - off);
    let node = buf.finish(Type.ATXHeading1 - 1 + size, line.text.length - off);
    cx.nextLine();
    cx.addNode(node, from);
    return true;
  },
  HTMLBlock(cx, line) {
    let type = isHTMLBlock(line, cx, false);
    if (type < 0)
      return false;
    let from = cx.lineStart + line.pos, end = HTMLBlockStyle[type][1];
    let marks2 = [], trailing = end != EmptyLine;
    while (!end.test(line.text) && cx.nextLine()) {
      if (line.depth < cx.stack.length) {
        trailing = false;
        break;
      }
      for (let m of line.markers)
        marks2.push(m);
    }
    if (trailing)
      cx.nextLine();
    let nodeType = end == CommentEnd ? Type.CommentBlock : end == ProcessingEnd ? Type.ProcessingInstructionBlock : Type.HTMLBlock;
    let to = cx.prevLineEnd();
    cx.addNode(cx.buffer.writeElements(marks2, -from).finish(nodeType, to - from), from);
    return true;
  },
  SetextHeading: undefined
};

class LinkReferenceParser {
  constructor(leaf) {
    this.stage = 0;
    this.elts = [];
    this.pos = 0;
    this.start = leaf.start;
    this.advance(leaf.content);
  }
  nextLine(cx, line, leaf) {
    if (this.stage == -1)
      return false;
    let content2 = leaf.content + `
` + line.scrub();
    let finish = this.advance(content2);
    if (finish > -1 && finish < content2.length)
      return this.complete(cx, leaf, finish);
    return false;
  }
  finish(cx, leaf) {
    if ((this.stage == 2 || this.stage == 3) && skipSpace(leaf.content, this.pos) == leaf.content.length)
      return this.complete(cx, leaf, leaf.content.length);
    return false;
  }
  complete(cx, leaf, len) {
    cx.addLeafElement(leaf, elt(Type.LinkReference, this.start, this.start + len, this.elts));
    return true;
  }
  nextStage(elt) {
    if (elt) {
      this.pos = elt.to - this.start;
      this.elts.push(elt);
      this.stage++;
      return true;
    }
    if (elt === false)
      this.stage = -1;
    return false;
  }
  advance(content2) {
    for (;; ) {
      if (this.stage == -1) {
        return -1;
      } else if (this.stage == 0) {
        if (!this.nextStage(parseLinkLabel(content2, this.pos, this.start, true)))
          return -1;
        if (content2.charCodeAt(this.pos) != 58)
          return this.stage = -1;
        this.elts.push(elt(Type.LinkMark, this.pos + this.start, this.pos + this.start + 1));
        this.pos++;
      } else if (this.stage == 1) {
        if (!this.nextStage(parseURL(content2, skipSpace(content2, this.pos), this.start)))
          return -1;
      } else if (this.stage == 2) {
        let skip = skipSpace(content2, this.pos), end = 0;
        if (skip > this.pos) {
          let title = parseLinkTitle(content2, skip, this.start);
          if (title) {
            let titleEnd = lineEnd(content2, title.to - this.start);
            if (titleEnd > 0) {
              this.nextStage(title);
              end = titleEnd;
            }
          }
        }
        if (!end)
          end = lineEnd(content2, this.pos);
        return end > 0 && end < content2.length ? end : -1;
      } else {
        return lineEnd(content2, this.pos);
      }
    }
  }
}
function lineEnd(text, pos) {
  for (;pos < text.length; pos++) {
    let next = text.charCodeAt(pos);
    if (next == 10)
      break;
    if (!space3(next))
      return -1;
  }
  return pos;
}

class SetextHeadingParser {
  nextLine(cx, line, leaf) {
    let underline2 = line.depth < cx.stack.length ? -1 : isSetextUnderline(line);
    let next = line.next;
    if (underline2 < 0)
      return false;
    let underlineMark = elt(Type.HeaderMark, cx.lineStart + line.pos, cx.lineStart + underline2);
    cx.nextLine();
    cx.addLeafElement(leaf, elt(next == 61 ? Type.SetextHeading1 : Type.SetextHeading2, leaf.start, cx.prevLineEnd(), [
      ...cx.parser.parseInline(leaf.content, leaf.start),
      underlineMark
    ]));
    return true;
  }
  finish() {
    return false;
  }
}
var DefaultLeafBlocks = {
  LinkReference(_, leaf) {
    return leaf.content.charCodeAt(0) == 91 ? new LinkReferenceParser(leaf) : null;
  },
  SetextHeading() {
    return new SetextHeadingParser;
  }
};
var DefaultEndLeaf = [
  (_, line) => isAtxHeading(line) >= 0,
  (_, line) => isFencedCode(line) >= 0,
  (_, line) => isBlockquote(line) >= 0,
  (p, line) => isBulletList(line, p, true) >= 0,
  (p, line) => isOrderedList(line, p, true) >= 0,
  (p, line) => isHorizontalRule(line, p, true) >= 0,
  (p, line) => isHTMLBlock(line, p, true) >= 0
];
var scanLineResult = { text: "", end: 0 };

class BlockContext {
  constructor(parser5, input, fragments, ranges) {
    this.parser = parser5;
    this.input = input;
    this.ranges = ranges;
    this.line = new Line2;
    this.atEnd = false;
    this.reusePlaceholders = new Map;
    this.stoppedAt = null;
    this.rangeI = 0;
    this.to = ranges[ranges.length - 1].to;
    this.lineStart = this.absoluteLineStart = this.absoluteLineEnd = ranges[0].from;
    this.block = CompositeBlock.create(Type.Document, 0, this.lineStart, 0, 0);
    this.stack = [this.block];
    this.fragments = fragments.length ? new FragmentCursor3(fragments, input) : null;
    this.readLine();
  }
  get parsedPos() {
    return this.absoluteLineStart;
  }
  advance() {
    if (this.stoppedAt != null && this.absoluteLineStart > this.stoppedAt)
      return this.finish();
    let { line } = this;
    for (;; ) {
      for (let markI = 0;; ) {
        let next = line.depth < this.stack.length ? this.stack[this.stack.length - 1] : null;
        while (markI < line.markers.length && (!next || line.markers[markI].from < next.end)) {
          let mark = line.markers[markI++];
          this.addNode(mark.type, mark.from, mark.to);
        }
        if (!next)
          break;
        this.finishContext();
      }
      if (line.pos < line.text.length)
        break;
      if (!this.nextLine())
        return this.finish();
    }
    if (this.fragments && this.reuseFragment(line.basePos))
      return null;
    start:
      for (;; ) {
        for (let type of this.parser.blockParsers)
          if (type) {
            let result = type(this, line);
            if (result != false) {
              if (result == true)
                return null;
              line.forward();
              continue start;
            }
          }
        break;
      }
    let leaf = new LeafBlock(this.lineStart + line.pos, line.text.slice(line.pos));
    for (let parse of this.parser.leafBlockParsers)
      if (parse) {
        let parser5 = parse(this, leaf);
        if (parser5)
          leaf.parsers.push(parser5);
      }
    lines:
      while (this.nextLine()) {
        if (line.pos == line.text.length)
          break;
        if (line.indent < line.baseIndent + 4) {
          for (let stop of this.parser.endLeafBlock)
            if (stop(this, line, leaf))
              break lines;
        }
        for (let parser5 of leaf.parsers)
          if (parser5.nextLine(this, line, leaf))
            return null;
        leaf.content += `
` + line.scrub();
        for (let m of line.markers)
          leaf.marks.push(m);
      }
    this.finishLeaf(leaf);
    return null;
  }
  stopAt(pos) {
    if (this.stoppedAt != null && this.stoppedAt < pos)
      throw new RangeError("Can't move stoppedAt forward");
    this.stoppedAt = pos;
  }
  reuseFragment(start) {
    if (!this.fragments.moveTo(this.absoluteLineStart + start, this.absoluteLineStart) || !this.fragments.matches(this.block.hash))
      return false;
    let taken = this.fragments.takeNodes(this);
    if (!taken)
      return false;
    this.absoluteLineStart += taken;
    this.lineStart = toRelative(this.absoluteLineStart, this.ranges);
    this.moveRangeI();
    if (this.absoluteLineStart < this.to) {
      this.lineStart++;
      this.absoluteLineStart++;
      this.readLine();
    } else {
      this.atEnd = true;
      this.readLine();
    }
    return true;
  }
  get depth() {
    return this.stack.length;
  }
  parentType(depth = this.depth - 1) {
    return this.parser.nodeSet.types[this.stack[depth].type];
  }
  nextLine() {
    this.lineStart += this.line.text.length;
    if (this.absoluteLineEnd >= this.to) {
      this.absoluteLineStart = this.absoluteLineEnd;
      this.atEnd = true;
      this.readLine();
      return false;
    } else {
      this.lineStart++;
      this.absoluteLineStart = this.absoluteLineEnd + 1;
      this.moveRangeI();
      this.readLine();
      return true;
    }
  }
  peekLine() {
    return this.scanLine(this.absoluteLineEnd + 1).text;
  }
  moveRangeI() {
    while (this.rangeI < this.ranges.length - 1 && this.absoluteLineStart >= this.ranges[this.rangeI].to) {
      this.rangeI++;
      this.absoluteLineStart = Math.max(this.absoluteLineStart, this.ranges[this.rangeI].from);
    }
  }
  scanLine(start) {
    let r = scanLineResult;
    r.end = start;
    if (start >= this.to) {
      r.text = "";
    } else {
      r.text = this.lineChunkAt(start);
      r.end += r.text.length;
      if (this.ranges.length > 1) {
        let textOffset = this.absoluteLineStart, rangeI = this.rangeI;
        while (this.ranges[rangeI].to < r.end) {
          rangeI++;
          let nextFrom = this.ranges[rangeI].from;
          let after = this.lineChunkAt(nextFrom);
          r.end = nextFrom + after.length;
          r.text = r.text.slice(0, this.ranges[rangeI - 1].to - textOffset) + after;
          textOffset = r.end - r.text.length;
        }
      }
    }
    return r;
  }
  readLine() {
    let { line } = this, { text, end } = this.scanLine(this.absoluteLineStart);
    this.absoluteLineEnd = end;
    line.reset(text);
    for (;line.depth < this.stack.length; line.depth++) {
      let cx = this.stack[line.depth], handler = this.parser.skipContextMarkup[cx.type];
      if (!handler)
        throw new Error("Unhandled block context " + Type[cx.type]);
      let marks2 = this.line.markers.length;
      if (!handler(cx, this, line)) {
        if (this.line.markers.length > marks2)
          cx.end = this.line.markers[this.line.markers.length - 1].to;
        line.forward();
        break;
      }
      line.forward();
    }
  }
  lineChunkAt(pos) {
    let next = this.input.chunk(pos), text;
    if (!this.input.lineChunks) {
      let eol = next.indexOf(`
`);
      text = eol < 0 ? next : next.slice(0, eol);
    } else {
      text = next == `
` ? "" : next;
    }
    return pos + text.length > this.to ? text.slice(0, this.to - pos) : text;
  }
  prevLineEnd() {
    return this.atEnd ? this.lineStart : this.lineStart - 1;
  }
  startContext(type, start, value = 0) {
    this.block = CompositeBlock.create(type, value, this.lineStart + start, this.block.hash, this.lineStart + this.line.text.length);
    this.stack.push(this.block);
  }
  startComposite(type, start, value = 0) {
    this.startContext(this.parser.getNodeType(type), start, value);
  }
  addNode(block, from, to) {
    if (typeof block == "number")
      block = new Tree(this.parser.nodeSet.types[block], none4, none4, (to !== null && to !== undefined ? to : this.prevLineEnd()) - from);
    this.block.addChild(block, from - this.block.from);
  }
  addElement(elt) {
    this.block.addChild(elt.toTree(this.parser.nodeSet), elt.from - this.block.from);
  }
  addLeafElement(leaf, elt) {
    this.addNode(this.buffer.writeElements(injectMarks(elt.children, leaf.marks), -elt.from).finish(elt.type, elt.to - elt.from), elt.from);
  }
  finishContext() {
    let cx = this.stack.pop();
    let top2 = this.stack[this.stack.length - 1];
    top2.addChild(cx.toTree(this.parser.nodeSet), cx.from - top2.from);
    this.block = top2;
  }
  finish() {
    while (this.stack.length > 1)
      this.finishContext();
    return this.addGaps(this.block.toTree(this.parser.nodeSet, this.lineStart));
  }
  addGaps(tree) {
    return this.ranges.length > 1 ? injectGaps(this.ranges, 0, tree.topNode, this.ranges[0].from, this.reusePlaceholders) : tree;
  }
  finishLeaf(leaf) {
    for (let parser5 of leaf.parsers)
      if (parser5.finish(this, leaf))
        return;
    let inline = injectMarks(this.parser.parseInline(leaf.content, leaf.start), leaf.marks);
    this.addNode(this.buffer.writeElements(inline, -leaf.start).finish(Type.Paragraph, leaf.content.length), leaf.start);
  }
  elt(type, from, to, children) {
    if (typeof type == "string")
      return elt(this.parser.getNodeType(type), from, to, children);
    return new TreeElement(type, from);
  }
  get buffer() {
    return new Buffer(this.parser.nodeSet);
  }
}
function injectGaps(ranges, rangeI, tree, offset, dummies) {
  let rangeEnd2 = ranges[rangeI].to;
  let children = [], positions = [], start = tree.from + offset;
  function movePastNext(upto, inclusive) {
    while (inclusive ? upto >= rangeEnd2 : upto > rangeEnd2) {
      let size = ranges[rangeI + 1].from - rangeEnd2;
      offset += size;
      upto += size;
      rangeI++;
      rangeEnd2 = ranges[rangeI].to;
    }
  }
  for (let ch = tree.firstChild;ch; ch = ch.nextSibling) {
    movePastNext(ch.from + offset, true);
    let from = ch.from + offset, node, reuse = dummies.get(ch.tree);
    if (reuse) {
      node = reuse;
    } else if (ch.to + offset > rangeEnd2) {
      node = injectGaps(ranges, rangeI, ch, offset, dummies);
      movePastNext(ch.to + offset, false);
    } else {
      node = ch.toTree();
    }
    children.push(node);
    positions.push(from - start);
  }
  movePastNext(tree.to + offset, false);
  return new Tree(tree.type, children, positions, tree.to + offset - start, tree.tree ? tree.tree.propValues : undefined);
}

class MarkdownParser extends Parser {
  constructor(nodeSet, blockParsers, leafBlockParsers, blockNames, endLeafBlock, skipContextMarkup, inlineParsers, inlineNames, wrappers) {
    super();
    this.nodeSet = nodeSet;
    this.blockParsers = blockParsers;
    this.leafBlockParsers = leafBlockParsers;
    this.blockNames = blockNames;
    this.endLeafBlock = endLeafBlock;
    this.skipContextMarkup = skipContextMarkup;
    this.inlineParsers = inlineParsers;
    this.inlineNames = inlineNames;
    this.wrappers = wrappers;
    this.nodeTypes = Object.create(null);
    for (let t2 of nodeSet.types)
      this.nodeTypes[t2.name] = t2.id;
  }
  createParse(input, fragments, ranges) {
    let parse = new BlockContext(this, input, fragments, ranges);
    for (let w of this.wrappers)
      parse = w(parse, input, fragments, ranges);
    return parse;
  }
  configure(spec) {
    let config2 = resolveConfig(spec);
    if (!config2)
      return this;
    let { nodeSet, skipContextMarkup } = this;
    let blockParsers = this.blockParsers.slice(), leafBlockParsers = this.leafBlockParsers.slice(), blockNames = this.blockNames.slice(), inlineParsers = this.inlineParsers.slice(), inlineNames = this.inlineNames.slice(), endLeafBlock = this.endLeafBlock.slice(), wrappers = this.wrappers;
    if (nonEmpty(config2.defineNodes)) {
      skipContextMarkup = Object.assign({}, skipContextMarkup);
      let nodeTypes = nodeSet.types.slice(), styles;
      for (let s of config2.defineNodes) {
        let { name: name2, block, composite, style } = typeof s == "string" ? { name: s } : s;
        if (nodeTypes.some((t2) => t2.name == name2))
          continue;
        if (composite)
          skipContextMarkup[nodeTypes.length] = (bl, cx, line) => composite(cx, line, bl.value);
        let id2 = nodeTypes.length;
        let group = composite ? ["Block", "BlockContext"] : !block ? undefined : id2 >= Type.ATXHeading1 && id2 <= Type.SetextHeading2 ? ["Block", "LeafBlock", "Heading"] : ["Block", "LeafBlock"];
        nodeTypes.push(NodeType.define({
          id: id2,
          name: name2,
          props: group && [[NodeProp.group, group]]
        }));
        if (style) {
          if (!styles)
            styles = {};
          if (Array.isArray(style) || style instanceof Tag)
            styles[name2] = style;
          else
            Object.assign(styles, style);
        }
      }
      nodeSet = new NodeSet(nodeTypes);
      if (styles)
        nodeSet = nodeSet.extend(styleTags(styles));
    }
    if (nonEmpty(config2.props))
      nodeSet = nodeSet.extend(...config2.props);
    if (nonEmpty(config2.remove)) {
      for (let rm2 of config2.remove) {
        let block = this.blockNames.indexOf(rm2), inline = this.inlineNames.indexOf(rm2);
        if (block > -1)
          blockParsers[block] = leafBlockParsers[block] = undefined;
        if (inline > -1)
          inlineParsers[inline] = undefined;
      }
    }
    if (nonEmpty(config2.parseBlock)) {
      for (let spec2 of config2.parseBlock) {
        let found = blockNames.indexOf(spec2.name);
        if (found > -1) {
          blockParsers[found] = spec2.parse;
          leafBlockParsers[found] = spec2.leaf;
        } else {
          let pos = spec2.before ? findName(blockNames, spec2.before) : spec2.after ? findName(blockNames, spec2.after) + 1 : blockNames.length - 1;
          blockParsers.splice(pos, 0, spec2.parse);
          leafBlockParsers.splice(pos, 0, spec2.leaf);
          blockNames.splice(pos, 0, spec2.name);
        }
        if (spec2.endLeaf)
          endLeafBlock.push(spec2.endLeaf);
      }
    }
    if (nonEmpty(config2.parseInline)) {
      for (let spec2 of config2.parseInline) {
        let found = inlineNames.indexOf(spec2.name);
        if (found > -1) {
          inlineParsers[found] = spec2.parse;
        } else {
          let pos = spec2.before ? findName(inlineNames, spec2.before) : spec2.after ? findName(inlineNames, spec2.after) + 1 : inlineNames.length - 1;
          inlineParsers.splice(pos, 0, spec2.parse);
          inlineNames.splice(pos, 0, spec2.name);
        }
      }
    }
    if (config2.wrap)
      wrappers = wrappers.concat(config2.wrap);
    return new MarkdownParser(nodeSet, blockParsers, leafBlockParsers, blockNames, endLeafBlock, skipContextMarkup, inlineParsers, inlineNames, wrappers);
  }
  getNodeType(name2) {
    let found = this.nodeTypes[name2];
    if (found == null)
      throw new RangeError(`Unknown node type '${name2}'`);
    return found;
  }
  parseInline(text, offset) {
    let cx = new InlineContext(this, text, offset);
    outer:
      for (let pos = offset;pos < cx.end; ) {
        let next = cx.char(pos);
        for (let token of this.inlineParsers)
          if (token) {
            let result = token(cx, next, pos);
            if (result >= 0) {
              pos = result;
              continue outer;
            }
          }
        pos++;
      }
    return cx.resolveMarkers(0);
  }
}
function nonEmpty(a) {
  return a != null && a.length > 0;
}
function resolveConfig(spec) {
  if (!Array.isArray(spec))
    return spec;
  if (spec.length == 0)
    return null;
  let conf = resolveConfig(spec[0]);
  if (spec.length == 1)
    return conf;
  let rest = resolveConfig(spec.slice(1));
  if (!rest || !conf)
    return conf || rest;
  let conc2 = (a, b) => (a || none4).concat(b || none4);
  let wrapA = conf.wrap, wrapB = rest.wrap;
  return {
    props: conc2(conf.props, rest.props),
    defineNodes: conc2(conf.defineNodes, rest.defineNodes),
    parseBlock: conc2(conf.parseBlock, rest.parseBlock),
    parseInline: conc2(conf.parseInline, rest.parseInline),
    remove: conc2(conf.remove, rest.remove),
    wrap: !wrapA ? wrapB : !wrapB ? wrapA : (inner, input, fragments, ranges) => wrapA(wrapB(inner, input, fragments, ranges), input, fragments, ranges)
  };
}
function findName(names, name2) {
  let found = names.indexOf(name2);
  if (found < 0)
    throw new RangeError(`Position specified relative to unknown parser ${name2}`);
  return found;
}
var nodeTypes = [NodeType.none];
for (let i2 = 1, name2;name2 = Type[i2]; i2++) {
  nodeTypes[i2] = NodeType.define({
    id: i2,
    name: name2,
    props: i2 >= Type.Escape ? [] : [[NodeProp.group, i2 in DefaultSkipMarkup ? ["Block", "BlockContext"] : ["Block", "LeafBlock"]]],
    top: name2 == "Document"
  });
}
var none4 = [];

class Buffer {
  constructor(nodeSet) {
    this.nodeSet = nodeSet;
    this.content = [];
    this.nodes = [];
  }
  write(type, from, to, children = 0) {
    this.content.push(type, from, to, 4 + children * 4);
    return this;
  }
  writeElements(elts, offset = 0) {
    for (let e of elts)
      e.writeTo(this, offset);
    return this;
  }
  finish(type, length) {
    return Tree.build({
      buffer: this.content,
      nodeSet: this.nodeSet,
      reused: this.nodes,
      topID: type,
      length
    });
  }
}

class Element2 {
  constructor(type, from, to, children = none4) {
    this.type = type;
    this.from = from;
    this.to = to;
    this.children = children;
  }
  writeTo(buf, offset) {
    let startOff = buf.content.length;
    buf.writeElements(this.children, offset);
    buf.content.push(this.type, this.from + offset, this.to + offset, buf.content.length + 4 - startOff);
  }
  toTree(nodeSet) {
    return new Buffer(nodeSet).writeElements(this.children, -this.from).finish(this.type, this.to - this.from);
  }
}

class TreeElement {
  constructor(tree, from) {
    this.tree = tree;
    this.from = from;
  }
  get to() {
    return this.from + this.tree.length;
  }
  get type() {
    return this.tree.type.id;
  }
  get children() {
    return none4;
  }
  writeTo(buf, offset) {
    buf.nodes.push(this.tree);
    buf.content.push(buf.nodes.length - 1, this.from + offset, this.to + offset, -1);
  }
  toTree() {
    return this.tree;
  }
}
function elt(type, from, to, children) {
  return new Element2(type, from, to, children);
}
var EmphasisUnderscore = { resolve: "Emphasis", mark: "EmphasisMark" };
var EmphasisAsterisk = { resolve: "Emphasis", mark: "EmphasisMark" };
var LinkStart = {};
var ImageStart = {};

class InlineDelimiter {
  constructor(type, from, to, side) {
    this.type = type;
    this.from = from;
    this.to = to;
    this.side = side;
  }
}
var Escapable = "!\"#$%&'()*+,-./:;<=>?@[\\]^_`{|}~";
var Punctuation = /[!"#$%&'()*+,\-.\/:;<=>?@\[\\\]^_`{|}~\xA1\u2010-\u2027]/;
try {
  Punctuation = new RegExp("[\\p{S}|\\p{P}]", "u");
} catch (_) {}
var DefaultInline = {
  Escape(cx, next, start) {
    if (next != 92 || start == cx.end - 1)
      return -1;
    let escaped = cx.char(start + 1);
    for (let i2 = 0;i2 < Escapable.length; i2++)
      if (Escapable.charCodeAt(i2) == escaped)
        return cx.append(elt(Type.Escape, start, start + 2));
    return -1;
  },
  Entity(cx, next, start) {
    if (next != 38)
      return -1;
    let m = /^(?:#\d+|#x[a-f\d]+|\w+);/i.exec(cx.slice(start + 1, start + 31));
    return m ? cx.append(elt(Type.Entity, start, start + 1 + m[0].length)) : -1;
  },
  InlineCode(cx, next, start) {
    if (next != 96 || start && cx.char(start - 1) == 96)
      return -1;
    let pos = start + 1;
    while (pos < cx.end && cx.char(pos) == 96)
      pos++;
    let size = pos - start, curSize = 0;
    for (;pos < cx.end; pos++) {
      if (cx.char(pos) == 96) {
        curSize++;
        if (curSize == size && cx.char(pos + 1) != 96)
          return cx.append(elt(Type.InlineCode, start, pos + 1, [
            elt(Type.CodeMark, start, start + size),
            elt(Type.CodeMark, pos + 1 - size, pos + 1)
          ]));
      } else {
        curSize = 0;
      }
    }
    return -1;
  },
  HTMLTag(cx, next, start) {
    if (next != 60 || start == cx.end - 1)
      return -1;
    let after = cx.slice(start + 1, cx.end);
    let url = /^(?:[a-z][-\w+.]+:[^\s>]+|[a-z\d.!#$%&'*+/=?^_`{|}~-]+@[a-z\d](?:[a-z\d-]{0,61}[a-z\d])?(?:\.[a-z\d](?:[a-z\d-]{0,61}[a-z\d])?)*)>/i.exec(after);
    if (url) {
      return cx.append(elt(Type.Autolink, start, start + 1 + url[0].length, [
        elt(Type.LinkMark, start, start + 1),
        elt(Type.URL, start + 1, start + url[0].length),
        elt(Type.LinkMark, start + url[0].length, start + 1 + url[0].length)
      ]));
    }
    let comment2 = /^!--[^>](?:-[^-]|[^-])*?-->/i.exec(after);
    if (comment2)
      return cx.append(elt(Type.Comment, start, start + 1 + comment2[0].length));
    let procInst = /^\?[^]*?\?>/.exec(after);
    if (procInst)
      return cx.append(elt(Type.ProcessingInstruction, start, start + 1 + procInst[0].length));
    let m = /^(?:![A-Z][^]*?>|!\[CDATA\[[^]*?\]\]>|\/\s*[a-zA-Z][\w-]*\s*>|\s*[a-zA-Z][\w-]*(\s+[a-zA-Z:_][\w-.:]*(?:\s*=\s*(?:[^\s"'=<>`]+|'[^']*'|"[^"]*"))?)*\s*(\/\s*)?>)/.exec(after);
    if (!m)
      return -1;
    return cx.append(elt(Type.HTMLTag, start, start + 1 + m[0].length));
  },
  Emphasis(cx, next, start) {
    if (next != 95 && next != 42)
      return -1;
    let pos = start + 1;
    while (cx.char(pos) == next)
      pos++;
    let before = cx.slice(start - 1, start), after = cx.slice(pos, pos + 1);
    let pBefore = Punctuation.test(before), pAfter = Punctuation.test(after);
    let sBefore = /\s|^$/.test(before), sAfter = /\s|^$/.test(after);
    let leftFlanking = !sAfter && (!pAfter || sBefore || pBefore);
    let rightFlanking = !sBefore && (!pBefore || sAfter || pAfter);
    let canOpen = leftFlanking && (next == 42 || !rightFlanking || pBefore);
    let canClose = rightFlanking && (next == 42 || !leftFlanking || pAfter);
    return cx.append(new InlineDelimiter(next == 95 ? EmphasisUnderscore : EmphasisAsterisk, start, pos, (canOpen ? 1 : 0) | (canClose ? 2 : 0)));
  },
  HardBreak(cx, next, start) {
    if (next == 92 && cx.char(start + 1) == 10)
      return cx.append(elt(Type.HardBreak, start, start + 2));
    if (next == 32) {
      let pos = start + 1;
      while (cx.char(pos) == 32)
        pos++;
      if (cx.char(pos) == 10 && pos >= start + 2)
        return cx.append(elt(Type.HardBreak, start, pos + 1));
    }
    return -1;
  },
  Link(cx, next, start) {
    return next == 91 ? cx.append(new InlineDelimiter(LinkStart, start, start + 1, 1)) : -1;
  },
  Image(cx, next, start) {
    return next == 33 && cx.char(start + 1) == 91 ? cx.append(new InlineDelimiter(ImageStart, start, start + 2, 1)) : -1;
  },
  LinkEnd(cx, next, start) {
    if (next != 93)
      return -1;
    for (let i2 = cx.parts.length - 1;i2 >= 0; i2--) {
      let part = cx.parts[i2];
      if (part instanceof InlineDelimiter && (part.type == LinkStart || part.type == ImageStart)) {
        if (!part.side || cx.skipSpace(part.to) == start && !/[(\[]/.test(cx.slice(start + 1, start + 2))) {
          cx.parts[i2] = null;
          return -1;
        }
        let content2 = cx.takeContent(i2);
        let link = cx.parts[i2] = finishLink(cx, content2, part.type == LinkStart ? Type.Link : Type.Image, part.from, start + 1);
        if (part.type == LinkStart)
          for (let j = 0;j < i2; j++) {
            let p = cx.parts[j];
            if (p instanceof InlineDelimiter && p.type == LinkStart)
              p.side = 0;
          }
        return link.to;
      }
    }
    return -1;
  }
};
function finishLink(cx, content2, type, start, startPos) {
  let { text } = cx, next = cx.char(startPos), endPos = startPos;
  content2.unshift(elt(Type.LinkMark, start, start + (type == Type.Image ? 2 : 1)));
  content2.push(elt(Type.LinkMark, startPos - 1, startPos));
  if (next == 40) {
    let pos = cx.skipSpace(startPos + 1);
    let dest = parseURL(text, pos - cx.offset, cx.offset), title;
    if (dest) {
      pos = cx.skipSpace(dest.to);
      if (pos != dest.to) {
        title = parseLinkTitle(text, pos - cx.offset, cx.offset);
        if (title)
          pos = cx.skipSpace(title.to);
      }
    }
    if (cx.char(pos) == 41) {
      content2.push(elt(Type.LinkMark, startPos, startPos + 1));
      endPos = pos + 1;
      if (dest)
        content2.push(dest);
      if (title)
        content2.push(title);
      content2.push(elt(Type.LinkMark, pos, endPos));
    }
  } else if (next == 91) {
    let label = parseLinkLabel(text, startPos - cx.offset, cx.offset, false);
    if (label) {
      content2.push(label);
      endPos = label.to;
    }
  }
  return elt(type, start, endPos, content2);
}
function parseURL(text, start, offset) {
  let next = text.charCodeAt(start);
  if (next == 60) {
    for (let pos = start + 1;pos < text.length; pos++) {
      let ch = text.charCodeAt(pos);
      if (ch == 62)
        return elt(Type.URL, start + offset, pos + 1 + offset);
      if (ch == 60 || ch == 10)
        return false;
    }
    return null;
  } else {
    let depth = 0, pos = start;
    for (let escaped = false;pos < text.length; pos++) {
      let ch = text.charCodeAt(pos);
      if (space3(ch)) {
        break;
      } else if (escaped) {
        escaped = false;
      } else if (ch == 40) {
        depth++;
      } else if (ch == 41) {
        if (!depth)
          break;
        depth--;
      } else if (ch == 92) {
        escaped = true;
      }
    }
    return pos > start ? elt(Type.URL, start + offset, pos + offset) : pos == text.length ? null : false;
  }
}
function parseLinkTitle(text, start, offset) {
  let next = text.charCodeAt(start);
  if (next != 39 && next != 34 && next != 40)
    return false;
  let end = next == 40 ? 41 : next;
  for (let pos = start + 1, escaped = false;pos < text.length; pos++) {
    let ch = text.charCodeAt(pos);
    if (escaped)
      escaped = false;
    else if (ch == end)
      return elt(Type.LinkTitle, start + offset, pos + 1 + offset);
    else if (ch == 92)
      escaped = true;
  }
  return null;
}
function parseLinkLabel(text, start, offset, requireNonWS) {
  for (let escaped = false, pos = start + 1, end = Math.min(text.length, pos + 999);pos < end; pos++) {
    let ch = text.charCodeAt(pos);
    if (escaped)
      escaped = false;
    else if (ch == 93)
      return requireNonWS ? false : elt(Type.LinkLabel, start + offset, pos + 1 + offset);
    else {
      if (requireNonWS && !space3(ch))
        requireNonWS = false;
      if (ch == 91)
        return false;
      else if (ch == 92)
        escaped = true;
    }
  }
  return null;
}

class InlineContext {
  constructor(parser5, text, offset) {
    this.parser = parser5;
    this.text = text;
    this.offset = offset;
    this.parts = [];
  }
  char(pos) {
    return pos >= this.end ? -1 : this.text.charCodeAt(pos - this.offset);
  }
  get end() {
    return this.offset + this.text.length;
  }
  slice(from, to) {
    return this.text.slice(from - this.offset, to - this.offset);
  }
  append(elt2) {
    this.parts.push(elt2);
    return elt2.to;
  }
  addDelimiter(type, from, to, open, close) {
    return this.append(new InlineDelimiter(type, from, to, (open ? 1 : 0) | (close ? 2 : 0)));
  }
  get hasOpenLink() {
    for (let i2 = this.parts.length - 1;i2 >= 0; i2--) {
      let part = this.parts[i2];
      if (part instanceof InlineDelimiter && (part.type == LinkStart || part.type == ImageStart))
        return true;
    }
    return false;
  }
  addElement(elt2) {
    return this.append(elt2);
  }
  resolveMarkers(from) {
    for (let i2 = from;i2 < this.parts.length; i2++) {
      let close = this.parts[i2];
      if (!(close instanceof InlineDelimiter && close.type.resolve && close.side & 2))
        continue;
      let emp = close.type == EmphasisUnderscore || close.type == EmphasisAsterisk;
      let closeSize = close.to - close.from;
      let open, j = i2 - 1;
      for (;j >= from; j--) {
        let part = this.parts[j];
        if (part instanceof InlineDelimiter && part.side & 1 && part.type == close.type && !(emp && (close.side & 1 || part.side & 2) && (part.to - part.from + closeSize) % 3 == 0 && ((part.to - part.from) % 3 || closeSize % 3))) {
          open = part;
          break;
        }
      }
      if (!open)
        continue;
      let type = close.type.resolve, content2 = [];
      let start = open.from, end = close.to;
      if (emp) {
        let size = Math.min(2, open.to - open.from, closeSize);
        start = open.to - size;
        end = close.from + size;
        type = size == 1 ? "Emphasis" : "StrongEmphasis";
      }
      if (open.type.mark)
        content2.push(this.elt(open.type.mark, start, open.to));
      for (let k = j + 1;k < i2; k++) {
        if (this.parts[k] instanceof Element2)
          content2.push(this.parts[k]);
        this.parts[k] = null;
      }
      if (close.type.mark)
        content2.push(this.elt(close.type.mark, close.from, end));
      let element = this.elt(type, start, end, content2);
      this.parts[j] = emp && open.from != start ? new InlineDelimiter(open.type, open.from, start, open.side) : null;
      let keep = this.parts[i2] = emp && close.to != end ? new InlineDelimiter(close.type, end, close.to, close.side) : null;
      if (keep)
        this.parts.splice(i2, 0, element);
      else
        this.parts[i2] = element;
    }
    let result = [];
    for (let i2 = from;i2 < this.parts.length; i2++) {
      let part = this.parts[i2];
      if (part instanceof Element2)
        result.push(part);
    }
    return result;
  }
  findOpeningDelimiter(type) {
    for (let i2 = this.parts.length - 1;i2 >= 0; i2--) {
      let part = this.parts[i2];
      if (part instanceof InlineDelimiter && part.type == type && part.side & 1)
        return i2;
    }
    return null;
  }
  takeContent(startIndex) {
    let content2 = this.resolveMarkers(startIndex);
    this.parts.length = startIndex;
    return content2;
  }
  getDelimiterAt(index) {
    let part = this.parts[index];
    return part instanceof InlineDelimiter ? part : null;
  }
  skipSpace(from) {
    return skipSpace(this.text, from - this.offset) + this.offset;
  }
  elt(type, from, to, children) {
    if (typeof type == "string")
      return elt(this.parser.getNodeType(type), from, to, children);
    return new TreeElement(type, from);
  }
}
InlineContext.linkStart = LinkStart;
InlineContext.imageStart = ImageStart;
function injectMarks(elements, marks2) {
  if (!marks2.length)
    return elements;
  if (!elements.length)
    return marks2;
  let elts = elements.slice(), eI = 0;
  for (let mark of marks2) {
    while (eI < elts.length && elts[eI].to < mark.to)
      eI++;
    if (eI < elts.length && elts[eI].from < mark.from) {
      let e = elts[eI];
      if (e instanceof Element2)
        elts[eI] = new Element2(e.type, e.from, e.to, injectMarks(e.children, [mark]));
    } else {
      elts.splice(eI++, 0, mark);
    }
  }
  return elts;
}
var NotLast = [Type.CodeBlock, Type.ListItem, Type.OrderedList, Type.BulletList];

class FragmentCursor3 {
  constructor(fragments, input) {
    this.fragments = fragments;
    this.input = input;
    this.i = 0;
    this.fragment = null;
    this.fragmentEnd = -1;
    this.cursor = null;
    if (fragments.length)
      this.fragment = fragments[this.i++];
  }
  nextFragment() {
    this.fragment = this.i < this.fragments.length ? this.fragments[this.i++] : null;
    this.cursor = null;
    this.fragmentEnd = -1;
  }
  moveTo(pos, lineStart) {
    while (this.fragment && this.fragment.to <= pos)
      this.nextFragment();
    if (!this.fragment || this.fragment.from > (pos ? pos - 1 : 0))
      return false;
    if (this.fragmentEnd < 0) {
      let end = this.fragment.to;
      while (end > 0 && this.input.read(end - 1, end) != `
`)
        end--;
      this.fragmentEnd = end ? end - 1 : 0;
    }
    let c = this.cursor;
    if (!c) {
      c = this.cursor = this.fragment.tree.cursor();
      c.firstChild();
    }
    let rPos = pos + this.fragment.offset;
    while (c.to <= rPos)
      if (!c.parent())
        return false;
    for (;; ) {
      if (c.from >= rPos)
        return this.fragment.from <= lineStart;
      if (!c.childAfter(rPos))
        return false;
    }
  }
  matches(hash2) {
    let tree = this.cursor.tree;
    return tree && tree.prop(NodeProp.contextHash) == hash2;
  }
  takeNodes(cx) {
    let cur2 = this.cursor, off = this.fragment.offset, fragEnd = this.fragmentEnd - (this.fragment.openEnd ? 1 : 0);
    let start = cx.absoluteLineStart, end = start, blockI = cx.block.children.length;
    let prevEnd = end, prevI = blockI;
    for (;; ) {
      if (cur2.to - off > fragEnd) {
        if (cur2.type.isAnonymous && cur2.firstChild())
          continue;
        break;
      }
      let pos = toRelative(cur2.from - off, cx.ranges);
      if (cur2.to - off <= cx.ranges[cx.rangeI].to) {
        cx.addNode(cur2.tree, pos);
      } else {
        let dummy = new Tree(cx.parser.nodeSet.types[Type.Paragraph], [], [], 0, cx.block.hashProp);
        cx.reusePlaceholders.set(dummy, cur2.tree);
        cx.addNode(dummy, pos);
      }
      if (cur2.type.is("Block")) {
        if (NotLast.indexOf(cur2.type.id) < 0) {
          end = cur2.to - off;
          blockI = cx.block.children.length;
        } else {
          end = prevEnd;
          blockI = prevI;
          prevEnd = cur2.to - off;
          prevI = cx.block.children.length;
        }
      }
      if (!cur2.nextSibling())
        break;
    }
    while (cx.block.children.length > blockI) {
      cx.block.children.pop();
      cx.block.positions.pop();
    }
    return end - start;
  }
}
function toRelative(abs, ranges) {
  let pos = abs;
  for (let i2 = 1;i2 < ranges.length; i2++) {
    let gapFrom = ranges[i2 - 1].to, gapTo = ranges[i2].from;
    if (gapFrom < abs)
      pos -= gapTo - gapFrom;
  }
  return pos;
}
var markdownHighlighting = styleTags({
  "Blockquote/...": tags.quote,
  HorizontalRule: tags.contentSeparator,
  "ATXHeading1/... SetextHeading1/...": tags.heading1,
  "ATXHeading2/... SetextHeading2/...": tags.heading2,
  "ATXHeading3/...": tags.heading3,
  "ATXHeading4/...": tags.heading4,
  "ATXHeading5/...": tags.heading5,
  "ATXHeading6/...": tags.heading6,
  "Comment CommentBlock": tags.comment,
  Escape: tags.escape,
  Entity: tags.character,
  "Emphasis/...": tags.emphasis,
  "StrongEmphasis/...": tags.strong,
  "Link/... Image/...": tags.link,
  "OrderedList/... BulletList/...": tags.list,
  "BlockQuote/...": tags.quote,
  "InlineCode CodeText": tags.monospace,
  "URL Autolink": tags.url,
  "HeaderMark HardBreak QuoteMark ListMark LinkMark EmphasisMark CodeMark": tags.processingInstruction,
  "CodeInfo LinkLabel": tags.labelName,
  LinkTitle: tags.string,
  Paragraph: tags.content
});
var parser5 = new MarkdownParser(new NodeSet(nodeTypes).extend(markdownHighlighting), Object.keys(DefaultBlockParsers).map((n) => DefaultBlockParsers[n]), Object.keys(DefaultBlockParsers).map((n) => DefaultLeafBlocks[n]), Object.keys(DefaultBlockParsers), DefaultEndLeaf, DefaultSkipMarkup, Object.keys(DefaultInline).map((n) => DefaultInline[n]), Object.keys(DefaultInline), []);
function leftOverSpace(node, from, to) {
  let ranges = [];
  for (let n = node.firstChild, pos = from;; n = n.nextSibling) {
    let nextPos = n ? n.from : to;
    if (nextPos > pos)
      ranges.push({ from: pos, to: nextPos });
    if (!n)
      break;
    pos = n.to;
  }
  return ranges;
}
function parseCode(config2) {
  let { codeParser, htmlParser } = config2;
  let wrap = parseMixed((node, input) => {
    let id2 = node.type.id;
    if (codeParser && (id2 == Type.CodeBlock || id2 == Type.FencedCode)) {
      let info = "";
      if (id2 == Type.FencedCode) {
        let infoNode = node.node.getChild(Type.CodeInfo);
        if (infoNode)
          info = input.read(infoNode.from, infoNode.to);
      }
      let parser6 = codeParser(info);
      if (parser6)
        return { parser: parser6, overlay: (node2) => node2.type.id == Type.CodeText, bracketed: id2 == Type.FencedCode };
    } else if (htmlParser && (id2 == Type.HTMLBlock || id2 == Type.HTMLTag || id2 == Type.CommentBlock)) {
      return { parser: htmlParser, overlay: leftOverSpace(node.node, node.from, node.to) };
    }
    return null;
  });
  return { wrap };
}
var StrikethroughDelim = { resolve: "Strikethrough", mark: "StrikethroughMark" };
var Strikethrough = {
  defineNodes: [{
    name: "Strikethrough",
    style: { "Strikethrough/...": tags.strikethrough }
  }, {
    name: "StrikethroughMark",
    style: tags.processingInstruction
  }],
  parseInline: [{
    name: "Strikethrough",
    parse(cx, next, pos) {
      if (next != 126 || cx.char(pos + 1) != 126 || cx.char(pos + 2) == 126)
        return -1;
      let before = cx.slice(pos - 1, pos), after = cx.slice(pos + 2, pos + 3);
      let sBefore = /\s|^$/.test(before), sAfter = /\s|^$/.test(after);
      let pBefore = Punctuation.test(before), pAfter = Punctuation.test(after);
      return cx.addDelimiter(StrikethroughDelim, pos, pos + 2, !sAfter && (!pAfter || sBefore || pBefore), !sBefore && (!pBefore || sAfter || pAfter));
    },
    after: "Emphasis"
  }]
};
function parseRow(cx, line, startI = 0, elts, offset = 0) {
  let count = 0, first = true, cellStart = -1, cellEnd = -1, esc = false;
  let parseCell = () => {
    elts.push(cx.elt("TableCell", offset + cellStart, offset + cellEnd, cx.parser.parseInline(line.slice(cellStart, cellEnd), offset + cellStart)));
  };
  for (let i2 = startI;i2 < line.length; i2++) {
    let next = line.charCodeAt(i2);
    if (next == 124 && !esc) {
      if (!first || cellStart > -1)
        count++;
      first = false;
      if (elts) {
        if (cellStart > -1)
          parseCell();
        elts.push(cx.elt("TableDelimiter", i2 + offset, i2 + offset + 1));
      }
      cellStart = cellEnd = -1;
    } else if (esc || next != 32 && next != 9) {
      if (cellStart < 0)
        cellStart = i2;
      cellEnd = i2 + 1;
    }
    esc = !esc && next == 92;
  }
  if (cellStart > -1) {
    count++;
    if (elts)
      parseCell();
  }
  return count;
}
function hasPipe(str, start) {
  for (let i2 = start;i2 < str.length; i2++) {
    let next = str.charCodeAt(i2);
    if (next == 124)
      return true;
    if (next == 92)
      i2++;
  }
  return false;
}
var delimiterLine = /^\|?(\s*:?-+:?\s*\|)+(\s*:?-+:?\s*)?$/;

class TableParser {
  constructor() {
    this.rows = null;
  }
  nextLine(cx, line, leaf) {
    if (this.rows == null) {
      this.rows = false;
      let lineText;
      if ((line.next == 45 || line.next == 58 || line.next == 124) && delimiterLine.test(lineText = line.text.slice(line.pos))) {
        let firstRow = [], firstCount = parseRow(cx, leaf.content, 0, firstRow, leaf.start);
        if (firstCount == parseRow(cx, lineText, line.pos))
          this.rows = [
            cx.elt("TableHeader", leaf.start, leaf.start + leaf.content.length, firstRow),
            cx.elt("TableDelimiter", cx.lineStart + line.pos, cx.lineStart + line.text.length)
          ];
      }
    } else if (this.rows) {
      let content2 = [];
      parseRow(cx, line.text, line.pos, content2, cx.lineStart);
      this.rows.push(cx.elt("TableRow", cx.lineStart + line.pos, cx.lineStart + line.text.length, content2));
    }
    return false;
  }
  finish(cx, leaf) {
    if (!this.rows)
      return false;
    cx.addLeafElement(leaf, cx.elt("Table", leaf.start, leaf.start + leaf.content.length, this.rows));
    return true;
  }
}
var Table = {
  defineNodes: [
    { name: "Table", block: true },
    { name: "TableHeader", style: { "TableHeader/...": tags.heading } },
    "TableRow",
    { name: "TableCell", style: tags.content },
    { name: "TableDelimiter", style: tags.processingInstruction }
  ],
  parseBlock: [{
    name: "Table",
    leaf(_, leaf) {
      return hasPipe(leaf.content, 0) ? new TableParser : null;
    },
    endLeaf(cx, line, leaf) {
      if (leaf.parsers.some((p) => p instanceof TableParser) || !hasPipe(line.text, line.basePos))
        return false;
      let next = cx.peekLine();
      return delimiterLine.test(next) && parseRow(cx, line.text, line.basePos) == parseRow(cx, next, line.basePos);
    },
    before: "SetextHeading"
  }]
};

class TaskParser {
  nextLine() {
    return false;
  }
  finish(cx, leaf) {
    cx.addLeafElement(leaf, cx.elt("Task", leaf.start, leaf.start + leaf.content.length, [
      cx.elt("TaskMarker", leaf.start, leaf.start + 3),
      ...cx.parser.parseInline(leaf.content.slice(3), leaf.start + 3)
    ]));
    return true;
  }
}
var TaskList = {
  defineNodes: [
    { name: "Task", block: true, style: tags.list },
    { name: "TaskMarker", style: tags.atom }
  ],
  parseBlock: [{
    name: "TaskList",
    leaf(cx, leaf) {
      return /^\[[ xX]\][ \t]/.test(leaf.content) && cx.parentType().name == "ListItem" ? new TaskParser : null;
    },
    after: "SetextHeading"
  }]
};
var autolinkRE = /(www\.)|(https?:\/\/)|([\w.+-]{1,100}@)|(mailto:|xmpp:)/gy;
var urlRE = /[\w-]+(\.[\w-]+)+(\/[^\s<]*)?/gy;
var lastTwoDomainWords = /[\w-]+\.[\w-]+($|\/)/;
var emailRE = /[\w.+-]+@[\w-]+(\.[\w.-]+)+/gy;
var xmppResourceRE = /\/[a-zA-Z\d@.]+/gy;
function count(str, from, to, ch) {
  let result = 0;
  for (let i2 = from;i2 < to; i2++)
    if (str[i2] == ch)
      result++;
  return result;
}
function autolinkURLEnd(text, from) {
  urlRE.lastIndex = from;
  let m = urlRE.exec(text);
  if (!m || lastTwoDomainWords.exec(m[0])[0].indexOf("_") > -1)
    return -1;
  let end = from + m[0].length;
  for (;; ) {
    let last = text[end - 1], m2;
    if (/[?!.,:*_~]/.test(last) || last == ")" && count(text, from, end, ")") > count(text, from, end, "("))
      end--;
    else if (last == ";" && (m2 = /&(?:#\d+|#x[a-f\d]+|\w+);$/.exec(text.slice(from, end))))
      end = from + m2.index;
    else
      break;
  }
  return end;
}
function autolinkEmailEnd(text, from) {
  emailRE.lastIndex = from;
  let m = emailRE.exec(text);
  if (!m)
    return -1;
  let last = m[0][m[0].length - 1];
  return last == "_" || last == "-" ? -1 : from + m[0].length - (last == "." ? 1 : 0);
}
var Autolink = {
  parseInline: [{
    name: "Autolink",
    parse(cx, next, absPos) {
      let pos = absPos - cx.offset;
      if (pos && /\w/.test(cx.text[pos - 1]))
        return -1;
      autolinkRE.lastIndex = pos;
      let m = autolinkRE.exec(cx.text), end = -1;
      if (!m)
        return -1;
      if (m[1] || m[2]) {
        end = autolinkURLEnd(cx.text, pos + m[0].length);
        if (end > -1 && cx.hasOpenLink) {
          let noBracket = /([^\[\]]|\[[^\]]*\])*/.exec(cx.text.slice(pos, end));
          end = pos + noBracket[0].length;
        }
      } else if (m[3]) {
        end = autolinkEmailEnd(cx.text, pos);
      } else {
        end = autolinkEmailEnd(cx.text, pos + m[0].length);
        if (end > -1 && m[0] == "xmpp:") {
          xmppResourceRE.lastIndex = end;
          m = xmppResourceRE.exec(cx.text);
          if (m)
            end = m.index + m[0].length;
        }
      }
      if (end < 0)
        return -1;
      cx.addElement(cx.elt("URL", absPos, end + cx.offset));
      return end + cx.offset;
    }
  }]
};
var GFM = [Table, TaskList, Strikethrough, Autolink];
function parseSubSuper(ch, node, mark) {
  return (cx, next, pos) => {
    if (next != ch || cx.char(pos + 1) == ch)
      return -1;
    let elts = [cx.elt(mark, pos, pos + 1)];
    for (let i2 = pos + 1;i2 < cx.end; i2++) {
      let next2 = cx.char(i2);
      if (next2 == ch)
        return cx.addElement(cx.elt(node, pos, i2 + 1, elts.concat(cx.elt(mark, i2, i2 + 1))));
      if (next2 == 92)
        elts.push(cx.elt("Escape", i2, i2++ + 2));
      if (space3(next2))
        break;
    }
    return -1;
  };
}
var Superscript = {
  defineNodes: [
    { name: "Superscript", style: tags.special(tags.content) },
    { name: "SuperscriptMark", style: tags.processingInstruction }
  ],
  parseInline: [{
    name: "Superscript",
    parse: parseSubSuper(94, "Superscript", "SuperscriptMark")
  }]
};
var Subscript = {
  defineNodes: [
    { name: "Subscript", style: tags.special(tags.content) },
    { name: "SubscriptMark", style: tags.processingInstruction }
  ],
  parseInline: [{
    name: "Subscript",
    parse: parseSubSuper(126, "Subscript", "SubscriptMark")
  }]
};
var Emoji = {
  defineNodes: [{ name: "Emoji", style: tags.character }],
  parseInline: [{
    name: "Emoji",
    parse(cx, next, pos) {
      let match;
      if (next != 58 || !(match = /^[a-zA-Z_0-9]+:/.exec(cx.slice(pos + 1, cx.end))))
        return -1;
      return cx.addElement(cx.elt("Emoji", pos, pos + 1 + match[0].length));
    }
  }]
};

// node_modules/@codemirror/lang-markdown/dist/index.js
var data = /* @__PURE__ */ defineLanguageFacet({ commentTokens: { block: { open: "<!--", close: "-->" } } });
var headingProp = /* @__PURE__ */ new NodeProp;
var commonmark = /* @__PURE__ */ parser5.configure({
  props: [
    /* @__PURE__ */ foldNodeProp.add((type) => {
      return !type.is("Block") || type.is("Document") || isHeading(type) != null || isList(type) ? undefined : (tree, state) => ({ from: state.doc.lineAt(tree.from).to, to: tree.to });
    }),
    /* @__PURE__ */ headingProp.add(isHeading),
    /* @__PURE__ */ indentNodeProp.add({
      Document: () => null
    }),
    /* @__PURE__ */ languageDataProp.add({
      Document: data
    })
  ]
});
function isHeading(type) {
  let match = /^(?:ATX|Setext)Heading(\d)$/.exec(type.name);
  return match ? +match[1] : undefined;
}
function isList(type) {
  return type.name == "OrderedList" || type.name == "BulletList";
}
function findSectionEnd(headerNode, level) {
  let last = headerNode;
  for (;; ) {
    let next = last.nextSibling, heading2;
    if (!next || (heading2 = isHeading(next.type)) != null && heading2 <= level)
      break;
    last = next;
  }
  return last.to;
}
var headerIndent = /* @__PURE__ */ foldService.of((state, start, end) => {
  for (let node = syntaxTree(state).resolveInner(end, -1);node; node = node.parent) {
    if (node.from < start)
      break;
    let heading2 = node.type.prop(headingProp);
    if (heading2 == null)
      continue;
    let upto = findSectionEnd(node, heading2);
    if (upto > end)
      return { from: end, to: upto };
  }
  return null;
});
function mkLang(parser6) {
  return new Language(data, parser6, [], "markdown");
}
var commonmarkLanguage = /* @__PURE__ */ mkLang(commonmark);
var extended = /* @__PURE__ */ commonmark.configure([GFM, Subscript, Superscript, Emoji, {
  props: [
    /* @__PURE__ */ foldNodeProp.add({
      Table: (tree, state) => ({ from: state.doc.lineAt(tree.from).to, to: tree.to })
    })
  ]
}]);
var markdownLanguage = /* @__PURE__ */ mkLang(extended);
function getCodeParser(languages, defaultLanguage) {
  return (info) => {
    if (info && languages) {
      let found = null;
      info = /\S*/.exec(info)[0];
      if (typeof languages == "function")
        found = languages(info);
      else
        found = LanguageDescription.matchLanguageName(languages, info, true);
      if (found instanceof LanguageDescription)
        return found.support ? found.support.language.parser : ParseContext.getSkippingParser(found.load());
      else if (found)
        return found.parser;
    }
    return defaultLanguage ? defaultLanguage.parser : null;
  };
}

class Context {
  constructor(node, from, to, spaceBefore, spaceAfter, type, item) {
    this.node = node;
    this.from = from;
    this.to = to;
    this.spaceBefore = spaceBefore;
    this.spaceAfter = spaceAfter;
    this.type = type;
    this.item = item;
  }
  blank(maxWidth, trailing = true) {
    let result = this.spaceBefore + (this.node.name == "Blockquote" ? ">" : "");
    if (maxWidth != null) {
      while (result.length < maxWidth)
        result += " ";
      return result;
    } else {
      for (let i2 = this.to - this.from - result.length - this.spaceAfter.length;i2 > 0; i2--)
        result += " ";
      return result + (trailing ? this.spaceAfter : "");
    }
  }
  marker(doc2, add2) {
    let number2 = this.node.name == "OrderedList" ? String(+itemNumber(this.item, doc2)[2] + add2) : "";
    return this.spaceBefore + number2 + this.type + this.spaceAfter;
  }
}
function getContext(node, doc2) {
  let nodes = [], context = [];
  for (let cur2 = node;cur2; cur2 = cur2.parent) {
    if (cur2.name == "FencedCode")
      return context;
    if (cur2.name == "ListItem" || cur2.name == "Blockquote")
      nodes.push(cur2);
  }
  for (let i2 = nodes.length - 1;i2 >= 0; i2--) {
    let node2 = nodes[i2], match;
    let line = doc2.lineAt(node2.from), startPos = node2.from - line.from;
    if (node2.name == "Blockquote" && (match = /^ *>( ?)/.exec(line.text.slice(startPos)))) {
      context.push(new Context(node2, startPos, startPos + match[0].length, "", match[1], ">", null));
    } else if (node2.name == "ListItem" && node2.parent.name == "OrderedList" && (match = /^( *)\d+([.)])( *)/.exec(line.text.slice(startPos)))) {
      let after = match[3], len = match[0].length;
      if (after.length >= 4) {
        after = after.slice(0, after.length - 4);
        len -= 4;
      }
      context.push(new Context(node2.parent, startPos, startPos + len, match[1], after, match[2], node2));
    } else if (node2.name == "ListItem" && node2.parent.name == "BulletList" && (match = /^( *)([-+*])( {1,4}\[[ xX]\])?( +)/.exec(line.text.slice(startPos)))) {
      let after = match[4], len = match[0].length;
      if (after.length > 4) {
        after = after.slice(0, after.length - 4);
        len -= 4;
      }
      let type = match[2];
      if (match[3])
        type += match[3].replace(/[xX]/, " ");
      context.push(new Context(node2.parent, startPos, startPos + len, match[1], after, type, node2));
    }
  }
  return context;
}
function itemNumber(item, doc2) {
  return /^(\s*)(\d+)(?=[.)])/.exec(doc2.sliceString(item.from, item.from + 10));
}
function renumberList(after, doc2, changes, offset = 0) {
  for (let prev = -1, node = after;; ) {
    if (node.name == "ListItem") {
      let m = itemNumber(node, doc2);
      let number2 = +m[2];
      if (prev >= 0) {
        if (number2 != prev + 1)
          return;
        changes.push({ from: node.from + m[1].length, to: node.from + m[0].length, insert: String(prev + 2 + offset) });
      }
      prev = number2;
    }
    let next = node.nextSibling;
    if (!next)
      break;
    node = next;
  }
}
function normalizeIndent(content2, state) {
  let blank = /^[ \t]*/.exec(content2)[0].length;
  if (!blank || state.facet(indentUnit) != "\t")
    return content2;
  let col = countColumn(content2, 4, blank);
  let space4 = "";
  for (let i2 = col;i2 > 0; ) {
    if (i2 >= 4) {
      space4 += "\t";
      i2 -= 4;
    } else {
      space4 += " ";
      i2--;
    }
  }
  return space4 + content2.slice(blank);
}
var insertNewlineContinueMarkupCommand = (config2 = {}) => ({ state, dispatch }) => {
  let tree = syntaxTree(state), { doc: doc2 } = state;
  let dont = null, changes = state.changeByRange((range) => {
    if (!range.empty || !markdownLanguage.isActiveAt(state, range.from, -1) && !markdownLanguage.isActiveAt(state, range.from, 1))
      return dont = { range };
    let pos = range.from, line = doc2.lineAt(pos);
    let context = getContext(tree.resolveInner(pos, -1), doc2);
    while (context.length && context[context.length - 1].from > pos - line.from)
      context.pop();
    if (!context.length)
      return dont = { range };
    let inner = context[context.length - 1];
    if (inner.to - inner.spaceAfter.length > pos - line.from)
      return dont = { range };
    let emptyLine = pos >= inner.to - inner.spaceAfter.length && !/\S/.test(line.text.slice(inner.to));
    if (inner.item && emptyLine) {
      let first = inner.node.firstChild, second = inner.node.getChild("ListItem", "ListItem");
      if (first.to >= pos || second && second.to < pos || line.from > 0 && !/[^\s>]/.test(doc2.lineAt(line.from - 1).text) || config2.nonTightLists === false) {
        let next = context.length > 1 ? context[context.length - 2] : null;
        let delTo, insert3 = "";
        if (next && next.item) {
          delTo = line.from + next.from;
          insert3 = next.marker(doc2, 1);
        } else {
          delTo = line.from + (next ? next.to : 0);
        }
        let changes3 = [{ from: delTo, to: pos, insert: insert3 }];
        if (inner.node.name == "OrderedList")
          renumberList(inner.item, doc2, changes3, -2);
        if (next && next.node.name == "OrderedList")
          renumberList(next.item, doc2, changes3);
        return { range: EditorSelection.cursor(delTo + insert3.length), changes: changes3 };
      } else {
        let insert3 = blankLine(context, state, line);
        return {
          range: EditorSelection.cursor(pos + insert3.length + 1),
          changes: { from: line.from, insert: insert3 + state.lineBreak }
        };
      }
    }
    if (inner.node.name == "Blockquote" && emptyLine && line.from) {
      let prevLine = doc2.lineAt(line.from - 1), quoted = />\s*$/.exec(prevLine.text);
      if (quoted && quoted.index == inner.from) {
        let changes3 = state.changes([
          { from: prevLine.from + quoted.index, to: prevLine.to },
          { from: line.from + inner.from, to: line.to }
        ]);
        return { range: range.map(changes3), changes: changes3 };
      }
    }
    let changes2 = [];
    if (inner.node.name == "OrderedList")
      renumberList(inner.item, doc2, changes2);
    let continued = inner.item && inner.item.from < line.from;
    let insert2 = "";
    if (!continued || /^[\s\d.)\-+*>]*/.exec(line.text)[0].length >= inner.to) {
      for (let i2 = 0, e = context.length - 1;i2 <= e; i2++) {
        insert2 += i2 == e && !continued ? context[i2].marker(doc2, 1) : context[i2].blank(i2 < e ? countColumn(line.text, 4, context[i2 + 1].from) - insert2.length : null);
      }
    }
    let from = pos;
    while (from > line.from && /\s/.test(line.text.charAt(from - line.from - 1)))
      from--;
    insert2 = normalizeIndent(insert2, state);
    if (nonTightList(inner.node, state.doc))
      insert2 = blankLine(context, state, line) + state.lineBreak + insert2;
    changes2.push({ from, to: pos, insert: state.lineBreak + insert2 });
    return { range: EditorSelection.cursor(from + insert2.length + 1), changes: changes2 };
  });
  if (dont)
    return false;
  dispatch(state.update(changes, { scrollIntoView: true, userEvent: "input" }));
  return true;
};
var insertNewlineContinueMarkup = /* @__PURE__ */ insertNewlineContinueMarkupCommand();
function isMark(node) {
  return node.name == "QuoteMark" || node.name == "ListMark";
}
function nonTightList(node, doc2) {
  if (node.name != "OrderedList" && node.name != "BulletList")
    return false;
  let first = node.firstChild, second = node.getChild("ListItem", "ListItem");
  if (!second)
    return false;
  let line1 = doc2.lineAt(first.to), line2 = doc2.lineAt(second.from);
  let empty2 = /^[\s>]*$/.test(line1.text);
  return line1.number + (empty2 ? 0 : 1) < line2.number;
}
function blankLine(context, state, line) {
  let insert2 = "";
  for (let i2 = 0, e = context.length - 2;i2 <= e; i2++) {
    insert2 += context[i2].blank(i2 < e ? countColumn(line.text, 4, context[i2 + 1].from) - insert2.length : null, i2 < e);
  }
  return normalizeIndent(insert2, state);
}
function contextNodeForDelete(tree, pos) {
  let node = tree.resolveInner(pos, -1), scan = pos;
  if (isMark(node)) {
    scan = node.from;
    node = node.parent;
  }
  for (let prev;prev = node.childBefore(scan); ) {
    if (isMark(prev)) {
      scan = prev.from;
    } else if (prev.name == "OrderedList" || prev.name == "BulletList") {
      node = prev.lastChild;
      scan = node.to;
    } else {
      break;
    }
  }
  return node;
}
var deleteMarkupBackward = ({ state, dispatch }) => {
  let tree = syntaxTree(state);
  let dont = null, changes = state.changeByRange((range) => {
    let pos = range.from, { doc: doc2 } = state;
    if (range.empty && markdownLanguage.isActiveAt(state, range.from)) {
      let line = doc2.lineAt(pos);
      let context = getContext(contextNodeForDelete(tree, pos), doc2);
      if (context.length) {
        let inner = context[context.length - 1];
        let spaceEnd = inner.to - inner.spaceAfter.length + (inner.spaceAfter ? 1 : 0);
        if (pos - line.from > spaceEnd && !/\S/.test(line.text.slice(spaceEnd, pos - line.from)))
          return {
            range: EditorSelection.cursor(line.from + spaceEnd),
            changes: { from: line.from + spaceEnd, to: pos }
          };
        if (pos - line.from == spaceEnd && (!inner.item || line.from <= inner.item.from || !/\S/.test(line.text.slice(0, inner.to)))) {
          let start = line.from + inner.from;
          if (inner.item && inner.node.from < inner.item.from && /\S/.test(line.text.slice(inner.from, inner.to))) {
            let insert2 = inner.blank(countColumn(line.text, 4, inner.to) - countColumn(line.text, 4, inner.from));
            if (start == line.from)
              insert2 = normalizeIndent(insert2, state);
            return {
              range: EditorSelection.cursor(start + insert2.length),
              changes: { from: start, to: line.from + inner.to, insert: insert2 }
            };
          }
          if (start < pos)
            return { range: EditorSelection.cursor(start), changes: { from: start, to: pos } };
        }
      }
    }
    return dont = { range };
  });
  if (dont)
    return false;
  dispatch(state.update(changes, { scrollIntoView: true, userEvent: "delete" }));
  return true;
};
var markdownKeymap = [
  { key: "Enter", run: insertNewlineContinueMarkup },
  { key: "Backspace", run: deleteMarkupBackward }
];
var htmlNoMatch = /* @__PURE__ */ html({ matchClosingTags: false });
function markdown(config2 = {}) {
  let { codeLanguages, defaultCodeLanguage, addKeymap = true, base: { parser: parser6 } = commonmarkLanguage, completeHTMLTags = true, pasteURLAsLink: pasteURL = true, htmlTagLanguage = htmlNoMatch } = config2;
  if (!(parser6 instanceof MarkdownParser))
    throw new RangeError("Base parser provided to `markdown` should be a Markdown parser");
  let extensions = config2.extensions ? [config2.extensions] : [];
  let support = [htmlTagLanguage.support, headerIndent], defaultCode;
  if (pasteURL)
    support.push(pasteURLAsLink);
  if (defaultCodeLanguage instanceof LanguageSupport) {
    support.push(defaultCodeLanguage.support);
    defaultCode = defaultCodeLanguage.language;
  } else if (defaultCodeLanguage) {
    defaultCode = defaultCodeLanguage;
  }
  let codeParser = codeLanguages || defaultCode ? getCodeParser(codeLanguages, defaultCode) : undefined;
  extensions.push(parseCode({ codeParser, htmlParser: htmlTagLanguage.language.parser }));
  if (addKeymap)
    support.push(Prec.high(keymap.of(markdownKeymap)));
  let lang = mkLang(parser6.configure(extensions));
  if (completeHTMLTags)
    support.push(lang.data.of({ autocomplete: htmlTagCompletion }));
  return new LanguageSupport(lang, support);
}
function htmlTagCompletion(context) {
  let { state, pos } = context, m = /<[:\-\.\w\u00b7-\uffff]*$/.exec(state.sliceDoc(pos - 25, pos));
  if (!m)
    return null;
  let tree = syntaxTree(state).resolveInner(pos, -1);
  while (tree && !tree.type.isTop) {
    if (tree.name == "CodeBlock" || tree.name == "FencedCode" || tree.name == "ProcessingInstructionBlock" || tree.name == "CommentBlock" || tree.name == "Link" || tree.name == "Image")
      return null;
    tree = tree.parent;
  }
  return {
    from: pos - m[0].length,
    to: pos,
    options: htmlTagCompletions(),
    validFor: /^<[:\-\.\w\u00b7-\uffff]*$/
  };
}
var _tagCompletions = null;
function htmlTagCompletions() {
  if (_tagCompletions)
    return _tagCompletions;
  let result = htmlCompletionSource(new CompletionContext(EditorState.create({ extensions: htmlNoMatch }), 0, true));
  return _tagCompletions = result ? result.options : [];
}
var nonPlainText = /code|horizontalrule|html|link|comment|processing|escape|entity|image|mark|url/i;
var pasteURLAsLink = /* @__PURE__ */ EditorView.domEventHandlers({
  paste: (event, view) => {
    var _a2;
    let { main } = view.state.selection;
    if (main.empty)
      return false;
    let link = (_a2 = event.clipboardData) === null || _a2 === undefined ? undefined : _a2.getData("text/plain");
    if (!link || !/^(https?:\/\/|mailto:|xmpp:|www\.)/.test(link))
      return false;
    if (/^www\./.test(link))
      link = "https://" + link;
    if (!markdownLanguage.isActiveAt(view.state, main.from, 1))
      return false;
    let tree = syntaxTree(view.state), crossesNode = false;
    tree.iterate({
      from: main.from,
      to: main.to,
      enter: (node) => {
        if (node.from > main.from || nonPlainText.test(node.name))
          crossesNode = true;
      },
      leave: (node) => {
        if (node.to < main.to)
          crossesNode = true;
      }
    });
    if (crossesNode)
      return false;
    view.dispatch({
      changes: [{ from: main.from, insert: "[" }, { from: main.to, insert: `](${link})` }],
      userEvent: "input.paste",
      scrollIntoView: true
    });
    return true;
  }
});

// node_modules/@lezer/xml/dist/index.js
var StartTag2 = 1;
var StartCloseTag2 = 2;
var MissingCloseTag = 3;
var mismatchedStartCloseTag = 4;
var incompleteStartCloseTag = 5;
var commentContent$12 = 36;
var piContent$1 = 37;
var cdataContent$1 = 38;
var Element3 = 11;
var OpenTag2 = 13;
function nameChar2(ch) {
  return ch == 45 || ch == 46 || ch == 58 || ch >= 65 && ch <= 90 || ch == 95 || ch >= 97 && ch <= 122 || ch >= 161;
}
function isSpace(ch) {
  return ch == 9 || ch == 10 || ch == 13 || ch == 32;
}
var cachedName2 = null;
var cachedInput2 = null;
var cachedPos2 = 0;
function tagNameAfter2(input, offset) {
  let pos = input.pos + offset;
  if (cachedInput2 == input && cachedPos2 == pos)
    return cachedName2;
  while (isSpace(input.peek(offset)))
    offset++;
  let name2 = "";
  for (;; ) {
    let next = input.peek(offset);
    if (!nameChar2(next))
      break;
    name2 += String.fromCharCode(next);
    offset++;
  }
  cachedInput2 = input;
  cachedPos2 = pos;
  return cachedName2 = name2 || null;
}
function ElementContext2(name2, parent) {
  this.name = name2;
  this.parent = parent;
}
var elementContext2 = new ContextTracker({
  start: null,
  shift(context, term, stack, input) {
    return term == StartTag2 ? new ElementContext2(tagNameAfter2(input, 1) || "", context) : context;
  },
  reduce(context, term) {
    return term == Element3 && context ? context.parent : context;
  },
  reuse(context, node, _stack, input) {
    let type = node.type.id;
    return type == StartTag2 || type == OpenTag2 ? new ElementContext2(tagNameAfter2(input, 1) || "", context) : context;
  },
  strict: false
});
var startTag = new ExternalTokenizer((input, stack) => {
  if (input.next != 60)
    return;
  input.advance();
  if (input.next == 47) {
    input.advance();
    let name2 = tagNameAfter2(input, 0);
    if (!name2)
      return input.acceptToken(incompleteStartCloseTag);
    if (stack.context && name2 == stack.context.name)
      return input.acceptToken(StartCloseTag2);
    for (let cx = stack.context;cx; cx = cx.parent)
      if (cx.name == name2)
        return input.acceptToken(MissingCloseTag, -2);
    input.acceptToken(mismatchedStartCloseTag);
  } else if (input.next != 33 && input.next != 63) {
    return input.acceptToken(StartTag2);
  }
}, { contextual: true });
function scanTo(type, end) {
  return new ExternalTokenizer((input) => {
    let len = 0, first = end.charCodeAt(0);
    scan:
      for (;; input.advance(), len++) {
        if (input.next < 0)
          break;
        if (input.next == first) {
          for (let i2 = 1;i2 < end.length; i2++)
            if (input.peek(i2) != end.charCodeAt(i2))
              continue scan;
          break;
        }
      }
    if (len)
      input.acceptToken(type);
  });
}
var commentContent2 = scanTo(commentContent$12, "-->");
var piContent = scanTo(piContent$1, "?>");
var cdataContent = scanTo(cdataContent$1, "]]>");
var xmlHighlighting = styleTags({
  Text: tags.content,
  "StartTag StartCloseTag EndTag SelfCloseEndTag": tags.angleBracket,
  TagName: tags.tagName,
  "MismatchedCloseTag/TagName": [tags.tagName, tags.invalid],
  AttributeName: tags.attributeName,
  AttributeValue: tags.attributeValue,
  Is: tags.definitionOperator,
  "EntityReference CharacterReference": tags.character,
  Comment: tags.blockComment,
  ProcessingInst: tags.processingInstruction,
  DoctypeDecl: tags.documentMeta,
  Cdata: tags.special(tags.string)
});
var parser6 = LRParser.deserialize({
  version: 14,
  states: ",lOQOaOOOrOxO'#CfOzOpO'#CiO!tOaO'#CgOOOP'#Cg'#CgO!{OrO'#CrO#TOtO'#CsO#]OpO'#CtOOOP'#DT'#DTOOOP'#Cv'#CvQQOaOOOOOW'#Cw'#CwO#eOxO,59QOOOP,59Q,59QOOOO'#Cx'#CxO#mOpO,59TO#uO!bO,59TOOOP'#C|'#C|O$TOaO,59RO$[OpO'#CoOOOP,59R,59ROOOQ'#C}'#C}O$dOrO,59^OOOP,59^,59^OOOS'#DO'#DOO$lOtO,59_OOOP,59_,59_O$tOpO,59`O$|OpO,59`OOOP-E6t-E6tOOOW-E6u-E6uOOOP1G.l1G.lOOOO-E6v-E6vO%UO!bO1G.oO%UO!bO1G.oO%dOpO'#CkO%lO!bO'#CyO%zO!bO1G.oOOOP1G.o1G.oOOOP1G.w1G.wOOOP-E6z-E6zOOOP1G.m1G.mO&VOpO,59ZO&_OpO,59ZOOOQ-E6{-E6{OOOP1G.x1G.xOOOS-E6|-E6|OOOP1G.y1G.yO&gOpO1G.zO&gOpO1G.zOOOP1G.z1G.zO&oO!bO7+$ZO&}O!bO7+$ZOOOP7+$Z7+$ZOOOP7+$c7+$cO'YOpO,59VO'bOpO,59VO'mO!bO,59eOOOO-E6w-E6wO'{OpO1G.uO'{OpO1G.uOOOP1G.u1G.uO(TOpO7+$fOOOP7+$f7+$fO(]O!bO<<GuOOOP<<Gu<<GuOOOP<<G}<<G}O'bOpO1G.qO'bOpO1G.qO(hO#tO'#CnO(vO&jO'#CnOOOO1G.q1G.qO)UOpO7+$aOOOP7+$a7+$aOOOP<<HQ<<HQOOOPAN=aAN=aOOOPAN=iAN=iO'bOpO7+$]OOOO7+$]7+$]OOOO'#Cz'#CzO)^O#tO,59YOOOO,59Y,59YOOOO'#C{'#C{O)lO&jO,59YOOOP<<G{<<G{OOOO<<Gw<<GwOOOO-E6x-E6xOOOO1G.t1G.tOOOO-E6y-E6y",
  stateData: ")z~OPQOSVOTWOVWOWWOXWOiXOyPO!QTO!SUO~OvZOx]O~O^`Oz^O~OPQOQcOSVOTWOVWOWWOXWOyPO!QTO!SUO~ORdO~P!SOteO!PgO~OuhO!RjO~O^lOz^O~OvZOxoO~O^qOz^O~O[vO`sOdwOz^O~ORyO~P!SO^{Oz^O~OteO!P}O~OuhO!R!PO~O^!QOz^O~O[!SOz^O~O[!VO`sOd!WOz^O~Oa!YOz^O~Oz^O[mX`mXdmX~O[!VO`sOd!WO~O^!]Oz^O~O[!_Oz^O~O[!aOz^O~O[!cO`sOd!dOz^O~O[!cO`sOd!dO~Oa!eOz^O~Oz^O{!gO}!hO~Oz^O[ma`madma~O[!kOz^O~O[!lOz^O~O[!mO`sOd!nO~OW!qOX!qO{!sO|!qO~OW!tOX!tO}!sO!O!tO~O[!vOz^O~OW!qOX!qO{!yO|!qO~OW!tOX!tO}!yO!O!tO~O",
  goto: "%cxPPPPPPPPPPyyP!PP!VPP!`!jP!pyyyP!v!|#S$[$k$q$w$}%TPPPP%ZXWORYbXRORYb_t`qru!T!U!bQ!i!YS!p!e!fR!w!oQdRRybXSORYbQYORmYQ[PRn[Q_QQkVjp_krz!R!T!X!Z!^!`!f!j!oQr`QzcQ!RlQ!TqQ!XsQ!ZtQ!^{Q!`!QQ!f!YQ!j!]R!o!eQu`S!UqrU![u!U!bR!b!TQ!r!gR!x!rQ!u!hR!z!uQbRRxbQfTR|fQiUR!OiSXOYTaRb",
  nodeNames: " StartTag StartCloseTag MissingCloseTag StartCloseTag StartCloseTag Document Text EntityReference CharacterReference Cdata Element EndTag OpenTag TagName Attribute AttributeName Is AttributeValue CloseTag SelfCloseEndTag SelfClosingTag Comment ProcessingInst MismatchedCloseTag DoctypeDecl",
  maxTerm: 50,
  context: elementContext2,
  nodeProps: [
    ["closedBy", 1, "SelfCloseEndTag EndTag", 13, "CloseTag MissingCloseTag"],
    ["openedBy", 12, "StartTag StartCloseTag", 19, "OpenTag", 20, "StartTag"],
    ["isolate", -6, 13, 18, 19, 21, 22, 24, ""]
  ],
  propSources: [xmlHighlighting],
  skippedNodes: [0],
  repeatNodeCount: 9,
  tokenData: "!)v~R!YOX$qXY)iYZ)iZ]$q]^)i^p$qpq)iqr$qrs*vsv$qvw+fwx/ix}$q}!O0[!O!P$q!P!Q2z!Q![$q![!]4n!]!^$q!^!_8U!_!`!#t!`!a!$l!a!b!%d!b!c$q!c!}4n!}#P$q#P#Q!'W#Q#R$q#R#S4n#S#T$q#T#o4n#o%W$q%W%o4n%o%p$q%p&a4n&a&b$q&b1p4n1p4U$q4U4d4n4d4e$q4e$IS4n$IS$I`$q$I`$Ib4n$Ib$Kh$q$Kh%#t4n%#t&/x$q&/x&Et4n&Et&FV$q&FV;'S4n;'S;:j8O;:j;=`)c<%l?&r$q?&r?Ah4n?Ah?BY$q?BY?Mn4n?MnO$qi$zXVP|W!O`Or$qrs%gsv$qwx'^x!^$q!^!_(o!_;'S$q;'S;=`)c<%lO$qa%nVVP!O`Ov%gwx&Tx!^%g!^!_&o!_;'S%g;'S;=`'W<%lO%gP&YTVPOv&Tw!^&T!_;'S&T;'S;=`&i<%lO&TP&lP;=`<%l&T`&tS!O`Ov&ox;'S&o;'S;=`'Q<%lO&o`'TP;=`<%l&oa'ZP;=`<%l%gX'eWVP|WOr'^rs&Tsv'^w!^'^!^!_'}!_;'S'^;'S;=`(i<%lO'^W(ST|WOr'}sv'}w;'S'};'S;=`(c<%lO'}W(fP;=`<%l'}X(lP;=`<%l'^h(vV|W!O`Or(ors&osv(owx'}x;'S(o;'S;=`)]<%lO(oh)`P;=`<%l(oi)fP;=`<%l$qo)t`VP|W!O`zUOX$qXY)iYZ)iZ]$q]^)i^p$qpq)iqr$qrs%gsv$qwx'^x!^$q!^!_(o!_;'S$q;'S;=`)c<%lO$qk+PV{YVP!O`Ov%gwx&Tx!^%g!^!_&o!_;'S%g;'S;=`'W<%lO%g~+iast,n![!]-r!c!}-r#R#S-r#T#o-r%W%o-r%p&a-r&b1p-r4U4d-r4e$IS-r$I`$Ib-r$Kh%#t-r&/x&Et-r&FV;'S-r;'S;:j/c?&r?Ah-r?BY?Mn-r~,qQ!Q![,w#l#m-V~,zQ!Q![,w!]!^-Q~-VOX~~-YR!Q![-c!c!i-c#T#Z-c~-fS!Q![-c!]!^-Q!c!i-c#T#Z-c~-ug}!O-r!O!P-r!Q![-r![!]-r!]!^/^!c!}-r#R#S-r#T#o-r$}%O-r%W%o-r%p&a-r&b1p-r1p4U-r4U4d-r4e$IS-r$I`$Ib-r$Je$Jg-r$Kh%#t-r&/x&Et-r&FV;'S-r;'S;:j/c?&r?Ah-r?BY?Mn-r~/cOW~~/fP;=`<%l-rk/rW}bVP|WOr'^rs&Tsv'^w!^'^!^!_'}!_;'S'^;'S;=`(i<%lO'^k0eZVP|W!O`Or$qrs%gsv$qwx'^x}$q}!O1W!O!^$q!^!_(o!_;'S$q;'S;=`)c<%lO$qk1aZVP|W!O`Or$qrs%gsv$qwx'^x!^$q!^!_(o!_!`$q!`!a2S!a;'S$q;'S;=`)c<%lO$qk2_X!PQVP|W!O`Or$qrs%gsv$qwx'^x!^$q!^!_(o!_;'S$q;'S;=`)c<%lO$qm3TZVP|W!O`Or$qrs%gsv$qwx'^x!^$q!^!_(o!_!`$q!`!a3v!a;'S$q;'S;=`)c<%lO$qm4RXdSVP|W!O`Or$qrs%gsv$qwx'^x!^$q!^!_(o!_;'S$q;'S;=`)c<%lO$qo4{!P`S^QVP|W!O`Or$qrs%gsv$qwx'^x}$q}!O4n!O!P4n!P!Q$q!Q![4n![!]4n!]!^$q!^!_(o!_!c$q!c!}4n!}#R$q#R#S4n#S#T$q#T#o4n#o$}$q$}%O4n%O%W$q%W%o4n%o%p$q%p&a4n&a&b$q&b1p4n1p4U4n4U4d4n4d4e$q4e$IS4n$IS$I`$q$I`$Ib4n$Ib$Je$q$Je$Jg4n$Jg$Kh$q$Kh%#t4n%#t&/x$q&/x&Et4n&Et&FV$q&FV;'S4n;'S;:j8O;:j;=`)c<%l?&r$q?&r?Ah4n?Ah?BY$q?BY?Mn4n?MnO$qo8RP;=`<%l4ni8]Y|W!O`Oq(oqr8{rs&osv(owx'}x!a(o!a!b!#U!b;'S(o;'S;=`)]<%lO(oi9S_|W!O`Or(ors&osv(owx'}x}(o}!O:R!O!f(o!f!g;e!g!}(o!}#ODh#O#W(o#W#XLp#X;'S(o;'S;=`)]<%lO(oi:YX|W!O`Or(ors&osv(owx'}x}(o}!O:u!O;'S(o;'S;=`)]<%lO(oi;OV!QP|W!O`Or(ors&osv(owx'}x;'S(o;'S;=`)]<%lO(oi;lX|W!O`Or(ors&osv(owx'}x!q(o!q!r<X!r;'S(o;'S;=`)]<%lO(oi<`X|W!O`Or(ors&osv(owx'}x!e(o!e!f<{!f;'S(o;'S;=`)]<%lO(oi=SX|W!O`Or(ors&osv(owx'}x!v(o!v!w=o!w;'S(o;'S;=`)]<%lO(oi=vX|W!O`Or(ors&osv(owx'}x!{(o!{!|>c!|;'S(o;'S;=`)]<%lO(oi>jX|W!O`Or(ors&osv(owx'}x!r(o!r!s?V!s;'S(o;'S;=`)]<%lO(oi?^X|W!O`Or(ors&osv(owx'}x!g(o!g!h?y!h;'S(o;'S;=`)]<%lO(oi@QY|W!O`Or?yrs@psv?yvwA[wxBdx!`?y!`!aCr!a;'S?y;'S;=`Db<%lO?ya@uV!O`Ov@pvxA[x!`@p!`!aAy!a;'S@p;'S;=`B^<%lO@pPA_TO!`A[!`!aAn!a;'SA[;'S;=`As<%lOA[PAsOiPPAvP;=`<%lA[aBQSiP!O`Ov&ox;'S&o;'S;=`'Q<%lO&oaBaP;=`<%l@pXBiX|WOrBdrsA[svBdvwA[w!`Bd!`!aCU!a;'SBd;'S;=`Cl<%lOBdXC]TiP|WOr'}sv'}w;'S'};'S;=`(c<%lO'}XCoP;=`<%lBdiC{ViP|W!O`Or(ors&osv(owx'}x;'S(o;'S;=`)]<%lO(oiDeP;=`<%l?yiDoZ|W!O`Or(ors&osv(owx'}x!e(o!e!fEb!f#V(o#V#WIr#W;'S(o;'S;=`)]<%lO(oiEiX|W!O`Or(ors&osv(owx'}x!f(o!f!gFU!g;'S(o;'S;=`)]<%lO(oiF]X|W!O`Or(ors&osv(owx'}x!c(o!c!dFx!d;'S(o;'S;=`)]<%lO(oiGPX|W!O`Or(ors&osv(owx'}x!v(o!v!wGl!w;'S(o;'S;=`)]<%lO(oiGsX|W!O`Or(ors&osv(owx'}x!c(o!c!dH`!d;'S(o;'S;=`)]<%lO(oiHgX|W!O`Or(ors&osv(owx'}x!}(o!}#OIS#O;'S(o;'S;=`)]<%lO(oiI]V|W!O`yPOr(ors&osv(owx'}x;'S(o;'S;=`)]<%lO(oiIyX|W!O`Or(ors&osv(owx'}x#W(o#W#XJf#X;'S(o;'S;=`)]<%lO(oiJmX|W!O`Or(ors&osv(owx'}x#T(o#T#UKY#U;'S(o;'S;=`)]<%lO(oiKaX|W!O`Or(ors&osv(owx'}x#h(o#h#iK|#i;'S(o;'S;=`)]<%lO(oiLTX|W!O`Or(ors&osv(owx'}x#T(o#T#UH`#U;'S(o;'S;=`)]<%lO(oiLwX|W!O`Or(ors&osv(owx'}x#c(o#c#dMd#d;'S(o;'S;=`)]<%lO(oiMkX|W!O`Or(ors&osv(owx'}x#V(o#V#WNW#W;'S(o;'S;=`)]<%lO(oiN_X|W!O`Or(ors&osv(owx'}x#h(o#h#iNz#i;'S(o;'S;=`)]<%lO(oi! RX|W!O`Or(ors&osv(owx'}x#m(o#m#n! n#n;'S(o;'S;=`)]<%lO(oi! uX|W!O`Or(ors&osv(owx'}x#d(o#d#e!!b#e;'S(o;'S;=`)]<%lO(oi!!iX|W!O`Or(ors&osv(owx'}x#X(o#X#Y?y#Y;'S(o;'S;=`)]<%lO(oi!#_V!SP|W!O`Or(ors&osv(owx'}x;'S(o;'S;=`)]<%lO(ok!$PXaQVP|W!O`Or$qrs%gsv$qwx'^x!^$q!^!_(o!_;'S$q;'S;=`)c<%lO$qo!$wX[UVP|W!O`Or$qrs%gsv$qwx'^x!^$q!^!_(o!_;'S$q;'S;=`)c<%lO$qk!%mZVP|W!O`Or$qrs%gsv$qwx'^x!^$q!^!_(o!_!`$q!`!a!&`!a;'S$q;'S;=`)c<%lO$qk!&kX!RQVP|W!O`Or$qrs%gsv$qwx'^x!^$q!^!_(o!_;'S$q;'S;=`)c<%lO$qk!'aZVP|W!O`Or$qrs%gsv$qwx'^x!^$q!^!_(o!_#P$q#P#Q!(S#Q;'S$q;'S;=`)c<%lO$qk!(]ZVP|W!O`Or$qrs%gsv$qwx'^x!^$q!^!_(o!_!`$q!`!a!)O!a;'S$q;'S;=`)c<%lO$qk!)ZXxQVP|W!O`Or$qrs%gsv$qwx'^x!^$q!^!_(o!_;'S$q;'S;=`)c<%lO$q",
  tokenizers: [startTag, commentContent2, piContent, cdataContent, 0, 1, 2, 3, 4],
  topRules: { Document: [0, 6] },
  tokenPrec: 0
});

// node_modules/@codemirror/lang-xml/dist/index.js
function tagName(doc2, tag) {
  let name2 = tag && tag.getChild("TagName");
  return name2 ? doc2.sliceString(name2.from, name2.to) : "";
}
function elementName$1(doc2, tree) {
  let tag = tree && tree.firstChild;
  return !tag || tag.name != "OpenTag" ? "" : tagName(doc2, tag);
}
function attrName(doc2, tag, pos) {
  let attr = tag && tag.getChildren("Attribute").find((a) => a.from <= pos && a.to >= pos);
  let name2 = attr && attr.getChild("AttributeName");
  return name2 ? doc2.sliceString(name2.from, name2.to) : "";
}
function findParentElement2(tree) {
  for (let cur2 = tree && tree.parent;cur2; cur2 = cur2.parent)
    if (cur2.name == "Element")
      return cur2;
  return null;
}
function findLocation(state, pos) {
  var _a2;
  let at = syntaxTree(state).resolveInner(pos, -1), inTag = null;
  for (let cur2 = at;!inTag && cur2.parent; cur2 = cur2.parent)
    if (cur2.name == "OpenTag" || cur2.name == "CloseTag" || cur2.name == "SelfClosingTag" || cur2.name == "MismatchedCloseTag")
      inTag = cur2;
  if (inTag && (inTag.to > pos || inTag.lastChild.type.isError)) {
    let elt2 = inTag.parent;
    if (at.name == "TagName")
      return inTag.name == "CloseTag" || inTag.name == "MismatchedCloseTag" ? { type: "closeTag", from: at.from, context: elt2 } : { type: "openTag", from: at.from, context: findParentElement2(elt2) };
    if (at.name == "AttributeName")
      return { type: "attrName", from: at.from, context: inTag };
    if (at.name == "AttributeValue")
      return { type: "attrValue", from: at.from, context: inTag };
    let before = at == inTag || at.name == "Attribute" ? at.childBefore(pos) : at;
    if ((before === null || before === undefined ? undefined : before.name) == "StartTag")
      return { type: "openTag", from: pos, context: findParentElement2(elt2) };
    if ((before === null || before === undefined ? undefined : before.name) == "StartCloseTag" && before.to <= pos)
      return { type: "closeTag", from: pos, context: elt2 };
    if ((before === null || before === undefined ? undefined : before.name) == "Is")
      return { type: "attrValue", from: pos, context: inTag };
    if (before)
      return { type: "attrName", from: pos, context: inTag };
    return null;
  } else if (at.name == "StartCloseTag") {
    return { type: "closeTag", from: pos, context: at.parent };
  }
  while (at.parent && at.to == pos && !((_a2 = at.lastChild) === null || _a2 === undefined ? undefined : _a2.type.isError))
    at = at.parent;
  if (at.name == "Element" || at.name == "Text" || at.name == "Document")
    return { type: "tag", from: pos, context: at.name == "Element" ? at : findParentElement2(at) };
  return null;
}

class Element4 {
  constructor(spec, attrs, attrValues) {
    this.attrs = attrs;
    this.attrValues = attrValues;
    this.children = [];
    this.name = spec.name;
    this.completion = Object.assign(Object.assign({ type: "type" }, spec.completion || {}), { label: this.name });
    this.openCompletion = Object.assign(Object.assign({}, this.completion), { label: "<" + this.name });
    this.closeCompletion = Object.assign(Object.assign({}, this.completion), { label: "</" + this.name + ">", boost: 2 });
    this.closeNameCompletion = Object.assign(Object.assign({}, this.completion), { label: this.name + ">" });
    this.text = spec.textContent ? spec.textContent.map((s) => ({ label: s, type: "text" })) : [];
  }
}
var Identifier2 = /^[:\-\.\w\u00b7-\uffff]*$/;
function attrCompletion(spec) {
  return Object.assign(Object.assign({ type: "property" }, spec.completion || {}), { label: spec.name });
}
function valueCompletion(spec) {
  return typeof spec == "string" ? { label: `"${spec}"`, type: "constant" } : /^"/.test(spec.label) ? spec : Object.assign(Object.assign({}, spec), { label: `"${spec.label}"` });
}
function completeFromSchema(eltSpecs, attrSpecs) {
  let allAttrs = [], globalAttrs = [];
  let attrValues = Object.create(null);
  for (let s of attrSpecs) {
    let completion = attrCompletion(s);
    allAttrs.push(completion);
    if (s.global)
      globalAttrs.push(completion);
    if (s.values)
      attrValues[s.name] = s.values.map(valueCompletion);
  }
  let allElements = [], topElements = [];
  let byName = Object.create(null);
  for (let s of eltSpecs) {
    let attrs = globalAttrs, attrVals = attrValues;
    if (s.attributes)
      attrs = attrs.concat(s.attributes.map((s2) => {
        if (typeof s2 == "string")
          return allAttrs.find((a) => a.label == s2) || { label: s2, type: "property" };
        if (s2.values) {
          if (attrVals == attrValues)
            attrVals = Object.create(attrVals);
          attrVals[s2.name] = s2.values.map(valueCompletion);
        }
        return attrCompletion(s2);
      }));
    let elt2 = new Element4(s, attrs, attrVals);
    byName[elt2.name] = elt2;
    allElements.push(elt2);
    if (s.top)
      topElements.push(elt2);
  }
  if (!topElements.length)
    topElements = allElements;
  for (let i2 = 0;i2 < allElements.length; i2++) {
    let s = eltSpecs[i2], elt2 = allElements[i2];
    if (s.children) {
      for (let ch of s.children)
        if (byName[ch])
          elt2.children.push(byName[ch]);
    } else {
      elt2.children = allElements;
    }
  }
  return (cx) => {
    var _a2;
    let { doc: doc2 } = cx.state, loc = findLocation(cx.state, cx.pos);
    if (!loc || loc.type == "tag" && !cx.explicit)
      return null;
    let { type, from, context } = loc;
    if (type == "openTag") {
      let children = topElements;
      let parentName = elementName$1(doc2, context);
      if (parentName) {
        let parent = byName[parentName];
        children = (parent === null || parent === undefined ? undefined : parent.children) || allElements;
      }
      return {
        from,
        options: children.map((ch) => ch.completion),
        validFor: Identifier2
      };
    } else if (type == "closeTag") {
      let parentName = elementName$1(doc2, context);
      return parentName ? {
        from,
        to: cx.pos + (doc2.sliceString(cx.pos, cx.pos + 1) == ">" ? 1 : 0),
        options: [((_a2 = byName[parentName]) === null || _a2 === undefined ? undefined : _a2.closeNameCompletion) || { label: parentName + ">", type: "type" }],
        validFor: Identifier2
      } : null;
    } else if (type == "attrName") {
      let parent = byName[tagName(doc2, context)];
      return {
        from,
        options: (parent === null || parent === undefined ? undefined : parent.attrs) || globalAttrs,
        validFor: Identifier2
      };
    } else if (type == "attrValue") {
      let attr = attrName(doc2, context, from);
      if (!attr)
        return null;
      let parent = byName[tagName(doc2, context)];
      let values2 = ((parent === null || parent === undefined ? undefined : parent.attrValues) || attrValues)[attr];
      if (!values2 || !values2.length)
        return null;
      return {
        from,
        to: cx.pos + (doc2.sliceString(cx.pos, cx.pos + 1) == '"' ? 1 : 0),
        options: values2,
        validFor: /^"[^"]*"?$/
      };
    } else if (type == "tag") {
      let parentName = elementName$1(doc2, context), parent = byName[parentName];
      let closing2 = [], last = context && context.lastChild;
      if (parentName && (!last || last.name != "CloseTag" || tagName(doc2, last) != parentName))
        closing2.push(parent ? parent.closeCompletion : { label: "</" + parentName + ">", type: "type", boost: 2 });
      let options = closing2.concat(((parent === null || parent === undefined ? undefined : parent.children) || (context ? allElements : topElements)).map((e) => e.openCompletion));
      if (context && (parent === null || parent === undefined ? undefined : parent.text.length)) {
        let openTag = context.firstChild;
        if (openTag.to > cx.pos - 20 && !/\S/.test(cx.state.sliceDoc(openTag.to, cx.pos)))
          options = options.concat(parent.text);
      }
      return {
        from,
        options,
        validFor: /^<\/?[:\-\.\w\u00b7-\uffff]*$/
      };
    } else {
      return null;
    }
  };
}
var xmlLanguage = /* @__PURE__ */ LRLanguage.define({
  name: "xml",
  parser: /* @__PURE__ */ parser6.configure({
    props: [
      /* @__PURE__ */ indentNodeProp.add({
        Element(context) {
          let closed = /^\s*<\//.test(context.textAfter);
          return context.lineIndent(context.node.from) + (closed ? 0 : context.unit);
        },
        "OpenTag CloseTag SelfClosingTag"(context) {
          return context.column(context.node.from) + context.unit;
        }
      }),
      /* @__PURE__ */ foldNodeProp.add({
        Element(subtree) {
          let { firstChild: first, lastChild: last } = subtree;
          if (!first || first.name != "OpenTag")
            return null;
          return { from: first.to, to: last.name == "CloseTag" ? last.from : subtree.to };
        }
      }),
      /* @__PURE__ */ bracketMatchingHandle.add({
        "OpenTag CloseTag": (node) => node.getChild("TagName")
      })
    ]
  }),
  languageData: {
    commentTokens: { block: { open: "<!--", close: "-->" } },
    indentOnInput: /^\s*<\/$/
  }
});
function xml(conf = {}) {
  let support = [xmlLanguage.data.of({
    autocomplete: completeFromSchema(conf.elements || [], conf.attributes || [])
  })];
  if (conf.autoCloseTags !== false)
    support.push(autoCloseTags3);
  return new LanguageSupport(xmlLanguage, support);
}
function elementName3(doc2, tree, max = doc2.length) {
  if (!tree)
    return "";
  let tag = tree.firstChild;
  let name2 = tag && tag.getChild("TagName");
  return name2 ? doc2.sliceString(name2.from, Math.min(name2.to, max)) : "";
}
var autoCloseTags3 = /* @__PURE__ */ EditorView.inputHandler.of((view, from, to, text, insertTransaction) => {
  if (view.composing || view.state.readOnly || from != to || text != ">" && text != "/" || !xmlLanguage.isActiveAt(view.state, from, -1))
    return false;
  let base2 = insertTransaction(), { state } = base2;
  let closeTags = state.changeByRange((range) => {
    var _a2, _b, _c;
    let { head } = range;
    let didType = state.doc.sliceString(head - 1, head) == text;
    let after = syntaxTree(state).resolveInner(head, -1), name2;
    if (didType && text == ">" && after.name == "EndTag") {
      let tag = after.parent;
      if (((_b = (_a2 = tag.parent) === null || _a2 === undefined ? undefined : _a2.lastChild) === null || _b === undefined ? undefined : _b.name) != "CloseTag" && (name2 = elementName3(state.doc, tag.parent, head))) {
        let to2 = head + (state.doc.sliceString(head, head + 1) === ">" ? 1 : 0);
        let insert2 = `</${name2}>`;
        return { range, changes: { from: head, to: to2, insert: insert2 } };
      }
    } else if (didType && text == "/" && after.name == "StartCloseTag") {
      let base3 = after.parent;
      if (after.from == head - 2 && ((_c = base3.lastChild) === null || _c === undefined ? undefined : _c.name) != "CloseTag" && (name2 = elementName3(state.doc, base3, head))) {
        let to2 = head + (state.doc.sliceString(head, head + 1) === ">" ? 1 : 0);
        let insert2 = `${name2}>`;
        return {
          range: EditorSelection.cursor(head + insert2.length, -1),
          changes: { from: head, to: to2, insert: insert2 }
        };
      }
    }
    return { range };
  });
  if (closeTags.changes.empty)
    return false;
  view.dispatch([
    base2,
    state.update(closeTags, {
      userEvent: "input.complete",
      scrollIntoView: true
    })
  ]);
  return true;
});

// codemirror.ts
function createTheme(config2) {
  const theme2 = EditorView.theme({
    "&": {
      backgroundColor: config2.settings.background,
      color: config2.settings.foreground,
      fontSize: config2.settings.fontSize,
      fontFamily: config2.settings.fontFamily,
      height: "100%",
      width: "100%"
    },
    ".cm-scroller": {
      overflow: "auto",
      height: "100%"
    },
    ".cm-content": {
      caretColor: config2.settings.caret,
      fontSize: config2.settings.fontSize,
      fontFamily: config2.settings.fontFamily
    },
    ".cm-cursor, .cm-dropCursor": {
      borderLeftColor: config2.settings.caret
    },
    "&.cm-focused .cm-selectionBackground, ::selection": {
      backgroundColor: config2.settings.lineHighlight
    },
    ".cm-activeLine": {
      backgroundColor: config2.settings.lineHighlight
    },
    ".cm-gutters": {
      backgroundColor: config2.settings.gutterBackground,
      color: config2.settings.gutterForeground,
      border: "none",
      fontSize: config2.settings.fontSize,
      fontFamily: config2.settings.fontFamily
    },
    ".cm-activeLineGutter": {
      backgroundColor: config2.settings.lineHighlight
    }
  }, { dark: config2.theme === "dark" });
  const highlighting = HighlightStyle.define(config2.styles);
  return [theme2, syntaxHighlighting(highlighting)];
}
var minimalDark = createTheme({
  theme: "dark",
  settings: {
    background: "#101010",
    backgroundImage: "",
    foreground: "#ffffff",
    caret: "#cacaca",
    lineHighlight: "#aafee717",
    gutterBackground: "#101010",
    gutterForeground: "#444444",
    fontFamily: "'Jetbrains Mono', 'Geist Mono', monospace",
    fontSize: "12px"
  },
  styles: [
    { tag: tags.comment, color: "#aafee7" },
    { tag: tags.variableName, color: "#ffffff" },
    { tag: [tags.string, tags.special(tags.brace)], color: "#d0d0d0" },
    { tag: tags.number, color: "#d0d0d0" },
    { tag: tags.bool, color: "#d0d0d0" },
    { tag: tags.null, color: "#d0d0d0" },
    { tag: tags.keyword, color: "#a0a0a0" },
    { tag: tags.operator, color: "#ffffff" },
    { tag: tags.className, color: "#ffffff" },
    { tag: tags.definition(tags.typeName), color: "#ffffff" },
    { tag: tags.typeName, color: "#ffffff" },
    { tag: tags.angleBracket, color: "#ffffff" },
    { tag: tags.tagName, color: "#ffffff" },
    { tag: tags.attributeName, color: "#ffffff" }
  ]
});
var minimalLight = createTheme({
  theme: "light",
  settings: {
    background: "#ffffff",
    backgroundImage: "",
    foreground: "#1a1a1a",
    caret: "#1a1a1a",
    lineHighlight: "#0066ff0a",
    gutterBackground: "#ffffff",
    gutterForeground: "#999999",
    fontFamily: "'Jetbrains Mono', 'Geist Mono', monospace",
    fontSize: "12px"
  },
  styles: [
    { tag: tags.comment, color: "#008080" },
    { tag: tags.variableName, color: "#1a1a1a" },
    { tag: [tags.string, tags.special(tags.brace)], color: "#505050" },
    { tag: tags.number, color: "#505050" },
    { tag: tags.bool, color: "#505050" },
    { tag: tags.null, color: "#505050" },
    { tag: tags.keyword, color: "#707070" },
    { tag: tags.operator, color: "#1a1a1a" },
    { tag: tags.className, color: "#1a1a1a" },
    { tag: tags.definition(tags.typeName), color: "#1a1a1a" },
    { tag: tags.typeName, color: "#1a1a1a" },
    { tag: tags.angleBracket, color: "#1a1a1a" },
    { tag: tags.tagName, color: "#1a1a1a" },
    { tag: tags.attributeName, color: "#1a1a1a" }
  ]
});
var fontOverride = EditorView.theme({
  "&": {
    fontSize: "12px",
    fontFamily: "'Jetbrains Mono', 'Geist Mono', monospace"
  },
  ".cm-content": {
    fontSize: "12px",
    fontFamily: "'Jetbrains Mono', 'Geist Mono', monospace"
  },
  ".cm-gutters": {
    fontSize: "12px",
    fontFamily: "'Jetbrains Mono', 'Geist Mono', monospace"
  }
});
var language_map = {
  javascript: () => javascript(),
  typescript: () => javascript({ typescript: true }),
  jsx: () => javascript({ jsx: true }),
  tsx: () => javascript({ jsx: true, typescript: true }),
  css: () => css(),
  html: () => html(),
  json: () => json(),
  markdown: () => markdown(),
  xml: () => xml(),
  bash: () => null
};
function createEditor(config2, extensions = []) {
  const { host, language: language2, source, theme: theme2, onInput } = config2;
  const language_extension = language_map[language2]();
  const theme_extension = theme2 === "dark" ? minimalDark : minimalLight;
  const default_extensions = [
    basicSetup,
    keymap.of([
      ...defaultKeymap,
      ...searchKeymap,
      ...historyKeymap,
      ...foldKeymap,
      { key: "Tab", run: insertTab }
    ]),
    ...theme_extension,
    fontOverride,
    autocompletion(),
    search({ top: true }),
    EditorView.lineWrapping,
    EditorState.tabSize.of(4),
    indentUnit.of("\t"),
    ...extensions
  ];
  if (onInput) {
    default_extensions.push(EditorView.updateListener.of((update) => {
      if (update.docChanged) {
        const new_value = update.state.doc.toString();
        onInput(new_value);
      }
    }));
  }
  if (language_extension) {
    default_extensions.push(language_extension);
  }
  const state = EditorState.create({
    doc: source,
    extensions: default_extensions
  });
  const view = new EditorView({
    state,
    parent: host
  });
  return view;
}
export {
  minimalLight,
  minimalDark,
  fontOverride,
  createEditor
};

//# debugId=C77E4ED620D3528E64756E2164756E21
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsibm9kZV9tb2R1bGVzL0BtYXJpam4vZmluZC1jbHVzdGVyLWJyZWFrL3NyYy9pbmRleC5qcyIsICJub2RlX21vZHVsZXMvQGNvZGVtaXJyb3Ivc3RhdGUvZGlzdC9pbmRleC5qcyIsICJub2RlX21vZHVsZXMvc3R5bGUtbW9kL3NyYy9zdHlsZS1tb2QuanMiLCAibm9kZV9tb2R1bGVzL3czYy1rZXluYW1lL2luZGV4LmpzIiwgIm5vZGVfbW9kdWxlcy9jcmVsdC9pbmRleC5qcyIsICJub2RlX21vZHVsZXMvQGNvZGVtaXJyb3Ivdmlldy9kaXN0L2luZGV4LmpzIiwgIm5vZGVfbW9kdWxlcy9AbGV6ZXIvY29tbW9uL2Rpc3QvaW5kZXguanMiLCAibm9kZV9tb2R1bGVzL0BsZXplci9oaWdobGlnaHQvZGlzdC9pbmRleC5qcyIsICJub2RlX21vZHVsZXMvQGNvZGVtaXJyb3IvbGFuZ3VhZ2UvZGlzdC9pbmRleC5qcyIsICJub2RlX21vZHVsZXMvQGNvZGVtaXJyb3IvY29tbWFuZHMvZGlzdC9pbmRleC5qcyIsICJub2RlX21vZHVsZXMvQGNvZGVtaXJyb3Ivc2VhcmNoL2Rpc3QvaW5kZXguanMiLCAibm9kZV9tb2R1bGVzL0Bjb2RlbWlycm9yL2F1dG9jb21wbGV0ZS9kaXN0L2luZGV4LmpzIiwgIm5vZGVfbW9kdWxlcy9AY29kZW1pcnJvci9saW50L2Rpc3QvaW5kZXguanMiLCAibm9kZV9tb2R1bGVzL2NvZGVtaXJyb3IvZGlzdC9pbmRleC5qcyIsICJub2RlX21vZHVsZXMvQGxlemVyL2xyL2Rpc3QvaW5kZXguanMiLCAibm9kZV9tb2R1bGVzL0BsZXplci9qYXZhc2NyaXB0L2Rpc3QvaW5kZXguanMiLCAibm9kZV9tb2R1bGVzL0Bjb2RlbWlycm9yL2xhbmctamF2YXNjcmlwdC9kaXN0L2luZGV4LmpzIiwgIm5vZGVfbW9kdWxlcy9AbGV6ZXIvY3NzL2Rpc3QvaW5kZXguanMiLCAibm9kZV9tb2R1bGVzL0Bjb2RlbWlycm9yL2xhbmctY3NzL2Rpc3QvaW5kZXguanMiLCAibm9kZV9tb2R1bGVzL0BsZXplci9odG1sL2Rpc3QvaW5kZXguanMiLCAibm9kZV9tb2R1bGVzL0Bjb2RlbWlycm9yL2xhbmctaHRtbC9kaXN0L2luZGV4LmpzIiwgIm5vZGVfbW9kdWxlcy9AbGV6ZXIvanNvbi9kaXN0L2luZGV4LmpzIiwgIm5vZGVfbW9kdWxlcy9AY29kZW1pcnJvci9sYW5nLWpzb24vZGlzdC9pbmRleC5qcyIsICJub2RlX21vZHVsZXMvQGxlemVyL21hcmtkb3duL2Rpc3QvaW5kZXguanMiLCAibm9kZV9tb2R1bGVzL0Bjb2RlbWlycm9yL2xhbmctbWFya2Rvd24vZGlzdC9pbmRleC5qcyIsICJub2RlX21vZHVsZXMvQGxlemVyL3htbC9kaXN0L2luZGV4LmpzIiwgIm5vZGVfbW9kdWxlcy9AY29kZW1pcnJvci9sYW5nLXhtbC9kaXN0L2luZGV4LmpzIiwgImNvZGVtaXJyb3IudHMiXSwKICAic291cmNlc0NvbnRlbnQiOiBbCiAgICAiLy8gVGhlc2UgYXJlIGZpbGxlZCB3aXRoIHJhbmdlcyAocmFuZ2VGcm9tW2ldIHVwIHRvIGJ1dCBub3QgaW5jbHVkaW5nXG4vLyByYW5nZVRvW2ldKSBvZiBjb2RlIHBvaW50cyB0aGF0IGNvdW50IGFzIGV4dGVuZGluZyBjaGFyYWN0ZXJzLlxubGV0IHJhbmdlRnJvbSA9IFtdLCByYW5nZVRvID0gW11cblxuOygoKSA9PiB7XG4gIC8vIENvbXByZXNzZWQgcmVwcmVzZW50YXRpb24gb2YgdGhlIEdyYXBoZW1lX0NsdXN0ZXJfQnJlYWs9RXh0ZW5kXG4gIC8vIGluZm9ybWF0aW9uIGZyb21cbiAgLy8gaHR0cDovL3d3dy51bmljb2RlLm9yZy9QdWJsaWMvMTYuMC4wL3VjZC9hdXhpbGlhcnkvR3JhcGhlbWVCcmVha1Byb3BlcnR5LnR4dC5cbiAgLy8gRWFjaCBwYWlyIG9mIGVsZW1lbnRzIHJlcHJlc2VudHMgYSByYW5nZSwgYXMgYW4gb2ZmZXQgZnJvbSB0aGVcbiAgLy8gcHJldmlvdXMgcmFuZ2UgYW5kIGEgbGVuZ3RoLiBOdW1iZXJzIGFyZSBpbiBiYXNlLTM2LCB3aXRoIHRoZSBlbXB0eVxuICAvLyBzdHJpbmcgYmVpbmcgYSBzaG9ydGhhbmQgZm9yIDEuXG4gIGxldCBudW1iZXJzID0gXCJsYywzNCw3biw3LDdiLDE5LCwsLDIsLDIsLCwyMCxiLDFjLGwsZywsMnQsNywyLDYsMiwyLCw0LHosLHUsciwyaixiLDFtLDksOSwsbyw0LCw5LCwzLCw1LDE3LDMsM2IsZiwsdywxaiwsLCw0LDgsNCwsMyw3LGEsMix0LCwxbSwsLCwyLDQsOCwsOSwsYSwyLHEsLDIsMiwxbCwsNCwyLDQsMiwyLDMsMywsdSwyLDMsLGIsMiwxbCwsNCw1LCwyLDQsLGssMixtLDYsLCwxbSwsLDIsLDQsOCwsNywzLGEsMix1LCwxbiwsLCxjLCw5LCwxNCwsMywsMWwsMyw1LDMsLDQsNywyLGIsMix0LCwxbSwsMiwsMiwsMywsNSwyLDcsMixiLDIscywyLDFsLDIsLCwyLDQsOCwsOSwsYSwyLHQsLDIwLCw0LCwyLDMsLCw4LCwyOSwsMiw3LGMsOCwycSwsMiw5LGIsNiwyMiwyLHIsLCwsLCwxaixlLCw1LCwyLDUsYiwsMTAsOSwsMnUsNCwsNiwsMiwyLDIscCwyLDQsMyxnLDQsZCwsMiwyLDYsLGYsLGpqLDMscWEsMyx0LDMsdCwyLHUsMiwxcywyLCw3LDgsLDIsYiw5LCwxOSwzLDNiLDIseSwsM2EsMyw0LDIsOSwsNiwzLDYzLDIsMiwsMW0sLCw3LCwsLCwyLDgsNixhLDIsLDFjLGgsMXIsNCwxYyw3LCwsNSwsMTQsOSxjLDIsdyw0LDIsMiwsMywxaywsLDIsMywsLDMsMW0sOCwyLDIsNDgsMywsZCwsNyw0LCw2LCwzLDIsNWksMW0sLDUsZWssLDVmLHgsMmRhLDMsM3gsLDJvLHcsZmUsNiwyeCwyLG45dyw0LCxhLHcsMiwyOCwyLDdrLCwzLCw0LCxwLDIsNSwsNDcsMixxLGksZCwsMTIsOCxwLGIsMWEsMywxYywsMiw0LDIsMiwxMywsMXYsNiwyLDIsMiwyLGMsLDgsLDFiLCwxZiwsLDMsMiwyLDUsMiwsLDE2LDIsOCwsNm0sLDIsLDQsLGZuNCwsa2gsZyxnLGcsYTYsMixndCwsNmEsLDQ1LDUsMWFlLDMsLDIsNSw0LDE0LDMsNCwsNGwsMixmeCw0LGFyLDIsNDksYiw0dywsMWksZiwxaywzLDFkLDQsMiwyLDF4LDMsMTAsNSwsOCwxcSwsYywyLDFnLDksYSw0LDIsLDJuLDMsMiwsLDIsNiwsNGcsLDMsOCxsLDIsMWwsMiwsLCwsbSwsZSw3LDMsNSw1Ziw4LDIsMywsLG4sLDI5LCwyLDYsLCwyLCwsMiwsMiw2aiwsMiw0LDYsMiwsMixyLDIsMmQsOCwyLCwsMiwyeSwsLCwyLDYsLCwydCwzLDIsNCwsNSw3Nyw5LCwyLDZ0LCxhLDIsLCw0LCw0MCw0LDIsMiw0LCx3LGEsMTQsNiwyLDQsOCwsOSw2LDIsMywxYSxkLCwyLGJhLDcsLDYsLCwyYSxtLDIsNywsMiwsMiwzZSw2LDMsLCwyLCw3LCwsMjAsMiwzLCwsLDluLDIsZjBiLDUsMW4sNyx0NCwsMXIsNCwyOSwsZjVrLDIsNDNxLCwsMyw0LDUsOCw4LDIsNyx1LDQsNDQsMywxaXosMWosNCwxZSw4LCxlLCxtLDUsLGYsMTFzLDcsLGgsMiw3LCwyLCw1LDc5LDcsYzUsNCwxNXMsNywzMSw3LDI0MCw1LGd4N2ssMm8sM2ssNm9cIi5zcGxpdChcIixcIikubWFwKHMgPT4gcyA/IHBhcnNlSW50KHMsIDM2KSA6IDEpXG4gIGZvciAobGV0IGkgPSAwLCBuID0gMDsgaSA8IG51bWJlcnMubGVuZ3RoOyBpKyspXG4gICAgKGkgJSAyID8gcmFuZ2VUbyA6IHJhbmdlRnJvbSkucHVzaChuID0gbiArIG51bWJlcnNbaV0pXG59KSgpXG5cbmV4cG9ydCBmdW5jdGlvbiBpc0V4dGVuZGluZ0NoYXIoY29kZSkge1xuICBpZiAoY29kZSA8IDc2OCkgcmV0dXJuIGZhbHNlXG4gIGZvciAobGV0IGZyb20gPSAwLCB0byA9IHJhbmdlRnJvbS5sZW5ndGg7Oykge1xuICAgIGxldCBtaWQgPSAoZnJvbSArIHRvKSA+PiAxXG4gICAgaWYgKGNvZGUgPCByYW5nZUZyb21bbWlkXSkgdG8gPSBtaWRcbiAgICBlbHNlIGlmIChjb2RlID49IHJhbmdlVG9bbWlkXSkgZnJvbSA9IG1pZCArIDFcbiAgICBlbHNlIHJldHVybiB0cnVlXG4gICAgaWYgKGZyb20gPT0gdG8pIHJldHVybiBmYWxzZVxuICB9XG59XG5cbmZ1bmN0aW9uIGlzUmVnaW9uYWxJbmRpY2F0b3IoY29kZSkge1xuICByZXR1cm4gY29kZSA+PSAweDFGMUU2ICYmIGNvZGUgPD0gMHgxRjFGRlxufVxuXG5mdW5jdGlvbiBjaGVjayhjb2RlKSB7XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgcmFuZ2VGcm9tLmxlbmd0aDsgaSsrKSB7XG4gICAgaWYgKHJhbmdlVG9baV0gPiBjb2RlKSByZXR1cm4gcmFuZ2VGcm9tW2ldIDw9IGNvZGVcbiAgfVxuICByZXR1cm4gZmFsc2Vcbn1cblxuY29uc3QgWldKID0gMHgyMDBkXG5cbmV4cG9ydCBmdW5jdGlvbiBmaW5kQ2x1c3RlckJyZWFrKHN0ciwgcG9zLCBmb3J3YXJkID0gdHJ1ZSwgaW5jbHVkZUV4dGVuZGluZyA9IHRydWUpIHtcbiAgcmV0dXJuIChmb3J3YXJkID8gbmV4dENsdXN0ZXJCcmVhayA6IHByZXZDbHVzdGVyQnJlYWspKHN0ciwgcG9zLCBpbmNsdWRlRXh0ZW5kaW5nKVxufVxuXG5mdW5jdGlvbiBuZXh0Q2x1c3RlckJyZWFrKHN0ciwgcG9zLCBpbmNsdWRlRXh0ZW5kaW5nKSB7XG4gIGlmIChwb3MgPT0gc3RyLmxlbmd0aCkgcmV0dXJuIHBvc1xuICAvLyBJZiBwb3MgaXMgaW4gdGhlIG1pZGRsZSBvZiBhIHN1cnJvZ2F0ZSBwYWlyLCBtb3ZlIHRvIGl0cyBzdGFydFxuICBpZiAocG9zICYmIHN1cnJvZ2F0ZUxvdyhzdHIuY2hhckNvZGVBdChwb3MpKSAmJiBzdXJyb2dhdGVIaWdoKHN0ci5jaGFyQ29kZUF0KHBvcyAtIDEpKSkgcG9zLS1cbiAgbGV0IHByZXYgPSBjb2RlUG9pbnRBdChzdHIsIHBvcylcbiAgcG9zICs9IGNvZGVQb2ludFNpemUocHJldilcbiAgd2hpbGUgKHBvcyA8IHN0ci5sZW5ndGgpIHtcbiAgICBsZXQgbmV4dCA9IGNvZGVQb2ludEF0KHN0ciwgcG9zKVxuICAgIGlmIChwcmV2ID09IFpXSiB8fCBuZXh0ID09IFpXSiB8fCBpbmNsdWRlRXh0ZW5kaW5nICYmIGlzRXh0ZW5kaW5nQ2hhcihuZXh0KSkge1xuICAgICAgcG9zICs9IGNvZGVQb2ludFNpemUobmV4dClcbiAgICAgIHByZXYgPSBuZXh0XG4gICAgfSBlbHNlIGlmIChpc1JlZ2lvbmFsSW5kaWNhdG9yKG5leHQpKSB7XG4gICAgICBsZXQgY291bnRCZWZvcmUgPSAwLCBpID0gcG9zIC0gMlxuICAgICAgd2hpbGUgKGkgPj0gMCAmJiBpc1JlZ2lvbmFsSW5kaWNhdG9yKGNvZGVQb2ludEF0KHN0ciwgaSkpKSB7IGNvdW50QmVmb3JlKys7IGkgLT0gMiB9XG4gICAgICBpZiAoY291bnRCZWZvcmUgJSAyID09IDApIGJyZWFrXG4gICAgICBlbHNlIHBvcyArPSAyXG4gICAgfSBlbHNlIHtcbiAgICAgIGJyZWFrXG4gICAgfVxuICB9XG4gIHJldHVybiBwb3Ncbn1cblxuZnVuY3Rpb24gcHJldkNsdXN0ZXJCcmVhayhzdHIsIHBvcywgaW5jbHVkZUV4dGVuZGluZykge1xuICB3aGlsZSAocG9zID4gMCkge1xuICAgIGxldCBmb3VuZCA9IG5leHRDbHVzdGVyQnJlYWsoc3RyLCBwb3MgLSAyLCBpbmNsdWRlRXh0ZW5kaW5nKVxuICAgIGlmIChmb3VuZCA8IHBvcykgcmV0dXJuIGZvdW5kXG4gICAgcG9zLS1cbiAgfVxuICByZXR1cm4gMFxufVxuXG5mdW5jdGlvbiBjb2RlUG9pbnRBdChzdHIsIHBvcykge1xuICBsZXQgY29kZTAgPSBzdHIuY2hhckNvZGVBdChwb3MpXG4gIGlmICghc3Vycm9nYXRlSGlnaChjb2RlMCkgfHwgcG9zICsgMSA9PSBzdHIubGVuZ3RoKSByZXR1cm4gY29kZTBcbiAgbGV0IGNvZGUxID0gc3RyLmNoYXJDb2RlQXQocG9zICsgMSlcbiAgaWYgKCFzdXJyb2dhdGVMb3coY29kZTEpKSByZXR1cm4gY29kZTBcbiAgcmV0dXJuICgoY29kZTAgLSAweGQ4MDApIDw8IDEwKSArIChjb2RlMSAtIDB4ZGMwMCkgKyAweDEwMDAwXG59XG5cbmZ1bmN0aW9uIHN1cnJvZ2F0ZUxvdyhjaCkgeyByZXR1cm4gY2ggPj0gMHhEQzAwICYmIGNoIDwgMHhFMDAwIH1cbmZ1bmN0aW9uIHN1cnJvZ2F0ZUhpZ2goY2gpIHsgcmV0dXJuIGNoID49IDB4RDgwMCAmJiBjaCA8IDB4REMwMCB9XG5mdW5jdGlvbiBjb2RlUG9pbnRTaXplKGNvZGUpIHsgcmV0dXJuIGNvZGUgPCAweDEwMDAwID8gMSA6IDIgfVxuIiwKICAgICJpbXBvcnQgeyBmaW5kQ2x1c3RlckJyZWFrIGFzIGZpbmRDbHVzdGVyQnJlYWskMSB9IGZyb20gJ0BtYXJpam4vZmluZC1jbHVzdGVyLWJyZWFrJztcblxuLyoqXG5UaGUgZGF0YSBzdHJ1Y3R1cmUgZm9yIGRvY3VtZW50cy4gQG5vbmFic3RyYWN0XG4qL1xuY2xhc3MgVGV4dCB7XG4gICAgLyoqXG4gICAgR2V0IHRoZSBsaW5lIGRlc2NyaXB0aW9uIGFyb3VuZCB0aGUgZ2l2ZW4gcG9zaXRpb24uXG4gICAgKi9cbiAgICBsaW5lQXQocG9zKSB7XG4gICAgICAgIGlmIChwb3MgPCAwIHx8IHBvcyA+IHRoaXMubGVuZ3RoKVxuICAgICAgICAgICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoYEludmFsaWQgcG9zaXRpb24gJHtwb3N9IGluIGRvY3VtZW50IG9mIGxlbmd0aCAke3RoaXMubGVuZ3RofWApO1xuICAgICAgICByZXR1cm4gdGhpcy5saW5lSW5uZXIocG9zLCBmYWxzZSwgMSwgMCk7XG4gICAgfVxuICAgIC8qKlxuICAgIEdldCB0aGUgZGVzY3JpcHRpb24gZm9yIHRoZSBnaXZlbiAoMS1iYXNlZCkgbGluZSBudW1iZXIuXG4gICAgKi9cbiAgICBsaW5lKG4pIHtcbiAgICAgICAgaWYgKG4gPCAxIHx8IG4gPiB0aGlzLmxpbmVzKVxuICAgICAgICAgICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoYEludmFsaWQgbGluZSBudW1iZXIgJHtufSBpbiAke3RoaXMubGluZXN9LWxpbmUgZG9jdW1lbnRgKTtcbiAgICAgICAgcmV0dXJuIHRoaXMubGluZUlubmVyKG4sIHRydWUsIDEsIDApO1xuICAgIH1cbiAgICAvKipcbiAgICBSZXBsYWNlIGEgcmFuZ2Ugb2YgdGhlIHRleHQgd2l0aCB0aGUgZ2l2ZW4gY29udGVudC5cbiAgICAqL1xuICAgIHJlcGxhY2UoZnJvbSwgdG8sIHRleHQpIHtcbiAgICAgICAgW2Zyb20sIHRvXSA9IGNsaXAodGhpcywgZnJvbSwgdG8pO1xuICAgICAgICBsZXQgcGFydHMgPSBbXTtcbiAgICAgICAgdGhpcy5kZWNvbXBvc2UoMCwgZnJvbSwgcGFydHMsIDIgLyogT3Blbi5UbyAqLyk7XG4gICAgICAgIGlmICh0ZXh0Lmxlbmd0aClcbiAgICAgICAgICAgIHRleHQuZGVjb21wb3NlKDAsIHRleHQubGVuZ3RoLCBwYXJ0cywgMSAvKiBPcGVuLkZyb20gKi8gfCAyIC8qIE9wZW4uVG8gKi8pO1xuICAgICAgICB0aGlzLmRlY29tcG9zZSh0bywgdGhpcy5sZW5ndGgsIHBhcnRzLCAxIC8qIE9wZW4uRnJvbSAqLyk7XG4gICAgICAgIHJldHVybiBUZXh0Tm9kZS5mcm9tKHBhcnRzLCB0aGlzLmxlbmd0aCAtICh0byAtIGZyb20pICsgdGV4dC5sZW5ndGgpO1xuICAgIH1cbiAgICAvKipcbiAgICBBcHBlbmQgYW5vdGhlciBkb2N1bWVudCB0byB0aGlzIG9uZS5cbiAgICAqL1xuICAgIGFwcGVuZChvdGhlcikge1xuICAgICAgICByZXR1cm4gdGhpcy5yZXBsYWNlKHRoaXMubGVuZ3RoLCB0aGlzLmxlbmd0aCwgb3RoZXIpO1xuICAgIH1cbiAgICAvKipcbiAgICBSZXRyaWV2ZSB0aGUgdGV4dCBiZXR3ZWVuIHRoZSBnaXZlbiBwb2ludHMuXG4gICAgKi9cbiAgICBzbGljZShmcm9tLCB0byA9IHRoaXMubGVuZ3RoKSB7XG4gICAgICAgIFtmcm9tLCB0b10gPSBjbGlwKHRoaXMsIGZyb20sIHRvKTtcbiAgICAgICAgbGV0IHBhcnRzID0gW107XG4gICAgICAgIHRoaXMuZGVjb21wb3NlKGZyb20sIHRvLCBwYXJ0cywgMCk7XG4gICAgICAgIHJldHVybiBUZXh0Tm9kZS5mcm9tKHBhcnRzLCB0byAtIGZyb20pO1xuICAgIH1cbiAgICAvKipcbiAgICBUZXN0IHdoZXRoZXIgdGhpcyB0ZXh0IGlzIGVxdWFsIHRvIGFub3RoZXIgaW5zdGFuY2UuXG4gICAgKi9cbiAgICBlcShvdGhlcikge1xuICAgICAgICBpZiAob3RoZXIgPT0gdGhpcylcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICBpZiAob3RoZXIubGVuZ3RoICE9IHRoaXMubGVuZ3RoIHx8IG90aGVyLmxpbmVzICE9IHRoaXMubGluZXMpXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIGxldCBzdGFydCA9IHRoaXMuc2NhbklkZW50aWNhbChvdGhlciwgMSksIGVuZCA9IHRoaXMubGVuZ3RoIC0gdGhpcy5zY2FuSWRlbnRpY2FsKG90aGVyLCAtMSk7XG4gICAgICAgIGxldCBhID0gbmV3IFJhd1RleHRDdXJzb3IodGhpcyksIGIgPSBuZXcgUmF3VGV4dEN1cnNvcihvdGhlcik7XG4gICAgICAgIGZvciAobGV0IHNraXAgPSBzdGFydCwgcG9zID0gc3RhcnQ7Oykge1xuICAgICAgICAgICAgYS5uZXh0KHNraXApO1xuICAgICAgICAgICAgYi5uZXh0KHNraXApO1xuICAgICAgICAgICAgc2tpcCA9IDA7XG4gICAgICAgICAgICBpZiAoYS5saW5lQnJlYWsgIT0gYi5saW5lQnJlYWsgfHwgYS5kb25lICE9IGIuZG9uZSB8fCBhLnZhbHVlICE9IGIudmFsdWUpXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgcG9zICs9IGEudmFsdWUubGVuZ3RoO1xuICAgICAgICAgICAgaWYgKGEuZG9uZSB8fCBwb3MgPj0gZW5kKVxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgIEl0ZXJhdGUgb3ZlciB0aGUgdGV4dC4gV2hlbiBgZGlyYCBpcyBgLTFgLCBpdGVyYXRpb24gaGFwcGVuc1xuICAgIGZyb20gZW5kIHRvIHN0YXJ0LiBUaGlzIHdpbGwgcmV0dXJuIGxpbmVzIGFuZCB0aGUgYnJlYWtzIGJldHdlZW5cbiAgICB0aGVtIGFzIHNlcGFyYXRlIHN0cmluZ3MuXG4gICAgKi9cbiAgICBpdGVyKGRpciA9IDEpIHsgcmV0dXJuIG5ldyBSYXdUZXh0Q3Vyc29yKHRoaXMsIGRpcik7IH1cbiAgICAvKipcbiAgICBJdGVyYXRlIG92ZXIgYSByYW5nZSBvZiB0aGUgdGV4dC4gV2hlbiBgZnJvbWAgPiBgdG9gLCB0aGVcbiAgICBpdGVyYXRvciB3aWxsIHJ1biBpbiByZXZlcnNlLlxuICAgICovXG4gICAgaXRlclJhbmdlKGZyb20sIHRvID0gdGhpcy5sZW5ndGgpIHsgcmV0dXJuIG5ldyBQYXJ0aWFsVGV4dEN1cnNvcih0aGlzLCBmcm9tLCB0byk7IH1cbiAgICAvKipcbiAgICBSZXR1cm4gYSBjdXJzb3IgdGhhdCBpdGVyYXRlcyBvdmVyIHRoZSBnaXZlbiByYW5nZSBvZiBsaW5lcyxcbiAgICBfd2l0aG91dF8gcmV0dXJuaW5nIHRoZSBsaW5lIGJyZWFrcyBiZXR3ZWVuLCBhbmQgeWllbGRpbmcgZW1wdHlcbiAgICBzdHJpbmdzIGZvciBlbXB0eSBsaW5lcy5cbiAgICBcbiAgICBXaGVuIGBmcm9tYCBhbmQgYHRvYCBhcmUgZ2l2ZW4sIHRoZXkgc2hvdWxkIGJlIDEtYmFzZWQgbGluZSBudW1iZXJzLlxuICAgICovXG4gICAgaXRlckxpbmVzKGZyb20sIHRvKSB7XG4gICAgICAgIGxldCBpbm5lcjtcbiAgICAgICAgaWYgKGZyb20gPT0gbnVsbCkge1xuICAgICAgICAgICAgaW5uZXIgPSB0aGlzLml0ZXIoKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGlmICh0byA9PSBudWxsKVxuICAgICAgICAgICAgICAgIHRvID0gdGhpcy5saW5lcyArIDE7XG4gICAgICAgICAgICBsZXQgc3RhcnQgPSB0aGlzLmxpbmUoZnJvbSkuZnJvbTtcbiAgICAgICAgICAgIGlubmVyID0gdGhpcy5pdGVyUmFuZ2Uoc3RhcnQsIE1hdGgubWF4KHN0YXJ0LCB0byA9PSB0aGlzLmxpbmVzICsgMSA/IHRoaXMubGVuZ3RoIDogdG8gPD0gMSA/IDAgOiB0aGlzLmxpbmUodG8gLSAxKS50bykpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgTGluZUN1cnNvcihpbm5lcik7XG4gICAgfVxuICAgIC8qKlxuICAgIFJldHVybiB0aGUgZG9jdW1lbnQgYXMgYSBzdHJpbmcsIHVzaW5nIG5ld2xpbmUgY2hhcmFjdGVycyB0b1xuICAgIHNlcGFyYXRlIGxpbmVzLlxuICAgICovXG4gICAgdG9TdHJpbmcoKSB7IHJldHVybiB0aGlzLnNsaWNlU3RyaW5nKDApOyB9XG4gICAgLyoqXG4gICAgQ29udmVydCB0aGUgZG9jdW1lbnQgdG8gYW4gYXJyYXkgb2YgbGluZXMgKHdoaWNoIGNhbiBiZVxuICAgIGRlc2VyaWFsaXplZCBhZ2FpbiB2aWEgW2BUZXh0Lm9mYF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNzdGF0ZS5UZXh0Xm9mKSkuXG4gICAgKi9cbiAgICB0b0pTT04oKSB7XG4gICAgICAgIGxldCBsaW5lcyA9IFtdO1xuICAgICAgICB0aGlzLmZsYXR0ZW4obGluZXMpO1xuICAgICAgICByZXR1cm4gbGluZXM7XG4gICAgfVxuICAgIC8qKlxuICAgIEBpbnRlcm5hbFxuICAgICovXG4gICAgY29uc3RydWN0b3IoKSB7IH1cbiAgICAvKipcbiAgICBDcmVhdGUgYSBgVGV4dGAgaW5zdGFuY2UgZm9yIHRoZSBnaXZlbiBhcnJheSBvZiBsaW5lcy5cbiAgICAqL1xuICAgIHN0YXRpYyBvZih0ZXh0KSB7XG4gICAgICAgIGlmICh0ZXh0Lmxlbmd0aCA9PSAwKVxuICAgICAgICAgICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoXCJBIGRvY3VtZW50IG11c3QgaGF2ZSBhdCBsZWFzdCBvbmUgbGluZVwiKTtcbiAgICAgICAgaWYgKHRleHQubGVuZ3RoID09IDEgJiYgIXRleHRbMF0pXG4gICAgICAgICAgICByZXR1cm4gVGV4dC5lbXB0eTtcbiAgICAgICAgcmV0dXJuIHRleHQubGVuZ3RoIDw9IDMyIC8qIFRyZWUuQnJhbmNoICovID8gbmV3IFRleHRMZWFmKHRleHQpIDogVGV4dE5vZGUuZnJvbShUZXh0TGVhZi5zcGxpdCh0ZXh0LCBbXSkpO1xuICAgIH1cbn1cbi8vIExlYXZlcyBzdG9yZSBhbiBhcnJheSBvZiBsaW5lIHN0cmluZ3MuIFRoZXJlIGFyZSBhbHdheXMgbGluZSBicmVha3Ncbi8vIGJldHdlZW4gdGhlc2Ugc3RyaW5ncy4gTGVhdmVzIGFyZSBsaW1pdGVkIGluIHNpemUgYW5kIGhhdmUgdG8gYmVcbi8vIGNvbnRhaW5lZCBpbiBUZXh0Tm9kZSBpbnN0YW5jZXMgZm9yIGJpZ2dlciBkb2N1bWVudHMuXG5jbGFzcyBUZXh0TGVhZiBleHRlbmRzIFRleHQge1xuICAgIGNvbnN0cnVjdG9yKHRleHQsIGxlbmd0aCA9IHRleHRMZW5ndGgodGV4dCkpIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy50ZXh0ID0gdGV4dDtcbiAgICAgICAgdGhpcy5sZW5ndGggPSBsZW5ndGg7XG4gICAgfVxuICAgIGdldCBsaW5lcygpIHsgcmV0dXJuIHRoaXMudGV4dC5sZW5ndGg7IH1cbiAgICBnZXQgY2hpbGRyZW4oKSB7IHJldHVybiBudWxsOyB9XG4gICAgbGluZUlubmVyKHRhcmdldCwgaXNMaW5lLCBsaW5lLCBvZmZzZXQpIHtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7OyBpKyspIHtcbiAgICAgICAgICAgIGxldCBzdHJpbmcgPSB0aGlzLnRleHRbaV0sIGVuZCA9IG9mZnNldCArIHN0cmluZy5sZW5ndGg7XG4gICAgICAgICAgICBpZiAoKGlzTGluZSA/IGxpbmUgOiBlbmQpID49IHRhcmdldClcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IExpbmUob2Zmc2V0LCBlbmQsIGxpbmUsIHN0cmluZyk7XG4gICAgICAgICAgICBvZmZzZXQgPSBlbmQgKyAxO1xuICAgICAgICAgICAgbGluZSsrO1xuICAgICAgICB9XG4gICAgfVxuICAgIGRlY29tcG9zZShmcm9tLCB0bywgdGFyZ2V0LCBvcGVuKSB7XG4gICAgICAgIGxldCB0ZXh0ID0gZnJvbSA8PSAwICYmIHRvID49IHRoaXMubGVuZ3RoID8gdGhpc1xuICAgICAgICAgICAgOiBuZXcgVGV4dExlYWYoc2xpY2VUZXh0KHRoaXMudGV4dCwgZnJvbSwgdG8pLCBNYXRoLm1pbih0bywgdGhpcy5sZW5ndGgpIC0gTWF0aC5tYXgoMCwgZnJvbSkpO1xuICAgICAgICBpZiAob3BlbiAmIDEgLyogT3Blbi5Gcm9tICovKSB7XG4gICAgICAgICAgICBsZXQgcHJldiA9IHRhcmdldC5wb3AoKTtcbiAgICAgICAgICAgIGxldCBqb2luZWQgPSBhcHBlbmRUZXh0KHRleHQudGV4dCwgcHJldi50ZXh0LnNsaWNlKCksIDAsIHRleHQubGVuZ3RoKTtcbiAgICAgICAgICAgIGlmIChqb2luZWQubGVuZ3RoIDw9IDMyIC8qIFRyZWUuQnJhbmNoICovKSB7XG4gICAgICAgICAgICAgICAgdGFyZ2V0LnB1c2gobmV3IFRleHRMZWFmKGpvaW5lZCwgcHJldi5sZW5ndGggKyB0ZXh0Lmxlbmd0aCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgbGV0IG1pZCA9IGpvaW5lZC5sZW5ndGggPj4gMTtcbiAgICAgICAgICAgICAgICB0YXJnZXQucHVzaChuZXcgVGV4dExlYWYoam9pbmVkLnNsaWNlKDAsIG1pZCkpLCBuZXcgVGV4dExlYWYoam9pbmVkLnNsaWNlKG1pZCkpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRhcmdldC5wdXNoKHRleHQpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJlcGxhY2UoZnJvbSwgdG8sIHRleHQpIHtcbiAgICAgICAgaWYgKCEodGV4dCBpbnN0YW5jZW9mIFRleHRMZWFmKSlcbiAgICAgICAgICAgIHJldHVybiBzdXBlci5yZXBsYWNlKGZyb20sIHRvLCB0ZXh0KTtcbiAgICAgICAgW2Zyb20sIHRvXSA9IGNsaXAodGhpcywgZnJvbSwgdG8pO1xuICAgICAgICBsZXQgbGluZXMgPSBhcHBlbmRUZXh0KHRoaXMudGV4dCwgYXBwZW5kVGV4dCh0ZXh0LnRleHQsIHNsaWNlVGV4dCh0aGlzLnRleHQsIDAsIGZyb20pKSwgdG8pO1xuICAgICAgICBsZXQgbmV3TGVuID0gdGhpcy5sZW5ndGggKyB0ZXh0Lmxlbmd0aCAtICh0byAtIGZyb20pO1xuICAgICAgICBpZiAobGluZXMubGVuZ3RoIDw9IDMyIC8qIFRyZWUuQnJhbmNoICovKVxuICAgICAgICAgICAgcmV0dXJuIG5ldyBUZXh0TGVhZihsaW5lcywgbmV3TGVuKTtcbiAgICAgICAgcmV0dXJuIFRleHROb2RlLmZyb20oVGV4dExlYWYuc3BsaXQobGluZXMsIFtdKSwgbmV3TGVuKTtcbiAgICB9XG4gICAgc2xpY2VTdHJpbmcoZnJvbSwgdG8gPSB0aGlzLmxlbmd0aCwgbGluZVNlcCA9IFwiXFxuXCIpIHtcbiAgICAgICAgW2Zyb20sIHRvXSA9IGNsaXAodGhpcywgZnJvbSwgdG8pO1xuICAgICAgICBsZXQgcmVzdWx0ID0gXCJcIjtcbiAgICAgICAgZm9yIChsZXQgcG9zID0gMCwgaSA9IDA7IHBvcyA8PSB0byAmJiBpIDwgdGhpcy50ZXh0Lmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBsZXQgbGluZSA9IHRoaXMudGV4dFtpXSwgZW5kID0gcG9zICsgbGluZS5sZW5ndGg7XG4gICAgICAgICAgICBpZiAocG9zID4gZnJvbSAmJiBpKVxuICAgICAgICAgICAgICAgIHJlc3VsdCArPSBsaW5lU2VwO1xuICAgICAgICAgICAgaWYgKGZyb20gPCBlbmQgJiYgdG8gPiBwb3MpXG4gICAgICAgICAgICAgICAgcmVzdWx0ICs9IGxpbmUuc2xpY2UoTWF0aC5tYXgoMCwgZnJvbSAtIHBvcyksIHRvIC0gcG9zKTtcbiAgICAgICAgICAgIHBvcyA9IGVuZCArIDE7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG4gICAgZmxhdHRlbih0YXJnZXQpIHtcbiAgICAgICAgZm9yIChsZXQgbGluZSBvZiB0aGlzLnRleHQpXG4gICAgICAgICAgICB0YXJnZXQucHVzaChsaW5lKTtcbiAgICB9XG4gICAgc2NhbklkZW50aWNhbCgpIHsgcmV0dXJuIDA7IH1cbiAgICBzdGF0aWMgc3BsaXQodGV4dCwgdGFyZ2V0KSB7XG4gICAgICAgIGxldCBwYXJ0ID0gW10sIGxlbiA9IC0xO1xuICAgICAgICBmb3IgKGxldCBsaW5lIG9mIHRleHQpIHtcbiAgICAgICAgICAgIHBhcnQucHVzaChsaW5lKTtcbiAgICAgICAgICAgIGxlbiArPSBsaW5lLmxlbmd0aCArIDE7XG4gICAgICAgICAgICBpZiAocGFydC5sZW5ndGggPT0gMzIgLyogVHJlZS5CcmFuY2ggKi8pIHtcbiAgICAgICAgICAgICAgICB0YXJnZXQucHVzaChuZXcgVGV4dExlYWYocGFydCwgbGVuKSk7XG4gICAgICAgICAgICAgICAgcGFydCA9IFtdO1xuICAgICAgICAgICAgICAgIGxlbiA9IC0xO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChsZW4gPiAtMSlcbiAgICAgICAgICAgIHRhcmdldC5wdXNoKG5ldyBUZXh0TGVhZihwYXJ0LCBsZW4pKTtcbiAgICAgICAgcmV0dXJuIHRhcmdldDtcbiAgICB9XG59XG4vLyBOb2RlcyBwcm92aWRlIHRoZSB0cmVlIHN0cnVjdHVyZSBvZiB0aGUgYFRleHRgIHR5cGUuIFRoZXkgc3RvcmUgYVxuLy8gbnVtYmVyIG9mIG90aGVyIG5vZGVzIG9yIGxlYXZlcywgdGFraW5nIGNhcmUgdG8gYmFsYW5jZSB0aGVtc2VsdmVzXG4vLyBvbiBjaGFuZ2VzLiBUaGVyZSBhcmUgaW1wbGllZCBsaW5lIGJyZWFrcyBfYmV0d2Vlbl8gdGhlIGNoaWxkcmVuIG9mXG4vLyBhIG5vZGUgKGJ1dCBub3QgYmVmb3JlIHRoZSBmaXJzdCBvciBhZnRlciB0aGUgbGFzdCBjaGlsZCkuXG5jbGFzcyBUZXh0Tm9kZSBleHRlbmRzIFRleHQge1xuICAgIGNvbnN0cnVjdG9yKGNoaWxkcmVuLCBsZW5ndGgpIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy5jaGlsZHJlbiA9IGNoaWxkcmVuO1xuICAgICAgICB0aGlzLmxlbmd0aCA9IGxlbmd0aDtcbiAgICAgICAgdGhpcy5saW5lcyA9IDA7XG4gICAgICAgIGZvciAobGV0IGNoaWxkIG9mIGNoaWxkcmVuKVxuICAgICAgICAgICAgdGhpcy5saW5lcyArPSBjaGlsZC5saW5lcztcbiAgICB9XG4gICAgbGluZUlubmVyKHRhcmdldCwgaXNMaW5lLCBsaW5lLCBvZmZzZXQpIHtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7OyBpKyspIHtcbiAgICAgICAgICAgIGxldCBjaGlsZCA9IHRoaXMuY2hpbGRyZW5baV0sIGVuZCA9IG9mZnNldCArIGNoaWxkLmxlbmd0aCwgZW5kTGluZSA9IGxpbmUgKyBjaGlsZC5saW5lcyAtIDE7XG4gICAgICAgICAgICBpZiAoKGlzTGluZSA/IGVuZExpbmUgOiBlbmQpID49IHRhcmdldClcbiAgICAgICAgICAgICAgICByZXR1cm4gY2hpbGQubGluZUlubmVyKHRhcmdldCwgaXNMaW5lLCBsaW5lLCBvZmZzZXQpO1xuICAgICAgICAgICAgb2Zmc2V0ID0gZW5kICsgMTtcbiAgICAgICAgICAgIGxpbmUgPSBlbmRMaW5lICsgMTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBkZWNvbXBvc2UoZnJvbSwgdG8sIHRhcmdldCwgb3Blbikge1xuICAgICAgICBmb3IgKGxldCBpID0gMCwgcG9zID0gMDsgcG9zIDw9IHRvICYmIGkgPCB0aGlzLmNoaWxkcmVuLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBsZXQgY2hpbGQgPSB0aGlzLmNoaWxkcmVuW2ldLCBlbmQgPSBwb3MgKyBjaGlsZC5sZW5ndGg7XG4gICAgICAgICAgICBpZiAoZnJvbSA8PSBlbmQgJiYgdG8gPj0gcG9zKSB7XG4gICAgICAgICAgICAgICAgbGV0IGNoaWxkT3BlbiA9IG9wZW4gJiAoKHBvcyA8PSBmcm9tID8gMSAvKiBPcGVuLkZyb20gKi8gOiAwKSB8IChlbmQgPj0gdG8gPyAyIC8qIE9wZW4uVG8gKi8gOiAwKSk7XG4gICAgICAgICAgICAgICAgaWYgKHBvcyA+PSBmcm9tICYmIGVuZCA8PSB0byAmJiAhY2hpbGRPcGVuKVxuICAgICAgICAgICAgICAgICAgICB0YXJnZXQucHVzaChjaGlsZCk7XG4gICAgICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgICAgICBjaGlsZC5kZWNvbXBvc2UoZnJvbSAtIHBvcywgdG8gLSBwb3MsIHRhcmdldCwgY2hpbGRPcGVuKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHBvcyA9IGVuZCArIDE7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmVwbGFjZShmcm9tLCB0bywgdGV4dCkge1xuICAgICAgICBbZnJvbSwgdG9dID0gY2xpcCh0aGlzLCBmcm9tLCB0byk7XG4gICAgICAgIGlmICh0ZXh0LmxpbmVzIDwgdGhpcy5saW5lcylcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwLCBwb3MgPSAwOyBpIDwgdGhpcy5jaGlsZHJlbi5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIGxldCBjaGlsZCA9IHRoaXMuY2hpbGRyZW5baV0sIGVuZCA9IHBvcyArIGNoaWxkLmxlbmd0aDtcbiAgICAgICAgICAgICAgICAvLyBGYXN0IHBhdGg6IGlmIHRoZSBjaGFuZ2Ugb25seSBhZmZlY3RzIG9uZSBjaGlsZCBhbmQgdGhlXG4gICAgICAgICAgICAgICAgLy8gY2hpbGQncyBzaXplIHJlbWFpbnMgaW4gdGhlIGFjY2VwdGFibGUgcmFuZ2UsIG9ubHkgdXBkYXRlXG4gICAgICAgICAgICAgICAgLy8gdGhhdCBjaGlsZFxuICAgICAgICAgICAgICAgIGlmIChmcm9tID49IHBvcyAmJiB0byA8PSBlbmQpIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IHVwZGF0ZWQgPSBjaGlsZC5yZXBsYWNlKGZyb20gLSBwb3MsIHRvIC0gcG9zLCB0ZXh0KTtcbiAgICAgICAgICAgICAgICAgICAgbGV0IHRvdGFsTGluZXMgPSB0aGlzLmxpbmVzIC0gY2hpbGQubGluZXMgKyB1cGRhdGVkLmxpbmVzO1xuICAgICAgICAgICAgICAgICAgICBpZiAodXBkYXRlZC5saW5lcyA8ICh0b3RhbExpbmVzID4+ICg1IC8qIFRyZWUuQnJhbmNoU2hpZnQgKi8gLSAxKSkgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgIHVwZGF0ZWQubGluZXMgPiAodG90YWxMaW5lcyA+PiAoNSAvKiBUcmVlLkJyYW5jaFNoaWZ0ICovICsgMSkpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgY29weSA9IHRoaXMuY2hpbGRyZW4uc2xpY2UoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvcHlbaV0gPSB1cGRhdGVkO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBUZXh0Tm9kZShjb3B5LCB0aGlzLmxlbmd0aCAtICh0byAtIGZyb20pICsgdGV4dC5sZW5ndGgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBzdXBlci5yZXBsYWNlKHBvcywgZW5kLCB1cGRhdGVkKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcG9zID0gZW5kICsgMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHN1cGVyLnJlcGxhY2UoZnJvbSwgdG8sIHRleHQpO1xuICAgIH1cbiAgICBzbGljZVN0cmluZyhmcm9tLCB0byA9IHRoaXMubGVuZ3RoLCBsaW5lU2VwID0gXCJcXG5cIikge1xuICAgICAgICBbZnJvbSwgdG9dID0gY2xpcCh0aGlzLCBmcm9tLCB0byk7XG4gICAgICAgIGxldCByZXN1bHQgPSBcIlwiO1xuICAgICAgICBmb3IgKGxldCBpID0gMCwgcG9zID0gMDsgaSA8IHRoaXMuY2hpbGRyZW4ubGVuZ3RoICYmIHBvcyA8PSB0bzsgaSsrKSB7XG4gICAgICAgICAgICBsZXQgY2hpbGQgPSB0aGlzLmNoaWxkcmVuW2ldLCBlbmQgPSBwb3MgKyBjaGlsZC5sZW5ndGg7XG4gICAgICAgICAgICBpZiAocG9zID4gZnJvbSAmJiBpKVxuICAgICAgICAgICAgICAgIHJlc3VsdCArPSBsaW5lU2VwO1xuICAgICAgICAgICAgaWYgKGZyb20gPCBlbmQgJiYgdG8gPiBwb3MpXG4gICAgICAgICAgICAgICAgcmVzdWx0ICs9IGNoaWxkLnNsaWNlU3RyaW5nKGZyb20gLSBwb3MsIHRvIC0gcG9zLCBsaW5lU2VwKTtcbiAgICAgICAgICAgIHBvcyA9IGVuZCArIDE7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG4gICAgZmxhdHRlbih0YXJnZXQpIHtcbiAgICAgICAgZm9yIChsZXQgY2hpbGQgb2YgdGhpcy5jaGlsZHJlbilcbiAgICAgICAgICAgIGNoaWxkLmZsYXR0ZW4odGFyZ2V0KTtcbiAgICB9XG4gICAgc2NhbklkZW50aWNhbChvdGhlciwgZGlyKSB7XG4gICAgICAgIGlmICghKG90aGVyIGluc3RhbmNlb2YgVGV4dE5vZGUpKVxuICAgICAgICAgICAgcmV0dXJuIDA7XG4gICAgICAgIGxldCBsZW5ndGggPSAwO1xuICAgICAgICBsZXQgW2lBLCBpQiwgZUEsIGVCXSA9IGRpciA+IDAgPyBbMCwgMCwgdGhpcy5jaGlsZHJlbi5sZW5ndGgsIG90aGVyLmNoaWxkcmVuLmxlbmd0aF1cbiAgICAgICAgICAgIDogW3RoaXMuY2hpbGRyZW4ubGVuZ3RoIC0gMSwgb3RoZXIuY2hpbGRyZW4ubGVuZ3RoIC0gMSwgLTEsIC0xXTtcbiAgICAgICAgZm9yICg7OyBpQSArPSBkaXIsIGlCICs9IGRpcikge1xuICAgICAgICAgICAgaWYgKGlBID09IGVBIHx8IGlCID09IGVCKVxuICAgICAgICAgICAgICAgIHJldHVybiBsZW5ndGg7XG4gICAgICAgICAgICBsZXQgY2hBID0gdGhpcy5jaGlsZHJlbltpQV0sIGNoQiA9IG90aGVyLmNoaWxkcmVuW2lCXTtcbiAgICAgICAgICAgIGlmIChjaEEgIT0gY2hCKVxuICAgICAgICAgICAgICAgIHJldHVybiBsZW5ndGggKyBjaEEuc2NhbklkZW50aWNhbChjaEIsIGRpcik7XG4gICAgICAgICAgICBsZW5ndGggKz0gY2hBLmxlbmd0aCArIDE7XG4gICAgICAgIH1cbiAgICB9XG4gICAgc3RhdGljIGZyb20oY2hpbGRyZW4sIGxlbmd0aCA9IGNoaWxkcmVuLnJlZHVjZSgobCwgY2gpID0+IGwgKyBjaC5sZW5ndGggKyAxLCAtMSkpIHtcbiAgICAgICAgbGV0IGxpbmVzID0gMDtcbiAgICAgICAgZm9yIChsZXQgY2ggb2YgY2hpbGRyZW4pXG4gICAgICAgICAgICBsaW5lcyArPSBjaC5saW5lcztcbiAgICAgICAgaWYgKGxpbmVzIDwgMzIgLyogVHJlZS5CcmFuY2ggKi8pIHtcbiAgICAgICAgICAgIGxldCBmbGF0ID0gW107XG4gICAgICAgICAgICBmb3IgKGxldCBjaCBvZiBjaGlsZHJlbilcbiAgICAgICAgICAgICAgICBjaC5mbGF0dGVuKGZsYXQpO1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBUZXh0TGVhZihmbGF0LCBsZW5ndGgpO1xuICAgICAgICB9XG4gICAgICAgIGxldCBjaHVuayA9IE1hdGgubWF4KDMyIC8qIFRyZWUuQnJhbmNoICovLCBsaW5lcyA+PiA1IC8qIFRyZWUuQnJhbmNoU2hpZnQgKi8pLCBtYXhDaHVuayA9IGNodW5rIDw8IDEsIG1pbkNodW5rID0gY2h1bmsgPj4gMTtcbiAgICAgICAgbGV0IGNodW5rZWQgPSBbXSwgY3VycmVudExpbmVzID0gMCwgY3VycmVudExlbiA9IC0xLCBjdXJyZW50Q2h1bmsgPSBbXTtcbiAgICAgICAgZnVuY3Rpb24gYWRkKGNoaWxkKSB7XG4gICAgICAgICAgICBsZXQgbGFzdDtcbiAgICAgICAgICAgIGlmIChjaGlsZC5saW5lcyA+IG1heENodW5rICYmIGNoaWxkIGluc3RhbmNlb2YgVGV4dE5vZGUpIHtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBub2RlIG9mIGNoaWxkLmNoaWxkcmVuKVxuICAgICAgICAgICAgICAgICAgICBhZGQobm9kZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGlsZC5saW5lcyA+IG1pbkNodW5rICYmIChjdXJyZW50TGluZXMgPiBtaW5DaHVuayB8fCAhY3VycmVudExpbmVzKSkge1xuICAgICAgICAgICAgICAgIGZsdXNoKCk7XG4gICAgICAgICAgICAgICAgY2h1bmtlZC5wdXNoKGNoaWxkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNoaWxkIGluc3RhbmNlb2YgVGV4dExlYWYgJiYgY3VycmVudExpbmVzICYmXG4gICAgICAgICAgICAgICAgKGxhc3QgPSBjdXJyZW50Q2h1bmtbY3VycmVudENodW5rLmxlbmd0aCAtIDFdKSBpbnN0YW5jZW9mIFRleHRMZWFmICYmXG4gICAgICAgICAgICAgICAgY2hpbGQubGluZXMgKyBsYXN0LmxpbmVzIDw9IDMyIC8qIFRyZWUuQnJhbmNoICovKSB7XG4gICAgICAgICAgICAgICAgY3VycmVudExpbmVzICs9IGNoaWxkLmxpbmVzO1xuICAgICAgICAgICAgICAgIGN1cnJlbnRMZW4gKz0gY2hpbGQubGVuZ3RoICsgMTtcbiAgICAgICAgICAgICAgICBjdXJyZW50Q2h1bmtbY3VycmVudENodW5rLmxlbmd0aCAtIDFdID0gbmV3IFRleHRMZWFmKGxhc3QudGV4dC5jb25jYXQoY2hpbGQudGV4dCksIGxhc3QubGVuZ3RoICsgMSArIGNoaWxkLmxlbmd0aCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBpZiAoY3VycmVudExpbmVzICsgY2hpbGQubGluZXMgPiBjaHVuaylcbiAgICAgICAgICAgICAgICAgICAgZmx1c2goKTtcbiAgICAgICAgICAgICAgICBjdXJyZW50TGluZXMgKz0gY2hpbGQubGluZXM7XG4gICAgICAgICAgICAgICAgY3VycmVudExlbiArPSBjaGlsZC5sZW5ndGggKyAxO1xuICAgICAgICAgICAgICAgIGN1cnJlbnRDaHVuay5wdXNoKGNoaWxkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBmdW5jdGlvbiBmbHVzaCgpIHtcbiAgICAgICAgICAgIGlmIChjdXJyZW50TGluZXMgPT0gMClcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICBjaHVua2VkLnB1c2goY3VycmVudENodW5rLmxlbmd0aCA9PSAxID8gY3VycmVudENodW5rWzBdIDogVGV4dE5vZGUuZnJvbShjdXJyZW50Q2h1bmssIGN1cnJlbnRMZW4pKTtcbiAgICAgICAgICAgIGN1cnJlbnRMZW4gPSAtMTtcbiAgICAgICAgICAgIGN1cnJlbnRMaW5lcyA9IGN1cnJlbnRDaHVuay5sZW5ndGggPSAwO1xuICAgICAgICB9XG4gICAgICAgIGZvciAobGV0IGNoaWxkIG9mIGNoaWxkcmVuKVxuICAgICAgICAgICAgYWRkKGNoaWxkKTtcbiAgICAgICAgZmx1c2goKTtcbiAgICAgICAgcmV0dXJuIGNodW5rZWQubGVuZ3RoID09IDEgPyBjaHVua2VkWzBdIDogbmV3IFRleHROb2RlKGNodW5rZWQsIGxlbmd0aCk7XG4gICAgfVxufVxuVGV4dC5lbXB0eSA9IC8qQF9fUFVSRV9fKi9uZXcgVGV4dExlYWYoW1wiXCJdLCAwKTtcbmZ1bmN0aW9uIHRleHRMZW5ndGgodGV4dCkge1xuICAgIGxldCBsZW5ndGggPSAtMTtcbiAgICBmb3IgKGxldCBsaW5lIG9mIHRleHQpXG4gICAgICAgIGxlbmd0aCArPSBsaW5lLmxlbmd0aCArIDE7XG4gICAgcmV0dXJuIGxlbmd0aDtcbn1cbmZ1bmN0aW9uIGFwcGVuZFRleHQodGV4dCwgdGFyZ2V0LCBmcm9tID0gMCwgdG8gPSAxZTkpIHtcbiAgICBmb3IgKGxldCBwb3MgPSAwLCBpID0gMCwgZmlyc3QgPSB0cnVlOyBpIDwgdGV4dC5sZW5ndGggJiYgcG9zIDw9IHRvOyBpKyspIHtcbiAgICAgICAgbGV0IGxpbmUgPSB0ZXh0W2ldLCBlbmQgPSBwb3MgKyBsaW5lLmxlbmd0aDtcbiAgICAgICAgaWYgKGVuZCA+PSBmcm9tKSB7XG4gICAgICAgICAgICBpZiAoZW5kID4gdG8pXG4gICAgICAgICAgICAgICAgbGluZSA9IGxpbmUuc2xpY2UoMCwgdG8gLSBwb3MpO1xuICAgICAgICAgICAgaWYgKHBvcyA8IGZyb20pXG4gICAgICAgICAgICAgICAgbGluZSA9IGxpbmUuc2xpY2UoZnJvbSAtIHBvcyk7XG4gICAgICAgICAgICBpZiAoZmlyc3QpIHtcbiAgICAgICAgICAgICAgICB0YXJnZXRbdGFyZ2V0Lmxlbmd0aCAtIDFdICs9IGxpbmU7XG4gICAgICAgICAgICAgICAgZmlyc3QgPSBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICB0YXJnZXQucHVzaChsaW5lKTtcbiAgICAgICAgfVxuICAgICAgICBwb3MgPSBlbmQgKyAxO1xuICAgIH1cbiAgICByZXR1cm4gdGFyZ2V0O1xufVxuZnVuY3Rpb24gc2xpY2VUZXh0KHRleHQsIGZyb20sIHRvKSB7XG4gICAgcmV0dXJuIGFwcGVuZFRleHQodGV4dCwgW1wiXCJdLCBmcm9tLCB0byk7XG59XG5jbGFzcyBSYXdUZXh0Q3Vyc29yIHtcbiAgICBjb25zdHJ1Y3Rvcih0ZXh0LCBkaXIgPSAxKSB7XG4gICAgICAgIHRoaXMuZGlyID0gZGlyO1xuICAgICAgICB0aGlzLmRvbmUgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5saW5lQnJlYWsgPSBmYWxzZTtcbiAgICAgICAgdGhpcy52YWx1ZSA9IFwiXCI7XG4gICAgICAgIHRoaXMubm9kZXMgPSBbdGV4dF07XG4gICAgICAgIHRoaXMub2Zmc2V0cyA9IFtkaXIgPiAwID8gMSA6ICh0ZXh0IGluc3RhbmNlb2YgVGV4dExlYWYgPyB0ZXh0LnRleHQubGVuZ3RoIDogdGV4dC5jaGlsZHJlbi5sZW5ndGgpIDw8IDFdO1xuICAgIH1cbiAgICBuZXh0SW5uZXIoc2tpcCwgZGlyKSB7XG4gICAgICAgIHRoaXMuZG9uZSA9IHRoaXMubGluZUJyZWFrID0gZmFsc2U7XG4gICAgICAgIGZvciAoOzspIHtcbiAgICAgICAgICAgIGxldCBsYXN0ID0gdGhpcy5ub2Rlcy5sZW5ndGggLSAxO1xuICAgICAgICAgICAgbGV0IHRvcCA9IHRoaXMubm9kZXNbbGFzdF0sIG9mZnNldFZhbHVlID0gdGhpcy5vZmZzZXRzW2xhc3RdLCBvZmZzZXQgPSBvZmZzZXRWYWx1ZSA+PiAxO1xuICAgICAgICAgICAgbGV0IHNpemUgPSB0b3AgaW5zdGFuY2VvZiBUZXh0TGVhZiA/IHRvcC50ZXh0Lmxlbmd0aCA6IHRvcC5jaGlsZHJlbi5sZW5ndGg7XG4gICAgICAgICAgICBpZiAob2Zmc2V0ID09IChkaXIgPiAwID8gc2l6ZSA6IDApKSB7XG4gICAgICAgICAgICAgICAgaWYgKGxhc3QgPT0gMCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmRvbmUgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnZhbHVlID0gXCJcIjtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChkaXIgPiAwKVxuICAgICAgICAgICAgICAgICAgICB0aGlzLm9mZnNldHNbbGFzdCAtIDFdKys7XG4gICAgICAgICAgICAgICAgdGhpcy5ub2Rlcy5wb3AoKTtcbiAgICAgICAgICAgICAgICB0aGlzLm9mZnNldHMucG9wKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICgob2Zmc2V0VmFsdWUgJiAxKSA9PSAoZGlyID4gMCA/IDAgOiAxKSkge1xuICAgICAgICAgICAgICAgIHRoaXMub2Zmc2V0c1tsYXN0XSArPSBkaXI7XG4gICAgICAgICAgICAgICAgaWYgKHNraXAgPT0gMCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmxpbmVCcmVhayA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudmFsdWUgPSBcIlxcblwiO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgc2tpcC0tO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAodG9wIGluc3RhbmNlb2YgVGV4dExlYWYpIHtcbiAgICAgICAgICAgICAgICAvLyBNb3ZlIHRvIHRoZSBuZXh0IHN0cmluZ1xuICAgICAgICAgICAgICAgIGxldCBuZXh0ID0gdG9wLnRleHRbb2Zmc2V0ICsgKGRpciA8IDAgPyAtMSA6IDApXTtcbiAgICAgICAgICAgICAgICB0aGlzLm9mZnNldHNbbGFzdF0gKz0gZGlyO1xuICAgICAgICAgICAgICAgIGlmIChuZXh0Lmxlbmd0aCA+IE1hdGgubWF4KDAsIHNraXApKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudmFsdWUgPSBza2lwID09IDAgPyBuZXh0IDogZGlyID4gMCA/IG5leHQuc2xpY2Uoc2tpcCkgOiBuZXh0LnNsaWNlKDAsIG5leHQubGVuZ3RoIC0gc2tpcCk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBza2lwIC09IG5leHQubGVuZ3RoO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgbGV0IG5leHQgPSB0b3AuY2hpbGRyZW5bb2Zmc2V0ICsgKGRpciA8IDAgPyAtMSA6IDApXTtcbiAgICAgICAgICAgICAgICBpZiAoc2tpcCA+IG5leHQubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIHNraXAgLT0gbmV4dC5sZW5ndGg7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMub2Zmc2V0c1tsYXN0XSArPSBkaXI7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBpZiAoZGlyIDwgMClcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMub2Zmc2V0c1tsYXN0XS0tO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLm5vZGVzLnB1c2gobmV4dCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMub2Zmc2V0cy5wdXNoKGRpciA+IDAgPyAxIDogKG5leHQgaW5zdGFuY2VvZiBUZXh0TGVhZiA/IG5leHQudGV4dC5sZW5ndGggOiBuZXh0LmNoaWxkcmVuLmxlbmd0aCkgPDwgMSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIG5leHQoc2tpcCA9IDApIHtcbiAgICAgICAgaWYgKHNraXAgPCAwKSB7XG4gICAgICAgICAgICB0aGlzLm5leHRJbm5lcigtc2tpcCwgKC10aGlzLmRpcikpO1xuICAgICAgICAgICAgc2tpcCA9IHRoaXMudmFsdWUubGVuZ3RoO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLm5leHRJbm5lcihza2lwLCB0aGlzLmRpcik7XG4gICAgfVxufVxuY2xhc3MgUGFydGlhbFRleHRDdXJzb3Ige1xuICAgIGNvbnN0cnVjdG9yKHRleHQsIHN0YXJ0LCBlbmQpIHtcbiAgICAgICAgdGhpcy52YWx1ZSA9IFwiXCI7XG4gICAgICAgIHRoaXMuZG9uZSA9IGZhbHNlO1xuICAgICAgICB0aGlzLmN1cnNvciA9IG5ldyBSYXdUZXh0Q3Vyc29yKHRleHQsIHN0YXJ0ID4gZW5kID8gLTEgOiAxKTtcbiAgICAgICAgdGhpcy5wb3MgPSBzdGFydCA+IGVuZCA/IHRleHQubGVuZ3RoIDogMDtcbiAgICAgICAgdGhpcy5mcm9tID0gTWF0aC5taW4oc3RhcnQsIGVuZCk7XG4gICAgICAgIHRoaXMudG8gPSBNYXRoLm1heChzdGFydCwgZW5kKTtcbiAgICB9XG4gICAgbmV4dElubmVyKHNraXAsIGRpcikge1xuICAgICAgICBpZiAoZGlyIDwgMCA/IHRoaXMucG9zIDw9IHRoaXMuZnJvbSA6IHRoaXMucG9zID49IHRoaXMudG8pIHtcbiAgICAgICAgICAgIHRoaXMudmFsdWUgPSBcIlwiO1xuICAgICAgICAgICAgdGhpcy5kb25lID0gdHJ1ZTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9XG4gICAgICAgIHNraXAgKz0gTWF0aC5tYXgoMCwgZGlyIDwgMCA/IHRoaXMucG9zIC0gdGhpcy50byA6IHRoaXMuZnJvbSAtIHRoaXMucG9zKTtcbiAgICAgICAgbGV0IGxpbWl0ID0gZGlyIDwgMCA/IHRoaXMucG9zIC0gdGhpcy5mcm9tIDogdGhpcy50byAtIHRoaXMucG9zO1xuICAgICAgICBpZiAoc2tpcCA+IGxpbWl0KVxuICAgICAgICAgICAgc2tpcCA9IGxpbWl0O1xuICAgICAgICBsaW1pdCAtPSBza2lwO1xuICAgICAgICBsZXQgeyB2YWx1ZSB9ID0gdGhpcy5jdXJzb3IubmV4dChza2lwKTtcbiAgICAgICAgdGhpcy5wb3MgKz0gKHZhbHVlLmxlbmd0aCArIHNraXApICogZGlyO1xuICAgICAgICB0aGlzLnZhbHVlID0gdmFsdWUubGVuZ3RoIDw9IGxpbWl0ID8gdmFsdWUgOiBkaXIgPCAwID8gdmFsdWUuc2xpY2UodmFsdWUubGVuZ3RoIC0gbGltaXQpIDogdmFsdWUuc2xpY2UoMCwgbGltaXQpO1xuICAgICAgICB0aGlzLmRvbmUgPSAhdGhpcy52YWx1ZTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIG5leHQoc2tpcCA9IDApIHtcbiAgICAgICAgaWYgKHNraXAgPCAwKVxuICAgICAgICAgICAgc2tpcCA9IE1hdGgubWF4KHNraXAsIHRoaXMuZnJvbSAtIHRoaXMucG9zKTtcbiAgICAgICAgZWxzZSBpZiAoc2tpcCA+IDApXG4gICAgICAgICAgICBza2lwID0gTWF0aC5taW4oc2tpcCwgdGhpcy50byAtIHRoaXMucG9zKTtcbiAgICAgICAgcmV0dXJuIHRoaXMubmV4dElubmVyKHNraXAsIHRoaXMuY3Vyc29yLmRpcik7XG4gICAgfVxuICAgIGdldCBsaW5lQnJlYWsoKSB7IHJldHVybiB0aGlzLmN1cnNvci5saW5lQnJlYWsgJiYgdGhpcy52YWx1ZSAhPSBcIlwiOyB9XG59XG5jbGFzcyBMaW5lQ3Vyc29yIHtcbiAgICBjb25zdHJ1Y3Rvcihpbm5lcikge1xuICAgICAgICB0aGlzLmlubmVyID0gaW5uZXI7XG4gICAgICAgIHRoaXMuYWZ0ZXJCcmVhayA9IHRydWU7XG4gICAgICAgIHRoaXMudmFsdWUgPSBcIlwiO1xuICAgICAgICB0aGlzLmRvbmUgPSBmYWxzZTtcbiAgICB9XG4gICAgbmV4dChza2lwID0gMCkge1xuICAgICAgICBsZXQgeyBkb25lLCBsaW5lQnJlYWssIHZhbHVlIH0gPSB0aGlzLmlubmVyLm5leHQoc2tpcCk7XG4gICAgICAgIGlmIChkb25lICYmIHRoaXMuYWZ0ZXJCcmVhaykge1xuICAgICAgICAgICAgdGhpcy52YWx1ZSA9IFwiXCI7XG4gICAgICAgICAgICB0aGlzLmFmdGVyQnJlYWsgPSBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChkb25lKSB7XG4gICAgICAgICAgICB0aGlzLmRvbmUgPSB0cnVlO1xuICAgICAgICAgICAgdGhpcy52YWx1ZSA9IFwiXCI7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAobGluZUJyZWFrKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5hZnRlckJyZWFrKSB7XG4gICAgICAgICAgICAgICAgdGhpcy52YWx1ZSA9IFwiXCI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLmFmdGVyQnJlYWsgPSB0cnVlO1xuICAgICAgICAgICAgICAgIHRoaXMubmV4dCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy52YWx1ZSA9IHZhbHVlO1xuICAgICAgICAgICAgdGhpcy5hZnRlckJyZWFrID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIGdldCBsaW5lQnJlYWsoKSB7IHJldHVybiBmYWxzZTsgfVxufVxuaWYgKHR5cGVvZiBTeW1ib2wgIT0gXCJ1bmRlZmluZWRcIikge1xuICAgIFRleHQucHJvdG90eXBlW1N5bWJvbC5pdGVyYXRvcl0gPSBmdW5jdGlvbiAoKSB7IHJldHVybiB0aGlzLml0ZXIoKTsgfTtcbiAgICBSYXdUZXh0Q3Vyc29yLnByb3RvdHlwZVtTeW1ib2wuaXRlcmF0b3JdID0gUGFydGlhbFRleHRDdXJzb3IucHJvdG90eXBlW1N5bWJvbC5pdGVyYXRvcl0gPVxuICAgICAgICBMaW5lQ3Vyc29yLnByb3RvdHlwZVtTeW1ib2wuaXRlcmF0b3JdID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpczsgfTtcbn1cbi8qKlxuVGhpcyB0eXBlIGRlc2NyaWJlcyBhIGxpbmUgaW4gdGhlIGRvY3VtZW50LiBJdCBpcyBjcmVhdGVkXG5vbi1kZW1hbmQgd2hlbiBsaW5lcyBhcmUgW3F1ZXJpZWRdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jc3RhdGUuVGV4dC5saW5lQXQpLlxuKi9cbmNsYXNzIExpbmUge1xuICAgIC8qKlxuICAgIEBpbnRlcm5hbFxuICAgICovXG4gICAgY29uc3RydWN0b3IoXG4gICAgLyoqXG4gICAgVGhlIHBvc2l0aW9uIG9mIHRoZSBzdGFydCBvZiB0aGUgbGluZS5cbiAgICAqL1xuICAgIGZyb20sIFxuICAgIC8qKlxuICAgIFRoZSBwb3NpdGlvbiBhdCB0aGUgZW5kIG9mIHRoZSBsaW5lIChfYmVmb3JlXyB0aGUgbGluZSBicmVhayxcbiAgICBvciBhdCB0aGUgZW5kIG9mIGRvY3VtZW50IGZvciB0aGUgbGFzdCBsaW5lKS5cbiAgICAqL1xuICAgIHRvLCBcbiAgICAvKipcbiAgICBUaGlzIGxpbmUncyBsaW5lIG51bWJlciAoMS1iYXNlZCkuXG4gICAgKi9cbiAgICBudW1iZXIsIFxuICAgIC8qKlxuICAgIFRoZSBsaW5lJ3MgY29udGVudC5cbiAgICAqL1xuICAgIHRleHQpIHtcbiAgICAgICAgdGhpcy5mcm9tID0gZnJvbTtcbiAgICAgICAgdGhpcy50byA9IHRvO1xuICAgICAgICB0aGlzLm51bWJlciA9IG51bWJlcjtcbiAgICAgICAgdGhpcy50ZXh0ID0gdGV4dDtcbiAgICB9XG4gICAgLyoqXG4gICAgVGhlIGxlbmd0aCBvZiB0aGUgbGluZSAobm90IGluY2x1ZGluZyBhbnkgbGluZSBicmVhayBhZnRlciBpdCkuXG4gICAgKi9cbiAgICBnZXQgbGVuZ3RoKCkgeyByZXR1cm4gdGhpcy50byAtIHRoaXMuZnJvbTsgfVxufVxuZnVuY3Rpb24gY2xpcCh0ZXh0LCBmcm9tLCB0bykge1xuICAgIGZyb20gPSBNYXRoLm1heCgwLCBNYXRoLm1pbih0ZXh0Lmxlbmd0aCwgZnJvbSkpO1xuICAgIHJldHVybiBbZnJvbSwgTWF0aC5tYXgoZnJvbSwgTWF0aC5taW4odGV4dC5sZW5ndGgsIHRvKSldO1xufVxuXG4vKipcblJldHVybnMgYSBuZXh0IGdyYXBoZW1lIGNsdXN0ZXIgYnJlYWsgX2FmdGVyXyAobm90IGVxdWFsIHRvKVxuYHBvc2AsIGlmIGBmb3J3YXJkYCBpcyB0cnVlLCBvciBiZWZvcmUgb3RoZXJ3aXNlLiBSZXR1cm5zIGBwb3NgXG5pdHNlbGYgaWYgbm8gZnVydGhlciBjbHVzdGVyIGJyZWFrIGlzIGF2YWlsYWJsZSBpbiB0aGUgc3RyaW5nLlxuTW92ZXMgYWNyb3NzIHN1cnJvZ2F0ZSBwYWlycywgZXh0ZW5kaW5nIGNoYXJhY3RlcnMgKHdoZW5cbmBpbmNsdWRlRXh0ZW5kaW5nYCBpcyB0cnVlKSwgY2hhcmFjdGVycyBqb2luZWQgd2l0aCB6ZXJvLXdpZHRoXG5qb2luZXJzLCBhbmQgZmxhZyBlbW9qaS5cbiovXG5mdW5jdGlvbiBmaW5kQ2x1c3RlckJyZWFrKHN0ciwgcG9zLCBmb3J3YXJkID0gdHJ1ZSwgaW5jbHVkZUV4dGVuZGluZyA9IHRydWUpIHtcbiAgICByZXR1cm4gZmluZENsdXN0ZXJCcmVhayQxKHN0ciwgcG9zLCBmb3J3YXJkLCBpbmNsdWRlRXh0ZW5kaW5nKTtcbn1cbmZ1bmN0aW9uIHN1cnJvZ2F0ZUxvdyhjaCkgeyByZXR1cm4gY2ggPj0gMHhEQzAwICYmIGNoIDwgMHhFMDAwOyB9XG5mdW5jdGlvbiBzdXJyb2dhdGVIaWdoKGNoKSB7IHJldHVybiBjaCA+PSAweEQ4MDAgJiYgY2ggPCAweERDMDA7IH1cbi8qKlxuRmluZCB0aGUgY29kZSBwb2ludCBhdCB0aGUgZ2l2ZW4gcG9zaXRpb24gaW4gYSBzdHJpbmcgKGxpa2UgdGhlXG5bYGNvZGVQb2ludEF0YF0oaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvSmF2YVNjcmlwdC9SZWZlcmVuY2UvR2xvYmFsX09iamVjdHMvU3RyaW5nL2NvZGVQb2ludEF0KVxuc3RyaW5nIG1ldGhvZCkuXG4qL1xuZnVuY3Rpb24gY29kZVBvaW50QXQoc3RyLCBwb3MpIHtcbiAgICBsZXQgY29kZTAgPSBzdHIuY2hhckNvZGVBdChwb3MpO1xuICAgIGlmICghc3Vycm9nYXRlSGlnaChjb2RlMCkgfHwgcG9zICsgMSA9PSBzdHIubGVuZ3RoKVxuICAgICAgICByZXR1cm4gY29kZTA7XG4gICAgbGV0IGNvZGUxID0gc3RyLmNoYXJDb2RlQXQocG9zICsgMSk7XG4gICAgaWYgKCFzdXJyb2dhdGVMb3coY29kZTEpKVxuICAgICAgICByZXR1cm4gY29kZTA7XG4gICAgcmV0dXJuICgoY29kZTAgLSAweGQ4MDApIDw8IDEwKSArIChjb2RlMSAtIDB4ZGMwMCkgKyAweDEwMDAwO1xufVxuLyoqXG5HaXZlbiBhIFVuaWNvZGUgY29kZXBvaW50LCByZXR1cm4gdGhlIEphdmFTY3JpcHQgc3RyaW5nIHRoYXRcbnJlc3ByZXNlbnRzIGl0IChsaWtlXG5bYFN0cmluZy5mcm9tQ29kZVBvaW50YF0oaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvSmF2YVNjcmlwdC9SZWZlcmVuY2UvR2xvYmFsX09iamVjdHMvU3RyaW5nL2Zyb21Db2RlUG9pbnQpKS5cbiovXG5mdW5jdGlvbiBmcm9tQ29kZVBvaW50KGNvZGUpIHtcbiAgICBpZiAoY29kZSA8PSAweGZmZmYpXG4gICAgICAgIHJldHVybiBTdHJpbmcuZnJvbUNoYXJDb2RlKGNvZGUpO1xuICAgIGNvZGUgLT0gMHgxMDAwMDtcbiAgICByZXR1cm4gU3RyaW5nLmZyb21DaGFyQ29kZSgoY29kZSA+PiAxMCkgKyAweGQ4MDAsIChjb2RlICYgMTAyMykgKyAweGRjMDApO1xufVxuLyoqXG5UaGUgYW1vdW50IG9mIHBvc2l0aW9ucyBhIGNoYXJhY3RlciB0YWtlcyB1cCBpbiBhIEphdmFTY3JpcHQgc3RyaW5nLlxuKi9cbmZ1bmN0aW9uIGNvZGVQb2ludFNpemUoY29kZSkgeyByZXR1cm4gY29kZSA8IDB4MTAwMDAgPyAxIDogMjsgfVxuXG5jb25zdCBEZWZhdWx0U3BsaXQgPSAvXFxyXFxuP3xcXG4vO1xuLyoqXG5EaXN0aW5ndWlzaGVzIGRpZmZlcmVudCB3YXlzIGluIHdoaWNoIHBvc2l0aW9ucyBjYW4gYmUgbWFwcGVkLlxuKi9cbnZhciBNYXBNb2RlID0gLypAX19QVVJFX18qLyhmdW5jdGlvbiAoTWFwTW9kZSkge1xuICAgIC8qKlxuICAgIE1hcCBhIHBvc2l0aW9uIHRvIGEgdmFsaWQgbmV3IHBvc2l0aW9uLCBldmVuIHdoZW4gaXRzIGNvbnRleHRcbiAgICB3YXMgZGVsZXRlZC5cbiAgICAqL1xuICAgIE1hcE1vZGVbTWFwTW9kZVtcIlNpbXBsZVwiXSA9IDBdID0gXCJTaW1wbGVcIjtcbiAgICAvKipcbiAgICBSZXR1cm4gbnVsbCBpZiBkZWxldGlvbiBoYXBwZW5zIGFjcm9zcyB0aGUgcG9zaXRpb24uXG4gICAgKi9cbiAgICBNYXBNb2RlW01hcE1vZGVbXCJUcmFja0RlbFwiXSA9IDFdID0gXCJUcmFja0RlbFwiO1xuICAgIC8qKlxuICAgIFJldHVybiBudWxsIGlmIHRoZSBjaGFyYWN0ZXIgX2JlZm9yZV8gdGhlIHBvc2l0aW9uIGlzIGRlbGV0ZWQuXG4gICAgKi9cbiAgICBNYXBNb2RlW01hcE1vZGVbXCJUcmFja0JlZm9yZVwiXSA9IDJdID0gXCJUcmFja0JlZm9yZVwiO1xuICAgIC8qKlxuICAgIFJldHVybiBudWxsIGlmIHRoZSBjaGFyYWN0ZXIgX2FmdGVyXyB0aGUgcG9zaXRpb24gaXMgZGVsZXRlZC5cbiAgICAqL1xuICAgIE1hcE1vZGVbTWFwTW9kZVtcIlRyYWNrQWZ0ZXJcIl0gPSAzXSA9IFwiVHJhY2tBZnRlclwiO1xucmV0dXJuIE1hcE1vZGV9KShNYXBNb2RlIHx8IChNYXBNb2RlID0ge30pKTtcbi8qKlxuQSBjaGFuZ2UgZGVzY3JpcHRpb24gaXMgYSB2YXJpYW50IG9mIFtjaGFuZ2Ugc2V0XShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI3N0YXRlLkNoYW5nZVNldClcbnRoYXQgZG9lc24ndCBzdG9yZSB0aGUgaW5zZXJ0ZWQgdGV4dC4gQXMgc3VjaCwgaXQgY2FuJ3QgYmVcbmFwcGxpZWQsIGJ1dCBpcyBjaGVhcGVyIHRvIHN0b3JlIGFuZCBtYW5pcHVsYXRlLlxuKi9cbmNsYXNzIENoYW5nZURlc2Mge1xuICAgIC8vIFNlY3Rpb25zIGFyZSBlbmNvZGVkIGFzIHBhaXJzIG9mIGludGVnZXJzLiBUaGUgZmlyc3QgaXMgdGhlXG4gICAgLy8gbGVuZ3RoIGluIHRoZSBjdXJyZW50IGRvY3VtZW50LCBhbmQgdGhlIHNlY29uZCBpcyAtMSBmb3JcbiAgICAvLyB1bmFmZmVjdGVkIHNlY3Rpb25zLCBhbmQgdGhlIGxlbmd0aCBvZiB0aGUgcmVwbGFjZW1lbnQgY29udGVudFxuICAgIC8vIG90aGVyd2lzZS4gU28gYW4gaW5zZXJ0aW9uIHdvdWxkIGJlICgwLCBuPjApLCBhIGRlbGV0aW9uIChuPjAsXG4gICAgLy8gMCksIGFuZCBhIHJlcGxhY2VtZW50IHR3byBwb3NpdGl2ZSBudW1iZXJzLlxuICAgIC8qKlxuICAgIEBpbnRlcm5hbFxuICAgICovXG4gICAgY29uc3RydWN0b3IoXG4gICAgLyoqXG4gICAgQGludGVybmFsXG4gICAgKi9cbiAgICBzZWN0aW9ucykge1xuICAgICAgICB0aGlzLnNlY3Rpb25zID0gc2VjdGlvbnM7XG4gICAgfVxuICAgIC8qKlxuICAgIFRoZSBsZW5ndGggb2YgdGhlIGRvY3VtZW50IGJlZm9yZSB0aGUgY2hhbmdlLlxuICAgICovXG4gICAgZ2V0IGxlbmd0aCgpIHtcbiAgICAgICAgbGV0IHJlc3VsdCA9IDA7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5zZWN0aW9ucy5sZW5ndGg7IGkgKz0gMilcbiAgICAgICAgICAgIHJlc3VsdCArPSB0aGlzLnNlY3Rpb25zW2ldO1xuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cbiAgICAvKipcbiAgICBUaGUgbGVuZ3RoIG9mIHRoZSBkb2N1bWVudCBhZnRlciB0aGUgY2hhbmdlLlxuICAgICovXG4gICAgZ2V0IG5ld0xlbmd0aCgpIHtcbiAgICAgICAgbGV0IHJlc3VsdCA9IDA7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5zZWN0aW9ucy5sZW5ndGg7IGkgKz0gMikge1xuICAgICAgICAgICAgbGV0IGlucyA9IHRoaXMuc2VjdGlvbnNbaSArIDFdO1xuICAgICAgICAgICAgcmVzdWx0ICs9IGlucyA8IDAgPyB0aGlzLnNlY3Rpb25zW2ldIDogaW5zO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuICAgIC8qKlxuICAgIEZhbHNlIHdoZW4gdGhlcmUgYXJlIGFjdHVhbCBjaGFuZ2VzIGluIHRoaXMgc2V0LlxuICAgICovXG4gICAgZ2V0IGVtcHR5KCkgeyByZXR1cm4gdGhpcy5zZWN0aW9ucy5sZW5ndGggPT0gMCB8fCB0aGlzLnNlY3Rpb25zLmxlbmd0aCA9PSAyICYmIHRoaXMuc2VjdGlvbnNbMV0gPCAwOyB9XG4gICAgLyoqXG4gICAgSXRlcmF0ZSBvdmVyIHRoZSB1bmNoYW5nZWQgcGFydHMgbGVmdCBieSB0aGVzZSBjaGFuZ2VzLiBgcG9zQWBcbiAgICBwcm92aWRlcyB0aGUgcG9zaXRpb24gb2YgdGhlIHJhbmdlIGluIHRoZSBvbGQgZG9jdW1lbnQsIGBwb3NCYFxuICAgIHRoZSBuZXcgcG9zaXRpb24gaW4gdGhlIGNoYW5nZWQgZG9jdW1lbnQuXG4gICAgKi9cbiAgICBpdGVyR2FwcyhmKSB7XG4gICAgICAgIGZvciAobGV0IGkgPSAwLCBwb3NBID0gMCwgcG9zQiA9IDA7IGkgPCB0aGlzLnNlY3Rpb25zLmxlbmd0aDspIHtcbiAgICAgICAgICAgIGxldCBsZW4gPSB0aGlzLnNlY3Rpb25zW2krK10sIGlucyA9IHRoaXMuc2VjdGlvbnNbaSsrXTtcbiAgICAgICAgICAgIGlmIChpbnMgPCAwKSB7XG4gICAgICAgICAgICAgICAgZihwb3NBLCBwb3NCLCBsZW4pO1xuICAgICAgICAgICAgICAgIHBvc0IgKz0gbGVuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcG9zQiArPSBpbnM7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBwb3NBICs9IGxlbjtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICBJdGVyYXRlIG92ZXIgdGhlIHJhbmdlcyBjaGFuZ2VkIGJ5IHRoZXNlIGNoYW5nZXMuIChTZWVcbiAgICBbYENoYW5nZVNldC5pdGVyQ2hhbmdlc2BdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jc3RhdGUuQ2hhbmdlU2V0Lml0ZXJDaGFuZ2VzKSBmb3IgYVxuICAgIHZhcmlhbnQgdGhhdCBhbHNvIHByb3ZpZGVzIHlvdSB3aXRoIHRoZSBpbnNlcnRlZCB0ZXh0LilcbiAgICBgZnJvbUFgL2B0b0FgIHByb3ZpZGVzIHRoZSBleHRlbnQgb2YgdGhlIGNoYW5nZSBpbiB0aGUgc3RhcnRpbmdcbiAgICBkb2N1bWVudCwgYGZyb21CYC9gdG9CYCB0aGUgZXh0ZW50IG9mIHRoZSByZXBsYWNlbWVudCBpbiB0aGVcbiAgICBjaGFuZ2VkIGRvY3VtZW50LlxuICAgIFxuICAgIFdoZW4gYGluZGl2aWR1YWxgIGlzIHRydWUsIGFkamFjZW50IGNoYW5nZXMgKHdoaWNoIGFyZSBrZXB0XG4gICAgc2VwYXJhdGUgZm9yIFtwb3NpdGlvbiBtYXBwaW5nXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI3N0YXRlLkNoYW5nZURlc2MubWFwUG9zKSkgYXJlXG4gICAgcmVwb3J0ZWQgc2VwYXJhdGVseS5cbiAgICAqL1xuICAgIGl0ZXJDaGFuZ2VkUmFuZ2VzKGYsIGluZGl2aWR1YWwgPSBmYWxzZSkge1xuICAgICAgICBpdGVyQ2hhbmdlcyh0aGlzLCBmLCBpbmRpdmlkdWFsKTtcbiAgICB9XG4gICAgLyoqXG4gICAgR2V0IGEgZGVzY3JpcHRpb24gb2YgdGhlIGludmVydGVkIGZvcm0gb2YgdGhlc2UgY2hhbmdlcy5cbiAgICAqL1xuICAgIGdldCBpbnZlcnRlZERlc2MoKSB7XG4gICAgICAgIGxldCBzZWN0aW9ucyA9IFtdO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuc2VjdGlvbnMubGVuZ3RoOykge1xuICAgICAgICAgICAgbGV0IGxlbiA9IHRoaXMuc2VjdGlvbnNbaSsrXSwgaW5zID0gdGhpcy5zZWN0aW9uc1tpKytdO1xuICAgICAgICAgICAgaWYgKGlucyA8IDApXG4gICAgICAgICAgICAgICAgc2VjdGlvbnMucHVzaChsZW4sIGlucyk7XG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgc2VjdGlvbnMucHVzaChpbnMsIGxlbik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBDaGFuZ2VEZXNjKHNlY3Rpb25zKTtcbiAgICB9XG4gICAgLyoqXG4gICAgQ29tcHV0ZSB0aGUgY29tYmluZWQgZWZmZWN0IG9mIGFwcGx5aW5nIGFub3RoZXIgc2V0IG9mIGNoYW5nZXNcbiAgICBhZnRlciB0aGlzIG9uZS4gVGhlIGxlbmd0aCBvZiB0aGUgZG9jdW1lbnQgYWZ0ZXIgdGhpcyBzZXQgc2hvdWxkXG4gICAgbWF0Y2ggdGhlIGxlbmd0aCBiZWZvcmUgYG90aGVyYC5cbiAgICAqL1xuICAgIGNvbXBvc2VEZXNjKG90aGVyKSB7IHJldHVybiB0aGlzLmVtcHR5ID8gb3RoZXIgOiBvdGhlci5lbXB0eSA/IHRoaXMgOiBjb21wb3NlU2V0cyh0aGlzLCBvdGhlcik7IH1cbiAgICAvKipcbiAgICBNYXAgdGhpcyBkZXNjcmlwdGlvbiwgd2hpY2ggc2hvdWxkIHN0YXJ0IHdpdGggdGhlIHNhbWUgZG9jdW1lbnRcbiAgICBhcyBgb3RoZXJgLCBvdmVyIGFub3RoZXIgc2V0IG9mIGNoYW5nZXMsIHNvIHRoYXQgaXQgY2FuIGJlXG4gICAgYXBwbGllZCBhZnRlciBpdC4gV2hlbiBgYmVmb3JlYCBpcyB0cnVlLCBtYXAgYXMgaWYgdGhlIGNoYW5nZXNcbiAgICBpbiBgdGhpc2AgaGFwcGVuZWQgYmVmb3JlIHRoZSBvbmVzIGluIGBvdGhlcmAuXG4gICAgKi9cbiAgICBtYXBEZXNjKG90aGVyLCBiZWZvcmUgPSBmYWxzZSkgeyByZXR1cm4gb3RoZXIuZW1wdHkgPyB0aGlzIDogbWFwU2V0KHRoaXMsIG90aGVyLCBiZWZvcmUpOyB9XG4gICAgbWFwUG9zKHBvcywgYXNzb2MgPSAtMSwgbW9kZSA9IE1hcE1vZGUuU2ltcGxlKSB7XG4gICAgICAgIGxldCBwb3NBID0gMCwgcG9zQiA9IDA7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5zZWN0aW9ucy5sZW5ndGg7KSB7XG4gICAgICAgICAgICBsZXQgbGVuID0gdGhpcy5zZWN0aW9uc1tpKytdLCBpbnMgPSB0aGlzLnNlY3Rpb25zW2krK10sIGVuZEEgPSBwb3NBICsgbGVuO1xuICAgICAgICAgICAgaWYgKGlucyA8IDApIHtcbiAgICAgICAgICAgICAgICBpZiAoZW5kQSA+IHBvcylcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHBvc0IgKyAocG9zIC0gcG9zQSk7XG4gICAgICAgICAgICAgICAgcG9zQiArPSBsZW47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBpZiAobW9kZSAhPSBNYXBNb2RlLlNpbXBsZSAmJiBlbmRBID49IHBvcyAmJlxuICAgICAgICAgICAgICAgICAgICAobW9kZSA9PSBNYXBNb2RlLlRyYWNrRGVsICYmIHBvc0EgPCBwb3MgJiYgZW5kQSA+IHBvcyB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgbW9kZSA9PSBNYXBNb2RlLlRyYWNrQmVmb3JlICYmIHBvc0EgPCBwb3MgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1vZGUgPT0gTWFwTW9kZS5UcmFja0FmdGVyICYmIGVuZEEgPiBwb3MpKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgICAgICBpZiAoZW5kQSA+IHBvcyB8fCBlbmRBID09IHBvcyAmJiBhc3NvYyA8IDAgJiYgIWxlbilcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHBvcyA9PSBwb3NBIHx8IGFzc29jIDwgMCA/IHBvc0IgOiBwb3NCICsgaW5zO1xuICAgICAgICAgICAgICAgIHBvc0IgKz0gaW5zO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcG9zQSA9IGVuZEE7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHBvcyA+IHBvc0EpXG4gICAgICAgICAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcihgUG9zaXRpb24gJHtwb3N9IGlzIG91dCBvZiByYW5nZSBmb3IgY2hhbmdlc2V0IG9mIGxlbmd0aCAke3Bvc0F9YCk7XG4gICAgICAgIHJldHVybiBwb3NCO1xuICAgIH1cbiAgICAvKipcbiAgICBDaGVjayB3aGV0aGVyIHRoZXNlIGNoYW5nZXMgdG91Y2ggYSBnaXZlbiByYW5nZS4gV2hlbiBvbmUgb2YgdGhlXG4gICAgY2hhbmdlcyBlbnRpcmVseSBjb3ZlcnMgdGhlIHJhbmdlLCB0aGUgc3RyaW5nIGBcImNvdmVyXCJgIGlzXG4gICAgcmV0dXJuZWQuXG4gICAgKi9cbiAgICB0b3VjaGVzUmFuZ2UoZnJvbSwgdG8gPSBmcm9tKSB7XG4gICAgICAgIGZvciAobGV0IGkgPSAwLCBwb3MgPSAwOyBpIDwgdGhpcy5zZWN0aW9ucy5sZW5ndGggJiYgcG9zIDw9IHRvOykge1xuICAgICAgICAgICAgbGV0IGxlbiA9IHRoaXMuc2VjdGlvbnNbaSsrXSwgaW5zID0gdGhpcy5zZWN0aW9uc1tpKytdLCBlbmQgPSBwb3MgKyBsZW47XG4gICAgICAgICAgICBpZiAoaW5zID49IDAgJiYgcG9zIDw9IHRvICYmIGVuZCA+PSBmcm9tKVxuICAgICAgICAgICAgICAgIHJldHVybiBwb3MgPCBmcm9tICYmIGVuZCA+IHRvID8gXCJjb3ZlclwiIDogdHJ1ZTtcbiAgICAgICAgICAgIHBvcyA9IGVuZDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIC8qKlxuICAgIEBpbnRlcm5hbFxuICAgICovXG4gICAgdG9TdHJpbmcoKSB7XG4gICAgICAgIGxldCByZXN1bHQgPSBcIlwiO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuc2VjdGlvbnMubGVuZ3RoOykge1xuICAgICAgICAgICAgbGV0IGxlbiA9IHRoaXMuc2VjdGlvbnNbaSsrXSwgaW5zID0gdGhpcy5zZWN0aW9uc1tpKytdO1xuICAgICAgICAgICAgcmVzdWx0ICs9IChyZXN1bHQgPyBcIiBcIiA6IFwiXCIpICsgbGVuICsgKGlucyA+PSAwID8gXCI6XCIgKyBpbnMgOiBcIlwiKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cbiAgICAvKipcbiAgICBTZXJpYWxpemUgdGhpcyBjaGFuZ2UgZGVzYyB0byBhIEpTT04tcmVwcmVzZW50YWJsZSB2YWx1ZS5cbiAgICAqL1xuICAgIHRvSlNPTigpIHsgcmV0dXJuIHRoaXMuc2VjdGlvbnM7IH1cbiAgICAvKipcbiAgICBDcmVhdGUgYSBjaGFuZ2UgZGVzYyBmcm9tIGl0cyBKU09OIHJlcHJlc2VudGF0aW9uIChhcyBwcm9kdWNlZFxuICAgIGJ5IFtgdG9KU09OYF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNzdGF0ZS5DaGFuZ2VEZXNjLnRvSlNPTikuXG4gICAgKi9cbiAgICBzdGF0aWMgZnJvbUpTT04oanNvbikge1xuICAgICAgICBpZiAoIUFycmF5LmlzQXJyYXkoanNvbikgfHwganNvbi5sZW5ndGggJSAyIHx8IGpzb24uc29tZShhID0+IHR5cGVvZiBhICE9IFwibnVtYmVyXCIpKVxuICAgICAgICAgICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoXCJJbnZhbGlkIEpTT04gcmVwcmVzZW50YXRpb24gb2YgQ2hhbmdlRGVzY1wiKTtcbiAgICAgICAgcmV0dXJuIG5ldyBDaGFuZ2VEZXNjKGpzb24pO1xuICAgIH1cbiAgICAvKipcbiAgICBAaW50ZXJuYWxcbiAgICAqL1xuICAgIHN0YXRpYyBjcmVhdGUoc2VjdGlvbnMpIHsgcmV0dXJuIG5ldyBDaGFuZ2VEZXNjKHNlY3Rpb25zKTsgfVxufVxuLyoqXG5BIGNoYW5nZSBzZXQgcmVwcmVzZW50cyBhIGdyb3VwIG9mIG1vZGlmaWNhdGlvbnMgdG8gYSBkb2N1bWVudC4gSXRcbnN0b3JlcyB0aGUgZG9jdW1lbnQgbGVuZ3RoLCBhbmQgY2FuIG9ubHkgYmUgYXBwbGllZCB0byBkb2N1bWVudHNcbndpdGggZXhhY3RseSB0aGF0IGxlbmd0aC5cbiovXG5jbGFzcyBDaGFuZ2VTZXQgZXh0ZW5kcyBDaGFuZ2VEZXNjIHtcbiAgICBjb25zdHJ1Y3RvcihzZWN0aW9ucywgXG4gICAgLyoqXG4gICAgQGludGVybmFsXG4gICAgKi9cbiAgICBpbnNlcnRlZCkge1xuICAgICAgICBzdXBlcihzZWN0aW9ucyk7XG4gICAgICAgIHRoaXMuaW5zZXJ0ZWQgPSBpbnNlcnRlZDtcbiAgICB9XG4gICAgLyoqXG4gICAgQXBwbHkgdGhlIGNoYW5nZXMgdG8gYSBkb2N1bWVudCwgcmV0dXJuaW5nIHRoZSBtb2RpZmllZFxuICAgIGRvY3VtZW50LlxuICAgICovXG4gICAgYXBwbHkoZG9jKSB7XG4gICAgICAgIGlmICh0aGlzLmxlbmd0aCAhPSBkb2MubGVuZ3RoKVxuICAgICAgICAgICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoXCJBcHBseWluZyBjaGFuZ2Ugc2V0IHRvIGEgZG9jdW1lbnQgd2l0aCB0aGUgd3JvbmcgbGVuZ3RoXCIpO1xuICAgICAgICBpdGVyQ2hhbmdlcyh0aGlzLCAoZnJvbUEsIHRvQSwgZnJvbUIsIF90b0IsIHRleHQpID0+IGRvYyA9IGRvYy5yZXBsYWNlKGZyb21CLCBmcm9tQiArICh0b0EgLSBmcm9tQSksIHRleHQpLCBmYWxzZSk7XG4gICAgICAgIHJldHVybiBkb2M7XG4gICAgfVxuICAgIG1hcERlc2Mob3RoZXIsIGJlZm9yZSA9IGZhbHNlKSB7IHJldHVybiBtYXBTZXQodGhpcywgb3RoZXIsIGJlZm9yZSwgdHJ1ZSk7IH1cbiAgICAvKipcbiAgICBHaXZlbiB0aGUgZG9jdW1lbnQgYXMgaXQgZXhpc3RlZCBfYmVmb3JlXyB0aGUgY2hhbmdlcywgcmV0dXJuIGFcbiAgICBjaGFuZ2Ugc2V0IHRoYXQgcmVwcmVzZW50cyB0aGUgaW52ZXJzZSBvZiB0aGlzIHNldCwgd2hpY2ggY291bGRcbiAgICBiZSB1c2VkIHRvIGdvIGZyb20gdGhlIGRvY3VtZW50IGNyZWF0ZWQgYnkgdGhlIGNoYW5nZXMgYmFjayB0b1xuICAgIHRoZSBkb2N1bWVudCBhcyBpdCBleGlzdGVkIGJlZm9yZSB0aGUgY2hhbmdlcy5cbiAgICAqL1xuICAgIGludmVydChkb2MpIHtcbiAgICAgICAgbGV0IHNlY3Rpb25zID0gdGhpcy5zZWN0aW9ucy5zbGljZSgpLCBpbnNlcnRlZCA9IFtdO1xuICAgICAgICBmb3IgKGxldCBpID0gMCwgcG9zID0gMDsgaSA8IHNlY3Rpb25zLmxlbmd0aDsgaSArPSAyKSB7XG4gICAgICAgICAgICBsZXQgbGVuID0gc2VjdGlvbnNbaV0sIGlucyA9IHNlY3Rpb25zW2kgKyAxXTtcbiAgICAgICAgICAgIGlmIChpbnMgPj0gMCkge1xuICAgICAgICAgICAgICAgIHNlY3Rpb25zW2ldID0gaW5zO1xuICAgICAgICAgICAgICAgIHNlY3Rpb25zW2kgKyAxXSA9IGxlbjtcbiAgICAgICAgICAgICAgICBsZXQgaW5kZXggPSBpID4+IDE7XG4gICAgICAgICAgICAgICAgd2hpbGUgKGluc2VydGVkLmxlbmd0aCA8IGluZGV4KVxuICAgICAgICAgICAgICAgICAgICBpbnNlcnRlZC5wdXNoKFRleHQuZW1wdHkpO1xuICAgICAgICAgICAgICAgIGluc2VydGVkLnB1c2gobGVuID8gZG9jLnNsaWNlKHBvcywgcG9zICsgbGVuKSA6IFRleHQuZW1wdHkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcG9zICs9IGxlbjtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbmV3IENoYW5nZVNldChzZWN0aW9ucywgaW5zZXJ0ZWQpO1xuICAgIH1cbiAgICAvKipcbiAgICBDb21iaW5lIHR3byBzdWJzZXF1ZW50IGNoYW5nZSBzZXRzIGludG8gYSBzaW5nbGUgc2V0LiBgb3RoZXJgXG4gICAgbXVzdCBzdGFydCBpbiB0aGUgZG9jdW1lbnQgcHJvZHVjZWQgYnkgYHRoaXNgLiBJZiBgdGhpc2AgZ29lc1xuICAgIGBkb2NBYCDihpIgYGRvY0JgIGFuZCBgb3RoZXJgIHJlcHJlc2VudHMgYGRvY0JgIOKGkiBgZG9jQ2AsIHRoZVxuICAgIHJldHVybmVkIHZhbHVlIHdpbGwgcmVwcmVzZW50IHRoZSBjaGFuZ2UgYGRvY0FgIOKGkiBgZG9jQ2AuXG4gICAgKi9cbiAgICBjb21wb3NlKG90aGVyKSB7IHJldHVybiB0aGlzLmVtcHR5ID8gb3RoZXIgOiBvdGhlci5lbXB0eSA/IHRoaXMgOiBjb21wb3NlU2V0cyh0aGlzLCBvdGhlciwgdHJ1ZSk7IH1cbiAgICAvKipcbiAgICBHaXZlbiBhbm90aGVyIGNoYW5nZSBzZXQgc3RhcnRpbmcgaW4gdGhlIHNhbWUgZG9jdW1lbnQsIG1hcHMgdGhpc1xuICAgIGNoYW5nZSBzZXQgb3ZlciB0aGUgb3RoZXIsIHByb2R1Y2luZyBhIG5ldyBjaGFuZ2Ugc2V0IHRoYXQgY2FuIGJlXG4gICAgYXBwbGllZCB0byB0aGUgZG9jdW1lbnQgcHJvZHVjZWQgYnkgYXBwbHlpbmcgYG90aGVyYC4gV2hlblxuICAgIGBiZWZvcmVgIGlzIGB0cnVlYCwgb3JkZXIgY2hhbmdlcyBhcyBpZiBgdGhpc2AgY29tZXMgYmVmb3JlXG4gICAgYG90aGVyYCwgb3RoZXJ3aXNlICh0aGUgZGVmYXVsdCkgdHJlYXQgYG90aGVyYCBhcyBjb21pbmcgZmlyc3QuXG4gICAgXG4gICAgR2l2ZW4gdHdvIGNoYW5nZXMgYEFgIGFuZCBgQmAsIGBBLmNvbXBvc2UoQi5tYXAoQSkpYCBhbmRcbiAgICBgQi5jb21wb3NlKEEubWFwKEIsIHRydWUpKWAgd2lsbCBwcm9kdWNlIHRoZSBzYW1lIGRvY3VtZW50LiBUaGlzXG4gICAgcHJvdmlkZXMgYSBiYXNpYyBmb3JtIG9mIFtvcGVyYXRpb25hbFxuICAgIHRyYW5zZm9ybWF0aW9uXShodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9PcGVyYXRpb25hbF90cmFuc2Zvcm1hdGlvbiksXG4gICAgYW5kIGNhbiBiZSB1c2VkIGZvciBjb2xsYWJvcmF0aXZlIGVkaXRpbmcuXG4gICAgKi9cbiAgICBtYXAob3RoZXIsIGJlZm9yZSA9IGZhbHNlKSB7IHJldHVybiBvdGhlci5lbXB0eSA/IHRoaXMgOiBtYXBTZXQodGhpcywgb3RoZXIsIGJlZm9yZSwgdHJ1ZSk7IH1cbiAgICAvKipcbiAgICBJdGVyYXRlIG92ZXIgdGhlIGNoYW5nZWQgcmFuZ2VzIGluIHRoZSBkb2N1bWVudCwgY2FsbGluZyBgZmAgZm9yXG4gICAgZWFjaCwgd2l0aCB0aGUgcmFuZ2UgaW4gdGhlIG9yaWdpbmFsIGRvY3VtZW50IChgZnJvbUFgLWB0b0FgKVxuICAgIGFuZCB0aGUgcmFuZ2UgdGhhdCByZXBsYWNlcyBpdCBpbiB0aGUgbmV3IGRvY3VtZW50XG4gICAgKGBmcm9tQmAtYHRvQmApLlxuICAgIFxuICAgIFdoZW4gYGluZGl2aWR1YWxgIGlzIHRydWUsIGFkamFjZW50IGNoYW5nZXMgYXJlIHJlcG9ydGVkXG4gICAgc2VwYXJhdGVseS5cbiAgICAqL1xuICAgIGl0ZXJDaGFuZ2VzKGYsIGluZGl2aWR1YWwgPSBmYWxzZSkge1xuICAgICAgICBpdGVyQ2hhbmdlcyh0aGlzLCBmLCBpbmRpdmlkdWFsKTtcbiAgICB9XG4gICAgLyoqXG4gICAgR2V0IGEgW2NoYW5nZSBkZXNjcmlwdGlvbl0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNzdGF0ZS5DaGFuZ2VEZXNjKSBmb3IgdGhpcyBjaGFuZ2VcbiAgICBzZXQuXG4gICAgKi9cbiAgICBnZXQgZGVzYygpIHsgcmV0dXJuIENoYW5nZURlc2MuY3JlYXRlKHRoaXMuc2VjdGlvbnMpOyB9XG4gICAgLyoqXG4gICAgQGludGVybmFsXG4gICAgKi9cbiAgICBmaWx0ZXIocmFuZ2VzKSB7XG4gICAgICAgIGxldCByZXN1bHRTZWN0aW9ucyA9IFtdLCByZXN1bHRJbnNlcnRlZCA9IFtdLCBmaWx0ZXJlZFNlY3Rpb25zID0gW107XG4gICAgICAgIGxldCBpdGVyID0gbmV3IFNlY3Rpb25JdGVyKHRoaXMpO1xuICAgICAgICBkb25lOiBmb3IgKGxldCBpID0gMCwgcG9zID0gMDs7KSB7XG4gICAgICAgICAgICBsZXQgbmV4dCA9IGkgPT0gcmFuZ2VzLmxlbmd0aCA/IDFlOSA6IHJhbmdlc1tpKytdO1xuICAgICAgICAgICAgd2hpbGUgKHBvcyA8IG5leHQgfHwgcG9zID09IG5leHQgJiYgaXRlci5sZW4gPT0gMCkge1xuICAgICAgICAgICAgICAgIGlmIChpdGVyLmRvbmUpXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrIGRvbmU7XG4gICAgICAgICAgICAgICAgbGV0IGxlbiA9IE1hdGgubWluKGl0ZXIubGVuLCBuZXh0IC0gcG9zKTtcbiAgICAgICAgICAgICAgICBhZGRTZWN0aW9uKGZpbHRlcmVkU2VjdGlvbnMsIGxlbiwgLTEpO1xuICAgICAgICAgICAgICAgIGxldCBpbnMgPSBpdGVyLmlucyA9PSAtMSA/IC0xIDogaXRlci5vZmYgPT0gMCA/IGl0ZXIuaW5zIDogMDtcbiAgICAgICAgICAgICAgICBhZGRTZWN0aW9uKHJlc3VsdFNlY3Rpb25zLCBsZW4sIGlucyk7XG4gICAgICAgICAgICAgICAgaWYgKGlucyA+IDApXG4gICAgICAgICAgICAgICAgICAgIGFkZEluc2VydChyZXN1bHRJbnNlcnRlZCwgcmVzdWx0U2VjdGlvbnMsIGl0ZXIudGV4dCk7XG4gICAgICAgICAgICAgICAgaXRlci5mb3J3YXJkKGxlbik7XG4gICAgICAgICAgICAgICAgcG9zICs9IGxlbjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxldCBlbmQgPSByYW5nZXNbaSsrXTtcbiAgICAgICAgICAgIHdoaWxlIChwb3MgPCBlbmQpIHtcbiAgICAgICAgICAgICAgICBpZiAoaXRlci5kb25lKVxuICAgICAgICAgICAgICAgICAgICBicmVhayBkb25lO1xuICAgICAgICAgICAgICAgIGxldCBsZW4gPSBNYXRoLm1pbihpdGVyLmxlbiwgZW5kIC0gcG9zKTtcbiAgICAgICAgICAgICAgICBhZGRTZWN0aW9uKHJlc3VsdFNlY3Rpb25zLCBsZW4sIC0xKTtcbiAgICAgICAgICAgICAgICBhZGRTZWN0aW9uKGZpbHRlcmVkU2VjdGlvbnMsIGxlbiwgaXRlci5pbnMgPT0gLTEgPyAtMSA6IGl0ZXIub2ZmID09IDAgPyBpdGVyLmlucyA6IDApO1xuICAgICAgICAgICAgICAgIGl0ZXIuZm9yd2FyZChsZW4pO1xuICAgICAgICAgICAgICAgIHBvcyArPSBsZW47XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHsgY2hhbmdlczogbmV3IENoYW5nZVNldChyZXN1bHRTZWN0aW9ucywgcmVzdWx0SW5zZXJ0ZWQpLFxuICAgICAgICAgICAgZmlsdGVyZWQ6IENoYW5nZURlc2MuY3JlYXRlKGZpbHRlcmVkU2VjdGlvbnMpIH07XG4gICAgfVxuICAgIC8qKlxuICAgIFNlcmlhbGl6ZSB0aGlzIGNoYW5nZSBzZXQgdG8gYSBKU09OLXJlcHJlc2VudGFibGUgdmFsdWUuXG4gICAgKi9cbiAgICB0b0pTT04oKSB7XG4gICAgICAgIGxldCBwYXJ0cyA9IFtdO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuc2VjdGlvbnMubGVuZ3RoOyBpICs9IDIpIHtcbiAgICAgICAgICAgIGxldCBsZW4gPSB0aGlzLnNlY3Rpb25zW2ldLCBpbnMgPSB0aGlzLnNlY3Rpb25zW2kgKyAxXTtcbiAgICAgICAgICAgIGlmIChpbnMgPCAwKVxuICAgICAgICAgICAgICAgIHBhcnRzLnB1c2gobGVuKTtcbiAgICAgICAgICAgIGVsc2UgaWYgKGlucyA9PSAwKVxuICAgICAgICAgICAgICAgIHBhcnRzLnB1c2goW2xlbl0pO1xuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgIHBhcnRzLnB1c2goW2xlbl0uY29uY2F0KHRoaXMuaW5zZXJ0ZWRbaSA+PiAxXS50b0pTT04oKSkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBwYXJ0cztcbiAgICB9XG4gICAgLyoqXG4gICAgQ3JlYXRlIGEgY2hhbmdlIHNldCBmb3IgdGhlIGdpdmVuIGNoYW5nZXMsIGZvciBhIGRvY3VtZW50IG9mIHRoZVxuICAgIGdpdmVuIGxlbmd0aCwgdXNpbmcgYGxpbmVTZXBgIGFzIGxpbmUgc2VwYXJhdG9yLlxuICAgICovXG4gICAgc3RhdGljIG9mKGNoYW5nZXMsIGxlbmd0aCwgbGluZVNlcCkge1xuICAgICAgICBsZXQgc2VjdGlvbnMgPSBbXSwgaW5zZXJ0ZWQgPSBbXSwgcG9zID0gMDtcbiAgICAgICAgbGV0IHRvdGFsID0gbnVsbDtcbiAgICAgICAgZnVuY3Rpb24gZmx1c2goZm9yY2UgPSBmYWxzZSkge1xuICAgICAgICAgICAgaWYgKCFmb3JjZSAmJiAhc2VjdGlvbnMubGVuZ3RoKVxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIGlmIChwb3MgPCBsZW5ndGgpXG4gICAgICAgICAgICAgICAgYWRkU2VjdGlvbihzZWN0aW9ucywgbGVuZ3RoIC0gcG9zLCAtMSk7XG4gICAgICAgICAgICBsZXQgc2V0ID0gbmV3IENoYW5nZVNldChzZWN0aW9ucywgaW5zZXJ0ZWQpO1xuICAgICAgICAgICAgdG90YWwgPSB0b3RhbCA/IHRvdGFsLmNvbXBvc2Uoc2V0Lm1hcCh0b3RhbCkpIDogc2V0O1xuICAgICAgICAgICAgc2VjdGlvbnMgPSBbXTtcbiAgICAgICAgICAgIGluc2VydGVkID0gW107XG4gICAgICAgICAgICBwb3MgPSAwO1xuICAgICAgICB9XG4gICAgICAgIGZ1bmN0aW9uIHByb2Nlc3Moc3BlYykge1xuICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoc3BlYykpIHtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBzdWIgb2Ygc3BlYylcbiAgICAgICAgICAgICAgICAgICAgcHJvY2VzcyhzdWIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoc3BlYyBpbnN0YW5jZW9mIENoYW5nZVNldCkge1xuICAgICAgICAgICAgICAgIGlmIChzcGVjLmxlbmd0aCAhPSBsZW5ndGgpXG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBSYW5nZUVycm9yKGBNaXNtYXRjaGVkIGNoYW5nZSBzZXQgbGVuZ3RoIChnb3QgJHtzcGVjLmxlbmd0aH0sIGV4cGVjdGVkICR7bGVuZ3RofSlgKTtcbiAgICAgICAgICAgICAgICBmbHVzaCgpO1xuICAgICAgICAgICAgICAgIHRvdGFsID0gdG90YWwgPyB0b3RhbC5jb21wb3NlKHNwZWMubWFwKHRvdGFsKSkgOiBzcGVjO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgbGV0IHsgZnJvbSwgdG8gPSBmcm9tLCBpbnNlcnQgfSA9IHNwZWM7XG4gICAgICAgICAgICAgICAgaWYgKGZyb20gPiB0byB8fCBmcm9tIDwgMCB8fCB0byA+IGxlbmd0aClcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoYEludmFsaWQgY2hhbmdlIHJhbmdlICR7ZnJvbX0gdG8gJHt0b30gKGluIGRvYyBvZiBsZW5ndGggJHtsZW5ndGh9KWApO1xuICAgICAgICAgICAgICAgIGxldCBpbnNUZXh0ID0gIWluc2VydCA/IFRleHQuZW1wdHkgOiB0eXBlb2YgaW5zZXJ0ID09IFwic3RyaW5nXCIgPyBUZXh0Lm9mKGluc2VydC5zcGxpdChsaW5lU2VwIHx8IERlZmF1bHRTcGxpdCkpIDogaW5zZXJ0O1xuICAgICAgICAgICAgICAgIGxldCBpbnNMZW4gPSBpbnNUZXh0Lmxlbmd0aDtcbiAgICAgICAgICAgICAgICBpZiAoZnJvbSA9PSB0byAmJiBpbnNMZW4gPT0gMClcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIGlmIChmcm9tIDwgcG9zKVxuICAgICAgICAgICAgICAgICAgICBmbHVzaCgpO1xuICAgICAgICAgICAgICAgIGlmIChmcm9tID4gcG9zKVxuICAgICAgICAgICAgICAgICAgICBhZGRTZWN0aW9uKHNlY3Rpb25zLCBmcm9tIC0gcG9zLCAtMSk7XG4gICAgICAgICAgICAgICAgYWRkU2VjdGlvbihzZWN0aW9ucywgdG8gLSBmcm9tLCBpbnNMZW4pO1xuICAgICAgICAgICAgICAgIGFkZEluc2VydChpbnNlcnRlZCwgc2VjdGlvbnMsIGluc1RleHQpO1xuICAgICAgICAgICAgICAgIHBvcyA9IHRvO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHByb2Nlc3MoY2hhbmdlcyk7XG4gICAgICAgIGZsdXNoKCF0b3RhbCk7XG4gICAgICAgIHJldHVybiB0b3RhbDtcbiAgICB9XG4gICAgLyoqXG4gICAgQ3JlYXRlIGFuIGVtcHR5IGNoYW5nZXNldCBvZiB0aGUgZ2l2ZW4gbGVuZ3RoLlxuICAgICovXG4gICAgc3RhdGljIGVtcHR5KGxlbmd0aCkge1xuICAgICAgICByZXR1cm4gbmV3IENoYW5nZVNldChsZW5ndGggPyBbbGVuZ3RoLCAtMV0gOiBbXSwgW10pO1xuICAgIH1cbiAgICAvKipcbiAgICBDcmVhdGUgYSBjaGFuZ2VzZXQgZnJvbSBpdHMgSlNPTiByZXByZXNlbnRhdGlvbiAoYXMgcHJvZHVjZWQgYnlcbiAgICBbYHRvSlNPTmBdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jc3RhdGUuQ2hhbmdlU2V0LnRvSlNPTikuXG4gICAgKi9cbiAgICBzdGF0aWMgZnJvbUpTT04oanNvbikge1xuICAgICAgICBpZiAoIUFycmF5LmlzQXJyYXkoanNvbikpXG4gICAgICAgICAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcihcIkludmFsaWQgSlNPTiByZXByZXNlbnRhdGlvbiBvZiBDaGFuZ2VTZXRcIik7XG4gICAgICAgIGxldCBzZWN0aW9ucyA9IFtdLCBpbnNlcnRlZCA9IFtdO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGpzb24ubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGxldCBwYXJ0ID0ganNvbltpXTtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgcGFydCA9PSBcIm51bWJlclwiKSB7XG4gICAgICAgICAgICAgICAgc2VjdGlvbnMucHVzaChwYXJ0LCAtMSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICghQXJyYXkuaXNBcnJheShwYXJ0KSB8fCB0eXBlb2YgcGFydFswXSAhPSBcIm51bWJlclwiIHx8IHBhcnQuc29tZSgoZSwgaSkgPT4gaSAmJiB0eXBlb2YgZSAhPSBcInN0cmluZ1wiKSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBSYW5nZUVycm9yKFwiSW52YWxpZCBKU09OIHJlcHJlc2VudGF0aW9uIG9mIENoYW5nZVNldFwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHBhcnQubGVuZ3RoID09IDEpIHtcbiAgICAgICAgICAgICAgICBzZWN0aW9ucy5wdXNoKHBhcnRbMF0sIDApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgd2hpbGUgKGluc2VydGVkLmxlbmd0aCA8IGkpXG4gICAgICAgICAgICAgICAgICAgIGluc2VydGVkLnB1c2goVGV4dC5lbXB0eSk7XG4gICAgICAgICAgICAgICAgaW5zZXJ0ZWRbaV0gPSBUZXh0Lm9mKHBhcnQuc2xpY2UoMSkpO1xuICAgICAgICAgICAgICAgIHNlY3Rpb25zLnB1c2gocGFydFswXSwgaW5zZXJ0ZWRbaV0ubGVuZ3RoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbmV3IENoYW5nZVNldChzZWN0aW9ucywgaW5zZXJ0ZWQpO1xuICAgIH1cbiAgICAvKipcbiAgICBAaW50ZXJuYWxcbiAgICAqL1xuICAgIHN0YXRpYyBjcmVhdGVTZXQoc2VjdGlvbnMsIGluc2VydGVkKSB7XG4gICAgICAgIHJldHVybiBuZXcgQ2hhbmdlU2V0KHNlY3Rpb25zLCBpbnNlcnRlZCk7XG4gICAgfVxufVxuZnVuY3Rpb24gYWRkU2VjdGlvbihzZWN0aW9ucywgbGVuLCBpbnMsIGZvcmNlSm9pbiA9IGZhbHNlKSB7XG4gICAgaWYgKGxlbiA9PSAwICYmIGlucyA8PSAwKVxuICAgICAgICByZXR1cm47XG4gICAgbGV0IGxhc3QgPSBzZWN0aW9ucy5sZW5ndGggLSAyO1xuICAgIGlmIChsYXN0ID49IDAgJiYgaW5zIDw9IDAgJiYgaW5zID09IHNlY3Rpb25zW2xhc3QgKyAxXSlcbiAgICAgICAgc2VjdGlvbnNbbGFzdF0gKz0gbGVuO1xuICAgIGVsc2UgaWYgKGxhc3QgPj0gMCAmJiBsZW4gPT0gMCAmJiBzZWN0aW9uc1tsYXN0XSA9PSAwKVxuICAgICAgICBzZWN0aW9uc1tsYXN0ICsgMV0gKz0gaW5zO1xuICAgIGVsc2UgaWYgKGZvcmNlSm9pbikge1xuICAgICAgICBzZWN0aW9uc1tsYXN0XSArPSBsZW47XG4gICAgICAgIHNlY3Rpb25zW2xhc3QgKyAxXSArPSBpbnM7XG4gICAgfVxuICAgIGVsc2VcbiAgICAgICAgc2VjdGlvbnMucHVzaChsZW4sIGlucyk7XG59XG5mdW5jdGlvbiBhZGRJbnNlcnQodmFsdWVzLCBzZWN0aW9ucywgdmFsdWUpIHtcbiAgICBpZiAodmFsdWUubGVuZ3RoID09IDApXG4gICAgICAgIHJldHVybjtcbiAgICBsZXQgaW5kZXggPSAoc2VjdGlvbnMubGVuZ3RoIC0gMikgPj4gMTtcbiAgICBpZiAoaW5kZXggPCB2YWx1ZXMubGVuZ3RoKSB7XG4gICAgICAgIHZhbHVlc1t2YWx1ZXMubGVuZ3RoIC0gMV0gPSB2YWx1ZXNbdmFsdWVzLmxlbmd0aCAtIDFdLmFwcGVuZCh2YWx1ZSk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICB3aGlsZSAodmFsdWVzLmxlbmd0aCA8IGluZGV4KVxuICAgICAgICAgICAgdmFsdWVzLnB1c2goVGV4dC5lbXB0eSk7XG4gICAgICAgIHZhbHVlcy5wdXNoKHZhbHVlKTtcbiAgICB9XG59XG5mdW5jdGlvbiBpdGVyQ2hhbmdlcyhkZXNjLCBmLCBpbmRpdmlkdWFsKSB7XG4gICAgbGV0IGluc2VydGVkID0gZGVzYy5pbnNlcnRlZDtcbiAgICBmb3IgKGxldCBwb3NBID0gMCwgcG9zQiA9IDAsIGkgPSAwOyBpIDwgZGVzYy5zZWN0aW9ucy5sZW5ndGg7KSB7XG4gICAgICAgIGxldCBsZW4gPSBkZXNjLnNlY3Rpb25zW2krK10sIGlucyA9IGRlc2Muc2VjdGlvbnNbaSsrXTtcbiAgICAgICAgaWYgKGlucyA8IDApIHtcbiAgICAgICAgICAgIHBvc0EgKz0gbGVuO1xuICAgICAgICAgICAgcG9zQiArPSBsZW47XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBsZXQgZW5kQSA9IHBvc0EsIGVuZEIgPSBwb3NCLCB0ZXh0ID0gVGV4dC5lbXB0eTtcbiAgICAgICAgICAgIGZvciAoOzspIHtcbiAgICAgICAgICAgICAgICBlbmRBICs9IGxlbjtcbiAgICAgICAgICAgICAgICBlbmRCICs9IGlucztcbiAgICAgICAgICAgICAgICBpZiAoaW5zICYmIGluc2VydGVkKVxuICAgICAgICAgICAgICAgICAgICB0ZXh0ID0gdGV4dC5hcHBlbmQoaW5zZXJ0ZWRbKGkgLSAyKSA+PiAxXSk7XG4gICAgICAgICAgICAgICAgaWYgKGluZGl2aWR1YWwgfHwgaSA9PSBkZXNjLnNlY3Rpb25zLmxlbmd0aCB8fCBkZXNjLnNlY3Rpb25zW2kgKyAxXSA8IDApXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGxlbiA9IGRlc2Muc2VjdGlvbnNbaSsrXTtcbiAgICAgICAgICAgICAgICBpbnMgPSBkZXNjLnNlY3Rpb25zW2krK107XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmKHBvc0EsIGVuZEEsIHBvc0IsIGVuZEIsIHRleHQpO1xuICAgICAgICAgICAgcG9zQSA9IGVuZEE7XG4gICAgICAgICAgICBwb3NCID0gZW5kQjtcbiAgICAgICAgfVxuICAgIH1cbn1cbmZ1bmN0aW9uIG1hcFNldChzZXRBLCBzZXRCLCBiZWZvcmUsIG1rU2V0ID0gZmFsc2UpIHtcbiAgICAvLyBQcm9kdWNlIGEgY29weSBvZiBzZXRBIHRoYXQgYXBwbGllcyB0byB0aGUgZG9jdW1lbnQgYWZ0ZXIgc2V0QlxuICAgIC8vIGhhcyBiZWVuIGFwcGxpZWQgKGFzc3VtaW5nIGJvdGggc3RhcnQgYXQgdGhlIHNhbWUgZG9jdW1lbnQpLlxuICAgIGxldCBzZWN0aW9ucyA9IFtdLCBpbnNlcnQgPSBta1NldCA/IFtdIDogbnVsbDtcbiAgICBsZXQgYSA9IG5ldyBTZWN0aW9uSXRlcihzZXRBKSwgYiA9IG5ldyBTZWN0aW9uSXRlcihzZXRCKTtcbiAgICAvLyBJdGVyYXRlIG92ZXIgYm90aCBzZXRzIGluIHBhcmFsbGVsLiBpbnNlcnRlZCB0cmFja3MsIGZvciBjaGFuZ2VzXG4gICAgLy8gaW4gQSB0aGF0IGhhdmUgdG8gYmUgcHJvY2Vzc2VkIHBpZWNlLWJ5LXBpZWNlLCB3aGV0aGVyIHRoZWlyXG4gICAgLy8gY29udGVudCBoYXMgYmVlbiBpbnNlcnRlZCBhbHJlYWR5LCBhbmQgcmVmZXJzIHRvIHRoZSBzZWN0aW9uXG4gICAgLy8gaW5kZXguXG4gICAgZm9yIChsZXQgaW5zZXJ0ZWQgPSAtMTs7KSB7XG4gICAgICAgIGlmIChhLmRvbmUgJiYgYi5sZW4gfHwgYi5kb25lICYmIGEubGVuKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJNaXNtYXRjaGVkIGNoYW5nZSBzZXQgbGVuZ3Roc1wiKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChhLmlucyA9PSAtMSAmJiBiLmlucyA9PSAtMSkge1xuICAgICAgICAgICAgLy8gTW92ZSBhY3Jvc3MgcmFuZ2VzIHNraXBwZWQgYnkgYm90aCBzZXRzLlxuICAgICAgICAgICAgbGV0IGxlbiA9IE1hdGgubWluKGEubGVuLCBiLmxlbik7XG4gICAgICAgICAgICBhZGRTZWN0aW9uKHNlY3Rpb25zLCBsZW4sIC0xKTtcbiAgICAgICAgICAgIGEuZm9yd2FyZChsZW4pO1xuICAgICAgICAgICAgYi5mb3J3YXJkKGxlbik7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoYi5pbnMgPj0gMCAmJiAoYS5pbnMgPCAwIHx8IGluc2VydGVkID09IGEuaSB8fCBhLm9mZiA9PSAwICYmIChiLmxlbiA8IGEubGVuIHx8IGIubGVuID09IGEubGVuICYmICFiZWZvcmUpKSkge1xuICAgICAgICAgICAgLy8gSWYgdGhlcmUncyBhIGNoYW5nZSBpbiBCIHRoYXQgY29tZXMgYmVmb3JlIHRoZSBuZXh0IGNoYW5nZSBpblxuICAgICAgICAgICAgLy8gQSAob3JkZXJlZCBieSBzdGFydCBwb3MsIHRoZW4gbGVuLCB0aGVuIGJlZm9yZSBmbGFnKSwgc2tpcFxuICAgICAgICAgICAgLy8gdGhhdCAoYW5kIHByb2Nlc3MgYW55IGNoYW5nZXMgaW4gQSBpdCBjb3ZlcnMpLlxuICAgICAgICAgICAgbGV0IGxlbiA9IGIubGVuO1xuICAgICAgICAgICAgYWRkU2VjdGlvbihzZWN0aW9ucywgYi5pbnMsIC0xKTtcbiAgICAgICAgICAgIHdoaWxlIChsZW4pIHtcbiAgICAgICAgICAgICAgICBsZXQgcGllY2UgPSBNYXRoLm1pbihhLmxlbiwgbGVuKTtcbiAgICAgICAgICAgICAgICBpZiAoYS5pbnMgPj0gMCAmJiBpbnNlcnRlZCA8IGEuaSAmJiBhLmxlbiA8PSBwaWVjZSkge1xuICAgICAgICAgICAgICAgICAgICBhZGRTZWN0aW9uKHNlY3Rpb25zLCAwLCBhLmlucyk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChpbnNlcnQpXG4gICAgICAgICAgICAgICAgICAgICAgICBhZGRJbnNlcnQoaW5zZXJ0LCBzZWN0aW9ucywgYS50ZXh0KTtcbiAgICAgICAgICAgICAgICAgICAgaW5zZXJ0ZWQgPSBhLmk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGEuZm9yd2FyZChwaWVjZSk7XG4gICAgICAgICAgICAgICAgbGVuIC09IHBpZWNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYi5uZXh0KCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoYS5pbnMgPj0gMCkge1xuICAgICAgICAgICAgLy8gUHJvY2VzcyB0aGUgcGFydCBvZiBhIGNoYW5nZSBpbiBBIHVwIHRvIHRoZSBzdGFydCBvZiB0aGUgbmV4dFxuICAgICAgICAgICAgLy8gbm9uLWRlbGV0aW9uIGNoYW5nZSBpbiBCIChpZiBvdmVybGFwcGluZykuXG4gICAgICAgICAgICBsZXQgbGVuID0gMCwgbGVmdCA9IGEubGVuO1xuICAgICAgICAgICAgd2hpbGUgKGxlZnQpIHtcbiAgICAgICAgICAgICAgICBpZiAoYi5pbnMgPT0gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IHBpZWNlID0gTWF0aC5taW4obGVmdCwgYi5sZW4pO1xuICAgICAgICAgICAgICAgICAgICBsZW4gKz0gcGllY2U7XG4gICAgICAgICAgICAgICAgICAgIGxlZnQgLT0gcGllY2U7XG4gICAgICAgICAgICAgICAgICAgIGIuZm9yd2FyZChwaWVjZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGIuaW5zID09IDAgJiYgYi5sZW4gPCBsZWZ0KSB7XG4gICAgICAgICAgICAgICAgICAgIGxlZnQgLT0gYi5sZW47XG4gICAgICAgICAgICAgICAgICAgIGIubmV4dCgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYWRkU2VjdGlvbihzZWN0aW9ucywgbGVuLCBpbnNlcnRlZCA8IGEuaSA/IGEuaW5zIDogMCk7XG4gICAgICAgICAgICBpZiAoaW5zZXJ0ICYmIGluc2VydGVkIDwgYS5pKVxuICAgICAgICAgICAgICAgIGFkZEluc2VydChpbnNlcnQsIHNlY3Rpb25zLCBhLnRleHQpO1xuICAgICAgICAgICAgaW5zZXJ0ZWQgPSBhLmk7XG4gICAgICAgICAgICBhLmZvcndhcmQoYS5sZW4gLSBsZWZ0KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChhLmRvbmUgJiYgYi5kb25lKSB7XG4gICAgICAgICAgICByZXR1cm4gaW5zZXJ0ID8gQ2hhbmdlU2V0LmNyZWF0ZVNldChzZWN0aW9ucywgaW5zZXJ0KSA6IENoYW5nZURlc2MuY3JlYXRlKHNlY3Rpb25zKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIk1pc21hdGNoZWQgY2hhbmdlIHNldCBsZW5ndGhzXCIpO1xuICAgICAgICB9XG4gICAgfVxufVxuZnVuY3Rpb24gY29tcG9zZVNldHMoc2V0QSwgc2V0QiwgbWtTZXQgPSBmYWxzZSkge1xuICAgIGxldCBzZWN0aW9ucyA9IFtdO1xuICAgIGxldCBpbnNlcnQgPSBta1NldCA/IFtdIDogbnVsbDtcbiAgICBsZXQgYSA9IG5ldyBTZWN0aW9uSXRlcihzZXRBKSwgYiA9IG5ldyBTZWN0aW9uSXRlcihzZXRCKTtcbiAgICBmb3IgKGxldCBvcGVuID0gZmFsc2U7Oykge1xuICAgICAgICBpZiAoYS5kb25lICYmIGIuZG9uZSkge1xuICAgICAgICAgICAgcmV0dXJuIGluc2VydCA/IENoYW5nZVNldC5jcmVhdGVTZXQoc2VjdGlvbnMsIGluc2VydCkgOiBDaGFuZ2VEZXNjLmNyZWF0ZShzZWN0aW9ucyk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoYS5pbnMgPT0gMCkgeyAvLyBEZWxldGlvbiBpbiBBXG4gICAgICAgICAgICBhZGRTZWN0aW9uKHNlY3Rpb25zLCBhLmxlbiwgMCwgb3Blbik7XG4gICAgICAgICAgICBhLm5leHQoKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChiLmxlbiA9PSAwICYmICFiLmRvbmUpIHsgLy8gSW5zZXJ0aW9uIGluIEJcbiAgICAgICAgICAgIGFkZFNlY3Rpb24oc2VjdGlvbnMsIDAsIGIuaW5zLCBvcGVuKTtcbiAgICAgICAgICAgIGlmIChpbnNlcnQpXG4gICAgICAgICAgICAgICAgYWRkSW5zZXJ0KGluc2VydCwgc2VjdGlvbnMsIGIudGV4dCk7XG4gICAgICAgICAgICBiLm5leHQoKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChhLmRvbmUgfHwgYi5kb25lKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJNaXNtYXRjaGVkIGNoYW5nZSBzZXQgbGVuZ3Roc1wiKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGxldCBsZW4gPSBNYXRoLm1pbihhLmxlbjIsIGIubGVuKSwgc2VjdGlvbkxlbiA9IHNlY3Rpb25zLmxlbmd0aDtcbiAgICAgICAgICAgIGlmIChhLmlucyA9PSAtMSkge1xuICAgICAgICAgICAgICAgIGxldCBpbnNCID0gYi5pbnMgPT0gLTEgPyAtMSA6IGIub2ZmID8gMCA6IGIuaW5zO1xuICAgICAgICAgICAgICAgIGFkZFNlY3Rpb24oc2VjdGlvbnMsIGxlbiwgaW5zQiwgb3Blbik7XG4gICAgICAgICAgICAgICAgaWYgKGluc2VydCAmJiBpbnNCKVxuICAgICAgICAgICAgICAgICAgICBhZGRJbnNlcnQoaW5zZXJ0LCBzZWN0aW9ucywgYi50ZXh0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGIuaW5zID09IC0xKSB7XG4gICAgICAgICAgICAgICAgYWRkU2VjdGlvbihzZWN0aW9ucywgYS5vZmYgPyAwIDogYS5sZW4sIGxlbiwgb3Blbik7XG4gICAgICAgICAgICAgICAgaWYgKGluc2VydClcbiAgICAgICAgICAgICAgICAgICAgYWRkSW5zZXJ0KGluc2VydCwgc2VjdGlvbnMsIGEudGV4dEJpdChsZW4pKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGFkZFNlY3Rpb24oc2VjdGlvbnMsIGEub2ZmID8gMCA6IGEubGVuLCBiLm9mZiA/IDAgOiBiLmlucywgb3Blbik7XG4gICAgICAgICAgICAgICAgaWYgKGluc2VydCAmJiAhYi5vZmYpXG4gICAgICAgICAgICAgICAgICAgIGFkZEluc2VydChpbnNlcnQsIHNlY3Rpb25zLCBiLnRleHQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgb3BlbiA9IChhLmlucyA+IGxlbiB8fCBiLmlucyA+PSAwICYmIGIubGVuID4gbGVuKSAmJiAob3BlbiB8fCBzZWN0aW9ucy5sZW5ndGggPiBzZWN0aW9uTGVuKTtcbiAgICAgICAgICAgIGEuZm9yd2FyZDIobGVuKTtcbiAgICAgICAgICAgIGIuZm9yd2FyZChsZW4pO1xuICAgICAgICB9XG4gICAgfVxufVxuY2xhc3MgU2VjdGlvbkl0ZXIge1xuICAgIGNvbnN0cnVjdG9yKHNldCkge1xuICAgICAgICB0aGlzLnNldCA9IHNldDtcbiAgICAgICAgdGhpcy5pID0gMDtcbiAgICAgICAgdGhpcy5uZXh0KCk7XG4gICAgfVxuICAgIG5leHQoKSB7XG4gICAgICAgIGxldCB7IHNlY3Rpb25zIH0gPSB0aGlzLnNldDtcbiAgICAgICAgaWYgKHRoaXMuaSA8IHNlY3Rpb25zLmxlbmd0aCkge1xuICAgICAgICAgICAgdGhpcy5sZW4gPSBzZWN0aW9uc1t0aGlzLmkrK107XG4gICAgICAgICAgICB0aGlzLmlucyA9IHNlY3Rpb25zW3RoaXMuaSsrXTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMubGVuID0gMDtcbiAgICAgICAgICAgIHRoaXMuaW5zID0gLTI7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5vZmYgPSAwO1xuICAgIH1cbiAgICBnZXQgZG9uZSgpIHsgcmV0dXJuIHRoaXMuaW5zID09IC0yOyB9XG4gICAgZ2V0IGxlbjIoKSB7IHJldHVybiB0aGlzLmlucyA8IDAgPyB0aGlzLmxlbiA6IHRoaXMuaW5zOyB9XG4gICAgZ2V0IHRleHQoKSB7XG4gICAgICAgIGxldCB7IGluc2VydGVkIH0gPSB0aGlzLnNldCwgaW5kZXggPSAodGhpcy5pIC0gMikgPj4gMTtcbiAgICAgICAgcmV0dXJuIGluZGV4ID49IGluc2VydGVkLmxlbmd0aCA/IFRleHQuZW1wdHkgOiBpbnNlcnRlZFtpbmRleF07XG4gICAgfVxuICAgIHRleHRCaXQobGVuKSB7XG4gICAgICAgIGxldCB7IGluc2VydGVkIH0gPSB0aGlzLnNldCwgaW5kZXggPSAodGhpcy5pIC0gMikgPj4gMTtcbiAgICAgICAgcmV0dXJuIGluZGV4ID49IGluc2VydGVkLmxlbmd0aCAmJiAhbGVuID8gVGV4dC5lbXB0eVxuICAgICAgICAgICAgOiBpbnNlcnRlZFtpbmRleF0uc2xpY2UodGhpcy5vZmYsIGxlbiA9PSBudWxsID8gdW5kZWZpbmVkIDogdGhpcy5vZmYgKyBsZW4pO1xuICAgIH1cbiAgICBmb3J3YXJkKGxlbikge1xuICAgICAgICBpZiAobGVuID09IHRoaXMubGVuKVxuICAgICAgICAgICAgdGhpcy5uZXh0KCk7XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5sZW4gLT0gbGVuO1xuICAgICAgICAgICAgdGhpcy5vZmYgKz0gbGVuO1xuICAgICAgICB9XG4gICAgfVxuICAgIGZvcndhcmQyKGxlbikge1xuICAgICAgICBpZiAodGhpcy5pbnMgPT0gLTEpXG4gICAgICAgICAgICB0aGlzLmZvcndhcmQobGVuKTtcbiAgICAgICAgZWxzZSBpZiAobGVuID09IHRoaXMuaW5zKVxuICAgICAgICAgICAgdGhpcy5uZXh0KCk7XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5pbnMgLT0gbGVuO1xuICAgICAgICAgICAgdGhpcy5vZmYgKz0gbGVuO1xuICAgICAgICB9XG4gICAgfVxufVxuXG4vKipcbkEgc2luZ2xlIHNlbGVjdGlvbiByYW5nZS4gV2hlblxuW2BhbGxvd011bHRpcGxlU2VsZWN0aW9uc2BdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jc3RhdGUuRWRpdG9yU3RhdGVeYWxsb3dNdWx0aXBsZVNlbGVjdGlvbnMpXG5pcyBlbmFibGVkLCBhIFtzZWxlY3Rpb25dKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jc3RhdGUuRWRpdG9yU2VsZWN0aW9uKSBtYXkgaG9sZFxubXVsdGlwbGUgcmFuZ2VzLiBCeSBkZWZhdWx0LCBzZWxlY3Rpb25zIGhvbGQgZXhhY3RseSBvbmUgcmFuZ2UuXG4qL1xuY2xhc3MgU2VsZWN0aW9uUmFuZ2Uge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8qKlxuICAgIFRoZSBsb3dlciBib3VuZGFyeSBvZiB0aGUgcmFuZ2UuXG4gICAgKi9cbiAgICBmcm9tLCBcbiAgICAvKipcbiAgICBUaGUgdXBwZXIgYm91bmRhcnkgb2YgdGhlIHJhbmdlLlxuICAgICovXG4gICAgdG8sIGZsYWdzKSB7XG4gICAgICAgIHRoaXMuZnJvbSA9IGZyb207XG4gICAgICAgIHRoaXMudG8gPSB0bztcbiAgICAgICAgdGhpcy5mbGFncyA9IGZsYWdzO1xuICAgIH1cbiAgICAvKipcbiAgICBUaGUgYW5jaG9yIG9mIHRoZSByYW5nZeKAlHRoZSBzaWRlIHRoYXQgZG9lc24ndCBtb3ZlIHdoZW4geW91XG4gICAgZXh0ZW5kIGl0LlxuICAgICovXG4gICAgZ2V0IGFuY2hvcigpIHsgcmV0dXJuIHRoaXMuZmxhZ3MgJiAzMiAvKiBSYW5nZUZsYWcuSW52ZXJ0ZWQgKi8gPyB0aGlzLnRvIDogdGhpcy5mcm9tOyB9XG4gICAgLyoqXG4gICAgVGhlIGhlYWQgb2YgdGhlIHJhbmdlLCB3aGljaCBpcyBtb3ZlZCB3aGVuIHRoZSByYW5nZSBpc1xuICAgIFtleHRlbmRlZF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNzdGF0ZS5TZWxlY3Rpb25SYW5nZS5leHRlbmQpLlxuICAgICovXG4gICAgZ2V0IGhlYWQoKSB7IHJldHVybiB0aGlzLmZsYWdzICYgMzIgLyogUmFuZ2VGbGFnLkludmVydGVkICovID8gdGhpcy5mcm9tIDogdGhpcy50bzsgfVxuICAgIC8qKlxuICAgIFRydWUgd2hlbiBgYW5jaG9yYCBhbmQgYGhlYWRgIGFyZSBhdCB0aGUgc2FtZSBwb3NpdGlvbi5cbiAgICAqL1xuICAgIGdldCBlbXB0eSgpIHsgcmV0dXJuIHRoaXMuZnJvbSA9PSB0aGlzLnRvOyB9XG4gICAgLyoqXG4gICAgSWYgdGhpcyBpcyBhIGN1cnNvciB0aGF0IGlzIGV4cGxpY2l0bHkgYXNzb2NpYXRlZCB3aXRoIHRoZVxuICAgIGNoYXJhY3RlciBvbiBvbmUgb2YgaXRzIHNpZGVzLCB0aGlzIHJldHVybnMgdGhlIHNpZGUuIC0xIG1lYW5zXG4gICAgdGhlIGNoYXJhY3RlciBiZWZvcmUgaXRzIHBvc2l0aW9uLCAxIHRoZSBjaGFyYWN0ZXIgYWZ0ZXIsIGFuZCAwXG4gICAgbWVhbnMgbm8gYXNzb2NpYXRpb24uXG4gICAgKi9cbiAgICBnZXQgYXNzb2MoKSB7IHJldHVybiB0aGlzLmZsYWdzICYgOCAvKiBSYW5nZUZsYWcuQXNzb2NCZWZvcmUgKi8gPyAtMSA6IHRoaXMuZmxhZ3MgJiAxNiAvKiBSYW5nZUZsYWcuQXNzb2NBZnRlciAqLyA/IDEgOiAwOyB9XG4gICAgLyoqXG4gICAgVGhlIGJpZGlyZWN0aW9uYWwgdGV4dCBsZXZlbCBhc3NvY2lhdGVkIHdpdGggdGhpcyBjdXJzb3IsIGlmXG4gICAgYW55LlxuICAgICovXG4gICAgZ2V0IGJpZGlMZXZlbCgpIHtcbiAgICAgICAgbGV0IGxldmVsID0gdGhpcy5mbGFncyAmIDcgLyogUmFuZ2VGbGFnLkJpZGlMZXZlbE1hc2sgKi87XG4gICAgICAgIHJldHVybiBsZXZlbCA9PSA3ID8gbnVsbCA6IGxldmVsO1xuICAgIH1cbiAgICAvKipcbiAgICBUaGUgZ29hbCBjb2x1bW4gKHN0b3JlZCB2ZXJ0aWNhbCBvZmZzZXQpIGFzc29jaWF0ZWQgd2l0aCBhXG4gICAgY3Vyc29yLiBUaGlzIGlzIHVzZWQgdG8gcHJlc2VydmUgdGhlIHZlcnRpY2FsIHBvc2l0aW9uIHdoZW5cbiAgICBbbW92aW5nXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI3ZpZXcuRWRpdG9yVmlldy5tb3ZlVmVydGljYWxseSkgYWNyb3NzXG4gICAgbGluZXMgb2YgZGlmZmVyZW50IGxlbmd0aC5cbiAgICAqL1xuICAgIGdldCBnb2FsQ29sdW1uKCkge1xuICAgICAgICBsZXQgdmFsdWUgPSB0aGlzLmZsYWdzID4+IDYgLyogUmFuZ2VGbGFnLkdvYWxDb2x1bW5PZmZzZXQgKi87XG4gICAgICAgIHJldHVybiB2YWx1ZSA9PSAxNjc3NzIxNSAvKiBSYW5nZUZsYWcuTm9Hb2FsQ29sdW1uICovID8gdW5kZWZpbmVkIDogdmFsdWU7XG4gICAgfVxuICAgIC8qKlxuICAgIE1hcCB0aGlzIHJhbmdlIHRocm91Z2ggYSBjaGFuZ2UsIHByb2R1Y2luZyBhIHZhbGlkIHJhbmdlIGluIHRoZVxuICAgIHVwZGF0ZWQgZG9jdW1lbnQuXG4gICAgKi9cbiAgICBtYXAoY2hhbmdlLCBhc3NvYyA9IC0xKSB7XG4gICAgICAgIGxldCBmcm9tLCB0bztcbiAgICAgICAgaWYgKHRoaXMuZW1wdHkpIHtcbiAgICAgICAgICAgIGZyb20gPSB0byA9IGNoYW5nZS5tYXBQb3ModGhpcy5mcm9tLCBhc3NvYyk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBmcm9tID0gY2hhbmdlLm1hcFBvcyh0aGlzLmZyb20sIDEpO1xuICAgICAgICAgICAgdG8gPSBjaGFuZ2UubWFwUG9zKHRoaXMudG8sIC0xKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZnJvbSA9PSB0aGlzLmZyb20gJiYgdG8gPT0gdGhpcy50byA/IHRoaXMgOiBuZXcgU2VsZWN0aW9uUmFuZ2UoZnJvbSwgdG8sIHRoaXMuZmxhZ3MpO1xuICAgIH1cbiAgICAvKipcbiAgICBFeHRlbmQgdGhpcyByYW5nZSB0byBjb3ZlciBhdCBsZWFzdCBgZnJvbWAgdG8gYHRvYC5cbiAgICAqL1xuICAgIGV4dGVuZChmcm9tLCB0byA9IGZyb20pIHtcbiAgICAgICAgaWYgKGZyb20gPD0gdGhpcy5hbmNob3IgJiYgdG8gPj0gdGhpcy5hbmNob3IpXG4gICAgICAgICAgICByZXR1cm4gRWRpdG9yU2VsZWN0aW9uLnJhbmdlKGZyb20sIHRvKTtcbiAgICAgICAgbGV0IGhlYWQgPSBNYXRoLmFicyhmcm9tIC0gdGhpcy5hbmNob3IpID4gTWF0aC5hYnModG8gLSB0aGlzLmFuY2hvcikgPyBmcm9tIDogdG87XG4gICAgICAgIHJldHVybiBFZGl0b3JTZWxlY3Rpb24ucmFuZ2UodGhpcy5hbmNob3IsIGhlYWQpO1xuICAgIH1cbiAgICAvKipcbiAgICBDb21wYXJlIHRoaXMgcmFuZ2UgdG8gYW5vdGhlciByYW5nZS5cbiAgICAqL1xuICAgIGVxKG90aGVyLCBpbmNsdWRlQXNzb2MgPSBmYWxzZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5hbmNob3IgPT0gb3RoZXIuYW5jaG9yICYmIHRoaXMuaGVhZCA9PSBvdGhlci5oZWFkICYmXG4gICAgICAgICAgICAoIWluY2x1ZGVBc3NvYyB8fCAhdGhpcy5lbXB0eSB8fCB0aGlzLmFzc29jID09IG90aGVyLmFzc29jKTtcbiAgICB9XG4gICAgLyoqXG4gICAgUmV0dXJuIGEgSlNPTi1zZXJpYWxpemFibGUgb2JqZWN0IHJlcHJlc2VudGluZyB0aGUgcmFuZ2UuXG4gICAgKi9cbiAgICB0b0pTT04oKSB7IHJldHVybiB7IGFuY2hvcjogdGhpcy5hbmNob3IsIGhlYWQ6IHRoaXMuaGVhZCB9OyB9XG4gICAgLyoqXG4gICAgQ29udmVydCBhIEpTT04gcmVwcmVzZW50YXRpb24gb2YgYSByYW5nZSB0byBhIGBTZWxlY3Rpb25SYW5nZWBcbiAgICBpbnN0YW5jZS5cbiAgICAqL1xuICAgIHN0YXRpYyBmcm9tSlNPTihqc29uKSB7XG4gICAgICAgIGlmICghanNvbiB8fCB0eXBlb2YganNvbi5hbmNob3IgIT0gXCJudW1iZXJcIiB8fCB0eXBlb2YganNvbi5oZWFkICE9IFwibnVtYmVyXCIpXG4gICAgICAgICAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcihcIkludmFsaWQgSlNPTiByZXByZXNlbnRhdGlvbiBmb3IgU2VsZWN0aW9uUmFuZ2VcIik7XG4gICAgICAgIHJldHVybiBFZGl0b3JTZWxlY3Rpb24ucmFuZ2UoanNvbi5hbmNob3IsIGpzb24uaGVhZCk7XG4gICAgfVxuICAgIC8qKlxuICAgIEBpbnRlcm5hbFxuICAgICovXG4gICAgc3RhdGljIGNyZWF0ZShmcm9tLCB0bywgZmxhZ3MpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBTZWxlY3Rpb25SYW5nZShmcm9tLCB0bywgZmxhZ3MpO1xuICAgIH1cbn1cbi8qKlxuQW4gZWRpdG9yIHNlbGVjdGlvbiBob2xkcyBvbmUgb3IgbW9yZSBzZWxlY3Rpb24gcmFuZ2VzLlxuKi9cbmNsYXNzIEVkaXRvclNlbGVjdGlvbiB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgLyoqXG4gICAgVGhlIHJhbmdlcyBpbiB0aGUgc2VsZWN0aW9uLCBzb3J0ZWQgYnkgcG9zaXRpb24uIFJhbmdlcyBjYW5ub3RcbiAgICBvdmVybGFwIChidXQgdGhleSBtYXkgdG91Y2gsIGlmIHRoZXkgYXJlbid0IGVtcHR5KS5cbiAgICAqL1xuICAgIHJhbmdlcywgXG4gICAgLyoqXG4gICAgVGhlIGluZGV4IG9mIHRoZSBfbWFpbl8gcmFuZ2UgaW4gdGhlIHNlbGVjdGlvbiAod2hpY2ggaXNcbiAgICB1c3VhbGx5IHRoZSByYW5nZSB0aGF0IHdhcyBhZGRlZCBsYXN0KS5cbiAgICAqL1xuICAgIG1haW5JbmRleCkge1xuICAgICAgICB0aGlzLnJhbmdlcyA9IHJhbmdlcztcbiAgICAgICAgdGhpcy5tYWluSW5kZXggPSBtYWluSW5kZXg7XG4gICAgfVxuICAgIC8qKlxuICAgIE1hcCBhIHNlbGVjdGlvbiB0aHJvdWdoIGEgY2hhbmdlLiBVc2VkIHRvIGFkanVzdCB0aGUgc2VsZWN0aW9uXG4gICAgcG9zaXRpb24gZm9yIGNoYW5nZXMuXG4gICAgKi9cbiAgICBtYXAoY2hhbmdlLCBhc3NvYyA9IC0xKSB7XG4gICAgICAgIGlmIChjaGFuZ2UuZW1wdHkpXG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgcmV0dXJuIEVkaXRvclNlbGVjdGlvbi5jcmVhdGUodGhpcy5yYW5nZXMubWFwKHIgPT4gci5tYXAoY2hhbmdlLCBhc3NvYykpLCB0aGlzLm1haW5JbmRleCk7XG4gICAgfVxuICAgIC8qKlxuICAgIENvbXBhcmUgdGhpcyBzZWxlY3Rpb24gdG8gYW5vdGhlciBzZWxlY3Rpb24uIEJ5IGRlZmF1bHQsIHJhbmdlc1xuICAgIGFyZSBjb21wYXJlZCBvbmx5IGJ5IHBvc2l0aW9uLiBXaGVuIGBpbmNsdWRlQXNzb2NgIGlzIHRydWUsXG4gICAgY3Vyc29yIHJhbmdlcyBtdXN0IGFsc28gaGF2ZSB0aGUgc2FtZVxuICAgIFtgYXNzb2NgXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI3N0YXRlLlNlbGVjdGlvblJhbmdlLmFzc29jKSB2YWx1ZS5cbiAgICAqL1xuICAgIGVxKG90aGVyLCBpbmNsdWRlQXNzb2MgPSBmYWxzZSkge1xuICAgICAgICBpZiAodGhpcy5yYW5nZXMubGVuZ3RoICE9IG90aGVyLnJhbmdlcy5sZW5ndGggfHxcbiAgICAgICAgICAgIHRoaXMubWFpbkluZGV4ICE9IG90aGVyLm1haW5JbmRleClcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLnJhbmdlcy5sZW5ndGg7IGkrKylcbiAgICAgICAgICAgIGlmICghdGhpcy5yYW5nZXNbaV0uZXEob3RoZXIucmFuZ2VzW2ldLCBpbmNsdWRlQXNzb2MpKVxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIC8qKlxuICAgIEdldCB0aGUgcHJpbWFyeSBzZWxlY3Rpb24gcmFuZ2UuIFVzdWFsbHksIHlvdSBzaG91bGQgbWFrZSBzdXJlXG4gICAgeW91ciBjb2RlIGFwcGxpZXMgdG8gX2FsbF8gcmFuZ2VzLCBieSB1c2luZyBtZXRob2RzIGxpa2VcbiAgICBbYGNoYW5nZUJ5UmFuZ2VgXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI3N0YXRlLkVkaXRvclN0YXRlLmNoYW5nZUJ5UmFuZ2UpLlxuICAgICovXG4gICAgZ2V0IG1haW4oKSB7IHJldHVybiB0aGlzLnJhbmdlc1t0aGlzLm1haW5JbmRleF07IH1cbiAgICAvKipcbiAgICBNYWtlIHN1cmUgdGhlIHNlbGVjdGlvbiBvbmx5IGhhcyBvbmUgcmFuZ2UuIFJldHVybnMgYSBzZWxlY3Rpb25cbiAgICBob2xkaW5nIG9ubHkgdGhlIG1haW4gcmFuZ2UgZnJvbSB0aGlzIHNlbGVjdGlvbi5cbiAgICAqL1xuICAgIGFzU2luZ2xlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5yYW5nZXMubGVuZ3RoID09IDEgPyB0aGlzIDogbmV3IEVkaXRvclNlbGVjdGlvbihbdGhpcy5tYWluXSwgMCk7XG4gICAgfVxuICAgIC8qKlxuICAgIEV4dGVuZCB0aGlzIHNlbGVjdGlvbiB3aXRoIGFuIGV4dHJhIHJhbmdlLlxuICAgICovXG4gICAgYWRkUmFuZ2UocmFuZ2UsIG1haW4gPSB0cnVlKSB7XG4gICAgICAgIHJldHVybiBFZGl0b3JTZWxlY3Rpb24uY3JlYXRlKFtyYW5nZV0uY29uY2F0KHRoaXMucmFuZ2VzKSwgbWFpbiA/IDAgOiB0aGlzLm1haW5JbmRleCArIDEpO1xuICAgIH1cbiAgICAvKipcbiAgICBSZXBsYWNlIGEgZ2l2ZW4gcmFuZ2Ugd2l0aCBhbm90aGVyIHJhbmdlLCBhbmQgdGhlbiBub3JtYWxpemUgdGhlXG4gICAgc2VsZWN0aW9uIHRvIG1lcmdlIGFuZCBzb3J0IHJhbmdlcyBpZiBuZWNlc3NhcnkuXG4gICAgKi9cbiAgICByZXBsYWNlUmFuZ2UocmFuZ2UsIHdoaWNoID0gdGhpcy5tYWluSW5kZXgpIHtcbiAgICAgICAgbGV0IHJhbmdlcyA9IHRoaXMucmFuZ2VzLnNsaWNlKCk7XG4gICAgICAgIHJhbmdlc1t3aGljaF0gPSByYW5nZTtcbiAgICAgICAgcmV0dXJuIEVkaXRvclNlbGVjdGlvbi5jcmVhdGUocmFuZ2VzLCB0aGlzLm1haW5JbmRleCk7XG4gICAgfVxuICAgIC8qKlxuICAgIENvbnZlcnQgdGhpcyBzZWxlY3Rpb24gdG8gYW4gb2JqZWN0IHRoYXQgY2FuIGJlIHNlcmlhbGl6ZWQgdG9cbiAgICBKU09OLlxuICAgICovXG4gICAgdG9KU09OKCkge1xuICAgICAgICByZXR1cm4geyByYW5nZXM6IHRoaXMucmFuZ2VzLm1hcChyID0+IHIudG9KU09OKCkpLCBtYWluOiB0aGlzLm1haW5JbmRleCB9O1xuICAgIH1cbiAgICAvKipcbiAgICBDcmVhdGUgYSBzZWxlY3Rpb24gZnJvbSBhIEpTT04gcmVwcmVzZW50YXRpb24uXG4gICAgKi9cbiAgICBzdGF0aWMgZnJvbUpTT04oanNvbikge1xuICAgICAgICBpZiAoIWpzb24gfHwgIUFycmF5LmlzQXJyYXkoanNvbi5yYW5nZXMpIHx8IHR5cGVvZiBqc29uLm1haW4gIT0gXCJudW1iZXJcIiB8fCBqc29uLm1haW4gPj0ganNvbi5yYW5nZXMubGVuZ3RoKVxuICAgICAgICAgICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoXCJJbnZhbGlkIEpTT04gcmVwcmVzZW50YXRpb24gZm9yIEVkaXRvclNlbGVjdGlvblwiKTtcbiAgICAgICAgcmV0dXJuIG5ldyBFZGl0b3JTZWxlY3Rpb24oanNvbi5yYW5nZXMubWFwKChyKSA9PiBTZWxlY3Rpb25SYW5nZS5mcm9tSlNPTihyKSksIGpzb24ubWFpbik7XG4gICAgfVxuICAgIC8qKlxuICAgIENyZWF0ZSBhIHNlbGVjdGlvbiBob2xkaW5nIGEgc2luZ2xlIHJhbmdlLlxuICAgICovXG4gICAgc3RhdGljIHNpbmdsZShhbmNob3IsIGhlYWQgPSBhbmNob3IpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBFZGl0b3JTZWxlY3Rpb24oW0VkaXRvclNlbGVjdGlvbi5yYW5nZShhbmNob3IsIGhlYWQpXSwgMCk7XG4gICAgfVxuICAgIC8qKlxuICAgIFNvcnQgYW5kIG1lcmdlIHRoZSBnaXZlbiBzZXQgb2YgcmFuZ2VzLCBjcmVhdGluZyBhIHZhbGlkXG4gICAgc2VsZWN0aW9uLlxuICAgICovXG4gICAgc3RhdGljIGNyZWF0ZShyYW5nZXMsIG1haW5JbmRleCA9IDApIHtcbiAgICAgICAgaWYgKHJhbmdlcy5sZW5ndGggPT0gMClcbiAgICAgICAgICAgIHRocm93IG5ldyBSYW5nZUVycm9yKFwiQSBzZWxlY3Rpb24gbmVlZHMgYXQgbGVhc3Qgb25lIHJhbmdlXCIpO1xuICAgICAgICBmb3IgKGxldCBwb3MgPSAwLCBpID0gMDsgaSA8IHJhbmdlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgbGV0IHJhbmdlID0gcmFuZ2VzW2ldO1xuICAgICAgICAgICAgaWYgKHJhbmdlLmVtcHR5ID8gcmFuZ2UuZnJvbSA8PSBwb3MgOiByYW5nZS5mcm9tIDwgcG9zKVxuICAgICAgICAgICAgICAgIHJldHVybiBFZGl0b3JTZWxlY3Rpb24ubm9ybWFsaXplZChyYW5nZXMuc2xpY2UoKSwgbWFpbkluZGV4KTtcbiAgICAgICAgICAgIHBvcyA9IHJhbmdlLnRvO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgRWRpdG9yU2VsZWN0aW9uKHJhbmdlcywgbWFpbkluZGV4KTtcbiAgICB9XG4gICAgLyoqXG4gICAgQ3JlYXRlIGEgY3Vyc29yIHNlbGVjdGlvbiByYW5nZSBhdCB0aGUgZ2l2ZW4gcG9zaXRpb24uIFlvdSBjYW5cbiAgICBzYWZlbHkgaWdub3JlIHRoZSBvcHRpb25hbCBhcmd1bWVudHMgaW4gbW9zdCBzaXR1YXRpb25zLlxuICAgICovXG4gICAgc3RhdGljIGN1cnNvcihwb3MsIGFzc29jID0gMCwgYmlkaUxldmVsLCBnb2FsQ29sdW1uKSB7XG4gICAgICAgIHJldHVybiBTZWxlY3Rpb25SYW5nZS5jcmVhdGUocG9zLCBwb3MsIChhc3NvYyA9PSAwID8gMCA6IGFzc29jIDwgMCA/IDggLyogUmFuZ2VGbGFnLkFzc29jQmVmb3JlICovIDogMTYgLyogUmFuZ2VGbGFnLkFzc29jQWZ0ZXIgKi8pIHxcbiAgICAgICAgICAgIChiaWRpTGV2ZWwgPT0gbnVsbCA/IDcgOiBNYXRoLm1pbig2LCBiaWRpTGV2ZWwpKSB8XG4gICAgICAgICAgICAoKGdvYWxDb2x1bW4gIT09IG51bGwgJiYgZ29hbENvbHVtbiAhPT0gdm9pZCAwID8gZ29hbENvbHVtbiA6IDE2Nzc3MjE1IC8qIFJhbmdlRmxhZy5Ob0dvYWxDb2x1bW4gKi8pIDw8IDYgLyogUmFuZ2VGbGFnLkdvYWxDb2x1bW5PZmZzZXQgKi8pKTtcbiAgICB9XG4gICAgLyoqXG4gICAgQ3JlYXRlIGEgc2VsZWN0aW9uIHJhbmdlLlxuICAgICovXG4gICAgc3RhdGljIHJhbmdlKGFuY2hvciwgaGVhZCwgZ29hbENvbHVtbiwgYmlkaUxldmVsKSB7XG4gICAgICAgIGxldCBmbGFncyA9ICgoZ29hbENvbHVtbiAhPT0gbnVsbCAmJiBnb2FsQ29sdW1uICE9PSB2b2lkIDAgPyBnb2FsQ29sdW1uIDogMTY3NzcyMTUgLyogUmFuZ2VGbGFnLk5vR29hbENvbHVtbiAqLykgPDwgNiAvKiBSYW5nZUZsYWcuR29hbENvbHVtbk9mZnNldCAqLykgfFxuICAgICAgICAgICAgKGJpZGlMZXZlbCA9PSBudWxsID8gNyA6IE1hdGgubWluKDYsIGJpZGlMZXZlbCkpO1xuICAgICAgICByZXR1cm4gaGVhZCA8IGFuY2hvciA/IFNlbGVjdGlvblJhbmdlLmNyZWF0ZShoZWFkLCBhbmNob3IsIDMyIC8qIFJhbmdlRmxhZy5JbnZlcnRlZCAqLyB8IDE2IC8qIFJhbmdlRmxhZy5Bc3NvY0FmdGVyICovIHwgZmxhZ3MpXG4gICAgICAgICAgICA6IFNlbGVjdGlvblJhbmdlLmNyZWF0ZShhbmNob3IsIGhlYWQsIChoZWFkID4gYW5jaG9yID8gOCAvKiBSYW5nZUZsYWcuQXNzb2NCZWZvcmUgKi8gOiAwKSB8IGZsYWdzKTtcbiAgICB9XG4gICAgLyoqXG4gICAgQGludGVybmFsXG4gICAgKi9cbiAgICBzdGF0aWMgbm9ybWFsaXplZChyYW5nZXMsIG1haW5JbmRleCA9IDApIHtcbiAgICAgICAgbGV0IG1haW4gPSByYW5nZXNbbWFpbkluZGV4XTtcbiAgICAgICAgcmFuZ2VzLnNvcnQoKGEsIGIpID0+IGEuZnJvbSAtIGIuZnJvbSk7XG4gICAgICAgIG1haW5JbmRleCA9IHJhbmdlcy5pbmRleE9mKG1haW4pO1xuICAgICAgICBmb3IgKGxldCBpID0gMTsgaSA8IHJhbmdlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgbGV0IHJhbmdlID0gcmFuZ2VzW2ldLCBwcmV2ID0gcmFuZ2VzW2kgLSAxXTtcbiAgICAgICAgICAgIGlmIChyYW5nZS5lbXB0eSA/IHJhbmdlLmZyb20gPD0gcHJldi50byA6IHJhbmdlLmZyb20gPCBwcmV2LnRvKSB7XG4gICAgICAgICAgICAgICAgbGV0IGZyb20gPSBwcmV2LmZyb20sIHRvID0gTWF0aC5tYXgocmFuZ2UudG8sIHByZXYudG8pO1xuICAgICAgICAgICAgICAgIGlmIChpIDw9IG1haW5JbmRleClcbiAgICAgICAgICAgICAgICAgICAgbWFpbkluZGV4LS07XG4gICAgICAgICAgICAgICAgcmFuZ2VzLnNwbGljZSgtLWksIDIsIHJhbmdlLmFuY2hvciA+IHJhbmdlLmhlYWQgPyBFZGl0b3JTZWxlY3Rpb24ucmFuZ2UodG8sIGZyb20pIDogRWRpdG9yU2VsZWN0aW9uLnJhbmdlKGZyb20sIHRvKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBFZGl0b3JTZWxlY3Rpb24ocmFuZ2VzLCBtYWluSW5kZXgpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGNoZWNrU2VsZWN0aW9uKHNlbGVjdGlvbiwgZG9jTGVuZ3RoKSB7XG4gICAgZm9yIChsZXQgcmFuZ2Ugb2Ygc2VsZWN0aW9uLnJhbmdlcylcbiAgICAgICAgaWYgKHJhbmdlLnRvID4gZG9jTGVuZ3RoKVxuICAgICAgICAgICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoXCJTZWxlY3Rpb24gcG9pbnRzIG91dHNpZGUgb2YgZG9jdW1lbnRcIik7XG59XG5cbmxldCBuZXh0SUQgPSAwO1xuLyoqXG5BIGZhY2V0IGlzIGEgbGFiZWxlZCB2YWx1ZSB0aGF0IGlzIGFzc29jaWF0ZWQgd2l0aCBhbiBlZGl0b3JcbnN0YXRlLiBJdCB0YWtlcyBpbnB1dHMgZnJvbSBhbnkgbnVtYmVyIG9mIGV4dGVuc2lvbnMsIGFuZCBjb21iaW5lc1xudGhvc2UgaW50byBhIHNpbmdsZSBvdXRwdXQgdmFsdWUuXG5cbkV4YW1wbGVzIG9mIHVzZXMgb2YgZmFjZXRzIGFyZSB0aGUgW3RhYlxuc2l6ZV0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNzdGF0ZS5FZGl0b3JTdGF0ZV50YWJTaXplKSwgW2VkaXRvclxuYXR0cmlidXRlc10oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyN2aWV3LkVkaXRvclZpZXdeZWRpdG9yQXR0cmlidXRlcyksIGFuZCBbdXBkYXRlXG5saXN0ZW5lcnNdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jdmlldy5FZGl0b3JWaWV3XnVwZGF0ZUxpc3RlbmVyKS5cblxuTm90ZSB0aGF0IGBGYWNldGAgaW5zdGFuY2VzIGNhbiBiZSB1c2VkIGFueXdoZXJlIHdoZXJlXG5bYEZhY2V0UmVhZGVyYF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNzdGF0ZS5GYWNldFJlYWRlcikgaXMgZXhwZWN0ZWQuXG4qL1xuY2xhc3MgRmFjZXQge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8qKlxuICAgIEBpbnRlcm5hbFxuICAgICovXG4gICAgY29tYmluZSwgXG4gICAgLyoqXG4gICAgQGludGVybmFsXG4gICAgKi9cbiAgICBjb21wYXJlSW5wdXQsIFxuICAgIC8qKlxuICAgIEBpbnRlcm5hbFxuICAgICovXG4gICAgY29tcGFyZSwgaXNTdGF0aWMsIGVuYWJsZXMpIHtcbiAgICAgICAgdGhpcy5jb21iaW5lID0gY29tYmluZTtcbiAgICAgICAgdGhpcy5jb21wYXJlSW5wdXQgPSBjb21wYXJlSW5wdXQ7XG4gICAgICAgIHRoaXMuY29tcGFyZSA9IGNvbXBhcmU7XG4gICAgICAgIHRoaXMuaXNTdGF0aWMgPSBpc1N0YXRpYztcbiAgICAgICAgLyoqXG4gICAgICAgIEBpbnRlcm5hbFxuICAgICAgICAqL1xuICAgICAgICB0aGlzLmlkID0gbmV4dElEKys7XG4gICAgICAgIHRoaXMuZGVmYXVsdCA9IGNvbWJpbmUoW10pO1xuICAgICAgICB0aGlzLmV4dGVuc2lvbnMgPSB0eXBlb2YgZW5hYmxlcyA9PSBcImZ1bmN0aW9uXCIgPyBlbmFibGVzKHRoaXMpIDogZW5hYmxlcztcbiAgICB9XG4gICAgLyoqXG4gICAgUmV0dXJucyBhIGZhY2V0IHJlYWRlciBmb3IgdGhpcyBmYWNldCwgd2hpY2ggY2FuIGJlIHVzZWQgdG9cbiAgICBbcmVhZF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNzdGF0ZS5FZGl0b3JTdGF0ZS5mYWNldCkgaXQgYnV0IG5vdCB0byBkZWZpbmUgdmFsdWVzIGZvciBpdC5cbiAgICAqL1xuICAgIGdldCByZWFkZXIoKSB7IHJldHVybiB0aGlzOyB9XG4gICAgLyoqXG4gICAgRGVmaW5lIGEgbmV3IGZhY2V0LlxuICAgICovXG4gICAgc3RhdGljIGRlZmluZShjb25maWcgPSB7fSkge1xuICAgICAgICByZXR1cm4gbmV3IEZhY2V0KGNvbmZpZy5jb21iaW5lIHx8ICgoYSkgPT4gYSksIGNvbmZpZy5jb21wYXJlSW5wdXQgfHwgKChhLCBiKSA9PiBhID09PSBiKSwgY29uZmlnLmNvbXBhcmUgfHwgKCFjb25maWcuY29tYmluZSA/IHNhbWVBcnJheSA6IChhLCBiKSA9PiBhID09PSBiKSwgISFjb25maWcuc3RhdGljLCBjb25maWcuZW5hYmxlcyk7XG4gICAgfVxuICAgIC8qKlxuICAgIFJldHVybnMgYW4gZXh0ZW5zaW9uIHRoYXQgYWRkcyB0aGUgZ2l2ZW4gdmFsdWUgdG8gdGhpcyBmYWNldC5cbiAgICAqL1xuICAgIG9mKHZhbHVlKSB7XG4gICAgICAgIHJldHVybiBuZXcgRmFjZXRQcm92aWRlcihbXSwgdGhpcywgMCAvKiBQcm92aWRlci5TdGF0aWMgKi8sIHZhbHVlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgQ3JlYXRlIGFuIGV4dGVuc2lvbiB0aGF0IGNvbXB1dGVzIGEgdmFsdWUgZm9yIHRoZSBmYWNldCBmcm9tIGFcbiAgICBzdGF0ZS4gWW91IG11c3QgdGFrZSBjYXJlIHRvIGRlY2xhcmUgdGhlIHBhcnRzIG9mIHRoZSBzdGF0ZSB0aGF0XG4gICAgdGhpcyB2YWx1ZSBkZXBlbmRzIG9uLCBzaW5jZSB5b3VyIGZ1bmN0aW9uIGlzIG9ubHkgY2FsbGVkIGFnYWluXG4gICAgZm9yIGEgbmV3IHN0YXRlIHdoZW4gb25lIG9mIHRob3NlIHBhcnRzIGNoYW5nZWQuXG4gICAgXG4gICAgSW4gY2FzZXMgd2hlcmUgeW91ciB2YWx1ZSBkZXBlbmRzIG9ubHkgb24gYSBzaW5nbGUgZmllbGQsIHlvdSdsbFxuICAgIHdhbnQgdG8gdXNlIHRoZSBbYGZyb21gXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI3N0YXRlLkZhY2V0LmZyb20pIG1ldGhvZCBpbnN0ZWFkLlxuICAgICovXG4gICAgY29tcHV0ZShkZXBzLCBnZXQpIHtcbiAgICAgICAgaWYgKHRoaXMuaXNTdGF0aWMpXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJDYW4ndCBjb21wdXRlIGEgc3RhdGljIGZhY2V0XCIpO1xuICAgICAgICByZXR1cm4gbmV3IEZhY2V0UHJvdmlkZXIoZGVwcywgdGhpcywgMSAvKiBQcm92aWRlci5TaW5nbGUgKi8sIGdldCk7XG4gICAgfVxuICAgIC8qKlxuICAgIENyZWF0ZSBhbiBleHRlbnNpb24gdGhhdCBjb21wdXRlcyB6ZXJvIG9yIG1vcmUgdmFsdWVzIGZvciB0aGlzXG4gICAgZmFjZXQgZnJvbSBhIHN0YXRlLlxuICAgICovXG4gICAgY29tcHV0ZU4oZGVwcywgZ2V0KSB7XG4gICAgICAgIGlmICh0aGlzLmlzU3RhdGljKVxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQ2FuJ3QgY29tcHV0ZSBhIHN0YXRpYyBmYWNldFwiKTtcbiAgICAgICAgcmV0dXJuIG5ldyBGYWNldFByb3ZpZGVyKGRlcHMsIHRoaXMsIDIgLyogUHJvdmlkZXIuTXVsdGkgKi8sIGdldCk7XG4gICAgfVxuICAgIGZyb20oZmllbGQsIGdldCkge1xuICAgICAgICBpZiAoIWdldClcbiAgICAgICAgICAgIGdldCA9IHggPT4geDtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29tcHV0ZShbZmllbGRdLCBzdGF0ZSA9PiBnZXQoc3RhdGUuZmllbGQoZmllbGQpKSk7XG4gICAgfVxufVxuZnVuY3Rpb24gc2FtZUFycmF5KGEsIGIpIHtcbiAgICByZXR1cm4gYSA9PSBiIHx8IGEubGVuZ3RoID09IGIubGVuZ3RoICYmIGEuZXZlcnkoKGUsIGkpID0+IGUgPT09IGJbaV0pO1xufVxuY2xhc3MgRmFjZXRQcm92aWRlciB7XG4gICAgY29uc3RydWN0b3IoZGVwZW5kZW5jaWVzLCBmYWNldCwgdHlwZSwgdmFsdWUpIHtcbiAgICAgICAgdGhpcy5kZXBlbmRlbmNpZXMgPSBkZXBlbmRlbmNpZXM7XG4gICAgICAgIHRoaXMuZmFjZXQgPSBmYWNldDtcbiAgICAgICAgdGhpcy50eXBlID0gdHlwZTtcbiAgICAgICAgdGhpcy52YWx1ZSA9IHZhbHVlO1xuICAgICAgICB0aGlzLmlkID0gbmV4dElEKys7XG4gICAgfVxuICAgIGR5bmFtaWNTbG90KGFkZHJlc3Nlcykge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIGxldCBnZXR0ZXIgPSB0aGlzLnZhbHVlO1xuICAgICAgICBsZXQgY29tcGFyZSA9IHRoaXMuZmFjZXQuY29tcGFyZUlucHV0O1xuICAgICAgICBsZXQgaWQgPSB0aGlzLmlkLCBpZHggPSBhZGRyZXNzZXNbaWRdID4+IDEsIG11bHRpID0gdGhpcy50eXBlID09IDIgLyogUHJvdmlkZXIuTXVsdGkgKi87XG4gICAgICAgIGxldCBkZXBEb2MgPSBmYWxzZSwgZGVwU2VsID0gZmFsc2UsIGRlcEFkZHJzID0gW107XG4gICAgICAgIGZvciAobGV0IGRlcCBvZiB0aGlzLmRlcGVuZGVuY2llcykge1xuICAgICAgICAgICAgaWYgKGRlcCA9PSBcImRvY1wiKVxuICAgICAgICAgICAgICAgIGRlcERvYyA9IHRydWU7XG4gICAgICAgICAgICBlbHNlIGlmIChkZXAgPT0gXCJzZWxlY3Rpb25cIilcbiAgICAgICAgICAgICAgICBkZXBTZWwgPSB0cnVlO1xuICAgICAgICAgICAgZWxzZSBpZiAoKCgoX2EgPSBhZGRyZXNzZXNbZGVwLmlkXSkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogMSkgJiAxKSA9PSAwKVxuICAgICAgICAgICAgICAgIGRlcEFkZHJzLnB1c2goYWRkcmVzc2VzW2RlcC5pZF0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBjcmVhdGUoc3RhdGUpIHtcbiAgICAgICAgICAgICAgICBzdGF0ZS52YWx1ZXNbaWR4XSA9IGdldHRlcihzdGF0ZSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIDEgLyogU2xvdFN0YXR1cy5DaGFuZ2VkICovO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHVwZGF0ZShzdGF0ZSwgdHIpIHtcbiAgICAgICAgICAgICAgICBpZiAoKGRlcERvYyAmJiB0ci5kb2NDaGFuZ2VkKSB8fCAoZGVwU2VsICYmICh0ci5kb2NDaGFuZ2VkIHx8IHRyLnNlbGVjdGlvbikpIHx8IGVuc3VyZUFsbChzdGF0ZSwgZGVwQWRkcnMpKSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBuZXdWYWwgPSBnZXR0ZXIoc3RhdGUpO1xuICAgICAgICAgICAgICAgICAgICBpZiAobXVsdGkgPyAhY29tcGFyZUFycmF5KG5ld1ZhbCwgc3RhdGUudmFsdWVzW2lkeF0sIGNvbXBhcmUpIDogIWNvbXBhcmUobmV3VmFsLCBzdGF0ZS52YWx1ZXNbaWR4XSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlLnZhbHVlc1tpZHhdID0gbmV3VmFsO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDEgLyogU2xvdFN0YXR1cy5DaGFuZ2VkICovO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiAwO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHJlY29uZmlndXJlOiAoc3RhdGUsIG9sZFN0YXRlKSA9PiB7XG4gICAgICAgICAgICAgICAgbGV0IG5ld1ZhbCwgb2xkQWRkciA9IG9sZFN0YXRlLmNvbmZpZy5hZGRyZXNzW2lkXTtcbiAgICAgICAgICAgICAgICBpZiAob2xkQWRkciAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBvbGRWYWwgPSBnZXRBZGRyKG9sZFN0YXRlLCBvbGRBZGRyKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuZGVwZW5kZW5jaWVzLmV2ZXJ5KGRlcCA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZGVwIGluc3RhbmNlb2YgRmFjZXQgPyBvbGRTdGF0ZS5mYWNldChkZXApID09PSBzdGF0ZS5mYWNldChkZXApIDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZXAgaW5zdGFuY2VvZiBTdGF0ZUZpZWxkID8gb2xkU3RhdGUuZmllbGQoZGVwLCBmYWxzZSkgPT0gc3RhdGUuZmllbGQoZGVwLCBmYWxzZSkgOiB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9KSB8fCAobXVsdGkgPyBjb21wYXJlQXJyYXkobmV3VmFsID0gZ2V0dGVyKHN0YXRlKSwgb2xkVmFsLCBjb21wYXJlKSA6IGNvbXBhcmUobmV3VmFsID0gZ2V0dGVyKHN0YXRlKSwgb2xkVmFsKSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlLnZhbHVlc1tpZHhdID0gb2xkVmFsO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDA7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIG5ld1ZhbCA9IGdldHRlcihzdGF0ZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHN0YXRlLnZhbHVlc1tpZHhdID0gbmV3VmFsO1xuICAgICAgICAgICAgICAgIHJldHVybiAxIC8qIFNsb3RTdGF0dXMuQ2hhbmdlZCAqLztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICB9XG59XG5mdW5jdGlvbiBjb21wYXJlQXJyYXkoYSwgYiwgY29tcGFyZSkge1xuICAgIGlmIChhLmxlbmd0aCAhPSBiLmxlbmd0aClcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYS5sZW5ndGg7IGkrKylcbiAgICAgICAgaWYgKCFjb21wYXJlKGFbaV0sIGJbaV0pKVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIHJldHVybiB0cnVlO1xufVxuZnVuY3Rpb24gZW5zdXJlQWxsKHN0YXRlLCBhZGRycykge1xuICAgIGxldCBjaGFuZ2VkID0gZmFsc2U7XG4gICAgZm9yIChsZXQgYWRkciBvZiBhZGRycylcbiAgICAgICAgaWYgKGVuc3VyZUFkZHIoc3RhdGUsIGFkZHIpICYgMSAvKiBTbG90U3RhdHVzLkNoYW5nZWQgKi8pXG4gICAgICAgICAgICBjaGFuZ2VkID0gdHJ1ZTtcbiAgICByZXR1cm4gY2hhbmdlZDtcbn1cbmZ1bmN0aW9uIGR5bmFtaWNGYWNldFNsb3QoYWRkcmVzc2VzLCBmYWNldCwgcHJvdmlkZXJzKSB7XG4gICAgbGV0IHByb3ZpZGVyQWRkcnMgPSBwcm92aWRlcnMubWFwKHAgPT4gYWRkcmVzc2VzW3AuaWRdKTtcbiAgICBsZXQgcHJvdmlkZXJUeXBlcyA9IHByb3ZpZGVycy5tYXAocCA9PiBwLnR5cGUpO1xuICAgIGxldCBkeW5hbWljID0gcHJvdmlkZXJBZGRycy5maWx0ZXIocCA9PiAhKHAgJiAxKSk7XG4gICAgbGV0IGlkeCA9IGFkZHJlc3Nlc1tmYWNldC5pZF0gPj4gMTtcbiAgICBmdW5jdGlvbiBnZXQoc3RhdGUpIHtcbiAgICAgICAgbGV0IHZhbHVlcyA9IFtdO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHByb3ZpZGVyQWRkcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGxldCB2YWx1ZSA9IGdldEFkZHIoc3RhdGUsIHByb3ZpZGVyQWRkcnNbaV0pO1xuICAgICAgICAgICAgaWYgKHByb3ZpZGVyVHlwZXNbaV0gPT0gMiAvKiBQcm92aWRlci5NdWx0aSAqLylcbiAgICAgICAgICAgICAgICBmb3IgKGxldCB2YWwgb2YgdmFsdWUpXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlcy5wdXNoKHZhbCk7XG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgdmFsdWVzLnB1c2godmFsdWUpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmYWNldC5jb21iaW5lKHZhbHVlcyk7XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICAgIGNyZWF0ZShzdGF0ZSkge1xuICAgICAgICAgICAgZm9yIChsZXQgYWRkciBvZiBwcm92aWRlckFkZHJzKVxuICAgICAgICAgICAgICAgIGVuc3VyZUFkZHIoc3RhdGUsIGFkZHIpO1xuICAgICAgICAgICAgc3RhdGUudmFsdWVzW2lkeF0gPSBnZXQoc3RhdGUpO1xuICAgICAgICAgICAgcmV0dXJuIDEgLyogU2xvdFN0YXR1cy5DaGFuZ2VkICovO1xuICAgICAgICB9LFxuICAgICAgICB1cGRhdGUoc3RhdGUsIHRyKSB7XG4gICAgICAgICAgICBpZiAoIWVuc3VyZUFsbChzdGF0ZSwgZHluYW1pYykpXG4gICAgICAgICAgICAgICAgcmV0dXJuIDA7XG4gICAgICAgICAgICBsZXQgdmFsdWUgPSBnZXQoc3RhdGUpO1xuICAgICAgICAgICAgaWYgKGZhY2V0LmNvbXBhcmUodmFsdWUsIHN0YXRlLnZhbHVlc1tpZHhdKSlcbiAgICAgICAgICAgICAgICByZXR1cm4gMDtcbiAgICAgICAgICAgIHN0YXRlLnZhbHVlc1tpZHhdID0gdmFsdWU7XG4gICAgICAgICAgICByZXR1cm4gMSAvKiBTbG90U3RhdHVzLkNoYW5nZWQgKi87XG4gICAgICAgIH0sXG4gICAgICAgIHJlY29uZmlndXJlKHN0YXRlLCBvbGRTdGF0ZSkge1xuICAgICAgICAgICAgbGV0IGRlcENoYW5nZWQgPSBlbnN1cmVBbGwoc3RhdGUsIHByb3ZpZGVyQWRkcnMpO1xuICAgICAgICAgICAgbGV0IG9sZFByb3ZpZGVycyA9IG9sZFN0YXRlLmNvbmZpZy5mYWNldHNbZmFjZXQuaWRdLCBvbGRWYWx1ZSA9IG9sZFN0YXRlLmZhY2V0KGZhY2V0KTtcbiAgICAgICAgICAgIGlmIChvbGRQcm92aWRlcnMgJiYgIWRlcENoYW5nZWQgJiYgc2FtZUFycmF5KHByb3ZpZGVycywgb2xkUHJvdmlkZXJzKSkge1xuICAgICAgICAgICAgICAgIHN0YXRlLnZhbHVlc1tpZHhdID0gb2xkVmFsdWU7XG4gICAgICAgICAgICAgICAgcmV0dXJuIDA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsZXQgdmFsdWUgPSBnZXQoc3RhdGUpO1xuICAgICAgICAgICAgaWYgKGZhY2V0LmNvbXBhcmUodmFsdWUsIG9sZFZhbHVlKSkge1xuICAgICAgICAgICAgICAgIHN0YXRlLnZhbHVlc1tpZHhdID0gb2xkVmFsdWU7XG4gICAgICAgICAgICAgICAgcmV0dXJuIDA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzdGF0ZS52YWx1ZXNbaWR4XSA9IHZhbHVlO1xuICAgICAgICAgICAgcmV0dXJuIDEgLyogU2xvdFN0YXR1cy5DaGFuZ2VkICovO1xuICAgICAgICB9XG4gICAgfTtcbn1cbmNvbnN0IGluaXRGaWVsZCA9IC8qQF9fUFVSRV9fKi9GYWNldC5kZWZpbmUoeyBzdGF0aWM6IHRydWUgfSk7XG4vKipcbkZpZWxkcyBjYW4gc3RvcmUgYWRkaXRpb25hbCBpbmZvcm1hdGlvbiBpbiBhbiBlZGl0b3Igc3RhdGUsIGFuZFxua2VlcCBpdCBpbiBzeW5jIHdpdGggdGhlIHJlc3Qgb2YgdGhlIHN0YXRlLlxuKi9cbmNsYXNzIFN0YXRlRmllbGQge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8qKlxuICAgIEBpbnRlcm5hbFxuICAgICovXG4gICAgaWQsIGNyZWF0ZUYsIHVwZGF0ZUYsIGNvbXBhcmVGLCBcbiAgICAvKipcbiAgICBAaW50ZXJuYWxcbiAgICAqL1xuICAgIHNwZWMpIHtcbiAgICAgICAgdGhpcy5pZCA9IGlkO1xuICAgICAgICB0aGlzLmNyZWF0ZUYgPSBjcmVhdGVGO1xuICAgICAgICB0aGlzLnVwZGF0ZUYgPSB1cGRhdGVGO1xuICAgICAgICB0aGlzLmNvbXBhcmVGID0gY29tcGFyZUY7XG4gICAgICAgIHRoaXMuc3BlYyA9IHNwZWM7XG4gICAgICAgIC8qKlxuICAgICAgICBAaW50ZXJuYWxcbiAgICAgICAgKi9cbiAgICAgICAgdGhpcy5wcm92aWRlcyA9IHVuZGVmaW5lZDtcbiAgICB9XG4gICAgLyoqXG4gICAgRGVmaW5lIGEgc3RhdGUgZmllbGQuXG4gICAgKi9cbiAgICBzdGF0aWMgZGVmaW5lKGNvbmZpZykge1xuICAgICAgICBsZXQgZmllbGQgPSBuZXcgU3RhdGVGaWVsZChuZXh0SUQrKywgY29uZmlnLmNyZWF0ZSwgY29uZmlnLnVwZGF0ZSwgY29uZmlnLmNvbXBhcmUgfHwgKChhLCBiKSA9PiBhID09PSBiKSwgY29uZmlnKTtcbiAgICAgICAgaWYgKGNvbmZpZy5wcm92aWRlKVxuICAgICAgICAgICAgZmllbGQucHJvdmlkZXMgPSBjb25maWcucHJvdmlkZShmaWVsZCk7XG4gICAgICAgIHJldHVybiBmaWVsZDtcbiAgICB9XG4gICAgY3JlYXRlKHN0YXRlKSB7XG4gICAgICAgIGxldCBpbml0ID0gc3RhdGUuZmFjZXQoaW5pdEZpZWxkKS5maW5kKGkgPT4gaS5maWVsZCA9PSB0aGlzKTtcbiAgICAgICAgcmV0dXJuICgoaW5pdCA9PT0gbnVsbCB8fCBpbml0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBpbml0LmNyZWF0ZSkgfHwgdGhpcy5jcmVhdGVGKShzdGF0ZSk7XG4gICAgfVxuICAgIC8qKlxuICAgIEBpbnRlcm5hbFxuICAgICovXG4gICAgc2xvdChhZGRyZXNzZXMpIHtcbiAgICAgICAgbGV0IGlkeCA9IGFkZHJlc3Nlc1t0aGlzLmlkXSA+PiAxO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgY3JlYXRlOiAoc3RhdGUpID0+IHtcbiAgICAgICAgICAgICAgICBzdGF0ZS52YWx1ZXNbaWR4XSA9IHRoaXMuY3JlYXRlKHN0YXRlKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gMSAvKiBTbG90U3RhdHVzLkNoYW5nZWQgKi87XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgdXBkYXRlOiAoc3RhdGUsIHRyKSA9PiB7XG4gICAgICAgICAgICAgICAgbGV0IG9sZFZhbCA9IHN0YXRlLnZhbHVlc1tpZHhdO1xuICAgICAgICAgICAgICAgIGxldCB2YWx1ZSA9IHRoaXMudXBkYXRlRihvbGRWYWwsIHRyKTtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5jb21wYXJlRihvbGRWYWwsIHZhbHVlKSlcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDA7XG4gICAgICAgICAgICAgICAgc3RhdGUudmFsdWVzW2lkeF0gPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICByZXR1cm4gMSAvKiBTbG90U3RhdHVzLkNoYW5nZWQgKi87XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgcmVjb25maWd1cmU6IChzdGF0ZSwgb2xkU3RhdGUpID0+IHtcbiAgICAgICAgICAgICAgICBsZXQgaW5pdCA9IHN0YXRlLmZhY2V0KGluaXRGaWVsZCksIG9sZEluaXQgPSBvbGRTdGF0ZS5mYWNldChpbml0RmllbGQpLCByZUluaXQ7XG4gICAgICAgICAgICAgICAgaWYgKChyZUluaXQgPSBpbml0LmZpbmQoaSA9PiBpLmZpZWxkID09IHRoaXMpKSAmJiByZUluaXQgIT0gb2xkSW5pdC5maW5kKGkgPT4gaS5maWVsZCA9PSB0aGlzKSkge1xuICAgICAgICAgICAgICAgICAgICBzdGF0ZS52YWx1ZXNbaWR4XSA9IHJlSW5pdC5jcmVhdGUoc3RhdGUpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gMSAvKiBTbG90U3RhdHVzLkNoYW5nZWQgKi87XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChvbGRTdGF0ZS5jb25maWcuYWRkcmVzc1t0aGlzLmlkXSAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIHN0YXRlLnZhbHVlc1tpZHhdID0gb2xkU3RhdGUuZmllbGQodGhpcyk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAwO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBzdGF0ZS52YWx1ZXNbaWR4XSA9IHRoaXMuY3JlYXRlKHN0YXRlKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gMSAvKiBTbG90U3RhdHVzLkNoYW5nZWQgKi87XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgfVxuICAgIC8qKlxuICAgIFJldHVybnMgYW4gZXh0ZW5zaW9uIHRoYXQgZW5hYmxlcyB0aGlzIGZpZWxkIGFuZCBvdmVycmlkZXMgdGhlXG4gICAgd2F5IGl0IGlzIGluaXRpYWxpemVkLiBDYW4gYmUgdXNlZnVsIHdoZW4geW91IG5lZWQgdG8gcHJvdmlkZSBhXG4gICAgbm9uLWRlZmF1bHQgc3RhcnRpbmcgdmFsdWUgZm9yIHRoZSBmaWVsZC5cbiAgICAqL1xuICAgIGluaXQoY3JlYXRlKSB7XG4gICAgICAgIHJldHVybiBbdGhpcywgaW5pdEZpZWxkLm9mKHsgZmllbGQ6IHRoaXMsIGNyZWF0ZSB9KV07XG4gICAgfVxuICAgIC8qKlxuICAgIFN0YXRlIGZpZWxkIGluc3RhbmNlcyBjYW4gYmUgdXNlZCBhc1xuICAgIFtgRXh0ZW5zaW9uYF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNzdGF0ZS5FeHRlbnNpb24pIHZhbHVlcyB0byBlbmFibGUgdGhlIGZpZWxkIGluIGFcbiAgICBnaXZlbiBzdGF0ZS5cbiAgICAqL1xuICAgIGdldCBleHRlbnNpb24oKSB7IHJldHVybiB0aGlzOyB9XG59XG5jb25zdCBQcmVjXyA9IHsgbG93ZXN0OiA0LCBsb3c6IDMsIGRlZmF1bHQ6IDIsIGhpZ2g6IDEsIGhpZ2hlc3Q6IDAgfTtcbmZ1bmN0aW9uIHByZWModmFsdWUpIHtcbiAgICByZXR1cm4gKGV4dCkgPT4gbmV3IFByZWNFeHRlbnNpb24oZXh0LCB2YWx1ZSk7XG59XG4vKipcbkJ5IGRlZmF1bHQgZXh0ZW5zaW9ucyBhcmUgcmVnaXN0ZXJlZCBpbiB0aGUgb3JkZXIgdGhleSBhcmUgZm91bmRcbmluIHRoZSBmbGF0dGVuZWQgZm9ybSBvZiBuZXN0ZWQgYXJyYXkgdGhhdCB3YXMgcHJvdmlkZWQuXG5JbmRpdmlkdWFsIGV4dGVuc2lvbiB2YWx1ZXMgY2FuIGJlIGFzc2lnbmVkIGEgcHJlY2VkZW5jZSB0b1xub3ZlcnJpZGUgdGhpcy4gRXh0ZW5zaW9ucyB0aGF0IGRvIG5vdCBoYXZlIGEgcHJlY2VkZW5jZSBzZXQgZ2V0XG50aGUgcHJlY2VkZW5jZSBvZiB0aGUgbmVhcmVzdCBwYXJlbnQgd2l0aCBhIHByZWNlZGVuY2UsIG9yXG5bYGRlZmF1bHRgXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI3N0YXRlLlByZWMuZGVmYXVsdCkgaWYgdGhlcmUgaXMgbm8gc3VjaCBwYXJlbnQuIFRoZVxuZmluYWwgb3JkZXJpbmcgb2YgZXh0ZW5zaW9ucyBpcyBkZXRlcm1pbmVkIGJ5IGZpcnN0IHNvcnRpbmcgYnlcbnByZWNlZGVuY2UgYW5kIHRoZW4gYnkgb3JkZXIgd2l0aGluIGVhY2ggcHJlY2VkZW5jZS5cbiovXG5jb25zdCBQcmVjID0ge1xuICAgIC8qKlxuICAgIFRoZSBoaWdoZXN0IHByZWNlZGVuY2UgbGV2ZWwsIGZvciBleHRlbnNpb25zIHRoYXQgc2hvdWxkIGVuZCB1cFxuICAgIG5lYXIgdGhlIHN0YXJ0IG9mIHRoZSBwcmVjZWRlbmNlIG9yZGVyaW5nLlxuICAgICovXG4gICAgaGlnaGVzdDogLypAX19QVVJFX18qL3ByZWMoUHJlY18uaGlnaGVzdCksXG4gICAgLyoqXG4gICAgQSBoaWdoZXItdGhhbi1kZWZhdWx0IHByZWNlZGVuY2UsIGZvciBleHRlbnNpb25zIHRoYXQgc2hvdWxkXG4gICAgY29tZSBiZWZvcmUgdGhvc2Ugd2l0aCBkZWZhdWx0IHByZWNlZGVuY2UuXG4gICAgKi9cbiAgICBoaWdoOiAvKkBfX1BVUkVfXyovcHJlYyhQcmVjXy5oaWdoKSxcbiAgICAvKipcbiAgICBUaGUgZGVmYXVsdCBwcmVjZWRlbmNlLCB3aGljaCBpcyBhbHNvIHVzZWQgZm9yIGV4dGVuc2lvbnNcbiAgICB3aXRob3V0IGFuIGV4cGxpY2l0IHByZWNlZGVuY2UuXG4gICAgKi9cbiAgICBkZWZhdWx0OiAvKkBfX1BVUkVfXyovcHJlYyhQcmVjXy5kZWZhdWx0KSxcbiAgICAvKipcbiAgICBBIGxvd2VyLXRoYW4tZGVmYXVsdCBwcmVjZWRlbmNlLlxuICAgICovXG4gICAgbG93OiAvKkBfX1BVUkVfXyovcHJlYyhQcmVjXy5sb3cpLFxuICAgIC8qKlxuICAgIFRoZSBsb3dlc3QgcHJlY2VkZW5jZSBsZXZlbC4gTWVhbnQgZm9yIHRoaW5ncyB0aGF0IHNob3VsZCBlbmQgdXBcbiAgICBuZWFyIHRoZSBlbmQgb2YgdGhlIGV4dGVuc2lvbiBvcmRlci5cbiAgICAqL1xuICAgIGxvd2VzdDogLypAX19QVVJFX18qL3ByZWMoUHJlY18ubG93ZXN0KVxufTtcbmNsYXNzIFByZWNFeHRlbnNpb24ge1xuICAgIGNvbnN0cnVjdG9yKGlubmVyLCBwcmVjKSB7XG4gICAgICAgIHRoaXMuaW5uZXIgPSBpbm5lcjtcbiAgICAgICAgdGhpcy5wcmVjID0gcHJlYztcbiAgICB9XG59XG4vKipcbkV4dGVuc2lvbiBjb21wYXJ0bWVudHMgY2FuIGJlIHVzZWQgdG8gbWFrZSBhIGNvbmZpZ3VyYXRpb25cbmR5bmFtaWMuIEJ5IFt3cmFwcGluZ10oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNzdGF0ZS5Db21wYXJ0bWVudC5vZikgcGFydCBvZiB5b3VyXG5jb25maWd1cmF0aW9uIGluIGEgY29tcGFydG1lbnQsIHlvdSBjYW4gbGF0ZXJcbltyZXBsYWNlXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI3N0YXRlLkNvbXBhcnRtZW50LnJlY29uZmlndXJlKSB0aGF0IHBhcnQgdGhyb3VnaCBhXG50cmFuc2FjdGlvbi5cbiovXG5jbGFzcyBDb21wYXJ0bWVudCB7XG4gICAgLyoqXG4gICAgQ3JlYXRlIGFuIGluc3RhbmNlIG9mIHRoaXMgY29tcGFydG1lbnQgdG8gYWRkIHRvIHlvdXIgW3N0YXRlXG4gICAgY29uZmlndXJhdGlvbl0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNzdGF0ZS5FZGl0b3JTdGF0ZUNvbmZpZy5leHRlbnNpb25zKS5cbiAgICAqL1xuICAgIG9mKGV4dCkgeyByZXR1cm4gbmV3IENvbXBhcnRtZW50SW5zdGFuY2UodGhpcywgZXh0KTsgfVxuICAgIC8qKlxuICAgIENyZWF0ZSBhbiBbZWZmZWN0XShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI3N0YXRlLlRyYW5zYWN0aW9uU3BlYy5lZmZlY3RzKSB0aGF0XG4gICAgcmVjb25maWd1cmVzIHRoaXMgY29tcGFydG1lbnQuXG4gICAgKi9cbiAgICByZWNvbmZpZ3VyZShjb250ZW50KSB7XG4gICAgICAgIHJldHVybiBDb21wYXJ0bWVudC5yZWNvbmZpZ3VyZS5vZih7IGNvbXBhcnRtZW50OiB0aGlzLCBleHRlbnNpb246IGNvbnRlbnQgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgIEdldCB0aGUgY3VycmVudCBjb250ZW50IG9mIHRoZSBjb21wYXJ0bWVudCBpbiB0aGUgc3RhdGUsIG9yXG4gICAgYHVuZGVmaW5lZGAgaWYgaXQgaXNuJ3QgcHJlc2VudC5cbiAgICAqL1xuICAgIGdldChzdGF0ZSkge1xuICAgICAgICByZXR1cm4gc3RhdGUuY29uZmlnLmNvbXBhcnRtZW50cy5nZXQodGhpcyk7XG4gICAgfVxufVxuY2xhc3MgQ29tcGFydG1lbnRJbnN0YW5jZSB7XG4gICAgY29uc3RydWN0b3IoY29tcGFydG1lbnQsIGlubmVyKSB7XG4gICAgICAgIHRoaXMuY29tcGFydG1lbnQgPSBjb21wYXJ0bWVudDtcbiAgICAgICAgdGhpcy5pbm5lciA9IGlubmVyO1xuICAgIH1cbn1cbmNsYXNzIENvbmZpZ3VyYXRpb24ge1xuICAgIGNvbnN0cnVjdG9yKGJhc2UsIGNvbXBhcnRtZW50cywgZHluYW1pY1Nsb3RzLCBhZGRyZXNzLCBzdGF0aWNWYWx1ZXMsIGZhY2V0cykge1xuICAgICAgICB0aGlzLmJhc2UgPSBiYXNlO1xuICAgICAgICB0aGlzLmNvbXBhcnRtZW50cyA9IGNvbXBhcnRtZW50cztcbiAgICAgICAgdGhpcy5keW5hbWljU2xvdHMgPSBkeW5hbWljU2xvdHM7XG4gICAgICAgIHRoaXMuYWRkcmVzcyA9IGFkZHJlc3M7XG4gICAgICAgIHRoaXMuc3RhdGljVmFsdWVzID0gc3RhdGljVmFsdWVzO1xuICAgICAgICB0aGlzLmZhY2V0cyA9IGZhY2V0cztcbiAgICAgICAgdGhpcy5zdGF0dXNUZW1wbGF0ZSA9IFtdO1xuICAgICAgICB3aGlsZSAodGhpcy5zdGF0dXNUZW1wbGF0ZS5sZW5ndGggPCBkeW5hbWljU2xvdHMubGVuZ3RoKVxuICAgICAgICAgICAgdGhpcy5zdGF0dXNUZW1wbGF0ZS5wdXNoKDAgLyogU2xvdFN0YXR1cy5VbnJlc29sdmVkICovKTtcbiAgICB9XG4gICAgc3RhdGljRmFjZXQoZmFjZXQpIHtcbiAgICAgICAgbGV0IGFkZHIgPSB0aGlzLmFkZHJlc3NbZmFjZXQuaWRdO1xuICAgICAgICByZXR1cm4gYWRkciA9PSBudWxsID8gZmFjZXQuZGVmYXVsdCA6IHRoaXMuc3RhdGljVmFsdWVzW2FkZHIgPj4gMV07XG4gICAgfVxuICAgIHN0YXRpYyByZXNvbHZlKGJhc2UsIGNvbXBhcnRtZW50cywgb2xkU3RhdGUpIHtcbiAgICAgICAgbGV0IGZpZWxkcyA9IFtdO1xuICAgICAgICBsZXQgZmFjZXRzID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgICAgICAgbGV0IG5ld0NvbXBhcnRtZW50cyA9IG5ldyBNYXAoKTtcbiAgICAgICAgZm9yIChsZXQgZXh0IG9mIGZsYXR0ZW4oYmFzZSwgY29tcGFydG1lbnRzLCBuZXdDb21wYXJ0bWVudHMpKSB7XG4gICAgICAgICAgICBpZiAoZXh0IGluc3RhbmNlb2YgU3RhdGVGaWVsZClcbiAgICAgICAgICAgICAgICBmaWVsZHMucHVzaChleHQpO1xuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgIChmYWNldHNbZXh0LmZhY2V0LmlkXSB8fCAoZmFjZXRzW2V4dC5mYWNldC5pZF0gPSBbXSkpLnB1c2goZXh0KTtcbiAgICAgICAgfVxuICAgICAgICBsZXQgYWRkcmVzcyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gICAgICAgIGxldCBzdGF0aWNWYWx1ZXMgPSBbXTtcbiAgICAgICAgbGV0IGR5bmFtaWNTbG90cyA9IFtdO1xuICAgICAgICBmb3IgKGxldCBmaWVsZCBvZiBmaWVsZHMpIHtcbiAgICAgICAgICAgIGFkZHJlc3NbZmllbGQuaWRdID0gZHluYW1pY1Nsb3RzLmxlbmd0aCA8PCAxO1xuICAgICAgICAgICAgZHluYW1pY1Nsb3RzLnB1c2goYSA9PiBmaWVsZC5zbG90KGEpKTtcbiAgICAgICAgfVxuICAgICAgICBsZXQgb2xkRmFjZXRzID0gb2xkU3RhdGUgPT09IG51bGwgfHwgb2xkU3RhdGUgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9sZFN0YXRlLmNvbmZpZy5mYWNldHM7XG4gICAgICAgIGZvciAobGV0IGlkIGluIGZhY2V0cykge1xuICAgICAgICAgICAgbGV0IHByb3ZpZGVycyA9IGZhY2V0c1tpZF0sIGZhY2V0ID0gcHJvdmlkZXJzWzBdLmZhY2V0O1xuICAgICAgICAgICAgbGV0IG9sZFByb3ZpZGVycyA9IG9sZEZhY2V0cyAmJiBvbGRGYWNldHNbaWRdIHx8IFtdO1xuICAgICAgICAgICAgaWYgKHByb3ZpZGVycy5ldmVyeShwID0+IHAudHlwZSA9PSAwIC8qIFByb3ZpZGVyLlN0YXRpYyAqLykpIHtcbiAgICAgICAgICAgICAgICBhZGRyZXNzW2ZhY2V0LmlkXSA9IChzdGF0aWNWYWx1ZXMubGVuZ3RoIDw8IDEpIHwgMTtcbiAgICAgICAgICAgICAgICBpZiAoc2FtZUFycmF5KG9sZFByb3ZpZGVycywgcHJvdmlkZXJzKSkge1xuICAgICAgICAgICAgICAgICAgICBzdGF0aWNWYWx1ZXMucHVzaChvbGRTdGF0ZS5mYWNldChmYWNldCkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IHZhbHVlID0gZmFjZXQuY29tYmluZShwcm92aWRlcnMubWFwKHAgPT4gcC52YWx1ZSkpO1xuICAgICAgICAgICAgICAgICAgICBzdGF0aWNWYWx1ZXMucHVzaChvbGRTdGF0ZSAmJiBmYWNldC5jb21wYXJlKHZhbHVlLCBvbGRTdGF0ZS5mYWNldChmYWNldCkpID8gb2xkU3RhdGUuZmFjZXQoZmFjZXQpIDogdmFsdWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGZvciAobGV0IHAgb2YgcHJvdmlkZXJzKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChwLnR5cGUgPT0gMCAvKiBQcm92aWRlci5TdGF0aWMgKi8pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFkZHJlc3NbcC5pZF0gPSAoc3RhdGljVmFsdWVzLmxlbmd0aCA8PCAxKSB8IDE7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0aWNWYWx1ZXMucHVzaChwLnZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFkZHJlc3NbcC5pZF0gPSBkeW5hbWljU2xvdHMubGVuZ3RoIDw8IDE7XG4gICAgICAgICAgICAgICAgICAgICAgICBkeW5hbWljU2xvdHMucHVzaChhID0+IHAuZHluYW1pY1Nsb3QoYSkpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGFkZHJlc3NbZmFjZXQuaWRdID0gZHluYW1pY1Nsb3RzLmxlbmd0aCA8PCAxO1xuICAgICAgICAgICAgICAgIGR5bmFtaWNTbG90cy5wdXNoKGEgPT4gZHluYW1pY0ZhY2V0U2xvdChhLCBmYWNldCwgcHJvdmlkZXJzKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgbGV0IGR5bmFtaWMgPSBkeW5hbWljU2xvdHMubWFwKGYgPT4gZihhZGRyZXNzKSk7XG4gICAgICAgIHJldHVybiBuZXcgQ29uZmlndXJhdGlvbihiYXNlLCBuZXdDb21wYXJ0bWVudHMsIGR5bmFtaWMsIGFkZHJlc3MsIHN0YXRpY1ZhbHVlcywgZmFjZXRzKTtcbiAgICB9XG59XG5mdW5jdGlvbiBmbGF0dGVuKGV4dGVuc2lvbiwgY29tcGFydG1lbnRzLCBuZXdDb21wYXJ0bWVudHMpIHtcbiAgICBsZXQgcmVzdWx0ID0gW1tdLCBbXSwgW10sIFtdLCBbXV07XG4gICAgbGV0IHNlZW4gPSBuZXcgTWFwKCk7XG4gICAgZnVuY3Rpb24gaW5uZXIoZXh0LCBwcmVjKSB7XG4gICAgICAgIGxldCBrbm93biA9IHNlZW4uZ2V0KGV4dCk7XG4gICAgICAgIGlmIChrbm93biAhPSBudWxsKSB7XG4gICAgICAgICAgICBpZiAoa25vd24gPD0gcHJlYylcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICBsZXQgZm91bmQgPSByZXN1bHRba25vd25dLmluZGV4T2YoZXh0KTtcbiAgICAgICAgICAgIGlmIChmb3VuZCA+IC0xKVxuICAgICAgICAgICAgICAgIHJlc3VsdFtrbm93bl0uc3BsaWNlKGZvdW5kLCAxKTtcbiAgICAgICAgICAgIGlmIChleHQgaW5zdGFuY2VvZiBDb21wYXJ0bWVudEluc3RhbmNlKVxuICAgICAgICAgICAgICAgIG5ld0NvbXBhcnRtZW50cy5kZWxldGUoZXh0LmNvbXBhcnRtZW50KTtcbiAgICAgICAgfVxuICAgICAgICBzZWVuLnNldChleHQsIHByZWMpO1xuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShleHQpKSB7XG4gICAgICAgICAgICBmb3IgKGxldCBlIG9mIGV4dClcbiAgICAgICAgICAgICAgICBpbm5lcihlLCBwcmVjKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChleHQgaW5zdGFuY2VvZiBDb21wYXJ0bWVudEluc3RhbmNlKSB7XG4gICAgICAgICAgICBpZiAobmV3Q29tcGFydG1lbnRzLmhhcyhleHQuY29tcGFydG1lbnQpKVxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBSYW5nZUVycm9yKGBEdXBsaWNhdGUgdXNlIG9mIGNvbXBhcnRtZW50IGluIGV4dGVuc2lvbnNgKTtcbiAgICAgICAgICAgIGxldCBjb250ZW50ID0gY29tcGFydG1lbnRzLmdldChleHQuY29tcGFydG1lbnQpIHx8IGV4dC5pbm5lcjtcbiAgICAgICAgICAgIG5ld0NvbXBhcnRtZW50cy5zZXQoZXh0LmNvbXBhcnRtZW50LCBjb250ZW50KTtcbiAgICAgICAgICAgIGlubmVyKGNvbnRlbnQsIHByZWMpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGV4dCBpbnN0YW5jZW9mIFByZWNFeHRlbnNpb24pIHtcbiAgICAgICAgICAgIGlubmVyKGV4dC5pbm5lciwgZXh0LnByZWMpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGV4dCBpbnN0YW5jZW9mIFN0YXRlRmllbGQpIHtcbiAgICAgICAgICAgIHJlc3VsdFtwcmVjXS5wdXNoKGV4dCk7XG4gICAgICAgICAgICBpZiAoZXh0LnByb3ZpZGVzKVxuICAgICAgICAgICAgICAgIGlubmVyKGV4dC5wcm92aWRlcywgcHJlYyk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoZXh0IGluc3RhbmNlb2YgRmFjZXRQcm92aWRlcikge1xuICAgICAgICAgICAgcmVzdWx0W3ByZWNdLnB1c2goZXh0KTtcbiAgICAgICAgICAgIGlmIChleHQuZmFjZXQuZXh0ZW5zaW9ucylcbiAgICAgICAgICAgICAgICBpbm5lcihleHQuZmFjZXQuZXh0ZW5zaW9ucywgUHJlY18uZGVmYXVsdCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBsZXQgY29udGVudCA9IGV4dC5leHRlbnNpb247XG4gICAgICAgICAgICBpZiAoIWNvbnRlbnQpXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBVbnJlY29nbml6ZWQgZXh0ZW5zaW9uIHZhbHVlIGluIGV4dGVuc2lvbiBzZXQgKCR7ZXh0fSkuIFRoaXMgc29tZXRpbWVzIGhhcHBlbnMgYmVjYXVzZSBtdWx0aXBsZSBpbnN0YW5jZXMgb2YgQGNvZGVtaXJyb3Ivc3RhdGUgYXJlIGxvYWRlZCwgYnJlYWtpbmcgaW5zdGFuY2VvZiBjaGVja3MuYCk7XG4gICAgICAgICAgICBpbm5lcihjb250ZW50LCBwcmVjKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBpbm5lcihleHRlbnNpb24sIFByZWNfLmRlZmF1bHQpO1xuICAgIHJldHVybiByZXN1bHQucmVkdWNlKChhLCBiKSA9PiBhLmNvbmNhdChiKSk7XG59XG5mdW5jdGlvbiBlbnN1cmVBZGRyKHN0YXRlLCBhZGRyKSB7XG4gICAgaWYgKGFkZHIgJiAxKVxuICAgICAgICByZXR1cm4gMiAvKiBTbG90U3RhdHVzLkNvbXB1dGVkICovO1xuICAgIGxldCBpZHggPSBhZGRyID4+IDE7XG4gICAgbGV0IHN0YXR1cyA9IHN0YXRlLnN0YXR1c1tpZHhdO1xuICAgIGlmIChzdGF0dXMgPT0gNCAvKiBTbG90U3RhdHVzLkNvbXB1dGluZyAqLylcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQ3ljbGljIGRlcGVuZGVuY3kgYmV0d2VlbiBmaWVsZHMgYW5kL29yIGZhY2V0c1wiKTtcbiAgICBpZiAoc3RhdHVzICYgMiAvKiBTbG90U3RhdHVzLkNvbXB1dGVkICovKVxuICAgICAgICByZXR1cm4gc3RhdHVzO1xuICAgIHN0YXRlLnN0YXR1c1tpZHhdID0gNCAvKiBTbG90U3RhdHVzLkNvbXB1dGluZyAqLztcbiAgICBsZXQgY2hhbmdlZCA9IHN0YXRlLmNvbXB1dGVTbG90KHN0YXRlLCBzdGF0ZS5jb25maWcuZHluYW1pY1Nsb3RzW2lkeF0pO1xuICAgIHJldHVybiBzdGF0ZS5zdGF0dXNbaWR4XSA9IDIgLyogU2xvdFN0YXR1cy5Db21wdXRlZCAqLyB8IGNoYW5nZWQ7XG59XG5mdW5jdGlvbiBnZXRBZGRyKHN0YXRlLCBhZGRyKSB7XG4gICAgcmV0dXJuIGFkZHIgJiAxID8gc3RhdGUuY29uZmlnLnN0YXRpY1ZhbHVlc1thZGRyID4+IDFdIDogc3RhdGUudmFsdWVzW2FkZHIgPj4gMV07XG59XG5cbmNvbnN0IGxhbmd1YWdlRGF0YSA9IC8qQF9fUFVSRV9fKi9GYWNldC5kZWZpbmUoKTtcbmNvbnN0IGFsbG93TXVsdGlwbGVTZWxlY3Rpb25zID0gLypAX19QVVJFX18qL0ZhY2V0LmRlZmluZSh7XG4gICAgY29tYmluZTogdmFsdWVzID0+IHZhbHVlcy5zb21lKHYgPT4gdiksXG4gICAgc3RhdGljOiB0cnVlXG59KTtcbmNvbnN0IGxpbmVTZXBhcmF0b3IgPSAvKkBfX1BVUkVfXyovRmFjZXQuZGVmaW5lKHtcbiAgICBjb21iaW5lOiB2YWx1ZXMgPT4gdmFsdWVzLmxlbmd0aCA/IHZhbHVlc1swXSA6IHVuZGVmaW5lZCxcbiAgICBzdGF0aWM6IHRydWVcbn0pO1xuY29uc3QgY2hhbmdlRmlsdGVyID0gLypAX19QVVJFX18qL0ZhY2V0LmRlZmluZSgpO1xuY29uc3QgdHJhbnNhY3Rpb25GaWx0ZXIgPSAvKkBfX1BVUkVfXyovRmFjZXQuZGVmaW5lKCk7XG5jb25zdCB0cmFuc2FjdGlvbkV4dGVuZGVyID0gLypAX19QVVJFX18qL0ZhY2V0LmRlZmluZSgpO1xuY29uc3QgcmVhZE9ubHkgPSAvKkBfX1BVUkVfXyovRmFjZXQuZGVmaW5lKHtcbiAgICBjb21iaW5lOiB2YWx1ZXMgPT4gdmFsdWVzLmxlbmd0aCA/IHZhbHVlc1swXSA6IGZhbHNlXG59KTtcblxuLyoqXG5Bbm5vdGF0aW9ucyBhcmUgdGFnZ2VkIHZhbHVlcyB0aGF0IGFyZSB1c2VkIHRvIGFkZCBtZXRhZGF0YSB0b1xudHJhbnNhY3Rpb25zIGluIGFuIGV4dGVuc2libGUgd2F5LiBUaGV5IHNob3VsZCBiZSB1c2VkIHRvIG1vZGVsXG50aGluZ3MgdGhhdCBlZmZlY3QgdGhlIGVudGlyZSB0cmFuc2FjdGlvbiAoc3VjaCBhcyBpdHMgW3RpbWVcbnN0YW1wXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI3N0YXRlLlRyYW5zYWN0aW9uXnRpbWUpIG9yIGluZm9ybWF0aW9uIGFib3V0IGl0c1xuW29yaWdpbl0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNzdGF0ZS5UcmFuc2FjdGlvbl51c2VyRXZlbnQpKS4gRm9yIGVmZmVjdHMgdGhhdCBoYXBwZW5cbl9hbG9uZ3NpZGVfIHRoZSBvdGhlciBjaGFuZ2VzIG1hZGUgYnkgdGhlIHRyYW5zYWN0aW9uLCBbc3RhdGVcbmVmZmVjdHNdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jc3RhdGUuU3RhdGVFZmZlY3QpIGFyZSBtb3JlIGFwcHJvcHJpYXRlLlxuKi9cbmNsYXNzIEFubm90YXRpb24ge1xuICAgIC8qKlxuICAgIEBpbnRlcm5hbFxuICAgICovXG4gICAgY29uc3RydWN0b3IoXG4gICAgLyoqXG4gICAgVGhlIGFubm90YXRpb24gdHlwZS5cbiAgICAqL1xuICAgIHR5cGUsIFxuICAgIC8qKlxuICAgIFRoZSB2YWx1ZSBvZiB0aGlzIGFubm90YXRpb24uXG4gICAgKi9cbiAgICB2YWx1ZSkge1xuICAgICAgICB0aGlzLnR5cGUgPSB0eXBlO1xuICAgICAgICB0aGlzLnZhbHVlID0gdmFsdWU7XG4gICAgfVxuICAgIC8qKlxuICAgIERlZmluZSBhIG5ldyB0eXBlIG9mIGFubm90YXRpb24uXG4gICAgKi9cbiAgICBzdGF0aWMgZGVmaW5lKCkgeyByZXR1cm4gbmV3IEFubm90YXRpb25UeXBlKCk7IH1cbn1cbi8qKlxuTWFya2VyIHRoYXQgaWRlbnRpZmllcyBhIHR5cGUgb2YgW2Fubm90YXRpb25dKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jc3RhdGUuQW5ub3RhdGlvbikuXG4qL1xuY2xhc3MgQW5ub3RhdGlvblR5cGUge1xuICAgIC8qKlxuICAgIENyZWF0ZSBhbiBpbnN0YW5jZSBvZiB0aGlzIGFubm90YXRpb24uXG4gICAgKi9cbiAgICBvZih2YWx1ZSkgeyByZXR1cm4gbmV3IEFubm90YXRpb24odGhpcywgdmFsdWUpOyB9XG59XG4vKipcblJlcHJlc2VudGF0aW9uIG9mIGEgdHlwZSBvZiBzdGF0ZSBlZmZlY3QuIERlZmluZWQgd2l0aFxuW2BTdGF0ZUVmZmVjdC5kZWZpbmVgXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI3N0YXRlLlN0YXRlRWZmZWN0XmRlZmluZSkuXG4qL1xuY2xhc3MgU3RhdGVFZmZlY3RUeXBlIHtcbiAgICAvKipcbiAgICBAaW50ZXJuYWxcbiAgICAqL1xuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8vIFRoZSBgYW55YCB0eXBlcyBpbiB0aGVzZSBmdW5jdGlvbiB0eXBlcyBhcmUgdGhlcmUgdG8gd29ya1xuICAgIC8vIGFyb3VuZCBUeXBlU2NyaXB0IGlzc3VlICMzNzYzMSwgd2hlcmUgdGhlIHR5cGUgZ3VhcmQgb25cbiAgICAvLyBgU3RhdGVFZmZlY3QuaXNgIG15c3RlcmlvdXNseSBzdG9wcyB3b3JraW5nIHdoZW4gdGhlc2UgcHJvcGVybHlcbiAgICAvLyBoYXZlIHR5cGUgYFZhbHVlYC5cbiAgICAvKipcbiAgICBAaW50ZXJuYWxcbiAgICAqL1xuICAgIG1hcCkge1xuICAgICAgICB0aGlzLm1hcCA9IG1hcDtcbiAgICB9XG4gICAgLyoqXG4gICAgQ3JlYXRlIGEgW3N0YXRlIGVmZmVjdF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNzdGF0ZS5TdGF0ZUVmZmVjdCkgaW5zdGFuY2Ugb2YgdGhpc1xuICAgIHR5cGUuXG4gICAgKi9cbiAgICBvZih2YWx1ZSkgeyByZXR1cm4gbmV3IFN0YXRlRWZmZWN0KHRoaXMsIHZhbHVlKTsgfVxufVxuLyoqXG5TdGF0ZSBlZmZlY3RzIGNhbiBiZSB1c2VkIHRvIHJlcHJlc2VudCBhZGRpdGlvbmFsIGVmZmVjdHNcbmFzc29jaWF0ZWQgd2l0aCBhIFt0cmFuc2FjdGlvbl0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNzdGF0ZS5UcmFuc2FjdGlvbi5lZmZlY3RzKS4gVGhleVxuYXJlIG9mdGVuIHVzZWZ1bCB0byBtb2RlbCBjaGFuZ2VzIHRvIGN1c3RvbSBbc3RhdGVcbmZpZWxkc10oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNzdGF0ZS5TdGF0ZUZpZWxkKSwgd2hlbiB0aG9zZSBjaGFuZ2VzIGFyZW4ndCBpbXBsaWNpdCBpblxuZG9jdW1lbnQgb3Igc2VsZWN0aW9uIGNoYW5nZXMuXG4qL1xuY2xhc3MgU3RhdGVFZmZlY3Qge1xuICAgIC8qKlxuICAgIEBpbnRlcm5hbFxuICAgICovXG4gICAgY29uc3RydWN0b3IoXG4gICAgLyoqXG4gICAgQGludGVybmFsXG4gICAgKi9cbiAgICB0eXBlLCBcbiAgICAvKipcbiAgICBUaGUgdmFsdWUgb2YgdGhpcyBlZmZlY3QuXG4gICAgKi9cbiAgICB2YWx1ZSkge1xuICAgICAgICB0aGlzLnR5cGUgPSB0eXBlO1xuICAgICAgICB0aGlzLnZhbHVlID0gdmFsdWU7XG4gICAgfVxuICAgIC8qKlxuICAgIE1hcCB0aGlzIGVmZmVjdCB0aHJvdWdoIGEgcG9zaXRpb24gbWFwcGluZy4gV2lsbCByZXR1cm5cbiAgICBgdW5kZWZpbmVkYCB3aGVuIHRoYXQgZW5kcyB1cCBkZWxldGluZyB0aGUgZWZmZWN0LlxuICAgICovXG4gICAgbWFwKG1hcHBpbmcpIHtcbiAgICAgICAgbGV0IG1hcHBlZCA9IHRoaXMudHlwZS5tYXAodGhpcy52YWx1ZSwgbWFwcGluZyk7XG4gICAgICAgIHJldHVybiBtYXBwZWQgPT09IHVuZGVmaW5lZCA/IHVuZGVmaW5lZCA6IG1hcHBlZCA9PSB0aGlzLnZhbHVlID8gdGhpcyA6IG5ldyBTdGF0ZUVmZmVjdCh0aGlzLnR5cGUsIG1hcHBlZCk7XG4gICAgfVxuICAgIC8qKlxuICAgIFRlbGxzIHlvdSB3aGV0aGVyIHRoaXMgZWZmZWN0IG9iamVjdCBpcyBvZiBhIGdpdmVuXG4gICAgW3R5cGVdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jc3RhdGUuU3RhdGVFZmZlY3RUeXBlKS5cbiAgICAqL1xuICAgIGlzKHR5cGUpIHsgcmV0dXJuIHRoaXMudHlwZSA9PSB0eXBlOyB9XG4gICAgLyoqXG4gICAgRGVmaW5lIGEgbmV3IGVmZmVjdCB0eXBlLiBUaGUgdHlwZSBwYXJhbWV0ZXIgaW5kaWNhdGVzIHRoZSB0eXBlXG4gICAgb2YgdmFsdWVzIHRoYXQgaGlzIGVmZmVjdCBob2xkcy4gSXQgc2hvdWxkIGJlIGEgdHlwZSB0aGF0XG4gICAgZG9lc24ndCBpbmNsdWRlIGB1bmRlZmluZWRgLCBzaW5jZSB0aGF0IGlzIHVzZWQgaW5cbiAgICBbbWFwcGluZ10oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNzdGF0ZS5TdGF0ZUVmZmVjdC5tYXApIHRvIGluZGljYXRlIHRoYXQgYW4gZWZmZWN0IGlzXG4gICAgcmVtb3ZlZC5cbiAgICAqL1xuICAgIHN0YXRpYyBkZWZpbmUoc3BlYyA9IHt9KSB7XG4gICAgICAgIHJldHVybiBuZXcgU3RhdGVFZmZlY3RUeXBlKHNwZWMubWFwIHx8ICh2ID0+IHYpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgTWFwIGFuIGFycmF5IG9mIGVmZmVjdHMgdGhyb3VnaCBhIGNoYW5nZSBzZXQuXG4gICAgKi9cbiAgICBzdGF0aWMgbWFwRWZmZWN0cyhlZmZlY3RzLCBtYXBwaW5nKSB7XG4gICAgICAgIGlmICghZWZmZWN0cy5sZW5ndGgpXG4gICAgICAgICAgICByZXR1cm4gZWZmZWN0cztcbiAgICAgICAgbGV0IHJlc3VsdCA9IFtdO1xuICAgICAgICBmb3IgKGxldCBlZmZlY3Qgb2YgZWZmZWN0cykge1xuICAgICAgICAgICAgbGV0IG1hcHBlZCA9IGVmZmVjdC5tYXAobWFwcGluZyk7XG4gICAgICAgICAgICBpZiAobWFwcGVkKVxuICAgICAgICAgICAgICAgIHJlc3VsdC5wdXNoKG1hcHBlZCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG59XG4vKipcblRoaXMgZWZmZWN0IGNhbiBiZSB1c2VkIHRvIHJlY29uZmlndXJlIHRoZSByb290IGV4dGVuc2lvbnMgb2ZcbnRoZSBlZGl0b3IuIERvaW5nIHRoaXMgd2lsbCBkaXNjYXJkIGFueSBleHRlbnNpb25zXG5bYXBwZW5kZWRdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jc3RhdGUuU3RhdGVFZmZlY3ReYXBwZW5kQ29uZmlnKSwgYnV0IGRvZXMgbm90IHJlc2V0XG50aGUgY29udGVudCBvZiBbcmVjb25maWd1cmVkXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI3N0YXRlLkNvbXBhcnRtZW50LnJlY29uZmlndXJlKVxuY29tcGFydG1lbnRzLlxuKi9cblN0YXRlRWZmZWN0LnJlY29uZmlndXJlID0gLypAX19QVVJFX18qL1N0YXRlRWZmZWN0LmRlZmluZSgpO1xuLyoqXG5BcHBlbmQgZXh0ZW5zaW9ucyB0byB0aGUgdG9wLWxldmVsIGNvbmZpZ3VyYXRpb24gb2YgdGhlIGVkaXRvci5cbiovXG5TdGF0ZUVmZmVjdC5hcHBlbmRDb25maWcgPSAvKkBfX1BVUkVfXyovU3RhdGVFZmZlY3QuZGVmaW5lKCk7XG4vKipcbkNoYW5nZXMgdG8gdGhlIGVkaXRvciBzdGF0ZSBhcmUgZ3JvdXBlZCBpbnRvIHRyYW5zYWN0aW9ucy5cblR5cGljYWxseSwgYSB1c2VyIGFjdGlvbiBjcmVhdGVzIGEgc2luZ2xlIHRyYW5zYWN0aW9uLCB3aGljaCBtYXlcbmNvbnRhaW4gYW55IG51bWJlciBvZiBkb2N1bWVudCBjaGFuZ2VzLCBtYXkgY2hhbmdlIHRoZSBzZWxlY3Rpb24sXG5vciBoYXZlIG90aGVyIGVmZmVjdHMuIENyZWF0ZSBhIHRyYW5zYWN0aW9uIGJ5IGNhbGxpbmdcbltgRWRpdG9yU3RhdGUudXBkYXRlYF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNzdGF0ZS5FZGl0b3JTdGF0ZS51cGRhdGUpLCBvciBpbW1lZGlhdGVseVxuZGlzcGF0Y2ggb25lIGJ5IGNhbGxpbmdcbltgRWRpdG9yVmlldy5kaXNwYXRjaGBdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jdmlldy5FZGl0b3JWaWV3LmRpc3BhdGNoKS5cbiovXG5jbGFzcyBUcmFuc2FjdGlvbiB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgLyoqXG4gICAgVGhlIHN0YXRlIGZyb20gd2hpY2ggdGhlIHRyYW5zYWN0aW9uIHN0YXJ0cy5cbiAgICAqL1xuICAgIHN0YXJ0U3RhdGUsIFxuICAgIC8qKlxuICAgIFRoZSBkb2N1bWVudCBjaGFuZ2VzIG1hZGUgYnkgdGhpcyB0cmFuc2FjdGlvbi5cbiAgICAqL1xuICAgIGNoYW5nZXMsIFxuICAgIC8qKlxuICAgIFRoZSBzZWxlY3Rpb24gc2V0IGJ5IHRoaXMgdHJhbnNhY3Rpb24sIG9yIHVuZGVmaW5lZCBpZiBpdFxuICAgIGRvZXNuJ3QgZXhwbGljaXRseSBzZXQgYSBzZWxlY3Rpb24uXG4gICAgKi9cbiAgICBzZWxlY3Rpb24sIFxuICAgIC8qKlxuICAgIFRoZSBlZmZlY3RzIGFkZGVkIHRvIHRoZSB0cmFuc2FjdGlvbi5cbiAgICAqL1xuICAgIGVmZmVjdHMsIFxuICAgIC8qKlxuICAgIEBpbnRlcm5hbFxuICAgICovXG4gICAgYW5ub3RhdGlvbnMsIFxuICAgIC8qKlxuICAgIFdoZXRoZXIgdGhlIHNlbGVjdGlvbiBzaG91bGQgYmUgc2Nyb2xsZWQgaW50byB2aWV3IGFmdGVyIHRoaXNcbiAgICB0cmFuc2FjdGlvbiBpcyBkaXNwYXRjaGVkLlxuICAgICovXG4gICAgc2Nyb2xsSW50b1ZpZXcpIHtcbiAgICAgICAgdGhpcy5zdGFydFN0YXRlID0gc3RhcnRTdGF0ZTtcbiAgICAgICAgdGhpcy5jaGFuZ2VzID0gY2hhbmdlcztcbiAgICAgICAgdGhpcy5zZWxlY3Rpb24gPSBzZWxlY3Rpb247XG4gICAgICAgIHRoaXMuZWZmZWN0cyA9IGVmZmVjdHM7XG4gICAgICAgIHRoaXMuYW5ub3RhdGlvbnMgPSBhbm5vdGF0aW9ucztcbiAgICAgICAgdGhpcy5zY3JvbGxJbnRvVmlldyA9IHNjcm9sbEludG9WaWV3O1xuICAgICAgICAvKipcbiAgICAgICAgQGludGVybmFsXG4gICAgICAgICovXG4gICAgICAgIHRoaXMuX2RvYyA9IG51bGw7XG4gICAgICAgIC8qKlxuICAgICAgICBAaW50ZXJuYWxcbiAgICAgICAgKi9cbiAgICAgICAgdGhpcy5fc3RhdGUgPSBudWxsO1xuICAgICAgICBpZiAoc2VsZWN0aW9uKVxuICAgICAgICAgICAgY2hlY2tTZWxlY3Rpb24oc2VsZWN0aW9uLCBjaGFuZ2VzLm5ld0xlbmd0aCk7XG4gICAgICAgIGlmICghYW5ub3RhdGlvbnMuc29tZSgoYSkgPT4gYS50eXBlID09IFRyYW5zYWN0aW9uLnRpbWUpKVxuICAgICAgICAgICAgdGhpcy5hbm5vdGF0aW9ucyA9IGFubm90YXRpb25zLmNvbmNhdChUcmFuc2FjdGlvbi50aW1lLm9mKERhdGUubm93KCkpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgQGludGVybmFsXG4gICAgKi9cbiAgICBzdGF0aWMgY3JlYXRlKHN0YXJ0U3RhdGUsIGNoYW5nZXMsIHNlbGVjdGlvbiwgZWZmZWN0cywgYW5ub3RhdGlvbnMsIHNjcm9sbEludG9WaWV3KSB7XG4gICAgICAgIHJldHVybiBuZXcgVHJhbnNhY3Rpb24oc3RhcnRTdGF0ZSwgY2hhbmdlcywgc2VsZWN0aW9uLCBlZmZlY3RzLCBhbm5vdGF0aW9ucywgc2Nyb2xsSW50b1ZpZXcpO1xuICAgIH1cbiAgICAvKipcbiAgICBUaGUgbmV3IGRvY3VtZW50IHByb2R1Y2VkIGJ5IHRoZSB0cmFuc2FjdGlvbi4gQ29udHJhcnkgdG9cbiAgICBbYC5zdGF0ZWBdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jc3RhdGUuVHJhbnNhY3Rpb24uc3RhdGUpYC5kb2NgLCBhY2Nlc3NpbmcgdGhpcyB3b24ndFxuICAgIGZvcmNlIHRoZSBlbnRpcmUgbmV3IHN0YXRlIHRvIGJlIGNvbXB1dGVkIHJpZ2h0IGF3YXksIHNvIGl0IGlzXG4gICAgcmVjb21tZW5kZWQgdGhhdCBbdHJhbnNhY3Rpb25cbiAgICBmaWx0ZXJzXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI3N0YXRlLkVkaXRvclN0YXRlXnRyYW5zYWN0aW9uRmlsdGVyKSB1c2UgdGhpcyBnZXR0ZXJcbiAgICB3aGVuIHRoZXkgbmVlZCB0byBsb29rIGF0IHRoZSBuZXcgZG9jdW1lbnQuXG4gICAgKi9cbiAgICBnZXQgbmV3RG9jKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZG9jIHx8ICh0aGlzLl9kb2MgPSB0aGlzLmNoYW5nZXMuYXBwbHkodGhpcy5zdGFydFN0YXRlLmRvYykpO1xuICAgIH1cbiAgICAvKipcbiAgICBUaGUgbmV3IHNlbGVjdGlvbiBwcm9kdWNlZCBieSB0aGUgdHJhbnNhY3Rpb24uIElmXG4gICAgW2B0aGlzLnNlbGVjdGlvbmBdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jc3RhdGUuVHJhbnNhY3Rpb24uc2VsZWN0aW9uKSBpcyB1bmRlZmluZWQsXG4gICAgdGhpcyB3aWxsIFttYXBdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jc3RhdGUuRWRpdG9yU2VsZWN0aW9uLm1hcCkgdGhlIHN0YXJ0IHN0YXRlJ3NcbiAgICBjdXJyZW50IHNlbGVjdGlvbiB0aHJvdWdoIHRoZSBjaGFuZ2VzIG1hZGUgYnkgdGhlIHRyYW5zYWN0aW9uLlxuICAgICovXG4gICAgZ2V0IG5ld1NlbGVjdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2VsZWN0aW9uIHx8IHRoaXMuc3RhcnRTdGF0ZS5zZWxlY3Rpb24ubWFwKHRoaXMuY2hhbmdlcyk7XG4gICAgfVxuICAgIC8qKlxuICAgIFRoZSBuZXcgc3RhdGUgY3JlYXRlZCBieSB0aGUgdHJhbnNhY3Rpb24uIENvbXB1dGVkIG9uIGRlbWFuZFxuICAgIChidXQgcmV0YWluZWQgZm9yIHN1YnNlcXVlbnQgYWNjZXNzKSwgc28gaXQgaXMgcmVjb21tZW5kZWQgbm90IHRvXG4gICAgYWNjZXNzIGl0IGluIFt0cmFuc2FjdGlvblxuICAgIGZpbHRlcnNdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jc3RhdGUuRWRpdG9yU3RhdGVedHJhbnNhY3Rpb25GaWx0ZXIpIHdoZW4gcG9zc2libGUuXG4gICAgKi9cbiAgICBnZXQgc3RhdGUoKSB7XG4gICAgICAgIGlmICghdGhpcy5fc3RhdGUpXG4gICAgICAgICAgICB0aGlzLnN0YXJ0U3RhdGUuYXBwbHlUcmFuc2FjdGlvbih0aGlzKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3N0YXRlO1xuICAgIH1cbiAgICAvKipcbiAgICBHZXQgdGhlIHZhbHVlIG9mIHRoZSBnaXZlbiBhbm5vdGF0aW9uIHR5cGUsIGlmIGFueS5cbiAgICAqL1xuICAgIGFubm90YXRpb24odHlwZSkge1xuICAgICAgICBmb3IgKGxldCBhbm4gb2YgdGhpcy5hbm5vdGF0aW9ucylcbiAgICAgICAgICAgIGlmIChhbm4udHlwZSA9PSB0eXBlKVxuICAgICAgICAgICAgICAgIHJldHVybiBhbm4udmFsdWU7XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuICAgIC8qKlxuICAgIEluZGljYXRlcyB3aGV0aGVyIHRoZSB0cmFuc2FjdGlvbiBjaGFuZ2VkIHRoZSBkb2N1bWVudC5cbiAgICAqL1xuICAgIGdldCBkb2NDaGFuZ2VkKCkgeyByZXR1cm4gIXRoaXMuY2hhbmdlcy5lbXB0eTsgfVxuICAgIC8qKlxuICAgIEluZGljYXRlcyB3aGV0aGVyIHRoaXMgdHJhbnNhY3Rpb24gcmVjb25maWd1cmVzIHRoZSBzdGF0ZVxuICAgICh0aHJvdWdoIGEgW2NvbmZpZ3VyYXRpb24gY29tcGFydG1lbnRdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jc3RhdGUuQ29tcGFydG1lbnQpIG9yXG4gICAgd2l0aCBhIHRvcC1sZXZlbCBjb25maWd1cmF0aW9uXG4gICAgW2VmZmVjdF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNzdGF0ZS5TdGF0ZUVmZmVjdF5yZWNvbmZpZ3VyZSkuXG4gICAgKi9cbiAgICBnZXQgcmVjb25maWd1cmVkKCkgeyByZXR1cm4gdGhpcy5zdGFydFN0YXRlLmNvbmZpZyAhPSB0aGlzLnN0YXRlLmNvbmZpZzsgfVxuICAgIC8qKlxuICAgIFJldHVybnMgdHJ1ZSBpZiB0aGUgdHJhbnNhY3Rpb24gaGFzIGEgW3VzZXJcbiAgICBldmVudF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNzdGF0ZS5UcmFuc2FjdGlvbl51c2VyRXZlbnQpIGFubm90YXRpb24gdGhhdCBpcyBlcXVhbCB0b1xuICAgIG9yIG1vcmUgc3BlY2lmaWMgdGhhbiBgZXZlbnRgLiBGb3IgZXhhbXBsZSwgaWYgdGhlIHRyYW5zYWN0aW9uXG4gICAgaGFzIGBcInNlbGVjdC5wb2ludGVyXCJgIGFzIHVzZXIgZXZlbnQsIGBcInNlbGVjdFwiYCBhbmRcbiAgICBgXCJzZWxlY3QucG9pbnRlclwiYCB3aWxsIG1hdGNoIGl0LlxuICAgICovXG4gICAgaXNVc2VyRXZlbnQoZXZlbnQpIHtcbiAgICAgICAgbGV0IGUgPSB0aGlzLmFubm90YXRpb24oVHJhbnNhY3Rpb24udXNlckV2ZW50KTtcbiAgICAgICAgcmV0dXJuICEhKGUgJiYgKGUgPT0gZXZlbnQgfHwgZS5sZW5ndGggPiBldmVudC5sZW5ndGggJiYgZS5zbGljZSgwLCBldmVudC5sZW5ndGgpID09IGV2ZW50ICYmIGVbZXZlbnQubGVuZ3RoXSA9PSBcIi5cIikpO1xuICAgIH1cbn1cbi8qKlxuQW5ub3RhdGlvbiB1c2VkIHRvIHN0b3JlIHRyYW5zYWN0aW9uIHRpbWVzdGFtcHMuIEF1dG9tYXRpY2FsbHlcbmFkZGVkIHRvIGV2ZXJ5IHRyYW5zYWN0aW9uLCBob2xkaW5nIGBEYXRlLm5vdygpYC5cbiovXG5UcmFuc2FjdGlvbi50aW1lID0gLypAX19QVVJFX18qL0Fubm90YXRpb24uZGVmaW5lKCk7XG4vKipcbkFubm90YXRpb24gdXNlZCB0byBhc3NvY2lhdGUgYSB0cmFuc2FjdGlvbiB3aXRoIGEgdXNlciBpbnRlcmZhY2VcbmV2ZW50LiBIb2xkcyBhIHN0cmluZyBpZGVudGlmeWluZyB0aGUgZXZlbnQsIHVzaW5nIGFcbmRvdC1zZXBhcmF0ZWQgZm9ybWF0IHRvIHN1cHBvcnQgYXR0YWNoaW5nIG1vcmUgc3BlY2lmaWNcbmluZm9ybWF0aW9uLiBUaGUgZXZlbnRzIHVzZWQgYnkgdGhlIGNvcmUgbGlicmFyaWVzIGFyZTpcblxuIC0gYFwiaW5wdXRcImAgd2hlbiBjb250ZW50IGlzIGVudGVyZWRcbiAgIC0gYFwiaW5wdXQudHlwZVwiYCBmb3IgdHlwZWQgaW5wdXRcbiAgICAgLSBgXCJpbnB1dC50eXBlLmNvbXBvc2VcImAgZm9yIGNvbXBvc2l0aW9uXG4gICAtIGBcImlucHV0LnBhc3RlXCJgIGZvciBwYXN0ZWQgaW5wdXRcbiAgIC0gYFwiaW5wdXQuZHJvcFwiYCB3aGVuIGFkZGluZyBjb250ZW50IHdpdGggZHJhZy1hbmQtZHJvcFxuICAgLSBgXCJpbnB1dC5jb21wbGV0ZVwiYCB3aGVuIGF1dG9jb21wbGV0aW5nXG4gLSBgXCJkZWxldGVcImAgd2hlbiB0aGUgdXNlciBkZWxldGVzIGNvbnRlbnRcbiAgIC0gYFwiZGVsZXRlLnNlbGVjdGlvblwiYCB3aGVuIGRlbGV0aW5nIHRoZSBzZWxlY3Rpb25cbiAgIC0gYFwiZGVsZXRlLmZvcndhcmRcImAgd2hlbiBkZWxldGluZyBmb3J3YXJkIGZyb20gdGhlIHNlbGVjdGlvblxuICAgLSBgXCJkZWxldGUuYmFja3dhcmRcImAgd2hlbiBkZWxldGluZyBiYWNrd2FyZCBmcm9tIHRoZSBzZWxlY3Rpb25cbiAgIC0gYFwiZGVsZXRlLmN1dFwiYCB3aGVuIGN1dHRpbmcgdG8gdGhlIGNsaXBib2FyZFxuIC0gYFwibW92ZVwiYCB3aGVuIGNvbnRlbnQgaXMgbW92ZWRcbiAgIC0gYFwibW92ZS5kcm9wXCJgIHdoZW4gY29udGVudCBpcyBtb3ZlZCB3aXRoaW4gdGhlIGVkaXRvciB0aHJvdWdoIGRyYWctYW5kLWRyb3BcbiAtIGBcInNlbGVjdFwiYCB3aGVuIGV4cGxpY2l0bHkgY2hhbmdpbmcgdGhlIHNlbGVjdGlvblxuICAgLSBgXCJzZWxlY3QucG9pbnRlclwiYCB3aGVuIHNlbGVjdGluZyB3aXRoIGEgbW91c2Ugb3Igb3RoZXIgcG9pbnRpbmcgZGV2aWNlXG4gLSBgXCJ1bmRvXCJgIGFuZCBgXCJyZWRvXCJgIGZvciBoaXN0b3J5IGFjdGlvbnNcblxuVXNlIFtgaXNVc2VyRXZlbnRgXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI3N0YXRlLlRyYW5zYWN0aW9uLmlzVXNlckV2ZW50KSB0byBjaGVja1xud2hldGhlciB0aGUgYW5ub3RhdGlvbiBtYXRjaGVzIGEgZ2l2ZW4gZXZlbnQuXG4qL1xuVHJhbnNhY3Rpb24udXNlckV2ZW50ID0gLypAX19QVVJFX18qL0Fubm90YXRpb24uZGVmaW5lKCk7XG4vKipcbkFubm90YXRpb24gaW5kaWNhdGluZyB3aGV0aGVyIGEgdHJhbnNhY3Rpb24gc2hvdWxkIGJlIGFkZGVkIHRvXG50aGUgdW5kbyBoaXN0b3J5IG9yIG5vdC5cbiovXG5UcmFuc2FjdGlvbi5hZGRUb0hpc3RvcnkgPSAvKkBfX1BVUkVfXyovQW5ub3RhdGlvbi5kZWZpbmUoKTtcbi8qKlxuQW5ub3RhdGlvbiBpbmRpY2F0aW5nICh3aGVuIHByZXNlbnQgYW5kIHRydWUpIHRoYXQgYSB0cmFuc2FjdGlvblxucmVwcmVzZW50cyBhIGNoYW5nZSBtYWRlIGJ5IHNvbWUgb3RoZXIgYWN0b3IsIG5vdCB0aGUgdXNlci4gVGhpc1xuaXMgdXNlZCwgZm9yIGV4YW1wbGUsIHRvIHRhZyBvdGhlciBwZW9wbGUncyBjaGFuZ2VzIGluXG5jb2xsYWJvcmF0aXZlIGVkaXRpbmcuXG4qL1xuVHJhbnNhY3Rpb24ucmVtb3RlID0gLypAX19QVVJFX18qL0Fubm90YXRpb24uZGVmaW5lKCk7XG5mdW5jdGlvbiBqb2luUmFuZ2VzKGEsIGIpIHtcbiAgICBsZXQgcmVzdWx0ID0gW107XG4gICAgZm9yIChsZXQgaUEgPSAwLCBpQiA9IDA7Oykge1xuICAgICAgICBsZXQgZnJvbSwgdG87XG4gICAgICAgIGlmIChpQSA8IGEubGVuZ3RoICYmIChpQiA9PSBiLmxlbmd0aCB8fCBiW2lCXSA+PSBhW2lBXSkpIHtcbiAgICAgICAgICAgIGZyb20gPSBhW2lBKytdO1xuICAgICAgICAgICAgdG8gPSBhW2lBKytdO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGlCIDwgYi5sZW5ndGgpIHtcbiAgICAgICAgICAgIGZyb20gPSBiW2lCKytdO1xuICAgICAgICAgICAgdG8gPSBiW2lCKytdO1xuICAgICAgICB9XG4gICAgICAgIGVsc2VcbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgIGlmICghcmVzdWx0Lmxlbmd0aCB8fCByZXN1bHRbcmVzdWx0Lmxlbmd0aCAtIDFdIDwgZnJvbSlcbiAgICAgICAgICAgIHJlc3VsdC5wdXNoKGZyb20sIHRvKTtcbiAgICAgICAgZWxzZSBpZiAocmVzdWx0W3Jlc3VsdC5sZW5ndGggLSAxXSA8IHRvKVxuICAgICAgICAgICAgcmVzdWx0W3Jlc3VsdC5sZW5ndGggLSAxXSA9IHRvO1xuICAgIH1cbn1cbmZ1bmN0aW9uIG1lcmdlVHJhbnNhY3Rpb24oYSwgYiwgc2VxdWVudGlhbCkge1xuICAgIHZhciBfYTtcbiAgICBsZXQgbWFwRm9yQSwgbWFwRm9yQiwgY2hhbmdlcztcbiAgICBpZiAoc2VxdWVudGlhbCkge1xuICAgICAgICBtYXBGb3JBID0gYi5jaGFuZ2VzO1xuICAgICAgICBtYXBGb3JCID0gQ2hhbmdlU2V0LmVtcHR5KGIuY2hhbmdlcy5sZW5ndGgpO1xuICAgICAgICBjaGFuZ2VzID0gYS5jaGFuZ2VzLmNvbXBvc2UoYi5jaGFuZ2VzKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIG1hcEZvckEgPSBiLmNoYW5nZXMubWFwKGEuY2hhbmdlcyk7XG4gICAgICAgIG1hcEZvckIgPSBhLmNoYW5nZXMubWFwRGVzYyhiLmNoYW5nZXMsIHRydWUpO1xuICAgICAgICBjaGFuZ2VzID0gYS5jaGFuZ2VzLmNvbXBvc2UobWFwRm9yQSk7XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICAgIGNoYW5nZXMsXG4gICAgICAgIHNlbGVjdGlvbjogYi5zZWxlY3Rpb24gPyBiLnNlbGVjdGlvbi5tYXAobWFwRm9yQikgOiAoX2EgPSBhLnNlbGVjdGlvbikgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLm1hcChtYXBGb3JBKSxcbiAgICAgICAgZWZmZWN0czogU3RhdGVFZmZlY3QubWFwRWZmZWN0cyhhLmVmZmVjdHMsIG1hcEZvckEpLmNvbmNhdChTdGF0ZUVmZmVjdC5tYXBFZmZlY3RzKGIuZWZmZWN0cywgbWFwRm9yQikpLFxuICAgICAgICBhbm5vdGF0aW9uczogYS5hbm5vdGF0aW9ucy5sZW5ndGggPyBhLmFubm90YXRpb25zLmNvbmNhdChiLmFubm90YXRpb25zKSA6IGIuYW5ub3RhdGlvbnMsXG4gICAgICAgIHNjcm9sbEludG9WaWV3OiBhLnNjcm9sbEludG9WaWV3IHx8IGIuc2Nyb2xsSW50b1ZpZXdcbiAgICB9O1xufVxuZnVuY3Rpb24gcmVzb2x2ZVRyYW5zYWN0aW9uSW5uZXIoc3RhdGUsIHNwZWMsIGRvY1NpemUpIHtcbiAgICBsZXQgc2VsID0gc3BlYy5zZWxlY3Rpb24sIGFubm90YXRpb25zID0gYXNBcnJheShzcGVjLmFubm90YXRpb25zKTtcbiAgICBpZiAoc3BlYy51c2VyRXZlbnQpXG4gICAgICAgIGFubm90YXRpb25zID0gYW5ub3RhdGlvbnMuY29uY2F0KFRyYW5zYWN0aW9uLnVzZXJFdmVudC5vZihzcGVjLnVzZXJFdmVudCkpO1xuICAgIHJldHVybiB7XG4gICAgICAgIGNoYW5nZXM6IHNwZWMuY2hhbmdlcyBpbnN0YW5jZW9mIENoYW5nZVNldCA/IHNwZWMuY2hhbmdlc1xuICAgICAgICAgICAgOiBDaGFuZ2VTZXQub2Yoc3BlYy5jaGFuZ2VzIHx8IFtdLCBkb2NTaXplLCBzdGF0ZS5mYWNldChsaW5lU2VwYXJhdG9yKSksXG4gICAgICAgIHNlbGVjdGlvbjogc2VsICYmIChzZWwgaW5zdGFuY2VvZiBFZGl0b3JTZWxlY3Rpb24gPyBzZWwgOiBFZGl0b3JTZWxlY3Rpb24uc2luZ2xlKHNlbC5hbmNob3IsIHNlbC5oZWFkKSksXG4gICAgICAgIGVmZmVjdHM6IGFzQXJyYXkoc3BlYy5lZmZlY3RzKSxcbiAgICAgICAgYW5ub3RhdGlvbnMsXG4gICAgICAgIHNjcm9sbEludG9WaWV3OiAhIXNwZWMuc2Nyb2xsSW50b1ZpZXdcbiAgICB9O1xufVxuZnVuY3Rpb24gcmVzb2x2ZVRyYW5zYWN0aW9uKHN0YXRlLCBzcGVjcywgZmlsdGVyKSB7XG4gICAgbGV0IHMgPSByZXNvbHZlVHJhbnNhY3Rpb25Jbm5lcihzdGF0ZSwgc3BlY3MubGVuZ3RoID8gc3BlY3NbMF0gOiB7fSwgc3RhdGUuZG9jLmxlbmd0aCk7XG4gICAgaWYgKHNwZWNzLmxlbmd0aCAmJiBzcGVjc1swXS5maWx0ZXIgPT09IGZhbHNlKVxuICAgICAgICBmaWx0ZXIgPSBmYWxzZTtcbiAgICBmb3IgKGxldCBpID0gMTsgaSA8IHNwZWNzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGlmIChzcGVjc1tpXS5maWx0ZXIgPT09IGZhbHNlKVxuICAgICAgICAgICAgZmlsdGVyID0gZmFsc2U7XG4gICAgICAgIGxldCBzZXEgPSAhIXNwZWNzW2ldLnNlcXVlbnRpYWw7XG4gICAgICAgIHMgPSBtZXJnZVRyYW5zYWN0aW9uKHMsIHJlc29sdmVUcmFuc2FjdGlvbklubmVyKHN0YXRlLCBzcGVjc1tpXSwgc2VxID8gcy5jaGFuZ2VzLm5ld0xlbmd0aCA6IHN0YXRlLmRvYy5sZW5ndGgpLCBzZXEpO1xuICAgIH1cbiAgICBsZXQgdHIgPSBUcmFuc2FjdGlvbi5jcmVhdGUoc3RhdGUsIHMuY2hhbmdlcywgcy5zZWxlY3Rpb24sIHMuZWZmZWN0cywgcy5hbm5vdGF0aW9ucywgcy5zY3JvbGxJbnRvVmlldyk7XG4gICAgcmV0dXJuIGV4dGVuZFRyYW5zYWN0aW9uKGZpbHRlciA/IGZpbHRlclRyYW5zYWN0aW9uKHRyKSA6IHRyKTtcbn1cbi8vIEZpbmlzaCBhIHRyYW5zYWN0aW9uIGJ5IGFwcGx5aW5nIGZpbHRlcnMgaWYgbmVjZXNzYXJ5LlxuZnVuY3Rpb24gZmlsdGVyVHJhbnNhY3Rpb24odHIpIHtcbiAgICBsZXQgc3RhdGUgPSB0ci5zdGFydFN0YXRlO1xuICAgIC8vIENoYW5nZSBmaWx0ZXJzXG4gICAgbGV0IHJlc3VsdCA9IHRydWU7XG4gICAgZm9yIChsZXQgZmlsdGVyIG9mIHN0YXRlLmZhY2V0KGNoYW5nZUZpbHRlcikpIHtcbiAgICAgICAgbGV0IHZhbHVlID0gZmlsdGVyKHRyKTtcbiAgICAgICAgaWYgKHZhbHVlID09PSBmYWxzZSkge1xuICAgICAgICAgICAgcmVzdWx0ID0gZmFsc2U7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheSh2YWx1ZSkpXG4gICAgICAgICAgICByZXN1bHQgPSByZXN1bHQgPT09IHRydWUgPyB2YWx1ZSA6IGpvaW5SYW5nZXMocmVzdWx0LCB2YWx1ZSk7XG4gICAgfVxuICAgIGlmIChyZXN1bHQgIT09IHRydWUpIHtcbiAgICAgICAgbGV0IGNoYW5nZXMsIGJhY2s7XG4gICAgICAgIGlmIChyZXN1bHQgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICBiYWNrID0gdHIuY2hhbmdlcy5pbnZlcnRlZERlc2M7XG4gICAgICAgICAgICBjaGFuZ2VzID0gQ2hhbmdlU2V0LmVtcHR5KHN0YXRlLmRvYy5sZW5ndGgpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgbGV0IGZpbHRlcmVkID0gdHIuY2hhbmdlcy5maWx0ZXIocmVzdWx0KTtcbiAgICAgICAgICAgIGNoYW5nZXMgPSBmaWx0ZXJlZC5jaGFuZ2VzO1xuICAgICAgICAgICAgYmFjayA9IGZpbHRlcmVkLmZpbHRlcmVkLm1hcERlc2MoZmlsdGVyZWQuY2hhbmdlcykuaW52ZXJ0ZWREZXNjO1xuICAgICAgICB9XG4gICAgICAgIHRyID0gVHJhbnNhY3Rpb24uY3JlYXRlKHN0YXRlLCBjaGFuZ2VzLCB0ci5zZWxlY3Rpb24gJiYgdHIuc2VsZWN0aW9uLm1hcChiYWNrKSwgU3RhdGVFZmZlY3QubWFwRWZmZWN0cyh0ci5lZmZlY3RzLCBiYWNrKSwgdHIuYW5ub3RhdGlvbnMsIHRyLnNjcm9sbEludG9WaWV3KTtcbiAgICB9XG4gICAgLy8gVHJhbnNhY3Rpb24gZmlsdGVyc1xuICAgIGxldCBmaWx0ZXJzID0gc3RhdGUuZmFjZXQodHJhbnNhY3Rpb25GaWx0ZXIpO1xuICAgIGZvciAobGV0IGkgPSBmaWx0ZXJzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgICAgIGxldCBmaWx0ZXJlZCA9IGZpbHRlcnNbaV0odHIpO1xuICAgICAgICBpZiAoZmlsdGVyZWQgaW5zdGFuY2VvZiBUcmFuc2FjdGlvbilcbiAgICAgICAgICAgIHRyID0gZmlsdGVyZWQ7XG4gICAgICAgIGVsc2UgaWYgKEFycmF5LmlzQXJyYXkoZmlsdGVyZWQpICYmIGZpbHRlcmVkLmxlbmd0aCA9PSAxICYmIGZpbHRlcmVkWzBdIGluc3RhbmNlb2YgVHJhbnNhY3Rpb24pXG4gICAgICAgICAgICB0ciA9IGZpbHRlcmVkWzBdO1xuICAgICAgICBlbHNlXG4gICAgICAgICAgICB0ciA9IHJlc29sdmVUcmFuc2FjdGlvbihzdGF0ZSwgYXNBcnJheShmaWx0ZXJlZCksIGZhbHNlKTtcbiAgICB9XG4gICAgcmV0dXJuIHRyO1xufVxuZnVuY3Rpb24gZXh0ZW5kVHJhbnNhY3Rpb24odHIpIHtcbiAgICBsZXQgc3RhdGUgPSB0ci5zdGFydFN0YXRlLCBleHRlbmRlcnMgPSBzdGF0ZS5mYWNldCh0cmFuc2FjdGlvbkV4dGVuZGVyKSwgc3BlYyA9IHRyO1xuICAgIGZvciAobGV0IGkgPSBleHRlbmRlcnMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcbiAgICAgICAgbGV0IGV4dGVuc2lvbiA9IGV4dGVuZGVyc1tpXSh0cik7XG4gICAgICAgIGlmIChleHRlbnNpb24gJiYgT2JqZWN0LmtleXMoZXh0ZW5zaW9uKS5sZW5ndGgpXG4gICAgICAgICAgICBzcGVjID0gbWVyZ2VUcmFuc2FjdGlvbihzcGVjLCByZXNvbHZlVHJhbnNhY3Rpb25Jbm5lcihzdGF0ZSwgZXh0ZW5zaW9uLCB0ci5jaGFuZ2VzLm5ld0xlbmd0aCksIHRydWUpO1xuICAgIH1cbiAgICByZXR1cm4gc3BlYyA9PSB0ciA/IHRyIDogVHJhbnNhY3Rpb24uY3JlYXRlKHN0YXRlLCB0ci5jaGFuZ2VzLCB0ci5zZWxlY3Rpb24sIHNwZWMuZWZmZWN0cywgc3BlYy5hbm5vdGF0aW9ucywgc3BlYy5zY3JvbGxJbnRvVmlldyk7XG59XG5jb25zdCBub25lID0gW107XG5mdW5jdGlvbiBhc0FycmF5KHZhbHVlKSB7XG4gICAgcmV0dXJuIHZhbHVlID09IG51bGwgPyBub25lIDogQXJyYXkuaXNBcnJheSh2YWx1ZSkgPyB2YWx1ZSA6IFt2YWx1ZV07XG59XG5cbi8qKlxuVGhlIGNhdGVnb3JpZXMgcHJvZHVjZWQgYnkgYSBbY2hhcmFjdGVyXG5jYXRlZ29yaXplcl0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNzdGF0ZS5FZGl0b3JTdGF0ZS5jaGFyQ2F0ZWdvcml6ZXIpLiBUaGVzZSBhcmUgdXNlZFxuZG8gdGhpbmdzIGxpa2Ugc2VsZWN0aW5nIGJ5IHdvcmQuXG4qL1xudmFyIENoYXJDYXRlZ29yeSA9IC8qQF9fUFVSRV9fKi8oZnVuY3Rpb24gKENoYXJDYXRlZ29yeSkge1xuICAgIC8qKlxuICAgIFdvcmQgY2hhcmFjdGVycy5cbiAgICAqL1xuICAgIENoYXJDYXRlZ29yeVtDaGFyQ2F0ZWdvcnlbXCJXb3JkXCJdID0gMF0gPSBcIldvcmRcIjtcbiAgICAvKipcbiAgICBXaGl0ZXNwYWNlLlxuICAgICovXG4gICAgQ2hhckNhdGVnb3J5W0NoYXJDYXRlZ29yeVtcIlNwYWNlXCJdID0gMV0gPSBcIlNwYWNlXCI7XG4gICAgLyoqXG4gICAgQW55dGhpbmcgZWxzZS5cbiAgICAqL1xuICAgIENoYXJDYXRlZ29yeVtDaGFyQ2F0ZWdvcnlbXCJPdGhlclwiXSA9IDJdID0gXCJPdGhlclwiO1xucmV0dXJuIENoYXJDYXRlZ29yeX0pKENoYXJDYXRlZ29yeSB8fCAoQ2hhckNhdGVnb3J5ID0ge30pKTtcbmNvbnN0IG5vbkFTQ0lJU2luZ2xlQ2FzZVdvcmRDaGFyID0gL1tcXHUwMGRmXFx1MDU4N1xcdTA1OTAtXFx1MDVmNFxcdTA2MDAtXFx1MDZmZlxcdTMwNDAtXFx1MzA5ZlxcdTMwYTAtXFx1MzBmZlxcdTM0MDAtXFx1NGRiNVxcdTRlMDAtXFx1OWZjY1xcdWFjMDAtXFx1ZDdhZl0vO1xubGV0IHdvcmRDaGFyO1xudHJ5IHtcbiAgICB3b3JkQ2hhciA9IC8qQF9fUFVSRV9fKi9uZXcgUmVnRXhwKFwiW1xcXFxwe0FscGhhYmV0aWN9XFxcXHB7TnVtYmVyfV9dXCIsIFwidVwiKTtcbn1cbmNhdGNoIChfKSB7IH1cbmZ1bmN0aW9uIGhhc1dvcmRDaGFyKHN0cikge1xuICAgIGlmICh3b3JkQ2hhcilcbiAgICAgICAgcmV0dXJuIHdvcmRDaGFyLnRlc3Qoc3RyKTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHN0ci5sZW5ndGg7IGkrKykge1xuICAgICAgICBsZXQgY2ggPSBzdHJbaV07XG4gICAgICAgIGlmICgvXFx3Ly50ZXN0KGNoKSB8fCBjaCA+IFwiXFx4ODBcIiAmJiAoY2gudG9VcHBlckNhc2UoKSAhPSBjaC50b0xvd2VyQ2FzZSgpIHx8IG5vbkFTQ0lJU2luZ2xlQ2FzZVdvcmRDaGFyLnRlc3QoY2gpKSlcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG59XG5mdW5jdGlvbiBtYWtlQ2F0ZWdvcml6ZXIod29yZENoYXJzKSB7XG4gICAgcmV0dXJuIChjaGFyKSA9PiB7XG4gICAgICAgIGlmICghL1xcUy8udGVzdChjaGFyKSlcbiAgICAgICAgICAgIHJldHVybiBDaGFyQ2F0ZWdvcnkuU3BhY2U7XG4gICAgICAgIGlmIChoYXNXb3JkQ2hhcihjaGFyKSlcbiAgICAgICAgICAgIHJldHVybiBDaGFyQ2F0ZWdvcnkuV29yZDtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB3b3JkQ2hhcnMubGVuZ3RoOyBpKyspXG4gICAgICAgICAgICBpZiAoY2hhci5pbmRleE9mKHdvcmRDaGFyc1tpXSkgPiAtMSlcbiAgICAgICAgICAgICAgICByZXR1cm4gQ2hhckNhdGVnb3J5LldvcmQ7XG4gICAgICAgIHJldHVybiBDaGFyQ2F0ZWdvcnkuT3RoZXI7XG4gICAgfTtcbn1cblxuLyoqXG5UaGUgZWRpdG9yIHN0YXRlIGNsYXNzIGlzIGEgcGVyc2lzdGVudCAoaW1tdXRhYmxlKSBkYXRhIHN0cnVjdHVyZS5cblRvIHVwZGF0ZSBhIHN0YXRlLCB5b3UgW2NyZWF0ZV0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNzdGF0ZS5FZGl0b3JTdGF0ZS51cGRhdGUpIGFcblt0cmFuc2FjdGlvbl0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNzdGF0ZS5UcmFuc2FjdGlvbiksIHdoaWNoIHByb2R1Y2VzIGEgX25ld18gc3RhdGVcbmluc3RhbmNlLCB3aXRob3V0IG1vZGlmeWluZyB0aGUgb3JpZ2luYWwgb2JqZWN0LlxuXG5BcyBzdWNoLCBfbmV2ZXJfIG11dGF0ZSBwcm9wZXJ0aWVzIG9mIGEgc3RhdGUgZGlyZWN0bHkuIFRoYXQnbGxcbmp1c3QgYnJlYWsgdGhpbmdzLlxuKi9cbmNsYXNzIEVkaXRvclN0YXRlIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAvKipcbiAgICBAaW50ZXJuYWxcbiAgICAqL1xuICAgIGNvbmZpZywgXG4gICAgLyoqXG4gICAgVGhlIGN1cnJlbnQgZG9jdW1lbnQuXG4gICAgKi9cbiAgICBkb2MsIFxuICAgIC8qKlxuICAgIFRoZSBjdXJyZW50IHNlbGVjdGlvbi5cbiAgICAqL1xuICAgIHNlbGVjdGlvbiwgXG4gICAgLyoqXG4gICAgQGludGVybmFsXG4gICAgKi9cbiAgICB2YWx1ZXMsIGNvbXB1dGVTbG90LCB0cikge1xuICAgICAgICB0aGlzLmNvbmZpZyA9IGNvbmZpZztcbiAgICAgICAgdGhpcy5kb2MgPSBkb2M7XG4gICAgICAgIHRoaXMuc2VsZWN0aW9uID0gc2VsZWN0aW9uO1xuICAgICAgICB0aGlzLnZhbHVlcyA9IHZhbHVlcztcbiAgICAgICAgdGhpcy5zdGF0dXMgPSBjb25maWcuc3RhdHVzVGVtcGxhdGUuc2xpY2UoKTtcbiAgICAgICAgdGhpcy5jb21wdXRlU2xvdCA9IGNvbXB1dGVTbG90O1xuICAgICAgICAvLyBGaWxsIGluIHRoZSBjb21wdXRlZCBzdGF0ZSBpbW1lZGlhdGVseSwgc28gdGhhdCBmdXJ0aGVyIHF1ZXJpZXNcbiAgICAgICAgLy8gZm9yIGl0IG1hZGUgZHVyaW5nIHRoZSB1cGRhdGUgcmV0dXJuIHRoaXMgc3RhdGVcbiAgICAgICAgaWYgKHRyKVxuICAgICAgICAgICAgdHIuX3N0YXRlID0gdGhpcztcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmNvbmZpZy5keW5hbWljU2xvdHMubGVuZ3RoOyBpKyspXG4gICAgICAgICAgICBlbnN1cmVBZGRyKHRoaXMsIGkgPDwgMSk7XG4gICAgICAgIHRoaXMuY29tcHV0ZVNsb3QgPSBudWxsO1xuICAgIH1cbiAgICBmaWVsZChmaWVsZCwgcmVxdWlyZSA9IHRydWUpIHtcbiAgICAgICAgbGV0IGFkZHIgPSB0aGlzLmNvbmZpZy5hZGRyZXNzW2ZpZWxkLmlkXTtcbiAgICAgICAgaWYgKGFkZHIgPT0gbnVsbCkge1xuICAgICAgICAgICAgaWYgKHJlcXVpcmUpXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoXCJGaWVsZCBpcyBub3QgcHJlc2VudCBpbiB0aGlzIHN0YXRlXCIpO1xuICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgICAgICBlbnN1cmVBZGRyKHRoaXMsIGFkZHIpO1xuICAgICAgICByZXR1cm4gZ2V0QWRkcih0aGlzLCBhZGRyKTtcbiAgICB9XG4gICAgLyoqXG4gICAgQ3JlYXRlIGEgW3RyYW5zYWN0aW9uXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI3N0YXRlLlRyYW5zYWN0aW9uKSB0aGF0IHVwZGF0ZXMgdGhpc1xuICAgIHN0YXRlLiBBbnkgbnVtYmVyIG9mIFt0cmFuc2FjdGlvbiBzcGVjc10oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNzdGF0ZS5UcmFuc2FjdGlvblNwZWMpXG4gICAgY2FuIGJlIHBhc3NlZC4gVW5sZXNzXG4gICAgW2BzZXF1ZW50aWFsYF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNzdGF0ZS5UcmFuc2FjdGlvblNwZWMuc2VxdWVudGlhbCkgaXMgc2V0LCB0aGVcbiAgICBbY2hhbmdlc10oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNzdGF0ZS5UcmFuc2FjdGlvblNwZWMuY2hhbmdlcykgKGlmIGFueSkgb2YgZWFjaCBzcGVjXG4gICAgYXJlIGFzc3VtZWQgdG8gc3RhcnQgaW4gdGhlIF9jdXJyZW50XyBkb2N1bWVudCAobm90IHRoZSBkb2N1bWVudFxuICAgIHByb2R1Y2VkIGJ5IHByZXZpb3VzIHNwZWNzKSwgYW5kIGl0c1xuICAgIFtzZWxlY3Rpb25dKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jc3RhdGUuVHJhbnNhY3Rpb25TcGVjLnNlbGVjdGlvbikgYW5kXG4gICAgW2VmZmVjdHNdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jc3RhdGUuVHJhbnNhY3Rpb25TcGVjLmVmZmVjdHMpIGFyZSBhc3N1bWVkIHRvIHJlZmVyXG4gICAgdG8gdGhlIGRvY3VtZW50IGNyZWF0ZWQgYnkgaXRzIF9vd25fIGNoYW5nZXMuIFRoZSByZXN1bHRpbmdcbiAgICB0cmFuc2FjdGlvbiBjb250YWlucyB0aGUgY29tYmluZWQgZWZmZWN0IG9mIGFsbCB0aGUgZGlmZmVyZW50XG4gICAgc3BlY3MuIEZvciBbc2VsZWN0aW9uXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI3N0YXRlLlRyYW5zYWN0aW9uU3BlYy5zZWxlY3Rpb24pLCBsYXRlclxuICAgIHNwZWNzIHRha2UgcHJlY2VkZW5jZSBvdmVyIGVhcmxpZXIgb25lcy5cbiAgICAqL1xuICAgIHVwZGF0ZSguLi5zcGVjcykge1xuICAgICAgICByZXR1cm4gcmVzb2x2ZVRyYW5zYWN0aW9uKHRoaXMsIHNwZWNzLCB0cnVlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgQGludGVybmFsXG4gICAgKi9cbiAgICBhcHBseVRyYW5zYWN0aW9uKHRyKSB7XG4gICAgICAgIGxldCBjb25mID0gdGhpcy5jb25maWcsIHsgYmFzZSwgY29tcGFydG1lbnRzIH0gPSBjb25mO1xuICAgICAgICBmb3IgKGxldCBlZmZlY3Qgb2YgdHIuZWZmZWN0cykge1xuICAgICAgICAgICAgaWYgKGVmZmVjdC5pcyhDb21wYXJ0bWVudC5yZWNvbmZpZ3VyZSkpIHtcbiAgICAgICAgICAgICAgICBpZiAoY29uZikge1xuICAgICAgICAgICAgICAgICAgICBjb21wYXJ0bWVudHMgPSBuZXcgTWFwO1xuICAgICAgICAgICAgICAgICAgICBjb25mLmNvbXBhcnRtZW50cy5mb3JFYWNoKCh2YWwsIGtleSkgPT4gY29tcGFydG1lbnRzLnNldChrZXksIHZhbCkpO1xuICAgICAgICAgICAgICAgICAgICBjb25mID0gbnVsbDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29tcGFydG1lbnRzLnNldChlZmZlY3QudmFsdWUuY29tcGFydG1lbnQsIGVmZmVjdC52YWx1ZS5leHRlbnNpb24pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoZWZmZWN0LmlzKFN0YXRlRWZmZWN0LnJlY29uZmlndXJlKSkge1xuICAgICAgICAgICAgICAgIGNvbmYgPSBudWxsO1xuICAgICAgICAgICAgICAgIGJhc2UgPSBlZmZlY3QudmFsdWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChlZmZlY3QuaXMoU3RhdGVFZmZlY3QuYXBwZW5kQ29uZmlnKSkge1xuICAgICAgICAgICAgICAgIGNvbmYgPSBudWxsO1xuICAgICAgICAgICAgICAgIGJhc2UgPSBhc0FycmF5KGJhc2UpLmNvbmNhdChlZmZlY3QudmFsdWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGxldCBzdGFydFZhbHVlcztcbiAgICAgICAgaWYgKCFjb25mKSB7XG4gICAgICAgICAgICBjb25mID0gQ29uZmlndXJhdGlvbi5yZXNvbHZlKGJhc2UsIGNvbXBhcnRtZW50cywgdGhpcyk7XG4gICAgICAgICAgICBsZXQgaW50ZXJtZWRpYXRlU3RhdGUgPSBuZXcgRWRpdG9yU3RhdGUoY29uZiwgdGhpcy5kb2MsIHRoaXMuc2VsZWN0aW9uLCBjb25mLmR5bmFtaWNTbG90cy5tYXAoKCkgPT4gbnVsbCksIChzdGF0ZSwgc2xvdCkgPT4gc2xvdC5yZWNvbmZpZ3VyZShzdGF0ZSwgdGhpcyksIG51bGwpO1xuICAgICAgICAgICAgc3RhcnRWYWx1ZXMgPSBpbnRlcm1lZGlhdGVTdGF0ZS52YWx1ZXM7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBzdGFydFZhbHVlcyA9IHRyLnN0YXJ0U3RhdGUudmFsdWVzLnNsaWNlKCk7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IHNlbGVjdGlvbiA9IHRyLnN0YXJ0U3RhdGUuZmFjZXQoYWxsb3dNdWx0aXBsZVNlbGVjdGlvbnMpID8gdHIubmV3U2VsZWN0aW9uIDogdHIubmV3U2VsZWN0aW9uLmFzU2luZ2xlKCk7XG4gICAgICAgIG5ldyBFZGl0b3JTdGF0ZShjb25mLCB0ci5uZXdEb2MsIHNlbGVjdGlvbiwgc3RhcnRWYWx1ZXMsIChzdGF0ZSwgc2xvdCkgPT4gc2xvdC51cGRhdGUoc3RhdGUsIHRyKSwgdHIpO1xuICAgIH1cbiAgICAvKipcbiAgICBDcmVhdGUgYSBbdHJhbnNhY3Rpb24gc3BlY10oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNzdGF0ZS5UcmFuc2FjdGlvblNwZWMpIHRoYXRcbiAgICByZXBsYWNlcyBldmVyeSBzZWxlY3Rpb24gcmFuZ2Ugd2l0aCB0aGUgZ2l2ZW4gY29udGVudC5cbiAgICAqL1xuICAgIHJlcGxhY2VTZWxlY3Rpb24odGV4dCkge1xuICAgICAgICBpZiAodHlwZW9mIHRleHQgPT0gXCJzdHJpbmdcIilcbiAgICAgICAgICAgIHRleHQgPSB0aGlzLnRvVGV4dCh0ZXh0KTtcbiAgICAgICAgcmV0dXJuIHRoaXMuY2hhbmdlQnlSYW5nZShyYW5nZSA9PiAoeyBjaGFuZ2VzOiB7IGZyb206IHJhbmdlLmZyb20sIHRvOiByYW5nZS50bywgaW5zZXJ0OiB0ZXh0IH0sXG4gICAgICAgICAgICByYW5nZTogRWRpdG9yU2VsZWN0aW9uLmN1cnNvcihyYW5nZS5mcm9tICsgdGV4dC5sZW5ndGgpIH0pKTtcbiAgICB9XG4gICAgLyoqXG4gICAgQ3JlYXRlIGEgc2V0IG9mIGNoYW5nZXMgYW5kIGEgbmV3IHNlbGVjdGlvbiBieSBydW5uaW5nIHRoZSBnaXZlblxuICAgIGZ1bmN0aW9uIGZvciBlYWNoIHJhbmdlIGluIHRoZSBhY3RpdmUgc2VsZWN0aW9uLiBUaGUgZnVuY3Rpb25cbiAgICBjYW4gcmV0dXJuIGFuIG9wdGlvbmFsIHNldCBvZiBjaGFuZ2VzIChpbiB0aGUgY29vcmRpbmF0ZSBzcGFjZVxuICAgIG9mIHRoZSBzdGFydCBkb2N1bWVudCksIHBsdXMgYW4gdXBkYXRlZCByYW5nZSAoaW4gdGhlIGNvb3JkaW5hdGVcbiAgICBzcGFjZSBvZiB0aGUgZG9jdW1lbnQgcHJvZHVjZWQgYnkgdGhlIGNhbGwncyBvd24gY2hhbmdlcykuIFRoaXNcbiAgICBtZXRob2Qgd2lsbCBtZXJnZSBhbGwgdGhlIGNoYW5nZXMgYW5kIHJhbmdlcyBpbnRvIGEgc2luZ2xlXG4gICAgY2hhbmdlc2V0IGFuZCBzZWxlY3Rpb24sIGFuZCByZXR1cm4gaXQgYXMgYSBbdHJhbnNhY3Rpb25cbiAgICBzcGVjXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI3N0YXRlLlRyYW5zYWN0aW9uU3BlYyksIHdoaWNoIGNhbiBiZSBwYXNzZWQgdG9cbiAgICBbYHVwZGF0ZWBdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jc3RhdGUuRWRpdG9yU3RhdGUudXBkYXRlKS5cbiAgICAqL1xuICAgIGNoYW5nZUJ5UmFuZ2UoZikge1xuICAgICAgICBsZXQgc2VsID0gdGhpcy5zZWxlY3Rpb247XG4gICAgICAgIGxldCByZXN1bHQxID0gZihzZWwucmFuZ2VzWzBdKTtcbiAgICAgICAgbGV0IGNoYW5nZXMgPSB0aGlzLmNoYW5nZXMocmVzdWx0MS5jaGFuZ2VzKSwgcmFuZ2VzID0gW3Jlc3VsdDEucmFuZ2VdO1xuICAgICAgICBsZXQgZWZmZWN0cyA9IGFzQXJyYXkocmVzdWx0MS5lZmZlY3RzKTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDE7IGkgPCBzZWwucmFuZ2VzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBsZXQgcmVzdWx0ID0gZihzZWwucmFuZ2VzW2ldKTtcbiAgICAgICAgICAgIGxldCBuZXdDaGFuZ2VzID0gdGhpcy5jaGFuZ2VzKHJlc3VsdC5jaGFuZ2VzKSwgbmV3TWFwcGVkID0gbmV3Q2hhbmdlcy5tYXAoY2hhbmdlcyk7XG4gICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IGk7IGorKylcbiAgICAgICAgICAgICAgICByYW5nZXNbal0gPSByYW5nZXNbal0ubWFwKG5ld01hcHBlZCk7XG4gICAgICAgICAgICBsZXQgbWFwQnkgPSBjaGFuZ2VzLm1hcERlc2MobmV3Q2hhbmdlcywgdHJ1ZSk7XG4gICAgICAgICAgICByYW5nZXMucHVzaChyZXN1bHQucmFuZ2UubWFwKG1hcEJ5KSk7XG4gICAgICAgICAgICBjaGFuZ2VzID0gY2hhbmdlcy5jb21wb3NlKG5ld01hcHBlZCk7XG4gICAgICAgICAgICBlZmZlY3RzID0gU3RhdGVFZmZlY3QubWFwRWZmZWN0cyhlZmZlY3RzLCBuZXdNYXBwZWQpLmNvbmNhdChTdGF0ZUVmZmVjdC5tYXBFZmZlY3RzKGFzQXJyYXkocmVzdWx0LmVmZmVjdHMpLCBtYXBCeSkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBjaGFuZ2VzLFxuICAgICAgICAgICAgc2VsZWN0aW9uOiBFZGl0b3JTZWxlY3Rpb24uY3JlYXRlKHJhbmdlcywgc2VsLm1haW5JbmRleCksXG4gICAgICAgICAgICBlZmZlY3RzXG4gICAgICAgIH07XG4gICAgfVxuICAgIC8qKlxuICAgIENyZWF0ZSBhIFtjaGFuZ2Ugc2V0XShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI3N0YXRlLkNoYW5nZVNldCkgZnJvbSB0aGUgZ2l2ZW4gY2hhbmdlXG4gICAgZGVzY3JpcHRpb24sIHRha2luZyB0aGUgc3RhdGUncyBkb2N1bWVudCBsZW5ndGggYW5kIGxpbmVcbiAgICBzZXBhcmF0b3IgaW50byBhY2NvdW50LlxuICAgICovXG4gICAgY2hhbmdlcyhzcGVjID0gW10pIHtcbiAgICAgICAgaWYgKHNwZWMgaW5zdGFuY2VvZiBDaGFuZ2VTZXQpXG4gICAgICAgICAgICByZXR1cm4gc3BlYztcbiAgICAgICAgcmV0dXJuIENoYW5nZVNldC5vZihzcGVjLCB0aGlzLmRvYy5sZW5ndGgsIHRoaXMuZmFjZXQoRWRpdG9yU3RhdGUubGluZVNlcGFyYXRvcikpO1xuICAgIH1cbiAgICAvKipcbiAgICBVc2luZyB0aGUgc3RhdGUncyBbbGluZVxuICAgIHNlcGFyYXRvcl0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNzdGF0ZS5FZGl0b3JTdGF0ZV5saW5lU2VwYXJhdG9yKSwgY3JlYXRlIGFcbiAgICBbYFRleHRgXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI3N0YXRlLlRleHQpIGluc3RhbmNlIGZyb20gdGhlIGdpdmVuIHN0cmluZy5cbiAgICAqL1xuICAgIHRvVGV4dChzdHJpbmcpIHtcbiAgICAgICAgcmV0dXJuIFRleHQub2Yoc3RyaW5nLnNwbGl0KHRoaXMuZmFjZXQoRWRpdG9yU3RhdGUubGluZVNlcGFyYXRvcikgfHwgRGVmYXVsdFNwbGl0KSk7XG4gICAgfVxuICAgIC8qKlxuICAgIFJldHVybiB0aGUgZ2l2ZW4gcmFuZ2Ugb2YgdGhlIGRvY3VtZW50IGFzIGEgc3RyaW5nLlxuICAgICovXG4gICAgc2xpY2VEb2MoZnJvbSA9IDAsIHRvID0gdGhpcy5kb2MubGVuZ3RoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRvYy5zbGljZVN0cmluZyhmcm9tLCB0bywgdGhpcy5saW5lQnJlYWspO1xuICAgIH1cbiAgICAvKipcbiAgICBHZXQgdGhlIHZhbHVlIG9mIGEgc3RhdGUgW2ZhY2V0XShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI3N0YXRlLkZhY2V0KS5cbiAgICAqL1xuICAgIGZhY2V0KGZhY2V0KSB7XG4gICAgICAgIGxldCBhZGRyID0gdGhpcy5jb25maWcuYWRkcmVzc1tmYWNldC5pZF07XG4gICAgICAgIGlmIChhZGRyID09IG51bGwpXG4gICAgICAgICAgICByZXR1cm4gZmFjZXQuZGVmYXVsdDtcbiAgICAgICAgZW5zdXJlQWRkcih0aGlzLCBhZGRyKTtcbiAgICAgICAgcmV0dXJuIGdldEFkZHIodGhpcywgYWRkcik7XG4gICAgfVxuICAgIC8qKlxuICAgIENvbnZlcnQgdGhpcyBzdGF0ZSB0byBhIEpTT04tc2VyaWFsaXphYmxlIG9iamVjdC4gV2hlbiBjdXN0b21cbiAgICBmaWVsZHMgc2hvdWxkIGJlIHNlcmlhbGl6ZWQsIHlvdSBjYW4gcGFzcyB0aGVtIGluIGFzIGFuIG9iamVjdFxuICAgIG1hcHBpbmcgcHJvcGVydHkgbmFtZXMgKGluIHRoZSByZXN1bHRpbmcgb2JqZWN0LCB3aGljaCBzaG91bGRcbiAgICBub3QgdXNlIGBkb2NgIG9yIGBzZWxlY3Rpb25gKSB0byBmaWVsZHMuXG4gICAgKi9cbiAgICB0b0pTT04oZmllbGRzKSB7XG4gICAgICAgIGxldCByZXN1bHQgPSB7XG4gICAgICAgICAgICBkb2M6IHRoaXMuc2xpY2VEb2MoKSxcbiAgICAgICAgICAgIHNlbGVjdGlvbjogdGhpcy5zZWxlY3Rpb24udG9KU09OKClcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKGZpZWxkcylcbiAgICAgICAgICAgIGZvciAobGV0IHByb3AgaW4gZmllbGRzKSB7XG4gICAgICAgICAgICAgICAgbGV0IHZhbHVlID0gZmllbGRzW3Byb3BdO1xuICAgICAgICAgICAgICAgIGlmICh2YWx1ZSBpbnN0YW5jZW9mIFN0YXRlRmllbGQgJiYgdGhpcy5jb25maWcuYWRkcmVzc1t2YWx1ZS5pZF0gIT0gbnVsbClcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0W3Byb3BdID0gdmFsdWUuc3BlYy50b0pTT04odGhpcy5maWVsZChmaWVsZHNbcHJvcF0pLCB0aGlzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG4gICAgLyoqXG4gICAgRGVzZXJpYWxpemUgYSBzdGF0ZSBmcm9tIGl0cyBKU09OIHJlcHJlc2VudGF0aW9uLiBXaGVuIGN1c3RvbVxuICAgIGZpZWxkcyBzaG91bGQgYmUgZGVzZXJpYWxpemVkLCBwYXNzIHRoZSBzYW1lIG9iamVjdCB5b3UgcGFzc2VkXG4gICAgdG8gW2B0b0pTT05gXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI3N0YXRlLkVkaXRvclN0YXRlLnRvSlNPTikgd2hlbiBzZXJpYWxpemluZyBhc1xuICAgIHRoaXJkIGFyZ3VtZW50LlxuICAgICovXG4gICAgc3RhdGljIGZyb21KU09OKGpzb24sIGNvbmZpZyA9IHt9LCBmaWVsZHMpIHtcbiAgICAgICAgaWYgKCFqc29uIHx8IHR5cGVvZiBqc29uLmRvYyAhPSBcInN0cmluZ1wiKVxuICAgICAgICAgICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoXCJJbnZhbGlkIEpTT04gcmVwcmVzZW50YXRpb24gZm9yIEVkaXRvclN0YXRlXCIpO1xuICAgICAgICBsZXQgZmllbGRJbml0ID0gW107XG4gICAgICAgIGlmIChmaWVsZHMpXG4gICAgICAgICAgICBmb3IgKGxldCBwcm9wIGluIGZpZWxkcykge1xuICAgICAgICAgICAgICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoanNvbiwgcHJvcCkpIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGZpZWxkID0gZmllbGRzW3Byb3BdLCB2YWx1ZSA9IGpzb25bcHJvcF07XG4gICAgICAgICAgICAgICAgICAgIGZpZWxkSW5pdC5wdXNoKGZpZWxkLmluaXQoc3RhdGUgPT4gZmllbGQuc3BlYy5mcm9tSlNPTih2YWx1ZSwgc3RhdGUpKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICByZXR1cm4gRWRpdG9yU3RhdGUuY3JlYXRlKHtcbiAgICAgICAgICAgIGRvYzoganNvbi5kb2MsXG4gICAgICAgICAgICBzZWxlY3Rpb246IEVkaXRvclNlbGVjdGlvbi5mcm9tSlNPTihqc29uLnNlbGVjdGlvbiksXG4gICAgICAgICAgICBleHRlbnNpb25zOiBjb25maWcuZXh0ZW5zaW9ucyA/IGZpZWxkSW5pdC5jb25jYXQoW2NvbmZpZy5leHRlbnNpb25zXSkgOiBmaWVsZEluaXRcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgIENyZWF0ZSBhIG5ldyBzdGF0ZS4gWW91J2xsIHVzdWFsbHkgb25seSBuZWVkIHRoaXMgd2hlblxuICAgIGluaXRpYWxpemluZyBhbiBlZGl0b3LigJR1cGRhdGVkIHN0YXRlcyBhcmUgY3JlYXRlZCBieSBhcHBseWluZ1xuICAgIHRyYW5zYWN0aW9ucy5cbiAgICAqL1xuICAgIHN0YXRpYyBjcmVhdGUoY29uZmlnID0ge30pIHtcbiAgICAgICAgbGV0IGNvbmZpZ3VyYXRpb24gPSBDb25maWd1cmF0aW9uLnJlc29sdmUoY29uZmlnLmV4dGVuc2lvbnMgfHwgW10sIG5ldyBNYXApO1xuICAgICAgICBsZXQgZG9jID0gY29uZmlnLmRvYyBpbnN0YW5jZW9mIFRleHQgPyBjb25maWcuZG9jXG4gICAgICAgICAgICA6IFRleHQub2YoKGNvbmZpZy5kb2MgfHwgXCJcIikuc3BsaXQoY29uZmlndXJhdGlvbi5zdGF0aWNGYWNldChFZGl0b3JTdGF0ZS5saW5lU2VwYXJhdG9yKSB8fCBEZWZhdWx0U3BsaXQpKTtcbiAgICAgICAgbGV0IHNlbGVjdGlvbiA9ICFjb25maWcuc2VsZWN0aW9uID8gRWRpdG9yU2VsZWN0aW9uLnNpbmdsZSgwKVxuICAgICAgICAgICAgOiBjb25maWcuc2VsZWN0aW9uIGluc3RhbmNlb2YgRWRpdG9yU2VsZWN0aW9uID8gY29uZmlnLnNlbGVjdGlvblxuICAgICAgICAgICAgICAgIDogRWRpdG9yU2VsZWN0aW9uLnNpbmdsZShjb25maWcuc2VsZWN0aW9uLmFuY2hvciwgY29uZmlnLnNlbGVjdGlvbi5oZWFkKTtcbiAgICAgICAgY2hlY2tTZWxlY3Rpb24oc2VsZWN0aW9uLCBkb2MubGVuZ3RoKTtcbiAgICAgICAgaWYgKCFjb25maWd1cmF0aW9uLnN0YXRpY0ZhY2V0KGFsbG93TXVsdGlwbGVTZWxlY3Rpb25zKSlcbiAgICAgICAgICAgIHNlbGVjdGlvbiA9IHNlbGVjdGlvbi5hc1NpbmdsZSgpO1xuICAgICAgICByZXR1cm4gbmV3IEVkaXRvclN0YXRlKGNvbmZpZ3VyYXRpb24sIGRvYywgc2VsZWN0aW9uLCBjb25maWd1cmF0aW9uLmR5bmFtaWNTbG90cy5tYXAoKCkgPT4gbnVsbCksIChzdGF0ZSwgc2xvdCkgPT4gc2xvdC5jcmVhdGUoc3RhdGUpLCBudWxsKTtcbiAgICB9XG4gICAgLyoqXG4gICAgVGhlIHNpemUgKGluIGNvbHVtbnMpIG9mIGEgdGFiIGluIHRoZSBkb2N1bWVudCwgZGV0ZXJtaW5lZCBieVxuICAgIHRoZSBbYHRhYlNpemVgXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI3N0YXRlLkVkaXRvclN0YXRlXnRhYlNpemUpIGZhY2V0LlxuICAgICovXG4gICAgZ2V0IHRhYlNpemUoKSB7IHJldHVybiB0aGlzLmZhY2V0KEVkaXRvclN0YXRlLnRhYlNpemUpOyB9XG4gICAgLyoqXG4gICAgR2V0IHRoZSBwcm9wZXIgW2xpbmUtYnJlYWtdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jc3RhdGUuRWRpdG9yU3RhdGVebGluZVNlcGFyYXRvcilcbiAgICBzdHJpbmcgZm9yIHRoaXMgc3RhdGUuXG4gICAgKi9cbiAgICBnZXQgbGluZUJyZWFrKCkgeyByZXR1cm4gdGhpcy5mYWNldChFZGl0b3JTdGF0ZS5saW5lU2VwYXJhdG9yKSB8fCBcIlxcblwiOyB9XG4gICAgLyoqXG4gICAgUmV0dXJucyB0cnVlIHdoZW4gdGhlIGVkaXRvciBpc1xuICAgIFtjb25maWd1cmVkXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI3N0YXRlLkVkaXRvclN0YXRlXnJlYWRPbmx5KSB0byBiZSByZWFkLW9ubHkuXG4gICAgKi9cbiAgICBnZXQgcmVhZE9ubHkoKSB7IHJldHVybiB0aGlzLmZhY2V0KHJlYWRPbmx5KTsgfVxuICAgIC8qKlxuICAgIExvb2sgdXAgYSB0cmFuc2xhdGlvbiBmb3IgdGhlIGdpdmVuIHBocmFzZSAodmlhIHRoZVxuICAgIFtgcGhyYXNlc2BdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jc3RhdGUuRWRpdG9yU3RhdGVecGhyYXNlcykgZmFjZXQpLCBvciByZXR1cm4gdGhlXG4gICAgb3JpZ2luYWwgc3RyaW5nIGlmIG5vIHRyYW5zbGF0aW9uIGlzIGZvdW5kLlxuICAgIFxuICAgIElmIGFkZGl0aW9uYWwgYXJndW1lbnRzIGFyZSBwYXNzZWQsIHRoZXkgd2lsbCBiZSBpbnNlcnRlZCBpblxuICAgIHBsYWNlIG9mIG1hcmtlcnMgbGlrZSBgJDFgIChmb3IgdGhlIGZpcnN0IHZhbHVlKSBhbmQgYCQyYCwgZXRjLlxuICAgIEEgc2luZ2xlIGAkYCBpcyBlcXVpdmFsZW50IHRvIGAkMWAsIGFuZCBgJCRgIHdpbGwgcHJvZHVjZSBhXG4gICAgbGl0ZXJhbCBkb2xsYXIgc2lnbi5cbiAgICAqL1xuICAgIHBocmFzZShwaHJhc2UsIC4uLmluc2VydCkge1xuICAgICAgICBmb3IgKGxldCBtYXAgb2YgdGhpcy5mYWNldChFZGl0b3JTdGF0ZS5waHJhc2VzKSlcbiAgICAgICAgICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwobWFwLCBwaHJhc2UpKSB7XG4gICAgICAgICAgICAgICAgcGhyYXNlID0gbWFwW3BocmFzZV07XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIGlmIChpbnNlcnQubGVuZ3RoKVxuICAgICAgICAgICAgcGhyYXNlID0gcGhyYXNlLnJlcGxhY2UoL1xcJChcXCR8XFxkKikvZywgKG0sIGkpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoaSA9PSBcIiRcIilcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwiJFwiO1xuICAgICAgICAgICAgICAgIGxldCBuID0gKyhpIHx8IDEpO1xuICAgICAgICAgICAgICAgIHJldHVybiAhbiB8fCBuID4gaW5zZXJ0Lmxlbmd0aCA/IG0gOiBpbnNlcnRbbiAtIDFdO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBwaHJhc2U7XG4gICAgfVxuICAgIC8qKlxuICAgIEZpbmQgdGhlIHZhbHVlcyBmb3IgYSBnaXZlbiBsYW5ndWFnZSBkYXRhIGZpZWxkLCBwcm92aWRlZCBieSB0aGVcbiAgICB0aGUgW2BsYW5ndWFnZURhdGFgXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI3N0YXRlLkVkaXRvclN0YXRlXmxhbmd1YWdlRGF0YSkgZmFjZXQuXG4gICAgXG4gICAgRXhhbXBsZXMgb2YgbGFuZ3VhZ2UgZGF0YSBmaWVsZHMgYXJlLi4uXG4gICAgXG4gICAgLSBbYFwiY29tbWVudFRva2Vuc1wiYF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNjb21tYW5kcy5Db21tZW50VG9rZW5zKSBmb3Igc3BlY2lmeWluZ1xuICAgICAgY29tbWVudCBzeW50YXguXG4gICAgLSBbYFwiYXV0b2NvbXBsZXRlXCJgXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI2F1dG9jb21wbGV0ZS5hdXRvY29tcGxldGlvbl5jb25maWcub3ZlcnJpZGUpXG4gICAgICBmb3IgcHJvdmlkaW5nIGxhbmd1YWdlLXNwZWNpZmljIGNvbXBsZXRpb24gc291cmNlcy5cbiAgICAtIFtgXCJ3b3JkQ2hhcnNcImBdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jc3RhdGUuRWRpdG9yU3RhdGUuY2hhckNhdGVnb3JpemVyKSBmb3IgYWRkaW5nXG4gICAgICBjaGFyYWN0ZXJzIHRoYXQgc2hvdWxkIGJlIGNvbnNpZGVyZWQgcGFydCBvZiB3b3JkcyBpbiB0aGlzXG4gICAgICBsYW5ndWFnZS5cbiAgICAtIFtgXCJjbG9zZUJyYWNrZXRzXCJgXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI2F1dG9jb21wbGV0ZS5DbG9zZUJyYWNrZXRDb25maWcpIGNvbnRyb2xzXG4gICAgICBicmFja2V0IGNsb3NpbmcgYmVoYXZpb3IuXG4gICAgKi9cbiAgICBsYW5ndWFnZURhdGFBdChuYW1lLCBwb3MsIHNpZGUgPSAtMSkge1xuICAgICAgICBsZXQgdmFsdWVzID0gW107XG4gICAgICAgIGZvciAobGV0IHByb3ZpZGVyIG9mIHRoaXMuZmFjZXQobGFuZ3VhZ2VEYXRhKSkge1xuICAgICAgICAgICAgZm9yIChsZXQgcmVzdWx0IG9mIHByb3ZpZGVyKHRoaXMsIHBvcywgc2lkZSkpIHtcbiAgICAgICAgICAgICAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHJlc3VsdCwgbmFtZSkpXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlcy5wdXNoKHJlc3VsdFtuYW1lXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHZhbHVlcztcbiAgICB9XG4gICAgLyoqXG4gICAgUmV0dXJuIGEgZnVuY3Rpb24gdGhhdCBjYW4gY2F0ZWdvcml6ZSBzdHJpbmdzIChleHBlY3RlZCB0b1xuICAgIHJlcHJlc2VudCBhIHNpbmdsZSBbZ3JhcGhlbWUgY2x1c3Rlcl0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNzdGF0ZS5maW5kQ2x1c3RlckJyZWFrKSlcbiAgICBpbnRvIG9uZSBvZjpcbiAgICBcbiAgICAgLSBXb3JkIChjb250YWlucyBhbiBhbHBoYW51bWVyaWMgY2hhcmFjdGVyIG9yIGEgY2hhcmFjdGVyXG4gICAgICAgZXhwbGljaXRseSBsaXN0ZWQgaW4gdGhlIGxvY2FsIGxhbmd1YWdlJ3MgYFwid29yZENoYXJzXCJgXG4gICAgICAgbGFuZ3VhZ2UgZGF0YSwgd2hpY2ggc2hvdWxkIGJlIGEgc3RyaW5nKVxuICAgICAtIFNwYWNlIChjb250YWlucyBvbmx5IHdoaXRlc3BhY2UpXG4gICAgIC0gT3RoZXIgKGFueXRoaW5nIGVsc2UpXG4gICAgKi9cbiAgICBjaGFyQ2F0ZWdvcml6ZXIoYXQpIHtcbiAgICAgICAgbGV0IGNoYXJzID0gdGhpcy5sYW5ndWFnZURhdGFBdChcIndvcmRDaGFyc1wiLCBhdCk7XG4gICAgICAgIHJldHVybiBtYWtlQ2F0ZWdvcml6ZXIoY2hhcnMubGVuZ3RoID8gY2hhcnNbMF0gOiBcIlwiKTtcbiAgICB9XG4gICAgLyoqXG4gICAgRmluZCB0aGUgd29yZCBhdCB0aGUgZ2l2ZW4gcG9zaXRpb24sIG1lYW5pbmcgdGhlIHJhbmdlXG4gICAgY29udGFpbmluZyBhbGwgW3dvcmRdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jc3RhdGUuQ2hhckNhdGVnb3J5LldvcmQpIGNoYXJhY3RlcnNcbiAgICBhcm91bmQgaXQuIElmIG5vIHdvcmQgY2hhcmFjdGVycyBhcmUgYWRqYWNlbnQgdG8gdGhlIHBvc2l0aW9uLFxuICAgIHRoaXMgcmV0dXJucyBudWxsLlxuICAgICovXG4gICAgd29yZEF0KHBvcykge1xuICAgICAgICBsZXQgeyB0ZXh0LCBmcm9tLCBsZW5ndGggfSA9IHRoaXMuZG9jLmxpbmVBdChwb3MpO1xuICAgICAgICBsZXQgY2F0ID0gdGhpcy5jaGFyQ2F0ZWdvcml6ZXIocG9zKTtcbiAgICAgICAgbGV0IHN0YXJ0ID0gcG9zIC0gZnJvbSwgZW5kID0gcG9zIC0gZnJvbTtcbiAgICAgICAgd2hpbGUgKHN0YXJ0ID4gMCkge1xuICAgICAgICAgICAgbGV0IHByZXYgPSBmaW5kQ2x1c3RlckJyZWFrKHRleHQsIHN0YXJ0LCBmYWxzZSk7XG4gICAgICAgICAgICBpZiAoY2F0KHRleHQuc2xpY2UocHJldiwgc3RhcnQpKSAhPSBDaGFyQ2F0ZWdvcnkuV29yZClcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIHN0YXJ0ID0gcHJldjtcbiAgICAgICAgfVxuICAgICAgICB3aGlsZSAoZW5kIDwgbGVuZ3RoKSB7XG4gICAgICAgICAgICBsZXQgbmV4dCA9IGZpbmRDbHVzdGVyQnJlYWsodGV4dCwgZW5kKTtcbiAgICAgICAgICAgIGlmIChjYXQodGV4dC5zbGljZShlbmQsIG5leHQpKSAhPSBDaGFyQ2F0ZWdvcnkuV29yZClcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGVuZCA9IG5leHQ7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHN0YXJ0ID09IGVuZCA/IG51bGwgOiBFZGl0b3JTZWxlY3Rpb24ucmFuZ2Uoc3RhcnQgKyBmcm9tLCBlbmQgKyBmcm9tKTtcbiAgICB9XG59XG4vKipcbkEgZmFjZXQgdGhhdCwgd2hlbiBlbmFibGVkLCBjYXVzZXMgdGhlIGVkaXRvciB0byBhbGxvdyBtdWx0aXBsZVxucmFuZ2VzIHRvIGJlIHNlbGVjdGVkLiBCZSBjYXJlZnVsIHRob3VnaCwgYmVjYXVzZSBieSBkZWZhdWx0IHRoZVxuZWRpdG9yIHJlbGllcyBvbiB0aGUgbmF0aXZlIERPTSBzZWxlY3Rpb24sIHdoaWNoIGNhbm5vdCBoYW5kbGVcbm11bHRpcGxlIHNlbGVjdGlvbnMuIEFuIGV4dGVuc2lvbiBsaWtlXG5bYGRyYXdTZWxlY3Rpb25gXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI3ZpZXcuZHJhd1NlbGVjdGlvbikgY2FuIGJlIHVzZWQgdG8gbWFrZVxuc2Vjb25kYXJ5IHNlbGVjdGlvbnMgdmlzaWJsZSB0byB0aGUgdXNlci5cbiovXG5FZGl0b3JTdGF0ZS5hbGxvd011bHRpcGxlU2VsZWN0aW9ucyA9IGFsbG93TXVsdGlwbGVTZWxlY3Rpb25zO1xuLyoqXG5Db25maWd1cmVzIHRoZSB0YWIgc2l6ZSB0byB1c2UgaW4gdGhpcyBzdGF0ZS4gVGhlIGZpcnN0XG4oaGlnaGVzdC1wcmVjZWRlbmNlKSB2YWx1ZSBvZiB0aGUgZmFjZXQgaXMgdXNlZC4gSWYgbm8gdmFsdWUgaXNcbmdpdmVuLCB0aGlzIGRlZmF1bHRzIHRvIDQuXG4qL1xuRWRpdG9yU3RhdGUudGFiU2l6ZSA9IC8qQF9fUFVSRV9fKi9GYWNldC5kZWZpbmUoe1xuICAgIGNvbWJpbmU6IHZhbHVlcyA9PiB2YWx1ZXMubGVuZ3RoID8gdmFsdWVzWzBdIDogNFxufSk7XG4vKipcblRoZSBsaW5lIHNlcGFyYXRvciB0byB1c2UuIEJ5IGRlZmF1bHQsIGFueSBvZiBgXCJcXG5cImAsIGBcIlxcclxcblwiYFxuYW5kIGBcIlxcclwiYCBpcyB0cmVhdGVkIGFzIGEgc2VwYXJhdG9yIHdoZW4gc3BsaXR0aW5nIGxpbmVzLCBhbmRcbmxpbmVzIGFyZSBqb2luZWQgd2l0aCBgXCJcXG5cImAuXG5cbldoZW4geW91IGNvbmZpZ3VyZSBhIHZhbHVlIGhlcmUsIG9ubHkgdGhhdCBwcmVjaXNlIHNlcGFyYXRvclxud2lsbCBiZSB1c2VkLCBhbGxvd2luZyB5b3UgdG8gcm91bmQtdHJpcCBkb2N1bWVudHMgdGhyb3VnaCB0aGVcbmVkaXRvciB3aXRob3V0IG5vcm1hbGl6aW5nIGxpbmUgc2VwYXJhdG9ycy5cbiovXG5FZGl0b3JTdGF0ZS5saW5lU2VwYXJhdG9yID0gbGluZVNlcGFyYXRvcjtcbi8qKlxuVGhpcyBmYWNldCBjb250cm9scyB0aGUgdmFsdWUgb2YgdGhlXG5bYHJlYWRPbmx5YF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNzdGF0ZS5FZGl0b3JTdGF0ZS5yZWFkT25seSkgZ2V0dGVyLCB3aGljaCBpc1xuY29uc3VsdGVkIGJ5IGNvbW1hbmRzIGFuZCBleHRlbnNpb25zIHRoYXQgaW1wbGVtZW50IGVkaXRpbmdcbmZ1bmN0aW9uYWxpdHkgdG8gZGV0ZXJtaW5lIHdoZXRoZXIgdGhleSBzaG91bGQgYXBwbHkuIEl0XG5kZWZhdWx0cyB0byBmYWxzZSwgYnV0IHdoZW4gaXRzIGhpZ2hlc3QtcHJlY2VkZW5jZSB2YWx1ZSBpc1xuYHRydWVgLCBzdWNoIGZ1bmN0aW9uYWxpdHkgZGlzYWJsZXMgaXRzZWxmLlxuXG5Ob3QgdG8gYmUgY29uZnVzZWQgd2l0aFxuW2BFZGl0b3JWaWV3LmVkaXRhYmxlYF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyN2aWV3LkVkaXRvclZpZXdeZWRpdGFibGUpLCB3aGljaFxuY29udHJvbHMgd2hldGhlciB0aGUgZWRpdG9yJ3MgRE9NIGlzIHNldCB0byBiZSBlZGl0YWJsZSAoYW5kXG50aHVzIGZvY3VzYWJsZSkuXG4qL1xuRWRpdG9yU3RhdGUucmVhZE9ubHkgPSByZWFkT25seTtcbi8qKlxuUmVnaXN0ZXJzIHRyYW5zbGF0aW9uIHBocmFzZXMuIFRoZVxuW2BwaHJhc2VgXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI3N0YXRlLkVkaXRvclN0YXRlLnBocmFzZSkgbWV0aG9kIHdpbGwgbG9vayB0aHJvdWdoXG5hbGwgb2JqZWN0cyByZWdpc3RlcmVkIHdpdGggdGhpcyBmYWNldCB0byBmaW5kIHRyYW5zbGF0aW9ucyBmb3Jcbml0cyBhcmd1bWVudC5cbiovXG5FZGl0b3JTdGF0ZS5waHJhc2VzID0gLypAX19QVVJFX18qL0ZhY2V0LmRlZmluZSh7XG4gICAgY29tcGFyZShhLCBiKSB7XG4gICAgICAgIGxldCBrQSA9IE9iamVjdC5rZXlzKGEpLCBrQiA9IE9iamVjdC5rZXlzKGIpO1xuICAgICAgICByZXR1cm4ga0EubGVuZ3RoID09IGtCLmxlbmd0aCAmJiBrQS5ldmVyeShrID0+IGFba10gPT0gYltrXSk7XG4gICAgfVxufSk7XG4vKipcbkEgZmFjZXQgdXNlZCB0byByZWdpc3RlciBbbGFuZ3VhZ2VcbmRhdGFdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jc3RhdGUuRWRpdG9yU3RhdGUubGFuZ3VhZ2VEYXRhQXQpIHByb3ZpZGVycy5cbiovXG5FZGl0b3JTdGF0ZS5sYW5ndWFnZURhdGEgPSBsYW5ndWFnZURhdGE7XG4vKipcbkZhY2V0IHVzZWQgdG8gcmVnaXN0ZXIgY2hhbmdlIGZpbHRlcnMsIHdoaWNoIGFyZSBjYWxsZWQgZm9yIGVhY2hcbnRyYW5zYWN0aW9uICh1bmxlc3MgZXhwbGljaXRseVxuW2Rpc2FibGVkXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI3N0YXRlLlRyYW5zYWN0aW9uU3BlYy5maWx0ZXIpKSwgYW5kIGNhbiBzdXBwcmVzc1xucGFydCBvZiB0aGUgdHJhbnNhY3Rpb24ncyBjaGFuZ2VzLlxuXG5TdWNoIGEgZnVuY3Rpb24gY2FuIHJldHVybiBgdHJ1ZWAgdG8gaW5kaWNhdGUgdGhhdCBpdCBkb2Vzbid0XG53YW50IHRvIGRvIGFueXRoaW5nLCBgZmFsc2VgIHRvIGNvbXBsZXRlbHkgc3RvcCB0aGUgY2hhbmdlcyBpblxudGhlIHRyYW5zYWN0aW9uLCBvciBhIHNldCBvZiByYW5nZXMgaW4gd2hpY2ggY2hhbmdlcyBzaG91bGQgYmVcbnN1cHByZXNzZWQuIFN1Y2ggcmFuZ2VzIGFyZSByZXByZXNlbnRlZCBhcyBhbiBhcnJheSBvZiBudW1iZXJzLFxud2l0aCBlYWNoIHBhaXIgb2YgdHdvIG51bWJlcnMgaW5kaWNhdGluZyB0aGUgc3RhcnQgYW5kIGVuZCBvZiBhXG5yYW5nZS4gU28gZm9yIGV4YW1wbGUgYFsxMCwgMjAsIDEwMCwgMTEwXWAgc3VwcHJlc3NlcyBjaGFuZ2VzXG5iZXR3ZWVuIDEwIGFuZCAyMCwgYW5kIGJldHdlZW4gMTAwIGFuZCAxMTAuXG4qL1xuRWRpdG9yU3RhdGUuY2hhbmdlRmlsdGVyID0gY2hhbmdlRmlsdGVyO1xuLyoqXG5GYWNldCB1c2VkIHRvIHJlZ2lzdGVyIGEgaG9vayB0aGF0IGdldHMgYSBjaGFuY2UgdG8gdXBkYXRlIG9yXG5yZXBsYWNlIHRyYW5zYWN0aW9uIHNwZWNzIGJlZm9yZSB0aGV5IGFyZSBhcHBsaWVkLiBUaGlzIHdpbGxcbm9ubHkgYmUgYXBwbGllZCBmb3IgdHJhbnNhY3Rpb25zIHRoYXQgZG9uJ3QgaGF2ZVxuW2BmaWx0ZXJgXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI3N0YXRlLlRyYW5zYWN0aW9uU3BlYy5maWx0ZXIpIHNldCB0byBgZmFsc2VgLiBZb3VcbmNhbiBlaXRoZXIgcmV0dXJuIGEgc2luZ2xlIHRyYW5zYWN0aW9uIHNwZWMgKHBvc3NpYmx5IHRoZSBpbnB1dFxudHJhbnNhY3Rpb24pLCBvciBhbiBhcnJheSBvZiBzcGVjcyAod2hpY2ggd2lsbCBiZSBjb21iaW5lZCBpblxudGhlIHNhbWUgd2F5IGFzIHRoZSBhcmd1bWVudHMgdG9cbltgRWRpdG9yU3RhdGUudXBkYXRlYF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNzdGF0ZS5FZGl0b3JTdGF0ZS51cGRhdGUpKS5cblxuV2hlbiBwb3NzaWJsZSwgaXQgaXMgcmVjb21tZW5kZWQgdG8gYXZvaWQgYWNjZXNzaW5nXG5bYFRyYW5zYWN0aW9uLnN0YXRlYF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNzdGF0ZS5UcmFuc2FjdGlvbi5zdGF0ZSkgaW4gYSBmaWx0ZXIsXG5zaW5jZSBpdCB3aWxsIGZvcmNlIGNyZWF0aW9uIG9mIGEgc3RhdGUgdGhhdCB3aWxsIHRoZW4gYmVcbmRpc2NhcmRlZCBhZ2FpbiwgaWYgdGhlIHRyYW5zYWN0aW9uIGlzIGFjdHVhbGx5IGZpbHRlcmVkLlxuXG4oVGhpcyBmdW5jdGlvbmFsaXR5IHNob3VsZCBiZSB1c2VkIHdpdGggY2FyZS4gSW5kaXNjcmltaW5hdGVseVxubW9kaWZ5aW5nIHRyYW5zYWN0aW9uIGlzIGxpa2VseSB0byBicmVhayBzb21ldGhpbmcgb3IgZGVncmFkZVxudGhlIHVzZXIgZXhwZXJpZW5jZS4pXG4qL1xuRWRpdG9yU3RhdGUudHJhbnNhY3Rpb25GaWx0ZXIgPSB0cmFuc2FjdGlvbkZpbHRlcjtcbi8qKlxuVGhpcyBpcyBhIG1vcmUgbGltaXRlZCBmb3JtIG9mXG5bYHRyYW5zYWN0aW9uRmlsdGVyYF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNzdGF0ZS5FZGl0b3JTdGF0ZV50cmFuc2FjdGlvbkZpbHRlciksXG53aGljaCBjYW4gb25seSBhZGRcblthbm5vdGF0aW9uc10oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNzdGF0ZS5UcmFuc2FjdGlvblNwZWMuYW5ub3RhdGlvbnMpIGFuZFxuW2VmZmVjdHNdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jc3RhdGUuVHJhbnNhY3Rpb25TcGVjLmVmZmVjdHMpLiBfQnV0XywgdGhpcyB0eXBlXG5vZiBmaWx0ZXIgcnVucyBldmVuIGlmIHRoZSB0cmFuc2FjdGlvbiBoYXMgZGlzYWJsZWQgcmVndWxhclxuW2ZpbHRlcmluZ10oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNzdGF0ZS5UcmFuc2FjdGlvblNwZWMuZmlsdGVyKSwgbWFraW5nIGl0IHN1aXRhYmxlXG5mb3IgZWZmZWN0cyB0aGF0IGRvbid0IG5lZWQgdG8gdG91Y2ggdGhlIGNoYW5nZXMgb3Igc2VsZWN0aW9uLFxuYnV0IGRvIHdhbnQgdG8gcHJvY2VzcyBldmVyeSB0cmFuc2FjdGlvbi5cblxuRXh0ZW5kZXJzIHJ1biBfYWZ0ZXJfIGZpbHRlcnMsIHdoZW4gYm90aCBhcmUgcHJlc2VudC5cbiovXG5FZGl0b3JTdGF0ZS50cmFuc2FjdGlvbkV4dGVuZGVyID0gdHJhbnNhY3Rpb25FeHRlbmRlcjtcbkNvbXBhcnRtZW50LnJlY29uZmlndXJlID0gLypAX19QVVJFX18qL1N0YXRlRWZmZWN0LmRlZmluZSgpO1xuXG4vKipcblV0aWxpdHkgZnVuY3Rpb24gZm9yIGNvbWJpbmluZyBiZWhhdmlvcnMgdG8gZmlsbCBpbiBhIGNvbmZpZ1xub2JqZWN0IGZyb20gYW4gYXJyYXkgb2YgcHJvdmlkZWQgY29uZmlncy4gYGRlZmF1bHRzYCBzaG91bGQgaG9sZFxuZGVmYXVsdCB2YWx1ZXMgZm9yIGFsbCBvcHRpb25hbCBmaWVsZHMgaW4gYENvbmZpZ2AuXG5cblRoZSBmdW5jdGlvbiB3aWxsLCBieSBkZWZhdWx0LCBlcnJvclxud2hlbiBhIGZpZWxkIGdldHMgdHdvIHZhbHVlcyB0aGF0IGFyZW4ndCBgPT09YC1lcXVhbCwgYnV0IHlvdSBjYW5cbnByb3ZpZGUgY29tYmluZSBmdW5jdGlvbnMgcGVyIGZpZWxkIHRvIGRvIHNvbWV0aGluZyBlbHNlLlxuKi9cbmZ1bmN0aW9uIGNvbWJpbmVDb25maWcoY29uZmlncywgZGVmYXVsdHMsIC8vIFNob3VsZCBob2xkIG9ubHkgdGhlIG9wdGlvbmFsIHByb3BlcnRpZXMgb2YgQ29uZmlnLCBidXQgSSBoYXZlbid0IG1hbmFnZWQgdG8gZXhwcmVzcyB0aGF0XG5jb21iaW5lID0ge30pIHtcbiAgICBsZXQgcmVzdWx0ID0ge307XG4gICAgZm9yIChsZXQgY29uZmlnIG9mIGNvbmZpZ3MpXG4gICAgICAgIGZvciAobGV0IGtleSBvZiBPYmplY3Qua2V5cyhjb25maWcpKSB7XG4gICAgICAgICAgICBsZXQgdmFsdWUgPSBjb25maWdba2V5XSwgY3VycmVudCA9IHJlc3VsdFtrZXldO1xuICAgICAgICAgICAgaWYgKGN1cnJlbnQgPT09IHVuZGVmaW5lZClcbiAgICAgICAgICAgICAgICByZXN1bHRba2V5XSA9IHZhbHVlO1xuICAgICAgICAgICAgZWxzZSBpZiAoY3VycmVudCA9PT0gdmFsdWUgfHwgdmFsdWUgPT09IHVuZGVmaW5lZCkgOyAvLyBObyBjb25mbGljdFxuICAgICAgICAgICAgZWxzZSBpZiAoT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwoY29tYmluZSwga2V5KSlcbiAgICAgICAgICAgICAgICByZXN1bHRba2V5XSA9IGNvbWJpbmVba2V5XShjdXJyZW50LCB2YWx1ZSk7XG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQ29uZmlnIG1lcmdlIGNvbmZsaWN0IGZvciBmaWVsZCBcIiArIGtleSk7XG4gICAgICAgIH1cbiAgICBmb3IgKGxldCBrZXkgaW4gZGVmYXVsdHMpXG4gICAgICAgIGlmIChyZXN1bHRba2V5XSA9PT0gdW5kZWZpbmVkKVxuICAgICAgICAgICAgcmVzdWx0W2tleV0gPSBkZWZhdWx0c1trZXldO1xuICAgIHJldHVybiByZXN1bHQ7XG59XG5cbi8qKlxuRWFjaCByYW5nZSBpcyBhc3NvY2lhdGVkIHdpdGggYSB2YWx1ZSwgd2hpY2ggbXVzdCBpbmhlcml0IGZyb21cbnRoaXMgY2xhc3MuXG4qL1xuY2xhc3MgUmFuZ2VWYWx1ZSB7XG4gICAgLyoqXG4gICAgQ29tcGFyZSB0aGlzIHZhbHVlIHdpdGggYW5vdGhlciB2YWx1ZS4gVXNlZCB3aGVuIGNvbXBhcmluZ1xuICAgIHJhbmdlc2V0cy4gVGhlIGRlZmF1bHQgaW1wbGVtZW50YXRpb24gY29tcGFyZXMgYnkgaWRlbnRpdHkuXG4gICAgVW5sZXNzIHlvdSBhcmUgb25seSBjcmVhdGluZyBhIGZpeGVkIG51bWJlciBvZiB1bmlxdWUgaW5zdGFuY2VzXG4gICAgb2YgeW91ciB2YWx1ZSB0eXBlLCBpdCBpcyBhIGdvb2QgaWRlYSB0byBpbXBsZW1lbnQgdGhpc1xuICAgIHByb3Blcmx5LlxuICAgICovXG4gICAgZXEob3RoZXIpIHsgcmV0dXJuIHRoaXMgPT0gb3RoZXI7IH1cbiAgICAvKipcbiAgICBDcmVhdGUgYSBbcmFuZ2VdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jc3RhdGUuUmFuZ2UpIHdpdGggdGhpcyB2YWx1ZS5cbiAgICAqL1xuICAgIHJhbmdlKGZyb20sIHRvID0gZnJvbSkgeyByZXR1cm4gUmFuZ2UuY3JlYXRlKGZyb20sIHRvLCB0aGlzKTsgfVxufVxuUmFuZ2VWYWx1ZS5wcm90b3R5cGUuc3RhcnRTaWRlID0gUmFuZ2VWYWx1ZS5wcm90b3R5cGUuZW5kU2lkZSA9IDA7XG5SYW5nZVZhbHVlLnByb3RvdHlwZS5wb2ludCA9IGZhbHNlO1xuUmFuZ2VWYWx1ZS5wcm90b3R5cGUubWFwTW9kZSA9IE1hcE1vZGUuVHJhY2tEZWw7XG5mdW5jdGlvbiBjbXBWYWwoYSwgYikge1xuICAgIHJldHVybiBhID09IGIgfHwgYS5jb25zdHJ1Y3RvciA9PSBiLmNvbnN0cnVjdG9yICYmIGEuZXEoYik7XG59XG4vKipcbkEgcmFuZ2UgYXNzb2NpYXRlcyBhIHZhbHVlIHdpdGggYSByYW5nZSBvZiBwb3NpdGlvbnMuXG4qL1xuY2xhc3MgUmFuZ2Uge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8qKlxuICAgIFRoZSByYW5nZSdzIHN0YXJ0IHBvc2l0aW9uLlxuICAgICovXG4gICAgZnJvbSwgXG4gICAgLyoqXG4gICAgSXRzIGVuZCBwb3NpdGlvbi5cbiAgICAqL1xuICAgIHRvLCBcbiAgICAvKipcbiAgICBUaGUgdmFsdWUgYXNzb2NpYXRlZCB3aXRoIHRoaXMgcmFuZ2UuXG4gICAgKi9cbiAgICB2YWx1ZSkge1xuICAgICAgICB0aGlzLmZyb20gPSBmcm9tO1xuICAgICAgICB0aGlzLnRvID0gdG87XG4gICAgICAgIHRoaXMudmFsdWUgPSB2YWx1ZTtcbiAgICB9XG4gICAgLyoqXG4gICAgQGludGVybmFsXG4gICAgKi9cbiAgICBzdGF0aWMgY3JlYXRlKGZyb20sIHRvLCB2YWx1ZSkge1xuICAgICAgICByZXR1cm4gbmV3IFJhbmdlKGZyb20sIHRvLCB2YWx1ZSk7XG4gICAgfVxufVxuZnVuY3Rpb24gY21wUmFuZ2UoYSwgYikge1xuICAgIHJldHVybiBhLmZyb20gLSBiLmZyb20gfHwgYS52YWx1ZS5zdGFydFNpZGUgLSBiLnZhbHVlLnN0YXJ0U2lkZTtcbn1cbmNsYXNzIENodW5rIHtcbiAgICBjb25zdHJ1Y3Rvcihmcm9tLCB0bywgdmFsdWUsIFxuICAgIC8vIENodW5rcyBhcmUgbWFya2VkIHdpdGggdGhlIGxhcmdlc3QgcG9pbnQgdGhhdCBvY2N1cnNcbiAgICAvLyBpbiB0aGVtIChvciAtMSBmb3Igbm8gcG9pbnRzKSwgc28gdGhhdCBzY2FucyB0aGF0IGFyZVxuICAgIC8vIG9ubHkgaW50ZXJlc3RlZCBpbiBwb2ludHMgKHN1Y2ggYXMgdGhlXG4gICAgLy8gaGVpZ2h0bWFwLXJlbGF0ZWQgbG9naWMpIGNhbiBza2lwIHJhbmdlLW9ubHkgY2h1bmtzLlxuICAgIG1heFBvaW50KSB7XG4gICAgICAgIHRoaXMuZnJvbSA9IGZyb207XG4gICAgICAgIHRoaXMudG8gPSB0bztcbiAgICAgICAgdGhpcy52YWx1ZSA9IHZhbHVlO1xuICAgICAgICB0aGlzLm1heFBvaW50ID0gbWF4UG9pbnQ7XG4gICAgfVxuICAgIGdldCBsZW5ndGgoKSB7IHJldHVybiB0aGlzLnRvW3RoaXMudG8ubGVuZ3RoIC0gMV07IH1cbiAgICAvLyBGaW5kIHRoZSBpbmRleCBvZiB0aGUgZ2l2ZW4gcG9zaXRpb24gYW5kIHNpZGUuIFVzZSB0aGUgcmFuZ2VzJ1xuICAgIC8vIGBmcm9tYCBwb3Mgd2hlbiBgZW5kID09IGZhbHNlYCwgYHRvYCB3aGVuIGBlbmQgPT0gdHJ1ZWAuXG4gICAgZmluZEluZGV4KHBvcywgc2lkZSwgZW5kLCBzdGFydEF0ID0gMCkge1xuICAgICAgICBsZXQgYXJyID0gZW5kID8gdGhpcy50byA6IHRoaXMuZnJvbTtcbiAgICAgICAgZm9yIChsZXQgbG8gPSBzdGFydEF0LCBoaSA9IGFyci5sZW5ndGg7Oykge1xuICAgICAgICAgICAgaWYgKGxvID09IGhpKVxuICAgICAgICAgICAgICAgIHJldHVybiBsbztcbiAgICAgICAgICAgIGxldCBtaWQgPSAobG8gKyBoaSkgPj4gMTtcbiAgICAgICAgICAgIGxldCBkaWZmID0gYXJyW21pZF0gLSBwb3MgfHwgKGVuZCA/IHRoaXMudmFsdWVbbWlkXS5lbmRTaWRlIDogdGhpcy52YWx1ZVttaWRdLnN0YXJ0U2lkZSkgLSBzaWRlO1xuICAgICAgICAgICAgaWYgKG1pZCA9PSBsbylcbiAgICAgICAgICAgICAgICByZXR1cm4gZGlmZiA+PSAwID8gbG8gOiBoaTtcbiAgICAgICAgICAgIGlmIChkaWZmID49IDApXG4gICAgICAgICAgICAgICAgaGkgPSBtaWQ7XG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgbG8gPSBtaWQgKyAxO1xuICAgICAgICB9XG4gICAgfVxuICAgIGJldHdlZW4ob2Zmc2V0LCBmcm9tLCB0bywgZikge1xuICAgICAgICBmb3IgKGxldCBpID0gdGhpcy5maW5kSW5kZXgoZnJvbSwgLTEwMDAwMDAwMDAgLyogQy5GYXIgKi8sIHRydWUpLCBlID0gdGhpcy5maW5kSW5kZXgodG8sIDEwMDAwMDAwMDAgLyogQy5GYXIgKi8sIGZhbHNlLCBpKTsgaSA8IGU7IGkrKylcbiAgICAgICAgICAgIGlmIChmKHRoaXMuZnJvbVtpXSArIG9mZnNldCwgdGhpcy50b1tpXSArIG9mZnNldCwgdGhpcy52YWx1ZVtpXSkgPT09IGZhbHNlKVxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgbWFwKG9mZnNldCwgY2hhbmdlcykge1xuICAgICAgICBsZXQgdmFsdWUgPSBbXSwgZnJvbSA9IFtdLCB0byA9IFtdLCBuZXdQb3MgPSAtMSwgbWF4UG9pbnQgPSAtMTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLnZhbHVlLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBsZXQgdmFsID0gdGhpcy52YWx1ZVtpXSwgY3VyRnJvbSA9IHRoaXMuZnJvbVtpXSArIG9mZnNldCwgY3VyVG8gPSB0aGlzLnRvW2ldICsgb2Zmc2V0LCBuZXdGcm9tLCBuZXdUbztcbiAgICAgICAgICAgIGlmIChjdXJGcm9tID09IGN1clRvKSB7XG4gICAgICAgICAgICAgICAgbGV0IG1hcHBlZCA9IGNoYW5nZXMubWFwUG9zKGN1ckZyb20sIHZhbC5zdGFydFNpZGUsIHZhbC5tYXBNb2RlKTtcbiAgICAgICAgICAgICAgICBpZiAobWFwcGVkID09IG51bGwpXG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIG5ld0Zyb20gPSBuZXdUbyA9IG1hcHBlZDtcbiAgICAgICAgICAgICAgICBpZiAodmFsLnN0YXJ0U2lkZSAhPSB2YWwuZW5kU2lkZSkge1xuICAgICAgICAgICAgICAgICAgICBuZXdUbyA9IGNoYW5nZXMubWFwUG9zKGN1ckZyb20sIHZhbC5lbmRTaWRlKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG5ld1RvIDwgbmV3RnJvbSlcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIG5ld0Zyb20gPSBjaGFuZ2VzLm1hcFBvcyhjdXJGcm9tLCB2YWwuc3RhcnRTaWRlKTtcbiAgICAgICAgICAgICAgICBuZXdUbyA9IGNoYW5nZXMubWFwUG9zKGN1clRvLCB2YWwuZW5kU2lkZSk7XG4gICAgICAgICAgICAgICAgaWYgKG5ld0Zyb20gPiBuZXdUbyB8fCBuZXdGcm9tID09IG5ld1RvICYmIHZhbC5zdGFydFNpZGUgPiAwICYmIHZhbC5lbmRTaWRlIDw9IDApXG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKChuZXdUbyAtIG5ld0Zyb20gfHwgdmFsLmVuZFNpZGUgLSB2YWwuc3RhcnRTaWRlKSA8IDApXG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICBpZiAobmV3UG9zIDwgMClcbiAgICAgICAgICAgICAgICBuZXdQb3MgPSBuZXdGcm9tO1xuICAgICAgICAgICAgaWYgKHZhbC5wb2ludClcbiAgICAgICAgICAgICAgICBtYXhQb2ludCA9IE1hdGgubWF4KG1heFBvaW50LCBuZXdUbyAtIG5ld0Zyb20pO1xuICAgICAgICAgICAgdmFsdWUucHVzaCh2YWwpO1xuICAgICAgICAgICAgZnJvbS5wdXNoKG5ld0Zyb20gLSBuZXdQb3MpO1xuICAgICAgICAgICAgdG8ucHVzaChuZXdUbyAtIG5ld1Bvcyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHsgbWFwcGVkOiB2YWx1ZS5sZW5ndGggPyBuZXcgQ2h1bmsoZnJvbSwgdG8sIHZhbHVlLCBtYXhQb2ludCkgOiBudWxsLCBwb3M6IG5ld1BvcyB9O1xuICAgIH1cbn1cbi8qKlxuQSByYW5nZSBzZXQgc3RvcmVzIGEgY29sbGVjdGlvbiBvZiBbcmFuZ2VzXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI3N0YXRlLlJhbmdlKSBpbiBhXG53YXkgdGhhdCBtYWtlcyB0aGVtIGVmZmljaWVudCB0byBbbWFwXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI3N0YXRlLlJhbmdlU2V0Lm1hcCkgYW5kXG5bdXBkYXRlXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI3N0YXRlLlJhbmdlU2V0LnVwZGF0ZSkuIFRoaXMgaXMgYW4gaW1tdXRhYmxlIGRhdGFcbnN0cnVjdHVyZS5cbiovXG5jbGFzcyBSYW5nZVNldCB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgLyoqXG4gICAgQGludGVybmFsXG4gICAgKi9cbiAgICBjaHVua1BvcywgXG4gICAgLyoqXG4gICAgQGludGVybmFsXG4gICAgKi9cbiAgICBjaHVuaywgXG4gICAgLyoqXG4gICAgQGludGVybmFsXG4gICAgKi9cbiAgICBuZXh0TGF5ZXIsIFxuICAgIC8qKlxuICAgIEBpbnRlcm5hbFxuICAgICovXG4gICAgbWF4UG9pbnQpIHtcbiAgICAgICAgdGhpcy5jaHVua1BvcyA9IGNodW5rUG9zO1xuICAgICAgICB0aGlzLmNodW5rID0gY2h1bms7XG4gICAgICAgIHRoaXMubmV4dExheWVyID0gbmV4dExheWVyO1xuICAgICAgICB0aGlzLm1heFBvaW50ID0gbWF4UG9pbnQ7XG4gICAgfVxuICAgIC8qKlxuICAgIEBpbnRlcm5hbFxuICAgICovXG4gICAgc3RhdGljIGNyZWF0ZShjaHVua1BvcywgY2h1bmssIG5leHRMYXllciwgbWF4UG9pbnQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBSYW5nZVNldChjaHVua1BvcywgY2h1bmssIG5leHRMYXllciwgbWF4UG9pbnQpO1xuICAgIH1cbiAgICAvKipcbiAgICBAaW50ZXJuYWxcbiAgICAqL1xuICAgIGdldCBsZW5ndGgoKSB7XG4gICAgICAgIGxldCBsYXN0ID0gdGhpcy5jaHVuay5sZW5ndGggLSAxO1xuICAgICAgICByZXR1cm4gbGFzdCA8IDAgPyAwIDogTWF0aC5tYXgodGhpcy5jaHVua0VuZChsYXN0KSwgdGhpcy5uZXh0TGF5ZXIubGVuZ3RoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgVGhlIG51bWJlciBvZiByYW5nZXMgaW4gdGhlIHNldC5cbiAgICAqL1xuICAgIGdldCBzaXplKCkge1xuICAgICAgICBpZiAodGhpcy5pc0VtcHR5KVxuICAgICAgICAgICAgcmV0dXJuIDA7XG4gICAgICAgIGxldCBzaXplID0gdGhpcy5uZXh0TGF5ZXIuc2l6ZTtcbiAgICAgICAgZm9yIChsZXQgY2h1bmsgb2YgdGhpcy5jaHVuaylcbiAgICAgICAgICAgIHNpemUgKz0gY2h1bmsudmFsdWUubGVuZ3RoO1xuICAgICAgICByZXR1cm4gc2l6ZTtcbiAgICB9XG4gICAgLyoqXG4gICAgQGludGVybmFsXG4gICAgKi9cbiAgICBjaHVua0VuZChpbmRleCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jaHVua1Bvc1tpbmRleF0gKyB0aGlzLmNodW5rW2luZGV4XS5sZW5ndGg7XG4gICAgfVxuICAgIC8qKlxuICAgIFVwZGF0ZSB0aGUgcmFuZ2Ugc2V0LCBvcHRpb25hbGx5IGFkZGluZyBuZXcgcmFuZ2VzIG9yIGZpbHRlcmluZ1xuICAgIG91dCBleGlzdGluZyBvbmVzLlxuICAgIFxuICAgIChOb3RlOiBUaGUgdHlwZSBwYXJhbWV0ZXIgaXMganVzdCB0aGVyZSBhcyBhIGtsdWRnZSB0byB3b3JrXG4gICAgYXJvdW5kIFR5cGVTY3JpcHQgdmFyaWFuY2UgaXNzdWVzIHRoYXQgcHJldmVudGVkIGBSYW5nZVNldDxYPmBcbiAgICBmcm9tIGJlaW5nIGEgc3VidHlwZSBvZiBgUmFuZ2VTZXQ8WT5gIHdoZW4gYFhgIGlzIGEgc3VidHlwZSBvZlxuICAgIGBZYC4pXG4gICAgKi9cbiAgICB1cGRhdGUodXBkYXRlU3BlYykge1xuICAgICAgICBsZXQgeyBhZGQgPSBbXSwgc29ydCA9IGZhbHNlLCBmaWx0ZXJGcm9tID0gMCwgZmlsdGVyVG8gPSB0aGlzLmxlbmd0aCB9ID0gdXBkYXRlU3BlYztcbiAgICAgICAgbGV0IGZpbHRlciA9IHVwZGF0ZVNwZWMuZmlsdGVyO1xuICAgICAgICBpZiAoYWRkLmxlbmd0aCA9PSAwICYmICFmaWx0ZXIpXG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgaWYgKHNvcnQpXG4gICAgICAgICAgICBhZGQgPSBhZGQuc2xpY2UoKS5zb3J0KGNtcFJhbmdlKTtcbiAgICAgICAgaWYgKHRoaXMuaXNFbXB0eSlcbiAgICAgICAgICAgIHJldHVybiBhZGQubGVuZ3RoID8gUmFuZ2VTZXQub2YoYWRkKSA6IHRoaXM7XG4gICAgICAgIGxldCBjdXIgPSBuZXcgTGF5ZXJDdXJzb3IodGhpcywgbnVsbCwgLTEpLmdvdG8oMCksIGkgPSAwLCBzcGlsbCA9IFtdO1xuICAgICAgICBsZXQgYnVpbGRlciA9IG5ldyBSYW5nZVNldEJ1aWxkZXIoKTtcbiAgICAgICAgd2hpbGUgKGN1ci52YWx1ZSB8fCBpIDwgYWRkLmxlbmd0aCkge1xuICAgICAgICAgICAgaWYgKGkgPCBhZGQubGVuZ3RoICYmIChjdXIuZnJvbSAtIGFkZFtpXS5mcm9tIHx8IGN1ci5zdGFydFNpZGUgLSBhZGRbaV0udmFsdWUuc3RhcnRTaWRlKSA+PSAwKSB7XG4gICAgICAgICAgICAgICAgbGV0IHJhbmdlID0gYWRkW2krK107XG4gICAgICAgICAgICAgICAgaWYgKCFidWlsZGVyLmFkZElubmVyKHJhbmdlLmZyb20sIHJhbmdlLnRvLCByYW5nZS52YWx1ZSkpXG4gICAgICAgICAgICAgICAgICAgIHNwaWxsLnB1c2gocmFuZ2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY3VyLnJhbmdlSW5kZXggPT0gMSAmJiBjdXIuY2h1bmtJbmRleCA8IHRoaXMuY2h1bmsubGVuZ3RoICYmXG4gICAgICAgICAgICAgICAgKGkgPT0gYWRkLmxlbmd0aCB8fCB0aGlzLmNodW5rRW5kKGN1ci5jaHVua0luZGV4KSA8IGFkZFtpXS5mcm9tKSAmJlxuICAgICAgICAgICAgICAgICghZmlsdGVyIHx8IGZpbHRlckZyb20gPiB0aGlzLmNodW5rRW5kKGN1ci5jaHVua0luZGV4KSB8fCBmaWx0ZXJUbyA8IHRoaXMuY2h1bmtQb3NbY3VyLmNodW5rSW5kZXhdKSAmJlxuICAgICAgICAgICAgICAgIGJ1aWxkZXIuYWRkQ2h1bmsodGhpcy5jaHVua1Bvc1tjdXIuY2h1bmtJbmRleF0sIHRoaXMuY2h1bmtbY3VyLmNodW5rSW5kZXhdKSkge1xuICAgICAgICAgICAgICAgIGN1ci5uZXh0Q2h1bmsoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGlmICghZmlsdGVyIHx8IGZpbHRlckZyb20gPiBjdXIudG8gfHwgZmlsdGVyVG8gPCBjdXIuZnJvbSB8fCBmaWx0ZXIoY3VyLmZyb20sIGN1ci50bywgY3VyLnZhbHVlKSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWJ1aWxkZXIuYWRkSW5uZXIoY3VyLmZyb20sIGN1ci50bywgY3VyLnZhbHVlKSlcbiAgICAgICAgICAgICAgICAgICAgICAgIHNwaWxsLnB1c2goUmFuZ2UuY3JlYXRlKGN1ci5mcm9tLCBjdXIudG8sIGN1ci52YWx1ZSkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjdXIubmV4dCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBidWlsZGVyLmZpbmlzaElubmVyKHRoaXMubmV4dExheWVyLmlzRW1wdHkgJiYgIXNwaWxsLmxlbmd0aCA/IFJhbmdlU2V0LmVtcHR5XG4gICAgICAgICAgICA6IHRoaXMubmV4dExheWVyLnVwZGF0ZSh7IGFkZDogc3BpbGwsIGZpbHRlciwgZmlsdGVyRnJvbSwgZmlsdGVyVG8gfSkpO1xuICAgIH1cbiAgICAvKipcbiAgICBNYXAgdGhpcyByYW5nZSBzZXQgdGhyb3VnaCBhIHNldCBvZiBjaGFuZ2VzLCByZXR1cm4gdGhlIG5ldyBzZXQuXG4gICAgKi9cbiAgICBtYXAoY2hhbmdlcykge1xuICAgICAgICBpZiAoY2hhbmdlcy5lbXB0eSB8fCB0aGlzLmlzRW1wdHkpXG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgbGV0IGNodW5rcyA9IFtdLCBjaHVua1BvcyA9IFtdLCBtYXhQb2ludCA9IC0xO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuY2h1bmsubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGxldCBzdGFydCA9IHRoaXMuY2h1bmtQb3NbaV0sIGNodW5rID0gdGhpcy5jaHVua1tpXTtcbiAgICAgICAgICAgIGxldCB0b3VjaCA9IGNoYW5nZXMudG91Y2hlc1JhbmdlKHN0YXJ0LCBzdGFydCArIGNodW5rLmxlbmd0aCk7XG4gICAgICAgICAgICBpZiAodG91Y2ggPT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgbWF4UG9pbnQgPSBNYXRoLm1heChtYXhQb2ludCwgY2h1bmsubWF4UG9pbnQpO1xuICAgICAgICAgICAgICAgIGNodW5rcy5wdXNoKGNodW5rKTtcbiAgICAgICAgICAgICAgICBjaHVua1Bvcy5wdXNoKGNoYW5nZXMubWFwUG9zKHN0YXJ0KSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICh0b3VjaCA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgIGxldCB7IG1hcHBlZCwgcG9zIH0gPSBjaHVuay5tYXAoc3RhcnQsIGNoYW5nZXMpO1xuICAgICAgICAgICAgICAgIGlmIChtYXBwZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgbWF4UG9pbnQgPSBNYXRoLm1heChtYXhQb2ludCwgbWFwcGVkLm1heFBvaW50KTtcbiAgICAgICAgICAgICAgICAgICAgY2h1bmtzLnB1c2gobWFwcGVkKTtcbiAgICAgICAgICAgICAgICAgICAgY2h1bmtQb3MucHVzaChwb3MpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBsZXQgbmV4dCA9IHRoaXMubmV4dExheWVyLm1hcChjaGFuZ2VzKTtcbiAgICAgICAgcmV0dXJuIGNodW5rcy5sZW5ndGggPT0gMCA/IG5leHQgOiBuZXcgUmFuZ2VTZXQoY2h1bmtQb3MsIGNodW5rcywgbmV4dCB8fCBSYW5nZVNldC5lbXB0eSwgbWF4UG9pbnQpO1xuICAgIH1cbiAgICAvKipcbiAgICBJdGVyYXRlIG92ZXIgdGhlIHJhbmdlcyB0aGF0IHRvdWNoIHRoZSByZWdpb24gYGZyb21gIHRvIGB0b2AsXG4gICAgY2FsbGluZyBgZmAgZm9yIGVhY2guIFRoZXJlIGlzIG5vIGd1YXJhbnRlZSB0aGF0IHRoZSByYW5nZXMgd2lsbFxuICAgIGJlIHJlcG9ydGVkIGluIGFueSBzcGVjaWZpYyBvcmRlci4gV2hlbiB0aGUgY2FsbGJhY2sgcmV0dXJuc1xuICAgIGBmYWxzZWAsIGl0ZXJhdGlvbiBzdG9wcy5cbiAgICAqL1xuICAgIGJldHdlZW4oZnJvbSwgdG8sIGYpIHtcbiAgICAgICAgaWYgKHRoaXMuaXNFbXB0eSlcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmNodW5rLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBsZXQgc3RhcnQgPSB0aGlzLmNodW5rUG9zW2ldLCBjaHVuayA9IHRoaXMuY2h1bmtbaV07XG4gICAgICAgICAgICBpZiAodG8gPj0gc3RhcnQgJiYgZnJvbSA8PSBzdGFydCArIGNodW5rLmxlbmd0aCAmJlxuICAgICAgICAgICAgICAgIGNodW5rLmJldHdlZW4oc3RhcnQsIGZyb20gLSBzdGFydCwgdG8gLSBzdGFydCwgZikgPT09IGZhbHNlKVxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLm5leHRMYXllci5iZXR3ZWVuKGZyb20sIHRvLCBmKTtcbiAgICB9XG4gICAgLyoqXG4gICAgSXRlcmF0ZSBvdmVyIHRoZSByYW5nZXMgaW4gdGhpcyBzZXQsIGluIG9yZGVyLCBpbmNsdWRpbmcgYWxsXG4gICAgcmFuZ2VzIHRoYXQgZW5kIGF0IG9yIGFmdGVyIGBmcm9tYC5cbiAgICAqL1xuICAgIGl0ZXIoZnJvbSA9IDApIHtcbiAgICAgICAgcmV0dXJuIEhlYXBDdXJzb3IuZnJvbShbdGhpc10pLmdvdG8oZnJvbSk7XG4gICAgfVxuICAgIC8qKlxuICAgIEBpbnRlcm5hbFxuICAgICovXG4gICAgZ2V0IGlzRW1wdHkoKSB7IHJldHVybiB0aGlzLm5leHRMYXllciA9PSB0aGlzOyB9XG4gICAgLyoqXG4gICAgSXRlcmF0ZSBvdmVyIHRoZSByYW5nZXMgaW4gYSBjb2xsZWN0aW9uIG9mIHNldHMsIGluIG9yZGVyLFxuICAgIHN0YXJ0aW5nIGZyb20gYGZyb21gLlxuICAgICovXG4gICAgc3RhdGljIGl0ZXIoc2V0cywgZnJvbSA9IDApIHtcbiAgICAgICAgcmV0dXJuIEhlYXBDdXJzb3IuZnJvbShzZXRzKS5nb3RvKGZyb20pO1xuICAgIH1cbiAgICAvKipcbiAgICBJdGVyYXRlIG92ZXIgdHdvIGdyb3VwcyBvZiBzZXRzLCBjYWxsaW5nIG1ldGhvZHMgb24gYGNvbXBhcmF0b3JgXG4gICAgdG8gbm90aWZ5IGl0IG9mIHBvc3NpYmxlIGRpZmZlcmVuY2VzLlxuICAgICovXG4gICAgc3RhdGljIGNvbXBhcmUob2xkU2V0cywgbmV3U2V0cywgXG4gICAgLyoqXG4gICAgVGhpcyBpbmRpY2F0ZXMgaG93IHRoZSB1bmRlcmx5aW5nIGRhdGEgY2hhbmdlZCBiZXR3ZWVuIHRoZXNlXG4gICAgcmFuZ2VzLCBhbmQgaXMgbmVlZGVkIHRvIHN5bmNocm9uaXplIHRoZSBpdGVyYXRpb24uXG4gICAgKi9cbiAgICB0ZXh0RGlmZiwgY29tcGFyYXRvciwgXG4gICAgLyoqXG4gICAgQ2FuIGJlIHVzZWQgdG8gaWdub3JlIGFsbCBub24tcG9pbnQgcmFuZ2VzLCBhbmQgcG9pbnRzIGJlbG93XG4gICAgdGhlIGdpdmVuIHNpemUuIFdoZW4gLTEsIGFsbCByYW5nZXMgYXJlIGNvbXBhcmVkLlxuICAgICovXG4gICAgbWluUG9pbnRTaXplID0gLTEpIHtcbiAgICAgICAgbGV0IGEgPSBvbGRTZXRzLmZpbHRlcihzZXQgPT4gc2V0Lm1heFBvaW50ID4gMCB8fCAhc2V0LmlzRW1wdHkgJiYgc2V0Lm1heFBvaW50ID49IG1pblBvaW50U2l6ZSk7XG4gICAgICAgIGxldCBiID0gbmV3U2V0cy5maWx0ZXIoc2V0ID0+IHNldC5tYXhQb2ludCA+IDAgfHwgIXNldC5pc0VtcHR5ICYmIHNldC5tYXhQb2ludCA+PSBtaW5Qb2ludFNpemUpO1xuICAgICAgICBsZXQgc2hhcmVkQ2h1bmtzID0gZmluZFNoYXJlZENodW5rcyhhLCBiLCB0ZXh0RGlmZik7XG4gICAgICAgIGxldCBzaWRlQSA9IG5ldyBTcGFuQ3Vyc29yKGEsIHNoYXJlZENodW5rcywgbWluUG9pbnRTaXplKTtcbiAgICAgICAgbGV0IHNpZGVCID0gbmV3IFNwYW5DdXJzb3IoYiwgc2hhcmVkQ2h1bmtzLCBtaW5Qb2ludFNpemUpO1xuICAgICAgICB0ZXh0RGlmZi5pdGVyR2FwcygoZnJvbUEsIGZyb21CLCBsZW5ndGgpID0+IGNvbXBhcmUoc2lkZUEsIGZyb21BLCBzaWRlQiwgZnJvbUIsIGxlbmd0aCwgY29tcGFyYXRvcikpO1xuICAgICAgICBpZiAodGV4dERpZmYuZW1wdHkgJiYgdGV4dERpZmYubGVuZ3RoID09IDApXG4gICAgICAgICAgICBjb21wYXJlKHNpZGVBLCAwLCBzaWRlQiwgMCwgMCwgY29tcGFyYXRvcik7XG4gICAgfVxuICAgIC8qKlxuICAgIENvbXBhcmUgdGhlIGNvbnRlbnRzIG9mIHR3byBncm91cHMgb2YgcmFuZ2Ugc2V0cywgcmV0dXJuaW5nIHRydWVcbiAgICBpZiB0aGV5IGFyZSBlcXVpdmFsZW50IGluIHRoZSBnaXZlbiByYW5nZS5cbiAgICAqL1xuICAgIHN0YXRpYyBlcShvbGRTZXRzLCBuZXdTZXRzLCBmcm9tID0gMCwgdG8pIHtcbiAgICAgICAgaWYgKHRvID09IG51bGwpXG4gICAgICAgICAgICB0byA9IDEwMDAwMDAwMDAgLyogQy5GYXIgKi8gLSAxO1xuICAgICAgICBsZXQgYSA9IG9sZFNldHMuZmlsdGVyKHNldCA9PiAhc2V0LmlzRW1wdHkgJiYgbmV3U2V0cy5pbmRleE9mKHNldCkgPCAwKTtcbiAgICAgICAgbGV0IGIgPSBuZXdTZXRzLmZpbHRlcihzZXQgPT4gIXNldC5pc0VtcHR5ICYmIG9sZFNldHMuaW5kZXhPZihzZXQpIDwgMCk7XG4gICAgICAgIGlmIChhLmxlbmd0aCAhPSBiLmxlbmd0aClcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgaWYgKCFhLmxlbmd0aClcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICBsZXQgc2hhcmVkQ2h1bmtzID0gZmluZFNoYXJlZENodW5rcyhhLCBiKTtcbiAgICAgICAgbGV0IHNpZGVBID0gbmV3IFNwYW5DdXJzb3IoYSwgc2hhcmVkQ2h1bmtzLCAwKS5nb3RvKGZyb20pLCBzaWRlQiA9IG5ldyBTcGFuQ3Vyc29yKGIsIHNoYXJlZENodW5rcywgMCkuZ290byhmcm9tKTtcbiAgICAgICAgZm9yICg7Oykge1xuICAgICAgICAgICAgaWYgKHNpZGVBLnRvICE9IHNpZGVCLnRvIHx8XG4gICAgICAgICAgICAgICAgIXNhbWVWYWx1ZXMoc2lkZUEuYWN0aXZlLCBzaWRlQi5hY3RpdmUpIHx8XG4gICAgICAgICAgICAgICAgc2lkZUEucG9pbnQgJiYgKCFzaWRlQi5wb2ludCB8fCAhY21wVmFsKHNpZGVBLnBvaW50LCBzaWRlQi5wb2ludCkpKVxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIGlmIChzaWRlQS50byA+IHRvKVxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgc2lkZUEubmV4dCgpO1xuICAgICAgICAgICAgc2lkZUIubmV4dCgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgIEl0ZXJhdGUgb3ZlciBhIGdyb3VwIG9mIHJhbmdlIHNldHMgYXQgdGhlIHNhbWUgdGltZSwgbm90aWZ5aW5nXG4gICAgdGhlIGl0ZXJhdG9yIGFib3V0IHRoZSByYW5nZXMgY292ZXJpbmcgZXZlcnkgZ2l2ZW4gcGllY2Ugb2ZcbiAgICBjb250ZW50LiBSZXR1cm5zIHRoZSBvcGVuIGNvdW50IChzZWVcbiAgICBbYFNwYW5JdGVyYXRvci5zcGFuYF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNzdGF0ZS5TcGFuSXRlcmF0b3Iuc3BhbikpIGF0IHRoZSBlbmRcbiAgICBvZiB0aGUgaXRlcmF0aW9uLlxuICAgICovXG4gICAgc3RhdGljIHNwYW5zKHNldHMsIGZyb20sIHRvLCBpdGVyYXRvciwgXG4gICAgLyoqXG4gICAgV2hlbiBnaXZlbiBhbmQgZ3JlYXRlciB0aGFuIC0xLCBvbmx5IHBvaW50cyBvZiBhdCBsZWFzdCB0aGlzXG4gICAgc2l6ZSBhcmUgdGFrZW4gaW50byBhY2NvdW50LlxuICAgICovXG4gICAgbWluUG9pbnRTaXplID0gLTEpIHtcbiAgICAgICAgbGV0IGN1cnNvciA9IG5ldyBTcGFuQ3Vyc29yKHNldHMsIG51bGwsIG1pblBvaW50U2l6ZSkuZ290byhmcm9tKSwgcG9zID0gZnJvbTtcbiAgICAgICAgbGV0IG9wZW5SYW5nZXMgPSBjdXJzb3Iub3BlblN0YXJ0O1xuICAgICAgICBmb3IgKDs7KSB7XG4gICAgICAgICAgICBsZXQgY3VyVG8gPSBNYXRoLm1pbihjdXJzb3IudG8sIHRvKTtcbiAgICAgICAgICAgIGlmIChjdXJzb3IucG9pbnQpIHtcbiAgICAgICAgICAgICAgICBsZXQgYWN0aXZlID0gY3Vyc29yLmFjdGl2ZUZvclBvaW50KGN1cnNvci50byk7XG4gICAgICAgICAgICAgICAgbGV0IG9wZW5Db3VudCA9IGN1cnNvci5wb2ludEZyb20gPCBmcm9tID8gYWN0aXZlLmxlbmd0aCArIDFcbiAgICAgICAgICAgICAgICAgICAgOiBjdXJzb3IucG9pbnQuc3RhcnRTaWRlIDwgMCA/IGFjdGl2ZS5sZW5ndGhcbiAgICAgICAgICAgICAgICAgICAgICAgIDogTWF0aC5taW4oYWN0aXZlLmxlbmd0aCwgb3BlblJhbmdlcyk7XG4gICAgICAgICAgICAgICAgaXRlcmF0b3IucG9pbnQocG9zLCBjdXJUbywgY3Vyc29yLnBvaW50LCBhY3RpdmUsIG9wZW5Db3VudCwgY3Vyc29yLnBvaW50UmFuayk7XG4gICAgICAgICAgICAgICAgb3BlblJhbmdlcyA9IE1hdGgubWluKGN1cnNvci5vcGVuRW5kKGN1clRvKSwgYWN0aXZlLmxlbmd0aCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjdXJUbyA+IHBvcykge1xuICAgICAgICAgICAgICAgIGl0ZXJhdG9yLnNwYW4ocG9zLCBjdXJUbywgY3Vyc29yLmFjdGl2ZSwgb3BlblJhbmdlcyk7XG4gICAgICAgICAgICAgICAgb3BlblJhbmdlcyA9IGN1cnNvci5vcGVuRW5kKGN1clRvKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChjdXJzb3IudG8gPiB0bylcbiAgICAgICAgICAgICAgICByZXR1cm4gb3BlblJhbmdlcyArIChjdXJzb3IucG9pbnQgJiYgY3Vyc29yLnRvID4gdG8gPyAxIDogMCk7XG4gICAgICAgICAgICBwb3MgPSBjdXJzb3IudG87XG4gICAgICAgICAgICBjdXJzb3IubmV4dCgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgIENyZWF0ZSBhIHJhbmdlIHNldCBmb3IgdGhlIGdpdmVuIHJhbmdlIG9yIGFycmF5IG9mIHJhbmdlcy4gQnlcbiAgICBkZWZhdWx0LCB0aGlzIGV4cGVjdHMgdGhlIHJhbmdlcyB0byBiZSBfc29ydGVkXyAoYnkgc3RhcnRcbiAgICBwb3NpdGlvbiBhbmQsIGlmIHR3byBzdGFydCBhdCB0aGUgc2FtZSBwb3NpdGlvbixcbiAgICBgdmFsdWUuc3RhcnRTaWRlYCkuIFlvdSBjYW4gcGFzcyBgdHJ1ZWAgYXMgc2Vjb25kIGFyZ3VtZW50IHRvXG4gICAgY2F1c2UgdGhlIG1ldGhvZCB0byBzb3J0IHRoZW0uXG4gICAgKi9cbiAgICBzdGF0aWMgb2YocmFuZ2VzLCBzb3J0ID0gZmFsc2UpIHtcbiAgICAgICAgbGV0IGJ1aWxkID0gbmV3IFJhbmdlU2V0QnVpbGRlcigpO1xuICAgICAgICBmb3IgKGxldCByYW5nZSBvZiByYW5nZXMgaW5zdGFuY2VvZiBSYW5nZSA/IFtyYW5nZXNdIDogc29ydCA/IGxhenlTb3J0KHJhbmdlcykgOiByYW5nZXMpXG4gICAgICAgICAgICBidWlsZC5hZGQocmFuZ2UuZnJvbSwgcmFuZ2UudG8sIHJhbmdlLnZhbHVlKTtcbiAgICAgICAgcmV0dXJuIGJ1aWxkLmZpbmlzaCgpO1xuICAgIH1cbiAgICAvKipcbiAgICBKb2luIGFuIGFycmF5IG9mIHJhbmdlIHNldHMgaW50byBhIHNpbmdsZSBzZXQuXG4gICAgKi9cbiAgICBzdGF0aWMgam9pbihzZXRzKSB7XG4gICAgICAgIGlmICghc2V0cy5sZW5ndGgpXG4gICAgICAgICAgICByZXR1cm4gUmFuZ2VTZXQuZW1wdHk7XG4gICAgICAgIGxldCByZXN1bHQgPSBzZXRzW3NldHMubGVuZ3RoIC0gMV07XG4gICAgICAgIGZvciAobGV0IGkgPSBzZXRzLmxlbmd0aCAtIDI7IGkgPj0gMDsgaS0tKSB7XG4gICAgICAgICAgICBmb3IgKGxldCBsYXllciA9IHNldHNbaV07IGxheWVyICE9IFJhbmdlU2V0LmVtcHR5OyBsYXllciA9IGxheWVyLm5leHRMYXllcilcbiAgICAgICAgICAgICAgICByZXN1bHQgPSBuZXcgUmFuZ2VTZXQobGF5ZXIuY2h1bmtQb3MsIGxheWVyLmNodW5rLCByZXN1bHQsIE1hdGgubWF4KGxheWVyLm1heFBvaW50LCByZXN1bHQubWF4UG9pbnQpKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cbn1cbi8qKlxuVGhlIGVtcHR5IHNldCBvZiByYW5nZXMuXG4qL1xuUmFuZ2VTZXQuZW1wdHkgPSAvKkBfX1BVUkVfXyovbmV3IFJhbmdlU2V0KFtdLCBbXSwgbnVsbCwgLTEpO1xuZnVuY3Rpb24gbGF6eVNvcnQocmFuZ2VzKSB7XG4gICAgaWYgKHJhbmdlcy5sZW5ndGggPiAxKVxuICAgICAgICBmb3IgKGxldCBwcmV2ID0gcmFuZ2VzWzBdLCBpID0gMTsgaSA8IHJhbmdlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgbGV0IGN1ciA9IHJhbmdlc1tpXTtcbiAgICAgICAgICAgIGlmIChjbXBSYW5nZShwcmV2LCBjdXIpID4gMClcbiAgICAgICAgICAgICAgICByZXR1cm4gcmFuZ2VzLnNsaWNlKCkuc29ydChjbXBSYW5nZSk7XG4gICAgICAgICAgICBwcmV2ID0gY3VyO1xuICAgICAgICB9XG4gICAgcmV0dXJuIHJhbmdlcztcbn1cblJhbmdlU2V0LmVtcHR5Lm5leHRMYXllciA9IFJhbmdlU2V0LmVtcHR5O1xuLyoqXG5BIHJhbmdlIHNldCBidWlsZGVyIGlzIGEgZGF0YSBzdHJ1Y3R1cmUgdGhhdCBoZWxwcyBidWlsZCB1cCBhXG5bcmFuZ2Ugc2V0XShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI3N0YXRlLlJhbmdlU2V0KSBkaXJlY3RseSwgd2l0aG91dCBmaXJzdCBhbGxvY2F0aW5nXG5hbiBhcnJheSBvZiBbYFJhbmdlYF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNzdGF0ZS5SYW5nZSkgb2JqZWN0cy5cbiovXG5jbGFzcyBSYW5nZVNldEJ1aWxkZXIge1xuICAgIGZpbmlzaENodW5rKG5ld0FycmF5cykge1xuICAgICAgICB0aGlzLmNodW5rcy5wdXNoKG5ldyBDaHVuayh0aGlzLmZyb20sIHRoaXMudG8sIHRoaXMudmFsdWUsIHRoaXMubWF4UG9pbnQpKTtcbiAgICAgICAgdGhpcy5jaHVua1Bvcy5wdXNoKHRoaXMuY2h1bmtTdGFydCk7XG4gICAgICAgIHRoaXMuY2h1bmtTdGFydCA9IC0xO1xuICAgICAgICB0aGlzLnNldE1heFBvaW50ID0gTWF0aC5tYXgodGhpcy5zZXRNYXhQb2ludCwgdGhpcy5tYXhQb2ludCk7XG4gICAgICAgIHRoaXMubWF4UG9pbnQgPSAtMTtcbiAgICAgICAgaWYgKG5ld0FycmF5cykge1xuICAgICAgICAgICAgdGhpcy5mcm9tID0gW107XG4gICAgICAgICAgICB0aGlzLnRvID0gW107XG4gICAgICAgICAgICB0aGlzLnZhbHVlID0gW107XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgQ3JlYXRlIGFuIGVtcHR5IGJ1aWxkZXIuXG4gICAgKi9cbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5jaHVua3MgPSBbXTtcbiAgICAgICAgdGhpcy5jaHVua1BvcyA9IFtdO1xuICAgICAgICB0aGlzLmNodW5rU3RhcnQgPSAtMTtcbiAgICAgICAgdGhpcy5sYXN0ID0gbnVsbDtcbiAgICAgICAgdGhpcy5sYXN0RnJvbSA9IC0xMDAwMDAwMDAwIC8qIEMuRmFyICovO1xuICAgICAgICB0aGlzLmxhc3RUbyA9IC0xMDAwMDAwMDAwIC8qIEMuRmFyICovO1xuICAgICAgICB0aGlzLmZyb20gPSBbXTtcbiAgICAgICAgdGhpcy50byA9IFtdO1xuICAgICAgICB0aGlzLnZhbHVlID0gW107XG4gICAgICAgIHRoaXMubWF4UG9pbnQgPSAtMTtcbiAgICAgICAgdGhpcy5zZXRNYXhQb2ludCA9IC0xO1xuICAgICAgICB0aGlzLm5leHRMYXllciA9IG51bGw7XG4gICAgfVxuICAgIC8qKlxuICAgIEFkZCBhIHJhbmdlLiBSYW5nZXMgc2hvdWxkIGJlIGFkZGVkIGluIHNvcnRlZCAoYnkgYGZyb21gIGFuZFxuICAgIGB2YWx1ZS5zdGFydFNpZGVgKSBvcmRlci5cbiAgICAqL1xuICAgIGFkZChmcm9tLCB0bywgdmFsdWUpIHtcbiAgICAgICAgaWYgKCF0aGlzLmFkZElubmVyKGZyb20sIHRvLCB2YWx1ZSkpXG4gICAgICAgICAgICAodGhpcy5uZXh0TGF5ZXIgfHwgKHRoaXMubmV4dExheWVyID0gbmV3IFJhbmdlU2V0QnVpbGRlcikpLmFkZChmcm9tLCB0bywgdmFsdWUpO1xuICAgIH1cbiAgICAvKipcbiAgICBAaW50ZXJuYWxcbiAgICAqL1xuICAgIGFkZElubmVyKGZyb20sIHRvLCB2YWx1ZSkge1xuICAgICAgICBsZXQgZGlmZiA9IGZyb20gLSB0aGlzLmxhc3RUbyB8fCB2YWx1ZS5zdGFydFNpZGUgLSB0aGlzLmxhc3QuZW5kU2lkZTtcbiAgICAgICAgaWYgKGRpZmYgPD0gMCAmJiAoZnJvbSAtIHRoaXMubGFzdEZyb20gfHwgdmFsdWUuc3RhcnRTaWRlIC0gdGhpcy5sYXN0LnN0YXJ0U2lkZSkgPCAwKVxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiUmFuZ2VzIG11c3QgYmUgYWRkZWQgc29ydGVkIGJ5IGBmcm9tYCBwb3NpdGlvbiBhbmQgYHN0YXJ0U2lkZWBcIik7XG4gICAgICAgIGlmIChkaWZmIDwgMClcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgaWYgKHRoaXMuZnJvbS5sZW5ndGggPT0gMjUwIC8qIEMuQ2h1bmtTaXplICovKVxuICAgICAgICAgICAgdGhpcy5maW5pc2hDaHVuayh0cnVlKTtcbiAgICAgICAgaWYgKHRoaXMuY2h1bmtTdGFydCA8IDApXG4gICAgICAgICAgICB0aGlzLmNodW5rU3RhcnQgPSBmcm9tO1xuICAgICAgICB0aGlzLmZyb20ucHVzaChmcm9tIC0gdGhpcy5jaHVua1N0YXJ0KTtcbiAgICAgICAgdGhpcy50by5wdXNoKHRvIC0gdGhpcy5jaHVua1N0YXJ0KTtcbiAgICAgICAgdGhpcy5sYXN0ID0gdmFsdWU7XG4gICAgICAgIHRoaXMubGFzdEZyb20gPSBmcm9tO1xuICAgICAgICB0aGlzLmxhc3RUbyA9IHRvO1xuICAgICAgICB0aGlzLnZhbHVlLnB1c2godmFsdWUpO1xuICAgICAgICBpZiAodmFsdWUucG9pbnQpXG4gICAgICAgICAgICB0aGlzLm1heFBvaW50ID0gTWF0aC5tYXgodGhpcy5tYXhQb2ludCwgdG8gLSBmcm9tKTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIC8qKlxuICAgIEBpbnRlcm5hbFxuICAgICovXG4gICAgYWRkQ2h1bmsoZnJvbSwgY2h1bmspIHtcbiAgICAgICAgaWYgKChmcm9tIC0gdGhpcy5sYXN0VG8gfHwgY2h1bmsudmFsdWVbMF0uc3RhcnRTaWRlIC0gdGhpcy5sYXN0LmVuZFNpZGUpIDwgMClcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgaWYgKHRoaXMuZnJvbS5sZW5ndGgpXG4gICAgICAgICAgICB0aGlzLmZpbmlzaENodW5rKHRydWUpO1xuICAgICAgICB0aGlzLnNldE1heFBvaW50ID0gTWF0aC5tYXgodGhpcy5zZXRNYXhQb2ludCwgY2h1bmsubWF4UG9pbnQpO1xuICAgICAgICB0aGlzLmNodW5rcy5wdXNoKGNodW5rKTtcbiAgICAgICAgdGhpcy5jaHVua1Bvcy5wdXNoKGZyb20pO1xuICAgICAgICBsZXQgbGFzdCA9IGNodW5rLnZhbHVlLmxlbmd0aCAtIDE7XG4gICAgICAgIHRoaXMubGFzdCA9IGNodW5rLnZhbHVlW2xhc3RdO1xuICAgICAgICB0aGlzLmxhc3RGcm9tID0gY2h1bmsuZnJvbVtsYXN0XSArIGZyb207XG4gICAgICAgIHRoaXMubGFzdFRvID0gY2h1bmsudG9bbGFzdF0gKyBmcm9tO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgLyoqXG4gICAgRmluaXNoIHRoZSByYW5nZSBzZXQuIFJldHVybnMgdGhlIG5ldyBzZXQuIFRoZSBidWlsZGVyIGNhbid0IGJlXG4gICAgdXNlZCBhbnltb3JlIGFmdGVyIHRoaXMgaGFzIGJlZW4gY2FsbGVkLlxuICAgICovXG4gICAgZmluaXNoKCkgeyByZXR1cm4gdGhpcy5maW5pc2hJbm5lcihSYW5nZVNldC5lbXB0eSk7IH1cbiAgICAvKipcbiAgICBAaW50ZXJuYWxcbiAgICAqL1xuICAgIGZpbmlzaElubmVyKG5leHQpIHtcbiAgICAgICAgaWYgKHRoaXMuZnJvbS5sZW5ndGgpXG4gICAgICAgICAgICB0aGlzLmZpbmlzaENodW5rKGZhbHNlKTtcbiAgICAgICAgaWYgKHRoaXMuY2h1bmtzLmxlbmd0aCA9PSAwKVxuICAgICAgICAgICAgcmV0dXJuIG5leHQ7XG4gICAgICAgIGxldCByZXN1bHQgPSBSYW5nZVNldC5jcmVhdGUodGhpcy5jaHVua1BvcywgdGhpcy5jaHVua3MsIHRoaXMubmV4dExheWVyID8gdGhpcy5uZXh0TGF5ZXIuZmluaXNoSW5uZXIobmV4dCkgOiBuZXh0LCB0aGlzLnNldE1heFBvaW50KTtcbiAgICAgICAgdGhpcy5mcm9tID0gbnVsbDsgLy8gTWFrZSBzdXJlIGZ1cnRoZXIgYGFkZGAgY2FsbHMgcHJvZHVjZSBlcnJvcnNcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG59XG5mdW5jdGlvbiBmaW5kU2hhcmVkQ2h1bmtzKGEsIGIsIHRleHREaWZmKSB7XG4gICAgbGV0IGluQSA9IG5ldyBNYXAoKTtcbiAgICBmb3IgKGxldCBzZXQgb2YgYSlcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzZXQuY2h1bmsubGVuZ3RoOyBpKyspXG4gICAgICAgICAgICBpZiAoc2V0LmNodW5rW2ldLm1heFBvaW50IDw9IDApXG4gICAgICAgICAgICAgICAgaW5BLnNldChzZXQuY2h1bmtbaV0sIHNldC5jaHVua1Bvc1tpXSk7XG4gICAgbGV0IHNoYXJlZCA9IG5ldyBTZXQoKTtcbiAgICBmb3IgKGxldCBzZXQgb2YgYilcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzZXQuY2h1bmsubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGxldCBrbm93biA9IGluQS5nZXQoc2V0LmNodW5rW2ldKTtcbiAgICAgICAgICAgIGlmIChrbm93biAhPSBudWxsICYmICh0ZXh0RGlmZiA/IHRleHREaWZmLm1hcFBvcyhrbm93bikgOiBrbm93bikgPT0gc2V0LmNodW5rUG9zW2ldICYmXG4gICAgICAgICAgICAgICAgISh0ZXh0RGlmZiA9PT0gbnVsbCB8fCB0ZXh0RGlmZiA9PT0gdm9pZCAwID8gdm9pZCAwIDogdGV4dERpZmYudG91Y2hlc1JhbmdlKGtub3duLCBrbm93biArIHNldC5jaHVua1tpXS5sZW5ndGgpKSlcbiAgICAgICAgICAgICAgICBzaGFyZWQuYWRkKHNldC5jaHVua1tpXSk7XG4gICAgICAgIH1cbiAgICByZXR1cm4gc2hhcmVkO1xufVxuY2xhc3MgTGF5ZXJDdXJzb3Ige1xuICAgIGNvbnN0cnVjdG9yKGxheWVyLCBza2lwLCBtaW5Qb2ludCwgcmFuayA9IDApIHtcbiAgICAgICAgdGhpcy5sYXllciA9IGxheWVyO1xuICAgICAgICB0aGlzLnNraXAgPSBza2lwO1xuICAgICAgICB0aGlzLm1pblBvaW50ID0gbWluUG9pbnQ7XG4gICAgICAgIHRoaXMucmFuayA9IHJhbms7XG4gICAgfVxuICAgIGdldCBzdGFydFNpZGUoKSB7IHJldHVybiB0aGlzLnZhbHVlID8gdGhpcy52YWx1ZS5zdGFydFNpZGUgOiAwOyB9XG4gICAgZ2V0IGVuZFNpZGUoKSB7IHJldHVybiB0aGlzLnZhbHVlID8gdGhpcy52YWx1ZS5lbmRTaWRlIDogMDsgfVxuICAgIGdvdG8ocG9zLCBzaWRlID0gLTEwMDAwMDAwMDAgLyogQy5GYXIgKi8pIHtcbiAgICAgICAgdGhpcy5jaHVua0luZGV4ID0gdGhpcy5yYW5nZUluZGV4ID0gMDtcbiAgICAgICAgdGhpcy5nb3RvSW5uZXIocG9zLCBzaWRlLCBmYWxzZSk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICBnb3RvSW5uZXIocG9zLCBzaWRlLCBmb3J3YXJkKSB7XG4gICAgICAgIHdoaWxlICh0aGlzLmNodW5rSW5kZXggPCB0aGlzLmxheWVyLmNodW5rLmxlbmd0aCkge1xuICAgICAgICAgICAgbGV0IG5leHQgPSB0aGlzLmxheWVyLmNodW5rW3RoaXMuY2h1bmtJbmRleF07XG4gICAgICAgICAgICBpZiAoISh0aGlzLnNraXAgJiYgdGhpcy5za2lwLmhhcyhuZXh0KSB8fFxuICAgICAgICAgICAgICAgIHRoaXMubGF5ZXIuY2h1bmtFbmQodGhpcy5jaHVua0luZGV4KSA8IHBvcyB8fFxuICAgICAgICAgICAgICAgIG5leHQubWF4UG9pbnQgPCB0aGlzLm1pblBvaW50KSlcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIHRoaXMuY2h1bmtJbmRleCsrO1xuICAgICAgICAgICAgZm9yd2FyZCA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmNodW5rSW5kZXggPCB0aGlzLmxheWVyLmNodW5rLmxlbmd0aCkge1xuICAgICAgICAgICAgbGV0IHJhbmdlSW5kZXggPSB0aGlzLmxheWVyLmNodW5rW3RoaXMuY2h1bmtJbmRleF0uZmluZEluZGV4KHBvcyAtIHRoaXMubGF5ZXIuY2h1bmtQb3NbdGhpcy5jaHVua0luZGV4XSwgc2lkZSwgdHJ1ZSk7XG4gICAgICAgICAgICBpZiAoIWZvcndhcmQgfHwgdGhpcy5yYW5nZUluZGV4IDwgcmFuZ2VJbmRleClcbiAgICAgICAgICAgICAgICB0aGlzLnNldFJhbmdlSW5kZXgocmFuZ2VJbmRleCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5uZXh0KCk7XG4gICAgfVxuICAgIGZvcndhcmQocG9zLCBzaWRlKSB7XG4gICAgICAgIGlmICgodGhpcy50byAtIHBvcyB8fCB0aGlzLmVuZFNpZGUgLSBzaWRlKSA8IDApXG4gICAgICAgICAgICB0aGlzLmdvdG9Jbm5lcihwb3MsIHNpZGUsIHRydWUpO1xuICAgIH1cbiAgICBuZXh0KCkge1xuICAgICAgICBmb3IgKDs7KSB7XG4gICAgICAgICAgICBpZiAodGhpcy5jaHVua0luZGV4ID09IHRoaXMubGF5ZXIuY2h1bmsubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5mcm9tID0gdGhpcy50byA9IDEwMDAwMDAwMDAgLyogQy5GYXIgKi87XG4gICAgICAgICAgICAgICAgdGhpcy52YWx1ZSA9IG51bGw7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBsZXQgY2h1bmtQb3MgPSB0aGlzLmxheWVyLmNodW5rUG9zW3RoaXMuY2h1bmtJbmRleF0sIGNodW5rID0gdGhpcy5sYXllci5jaHVua1t0aGlzLmNodW5rSW5kZXhdO1xuICAgICAgICAgICAgICAgIGxldCBmcm9tID0gY2h1bmtQb3MgKyBjaHVuay5mcm9tW3RoaXMucmFuZ2VJbmRleF07XG4gICAgICAgICAgICAgICAgdGhpcy5mcm9tID0gZnJvbTtcbiAgICAgICAgICAgICAgICB0aGlzLnRvID0gY2h1bmtQb3MgKyBjaHVuay50b1t0aGlzLnJhbmdlSW5kZXhdO1xuICAgICAgICAgICAgICAgIHRoaXMudmFsdWUgPSBjaHVuay52YWx1ZVt0aGlzLnJhbmdlSW5kZXhdO1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0UmFuZ2VJbmRleCh0aGlzLnJhbmdlSW5kZXggKyAxKTtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5taW5Qb2ludCA8IDAgfHwgdGhpcy52YWx1ZS5wb2ludCAmJiB0aGlzLnRvIC0gdGhpcy5mcm9tID49IHRoaXMubWluUG9pbnQpXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIHNldFJhbmdlSW5kZXgoaW5kZXgpIHtcbiAgICAgICAgaWYgKGluZGV4ID09IHRoaXMubGF5ZXIuY2h1bmtbdGhpcy5jaHVua0luZGV4XS52YWx1ZS5sZW5ndGgpIHtcbiAgICAgICAgICAgIHRoaXMuY2h1bmtJbmRleCsrO1xuICAgICAgICAgICAgaWYgKHRoaXMuc2tpcCkge1xuICAgICAgICAgICAgICAgIHdoaWxlICh0aGlzLmNodW5rSW5kZXggPCB0aGlzLmxheWVyLmNodW5rLmxlbmd0aCAmJiB0aGlzLnNraXAuaGFzKHRoaXMubGF5ZXIuY2h1bmtbdGhpcy5jaHVua0luZGV4XSkpXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2h1bmtJbmRleCsrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5yYW5nZUluZGV4ID0gMDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMucmFuZ2VJbmRleCA9IGluZGV4O1xuICAgICAgICB9XG4gICAgfVxuICAgIG5leHRDaHVuaygpIHtcbiAgICAgICAgdGhpcy5jaHVua0luZGV4Kys7XG4gICAgICAgIHRoaXMucmFuZ2VJbmRleCA9IDA7XG4gICAgICAgIHRoaXMubmV4dCgpO1xuICAgIH1cbiAgICBjb21wYXJlKG90aGVyKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmZyb20gLSBvdGhlci5mcm9tIHx8IHRoaXMuc3RhcnRTaWRlIC0gb3RoZXIuc3RhcnRTaWRlIHx8IHRoaXMucmFuayAtIG90aGVyLnJhbmsgfHxcbiAgICAgICAgICAgIHRoaXMudG8gLSBvdGhlci50byB8fCB0aGlzLmVuZFNpZGUgLSBvdGhlci5lbmRTaWRlO1xuICAgIH1cbn1cbmNsYXNzIEhlYXBDdXJzb3Ige1xuICAgIGNvbnN0cnVjdG9yKGhlYXApIHtcbiAgICAgICAgdGhpcy5oZWFwID0gaGVhcDtcbiAgICB9XG4gICAgc3RhdGljIGZyb20oc2V0cywgc2tpcCA9IG51bGwsIG1pblBvaW50ID0gLTEpIHtcbiAgICAgICAgbGV0IGhlYXAgPSBbXTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzZXRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBmb3IgKGxldCBjdXIgPSBzZXRzW2ldOyAhY3VyLmlzRW1wdHk7IGN1ciA9IGN1ci5uZXh0TGF5ZXIpIHtcbiAgICAgICAgICAgICAgICBpZiAoY3VyLm1heFBvaW50ID49IG1pblBvaW50KVxuICAgICAgICAgICAgICAgICAgICBoZWFwLnB1c2gobmV3IExheWVyQ3Vyc29yKGN1ciwgc2tpcCwgbWluUG9pbnQsIGkpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gaGVhcC5sZW5ndGggPT0gMSA/IGhlYXBbMF0gOiBuZXcgSGVhcEN1cnNvcihoZWFwKTtcbiAgICB9XG4gICAgZ2V0IHN0YXJ0U2lkZSgpIHsgcmV0dXJuIHRoaXMudmFsdWUgPyB0aGlzLnZhbHVlLnN0YXJ0U2lkZSA6IDA7IH1cbiAgICBnb3RvKHBvcywgc2lkZSA9IC0xMDAwMDAwMDAwIC8qIEMuRmFyICovKSB7XG4gICAgICAgIGZvciAobGV0IGN1ciBvZiB0aGlzLmhlYXApXG4gICAgICAgICAgICBjdXIuZ290byhwb3MsIHNpZGUpO1xuICAgICAgICBmb3IgKGxldCBpID0gdGhpcy5oZWFwLmxlbmd0aCA+PiAxOyBpID49IDA7IGktLSlcbiAgICAgICAgICAgIGhlYXBCdWJibGUodGhpcy5oZWFwLCBpKTtcbiAgICAgICAgdGhpcy5uZXh0KCk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICBmb3J3YXJkKHBvcywgc2lkZSkge1xuICAgICAgICBmb3IgKGxldCBjdXIgb2YgdGhpcy5oZWFwKVxuICAgICAgICAgICAgY3VyLmZvcndhcmQocG9zLCBzaWRlKTtcbiAgICAgICAgZm9yIChsZXQgaSA9IHRoaXMuaGVhcC5sZW5ndGggPj4gMTsgaSA+PSAwOyBpLS0pXG4gICAgICAgICAgICBoZWFwQnViYmxlKHRoaXMuaGVhcCwgaSk7XG4gICAgICAgIGlmICgodGhpcy50byAtIHBvcyB8fCB0aGlzLnZhbHVlLmVuZFNpZGUgLSBzaWRlKSA8IDApXG4gICAgICAgICAgICB0aGlzLm5leHQoKTtcbiAgICB9XG4gICAgbmV4dCgpIHtcbiAgICAgICAgaWYgKHRoaXMuaGVhcC5sZW5ndGggPT0gMCkge1xuICAgICAgICAgICAgdGhpcy5mcm9tID0gdGhpcy50byA9IDEwMDAwMDAwMDAgLyogQy5GYXIgKi87XG4gICAgICAgICAgICB0aGlzLnZhbHVlID0gbnVsbDtcbiAgICAgICAgICAgIHRoaXMucmFuayA9IC0xO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgbGV0IHRvcCA9IHRoaXMuaGVhcFswXTtcbiAgICAgICAgICAgIHRoaXMuZnJvbSA9IHRvcC5mcm9tO1xuICAgICAgICAgICAgdGhpcy50byA9IHRvcC50bztcbiAgICAgICAgICAgIHRoaXMudmFsdWUgPSB0b3AudmFsdWU7XG4gICAgICAgICAgICB0aGlzLnJhbmsgPSB0b3AucmFuaztcbiAgICAgICAgICAgIGlmICh0b3AudmFsdWUpXG4gICAgICAgICAgICAgICAgdG9wLm5leHQoKTtcbiAgICAgICAgICAgIGhlYXBCdWJibGUodGhpcy5oZWFwLCAwKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbmZ1bmN0aW9uIGhlYXBCdWJibGUoaGVhcCwgaW5kZXgpIHtcbiAgICBmb3IgKGxldCBjdXIgPSBoZWFwW2luZGV4XTs7KSB7XG4gICAgICAgIGxldCBjaGlsZEluZGV4ID0gKGluZGV4IDw8IDEpICsgMTtcbiAgICAgICAgaWYgKGNoaWxkSW5kZXggPj0gaGVhcC5sZW5ndGgpXG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgbGV0IGNoaWxkID0gaGVhcFtjaGlsZEluZGV4XTtcbiAgICAgICAgaWYgKGNoaWxkSW5kZXggKyAxIDwgaGVhcC5sZW5ndGggJiYgY2hpbGQuY29tcGFyZShoZWFwW2NoaWxkSW5kZXggKyAxXSkgPj0gMCkge1xuICAgICAgICAgICAgY2hpbGQgPSBoZWFwW2NoaWxkSW5kZXggKyAxXTtcbiAgICAgICAgICAgIGNoaWxkSW5kZXgrKztcbiAgICAgICAgfVxuICAgICAgICBpZiAoY3VyLmNvbXBhcmUoY2hpbGQpIDwgMClcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBoZWFwW2NoaWxkSW5kZXhdID0gY3VyO1xuICAgICAgICBoZWFwW2luZGV4XSA9IGNoaWxkO1xuICAgICAgICBpbmRleCA9IGNoaWxkSW5kZXg7XG4gICAgfVxufVxuY2xhc3MgU3BhbkN1cnNvciB7XG4gICAgY29uc3RydWN0b3Ioc2V0cywgc2tpcCwgbWluUG9pbnQpIHtcbiAgICAgICAgdGhpcy5taW5Qb2ludCA9IG1pblBvaW50O1xuICAgICAgICB0aGlzLmFjdGl2ZSA9IFtdO1xuICAgICAgICB0aGlzLmFjdGl2ZVRvID0gW107XG4gICAgICAgIHRoaXMuYWN0aXZlUmFuayA9IFtdO1xuICAgICAgICB0aGlzLm1pbkFjdGl2ZSA9IC0xO1xuICAgICAgICAvLyBBIGN1cnJlbnRseSBhY3RpdmUgcG9pbnQgcmFuZ2UsIGlmIGFueVxuICAgICAgICB0aGlzLnBvaW50ID0gbnVsbDtcbiAgICAgICAgdGhpcy5wb2ludEZyb20gPSAwO1xuICAgICAgICB0aGlzLnBvaW50UmFuayA9IDA7XG4gICAgICAgIHRoaXMudG8gPSAtMTAwMDAwMDAwMCAvKiBDLkZhciAqLztcbiAgICAgICAgdGhpcy5lbmRTaWRlID0gMDtcbiAgICAgICAgLy8gVGhlIGFtb3VudCBvZiBvcGVuIGFjdGl2ZSByYW5nZXMgYXQgdGhlIHN0YXJ0IG9mIHRoZSBpdGVyYXRvci5cbiAgICAgICAgLy8gTm90IGluY2x1ZGluZyBwb2ludHMuXG4gICAgICAgIHRoaXMub3BlblN0YXJ0ID0gLTE7XG4gICAgICAgIHRoaXMuY3Vyc29yID0gSGVhcEN1cnNvci5mcm9tKHNldHMsIHNraXAsIG1pblBvaW50KTtcbiAgICB9XG4gICAgZ290byhwb3MsIHNpZGUgPSAtMTAwMDAwMDAwMCAvKiBDLkZhciAqLykge1xuICAgICAgICB0aGlzLmN1cnNvci5nb3RvKHBvcywgc2lkZSk7XG4gICAgICAgIHRoaXMuYWN0aXZlLmxlbmd0aCA9IHRoaXMuYWN0aXZlVG8ubGVuZ3RoID0gdGhpcy5hY3RpdmVSYW5rLmxlbmd0aCA9IDA7XG4gICAgICAgIHRoaXMubWluQWN0aXZlID0gLTE7XG4gICAgICAgIHRoaXMudG8gPSBwb3M7XG4gICAgICAgIHRoaXMuZW5kU2lkZSA9IHNpZGU7XG4gICAgICAgIHRoaXMub3BlblN0YXJ0ID0gLTE7XG4gICAgICAgIHRoaXMubmV4dCgpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgZm9yd2FyZChwb3MsIHNpZGUpIHtcbiAgICAgICAgd2hpbGUgKHRoaXMubWluQWN0aXZlID4gLTEgJiYgKHRoaXMuYWN0aXZlVG9bdGhpcy5taW5BY3RpdmVdIC0gcG9zIHx8IHRoaXMuYWN0aXZlW3RoaXMubWluQWN0aXZlXS5lbmRTaWRlIC0gc2lkZSkgPCAwKVxuICAgICAgICAgICAgdGhpcy5yZW1vdmVBY3RpdmUodGhpcy5taW5BY3RpdmUpO1xuICAgICAgICB0aGlzLmN1cnNvci5mb3J3YXJkKHBvcywgc2lkZSk7XG4gICAgfVxuICAgIHJlbW92ZUFjdGl2ZShpbmRleCkge1xuICAgICAgICByZW1vdmUodGhpcy5hY3RpdmUsIGluZGV4KTtcbiAgICAgICAgcmVtb3ZlKHRoaXMuYWN0aXZlVG8sIGluZGV4KTtcbiAgICAgICAgcmVtb3ZlKHRoaXMuYWN0aXZlUmFuaywgaW5kZXgpO1xuICAgICAgICB0aGlzLm1pbkFjdGl2ZSA9IGZpbmRNaW5JbmRleCh0aGlzLmFjdGl2ZSwgdGhpcy5hY3RpdmVUbyk7XG4gICAgfVxuICAgIGFkZEFjdGl2ZSh0cmFja09wZW4pIHtcbiAgICAgICAgbGV0IGkgPSAwLCB7IHZhbHVlLCB0bywgcmFuayB9ID0gdGhpcy5jdXJzb3I7XG4gICAgICAgIC8vIE9yZ2FuaXplIGFjdGl2ZSBtYXJrcyBieSByYW5rIGZpcnN0LCB0aGVuIGJ5IHNpemVcbiAgICAgICAgd2hpbGUgKGkgPCB0aGlzLmFjdGl2ZVJhbmsubGVuZ3RoICYmIChyYW5rIC0gdGhpcy5hY3RpdmVSYW5rW2ldIHx8IHRvIC0gdGhpcy5hY3RpdmVUb1tpXSkgPiAwKVxuICAgICAgICAgICAgaSsrO1xuICAgICAgICBpbnNlcnQodGhpcy5hY3RpdmUsIGksIHZhbHVlKTtcbiAgICAgICAgaW5zZXJ0KHRoaXMuYWN0aXZlVG8sIGksIHRvKTtcbiAgICAgICAgaW5zZXJ0KHRoaXMuYWN0aXZlUmFuaywgaSwgcmFuayk7XG4gICAgICAgIGlmICh0cmFja09wZW4pXG4gICAgICAgICAgICBpbnNlcnQodHJhY2tPcGVuLCBpLCB0aGlzLmN1cnNvci5mcm9tKTtcbiAgICAgICAgdGhpcy5taW5BY3RpdmUgPSBmaW5kTWluSW5kZXgodGhpcy5hY3RpdmUsIHRoaXMuYWN0aXZlVG8pO1xuICAgIH1cbiAgICAvLyBBZnRlciBjYWxsaW5nIHRoaXMsIGlmIGB0aGlzLnBvaW50YCAhPSBudWxsLCB0aGUgbmV4dCByYW5nZSBpcyBhXG4gICAgLy8gcG9pbnQuIE90aGVyd2lzZSwgaXQncyBhIHJlZ3VsYXIgcmFuZ2UsIGNvdmVyZWQgYnkgYHRoaXMuYWN0aXZlYC5cbiAgICBuZXh0KCkge1xuICAgICAgICBsZXQgZnJvbSA9IHRoaXMudG8sIHdhc1BvaW50ID0gdGhpcy5wb2ludDtcbiAgICAgICAgdGhpcy5wb2ludCA9IG51bGw7XG4gICAgICAgIGxldCB0cmFja09wZW4gPSB0aGlzLm9wZW5TdGFydCA8IDAgPyBbXSA6IG51bGw7XG4gICAgICAgIGZvciAoOzspIHtcbiAgICAgICAgICAgIGxldCBhID0gdGhpcy5taW5BY3RpdmU7XG4gICAgICAgICAgICBpZiAoYSA+IC0xICYmICh0aGlzLmFjdGl2ZVRvW2FdIC0gdGhpcy5jdXJzb3IuZnJvbSB8fCB0aGlzLmFjdGl2ZVthXS5lbmRTaWRlIC0gdGhpcy5jdXJzb3Iuc3RhcnRTaWRlKSA8IDApIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5hY3RpdmVUb1thXSA+IGZyb20pIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50byA9IHRoaXMuYWN0aXZlVG9bYV07XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZW5kU2lkZSA9IHRoaXMuYWN0aXZlW2FdLmVuZFNpZGU7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZUFjdGl2ZShhKTtcbiAgICAgICAgICAgICAgICBpZiAodHJhY2tPcGVuKVxuICAgICAgICAgICAgICAgICAgICByZW1vdmUodHJhY2tPcGVuLCBhKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKCF0aGlzLmN1cnNvci52YWx1ZSkge1xuICAgICAgICAgICAgICAgIHRoaXMudG8gPSB0aGlzLmVuZFNpZGUgPSAxMDAwMDAwMDAwIC8qIEMuRmFyICovO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAodGhpcy5jdXJzb3IuZnJvbSA+IGZyb20pIHtcbiAgICAgICAgICAgICAgICB0aGlzLnRvID0gdGhpcy5jdXJzb3IuZnJvbTtcbiAgICAgICAgICAgICAgICB0aGlzLmVuZFNpZGUgPSB0aGlzLmN1cnNvci5zdGFydFNpZGU7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBsZXQgbmV4dFZhbCA9IHRoaXMuY3Vyc29yLnZhbHVlO1xuICAgICAgICAgICAgICAgIGlmICghbmV4dFZhbC5wb2ludCkgeyAvLyBPcGVuaW5nIGEgcmFuZ2VcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hZGRBY3RpdmUodHJhY2tPcGVuKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jdXJzb3IubmV4dCgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmICh3YXNQb2ludCAmJiB0aGlzLmN1cnNvci50byA9PSB0aGlzLnRvICYmIHRoaXMuY3Vyc29yLmZyb20gPCB0aGlzLmN1cnNvci50bykge1xuICAgICAgICAgICAgICAgICAgICAvLyBJZ25vcmUgYW55IG5vbi1lbXB0eSBwb2ludHMgdGhhdCBlbmQgcHJlY2lzZWx5IGF0IHRoZSBlbmQgb2YgdGhlIHByZXYgcG9pbnRcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jdXJzb3IubmV4dCgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHsgLy8gTmV3IHBvaW50XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucG9pbnQgPSBuZXh0VmFsO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnBvaW50RnJvbSA9IHRoaXMuY3Vyc29yLmZyb207XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucG9pbnRSYW5rID0gdGhpcy5jdXJzb3IucmFuaztcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50byA9IHRoaXMuY3Vyc29yLnRvO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmVuZFNpZGUgPSBuZXh0VmFsLmVuZFNpZGU7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY3Vyc29yLm5leHQoKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5mb3J3YXJkKHRoaXMudG8sIHRoaXMuZW5kU2lkZSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAodHJhY2tPcGVuKSB7XG4gICAgICAgICAgICB0aGlzLm9wZW5TdGFydCA9IDA7XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gdHJhY2tPcGVuLmxlbmd0aCAtIDE7IGkgPj0gMCAmJiB0cmFja09wZW5baV0gPCBmcm9tOyBpLS0pXG4gICAgICAgICAgICAgICAgdGhpcy5vcGVuU3RhcnQrKztcbiAgICAgICAgfVxuICAgIH1cbiAgICBhY3RpdmVGb3JQb2ludCh0bykge1xuICAgICAgICBpZiAoIXRoaXMuYWN0aXZlLmxlbmd0aClcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmFjdGl2ZTtcbiAgICAgICAgbGV0IGFjdGl2ZSA9IFtdO1xuICAgICAgICBmb3IgKGxldCBpID0gdGhpcy5hY3RpdmUubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmFjdGl2ZVJhbmtbaV0gPCB0aGlzLnBvaW50UmFuaylcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGlmICh0aGlzLmFjdGl2ZVRvW2ldID4gdG8gfHwgdGhpcy5hY3RpdmVUb1tpXSA9PSB0byAmJiB0aGlzLmFjdGl2ZVtpXS5lbmRTaWRlID49IHRoaXMucG9pbnQuZW5kU2lkZSlcbiAgICAgICAgICAgICAgICBhY3RpdmUucHVzaCh0aGlzLmFjdGl2ZVtpXSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGFjdGl2ZS5yZXZlcnNlKCk7XG4gICAgfVxuICAgIG9wZW5FbmQodG8pIHtcbiAgICAgICAgbGV0IG9wZW4gPSAwO1xuICAgICAgICBmb3IgKGxldCBpID0gdGhpcy5hY3RpdmVUby5sZW5ndGggLSAxOyBpID49IDAgJiYgdGhpcy5hY3RpdmVUb1tpXSA+IHRvOyBpLS0pXG4gICAgICAgICAgICBvcGVuKys7XG4gICAgICAgIHJldHVybiBvcGVuO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGNvbXBhcmUoYSwgc3RhcnRBLCBiLCBzdGFydEIsIGxlbmd0aCwgY29tcGFyYXRvcikge1xuICAgIGEuZ290byhzdGFydEEpO1xuICAgIGIuZ290byhzdGFydEIpO1xuICAgIGxldCBlbmRCID0gc3RhcnRCICsgbGVuZ3RoO1xuICAgIGxldCBwb3MgPSBzdGFydEIsIGRQb3MgPSBzdGFydEIgLSBzdGFydEE7XG4gICAgbGV0IGJvdW5kcyA9ICEhY29tcGFyYXRvci5ib3VuZENoYW5nZTtcbiAgICBmb3IgKGxldCBib3VuZENoYW5nZSA9IGZhbHNlOzspIHtcbiAgICAgICAgbGV0IGRFbmQgPSAoYS50byArIGRQb3MpIC0gYi50bywgZGlmZiA9IGRFbmQgfHwgYS5lbmRTaWRlIC0gYi5lbmRTaWRlO1xuICAgICAgICBsZXQgZW5kID0gZGlmZiA8IDAgPyBhLnRvICsgZFBvcyA6IGIudG8sIGNsaXBFbmQgPSBNYXRoLm1pbihlbmQsIGVuZEIpO1xuICAgICAgICBsZXQgcG9pbnQgPSBhLnBvaW50IHx8IGIucG9pbnQ7XG4gICAgICAgIGlmIChwb2ludCkge1xuICAgICAgICAgICAgaWYgKCEoYS5wb2ludCAmJiBiLnBvaW50ICYmIGNtcFZhbChhLnBvaW50LCBiLnBvaW50KSAmJlxuICAgICAgICAgICAgICAgIHNhbWVWYWx1ZXMoYS5hY3RpdmVGb3JQb2ludChhLnRvKSwgYi5hY3RpdmVGb3JQb2ludChiLnRvKSkpKVxuICAgICAgICAgICAgICAgIGNvbXBhcmF0b3IuY29tcGFyZVBvaW50KHBvcywgY2xpcEVuZCwgYS5wb2ludCwgYi5wb2ludCk7XG4gICAgICAgICAgICBib3VuZENoYW5nZSA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgaWYgKGJvdW5kQ2hhbmdlKVxuICAgICAgICAgICAgICAgIGNvbXBhcmF0b3IuYm91bmRDaGFuZ2UocG9zKTtcbiAgICAgICAgICAgIGlmIChjbGlwRW5kID4gcG9zICYmICFzYW1lVmFsdWVzKGEuYWN0aXZlLCBiLmFjdGl2ZSkpXG4gICAgICAgICAgICAgICAgY29tcGFyYXRvci5jb21wYXJlUmFuZ2UocG9zLCBjbGlwRW5kLCBhLmFjdGl2ZSwgYi5hY3RpdmUpO1xuICAgICAgICAgICAgaWYgKGJvdW5kcyAmJiBjbGlwRW5kIDwgZW5kQiAmJiAoZEVuZCB8fCBhLm9wZW5FbmQoZW5kKSAhPSBiLm9wZW5FbmQoZW5kKSkpXG4gICAgICAgICAgICAgICAgYm91bmRDaGFuZ2UgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGlmIChlbmQgPiBlbmRCKVxuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIHBvcyA9IGVuZDtcbiAgICAgICAgaWYgKGRpZmYgPD0gMClcbiAgICAgICAgICAgIGEubmV4dCgpO1xuICAgICAgICBpZiAoZGlmZiA+PSAwKVxuICAgICAgICAgICAgYi5uZXh0KCk7XG4gICAgfVxufVxuZnVuY3Rpb24gc2FtZVZhbHVlcyhhLCBiKSB7XG4gICAgaWYgKGEubGVuZ3RoICE9IGIubGVuZ3RoKVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBhLmxlbmd0aDsgaSsrKVxuICAgICAgICBpZiAoYVtpXSAhPSBiW2ldICYmICFjbXBWYWwoYVtpXSwgYltpXSkpXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgcmV0dXJuIHRydWU7XG59XG5mdW5jdGlvbiByZW1vdmUoYXJyYXksIGluZGV4KSB7XG4gICAgZm9yIChsZXQgaSA9IGluZGV4LCBlID0gYXJyYXkubGVuZ3RoIC0gMTsgaSA8IGU7IGkrKylcbiAgICAgICAgYXJyYXlbaV0gPSBhcnJheVtpICsgMV07XG4gICAgYXJyYXkucG9wKCk7XG59XG5mdW5jdGlvbiBpbnNlcnQoYXJyYXksIGluZGV4LCB2YWx1ZSkge1xuICAgIGZvciAobGV0IGkgPSBhcnJheS5sZW5ndGggLSAxOyBpID49IGluZGV4OyBpLS0pXG4gICAgICAgIGFycmF5W2kgKyAxXSA9IGFycmF5W2ldO1xuICAgIGFycmF5W2luZGV4XSA9IHZhbHVlO1xufVxuZnVuY3Rpb24gZmluZE1pbkluZGV4KHZhbHVlLCBhcnJheSkge1xuICAgIGxldCBmb3VuZCA9IC0xLCBmb3VuZFBvcyA9IDEwMDAwMDAwMDAgLyogQy5GYXIgKi87XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBhcnJheS5sZW5ndGg7IGkrKylcbiAgICAgICAgaWYgKChhcnJheVtpXSAtIGZvdW5kUG9zIHx8IHZhbHVlW2ldLmVuZFNpZGUgLSB2YWx1ZVtmb3VuZF0uZW5kU2lkZSkgPCAwKSB7XG4gICAgICAgICAgICBmb3VuZCA9IGk7XG4gICAgICAgICAgICBmb3VuZFBvcyA9IGFycmF5W2ldO1xuICAgICAgICB9XG4gICAgcmV0dXJuIGZvdW5kO1xufVxuXG4vKipcbkNvdW50IHRoZSBjb2x1bW4gcG9zaXRpb24gYXQgdGhlIGdpdmVuIG9mZnNldCBpbnRvIHRoZSBzdHJpbmcsXG50YWtpbmcgZXh0ZW5kaW5nIGNoYXJhY3RlcnMgYW5kIHRhYiBzaXplIGludG8gYWNjb3VudC5cbiovXG5mdW5jdGlvbiBjb3VudENvbHVtbihzdHJpbmcsIHRhYlNpemUsIHRvID0gc3RyaW5nLmxlbmd0aCkge1xuICAgIGxldCBuID0gMDtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRvICYmIGkgPCBzdHJpbmcubGVuZ3RoOykge1xuICAgICAgICBpZiAoc3RyaW5nLmNoYXJDb2RlQXQoaSkgPT0gOSkge1xuICAgICAgICAgICAgbiArPSB0YWJTaXplIC0gKG4gJSB0YWJTaXplKTtcbiAgICAgICAgICAgIGkrKztcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIG4rKztcbiAgICAgICAgICAgIGkgPSBmaW5kQ2x1c3RlckJyZWFrKHN0cmluZywgaSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG47XG59XG4vKipcbkZpbmQgdGhlIG9mZnNldCB0aGF0IGNvcnJlc3BvbmRzIHRvIHRoZSBnaXZlbiBjb2x1bW4gcG9zaXRpb24gaW4gYVxuc3RyaW5nLCB0YWtpbmcgZXh0ZW5kaW5nIGNoYXJhY3RlcnMgYW5kIHRhYiBzaXplIGludG8gYWNjb3VudC4gQnlcbmRlZmF1bHQsIHRoZSBzdHJpbmcgbGVuZ3RoIGlzIHJldHVybmVkIHdoZW4gaXQgaXMgdG9vIHNob3J0IHRvXG5yZWFjaCB0aGUgY29sdW1uLiBQYXNzIGBzdHJpY3RgIHRydWUgdG8gbWFrZSBpdCByZXR1cm4gLTEgaW4gdGhhdFxuc2l0dWF0aW9uLlxuKi9cbmZ1bmN0aW9uIGZpbmRDb2x1bW4oc3RyaW5nLCBjb2wsIHRhYlNpemUsIHN0cmljdCkge1xuICAgIGZvciAobGV0IGkgPSAwLCBuID0gMDs7KSB7XG4gICAgICAgIGlmIChuID49IGNvbClcbiAgICAgICAgICAgIHJldHVybiBpO1xuICAgICAgICBpZiAoaSA9PSBzdHJpbmcubGVuZ3RoKVxuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIG4gKz0gc3RyaW5nLmNoYXJDb2RlQXQoaSkgPT0gOSA/IHRhYlNpemUgLSAobiAlIHRhYlNpemUpIDogMTtcbiAgICAgICAgaSA9IGZpbmRDbHVzdGVyQnJlYWsoc3RyaW5nLCBpKTtcbiAgICB9XG4gICAgcmV0dXJuIHN0cmljdCA9PT0gdHJ1ZSA/IC0xIDogc3RyaW5nLmxlbmd0aDtcbn1cblxuZXhwb3J0IHsgQW5ub3RhdGlvbiwgQW5ub3RhdGlvblR5cGUsIENoYW5nZURlc2MsIENoYW5nZVNldCwgQ2hhckNhdGVnb3J5LCBDb21wYXJ0bWVudCwgRWRpdG9yU2VsZWN0aW9uLCBFZGl0b3JTdGF0ZSwgRmFjZXQsIExpbmUsIE1hcE1vZGUsIFByZWMsIFJhbmdlLCBSYW5nZVNldCwgUmFuZ2VTZXRCdWlsZGVyLCBSYW5nZVZhbHVlLCBTZWxlY3Rpb25SYW5nZSwgU3RhdGVFZmZlY3QsIFN0YXRlRWZmZWN0VHlwZSwgU3RhdGVGaWVsZCwgVGV4dCwgVHJhbnNhY3Rpb24sIGNvZGVQb2ludEF0LCBjb2RlUG9pbnRTaXplLCBjb21iaW5lQ29uZmlnLCBjb3VudENvbHVtbiwgZmluZENsdXN0ZXJCcmVhaywgZmluZENvbHVtbiwgZnJvbUNvZGVQb2ludCB9O1xuIiwKICAgICJjb25zdCBDID0gXCJcXHUwMzdjXCJcbmNvbnN0IENPVU5UID0gdHlwZW9mIFN5bWJvbCA9PSBcInVuZGVmaW5lZFwiID8gXCJfX1wiICsgQyA6IFN5bWJvbC5mb3IoQylcbmNvbnN0IFNFVCA9IHR5cGVvZiBTeW1ib2wgPT0gXCJ1bmRlZmluZWRcIiA/IFwiX19zdHlsZVNldFwiICsgTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMWU4KSA6IFN5bWJvbChcInN0eWxlU2V0XCIpXG5jb25zdCB0b3AgPSB0eXBlb2YgZ2xvYmFsVGhpcyAhPSBcInVuZGVmaW5lZFwiID8gZ2xvYmFsVGhpcyA6IHR5cGVvZiB3aW5kb3cgIT0gXCJ1bmRlZmluZWRcIiA/IHdpbmRvdyA6IHt9XG5cbi8vIDo6IC0gU3R5bGUgbW9kdWxlcyBlbmNhcHN1bGF0ZSBhIHNldCBvZiBDU1MgcnVsZXMgZGVmaW5lZCBmcm9tXG4vLyBKYXZhU2NyaXB0LiBUaGVpciBkZWZpbml0aW9ucyBhcmUgb25seSBhdmFpbGFibGUgaW4gYSBnaXZlbiBET01cbi8vIHJvb3QgYWZ0ZXIgaXQgaGFzIGJlZW4gX21vdW50ZWRfIHRoZXJlIHdpdGggYFN0eWxlTW9kdWxlLm1vdW50YC5cbi8vXG4vLyBTdHlsZSBtb2R1bGVzIHNob3VsZCBiZSBjcmVhdGVkIG9uY2UgYW5kIHN0b3JlZCBzb21ld2hlcmUsIGFzXG4vLyBvcHBvc2VkIHRvIHJlLWNyZWF0aW5nIHRoZW0gZXZlcnkgdGltZSB5b3UgbmVlZCB0aGVtLiBUaGUgYW1vdW50IG9mXG4vLyBDU1MgcnVsZXMgZ2VuZXJhdGVkIGZvciBhIGdpdmVuIERPTSByb290IGlzIGJvdW5kZWQgYnkgdGhlIGFtb3VudFxuLy8gb2Ygc3R5bGUgbW9kdWxlcyB0aGF0IHdlcmUgdXNlZC4gU28gdG8gYXZvaWQgbGVha2luZyBydWxlcywgZG9uJ3Rcbi8vIGNyZWF0ZSB0aGVzZSBkeW5hbWljYWxseSwgYnV0IHRyZWF0IHRoZW0gYXMgb25lLXRpbWUgYWxsb2NhdGlvbnMuXG5leHBvcnQgY2xhc3MgU3R5bGVNb2R1bGUge1xuICAvLyA6OiAoT2JqZWN0PFN0eWxlPiwgP3tmaW5pc2g6ID8oc3RyaW5nKSDihpIgc3RyaW5nfSlcbiAgLy8gQ3JlYXRlIGEgc3R5bGUgbW9kdWxlIGZyb20gdGhlIGdpdmVuIHNwZWMuXG4gIC8vXG4gIC8vIFdoZW4gYGZpbmlzaGAgaXMgZ2l2ZW4sIGl0IGlzIGNhbGxlZCBvbiByZWd1bGFyIChub24tYEBgKVxuICAvLyBzZWxlY3RvcnMgKGFmdGVyIGAmYCBleHBhbnNpb24pIHRvIGNvbXB1dGUgdGhlIGZpbmFsIHNlbGVjdG9yLlxuICBjb25zdHJ1Y3RvcihzcGVjLCBvcHRpb25zKSB7XG4gICAgdGhpcy5ydWxlcyA9IFtdXG4gICAgbGV0IHtmaW5pc2h9ID0gb3B0aW9ucyB8fCB7fVxuXG4gICAgZnVuY3Rpb24gc3BsaXRTZWxlY3RvcihzZWxlY3Rvcikge1xuICAgICAgcmV0dXJuIC9eQC8udGVzdChzZWxlY3RvcikgPyBbc2VsZWN0b3JdIDogc2VsZWN0b3Iuc3BsaXQoLyxcXHMqLylcbiAgICB9XG5cbiAgICBmdW5jdGlvbiByZW5kZXIoc2VsZWN0b3JzLCBzcGVjLCB0YXJnZXQsIGlzS2V5ZnJhbWVzKSB7XG4gICAgICBsZXQgbG9jYWwgPSBbXSwgaXNBdCA9IC9eQChcXHcrKVxcYi8uZXhlYyhzZWxlY3RvcnNbMF0pLCBrZXlmcmFtZXMgPSBpc0F0ICYmIGlzQXRbMV0gPT0gXCJrZXlmcmFtZXNcIlxuICAgICAgaWYgKGlzQXQgJiYgc3BlYyA9PSBudWxsKSByZXR1cm4gdGFyZ2V0LnB1c2goc2VsZWN0b3JzWzBdICsgXCI7XCIpXG4gICAgICBmb3IgKGxldCBwcm9wIGluIHNwZWMpIHtcbiAgICAgICAgbGV0IHZhbHVlID0gc3BlY1twcm9wXVxuICAgICAgICBpZiAoLyYvLnRlc3QocHJvcCkpIHtcbiAgICAgICAgICByZW5kZXIocHJvcC5zcGxpdCgvLFxccyovKS5tYXAocGFydCA9PiBzZWxlY3RvcnMubWFwKHNlbCA9PiBwYXJ0LnJlcGxhY2UoLyYvLCBzZWwpKSkucmVkdWNlKChhLCBiKSA9PiBhLmNvbmNhdChiKSksXG4gICAgICAgICAgICAgICAgIHZhbHVlLCB0YXJnZXQpXG4gICAgICAgIH0gZWxzZSBpZiAodmFsdWUgJiYgdHlwZW9mIHZhbHVlID09IFwib2JqZWN0XCIpIHtcbiAgICAgICAgICBpZiAoIWlzQXQpIHRocm93IG5ldyBSYW5nZUVycm9yKFwiVGhlIHZhbHVlIG9mIGEgcHJvcGVydHkgKFwiICsgcHJvcCArIFwiKSBzaG91bGQgYmUgYSBwcmltaXRpdmUgdmFsdWUuXCIpXG4gICAgICAgICAgcmVuZGVyKHNwbGl0U2VsZWN0b3IocHJvcCksIHZhbHVlLCBsb2NhbCwga2V5ZnJhbWVzKVxuICAgICAgICB9IGVsc2UgaWYgKHZhbHVlICE9IG51bGwpIHtcbiAgICAgICAgICBsb2NhbC5wdXNoKHByb3AucmVwbGFjZSgvXy4qLywgXCJcIikucmVwbGFjZSgvW0EtWl0vZywgbCA9PiBcIi1cIiArIGwudG9Mb3dlckNhc2UoKSkgKyBcIjogXCIgKyB2YWx1ZSArIFwiO1wiKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAobG9jYWwubGVuZ3RoIHx8IGtleWZyYW1lcykge1xuICAgICAgICB0YXJnZXQucHVzaCgoZmluaXNoICYmICFpc0F0ICYmICFpc0tleWZyYW1lcyA/IHNlbGVjdG9ycy5tYXAoZmluaXNoKSA6IHNlbGVjdG9ycykuam9pbihcIiwgXCIpICtcbiAgICAgICAgICAgICAgICAgICAgXCIge1wiICsgbG9jYWwuam9pbihcIiBcIikgKyBcIn1cIilcbiAgICAgIH1cbiAgICB9XG5cbiAgICBmb3IgKGxldCBwcm9wIGluIHNwZWMpIHJlbmRlcihzcGxpdFNlbGVjdG9yKHByb3ApLCBzcGVjW3Byb3BdLCB0aGlzLnJ1bGVzKVxuICB9XG5cbiAgLy8gOjogKCkg4oaSIHN0cmluZ1xuICAvLyBSZXR1cm5zIGEgc3RyaW5nIGNvbnRhaW5pbmcgdGhlIG1vZHVsZSdzIENTUyBydWxlcy5cbiAgZ2V0UnVsZXMoKSB7IHJldHVybiB0aGlzLnJ1bGVzLmpvaW4oXCJcXG5cIikgfVxuXG4gIC8vIDo6ICgpIOKGkiBzdHJpbmdcbiAgLy8gR2VuZXJhdGUgYSBuZXcgdW5pcXVlIENTUyBjbGFzcyBuYW1lLlxuICBzdGF0aWMgbmV3TmFtZSgpIHtcbiAgICBsZXQgaWQgPSB0b3BbQ09VTlRdIHx8IDFcbiAgICB0b3BbQ09VTlRdID0gaWQgKyAxXG4gICAgcmV0dXJuIEMgKyBpZC50b1N0cmluZygzNilcbiAgfVxuXG4gIC8vIDo6ICh1bmlvbjxEb2N1bWVudCwgU2hhZG93Um9vdD4sIHVuaW9uPFtTdHlsZU1vZHVsZV0sIFN0eWxlTW9kdWxlPiwgP3tub25jZTogP3N0cmluZ30pXG4gIC8vXG4gIC8vIE1vdW50IHRoZSBnaXZlbiBzZXQgb2YgbW9kdWxlcyBpbiB0aGUgZ2l2ZW4gRE9NIHJvb3QsIHdoaWNoIGVuc3VyZXNcbiAgLy8gdGhhdCB0aGUgQ1NTIHJ1bGVzIGRlZmluZWQgYnkgdGhlIG1vZHVsZSBhcmUgYXZhaWxhYmxlIGluIHRoYXRcbiAgLy8gY29udGV4dC5cbiAgLy9cbiAgLy8gUnVsZXMgYXJlIG9ubHkgYWRkZWQgdG8gdGhlIGRvY3VtZW50IG9uY2UgcGVyIHJvb3QuXG4gIC8vXG4gIC8vIFJ1bGUgb3JkZXIgd2lsbCBmb2xsb3cgdGhlIG9yZGVyIG9mIHRoZSBtb2R1bGVzLCBzbyB0aGF0IHJ1bGVzIGZyb21cbiAgLy8gbW9kdWxlcyBsYXRlciBpbiB0aGUgYXJyYXkgdGFrZSBwcmVjZWRlbmNlIG9mIHRob3NlIGZyb20gZWFybGllclxuICAvLyBtb2R1bGVzLiBJZiB5b3UgY2FsbCB0aGlzIGZ1bmN0aW9uIG11bHRpcGxlIHRpbWVzIGZvciB0aGUgc2FtZSByb290XG4gIC8vIGluIGEgd2F5IHRoYXQgY2hhbmdlcyB0aGUgb3JkZXIgb2YgYWxyZWFkeSBtb3VudGVkIG1vZHVsZXMsIHRoZSBvbGRcbiAgLy8gb3JkZXIgd2lsbCBiZSBjaGFuZ2VkLlxuICAvL1xuICAvLyBJZiBhIENvbnRlbnQgU2VjdXJpdHkgUG9saWN5IG5vbmNlIGlzIHByb3ZpZGVkLCBpdCBpcyBhZGRlZCB0b1xuICAvLyB0aGUgYDxzdHlsZT5gIHRhZyBnZW5lcmF0ZWQgYnkgdGhlIGxpYnJhcnkuXG4gIHN0YXRpYyBtb3VudChyb290LCBtb2R1bGVzLCBvcHRpb25zKSB7XG4gICAgbGV0IHNldCA9IHJvb3RbU0VUXSwgbm9uY2UgPSBvcHRpb25zICYmIG9wdGlvbnMubm9uY2VcbiAgICBpZiAoIXNldCkgc2V0ID0gbmV3IFN0eWxlU2V0KHJvb3QsIG5vbmNlKVxuICAgIGVsc2UgaWYgKG5vbmNlKSBzZXQuc2V0Tm9uY2Uobm9uY2UpXG4gICAgc2V0Lm1vdW50KEFycmF5LmlzQXJyYXkobW9kdWxlcykgPyBtb2R1bGVzIDogW21vZHVsZXNdLCByb290KVxuICB9XG59XG5cbmxldCBhZG9wdGVkU2V0ID0gbmV3IE1hcCAvLzxEb2N1bWVudCwgU3R5bGVTZXQ+XG5cbmNsYXNzIFN0eWxlU2V0IHtcbiAgY29uc3RydWN0b3Iocm9vdCwgbm9uY2UpIHtcbiAgICBsZXQgZG9jID0gcm9vdC5vd25lckRvY3VtZW50IHx8IHJvb3QsIHdpbiA9IGRvYy5kZWZhdWx0Vmlld1xuICAgIGlmICghcm9vdC5oZWFkICYmIHJvb3QuYWRvcHRlZFN0eWxlU2hlZXRzICYmIHdpbi5DU1NTdHlsZVNoZWV0KSB7XG4gICAgICBsZXQgYWRvcHRlZCA9IGFkb3B0ZWRTZXQuZ2V0KGRvYylcbiAgICAgIGlmIChhZG9wdGVkKSByZXR1cm4gcm9vdFtTRVRdID0gYWRvcHRlZFxuICAgICAgdGhpcy5zaGVldCA9IG5ldyB3aW4uQ1NTU3R5bGVTaGVldFxuICAgICAgYWRvcHRlZFNldC5zZXQoZG9jLCB0aGlzKVxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnN0eWxlVGFnID0gZG9jLmNyZWF0ZUVsZW1lbnQoXCJzdHlsZVwiKVxuICAgICAgaWYgKG5vbmNlKSB0aGlzLnN0eWxlVGFnLnNldEF0dHJpYnV0ZShcIm5vbmNlXCIsIG5vbmNlKVxuICAgIH1cbiAgICB0aGlzLm1vZHVsZXMgPSBbXVxuICAgIHJvb3RbU0VUXSA9IHRoaXNcbiAgfVxuXG4gIG1vdW50KG1vZHVsZXMsIHJvb3QpIHtcbiAgICBsZXQgc2hlZXQgPSB0aGlzLnNoZWV0XG4gICAgbGV0IHBvcyA9IDAgLyogQ3VycmVudCBydWxlIG9mZnNldCAqLywgaiA9IDAgLyogSW5kZXggaW50byB0aGlzLm1vZHVsZXMgKi9cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IG1vZHVsZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGxldCBtb2QgPSBtb2R1bGVzW2ldLCBpbmRleCA9IHRoaXMubW9kdWxlcy5pbmRleE9mKG1vZClcbiAgICAgIGlmIChpbmRleCA8IGogJiYgaW5kZXggPiAtMSkgeyAvLyBPcmRlcmluZyBjb25mbGljdFxuICAgICAgICB0aGlzLm1vZHVsZXMuc3BsaWNlKGluZGV4LCAxKVxuICAgICAgICBqLS1cbiAgICAgICAgaW5kZXggPSAtMVxuICAgICAgfVxuICAgICAgaWYgKGluZGV4ID09IC0xKSB7XG4gICAgICAgIHRoaXMubW9kdWxlcy5zcGxpY2UoaisrLCAwLCBtb2QpXG4gICAgICAgIGlmIChzaGVldCkgZm9yIChsZXQgayA9IDA7IGsgPCBtb2QucnVsZXMubGVuZ3RoOyBrKyspXG4gICAgICAgICAgc2hlZXQuaW5zZXJ0UnVsZShtb2QucnVsZXNba10sIHBvcysrKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgd2hpbGUgKGogPCBpbmRleCkgcG9zICs9IHRoaXMubW9kdWxlc1tqKytdLnJ1bGVzLmxlbmd0aFxuICAgICAgICBwb3MgKz0gbW9kLnJ1bGVzLmxlbmd0aFxuICAgICAgICBqKytcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoc2hlZXQpIHtcbiAgICAgIGlmIChyb290LmFkb3B0ZWRTdHlsZVNoZWV0cy5pbmRleE9mKHRoaXMuc2hlZXQpIDwgMClcbiAgICAgICAgcm9vdC5hZG9wdGVkU3R5bGVTaGVldHMgPSBbdGhpcy5zaGVldCwgLi4ucm9vdC5hZG9wdGVkU3R5bGVTaGVldHNdXG4gICAgfSBlbHNlIHtcbiAgICAgIGxldCB0ZXh0ID0gXCJcIlxuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLm1vZHVsZXMubGVuZ3RoOyBpKyspXG4gICAgICAgIHRleHQgKz0gdGhpcy5tb2R1bGVzW2ldLmdldFJ1bGVzKCkgKyBcIlxcblwiXG4gICAgICB0aGlzLnN0eWxlVGFnLnRleHRDb250ZW50ID0gdGV4dFxuICAgICAgbGV0IHRhcmdldCA9IHJvb3QuaGVhZCB8fCByb290XG4gICAgICBpZiAodGhpcy5zdHlsZVRhZy5wYXJlbnROb2RlICE9IHRhcmdldClcbiAgICAgICAgdGFyZ2V0Lmluc2VydEJlZm9yZSh0aGlzLnN0eWxlVGFnLCB0YXJnZXQuZmlyc3RDaGlsZClcbiAgICB9XG4gIH1cblxuICBzZXROb25jZShub25jZSkge1xuICAgIGlmICh0aGlzLnN0eWxlVGFnICYmIHRoaXMuc3R5bGVUYWcuZ2V0QXR0cmlidXRlKFwibm9uY2VcIikgIT0gbm9uY2UpXG4gICAgICB0aGlzLnN0eWxlVGFnLnNldEF0dHJpYnV0ZShcIm5vbmNlXCIsIG5vbmNlKVxuICB9XG59XG5cbi8vIFN0eWxlOjpPYmplY3Q8dW5pb248U3R5bGUsc3RyaW5nPj5cbi8vXG4vLyBBIHN0eWxlIGlzIGFuIG9iamVjdCB0aGF0LCBpbiB0aGUgc2ltcGxlIGNhc2UsIG1hcHMgQ1NTIHByb3BlcnR5XG4vLyBuYW1lcyB0byBzdHJpbmdzIGhvbGRpbmcgdGhlaXIgdmFsdWVzLCBhcyBpbiBge2NvbG9yOiBcInJlZFwiLFxuLy8gZm9udFdlaWdodDogXCJib2xkXCJ9YC4gVGhlIHByb3BlcnR5IG5hbWVzIGNhbiBiZSBnaXZlbiBpblxuLy8gY2FtZWwtY2FzZeKAlHRoZSBsaWJyYXJ5IHdpbGwgaW5zZXJ0IGEgZGFzaCBiZWZvcmUgY2FwaXRhbCBsZXR0ZXJzXG4vLyB3aGVuIGNvbnZlcnRpbmcgdGhlbSB0byBDU1MuXG4vL1xuLy8gSWYgeW91IGluY2x1ZGUgYW4gdW5kZXJzY29yZSBpbiBhIHByb3BlcnR5IG5hbWUsIGl0IGFuZCBldmVyeXRoaW5nXG4vLyBhZnRlciBpdCB3aWxsIGJlIHJlbW92ZWQgZnJvbSB0aGUgb3V0cHV0LCB3aGljaCBjYW4gYmUgdXNlZnVsIHdoZW5cbi8vIHByb3ZpZGluZyBhIHByb3BlcnR5IG11bHRpcGxlIHRpbWVzLCBmb3IgYnJvd3NlciBjb21wYXRpYmlsaXR5XG4vLyByZWFzb25zLlxuLy9cbi8vIEEgcHJvcGVydHkgaW4gYSBzdHlsZSBvYmplY3QgY2FuIGFsc28gYmUgYSBzdWItc2VsZWN0b3IsIHdoaWNoXG4vLyBleHRlbmRzIHRoZSBjdXJyZW50IGNvbnRleHQgdG8gYWRkIGEgcHNldWRvLXNlbGVjdG9yIG9yIGEgY2hpbGRcbi8vIHNlbGVjdG9yLiBTdWNoIGEgcHJvcGVydHkgc2hvdWxkIGNvbnRhaW4gYSBgJmAgY2hhcmFjdGVyLCB3aGljaFxuLy8gd2lsbCBiZSByZXBsYWNlZCBieSB0aGUgY3VycmVudCBzZWxlY3Rvci4gRm9yIGV4YW1wbGUgYHtcIiY6YmVmb3JlXCI6XG4vLyB7Y29udGVudDogJ1wiaGlcIid9fWAuIFN1Yi1zZWxlY3RvcnMgYW5kIHJlZ3VsYXIgcHJvcGVydGllcyBjYW5cbi8vIGZyZWVseSBiZSBtaXhlZCBpbiBhIGdpdmVuIG9iamVjdC4gQW55IHByb3BlcnR5IGNvbnRhaW5pbmcgYSBgJmAgaXNcbi8vIGFzc3VtZWQgdG8gYmUgYSBzdWItc2VsZWN0b3IuXG4vL1xuLy8gRmluYWxseSwgYSBwcm9wZXJ0eSBjYW4gc3BlY2lmeSBhbiBALWJsb2NrIHRvIGJlIHdyYXBwZWQgYXJvdW5kIHRoZVxuLy8gc3R5bGVzIGRlZmluZWQgaW5zaWRlIHRoZSBvYmplY3QgdGhhdCdzIHRoZSBwcm9wZXJ0eSdzIHZhbHVlLiBGb3Jcbi8vIGV4YW1wbGUgdG8gY3JlYXRlIGEgbWVkaWEgcXVlcnkgeW91IGNhbiBkbyBge1wiQG1lZGlhIHNjcmVlbiBhbmRcbi8vIChtaW4td2lkdGg6IDQwMHB4KVwiOiB7Li4ufX1gLlxuIiwKICAgICJleHBvcnQgdmFyIGJhc2UgPSB7XG4gIDg6IFwiQmFja3NwYWNlXCIsXG4gIDk6IFwiVGFiXCIsXG4gIDEwOiBcIkVudGVyXCIsXG4gIDEyOiBcIk51bUxvY2tcIixcbiAgMTM6IFwiRW50ZXJcIixcbiAgMTY6IFwiU2hpZnRcIixcbiAgMTc6IFwiQ29udHJvbFwiLFxuICAxODogXCJBbHRcIixcbiAgMjA6IFwiQ2Fwc0xvY2tcIixcbiAgMjc6IFwiRXNjYXBlXCIsXG4gIDMyOiBcIiBcIixcbiAgMzM6IFwiUGFnZVVwXCIsXG4gIDM0OiBcIlBhZ2VEb3duXCIsXG4gIDM1OiBcIkVuZFwiLFxuICAzNjogXCJIb21lXCIsXG4gIDM3OiBcIkFycm93TGVmdFwiLFxuICAzODogXCJBcnJvd1VwXCIsXG4gIDM5OiBcIkFycm93UmlnaHRcIixcbiAgNDA6IFwiQXJyb3dEb3duXCIsXG4gIDQ0OiBcIlByaW50U2NyZWVuXCIsXG4gIDQ1OiBcIkluc2VydFwiLFxuICA0NjogXCJEZWxldGVcIixcbiAgNTk6IFwiO1wiLFxuICA2MTogXCI9XCIsXG4gIDkxOiBcIk1ldGFcIixcbiAgOTI6IFwiTWV0YVwiLFxuICAxMDY6IFwiKlwiLFxuICAxMDc6IFwiK1wiLFxuICAxMDg6IFwiLFwiLFxuICAxMDk6IFwiLVwiLFxuICAxMTA6IFwiLlwiLFxuICAxMTE6IFwiL1wiLFxuICAxNDQ6IFwiTnVtTG9ja1wiLFxuICAxNDU6IFwiU2Nyb2xsTG9ja1wiLFxuICAxNjA6IFwiU2hpZnRcIixcbiAgMTYxOiBcIlNoaWZ0XCIsXG4gIDE2MjogXCJDb250cm9sXCIsXG4gIDE2MzogXCJDb250cm9sXCIsXG4gIDE2NDogXCJBbHRcIixcbiAgMTY1OiBcIkFsdFwiLFxuICAxNzM6IFwiLVwiLFxuICAxODY6IFwiO1wiLFxuICAxODc6IFwiPVwiLFxuICAxODg6IFwiLFwiLFxuICAxODk6IFwiLVwiLFxuICAxOTA6IFwiLlwiLFxuICAxOTE6IFwiL1wiLFxuICAxOTI6IFwiYFwiLFxuICAyMTk6IFwiW1wiLFxuICAyMjA6IFwiXFxcXFwiLFxuICAyMjE6IFwiXVwiLFxuICAyMjI6IFwiJ1wiXG59XG5cbmV4cG9ydCB2YXIgc2hpZnQgPSB7XG4gIDQ4OiBcIilcIixcbiAgNDk6IFwiIVwiLFxuICA1MDogXCJAXCIsXG4gIDUxOiBcIiNcIixcbiAgNTI6IFwiJFwiLFxuICA1MzogXCIlXCIsXG4gIDU0OiBcIl5cIixcbiAgNTU6IFwiJlwiLFxuICA1NjogXCIqXCIsXG4gIDU3OiBcIihcIixcbiAgNTk6IFwiOlwiLFxuICA2MTogXCIrXCIsXG4gIDE3MzogXCJfXCIsXG4gIDE4NjogXCI6XCIsXG4gIDE4NzogXCIrXCIsXG4gIDE4ODogXCI8XCIsXG4gIDE4OTogXCJfXCIsXG4gIDE5MDogXCI+XCIsXG4gIDE5MTogXCI/XCIsXG4gIDE5MjogXCJ+XCIsXG4gIDIxOTogXCJ7XCIsXG4gIDIyMDogXCJ8XCIsXG4gIDIyMTogXCJ9XCIsXG4gIDIyMjogXCJcXFwiXCJcbn1cblxudmFyIG1hYyA9IHR5cGVvZiBuYXZpZ2F0b3IgIT0gXCJ1bmRlZmluZWRcIiAmJiAvTWFjLy50ZXN0KG5hdmlnYXRvci5wbGF0Zm9ybSlcbnZhciBpZSA9IHR5cGVvZiBuYXZpZ2F0b3IgIT0gXCJ1bmRlZmluZWRcIiAmJiAvTVNJRSBcXGR8VHJpZGVudFxcLyg/Ols3LTldfFxcZHsyLH0pXFwuLipydjooXFxkKykvLmV4ZWMobmF2aWdhdG9yLnVzZXJBZ2VudClcblxuLy8gRmlsbCBpbiB0aGUgZGlnaXQga2V5c1xuZm9yICh2YXIgaSA9IDA7IGkgPCAxMDsgaSsrKSBiYXNlWzQ4ICsgaV0gPSBiYXNlWzk2ICsgaV0gPSBTdHJpbmcoaSlcblxuLy8gVGhlIGZ1bmN0aW9uIGtleXNcbmZvciAodmFyIGkgPSAxOyBpIDw9IDI0OyBpKyspIGJhc2VbaSArIDExMV0gPSBcIkZcIiArIGlcblxuLy8gQW5kIHRoZSBhbHBoYWJldGljIGtleXNcbmZvciAodmFyIGkgPSA2NTsgaSA8PSA5MDsgaSsrKSB7XG4gIGJhc2VbaV0gPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGkgKyAzMilcbiAgc2hpZnRbaV0gPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGkpXG59XG5cbi8vIEZvciBlYWNoIGNvZGUgdGhhdCBkb2Vzbid0IGhhdmUgYSBzaGlmdC1lcXVpdmFsZW50LCBjb3B5IHRoZSBiYXNlIG5hbWVcbmZvciAodmFyIGNvZGUgaW4gYmFzZSkgaWYgKCFzaGlmdC5oYXNPd25Qcm9wZXJ0eShjb2RlKSkgc2hpZnRbY29kZV0gPSBiYXNlW2NvZGVdXG5cbmV4cG9ydCBmdW5jdGlvbiBrZXlOYW1lKGV2ZW50KSB7XG4gIC8vIE9uIG1hY09TLCBrZXlzIGhlbGQgd2l0aCBTaGlmdCBhbmQgQ21kIGRvbid0IHJlZmxlY3QgdGhlIGVmZmVjdCBvZiBTaGlmdCBpbiBgLmtleWAuXG4gIC8vIE9uIElFLCBzaGlmdCBlZmZlY3QgaXMgbmV2ZXIgaW5jbHVkZWQgaW4gYC5rZXlgLlxuICB2YXIgaWdub3JlS2V5ID0gbWFjICYmIGV2ZW50Lm1ldGFLZXkgJiYgZXZlbnQuc2hpZnRLZXkgJiYgIWV2ZW50LmN0cmxLZXkgJiYgIWV2ZW50LmFsdEtleSB8fFxuICAgICAgaWUgJiYgZXZlbnQuc2hpZnRLZXkgJiYgZXZlbnQua2V5ICYmIGV2ZW50LmtleS5sZW5ndGggPT0gMSB8fFxuICAgICAgZXZlbnQua2V5ID09IFwiVW5pZGVudGlmaWVkXCJcbiAgdmFyIG5hbWUgPSAoIWlnbm9yZUtleSAmJiBldmVudC5rZXkpIHx8XG4gICAgKGV2ZW50LnNoaWZ0S2V5ID8gc2hpZnQgOiBiYXNlKVtldmVudC5rZXlDb2RlXSB8fFxuICAgIGV2ZW50LmtleSB8fCBcIlVuaWRlbnRpZmllZFwiXG4gIC8vIEVkZ2Ugc29tZXRpbWVzIHByb2R1Y2VzIHdyb25nIG5hbWVzIChJc3N1ZSAjMylcbiAgaWYgKG5hbWUgPT0gXCJFc2NcIikgbmFtZSA9IFwiRXNjYXBlXCJcbiAgaWYgKG5hbWUgPT0gXCJEZWxcIikgbmFtZSA9IFwiRGVsZXRlXCJcbiAgLy8gaHR0cHM6Ly9kZXZlbG9wZXIubWljcm9zb2Z0LmNvbS9lbi11cy9taWNyb3NvZnQtZWRnZS9wbGF0Zm9ybS9pc3N1ZXMvODg2MDU3MS9cbiAgaWYgKG5hbWUgPT0gXCJMZWZ0XCIpIG5hbWUgPSBcIkFycm93TGVmdFwiXG4gIGlmIChuYW1lID09IFwiVXBcIikgbmFtZSA9IFwiQXJyb3dVcFwiXG4gIGlmIChuYW1lID09IFwiUmlnaHRcIikgbmFtZSA9IFwiQXJyb3dSaWdodFwiXG4gIGlmIChuYW1lID09IFwiRG93blwiKSBuYW1lID0gXCJBcnJvd0Rvd25cIlxuICByZXR1cm4gbmFtZVxufVxuIiwKICAgICJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBjcmVsdCgpIHtcbiAgdmFyIGVsdCA9IGFyZ3VtZW50c1swXVxuICBpZiAodHlwZW9mIGVsdCA9PSBcInN0cmluZ1wiKSBlbHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KGVsdClcbiAgdmFyIGkgPSAxLCBuZXh0ID0gYXJndW1lbnRzWzFdXG4gIGlmIChuZXh0ICYmIHR5cGVvZiBuZXh0ID09IFwib2JqZWN0XCIgJiYgbmV4dC5ub2RlVHlwZSA9PSBudWxsICYmICFBcnJheS5pc0FycmF5KG5leHQpKSB7XG4gICAgZm9yICh2YXIgbmFtZSBpbiBuZXh0KSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG5leHQsIG5hbWUpKSB7XG4gICAgICB2YXIgdmFsdWUgPSBuZXh0W25hbWVdXG4gICAgICBpZiAodHlwZW9mIHZhbHVlID09IFwic3RyaW5nXCIpIGVsdC5zZXRBdHRyaWJ1dGUobmFtZSwgdmFsdWUpXG4gICAgICBlbHNlIGlmICh2YWx1ZSAhPSBudWxsKSBlbHRbbmFtZV0gPSB2YWx1ZVxuICAgIH1cbiAgICBpKytcbiAgfVxuICBmb3IgKDsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgYWRkKGVsdCwgYXJndW1lbnRzW2ldKVxuICByZXR1cm4gZWx0XG59XG5cbmZ1bmN0aW9uIGFkZChlbHQsIGNoaWxkKSB7XG4gIGlmICh0eXBlb2YgY2hpbGQgPT0gXCJzdHJpbmdcIikge1xuICAgIGVsdC5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShjaGlsZCkpXG4gIH0gZWxzZSBpZiAoY2hpbGQgPT0gbnVsbCkge1xuICB9IGVsc2UgaWYgKGNoaWxkLm5vZGVUeXBlICE9IG51bGwpIHtcbiAgICBlbHQuYXBwZW5kQ2hpbGQoY2hpbGQpXG4gIH0gZWxzZSBpZiAoQXJyYXkuaXNBcnJheShjaGlsZCkpIHtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNoaWxkLmxlbmd0aDsgaSsrKSBhZGQoZWx0LCBjaGlsZFtpXSlcbiAgfSBlbHNlIHtcbiAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcihcIlVuc3VwcG9ydGVkIGNoaWxkIG5vZGU6IFwiICsgY2hpbGQpXG4gIH1cbn1cbiIsCiAgICAiaW1wb3J0IHsgUmFuZ2VTZXQsIE1hcE1vZGUsIFJhbmdlVmFsdWUsIGZpbmRDbHVzdGVyQnJlYWssIEVkaXRvclNlbGVjdGlvbiwgRmFjZXQsIFN0YXRlRWZmZWN0LCBDaGFuZ2VTZXQsIFRleHQsIGZpbmRDb2x1bW4sIENoYXJDYXRlZ29yeSwgRWRpdG9yU3RhdGUsIEFubm90YXRpb24sIFRyYW5zYWN0aW9uLCBQcmVjLCBjb2RlUG9pbnRBdCwgY29kZVBvaW50U2l6ZSwgY29tYmluZUNvbmZpZywgU3RhdGVGaWVsZCwgUmFuZ2VTZXRCdWlsZGVyLCBjb3VudENvbHVtbiB9IGZyb20gJ0Bjb2RlbWlycm9yL3N0YXRlJztcbmltcG9ydCB7IFN0eWxlTW9kdWxlIH0gZnJvbSAnc3R5bGUtbW9kJztcbmltcG9ydCB7IGtleU5hbWUsIGJhc2UsIHNoaWZ0IH0gZnJvbSAndzNjLWtleW5hbWUnO1xuaW1wb3J0IGVsdCBmcm9tICdjcmVsdCc7XG5cbmxldCBuYXYgPSB0eXBlb2YgbmF2aWdhdG9yICE9IFwidW5kZWZpbmVkXCIgPyBuYXZpZ2F0b3IgOiB7IHVzZXJBZ2VudDogXCJcIiwgdmVuZG9yOiBcIlwiLCBwbGF0Zm9ybTogXCJcIiB9O1xubGV0IGRvYyA9IHR5cGVvZiBkb2N1bWVudCAhPSBcInVuZGVmaW5lZFwiID8gZG9jdW1lbnQgOiB7IGRvY3VtZW50RWxlbWVudDogeyBzdHlsZToge30gfSB9O1xuY29uc3QgaWVfZWRnZSA9IC8qQF9fUFVSRV9fKi8vRWRnZVxcLyhcXGQrKS8uZXhlYyhuYXYudXNlckFnZW50KTtcbmNvbnN0IGllX3VwdG8xMCA9IC8qQF9fUFVSRV9fKi8vTVNJRSBcXGQvLnRlc3QobmF2LnVzZXJBZ2VudCk7XG5jb25zdCBpZV8xMXVwID0gLypAX19QVVJFX18qLy9UcmlkZW50XFwvKD86WzctOV18XFxkezIsfSlcXC4uKnJ2OihcXGQrKS8uZXhlYyhuYXYudXNlckFnZW50KTtcbmNvbnN0IGllID0gISEoaWVfdXB0bzEwIHx8IGllXzExdXAgfHwgaWVfZWRnZSk7XG5jb25zdCBnZWNrbyA9ICFpZSAmJiAvKkBfX1BVUkVfXyovL2dlY2tvXFwvKFxcZCspL2kudGVzdChuYXYudXNlckFnZW50KTtcbmNvbnN0IGNocm9tZSA9ICFpZSAmJiAvKkBfX1BVUkVfXyovL0Nocm9tZVxcLyhcXGQrKS8uZXhlYyhuYXYudXNlckFnZW50KTtcbmNvbnN0IHdlYmtpdCA9IFwid2Via2l0Rm9udFNtb290aGluZ1wiIGluIGRvYy5kb2N1bWVudEVsZW1lbnQuc3R5bGU7XG5jb25zdCBzYWZhcmkgPSAhaWUgJiYgLypAX19QVVJFX18qLy9BcHBsZSBDb21wdXRlci8udGVzdChuYXYudmVuZG9yKTtcbmNvbnN0IGlvcyA9IHNhZmFyaSAmJiAoLypAX19QVVJFX18qLy9Nb2JpbGVcXC9cXHcrLy50ZXN0KG5hdi51c2VyQWdlbnQpIHx8IG5hdi5tYXhUb3VjaFBvaW50cyA+IDIpO1xudmFyIGJyb3dzZXIgPSB7XG4gICAgbWFjOiBpb3MgfHwgLypAX19QVVJFX18qLy9NYWMvLnRlc3QobmF2LnBsYXRmb3JtKSxcbiAgICB3aW5kb3dzOiAvKkBfX1BVUkVfXyovL1dpbi8udGVzdChuYXYucGxhdGZvcm0pLFxuICAgIGxpbnV4OiAvKkBfX1BVUkVfXyovL0xpbnV4fFgxMS8udGVzdChuYXYucGxhdGZvcm0pLFxuICAgIGllLFxuICAgIGllX3ZlcnNpb246IGllX3VwdG8xMCA/IGRvYy5kb2N1bWVudE1vZGUgfHwgNiA6IGllXzExdXAgPyAraWVfMTF1cFsxXSA6IGllX2VkZ2UgPyAraWVfZWRnZVsxXSA6IDAsXG4gICAgZ2Vja28sXG4gICAgZ2Vja29fdmVyc2lvbjogZ2Vja28gPyArKC8qQF9fUFVSRV9fKi8vRmlyZWZveFxcLyhcXGQrKS8uZXhlYyhuYXYudXNlckFnZW50KSB8fCBbMCwgMF0pWzFdIDogMCxcbiAgICBjaHJvbWU6ICEhY2hyb21lLFxuICAgIGNocm9tZV92ZXJzaW9uOiBjaHJvbWUgPyArY2hyb21lWzFdIDogMCxcbiAgICBpb3MsXG4gICAgYW5kcm9pZDogLypAX19QVVJFX18qLy9BbmRyb2lkXFxiLy50ZXN0KG5hdi51c2VyQWdlbnQpLFxuICAgIHdlYmtpdCxcbiAgICB3ZWJraXRfdmVyc2lvbjogd2Via2l0ID8gKygvKkBfX1BVUkVfXyovL1xcYkFwcGxlV2ViS2l0XFwvKFxcZCspLy5leGVjKG5hdi51c2VyQWdlbnQpIHx8IFswLCAwXSlbMV0gOiAwLFxuICAgIHNhZmFyaSxcbiAgICBzYWZhcmlfdmVyc2lvbjogc2FmYXJpID8gKygvKkBfX1BVUkVfXyovL1xcYlZlcnNpb25cXC8oXFxkKyhcXC5cXGQrKT8pLy5leGVjKG5hdi51c2VyQWdlbnQpIHx8IFswLCAwXSlbMV0gOiAwLFxuICAgIHRhYlNpemU6IGRvYy5kb2N1bWVudEVsZW1lbnQuc3R5bGUudGFiU2l6ZSAhPSBudWxsID8gXCJ0YWItc2l6ZVwiIDogXCItbW96LXRhYi1zaXplXCJcbn07XG5cbmZ1bmN0aW9uIGNvbWJpbmVBdHRycyhzb3VyY2UsIHRhcmdldCkge1xuICAgIGZvciAobGV0IG5hbWUgaW4gc291cmNlKSB7XG4gICAgICAgIGlmIChuYW1lID09IFwiY2xhc3NcIiAmJiB0YXJnZXQuY2xhc3MpXG4gICAgICAgICAgICB0YXJnZXQuY2xhc3MgKz0gXCIgXCIgKyBzb3VyY2UuY2xhc3M7XG4gICAgICAgIGVsc2UgaWYgKG5hbWUgPT0gXCJzdHlsZVwiICYmIHRhcmdldC5zdHlsZSlcbiAgICAgICAgICAgIHRhcmdldC5zdHlsZSArPSBcIjtcIiArIHNvdXJjZS5zdHlsZTtcbiAgICAgICAgZWxzZVxuICAgICAgICAgICAgdGFyZ2V0W25hbWVdID0gc291cmNlW25hbWVdO1xuICAgIH1cbiAgICByZXR1cm4gdGFyZ2V0O1xufVxuY29uc3Qgbm9BdHRycyA9IC8qQF9fUFVSRV9fKi9PYmplY3QuY3JlYXRlKG51bGwpO1xuZnVuY3Rpb24gYXR0cnNFcShhLCBiLCBpZ25vcmUpIHtcbiAgICBpZiAoYSA9PSBiKVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICBpZiAoIWEpXG4gICAgICAgIGEgPSBub0F0dHJzO1xuICAgIGlmICghYilcbiAgICAgICAgYiA9IG5vQXR0cnM7XG4gICAgbGV0IGtleXNBID0gT2JqZWN0LmtleXMoYSksIGtleXNCID0gT2JqZWN0LmtleXMoYik7XG4gICAgaWYgKGtleXNBLmxlbmd0aCAtIChpZ25vcmUgJiYga2V5c0EuaW5kZXhPZihpZ25vcmUpID4gLTEgPyAxIDogMCkgIT1cbiAgICAgICAga2V5c0IubGVuZ3RoIC0gKGlnbm9yZSAmJiBrZXlzQi5pbmRleE9mKGlnbm9yZSkgPiAtMSA/IDEgOiAwKSlcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIGZvciAobGV0IGtleSBvZiBrZXlzQSkge1xuICAgICAgICBpZiAoa2V5ICE9IGlnbm9yZSAmJiAoa2V5c0IuaW5kZXhPZihrZXkpID09IC0xIHx8IGFba2V5XSAhPT0gYltrZXldKSlcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgcmV0dXJuIHRydWU7XG59XG5mdW5jdGlvbiBzZXRBdHRycyhkb20sIGF0dHJzKSB7XG4gICAgZm9yIChsZXQgaSA9IGRvbS5hdHRyaWJ1dGVzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgICAgIGxldCBuYW1lID0gZG9tLmF0dHJpYnV0ZXNbaV0ubmFtZTtcbiAgICAgICAgaWYgKGF0dHJzW25hbWVdID09IG51bGwpXG4gICAgICAgICAgICBkb20ucmVtb3ZlQXR0cmlidXRlKG5hbWUpO1xuICAgIH1cbiAgICBmb3IgKGxldCBuYW1lIGluIGF0dHJzKSB7XG4gICAgICAgIGxldCB2YWx1ZSA9IGF0dHJzW25hbWVdO1xuICAgICAgICBpZiAobmFtZSA9PSBcInN0eWxlXCIpXG4gICAgICAgICAgICBkb20uc3R5bGUuY3NzVGV4dCA9IHZhbHVlO1xuICAgICAgICBlbHNlIGlmIChkb20uZ2V0QXR0cmlidXRlKG5hbWUpICE9IHZhbHVlKVxuICAgICAgICAgICAgZG9tLnNldEF0dHJpYnV0ZShuYW1lLCB2YWx1ZSk7XG4gICAgfVxufVxuZnVuY3Rpb24gdXBkYXRlQXR0cnMoZG9tLCBwcmV2LCBhdHRycykge1xuICAgIGxldCBjaGFuZ2VkID0gZmFsc2U7XG4gICAgaWYgKHByZXYpXG4gICAgICAgIGZvciAobGV0IG5hbWUgaW4gcHJldilcbiAgICAgICAgICAgIGlmICghKGF0dHJzICYmIG5hbWUgaW4gYXR0cnMpKSB7XG4gICAgICAgICAgICAgICAgY2hhbmdlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgaWYgKG5hbWUgPT0gXCJzdHlsZVwiKVxuICAgICAgICAgICAgICAgICAgICBkb20uc3R5bGUuY3NzVGV4dCA9IFwiXCI7XG4gICAgICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgICAgICBkb20ucmVtb3ZlQXR0cmlidXRlKG5hbWUpO1xuICAgICAgICAgICAgfVxuICAgIGlmIChhdHRycylcbiAgICAgICAgZm9yIChsZXQgbmFtZSBpbiBhdHRycylcbiAgICAgICAgICAgIGlmICghKHByZXYgJiYgcHJldltuYW1lXSA9PSBhdHRyc1tuYW1lXSkpIHtcbiAgICAgICAgICAgICAgICBjaGFuZ2VkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBpZiAobmFtZSA9PSBcInN0eWxlXCIpXG4gICAgICAgICAgICAgICAgICAgIGRvbS5zdHlsZS5jc3NUZXh0ID0gYXR0cnNbbmFtZV07XG4gICAgICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgICAgICBkb20uc2V0QXR0cmlidXRlKG5hbWUsIGF0dHJzW25hbWVdKTtcbiAgICAgICAgICAgIH1cbiAgICByZXR1cm4gY2hhbmdlZDtcbn1cbmZ1bmN0aW9uIGdldEF0dHJzKGRvbSkge1xuICAgIGxldCBhdHRycyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBkb20uYXR0cmlidXRlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICBsZXQgYXR0ciA9IGRvbS5hdHRyaWJ1dGVzW2ldO1xuICAgICAgICBhdHRyc1thdHRyLm5hbWVdID0gYXR0ci52YWx1ZTtcbiAgICB9XG4gICAgcmV0dXJuIGF0dHJzO1xufVxuXG4vKipcbldpZGdldHMgYWRkZWQgdG8gdGhlIGNvbnRlbnQgYXJlIGRlc2NyaWJlZCBieSBzdWJjbGFzc2VzIG9mIHRoaXNcbmNsYXNzLiBVc2luZyBhIGRlc2NyaXB0aW9uIG9iamVjdCBsaWtlIHRoYXQgbWFrZXMgaXQgcG9zc2libGUgdG9cbmRlbGF5IGNyZWF0aW5nIG9mIHRoZSBET00gc3RydWN0dXJlIGZvciBhIHdpZGdldCB1bnRpbCBpdCBpc1xubmVlZGVkLCBhbmQgdG8gYXZvaWQgcmVkcmF3aW5nIHdpZGdldHMgZXZlbiBpZiB0aGUgZGVjb3JhdGlvbnNcbnRoYXQgZGVmaW5lIHRoZW0gYXJlIHJlY3JlYXRlZC5cbiovXG5jbGFzcyBXaWRnZXRUeXBlIHtcbiAgICAvKipcbiAgICBDb21wYXJlIHRoaXMgaW5zdGFuY2UgdG8gYW5vdGhlciBpbnN0YW5jZSBvZiB0aGUgc2FtZSB0eXBlLlxuICAgIChUeXBlU2NyaXB0IGNhbid0IGV4cHJlc3MgdGhpcywgYnV0IG9ubHkgaW5zdGFuY2VzIG9mIHRoZSBzYW1lXG4gICAgc3BlY2lmaWMgY2xhc3Mgd2lsbCBiZSBwYXNzZWQgdG8gdGhpcyBtZXRob2QuKSBUaGlzIGlzIHVzZWQgdG9cbiAgICBhdm9pZCByZWRyYXdpbmcgd2lkZ2V0cyB3aGVuIHRoZXkgYXJlIHJlcGxhY2VkIGJ5IGEgbmV3XG4gICAgZGVjb3JhdGlvbiBvZiB0aGUgc2FtZSB0eXBlLiBUaGUgZGVmYXVsdCBpbXBsZW1lbnRhdGlvbiBqdXN0XG4gICAgcmV0dXJucyBgZmFsc2VgLCB3aGljaCB3aWxsIGNhdXNlIG5ldyBpbnN0YW5jZXMgb2YgdGhlIHdpZGdldCB0b1xuICAgIGFsd2F5cyBiZSByZWRyYXduLlxuICAgICovXG4gICAgZXEod2lkZ2V0KSB7IHJldHVybiBmYWxzZTsgfVxuICAgIC8qKlxuICAgIFVwZGF0ZSBhIERPTSBlbGVtZW50IGNyZWF0ZWQgYnkgYSB3aWRnZXQgb2YgdGhlIHNhbWUgdHlwZSAoYnV0XG4gICAgZGlmZmVyZW50LCBub24tYGVxYCBjb250ZW50KSB0byByZWZsZWN0IHRoaXMgd2lkZ2V0LiBNYXkgcmV0dXJuXG4gICAgdHJ1ZSB0byBpbmRpY2F0ZSB0aGF0IGl0IGNvdWxkIHVwZGF0ZSwgZmFsc2UgdG8gaW5kaWNhdGUgaXRcbiAgICBjb3VsZG4ndCAoaW4gd2hpY2ggY2FzZSB0aGUgd2lkZ2V0IHdpbGwgYmUgcmVkcmF3bikuIFRoZSBkZWZhdWx0XG4gICAgaW1wbGVtZW50YXRpb24ganVzdCByZXR1cm5zIGZhbHNlLlxuICAgICovXG4gICAgdXBkYXRlRE9NKGRvbSwgdmlldykgeyByZXR1cm4gZmFsc2U7IH1cbiAgICAvKipcbiAgICBAaW50ZXJuYWxcbiAgICAqL1xuICAgIGNvbXBhcmUob3RoZXIpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMgPT0gb3RoZXIgfHwgdGhpcy5jb25zdHJ1Y3RvciA9PSBvdGhlci5jb25zdHJ1Y3RvciAmJiB0aGlzLmVxKG90aGVyKTtcbiAgICB9XG4gICAgLyoqXG4gICAgVGhlIGVzdGltYXRlZCBoZWlnaHQgdGhpcyB3aWRnZXQgd2lsbCBoYXZlLCB0byBiZSB1c2VkIHdoZW5cbiAgICBlc3RpbWF0aW5nIHRoZSBoZWlnaHQgb2YgY29udGVudCB0aGF0IGhhc24ndCBiZWVuIGRyYXduLiBNYXlcbiAgICByZXR1cm4gLTEgdG8gaW5kaWNhdGUgeW91IGRvbid0IGtub3cuIFRoZSBkZWZhdWx0IGltcGxlbWVudGF0aW9uXG4gICAgcmV0dXJucyAtMS5cbiAgICAqL1xuICAgIGdldCBlc3RpbWF0ZWRIZWlnaHQoKSB7IHJldHVybiAtMTsgfVxuICAgIC8qKlxuICAgIEZvciBpbmxpbmUgd2lkZ2V0cyB0aGF0IGFyZSBkaXNwbGF5ZWQgaW5saW5lIChhcyBvcHBvc2VkIHRvXG4gICAgYGlubGluZS1ibG9ja2ApIGFuZCBpbnRyb2R1Y2UgbGluZSBicmVha3MgKHRocm91Z2ggYDxicj5gIHRhZ3NcbiAgICBvciB0ZXh0dWFsIG5ld2xpbmVzKSwgdGhpcyBtdXN0IGluZGljYXRlIHRoZSBhbW91bnQgb2YgbGluZVxuICAgIGJyZWFrcyB0aGV5IGludHJvZHVjZS4gRGVmYXVsdHMgdG8gMC5cbiAgICAqL1xuICAgIGdldCBsaW5lQnJlYWtzKCkgeyByZXR1cm4gMDsgfVxuICAgIC8qKlxuICAgIENhbiBiZSB1c2VkIHRvIGNvbmZpZ3VyZSB3aGljaCBraW5kcyBvZiBldmVudHMgaW5zaWRlIHRoZSB3aWRnZXRcbiAgICBzaG91bGQgYmUgaWdub3JlZCBieSB0aGUgZWRpdG9yLiBUaGUgZGVmYXVsdCBpcyB0byBpZ25vcmUgYWxsXG4gICAgZXZlbnRzLlxuICAgICovXG4gICAgaWdub3JlRXZlbnQoZXZlbnQpIHsgcmV0dXJuIHRydWU7IH1cbiAgICAvKipcbiAgICBPdmVycmlkZSB0aGUgd2F5IHNjcmVlbiBjb29yZGluYXRlcyBmb3IgcG9zaXRpb25zIGF0L2luIHRoZVxuICAgIHdpZGdldCBhcmUgZm91bmQuIGBwb3NgIHdpbGwgYmUgdGhlIG9mZnNldCBpbnRvIHRoZSB3aWRnZXQsIGFuZFxuICAgIGBzaWRlYCB0aGUgc2lkZSBvZiB0aGUgcG9zaXRpb24gdGhhdCBpcyBiZWluZyBxdWVyaWVk4oCUbGVzcyB0aGFuXG4gICAgemVybyBmb3IgYmVmb3JlLCBncmVhdGVyIHRoYW4gemVybyBmb3IgYWZ0ZXIsIGFuZCB6ZXJvIGZvclxuICAgIGRpcmVjdGx5IGF0IHRoYXQgcG9zaXRpb24uXG4gICAgKi9cbiAgICBjb29yZHNBdChkb20sIHBvcywgc2lkZSkgeyByZXR1cm4gbnVsbDsgfVxuICAgIC8qKlxuICAgIEBpbnRlcm5hbFxuICAgICovXG4gICAgZ2V0IGlzSGlkZGVuKCkgeyByZXR1cm4gZmFsc2U7IH1cbiAgICAvKipcbiAgICBAaW50ZXJuYWxcbiAgICAqL1xuICAgIGdldCBlZGl0YWJsZSgpIHsgcmV0dXJuIGZhbHNlOyB9XG4gICAgLyoqXG4gICAgVGhpcyBpcyBjYWxsZWQgd2hlbiB0aGUgYW4gaW5zdGFuY2Ugb2YgdGhlIHdpZGdldCBpcyByZW1vdmVkXG4gICAgZnJvbSB0aGUgZWRpdG9yIHZpZXcuXG4gICAgKi9cbiAgICBkZXN0cm95KGRvbSkgeyB9XG59XG4vKipcblRoZSBkaWZmZXJlbnQgdHlwZXMgb2YgYmxvY2tzIHRoYXQgY2FuIG9jY3VyIGluIGFuIGVkaXRvciB2aWV3LlxuKi9cbnZhciBCbG9ja1R5cGUgPSAvKkBfX1BVUkVfXyovKGZ1bmN0aW9uIChCbG9ja1R5cGUpIHtcbiAgICAvKipcbiAgICBBIGxpbmUgb2YgdGV4dC5cbiAgICAqL1xuICAgIEJsb2NrVHlwZVtCbG9ja1R5cGVbXCJUZXh0XCJdID0gMF0gPSBcIlRleHRcIjtcbiAgICAvKipcbiAgICBBIGJsb2NrIHdpZGdldCBhc3NvY2lhdGVkIHdpdGggdGhlIHBvc2l0aW9uIGFmdGVyIGl0LlxuICAgICovXG4gICAgQmxvY2tUeXBlW0Jsb2NrVHlwZVtcIldpZGdldEJlZm9yZVwiXSA9IDFdID0gXCJXaWRnZXRCZWZvcmVcIjtcbiAgICAvKipcbiAgICBBIGJsb2NrIHdpZGdldCBhc3NvY2lhdGVkIHdpdGggdGhlIHBvc2l0aW9uIGJlZm9yZSBpdC5cbiAgICAqL1xuICAgIEJsb2NrVHlwZVtCbG9ja1R5cGVbXCJXaWRnZXRBZnRlclwiXSA9IDJdID0gXCJXaWRnZXRBZnRlclwiO1xuICAgIC8qKlxuICAgIEEgYmxvY2sgd2lkZ2V0IFtyZXBsYWNpbmddKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jdmlldy5EZWNvcmF0aW9uXnJlcGxhY2UpIGEgcmFuZ2Ugb2YgY29udGVudC5cbiAgICAqL1xuICAgIEJsb2NrVHlwZVtCbG9ja1R5cGVbXCJXaWRnZXRSYW5nZVwiXSA9IDNdID0gXCJXaWRnZXRSYW5nZVwiO1xucmV0dXJuIEJsb2NrVHlwZX0pKEJsb2NrVHlwZSB8fCAoQmxvY2tUeXBlID0ge30pKTtcbi8qKlxuQSBkZWNvcmF0aW9uIHByb3ZpZGVzIGluZm9ybWF0aW9uIG9uIGhvdyB0byBkcmF3IG9yIHN0eWxlIGEgcGllY2Vcbm9mIGNvbnRlbnQuIFlvdSdsbCB1c3VhbGx5IHVzZSBpdCB3cmFwcGVkIGluIGFcbltgUmFuZ2VgXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI3N0YXRlLlJhbmdlKSwgd2hpY2ggYWRkcyBhIHN0YXJ0IGFuZCBlbmQgcG9zaXRpb24uXG5Abm9uYWJzdHJhY3RcbiovXG5jbGFzcyBEZWNvcmF0aW9uIGV4dGVuZHMgUmFuZ2VWYWx1ZSB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgLyoqXG4gICAgQGludGVybmFsXG4gICAgKi9cbiAgICBzdGFydFNpZGUsIFxuICAgIC8qKlxuICAgIEBpbnRlcm5hbFxuICAgICovXG4gICAgZW5kU2lkZSwgXG4gICAgLyoqXG4gICAgQGludGVybmFsXG4gICAgKi9cbiAgICB3aWRnZXQsIFxuICAgIC8qKlxuICAgIFRoZSBjb25maWcgb2JqZWN0IHVzZWQgdG8gY3JlYXRlIHRoaXMgZGVjb3JhdGlvbi4gWW91IGNhblxuICAgIGluY2x1ZGUgYWRkaXRpb25hbCBwcm9wZXJ0aWVzIGluIHRoZXJlIHRvIHN0b3JlIG1ldGFkYXRhIGFib3V0XG4gICAgeW91ciBkZWNvcmF0aW9uLlxuICAgICovXG4gICAgc3BlYykge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLnN0YXJ0U2lkZSA9IHN0YXJ0U2lkZTtcbiAgICAgICAgdGhpcy5lbmRTaWRlID0gZW5kU2lkZTtcbiAgICAgICAgdGhpcy53aWRnZXQgPSB3aWRnZXQ7XG4gICAgICAgIHRoaXMuc3BlYyA9IHNwZWM7XG4gICAgfVxuICAgIC8qKlxuICAgIEBpbnRlcm5hbFxuICAgICovXG4gICAgZ2V0IGhlaWdodFJlbGV2YW50KCkgeyByZXR1cm4gZmFsc2U7IH1cbiAgICAvKipcbiAgICBDcmVhdGUgYSBtYXJrIGRlY29yYXRpb24sIHdoaWNoIGluZmx1ZW5jZXMgdGhlIHN0eWxpbmcgb2YgdGhlXG4gICAgY29udGVudCBpbiBpdHMgcmFuZ2UuIE5lc3RlZCBtYXJrIGRlY29yYXRpb25zIHdpbGwgY2F1c2UgbmVzdGVkXG4gICAgRE9NIGVsZW1lbnRzIHRvIGJlIGNyZWF0ZWQuIE5lc3Rpbmcgb3JkZXIgaXMgZGV0ZXJtaW5lZCBieVxuICAgIHByZWNlZGVuY2Ugb2YgdGhlIFtmYWNldF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyN2aWV3LkVkaXRvclZpZXdeZGVjb3JhdGlvbnMpLCB3aXRoXG4gICAgdGhlIGhpZ2hlci1wcmVjZWRlbmNlIGRlY29yYXRpb25zIGNyZWF0aW5nIHRoZSBpbm5lciBET00gbm9kZXMuXG4gICAgU3VjaCBlbGVtZW50cyBhcmUgc3BsaXQgb24gbGluZSBib3VuZGFyaWVzIGFuZCBvbiB0aGUgYm91bmRhcmllc1xuICAgIG9mIGxvd2VyLXByZWNlZGVuY2UgZGVjb3JhdGlvbnMuXG4gICAgKi9cbiAgICBzdGF0aWMgbWFyayhzcGVjKSB7XG4gICAgICAgIHJldHVybiBuZXcgTWFya0RlY29yYXRpb24oc3BlYyk7XG4gICAgfVxuICAgIC8qKlxuICAgIENyZWF0ZSBhIHdpZGdldCBkZWNvcmF0aW9uLCB3aGljaCBkaXNwbGF5cyBhIERPTSBlbGVtZW50IGF0IHRoZVxuICAgIGdpdmVuIHBvc2l0aW9uLlxuICAgICovXG4gICAgc3RhdGljIHdpZGdldChzcGVjKSB7XG4gICAgICAgIGxldCBzaWRlID0gTWF0aC5tYXgoLTEwMDAwLCBNYXRoLm1pbigxMDAwMCwgc3BlYy5zaWRlIHx8IDApKSwgYmxvY2sgPSAhIXNwZWMuYmxvY2s7XG4gICAgICAgIHNpZGUgKz0gKGJsb2NrICYmICFzcGVjLmlubGluZU9yZGVyKVxuICAgICAgICAgICAgPyAoc2lkZSA+IDAgPyAzMDAwMDAwMDAgLyogU2lkZS5CbG9ja0FmdGVyICovIDogLTQwMDAwMDAwMCAvKiBTaWRlLkJsb2NrQmVmb3JlICovKVxuICAgICAgICAgICAgOiAoc2lkZSA+IDAgPyAxMDAwMDAwMDAgLyogU2lkZS5JbmxpbmVBZnRlciAqLyA6IC0xMDAwMDAwMDAgLyogU2lkZS5JbmxpbmVCZWZvcmUgKi8pO1xuICAgICAgICByZXR1cm4gbmV3IFBvaW50RGVjb3JhdGlvbihzcGVjLCBzaWRlLCBzaWRlLCBibG9jaywgc3BlYy53aWRnZXQgfHwgbnVsbCwgZmFsc2UpO1xuICAgIH1cbiAgICAvKipcbiAgICBDcmVhdGUgYSByZXBsYWNlIGRlY29yYXRpb24gd2hpY2ggcmVwbGFjZXMgdGhlIGdpdmVuIHJhbmdlIHdpdGhcbiAgICBhIHdpZGdldCwgb3Igc2ltcGx5IGhpZGVzIGl0LlxuICAgICovXG4gICAgc3RhdGljIHJlcGxhY2Uoc3BlYykge1xuICAgICAgICBsZXQgYmxvY2sgPSAhIXNwZWMuYmxvY2ssIHN0YXJ0U2lkZSwgZW5kU2lkZTtcbiAgICAgICAgaWYgKHNwZWMuaXNCbG9ja0dhcCkge1xuICAgICAgICAgICAgc3RhcnRTaWRlID0gLTUwMDAwMDAwMCAvKiBTaWRlLkdhcFN0YXJ0ICovO1xuICAgICAgICAgICAgZW5kU2lkZSA9IDQwMDAwMDAwMCAvKiBTaWRlLkdhcEVuZCAqLztcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGxldCB7IHN0YXJ0LCBlbmQgfSA9IGdldEluY2x1c2l2ZShzcGVjLCBibG9jayk7XG4gICAgICAgICAgICBzdGFydFNpZGUgPSAoc3RhcnQgPyAoYmxvY2sgPyAtMzAwMDAwMDAwIC8qIFNpZGUuQmxvY2tJbmNTdGFydCAqLyA6IC0xIC8qIFNpZGUuSW5saW5lSW5jU3RhcnQgKi8pIDogNTAwMDAwMDAwIC8qIFNpZGUuTm9uSW5jU3RhcnQgKi8pIC0gMTtcbiAgICAgICAgICAgIGVuZFNpZGUgPSAoZW5kID8gKGJsb2NrID8gMjAwMDAwMDAwIC8qIFNpZGUuQmxvY2tJbmNFbmQgKi8gOiAxIC8qIFNpZGUuSW5saW5lSW5jRW5kICovKSA6IC02MDAwMDAwMDAgLyogU2lkZS5Ob25JbmNFbmQgKi8pICsgMTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbmV3IFBvaW50RGVjb3JhdGlvbihzcGVjLCBzdGFydFNpZGUsIGVuZFNpZGUsIGJsb2NrLCBzcGVjLndpZGdldCB8fCBudWxsLCB0cnVlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgQ3JlYXRlIGEgbGluZSBkZWNvcmF0aW9uLCB3aGljaCBjYW4gYWRkIERPTSBhdHRyaWJ1dGVzIHRvIHRoZVxuICAgIGxpbmUgc3RhcnRpbmcgYXQgdGhlIGdpdmVuIHBvc2l0aW9uLlxuICAgICovXG4gICAgc3RhdGljIGxpbmUoc3BlYykge1xuICAgICAgICByZXR1cm4gbmV3IExpbmVEZWNvcmF0aW9uKHNwZWMpO1xuICAgIH1cbiAgICAvKipcbiAgICBCdWlsZCBhIFtgRGVjb3JhdGlvblNldGBdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jdmlldy5EZWNvcmF0aW9uU2V0KSBmcm9tIHRoZSBnaXZlblxuICAgIGRlY29yYXRlZCByYW5nZSBvciByYW5nZXMuIElmIHRoZSByYW5nZXMgYXJlbid0IGFscmVhZHkgc29ydGVkLFxuICAgIHBhc3MgYHRydWVgIGZvciBgc29ydGAgdG8gbWFrZSB0aGUgbGlicmFyeSBzb3J0IHRoZW0gZm9yIHlvdS5cbiAgICAqL1xuICAgIHN0YXRpYyBzZXQob2YsIHNvcnQgPSBmYWxzZSkge1xuICAgICAgICByZXR1cm4gUmFuZ2VTZXQub2Yob2YsIHNvcnQpO1xuICAgIH1cbiAgICAvKipcbiAgICBAaW50ZXJuYWxcbiAgICAqL1xuICAgIGhhc0hlaWdodCgpIHsgcmV0dXJuIHRoaXMud2lkZ2V0ID8gdGhpcy53aWRnZXQuZXN0aW1hdGVkSGVpZ2h0ID4gLTEgOiBmYWxzZTsgfVxufVxuLyoqXG5UaGUgZW1wdHkgc2V0IG9mIGRlY29yYXRpb25zLlxuKi9cbkRlY29yYXRpb24ubm9uZSA9IFJhbmdlU2V0LmVtcHR5O1xuY2xhc3MgTWFya0RlY29yYXRpb24gZXh0ZW5kcyBEZWNvcmF0aW9uIHtcbiAgICBjb25zdHJ1Y3RvcihzcGVjKSB7XG4gICAgICAgIGxldCB7IHN0YXJ0LCBlbmQgfSA9IGdldEluY2x1c2l2ZShzcGVjKTtcbiAgICAgICAgc3VwZXIoc3RhcnQgPyAtMSAvKiBTaWRlLklubGluZUluY1N0YXJ0ICovIDogNTAwMDAwMDAwIC8qIFNpZGUuTm9uSW5jU3RhcnQgKi8sIGVuZCA/IDEgLyogU2lkZS5JbmxpbmVJbmNFbmQgKi8gOiAtNjAwMDAwMDAwIC8qIFNpZGUuTm9uSW5jRW5kICovLCBudWxsLCBzcGVjKTtcbiAgICAgICAgdGhpcy50YWdOYW1lID0gc3BlYy50YWdOYW1lIHx8IFwic3BhblwiO1xuICAgICAgICB0aGlzLmF0dHJzID0gc3BlYy5jbGFzcyAmJiBzcGVjLmF0dHJpYnV0ZXMgPyBjb21iaW5lQXR0cnMoc3BlYy5hdHRyaWJ1dGVzLCB7IGNsYXNzOiBzcGVjLmNsYXNzIH0pXG4gICAgICAgICAgICA6IHNwZWMuY2xhc3MgPyB7IGNsYXNzOiBzcGVjLmNsYXNzIH0gOiBzcGVjLmF0dHJpYnV0ZXMgfHwgbm9BdHRycztcbiAgICB9XG4gICAgZXEob3RoZXIpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMgPT0gb3RoZXIgfHwgb3RoZXIgaW5zdGFuY2VvZiBNYXJrRGVjb3JhdGlvbiAmJiB0aGlzLnRhZ05hbWUgPT0gb3RoZXIudGFnTmFtZSAmJiBhdHRyc0VxKHRoaXMuYXR0cnMsIG90aGVyLmF0dHJzKTtcbiAgICB9XG4gICAgcmFuZ2UoZnJvbSwgdG8gPSBmcm9tKSB7XG4gICAgICAgIGlmIChmcm9tID49IHRvKVxuICAgICAgICAgICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoXCJNYXJrIGRlY29yYXRpb25zIG1heSBub3QgYmUgZW1wdHlcIik7XG4gICAgICAgIHJldHVybiBzdXBlci5yYW5nZShmcm9tLCB0byk7XG4gICAgfVxufVxuTWFya0RlY29yYXRpb24ucHJvdG90eXBlLnBvaW50ID0gZmFsc2U7XG5jbGFzcyBMaW5lRGVjb3JhdGlvbiBleHRlbmRzIERlY29yYXRpb24ge1xuICAgIGNvbnN0cnVjdG9yKHNwZWMpIHtcbiAgICAgICAgc3VwZXIoLTIwMDAwMDAwMCAvKiBTaWRlLkxpbmUgKi8sIC0yMDAwMDAwMDAgLyogU2lkZS5MaW5lICovLCBudWxsLCBzcGVjKTtcbiAgICB9XG4gICAgZXEob3RoZXIpIHtcbiAgICAgICAgcmV0dXJuIG90aGVyIGluc3RhbmNlb2YgTGluZURlY29yYXRpb24gJiZcbiAgICAgICAgICAgIHRoaXMuc3BlYy5jbGFzcyA9PSBvdGhlci5zcGVjLmNsYXNzICYmXG4gICAgICAgICAgICBhdHRyc0VxKHRoaXMuc3BlYy5hdHRyaWJ1dGVzLCBvdGhlci5zcGVjLmF0dHJpYnV0ZXMpO1xuICAgIH1cbiAgICByYW5nZShmcm9tLCB0byA9IGZyb20pIHtcbiAgICAgICAgaWYgKHRvICE9IGZyb20pXG4gICAgICAgICAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcihcIkxpbmUgZGVjb3JhdGlvbiByYW5nZXMgbXVzdCBiZSB6ZXJvLWxlbmd0aFwiKTtcbiAgICAgICAgcmV0dXJuIHN1cGVyLnJhbmdlKGZyb20sIHRvKTtcbiAgICB9XG59XG5MaW5lRGVjb3JhdGlvbi5wcm90b3R5cGUubWFwTW9kZSA9IE1hcE1vZGUuVHJhY2tCZWZvcmU7XG5MaW5lRGVjb3JhdGlvbi5wcm90b3R5cGUucG9pbnQgPSB0cnVlO1xuY2xhc3MgUG9pbnREZWNvcmF0aW9uIGV4dGVuZHMgRGVjb3JhdGlvbiB7XG4gICAgY29uc3RydWN0b3Ioc3BlYywgc3RhcnRTaWRlLCBlbmRTaWRlLCBibG9jaywgd2lkZ2V0LCBpc1JlcGxhY2UpIHtcbiAgICAgICAgc3VwZXIoc3RhcnRTaWRlLCBlbmRTaWRlLCB3aWRnZXQsIHNwZWMpO1xuICAgICAgICB0aGlzLmJsb2NrID0gYmxvY2s7XG4gICAgICAgIHRoaXMuaXNSZXBsYWNlID0gaXNSZXBsYWNlO1xuICAgICAgICB0aGlzLm1hcE1vZGUgPSAhYmxvY2sgPyBNYXBNb2RlLlRyYWNrRGVsIDogc3RhcnRTaWRlIDw9IDAgPyBNYXBNb2RlLlRyYWNrQmVmb3JlIDogTWFwTW9kZS5UcmFja0FmdGVyO1xuICAgIH1cbiAgICAvLyBPbmx5IHJlbGV2YW50IHdoZW4gdGhpcy5ibG9jayA9PSB0cnVlXG4gICAgZ2V0IHR5cGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnN0YXJ0U2lkZSAhPSB0aGlzLmVuZFNpZGUgPyBCbG9ja1R5cGUuV2lkZ2V0UmFuZ2VcbiAgICAgICAgICAgIDogdGhpcy5zdGFydFNpZGUgPD0gMCA/IEJsb2NrVHlwZS5XaWRnZXRCZWZvcmUgOiBCbG9ja1R5cGUuV2lkZ2V0QWZ0ZXI7XG4gICAgfVxuICAgIGdldCBoZWlnaHRSZWxldmFudCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYmxvY2sgfHwgISF0aGlzLndpZGdldCAmJiAodGhpcy53aWRnZXQuZXN0aW1hdGVkSGVpZ2h0ID49IDUgfHwgdGhpcy53aWRnZXQubGluZUJyZWFrcyA+IDApO1xuICAgIH1cbiAgICBlcShvdGhlcikge1xuICAgICAgICByZXR1cm4gb3RoZXIgaW5zdGFuY2VvZiBQb2ludERlY29yYXRpb24gJiZcbiAgICAgICAgICAgIHdpZGdldHNFcSh0aGlzLndpZGdldCwgb3RoZXIud2lkZ2V0KSAmJlxuICAgICAgICAgICAgdGhpcy5ibG9jayA9PSBvdGhlci5ibG9jayAmJlxuICAgICAgICAgICAgdGhpcy5zdGFydFNpZGUgPT0gb3RoZXIuc3RhcnRTaWRlICYmIHRoaXMuZW5kU2lkZSA9PSBvdGhlci5lbmRTaWRlO1xuICAgIH1cbiAgICByYW5nZShmcm9tLCB0byA9IGZyb20pIHtcbiAgICAgICAgaWYgKHRoaXMuaXNSZXBsYWNlICYmIChmcm9tID4gdG8gfHwgKGZyb20gPT0gdG8gJiYgdGhpcy5zdGFydFNpZGUgPiAwICYmIHRoaXMuZW5kU2lkZSA8PSAwKSkpXG4gICAgICAgICAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcihcIkludmFsaWQgcmFuZ2UgZm9yIHJlcGxhY2VtZW50IGRlY29yYXRpb25cIik7XG4gICAgICAgIGlmICghdGhpcy5pc1JlcGxhY2UgJiYgdG8gIT0gZnJvbSlcbiAgICAgICAgICAgIHRocm93IG5ldyBSYW5nZUVycm9yKFwiV2lkZ2V0IGRlY29yYXRpb25zIGNhbiBvbmx5IGhhdmUgemVyby1sZW5ndGggcmFuZ2VzXCIpO1xuICAgICAgICByZXR1cm4gc3VwZXIucmFuZ2UoZnJvbSwgdG8pO1xuICAgIH1cbn1cblBvaW50RGVjb3JhdGlvbi5wcm90b3R5cGUucG9pbnQgPSB0cnVlO1xuZnVuY3Rpb24gZ2V0SW5jbHVzaXZlKHNwZWMsIGJsb2NrID0gZmFsc2UpIHtcbiAgICBsZXQgeyBpbmNsdXNpdmVTdGFydDogc3RhcnQsIGluY2x1c2l2ZUVuZDogZW5kIH0gPSBzcGVjO1xuICAgIGlmIChzdGFydCA9PSBudWxsKVxuICAgICAgICBzdGFydCA9IHNwZWMuaW5jbHVzaXZlO1xuICAgIGlmIChlbmQgPT0gbnVsbClcbiAgICAgICAgZW5kID0gc3BlYy5pbmNsdXNpdmU7XG4gICAgcmV0dXJuIHsgc3RhcnQ6IHN0YXJ0ICE9PSBudWxsICYmIHN0YXJ0ICE9PSB2b2lkIDAgPyBzdGFydCA6IGJsb2NrLCBlbmQ6IGVuZCAhPT0gbnVsbCAmJiBlbmQgIT09IHZvaWQgMCA/IGVuZCA6IGJsb2NrIH07XG59XG5mdW5jdGlvbiB3aWRnZXRzRXEoYSwgYikge1xuICAgIHJldHVybiBhID09IGIgfHwgISEoYSAmJiBiICYmIGEuY29tcGFyZShiKSk7XG59XG5mdW5jdGlvbiBhZGRSYW5nZShmcm9tLCB0bywgcmFuZ2VzLCBtYXJnaW4gPSAwKSB7XG4gICAgbGV0IGxhc3QgPSByYW5nZXMubGVuZ3RoIC0gMTtcbiAgICBpZiAobGFzdCA+PSAwICYmIHJhbmdlc1tsYXN0XSArIG1hcmdpbiA+PSBmcm9tKVxuICAgICAgICByYW5nZXNbbGFzdF0gPSBNYXRoLm1heChyYW5nZXNbbGFzdF0sIHRvKTtcbiAgICBlbHNlXG4gICAgICAgIHJhbmdlcy5wdXNoKGZyb20sIHRvKTtcbn1cbi8qKlxuQSBibG9jayB3cmFwcGVyIGRlZmluZXMgYSBET00gbm9kZSB0aGF0IHdyYXBzIGxpbmVzIG9yIG90aGVyIGJsb2NrXG53cmFwcGVycyBhdCB0aGUgdG9wIG9mIHRoZSBkb2N1bWVudC4gSXQgYWZmZWN0cyBhbnkgbGluZSBvciBibG9ja1xud2lkZ2V0IHRoYXQgc3RhcnRzIGluc2lkZSBpdHMgcmFuZ2UsIGluY2x1ZGluZyBibG9ja3Mgc3RhcnRpbmdcbmRpcmVjdGx5IGF0IGBmcm9tYCBidXQgbm90IGluY2x1ZGluZyBgdG9gLlxuKi9cbmNsYXNzIEJsb2NrV3JhcHBlciBleHRlbmRzIFJhbmdlVmFsdWUge1xuICAgIGNvbnN0cnVjdG9yKHRhZ05hbWUsIGF0dHJpYnV0ZXMpIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy50YWdOYW1lID0gdGFnTmFtZTtcbiAgICAgICAgdGhpcy5hdHRyaWJ1dGVzID0gYXR0cmlidXRlcztcbiAgICB9XG4gICAgZXEob3RoZXIpIHtcbiAgICAgICAgcmV0dXJuIG90aGVyID09IHRoaXMgfHxcbiAgICAgICAgICAgIG90aGVyIGluc3RhbmNlb2YgQmxvY2tXcmFwcGVyICYmIHRoaXMudGFnTmFtZSA9PSBvdGhlci50YWdOYW1lICYmIGF0dHJzRXEodGhpcy5hdHRyaWJ1dGVzLCBvdGhlci5hdHRyaWJ1dGVzKTtcbiAgICB9XG4gICAgLyoqXG4gICAgQ3JlYXRlIGEgYmxvY2sgd3JhcHBlciBvYmplY3Qgd2l0aCB0aGUgZ2l2ZW4gdGFnIG5hbWUgYW5kXG4gICAgYXR0cmlidXRlcy5cbiAgICAqL1xuICAgIHN0YXRpYyBjcmVhdGUoc3BlYykge1xuICAgICAgICByZXR1cm4gbmV3IEJsb2NrV3JhcHBlcihzcGVjLnRhZ05hbWUsIHNwZWMuYXR0cmlidXRlcyB8fCBub0F0dHJzKTtcbiAgICB9XG4gICAgLyoqXG4gICAgQ3JlYXRlIGEgcmFuZ2Ugc2V0IGZyb20gdGhlIGdpdmVuIGJsb2NrIHdyYXBwZXIgcmFuZ2VzLlxuICAgICovXG4gICAgc3RhdGljIHNldChvZiwgc29ydCA9IGZhbHNlKSB7XG4gICAgICAgIHJldHVybiBSYW5nZVNldC5vZihvZiwgc29ydCk7XG4gICAgfVxufVxuQmxvY2tXcmFwcGVyLnByb3RvdHlwZS5zdGFydFNpZGUgPSBCbG9ja1dyYXBwZXIucHJvdG90eXBlLmVuZFNpZGUgPSAtMTtcblxuZnVuY3Rpb24gZ2V0U2VsZWN0aW9uKHJvb3QpIHtcbiAgICBsZXQgdGFyZ2V0O1xuICAgIC8vIEJyb3dzZXJzIGRpZmZlciBvbiB3aGV0aGVyIHNoYWRvdyByb290cyBoYXZlIGEgZ2V0U2VsZWN0aW9uXG4gICAgLy8gbWV0aG9kLiBJZiBpdCBleGlzdHMsIHVzZSB0aGF0LCBvdGhlcndpc2UsIGNhbGwgaXQgb24gdGhlXG4gICAgLy8gZG9jdW1lbnQuXG4gICAgaWYgKHJvb3Qubm9kZVR5cGUgPT0gMTEpIHsgLy8gU2hhZG93IHJvb3RcbiAgICAgICAgdGFyZ2V0ID0gcm9vdC5nZXRTZWxlY3Rpb24gPyByb290IDogcm9vdC5vd25lckRvY3VtZW50O1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgdGFyZ2V0ID0gcm9vdDtcbiAgICB9XG4gICAgcmV0dXJuIHRhcmdldC5nZXRTZWxlY3Rpb24oKTtcbn1cbmZ1bmN0aW9uIGNvbnRhaW5zKGRvbSwgbm9kZSkge1xuICAgIHJldHVybiBub2RlID8gZG9tID09IG5vZGUgfHwgZG9tLmNvbnRhaW5zKG5vZGUubm9kZVR5cGUgIT0gMSA/IG5vZGUucGFyZW50Tm9kZSA6IG5vZGUpIDogZmFsc2U7XG59XG5mdW5jdGlvbiBoYXNTZWxlY3Rpb24oZG9tLCBzZWxlY3Rpb24pIHtcbiAgICBpZiAoIXNlbGVjdGlvbi5hbmNob3JOb2RlKVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgdHJ5IHtcbiAgICAgICAgLy8gRmlyZWZveCB3aWxsIHJhaXNlICdwZXJtaXNzaW9uIGRlbmllZCcgZXJyb3JzIHdoZW4gYWNjZXNzaW5nXG4gICAgICAgIC8vIHByb3BlcnRpZXMgb2YgYHNlbC5hbmNob3JOb2RlYCB3aGVuIGl0J3MgaW4gYSBnZW5lcmF0ZWQgQ1NTXG4gICAgICAgIC8vIGVsZW1lbnQuXG4gICAgICAgIHJldHVybiBjb250YWlucyhkb20sIHNlbGVjdGlvbi5hbmNob3JOb2RlKTtcbiAgICB9XG4gICAgY2F0Y2ggKF8pIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGNsaWVudFJlY3RzRm9yKGRvbSkge1xuICAgIGlmIChkb20ubm9kZVR5cGUgPT0gMylcbiAgICAgICAgcmV0dXJuIHRleHRSYW5nZShkb20sIDAsIGRvbS5ub2RlVmFsdWUubGVuZ3RoKS5nZXRDbGllbnRSZWN0cygpO1xuICAgIGVsc2UgaWYgKGRvbS5ub2RlVHlwZSA9PSAxKVxuICAgICAgICByZXR1cm4gZG9tLmdldENsaWVudFJlY3RzKCk7XG4gICAgZWxzZVxuICAgICAgICByZXR1cm4gW107XG59XG4vLyBTY2FucyBmb3J3YXJkIGFuZCBiYWNrd2FyZCB0aHJvdWdoIERPTSBwb3NpdGlvbnMgZXF1aXZhbGVudCB0byB0aGVcbi8vIGdpdmVuIG9uZSB0byBzZWUgaWYgdGhlIHR3byBhcmUgaW4gdGhlIHNhbWUgcGxhY2UgKGkuZS4gYWZ0ZXIgYVxuLy8gdGV4dCBub2RlIHZzIGF0IHRoZSBlbmQgb2YgdGhhdCB0ZXh0IG5vZGUpXG5mdW5jdGlvbiBpc0VxdWl2YWxlbnRQb3NpdGlvbihub2RlLCBvZmYsIHRhcmdldE5vZGUsIHRhcmdldE9mZikge1xuICAgIHJldHVybiB0YXJnZXROb2RlID8gKHNjYW5Gb3Iobm9kZSwgb2ZmLCB0YXJnZXROb2RlLCB0YXJnZXRPZmYsIC0xKSB8fFxuICAgICAgICBzY2FuRm9yKG5vZGUsIG9mZiwgdGFyZ2V0Tm9kZSwgdGFyZ2V0T2ZmLCAxKSkgOiBmYWxzZTtcbn1cbmZ1bmN0aW9uIGRvbUluZGV4KG5vZGUpIHtcbiAgICBmb3IgKHZhciBpbmRleCA9IDA7OyBpbmRleCsrKSB7XG4gICAgICAgIG5vZGUgPSBub2RlLnByZXZpb3VzU2libGluZztcbiAgICAgICAgaWYgKCFub2RlKVxuICAgICAgICAgICAgcmV0dXJuIGluZGV4O1xuICAgIH1cbn1cbmZ1bmN0aW9uIGlzQmxvY2tFbGVtZW50KG5vZGUpIHtcbiAgICByZXR1cm4gbm9kZS5ub2RlVHlwZSA9PSAxICYmIC9eKERJVnxQfExJfFVMfE9MfEJMT0NLUVVPVEV8RER8RFR8SFxcZHxTRUNUSU9OfFBSRSkkLy50ZXN0KG5vZGUubm9kZU5hbWUpO1xufVxuZnVuY3Rpb24gc2NhbkZvcihub2RlLCBvZmYsIHRhcmdldE5vZGUsIHRhcmdldE9mZiwgZGlyKSB7XG4gICAgZm9yICg7Oykge1xuICAgICAgICBpZiAobm9kZSA9PSB0YXJnZXROb2RlICYmIG9mZiA9PSB0YXJnZXRPZmYpXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgaWYgKG9mZiA9PSAoZGlyIDwgMCA/IDAgOiBtYXhPZmZzZXQobm9kZSkpKSB7XG4gICAgICAgICAgICBpZiAobm9kZS5ub2RlTmFtZSA9PSBcIkRJVlwiKVxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIGxldCBwYXJlbnQgPSBub2RlLnBhcmVudE5vZGU7XG4gICAgICAgICAgICBpZiAoIXBhcmVudCB8fCBwYXJlbnQubm9kZVR5cGUgIT0gMSlcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICBvZmYgPSBkb21JbmRleChub2RlKSArIChkaXIgPCAwID8gMCA6IDEpO1xuICAgICAgICAgICAgbm9kZSA9IHBhcmVudDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChub2RlLm5vZGVUeXBlID09IDEpIHtcbiAgICAgICAgICAgIG5vZGUgPSBub2RlLmNoaWxkTm9kZXNbb2ZmICsgKGRpciA8IDAgPyAtMSA6IDApXTtcbiAgICAgICAgICAgIGlmIChub2RlLm5vZGVUeXBlID09IDEgJiYgbm9kZS5jb250ZW50RWRpdGFibGUgPT0gXCJmYWxzZVwiKVxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIG9mZiA9IGRpciA8IDAgPyBtYXhPZmZzZXQobm9kZSkgOiAwO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgfVxufVxuZnVuY3Rpb24gbWF4T2Zmc2V0KG5vZGUpIHtcbiAgICByZXR1cm4gbm9kZS5ub2RlVHlwZSA9PSAzID8gbm9kZS5ub2RlVmFsdWUubGVuZ3RoIDogbm9kZS5jaGlsZE5vZGVzLmxlbmd0aDtcbn1cbmZ1bmN0aW9uIGZsYXR0ZW5SZWN0KHJlY3QsIGxlZnQpIHtcbiAgICBsZXQgeCA9IGxlZnQgPyByZWN0LmxlZnQgOiByZWN0LnJpZ2h0O1xuICAgIHJldHVybiB7IGxlZnQ6IHgsIHJpZ2h0OiB4LCB0b3A6IHJlY3QudG9wLCBib3R0b206IHJlY3QuYm90dG9tIH07XG59XG5mdW5jdGlvbiB3aW5kb3dSZWN0KHdpbikge1xuICAgIGxldCB2cCA9IHdpbi52aXN1YWxWaWV3cG9ydDtcbiAgICBpZiAodnApXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBsZWZ0OiAwLCByaWdodDogdnAud2lkdGgsXG4gICAgICAgICAgICB0b3A6IDAsIGJvdHRvbTogdnAuaGVpZ2h0XG4gICAgICAgIH07XG4gICAgcmV0dXJuIHsgbGVmdDogMCwgcmlnaHQ6IHdpbi5pbm5lcldpZHRoLFxuICAgICAgICB0b3A6IDAsIGJvdHRvbTogd2luLmlubmVySGVpZ2h0IH07XG59XG5mdW5jdGlvbiBnZXRTY2FsZShlbHQsIHJlY3QpIHtcbiAgICBsZXQgc2NhbGVYID0gcmVjdC53aWR0aCAvIGVsdC5vZmZzZXRXaWR0aDtcbiAgICBsZXQgc2NhbGVZID0gcmVjdC5oZWlnaHQgLyBlbHQub2Zmc2V0SGVpZ2h0O1xuICAgIGlmIChzY2FsZVggPiAwLjk5NSAmJiBzY2FsZVggPCAxLjAwNSB8fCAhaXNGaW5pdGUoc2NhbGVYKSB8fCBNYXRoLmFicyhyZWN0LndpZHRoIC0gZWx0Lm9mZnNldFdpZHRoKSA8IDEpXG4gICAgICAgIHNjYWxlWCA9IDE7XG4gICAgaWYgKHNjYWxlWSA+IDAuOTk1ICYmIHNjYWxlWSA8IDEuMDA1IHx8ICFpc0Zpbml0ZShzY2FsZVkpIHx8IE1hdGguYWJzKHJlY3QuaGVpZ2h0IC0gZWx0Lm9mZnNldEhlaWdodCkgPCAxKVxuICAgICAgICBzY2FsZVkgPSAxO1xuICAgIHJldHVybiB7IHNjYWxlWCwgc2NhbGVZIH07XG59XG5mdW5jdGlvbiBzY3JvbGxSZWN0SW50b1ZpZXcoZG9tLCByZWN0LCBzaWRlLCB4LCB5LCB4TWFyZ2luLCB5TWFyZ2luLCBsdHIpIHtcbiAgICBsZXQgZG9jID0gZG9tLm93bmVyRG9jdW1lbnQsIHdpbiA9IGRvYy5kZWZhdWx0VmlldyB8fCB3aW5kb3c7XG4gICAgZm9yIChsZXQgY3VyID0gZG9tLCBzdG9wID0gZmFsc2U7IGN1ciAmJiAhc3RvcDspIHtcbiAgICAgICAgaWYgKGN1ci5ub2RlVHlwZSA9PSAxKSB7IC8vIEVsZW1lbnRcbiAgICAgICAgICAgIGxldCBib3VuZGluZywgdG9wID0gY3VyID09IGRvYy5ib2R5O1xuICAgICAgICAgICAgbGV0IHNjYWxlWCA9IDEsIHNjYWxlWSA9IDE7XG4gICAgICAgICAgICBpZiAodG9wKSB7XG4gICAgICAgICAgICAgICAgYm91bmRpbmcgPSB3aW5kb3dSZWN0KHdpbik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBpZiAoL14oZml4ZWR8c3RpY2t5KSQvLnRlc3QoZ2V0Q29tcHV0ZWRTdHlsZShjdXIpLnBvc2l0aW9uKSlcbiAgICAgICAgICAgICAgICAgICAgc3RvcCA9IHRydWU7XG4gICAgICAgICAgICAgICAgaWYgKGN1ci5zY3JvbGxIZWlnaHQgPD0gY3VyLmNsaWVudEhlaWdodCAmJiBjdXIuc2Nyb2xsV2lkdGggPD0gY3VyLmNsaWVudFdpZHRoKSB7XG4gICAgICAgICAgICAgICAgICAgIGN1ciA9IGN1ci5hc3NpZ25lZFNsb3QgfHwgY3VyLnBhcmVudE5vZGU7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBsZXQgcmVjdCA9IGN1ci5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgICAgICAgICAgICAoeyBzY2FsZVgsIHNjYWxlWSB9ID0gZ2V0U2NhbGUoY3VyLCByZWN0KSk7XG4gICAgICAgICAgICAgICAgLy8gTWFrZSBzdXJlIHNjcm9sbGJhciB3aWR0aCBpc24ndCBpbmNsdWRlZCBpbiB0aGUgcmVjdGFuZ2xlXG4gICAgICAgICAgICAgICAgYm91bmRpbmcgPSB7IGxlZnQ6IHJlY3QubGVmdCwgcmlnaHQ6IHJlY3QubGVmdCArIGN1ci5jbGllbnRXaWR0aCAqIHNjYWxlWCxcbiAgICAgICAgICAgICAgICAgICAgdG9wOiByZWN0LnRvcCwgYm90dG9tOiByZWN0LnRvcCArIGN1ci5jbGllbnRIZWlnaHQgKiBzY2FsZVkgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxldCBtb3ZlWCA9IDAsIG1vdmVZID0gMDtcbiAgICAgICAgICAgIGlmICh5ID09IFwibmVhcmVzdFwiKSB7XG4gICAgICAgICAgICAgICAgaWYgKHJlY3QudG9wIDwgYm91bmRpbmcudG9wKSB7XG4gICAgICAgICAgICAgICAgICAgIG1vdmVZID0gcmVjdC50b3AgLSAoYm91bmRpbmcudG9wICsgeU1hcmdpbik7XG4gICAgICAgICAgICAgICAgICAgIGlmIChzaWRlID4gMCAmJiByZWN0LmJvdHRvbSA+IGJvdW5kaW5nLmJvdHRvbSArIG1vdmVZKVxuICAgICAgICAgICAgICAgICAgICAgICAgbW92ZVkgPSByZWN0LmJvdHRvbSAtIGJvdW5kaW5nLmJvdHRvbSArIHlNYXJnaW47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKHJlY3QuYm90dG9tID4gYm91bmRpbmcuYm90dG9tKSB7XG4gICAgICAgICAgICAgICAgICAgIG1vdmVZID0gcmVjdC5ib3R0b20gLSBib3VuZGluZy5ib3R0b20gKyB5TWFyZ2luO1xuICAgICAgICAgICAgICAgICAgICBpZiAoc2lkZSA8IDAgJiYgKHJlY3QudG9wIC0gbW92ZVkpIDwgYm91bmRpbmcudG9wKVxuICAgICAgICAgICAgICAgICAgICAgICAgbW92ZVkgPSByZWN0LnRvcCAtIChib3VuZGluZy50b3AgKyB5TWFyZ2luKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBsZXQgcmVjdEhlaWdodCA9IHJlY3QuYm90dG9tIC0gcmVjdC50b3AsIGJvdW5kaW5nSGVpZ2h0ID0gYm91bmRpbmcuYm90dG9tIC0gYm91bmRpbmcudG9wO1xuICAgICAgICAgICAgICAgIGxldCB0YXJnZXRUb3AgPSB5ID09IFwiY2VudGVyXCIgJiYgcmVjdEhlaWdodCA8PSBib3VuZGluZ0hlaWdodCA/IHJlY3QudG9wICsgcmVjdEhlaWdodCAvIDIgLSBib3VuZGluZ0hlaWdodCAvIDIgOlxuICAgICAgICAgICAgICAgICAgICB5ID09IFwic3RhcnRcIiB8fCB5ID09IFwiY2VudGVyXCIgJiYgc2lkZSA8IDAgPyByZWN0LnRvcCAtIHlNYXJnaW4gOlxuICAgICAgICAgICAgICAgICAgICAgICAgcmVjdC5ib3R0b20gLSBib3VuZGluZ0hlaWdodCArIHlNYXJnaW47XG4gICAgICAgICAgICAgICAgbW92ZVkgPSB0YXJnZXRUb3AgLSBib3VuZGluZy50b3A7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoeCA9PSBcIm5lYXJlc3RcIikge1xuICAgICAgICAgICAgICAgIGlmIChyZWN0LmxlZnQgPCBib3VuZGluZy5sZWZ0KSB7XG4gICAgICAgICAgICAgICAgICAgIG1vdmVYID0gcmVjdC5sZWZ0IC0gKGJvdW5kaW5nLmxlZnQgKyB4TWFyZ2luKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHNpZGUgPiAwICYmIHJlY3QucmlnaHQgPiBib3VuZGluZy5yaWdodCArIG1vdmVYKVxuICAgICAgICAgICAgICAgICAgICAgICAgbW92ZVggPSByZWN0LnJpZ2h0IC0gYm91bmRpbmcucmlnaHQgKyB4TWFyZ2luO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChyZWN0LnJpZ2h0ID4gYm91bmRpbmcucmlnaHQpIHtcbiAgICAgICAgICAgICAgICAgICAgbW92ZVggPSByZWN0LnJpZ2h0IC0gYm91bmRpbmcucmlnaHQgKyB4TWFyZ2luO1xuICAgICAgICAgICAgICAgICAgICBpZiAoc2lkZSA8IDAgJiYgcmVjdC5sZWZ0IDwgYm91bmRpbmcubGVmdCArIG1vdmVYKVxuICAgICAgICAgICAgICAgICAgICAgICAgbW92ZVggPSByZWN0LmxlZnQgLSAoYm91bmRpbmcubGVmdCArIHhNYXJnaW4pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGxldCB0YXJnZXRMZWZ0ID0geCA9PSBcImNlbnRlclwiID8gcmVjdC5sZWZ0ICsgKHJlY3QucmlnaHQgLSByZWN0LmxlZnQpIC8gMiAtIChib3VuZGluZy5yaWdodCAtIGJvdW5kaW5nLmxlZnQpIC8gMiA6XG4gICAgICAgICAgICAgICAgICAgICh4ID09IFwic3RhcnRcIikgPT0gbHRyID8gcmVjdC5sZWZ0IC0geE1hcmdpbiA6XG4gICAgICAgICAgICAgICAgICAgICAgICByZWN0LnJpZ2h0IC0gKGJvdW5kaW5nLnJpZ2h0IC0gYm91bmRpbmcubGVmdCkgKyB4TWFyZ2luO1xuICAgICAgICAgICAgICAgIG1vdmVYID0gdGFyZ2V0TGVmdCAtIGJvdW5kaW5nLmxlZnQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAobW92ZVggfHwgbW92ZVkpIHtcbiAgICAgICAgICAgICAgICBpZiAodG9wKSB7XG4gICAgICAgICAgICAgICAgICAgIHdpbi5zY3JvbGxCeShtb3ZlWCwgbW92ZVkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IG1vdmVkWCA9IDAsIG1vdmVkWSA9IDA7XG4gICAgICAgICAgICAgICAgICAgIGlmIChtb3ZlWSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHN0YXJ0ID0gY3VyLnNjcm9sbFRvcDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1ci5zY3JvbGxUb3AgKz0gbW92ZVkgLyBzY2FsZVk7XG4gICAgICAgICAgICAgICAgICAgICAgICBtb3ZlZFkgPSAoY3VyLnNjcm9sbFRvcCAtIHN0YXJ0KSAqIHNjYWxlWTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAobW92ZVgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBzdGFydCA9IGN1ci5zY3JvbGxMZWZ0O1xuICAgICAgICAgICAgICAgICAgICAgICAgY3VyLnNjcm9sbExlZnQgKz0gbW92ZVggLyBzY2FsZVg7XG4gICAgICAgICAgICAgICAgICAgICAgICBtb3ZlZFggPSAoY3VyLnNjcm9sbExlZnQgLSBzdGFydCkgKiBzY2FsZVg7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmVjdCA9IHsgbGVmdDogcmVjdC5sZWZ0IC0gbW92ZWRYLCB0b3A6IHJlY3QudG9wIC0gbW92ZWRZLFxuICAgICAgICAgICAgICAgICAgICAgICAgcmlnaHQ6IHJlY3QucmlnaHQgLSBtb3ZlZFgsIGJvdHRvbTogcmVjdC5ib3R0b20gLSBtb3ZlZFkgfTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1vdmVkWCAmJiBNYXRoLmFicyhtb3ZlZFggLSBtb3ZlWCkgPCAxKVxuICAgICAgICAgICAgICAgICAgICAgICAgeCA9IFwibmVhcmVzdFwiO1xuICAgICAgICAgICAgICAgICAgICBpZiAobW92ZWRZICYmIE1hdGguYWJzKG1vdmVkWSAtIG1vdmVZKSA8IDEpXG4gICAgICAgICAgICAgICAgICAgICAgICB5ID0gXCJuZWFyZXN0XCI7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRvcClcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGlmIChyZWN0LnRvcCA8IGJvdW5kaW5nLnRvcCB8fCByZWN0LmJvdHRvbSA+IGJvdW5kaW5nLmJvdHRvbSB8fFxuICAgICAgICAgICAgICAgIHJlY3QubGVmdCA8IGJvdW5kaW5nLmxlZnQgfHwgcmVjdC5yaWdodCA+IGJvdW5kaW5nLnJpZ2h0KVxuICAgICAgICAgICAgICAgIHJlY3QgPSB7IGxlZnQ6IE1hdGgubWF4KHJlY3QubGVmdCwgYm91bmRpbmcubGVmdCksIHJpZ2h0OiBNYXRoLm1pbihyZWN0LnJpZ2h0LCBib3VuZGluZy5yaWdodCksXG4gICAgICAgICAgICAgICAgICAgIHRvcDogTWF0aC5tYXgocmVjdC50b3AsIGJvdW5kaW5nLnRvcCksIGJvdHRvbTogTWF0aC5taW4ocmVjdC5ib3R0b20sIGJvdW5kaW5nLmJvdHRvbSkgfTtcbiAgICAgICAgICAgIGN1ciA9IGN1ci5hc3NpZ25lZFNsb3QgfHwgY3VyLnBhcmVudE5vZGU7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoY3VyLm5vZGVUeXBlID09IDExKSB7IC8vIEEgc2hhZG93IHJvb3RcbiAgICAgICAgICAgIGN1ciA9IGN1ci5ob3N0O1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICB9XG59XG5mdW5jdGlvbiBzY3JvbGxhYmxlUGFyZW50cyhkb20pIHtcbiAgICBsZXQgZG9jID0gZG9tLm93bmVyRG9jdW1lbnQsIHgsIHk7XG4gICAgZm9yIChsZXQgY3VyID0gZG9tLnBhcmVudE5vZGU7IGN1cjspIHtcbiAgICAgICAgaWYgKGN1ciA9PSBkb2MuYm9keSB8fCAoeCAmJiB5KSkge1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoY3VyLm5vZGVUeXBlID09IDEpIHtcbiAgICAgICAgICAgIGlmICgheSAmJiBjdXIuc2Nyb2xsSGVpZ2h0ID4gY3VyLmNsaWVudEhlaWdodClcbiAgICAgICAgICAgICAgICB5ID0gY3VyO1xuICAgICAgICAgICAgaWYgKCF4ICYmIGN1ci5zY3JvbGxXaWR0aCA+IGN1ci5jbGllbnRXaWR0aClcbiAgICAgICAgICAgICAgICB4ID0gY3VyO1xuICAgICAgICAgICAgY3VyID0gY3VyLmFzc2lnbmVkU2xvdCB8fCBjdXIucGFyZW50Tm9kZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChjdXIubm9kZVR5cGUgPT0gMTEpIHtcbiAgICAgICAgICAgIGN1ciA9IGN1ci5ob3N0O1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHsgeCwgeSB9O1xufVxuY2xhc3MgRE9NU2VsZWN0aW9uU3RhdGUge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLmFuY2hvck5vZGUgPSBudWxsO1xuICAgICAgICB0aGlzLmFuY2hvck9mZnNldCA9IDA7XG4gICAgICAgIHRoaXMuZm9jdXNOb2RlID0gbnVsbDtcbiAgICAgICAgdGhpcy5mb2N1c09mZnNldCA9IDA7XG4gICAgfVxuICAgIGVxKGRvbVNlbCkge1xuICAgICAgICByZXR1cm4gdGhpcy5hbmNob3JOb2RlID09IGRvbVNlbC5hbmNob3JOb2RlICYmIHRoaXMuYW5jaG9yT2Zmc2V0ID09IGRvbVNlbC5hbmNob3JPZmZzZXQgJiZcbiAgICAgICAgICAgIHRoaXMuZm9jdXNOb2RlID09IGRvbVNlbC5mb2N1c05vZGUgJiYgdGhpcy5mb2N1c09mZnNldCA9PSBkb21TZWwuZm9jdXNPZmZzZXQ7XG4gICAgfVxuICAgIHNldFJhbmdlKHJhbmdlKSB7XG4gICAgICAgIGxldCB7IGFuY2hvck5vZGUsIGZvY3VzTm9kZSB9ID0gcmFuZ2U7XG4gICAgICAgIC8vIENsaXAgb2Zmc2V0cyB0byBub2RlIHNpemUgdG8gYXZvaWQgY3Jhc2hlcyB3aGVuIFNhZmFyaSByZXBvcnRzIGJvZ3VzIG9mZnNldHMgKCMxMTUyKVxuICAgICAgICB0aGlzLnNldChhbmNob3JOb2RlLCBNYXRoLm1pbihyYW5nZS5hbmNob3JPZmZzZXQsIGFuY2hvck5vZGUgPyBtYXhPZmZzZXQoYW5jaG9yTm9kZSkgOiAwKSwgZm9jdXNOb2RlLCBNYXRoLm1pbihyYW5nZS5mb2N1c09mZnNldCwgZm9jdXNOb2RlID8gbWF4T2Zmc2V0KGZvY3VzTm9kZSkgOiAwKSk7XG4gICAgfVxuICAgIHNldChhbmNob3JOb2RlLCBhbmNob3JPZmZzZXQsIGZvY3VzTm9kZSwgZm9jdXNPZmZzZXQpIHtcbiAgICAgICAgdGhpcy5hbmNob3JOb2RlID0gYW5jaG9yTm9kZTtcbiAgICAgICAgdGhpcy5hbmNob3JPZmZzZXQgPSBhbmNob3JPZmZzZXQ7XG4gICAgICAgIHRoaXMuZm9jdXNOb2RlID0gZm9jdXNOb2RlO1xuICAgICAgICB0aGlzLmZvY3VzT2Zmc2V0ID0gZm9jdXNPZmZzZXQ7XG4gICAgfVxufVxubGV0IHByZXZlbnRTY3JvbGxTdXBwb3J0ZWQgPSBudWxsO1xuLy8gU2FmYXJpIDI2IGJyZWFrcyBwcmV2ZW50U2Nyb2xsIHN1cHBvcnRcbmlmIChicm93c2VyLnNhZmFyaSAmJiBicm93c2VyLnNhZmFyaV92ZXJzaW9uID49IDI2KVxuICAgIHByZXZlbnRTY3JvbGxTdXBwb3J0ZWQgPSBmYWxzZTtcbi8vIEZlYXR1cmUtZGV0ZWN0cyBzdXBwb3J0IGZvciAuZm9jdXMoe3ByZXZlbnRTY3JvbGw6IHRydWV9KSwgYW5kIHVzZXNcbi8vIGEgZmFsbGJhY2sga2x1ZGdlIHdoZW4gbm90IHN1cHBvcnRlZC5cbmZ1bmN0aW9uIGZvY3VzUHJldmVudFNjcm9sbChkb20pIHtcbiAgICBpZiAoZG9tLnNldEFjdGl2ZSlcbiAgICAgICAgcmV0dXJuIGRvbS5zZXRBY3RpdmUoKTsgLy8gaW4gSUVcbiAgICBpZiAocHJldmVudFNjcm9sbFN1cHBvcnRlZClcbiAgICAgICAgcmV0dXJuIGRvbS5mb2N1cyhwcmV2ZW50U2Nyb2xsU3VwcG9ydGVkKTtcbiAgICBsZXQgc3RhY2sgPSBbXTtcbiAgICBmb3IgKGxldCBjdXIgPSBkb207IGN1cjsgY3VyID0gY3VyLnBhcmVudE5vZGUpIHtcbiAgICAgICAgc3RhY2sucHVzaChjdXIsIGN1ci5zY3JvbGxUb3AsIGN1ci5zY3JvbGxMZWZ0KTtcbiAgICAgICAgaWYgKGN1ciA9PSBjdXIub3duZXJEb2N1bWVudClcbiAgICAgICAgICAgIGJyZWFrO1xuICAgIH1cbiAgICBkb20uZm9jdXMocHJldmVudFNjcm9sbFN1cHBvcnRlZCA9PSBudWxsID8ge1xuICAgICAgICBnZXQgcHJldmVudFNjcm9sbCgpIHtcbiAgICAgICAgICAgIHByZXZlbnRTY3JvbGxTdXBwb3J0ZWQgPSB7IHByZXZlbnRTY3JvbGw6IHRydWUgfTtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgfSA6IHVuZGVmaW5lZCk7XG4gICAgaWYgKCFwcmV2ZW50U2Nyb2xsU3VwcG9ydGVkKSB7XG4gICAgICAgIHByZXZlbnRTY3JvbGxTdXBwb3J0ZWQgPSBmYWxzZTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzdGFjay5sZW5ndGg7KSB7XG4gICAgICAgICAgICBsZXQgZWx0ID0gc3RhY2tbaSsrXSwgdG9wID0gc3RhY2tbaSsrXSwgbGVmdCA9IHN0YWNrW2krK107XG4gICAgICAgICAgICBpZiAoZWx0LnNjcm9sbFRvcCAhPSB0b3ApXG4gICAgICAgICAgICAgICAgZWx0LnNjcm9sbFRvcCA9IHRvcDtcbiAgICAgICAgICAgIGlmIChlbHQuc2Nyb2xsTGVmdCAhPSBsZWZ0KVxuICAgICAgICAgICAgICAgIGVsdC5zY3JvbGxMZWZ0ID0gbGVmdDtcbiAgICAgICAgfVxuICAgIH1cbn1cbmxldCBzY3JhdGNoUmFuZ2U7XG5mdW5jdGlvbiB0ZXh0UmFuZ2Uobm9kZSwgZnJvbSwgdG8gPSBmcm9tKSB7XG4gICAgbGV0IHJhbmdlID0gc2NyYXRjaFJhbmdlIHx8IChzY3JhdGNoUmFuZ2UgPSBkb2N1bWVudC5jcmVhdGVSYW5nZSgpKTtcbiAgICByYW5nZS5zZXRFbmQobm9kZSwgdG8pO1xuICAgIHJhbmdlLnNldFN0YXJ0KG5vZGUsIGZyb20pO1xuICAgIHJldHVybiByYW5nZTtcbn1cbmZ1bmN0aW9uIGRpc3BhdGNoS2V5KGVsdCwgbmFtZSwgY29kZSwgbW9kcykge1xuICAgIGxldCBvcHRpb25zID0geyBrZXk6IG5hbWUsIGNvZGU6IG5hbWUsIGtleUNvZGU6IGNvZGUsIHdoaWNoOiBjb2RlLCBjYW5jZWxhYmxlOiB0cnVlIH07XG4gICAgaWYgKG1vZHMpXG4gICAgICAgICh7IGFsdEtleTogb3B0aW9ucy5hbHRLZXksIGN0cmxLZXk6IG9wdGlvbnMuY3RybEtleSwgc2hpZnRLZXk6IG9wdGlvbnMuc2hpZnRLZXksIG1ldGFLZXk6IG9wdGlvbnMubWV0YUtleSB9ID0gbW9kcyk7XG4gICAgbGV0IGRvd24gPSBuZXcgS2V5Ym9hcmRFdmVudChcImtleWRvd25cIiwgb3B0aW9ucyk7XG4gICAgZG93bi5zeW50aGV0aWMgPSB0cnVlO1xuICAgIGVsdC5kaXNwYXRjaEV2ZW50KGRvd24pO1xuICAgIGxldCB1cCA9IG5ldyBLZXlib2FyZEV2ZW50KFwia2V5dXBcIiwgb3B0aW9ucyk7XG4gICAgdXAuc3ludGhldGljID0gdHJ1ZTtcbiAgICBlbHQuZGlzcGF0Y2hFdmVudCh1cCk7XG4gICAgcmV0dXJuIGRvd24uZGVmYXVsdFByZXZlbnRlZCB8fCB1cC5kZWZhdWx0UHJldmVudGVkO1xufVxuZnVuY3Rpb24gZ2V0Um9vdChub2RlKSB7XG4gICAgd2hpbGUgKG5vZGUpIHtcbiAgICAgICAgaWYgKG5vZGUgJiYgKG5vZGUubm9kZVR5cGUgPT0gOSB8fCBub2RlLm5vZGVUeXBlID09IDExICYmIG5vZGUuaG9zdCkpXG4gICAgICAgICAgICByZXR1cm4gbm9kZTtcbiAgICAgICAgbm9kZSA9IG5vZGUuYXNzaWduZWRTbG90IHx8IG5vZGUucGFyZW50Tm9kZTtcbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG59XG5mdW5jdGlvbiBhdEVsZW1lbnRTdGFydChkb2MsIHNlbGVjdGlvbikge1xuICAgIGxldCBub2RlID0gc2VsZWN0aW9uLmZvY3VzTm9kZSwgb2Zmc2V0ID0gc2VsZWN0aW9uLmZvY3VzT2Zmc2V0O1xuICAgIGlmICghbm9kZSB8fCBzZWxlY3Rpb24uYW5jaG9yTm9kZSAhPSBub2RlIHx8IHNlbGVjdGlvbi5hbmNob3JPZmZzZXQgIT0gb2Zmc2V0KVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgLy8gU2FmYXJpIGNhbiByZXBvcnQgYm9ndXMgb2Zmc2V0cyAoIzExNTIpXG4gICAgb2Zmc2V0ID0gTWF0aC5taW4ob2Zmc2V0LCBtYXhPZmZzZXQobm9kZSkpO1xuICAgIGZvciAoOzspIHtcbiAgICAgICAgaWYgKG9mZnNldCkge1xuICAgICAgICAgICAgaWYgKG5vZGUubm9kZVR5cGUgIT0gMSlcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICBsZXQgcHJldiA9IG5vZGUuY2hpbGROb2Rlc1tvZmZzZXQgLSAxXTtcbiAgICAgICAgICAgIGlmIChwcmV2LmNvbnRlbnRFZGl0YWJsZSA9PSBcImZhbHNlXCIpXG4gICAgICAgICAgICAgICAgb2Zmc2V0LS07XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBub2RlID0gcHJldjtcbiAgICAgICAgICAgICAgICBvZmZzZXQgPSBtYXhPZmZzZXQobm9kZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAobm9kZSA9PSBkb2MpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgb2Zmc2V0ID0gZG9tSW5kZXgobm9kZSk7XG4gICAgICAgICAgICBub2RlID0gbm9kZS5wYXJlbnROb2RlO1xuICAgICAgICB9XG4gICAgfVxufVxuZnVuY3Rpb24gaXNTY3JvbGxlZFRvQm90dG9tKGVsdCkge1xuICAgIHJldHVybiBlbHQuc2Nyb2xsVG9wID4gTWF0aC5tYXgoMSwgZWx0LnNjcm9sbEhlaWdodCAtIGVsdC5jbGllbnRIZWlnaHQgLSA0KTtcbn1cbmZ1bmN0aW9uIHRleHROb2RlQmVmb3JlKHN0YXJ0Tm9kZSwgc3RhcnRPZmZzZXQpIHtcbiAgICBmb3IgKGxldCBub2RlID0gc3RhcnROb2RlLCBvZmZzZXQgPSBzdGFydE9mZnNldDs7KSB7XG4gICAgICAgIGlmIChub2RlLm5vZGVUeXBlID09IDMgJiYgb2Zmc2V0ID4gMCkge1xuICAgICAgICAgICAgcmV0dXJuIHsgbm9kZTogbm9kZSwgb2Zmc2V0OiBvZmZzZXQgfTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChub2RlLm5vZGVUeXBlID09IDEgJiYgb2Zmc2V0ID4gMCkge1xuICAgICAgICAgICAgaWYgKG5vZGUuY29udGVudEVkaXRhYmxlID09IFwiZmFsc2VcIilcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgIG5vZGUgPSBub2RlLmNoaWxkTm9kZXNbb2Zmc2V0IC0gMV07XG4gICAgICAgICAgICBvZmZzZXQgPSBtYXhPZmZzZXQobm9kZSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAobm9kZS5wYXJlbnROb2RlICYmICFpc0Jsb2NrRWxlbWVudChub2RlKSkge1xuICAgICAgICAgICAgb2Zmc2V0ID0gZG9tSW5kZXgobm9kZSk7XG4gICAgICAgICAgICBub2RlID0gbm9kZS5wYXJlbnROb2RlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICB9XG59XG5mdW5jdGlvbiB0ZXh0Tm9kZUFmdGVyKHN0YXJ0Tm9kZSwgc3RhcnRPZmZzZXQpIHtcbiAgICBmb3IgKGxldCBub2RlID0gc3RhcnROb2RlLCBvZmZzZXQgPSBzdGFydE9mZnNldDs7KSB7XG4gICAgICAgIGlmIChub2RlLm5vZGVUeXBlID09IDMgJiYgb2Zmc2V0IDwgbm9kZS5ub2RlVmFsdWUubGVuZ3RoKSB7XG4gICAgICAgICAgICByZXR1cm4geyBub2RlOiBub2RlLCBvZmZzZXQ6IG9mZnNldCB9O1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKG5vZGUubm9kZVR5cGUgPT0gMSAmJiBvZmZzZXQgPCBub2RlLmNoaWxkTm9kZXMubGVuZ3RoKSB7XG4gICAgICAgICAgICBpZiAobm9kZS5jb250ZW50RWRpdGFibGUgPT0gXCJmYWxzZVwiKVxuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgbm9kZSA9IG5vZGUuY2hpbGROb2Rlc1tvZmZzZXRdO1xuICAgICAgICAgICAgb2Zmc2V0ID0gMDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChub2RlLnBhcmVudE5vZGUgJiYgIWlzQmxvY2tFbGVtZW50KG5vZGUpKSB7XG4gICAgICAgICAgICBvZmZzZXQgPSBkb21JbmRleChub2RlKSArIDE7XG4gICAgICAgICAgICBub2RlID0gbm9kZS5wYXJlbnROb2RlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICB9XG59XG5jbGFzcyBET01Qb3Mge1xuICAgIGNvbnN0cnVjdG9yKG5vZGUsIG9mZnNldCwgcHJlY2lzZSA9IHRydWUpIHtcbiAgICAgICAgdGhpcy5ub2RlID0gbm9kZTtcbiAgICAgICAgdGhpcy5vZmZzZXQgPSBvZmZzZXQ7XG4gICAgICAgIHRoaXMucHJlY2lzZSA9IHByZWNpc2U7XG4gICAgfVxuICAgIHN0YXRpYyBiZWZvcmUoZG9tLCBwcmVjaXNlKSB7IHJldHVybiBuZXcgRE9NUG9zKGRvbS5wYXJlbnROb2RlLCBkb21JbmRleChkb20pLCBwcmVjaXNlKTsgfVxuICAgIHN0YXRpYyBhZnRlcihkb20sIHByZWNpc2UpIHsgcmV0dXJuIG5ldyBET01Qb3MoZG9tLnBhcmVudE5vZGUsIGRvbUluZGV4KGRvbSkgKyAxLCBwcmVjaXNlKTsgfVxufVxuXG4vKipcblVzZWQgdG8gaW5kaWNhdGUgW3RleHQgZGlyZWN0aW9uXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI3ZpZXcuRWRpdG9yVmlldy50ZXh0RGlyZWN0aW9uKS5cbiovXG52YXIgRGlyZWN0aW9uID0gLypAX19QVVJFX18qLyhmdW5jdGlvbiAoRGlyZWN0aW9uKSB7XG4gICAgLy8gKFRoZXNlIGFyZSBjaG9zZW4gdG8gbWF0Y2ggdGhlIGJhc2UgbGV2ZWxzLCBpbiBiaWRpIGFsZ29yaXRobVxuICAgIC8vIHRlcm1zLCBvZiBzcGFucyBpbiB0aGF0IGRpcmVjdGlvbi4pXG4gICAgLyoqXG4gICAgTGVmdC10by1yaWdodC5cbiAgICAqL1xuICAgIERpcmVjdGlvbltEaXJlY3Rpb25bXCJMVFJcIl0gPSAwXSA9IFwiTFRSXCI7XG4gICAgLyoqXG4gICAgUmlnaHQtdG8tbGVmdC5cbiAgICAqL1xuICAgIERpcmVjdGlvbltEaXJlY3Rpb25bXCJSVExcIl0gPSAxXSA9IFwiUlRMXCI7XG5yZXR1cm4gRGlyZWN0aW9ufSkoRGlyZWN0aW9uIHx8IChEaXJlY3Rpb24gPSB7fSkpO1xuY29uc3QgTFRSID0gRGlyZWN0aW9uLkxUUiwgUlRMID0gRGlyZWN0aW9uLlJUTDtcbi8vIERlY29kZSBhIHN0cmluZyB3aXRoIGVhY2ggdHlwZSBlbmNvZGVkIGFzIGxvZzIodHlwZSlcbmZ1bmN0aW9uIGRlYyhzdHIpIHtcbiAgICBsZXQgcmVzdWx0ID0gW107XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzdHIubGVuZ3RoOyBpKyspXG4gICAgICAgIHJlc3VsdC5wdXNoKDEgPDwgK3N0cltpXSk7XG4gICAgcmV0dXJuIHJlc3VsdDtcbn1cbi8vIENoYXJhY3RlciB0eXBlcyBmb3IgY29kZXBvaW50cyAwIHRvIDB4ZjhcbmNvbnN0IExvd1R5cGVzID0gLypAX19QVVJFX18qL2RlYyhcIjg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4NjY2ODg4ODg4Nzg3ODMzMzMzMzMzMzM3ODg4ODg4MDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDA4ODg4ODgwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg3ODY2NjY4ODg4MDg4ODg4NjYzMzgwODg4MzA4ODg4ODAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwODAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDA4XCIpO1xuLy8gQ2hhcmFjdGVyIHR5cGVzIGZvciBjb2RlcG9pbnRzIDB4NjAwIHRvIDB4NmY5XG5jb25zdCBBcmFiaWNUeXBlcyA9IC8qQF9fUFVSRV9fKi9kZWMoXCI0NDQ0NDQ4ODI2NjI3Mjg4OTk5OTk5OTk5OTkyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjI5OTk5OTk5OTk5OTk5OTk5OTk5OTk0NDQ0NDQ0NDQ0NjQ0MjIyODIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyOTk5OTk5OTQ5OTk5OTk5MjI5OTg5OTk5MjIzMzMzMzMzMzMzXCIpO1xuY29uc3QgQnJhY2tldHMgPSAvKkBfX1BVUkVfXyovT2JqZWN0LmNyZWF0ZShudWxsKSwgQnJhY2tldFN0YWNrID0gW107XG4vLyBUaGVyZSdzIGEgbG90IG1vcmUgaW5cbi8vIGh0dHBzOi8vd3d3LnVuaWNvZGUub3JnL1B1YmxpYy9VQ0QvbGF0ZXN0L3VjZC9CaWRpQnJhY2tldHMudHh0LFxuLy8gd2hpY2ggYXJlIGxlZnQgb3V0IHRvIGtlZXAgY29kZSBzaXplIGRvd24uXG5mb3IgKGxldCBwIG9mIFtcIigpXCIsIFwiW11cIiwgXCJ7fVwiXSkge1xuICAgIGxldCBsID0gLypAX19QVVJFX18qL3AuY2hhckNvZGVBdCgwKSwgciA9IC8qQF9fUFVSRV9fKi9wLmNoYXJDb2RlQXQoMSk7XG4gICAgQnJhY2tldHNbbF0gPSByO1xuICAgIEJyYWNrZXRzW3JdID0gLWw7XG59XG5mdW5jdGlvbiBjaGFyVHlwZShjaCkge1xuICAgIHJldHVybiBjaCA8PSAweGY3ID8gTG93VHlwZXNbY2hdIDpcbiAgICAgICAgMHg1OTAgPD0gY2ggJiYgY2ggPD0gMHg1ZjQgPyAyIC8qIFQuUiAqLyA6XG4gICAgICAgICAgICAweDYwMCA8PSBjaCAmJiBjaCA8PSAweDZmOSA/IEFyYWJpY1R5cGVzW2NoIC0gMHg2MDBdIDpcbiAgICAgICAgICAgICAgICAweDZlZSA8PSBjaCAmJiBjaCA8PSAweDhhYyA/IDQgLyogVC5BTCAqLyA6XG4gICAgICAgICAgICAgICAgICAgIDB4MjAwMCA8PSBjaCAmJiBjaCA8PSAweDIwMGMgPyAyNTYgLyogVC5OSSAqLyA6XG4gICAgICAgICAgICAgICAgICAgICAgICAweGZiNTAgPD0gY2ggJiYgY2ggPD0gMHhmZGZmID8gNCAvKiBULkFMICovIDogMSAvKiBULkwgKi87XG59XG5jb25zdCBCaWRpUkUgPSAvW1xcdTA1OTAtXFx1MDVmNFxcdTA2MDAtXFx1MDZmZlxcdTA3MDAtXFx1MDhhY1xcdWZiNTAtXFx1ZmRmZl0vO1xuLyoqXG5SZXByZXNlbnRzIGEgY29udGlndW91cyByYW5nZSBvZiB0ZXh0IHRoYXQgaGFzIGEgc2luZ2xlIGRpcmVjdGlvblxuKGFzIGluIGxlZnQtdG8tcmlnaHQgb3IgcmlnaHQtdG8tbGVmdCkuXG4qL1xuY2xhc3MgQmlkaVNwYW4ge1xuICAgIC8qKlxuICAgIFRoZSBkaXJlY3Rpb24gb2YgdGhpcyBzcGFuLlxuICAgICovXG4gICAgZ2V0IGRpcigpIHsgcmV0dXJuIHRoaXMubGV2ZWwgJSAyID8gUlRMIDogTFRSOyB9XG4gICAgLyoqXG4gICAgQGludGVybmFsXG4gICAgKi9cbiAgICBjb25zdHJ1Y3RvcihcbiAgICAvKipcbiAgICBUaGUgc3RhcnQgb2YgdGhlIHNwYW4gKHJlbGF0aXZlIHRvIHRoZSBzdGFydCBvZiB0aGUgbGluZSkuXG4gICAgKi9cbiAgICBmcm9tLCBcbiAgICAvKipcbiAgICBUaGUgZW5kIG9mIHRoZSBzcGFuLlxuICAgICovXG4gICAgdG8sIFxuICAgIC8qKlxuICAgIFRoZSBbXCJiaWRpXG4gICAgbGV2ZWxcIl0oaHR0cHM6Ly91bmljb2RlLm9yZy9yZXBvcnRzL3RyOS8jQmFzaWNfRGlzcGxheV9BbGdvcml0aG0pXG4gICAgb2YgdGhlIHNwYW4gKGluIHRoaXMgY29udGV4dCwgMCBtZWFuc1xuICAgIGxlZnQtdG8tcmlnaHQsIDEgbWVhbnMgcmlnaHQtdG8tbGVmdCwgMiBtZWFucyBsZWZ0LXRvLXJpZ2h0XG4gICAgbnVtYmVyIGluc2lkZSByaWdodC10by1sZWZ0IHRleHQpLlxuICAgICovXG4gICAgbGV2ZWwpIHtcbiAgICAgICAgdGhpcy5mcm9tID0gZnJvbTtcbiAgICAgICAgdGhpcy50byA9IHRvO1xuICAgICAgICB0aGlzLmxldmVsID0gbGV2ZWw7XG4gICAgfVxuICAgIC8qKlxuICAgIEBpbnRlcm5hbFxuICAgICovXG4gICAgc2lkZShlbmQsIGRpcikgeyByZXR1cm4gKHRoaXMuZGlyID09IGRpcikgPT0gZW5kID8gdGhpcy50byA6IHRoaXMuZnJvbTsgfVxuICAgIC8qKlxuICAgIEBpbnRlcm5hbFxuICAgICovXG4gICAgZm9yd2FyZChmb3J3YXJkLCBkaXIpIHsgcmV0dXJuIGZvcndhcmQgPT0gKHRoaXMuZGlyID09IGRpcik7IH1cbiAgICAvKipcbiAgICBAaW50ZXJuYWxcbiAgICAqL1xuICAgIHN0YXRpYyBmaW5kKG9yZGVyLCBpbmRleCwgbGV2ZWwsIGFzc29jKSB7XG4gICAgICAgIGxldCBtYXliZSA9IC0xO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG9yZGVyLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBsZXQgc3BhbiA9IG9yZGVyW2ldO1xuICAgICAgICAgICAgaWYgKHNwYW4uZnJvbSA8PSBpbmRleCAmJiBzcGFuLnRvID49IGluZGV4KSB7XG4gICAgICAgICAgICAgICAgaWYgKHNwYW4ubGV2ZWwgPT0gbGV2ZWwpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBpO1xuICAgICAgICAgICAgICAgIC8vIFdoZW4gbXVsdGlwbGUgc3BhbnMgbWF0Y2gsIGlmIGFzc29jICE9IDAsIHRha2UgdGhlIG9uZSB0aGF0XG4gICAgICAgICAgICAgICAgLy8gY292ZXJzIHRoYXQgc2lkZSwgb3RoZXJ3aXNlIHRha2UgdGhlIG9uZSB3aXRoIHRoZSBtaW5pbXVtXG4gICAgICAgICAgICAgICAgLy8gbGV2ZWwuXG4gICAgICAgICAgICAgICAgaWYgKG1heWJlIDwgMCB8fCAoYXNzb2MgIT0gMCA/IChhc3NvYyA8IDAgPyBzcGFuLmZyb20gPCBpbmRleCA6IHNwYW4udG8gPiBpbmRleCkgOiBvcmRlclttYXliZV0ubGV2ZWwgPiBzcGFuLmxldmVsKSlcbiAgICAgICAgICAgICAgICAgICAgbWF5YmUgPSBpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChtYXliZSA8IDApXG4gICAgICAgICAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcihcIkluZGV4IG91dCBvZiByYW5nZVwiKTtcbiAgICAgICAgcmV0dXJuIG1heWJlO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGlzb2xhdGVzRXEoYSwgYikge1xuICAgIGlmIChhLmxlbmd0aCAhPSBiLmxlbmd0aClcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYS5sZW5ndGg7IGkrKykge1xuICAgICAgICBsZXQgaUEgPSBhW2ldLCBpQiA9IGJbaV07XG4gICAgICAgIGlmIChpQS5mcm9tICE9IGlCLmZyb20gfHwgaUEudG8gIT0gaUIudG8gfHwgaUEuZGlyZWN0aW9uICE9IGlCLmRpcmVjdGlvbiB8fCAhaXNvbGF0ZXNFcShpQS5pbm5lciwgaUIuaW5uZXIpKVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICByZXR1cm4gdHJ1ZTtcbn1cbi8vIFJldXNlZCBhcnJheSBvZiBjaGFyYWN0ZXIgdHlwZXNcbmNvbnN0IHR5cGVzID0gW107XG4vLyBGaWxsIGluIHRoZSBjaGFyYWN0ZXIgdHlwZXMgKGluIGB0eXBlc2ApIGZyb20gYGZyb21gIHRvIGB0b2AgYW5kXG4vLyBhcHBseSBXIG5vcm1hbGl6YXRpb24gcnVsZXMuXG5mdW5jdGlvbiBjb21wdXRlQ2hhclR5cGVzKGxpbmUsIHJGcm9tLCByVG8sIGlzb2xhdGVzLCBvdXRlclR5cGUpIHtcbiAgICBmb3IgKGxldCBpSSA9IDA7IGlJIDw9IGlzb2xhdGVzLmxlbmd0aDsgaUkrKykge1xuICAgICAgICBsZXQgZnJvbSA9IGlJID8gaXNvbGF0ZXNbaUkgLSAxXS50byA6IHJGcm9tLCB0byA9IGlJIDwgaXNvbGF0ZXMubGVuZ3RoID8gaXNvbGF0ZXNbaUldLmZyb20gOiByVG87XG4gICAgICAgIGxldCBwcmV2VHlwZSA9IGlJID8gMjU2IC8qIFQuTkkgKi8gOiBvdXRlclR5cGU7XG4gICAgICAgIC8vIFcxLiBFeGFtaW5lIGVhY2ggbm9uLXNwYWNpbmcgbWFyayAoTlNNKSBpbiB0aGUgbGV2ZWwgcnVuLCBhbmRcbiAgICAgICAgLy8gY2hhbmdlIHRoZSB0eXBlIG9mIHRoZSBOU00gdG8gdGhlIHR5cGUgb2YgdGhlIHByZXZpb3VzXG4gICAgICAgIC8vIGNoYXJhY3Rlci4gSWYgdGhlIE5TTSBpcyBhdCB0aGUgc3RhcnQgb2YgdGhlIGxldmVsIHJ1biwgaXQgd2lsbFxuICAgICAgICAvLyBnZXQgdGhlIHR5cGUgb2Ygc29yLlxuICAgICAgICAvLyBXMi4gU2VhcmNoIGJhY2t3YXJkcyBmcm9tIGVhY2ggaW5zdGFuY2Ugb2YgYSBFdXJvcGVhbiBudW1iZXJcbiAgICAgICAgLy8gdW50aWwgdGhlIGZpcnN0IHN0cm9uZyB0eXBlIChSLCBMLCBBTCwgb3Igc29yKSBpcyBmb3VuZC4gSWYgYW5cbiAgICAgICAgLy8gQUwgaXMgZm91bmQsIGNoYW5nZSB0aGUgdHlwZSBvZiB0aGUgRXVyb3BlYW4gbnVtYmVyIHRvIEFyYWJpY1xuICAgICAgICAvLyBudW1iZXIuXG4gICAgICAgIC8vIFczLiBDaGFuZ2UgYWxsIEFMcyB0byBSLlxuICAgICAgICAvLyAoTGVmdCBhZnRlciB0aGlzOiBMLCBSLCBFTiwgQU4sIEVULCBDUywgTkkpXG4gICAgICAgIGZvciAobGV0IGkgPSBmcm9tLCBwcmV2ID0gcHJldlR5cGUsIHByZXZTdHJvbmcgPSBwcmV2VHlwZTsgaSA8IHRvOyBpKyspIHtcbiAgICAgICAgICAgIGxldCB0eXBlID0gY2hhclR5cGUobGluZS5jaGFyQ29kZUF0KGkpKTtcbiAgICAgICAgICAgIGlmICh0eXBlID09IDUxMiAvKiBULk5TTSAqLylcbiAgICAgICAgICAgICAgICB0eXBlID0gcHJldjtcbiAgICAgICAgICAgIGVsc2UgaWYgKHR5cGUgPT0gOCAvKiBULkVOICovICYmIHByZXZTdHJvbmcgPT0gNCAvKiBULkFMICovKVxuICAgICAgICAgICAgICAgIHR5cGUgPSAxNiAvKiBULkFOICovO1xuICAgICAgICAgICAgdHlwZXNbaV0gPSB0eXBlID09IDQgLyogVC5BTCAqLyA/IDIgLyogVC5SICovIDogdHlwZTtcbiAgICAgICAgICAgIGlmICh0eXBlICYgNyAvKiBULlN0cm9uZyAqLylcbiAgICAgICAgICAgICAgICBwcmV2U3Ryb25nID0gdHlwZTtcbiAgICAgICAgICAgIHByZXYgPSB0eXBlO1xuICAgICAgICB9XG4gICAgICAgIC8vIFc1LiBBIHNlcXVlbmNlIG9mIEV1cm9wZWFuIHRlcm1pbmF0b3JzIGFkamFjZW50IHRvIEV1cm9wZWFuXG4gICAgICAgIC8vIG51bWJlcnMgY2hhbmdlcyB0byBhbGwgRXVyb3BlYW4gbnVtYmVycy5cbiAgICAgICAgLy8gVzYuIE90aGVyd2lzZSwgc2VwYXJhdG9ycyBhbmQgdGVybWluYXRvcnMgY2hhbmdlIHRvIE90aGVyXG4gICAgICAgIC8vIE5ldXRyYWwuXG4gICAgICAgIC8vIFc3LiBTZWFyY2ggYmFja3dhcmRzIGZyb20gZWFjaCBpbnN0YW5jZSBvZiBhIEV1cm9wZWFuIG51bWJlclxuICAgICAgICAvLyB1bnRpbCB0aGUgZmlyc3Qgc3Ryb25nIHR5cGUgKFIsIEwsIG9yIHNvcikgaXMgZm91bmQuIElmIGFuIEwgaXNcbiAgICAgICAgLy8gZm91bmQsIHRoZW4gY2hhbmdlIHRoZSB0eXBlIG9mIHRoZSBFdXJvcGVhbiBudW1iZXIgdG8gTC5cbiAgICAgICAgLy8gKExlZnQgYWZ0ZXIgdGhpczogTCwgUiwgRU4rQU4sIE5JKVxuICAgICAgICBmb3IgKGxldCBpID0gZnJvbSwgcHJldiA9IHByZXZUeXBlLCBwcmV2U3Ryb25nID0gcHJldlR5cGU7IGkgPCB0bzsgaSsrKSB7XG4gICAgICAgICAgICBsZXQgdHlwZSA9IHR5cGVzW2ldO1xuICAgICAgICAgICAgaWYgKHR5cGUgPT0gMTI4IC8qIFQuQ1MgKi8pIHtcbiAgICAgICAgICAgICAgICBpZiAoaSA8IHRvIC0gMSAmJiBwcmV2ID09IHR5cGVzW2kgKyAxXSAmJiAocHJldiAmIDI0IC8qIFQuTnVtICovKSlcbiAgICAgICAgICAgICAgICAgICAgdHlwZSA9IHR5cGVzW2ldID0gcHJldjtcbiAgICAgICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgICAgIHR5cGVzW2ldID0gMjU2IC8qIFQuTkkgKi87XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICh0eXBlID09IDY0IC8qIFQuRVQgKi8pIHtcbiAgICAgICAgICAgICAgICBsZXQgZW5kID0gaSArIDE7XG4gICAgICAgICAgICAgICAgd2hpbGUgKGVuZCA8IHRvICYmIHR5cGVzW2VuZF0gPT0gNjQgLyogVC5FVCAqLylcbiAgICAgICAgICAgICAgICAgICAgZW5kKys7XG4gICAgICAgICAgICAgICAgbGV0IHJlcGxhY2UgPSAoaSAmJiBwcmV2ID09IDggLyogVC5FTiAqLykgfHwgKGVuZCA8IHJUbyAmJiB0eXBlc1tlbmRdID09IDggLyogVC5FTiAqLykgPyAocHJldlN0cm9uZyA9PSAxIC8qIFQuTCAqLyA/IDEgLyogVC5MICovIDogOCAvKiBULkVOICovKSA6IDI1NiAvKiBULk5JICovO1xuICAgICAgICAgICAgICAgIGZvciAobGV0IGogPSBpOyBqIDwgZW5kOyBqKyspXG4gICAgICAgICAgICAgICAgICAgIHR5cGVzW2pdID0gcmVwbGFjZTtcbiAgICAgICAgICAgICAgICBpID0gZW5kIC0gMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHR5cGUgPT0gOCAvKiBULkVOICovICYmIHByZXZTdHJvbmcgPT0gMSAvKiBULkwgKi8pIHtcbiAgICAgICAgICAgICAgICB0eXBlc1tpXSA9IDEgLyogVC5MICovO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcHJldiA9IHR5cGU7XG4gICAgICAgICAgICBpZiAodHlwZSAmIDcgLyogVC5TdHJvbmcgKi8pXG4gICAgICAgICAgICAgICAgcHJldlN0cm9uZyA9IHR5cGU7XG4gICAgICAgIH1cbiAgICB9XG59XG4vLyBQcm9jZXNzIGJyYWNrZXRzIHRocm91Z2hvdXQgYSBydW4gc2VxdWVuY2UuXG5mdW5jdGlvbiBwcm9jZXNzQnJhY2tldFBhaXJzKGxpbmUsIHJGcm9tLCByVG8sIGlzb2xhdGVzLCBvdXRlclR5cGUpIHtcbiAgICBsZXQgb3Bwb3NpdGVUeXBlID0gb3V0ZXJUeXBlID09IDEgLyogVC5MICovID8gMiAvKiBULlIgKi8gOiAxIC8qIFQuTCAqLztcbiAgICBmb3IgKGxldCBpSSA9IDAsIHNJID0gMCwgY29udGV4dCA9IDA7IGlJIDw9IGlzb2xhdGVzLmxlbmd0aDsgaUkrKykge1xuICAgICAgICBsZXQgZnJvbSA9IGlJID8gaXNvbGF0ZXNbaUkgLSAxXS50byA6IHJGcm9tLCB0byA9IGlJIDwgaXNvbGF0ZXMubGVuZ3RoID8gaXNvbGF0ZXNbaUldLmZyb20gOiByVG87XG4gICAgICAgIC8vIE4wLiBQcm9jZXNzIGJyYWNrZXQgcGFpcnMgaW4gYW4gaXNvbGF0aW5nIHJ1biBzZXF1ZW5jZVxuICAgICAgICAvLyBzZXF1ZW50aWFsbHkgaW4gdGhlIGxvZ2ljYWwgb3JkZXIgb2YgdGhlIHRleHQgcG9zaXRpb25zIG9mIHRoZVxuICAgICAgICAvLyBvcGVuaW5nIHBhaXJlZCBicmFja2V0cyB1c2luZyB0aGUgbG9naWMgZ2l2ZW4gYmVsb3cuIFdpdGhpbiB0aGlzXG4gICAgICAgIC8vIHNjb3BlLCBiaWRpcmVjdGlvbmFsIHR5cGVzIEVOIGFuZCBBTiBhcmUgdHJlYXRlZCBhcyBSLlxuICAgICAgICBmb3IgKGxldCBpID0gZnJvbSwgY2gsIGJyLCB0eXBlOyBpIDwgdG87IGkrKykge1xuICAgICAgICAgICAgLy8gS2VlcHMgW3N0YXJ0SW5kZXgsIHR5cGUsIHN0cm9uZ1NlZW5dIHRyaXBsZXMgZm9yIGVhY2ggb3BlblxuICAgICAgICAgICAgLy8gYnJhY2tldCBvbiBCcmFja2V0U3RhY2suXG4gICAgICAgICAgICBpZiAoYnIgPSBCcmFja2V0c1tjaCA9IGxpbmUuY2hhckNvZGVBdChpKV0pIHtcbiAgICAgICAgICAgICAgICBpZiAoYnIgPCAwKSB7IC8vIENsb3NpbmcgYnJhY2tldFxuICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBzSiA9IHNJIC0gMzsgc0ogPj0gMDsgc0ogLT0gMykge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKEJyYWNrZXRTdGFja1tzSiArIDFdID09IC1icikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBmbGFncyA9IEJyYWNrZXRTdGFja1tzSiArIDJdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCB0eXBlID0gKGZsYWdzICYgMiAvKiBCcmFja2V0ZWQuRW1iZWRJbnNpZGUgKi8pID8gb3V0ZXJUeXBlIDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIShmbGFncyAmIDQgLyogQnJhY2tldGVkLk9wcG9zaXRlSW5zaWRlICovKSA/IDAgOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGZsYWdzICYgMSAvKiBCcmFja2V0ZWQuT3Bwb3NpdGVCZWZvcmUgKi8pID8gb3Bwb3NpdGVUeXBlIDogb3V0ZXJUeXBlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0eXBlKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlc1tpXSA9IHR5cGVzW0JyYWNrZXRTdGFja1tzSl1dID0gdHlwZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzSSA9IHNKO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKEJyYWNrZXRTdGFjay5sZW5ndGggPT0gMTg5IC8qIEJyYWNrZXRlZC5NYXhEZXB0aCAqLykge1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIEJyYWNrZXRTdGFja1tzSSsrXSA9IGk7XG4gICAgICAgICAgICAgICAgICAgIEJyYWNrZXRTdGFja1tzSSsrXSA9IGNoO1xuICAgICAgICAgICAgICAgICAgICBCcmFja2V0U3RhY2tbc0krK10gPSBjb250ZXh0O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKCh0eXBlID0gdHlwZXNbaV0pID09IDIgLyogVC5SICovIHx8IHR5cGUgPT0gMSAvKiBULkwgKi8pIHtcbiAgICAgICAgICAgICAgICBsZXQgZW1iZWQgPSB0eXBlID09IG91dGVyVHlwZTtcbiAgICAgICAgICAgICAgICBjb250ZXh0ID0gZW1iZWQgPyAwIDogMSAvKiBCcmFja2V0ZWQuT3Bwb3NpdGVCZWZvcmUgKi87XG4gICAgICAgICAgICAgICAgZm9yIChsZXQgc0ogPSBzSSAtIDM7IHNKID49IDA7IHNKIC09IDMpIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGN1ciA9IEJyYWNrZXRTdGFja1tzSiArIDJdO1xuICAgICAgICAgICAgICAgICAgICBpZiAoY3VyICYgMiAvKiBCcmFja2V0ZWQuRW1iZWRJbnNpZGUgKi8pXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgaWYgKGVtYmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBCcmFja2V0U3RhY2tbc0ogKyAyXSB8PSAyIC8qIEJyYWNrZXRlZC5FbWJlZEluc2lkZSAqLztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjdXIgJiA0IC8qIEJyYWNrZXRlZC5PcHBvc2l0ZUluc2lkZSAqLylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIEJyYWNrZXRTdGFja1tzSiArIDJdIHw9IDQgLyogQnJhY2tldGVkLk9wcG9zaXRlSW5zaWRlICovO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufVxuZnVuY3Rpb24gcHJvY2Vzc05ldXRyYWxzKHJGcm9tLCByVG8sIGlzb2xhdGVzLCBvdXRlclR5cGUpIHtcbiAgICBmb3IgKGxldCBpSSA9IDAsIHByZXYgPSBvdXRlclR5cGU7IGlJIDw9IGlzb2xhdGVzLmxlbmd0aDsgaUkrKykge1xuICAgICAgICBsZXQgZnJvbSA9IGlJID8gaXNvbGF0ZXNbaUkgLSAxXS50byA6IHJGcm9tLCB0byA9IGlJIDwgaXNvbGF0ZXMubGVuZ3RoID8gaXNvbGF0ZXNbaUldLmZyb20gOiByVG87XG4gICAgICAgIC8vIE4xLiBBIHNlcXVlbmNlIG9mIG5ldXRyYWxzIHRha2VzIHRoZSBkaXJlY3Rpb24gb2YgdGhlXG4gICAgICAgIC8vIHN1cnJvdW5kaW5nIHN0cm9uZyB0ZXh0IGlmIHRoZSB0ZXh0IG9uIGJvdGggc2lkZXMgaGFzIHRoZSBzYW1lXG4gICAgICAgIC8vIGRpcmVjdGlvbi4gRXVyb3BlYW4gYW5kIEFyYWJpYyBudW1iZXJzIGFjdCBhcyBpZiB0aGV5IHdlcmUgUiBpblxuICAgICAgICAvLyB0ZXJtcyBvZiB0aGVpciBpbmZsdWVuY2Ugb24gbmV1dHJhbHMuIFN0YXJ0LW9mLWxldmVsLXJ1biAoc29yKVxuICAgICAgICAvLyBhbmQgZW5kLW9mLWxldmVsLXJ1biAoZW9yKSBhcmUgdXNlZCBhdCBsZXZlbCBydW4gYm91bmRhcmllcy5cbiAgICAgICAgLy8gTjIuIEFueSByZW1haW5pbmcgbmV1dHJhbHMgdGFrZSB0aGUgZW1iZWRkaW5nIGRpcmVjdGlvbi5cbiAgICAgICAgLy8gKExlZnQgYWZ0ZXIgdGhpczogTCwgUiwgRU4rQU4pXG4gICAgICAgIGZvciAobGV0IGkgPSBmcm9tOyBpIDwgdG87KSB7XG4gICAgICAgICAgICBsZXQgdHlwZSA9IHR5cGVzW2ldO1xuICAgICAgICAgICAgaWYgKHR5cGUgPT0gMjU2IC8qIFQuTkkgKi8pIHtcbiAgICAgICAgICAgICAgICBsZXQgZW5kID0gaSArIDE7XG4gICAgICAgICAgICAgICAgZm9yICg7Oykge1xuICAgICAgICAgICAgICAgICAgICBpZiAoZW5kID09IHRvKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaUkgPT0gaXNvbGF0ZXMubGVuZ3RoKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgZW5kID0gaXNvbGF0ZXNbaUkrK10udG87XG4gICAgICAgICAgICAgICAgICAgICAgICB0byA9IGlJIDwgaXNvbGF0ZXMubGVuZ3RoID8gaXNvbGF0ZXNbaUldLmZyb20gOiByVG87XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAodHlwZXNbZW5kXSA9PSAyNTYgLyogVC5OSSAqLykge1xuICAgICAgICAgICAgICAgICAgICAgICAgZW5kKys7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBsZXQgYmVmb3JlTCA9IHByZXYgPT0gMSAvKiBULkwgKi87XG4gICAgICAgICAgICAgICAgbGV0IGFmdGVyTCA9IChlbmQgPCByVG8gPyB0eXBlc1tlbmRdIDogb3V0ZXJUeXBlKSA9PSAxIC8qIFQuTCAqLztcbiAgICAgICAgICAgICAgICBsZXQgcmVwbGFjZSA9IGJlZm9yZUwgPT0gYWZ0ZXJMID8gKGJlZm9yZUwgPyAxIC8qIFQuTCAqLyA6IDIgLyogVC5SICovKSA6IG91dGVyVHlwZTtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBqID0gZW5kLCBqSSA9IGlJLCBmcm9tSiA9IGpJID8gaXNvbGF0ZXNbakkgLSAxXS50byA6IHJGcm9tOyBqID4gaTspIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGogPT0gZnJvbUopIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGogPSBpc29sYXRlc1stLWpJXS5mcm9tO1xuICAgICAgICAgICAgICAgICAgICAgICAgZnJvbUogPSBqSSA/IGlzb2xhdGVzW2pJIC0gMV0udG8gOiByRnJvbTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB0eXBlc1stLWpdID0gcmVwbGFjZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaSA9IGVuZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHByZXYgPSB0eXBlO1xuICAgICAgICAgICAgICAgIGkrKztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbn1cbi8vIEZpbmQgdGhlIGNvbnRpZ3VvdXMgcmFuZ2VzIG9mIGNoYXJhY3RlciB0eXBlcyBpbiBhIGdpdmVuIHJhbmdlLCBhbmRcbi8vIGVtaXQgc3BhbnMgZm9yIHRoZW0uIEZsaXAgdGhlIG9yZGVyIG9mIHRoZSBzcGFucyBhcyBhcHByb3ByaWF0ZVxuLy8gYmFzZWQgb24gdGhlIGxldmVsLCBhbmQgY2FsbCB0aHJvdWdoIHRvIGNvbXB1dGUgdGhlIHNwYW5zIGZvclxuLy8gaXNvbGF0ZXMgYXQgdGhlIHByb3BlciBwb2ludC5cbmZ1bmN0aW9uIGVtaXRTcGFucyhsaW5lLCBmcm9tLCB0bywgbGV2ZWwsIGJhc2VMZXZlbCwgaXNvbGF0ZXMsIG9yZGVyKSB7XG4gICAgbGV0IG91clR5cGUgPSBsZXZlbCAlIDIgPyAyIC8qIFQuUiAqLyA6IDEgLyogVC5MICovO1xuICAgIGlmICgobGV2ZWwgJSAyKSA9PSAoYmFzZUxldmVsICUgMikpIHsgLy8gU2FtZSBkaXIgYXMgYmFzZSBkaXJlY3Rpb24sIGRvbid0IGZsaXBcbiAgICAgICAgZm9yIChsZXQgaUNoID0gZnJvbSwgaUkgPSAwOyBpQ2ggPCB0bzspIHtcbiAgICAgICAgICAgIC8vIFNjYW4gYSBzZWN0aW9uIG9mIGNoYXJhY3RlcnMgaW4gZGlyZWN0aW9uIG91clR5cGUsIHVubGVzc1xuICAgICAgICAgICAgLy8gdGhlcmUncyBhbm90aGVyIHR5cGUgb2YgY2hhciByaWdodCBhZnRlciBpQ2gsIGluIHdoaWNoIGNhc2VcbiAgICAgICAgICAgIC8vIHdlIHNjYW4gYSBzZWN0aW9uIG9mIG90aGVyIGNoYXJhY3RlcnMgKHdoaWNoLCBpZiBvdXJUeXBlID09XG4gICAgICAgICAgICAvLyBULkwsIG1heSBjb250YWluIGJvdGggVC5SIGFuZCBULkFOIGNoYXJzKS5cbiAgICAgICAgICAgIGxldCBzYW1lRGlyID0gdHJ1ZSwgaXNOdW0gPSBmYWxzZTtcbiAgICAgICAgICAgIGlmIChpSSA9PSBpc29sYXRlcy5sZW5ndGggfHwgaUNoIDwgaXNvbGF0ZXNbaUldLmZyb20pIHtcbiAgICAgICAgICAgICAgICBsZXQgbmV4dCA9IHR5cGVzW2lDaF07XG4gICAgICAgICAgICAgICAgaWYgKG5leHQgIT0gb3VyVHlwZSkge1xuICAgICAgICAgICAgICAgICAgICBzYW1lRGlyID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIGlzTnVtID0gbmV4dCA9PSAxNiAvKiBULkFOICovO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIEhvbGRzIGFuIGFycmF5IG9mIGlzb2xhdGVzIHRvIHBhc3MgdG8gYSByZWN1cnNpdmUgY2FsbCBpZiB3ZVxuICAgICAgICAgICAgLy8gbXVzdCByZWN1cnNlICh0byBkaXN0aW5ndWlzaCBULkFOIGluc2lkZSBhbiBSVEwgc2VjdGlvbiBpblxuICAgICAgICAgICAgLy8gTFRSIHRleHQpLCBudWxsIGlmIHdlIGNhbiBlbWl0IGRpcmVjdGx5XG4gICAgICAgICAgICBsZXQgcmVjdXJzZSA9ICFzYW1lRGlyICYmIG91clR5cGUgPT0gMSAvKiBULkwgKi8gPyBbXSA6IG51bGw7XG4gICAgICAgICAgICBsZXQgbG9jYWxMZXZlbCA9IHNhbWVEaXIgPyBsZXZlbCA6IGxldmVsICsgMTtcbiAgICAgICAgICAgIGxldCBpU2NhbiA9IGlDaDtcbiAgICAgICAgICAgIHJ1bjogZm9yICg7Oykge1xuICAgICAgICAgICAgICAgIGlmIChpSSA8IGlzb2xhdGVzLmxlbmd0aCAmJiBpU2NhbiA9PSBpc29sYXRlc1tpSV0uZnJvbSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoaXNOdW0pXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhayBydW47XG4gICAgICAgICAgICAgICAgICAgIGxldCBpc28gPSBpc29sYXRlc1tpSV07XG4gICAgICAgICAgICAgICAgICAgIC8vIFNjYW4gYWhlYWQgdG8gdmVyaWZ5IHRoYXQgdGhlcmUgaXMgYW5vdGhlciBjaGFyIGluIHRoaXMgZGlyIGFmdGVyIHRoZSBpc29sYXRlKHMpXG4gICAgICAgICAgICAgICAgICAgIGlmICghc2FtZURpcilcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobGV0IHVwdG8gPSBpc28udG8sIGpJID0gaUkgKyAxOzspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodXB0byA9PSB0bylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWsgcnVuO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChqSSA8IGlzb2xhdGVzLmxlbmd0aCAmJiBpc29sYXRlc1tqSV0uZnJvbSA9PSB1cHRvKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cHRvID0gaXNvbGF0ZXNbakkrK10udG87XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAodHlwZXNbdXB0b10gPT0gb3VyVHlwZSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWsgcnVuO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlJKys7XG4gICAgICAgICAgICAgICAgICAgIGlmIChyZWN1cnNlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZWN1cnNlLnB1c2goaXNvKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpc28uZnJvbSA+IGlDaClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcmRlci5wdXNoKG5ldyBCaWRpU3BhbihpQ2gsIGlzby5mcm9tLCBsb2NhbExldmVsKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgZGlyU3dhcCA9IChpc28uZGlyZWN0aW9uID09IExUUikgIT0gIShsb2NhbExldmVsICUgMik7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb21wdXRlU2VjdGlvbk9yZGVyKGxpbmUsIGRpclN3YXAgPyBsZXZlbCArIDEgOiBsZXZlbCwgYmFzZUxldmVsLCBpc28uaW5uZXIsIGlzby5mcm9tLCBpc28udG8sIG9yZGVyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlDaCA9IGlzby50bztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpU2NhbiA9IGlzby50bztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoaVNjYW4gPT0gdG8gfHwgKHNhbWVEaXIgPyB0eXBlc1tpU2Nhbl0gIT0gb3VyVHlwZSA6IHR5cGVzW2lTY2FuXSA9PSBvdXJUeXBlKSkge1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGlTY2FuKys7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHJlY3Vyc2UpXG4gICAgICAgICAgICAgICAgZW1pdFNwYW5zKGxpbmUsIGlDaCwgaVNjYW4sIGxldmVsICsgMSwgYmFzZUxldmVsLCByZWN1cnNlLCBvcmRlcik7XG4gICAgICAgICAgICBlbHNlIGlmIChpQ2ggPCBpU2NhbilcbiAgICAgICAgICAgICAgICBvcmRlci5wdXNoKG5ldyBCaWRpU3BhbihpQ2gsIGlTY2FuLCBsb2NhbExldmVsKSk7XG4gICAgICAgICAgICBpQ2ggPSBpU2NhbjtcbiAgICAgICAgfVxuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgLy8gSXRlcmF0ZSBpbiByZXZlcnNlIHRvIGZsaXAgdGhlIHNwYW4gb3JkZXIuIFNhbWUgY29kZSBhZ2FpbiwgYnV0XG4gICAgICAgIC8vIGdvaW5nIGZyb20gdGhlIGJhY2sgb2YgdGhlIHNlY3Rpb24gdG8gdGhlIGZyb250XG4gICAgICAgIGZvciAobGV0IGlDaCA9IHRvLCBpSSA9IGlzb2xhdGVzLmxlbmd0aDsgaUNoID4gZnJvbTspIHtcbiAgICAgICAgICAgIGxldCBzYW1lRGlyID0gdHJ1ZSwgaXNOdW0gPSBmYWxzZTtcbiAgICAgICAgICAgIGlmICghaUkgfHwgaUNoID4gaXNvbGF0ZXNbaUkgLSAxXS50bykge1xuICAgICAgICAgICAgICAgIGxldCBuZXh0ID0gdHlwZXNbaUNoIC0gMV07XG4gICAgICAgICAgICAgICAgaWYgKG5leHQgIT0gb3VyVHlwZSkge1xuICAgICAgICAgICAgICAgICAgICBzYW1lRGlyID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIGlzTnVtID0gbmV4dCA9PSAxNiAvKiBULkFOICovO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxldCByZWN1cnNlID0gIXNhbWVEaXIgJiYgb3VyVHlwZSA9PSAxIC8qIFQuTCAqLyA/IFtdIDogbnVsbDtcbiAgICAgICAgICAgIGxldCBsb2NhbExldmVsID0gc2FtZURpciA/IGxldmVsIDogbGV2ZWwgKyAxO1xuICAgICAgICAgICAgbGV0IGlTY2FuID0gaUNoO1xuICAgICAgICAgICAgcnVuOiBmb3IgKDs7KSB7XG4gICAgICAgICAgICAgICAgaWYgKGlJICYmIGlTY2FuID09IGlzb2xhdGVzW2lJIC0gMV0udG8pIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGlzTnVtKVxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWsgcnVuO1xuICAgICAgICAgICAgICAgICAgICBsZXQgaXNvID0gaXNvbGF0ZXNbLS1pSV07XG4gICAgICAgICAgICAgICAgICAgIC8vIFNjYW4gYWhlYWQgdG8gdmVyaWZ5IHRoYXQgdGhlcmUgaXMgYW5vdGhlciBjaGFyIGluIHRoaXMgZGlyIGFmdGVyIHRoZSBpc29sYXRlKHMpXG4gICAgICAgICAgICAgICAgICAgIGlmICghc2FtZURpcilcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobGV0IHVwdG8gPSBpc28uZnJvbSwgakkgPSBpSTs7KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHVwdG8gPT0gZnJvbSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWsgcnVuO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChqSSAmJiBpc29sYXRlc1tqSSAtIDFdLnRvID09IHVwdG8pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVwdG8gPSBpc29sYXRlc1stLWpJXS5mcm9tO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKHR5cGVzW3VwdG8gLSAxXSA9PSBvdXJUeXBlKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhayBydW47XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlY3Vyc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlY3Vyc2UucHVzaChpc28pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlzby50byA8IGlDaClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcmRlci5wdXNoKG5ldyBCaWRpU3Bhbihpc28udG8sIGlDaCwgbG9jYWxMZXZlbCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGRpclN3YXAgPSAoaXNvLmRpcmVjdGlvbiA9PSBMVFIpICE9ICEobG9jYWxMZXZlbCAlIDIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29tcHV0ZVNlY3Rpb25PcmRlcihsaW5lLCBkaXJTd2FwID8gbGV2ZWwgKyAxIDogbGV2ZWwsIGJhc2VMZXZlbCwgaXNvLmlubmVyLCBpc28uZnJvbSwgaXNvLnRvLCBvcmRlcik7XG4gICAgICAgICAgICAgICAgICAgICAgICBpQ2ggPSBpc28uZnJvbTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpU2NhbiA9IGlzby5mcm9tO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChpU2NhbiA9PSBmcm9tIHx8IChzYW1lRGlyID8gdHlwZXNbaVNjYW4gLSAxXSAhPSBvdXJUeXBlIDogdHlwZXNbaVNjYW4gLSAxXSA9PSBvdXJUeXBlKSkge1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGlTY2FuLS07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHJlY3Vyc2UpXG4gICAgICAgICAgICAgICAgZW1pdFNwYW5zKGxpbmUsIGlTY2FuLCBpQ2gsIGxldmVsICsgMSwgYmFzZUxldmVsLCByZWN1cnNlLCBvcmRlcik7XG4gICAgICAgICAgICBlbHNlIGlmIChpU2NhbiA8IGlDaClcbiAgICAgICAgICAgICAgICBvcmRlci5wdXNoKG5ldyBCaWRpU3BhbihpU2NhbiwgaUNoLCBsb2NhbExldmVsKSk7XG4gICAgICAgICAgICBpQ2ggPSBpU2NhbjtcbiAgICAgICAgfVxuICAgIH1cbn1cbmZ1bmN0aW9uIGNvbXB1dGVTZWN0aW9uT3JkZXIobGluZSwgbGV2ZWwsIGJhc2VMZXZlbCwgaXNvbGF0ZXMsIGZyb20sIHRvLCBvcmRlcikge1xuICAgIGxldCBvdXRlclR5cGUgPSAobGV2ZWwgJSAyID8gMiAvKiBULlIgKi8gOiAxIC8qIFQuTCAqLyk7XG4gICAgY29tcHV0ZUNoYXJUeXBlcyhsaW5lLCBmcm9tLCB0bywgaXNvbGF0ZXMsIG91dGVyVHlwZSk7XG4gICAgcHJvY2Vzc0JyYWNrZXRQYWlycyhsaW5lLCBmcm9tLCB0bywgaXNvbGF0ZXMsIG91dGVyVHlwZSk7XG4gICAgcHJvY2Vzc05ldXRyYWxzKGZyb20sIHRvLCBpc29sYXRlcywgb3V0ZXJUeXBlKTtcbiAgICBlbWl0U3BhbnMobGluZSwgZnJvbSwgdG8sIGxldmVsLCBiYXNlTGV2ZWwsIGlzb2xhdGVzLCBvcmRlcik7XG59XG5mdW5jdGlvbiBjb21wdXRlT3JkZXIobGluZSwgZGlyZWN0aW9uLCBpc29sYXRlcykge1xuICAgIGlmICghbGluZSlcbiAgICAgICAgcmV0dXJuIFtuZXcgQmlkaVNwYW4oMCwgMCwgZGlyZWN0aW9uID09IFJUTCA/IDEgOiAwKV07XG4gICAgaWYgKGRpcmVjdGlvbiA9PSBMVFIgJiYgIWlzb2xhdGVzLmxlbmd0aCAmJiAhQmlkaVJFLnRlc3QobGluZSkpXG4gICAgICAgIHJldHVybiB0cml2aWFsT3JkZXIobGluZS5sZW5ndGgpO1xuICAgIGlmIChpc29sYXRlcy5sZW5ndGgpXG4gICAgICAgIHdoaWxlIChsaW5lLmxlbmd0aCA+IHR5cGVzLmxlbmd0aClcbiAgICAgICAgICAgIHR5cGVzW3R5cGVzLmxlbmd0aF0gPSAyNTYgLyogVC5OSSAqLzsgLy8gTWFrZSBzdXJlIHR5cGVzIGFycmF5IGhhcyBubyBnYXBzXG4gICAgbGV0IG9yZGVyID0gW10sIGxldmVsID0gZGlyZWN0aW9uID09IExUUiA/IDAgOiAxO1xuICAgIGNvbXB1dGVTZWN0aW9uT3JkZXIobGluZSwgbGV2ZWwsIGxldmVsLCBpc29sYXRlcywgMCwgbGluZS5sZW5ndGgsIG9yZGVyKTtcbiAgICByZXR1cm4gb3JkZXI7XG59XG5mdW5jdGlvbiB0cml2aWFsT3JkZXIobGVuZ3RoKSB7XG4gICAgcmV0dXJuIFtuZXcgQmlkaVNwYW4oMCwgbGVuZ3RoLCAwKV07XG59XG5sZXQgbW92ZWRPdmVyID0gXCJcIjtcbi8vIFRoaXMgaW1wbGVtZW50YXRpb24gbW92ZXMgc3RyaWN0bHkgdmlzdWFsbHksIHdpdGhvdXQgY29uY2VybiBmb3IgYVxuLy8gdHJhdmVyc2FsIHZpc2l0aW5nIGV2ZXJ5IGxvZ2ljYWwgcG9zaXRpb24gaW4gdGhlIHN0cmluZy4gSXQgd2lsbFxuLy8gc3RpbGwgZG8gc28gZm9yIHNpbXBsZSBpbnB1dCwgYnV0IHNpdHVhdGlvbnMgbGlrZSBtdWx0aXBsZSBpc29sYXRlc1xuLy8gd2l0aCB0aGUgc2FtZSBsZXZlbCBuZXh0IHRvIGVhY2ggb3RoZXIsIG9yIHRleHQgZ29pbmcgYWdhaW5zdCB0aGVcbi8vIG1haW4gZGlyIGF0IHRoZSBlbmQgb2YgdGhlIGxpbmUsIHdpbGwgbWFrZSBzb21lIHBvc2l0aW9uc1xuLy8gdW5yZWFjaGFibGUgd2l0aCB0aGlzIG1vdGlvbi4gRWFjaCB2aXNpYmxlIGN1cnNvciBwb3NpdGlvbiB3aWxsXG4vLyBjb3JyZXNwb25kIHRvIHRoZSBsb3dlci1sZXZlbCBiaWRpIHNwYW4gdGhhdCB0b3VjaGVzIGl0LlxuLy9cbi8vIFRoZSBhbHRlcm5hdGl2ZSB3b3VsZCBiZSB0byBzb2x2ZSBhbiBvcmRlciBnbG9iYWxseSBmb3IgYSBnaXZlblxuLy8gbGluZSwgbWFraW5nIHN1cmUgdGhhdCBpdCBpbmNsdWRlcyBldmVyeSBwb3NpdGlvbiwgYnV0IHRoYXQgd291bGRcbi8vIHJlcXVpcmUgYXNzb2NpYXRpbmcgbm9uLWNhbm9uaWNhbCAoaGlnaGVyIGJpZGkgc3BhbiBsZXZlbClcbi8vIHBvc2l0aW9ucyB3aXRoIGEgZ2l2ZW4gdmlzdWFsIHBvc2l0aW9uLCB3aGljaCBpcyBsaWtlbHkgdG8gY29uZnVzZVxuLy8gcGVvcGxlLiAoQW5kIHdvdWxkIGdlbmVyYWxseSBiZSBhIGxvdCBtb3JlIGNvbXBsaWNhdGVkLilcbmZ1bmN0aW9uIG1vdmVWaXN1YWxseShsaW5lLCBvcmRlciwgZGlyLCBzdGFydCwgZm9yd2FyZCkge1xuICAgIHZhciBfYTtcbiAgICBsZXQgc3RhcnRJbmRleCA9IHN0YXJ0LmhlYWQgLSBsaW5lLmZyb207XG4gICAgbGV0IHNwYW5JID0gQmlkaVNwYW4uZmluZChvcmRlciwgc3RhcnRJbmRleCwgKF9hID0gc3RhcnQuYmlkaUxldmVsKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiAtMSwgc3RhcnQuYXNzb2MpO1xuICAgIGxldCBzcGFuID0gb3JkZXJbc3BhbkldLCBzcGFuRW5kID0gc3Bhbi5zaWRlKGZvcndhcmQsIGRpcik7XG4gICAgLy8gRW5kIG9mIHNwYW5cbiAgICBpZiAoc3RhcnRJbmRleCA9PSBzcGFuRW5kKSB7XG4gICAgICAgIGxldCBuZXh0SSA9IHNwYW5JICs9IGZvcndhcmQgPyAxIDogLTE7XG4gICAgICAgIGlmIChuZXh0SSA8IDAgfHwgbmV4dEkgPj0gb3JkZXIubGVuZ3RoKVxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIHNwYW4gPSBvcmRlcltzcGFuSSA9IG5leHRJXTtcbiAgICAgICAgc3RhcnRJbmRleCA9IHNwYW4uc2lkZSghZm9yd2FyZCwgZGlyKTtcbiAgICAgICAgc3BhbkVuZCA9IHNwYW4uc2lkZShmb3J3YXJkLCBkaXIpO1xuICAgIH1cbiAgICBsZXQgbmV4dEluZGV4ID0gZmluZENsdXN0ZXJCcmVhayhsaW5lLnRleHQsIHN0YXJ0SW5kZXgsIHNwYW4uZm9yd2FyZChmb3J3YXJkLCBkaXIpKTtcbiAgICBpZiAobmV4dEluZGV4IDwgc3Bhbi5mcm9tIHx8IG5leHRJbmRleCA+IHNwYW4udG8pXG4gICAgICAgIG5leHRJbmRleCA9IHNwYW5FbmQ7XG4gICAgbW92ZWRPdmVyID0gbGluZS50ZXh0LnNsaWNlKE1hdGgubWluKHN0YXJ0SW5kZXgsIG5leHRJbmRleCksIE1hdGgubWF4KHN0YXJ0SW5kZXgsIG5leHRJbmRleCkpO1xuICAgIGxldCBuZXh0U3BhbiA9IHNwYW5JID09IChmb3J3YXJkID8gb3JkZXIubGVuZ3RoIC0gMSA6IDApID8gbnVsbCA6IG9yZGVyW3NwYW5JICsgKGZvcndhcmQgPyAxIDogLTEpXTtcbiAgICBpZiAobmV4dFNwYW4gJiYgbmV4dEluZGV4ID09IHNwYW5FbmQgJiYgbmV4dFNwYW4ubGV2ZWwgKyAoZm9yd2FyZCA/IDAgOiAxKSA8IHNwYW4ubGV2ZWwpXG4gICAgICAgIHJldHVybiBFZGl0b3JTZWxlY3Rpb24uY3Vyc29yKG5leHRTcGFuLnNpZGUoIWZvcndhcmQsIGRpcikgKyBsaW5lLmZyb20sIG5leHRTcGFuLmZvcndhcmQoZm9yd2FyZCwgZGlyKSA/IDEgOiAtMSwgbmV4dFNwYW4ubGV2ZWwpO1xuICAgIHJldHVybiBFZGl0b3JTZWxlY3Rpb24uY3Vyc29yKG5leHRJbmRleCArIGxpbmUuZnJvbSwgc3Bhbi5mb3J3YXJkKGZvcndhcmQsIGRpcikgPyAtMSA6IDEsIHNwYW4ubGV2ZWwpO1xufVxuZnVuY3Rpb24gYXV0b0RpcmVjdGlvbih0ZXh0LCBmcm9tLCB0bykge1xuICAgIGZvciAobGV0IGkgPSBmcm9tOyBpIDwgdG87IGkrKykge1xuICAgICAgICBsZXQgdHlwZSA9IGNoYXJUeXBlKHRleHQuY2hhckNvZGVBdChpKSk7XG4gICAgICAgIGlmICh0eXBlID09IDEgLyogVC5MICovKVxuICAgICAgICAgICAgcmV0dXJuIExUUjtcbiAgICAgICAgaWYgKHR5cGUgPT0gMiAvKiBULlIgKi8gfHwgdHlwZSA9PSA0IC8qIFQuQUwgKi8pXG4gICAgICAgICAgICByZXR1cm4gUlRMO1xuICAgIH1cbiAgICByZXR1cm4gTFRSO1xufVxuXG5jb25zdCBjbGlja0FkZHNTZWxlY3Rpb25SYW5nZSA9IC8qQF9fUFVSRV9fKi9GYWNldC5kZWZpbmUoKTtcbmNvbnN0IGRyYWdNb3Zlc1NlbGVjdGlvbiQxID0gLypAX19QVVJFX18qL0ZhY2V0LmRlZmluZSgpO1xuY29uc3QgbW91c2VTZWxlY3Rpb25TdHlsZSA9IC8qQF9fUFVSRV9fKi9GYWNldC5kZWZpbmUoKTtcbmNvbnN0IGV4Y2VwdGlvblNpbmsgPSAvKkBfX1BVUkVfXyovRmFjZXQuZGVmaW5lKCk7XG5jb25zdCB1cGRhdGVMaXN0ZW5lciA9IC8qQF9fUFVSRV9fKi9GYWNldC5kZWZpbmUoKTtcbmNvbnN0IGlucHV0SGFuZGxlciA9IC8qQF9fUFVSRV9fKi9GYWNldC5kZWZpbmUoKTtcbmNvbnN0IGZvY3VzQ2hhbmdlRWZmZWN0ID0gLypAX19QVVJFX18qL0ZhY2V0LmRlZmluZSgpO1xuY29uc3QgY2xpcGJvYXJkSW5wdXRGaWx0ZXIgPSAvKkBfX1BVUkVfXyovRmFjZXQuZGVmaW5lKCk7XG5jb25zdCBjbGlwYm9hcmRPdXRwdXRGaWx0ZXIgPSAvKkBfX1BVUkVfXyovRmFjZXQuZGVmaW5lKCk7XG5jb25zdCBwZXJMaW5lVGV4dERpcmVjdGlvbiA9IC8qQF9fUFVSRV9fKi9GYWNldC5kZWZpbmUoe1xuICAgIGNvbWJpbmU6IHZhbHVlcyA9PiB2YWx1ZXMuc29tZSh4ID0+IHgpXG59KTtcbmNvbnN0IG5hdGl2ZVNlbGVjdGlvbkhpZGRlbiA9IC8qQF9fUFVSRV9fKi9GYWNldC5kZWZpbmUoe1xuICAgIGNvbWJpbmU6IHZhbHVlcyA9PiB2YWx1ZXMuc29tZSh4ID0+IHgpXG59KTtcbmNvbnN0IHNjcm9sbEhhbmRsZXIgPSAvKkBfX1BVUkVfXyovRmFjZXQuZGVmaW5lKCk7XG5jbGFzcyBTY3JvbGxUYXJnZXQge1xuICAgIGNvbnN0cnVjdG9yKHJhbmdlLCB5ID0gXCJuZWFyZXN0XCIsIHggPSBcIm5lYXJlc3RcIiwgeU1hcmdpbiA9IDUsIHhNYXJnaW4gPSA1LCBcbiAgICAvLyBUaGlzIGRhdGEgc3RydWN0dXJlIGlzIGFidXNlZCB0byBhbHNvIHN0b3JlIHByZWNpc2Ugc2Nyb2xsXG4gICAgLy8gc25hcHNob3RzLCBpbnN0ZWFkIG9mIGEgYHNjcm9sbEludG9WaWV3YCByZXF1ZXN0LiBXaGVuIHRoaXNcbiAgICAvLyBmbGFnIGlzIGB0cnVlYCwgYHJhbmdlYCBwb2ludHMgYXQgYSBwb3NpdGlvbiBpbiB0aGUgcmVmZXJlbmNlXG4gICAgLy8gbGluZSwgYHlNYXJnaW5gIGhvbGRzIHRoZSBkaWZmZXJlbmNlIGJldHdlZW4gdGhlIHRvcCBvZiB0aGF0XG4gICAgLy8gbGluZSBhbmQgdGhlIHRvcCBvZiB0aGUgZWRpdG9yLCBhbmQgYHhNYXJnaW5gIGhvbGRzIHRoZVxuICAgIC8vIGVkaXRvcidzIGBzY3JvbGxMZWZ0YC5cbiAgICBpc1NuYXBzaG90ID0gZmFsc2UpIHtcbiAgICAgICAgdGhpcy5yYW5nZSA9IHJhbmdlO1xuICAgICAgICB0aGlzLnkgPSB5O1xuICAgICAgICB0aGlzLnggPSB4O1xuICAgICAgICB0aGlzLnlNYXJnaW4gPSB5TWFyZ2luO1xuICAgICAgICB0aGlzLnhNYXJnaW4gPSB4TWFyZ2luO1xuICAgICAgICB0aGlzLmlzU25hcHNob3QgPSBpc1NuYXBzaG90O1xuICAgIH1cbiAgICBtYXAoY2hhbmdlcykge1xuICAgICAgICByZXR1cm4gY2hhbmdlcy5lbXB0eSA/IHRoaXMgOlxuICAgICAgICAgICAgbmV3IFNjcm9sbFRhcmdldCh0aGlzLnJhbmdlLm1hcChjaGFuZ2VzKSwgdGhpcy55LCB0aGlzLngsIHRoaXMueU1hcmdpbiwgdGhpcy54TWFyZ2luLCB0aGlzLmlzU25hcHNob3QpO1xuICAgIH1cbiAgICBjbGlwKHN0YXRlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJhbmdlLnRvIDw9IHN0YXRlLmRvYy5sZW5ndGggPyB0aGlzIDpcbiAgICAgICAgICAgIG5ldyBTY3JvbGxUYXJnZXQoRWRpdG9yU2VsZWN0aW9uLmN1cnNvcihzdGF0ZS5kb2MubGVuZ3RoKSwgdGhpcy55LCB0aGlzLngsIHRoaXMueU1hcmdpbiwgdGhpcy54TWFyZ2luLCB0aGlzLmlzU25hcHNob3QpO1xuICAgIH1cbn1cbmNvbnN0IHNjcm9sbEludG9WaWV3ID0gLypAX19QVVJFX18qL1N0YXRlRWZmZWN0LmRlZmluZSh7IG1hcDogKHQsIGNoKSA9PiB0Lm1hcChjaCkgfSk7XG5jb25zdCBzZXRFZGl0Q29udGV4dEZvcm1hdHRpbmcgPSAvKkBfX1BVUkVfXyovU3RhdGVFZmZlY3QuZGVmaW5lKCk7XG4vKipcbkxvZyBvciByZXBvcnQgYW4gdW5oYW5kbGVkIGV4Y2VwdGlvbiBpbiBjbGllbnQgY29kZS4gU2hvdWxkXG5wcm9iYWJseSBvbmx5IGJlIHVzZWQgYnkgZXh0ZW5zaW9uIGNvZGUgdGhhdCBhbGxvd3MgY2xpZW50IGNvZGUgdG9cbnByb3ZpZGUgZnVuY3Rpb25zLCBhbmQgY2FsbHMgdGhvc2UgZnVuY3Rpb25zIGluIGEgY29udGV4dCB3aGVyZSBhblxuZXhjZXB0aW9uIGNhbid0IGJlIHByb3BhZ2F0ZWQgdG8gY2FsbGluZyBjb2RlIGluIGEgcmVhc29uYWJsZSB3YXlcbihmb3IgZXhhbXBsZSB3aGVuIGluIGFuIGV2ZW50IGhhbmRsZXIpLlxuXG5FaXRoZXIgY2FsbHMgYSBoYW5kbGVyIHJlZ2lzdGVyZWQgd2l0aFxuW2BFZGl0b3JWaWV3LmV4Y2VwdGlvblNpbmtgXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI3ZpZXcuRWRpdG9yVmlld15leGNlcHRpb25TaW5rKSxcbmB3aW5kb3cub25lcnJvcmAsIGlmIGRlZmluZWQsIG9yIGBjb25zb2xlLmVycm9yYCAoaW4gd2hpY2ggY2FzZVxuaXQnbGwgcGFzcyBgY29udGV4dGAsIHdoZW4gZ2l2ZW4sIGFzIGZpcnN0IGFyZ3VtZW50KS5cbiovXG5mdW5jdGlvbiBsb2dFeGNlcHRpb24oc3RhdGUsIGV4Y2VwdGlvbiwgY29udGV4dCkge1xuICAgIGxldCBoYW5kbGVyID0gc3RhdGUuZmFjZXQoZXhjZXB0aW9uU2luayk7XG4gICAgaWYgKGhhbmRsZXIubGVuZ3RoKVxuICAgICAgICBoYW5kbGVyWzBdKGV4Y2VwdGlvbik7XG4gICAgZWxzZSBpZiAod2luZG93Lm9uZXJyb3IgJiYgd2luZG93Lm9uZXJyb3IoU3RyaW5nKGV4Y2VwdGlvbiksIGNvbnRleHQsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCBleGNlcHRpb24pKSA7XG4gICAgZWxzZSBpZiAoY29udGV4dClcbiAgICAgICAgY29uc29sZS5lcnJvcihjb250ZXh0ICsgXCI6XCIsIGV4Y2VwdGlvbik7XG4gICAgZWxzZVxuICAgICAgICBjb25zb2xlLmVycm9yKGV4Y2VwdGlvbik7XG59XG5jb25zdCBlZGl0YWJsZSA9IC8qQF9fUFVSRV9fKi9GYWNldC5kZWZpbmUoeyBjb21iaW5lOiB2YWx1ZXMgPT4gdmFsdWVzLmxlbmd0aCA/IHZhbHVlc1swXSA6IHRydWUgfSk7XG5sZXQgbmV4dFBsdWdpbklEID0gMDtcbmNvbnN0IHZpZXdQbHVnaW4gPSAvKkBfX1BVUkVfXyovRmFjZXQuZGVmaW5lKHtcbiAgICBjb21iaW5lKHBsdWdpbnMpIHtcbiAgICAgICAgcmV0dXJuIHBsdWdpbnMuZmlsdGVyKChwLCBpKSA9PiB7XG4gICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IGk7IGorKylcbiAgICAgICAgICAgICAgICBpZiAocGx1Z2luc1tqXS5wbHVnaW4gPT0gcC5wbHVnaW4pXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9KTtcbiAgICB9XG59KTtcbi8qKlxuVmlldyBwbHVnaW5zIGFzc29jaWF0ZSBzdGF0ZWZ1bCB2YWx1ZXMgd2l0aCBhIHZpZXcuIFRoZXkgY2FuXG5pbmZsdWVuY2UgdGhlIHdheSB0aGUgY29udGVudCBpcyBkcmF3biwgYW5kIGFyZSBub3RpZmllZCBvZiB0aGluZ3NcbnRoYXQgaGFwcGVuIGluIHRoZSB2aWV3LiBUaGV5IG9wdGlvbmFsbHkgdGFrZSBhbiBhcmd1bWVudCwgaW5cbndoaWNoIGNhc2UgeW91IG5lZWQgdG8gY2FsbCBbYG9mYF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyN2aWV3LlZpZXdQbHVnaW4ub2YpIHRvIGNyZWF0ZVxuYW4gZXh0ZW5zaW9uIGZvciB0aGUgcGx1Z2luLiBXaGVuIHRoZSBhcmd1bWVudCB0eXBlIGlzIHVuZGVmaW5lZCxcbnlvdSBjYW4gdXNlIHRoZSBwbHVnaW4gaW5zdGFuY2UgYXMgYW4gZXh0ZW5zaW9uIGRpcmVjdGx5LlxuKi9cbmNsYXNzIFZpZXdQbHVnaW4ge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8qKlxuICAgIEBpbnRlcm5hbFxuICAgICovXG4gICAgaWQsIFxuICAgIC8qKlxuICAgIEBpbnRlcm5hbFxuICAgICovXG4gICAgY3JlYXRlLCBcbiAgICAvKipcbiAgICBAaW50ZXJuYWxcbiAgICAqL1xuICAgIGRvbUV2ZW50SGFuZGxlcnMsIFxuICAgIC8qKlxuICAgIEBpbnRlcm5hbFxuICAgICovXG4gICAgZG9tRXZlbnRPYnNlcnZlcnMsIGJ1aWxkRXh0ZW5zaW9ucykge1xuICAgICAgICB0aGlzLmlkID0gaWQ7XG4gICAgICAgIHRoaXMuY3JlYXRlID0gY3JlYXRlO1xuICAgICAgICB0aGlzLmRvbUV2ZW50SGFuZGxlcnMgPSBkb21FdmVudEhhbmRsZXJzO1xuICAgICAgICB0aGlzLmRvbUV2ZW50T2JzZXJ2ZXJzID0gZG9tRXZlbnRPYnNlcnZlcnM7XG4gICAgICAgIHRoaXMuYmFzZUV4dGVuc2lvbnMgPSBidWlsZEV4dGVuc2lvbnModGhpcyk7XG4gICAgICAgIHRoaXMuZXh0ZW5zaW9uID0gdGhpcy5iYXNlRXh0ZW5zaW9ucy5jb25jYXQodmlld1BsdWdpbi5vZih7IHBsdWdpbjogdGhpcywgYXJnOiB1bmRlZmluZWQgfSkpO1xuICAgIH1cbiAgICAvKipcbiAgICBDcmVhdGUgYW4gZXh0ZW5zaW9uIGZvciB0aGlzIHBsdWdpbiB3aXRoIHRoZSBnaXZlbiBhcmd1bWVudC5cbiAgICAqL1xuICAgIG9mKGFyZykge1xuICAgICAgICByZXR1cm4gdGhpcy5iYXNlRXh0ZW5zaW9ucy5jb25jYXQodmlld1BsdWdpbi5vZih7IHBsdWdpbjogdGhpcywgYXJnIH0pKTtcbiAgICB9XG4gICAgLyoqXG4gICAgRGVmaW5lIGEgcGx1Z2luIGZyb20gYSBjb25zdHJ1Y3RvciBmdW5jdGlvbiB0aGF0IGNyZWF0ZXMgdGhlXG4gICAgcGx1Z2luJ3MgdmFsdWUsIGdpdmVuIGFuIGVkaXRvciB2aWV3LlxuICAgICovXG4gICAgc3RhdGljIGRlZmluZShjcmVhdGUsIHNwZWMpIHtcbiAgICAgICAgY29uc3QgeyBldmVudEhhbmRsZXJzLCBldmVudE9ic2VydmVycywgcHJvdmlkZSwgZGVjb3JhdGlvbnM6IGRlY28gfSA9IHNwZWMgfHwge307XG4gICAgICAgIHJldHVybiBuZXcgVmlld1BsdWdpbihuZXh0UGx1Z2luSUQrKywgY3JlYXRlLCBldmVudEhhbmRsZXJzLCBldmVudE9ic2VydmVycywgcGx1Z2luID0+IHtcbiAgICAgICAgICAgIGxldCBleHQgPSBbXTtcbiAgICAgICAgICAgIGlmIChkZWNvKVxuICAgICAgICAgICAgICAgIGV4dC5wdXNoKGRlY29yYXRpb25zLm9mKHZpZXcgPT4ge1xuICAgICAgICAgICAgICAgICAgICBsZXQgcGx1Z2luSW5zdCA9IHZpZXcucGx1Z2luKHBsdWdpbik7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBwbHVnaW5JbnN0ID8gZGVjbyhwbHVnaW5JbnN0KSA6IERlY29yYXRpb24ubm9uZTtcbiAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICBpZiAocHJvdmlkZSlcbiAgICAgICAgICAgICAgICBleHQucHVzaChwcm92aWRlKHBsdWdpbikpO1xuICAgICAgICAgICAgcmV0dXJuIGV4dDtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgIENyZWF0ZSBhIHBsdWdpbiBmb3IgYSBjbGFzcyB3aG9zZSBjb25zdHJ1Y3RvciB0YWtlcyBhIHNpbmdsZVxuICAgIGVkaXRvciB2aWV3IGFzIGFyZ3VtZW50LlxuICAgICovXG4gICAgc3RhdGljIGZyb21DbGFzcyhjbHMsIHNwZWMpIHtcbiAgICAgICAgcmV0dXJuIFZpZXdQbHVnaW4uZGVmaW5lKCh2aWV3LCBhcmcpID0+IG5ldyBjbHModmlldywgYXJnKSwgc3BlYyk7XG4gICAgfVxufVxuY2xhc3MgUGx1Z2luSW5zdGFuY2Uge1xuICAgIGNvbnN0cnVjdG9yKHNwZWMpIHtcbiAgICAgICAgdGhpcy5zcGVjID0gc3BlYztcbiAgICAgICAgLy8gV2hlbiBzdGFydGluZyBhbiB1cGRhdGUsIGFsbCBwbHVnaW5zIGhhdmUgdGhpcyBmaWVsZCBzZXQgdG8gdGhlXG4gICAgICAgIC8vIHVwZGF0ZSBvYmplY3QsIGluZGljYXRpbmcgdGhleSBuZWVkIHRvIGJlIHVwZGF0ZWQuIFdoZW4gZmluaXNoZWRcbiAgICAgICAgLy8gdXBkYXRpbmcsIGl0IGlzIHNldCB0byBgbnVsbGAuIFJldHJpZXZpbmcgYSBwbHVnaW4gdGhhdCBuZWVkcyB0b1xuICAgICAgICAvLyBiZSB1cGRhdGVkIHdpdGggYHZpZXcucGx1Z2luYCBmb3JjZXMgYW4gZWFnZXIgdXBkYXRlLlxuICAgICAgICB0aGlzLm11c3RVcGRhdGUgPSBudWxsO1xuICAgICAgICAvLyBUaGlzIGlzIG51bGwgd2hlbiB0aGUgcGx1Z2luIGlzIGluaXRpYWxseSBjcmVhdGVkLCBidXRcbiAgICAgICAgLy8gaW5pdGlhbGl6ZWQgb24gdGhlIGZpcnN0IHVwZGF0ZS5cbiAgICAgICAgdGhpcy52YWx1ZSA9IG51bGw7XG4gICAgfVxuICAgIGdldCBwbHVnaW4oKSB7IHJldHVybiB0aGlzLnNwZWMgJiYgdGhpcy5zcGVjLnBsdWdpbjsgfVxuICAgIHVwZGF0ZSh2aWV3KSB7XG4gICAgICAgIGlmICghdGhpcy52YWx1ZSkge1xuICAgICAgICAgICAgaWYgKHRoaXMuc3BlYykge1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudmFsdWUgPSB0aGlzLnNwZWMucGx1Z2luLmNyZWF0ZSh2aWV3LCB0aGlzLnNwZWMuYXJnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgbG9nRXhjZXB0aW9uKHZpZXcuc3RhdGUsIGUsIFwiQ29kZU1pcnJvciBwbHVnaW4gY3Jhc2hlZFwiKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kZWFjdGl2YXRlKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHRoaXMubXVzdFVwZGF0ZSkge1xuICAgICAgICAgICAgbGV0IHVwZGF0ZSA9IHRoaXMubXVzdFVwZGF0ZTtcbiAgICAgICAgICAgIHRoaXMubXVzdFVwZGF0ZSA9IG51bGw7XG4gICAgICAgICAgICBpZiAodGhpcy52YWx1ZS51cGRhdGUpIHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnZhbHVlLnVwZGF0ZSh1cGRhdGUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgICAgICBsb2dFeGNlcHRpb24odXBkYXRlLnN0YXRlLCBlLCBcIkNvZGVNaXJyb3IgcGx1Z2luIGNyYXNoZWRcIik7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnZhbHVlLmRlc3Ryb3kpXG4gICAgICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudmFsdWUuZGVzdHJveSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgY2F0Y2ggKF8pIHsgfVxuICAgICAgICAgICAgICAgICAgICB0aGlzLmRlYWN0aXZhdGUoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIGRlc3Ryb3kodmlldykge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIGlmICgoX2EgPSB0aGlzLnZhbHVlKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuZGVzdHJveSkge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICB0aGlzLnZhbHVlLmRlc3Ryb3koKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgbG9nRXhjZXB0aW9uKHZpZXcuc3RhdGUsIGUsIFwiQ29kZU1pcnJvciBwbHVnaW4gY3Jhc2hlZFwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBkZWFjdGl2YXRlKCkge1xuICAgICAgICB0aGlzLnNwZWMgPSB0aGlzLnZhbHVlID0gbnVsbDtcbiAgICB9XG59XG5jb25zdCBlZGl0b3JBdHRyaWJ1dGVzID0gLypAX19QVVJFX18qL0ZhY2V0LmRlZmluZSgpO1xuY29uc3QgY29udGVudEF0dHJpYnV0ZXMgPSAvKkBfX1BVUkVfXyovRmFjZXQuZGVmaW5lKCk7XG4vLyBQcm92aWRlIGRlY29yYXRpb25zXG5jb25zdCBkZWNvcmF0aW9ucyA9IC8qQF9fUFVSRV9fKi9GYWNldC5kZWZpbmUoKTtcbmNvbnN0IGJsb2NrV3JhcHBlcnMgPSAvKkBfX1BVUkVfXyovRmFjZXQuZGVmaW5lKCk7XG5jb25zdCBvdXRlckRlY29yYXRpb25zID0gLypAX19QVVJFX18qL0ZhY2V0LmRlZmluZSgpO1xuY29uc3QgYXRvbWljUmFuZ2VzID0gLypAX19QVVJFX18qL0ZhY2V0LmRlZmluZSgpO1xuY29uc3QgYmlkaUlzb2xhdGVkUmFuZ2VzID0gLypAX19QVVJFX18qL0ZhY2V0LmRlZmluZSgpO1xuZnVuY3Rpb24gZ2V0SXNvbGF0ZWRSYW5nZXModmlldywgbGluZSkge1xuICAgIGxldCBpc29sYXRlcyA9IHZpZXcuc3RhdGUuZmFjZXQoYmlkaUlzb2xhdGVkUmFuZ2VzKTtcbiAgICBpZiAoIWlzb2xhdGVzLmxlbmd0aClcbiAgICAgICAgcmV0dXJuIGlzb2xhdGVzO1xuICAgIGxldCBzZXRzID0gaXNvbGF0ZXMubWFwKGkgPT4gaSBpbnN0YW5jZW9mIEZ1bmN0aW9uID8gaSh2aWV3KSA6IGkpO1xuICAgIGxldCByZXN1bHQgPSBbXTtcbiAgICBSYW5nZVNldC5zcGFucyhzZXRzLCBsaW5lLmZyb20sIGxpbmUudG8sIHtcbiAgICAgICAgcG9pbnQoKSB7IH0sXG4gICAgICAgIHNwYW4oZnJvbURvYywgdG9Eb2MsIGFjdGl2ZSwgb3Blbikge1xuICAgICAgICAgICAgbGV0IGZyb20gPSBmcm9tRG9jIC0gbGluZS5mcm9tLCB0byA9IHRvRG9jIC0gbGluZS5mcm9tO1xuICAgICAgICAgICAgbGV0IGxldmVsID0gcmVzdWx0O1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IGFjdGl2ZS5sZW5ndGggLSAxOyBpID49IDA7IGktLSwgb3Blbi0tKSB7XG4gICAgICAgICAgICAgICAgbGV0IGRpcmVjdGlvbiA9IGFjdGl2ZVtpXS5zcGVjLmJpZGlJc29sYXRlLCB1cGRhdGU7XG4gICAgICAgICAgICAgICAgaWYgKGRpcmVjdGlvbiA9PSBudWxsKVxuICAgICAgICAgICAgICAgICAgICBkaXJlY3Rpb24gPSBhdXRvRGlyZWN0aW9uKGxpbmUudGV4dCwgZnJvbSwgdG8pO1xuICAgICAgICAgICAgICAgIGlmIChvcGVuID4gMCAmJiBsZXZlbC5sZW5ndGggJiZcbiAgICAgICAgICAgICAgICAgICAgKHVwZGF0ZSA9IGxldmVsW2xldmVsLmxlbmd0aCAtIDFdKS50byA9PSBmcm9tICYmIHVwZGF0ZS5kaXJlY3Rpb24gPT0gZGlyZWN0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgIHVwZGF0ZS50byA9IHRvO1xuICAgICAgICAgICAgICAgICAgICBsZXZlbCA9IHVwZGF0ZS5pbm5lcjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBhZGQgPSB7IGZyb20sIHRvLCBkaXJlY3Rpb24sIGlubmVyOiBbXSB9O1xuICAgICAgICAgICAgICAgICAgICBsZXZlbC5wdXNoKGFkZCk7XG4gICAgICAgICAgICAgICAgICAgIGxldmVsID0gYWRkLmlubmVyO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiByZXN1bHQ7XG59XG5jb25zdCBzY3JvbGxNYXJnaW5zID0gLypAX19QVVJFX18qL0ZhY2V0LmRlZmluZSgpO1xuZnVuY3Rpb24gZ2V0U2Nyb2xsTWFyZ2lucyh2aWV3KSB7XG4gICAgbGV0IGxlZnQgPSAwLCByaWdodCA9IDAsIHRvcCA9IDAsIGJvdHRvbSA9IDA7XG4gICAgZm9yIChsZXQgc291cmNlIG9mIHZpZXcuc3RhdGUuZmFjZXQoc2Nyb2xsTWFyZ2lucykpIHtcbiAgICAgICAgbGV0IG0gPSBzb3VyY2Uodmlldyk7XG4gICAgICAgIGlmIChtKSB7XG4gICAgICAgICAgICBpZiAobS5sZWZ0ICE9IG51bGwpXG4gICAgICAgICAgICAgICAgbGVmdCA9IE1hdGgubWF4KGxlZnQsIG0ubGVmdCk7XG4gICAgICAgICAgICBpZiAobS5yaWdodCAhPSBudWxsKVxuICAgICAgICAgICAgICAgIHJpZ2h0ID0gTWF0aC5tYXgocmlnaHQsIG0ucmlnaHQpO1xuICAgICAgICAgICAgaWYgKG0udG9wICE9IG51bGwpXG4gICAgICAgICAgICAgICAgdG9wID0gTWF0aC5tYXgodG9wLCBtLnRvcCk7XG4gICAgICAgICAgICBpZiAobS5ib3R0b20gIT0gbnVsbClcbiAgICAgICAgICAgICAgICBib3R0b20gPSBNYXRoLm1heChib3R0b20sIG0uYm90dG9tKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4geyBsZWZ0LCByaWdodCwgdG9wLCBib3R0b20gfTtcbn1cbmNvbnN0IHN0eWxlTW9kdWxlID0gLypAX19QVVJFX18qL0ZhY2V0LmRlZmluZSgpO1xuY2xhc3MgQ2hhbmdlZFJhbmdlIHtcbiAgICBjb25zdHJ1Y3Rvcihmcm9tQSwgdG9BLCBmcm9tQiwgdG9CKSB7XG4gICAgICAgIHRoaXMuZnJvbUEgPSBmcm9tQTtcbiAgICAgICAgdGhpcy50b0EgPSB0b0E7XG4gICAgICAgIHRoaXMuZnJvbUIgPSBmcm9tQjtcbiAgICAgICAgdGhpcy50b0IgPSB0b0I7XG4gICAgfVxuICAgIGpvaW4ob3RoZXIpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBDaGFuZ2VkUmFuZ2UoTWF0aC5taW4odGhpcy5mcm9tQSwgb3RoZXIuZnJvbUEpLCBNYXRoLm1heCh0aGlzLnRvQSwgb3RoZXIudG9BKSwgTWF0aC5taW4odGhpcy5mcm9tQiwgb3RoZXIuZnJvbUIpLCBNYXRoLm1heCh0aGlzLnRvQiwgb3RoZXIudG9CKSk7XG4gICAgfVxuICAgIGFkZFRvU2V0KHNldCkge1xuICAgICAgICBsZXQgaSA9IHNldC5sZW5ndGgsIG1lID0gdGhpcztcbiAgICAgICAgZm9yICg7IGkgPiAwOyBpLS0pIHtcbiAgICAgICAgICAgIGxldCByYW5nZSA9IHNldFtpIC0gMV07XG4gICAgICAgICAgICBpZiAocmFuZ2UuZnJvbUEgPiBtZS50b0EpXG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICBpZiAocmFuZ2UudG9BIDwgbWUuZnJvbUEpXG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBtZSA9IG1lLmpvaW4ocmFuZ2UpO1xuICAgICAgICAgICAgc2V0LnNwbGljZShpIC0gMSwgMSk7XG4gICAgICAgIH1cbiAgICAgICAgc2V0LnNwbGljZShpLCAwLCBtZSk7XG4gICAgICAgIHJldHVybiBzZXQ7XG4gICAgfVxuICAgIC8vIEV4dGVuZCBhIHNldCB0byBjb3ZlciBhbGwgdGhlIGNvbnRlbnQgaW4gYHJhbmdlc2AsIHdoaWNoIGlzIGFcbiAgICAvLyBmbGF0IGFycmF5IHdpdGggZWFjaCBwYWlyIG9mIG51bWJlcnMgcmVwcmVzZW50aW5nIGZyb21CL3RvQlxuICAgIC8vIHBvc2l0aW9ucy4gVGhlc2UgcGFpcnMgYXJlIGdlbmVyYXRlZCBpbiB1bmNoYW5nZWQgcmFuZ2VzLCBzbyB0aGVcbiAgICAvLyBvZmZzZXQgYmV0d2VlbiBkb2MgQSBhbmQgZG9jIEIgaXMgdGhlIHNhbWUgZm9yIHRoZWlyIHN0YXJ0IGFuZFxuICAgIC8vIGVuZCBwb2ludHMuXG4gICAgc3RhdGljIGV4dGVuZFdpdGhSYW5nZXMoZGlmZiwgcmFuZ2VzKSB7XG4gICAgICAgIGlmIChyYW5nZXMubGVuZ3RoID09IDApXG4gICAgICAgICAgICByZXR1cm4gZGlmZjtcbiAgICAgICAgbGV0IHJlc3VsdCA9IFtdO1xuICAgICAgICBmb3IgKGxldCBkSSA9IDAsIHJJID0gMCwgb2ZmID0gMDs7KSB7XG4gICAgICAgICAgICBsZXQgbmV4dEQgPSBkSSA8IGRpZmYubGVuZ3RoID8gZGlmZltkSV0uZnJvbUIgOiAxZTk7XG4gICAgICAgICAgICBsZXQgbmV4dFIgPSBySSA8IHJhbmdlcy5sZW5ndGggPyByYW5nZXNbckldIDogMWU5O1xuICAgICAgICAgICAgbGV0IGZyb21CID0gTWF0aC5taW4obmV4dEQsIG5leHRSKTtcbiAgICAgICAgICAgIGlmIChmcm9tQiA9PSAxZTkpXG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBsZXQgZnJvbUEgPSBmcm9tQiArIG9mZiwgdG9CID0gZnJvbUIsIHRvQSA9IGZyb21BO1xuICAgICAgICAgICAgZm9yICg7Oykge1xuICAgICAgICAgICAgICAgIGlmIChySSA8IHJhbmdlcy5sZW5ndGggJiYgcmFuZ2VzW3JJXSA8PSB0b0IpIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGVuZCA9IHJhbmdlc1tySSArIDFdO1xuICAgICAgICAgICAgICAgICAgICBySSArPSAyO1xuICAgICAgICAgICAgICAgICAgICB0b0IgPSBNYXRoLm1heCh0b0IsIGVuZCk7XG4gICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSBkSTsgaSA8IGRpZmYubGVuZ3RoICYmIGRpZmZbaV0uZnJvbUIgPD0gdG9COyBpKyspXG4gICAgICAgICAgICAgICAgICAgICAgICBvZmYgPSBkaWZmW2ldLnRvQSAtIGRpZmZbaV0udG9CO1xuICAgICAgICAgICAgICAgICAgICB0b0EgPSBNYXRoLm1heCh0b0EsIGVuZCArIG9mZik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGRJIDwgZGlmZi5sZW5ndGggJiYgZGlmZltkSV0uZnJvbUIgPD0gdG9CKSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBuZXh0ID0gZGlmZltkSSsrXTtcbiAgICAgICAgICAgICAgICAgICAgdG9CID0gTWF0aC5tYXgodG9CLCBuZXh0LnRvQik7XG4gICAgICAgICAgICAgICAgICAgIHRvQSA9IE1hdGgubWF4KHRvQSwgbmV4dC50b0EpO1xuICAgICAgICAgICAgICAgICAgICBvZmYgPSBuZXh0LnRvQSAtIG5leHQudG9CO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmVzdWx0LnB1c2gobmV3IENoYW5nZWRSYW5nZShmcm9tQSwgdG9BLCBmcm9tQiwgdG9CKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG59XG4vKipcblZpZXcgW3BsdWdpbnNdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jdmlldy5WaWV3UGx1Z2luKSBhcmUgZ2l2ZW4gaW5zdGFuY2VzIG9mIHRoaXNcbmNsYXNzLCB3aGljaCBkZXNjcmliZSB3aGF0IGhhcHBlbmVkLCB3aGVuZXZlciB0aGUgdmlldyBpcyB1cGRhdGVkLlxuKi9cbmNsYXNzIFZpZXdVcGRhdGUge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8qKlxuICAgIFRoZSBlZGl0b3IgdmlldyB0aGF0IHRoZSB1cGRhdGUgaXMgYXNzb2NpYXRlZCB3aXRoLlxuICAgICovXG4gICAgdmlldywgXG4gICAgLyoqXG4gICAgVGhlIG5ldyBlZGl0b3Igc3RhdGUuXG4gICAgKi9cbiAgICBzdGF0ZSwgXG4gICAgLyoqXG4gICAgVGhlIHRyYW5zYWN0aW9ucyBpbnZvbHZlZCBpbiB0aGUgdXBkYXRlLiBNYXkgYmUgZW1wdHkuXG4gICAgKi9cbiAgICB0cmFuc2FjdGlvbnMpIHtcbiAgICAgICAgdGhpcy52aWV3ID0gdmlldztcbiAgICAgICAgdGhpcy5zdGF0ZSA9IHN0YXRlO1xuICAgICAgICB0aGlzLnRyYW5zYWN0aW9ucyA9IHRyYW5zYWN0aW9ucztcbiAgICAgICAgLyoqXG4gICAgICAgIEBpbnRlcm5hbFxuICAgICAgICAqL1xuICAgICAgICB0aGlzLmZsYWdzID0gMDtcbiAgICAgICAgdGhpcy5zdGFydFN0YXRlID0gdmlldy5zdGF0ZTtcbiAgICAgICAgdGhpcy5jaGFuZ2VzID0gQ2hhbmdlU2V0LmVtcHR5KHRoaXMuc3RhcnRTdGF0ZS5kb2MubGVuZ3RoKTtcbiAgICAgICAgZm9yIChsZXQgdHIgb2YgdHJhbnNhY3Rpb25zKVxuICAgICAgICAgICAgdGhpcy5jaGFuZ2VzID0gdGhpcy5jaGFuZ2VzLmNvbXBvc2UodHIuY2hhbmdlcyk7XG4gICAgICAgIGxldCBjaGFuZ2VkUmFuZ2VzID0gW107XG4gICAgICAgIHRoaXMuY2hhbmdlcy5pdGVyQ2hhbmdlZFJhbmdlcygoZnJvbUEsIHRvQSwgZnJvbUIsIHRvQikgPT4gY2hhbmdlZFJhbmdlcy5wdXNoKG5ldyBDaGFuZ2VkUmFuZ2UoZnJvbUEsIHRvQSwgZnJvbUIsIHRvQikpKTtcbiAgICAgICAgdGhpcy5jaGFuZ2VkUmFuZ2VzID0gY2hhbmdlZFJhbmdlcztcbiAgICB9XG4gICAgLyoqXG4gICAgQGludGVybmFsXG4gICAgKi9cbiAgICBzdGF0aWMgY3JlYXRlKHZpZXcsIHN0YXRlLCB0cmFuc2FjdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBWaWV3VXBkYXRlKHZpZXcsIHN0YXRlLCB0cmFuc2FjdGlvbnMpO1xuICAgIH1cbiAgICAvKipcbiAgICBUZWxscyB5b3Ugd2hldGhlciB0aGUgW3ZpZXdwb3J0XShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI3ZpZXcuRWRpdG9yVmlldy52aWV3cG9ydCkgb3JcbiAgICBbdmlzaWJsZSByYW5nZXNdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jdmlldy5FZGl0b3JWaWV3LnZpc2libGVSYW5nZXMpIGNoYW5nZWQgaW4gdGhpc1xuICAgIHVwZGF0ZS5cbiAgICAqL1xuICAgIGdldCB2aWV3cG9ydENoYW5nZWQoKSB7XG4gICAgICAgIHJldHVybiAodGhpcy5mbGFncyAmIDQgLyogVXBkYXRlRmxhZy5WaWV3cG9ydCAqLykgPiAwO1xuICAgIH1cbiAgICAvKipcbiAgICBSZXR1cm5zIHRydWUgd2hlblxuICAgIFtgdmlld3BvcnRDaGFuZ2VkYF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyN2aWV3LlZpZXdVcGRhdGUudmlld3BvcnRDaGFuZ2VkKSBpcyB0cnVlXG4gICAgYW5kIHRoZSB2aWV3cG9ydCBjaGFuZ2UgaXMgbm90IGp1c3QgdGhlIHJlc3VsdCBvZiBtYXBwaW5nIGl0IGluXG4gICAgcmVzcG9uc2UgdG8gZG9jdW1lbnQgY2hhbmdlcy5cbiAgICAqL1xuICAgIGdldCB2aWV3cG9ydE1vdmVkKCkge1xuICAgICAgICByZXR1cm4gKHRoaXMuZmxhZ3MgJiA4IC8qIFVwZGF0ZUZsYWcuVmlld3BvcnRNb3ZlZCAqLykgPiAwO1xuICAgIH1cbiAgICAvKipcbiAgICBJbmRpY2F0ZXMgd2hldGhlciB0aGUgaGVpZ2h0IG9mIGEgYmxvY2sgZWxlbWVudCBpbiB0aGUgZWRpdG9yXG4gICAgY2hhbmdlZCBpbiB0aGlzIHVwZGF0ZS5cbiAgICAqL1xuICAgIGdldCBoZWlnaHRDaGFuZ2VkKCkge1xuICAgICAgICByZXR1cm4gKHRoaXMuZmxhZ3MgJiAyIC8qIFVwZGF0ZUZsYWcuSGVpZ2h0ICovKSA+IDA7XG4gICAgfVxuICAgIC8qKlxuICAgIFJldHVybnMgdHJ1ZSB3aGVuIHRoZSBkb2N1bWVudCB3YXMgbW9kaWZpZWQgb3IgdGhlIHNpemUgb2YgdGhlXG4gICAgZWRpdG9yLCBvciBlbGVtZW50cyB3aXRoaW4gdGhlIGVkaXRvciwgY2hhbmdlZC5cbiAgICAqL1xuICAgIGdldCBnZW9tZXRyeUNoYW5nZWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRvY0NoYW5nZWQgfHwgKHRoaXMuZmxhZ3MgJiAoMTYgLyogVXBkYXRlRmxhZy5HZW9tZXRyeSAqLyB8IDIgLyogVXBkYXRlRmxhZy5IZWlnaHQgKi8pKSA+IDA7XG4gICAgfVxuICAgIC8qKlxuICAgIFRydWUgd2hlbiB0aGlzIHVwZGF0ZSBpbmRpY2F0ZXMgYSBmb2N1cyBjaGFuZ2UuXG4gICAgKi9cbiAgICBnZXQgZm9jdXNDaGFuZ2VkKCkge1xuICAgICAgICByZXR1cm4gKHRoaXMuZmxhZ3MgJiAxIC8qIFVwZGF0ZUZsYWcuRm9jdXMgKi8pID4gMDtcbiAgICB9XG4gICAgLyoqXG4gICAgV2hldGhlciB0aGUgZG9jdW1lbnQgY2hhbmdlZCBpbiB0aGlzIHVwZGF0ZS5cbiAgICAqL1xuICAgIGdldCBkb2NDaGFuZ2VkKCkge1xuICAgICAgICByZXR1cm4gIXRoaXMuY2hhbmdlcy5lbXB0eTtcbiAgICB9XG4gICAgLyoqXG4gICAgV2hldGhlciB0aGUgc2VsZWN0aW9uIHdhcyBleHBsaWNpdGx5IHNldCBpbiB0aGlzIHVwZGF0ZS5cbiAgICAqL1xuICAgIGdldCBzZWxlY3Rpb25TZXQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnRyYW5zYWN0aW9ucy5zb21lKHRyID0+IHRyLnNlbGVjdGlvbik7XG4gICAgfVxuICAgIC8qKlxuICAgIEBpbnRlcm5hbFxuICAgICovXG4gICAgZ2V0IGVtcHR5KCkgeyByZXR1cm4gdGhpcy5mbGFncyA9PSAwICYmIHRoaXMudHJhbnNhY3Rpb25zLmxlbmd0aCA9PSAwOyB9XG59XG5cbmNvbnN0IG5vQ2hpbGRyZW4gPSBbXTtcbmNsYXNzIFRpbGUge1xuICAgIGNvbnN0cnVjdG9yKGRvbSwgbGVuZ3RoLCBmbGFncyA9IDApIHtcbiAgICAgICAgdGhpcy5kb20gPSBkb207XG4gICAgICAgIHRoaXMubGVuZ3RoID0gbGVuZ3RoO1xuICAgICAgICB0aGlzLmZsYWdzID0gZmxhZ3M7XG4gICAgICAgIHRoaXMucGFyZW50ID0gbnVsbDtcbiAgICAgICAgZG9tLmNtVGlsZSA9IHRoaXM7XG4gICAgfVxuICAgIGdldCBicmVha0FmdGVyKCkgeyByZXR1cm4gKHRoaXMuZmxhZ3MgJiAxIC8qIFRpbGVGbGFnLkJyZWFrQWZ0ZXIgKi8pOyB9XG4gICAgZ2V0IGNoaWxkcmVuKCkgeyByZXR1cm4gbm9DaGlsZHJlbjsgfVxuICAgIGlzV2lkZ2V0KCkgeyByZXR1cm4gZmFsc2U7IH1cbiAgICBnZXQgaXNIaWRkZW4oKSB7IHJldHVybiBmYWxzZTsgfVxuICAgIGlzQ29tcG9zaXRlKCkgeyByZXR1cm4gZmFsc2U7IH1cbiAgICBpc0xpbmUoKSB7IHJldHVybiBmYWxzZTsgfVxuICAgIGlzVGV4dCgpIHsgcmV0dXJuIGZhbHNlOyB9XG4gICAgaXNCbG9jaygpIHsgcmV0dXJuIGZhbHNlOyB9XG4gICAgZ2V0IGRvbUF0dHJzKCkgeyByZXR1cm4gbnVsbDsgfVxuICAgIHN5bmModHJhY2spIHtcbiAgICAgICAgdGhpcy5mbGFncyB8PSAyIC8qIFRpbGVGbGFnLlN5bmNlZCAqLztcbiAgICAgICAgaWYgKHRoaXMuZmxhZ3MgJiA0IC8qIFRpbGVGbGFnLkF0dHJzRGlydHkgKi8pIHtcbiAgICAgICAgICAgIHRoaXMuZmxhZ3MgJj0gfjQgLyogVGlsZUZsYWcuQXR0cnNEaXJ0eSAqLztcbiAgICAgICAgICAgIGxldCBhdHRycyA9IHRoaXMuZG9tQXR0cnM7XG4gICAgICAgICAgICBpZiAoYXR0cnMpXG4gICAgICAgICAgICAgICAgc2V0QXR0cnModGhpcy5kb20sIGF0dHJzKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICB0b1N0cmluZygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29uc3RydWN0b3IubmFtZSArICh0aGlzLmNoaWxkcmVuLmxlbmd0aCA/IGAoJHt0aGlzLmNoaWxkcmVufSlgIDogXCJcIikgKyAodGhpcy5icmVha0FmdGVyID8gXCIjXCIgOiBcIlwiKTtcbiAgICB9XG4gICAgZGVzdHJveSgpIHsgdGhpcy5wYXJlbnQgPSBudWxsOyB9XG4gICAgc2V0RE9NKGRvbSkge1xuICAgICAgICB0aGlzLmRvbSA9IGRvbTtcbiAgICAgICAgZG9tLmNtVGlsZSA9IHRoaXM7XG4gICAgfVxuICAgIGdldCBwb3NBdFN0YXJ0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wYXJlbnQgPyB0aGlzLnBhcmVudC5wb3NCZWZvcmUodGhpcykgOiAwO1xuICAgIH1cbiAgICBnZXQgcG9zQXRFbmQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnBvc0F0U3RhcnQgKyB0aGlzLmxlbmd0aDtcbiAgICB9XG4gICAgcG9zQmVmb3JlKHRpbGUsIHN0YXJ0ID0gdGhpcy5wb3NBdFN0YXJ0KSB7XG4gICAgICAgIGxldCBwb3MgPSBzdGFydDtcbiAgICAgICAgZm9yIChsZXQgY2hpbGQgb2YgdGhpcy5jaGlsZHJlbikge1xuICAgICAgICAgICAgaWYgKGNoaWxkID09IHRpbGUpXG4gICAgICAgICAgICAgICAgcmV0dXJuIHBvcztcbiAgICAgICAgICAgIHBvcyArPSBjaGlsZC5sZW5ndGggKyBjaGlsZC5icmVha0FmdGVyO1xuICAgICAgICB9XG4gICAgICAgIHRocm93IG5ldyBSYW5nZUVycm9yKFwiSW52YWxpZCBjaGlsZCBpbiBwb3NCZWZvcmVcIik7XG4gICAgfVxuICAgIHBvc0FmdGVyKHRpbGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucG9zQmVmb3JlKHRpbGUpICsgdGlsZS5sZW5ndGg7XG4gICAgfVxuICAgIGNvdmVycyhzaWRlKSB7IHJldHVybiB0cnVlOyB9XG4gICAgY29vcmRzSW4ocG9zLCBzaWRlKSB7IHJldHVybiBudWxsOyB9XG4gICAgZG9tUG9zRm9yKG9mZiwgc2lkZSkge1xuICAgICAgICBsZXQgaW5kZXggPSBkb21JbmRleCh0aGlzLmRvbSk7XG4gICAgICAgIGxldCBhZnRlciA9IHRoaXMubGVuZ3RoID8gb2ZmID4gMCA6IHNpZGUgPiAwO1xuICAgICAgICByZXR1cm4gbmV3IERPTVBvcyh0aGlzLnBhcmVudC5kb20sIGluZGV4ICsgKGFmdGVyID8gMSA6IDApLCBvZmYgPT0gMCB8fCBvZmYgPT0gdGhpcy5sZW5ndGgpO1xuICAgIH1cbiAgICBtYXJrRGlydHkoYXR0cnMpIHtcbiAgICAgICAgdGhpcy5mbGFncyAmPSB+MiAvKiBUaWxlRmxhZy5TeW5jZWQgKi87XG4gICAgICAgIGlmIChhdHRycylcbiAgICAgICAgICAgIHRoaXMuZmxhZ3MgfD0gNCAvKiBUaWxlRmxhZy5BdHRyc0RpcnR5ICovO1xuICAgICAgICBpZiAodGhpcy5wYXJlbnQgJiYgKHRoaXMucGFyZW50LmZsYWdzICYgMiAvKiBUaWxlRmxhZy5TeW5jZWQgKi8pKVxuICAgICAgICAgICAgdGhpcy5wYXJlbnQubWFya0RpcnR5KGZhbHNlKTtcbiAgICB9XG4gICAgZ2V0IG92ZXJyaWRlRE9NVGV4dCgpIHsgcmV0dXJuIG51bGw7IH1cbiAgICBnZXQgcm9vdCgpIHtcbiAgICAgICAgZm9yIChsZXQgdCA9IHRoaXM7IHQ7IHQgPSB0LnBhcmVudClcbiAgICAgICAgICAgIGlmICh0IGluc3RhbmNlb2YgRG9jVGlsZSlcbiAgICAgICAgICAgICAgICByZXR1cm4gdDtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIHN0YXRpYyBnZXQoZG9tKSB7XG4gICAgICAgIHJldHVybiBkb20uY21UaWxlO1xuICAgIH1cbn1cbmNsYXNzIENvbXBvc2l0ZVRpbGUgZXh0ZW5kcyBUaWxlIHtcbiAgICBjb25zdHJ1Y3Rvcihkb20pIHtcbiAgICAgICAgc3VwZXIoZG9tLCAwKTtcbiAgICAgICAgdGhpcy5fY2hpbGRyZW4gPSBbXTtcbiAgICB9XG4gICAgaXNDb21wb3NpdGUoKSB7IHJldHVybiB0cnVlOyB9XG4gICAgZ2V0IGNoaWxkcmVuKCkgeyByZXR1cm4gdGhpcy5fY2hpbGRyZW47IH1cbiAgICBnZXQgbGFzdENoaWxkKCkgeyByZXR1cm4gdGhpcy5jaGlsZHJlbi5sZW5ndGggPyB0aGlzLmNoaWxkcmVuW3RoaXMuY2hpbGRyZW4ubGVuZ3RoIC0gMV0gOiBudWxsOyB9XG4gICAgYXBwZW5kKGNoaWxkKSB7XG4gICAgICAgIHRoaXMuY2hpbGRyZW4ucHVzaChjaGlsZCk7XG4gICAgICAgIGNoaWxkLnBhcmVudCA9IHRoaXM7XG4gICAgfVxuICAgIHN5bmModHJhY2spIHtcbiAgICAgICAgaWYgKHRoaXMuZmxhZ3MgJiAyIC8qIFRpbGVGbGFnLlN5bmNlZCAqLylcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgc3VwZXIuc3luYyh0cmFjayk7XG4gICAgICAgIGxldCBwYXJlbnQgPSB0aGlzLmRvbSwgcHJldiA9IG51bGwsIG5leHQ7XG4gICAgICAgIGxldCB0cmFja2luZyA9ICh0cmFjayA9PT0gbnVsbCB8fCB0cmFjayA9PT0gdm9pZCAwID8gdm9pZCAwIDogdHJhY2subm9kZSkgPT0gcGFyZW50ID8gdHJhY2sgOiBudWxsO1xuICAgICAgICBsZXQgbGVuZ3RoID0gMDtcbiAgICAgICAgZm9yIChsZXQgY2hpbGQgb2YgdGhpcy5jaGlsZHJlbikge1xuICAgICAgICAgICAgY2hpbGQuc3luYyh0cmFjayk7XG4gICAgICAgICAgICBsZW5ndGggKz0gY2hpbGQubGVuZ3RoICsgY2hpbGQuYnJlYWtBZnRlcjtcbiAgICAgICAgICAgIG5leHQgPSBwcmV2ID8gcHJldi5uZXh0U2libGluZyA6IHBhcmVudC5maXJzdENoaWxkO1xuICAgICAgICAgICAgaWYgKHRyYWNraW5nICYmIG5leHQgIT0gY2hpbGQuZG9tKVxuICAgICAgICAgICAgICAgIHRyYWNraW5nLndyaXR0ZW4gPSB0cnVlO1xuICAgICAgICAgICAgaWYgKGNoaWxkLmRvbS5wYXJlbnROb2RlID09IHBhcmVudCkge1xuICAgICAgICAgICAgICAgIHdoaWxlIChuZXh0ICYmIG5leHQgIT0gY2hpbGQuZG9tKVxuICAgICAgICAgICAgICAgICAgICBuZXh0ID0gcm0kMShuZXh0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHBhcmVudC5pbnNlcnRCZWZvcmUoY2hpbGQuZG9tLCBuZXh0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHByZXYgPSBjaGlsZC5kb207XG4gICAgICAgIH1cbiAgICAgICAgbmV4dCA9IHByZXYgPyBwcmV2Lm5leHRTaWJsaW5nIDogcGFyZW50LmZpcnN0Q2hpbGQ7XG4gICAgICAgIGlmICh0cmFja2luZyAmJiBuZXh0KVxuICAgICAgICAgICAgdHJhY2tpbmcud3JpdHRlbiA9IHRydWU7XG4gICAgICAgIHdoaWxlIChuZXh0KVxuICAgICAgICAgICAgbmV4dCA9IHJtJDEobmV4dCk7XG4gICAgICAgIHRoaXMubGVuZ3RoID0gbGVuZ3RoO1xuICAgIH1cbn1cbi8vIFJlbW92ZSBhIERPTSBub2RlIGFuZCByZXR1cm4gaXRzIG5leHQgc2libGluZy5cbmZ1bmN0aW9uIHJtJDEoZG9tKSB7XG4gICAgbGV0IG5leHQgPSBkb20ubmV4dFNpYmxpbmc7XG4gICAgZG9tLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoZG9tKTtcbiAgICByZXR1cm4gbmV4dDtcbn1cbi8vIFRoZSB0b3AtbGV2ZWwgdGlsZS4gSXRzIGRvbSBwcm9wZXJ0eSBlcXVhbHMgdmlldy5jb250ZW50RE9NLlxuY2xhc3MgRG9jVGlsZSBleHRlbmRzIENvbXBvc2l0ZVRpbGUge1xuICAgIGNvbnN0cnVjdG9yKHZpZXcsIGRvbSkge1xuICAgICAgICBzdXBlcihkb20pO1xuICAgICAgICB0aGlzLnZpZXcgPSB2aWV3O1xuICAgIH1cbiAgICBvd25zKHRpbGUpIHtcbiAgICAgICAgZm9yICg7IHRpbGU7IHRpbGUgPSB0aWxlLnBhcmVudClcbiAgICAgICAgICAgIGlmICh0aWxlID09IHRoaXMpXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgaXNCbG9jaygpIHsgcmV0dXJuIHRydWU7IH1cbiAgICBuZWFyZXN0KGRvbSkge1xuICAgICAgICBmb3IgKDs7KSB7XG4gICAgICAgICAgICBpZiAoIWRvbSlcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgIGxldCB0aWxlID0gVGlsZS5nZXQoZG9tKTtcbiAgICAgICAgICAgIGlmICh0aWxlICYmIHRoaXMub3ducyh0aWxlKSlcbiAgICAgICAgICAgICAgICByZXR1cm4gdGlsZTtcbiAgICAgICAgICAgIGRvbSA9IGRvbS5wYXJlbnROb2RlO1xuICAgICAgICB9XG4gICAgfVxuICAgIGJsb2NrVGlsZXMoZikge1xuICAgICAgICBmb3IgKGxldCBzdGFjayA9IFtdLCBjdXIgPSB0aGlzLCBpID0gMCwgcG9zID0gMDs7KSB7XG4gICAgICAgICAgICBpZiAoaSA9PSBjdXIuY2hpbGRyZW4ubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFzdGFjay5sZW5ndGgpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICBjdXIgPSBjdXIucGFyZW50O1xuICAgICAgICAgICAgICAgIGlmIChjdXIuYnJlYWtBZnRlcilcbiAgICAgICAgICAgICAgICAgICAgcG9zKys7XG4gICAgICAgICAgICAgICAgaSA9IHN0YWNrLnBvcCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgbGV0IG5leHQgPSBjdXIuY2hpbGRyZW5baSsrXTtcbiAgICAgICAgICAgICAgICBpZiAobmV4dCBpbnN0YW5jZW9mIEJsb2NrV3JhcHBlclRpbGUpIHtcbiAgICAgICAgICAgICAgICAgICAgc3RhY2sucHVzaChpKTtcbiAgICAgICAgICAgICAgICAgICAgY3VyID0gbmV4dDtcbiAgICAgICAgICAgICAgICAgICAgaSA9IDA7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBsZXQgZW5kID0gcG9zICsgbmV4dC5sZW5ndGg7XG4gICAgICAgICAgICAgICAgICAgIGxldCByZXN1bHQgPSBmKG5leHQsIHBvcyk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHQgIT09IHVuZGVmaW5lZClcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgICAgICAgICAgICAgIHBvcyA9IGVuZCArIG5leHQuYnJlYWtBZnRlcjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgLy8gRmluZCB0aGUgYmxvY2sgYXQgdGhlIGdpdmVuIHBvc2l0aW9uLiBJZiBzaWRlIDwgLTEsIG1ha2Ugc3VyZSB0b1xuICAgIC8vIHN0YXkgYmVmb3JlIGJsb2NrIHdpZGdldHMgYXQgdGhhdCBwb3NpdGlvbiwgaWYgc2lkZSA+IDEsIGFmdGVyXG4gICAgLy8gc3VjaCB3aWRnZXRzICh1c2VkIGZvciBzZWxlY3Rpb24gZHJhd2luZywgd2hpY2ggbmVlZHMgdG8gYmUgYWJsZVxuICAgIC8vIHRvIGdldCBjb29yZGluYXRlcyBmb3IgcG9zaXRpb25zIHRoYXQgYXJlbid0IHZhbGlkIGN1cnNvciBwb3NpdGlvbnMpLlxuICAgIHJlc29sdmVCbG9jayhwb3MsIHNpZGUpIHtcbiAgICAgICAgbGV0IGJlZm9yZSwgYmVmb3JlT2ZmID0gLTEsIGFmdGVyLCBhZnRlck9mZiA9IC0xO1xuICAgICAgICB0aGlzLmJsb2NrVGlsZXMoKHRpbGUsIG9mZikgPT4ge1xuICAgICAgICAgICAgbGV0IGVuZCA9IG9mZiArIHRpbGUubGVuZ3RoO1xuICAgICAgICAgICAgaWYgKHBvcyA+PSBvZmYgJiYgcG9zIDw9IGVuZCkge1xuICAgICAgICAgICAgICAgIGlmICh0aWxlLmlzV2lkZ2V0KCkgJiYgc2lkZSA+PSAtMSAmJiBzaWRlIDw9IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRpbGUuZmxhZ3MgJiAzMiAvKiBUaWxlRmxhZy5BZnRlciAqLylcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgICAgICBpZiAodGlsZS5mbGFncyAmIDE2IC8qIFRpbGVGbGFnLkJlZm9yZSAqLylcbiAgICAgICAgICAgICAgICAgICAgICAgIGJlZm9yZSA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKChvZmYgPCBwb3MgfHwgcG9zID09IGVuZCAmJiAoc2lkZSA8IC0xID8gdGlsZS5sZW5ndGggOiB0aWxlLmNvdmVycygxKSkpICYmXG4gICAgICAgICAgICAgICAgICAgICghYmVmb3JlIHx8ICF0aWxlLmlzV2lkZ2V0KCkgJiYgYmVmb3JlLmlzV2lkZ2V0KCkpKSB7XG4gICAgICAgICAgICAgICAgICAgIGJlZm9yZSA9IHRpbGU7XG4gICAgICAgICAgICAgICAgICAgIGJlZm9yZU9mZiA9IHBvcyAtIG9mZjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKChlbmQgPiBwb3MgfHwgcG9zID09IG9mZiAmJiAoc2lkZSA+IDEgPyB0aWxlLmxlbmd0aCA6IHRpbGUuY292ZXJzKC0xKSkpICYmXG4gICAgICAgICAgICAgICAgICAgICghYWZ0ZXIgfHwgIXRpbGUuaXNXaWRnZXQoKSAmJiBhZnRlci5pc1dpZGdldCgpKSkge1xuICAgICAgICAgICAgICAgICAgICBhZnRlciA9IHRpbGU7XG4gICAgICAgICAgICAgICAgICAgIGFmdGVyT2ZmID0gcG9zIC0gb2ZmO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIGlmICghYmVmb3JlICYmICFhZnRlcilcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIk5vIHRpbGUgYXQgcG9zaXRpb24gXCIgKyBwb3MpO1xuICAgICAgICByZXR1cm4gYmVmb3JlICYmIHNpZGUgPCAwIHx8ICFhZnRlciA/IHsgdGlsZTogYmVmb3JlLCBvZmZzZXQ6IGJlZm9yZU9mZiB9IDogeyB0aWxlOiBhZnRlciwgb2Zmc2V0OiBhZnRlck9mZiB9O1xuICAgIH1cbn1cbmNsYXNzIEJsb2NrV3JhcHBlclRpbGUgZXh0ZW5kcyBDb21wb3NpdGVUaWxlIHtcbiAgICBjb25zdHJ1Y3Rvcihkb20sIHdyYXBwZXIpIHtcbiAgICAgICAgc3VwZXIoZG9tKTtcbiAgICAgICAgdGhpcy53cmFwcGVyID0gd3JhcHBlcjtcbiAgICB9XG4gICAgaXNCbG9jaygpIHsgcmV0dXJuIHRydWU7IH1cbiAgICBjb3ZlcnMoc2lkZSkge1xuICAgICAgICBpZiAoIXRoaXMuY2hpbGRyZW4ubGVuZ3RoKVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICByZXR1cm4gc2lkZSA8IDAgPyB0aGlzLmNoaWxkcmVuWzBdLmNvdmVycygtMSkgOiB0aGlzLmxhc3RDaGlsZC5jb3ZlcnMoMSk7XG4gICAgfVxuICAgIGdldCBkb21BdHRycygpIHsgcmV0dXJuIHRoaXMud3JhcHBlci5hdHRyaWJ1dGVzOyB9XG4gICAgc3RhdGljIG9mKHdyYXBwZXIsIGRvbSkge1xuICAgICAgICBsZXQgdGlsZSA9IG5ldyBCbG9ja1dyYXBwZXJUaWxlKGRvbSB8fCBkb2N1bWVudC5jcmVhdGVFbGVtZW50KHdyYXBwZXIudGFnTmFtZSksIHdyYXBwZXIpO1xuICAgICAgICBpZiAoIWRvbSlcbiAgICAgICAgICAgIHRpbGUuZmxhZ3MgfD0gNCAvKiBUaWxlRmxhZy5BdHRyc0RpcnR5ICovO1xuICAgICAgICByZXR1cm4gdGlsZTtcbiAgICB9XG59XG5jbGFzcyBMaW5lVGlsZSBleHRlbmRzIENvbXBvc2l0ZVRpbGUge1xuICAgIGNvbnN0cnVjdG9yKGRvbSwgYXR0cnMpIHtcbiAgICAgICAgc3VwZXIoZG9tKTtcbiAgICAgICAgdGhpcy5hdHRycyA9IGF0dHJzO1xuICAgIH1cbiAgICBpc0xpbmUoKSB7IHJldHVybiB0cnVlOyB9XG4gICAgc3RhdGljIHN0YXJ0KGF0dHJzLCBkb20sIGtlZXBBdHRycykge1xuICAgICAgICBsZXQgbGluZSA9IG5ldyBMaW5lVGlsZShkb20gfHwgZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKSwgYXR0cnMpO1xuICAgICAgICBpZiAoIWRvbSB8fCAha2VlcEF0dHJzKVxuICAgICAgICAgICAgbGluZS5mbGFncyB8PSA0IC8qIFRpbGVGbGFnLkF0dHJzRGlydHkgKi87XG4gICAgICAgIHJldHVybiBsaW5lO1xuICAgIH1cbiAgICBnZXQgZG9tQXR0cnMoKSB7IHJldHVybiB0aGlzLmF0dHJzOyB9XG4gICAgLy8gRmluZCB0aGUgdGlsZSBhc3NvY2lhdGVkIHdpdGggYSBnaXZlbiBwb3NpdGlvbiBpbiB0aGlzIGxpbmUuXG4gICAgcmVzb2x2ZUlubGluZShwb3MsIHNpZGUsIGZvckNvb3Jkcykge1xuICAgICAgICBsZXQgYmVmb3JlID0gbnVsbCwgYmVmb3JlT2ZmID0gLTEsIGFmdGVyID0gbnVsbCwgYWZ0ZXJPZmYgPSAtMTtcbiAgICAgICAgZnVuY3Rpb24gc2Nhbih0aWxlLCBwb3MpIHtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwLCBvZmYgPSAwOyBpIDwgdGlsZS5jaGlsZHJlbi5sZW5ndGggJiYgb2ZmIDw9IHBvczsgaSsrKSB7XG4gICAgICAgICAgICAgICAgbGV0IGNoaWxkID0gdGlsZS5jaGlsZHJlbltpXSwgZW5kID0gb2ZmICsgY2hpbGQubGVuZ3RoO1xuICAgICAgICAgICAgICAgIGlmIChlbmQgPj0gcG9zKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjaGlsZC5pc0NvbXBvc2l0ZSgpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzY2FuKGNoaWxkLCBwb3MgLSBvZmYpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKCghYWZ0ZXIgfHwgYWZ0ZXIuaXNIaWRkZW4gJiYgKHNpZGUgPiAwIHx8IGZvckNvb3JkcyAmJiBvblNhbWVMaW5lKGFmdGVyLCBjaGlsZCkpKSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgKGVuZCA+IHBvcyB8fCAoY2hpbGQuZmxhZ3MgJiAzMiAvKiBUaWxlRmxhZy5BZnRlciAqLykpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhZnRlciA9IGNoaWxkO1xuICAgICAgICAgICAgICAgICAgICAgICAgYWZ0ZXJPZmYgPSBwb3MgLSBvZmY7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAob2ZmIDwgcG9zIHx8IChjaGlsZC5mbGFncyAmIDE2IC8qIFRpbGVGbGFnLkJlZm9yZSAqLykgJiYgIWNoaWxkLmlzSGlkZGVuKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBiZWZvcmUgPSBjaGlsZDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJlZm9yZU9mZiA9IHBvcyAtIG9mZjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBvZmYgPSBlbmQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgc2Nhbih0aGlzLCBwb3MpO1xuICAgICAgICBsZXQgdGFyZ2V0ID0gKChzaWRlIDwgMCA/IGJlZm9yZSA6IGFmdGVyKSB8fCBiZWZvcmUgfHwgYWZ0ZXIpO1xuICAgICAgICByZXR1cm4gdGFyZ2V0ID8geyB0aWxlOiB0YXJnZXQsIG9mZnNldDogdGFyZ2V0ID09IGJlZm9yZSA/IGJlZm9yZU9mZiA6IGFmdGVyT2ZmIH0gOiBudWxsO1xuICAgIH1cbiAgICBjb29yZHNJbihwb3MsIHNpZGUpIHtcbiAgICAgICAgbGV0IGZvdW5kID0gdGhpcy5yZXNvbHZlSW5saW5lKHBvcywgc2lkZSwgdHJ1ZSk7XG4gICAgICAgIGlmICghZm91bmQpXG4gICAgICAgICAgICByZXR1cm4gZmFsbGJhY2tSZWN0KHRoaXMpO1xuICAgICAgICByZXR1cm4gZm91bmQudGlsZS5jb29yZHNJbihNYXRoLm1heCgwLCBmb3VuZC5vZmZzZXQpLCBzaWRlKTtcbiAgICB9XG4gICAgZG9tSW4ocG9zLCBzaWRlKSB7XG4gICAgICAgIGxldCBmb3VuZCA9IHRoaXMucmVzb2x2ZUlubGluZShwb3MsIHNpZGUpO1xuICAgICAgICBpZiAoZm91bmQpIHtcbiAgICAgICAgICAgIGxldCB7IHRpbGUsIG9mZnNldCB9ID0gZm91bmQ7XG4gICAgICAgICAgICBpZiAodGhpcy5kb20uY29udGFpbnModGlsZS5kb20pKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRpbGUuaXNUZXh0KCkpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgRE9NUG9zKHRpbGUuZG9tLCBNYXRoLm1pbih0aWxlLmRvbS5ub2RlVmFsdWUubGVuZ3RoLCBvZmZzZXQpKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGlsZS5kb21Qb3NGb3Iob2Zmc2V0LCB0aWxlLmZsYWdzICYgMTYgLyogVGlsZUZsYWcuQmVmb3JlICovID8gMSA6IHRpbGUuZmxhZ3MgJiAzMiAvKiBUaWxlRmxhZy5BZnRlciAqLyA/IC0xIDogc2lkZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsZXQgcGFyZW50ID0gZm91bmQudGlsZS5wYXJlbnQsIHNhdyA9IGZhbHNlO1xuICAgICAgICAgICAgZm9yIChsZXQgY2ggb2YgcGFyZW50LmNoaWxkcmVuKSB7XG4gICAgICAgICAgICAgICAgaWYgKHNhdylcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBET01Qb3MoY2guZG9tLCAwKTtcbiAgICAgICAgICAgICAgICBpZiAoY2ggPT0gZm91bmQudGlsZSkge1xuICAgICAgICAgICAgICAgICAgICBzYXcgPSB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbmV3IERPTVBvcyh0aGlzLmRvbSwgMCk7XG4gICAgfVxufVxuZnVuY3Rpb24gZmFsbGJhY2tSZWN0KHRpbGUpIHtcbiAgICBsZXQgbGFzdCA9IHRpbGUuZG9tLmxhc3RDaGlsZDtcbiAgICBpZiAoIWxhc3QpXG4gICAgICAgIHJldHVybiB0aWxlLmRvbS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICBsZXQgcmVjdHMgPSBjbGllbnRSZWN0c0ZvcihsYXN0KTtcbiAgICByZXR1cm4gcmVjdHNbcmVjdHMubGVuZ3RoIC0gMV0gfHwgbnVsbDtcbn1cbmZ1bmN0aW9uIG9uU2FtZUxpbmUoYSwgYikge1xuICAgIGxldCBwb3NBID0gYS5jb29yZHNJbigwLCAxKSwgcG9zQiA9IGIuY29vcmRzSW4oMCwgMSk7XG4gICAgcmV0dXJuIHBvc0EgJiYgcG9zQiAmJiBwb3NCLnRvcCA8IHBvc0EuYm90dG9tO1xufVxuY2xhc3MgTWFya1RpbGUgZXh0ZW5kcyBDb21wb3NpdGVUaWxlIHtcbiAgICBjb25zdHJ1Y3Rvcihkb20sIG1hcmspIHtcbiAgICAgICAgc3VwZXIoZG9tKTtcbiAgICAgICAgdGhpcy5tYXJrID0gbWFyaztcbiAgICB9XG4gICAgZ2V0IGRvbUF0dHJzKCkgeyByZXR1cm4gdGhpcy5tYXJrLmF0dHJzOyB9XG4gICAgc3RhdGljIG9mKG1hcmssIGRvbSkge1xuICAgICAgICBsZXQgdGlsZSA9IG5ldyBNYXJrVGlsZShkb20gfHwgZG9jdW1lbnQuY3JlYXRlRWxlbWVudChtYXJrLnRhZ05hbWUpLCBtYXJrKTtcbiAgICAgICAgaWYgKCFkb20pXG4gICAgICAgICAgICB0aWxlLmZsYWdzIHw9IDQgLyogVGlsZUZsYWcuQXR0cnNEaXJ0eSAqLztcbiAgICAgICAgcmV0dXJuIHRpbGU7XG4gICAgfVxufVxuY2xhc3MgVGV4dFRpbGUgZXh0ZW5kcyBUaWxlIHtcbiAgICBjb25zdHJ1Y3Rvcihkb20sIHRleHQpIHtcbiAgICAgICAgc3VwZXIoZG9tLCB0ZXh0Lmxlbmd0aCk7XG4gICAgICAgIHRoaXMudGV4dCA9IHRleHQ7XG4gICAgfVxuICAgIHN5bmModHJhY2spIHtcbiAgICAgICAgaWYgKHRoaXMuZmxhZ3MgJiAyIC8qIFRpbGVGbGFnLlN5bmNlZCAqLylcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgc3VwZXIuc3luYyh0cmFjayk7XG4gICAgICAgIGlmICh0aGlzLmRvbS5ub2RlVmFsdWUgIT0gdGhpcy50ZXh0KSB7XG4gICAgICAgICAgICBpZiAodHJhY2sgJiYgdHJhY2subm9kZSA9PSB0aGlzLmRvbSlcbiAgICAgICAgICAgICAgICB0cmFjay53cml0dGVuID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMuZG9tLm5vZGVWYWx1ZSA9IHRoaXMudGV4dDtcbiAgICAgICAgfVxuICAgIH1cbiAgICBpc1RleHQoKSB7IHJldHVybiB0cnVlOyB9XG4gICAgdG9TdHJpbmcoKSB7IHJldHVybiBKU09OLnN0cmluZ2lmeSh0aGlzLnRleHQpOyB9XG4gICAgY29vcmRzSW4ocG9zLCBzaWRlKSB7XG4gICAgICAgIGxldCBsZW5ndGggPSB0aGlzLmRvbS5ub2RlVmFsdWUubGVuZ3RoO1xuICAgICAgICBpZiAocG9zID4gbGVuZ3RoKVxuICAgICAgICAgICAgcG9zID0gbGVuZ3RoO1xuICAgICAgICBsZXQgZnJvbSA9IHBvcywgdG8gPSBwb3MsIGZsYXR0ZW4gPSAwO1xuICAgICAgICBpZiAocG9zID09IDAgJiYgc2lkZSA8IDAgfHwgcG9zID09IGxlbmd0aCAmJiBzaWRlID49IDApIHtcbiAgICAgICAgICAgIGlmICghKGJyb3dzZXIuY2hyb21lIHx8IGJyb3dzZXIuZ2Vja28pKSB7IC8vIFRoZXNlIGJyb3dzZXJzIHJlbGlhYmx5IHJldHVybiB2YWxpZCByZWN0YW5nbGVzIGZvciBlbXB0eSByYW5nZXNcbiAgICAgICAgICAgICAgICBpZiAocG9zKSB7XG4gICAgICAgICAgICAgICAgICAgIGZyb20tLTtcbiAgICAgICAgICAgICAgICAgICAgZmxhdHRlbiA9IDE7XG4gICAgICAgICAgICAgICAgfSAvLyBGSVhNRSB0aGlzIGlzIHdyb25nIGluIFJUTCB0ZXh0XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAodG8gPCBsZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgdG8rKztcbiAgICAgICAgICAgICAgICAgICAgZmxhdHRlbiA9IC0xO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGlmIChzaWRlIDwgMClcbiAgICAgICAgICAgICAgICBmcm9tLS07XG4gICAgICAgICAgICBlbHNlIGlmICh0byA8IGxlbmd0aClcbiAgICAgICAgICAgICAgICB0bysrO1xuICAgICAgICB9XG4gICAgICAgIGxldCByZWN0cyA9IHRleHRSYW5nZSh0aGlzLmRvbSwgZnJvbSwgdG8pLmdldENsaWVudFJlY3RzKCk7XG4gICAgICAgIGlmICghcmVjdHMubGVuZ3RoKVxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIGxldCByZWN0ID0gcmVjdHNbKGZsYXR0ZW4gPyBmbGF0dGVuIDwgMCA6IHNpZGUgPj0gMCkgPyAwIDogcmVjdHMubGVuZ3RoIC0gMV07XG4gICAgICAgIGlmIChicm93c2VyLnNhZmFyaSAmJiAhZmxhdHRlbiAmJiByZWN0LndpZHRoID09IDApXG4gICAgICAgICAgICByZWN0ID0gQXJyYXkucHJvdG90eXBlLmZpbmQuY2FsbChyZWN0cywgciA9PiByLndpZHRoKSB8fCByZWN0O1xuICAgICAgICByZXR1cm4gZmxhdHRlbiA/IGZsYXR0ZW5SZWN0KHJlY3QsIGZsYXR0ZW4gPCAwKSA6IHJlY3QgfHwgbnVsbDtcbiAgICB9XG4gICAgc3RhdGljIG9mKHRleHQsIGRvbSkge1xuICAgICAgICBsZXQgdGlsZSA9IG5ldyBUZXh0VGlsZShkb20gfHwgZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUodGV4dCksIHRleHQpO1xuICAgICAgICBpZiAoIWRvbSlcbiAgICAgICAgICAgIHRpbGUuZmxhZ3MgfD0gMiAvKiBUaWxlRmxhZy5TeW5jZWQgKi87XG4gICAgICAgIHJldHVybiB0aWxlO1xuICAgIH1cbn1cbmNsYXNzIFdpZGdldFRpbGUgZXh0ZW5kcyBUaWxlIHtcbiAgICBjb25zdHJ1Y3Rvcihkb20sIGxlbmd0aCwgd2lkZ2V0LCBmbGFncykge1xuICAgICAgICBzdXBlcihkb20sIGxlbmd0aCwgZmxhZ3MpO1xuICAgICAgICB0aGlzLndpZGdldCA9IHdpZGdldDtcbiAgICB9XG4gICAgaXNXaWRnZXQoKSB7IHJldHVybiB0cnVlOyB9XG4gICAgZ2V0IGlzSGlkZGVuKCkgeyByZXR1cm4gdGhpcy53aWRnZXQuaXNIaWRkZW47IH1cbiAgICBjb3ZlcnMoc2lkZSkge1xuICAgICAgICBpZiAodGhpcy5mbGFncyAmIDQ4IC8qIFRpbGVGbGFnLlBvaW50V2lkZ2V0ICovKVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICByZXR1cm4gKHRoaXMuZmxhZ3MgJiAoc2lkZSA8IDAgPyA2NCAvKiBUaWxlRmxhZy5JbmNTdGFydCAqLyA6IDEyOCAvKiBUaWxlRmxhZy5JbmNFbmQgKi8pKSA+IDA7XG4gICAgfVxuICAgIGNvb3Jkc0luKHBvcywgc2lkZSkgeyByZXR1cm4gdGhpcy5jb29yZHNJbldpZGdldChwb3MsIHNpZGUsIGZhbHNlKTsgfVxuICAgIGNvb3Jkc0luV2lkZ2V0KHBvcywgc2lkZSwgYmxvY2spIHtcbiAgICAgICAgbGV0IGN1c3RvbSA9IHRoaXMud2lkZ2V0LmNvb3Jkc0F0KHRoaXMuZG9tLCBwb3MsIHNpZGUpO1xuICAgICAgICBpZiAoY3VzdG9tKVxuICAgICAgICAgICAgcmV0dXJuIGN1c3RvbTtcbiAgICAgICAgaWYgKGJsb2NrKSB7XG4gICAgICAgICAgICByZXR1cm4gZmxhdHRlblJlY3QodGhpcy5kb20uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCksIHRoaXMubGVuZ3RoID8gcG9zID09IDAgOiBzaWRlIDw9IDApO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgbGV0IHJlY3RzID0gdGhpcy5kb20uZ2V0Q2xpZW50UmVjdHMoKSwgcmVjdCA9IG51bGw7XG4gICAgICAgICAgICBpZiAoIXJlY3RzLmxlbmd0aClcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgIGxldCBmcm9tQmFjayA9ICh0aGlzLmZsYWdzICYgMTYgLyogVGlsZUZsYWcuQmVmb3JlICovKSA/IHRydWUgOiAodGhpcy5mbGFncyAmIDMyIC8qIFRpbGVGbGFnLkFmdGVyICovKSA/IGZhbHNlIDogcG9zID4gMDtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSBmcm9tQmFjayA/IHJlY3RzLmxlbmd0aCAtIDEgOiAwOzsgaSArPSAoZnJvbUJhY2sgPyAtMSA6IDEpKSB7XG4gICAgICAgICAgICAgICAgcmVjdCA9IHJlY3RzW2ldO1xuICAgICAgICAgICAgICAgIGlmIChwb3MgPiAwID8gaSA9PSAwIDogaSA9PSByZWN0cy5sZW5ndGggLSAxIHx8IHJlY3QudG9wIDwgcmVjdC5ib3R0b20pXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGZsYXR0ZW5SZWN0KHJlY3QsICFmcm9tQmFjayk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZ2V0IG92ZXJyaWRlRE9NVGV4dCgpIHtcbiAgICAgICAgaWYgKCF0aGlzLmxlbmd0aClcbiAgICAgICAgICAgIHJldHVybiBUZXh0LmVtcHR5O1xuICAgICAgICBsZXQgeyByb290IH0gPSB0aGlzO1xuICAgICAgICBpZiAoIXJvb3QpXG4gICAgICAgICAgICByZXR1cm4gVGV4dC5lbXB0eTtcbiAgICAgICAgbGV0IHN0YXJ0ID0gdGhpcy5wb3NBdFN0YXJ0O1xuICAgICAgICByZXR1cm4gcm9vdC52aWV3LnN0YXRlLmRvYy5zbGljZShzdGFydCwgc3RhcnQgKyB0aGlzLmxlbmd0aCk7XG4gICAgfVxuICAgIGRlc3Ryb3koKSB7XG4gICAgICAgIHN1cGVyLmRlc3Ryb3koKTtcbiAgICAgICAgdGhpcy53aWRnZXQuZGVzdHJveSh0aGlzLmRvbSk7XG4gICAgfVxuICAgIHN0YXRpYyBvZih3aWRnZXQsIHZpZXcsIGxlbmd0aCwgZmxhZ3MsIGRvbSkge1xuICAgICAgICBpZiAoIWRvbSkge1xuICAgICAgICAgICAgZG9tID0gd2lkZ2V0LnRvRE9NKHZpZXcpO1xuICAgICAgICAgICAgaWYgKCF3aWRnZXQuZWRpdGFibGUpXG4gICAgICAgICAgICAgICAgZG9tLmNvbnRlbnRFZGl0YWJsZSA9IFwiZmFsc2VcIjtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbmV3IFdpZGdldFRpbGUoZG9tLCBsZW5ndGgsIHdpZGdldCwgZmxhZ3MpO1xuICAgIH1cbn1cbi8vIFRoZXNlIGFyZSBkcmF3biBhcm91bmQgdW5lZGl0YWJsZSB3aWRnZXRzIHRvIGF2b2lkIGEgbnVtYmVyIG9mXG4vLyBicm93c2VyIGJ1Z3MgdGhhdCBzaG93IHVwIHdoZW4gdGhlIGN1cnNvciBpcyBkaXJlY3RseSBuZXh0IHRvXG4vLyB1bmVkaXRhYmxlIGlubGluZSBjb250ZW50LlxuY2xhc3MgV2lkZ2V0QnVmZmVyVGlsZSBleHRlbmRzIFRpbGUge1xuICAgIGNvbnN0cnVjdG9yKGZsYWdzKSB7XG4gICAgICAgIGxldCBpbWcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW1nXCIpO1xuICAgICAgICBpbWcuY2xhc3NOYW1lID0gXCJjbS13aWRnZXRCdWZmZXJcIjtcbiAgICAgICAgaW1nLnNldEF0dHJpYnV0ZShcImFyaWEtaGlkZGVuXCIsIFwidHJ1ZVwiKTtcbiAgICAgICAgc3VwZXIoaW1nLCAwLCBmbGFncyk7XG4gICAgfVxuICAgIGdldCBpc0hpZGRlbigpIHsgcmV0dXJuIGZhbHNlOyB9XG4gICAgZ2V0IG92ZXJyaWRlRE9NVGV4dCgpIHsgcmV0dXJuIFRleHQuZW1wdHk7IH1cbiAgICBjb29yZHNJbihwb3MpIHsgcmV0dXJuIHRoaXMuZG9tLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpOyB9XG59XG4vLyBSZXByZXNlbnRzIGEgcG9zaXRpb24gaW4gdGhlIHRpbGUgdHJlZS5cbmNsYXNzIFRpbGVQb2ludGVyIHtcbiAgICBjb25zdHJ1Y3Rvcih0b3ApIHtcbiAgICAgICAgdGhpcy5pbmRleCA9IDA7XG4gICAgICAgIHRoaXMuYmVmb3JlQnJlYWsgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5wYXJlbnRzID0gW107XG4gICAgICAgIHRoaXMudGlsZSA9IHRvcDtcbiAgICB9XG4gICAgLy8gQWR2YW5jZSBieSB0aGUgZ2l2ZW4gZGlzdGFuY2UuIElmIHNpZGUgaXMgLTEsIHN0b3AgbGVhdmluZyBvclxuICAgIC8vIGVudGVyaW5nIHRpbGVzLCBvciBza2lwcGluZyB6ZXJvLWxlbmd0aCB0aWxlcywgb25jZSB0aGUgZGlzdGFuY2VcbiAgICAvLyBoYXMgYmVlbiB0cmF2ZXJzZWQuIFdoZW4gc2lkZSBpcyAxLCBsZWF2ZSwgZW50ZXIsIG9yIHNraXBcbiAgICAvLyBldmVyeXRoaW5nIGF0IHRoZSBlbmQgcG9zaXRpb24uXG4gICAgYWR2YW5jZShkaXN0LCBzaWRlLCB3YWxrZXIpIHtcbiAgICAgICAgbGV0IHsgdGlsZSwgaW5kZXgsIGJlZm9yZUJyZWFrLCBwYXJlbnRzIH0gPSB0aGlzO1xuICAgICAgICB3aGlsZSAoZGlzdCB8fCBzaWRlID4gMCkge1xuICAgICAgICAgICAgaWYgKCF0aWxlLmlzQ29tcG9zaXRlKCkpIHtcbiAgICAgICAgICAgICAgICBpZiAoaW5kZXggPT0gdGlsZS5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgYmVmb3JlQnJlYWsgPSAhIXRpbGUuYnJlYWtBZnRlcjtcbiAgICAgICAgICAgICAgICAgICAgKHsgdGlsZSwgaW5kZXggfSA9IHBhcmVudHMucG9wKCkpO1xuICAgICAgICAgICAgICAgICAgICBpbmRleCsrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmICghZGlzdCkge1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCB0YWtlID0gTWF0aC5taW4oZGlzdCwgdGlsZS5sZW5ndGggLSBpbmRleCk7XG4gICAgICAgICAgICAgICAgICAgIGlmICh3YWxrZXIpXG4gICAgICAgICAgICAgICAgICAgICAgICB3YWxrZXIuc2tpcCh0aWxlLCBpbmRleCwgaW5kZXggKyB0YWtlKTtcbiAgICAgICAgICAgICAgICAgICAgZGlzdCAtPSB0YWtlO1xuICAgICAgICAgICAgICAgICAgICBpbmRleCArPSB0YWtlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGJlZm9yZUJyZWFrKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFkaXN0KVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBpZiAod2Fsa2VyKVxuICAgICAgICAgICAgICAgICAgICB3YWxrZXIuYnJlYWsoKTtcbiAgICAgICAgICAgICAgICBkaXN0LS07XG4gICAgICAgICAgICAgICAgYmVmb3JlQnJlYWsgPSBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGluZGV4ID09IHRpbGUuY2hpbGRyZW4ubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFkaXN0ICYmICFwYXJlbnRzLmxlbmd0aClcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgaWYgKHdhbGtlcilcbiAgICAgICAgICAgICAgICAgICAgd2Fsa2VyLmxlYXZlKHRpbGUpO1xuICAgICAgICAgICAgICAgIGJlZm9yZUJyZWFrID0gISF0aWxlLmJyZWFrQWZ0ZXI7XG4gICAgICAgICAgICAgICAgKHsgdGlsZSwgaW5kZXggfSA9IHBhcmVudHMucG9wKCkpO1xuICAgICAgICAgICAgICAgIGluZGV4Kys7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBsZXQgbmV4dCA9IHRpbGUuY2hpbGRyZW5baW5kZXhdLCBicmsgPSBuZXh0LmJyZWFrQWZ0ZXI7XG4gICAgICAgICAgICAgICAgaWYgKChzaWRlID4gMCA/IG5leHQubGVuZ3RoIDw9IGRpc3QgOiBuZXh0Lmxlbmd0aCA8IGRpc3QpICYmXG4gICAgICAgICAgICAgICAgICAgICghd2Fsa2VyIHx8IHdhbGtlci5za2lwKG5leHQsIDAsIG5leHQubGVuZ3RoKSAhPT0gZmFsc2UgfHwgIW5leHQuaXNDb21wb3NpdGUpKSB7XG4gICAgICAgICAgICAgICAgICAgIGJlZm9yZUJyZWFrID0gISFicms7XG4gICAgICAgICAgICAgICAgICAgIGluZGV4Kys7XG4gICAgICAgICAgICAgICAgICAgIGRpc3QgLT0gbmV4dC5sZW5ndGg7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBwYXJlbnRzLnB1c2goeyB0aWxlLCBpbmRleCB9KTtcbiAgICAgICAgICAgICAgICAgICAgdGlsZSA9IG5leHQ7XG4gICAgICAgICAgICAgICAgICAgIGluZGV4ID0gMDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHdhbGtlciAmJiBuZXh0LmlzQ29tcG9zaXRlKCkpXG4gICAgICAgICAgICAgICAgICAgICAgICB3YWxrZXIuZW50ZXIobmV4dCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHRoaXMudGlsZSA9IHRpbGU7XG4gICAgICAgIHRoaXMuaW5kZXggPSBpbmRleDtcbiAgICAgICAgdGhpcy5iZWZvcmVCcmVhayA9IGJlZm9yZUJyZWFrO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgZ2V0IHJvb3QoKSB7IHJldHVybiAodGhpcy5wYXJlbnRzLmxlbmd0aCA/IHRoaXMucGFyZW50c1swXS50aWxlIDogdGhpcy50aWxlKTsgfVxufVxuXG4vLyBVc2VkIHRvIHRyYWNrIG9wZW4gYmxvY2sgd3JhcHBlcnNcbmNsYXNzIE9wZW5XcmFwcGVyIHtcbiAgICBjb25zdHJ1Y3Rvcihmcm9tLCB0bywgd3JhcHBlciwgcmFuaykge1xuICAgICAgICB0aGlzLmZyb20gPSBmcm9tO1xuICAgICAgICB0aGlzLnRvID0gdG87XG4gICAgICAgIHRoaXMud3JhcHBlciA9IHdyYXBwZXI7XG4gICAgICAgIHRoaXMucmFuayA9IHJhbms7XG4gICAgfVxufVxuLy8gVGhpcyBjbGFzcyBidWlsZHMgdXAgYSBuZXcgZG9jdW1lbnQgdGlsZSB1c2luZyBpbnB1dCBmcm9tIGVpdGhlclxuLy8gaXRlcmF0aW9uIG92ZXIgdGhlIG9sZCB0cmVlIG9yIGl0ZXJhdGlvbiBvdmVyIHRoZSBkb2N1bWVudCArXG4vLyBkZWNvcmF0aW9ucy4gVGhlIGFkZCogbWV0aG9kcyBlbWl0IGVsZW1lbnRzIGludG8gdGhlIHRpbGVcbi8vIHN0cnVjdHVyZS4gVG8gYXZvaWQgYXdrd2FyZCBzeW5jaHJvbml6YXRpb24gaXNzdWVzLCBtYXJrcyBhbmQgYmxvY2tcbi8vIHdyYXBwZXJzIGFyZSB0cmVhdGVkIGFzIGJlbG9uZ2luZyB0byB0byB0aGVpciBjb250ZW50LCByYXRoZXIgdGhhblxuLy8gb3BlbmVkL2Nsb3NlZCBpbmRlcGVuZGVudGx5LlxuLy9cbi8vIEFsbCBjb21wb3NpdGUgdGlsZXMgdGhhdCBhcmUgdG91Y2hlZCBieSBjaGFuZ2VzIGFyZSByZWJ1aWx0LFxuLy8gcmV1c2luZyBhcyBtdWNoIG9mIHRoZSBvbGQgdHJlZSAoZWl0aGVyIHdob2xlIG5vZGVzIG9yIGp1c3QgRE9NXG4vLyBlbGVtZW50cykgYXMgcG9zc2libGUuIFRoZSBuZXcgdHJlZSBpcyBidWlsdCB3aXRob3V0IHRoZSBTeW5jZWRcbi8vIGZsYWcsIGFuZCB0aGVuIHN5bmNlZCAoZHVyaW5nIHdoaWNoIERPTSBwYXJlbnQvY2hpbGQgcmVsYXRpb25zIGFyZVxuLy8gZml4ZWQgdXAsIHRleHQgbm9kZXMgZmlsbGVkIGluLCBhbmQgYXR0cmlidXRlcyBhZGRlZCkgaW4gYSBzZWNvbmRcbi8vIHBoYXNlLlxuY2xhc3MgVGlsZUJ1aWxkZXIge1xuICAgIGNvbnN0cnVjdG9yKGNhY2hlLCByb290LCBibG9ja1dyYXBwZXJzKSB7XG4gICAgICAgIHRoaXMuY2FjaGUgPSBjYWNoZTtcbiAgICAgICAgdGhpcy5yb290ID0gcm9vdDtcbiAgICAgICAgdGhpcy5ibG9ja1dyYXBwZXJzID0gYmxvY2tXcmFwcGVycztcbiAgICAgICAgdGhpcy5jdXJMaW5lID0gbnVsbDtcbiAgICAgICAgdGhpcy5sYXN0QmxvY2sgPSBudWxsO1xuICAgICAgICB0aGlzLmFmdGVyV2lkZ2V0ID0gbnVsbDtcbiAgICAgICAgdGhpcy5wb3MgPSAwO1xuICAgICAgICB0aGlzLndyYXBwZXJzID0gW107XG4gICAgICAgIHRoaXMud3JhcHBlclBvcyA9IDA7XG4gICAgfVxuICAgIGFkZFRleHQodGV4dCwgbWFya3MsIG9wZW5TdGFydCwgdGlsZSkge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIHRoaXMuZmx1c2hCdWZmZXIoKTtcbiAgICAgICAgbGV0IHBhcmVudCA9IHRoaXMuZW5zdXJlTWFya3MobWFya3MsIG9wZW5TdGFydCk7XG4gICAgICAgIGxldCBwcmV2ID0gcGFyZW50Lmxhc3RDaGlsZDtcbiAgICAgICAgaWYgKHByZXYgJiYgcHJldi5pc1RleHQoKSAmJiAhKHByZXYuZmxhZ3MgJiA4IC8qIFRpbGVGbGFnLkNvbXBvc2l0aW9uICovKSkge1xuICAgICAgICAgICAgdGhpcy5jYWNoZS5yZXVzZWQuc2V0KHByZXYsIDIgLyogUmV1c2VkLkRPTSAqLyk7XG4gICAgICAgICAgICBsZXQgdGlsZSA9IHBhcmVudC5jaGlsZHJlbltwYXJlbnQuY2hpbGRyZW4ubGVuZ3RoIC0gMV0gPSBuZXcgVGV4dFRpbGUocHJldi5kb20sIHByZXYudGV4dCArIHRleHQpO1xuICAgICAgICAgICAgdGlsZS5wYXJlbnQgPSBwYXJlbnQ7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBwYXJlbnQuYXBwZW5kKHRpbGUgfHwgVGV4dFRpbGUub2YodGV4dCwgKF9hID0gdGhpcy5jYWNoZS5maW5kKFRleHRUaWxlKSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmRvbSkpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMucG9zICs9IHRleHQubGVuZ3RoO1xuICAgICAgICB0aGlzLmFmdGVyV2lkZ2V0ID0gbnVsbDtcbiAgICB9XG4gICAgYWRkQ29tcG9zaXRpb24oY29tcG9zaXRpb24sIGNvbnRleHQpIHtcbiAgICAgICAgbGV0IGxpbmUgPSB0aGlzLmN1ckxpbmU7XG4gICAgICAgIGlmIChsaW5lLmRvbSAhPSBjb250ZXh0LmxpbmUuZG9tKSB7XG4gICAgICAgICAgICBsaW5lLnNldERPTSh0aGlzLmNhY2hlLnJldXNlZC5oYXMoY29udGV4dC5saW5lKSA/IGZyZWVOb2RlKGNvbnRleHQubGluZS5kb20pIDogY29udGV4dC5saW5lLmRvbSk7XG4gICAgICAgICAgICB0aGlzLmNhY2hlLnJldXNlZC5zZXQoY29udGV4dC5saW5lLCAyIC8qIFJldXNlZC5ET00gKi8pO1xuICAgICAgICB9XG4gICAgICAgIGxldCBoZWFkID0gbGluZTtcbiAgICAgICAgZm9yIChsZXQgaSA9IGNvbnRleHQubWFya3MubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcbiAgICAgICAgICAgIGxldCBtYXJrID0gY29udGV4dC5tYXJrc1tpXTtcbiAgICAgICAgICAgIGxldCBsYXN0ID0gaGVhZC5sYXN0Q2hpbGQ7XG4gICAgICAgICAgICBpZiAobGFzdCBpbnN0YW5jZW9mIE1hcmtUaWxlICYmIGxhc3QubWFyay5lcShtYXJrLm1hcmspKSB7XG4gICAgICAgICAgICAgICAgaWYgKGxhc3QuZG9tICE9IG1hcmsuZG9tKVxuICAgICAgICAgICAgICAgICAgICBsYXN0LnNldERPTShmcmVlTm9kZShtYXJrLmRvbSkpO1xuICAgICAgICAgICAgICAgIGhlYWQgPSBsYXN0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuY2FjaGUucmV1c2VkLmdldChtYXJrKSkge1xuICAgICAgICAgICAgICAgICAgICBsZXQgdGlsZSA9IFRpbGUuZ2V0KG1hcmsuZG9tKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRpbGUpXG4gICAgICAgICAgICAgICAgICAgICAgICB0aWxlLnNldERPTShmcmVlTm9kZShtYXJrLmRvbSkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBsZXQgbncgPSBNYXJrVGlsZS5vZihtYXJrLm1hcmssIG1hcmsuZG9tKTtcbiAgICAgICAgICAgICAgICBoZWFkLmFwcGVuZChudyk7XG4gICAgICAgICAgICAgICAgaGVhZCA9IG53O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5jYWNoZS5yZXVzZWQuc2V0KG1hcmssIDIgLyogUmV1c2VkLkRPTSAqLyk7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IG9sZFRpbGUgPSBUaWxlLmdldChjb21wb3NpdGlvbi50ZXh0KTtcbiAgICAgICAgaWYgKG9sZFRpbGUpXG4gICAgICAgICAgICB0aGlzLmNhY2hlLnJldXNlZC5zZXQob2xkVGlsZSwgMiAvKiBSZXVzZWQuRE9NICovKTtcbiAgICAgICAgbGV0IHRleHQgPSBuZXcgVGV4dFRpbGUoY29tcG9zaXRpb24udGV4dCwgY29tcG9zaXRpb24udGV4dC5ub2RlVmFsdWUpO1xuICAgICAgICB0ZXh0LmZsYWdzIHw9IDggLyogVGlsZUZsYWcuQ29tcG9zaXRpb24gKi87XG4gICAgICAgIGhlYWQuYXBwZW5kKHRleHQpO1xuICAgIH1cbiAgICBhZGRJbmxpbmVXaWRnZXQod2lkZ2V0LCBtYXJrcywgb3BlblN0YXJ0KSB7XG4gICAgICAgIC8vIEFkamFjZW50IHNhbWUtc2lkZS1mYWNpbmcgbm9uLXJlcGxhY2luZyB3aWRnZXRzIGRvbid0IG5lZWQgYnVmZmVycyBiZXR3ZWVuIHRoZW1cbiAgICAgICAgbGV0IG5vU3BhY2UgPSB0aGlzLmFmdGVyV2lkZ2V0ICYmICh3aWRnZXQuZmxhZ3MgJiA0OCAvKiBUaWxlRmxhZy5Qb2ludFdpZGdldCAqLykgJiZcbiAgICAgICAgICAgICh0aGlzLmFmdGVyV2lkZ2V0LmZsYWdzICYgNDggLyogVGlsZUZsYWcuUG9pbnRXaWRnZXQgKi8pID09ICh3aWRnZXQuZmxhZ3MgJiA0OCAvKiBUaWxlRmxhZy5Qb2ludFdpZGdldCAqLyk7XG4gICAgICAgIGlmICghbm9TcGFjZSlcbiAgICAgICAgICAgIHRoaXMuZmx1c2hCdWZmZXIoKTtcbiAgICAgICAgbGV0IHBhcmVudCA9IHRoaXMuZW5zdXJlTWFya3MobWFya3MsIG9wZW5TdGFydCk7XG4gICAgICAgIGlmICghbm9TcGFjZSAmJiAhKHdpZGdldC5mbGFncyAmIDE2IC8qIFRpbGVGbGFnLkJlZm9yZSAqLykpXG4gICAgICAgICAgICBwYXJlbnQuYXBwZW5kKHRoaXMuZ2V0QnVmZmVyKDEpKTtcbiAgICAgICAgcGFyZW50LmFwcGVuZCh3aWRnZXQpO1xuICAgICAgICB0aGlzLnBvcyArPSB3aWRnZXQubGVuZ3RoO1xuICAgICAgICB0aGlzLmFmdGVyV2lkZ2V0ID0gd2lkZ2V0O1xuICAgIH1cbiAgICBhZGRNYXJrKHRpbGUsIG1hcmtzLCBvcGVuU3RhcnQpIHtcbiAgICAgICAgdGhpcy5mbHVzaEJ1ZmZlcigpO1xuICAgICAgICBsZXQgcGFyZW50ID0gdGhpcy5lbnN1cmVNYXJrcyhtYXJrcywgb3BlblN0YXJ0KTtcbiAgICAgICAgcGFyZW50LmFwcGVuZCh0aWxlKTtcbiAgICAgICAgdGhpcy5wb3MgKz0gdGlsZS5sZW5ndGg7XG4gICAgICAgIHRoaXMuYWZ0ZXJXaWRnZXQgPSBudWxsO1xuICAgIH1cbiAgICBhZGRCbG9ja1dpZGdldCh3aWRnZXQpIHtcbiAgICAgICAgdGhpcy5nZXRCbG9ja1BvcygpLmFwcGVuZCh3aWRnZXQpO1xuICAgICAgICB0aGlzLnBvcyArPSB3aWRnZXQubGVuZ3RoO1xuICAgICAgICB0aGlzLmxhc3RCbG9jayA9IHdpZGdldDtcbiAgICAgICAgdGhpcy5lbmRMaW5lKCk7XG4gICAgfVxuICAgIGNvbnRpbnVlV2lkZ2V0KGxlbmd0aCkge1xuICAgICAgICBsZXQgd2lkZ2V0ID0gdGhpcy5hZnRlcldpZGdldCB8fCB0aGlzLmxhc3RCbG9jaztcbiAgICAgICAgd2lkZ2V0Lmxlbmd0aCArPSBsZW5ndGg7XG4gICAgICAgIHRoaXMucG9zICs9IGxlbmd0aDtcbiAgICB9XG4gICAgYWRkTGluZVN0YXJ0KGF0dHJzLCBkb20pIHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICBpZiAoIWF0dHJzKVxuICAgICAgICAgICAgYXR0cnMgPSBsaW5lQmFzZUF0dHJzO1xuICAgICAgICBsZXQgdGlsZSA9IExpbmVUaWxlLnN0YXJ0KGF0dHJzLCBkb20gfHwgKChfYSA9IHRoaXMuY2FjaGUuZmluZChMaW5lVGlsZSkpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5kb20pLCAhIWRvbSk7XG4gICAgICAgIHRoaXMuZ2V0QmxvY2tQb3MoKS5hcHBlbmQodGhpcy5sYXN0QmxvY2sgPSB0aGlzLmN1ckxpbmUgPSB0aWxlKTtcbiAgICB9XG4gICAgYWRkTGluZSh0aWxlKSB7XG4gICAgICAgIHRoaXMuZ2V0QmxvY2tQb3MoKS5hcHBlbmQodGlsZSk7XG4gICAgICAgIHRoaXMucG9zICs9IHRpbGUubGVuZ3RoO1xuICAgICAgICB0aGlzLmxhc3RCbG9jayA9IHRpbGU7XG4gICAgICAgIHRoaXMuZW5kTGluZSgpO1xuICAgIH1cbiAgICBhZGRCcmVhaygpIHtcbiAgICAgICAgdGhpcy5sYXN0QmxvY2suZmxhZ3MgfD0gMSAvKiBUaWxlRmxhZy5CcmVha0FmdGVyICovO1xuICAgICAgICB0aGlzLmVuZExpbmUoKTtcbiAgICAgICAgdGhpcy5wb3MrKztcbiAgICB9XG4gICAgYWRkTGluZVN0YXJ0SWZOb3RDb3ZlcmVkKGF0dHJzKSB7XG4gICAgICAgIGlmICghdGhpcy5ibG9ja1Bvc0NvdmVyZWQoKSlcbiAgICAgICAgICAgIHRoaXMuYWRkTGluZVN0YXJ0KGF0dHJzKTtcbiAgICB9XG4gICAgZW5zdXJlTGluZShhdHRycykge1xuICAgICAgICBpZiAoIXRoaXMuY3VyTGluZSlcbiAgICAgICAgICAgIHRoaXMuYWRkTGluZVN0YXJ0KGF0dHJzKTtcbiAgICB9XG4gICAgZW5zdXJlTWFya3MobWFya3MsIG9wZW5TdGFydCkge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIGxldCBwYXJlbnQgPSB0aGlzLmN1ckxpbmU7XG4gICAgICAgIGZvciAobGV0IGkgPSBtYXJrcy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuICAgICAgICAgICAgbGV0IG1hcmsgPSBtYXJrc1tpXSwgbGFzdDtcbiAgICAgICAgICAgIGlmIChvcGVuU3RhcnQgPiAwICYmIChsYXN0ID0gcGFyZW50Lmxhc3RDaGlsZCkgJiYgbGFzdCBpbnN0YW5jZW9mIE1hcmtUaWxlICYmIGxhc3QubWFyay5lcShtYXJrKSkge1xuICAgICAgICAgICAgICAgIHBhcmVudCA9IGxhc3Q7XG4gICAgICAgICAgICAgICAgb3BlblN0YXJ0LS07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBsZXQgdGlsZSA9IE1hcmtUaWxlLm9mKG1hcmssIChfYSA9IHRoaXMuY2FjaGUuZmluZChNYXJrVGlsZSwgbSA9PiBtLm1hcmsuZXEobWFyaykpKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuZG9tKTtcbiAgICAgICAgICAgICAgICBwYXJlbnQuYXBwZW5kKHRpbGUpO1xuICAgICAgICAgICAgICAgIHBhcmVudCA9IHRpbGU7XG4gICAgICAgICAgICAgICAgb3BlblN0YXJ0ID0gMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcGFyZW50O1xuICAgIH1cbiAgICBlbmRMaW5lKCkge1xuICAgICAgICBpZiAodGhpcy5jdXJMaW5lKSB7XG4gICAgICAgICAgICB0aGlzLmZsdXNoQnVmZmVyKCk7XG4gICAgICAgICAgICBsZXQgbGFzdCA9IHRoaXMuY3VyTGluZS5sYXN0Q2hpbGQ7XG4gICAgICAgICAgICBpZiAoIWxhc3QgfHwgIWhhc0NvbnRlbnQodGhpcy5jdXJMaW5lLCBmYWxzZSkgfHxcbiAgICAgICAgICAgICAgICBsYXN0LmRvbS5ub2RlTmFtZSAhPSBcIkJSXCIgJiYgbGFzdC5pc1dpZGdldCgpICYmICEoYnJvd3Nlci5pb3MgJiYgaGFzQ29udGVudCh0aGlzLmN1ckxpbmUsIHRydWUpKSlcbiAgICAgICAgICAgICAgICB0aGlzLmN1ckxpbmUuYXBwZW5kKHRoaXMuY2FjaGUuZmluZFdpZGdldChCcmVha1dpZGdldCwgMCwgMzIgLyogVGlsZUZsYWcuQWZ0ZXIgKi8pIHx8XG4gICAgICAgICAgICAgICAgICAgIG5ldyBXaWRnZXRUaWxlKEJyZWFrV2lkZ2V0LnRvRE9NKCksIDAsIEJyZWFrV2lkZ2V0LCAzMiAvKiBUaWxlRmxhZy5BZnRlciAqLykpO1xuICAgICAgICAgICAgdGhpcy5jdXJMaW5lID0gdGhpcy5hZnRlcldpZGdldCA9IG51bGw7XG4gICAgICAgIH1cbiAgICB9XG4gICAgdXBkYXRlQmxvY2tXcmFwcGVycygpIHtcbiAgICAgICAgaWYgKHRoaXMud3JhcHBlclBvcyA+IHRoaXMucG9zICsgMTAwMDAgLyogQy5XcmFwcGVyUmVzZXQgKi8pIHtcbiAgICAgICAgICAgIHRoaXMuYmxvY2tXcmFwcGVycy5nb3RvKHRoaXMucG9zKTtcbiAgICAgICAgICAgIHRoaXMud3JhcHBlcnMubGVuZ3RoID0gMDtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKGxldCBpID0gdGhpcy53cmFwcGVycy5sZW5ndGggLSAxOyBpID49IDA7IGktLSlcbiAgICAgICAgICAgIGlmICh0aGlzLndyYXBwZXJzW2ldLnRvIDwgdGhpcy5wb3MpXG4gICAgICAgICAgICAgICAgdGhpcy53cmFwcGVycy5zcGxpY2UoaSwgMSk7XG4gICAgICAgIGZvciAobGV0IGN1ciA9IHRoaXMuYmxvY2tXcmFwcGVyczsgY3VyLnZhbHVlICYmIGN1ci5mcm9tIDw9IHRoaXMucG9zOyBjdXIubmV4dCgpKVxuICAgICAgICAgICAgaWYgKGN1ci50byA+PSB0aGlzLnBvcykge1xuICAgICAgICAgICAgICAgIGxldCB3cmFwID0gbmV3IE9wZW5XcmFwcGVyKGN1ci5mcm9tLCBjdXIudG8sIGN1ci52YWx1ZSwgY3VyLnJhbmspLCBpID0gdGhpcy53cmFwcGVycy5sZW5ndGg7XG4gICAgICAgICAgICAgICAgd2hpbGUgKGkgPiAwICYmICh0aGlzLndyYXBwZXJzW2kgLSAxXS5yYW5rIC0gd3JhcC5yYW5rIHx8IHRoaXMud3JhcHBlcnNbaSAtIDFdLnRvIC0gd3JhcC50bykgPCAwKVxuICAgICAgICAgICAgICAgICAgICBpLS07XG4gICAgICAgICAgICAgICAgdGhpcy53cmFwcGVycy5zcGxpY2UoaSwgMCwgd3JhcCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIHRoaXMud3JhcHBlclBvcyA9IHRoaXMucG9zO1xuICAgIH1cbiAgICBnZXRCbG9ja1BvcygpIHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICB0aGlzLnVwZGF0ZUJsb2NrV3JhcHBlcnMoKTtcbiAgICAgICAgbGV0IHBhcmVudCA9IHRoaXMucm9vdDtcbiAgICAgICAgZm9yIChsZXQgd3JhcCBvZiB0aGlzLndyYXBwZXJzKSB7XG4gICAgICAgICAgICBsZXQgbGFzdCA9IHBhcmVudC5sYXN0Q2hpbGQ7XG4gICAgICAgICAgICBpZiAod3JhcC5mcm9tIDwgdGhpcy5wb3MgJiYgbGFzdCBpbnN0YW5jZW9mIEJsb2NrV3JhcHBlclRpbGUgJiYgbGFzdC53cmFwcGVyLmVxKHdyYXAud3JhcHBlcikpIHtcbiAgICAgICAgICAgICAgICBwYXJlbnQgPSBsYXN0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgbGV0IHRpbGUgPSBCbG9ja1dyYXBwZXJUaWxlLm9mKHdyYXAud3JhcHBlciwgKF9hID0gdGhpcy5jYWNoZS5maW5kKEJsb2NrV3JhcHBlclRpbGUsIHQgPT4gdC53cmFwcGVyLmVxKHdyYXAud3JhcHBlcikpKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuZG9tKTtcbiAgICAgICAgICAgICAgICBwYXJlbnQuYXBwZW5kKHRpbGUpO1xuICAgICAgICAgICAgICAgIHBhcmVudCA9IHRpbGU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHBhcmVudDtcbiAgICB9XG4gICAgYmxvY2tQb3NDb3ZlcmVkKCkge1xuICAgICAgICBsZXQgbGFzdCA9IHRoaXMubGFzdEJsb2NrO1xuICAgICAgICByZXR1cm4gbGFzdCAhPSBudWxsICYmICFsYXN0LmJyZWFrQWZ0ZXIgJiYgKCFsYXN0LmlzV2lkZ2V0KCkgfHwgKGxhc3QuZmxhZ3MgJiAoMzIgLyogVGlsZUZsYWcuQWZ0ZXIgKi8gfCAxMjggLyogVGlsZUZsYWcuSW5jRW5kICovKSkgPiAwKTtcbiAgICB9XG4gICAgZ2V0QnVmZmVyKHNpZGUpIHtcbiAgICAgICAgbGV0IGZsYWdzID0gMiAvKiBUaWxlRmxhZy5TeW5jZWQgKi8gfCAoc2lkZSA8IDAgPyAxNiAvKiBUaWxlRmxhZy5CZWZvcmUgKi8gOiAzMiAvKiBUaWxlRmxhZy5BZnRlciAqLyk7XG4gICAgICAgIGxldCBmb3VuZCA9IHRoaXMuY2FjaGUuZmluZChXaWRnZXRCdWZmZXJUaWxlLCB1bmRlZmluZWQsIDEgLyogUmV1c2VkLkZ1bGwgKi8pO1xuICAgICAgICBpZiAoZm91bmQpXG4gICAgICAgICAgICBmb3VuZC5mbGFncyA9IGZsYWdzO1xuICAgICAgICByZXR1cm4gZm91bmQgfHwgbmV3IFdpZGdldEJ1ZmZlclRpbGUoZmxhZ3MpO1xuICAgIH1cbiAgICBmbHVzaEJ1ZmZlcigpIHtcbiAgICAgICAgaWYgKHRoaXMuYWZ0ZXJXaWRnZXQgJiYgISh0aGlzLmFmdGVyV2lkZ2V0LmZsYWdzICYgMzIgLyogVGlsZUZsYWcuQWZ0ZXIgKi8pKSB7XG4gICAgICAgICAgICB0aGlzLmFmdGVyV2lkZ2V0LnBhcmVudC5hcHBlbmQodGhpcy5nZXRCdWZmZXIoLTEpKTtcbiAgICAgICAgICAgIHRoaXMuYWZ0ZXJXaWRnZXQgPSBudWxsO1xuICAgICAgICB9XG4gICAgfVxufVxuLy8gSGVscHMgZ2V0dGluZyBlZmZpY2llbnQgYWNjZXNzIHRvIHRoZSBkb2N1bWVudCB0ZXh0LlxuY2xhc3MgVGV4dFN0cmVhbSB7XG4gICAgY29uc3RydWN0b3IoZG9jKSB7XG4gICAgICAgIHRoaXMuc2tpcENvdW50ID0gMDtcbiAgICAgICAgdGhpcy50ZXh0ID0gXCJcIjtcbiAgICAgICAgdGhpcy50ZXh0T2ZmID0gMDtcbiAgICAgICAgdGhpcy5jdXJzb3IgPSBkb2MuaXRlcigpO1xuICAgIH1cbiAgICBza2lwKGxlbikge1xuICAgICAgICAvLyBBZHZhbmNlIHRoZSBpdGVyYXRvciBwYXN0IHRoZSByZXBsYWNlZCBjb250ZW50XG4gICAgICAgIGlmICh0aGlzLnRleHRPZmYgKyBsZW4gPD0gdGhpcy50ZXh0Lmxlbmd0aCkge1xuICAgICAgICAgICAgdGhpcy50ZXh0T2ZmICs9IGxlbjtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuc2tpcENvdW50ICs9IGxlbiAtICh0aGlzLnRleHQubGVuZ3RoIC0gdGhpcy50ZXh0T2ZmKTtcbiAgICAgICAgICAgIHRoaXMudGV4dCA9IFwiXCI7XG4gICAgICAgICAgICB0aGlzLnRleHRPZmYgPSAwO1xuICAgICAgICB9XG4gICAgfVxuICAgIG5leHQobWF4TGVuKSB7XG4gICAgICAgIGlmICh0aGlzLnRleHRPZmYgPT0gdGhpcy50ZXh0Lmxlbmd0aCkge1xuICAgICAgICAgICAgbGV0IHsgdmFsdWUsIGxpbmVCcmVhaywgZG9uZSB9ID0gdGhpcy5jdXJzb3IubmV4dCh0aGlzLnNraXBDb3VudCk7XG4gICAgICAgICAgICB0aGlzLnNraXBDb3VudCA9IDA7XG4gICAgICAgICAgICBpZiAoZG9uZSlcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJSYW4gb3V0IG9mIHRleHQgY29udGVudCB3aGVuIGRyYXdpbmcgaW5saW5lIHZpZXdzXCIpO1xuICAgICAgICAgICAgdGhpcy50ZXh0ID0gdmFsdWU7XG4gICAgICAgICAgICBsZXQgbGVuID0gdGhpcy50ZXh0T2ZmID0gTWF0aC5taW4obWF4TGVuLCB2YWx1ZS5sZW5ndGgpO1xuICAgICAgICAgICAgcmV0dXJuIGxpbmVCcmVhayA/IG51bGwgOiB2YWx1ZS5zbGljZSgwLCBsZW4pO1xuICAgICAgICB9XG4gICAgICAgIGxldCBlbmQgPSBNYXRoLm1pbih0aGlzLnRleHQubGVuZ3RoLCB0aGlzLnRleHRPZmYgKyBtYXhMZW4pO1xuICAgICAgICBsZXQgY2hhcnMgPSB0aGlzLnRleHQuc2xpY2UodGhpcy50ZXh0T2ZmLCBlbmQpO1xuICAgICAgICB0aGlzLnRleHRPZmYgPSBlbmQ7XG4gICAgICAgIHJldHVybiBjaGFycztcbiAgICB9XG59XG4vLyBBc3NpZ24gdGhlIHRpbGUgY2xhc3NlcyBidWNrZXQgbnVtYmVycyBmb3IgY2FjaGluZy5cbmNvbnN0IGJ1Y2tldHMgPSBbV2lkZ2V0VGlsZSwgTGluZVRpbGUsIFRleHRUaWxlLCBNYXJrVGlsZSwgV2lkZ2V0QnVmZmVyVGlsZSwgQmxvY2tXcmFwcGVyVGlsZSwgRG9jVGlsZV07XG5mb3IgKGxldCBpID0gMDsgaSA8IGJ1Y2tldHMubGVuZ3RoOyBpKyspXG4gICAgYnVja2V0c1tpXS5idWNrZXQgPSBpO1xuLy8gTGVhZiB0aWxlcyBhbmQgbGluZSB0aWxlcyBtYXkgYmUgcmV1c2VkIGluIHRoZWlyIGVudGlyZXR5LiBBbGxcbi8vIG90aGVycyB3aWxsIGdldCBuZXcgdGlsZXMgYWxsb2NhdGVkLCB1c2luZyB0aGUgb2xkIERPTSB3aGVuXG4vLyBwb3NzaWJsZS5cbmNsYXNzIFRpbGVDYWNoZSB7XG4gICAgY29uc3RydWN0b3Iodmlldykge1xuICAgICAgICB0aGlzLnZpZXcgPSB2aWV3O1xuICAgICAgICAvLyBCdWNrZXRzIGFyZSBjaXJjdWxhciBidWZmZXJzLCB1c2luZyBgaW5kZXhgIGFzIHRoZSBjdXJyZW50XG4gICAgICAgIC8vIHBvc2l0aW9uLlxuICAgICAgICB0aGlzLmJ1Y2tldHMgPSBidWNrZXRzLm1hcCgoKSA9PiBbXSk7XG4gICAgICAgIHRoaXMuaW5kZXggPSBidWNrZXRzLm1hcCgoKSA9PiAwKTtcbiAgICAgICAgdGhpcy5yZXVzZWQgPSBuZXcgTWFwO1xuICAgIH1cbiAgICAvLyBQdXQgYSB0aWxlIGluIHRoZSBjYWNoZS5cbiAgICBhZGQodGlsZSkge1xuICAgICAgICBsZXQgaSA9IHRpbGUuY29uc3RydWN0b3IuYnVja2V0LCBidWNrZXQgPSB0aGlzLmJ1Y2tldHNbaV07XG4gICAgICAgIGlmIChidWNrZXQubGVuZ3RoIDwgNiAvKiBDLkJ1Y2tldCAqLylcbiAgICAgICAgICAgIGJ1Y2tldC5wdXNoKHRpbGUpO1xuICAgICAgICBlbHNlXG4gICAgICAgICAgICBidWNrZXRbdGhpcy5pbmRleFtpXSA9ICh0aGlzLmluZGV4W2ldICsgMSkgJSA2IC8qIEMuQnVja2V0ICovXSA9IHRpbGU7XG4gICAgfVxuICAgIGZpbmQoY2xzLCB0ZXN0LCB0eXBlID0gMiAvKiBSZXVzZWQuRE9NICovKSB7XG4gICAgICAgIGxldCBpID0gY2xzLmJ1Y2tldDtcbiAgICAgICAgbGV0IGJ1Y2tldCA9IHRoaXMuYnVja2V0c1tpXSwgb2ZmID0gdGhpcy5pbmRleFtpXTtcbiAgICAgICAgZm9yIChsZXQgaiA9IGJ1Y2tldC5sZW5ndGggLSAxOyBqID49IDA7IGotLSkge1xuICAgICAgICAgICAgLy8gTG9vayBhdCB0aGUgbW9zdCByZWNlbnRseSBhZGRlZCBpdGVtcyBmaXJzdCAobGFzdC1pbiwgZmlyc3Qtb3V0KVxuICAgICAgICAgICAgbGV0IGluZGV4ID0gKGogKyBvZmYpICUgYnVja2V0Lmxlbmd0aCwgdGlsZSA9IGJ1Y2tldFtpbmRleF07XG4gICAgICAgICAgICBpZiAoKCF0ZXN0IHx8IHRlc3QodGlsZSkpICYmICF0aGlzLnJldXNlZC5oYXModGlsZSkpIHtcbiAgICAgICAgICAgICAgICBidWNrZXQuc3BsaWNlKGluZGV4LCAxKTtcbiAgICAgICAgICAgICAgICBpZiAoaW5kZXggPCBvZmYpXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaW5kZXhbaV0tLTtcbiAgICAgICAgICAgICAgICB0aGlzLnJldXNlZC5zZXQodGlsZSwgdHlwZSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRpbGU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIGZpbmRXaWRnZXQod2lkZ2V0LCBsZW5ndGgsIGZsYWdzKSB7XG4gICAgICAgIGxldCB3aWRnZXRzID0gdGhpcy5idWNrZXRzWzBdO1xuICAgICAgICBpZiAod2lkZ2V0cy5sZW5ndGgpXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMCwgcGFzcyA9IDA7OyBpKyspIHtcbiAgICAgICAgICAgICAgICBpZiAoaSA9PSB3aWRnZXRzLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAocGFzcylcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgICAgICAgICBwYXNzID0gMTtcbiAgICAgICAgICAgICAgICAgICAgaSA9IDA7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGxldCB0aWxlID0gd2lkZ2V0c1tpXTtcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMucmV1c2VkLmhhcyh0aWxlKSAmJlxuICAgICAgICAgICAgICAgICAgICAocGFzcyA9PSAwID8gdGlsZS53aWRnZXQuY29tcGFyZSh3aWRnZXQpXG4gICAgICAgICAgICAgICAgICAgICAgICA6IHRpbGUud2lkZ2V0LmNvbnN0cnVjdG9yID09IHdpZGdldC5jb25zdHJ1Y3RvciAmJiB3aWRnZXQudXBkYXRlRE9NKHRpbGUuZG9tLCB0aGlzLnZpZXcpKSkge1xuICAgICAgICAgICAgICAgICAgICB3aWRnZXRzLnNwbGljZShpLCAxKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGkgPCB0aGlzLmluZGV4WzBdKVxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5pbmRleFswXS0tO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnJldXNlZC5zZXQodGlsZSwgMSAvKiBSZXVzZWQuRnVsbCAqLyk7XG4gICAgICAgICAgICAgICAgICAgIHRpbGUubGVuZ3RoID0gbGVuZ3RoO1xuICAgICAgICAgICAgICAgICAgICB0aWxlLmZsYWdzID0gKHRpbGUuZmxhZ3MgJiB+KDQ5NiAvKiBUaWxlRmxhZy5XaWRnZXQgKi8gfCAxIC8qIFRpbGVGbGFnLkJyZWFrQWZ0ZXIgKi8pKSB8IGZsYWdzO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGlsZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgfVxuICAgIHJldXNlKHRpbGUpIHtcbiAgICAgICAgdGhpcy5yZXVzZWQuc2V0KHRpbGUsIDEgLyogUmV1c2VkLkZ1bGwgKi8pO1xuICAgICAgICByZXR1cm4gdGlsZTtcbiAgICB9XG4gICAgbWF5YmVSZXVzZSh0aWxlLCB0eXBlID0gMiAvKiBSZXVzZWQuRE9NICovKSB7XG4gICAgICAgIGlmICh0aGlzLnJldXNlZC5oYXModGlsZSkpXG4gICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLnJldXNlZC5zZXQodGlsZSwgdHlwZSk7XG4gICAgICAgIHJldHVybiB0aWxlLmRvbTtcbiAgICB9XG59XG4vLyBUaGlzIGNsYXNzIG9yZ2FuaXplcyBhIHBhc3Mgb3ZlciB0aGUgZG9jdW1lbnQsIGd1aWRlZCBieSB0aGUgYXJyYXlcbi8vIG9mIHJlcGxhY2VkIHJhbmdlcy4gRm9yIHJhbmdlcyB0aGF0IGhhdmVuJ3QgY2hhbmdlZCwgaXQgaXRlcmF0ZXNcbi8vIHRoZSBvbGQgdHJlZSBhbmQgY29waWVzIGl0cyBjb250ZW50IGludG8gdGhlIG5ldyBkb2N1bWVudC4gRm9yXG4vLyBjaGFuZ2VkIHJhbmdlcywgaXQgcnVucyBhIGRlY29yYXRpb24gaXRlcmF0b3IgdG8gZ3VpZGUgZ2VuZXJhdGlvblxuLy8gb2YgY29udGVudC5cbmNsYXNzIFRpbGVVcGRhdGUge1xuICAgIGNvbnN0cnVjdG9yKHZpZXcsIG9sZCwgYmxvY2tXcmFwcGVycywgZGVjb3JhdGlvbnMsIGRpc2FsbG93QmxvY2tFZmZlY3RzRm9yKSB7XG4gICAgICAgIHRoaXMudmlldyA9IHZpZXc7XG4gICAgICAgIHRoaXMuZGVjb3JhdGlvbnMgPSBkZWNvcmF0aW9ucztcbiAgICAgICAgdGhpcy5kaXNhbGxvd0Jsb2NrRWZmZWN0c0ZvciA9IGRpc2FsbG93QmxvY2tFZmZlY3RzRm9yO1xuICAgICAgICB0aGlzLm9wZW5XaWRnZXQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5vcGVuTWFya3MgPSAwO1xuICAgICAgICB0aGlzLmNhY2hlID0gbmV3IFRpbGVDYWNoZSh2aWV3KTtcbiAgICAgICAgdGhpcy50ZXh0ID0gbmV3IFRleHRTdHJlYW0odmlldy5zdGF0ZS5kb2MpO1xuICAgICAgICB0aGlzLmJ1aWxkZXIgPSBuZXcgVGlsZUJ1aWxkZXIodGhpcy5jYWNoZSwgbmV3IERvY1RpbGUodmlldywgdmlldy5jb250ZW50RE9NKSwgUmFuZ2VTZXQuaXRlcihibG9ja1dyYXBwZXJzKSk7XG4gICAgICAgIHRoaXMuY2FjaGUucmV1c2VkLnNldChvbGQsIDIgLyogUmV1c2VkLkRPTSAqLyk7XG4gICAgICAgIHRoaXMub2xkID0gbmV3IFRpbGVQb2ludGVyKG9sZCk7XG4gICAgICAgIHRoaXMucmV1c2VXYWxrZXIgPSB7XG4gICAgICAgICAgICBza2lwOiAodGlsZSwgZnJvbSwgdG8pID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLmNhY2hlLmFkZCh0aWxlKTtcbiAgICAgICAgICAgICAgICBpZiAodGlsZS5pc0NvbXBvc2l0ZSgpKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZW50ZXI6IHRpbGUgPT4gdGhpcy5jYWNoZS5hZGQodGlsZSksXG4gICAgICAgICAgICBsZWF2ZTogKCkgPT4geyB9LFxuICAgICAgICAgICAgYnJlYWs6ICgpID0+IHsgfVxuICAgICAgICB9O1xuICAgIH1cbiAgICBydW4oY2hhbmdlcywgY29tcG9zaXRpb24pIHtcbiAgICAgICAgbGV0IGNvbXBvc2l0aW9uQ29udGV4dCA9IGNvbXBvc2l0aW9uICYmIHRoaXMuZ2V0Q29tcG9zaXRpb25Db250ZXh0KGNvbXBvc2l0aW9uLnRleHQpO1xuICAgICAgICBmb3IgKGxldCBwb3NBID0gMCwgcG9zQiA9IDAsIGkgPSAwOzspIHtcbiAgICAgICAgICAgIGxldCBuZXh0ID0gaSA8IGNoYW5nZXMubGVuZ3RoID8gY2hhbmdlc1tpKytdIDogbnVsbDtcbiAgICAgICAgICAgIGxldCBza2lwQSA9IG5leHQgPyBuZXh0LmZyb21BIDogdGhpcy5vbGQucm9vdC5sZW5ndGg7XG4gICAgICAgICAgICBpZiAoc2tpcEEgPiBwb3NBKSB7XG4gICAgICAgICAgICAgICAgbGV0IGxlbiA9IHNraXBBIC0gcG9zQTtcbiAgICAgICAgICAgICAgICB0aGlzLnByZXNlcnZlKGxlbiwgIWksICFuZXh0KTtcbiAgICAgICAgICAgICAgICBwb3NBID0gc2tpcEE7XG4gICAgICAgICAgICAgICAgcG9zQiArPSBsZW47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIW5leHQpXG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB0aGlzLmZvcndhcmQobmV4dC5mcm9tQSwgbmV4dC50b0EpO1xuICAgICAgICAgICAgLy8gQ29tcG9zaXRpb25zIG5lZWQgdG8gYmUgaGFuZGxlZCBzcGVjaWFsbHksIGZvcmNpbmcgdGhlXG4gICAgICAgICAgICAvLyBmb2N1c2VkIHRleHQgbm9kZSBhbmQgaXRzIHBhcmVudCBub2RlcyB0byByZW1haW4gc3RhYmxlIGF0XG4gICAgICAgICAgICAvLyB0aGF0IHBvaW50IGluIHRoZSBkb2N1bWVudC5cbiAgICAgICAgICAgIGlmIChjb21wb3NpdGlvbiAmJiBuZXh0LmZyb21BIDw9IGNvbXBvc2l0aW9uLnJhbmdlLmZyb21BICYmIG5leHQudG9BID49IGNvbXBvc2l0aW9uLnJhbmdlLnRvQSkge1xuICAgICAgICAgICAgICAgIHRoaXMuZW1pdChwb3NCLCBjb21wb3NpdGlvbi5yYW5nZS5mcm9tQik7XG4gICAgICAgICAgICAgICAgdGhpcy5idWlsZGVyLmFkZENvbXBvc2l0aW9uKGNvbXBvc2l0aW9uLCBjb21wb3NpdGlvbkNvbnRleHQpO1xuICAgICAgICAgICAgICAgIHRoaXMudGV4dC5za2lwKGNvbXBvc2l0aW9uLnJhbmdlLnRvQiAtIGNvbXBvc2l0aW9uLnJhbmdlLmZyb21CKTtcbiAgICAgICAgICAgICAgICB0aGlzLmVtaXQoY29tcG9zaXRpb24ucmFuZ2UudG9CLCBuZXh0LnRvQik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLmVtaXQocG9zQiwgbmV4dC50b0IpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcG9zQiA9IG5leHQudG9CO1xuICAgICAgICAgICAgcG9zQSA9IG5leHQudG9BO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmJ1aWxkZXIuY3VyTGluZSlcbiAgICAgICAgICAgIHRoaXMuYnVpbGRlci5lbmRMaW5lKCk7XG4gICAgICAgIHJldHVybiB0aGlzLmJ1aWxkZXIucm9vdDtcbiAgICB9XG4gICAgcHJlc2VydmUobGVuZ3RoLCBpbmNTdGFydCwgaW5jRW5kKSB7XG4gICAgICAgIGxldCBhY3RpdmVNYXJrcyA9IGdldE1hcmtzKHRoaXMub2xkKSwgb3Blbk1hcmtzID0gdGhpcy5vcGVuTWFya3M7XG4gICAgICAgIHRoaXMub2xkLmFkdmFuY2UobGVuZ3RoLCBpbmNFbmQgPyAxIDogLTEsIHtcbiAgICAgICAgICAgIHNraXA6ICh0aWxlLCBmcm9tLCB0bykgPT4ge1xuICAgICAgICAgICAgICAgIGlmICh0aWxlLmlzV2lkZ2V0KCkpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMub3BlbldpZGdldCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5idWlsZGVyLmNvbnRpbnVlV2lkZ2V0KHRvIC0gZnJvbSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgd2lkZ2V0ID0gdG8gPiAwIHx8IGZyb20gPCB0aWxlLmxlbmd0aFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gV2lkZ2V0VGlsZS5vZih0aWxlLndpZGdldCwgdGhpcy52aWV3LCB0byAtIGZyb20sIHRpbGUuZmxhZ3MgJiA0OTYgLyogVGlsZUZsYWcuV2lkZ2V0ICovLCB0aGlzLmNhY2hlLm1heWJlUmV1c2UodGlsZSkpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgOiB0aGlzLmNhY2hlLnJldXNlKHRpbGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHdpZGdldC5mbGFncyAmIDI1NiAvKiBUaWxlRmxhZy5CbG9jayAqLykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpZGdldC5mbGFncyAmPSB+MSAvKiBUaWxlRmxhZy5CcmVha0FmdGVyICovO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYnVpbGRlci5hZGRCbG9ja1dpZGdldCh3aWRnZXQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5idWlsZGVyLmVuc3VyZUxpbmUobnVsbCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5idWlsZGVyLmFkZElubGluZVdpZGdldCh3aWRnZXQsIGFjdGl2ZU1hcmtzLCBvcGVuTWFya3MpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wZW5NYXJrcyA9IGFjdGl2ZU1hcmtzLmxlbmd0aDtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmICh0aWxlLmlzVGV4dCgpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYnVpbGRlci5lbnN1cmVMaW5lKG51bGwpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWZyb20gJiYgdG8gPT0gdGlsZS5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYnVpbGRlci5hZGRUZXh0KHRpbGUudGV4dCwgYWN0aXZlTWFya3MsIG9wZW5NYXJrcywgdGhpcy5jYWNoZS5yZXVzZSh0aWxlKSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNhY2hlLmFkZCh0aWxlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYnVpbGRlci5hZGRUZXh0KHRpbGUudGV4dC5zbGljZShmcm9tLCB0byksIGFjdGl2ZU1hcmtzLCBvcGVuTWFya3MpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIG9wZW5NYXJrcyA9IGFjdGl2ZU1hcmtzLmxlbmd0aDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAodGlsZS5pc0xpbmUoKSkge1xuICAgICAgICAgICAgICAgICAgICB0aWxlLmZsYWdzICY9IH4xIC8qIFRpbGVGbGFnLkJyZWFrQWZ0ZXIgKi87XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2FjaGUucmV1c2VkLnNldCh0aWxlLCAxIC8qIFJldXNlZC5GdWxsICovKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5idWlsZGVyLmFkZExpbmUodGlsZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKHRpbGUgaW5zdGFuY2VvZiBXaWRnZXRCdWZmZXJUaWxlKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2FjaGUuYWRkKHRpbGUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmICh0aWxlIGluc3RhbmNlb2YgTWFya1RpbGUpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5idWlsZGVyLmVuc3VyZUxpbmUobnVsbCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYnVpbGRlci5hZGRNYXJrKHRpbGUsIGFjdGl2ZU1hcmtzLCBvcGVuTWFya3MpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNhY2hlLnJldXNlZC5zZXQodGlsZSwgMSAvKiBSZXVzZWQuRnVsbCAqLyk7XG4gICAgICAgICAgICAgICAgICAgIG9wZW5NYXJrcyA9IGFjdGl2ZU1hcmtzLmxlbmd0aDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5vcGVuV2lkZ2V0ID0gZmFsc2U7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZW50ZXI6ICh0aWxlKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKHRpbGUuaXNMaW5lKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5idWlsZGVyLmFkZExpbmVTdGFydCh0aWxlLmF0dHJzLCB0aGlzLmNhY2hlLm1heWJlUmV1c2UodGlsZSkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jYWNoZS5hZGQodGlsZSk7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aWxlIGluc3RhbmNlb2YgTWFya1RpbGUpXG4gICAgICAgICAgICAgICAgICAgICAgICBhY3RpdmVNYXJrcy51bnNoaWZ0KHRpbGUubWFyayk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMub3BlbldpZGdldCA9IGZhbHNlO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGxlYXZlOiAodGlsZSkgPT4ge1xuICAgICAgICAgICAgICAgIGlmICh0aWxlLmlzTGluZSgpKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChhY3RpdmVNYXJrcy5sZW5ndGgpXG4gICAgICAgICAgICAgICAgICAgICAgICBhY3RpdmVNYXJrcy5sZW5ndGggPSBvcGVuTWFya3MgPSAwO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmICh0aWxlIGluc3RhbmNlb2YgTWFya1RpbGUpIHtcbiAgICAgICAgICAgICAgICAgICAgYWN0aXZlTWFya3Muc2hpZnQoKTtcbiAgICAgICAgICAgICAgICAgICAgb3Blbk1hcmtzID0gTWF0aC5taW4ob3Blbk1hcmtzLCBhY3RpdmVNYXJrcy5sZW5ndGgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBicmVhazogKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuYnVpbGRlci5hZGRCcmVhaygpO1xuICAgICAgICAgICAgICAgIHRoaXMub3BlbldpZGdldCA9IGZhbHNlO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMudGV4dC5za2lwKGxlbmd0aCk7XG4gICAgfVxuICAgIGVtaXQoZnJvbSwgdG8pIHtcbiAgICAgICAgbGV0IHBlbmRpbmdMaW5lQXR0cnMgPSBudWxsO1xuICAgICAgICBsZXQgYiA9IHRoaXMuYnVpbGRlciwgbWFya0NvdW50ID0gMDtcbiAgICAgICAgbGV0IG9wZW5FbmQgPSBSYW5nZVNldC5zcGFucyh0aGlzLmRlY29yYXRpb25zLCBmcm9tLCB0bywge1xuICAgICAgICAgICAgcG9pbnQ6IChmcm9tLCB0bywgZGVjbywgYWN0aXZlLCBvcGVuU3RhcnQsIGluZGV4KSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKGRlY28gaW5zdGFuY2VvZiBQb2ludERlY29yYXRpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuZGlzYWxsb3dCbG9ja0VmZmVjdHNGb3JbaW5kZXhdKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZGVjby5ibG9jaylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcihcIkJsb2NrIGRlY29yYXRpb25zIG1heSBub3QgYmUgc3BlY2lmaWVkIHZpYSBwbHVnaW5zXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRvID4gdGhpcy52aWV3LnN0YXRlLmRvYy5saW5lQXQoZnJvbSkudG8pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoXCJEZWNvcmF0aW9ucyB0aGF0IHJlcGxhY2UgbGluZSBicmVha3MgbWF5IG5vdCBiZSBzcGVjaWZpZWQgdmlhIHBsdWdpbnNcIik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgbWFya0NvdW50ID0gYWN0aXZlLmxlbmd0aDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wZW5TdGFydCA+IGFjdGl2ZS5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGIuY29udGludWVXaWRnZXQodG8gLSBmcm9tKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCB3aWRnZXQgPSBkZWNvLndpZGdldCB8fCAoZGVjby5ibG9jayA/IE51bGxXaWRnZXQuYmxvY2sgOiBOdWxsV2lkZ2V0LmlubGluZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgZmxhZ3MgPSB3aWRnZXRGbGFncyhkZWNvKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCB0aWxlID0gdGhpcy5jYWNoZS5maW5kV2lkZ2V0KHdpZGdldCwgdG8gLSBmcm9tLCBmbGFncykgfHwgV2lkZ2V0VGlsZS5vZih3aWRnZXQsIHRoaXMudmlldywgdG8gLSBmcm9tLCBmbGFncyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZGVjby5ibG9jaykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkZWNvLnN0YXJ0U2lkZSA+IDApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGIuYWRkTGluZVN0YXJ0SWZOb3RDb3ZlcmVkKHBlbmRpbmdMaW5lQXR0cnMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGIuYWRkQmxvY2tXaWRnZXQodGlsZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBiLmVuc3VyZUxpbmUocGVuZGluZ0xpbmVBdHRycyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYi5hZGRJbmxpbmVXaWRnZXQodGlsZSwgYWN0aXZlLCBvcGVuU3RhcnQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHBlbmRpbmdMaW5lQXR0cnMgPSBudWxsO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcGVuZGluZ0xpbmVBdHRycyA9IGFkZExpbmVEZWNvKHBlbmRpbmdMaW5lQXR0cnMsIGRlY28pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAodG8gPiBmcm9tKVxuICAgICAgICAgICAgICAgICAgICB0aGlzLnRleHQuc2tpcCh0byAtIGZyb20pO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHNwYW46IChmcm9tLCB0bywgYWN0aXZlLCBvcGVuU3RhcnQpID0+IHtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBwb3MgPSBmcm9tOyBwb3MgPCB0bzspIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGNoYXJzID0gdGhpcy50ZXh0Lm5leHQoTWF0aC5taW4oNTEyIC8qIEMuQ2h1bmsgKi8sIHRvIC0gcG9zKSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjaGFycyA9PSBudWxsKSB7IC8vIExpbmUgYnJlYWtcbiAgICAgICAgICAgICAgICAgICAgICAgIGIuYWRkTGluZVN0YXJ0SWZOb3RDb3ZlcmVkKHBlbmRpbmdMaW5lQXR0cnMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYi5hZGRCcmVhaygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcG9zKys7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBiLmVuc3VyZUxpbmUocGVuZGluZ0xpbmVBdHRycyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBiLmFkZFRleHQoY2hhcnMsIGFjdGl2ZSwgb3BlblN0YXJ0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBvcyArPSBjaGFycy5sZW5ndGg7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcGVuZGluZ0xpbmVBdHRycyA9IG51bGw7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgYi5hZGRMaW5lU3RhcnRJZk5vdENvdmVyZWQocGVuZGluZ0xpbmVBdHRycyk7XG4gICAgICAgIHRoaXMub3BlbldpZGdldCA9IG9wZW5FbmQgPiBtYXJrQ291bnQ7XG4gICAgICAgIHRoaXMub3Blbk1hcmtzID0gb3BlbkVuZDtcbiAgICB9XG4gICAgZm9yd2FyZChmcm9tLCB0bykge1xuICAgICAgICBpZiAodG8gLSBmcm9tIDw9IDEwKSB7XG4gICAgICAgICAgICB0aGlzLm9sZC5hZHZhbmNlKHRvIC0gZnJvbSwgMSwgdGhpcy5yZXVzZVdhbGtlcik7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLm9sZC5hZHZhbmNlKDUsIC0xLCB0aGlzLnJldXNlV2Fsa2VyKTtcbiAgICAgICAgICAgIHRoaXMub2xkLmFkdmFuY2UodG8gLSBmcm9tIC0gMTAsIC0xKTtcbiAgICAgICAgICAgIHRoaXMub2xkLmFkdmFuY2UoNSwgMSwgdGhpcy5yZXVzZVdhbGtlcik7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZ2V0Q29tcG9zaXRpb25Db250ZXh0KHRleHQpIHtcbiAgICAgICAgbGV0IG1hcmtzID0gW10sIGxpbmUgPSBudWxsO1xuICAgICAgICBmb3IgKGxldCBwYXJlbnQgPSB0ZXh0LnBhcmVudE5vZGU7OyBwYXJlbnQgPSBwYXJlbnQucGFyZW50Tm9kZSkge1xuICAgICAgICAgICAgbGV0IHRpbGUgPSBUaWxlLmdldChwYXJlbnQpO1xuICAgICAgICAgICAgaWYgKHBhcmVudCA9PSB0aGlzLnZpZXcuY29udGVudERPTSlcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGlmICh0aWxlIGluc3RhbmNlb2YgTWFya1RpbGUpXG4gICAgICAgICAgICAgICAgbWFya3MucHVzaCh0aWxlKTtcbiAgICAgICAgICAgIGVsc2UgaWYgKHRpbGUgPT09IG51bGwgfHwgdGlsZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogdGlsZS5pc0xpbmUoKSlcbiAgICAgICAgICAgICAgICBsaW5lID0gdGlsZTtcbiAgICAgICAgICAgIGVsc2UgaWYgKHBhcmVudC5ub2RlTmFtZSA9PSBcIkRJVlwiICYmICFsaW5lICYmIHBhcmVudCAhPSB0aGlzLnZpZXcuY29udGVudERPTSlcbiAgICAgICAgICAgICAgICBsaW5lID0gbmV3IExpbmVUaWxlKHBhcmVudCwgbGluZUJhc2VBdHRycyk7XG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgbWFya3MucHVzaChNYXJrVGlsZS5vZihuZXcgTWFya0RlY29yYXRpb24oeyB0YWdOYW1lOiBwYXJlbnQubm9kZU5hbWUudG9Mb3dlckNhc2UoKSwgYXR0cmlidXRlczogZ2V0QXR0cnMocGFyZW50KSB9KSwgcGFyZW50KSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHsgbGluZTogbGluZSwgbWFya3MgfTtcbiAgICB9XG59XG5mdW5jdGlvbiBoYXNDb250ZW50KHRpbGUsIHJlcXVpcmVUZXh0KSB7XG4gICAgbGV0IHNjYW4gPSAodGlsZSkgPT4ge1xuICAgICAgICBmb3IgKGxldCBjaCBvZiB0aWxlLmNoaWxkcmVuKVxuICAgICAgICAgICAgaWYgKChyZXF1aXJlVGV4dCA/IGNoLmlzVGV4dCgpIDogY2gubGVuZ3RoKSB8fCBzY2FuKGNoKSlcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH07XG4gICAgcmV0dXJuIHNjYW4odGlsZSk7XG59XG5mdW5jdGlvbiB3aWRnZXRGbGFncyhkZWNvKSB7XG4gICAgbGV0IGZsYWdzID0gZGVjby5pc1JlcGxhY2UgPyAoZGVjby5zdGFydFNpZGUgPCAwID8gNjQgLyogVGlsZUZsYWcuSW5jU3RhcnQgKi8gOiAwKSB8IChkZWNvLmVuZFNpZGUgPiAwID8gMTI4IC8qIFRpbGVGbGFnLkluY0VuZCAqLyA6IDApXG4gICAgICAgIDogKGRlY28uc3RhcnRTaWRlID4gMCA/IDMyIC8qIFRpbGVGbGFnLkFmdGVyICovIDogMTYgLyogVGlsZUZsYWcuQmVmb3JlICovKTtcbiAgICBpZiAoZGVjby5ibG9jaylcbiAgICAgICAgZmxhZ3MgfD0gMjU2IC8qIFRpbGVGbGFnLkJsb2NrICovO1xuICAgIHJldHVybiBmbGFncztcbn1cbmNvbnN0IGxpbmVCYXNlQXR0cnMgPSB7IGNsYXNzOiBcImNtLWxpbmVcIiB9O1xuZnVuY3Rpb24gYWRkTGluZURlY28odmFsdWUsIGRlY28pIHtcbiAgICBsZXQgYXR0cnMgPSBkZWNvLnNwZWMuYXR0cmlidXRlcywgY2xzID0gZGVjby5zcGVjLmNsYXNzO1xuICAgIGlmICghYXR0cnMgJiYgIWNscylcbiAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIGlmICghdmFsdWUpXG4gICAgICAgIHZhbHVlID0geyBjbGFzczogXCJjbS1saW5lXCIgfTtcbiAgICBpZiAoYXR0cnMpXG4gICAgICAgIGNvbWJpbmVBdHRycyhhdHRycywgdmFsdWUpO1xuICAgIGlmIChjbHMpXG4gICAgICAgIHZhbHVlLmNsYXNzICs9IFwiIFwiICsgY2xzO1xuICAgIHJldHVybiB2YWx1ZTtcbn1cbmZ1bmN0aW9uIGdldE1hcmtzKHB0cikge1xuICAgIGxldCBmb3VuZCA9IFtdO1xuICAgIGZvciAobGV0IGkgPSBwdHIucGFyZW50cy5sZW5ndGg7IGkgPiAxOyBpLS0pIHtcbiAgICAgICAgbGV0IHRpbGUgPSBpID09IHB0ci5wYXJlbnRzLmxlbmd0aCA/IHB0ci50aWxlIDogcHRyLnBhcmVudHNbaV0udGlsZTtcbiAgICAgICAgaWYgKHRpbGUgaW5zdGFuY2VvZiBNYXJrVGlsZSlcbiAgICAgICAgICAgIGZvdW5kLnB1c2godGlsZS5tYXJrKTtcbiAgICB9XG4gICAgcmV0dXJuIGZvdW5kO1xufVxuZnVuY3Rpb24gZnJlZU5vZGUobm9kZSkge1xuICAgIGxldCB0aWxlID0gVGlsZS5nZXQobm9kZSk7XG4gICAgaWYgKHRpbGUpXG4gICAgICAgIHRpbGUuc2V0RE9NKG5vZGUuY2xvbmVOb2RlKCkpO1xuICAgIHJldHVybiBub2RlO1xufVxuY2xhc3MgTnVsbFdpZGdldCBleHRlbmRzIFdpZGdldFR5cGUge1xuICAgIGNvbnN0cnVjdG9yKHRhZykge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLnRhZyA9IHRhZztcbiAgICB9XG4gICAgZXEob3RoZXIpIHsgcmV0dXJuIG90aGVyLnRhZyA9PSB0aGlzLnRhZzsgfVxuICAgIHRvRE9NKCkgeyByZXR1cm4gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCh0aGlzLnRhZyk7IH1cbiAgICB1cGRhdGVET00oZWx0KSB7IHJldHVybiBlbHQubm9kZU5hbWUudG9Mb3dlckNhc2UoKSA9PSB0aGlzLnRhZzsgfVxuICAgIGdldCBpc0hpZGRlbigpIHsgcmV0dXJuIHRydWU7IH1cbn1cbk51bGxXaWRnZXQuaW5saW5lID0gLypAX19QVVJFX18qL25ldyBOdWxsV2lkZ2V0KFwic3BhblwiKTtcbk51bGxXaWRnZXQuYmxvY2sgPSAvKkBfX1BVUkVfXyovbmV3IE51bGxXaWRnZXQoXCJkaXZcIik7XG5jb25zdCBCcmVha1dpZGdldCA9IC8qQF9fUFVSRV9fKi9uZXcgY2xhc3MgZXh0ZW5kcyBXaWRnZXRUeXBlIHtcbiAgICB0b0RPTSgpIHsgcmV0dXJuIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJiclwiKTsgfVxuICAgIGdldCBpc0hpZGRlbigpIHsgcmV0dXJuIHRydWU7IH1cbiAgICBnZXQgZWRpdGFibGUoKSB7IHJldHVybiB0cnVlOyB9XG59O1xuXG5jbGFzcyBEb2NWaWV3IHtcbiAgICBjb25zdHJ1Y3Rvcih2aWV3KSB7XG4gICAgICAgIHRoaXMudmlldyA9IHZpZXc7XG4gICAgICAgIHRoaXMuZGVjb3JhdGlvbnMgPSBbXTtcbiAgICAgICAgdGhpcy5ibG9ja1dyYXBwZXJzID0gW107XG4gICAgICAgIHRoaXMuZHluYW1pY0RlY29yYXRpb25NYXAgPSBbZmFsc2VdO1xuICAgICAgICB0aGlzLmRvbUNoYW5nZWQgPSBudWxsO1xuICAgICAgICB0aGlzLmhhc0NvbXBvc2l0aW9uID0gbnVsbDtcbiAgICAgICAgdGhpcy5lZGl0Q29udGV4dEZvcm1hdHRpbmcgPSBEZWNvcmF0aW9uLm5vbmU7XG4gICAgICAgIHRoaXMubGFzdENvbXBvc2l0aW9uQWZ0ZXJDdXJzb3IgPSBmYWxzZTtcbiAgICAgICAgLy8gVHJhY2sgYSBtaW5pbXVtIHdpZHRoIGZvciB0aGUgZWRpdG9yLiBXaGVuIG1lYXN1cmluZyBzaXplcyBpblxuICAgICAgICAvLyBtZWFzdXJlVmlzaWJsZUxpbmVIZWlnaHRzLCB0aGlzIGlzIHVwZGF0ZWQgdG8gcG9pbnQgYXQgdGhlIHdpZHRoXG4gICAgICAgIC8vIG9mIGEgZ2l2ZW4gZWxlbWVudCBhbmQgaXRzIGV4dGVudCBpbiB0aGUgZG9jdW1lbnQuIFdoZW4gYSBjaGFuZ2VcbiAgICAgICAgLy8gaGFwcGVucyBpbiB0aGF0IHJhbmdlLCB0aGVzZSBhcmUgcmVzZXQuIFRoYXQgd2F5LCBvbmNlIHdlJ3ZlIHNlZW5cbiAgICAgICAgLy8gYSBsaW5lL2VsZW1lbnQgb2YgYSBnaXZlbiBsZW5ndGgsIHdlIGtlZXAgdGhlIGVkaXRvciB3aWRlIGVub3VnaFxuICAgICAgICAvLyB0byBmaXQgYXQgbGVhc3QgdGhhdCBlbGVtZW50LCB1bnRpbCBpdCBpcyBjaGFuZ2VkLCBhdCB3aGljaCBwb2ludFxuICAgICAgICAvLyB3ZSBmb3JnZXQgaXQgYWdhaW4uXG4gICAgICAgIHRoaXMubWluV2lkdGggPSAwO1xuICAgICAgICB0aGlzLm1pbldpZHRoRnJvbSA9IDA7XG4gICAgICAgIHRoaXMubWluV2lkdGhUbyA9IDA7XG4gICAgICAgIC8vIFRyYWNrIHdoZXRoZXIgdGhlIERPTSBzZWxlY3Rpb24gd2FzIHNldCBpbiBhIGxvc3N5IHdheSwgc28gdGhhdFxuICAgICAgICAvLyB3ZSBkb24ndCBtZXNzIGl0IHVwIHdoZW4gcmVhZGluZyBpdCBiYWNrIGl0XG4gICAgICAgIHRoaXMuaW1wcmVjaXNlQW5jaG9yID0gbnVsbDtcbiAgICAgICAgdGhpcy5pbXByZWNpc2VIZWFkID0gbnVsbDtcbiAgICAgICAgdGhpcy5mb3JjZVNlbGVjdGlvbiA9IGZhbHNlO1xuICAgICAgICAvLyBVc2VkIGJ5IHRoZSByZXNpemUgb2JzZXJ2ZXIgdG8gaWdub3JlIHJlc2l6ZXMgdGhhdCB3ZSBjYXVzZWRcbiAgICAgICAgLy8gb3Vyc2VsdmVzXG4gICAgICAgIHRoaXMubGFzdFVwZGF0ZSA9IERhdGUubm93KCk7XG4gICAgICAgIHRoaXMudXBkYXRlRGVjbygpO1xuICAgICAgICB0aGlzLnRpbGUgPSBuZXcgRG9jVGlsZSh2aWV3LCB2aWV3LmNvbnRlbnRET00pO1xuICAgICAgICB0aGlzLnVwZGF0ZUlubmVyKFtuZXcgQ2hhbmdlZFJhbmdlKDAsIDAsIDAsIHZpZXcuc3RhdGUuZG9jLmxlbmd0aCldLCBudWxsKTtcbiAgICB9XG4gICAgLy8gVXBkYXRlIHRoZSBkb2N1bWVudCB2aWV3IHRvIGEgZ2l2ZW4gc3RhdGUuXG4gICAgdXBkYXRlKHVwZGF0ZSkge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIGxldCBjaGFuZ2VkUmFuZ2VzID0gdXBkYXRlLmNoYW5nZWRSYW5nZXM7XG4gICAgICAgIGlmICh0aGlzLm1pbldpZHRoID4gMCAmJiBjaGFuZ2VkUmFuZ2VzLmxlbmd0aCkge1xuICAgICAgICAgICAgaWYgKCFjaGFuZ2VkUmFuZ2VzLmV2ZXJ5KCh7IGZyb21BLCB0b0EgfSkgPT4gdG9BIDwgdGhpcy5taW5XaWR0aEZyb20gfHwgZnJvbUEgPiB0aGlzLm1pbldpZHRoVG8pKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5taW5XaWR0aCA9IHRoaXMubWluV2lkdGhGcm9tID0gdGhpcy5taW5XaWR0aFRvID0gMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMubWluV2lkdGhGcm9tID0gdXBkYXRlLmNoYW5nZXMubWFwUG9zKHRoaXMubWluV2lkdGhGcm9tLCAxKTtcbiAgICAgICAgICAgICAgICB0aGlzLm1pbldpZHRoVG8gPSB1cGRhdGUuY2hhbmdlcy5tYXBQb3ModGhpcy5taW5XaWR0aFRvLCAxKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0aGlzLnVwZGF0ZUVkaXRDb250ZXh0Rm9ybWF0dGluZyh1cGRhdGUpO1xuICAgICAgICBsZXQgcmVhZENvbXBvc2l0aW9uQXQgPSAtMTtcbiAgICAgICAgaWYgKHRoaXMudmlldy5pbnB1dFN0YXRlLmNvbXBvc2luZyA+PSAwICYmICF0aGlzLnZpZXcub2JzZXJ2ZXIuZWRpdENvbnRleHQpIHtcbiAgICAgICAgICAgIGlmICgoX2EgPSB0aGlzLmRvbUNoYW5nZWQpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5uZXdTZWwpXG4gICAgICAgICAgICAgICAgcmVhZENvbXBvc2l0aW9uQXQgPSB0aGlzLmRvbUNoYW5nZWQubmV3U2VsLmhlYWQ7XG4gICAgICAgICAgICBlbHNlIGlmICghdG91Y2hlc0NvbXBvc2l0aW9uKHVwZGF0ZS5jaGFuZ2VzLCB0aGlzLmhhc0NvbXBvc2l0aW9uKSAmJiAhdXBkYXRlLnNlbGVjdGlvblNldClcbiAgICAgICAgICAgICAgICByZWFkQ29tcG9zaXRpb25BdCA9IHVwZGF0ZS5zdGF0ZS5zZWxlY3Rpb24ubWFpbi5oZWFkO1xuICAgICAgICB9XG4gICAgICAgIGxldCBjb21wb3NpdGlvbiA9IHJlYWRDb21wb3NpdGlvbkF0ID4gLTEgPyBmaW5kQ29tcG9zaXRpb25SYW5nZSh0aGlzLnZpZXcsIHVwZGF0ZS5jaGFuZ2VzLCByZWFkQ29tcG9zaXRpb25BdCkgOiBudWxsO1xuICAgICAgICB0aGlzLmRvbUNoYW5nZWQgPSBudWxsO1xuICAgICAgICBpZiAodGhpcy5oYXNDb21wb3NpdGlvbikge1xuICAgICAgICAgICAgbGV0IHsgZnJvbSwgdG8gfSA9IHRoaXMuaGFzQ29tcG9zaXRpb247XG4gICAgICAgICAgICBjaGFuZ2VkUmFuZ2VzID0gbmV3IENoYW5nZWRSYW5nZShmcm9tLCB0bywgdXBkYXRlLmNoYW5nZXMubWFwUG9zKGZyb20sIC0xKSwgdXBkYXRlLmNoYW5nZXMubWFwUG9zKHRvLCAxKSlcbiAgICAgICAgICAgICAgICAuYWRkVG9TZXQoY2hhbmdlZFJhbmdlcy5zbGljZSgpKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmhhc0NvbXBvc2l0aW9uID0gY29tcG9zaXRpb24gPyB7IGZyb206IGNvbXBvc2l0aW9uLnJhbmdlLmZyb21CLCB0bzogY29tcG9zaXRpb24ucmFuZ2UudG9CIH0gOiBudWxsO1xuICAgICAgICAvLyBXaGVuIHRoZSBET00gbm9kZXMgYXJvdW5kIHRoZSBzZWxlY3Rpb24gYXJlIG1vdmVkIHRvIGFub3RoZXJcbiAgICAgICAgLy8gcGFyZW50LCBDaHJvbWUgc29tZXRpbWVzIHJlcG9ydHMgYSBkaWZmZXJlbnQgc2VsZWN0aW9uIHRocm91Z2hcbiAgICAgICAgLy8gZ2V0U2VsZWN0aW9uIHRoYW4gdGhlIG9uZSB0aGF0IGl0IGFjdHVhbGx5IHNob3dzIHRvIHRoZSB1c2VyLlxuICAgICAgICAvLyBUaGlzIGZvcmNlcyBhIHNlbGVjdGlvbiB1cGRhdGUgd2hlbiBsaW5lcyBhcmUgam9pbmVkIHRvIHdvcmtcbiAgICAgICAgLy8gYXJvdW5kIHRoYXQuIElzc3VlICM1NFxuICAgICAgICBpZiAoKGJyb3dzZXIuaWUgfHwgYnJvd3Nlci5jaHJvbWUpICYmICFjb21wb3NpdGlvbiAmJiB1cGRhdGUgJiZcbiAgICAgICAgICAgIHVwZGF0ZS5zdGF0ZS5kb2MubGluZXMgIT0gdXBkYXRlLnN0YXJ0U3RhdGUuZG9jLmxpbmVzKVxuICAgICAgICAgICAgdGhpcy5mb3JjZVNlbGVjdGlvbiA9IHRydWU7XG4gICAgICAgIGxldCBwcmV2RGVjbyA9IHRoaXMuZGVjb3JhdGlvbnMsIHByZXZXcmFwcGVycyA9IHRoaXMuYmxvY2tXcmFwcGVycztcbiAgICAgICAgdGhpcy51cGRhdGVEZWNvKCk7XG4gICAgICAgIGxldCBkZWNvRGlmZiA9IGZpbmRDaGFuZ2VkRGVjbyhwcmV2RGVjbywgdGhpcy5kZWNvcmF0aW9ucywgdXBkYXRlLmNoYW5nZXMpO1xuICAgICAgICBpZiAoZGVjb0RpZmYubGVuZ3RoKVxuICAgICAgICAgICAgY2hhbmdlZFJhbmdlcyA9IENoYW5nZWRSYW5nZS5leHRlbmRXaXRoUmFuZ2VzKGNoYW5nZWRSYW5nZXMsIGRlY29EaWZmKTtcbiAgICAgICAgbGV0IGJsb2NrRGlmZiA9IGZpbmRDaGFuZ2VkV3JhcHBlcnMocHJldldyYXBwZXJzLCB0aGlzLmJsb2NrV3JhcHBlcnMsIHVwZGF0ZS5jaGFuZ2VzKTtcbiAgICAgICAgaWYgKGJsb2NrRGlmZi5sZW5ndGgpXG4gICAgICAgICAgICBjaGFuZ2VkUmFuZ2VzID0gQ2hhbmdlZFJhbmdlLmV4dGVuZFdpdGhSYW5nZXMoY2hhbmdlZFJhbmdlcywgYmxvY2tEaWZmKTtcbiAgICAgICAgaWYgKGNvbXBvc2l0aW9uICYmICFjaGFuZ2VkUmFuZ2VzLnNvbWUociA9PiByLmZyb21BIDw9IGNvbXBvc2l0aW9uLnJhbmdlLmZyb21BICYmIHIudG9BID49IGNvbXBvc2l0aW9uLnJhbmdlLnRvQSkpXG4gICAgICAgICAgICBjaGFuZ2VkUmFuZ2VzID0gY29tcG9zaXRpb24ucmFuZ2UuYWRkVG9TZXQoY2hhbmdlZFJhbmdlcy5zbGljZSgpKTtcbiAgICAgICAgaWYgKCh0aGlzLnRpbGUuZmxhZ3MgJiAyIC8qIFRpbGVGbGFnLlN5bmNlZCAqLykgJiYgY2hhbmdlZFJhbmdlcy5sZW5ndGggPT0gMCkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy51cGRhdGVJbm5lcihjaGFuZ2VkUmFuZ2VzLCBjb21wb3NpdGlvbik7XG4gICAgICAgICAgICBpZiAodXBkYXRlLnRyYW5zYWN0aW9ucy5sZW5ndGgpXG4gICAgICAgICAgICAgICAgdGhpcy5sYXN0VXBkYXRlID0gRGF0ZS5ub3coKTtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8vIFVzZWQgYnkgdXBkYXRlIGFuZCB0aGUgY29uc3RydWN0b3IgZG8gcGVyZm9ybSB0aGUgYWN0dWFsIERPTVxuICAgIC8vIHVwZGF0ZVxuICAgIHVwZGF0ZUlubmVyKGNoYW5nZXMsIGNvbXBvc2l0aW9uKSB7XG4gICAgICAgIHRoaXMudmlldy52aWV3U3RhdGUubXVzdE1lYXN1cmVDb250ZW50ID0gdHJ1ZTtcbiAgICAgICAgbGV0IHsgb2JzZXJ2ZXIgfSA9IHRoaXMudmlldztcbiAgICAgICAgb2JzZXJ2ZXIuaWdub3JlKCgpID0+IHtcbiAgICAgICAgICAgIGlmIChjb21wb3NpdGlvbiB8fCBjaGFuZ2VzLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIGxldCBvbGRUaWxlID0gdGhpcy50aWxlO1xuICAgICAgICAgICAgICAgIGxldCBidWlsZGVyID0gbmV3IFRpbGVVcGRhdGUodGhpcy52aWV3LCBvbGRUaWxlLCB0aGlzLmJsb2NrV3JhcHBlcnMsIHRoaXMuZGVjb3JhdGlvbnMsIHRoaXMuZHluYW1pY0RlY29yYXRpb25NYXApO1xuICAgICAgICAgICAgICAgIHRoaXMudGlsZSA9IGJ1aWxkZXIucnVuKGNoYW5nZXMsIGNvbXBvc2l0aW9uKTtcbiAgICAgICAgICAgICAgICBkZXN0cm95RHJvcHBlZChvbGRUaWxlLCBidWlsZGVyLmNhY2hlLnJldXNlZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBMb2NrIHRoZSBoZWlnaHQgZHVyaW5nIHJlZHJhd2luZywgc2luY2UgQ2hyb21lIHNvbWV0aW1lc1xuICAgICAgICAgICAgLy8gbWVzc2VzIHdpdGggdGhlIHNjcm9sbCBwb3NpdGlvbiBkdXJpbmcgRE9NIG11dGF0aW9uICh0aG91Z2hcbiAgICAgICAgICAgIC8vIG5vIHJlbGF5b3V0IGlzIHRyaWdnZXJlZCBhbmQgSSBjYW5ub3QgaW1hZ2luZSBob3cgaXQgY2FuXG4gICAgICAgICAgICAvLyByZWNvbXB1dGUgdGhlIHNjcm9sbCBwb3NpdGlvbiB3aXRob3V0IGEgbGF5b3V0KVxuICAgICAgICAgICAgdGhpcy50aWxlLmRvbS5zdHlsZS5oZWlnaHQgPSB0aGlzLnZpZXcudmlld1N0YXRlLmNvbnRlbnRIZWlnaHQgLyB0aGlzLnZpZXcuc2NhbGVZICsgXCJweFwiO1xuICAgICAgICAgICAgdGhpcy50aWxlLmRvbS5zdHlsZS5mbGV4QmFzaXMgPSB0aGlzLm1pbldpZHRoID8gdGhpcy5taW5XaWR0aCArIFwicHhcIiA6IFwiXCI7XG4gICAgICAgICAgICAvLyBDaHJvbWUgd2lsbCBzb21ldGltZXMsIHdoZW4gRE9NIG11dGF0aW9ucyBvY2N1ciBkaXJlY3RseVxuICAgICAgICAgICAgLy8gYXJvdW5kIHRoZSBzZWxlY3Rpb24sIGdldCBjb25mdXNlZCBhbmQgcmVwb3J0IGEgZGlmZmVyZW50XG4gICAgICAgICAgICAvLyBzZWxlY3Rpb24gZnJvbSB0aGUgb25lIGl0IGRpc3BsYXlzIChpc3N1ZSAjMjE4KS4gVGhpcyB0cmllc1xuICAgICAgICAgICAgLy8gdG8gZGV0ZWN0IHRoYXQgc2l0dWF0aW9uLlxuICAgICAgICAgICAgbGV0IHRyYWNrID0gYnJvd3Nlci5jaHJvbWUgfHwgYnJvd3Nlci5pb3MgPyB7IG5vZGU6IG9ic2VydmVyLnNlbGVjdGlvblJhbmdlLmZvY3VzTm9kZSwgd3JpdHRlbjogZmFsc2UgfSA6IHVuZGVmaW5lZDtcbiAgICAgICAgICAgIHRoaXMudGlsZS5zeW5jKHRyYWNrKTtcbiAgICAgICAgICAgIGlmICh0cmFjayAmJiAodHJhY2sud3JpdHRlbiB8fCBvYnNlcnZlci5zZWxlY3Rpb25SYW5nZS5mb2N1c05vZGUgIT0gdHJhY2subm9kZSB8fCAhdGhpcy50aWxlLmRvbS5jb250YWlucyh0cmFjay5ub2RlKSkpXG4gICAgICAgICAgICAgICAgdGhpcy5mb3JjZVNlbGVjdGlvbiA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLnRpbGUuZG9tLnN0eWxlLmhlaWdodCA9IFwiXCI7XG4gICAgICAgIH0pO1xuICAgICAgICBsZXQgZ2FwcyA9IFtdO1xuICAgICAgICBpZiAodGhpcy52aWV3LnZpZXdwb3J0LmZyb20gfHwgdGhpcy52aWV3LnZpZXdwb3J0LnRvIDwgdGhpcy52aWV3LnN0YXRlLmRvYy5sZW5ndGgpXG4gICAgICAgICAgICBmb3IgKGxldCBjaGlsZCBvZiB0aGlzLnRpbGUuY2hpbGRyZW4pXG4gICAgICAgICAgICAgICAgaWYgKGNoaWxkLmlzV2lkZ2V0KCkgJiYgY2hpbGQud2lkZ2V0IGluc3RhbmNlb2YgQmxvY2tHYXBXaWRnZXQpXG4gICAgICAgICAgICAgICAgICAgIGdhcHMucHVzaChjaGlsZC5kb20pO1xuICAgICAgICBvYnNlcnZlci51cGRhdGVHYXBzKGdhcHMpO1xuICAgIH1cbiAgICB1cGRhdGVFZGl0Q29udGV4dEZvcm1hdHRpbmcodXBkYXRlKSB7XG4gICAgICAgIHRoaXMuZWRpdENvbnRleHRGb3JtYXR0aW5nID0gdGhpcy5lZGl0Q29udGV4dEZvcm1hdHRpbmcubWFwKHVwZGF0ZS5jaGFuZ2VzKTtcbiAgICAgICAgZm9yIChsZXQgdHIgb2YgdXBkYXRlLnRyYW5zYWN0aW9ucylcbiAgICAgICAgICAgIGZvciAobGV0IGVmZmVjdCBvZiB0ci5lZmZlY3RzKVxuICAgICAgICAgICAgICAgIGlmIChlZmZlY3QuaXMoc2V0RWRpdENvbnRleHRGb3JtYXR0aW5nKSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmVkaXRDb250ZXh0Rm9ybWF0dGluZyA9IGVmZmVjdC52YWx1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgfVxuICAgIC8vIFN5bmMgdGhlIERPTSBzZWxlY3Rpb24gdG8gdGhpcy5zdGF0ZS5zZWxlY3Rpb25cbiAgICB1cGRhdGVTZWxlY3Rpb24obXVzdFJlYWQgPSBmYWxzZSwgZnJvbVBvaW50ZXIgPSBmYWxzZSkge1xuICAgICAgICBpZiAobXVzdFJlYWQgfHwgIXRoaXMudmlldy5vYnNlcnZlci5zZWxlY3Rpb25SYW5nZS5mb2N1c05vZGUpXG4gICAgICAgICAgICB0aGlzLnZpZXcub2JzZXJ2ZXIucmVhZFNlbGVjdGlvblJhbmdlKCk7XG4gICAgICAgIGxldCB7IGRvbSB9ID0gdGhpcy50aWxlO1xuICAgICAgICBsZXQgYWN0aXZlRWx0ID0gdGhpcy52aWV3LnJvb3QuYWN0aXZlRWxlbWVudCwgZm9jdXNlZCA9IGFjdGl2ZUVsdCA9PSBkb207XG4gICAgICAgIGxldCBzZWxlY3Rpb25Ob3RGb2N1cyA9ICFmb2N1c2VkICYmICEodGhpcy52aWV3LnN0YXRlLmZhY2V0KGVkaXRhYmxlKSB8fCBkb20udGFiSW5kZXggPiAtMSkgJiZcbiAgICAgICAgICAgIGhhc1NlbGVjdGlvbihkb20sIHRoaXMudmlldy5vYnNlcnZlci5zZWxlY3Rpb25SYW5nZSkgJiYgIShhY3RpdmVFbHQgJiYgZG9tLmNvbnRhaW5zKGFjdGl2ZUVsdCkpO1xuICAgICAgICBpZiAoIShmb2N1c2VkIHx8IGZyb21Qb2ludGVyIHx8IHNlbGVjdGlvbk5vdEZvY3VzKSlcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgbGV0IGZvcmNlID0gdGhpcy5mb3JjZVNlbGVjdGlvbjtcbiAgICAgICAgdGhpcy5mb3JjZVNlbGVjdGlvbiA9IGZhbHNlO1xuICAgICAgICBsZXQgbWFpbiA9IHRoaXMudmlldy5zdGF0ZS5zZWxlY3Rpb24ubWFpbiwgYW5jaG9yLCBoZWFkO1xuICAgICAgICBpZiAobWFpbi5lbXB0eSkge1xuICAgICAgICAgICAgaGVhZCA9IGFuY2hvciA9IHRoaXMuaW5saW5lRE9NTmVhclBvcyhtYWluLmFuY2hvciwgbWFpbi5hc3NvYyB8fCAxKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGhlYWQgPSB0aGlzLmlubGluZURPTU5lYXJQb3MobWFpbi5oZWFkLCBtYWluLmhlYWQgPT0gbWFpbi5mcm9tID8gMSA6IC0xKTtcbiAgICAgICAgICAgIGFuY2hvciA9IHRoaXMuaW5saW5lRE9NTmVhclBvcyhtYWluLmFuY2hvciwgbWFpbi5hbmNob3IgPT0gbWFpbi5mcm9tID8gMSA6IC0xKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBBbHdheXMgcmVzZXQgb24gRmlyZWZveCB3aGVuIG5leHQgdG8gYW4gdW5lZGl0YWJsZSBub2RlIHRvXG4gICAgICAgIC8vIGF2b2lkIGludmlzaWJsZSBjdXJzb3IgYnVncyAoIzExMSlcbiAgICAgICAgaWYgKGJyb3dzZXIuZ2Vja28gJiYgbWFpbi5lbXB0eSAmJiAhdGhpcy5oYXNDb21wb3NpdGlvbiAmJiBiZXR3ZWVuVW5lZGl0YWJsZShhbmNob3IpKSB7XG4gICAgICAgICAgICBsZXQgZHVtbXkgPSBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShcIlwiKTtcbiAgICAgICAgICAgIHRoaXMudmlldy5vYnNlcnZlci5pZ25vcmUoKCkgPT4gYW5jaG9yLm5vZGUuaW5zZXJ0QmVmb3JlKGR1bW15LCBhbmNob3Iubm9kZS5jaGlsZE5vZGVzW2FuY2hvci5vZmZzZXRdIHx8IG51bGwpKTtcbiAgICAgICAgICAgIGFuY2hvciA9IGhlYWQgPSBuZXcgRE9NUG9zKGR1bW15LCAwKTtcbiAgICAgICAgICAgIGZvcmNlID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBsZXQgZG9tU2VsID0gdGhpcy52aWV3Lm9ic2VydmVyLnNlbGVjdGlvblJhbmdlO1xuICAgICAgICAvLyBJZiB0aGUgc2VsZWN0aW9uIGlzIGFscmVhZHkgaGVyZSwgb3IgaW4gYW4gZXF1aXZhbGVudCBwb3NpdGlvbiwgZG9uJ3QgdG91Y2ggaXRcbiAgICAgICAgaWYgKGZvcmNlIHx8ICFkb21TZWwuZm9jdXNOb2RlIHx8ICghaXNFcXVpdmFsZW50UG9zaXRpb24oYW5jaG9yLm5vZGUsIGFuY2hvci5vZmZzZXQsIGRvbVNlbC5hbmNob3JOb2RlLCBkb21TZWwuYW5jaG9yT2Zmc2V0KSB8fFxuICAgICAgICAgICAgIWlzRXF1aXZhbGVudFBvc2l0aW9uKGhlYWQubm9kZSwgaGVhZC5vZmZzZXQsIGRvbVNlbC5mb2N1c05vZGUsIGRvbVNlbC5mb2N1c09mZnNldCkpICYmICF0aGlzLnN1cHByZXNzV2lkZ2V0Q3Vyc29yQ2hhbmdlKGRvbVNlbCwgbWFpbikpIHtcbiAgICAgICAgICAgIHRoaXMudmlldy5vYnNlcnZlci5pZ25vcmUoKCkgPT4ge1xuICAgICAgICAgICAgICAgIC8vIENocm9tZSBBbmRyb2lkIHdpbGwgaGlkZSB0aGUgdmlydHVhbCBrZXlib2FyZCB3aGVuIHRhcHBpbmdcbiAgICAgICAgICAgICAgICAvLyBpbnNpZGUgYW4gdW5lZGl0YWJsZSBub2RlLCBhbmQgbm90IGJyaW5nIGl0IGJhY2sgd2hlbiB3ZVxuICAgICAgICAgICAgICAgIC8vIG1vdmUgdGhlIGN1cnNvciB0byBpdHMgcHJvcGVyIHBvc2l0aW9uLiBUaGlzIHRyaWVzIHRvXG4gICAgICAgICAgICAgICAgLy8gcmVzdG9yZSB0aGUga2V5Ym9hcmQgYnkgY3ljbGluZyBmb2N1cy5cbiAgICAgICAgICAgICAgICBpZiAoYnJvd3Nlci5hbmRyb2lkICYmIGJyb3dzZXIuY2hyb21lICYmIGRvbS5jb250YWlucyhkb21TZWwuZm9jdXNOb2RlKSAmJlxuICAgICAgICAgICAgICAgICAgICBpblVuZWRpdGFibGUoZG9tU2VsLmZvY3VzTm9kZSwgZG9tKSkge1xuICAgICAgICAgICAgICAgICAgICBkb20uYmx1cigpO1xuICAgICAgICAgICAgICAgICAgICBkb20uZm9jdXMoeyBwcmV2ZW50U2Nyb2xsOiB0cnVlIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBsZXQgcmF3U2VsID0gZ2V0U2VsZWN0aW9uKHRoaXMudmlldy5yb290KTtcbiAgICAgICAgICAgICAgICBpZiAoIXJhd1NlbCkgO1xuICAgICAgICAgICAgICAgIGVsc2UgaWYgKG1haW4uZW1wdHkpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gV29yayBhcm91bmQgaHR0cHM6Ly9idWd6aWxsYS5tb3ppbGxhLm9yZy9zaG93X2J1Zy5jZ2k/aWQ9MTYxMjA3NlxuICAgICAgICAgICAgICAgICAgICBpZiAoYnJvd3Nlci5nZWNrbykge1xuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IG5leHRUbyA9IG5leHRUb1VuZWRpdGFibGUoYW5jaG9yLm5vZGUsIGFuY2hvci5vZmZzZXQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG5leHRUbyAmJiBuZXh0VG8gIT0gKDEgLyogTmV4dFRvLkJlZm9yZSAqLyB8IDIgLyogTmV4dFRvLkFmdGVyICovKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCB0ZXh0ID0gKG5leHRUbyA9PSAxIC8qIE5leHRUby5CZWZvcmUgKi8gPyB0ZXh0Tm9kZUJlZm9yZSA6IHRleHROb2RlQWZ0ZXIpKGFuY2hvci5ub2RlLCBhbmNob3Iub2Zmc2V0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGV4dClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYW5jaG9yID0gbmV3IERPTVBvcyh0ZXh0Lm5vZGUsIHRleHQub2Zmc2V0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByYXdTZWwuY29sbGFwc2UoYW5jaG9yLm5vZGUsIGFuY2hvci5vZmZzZXQpO1xuICAgICAgICAgICAgICAgICAgICBpZiAobWFpbi5iaWRpTGV2ZWwgIT0gbnVsbCAmJiByYXdTZWwuY2FyZXRCaWRpTGV2ZWwgIT09IHVuZGVmaW5lZClcbiAgICAgICAgICAgICAgICAgICAgICAgIHJhd1NlbC5jYXJldEJpZGlMZXZlbCA9IG1haW4uYmlkaUxldmVsO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChyYXdTZWwuZXh0ZW5kKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIFNlbGVjdGlvbi5leHRlbmQgY2FuIGJlIHVzZWQgdG8gY3JlYXRlIGFuICdpbnZlcnRlZCcgc2VsZWN0aW9uXG4gICAgICAgICAgICAgICAgICAgIC8vIChvbmUgd2hlcmUgdGhlIGZvY3VzIGlzIGJlZm9yZSB0aGUgYW5jaG9yKSwgYnV0IG5vdCBhbGxcbiAgICAgICAgICAgICAgICAgICAgLy8gYnJvd3NlcnMgc3VwcG9ydCBpdCB5ZXQuXG4gICAgICAgICAgICAgICAgICAgIHJhd1NlbC5jb2xsYXBzZShhbmNob3Iubm9kZSwgYW5jaG9yLm9mZnNldCk7XG4gICAgICAgICAgICAgICAgICAgIC8vIFNhZmFyaSB3aWxsIGlnbm9yZSB0aGUgY2FsbCBhYm92ZSB3aGVuIHRoZSBlZGl0b3IgaXNcbiAgICAgICAgICAgICAgICAgICAgLy8gaGlkZGVuLCBhbmQgdGhlbiByYWlzZSBhbiBlcnJvciBvbiB0aGUgY2FsbCB0byBleHRlbmRcbiAgICAgICAgICAgICAgICAgICAgLy8gKCM5NDApLlxuICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmF3U2VsLmV4dGVuZChoZWFkLm5vZGUsIGhlYWQub2Zmc2V0KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjYXRjaCAoXykgeyB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAvLyBQcmltaXRpdmUgKElFKSB3YXlcbiAgICAgICAgICAgICAgICAgICAgbGV0IHJhbmdlID0gZG9jdW1lbnQuY3JlYXRlUmFuZ2UoKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1haW4uYW5jaG9yID4gbWFpbi5oZWFkKVxuICAgICAgICAgICAgICAgICAgICAgICAgW2FuY2hvciwgaGVhZF0gPSBbaGVhZCwgYW5jaG9yXTtcbiAgICAgICAgICAgICAgICAgICAgcmFuZ2Uuc2V0RW5kKGhlYWQubm9kZSwgaGVhZC5vZmZzZXQpO1xuICAgICAgICAgICAgICAgICAgICByYW5nZS5zZXRTdGFydChhbmNob3Iubm9kZSwgYW5jaG9yLm9mZnNldCk7XG4gICAgICAgICAgICAgICAgICAgIHJhd1NlbC5yZW1vdmVBbGxSYW5nZXMoKTtcbiAgICAgICAgICAgICAgICAgICAgcmF3U2VsLmFkZFJhbmdlKHJhbmdlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHNlbGVjdGlvbk5vdEZvY3VzICYmIHRoaXMudmlldy5yb290LmFjdGl2ZUVsZW1lbnQgPT0gZG9tKSB7XG4gICAgICAgICAgICAgICAgICAgIGRvbS5ibHVyKCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChhY3RpdmVFbHQpXG4gICAgICAgICAgICAgICAgICAgICAgICBhY3RpdmVFbHQuZm9jdXMoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoaXMudmlldy5vYnNlcnZlci5zZXRTZWxlY3Rpb25SYW5nZShhbmNob3IsIGhlYWQpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuaW1wcmVjaXNlQW5jaG9yID0gYW5jaG9yLnByZWNpc2UgPyBudWxsIDogbmV3IERPTVBvcyhkb21TZWwuYW5jaG9yTm9kZSwgZG9tU2VsLmFuY2hvck9mZnNldCk7XG4gICAgICAgIHRoaXMuaW1wcmVjaXNlSGVhZCA9IGhlYWQucHJlY2lzZSA/IG51bGwgOiBuZXcgRE9NUG9zKGRvbVNlbC5mb2N1c05vZGUsIGRvbVNlbC5mb2N1c09mZnNldCk7XG4gICAgfVxuICAgIC8vIElmIGEgemVyby1sZW5ndGggd2lkZ2V0IGlzIGluc2VydGVkIG5leHQgdG8gdGhlIGN1cnNvciBkdXJpbmdcbiAgICAvLyBjb21wb3NpdGlvbiwgYXZvaWQgbW92aW5nIGl0IGFjcm9zcyBpdCBhbmQgZGlzcnVwdGluZyB0aGVcbiAgICAvLyBjb21wb3NpdGlvbi5cbiAgICBzdXBwcmVzc1dpZGdldEN1cnNvckNoYW5nZShzZWwsIGN1cnNvcikge1xuICAgICAgICByZXR1cm4gdGhpcy5oYXNDb21wb3NpdGlvbiAmJiBjdXJzb3IuZW1wdHkgJiZcbiAgICAgICAgICAgIGlzRXF1aXZhbGVudFBvc2l0aW9uKHNlbC5mb2N1c05vZGUsIHNlbC5mb2N1c09mZnNldCwgc2VsLmFuY2hvck5vZGUsIHNlbC5hbmNob3JPZmZzZXQpICYmXG4gICAgICAgICAgICB0aGlzLnBvc0Zyb21ET00oc2VsLmZvY3VzTm9kZSwgc2VsLmZvY3VzT2Zmc2V0KSA9PSBjdXJzb3IuaGVhZDtcbiAgICB9XG4gICAgZW5mb3JjZUN1cnNvckFzc29jKCkge1xuICAgICAgICBpZiAodGhpcy5oYXNDb21wb3NpdGlvbilcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgbGV0IHsgdmlldyB9ID0gdGhpcywgY3Vyc29yID0gdmlldy5zdGF0ZS5zZWxlY3Rpb24ubWFpbjtcbiAgICAgICAgbGV0IHNlbCA9IGdldFNlbGVjdGlvbih2aWV3LnJvb3QpO1xuICAgICAgICBsZXQgeyBhbmNob3JOb2RlLCBhbmNob3JPZmZzZXQgfSA9IHZpZXcub2JzZXJ2ZXIuc2VsZWN0aW9uUmFuZ2U7XG4gICAgICAgIGlmICghc2VsIHx8ICFjdXJzb3IuZW1wdHkgfHwgIWN1cnNvci5hc3NvYyB8fCAhc2VsLm1vZGlmeSlcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgbGV0IGxpbmUgPSB0aGlzLmxpbmVBdChjdXJzb3IuaGVhZCwgY3Vyc29yLmFzc29jKTtcbiAgICAgICAgaWYgKCFsaW5lKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICBsZXQgbGluZVN0YXJ0ID0gbGluZS5wb3NBdFN0YXJ0O1xuICAgICAgICBpZiAoY3Vyc29yLmhlYWQgPT0gbGluZVN0YXJ0IHx8IGN1cnNvci5oZWFkID09IGxpbmVTdGFydCArIGxpbmUubGVuZ3RoKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICBsZXQgYmVmb3JlID0gdGhpcy5jb29yZHNBdChjdXJzb3IuaGVhZCwgLTEpLCBhZnRlciA9IHRoaXMuY29vcmRzQXQoY3Vyc29yLmhlYWQsIDEpO1xuICAgICAgICBpZiAoIWJlZm9yZSB8fCAhYWZ0ZXIgfHwgYmVmb3JlLmJvdHRvbSA+IGFmdGVyLnRvcClcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgbGV0IGRvbSA9IHRoaXMuZG9tQXRQb3MoY3Vyc29yLmhlYWQgKyBjdXJzb3IuYXNzb2MsIGN1cnNvci5hc3NvYyk7XG4gICAgICAgIHNlbC5jb2xsYXBzZShkb20ubm9kZSwgZG9tLm9mZnNldCk7XG4gICAgICAgIHNlbC5tb2RpZnkoXCJtb3ZlXCIsIGN1cnNvci5hc3NvYyA8IDAgPyBcImZvcndhcmRcIiA6IFwiYmFja3dhcmRcIiwgXCJsaW5lYm91bmRhcnlcIik7XG4gICAgICAgIC8vIFRoaXMgY2FuIGdvIHdyb25nIGluIGNvcm5lciBjYXNlcyBsaWtlIHNpbmdsZS1jaGFyYWN0ZXIgbGluZXMsXG4gICAgICAgIC8vIHNvIGNoZWNrIGFuZCByZXNldCBpZiBuZWNlc3NhcnkuXG4gICAgICAgIHZpZXcub2JzZXJ2ZXIucmVhZFNlbGVjdGlvblJhbmdlKCk7XG4gICAgICAgIGxldCBuZXdSYW5nZSA9IHZpZXcub2JzZXJ2ZXIuc2VsZWN0aW9uUmFuZ2U7XG4gICAgICAgIGlmICh2aWV3LmRvY1ZpZXcucG9zRnJvbURPTShuZXdSYW5nZS5hbmNob3JOb2RlLCBuZXdSYW5nZS5hbmNob3JPZmZzZXQpICE9IGN1cnNvci5mcm9tKVxuICAgICAgICAgICAgc2VsLmNvbGxhcHNlKGFuY2hvck5vZGUsIGFuY2hvck9mZnNldCk7XG4gICAgfVxuICAgIHBvc0Zyb21ET00obm9kZSwgb2Zmc2V0KSB7XG4gICAgICAgIGxldCB0aWxlID0gdGhpcy50aWxlLm5lYXJlc3Qobm9kZSk7XG4gICAgICAgIGlmICghdGlsZSlcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnRpbGUuZG9tLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uKG5vZGUpICYgMiAvKiBQUkVDRURJTkcgKi8gPyAwIDogdGhpcy52aWV3LnN0YXRlLmRvYy5sZW5ndGg7XG4gICAgICAgIGxldCBzdGFydCA9IHRpbGUucG9zQXRTdGFydDtcbiAgICAgICAgaWYgKHRpbGUuaXNDb21wb3NpdGUoKSkge1xuICAgICAgICAgICAgbGV0IGFmdGVyO1xuICAgICAgICAgICAgaWYgKG5vZGUgPT0gdGlsZS5kb20pIHtcbiAgICAgICAgICAgICAgICBhZnRlciA9IHRpbGUuZG9tLmNoaWxkTm9kZXNbb2Zmc2V0XTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGxldCBiaWFzID0gbWF4T2Zmc2V0KG5vZGUpID09IDAgPyAwIDogb2Zmc2V0ID09IDAgPyAtMSA6IDE7XG4gICAgICAgICAgICAgICAgZm9yICg7Oykge1xuICAgICAgICAgICAgICAgICAgICBsZXQgcGFyZW50ID0gbm9kZS5wYXJlbnROb2RlO1xuICAgICAgICAgICAgICAgICAgICBpZiAocGFyZW50ID09IHRpbGUuZG9tKVxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGlmIChiaWFzID09IDAgJiYgcGFyZW50LmZpcnN0Q2hpbGQgIT0gcGFyZW50Lmxhc3RDaGlsZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG5vZGUgPT0gcGFyZW50LmZpcnN0Q2hpbGQpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYmlhcyA9IC0xO1xuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJpYXMgPSAxO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIG5vZGUgPSBwYXJlbnQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChiaWFzIDwgMClcbiAgICAgICAgICAgICAgICAgICAgYWZ0ZXIgPSBub2RlO1xuICAgICAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICAgICAgYWZ0ZXIgPSBub2RlLm5leHRTaWJsaW5nO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGFmdGVyID09IHRpbGUuZG9tLmZpcnN0Q2hpbGQpXG4gICAgICAgICAgICAgICAgcmV0dXJuIHN0YXJ0O1xuICAgICAgICAgICAgd2hpbGUgKGFmdGVyICYmICFUaWxlLmdldChhZnRlcikpXG4gICAgICAgICAgICAgICAgYWZ0ZXIgPSBhZnRlci5uZXh0U2libGluZztcbiAgICAgICAgICAgIGlmICghYWZ0ZXIpXG4gICAgICAgICAgICAgICAgcmV0dXJuIHN0YXJ0ICsgdGlsZS5sZW5ndGg7XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMCwgcG9zID0gc3RhcnQ7OyBpKyspIHtcbiAgICAgICAgICAgICAgICBsZXQgY2hpbGQgPSB0aWxlLmNoaWxkcmVuW2ldO1xuICAgICAgICAgICAgICAgIGlmIChjaGlsZC5kb20gPT0gYWZ0ZXIpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBwb3M7XG4gICAgICAgICAgICAgICAgcG9zICs9IGNoaWxkLmxlbmd0aCArIGNoaWxkLmJyZWFrQWZ0ZXI7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodGlsZS5pc1RleHQoKSkge1xuICAgICAgICAgICAgcmV0dXJuIG5vZGUgPT0gdGlsZS5kb20gPyBzdGFydCArIG9mZnNldCA6IHN0YXJ0ICsgKG9mZnNldCA/IHRpbGUubGVuZ3RoIDogMCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gc3RhcnQ7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZG9tQXRQb3MocG9zLCBzaWRlKSB7XG4gICAgICAgIGxldCB7IHRpbGUsIG9mZnNldCB9ID0gdGhpcy50aWxlLnJlc29sdmVCbG9jayhwb3MsIHNpZGUpO1xuICAgICAgICBpZiAodGlsZS5pc1dpZGdldCgpKVxuICAgICAgICAgICAgcmV0dXJuIHRpbGUuZG9tUG9zRm9yKHBvcywgc2lkZSk7XG4gICAgICAgIHJldHVybiB0aWxlLmRvbUluKG9mZnNldCwgc2lkZSk7XG4gICAgfVxuICAgIGlubGluZURPTU5lYXJQb3MocG9zLCBzaWRlKSB7XG4gICAgICAgIGxldCBiZWZvcmUsIGJlZm9yZU9mZiA9IC0xLCBiZWZvcmVCYWQgPSBmYWxzZTtcbiAgICAgICAgbGV0IGFmdGVyLCBhZnRlck9mZiA9IC0xLCBhZnRlckJhZCA9IGZhbHNlO1xuICAgICAgICB0aGlzLnRpbGUuYmxvY2tUaWxlcygodGlsZSwgb2ZmKSA9PiB7XG4gICAgICAgICAgICBpZiAodGlsZS5pc1dpZGdldCgpKSB7XG4gICAgICAgICAgICAgICAgaWYgKCh0aWxlLmZsYWdzICYgMzIgLyogVGlsZUZsYWcuQWZ0ZXIgKi8pICYmIG9mZiA+PSBwb3MpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgIGlmICh0aWxlLmZsYWdzICYgMTYgLyogVGlsZUZsYWcuQmVmb3JlICovKVxuICAgICAgICAgICAgICAgICAgICBiZWZvcmVCYWQgPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgbGV0IGVuZCA9IG9mZiArIHRpbGUubGVuZ3RoO1xuICAgICAgICAgICAgICAgIGlmIChvZmYgPD0gcG9zKSB7XG4gICAgICAgICAgICAgICAgICAgIGJlZm9yZSA9IHRpbGU7XG4gICAgICAgICAgICAgICAgICAgIGJlZm9yZU9mZiA9IHBvcyAtIG9mZjtcbiAgICAgICAgICAgICAgICAgICAgYmVmb3JlQmFkID0gZW5kIDwgcG9zO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoZW5kID49IHBvcyAmJiAhYWZ0ZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgYWZ0ZXIgPSB0aWxlO1xuICAgICAgICAgICAgICAgICAgICBhZnRlck9mZiA9IHBvcyAtIG9mZjtcbiAgICAgICAgICAgICAgICAgICAgYWZ0ZXJCYWQgPSBvZmYgPiBwb3M7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChvZmYgPiBwb3MgJiYgYWZ0ZXIpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgaWYgKCFiZWZvcmUgJiYgIWFmdGVyKVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZG9tQXRQb3MocG9zLCBzaWRlKTtcbiAgICAgICAgaWYgKGJlZm9yZUJhZCAmJiBhZnRlcilcbiAgICAgICAgICAgIGJlZm9yZSA9IG51bGw7XG4gICAgICAgIGVsc2UgaWYgKGFmdGVyQmFkICYmIGJlZm9yZSlcbiAgICAgICAgICAgIGFmdGVyID0gbnVsbDtcbiAgICAgICAgcmV0dXJuIGJlZm9yZSAmJiBzaWRlIDwgMCB8fCAhYWZ0ZXIgPyBiZWZvcmUuZG9tSW4oYmVmb3JlT2ZmLCBzaWRlKSA6IGFmdGVyLmRvbUluKGFmdGVyT2ZmLCBzaWRlKTtcbiAgICB9XG4gICAgY29vcmRzQXQocG9zLCBzaWRlKSB7XG4gICAgICAgIGxldCB7IHRpbGUsIG9mZnNldCB9ID0gdGhpcy50aWxlLnJlc29sdmVCbG9jayhwb3MsIHNpZGUpO1xuICAgICAgICBpZiAodGlsZS5pc1dpZGdldCgpKSB7XG4gICAgICAgICAgICBpZiAodGlsZS53aWRnZXQgaW5zdGFuY2VvZiBCbG9ja0dhcFdpZGdldClcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgIHJldHVybiB0aWxlLmNvb3Jkc0luV2lkZ2V0KG9mZnNldCwgc2lkZSwgdHJ1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRpbGUuY29vcmRzSW4ob2Zmc2V0LCBzaWRlKTtcbiAgICB9XG4gICAgbGluZUF0KHBvcywgc2lkZSkge1xuICAgICAgICBsZXQgeyB0aWxlIH0gPSB0aGlzLnRpbGUucmVzb2x2ZUJsb2NrKHBvcywgc2lkZSk7XG4gICAgICAgIHJldHVybiB0aWxlLmlzTGluZSgpID8gdGlsZSA6IG51bGw7XG4gICAgfVxuICAgIGNvb3Jkc0ZvckNoYXIocG9zKSB7XG4gICAgICAgIGxldCB7IHRpbGUsIG9mZnNldCB9ID0gdGhpcy50aWxlLnJlc29sdmVCbG9jayhwb3MsIDEpO1xuICAgICAgICBpZiAoIXRpbGUuaXNMaW5lKCkpXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgZnVuY3Rpb24gc2Nhbih0aWxlLCBvZmZzZXQpIHtcbiAgICAgICAgICAgIGlmICh0aWxlLmlzQ29tcG9zaXRlKCkpIHtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBjaCBvZiB0aWxlLmNoaWxkcmVuKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjaC5sZW5ndGggPj0gb2Zmc2V0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgZm91bmQgPSBzY2FuKGNoLCBvZmZzZXQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGZvdW5kKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmb3VuZDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBvZmZzZXQgLT0gY2gubGVuZ3RoO1xuICAgICAgICAgICAgICAgICAgICBpZiAob2Zmc2V0IDwgMClcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHRpbGUuaXNUZXh0KCkgJiYgb2Zmc2V0IDwgdGlsZS5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICBsZXQgZW5kID0gZmluZENsdXN0ZXJCcmVhayh0aWxlLnRleHQsIG9mZnNldCk7XG4gICAgICAgICAgICAgICAgaWYgKGVuZCA9PSBvZmZzZXQpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgICAgIGxldCByZWN0cyA9IHRleHRSYW5nZSh0aWxlLmRvbSwgb2Zmc2V0LCBlbmQpLmdldENsaWVudFJlY3RzKCk7XG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCByZWN0cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICBsZXQgcmVjdCA9IHJlY3RzW2ldO1xuICAgICAgICAgICAgICAgICAgICBpZiAoaSA9PSByZWN0cy5sZW5ndGggLSAxIHx8IHJlY3QudG9wIDwgcmVjdC5ib3R0b20gJiYgcmVjdC5sZWZ0IDwgcmVjdC5yaWdodClcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZWN0O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBzY2FuKHRpbGUsIG9mZnNldCk7XG4gICAgfVxuICAgIG1lYXN1cmVWaXNpYmxlTGluZUhlaWdodHModmlld3BvcnQpIHtcbiAgICAgICAgbGV0IHJlc3VsdCA9IFtdLCB7IGZyb20sIHRvIH0gPSB2aWV3cG9ydDtcbiAgICAgICAgbGV0IGNvbnRlbnRXaWR0aCA9IHRoaXMudmlldy5jb250ZW50RE9NLmNsaWVudFdpZHRoO1xuICAgICAgICBsZXQgaXNXaWRlciA9IGNvbnRlbnRXaWR0aCA+IE1hdGgubWF4KHRoaXMudmlldy5zY3JvbGxET00uY2xpZW50V2lkdGgsIHRoaXMubWluV2lkdGgpICsgMTtcbiAgICAgICAgbGV0IHdpZGVzdCA9IC0xLCBsdHIgPSB0aGlzLnZpZXcudGV4dERpcmVjdGlvbiA9PSBEaXJlY3Rpb24uTFRSO1xuICAgICAgICBsZXQgc3BhY2VBYm92ZSA9IDA7XG4gICAgICAgIGxldCBzY2FuID0gKHRpbGUsIHBvcywgbWVhc3VyZUJvdW5kcykgPT4ge1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aWxlLmNoaWxkcmVuLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgaWYgKHBvcyA+IHRvKVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBsZXQgY2hpbGQgPSB0aWxlLmNoaWxkcmVuW2ldLCBlbmQgPSBwb3MgKyBjaGlsZC5sZW5ndGg7XG4gICAgICAgICAgICAgICAgbGV0IGNoaWxkUmVjdCA9IGNoaWxkLmRvbS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSwgeyBoZWlnaHQgfSA9IGNoaWxkUmVjdDtcbiAgICAgICAgICAgICAgICBpZiAobWVhc3VyZUJvdW5kcyAmJiAhaSlcbiAgICAgICAgICAgICAgICAgICAgc3BhY2VBYm92ZSArPSBjaGlsZFJlY3QudG9wIC0gbWVhc3VyZUJvdW5kcy50b3A7XG4gICAgICAgICAgICAgICAgaWYgKGNoaWxkIGluc3RhbmNlb2YgQmxvY2tXcmFwcGVyVGlsZSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoZW5kID4gZnJvbSlcbiAgICAgICAgICAgICAgICAgICAgICAgIHNjYW4oY2hpbGQsIHBvcywgY2hpbGRSZWN0KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAocG9zID49IGZyb20pIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHNwYWNlQWJvdmUgPiAwKVxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnB1c2goLXNwYWNlQWJvdmUpO1xuICAgICAgICAgICAgICAgICAgICByZXN1bHQucHVzaChoZWlnaHQgKyBzcGFjZUFib3ZlKTtcbiAgICAgICAgICAgICAgICAgICAgc3BhY2VBYm92ZSA9IDA7XG4gICAgICAgICAgICAgICAgICAgIGlmIChpc1dpZGVyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgbGFzdCA9IGNoaWxkLmRvbS5sYXN0Q2hpbGQ7XG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgcmVjdHMgPSBsYXN0ID8gY2xpZW50UmVjdHNGb3IobGFzdCkgOiBbXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZWN0cy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgcmVjdCA9IHJlY3RzW3JlY3RzLmxlbmd0aCAtIDFdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCB3aWR0aCA9IGx0ciA/IHJlY3QucmlnaHQgLSBjaGlsZFJlY3QubGVmdCA6IGNoaWxkUmVjdC5yaWdodCAtIHJlY3QubGVmdDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAod2lkdGggPiB3aWRlc3QpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2lkZXN0ID0gd2lkdGg7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubWluV2lkdGggPSBjb250ZW50V2lkdGg7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubWluV2lkdGhGcm9tID0gcG9zO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm1pbldpZHRoVG8gPSBlbmQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChtZWFzdXJlQm91bmRzICYmIGkgPT0gdGlsZS5jaGlsZHJlbi5sZW5ndGggLSAxKVxuICAgICAgICAgICAgICAgICAgICBzcGFjZUFib3ZlICs9IG1lYXN1cmVCb3VuZHMuYm90dG9tIC0gY2hpbGRSZWN0LmJvdHRvbTtcbiAgICAgICAgICAgICAgICBwb3MgPSBlbmQgKyBjaGlsZC5icmVha0FmdGVyO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBzY2FuKHRoaXMudGlsZSwgMCwgbnVsbCk7XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuICAgIHRleHREaXJlY3Rpb25BdChwb3MpIHtcbiAgICAgICAgbGV0IHsgdGlsZSB9ID0gdGhpcy50aWxlLnJlc29sdmVCbG9jayhwb3MsIDEpO1xuICAgICAgICByZXR1cm4gZ2V0Q29tcHV0ZWRTdHlsZSh0aWxlLmRvbSkuZGlyZWN0aW9uID09IFwicnRsXCIgPyBEaXJlY3Rpb24uUlRMIDogRGlyZWN0aW9uLkxUUjtcbiAgICB9XG4gICAgbWVhc3VyZVRleHRTaXplKCkge1xuICAgICAgICBsZXQgbGluZU1lYXN1cmUgPSB0aGlzLnRpbGUuYmxvY2tUaWxlcyh0aWxlID0+IHtcbiAgICAgICAgICAgIGlmICh0aWxlLmlzTGluZSgpICYmIHRpbGUuY2hpbGRyZW4ubGVuZ3RoICYmIHRpbGUubGVuZ3RoIDw9IDIwKSB7XG4gICAgICAgICAgICAgICAgbGV0IHRvdGFsV2lkdGggPSAwLCB0ZXh0SGVpZ2h0O1xuICAgICAgICAgICAgICAgIGZvciAobGV0IGNoaWxkIG9mIHRpbGUuY2hpbGRyZW4pIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFjaGlsZC5pc1RleHQoKSB8fCAvW14gLX5dLy50ZXN0KGNoaWxkLnRleHQpKVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICAgICAgbGV0IHJlY3RzID0gY2xpZW50UmVjdHNGb3IoY2hpbGQuZG9tKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlY3RzLmxlbmd0aCAhPSAxKVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICAgICAgdG90YWxXaWR0aCArPSByZWN0c1swXS53aWR0aDtcbiAgICAgICAgICAgICAgICAgICAgdGV4dEhlaWdodCA9IHJlY3RzWzBdLmhlaWdodDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHRvdGFsV2lkdGgpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsaW5lSGVpZ2h0OiB0aWxlLmRvbS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5oZWlnaHQsXG4gICAgICAgICAgICAgICAgICAgICAgICBjaGFyV2lkdGg6IHRvdGFsV2lkdGggLyB0aWxlLmxlbmd0aCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRleHRIZWlnaHRcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIGlmIChsaW5lTWVhc3VyZSlcbiAgICAgICAgICAgIHJldHVybiBsaW5lTWVhc3VyZTtcbiAgICAgICAgLy8gSWYgbm8gd29ya2FibGUgbGluZSBleGlzdHMsIGZvcmNlIGEgbGF5b3V0IG9mIGEgbWVhc3VyYWJsZSBlbGVtZW50XG4gICAgICAgIGxldCBkdW1teSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiksIGxpbmVIZWlnaHQsIGNoYXJXaWR0aCwgdGV4dEhlaWdodDtcbiAgICAgICAgZHVtbXkuY2xhc3NOYW1lID0gXCJjbS1saW5lXCI7XG4gICAgICAgIGR1bW15LnN0eWxlLndpZHRoID0gXCI5OTk5OXB4XCI7XG4gICAgICAgIGR1bW15LnN0eWxlLnBvc2l0aW9uID0gXCJhYnNvbHV0ZVwiO1xuICAgICAgICBkdW1teS50ZXh0Q29udGVudCA9IFwiYWJjIGRlZiBnaGkgamtsIG1ubyBwcXIgc3R1XCI7XG4gICAgICAgIHRoaXMudmlldy5vYnNlcnZlci5pZ25vcmUoKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy50aWxlLmRvbS5hcHBlbmRDaGlsZChkdW1teSk7XG4gICAgICAgICAgICBsZXQgcmVjdCA9IGNsaWVudFJlY3RzRm9yKGR1bW15LmZpcnN0Q2hpbGQpWzBdO1xuICAgICAgICAgICAgbGluZUhlaWdodCA9IGR1bW15LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmhlaWdodDtcbiAgICAgICAgICAgIGNoYXJXaWR0aCA9IHJlY3QgJiYgcmVjdC53aWR0aCA/IHJlY3Qud2lkdGggLyAyNyA6IDc7XG4gICAgICAgICAgICB0ZXh0SGVpZ2h0ID0gcmVjdCAmJiByZWN0LmhlaWdodCA/IHJlY3QuaGVpZ2h0IDogbGluZUhlaWdodDtcbiAgICAgICAgICAgIGR1bW15LnJlbW92ZSgpO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHsgbGluZUhlaWdodCwgY2hhcldpZHRoLCB0ZXh0SGVpZ2h0IH07XG4gICAgfVxuICAgIGNvbXB1dGVCbG9ja0dhcERlY28oKSB7XG4gICAgICAgIGxldCBkZWNvID0gW10sIHZzID0gdGhpcy52aWV3LnZpZXdTdGF0ZTtcbiAgICAgICAgZm9yIChsZXQgcG9zID0gMCwgaSA9IDA7OyBpKyspIHtcbiAgICAgICAgICAgIGxldCBuZXh0ID0gaSA9PSB2cy52aWV3cG9ydHMubGVuZ3RoID8gbnVsbCA6IHZzLnZpZXdwb3J0c1tpXTtcbiAgICAgICAgICAgIGxldCBlbmQgPSBuZXh0ID8gbmV4dC5mcm9tIC0gMSA6IHRoaXMudmlldy5zdGF0ZS5kb2MubGVuZ3RoO1xuICAgICAgICAgICAgaWYgKGVuZCA+IHBvcykge1xuICAgICAgICAgICAgICAgIGxldCBoZWlnaHQgPSAodnMubGluZUJsb2NrQXQoZW5kKS5ib3R0b20gLSB2cy5saW5lQmxvY2tBdChwb3MpLnRvcCkgLyB0aGlzLnZpZXcuc2NhbGVZO1xuICAgICAgICAgICAgICAgIGRlY28ucHVzaChEZWNvcmF0aW9uLnJlcGxhY2Uoe1xuICAgICAgICAgICAgICAgICAgICB3aWRnZXQ6IG5ldyBCbG9ja0dhcFdpZGdldChoZWlnaHQpLFxuICAgICAgICAgICAgICAgICAgICBibG9jazogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgaW5jbHVzaXZlOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBpc0Jsb2NrR2FwOiB0cnVlLFxuICAgICAgICAgICAgICAgIH0pLnJhbmdlKHBvcywgZW5kKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIW5leHQpXG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBwb3MgPSBuZXh0LnRvICsgMTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gRGVjb3JhdGlvbi5zZXQoZGVjbyk7XG4gICAgfVxuICAgIHVwZGF0ZURlY28oKSB7XG4gICAgICAgIGxldCBpID0gMTtcbiAgICAgICAgbGV0IGFsbERlY28gPSB0aGlzLnZpZXcuc3RhdGUuZmFjZXQoZGVjb3JhdGlvbnMpLm1hcChkID0+IHtcbiAgICAgICAgICAgIGxldCBkeW5hbWljID0gdGhpcy5keW5hbWljRGVjb3JhdGlvbk1hcFtpKytdID0gdHlwZW9mIGQgPT0gXCJmdW5jdGlvblwiO1xuICAgICAgICAgICAgcmV0dXJuIGR5bmFtaWMgPyBkKHRoaXMudmlldykgOiBkO1xuICAgICAgICB9KTtcbiAgICAgICAgbGV0IGR5bmFtaWNPdXRlciA9IGZhbHNlLCBvdXRlckRlY28gPSB0aGlzLnZpZXcuc3RhdGUuZmFjZXQob3V0ZXJEZWNvcmF0aW9ucykubWFwKChkLCBpKSA9PiB7XG4gICAgICAgICAgICBsZXQgZHluYW1pYyA9IHR5cGVvZiBkID09IFwiZnVuY3Rpb25cIjtcbiAgICAgICAgICAgIGlmIChkeW5hbWljKVxuICAgICAgICAgICAgICAgIGR5bmFtaWNPdXRlciA9IHRydWU7XG4gICAgICAgICAgICByZXR1cm4gZHluYW1pYyA/IGQodGhpcy52aWV3KSA6IGQ7XG4gICAgICAgIH0pO1xuICAgICAgICBpZiAob3V0ZXJEZWNvLmxlbmd0aCkge1xuICAgICAgICAgICAgdGhpcy5keW5hbWljRGVjb3JhdGlvbk1hcFtpKytdID0gZHluYW1pY091dGVyO1xuICAgICAgICAgICAgYWxsRGVjby5wdXNoKFJhbmdlU2V0LmpvaW4ob3V0ZXJEZWNvKSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5kZWNvcmF0aW9ucyA9IFtcbiAgICAgICAgICAgIHRoaXMuZWRpdENvbnRleHRGb3JtYXR0aW5nLFxuICAgICAgICAgICAgLi4uYWxsRGVjbyxcbiAgICAgICAgICAgIHRoaXMuY29tcHV0ZUJsb2NrR2FwRGVjbygpLFxuICAgICAgICAgICAgdGhpcy52aWV3LnZpZXdTdGF0ZS5saW5lR2FwRGVjb1xuICAgICAgICBdO1xuICAgICAgICB3aGlsZSAoaSA8IHRoaXMuZGVjb3JhdGlvbnMubGVuZ3RoKVxuICAgICAgICAgICAgdGhpcy5keW5hbWljRGVjb3JhdGlvbk1hcFtpKytdID0gZmFsc2U7XG4gICAgICAgIHRoaXMuYmxvY2tXcmFwcGVycyA9IHRoaXMudmlldy5zdGF0ZS5mYWNldChibG9ja1dyYXBwZXJzKS5tYXAodiA9PiB0eXBlb2YgdiA9PSBcImZ1bmN0aW9uXCIgPyB2KHRoaXMudmlldykgOiB2KTtcbiAgICB9XG4gICAgc2Nyb2xsSW50b1ZpZXcodGFyZ2V0KSB7XG4gICAgICAgIGlmICh0YXJnZXQuaXNTbmFwc2hvdCkge1xuICAgICAgICAgICAgbGV0IHJlZiA9IHRoaXMudmlldy52aWV3U3RhdGUubGluZUJsb2NrQXQodGFyZ2V0LnJhbmdlLmhlYWQpO1xuICAgICAgICAgICAgdGhpcy52aWV3LnNjcm9sbERPTS5zY3JvbGxUb3AgPSByZWYudG9wIC0gdGFyZ2V0LnlNYXJnaW47XG4gICAgICAgICAgICB0aGlzLnZpZXcuc2Nyb2xsRE9NLnNjcm9sbExlZnQgPSB0YXJnZXQueE1hcmdpbjtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKGxldCBoYW5kbGVyIG9mIHRoaXMudmlldy5zdGF0ZS5mYWNldChzY3JvbGxIYW5kbGVyKSkge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBpZiAoaGFuZGxlcih0aGlzLnZpZXcsIHRhcmdldC5yYW5nZSwgdGFyZ2V0KSlcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgIGxvZ0V4Y2VwdGlvbih0aGlzLnZpZXcuc3RhdGUsIGUsIFwic2Nyb2xsIGhhbmRsZXJcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgbGV0IHsgcmFuZ2UgfSA9IHRhcmdldDtcbiAgICAgICAgbGV0IHJlY3QgPSB0aGlzLmNvb3Jkc0F0KHJhbmdlLmhlYWQsIHJhbmdlLmVtcHR5ID8gcmFuZ2UuYXNzb2MgOiByYW5nZS5oZWFkID4gcmFuZ2UuYW5jaG9yID8gLTEgOiAxKSwgb3RoZXI7XG4gICAgICAgIGlmICghcmVjdClcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgaWYgKCFyYW5nZS5lbXB0eSAmJiAob3RoZXIgPSB0aGlzLmNvb3Jkc0F0KHJhbmdlLmFuY2hvciwgcmFuZ2UuYW5jaG9yID4gcmFuZ2UuaGVhZCA/IC0xIDogMSkpKVxuICAgICAgICAgICAgcmVjdCA9IHsgbGVmdDogTWF0aC5taW4ocmVjdC5sZWZ0LCBvdGhlci5sZWZ0KSwgdG9wOiBNYXRoLm1pbihyZWN0LnRvcCwgb3RoZXIudG9wKSxcbiAgICAgICAgICAgICAgICByaWdodDogTWF0aC5tYXgocmVjdC5yaWdodCwgb3RoZXIucmlnaHQpLCBib3R0b206IE1hdGgubWF4KHJlY3QuYm90dG9tLCBvdGhlci5ib3R0b20pIH07XG4gICAgICAgIGxldCBtYXJnaW5zID0gZ2V0U2Nyb2xsTWFyZ2lucyh0aGlzLnZpZXcpO1xuICAgICAgICBsZXQgdGFyZ2V0UmVjdCA9IHtcbiAgICAgICAgICAgIGxlZnQ6IHJlY3QubGVmdCAtIG1hcmdpbnMubGVmdCwgdG9wOiByZWN0LnRvcCAtIG1hcmdpbnMudG9wLFxuICAgICAgICAgICAgcmlnaHQ6IHJlY3QucmlnaHQgKyBtYXJnaW5zLnJpZ2h0LCBib3R0b206IHJlY3QuYm90dG9tICsgbWFyZ2lucy5ib3R0b21cbiAgICAgICAgfTtcbiAgICAgICAgbGV0IHsgb2Zmc2V0V2lkdGgsIG9mZnNldEhlaWdodCB9ID0gdGhpcy52aWV3LnNjcm9sbERPTTtcbiAgICAgICAgc2Nyb2xsUmVjdEludG9WaWV3KHRoaXMudmlldy5zY3JvbGxET00sIHRhcmdldFJlY3QsIHJhbmdlLmhlYWQgPCByYW5nZS5hbmNob3IgPyAtMSA6IDEsIHRhcmdldC54LCB0YXJnZXQueSwgTWF0aC5tYXgoTWF0aC5taW4odGFyZ2V0LnhNYXJnaW4sIG9mZnNldFdpZHRoKSwgLW9mZnNldFdpZHRoKSwgTWF0aC5tYXgoTWF0aC5taW4odGFyZ2V0LnlNYXJnaW4sIG9mZnNldEhlaWdodCksIC1vZmZzZXRIZWlnaHQpLCB0aGlzLnZpZXcudGV4dERpcmVjdGlvbiA9PSBEaXJlY3Rpb24uTFRSKTtcbiAgICB9XG4gICAgbGluZUhhc1dpZGdldChwb3MpIHtcbiAgICAgICAgbGV0IHNjYW4gPSAoY2hpbGQpID0+IGNoaWxkLmlzV2lkZ2V0KCkgfHwgY2hpbGQuY2hpbGRyZW4uc29tZShzY2FuKTtcbiAgICAgICAgcmV0dXJuIHNjYW4odGhpcy50aWxlLnJlc29sdmVCbG9jayhwb3MsIDEpLnRpbGUpO1xuICAgIH1cbiAgICBkZXN0cm95KCkge1xuICAgICAgICBkZXN0cm95RHJvcHBlZCh0aGlzLnRpbGUpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGRlc3Ryb3lEcm9wcGVkKHRpbGUsIHJldXNlZCkge1xuICAgIGxldCByID0gcmV1c2VkID09PSBudWxsIHx8IHJldXNlZCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmV1c2VkLmdldCh0aWxlKTtcbiAgICBpZiAociAhPSAxIC8qIFJldXNlZC5GdWxsICovKSB7XG4gICAgICAgIGlmIChyID09IG51bGwpXG4gICAgICAgICAgICB0aWxlLmRlc3Ryb3koKTtcbiAgICAgICAgZm9yIChsZXQgY2ggb2YgdGlsZS5jaGlsZHJlbilcbiAgICAgICAgICAgIGRlc3Ryb3lEcm9wcGVkKGNoLCByZXVzZWQpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGJldHdlZW5VbmVkaXRhYmxlKHBvcykge1xuICAgIHJldHVybiBwb3Mubm9kZS5ub2RlVHlwZSA9PSAxICYmIHBvcy5ub2RlLmZpcnN0Q2hpbGQgJiZcbiAgICAgICAgKHBvcy5vZmZzZXQgPT0gMCB8fCBwb3Mubm9kZS5jaGlsZE5vZGVzW3Bvcy5vZmZzZXQgLSAxXS5jb250ZW50RWRpdGFibGUgPT0gXCJmYWxzZVwiKSAmJlxuICAgICAgICAocG9zLm9mZnNldCA9PSBwb3Mubm9kZS5jaGlsZE5vZGVzLmxlbmd0aCB8fCBwb3Mubm9kZS5jaGlsZE5vZGVzW3Bvcy5vZmZzZXRdLmNvbnRlbnRFZGl0YWJsZSA9PSBcImZhbHNlXCIpO1xufVxuZnVuY3Rpb24gZmluZENvbXBvc2l0aW9uTm9kZSh2aWV3LCBoZWFkUG9zKSB7XG4gICAgbGV0IHNlbCA9IHZpZXcub2JzZXJ2ZXIuc2VsZWN0aW9uUmFuZ2U7XG4gICAgaWYgKCFzZWwuZm9jdXNOb2RlKVxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICBsZXQgdGV4dEJlZm9yZSA9IHRleHROb2RlQmVmb3JlKHNlbC5mb2N1c05vZGUsIHNlbC5mb2N1c09mZnNldCk7XG4gICAgbGV0IHRleHRBZnRlciA9IHRleHROb2RlQWZ0ZXIoc2VsLmZvY3VzTm9kZSwgc2VsLmZvY3VzT2Zmc2V0KTtcbiAgICBsZXQgdGV4dE5vZGUgPSB0ZXh0QmVmb3JlIHx8IHRleHRBZnRlcjtcbiAgICBpZiAodGV4dEFmdGVyICYmIHRleHRCZWZvcmUgJiYgdGV4dEFmdGVyLm5vZGUgIT0gdGV4dEJlZm9yZS5ub2RlKSB7XG4gICAgICAgIGxldCB0aWxlQWZ0ZXIgPSBUaWxlLmdldCh0ZXh0QWZ0ZXIubm9kZSk7XG4gICAgICAgIGlmICghdGlsZUFmdGVyIHx8IHRpbGVBZnRlci5pc1RleHQoKSAmJiB0aWxlQWZ0ZXIudGV4dCAhPSB0ZXh0QWZ0ZXIubm9kZS5ub2RlVmFsdWUpIHtcbiAgICAgICAgICAgIHRleHROb2RlID0gdGV4dEFmdGVyO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHZpZXcuZG9jVmlldy5sYXN0Q29tcG9zaXRpb25BZnRlckN1cnNvcikge1xuICAgICAgICAgICAgbGV0IHRpbGVCZWZvcmUgPSBUaWxlLmdldCh0ZXh0QmVmb3JlLm5vZGUpO1xuICAgICAgICAgICAgaWYgKCEoIXRpbGVCZWZvcmUgfHwgdGlsZUJlZm9yZS5pc1RleHQoKSAmJiB0aWxlQmVmb3JlLnRleHQgIT0gdGV4dEJlZm9yZS5ub2RlLm5vZGVWYWx1ZSkpXG4gICAgICAgICAgICAgICAgdGV4dE5vZGUgPSB0ZXh0QWZ0ZXI7XG4gICAgICAgIH1cbiAgICB9XG4gICAgdmlldy5kb2NWaWV3Lmxhc3RDb21wb3NpdGlvbkFmdGVyQ3Vyc29yID0gdGV4dE5vZGUgIT0gdGV4dEJlZm9yZTtcbiAgICBpZiAoIXRleHROb2RlKVxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICBsZXQgZnJvbSA9IGhlYWRQb3MgLSB0ZXh0Tm9kZS5vZmZzZXQ7XG4gICAgcmV0dXJuIHsgZnJvbSwgdG86IGZyb20gKyB0ZXh0Tm9kZS5ub2RlLm5vZGVWYWx1ZS5sZW5ndGgsIG5vZGU6IHRleHROb2RlLm5vZGUgfTtcbn1cbmZ1bmN0aW9uIGZpbmRDb21wb3NpdGlvblJhbmdlKHZpZXcsIGNoYW5nZXMsIGhlYWRQb3MpIHtcbiAgICBsZXQgZm91bmQgPSBmaW5kQ29tcG9zaXRpb25Ob2RlKHZpZXcsIGhlYWRQb3MpO1xuICAgIGlmICghZm91bmQpXG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIGxldCB7IG5vZGU6IHRleHROb2RlLCBmcm9tLCB0byB9ID0gZm91bmQsIHRleHQgPSB0ZXh0Tm9kZS5ub2RlVmFsdWU7XG4gICAgLy8gRG9uJ3QgdHJ5IHRvIHByZXNlcnZlIG11bHRpLWxpbmUgY29tcG9zaXRpb25zXG4gICAgaWYgKC9bXFxuXFxyXS8udGVzdCh0ZXh0KSlcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgaWYgKHZpZXcuc3RhdGUuZG9jLnNsaWNlU3RyaW5nKGZvdW5kLmZyb20sIGZvdW5kLnRvKSAhPSB0ZXh0KVxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICBsZXQgaW52ID0gY2hhbmdlcy5pbnZlcnRlZERlc2M7XG4gICAgcmV0dXJuIHsgcmFuZ2U6IG5ldyBDaGFuZ2VkUmFuZ2UoaW52Lm1hcFBvcyhmcm9tKSwgaW52Lm1hcFBvcyh0byksIGZyb20sIHRvKSwgdGV4dDogdGV4dE5vZGUgfTtcbn1cbmZ1bmN0aW9uIG5leHRUb1VuZWRpdGFibGUobm9kZSwgb2Zmc2V0KSB7XG4gICAgaWYgKG5vZGUubm9kZVR5cGUgIT0gMSlcbiAgICAgICAgcmV0dXJuIDA7XG4gICAgcmV0dXJuIChvZmZzZXQgJiYgbm9kZS5jaGlsZE5vZGVzW29mZnNldCAtIDFdLmNvbnRlbnRFZGl0YWJsZSA9PSBcImZhbHNlXCIgPyAxIC8qIE5leHRUby5CZWZvcmUgKi8gOiAwKSB8XG4gICAgICAgIChvZmZzZXQgPCBub2RlLmNoaWxkTm9kZXMubGVuZ3RoICYmIG5vZGUuY2hpbGROb2Rlc1tvZmZzZXRdLmNvbnRlbnRFZGl0YWJsZSA9PSBcImZhbHNlXCIgPyAyIC8qIE5leHRUby5BZnRlciAqLyA6IDApO1xufVxubGV0IERlY29yYXRpb25Db21wYXJhdG9yJDEgPSBjbGFzcyBEZWNvcmF0aW9uQ29tcGFyYXRvciB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMuY2hhbmdlcyA9IFtdO1xuICAgIH1cbiAgICBjb21wYXJlUmFuZ2UoZnJvbSwgdG8pIHsgYWRkUmFuZ2UoZnJvbSwgdG8sIHRoaXMuY2hhbmdlcyk7IH1cbiAgICBjb21wYXJlUG9pbnQoZnJvbSwgdG8pIHsgYWRkUmFuZ2UoZnJvbSwgdG8sIHRoaXMuY2hhbmdlcyk7IH1cbiAgICBib3VuZENoYW5nZShwb3MpIHsgYWRkUmFuZ2UocG9zLCBwb3MsIHRoaXMuY2hhbmdlcyk7IH1cbn07XG5mdW5jdGlvbiBmaW5kQ2hhbmdlZERlY28oYSwgYiwgZGlmZikge1xuICAgIGxldCBjb21wID0gbmV3IERlY29yYXRpb25Db21wYXJhdG9yJDE7XG4gICAgUmFuZ2VTZXQuY29tcGFyZShhLCBiLCBkaWZmLCBjb21wKTtcbiAgICByZXR1cm4gY29tcC5jaGFuZ2VzO1xufVxuY2xhc3MgV3JhcHBlckNvbXBhcmF0b3Ige1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLmNoYW5nZXMgPSBbXTtcbiAgICB9XG4gICAgY29tcGFyZVJhbmdlKGZyb20sIHRvKSB7IGFkZFJhbmdlKGZyb20sIHRvLCB0aGlzLmNoYW5nZXMpOyB9XG4gICAgY29tcGFyZVBvaW50KCkgeyB9XG4gICAgYm91bmRDaGFuZ2UocG9zKSB7IGFkZFJhbmdlKHBvcywgcG9zLCB0aGlzLmNoYW5nZXMpOyB9XG59XG5mdW5jdGlvbiBmaW5kQ2hhbmdlZFdyYXBwZXJzKGEsIGIsIGRpZmYpIHtcbiAgICBsZXQgY29tcCA9IG5ldyBXcmFwcGVyQ29tcGFyYXRvcjtcbiAgICBSYW5nZVNldC5jb21wYXJlKGEsIGIsIGRpZmYsIGNvbXApO1xuICAgIHJldHVybiBjb21wLmNoYW5nZXM7XG59XG5mdW5jdGlvbiBpblVuZWRpdGFibGUobm9kZSwgaW5zaWRlKSB7XG4gICAgZm9yIChsZXQgY3VyID0gbm9kZTsgY3VyICYmIGN1ciAhPSBpbnNpZGU7IGN1ciA9IGN1ci5hc3NpZ25lZFNsb3QgfHwgY3VyLnBhcmVudE5vZGUpIHtcbiAgICAgICAgaWYgKGN1ci5ub2RlVHlwZSA9PSAxICYmIGN1ci5jb250ZW50RWRpdGFibGUgPT0gJ2ZhbHNlJykge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xufVxuZnVuY3Rpb24gdG91Y2hlc0NvbXBvc2l0aW9uKGNoYW5nZXMsIGNvbXBvc2l0aW9uKSB7XG4gICAgbGV0IHRvdWNoZWQgPSBmYWxzZTtcbiAgICBpZiAoY29tcG9zaXRpb24pXG4gICAgICAgIGNoYW5nZXMuaXRlckNoYW5nZWRSYW5nZXMoKGZyb20sIHRvKSA9PiB7XG4gICAgICAgICAgICBpZiAoZnJvbSA8IGNvbXBvc2l0aW9uLnRvICYmIHRvID4gY29tcG9zaXRpb24uZnJvbSlcbiAgICAgICAgICAgICAgICB0b3VjaGVkID0gdHJ1ZTtcbiAgICAgICAgfSk7XG4gICAgcmV0dXJuIHRvdWNoZWQ7XG59XG5jbGFzcyBCbG9ja0dhcFdpZGdldCBleHRlbmRzIFdpZGdldFR5cGUge1xuICAgIGNvbnN0cnVjdG9yKGhlaWdodCkge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLmhlaWdodCA9IGhlaWdodDtcbiAgICB9XG4gICAgdG9ET00oKSB7XG4gICAgICAgIGxldCBlbHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICBlbHQuY2xhc3NOYW1lID0gXCJjbS1nYXBcIjtcbiAgICAgICAgdGhpcy51cGRhdGVET00oZWx0KTtcbiAgICAgICAgcmV0dXJuIGVsdDtcbiAgICB9XG4gICAgZXEob3RoZXIpIHsgcmV0dXJuIG90aGVyLmhlaWdodCA9PSB0aGlzLmhlaWdodDsgfVxuICAgIHVwZGF0ZURPTShlbHQpIHtcbiAgICAgICAgZWx0LnN0eWxlLmhlaWdodCA9IHRoaXMuaGVpZ2h0ICsgXCJweFwiO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgZ2V0IGVkaXRhYmxlKCkgeyByZXR1cm4gdHJ1ZTsgfVxuICAgIGdldCBlc3RpbWF0ZWRIZWlnaHQoKSB7IHJldHVybiB0aGlzLmhlaWdodDsgfVxuICAgIGlnbm9yZUV2ZW50KCkgeyByZXR1cm4gZmFsc2U7IH1cbn1cblxuZnVuY3Rpb24gZ3JvdXBBdChzdGF0ZSwgcG9zLCBiaWFzID0gMSkge1xuICAgIGxldCBjYXRlZ29yaXplID0gc3RhdGUuY2hhckNhdGVnb3JpemVyKHBvcyk7XG4gICAgbGV0IGxpbmUgPSBzdGF0ZS5kb2MubGluZUF0KHBvcyksIGxpbmVQb3MgPSBwb3MgLSBsaW5lLmZyb207XG4gICAgaWYgKGxpbmUubGVuZ3RoID09IDApXG4gICAgICAgIHJldHVybiBFZGl0b3JTZWxlY3Rpb24uY3Vyc29yKHBvcyk7XG4gICAgaWYgKGxpbmVQb3MgPT0gMClcbiAgICAgICAgYmlhcyA9IDE7XG4gICAgZWxzZSBpZiAobGluZVBvcyA9PSBsaW5lLmxlbmd0aClcbiAgICAgICAgYmlhcyA9IC0xO1xuICAgIGxldCBmcm9tID0gbGluZVBvcywgdG8gPSBsaW5lUG9zO1xuICAgIGlmIChiaWFzIDwgMClcbiAgICAgICAgZnJvbSA9IGZpbmRDbHVzdGVyQnJlYWsobGluZS50ZXh0LCBsaW5lUG9zLCBmYWxzZSk7XG4gICAgZWxzZVxuICAgICAgICB0byA9IGZpbmRDbHVzdGVyQnJlYWsobGluZS50ZXh0LCBsaW5lUG9zKTtcbiAgICBsZXQgY2F0ID0gY2F0ZWdvcml6ZShsaW5lLnRleHQuc2xpY2UoZnJvbSwgdG8pKTtcbiAgICB3aGlsZSAoZnJvbSA+IDApIHtcbiAgICAgICAgbGV0IHByZXYgPSBmaW5kQ2x1c3RlckJyZWFrKGxpbmUudGV4dCwgZnJvbSwgZmFsc2UpO1xuICAgICAgICBpZiAoY2F0ZWdvcml6ZShsaW5lLnRleHQuc2xpY2UocHJldiwgZnJvbSkpICE9IGNhdClcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBmcm9tID0gcHJldjtcbiAgICB9XG4gICAgd2hpbGUgKHRvIDwgbGluZS5sZW5ndGgpIHtcbiAgICAgICAgbGV0IG5leHQgPSBmaW5kQ2x1c3RlckJyZWFrKGxpbmUudGV4dCwgdG8pO1xuICAgICAgICBpZiAoY2F0ZWdvcml6ZShsaW5lLnRleHQuc2xpY2UodG8sIG5leHQpKSAhPSBjYXQpXG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgdG8gPSBuZXh0O1xuICAgIH1cbiAgICByZXR1cm4gRWRpdG9yU2VsZWN0aW9uLnJhbmdlKGZyb20gKyBsaW5lLmZyb20sIHRvICsgbGluZS5mcm9tKTtcbn1cbmZ1bmN0aW9uIHBvc0F0Q29vcmRzSW1wcmVjaXNlKHZpZXcsIGNvbnRlbnRSZWN0LCBibG9jaywgeCwgeSkge1xuICAgIGxldCBpbnRvID0gTWF0aC5yb3VuZCgoeCAtIGNvbnRlbnRSZWN0LmxlZnQpICogdmlldy5kZWZhdWx0Q2hhcmFjdGVyV2lkdGgpO1xuICAgIGlmICh2aWV3LmxpbmVXcmFwcGluZyAmJiBibG9jay5oZWlnaHQgPiB2aWV3LmRlZmF1bHRMaW5lSGVpZ2h0ICogMS41KSB7XG4gICAgICAgIGxldCB0ZXh0SGVpZ2h0ID0gdmlldy52aWV3U3RhdGUuaGVpZ2h0T3JhY2xlLnRleHRIZWlnaHQ7XG4gICAgICAgIGxldCBsaW5lID0gTWF0aC5mbG9vcigoeSAtIGJsb2NrLnRvcCAtICh2aWV3LmRlZmF1bHRMaW5lSGVpZ2h0IC0gdGV4dEhlaWdodCkgKiAwLjUpIC8gdGV4dEhlaWdodCk7XG4gICAgICAgIGludG8gKz0gbGluZSAqIHZpZXcudmlld1N0YXRlLmhlaWdodE9yYWNsZS5saW5lTGVuZ3RoO1xuICAgIH1cbiAgICBsZXQgY29udGVudCA9IHZpZXcuc3RhdGUuc2xpY2VEb2MoYmxvY2suZnJvbSwgYmxvY2sudG8pO1xuICAgIHJldHVybiBibG9jay5mcm9tICsgZmluZENvbHVtbihjb250ZW50LCBpbnRvLCB2aWV3LnN0YXRlLnRhYlNpemUpO1xufVxuZnVuY3Rpb24gYmxvY2tBdCh2aWV3LCBwb3MsIHNpZGUpIHtcbiAgICBsZXQgbGluZSA9IHZpZXcubGluZUJsb2NrQXQocG9zKTtcbiAgICBpZiAoQXJyYXkuaXNBcnJheShsaW5lLnR5cGUpKSB7XG4gICAgICAgIGxldCBiZXN0O1xuICAgICAgICBmb3IgKGxldCBsIG9mIGxpbmUudHlwZSkge1xuICAgICAgICAgICAgaWYgKGwuZnJvbSA+IHBvcylcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGlmIChsLnRvIDwgcG9zKVxuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgaWYgKGwuZnJvbSA8IHBvcyAmJiBsLnRvID4gcG9zKVxuICAgICAgICAgICAgICAgIHJldHVybiBsO1xuICAgICAgICAgICAgaWYgKCFiZXN0IHx8IChsLnR5cGUgPT0gQmxvY2tUeXBlLlRleHQgJiYgKGJlc3QudHlwZSAhPSBsLnR5cGUgfHwgKHNpZGUgPCAwID8gbC5mcm9tIDwgcG9zIDogbC50byA+IHBvcykpKSlcbiAgICAgICAgICAgICAgICBiZXN0ID0gbDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gYmVzdCB8fCBsaW5lO1xuICAgIH1cbiAgICByZXR1cm4gbGluZTtcbn1cbmZ1bmN0aW9uIG1vdmVUb0xpbmVCb3VuZGFyeSh2aWV3LCBzdGFydCwgZm9yd2FyZCwgaW5jbHVkZVdyYXApIHtcbiAgICBsZXQgbGluZSA9IGJsb2NrQXQodmlldywgc3RhcnQuaGVhZCwgc3RhcnQuYXNzb2MgfHwgLTEpO1xuICAgIGxldCBjb29yZHMgPSAhaW5jbHVkZVdyYXAgfHwgbGluZS50eXBlICE9IEJsb2NrVHlwZS5UZXh0IHx8ICEodmlldy5saW5lV3JhcHBpbmcgfHwgbGluZS53aWRnZXRMaW5lQnJlYWtzKSA/IG51bGxcbiAgICAgICAgOiB2aWV3LmNvb3Jkc0F0UG9zKHN0YXJ0LmFzc29jIDwgMCAmJiBzdGFydC5oZWFkID4gbGluZS5mcm9tID8gc3RhcnQuaGVhZCAtIDEgOiBzdGFydC5oZWFkKTtcbiAgICBpZiAoY29vcmRzKSB7XG4gICAgICAgIGxldCBlZGl0b3JSZWN0ID0gdmlldy5kb20uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICAgIGxldCBkaXJlY3Rpb24gPSB2aWV3LnRleHREaXJlY3Rpb25BdChsaW5lLmZyb20pO1xuICAgICAgICBsZXQgcG9zID0gdmlldy5wb3NBdENvb3Jkcyh7IHg6IGZvcndhcmQgPT0gKGRpcmVjdGlvbiA9PSBEaXJlY3Rpb24uTFRSKSA/IGVkaXRvclJlY3QucmlnaHQgLSAxIDogZWRpdG9yUmVjdC5sZWZ0ICsgMSxcbiAgICAgICAgICAgIHk6IChjb29yZHMudG9wICsgY29vcmRzLmJvdHRvbSkgLyAyIH0pO1xuICAgICAgICBpZiAocG9zICE9IG51bGwpXG4gICAgICAgICAgICByZXR1cm4gRWRpdG9yU2VsZWN0aW9uLmN1cnNvcihwb3MsIGZvcndhcmQgPyAtMSA6IDEpO1xuICAgIH1cbiAgICByZXR1cm4gRWRpdG9yU2VsZWN0aW9uLmN1cnNvcihmb3J3YXJkID8gbGluZS50byA6IGxpbmUuZnJvbSwgZm9yd2FyZCA/IC0xIDogMSk7XG59XG5mdW5jdGlvbiBtb3ZlQnlDaGFyKHZpZXcsIHN0YXJ0LCBmb3J3YXJkLCBieSkge1xuICAgIGxldCBsaW5lID0gdmlldy5zdGF0ZS5kb2MubGluZUF0KHN0YXJ0LmhlYWQpLCBzcGFucyA9IHZpZXcuYmlkaVNwYW5zKGxpbmUpO1xuICAgIGxldCBkaXJlY3Rpb24gPSB2aWV3LnRleHREaXJlY3Rpb25BdChsaW5lLmZyb20pO1xuICAgIGZvciAobGV0IGN1ciA9IHN0YXJ0LCBjaGVjayA9IG51bGw7Oykge1xuICAgICAgICBsZXQgbmV4dCA9IG1vdmVWaXN1YWxseShsaW5lLCBzcGFucywgZGlyZWN0aW9uLCBjdXIsIGZvcndhcmQpLCBjaGFyID0gbW92ZWRPdmVyO1xuICAgICAgICBpZiAoIW5leHQpIHtcbiAgICAgICAgICAgIGlmIChsaW5lLm51bWJlciA9PSAoZm9yd2FyZCA/IHZpZXcuc3RhdGUuZG9jLmxpbmVzIDogMSkpXG4gICAgICAgICAgICAgICAgcmV0dXJuIGN1cjtcbiAgICAgICAgICAgIGNoYXIgPSBcIlxcblwiO1xuICAgICAgICAgICAgbGluZSA9IHZpZXcuc3RhdGUuZG9jLmxpbmUobGluZS5udW1iZXIgKyAoZm9yd2FyZCA/IDEgOiAtMSkpO1xuICAgICAgICAgICAgc3BhbnMgPSB2aWV3LmJpZGlTcGFucyhsaW5lKTtcbiAgICAgICAgICAgIG5leHQgPSB2aWV3LnZpc3VhbExpbmVTaWRlKGxpbmUsICFmb3J3YXJkKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIWNoZWNrKSB7XG4gICAgICAgICAgICBpZiAoIWJ5KVxuICAgICAgICAgICAgICAgIHJldHVybiBuZXh0O1xuICAgICAgICAgICAgY2hlY2sgPSBieShjaGFyKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICghY2hlY2soY2hhcikpIHtcbiAgICAgICAgICAgIHJldHVybiBjdXI7XG4gICAgICAgIH1cbiAgICAgICAgY3VyID0gbmV4dDtcbiAgICB9XG59XG5mdW5jdGlvbiBieUdyb3VwKHZpZXcsIHBvcywgc3RhcnQpIHtcbiAgICBsZXQgY2F0ZWdvcml6ZSA9IHZpZXcuc3RhdGUuY2hhckNhdGVnb3JpemVyKHBvcyk7XG4gICAgbGV0IGNhdCA9IGNhdGVnb3JpemUoc3RhcnQpO1xuICAgIHJldHVybiAobmV4dCkgPT4ge1xuICAgICAgICBsZXQgbmV4dENhdCA9IGNhdGVnb3JpemUobmV4dCk7XG4gICAgICAgIGlmIChjYXQgPT0gQ2hhckNhdGVnb3J5LlNwYWNlKVxuICAgICAgICAgICAgY2F0ID0gbmV4dENhdDtcbiAgICAgICAgcmV0dXJuIGNhdCA9PSBuZXh0Q2F0O1xuICAgIH07XG59XG5mdW5jdGlvbiBtb3ZlVmVydGljYWxseSh2aWV3LCBzdGFydCwgZm9yd2FyZCwgZGlzdGFuY2UpIHtcbiAgICBsZXQgc3RhcnRQb3MgPSBzdGFydC5oZWFkLCBkaXIgPSBmb3J3YXJkID8gMSA6IC0xO1xuICAgIGlmIChzdGFydFBvcyA9PSAoZm9yd2FyZCA/IHZpZXcuc3RhdGUuZG9jLmxlbmd0aCA6IDApKVxuICAgICAgICByZXR1cm4gRWRpdG9yU2VsZWN0aW9uLmN1cnNvcihzdGFydFBvcywgc3RhcnQuYXNzb2MpO1xuICAgIGxldCBnb2FsID0gc3RhcnQuZ29hbENvbHVtbiwgc3RhcnRZO1xuICAgIGxldCByZWN0ID0gdmlldy5jb250ZW50RE9NLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgIGxldCBzdGFydENvb3JkcyA9IHZpZXcuY29vcmRzQXRQb3Moc3RhcnRQb3MsIHN0YXJ0LmFzc29jIHx8IC0xKSwgZG9jVG9wID0gdmlldy5kb2N1bWVudFRvcDtcbiAgICBpZiAoc3RhcnRDb29yZHMpIHtcbiAgICAgICAgaWYgKGdvYWwgPT0gbnVsbClcbiAgICAgICAgICAgIGdvYWwgPSBzdGFydENvb3Jkcy5sZWZ0IC0gcmVjdC5sZWZ0O1xuICAgICAgICBzdGFydFkgPSBkaXIgPCAwID8gc3RhcnRDb29yZHMudG9wIDogc3RhcnRDb29yZHMuYm90dG9tO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgbGV0IGxpbmUgPSB2aWV3LnZpZXdTdGF0ZS5saW5lQmxvY2tBdChzdGFydFBvcyk7XG4gICAgICAgIGlmIChnb2FsID09IG51bGwpXG4gICAgICAgICAgICBnb2FsID0gTWF0aC5taW4ocmVjdC5yaWdodCAtIHJlY3QubGVmdCwgdmlldy5kZWZhdWx0Q2hhcmFjdGVyV2lkdGggKiAoc3RhcnRQb3MgLSBsaW5lLmZyb20pKTtcbiAgICAgICAgc3RhcnRZID0gKGRpciA8IDAgPyBsaW5lLnRvcCA6IGxpbmUuYm90dG9tKSArIGRvY1RvcDtcbiAgICB9XG4gICAgbGV0IHJlc29sdmVkR29hbCA9IHJlY3QubGVmdCArIGdvYWw7XG4gICAgbGV0IGRpc3QgPSBkaXN0YW5jZSAhPT0gbnVsbCAmJiBkaXN0YW5jZSAhPT0gdm9pZCAwID8gZGlzdGFuY2UgOiAodmlldy52aWV3U3RhdGUuaGVpZ2h0T3JhY2xlLnRleHRIZWlnaHQgPj4gMSk7XG4gICAgZm9yIChsZXQgZXh0cmEgPSAwOzsgZXh0cmEgKz0gMTApIHtcbiAgICAgICAgbGV0IGN1clkgPSBzdGFydFkgKyAoZGlzdCArIGV4dHJhKSAqIGRpcjtcbiAgICAgICAgbGV0IHBvcyA9IHBvc0F0Q29vcmRzKHZpZXcsIHsgeDogcmVzb2x2ZWRHb2FsLCB5OiBjdXJZIH0sIGZhbHNlLCBkaXIpO1xuICAgICAgICByZXR1cm4gRWRpdG9yU2VsZWN0aW9uLmN1cnNvcihwb3MucG9zLCBwb3MuYXNzb2MsIHVuZGVmaW5lZCwgZ29hbCk7XG4gICAgfVxufVxuZnVuY3Rpb24gc2tpcEF0b21pY1JhbmdlcyhhdG9tcywgcG9zLCBiaWFzKSB7XG4gICAgZm9yICg7Oykge1xuICAgICAgICBsZXQgbW92ZWQgPSAwO1xuICAgICAgICBmb3IgKGxldCBzZXQgb2YgYXRvbXMpIHtcbiAgICAgICAgICAgIHNldC5iZXR3ZWVuKHBvcyAtIDEsIHBvcyArIDEsIChmcm9tLCB0bywgdmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAocG9zID4gZnJvbSAmJiBwb3MgPCB0bykge1xuICAgICAgICAgICAgICAgICAgICBsZXQgc2lkZSA9IG1vdmVkIHx8IGJpYXMgfHwgKHBvcyAtIGZyb20gPCB0byAtIHBvcyA/IC0xIDogMSk7XG4gICAgICAgICAgICAgICAgICAgIHBvcyA9IHNpZGUgPCAwID8gZnJvbSA6IHRvO1xuICAgICAgICAgICAgICAgICAgICBtb3ZlZCA9IHNpZGU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFtb3ZlZClcbiAgICAgICAgICAgIHJldHVybiBwb3M7XG4gICAgfVxufVxuZnVuY3Rpb24gc2tpcEF0b21zRm9yU2VsZWN0aW9uKGF0b21zLCBzZWwpIHtcbiAgICBsZXQgcmFuZ2VzID0gbnVsbDtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNlbC5yYW5nZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgbGV0IHJhbmdlID0gc2VsLnJhbmdlc1tpXSwgdXBkYXRlZCA9IG51bGw7XG4gICAgICAgIGlmIChyYW5nZS5lbXB0eSkge1xuICAgICAgICAgICAgbGV0IHBvcyA9IHNraXBBdG9taWNSYW5nZXMoYXRvbXMsIHJhbmdlLmZyb20sIDApO1xuICAgICAgICAgICAgaWYgKHBvcyAhPSByYW5nZS5mcm9tKVxuICAgICAgICAgICAgICAgIHVwZGF0ZWQgPSBFZGl0b3JTZWxlY3Rpb24uY3Vyc29yKHBvcywgLTEpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgbGV0IGZyb20gPSBza2lwQXRvbWljUmFuZ2VzKGF0b21zLCByYW5nZS5mcm9tLCAtMSk7XG4gICAgICAgICAgICBsZXQgdG8gPSBza2lwQXRvbWljUmFuZ2VzKGF0b21zLCByYW5nZS50bywgMSk7XG4gICAgICAgICAgICBpZiAoZnJvbSAhPSByYW5nZS5mcm9tIHx8IHRvICE9IHJhbmdlLnRvKVxuICAgICAgICAgICAgICAgIHVwZGF0ZWQgPSBFZGl0b3JTZWxlY3Rpb24ucmFuZ2UocmFuZ2UuZnJvbSA9PSByYW5nZS5hbmNob3IgPyBmcm9tIDogdG8sIHJhbmdlLmZyb20gPT0gcmFuZ2UuaGVhZCA/IGZyb20gOiB0byk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHVwZGF0ZWQpIHtcbiAgICAgICAgICAgIGlmICghcmFuZ2VzKVxuICAgICAgICAgICAgICAgIHJhbmdlcyA9IHNlbC5yYW5nZXMuc2xpY2UoKTtcbiAgICAgICAgICAgIHJhbmdlc1tpXSA9IHVwZGF0ZWQ7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHJhbmdlcyA/IEVkaXRvclNlbGVjdGlvbi5jcmVhdGUocmFuZ2VzLCBzZWwubWFpbkluZGV4KSA6IHNlbDtcbn1cbmZ1bmN0aW9uIHNraXBBdG9tcyh2aWV3LCBvbGRQb3MsIHBvcykge1xuICAgIGxldCBuZXdQb3MgPSBza2lwQXRvbWljUmFuZ2VzKHZpZXcuc3RhdGUuZmFjZXQoYXRvbWljUmFuZ2VzKS5tYXAoZiA9PiBmKHZpZXcpKSwgcG9zLmZyb20sIG9sZFBvcy5oZWFkID4gcG9zLmZyb20gPyAtMSA6IDEpO1xuICAgIHJldHVybiBuZXdQb3MgPT0gcG9zLmZyb20gPyBwb3MgOiBFZGl0b3JTZWxlY3Rpb24uY3Vyc29yKG5ld1BvcywgbmV3UG9zIDwgcG9zLmZyb20gPyAxIDogLTEpO1xufVxuY2xhc3MgUG9zQXNzb2Mge1xuICAgIGNvbnN0cnVjdG9yKHBvcywgYXNzb2MpIHtcbiAgICAgICAgdGhpcy5wb3MgPSBwb3M7XG4gICAgICAgIHRoaXMuYXNzb2MgPSBhc3NvYztcbiAgICB9XG59XG5mdW5jdGlvbiBwb3NBdENvb3Jkcyh2aWV3LCBjb29yZHMsIHByZWNpc2UsIHNjYW5ZKSB7XG4gICAgbGV0IGNvbnRlbnQgPSB2aWV3LmNvbnRlbnRET00uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCksIGRvY1RvcCA9IGNvbnRlbnQudG9wICsgdmlldy52aWV3U3RhdGUucGFkZGluZ1RvcDtcbiAgICBsZXQgeyB4LCB5IH0gPSBjb29yZHMsIHlPZmZzZXQgPSB5IC0gZG9jVG9wLCBibG9jaztcbiAgICAvLyBGaXJzdCBmaW5kIHRoZSBibG9jayBhdCB0aGUgZ2l2ZW4gWSBwb3NpdGlvbiwgaWYgYW55LiBJZiBzY2FuWSBpc1xuICAgIC8vIGdpdmVuICh1c2VkIGZvciB2ZXJ0aWNhbCBjdXJzb3IgbW90aW9uKSwgdHJ5IHRvIHNraXAgd2lkZ2V0cyBhbmRcbiAgICAvLyBsaW5lIHBhZGRpbmcuXG4gICAgZm9yICg7Oykge1xuICAgICAgICBpZiAoeU9mZnNldCA8IDApXG4gICAgICAgICAgICByZXR1cm4gbmV3IFBvc0Fzc29jKDAsIDEpO1xuICAgICAgICBpZiAoeU9mZnNldCA+IHZpZXcudmlld1N0YXRlLmRvY0hlaWdodClcbiAgICAgICAgICAgIHJldHVybiBuZXcgUG9zQXNzb2Modmlldy5zdGF0ZS5kb2MubGVuZ3RoLCAtMSk7XG4gICAgICAgIGJsb2NrID0gdmlldy5lbGVtZW50QXRIZWlnaHQoeU9mZnNldCk7XG4gICAgICAgIGlmIChzY2FuWSA9PSBudWxsKVxuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGlmIChibG9jay50eXBlID09IEJsb2NrVHlwZS5UZXh0KSB7XG4gICAgICAgICAgICAvLyBDaGVjayB3aGV0aGVyIHdlIGFyZW4ndCBsYW5kaW5nIHRoZSB0b3AvYm90dG9tIHBhZGRpbmcgb2YgdGhlIGxpbmVcbiAgICAgICAgICAgIGxldCByZWN0ID0gdmlldy5kb2NWaWV3LmNvb3Jkc0F0KHNjYW5ZIDwgMCA/IGJsb2NrLmZyb20gOiBibG9jay50bywgc2NhblkpO1xuICAgICAgICAgICAgaWYgKHJlY3QgJiYgKHNjYW5ZIDwgMCA/IHJlY3QudG9wIDw9IHlPZmZzZXQgKyBkb2NUb3AgOiByZWN0LmJvdHRvbSA+PSB5T2Zmc2V0ICsgZG9jVG9wKSlcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBsZXQgaGFsZkxpbmUgPSB2aWV3LnZpZXdTdGF0ZS5oZWlnaHRPcmFjbGUudGV4dEhlaWdodCAvIDI7XG4gICAgICAgIHlPZmZzZXQgPSBzY2FuWSA+IDAgPyBibG9jay5ib3R0b20gKyBoYWxmTGluZSA6IGJsb2NrLnRvcCAtIGhhbGZMaW5lO1xuICAgIH1cbiAgICAvLyBJZiBvdXRzaWRlIHRoZSB2aWV3cG9ydCwgcmV0dXJuIG51bGwgaWYgcHJlY2lzZT09dHJ1ZSwgYW5cbiAgICAvLyBlc3RpbWF0ZSBvdGhlcndpc2UuXG4gICAgaWYgKHZpZXcudmlld3BvcnQuZnJvbSA+PSBibG9jay50byB8fCB2aWV3LnZpZXdwb3J0LnRvIDw9IGJsb2NrLmZyb20pIHtcbiAgICAgICAgaWYgKHByZWNpc2UpXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgaWYgKGJsb2NrLnR5cGUgPT0gQmxvY2tUeXBlLlRleHQpIHtcbiAgICAgICAgICAgIGxldCBwb3MgPSBwb3NBdENvb3Jkc0ltcHJlY2lzZSh2aWV3LCBjb250ZW50LCBibG9jaywgeCwgeSk7XG4gICAgICAgICAgICByZXR1cm4gbmV3IFBvc0Fzc29jKHBvcywgcG9zID09IGJsb2NrLmZyb20gPyAxIDogLTEpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGlmIChibG9jay50eXBlICE9IEJsb2NrVHlwZS5UZXh0KVxuICAgICAgICByZXR1cm4geU9mZnNldCA8IChibG9jay50b3AgKyBibG9jay5ib3R0b20pIC8gMiA/IG5ldyBQb3NBc3NvYyhibG9jay5mcm9tLCAxKSA6IG5ldyBQb3NBc3NvYyhibG9jay50bywgLTEpO1xuICAgIC8vIEhlcmUgd2Uga25vdyB3ZSdyZSBpbiBhIGxpbmUsIHNvIHJ1biB0aGUgbG9naWMgZm9yIGlubGluZSBsYXlvdXRcbiAgICBsZXQgbGluZSA9IHZpZXcuZG9jVmlldy5saW5lQXQoYmxvY2suZnJvbSwgMik7XG4gICAgaWYgKCFsaW5lIHx8IGxpbmUubGVuZ3RoICE9IGJsb2NrLmxlbmd0aClcbiAgICAgICAgbGluZSA9IHZpZXcuZG9jVmlldy5saW5lQXQoYmxvY2suZnJvbSwgLTIpO1xuICAgIHJldHVybiBwb3NBdENvb3Jkc0lubGluZSh2aWV3LCBsaW5lLCBibG9jay5mcm9tLCB4LCB5KTtcbn1cbi8vIFNjYW4gdGhyb3VnaCB0aGUgcmVjdGFuZ2xlcyBmb3IgdGhlIGNvbnRlbnQgb2YgYSB0aWxlLCBmaW5kaW5nIHRoZVxuLy8gb25lIGNsb3Nlc3QgdG8gdGhlIGdpdmVuIGNvb3JkaW5hdGVzLCBwcmVmZXJpbmcgY2xvc2VuZXNzIGluIFkgb3ZlclxuLy8gY2xvc2VuZXNzIGluIFguXG4vL1xuLy8gSWYgdGhpcyBpcyBhIHRleHQgdGlsZSwgZ28gY2hhcmFjdGVyLWJ5LWNoYXJhY3Rlci4gRm9yIGxpbmUgb3IgbWFya1xuLy8gdGlsZXMsIGNoZWNrIGVhY2ggbm9uLXBvaW50LXdpZGdldCBjaGlsZCwgYW5kIGRlc2NlbmQgdGV4dCBvciBtYXJrXG4vLyB0aWxlcyB3aXRoIGEgcmVjdXJzaXZlIGNhbGwuXG4vL1xuLy8gRm9yIG5vbi13cmFwcGVkLCBwdXJlbHkgbGVmdC10by1yaWdodCB0ZXh0LCB0aGlzIGNvdWxkIHVzZSBhIGJpbmFyeVxuLy8gc2VhcmNoLiBCdXQgYmVjYXVzZSB0aGlzIHNlZW1zIHRvIGJlIGZhc3QgZW5vdWdoLCBmb3IgaG93IG9mdGVuIGl0XG4vLyBpcyBjYWxsZWQsIHRoZXJlJ3Mgbm90IGN1cnJlbnRseSBhIHNwZWNpYWxpemVkIGltcGxlbWVudGF0aW9uIGZvclxuLy8gdGhhdC5cbmZ1bmN0aW9uIHBvc0F0Q29vcmRzSW5saW5lKHZpZXcsIHRpbGUsIG9mZnNldCwgeCwgeSkge1xuICAgIGxldCBjbG9zZXN0ID0gLTEsIGNsb3Nlc3RSZWN0ID0gbnVsbDtcbiAgICBsZXQgZHhDbG9zZXN0ID0gMWU5LCBkeUNsb3Nlc3QgPSAxZTk7XG4gICAgbGV0IHJvd1RvcCA9IHksIHJvd0JvdCA9IHk7XG4gICAgbGV0IGNoZWNrUmVjdHMgPSAocmVjdHMsIGluZGV4KSA9PiB7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcmVjdHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGxldCByZWN0ID0gcmVjdHNbaV07XG4gICAgICAgICAgICBpZiAocmVjdC50b3AgPT0gcmVjdC5ib3R0b20pXG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICBsZXQgZHggPSByZWN0LmxlZnQgPiB4ID8gcmVjdC5sZWZ0IC0geCA6IHJlY3QucmlnaHQgPCB4ID8geCAtIHJlY3QucmlnaHQgOiAwO1xuICAgICAgICAgICAgbGV0IGR5ID0gcmVjdC50b3AgPiB5ID8gcmVjdC50b3AgLSB5IDogcmVjdC5ib3R0b20gPCB5ID8geSAtIHJlY3QuYm90dG9tIDogMDtcbiAgICAgICAgICAgIGlmIChyZWN0LnRvcCA8PSByb3dCb3QgJiYgcmVjdC5ib3R0b20gPj0gcm93VG9wKSB7XG4gICAgICAgICAgICAgICAgLy8gUmVjdGFuZ2xlIGlzIGluIHRoZSBjdXJyZW50IHJvd1xuICAgICAgICAgICAgICAgIHJvd1RvcCA9IE1hdGgubWluKHJlY3QudG9wLCByb3dUb3ApO1xuICAgICAgICAgICAgICAgIHJvd0JvdCA9IE1hdGgubWF4KHJlY3QuYm90dG9tLCByb3dCb3QpO1xuICAgICAgICAgICAgICAgIGR5ID0gMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChjbG9zZXN0IDwgMCB8fCAoZHkgLSBkeUNsb3Nlc3QgfHwgZHggLSBkeENsb3Nlc3QpIDwgMCkge1xuICAgICAgICAgICAgICAgIGlmIChjbG9zZXN0ID49IDAgJiYgZHlDbG9zZXN0ICYmIGR4Q2xvc2VzdCA8IGR4ICYmXG4gICAgICAgICAgICAgICAgICAgIGNsb3Nlc3RSZWN0LnRvcCA8PSByb3dCb3QgLSAyICYmIGNsb3Nlc3RSZWN0LmJvdHRvbSA+PSByb3dUb3AgKyAyKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIFJldHJvYWN0aXZlbHkgc2V0IGR5IHRvIDAgaWYgdGhlIGN1cnJlbnQgbWF0Y2ggaXMgaW4gdGhpcyByb3cuXG4gICAgICAgICAgICAgICAgICAgIGR5Q2xvc2VzdCA9IDA7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBjbG9zZXN0ID0gaW5kZXg7XG4gICAgICAgICAgICAgICAgICAgIGR4Q2xvc2VzdCA9IGR4O1xuICAgICAgICAgICAgICAgICAgICBkeUNsb3Nlc3QgPSBkeTtcbiAgICAgICAgICAgICAgICAgICAgY2xvc2VzdFJlY3QgPSByZWN0O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG4gICAgaWYgKHRpbGUuaXNUZXh0KCkpIHtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aWxlLmxlbmd0aDspIHtcbiAgICAgICAgICAgIGxldCBuZXh0ID0gZmluZENsdXN0ZXJCcmVhayh0aWxlLnRleHQsIGkpO1xuICAgICAgICAgICAgY2hlY2tSZWN0cyh0ZXh0UmFuZ2UodGlsZS5kb20sIGksIG5leHQpLmdldENsaWVudFJlY3RzKCksIGkpO1xuICAgICAgICAgICAgaWYgKCFkeENsb3Nlc3QgJiYgIWR5Q2xvc2VzdClcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGkgPSBuZXh0O1xuICAgICAgICB9XG4gICAgICAgIGxldCBhZnRlciA9ICh4ID4gKGNsb3Nlc3RSZWN0LmxlZnQgKyBjbG9zZXN0UmVjdC5yaWdodCkgLyAyKSA9PSAoZGlyQXQodmlldywgY2xvc2VzdCArIG9mZnNldCkgPT0gRGlyZWN0aW9uLkxUUik7XG4gICAgICAgIHJldHVybiBhZnRlciA/IG5ldyBQb3NBc3NvYyhvZmZzZXQgKyBmaW5kQ2x1c3RlckJyZWFrKHRpbGUudGV4dCwgY2xvc2VzdCksIC0xKSA6IG5ldyBQb3NBc3NvYyhvZmZzZXQgKyBjbG9zZXN0LCAxKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGlmICghdGlsZS5sZW5ndGgpXG4gICAgICAgICAgICByZXR1cm4gbmV3IFBvc0Fzc29jKG9mZnNldCwgMSk7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGlsZS5jaGlsZHJlbi5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgbGV0IGNoaWxkID0gdGlsZS5jaGlsZHJlbltpXTtcbiAgICAgICAgICAgIGlmIChjaGlsZC5mbGFncyAmIDQ4IC8qIFRpbGVGbGFnLlBvaW50V2lkZ2V0ICovKVxuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgbGV0IHJlY3RzID0gKGNoaWxkLmRvbS5ub2RlVHlwZSA9PSAxID8gY2hpbGQuZG9tIDogdGV4dFJhbmdlKGNoaWxkLmRvbSwgMCwgY2hpbGQubGVuZ3RoKSkuZ2V0Q2xpZW50UmVjdHMoKTtcbiAgICAgICAgICAgIGNoZWNrUmVjdHMocmVjdHMsIGkpO1xuICAgICAgICAgICAgaWYgKCFkeENsb3Nlc3QgJiYgIWR5Q2xvc2VzdClcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBsZXQgaW5uZXIgPSB0aWxlLmNoaWxkcmVuW2Nsb3Nlc3RdLCBpbm5lck9mZiA9IHRpbGUucG9zQmVmb3JlKGlubmVyLCBvZmZzZXQpO1xuICAgICAgICBpZiAoaW5uZXIuaXNDb21wb3NpdGUoKSB8fCBpbm5lci5pc1RleHQoKSlcbiAgICAgICAgICAgIHJldHVybiBwb3NBdENvb3Jkc0lubGluZSh2aWV3LCBpbm5lciwgaW5uZXJPZmYsIE1hdGgubWF4KGNsb3Nlc3RSZWN0LmxlZnQsIE1hdGgubWluKGNsb3Nlc3RSZWN0LnJpZ2h0LCB4KSksIHkpO1xuICAgICAgICBsZXQgYWZ0ZXIgPSAoeCA+IChjbG9zZXN0UmVjdC5sZWZ0ICsgY2xvc2VzdFJlY3QucmlnaHQpIC8gMikgPT0gKGRpckF0KHZpZXcsIGNsb3Nlc3QgKyBvZmZzZXQpID09IERpcmVjdGlvbi5MVFIpO1xuICAgICAgICByZXR1cm4gYWZ0ZXIgPyBuZXcgUG9zQXNzb2MoaW5uZXJPZmYgKyBpbm5lci5sZW5ndGgsIC0xKSA6IG5ldyBQb3NBc3NvYyhpbm5lck9mZiwgMSk7XG4gICAgfVxufVxuZnVuY3Rpb24gZGlyQXQodmlldywgcG9zKSB7XG4gICAgbGV0IGxpbmUgPSB2aWV3LnN0YXRlLmRvYy5saW5lQXQocG9zKSwgc3BhbnMgPSB2aWV3LmJpZGlTcGFucyhsaW5lKTtcbiAgICByZXR1cm4gc3BhbnNbQmlkaVNwYW4uZmluZCh2aWV3LmJpZGlTcGFucyhsaW5lKSwgcG9zIC0gbGluZS5mcm9tLCAtMSwgMSldLmRpcjtcbn1cblxuY29uc3QgTGluZUJyZWFrUGxhY2Vob2xkZXIgPSBcIlxcdWZmZmZcIjtcbmNsYXNzIERPTVJlYWRlciB7XG4gICAgY29uc3RydWN0b3IocG9pbnRzLCB2aWV3KSB7XG4gICAgICAgIHRoaXMucG9pbnRzID0gcG9pbnRzO1xuICAgICAgICB0aGlzLnZpZXcgPSB2aWV3O1xuICAgICAgICB0aGlzLnRleHQgPSBcIlwiO1xuICAgICAgICB0aGlzLmxpbmVTZXBhcmF0b3IgPSB2aWV3LnN0YXRlLmZhY2V0KEVkaXRvclN0YXRlLmxpbmVTZXBhcmF0b3IpO1xuICAgIH1cbiAgICBhcHBlbmQodGV4dCkge1xuICAgICAgICB0aGlzLnRleHQgKz0gdGV4dDtcbiAgICB9XG4gICAgbGluZUJyZWFrKCkge1xuICAgICAgICB0aGlzLnRleHQgKz0gTGluZUJyZWFrUGxhY2Vob2xkZXI7XG4gICAgfVxuICAgIHJlYWRSYW5nZShzdGFydCwgZW5kKSB7XG4gICAgICAgIGlmICghc3RhcnQpXG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgbGV0IHBhcmVudCA9IHN0YXJ0LnBhcmVudE5vZGU7XG4gICAgICAgIGZvciAobGV0IGN1ciA9IHN0YXJ0OzspIHtcbiAgICAgICAgICAgIHRoaXMuZmluZFBvaW50QmVmb3JlKHBhcmVudCwgY3VyKTtcbiAgICAgICAgICAgIGxldCBvbGRMZW4gPSB0aGlzLnRleHQubGVuZ3RoO1xuICAgICAgICAgICAgdGhpcy5yZWFkTm9kZShjdXIpO1xuICAgICAgICAgICAgbGV0IHRpbGUgPSBUaWxlLmdldChjdXIpLCBuZXh0ID0gY3VyLm5leHRTaWJsaW5nO1xuICAgICAgICAgICAgaWYgKG5leHQgPT0gZW5kKSB7XG4gICAgICAgICAgICAgICAgaWYgKCh0aWxlID09PSBudWxsIHx8IHRpbGUgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHRpbGUuYnJlYWtBZnRlcikgJiYgIW5leHQgJiYgcGFyZW50ICE9IHRoaXMudmlldy5jb250ZW50RE9NKVxuICAgICAgICAgICAgICAgICAgICB0aGlzLmxpbmVCcmVhaygpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbGV0IG5leHRUaWxlID0gVGlsZS5nZXQobmV4dCk7XG4gICAgICAgICAgICBpZiAoKHRpbGUgJiYgbmV4dFRpbGUgPyB0aWxlLmJyZWFrQWZ0ZXIgOlxuICAgICAgICAgICAgICAgICh0aWxlID8gdGlsZS5icmVha0FmdGVyIDogaXNCbG9ja0VsZW1lbnQoY3VyKSkgfHxcbiAgICAgICAgICAgICAgICAgICAgKGlzQmxvY2tFbGVtZW50KG5leHQpICYmIChjdXIubm9kZU5hbWUgIT0gXCJCUlwiIHx8ICh0aWxlID09PSBudWxsIHx8IHRpbGUgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHRpbGUuaXNXaWRnZXQoKSkpICYmIHRoaXMudGV4dC5sZW5ndGggPiBvbGRMZW4pKSAmJlxuICAgICAgICAgICAgICAgICFpc0VtcHR5VG9FbmQobmV4dCwgZW5kKSlcbiAgICAgICAgICAgICAgICB0aGlzLmxpbmVCcmVhaygpO1xuICAgICAgICAgICAgY3VyID0gbmV4dDtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmZpbmRQb2ludEJlZm9yZShwYXJlbnQsIGVuZCk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICByZWFkVGV4dE5vZGUobm9kZSkge1xuICAgICAgICBsZXQgdGV4dCA9IG5vZGUubm9kZVZhbHVlO1xuICAgICAgICBmb3IgKGxldCBwb2ludCBvZiB0aGlzLnBvaW50cylcbiAgICAgICAgICAgIGlmIChwb2ludC5ub2RlID09IG5vZGUpXG4gICAgICAgICAgICAgICAgcG9pbnQucG9zID0gdGhpcy50ZXh0Lmxlbmd0aCArIE1hdGgubWluKHBvaW50Lm9mZnNldCwgdGV4dC5sZW5ndGgpO1xuICAgICAgICBmb3IgKGxldCBvZmYgPSAwLCByZSA9IHRoaXMubGluZVNlcGFyYXRvciA/IG51bGwgOiAvXFxyXFxuP3xcXG4vZzs7KSB7XG4gICAgICAgICAgICBsZXQgbmV4dEJyZWFrID0gLTEsIGJyZWFrU2l6ZSA9IDEsIG07XG4gICAgICAgICAgICBpZiAodGhpcy5saW5lU2VwYXJhdG9yKSB7XG4gICAgICAgICAgICAgICAgbmV4dEJyZWFrID0gdGV4dC5pbmRleE9mKHRoaXMubGluZVNlcGFyYXRvciwgb2ZmKTtcbiAgICAgICAgICAgICAgICBicmVha1NpemUgPSB0aGlzLmxpbmVTZXBhcmF0b3IubGVuZ3RoO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAobSA9IHJlLmV4ZWModGV4dCkpIHtcbiAgICAgICAgICAgICAgICBuZXh0QnJlYWsgPSBtLmluZGV4O1xuICAgICAgICAgICAgICAgIGJyZWFrU2l6ZSA9IG1bMF0ubGVuZ3RoO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5hcHBlbmQodGV4dC5zbGljZShvZmYsIG5leHRCcmVhayA8IDAgPyB0ZXh0Lmxlbmd0aCA6IG5leHRCcmVhaykpO1xuICAgICAgICAgICAgaWYgKG5leHRCcmVhayA8IDApXG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB0aGlzLmxpbmVCcmVhaygpO1xuICAgICAgICAgICAgaWYgKGJyZWFrU2l6ZSA+IDEpXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgcG9pbnQgb2YgdGhpcy5wb2ludHMpXG4gICAgICAgICAgICAgICAgICAgIGlmIChwb2ludC5ub2RlID09IG5vZGUgJiYgcG9pbnQucG9zID4gdGhpcy50ZXh0Lmxlbmd0aClcbiAgICAgICAgICAgICAgICAgICAgICAgIHBvaW50LnBvcyAtPSBicmVha1NpemUgLSAxO1xuICAgICAgICAgICAgb2ZmID0gbmV4dEJyZWFrICsgYnJlYWtTaXplO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJlYWROb2RlKG5vZGUpIHtcbiAgICAgICAgbGV0IHRpbGUgPSBUaWxlLmdldChub2RlKTtcbiAgICAgICAgbGV0IGZyb21WaWV3ID0gdGlsZSAmJiB0aWxlLm92ZXJyaWRlRE9NVGV4dDtcbiAgICAgICAgaWYgKGZyb21WaWV3ICE9IG51bGwpIHtcbiAgICAgICAgICAgIHRoaXMuZmluZFBvaW50SW5zaWRlKG5vZGUsIGZyb21WaWV3Lmxlbmd0aCk7XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gZnJvbVZpZXcuaXRlcigpOyAhaS5uZXh0KCkuZG9uZTspIHtcbiAgICAgICAgICAgICAgICBpZiAoaS5saW5lQnJlYWspXG4gICAgICAgICAgICAgICAgICAgIHRoaXMubGluZUJyZWFrKCk7XG4gICAgICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgICAgICB0aGlzLmFwcGVuZChpLnZhbHVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChub2RlLm5vZGVUeXBlID09IDMpIHtcbiAgICAgICAgICAgIHRoaXMucmVhZFRleHROb2RlKG5vZGUpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKG5vZGUubm9kZU5hbWUgPT0gXCJCUlwiKSB7XG4gICAgICAgICAgICBpZiAobm9kZS5uZXh0U2libGluZylcbiAgICAgICAgICAgICAgICB0aGlzLmxpbmVCcmVhaygpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKG5vZGUubm9kZVR5cGUgPT0gMSkge1xuICAgICAgICAgICAgdGhpcy5yZWFkUmFuZ2Uobm9kZS5maXJzdENoaWxkLCBudWxsKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBmaW5kUG9pbnRCZWZvcmUobm9kZSwgbmV4dCkge1xuICAgICAgICBmb3IgKGxldCBwb2ludCBvZiB0aGlzLnBvaW50cylcbiAgICAgICAgICAgIGlmIChwb2ludC5ub2RlID09IG5vZGUgJiYgbm9kZS5jaGlsZE5vZGVzW3BvaW50Lm9mZnNldF0gPT0gbmV4dClcbiAgICAgICAgICAgICAgICBwb2ludC5wb3MgPSB0aGlzLnRleHQubGVuZ3RoO1xuICAgIH1cbiAgICBmaW5kUG9pbnRJbnNpZGUobm9kZSwgbGVuZ3RoKSB7XG4gICAgICAgIGZvciAobGV0IHBvaW50IG9mIHRoaXMucG9pbnRzKVxuICAgICAgICAgICAgaWYgKG5vZGUubm9kZVR5cGUgPT0gMyA/IHBvaW50Lm5vZGUgPT0gbm9kZSA6IG5vZGUuY29udGFpbnMocG9pbnQubm9kZSkpXG4gICAgICAgICAgICAgICAgcG9pbnQucG9zID0gdGhpcy50ZXh0Lmxlbmd0aCArIChpc0F0RW5kKG5vZGUsIHBvaW50Lm5vZGUsIHBvaW50Lm9mZnNldCkgPyBsZW5ndGggOiAwKTtcbiAgICB9XG59XG5mdW5jdGlvbiBpc0F0RW5kKHBhcmVudCwgbm9kZSwgb2Zmc2V0KSB7XG4gICAgZm9yICg7Oykge1xuICAgICAgICBpZiAoIW5vZGUgfHwgb2Zmc2V0IDwgbWF4T2Zmc2V0KG5vZGUpKVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICBpZiAobm9kZSA9PSBwYXJlbnQpXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgb2Zmc2V0ID0gZG9tSW5kZXgobm9kZSkgKyAxO1xuICAgICAgICBub2RlID0gbm9kZS5wYXJlbnROb2RlO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGlzRW1wdHlUb0VuZChub2RlLCBlbmQpIHtcbiAgICBsZXQgd2lkZ2V0cztcbiAgICBmb3IgKDs7IG5vZGUgPSBub2RlLm5leHRTaWJsaW5nKSB7XG4gICAgICAgIGlmIChub2RlID09IGVuZCB8fCAhbm9kZSlcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBsZXQgdmlldyA9IFRpbGUuZ2V0KG5vZGUpO1xuICAgICAgICBpZiAoISh2aWV3ID09PSBudWxsIHx8IHZpZXcgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHZpZXcuaXNXaWRnZXQoKSkpXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIGlmICh2aWV3KVxuICAgICAgICAgICAgKHdpZGdldHMgfHwgKHdpZGdldHMgPSBbXSkpLnB1c2godmlldyk7XG4gICAgfVxuICAgIGlmICh3aWRnZXRzKVxuICAgICAgICBmb3IgKGxldCB3IG9mIHdpZGdldHMpIHtcbiAgICAgICAgICAgIGxldCBvdmVycmlkZSA9IHcub3ZlcnJpZGVET01UZXh0O1xuICAgICAgICAgICAgaWYgKG92ZXJyaWRlID09PSBudWxsIHx8IG92ZXJyaWRlID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvdmVycmlkZS5sZW5ndGgpXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgcmV0dXJuIHRydWU7XG59XG5jbGFzcyBET01Qb2ludCB7XG4gICAgY29uc3RydWN0b3Iobm9kZSwgb2Zmc2V0KSB7XG4gICAgICAgIHRoaXMubm9kZSA9IG5vZGU7XG4gICAgICAgIHRoaXMub2Zmc2V0ID0gb2Zmc2V0O1xuICAgICAgICB0aGlzLnBvcyA9IC0xO1xuICAgIH1cbn1cblxuY2xhc3MgRE9NQ2hhbmdlIHtcbiAgICBjb25zdHJ1Y3Rvcih2aWV3LCBzdGFydCwgZW5kLCB0eXBlT3Zlcikge1xuICAgICAgICB0aGlzLnR5cGVPdmVyID0gdHlwZU92ZXI7XG4gICAgICAgIHRoaXMuYm91bmRzID0gbnVsbDtcbiAgICAgICAgdGhpcy50ZXh0ID0gXCJcIjtcbiAgICAgICAgdGhpcy5kb21DaGFuZ2VkID0gc3RhcnQgPiAtMTtcbiAgICAgICAgbGV0IHsgaW1wcmVjaXNlSGVhZDogaUhlYWQsIGltcHJlY2lzZUFuY2hvcjogaUFuY2hvciB9ID0gdmlldy5kb2NWaWV3O1xuICAgICAgICBpZiAodmlldy5zdGF0ZS5yZWFkT25seSAmJiBzdGFydCA+IC0xKSB7XG4gICAgICAgICAgICAvLyBJZ25vcmUgY2hhbmdlcyB3aGVuIHRoZSBlZGl0b3IgaXMgcmVhZC1vbmx5XG4gICAgICAgICAgICB0aGlzLm5ld1NlbCA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoc3RhcnQgPiAtMSAmJiAodGhpcy5ib3VuZHMgPSBkb21Cb3VuZHNBcm91bmQodmlldy5kb2NWaWV3LnRpbGUsIHN0YXJ0LCBlbmQsIDApKSkge1xuICAgICAgICAgICAgbGV0IHNlbFBvaW50cyA9IGlIZWFkIHx8IGlBbmNob3IgPyBbXSA6IHNlbGVjdGlvblBvaW50cyh2aWV3KTtcbiAgICAgICAgICAgIGxldCByZWFkZXIgPSBuZXcgRE9NUmVhZGVyKHNlbFBvaW50cywgdmlldyk7XG4gICAgICAgICAgICByZWFkZXIucmVhZFJhbmdlKHRoaXMuYm91bmRzLnN0YXJ0RE9NLCB0aGlzLmJvdW5kcy5lbmRET00pO1xuICAgICAgICAgICAgdGhpcy50ZXh0ID0gcmVhZGVyLnRleHQ7XG4gICAgICAgICAgICB0aGlzLm5ld1NlbCA9IHNlbGVjdGlvbkZyb21Qb2ludHMoc2VsUG9pbnRzLCB0aGlzLmJvdW5kcy5mcm9tKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGxldCBkb21TZWwgPSB2aWV3Lm9ic2VydmVyLnNlbGVjdGlvblJhbmdlO1xuICAgICAgICAgICAgbGV0IGhlYWQgPSBpSGVhZCAmJiBpSGVhZC5ub2RlID09IGRvbVNlbC5mb2N1c05vZGUgJiYgaUhlYWQub2Zmc2V0ID09IGRvbVNlbC5mb2N1c09mZnNldCB8fFxuICAgICAgICAgICAgICAgICFjb250YWlucyh2aWV3LmNvbnRlbnRET00sIGRvbVNlbC5mb2N1c05vZGUpXG4gICAgICAgICAgICAgICAgPyB2aWV3LnN0YXRlLnNlbGVjdGlvbi5tYWluLmhlYWRcbiAgICAgICAgICAgICAgICA6IHZpZXcuZG9jVmlldy5wb3NGcm9tRE9NKGRvbVNlbC5mb2N1c05vZGUsIGRvbVNlbC5mb2N1c09mZnNldCk7XG4gICAgICAgICAgICBsZXQgYW5jaG9yID0gaUFuY2hvciAmJiBpQW5jaG9yLm5vZGUgPT0gZG9tU2VsLmFuY2hvck5vZGUgJiYgaUFuY2hvci5vZmZzZXQgPT0gZG9tU2VsLmFuY2hvck9mZnNldCB8fFxuICAgICAgICAgICAgICAgICFjb250YWlucyh2aWV3LmNvbnRlbnRET00sIGRvbVNlbC5hbmNob3JOb2RlKVxuICAgICAgICAgICAgICAgID8gdmlldy5zdGF0ZS5zZWxlY3Rpb24ubWFpbi5hbmNob3JcbiAgICAgICAgICAgICAgICA6IHZpZXcuZG9jVmlldy5wb3NGcm9tRE9NKGRvbVNlbC5hbmNob3JOb2RlLCBkb21TZWwuYW5jaG9yT2Zmc2V0KTtcbiAgICAgICAgICAgIC8vIGlPUyB3aWxsIHJlZnVzZSB0byBzZWxlY3QgdGhlIGJsb2NrIGdhcHMgd2hlbiBkb2luZ1xuICAgICAgICAgICAgLy8gc2VsZWN0LWFsbC5cbiAgICAgICAgICAgIC8vIENocm9tZSB3aWxsIHB1dCB0aGUgc2VsZWN0aW9uICppbnNpZGUqIHRoZW0sIGNvbmZ1c2luZ1xuICAgICAgICAgICAgLy8gcG9zRnJvbURPTVxuICAgICAgICAgICAgbGV0IHZwID0gdmlldy52aWV3cG9ydDtcbiAgICAgICAgICAgIGlmICgoYnJvd3Nlci5pb3MgfHwgYnJvd3Nlci5jaHJvbWUpICYmIHZpZXcuc3RhdGUuc2VsZWN0aW9uLm1haW4uZW1wdHkgJiYgaGVhZCAhPSBhbmNob3IgJiZcbiAgICAgICAgICAgICAgICAodnAuZnJvbSA+IDAgfHwgdnAudG8gPCB2aWV3LnN0YXRlLmRvYy5sZW5ndGgpKSB7XG4gICAgICAgICAgICAgICAgbGV0IGZyb20gPSBNYXRoLm1pbihoZWFkLCBhbmNob3IpLCB0byA9IE1hdGgubWF4KGhlYWQsIGFuY2hvcik7XG4gICAgICAgICAgICAgICAgbGV0IG9mZkZyb20gPSB2cC5mcm9tIC0gZnJvbSwgb2ZmVG8gPSB2cC50byAtIHRvO1xuICAgICAgICAgICAgICAgIGlmICgob2ZmRnJvbSA9PSAwIHx8IG9mZkZyb20gPT0gMSB8fCBmcm9tID09IDApICYmIChvZmZUbyA9PSAwIHx8IG9mZlRvID09IC0xIHx8IHRvID09IHZpZXcuc3RhdGUuZG9jLmxlbmd0aCkpIHtcbiAgICAgICAgICAgICAgICAgICAgaGVhZCA9IDA7XG4gICAgICAgICAgICAgICAgICAgIGFuY2hvciA9IHZpZXcuc3RhdGUuZG9jLmxlbmd0aDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodmlldy5pbnB1dFN0YXRlLmNvbXBvc2luZyA+IC0xICYmIHZpZXcuc3RhdGUuc2VsZWN0aW9uLnJhbmdlcy5sZW5ndGggPiAxKVxuICAgICAgICAgICAgICAgIHRoaXMubmV3U2VsID0gdmlldy5zdGF0ZS5zZWxlY3Rpb24ucmVwbGFjZVJhbmdlKEVkaXRvclNlbGVjdGlvbi5yYW5nZShhbmNob3IsIGhlYWQpKTtcbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICB0aGlzLm5ld1NlbCA9IEVkaXRvclNlbGVjdGlvbi5zaW5nbGUoYW5jaG9yLCBoZWFkKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbmZ1bmN0aW9uIGRvbUJvdW5kc0Fyb3VuZCh0aWxlLCBmcm9tLCB0bywgb2Zmc2V0KSB7XG4gICAgaWYgKHRpbGUuaXNDb21wb3NpdGUoKSkge1xuICAgICAgICBsZXQgZnJvbUkgPSAtMSwgZnJvbVN0YXJ0ID0gLTEsIHRvSSA9IC0xLCB0b0VuZCA9IC0xO1xuICAgICAgICBmb3IgKGxldCBpID0gMCwgcG9zID0gb2Zmc2V0LCBwcmV2RW5kID0gb2Zmc2V0OyBpIDwgdGlsZS5jaGlsZHJlbi5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgbGV0IGNoaWxkID0gdGlsZS5jaGlsZHJlbltpXSwgZW5kID0gcG9zICsgY2hpbGQubGVuZ3RoO1xuICAgICAgICAgICAgaWYgKHBvcyA8IGZyb20gJiYgZW5kID4gdG8pXG4gICAgICAgICAgICAgICAgcmV0dXJuIGRvbUJvdW5kc0Fyb3VuZChjaGlsZCwgZnJvbSwgdG8sIHBvcyk7XG4gICAgICAgICAgICBpZiAoZW5kID49IGZyb20gJiYgZnJvbUkgPT0gLTEpIHtcbiAgICAgICAgICAgICAgICBmcm9tSSA9IGk7XG4gICAgICAgICAgICAgICAgZnJvbVN0YXJ0ID0gcG9zO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHBvcyA+IHRvICYmIGNoaWxkLmRvbS5wYXJlbnROb2RlID09IHRpbGUuZG9tKSB7XG4gICAgICAgICAgICAgICAgdG9JID0gaTtcbiAgICAgICAgICAgICAgICB0b0VuZCA9IHByZXZFbmQ7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBwcmV2RW5kID0gZW5kO1xuICAgICAgICAgICAgcG9zID0gZW5kICsgY2hpbGQuYnJlYWtBZnRlcjtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4geyBmcm9tOiBmcm9tU3RhcnQsIHRvOiB0b0VuZCA8IDAgPyBvZmZzZXQgKyB0aWxlLmxlbmd0aCA6IHRvRW5kLFxuICAgICAgICAgICAgc3RhcnRET006IChmcm9tSSA/IHRpbGUuY2hpbGRyZW5bZnJvbUkgLSAxXS5kb20ubmV4dFNpYmxpbmcgOiBudWxsKSB8fCB0aWxlLmRvbS5maXJzdENoaWxkLFxuICAgICAgICAgICAgZW5kRE9NOiB0b0kgPCB0aWxlLmNoaWxkcmVuLmxlbmd0aCAmJiB0b0kgPj0gMCA/IHRpbGUuY2hpbGRyZW5bdG9JXS5kb20gOiBudWxsIH07XG4gICAgfVxuICAgIGVsc2UgaWYgKHRpbGUuaXNUZXh0KCkpIHtcbiAgICAgICAgcmV0dXJuIHsgZnJvbTogb2Zmc2V0LCB0bzogb2Zmc2V0ICsgdGlsZS5sZW5ndGgsIHN0YXJ0RE9NOiB0aWxlLmRvbSwgZW5kRE9NOiB0aWxlLmRvbS5uZXh0U2libGluZyB9O1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxufVxuZnVuY3Rpb24gYXBwbHlET01DaGFuZ2UodmlldywgZG9tQ2hhbmdlKSB7XG4gICAgbGV0IGNoYW5nZTtcbiAgICBsZXQgeyBuZXdTZWwgfSA9IGRvbUNoYW5nZSwgc2VsID0gdmlldy5zdGF0ZS5zZWxlY3Rpb24ubWFpbjtcbiAgICBsZXQgbGFzdEtleSA9IHZpZXcuaW5wdXRTdGF0ZS5sYXN0S2V5VGltZSA+IERhdGUubm93KCkgLSAxMDAgPyB2aWV3LmlucHV0U3RhdGUubGFzdEtleUNvZGUgOiAtMTtcbiAgICBpZiAoZG9tQ2hhbmdlLmJvdW5kcykge1xuICAgICAgICBsZXQgeyBmcm9tLCB0byB9ID0gZG9tQ2hhbmdlLmJvdW5kcztcbiAgICAgICAgbGV0IHByZWZlcnJlZFBvcyA9IHNlbC5mcm9tLCBwcmVmZXJyZWRTaWRlID0gbnVsbDtcbiAgICAgICAgLy8gUHJlZmVyIGFuY2hvcmluZyB0byBlbmQgd2hlbiBCYWNrc3BhY2UgaXMgcHJlc3NlZCAob3IsIG9uXG4gICAgICAgIC8vIEFuZHJvaWQsIHdoZW4gc29tZXRoaW5nIHdhcyBkZWxldGVkKVxuICAgICAgICBpZiAobGFzdEtleSA9PT0gOCB8fCBicm93c2VyLmFuZHJvaWQgJiYgZG9tQ2hhbmdlLnRleHQubGVuZ3RoIDwgdG8gLSBmcm9tKSB7XG4gICAgICAgICAgICBwcmVmZXJyZWRQb3MgPSBzZWwudG87XG4gICAgICAgICAgICBwcmVmZXJyZWRTaWRlID0gXCJlbmRcIjtcbiAgICAgICAgfVxuICAgICAgICBsZXQgZGlmZiA9IGZpbmREaWZmKHZpZXcuc3RhdGUuZG9jLnNsaWNlU3RyaW5nKGZyb20sIHRvLCBMaW5lQnJlYWtQbGFjZWhvbGRlciksIGRvbUNoYW5nZS50ZXh0LCBwcmVmZXJyZWRQb3MgLSBmcm9tLCBwcmVmZXJyZWRTaWRlKTtcbiAgICAgICAgaWYgKGRpZmYpIHtcbiAgICAgICAgICAgIC8vIENocm9tZSBpbnNlcnRzIHR3byBuZXdsaW5lcyB3aGVuIHByZXNzaW5nIHNoaWZ0LWVudGVyIGF0IHRoZVxuICAgICAgICAgICAgLy8gZW5kIG9mIGEgbGluZS4gRG9tQ2hhbmdlIGRyb3BzIG9uZSBvZiB0aG9zZS5cbiAgICAgICAgICAgIGlmIChicm93c2VyLmNocm9tZSAmJiBsYXN0S2V5ID09IDEzICYmXG4gICAgICAgICAgICAgICAgZGlmZi50b0IgPT0gZGlmZi5mcm9tICsgMiAmJiBkb21DaGFuZ2UudGV4dC5zbGljZShkaWZmLmZyb20sIGRpZmYudG9CKSA9PSBMaW5lQnJlYWtQbGFjZWhvbGRlciArIExpbmVCcmVha1BsYWNlaG9sZGVyKVxuICAgICAgICAgICAgICAgIGRpZmYudG9CLS07XG4gICAgICAgICAgICBjaGFuZ2UgPSB7IGZyb206IGZyb20gKyBkaWZmLmZyb20sIHRvOiBmcm9tICsgZGlmZi50b0EsXG4gICAgICAgICAgICAgICAgaW5zZXJ0OiBUZXh0Lm9mKGRvbUNoYW5nZS50ZXh0LnNsaWNlKGRpZmYuZnJvbSwgZGlmZi50b0IpLnNwbGl0KExpbmVCcmVha1BsYWNlaG9sZGVyKSkgfTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBlbHNlIGlmIChuZXdTZWwgJiYgKCF2aWV3Lmhhc0ZvY3VzICYmIHZpZXcuc3RhdGUuZmFjZXQoZWRpdGFibGUpIHx8IG5ld1NlbC5tYWluLmVxKHNlbCkpKSB7XG4gICAgICAgIG5ld1NlbCA9IG51bGw7XG4gICAgfVxuICAgIGlmICghY2hhbmdlICYmICFuZXdTZWwpXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICBpZiAoIWNoYW5nZSAmJiBkb21DaGFuZ2UudHlwZU92ZXIgJiYgIXNlbC5lbXB0eSAmJiBuZXdTZWwgJiYgbmV3U2VsLm1haW4uZW1wdHkpIHtcbiAgICAgICAgLy8gSGV1cmlzdGljIHRvIG5vdGljZSB0eXBpbmcgb3ZlciBhIHNlbGVjdGVkIGNoYXJhY3RlclxuICAgICAgICBjaGFuZ2UgPSB7IGZyb206IHNlbC5mcm9tLCB0bzogc2VsLnRvLCBpbnNlcnQ6IHZpZXcuc3RhdGUuZG9jLnNsaWNlKHNlbC5mcm9tLCBzZWwudG8pIH07XG4gICAgfVxuICAgIGVsc2UgaWYgKChicm93c2VyLm1hYyB8fCBicm93c2VyLmFuZHJvaWQpICYmIGNoYW5nZSAmJiBjaGFuZ2UuZnJvbSA9PSBjaGFuZ2UudG8gJiYgY2hhbmdlLmZyb20gPT0gc2VsLmhlYWQgLSAxICYmXG4gICAgICAgIC9eXFwuID8kLy50ZXN0KGNoYW5nZS5pbnNlcnQudG9TdHJpbmcoKSkgJiYgdmlldy5jb250ZW50RE9NLmdldEF0dHJpYnV0ZShcImF1dG9jb3JyZWN0XCIpID09IFwib2ZmXCIpIHtcbiAgICAgICAgLy8gRGV0ZWN0IGluc2VydC1wZXJpb2Qtb24tZG91YmxlLXNwYWNlIE1hYyBhbmQgQW5kcm9pZCBiZWhhdmlvcixcbiAgICAgICAgLy8gYW5kIHRyYW5zZm9ybSBpdCBpbnRvIGEgcmVndWxhciBzcGFjZSBpbnNlcnQuXG4gICAgICAgIGlmIChuZXdTZWwgJiYgY2hhbmdlLmluc2VydC5sZW5ndGggPT0gMilcbiAgICAgICAgICAgIG5ld1NlbCA9IEVkaXRvclNlbGVjdGlvbi5zaW5nbGUobmV3U2VsLm1haW4uYW5jaG9yIC0gMSwgbmV3U2VsLm1haW4uaGVhZCAtIDEpO1xuICAgICAgICBjaGFuZ2UgPSB7IGZyb206IGNoYW5nZS5mcm9tLCB0bzogY2hhbmdlLnRvLCBpbnNlcnQ6IFRleHQub2YoW2NoYW5nZS5pbnNlcnQudG9TdHJpbmcoKS5yZXBsYWNlKFwiLlwiLCBcIiBcIildKSB9O1xuICAgIH1cbiAgICBlbHNlIGlmIChjaGFuZ2UgJiYgY2hhbmdlLmZyb20gPj0gc2VsLmZyb20gJiYgY2hhbmdlLnRvIDw9IHNlbC50byAmJlxuICAgICAgICAoY2hhbmdlLmZyb20gIT0gc2VsLmZyb20gfHwgY2hhbmdlLnRvICE9IHNlbC50bykgJiZcbiAgICAgICAgKHNlbC50byAtIHNlbC5mcm9tKSAtIChjaGFuZ2UudG8gLSBjaGFuZ2UuZnJvbSkgPD0gNCkge1xuICAgICAgICAvLyBJZiB0aGUgY2hhbmdlIGlzIGluc2lkZSB0aGUgc2VsZWN0aW9uIGFuZCBjb3ZlcnMgbW9zdCBvZiBpdCxcbiAgICAgICAgLy8gYXNzdW1lIGl0IGlzIGEgc2VsZWN0aW9uIHJlcGxhY2UgKHdpdGggaWRlbnRpY2FsIGNoYXJhY3RlcnMgYXRcbiAgICAgICAgLy8gdGhlIHN0YXJ0L2VuZCBub3QgaW5jbHVkZWQgaW4gdGhlIGRpZmYpXG4gICAgICAgIGNoYW5nZSA9IHtcbiAgICAgICAgICAgIGZyb206IHNlbC5mcm9tLCB0bzogc2VsLnRvLFxuICAgICAgICAgICAgaW5zZXJ0OiB2aWV3LnN0YXRlLmRvYy5zbGljZShzZWwuZnJvbSwgY2hhbmdlLmZyb20pLmFwcGVuZChjaGFuZ2UuaW5zZXJ0KS5hcHBlbmQodmlldy5zdGF0ZS5kb2Muc2xpY2UoY2hhbmdlLnRvLCBzZWwudG8pKVxuICAgICAgICB9O1xuICAgIH1cbiAgICBlbHNlIGlmICh2aWV3LnN0YXRlLmRvYy5saW5lQXQoc2VsLmZyb20pLnRvIDwgc2VsLnRvICYmIHZpZXcuZG9jVmlldy5saW5lSGFzV2lkZ2V0KHNlbC50bykgJiZcbiAgICAgICAgdmlldy5pbnB1dFN0YXRlLmluc2VydGluZ1RleHRBdCA+IERhdGUubm93KCkgLSA1MCkge1xuICAgICAgICAvLyBGb3IgYSBjcm9zcy1saW5lIGluc2VydGlvbiwgQ2hyb21lIGFuZCBTYWZhcmkgd2lsbCBjcnVkZWx5IHRha2VcbiAgICAgICAgLy8gdGhlIHRleHQgb2YgdGhlIGxpbmUgYWZ0ZXIgdGhlIHNlbGVjdGlvbiwgZmxhdHRlbmluZyBhbnlcbiAgICAgICAgLy8gd2lkZ2V0cywgYW5kIG1vdmUgaXQgaW50byB0aGUgam9pbmVkIGxpbmUuIFRoaXMgdHJpZXMgdG8gZGV0ZWN0XG4gICAgICAgIC8vIHN1Y2ggYSBzaXR1YXRpb24sIGFuZCByZXBsYWNlcyB0aGUgY2hhbmdlIHdpdGggYSBzZWxlY3Rpb25cbiAgICAgICAgLy8gcmVwbGFjZSBvZiB0aGUgdGV4dCBwcm92aWRlZCBieSB0aGUgYmVmb3JlaW5wdXQgZXZlbnQuXG4gICAgICAgIGNoYW5nZSA9IHtcbiAgICAgICAgICAgIGZyb206IHNlbC5mcm9tLCB0bzogc2VsLnRvLFxuICAgICAgICAgICAgaW5zZXJ0OiB2aWV3LnN0YXRlLnRvVGV4dCh2aWV3LmlucHV0U3RhdGUuaW5zZXJ0aW5nVGV4dClcbiAgICAgICAgfTtcbiAgICB9XG4gICAgZWxzZSBpZiAoYnJvd3Nlci5jaHJvbWUgJiYgY2hhbmdlICYmIGNoYW5nZS5mcm9tID09IGNoYW5nZS50byAmJiBjaGFuZ2UuZnJvbSA9PSBzZWwuaGVhZCAmJlxuICAgICAgICBjaGFuZ2UuaW5zZXJ0LnRvU3RyaW5nKCkgPT0gXCJcXG4gXCIgJiYgdmlldy5saW5lV3JhcHBpbmcpIHtcbiAgICAgICAgLy8gSW4gQ2hyb21lLCBpZiB5b3UgaW5zZXJ0IGEgc3BhY2UgYXQgdGhlIHN0YXJ0IG9mIGEgd3JhcHBlZFxuICAgICAgICAvLyBsaW5lLCBpdCB3aWxsIGFjdHVhbGx5IGluc2VydCBhIG5ld2xpbmUgYW5kIGEgc3BhY2UsIGNhdXNpbmcgYVxuICAgICAgICAvLyBib2d1cyBuZXcgbGluZSB0byBiZSBjcmVhdGVkIGluIENvZGVNaXJyb3IgKCM5NjgpXG4gICAgICAgIGlmIChuZXdTZWwpXG4gICAgICAgICAgICBuZXdTZWwgPSBFZGl0b3JTZWxlY3Rpb24uc2luZ2xlKG5ld1NlbC5tYWluLmFuY2hvciAtIDEsIG5ld1NlbC5tYWluLmhlYWQgLSAxKTtcbiAgICAgICAgY2hhbmdlID0geyBmcm9tOiBzZWwuZnJvbSwgdG86IHNlbC50bywgaW5zZXJ0OiBUZXh0Lm9mKFtcIiBcIl0pIH07XG4gICAgfVxuICAgIGlmIChjaGFuZ2UpIHtcbiAgICAgICAgcmV0dXJuIGFwcGx5RE9NQ2hhbmdlSW5uZXIodmlldywgY2hhbmdlLCBuZXdTZWwsIGxhc3RLZXkpO1xuICAgIH1cbiAgICBlbHNlIGlmIChuZXdTZWwgJiYgIW5ld1NlbC5tYWluLmVxKHNlbCkpIHtcbiAgICAgICAgbGV0IHNjcm9sbEludG9WaWV3ID0gZmFsc2UsIHVzZXJFdmVudCA9IFwic2VsZWN0XCI7XG4gICAgICAgIGlmICh2aWV3LmlucHV0U3RhdGUubGFzdFNlbGVjdGlvblRpbWUgPiBEYXRlLm5vdygpIC0gNTApIHtcbiAgICAgICAgICAgIGlmICh2aWV3LmlucHV0U3RhdGUubGFzdFNlbGVjdGlvbk9yaWdpbiA9PSBcInNlbGVjdFwiKVxuICAgICAgICAgICAgICAgIHNjcm9sbEludG9WaWV3ID0gdHJ1ZTtcbiAgICAgICAgICAgIHVzZXJFdmVudCA9IHZpZXcuaW5wdXRTdGF0ZS5sYXN0U2VsZWN0aW9uT3JpZ2luO1xuICAgICAgICAgICAgaWYgKHVzZXJFdmVudCA9PSBcInNlbGVjdC5wb2ludGVyXCIpXG4gICAgICAgICAgICAgICAgbmV3U2VsID0gc2tpcEF0b21zRm9yU2VsZWN0aW9uKHZpZXcuc3RhdGUuZmFjZXQoYXRvbWljUmFuZ2VzKS5tYXAoZiA9PiBmKHZpZXcpKSwgbmV3U2VsKTtcbiAgICAgICAgfVxuICAgICAgICB2aWV3LmRpc3BhdGNoKHsgc2VsZWN0aW9uOiBuZXdTZWwsIHNjcm9sbEludG9WaWV3LCB1c2VyRXZlbnQgfSk7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGFwcGx5RE9NQ2hhbmdlSW5uZXIodmlldywgY2hhbmdlLCBuZXdTZWwsIGxhc3RLZXkgPSAtMSkge1xuICAgIGlmIChicm93c2VyLmlvcyAmJiB2aWV3LmlucHV0U3RhdGUuZmx1c2hJT1NLZXkoY2hhbmdlKSlcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgbGV0IHNlbCA9IHZpZXcuc3RhdGUuc2VsZWN0aW9uLm1haW47XG4gICAgLy8gQW5kcm9pZCBicm93c2VycyBkb24ndCBmaXJlIHJlYXNvbmFibGUga2V5IGV2ZW50cyBmb3IgZW50ZXIsXG4gICAgLy8gYmFja3NwYWNlLCBvciBkZWxldGUuIFNvIHRoaXMgZGV0ZWN0cyBjaGFuZ2VzIHRoYXQgbG9vayBsaWtlXG4gICAgLy8gdGhleSdyZSBjYXVzZWQgYnkgdGhvc2Uga2V5cywgYW5kIHJlaW50ZXJwcmV0cyB0aGVtIGFzIGtleVxuICAgIC8vIGV2ZW50cy4gKFNvbWUgb2YgdGhlc2Uga2V5cyBhcmUgYWxzbyBoYW5kbGVkIGJ5IGJlZm9yZWlucHV0XG4gICAgLy8gZXZlbnRzIGFuZCB0aGUgcGVuZGluZ0FuZHJvaWRLZXkgbWVjaGFuaXNtLCBidXQgdGhhdCdzIG5vdFxuICAgIC8vIHJlbGlhYmxlIGluIGFsbCBzaXR1YXRpb25zLilcbiAgICBpZiAoYnJvd3Nlci5hbmRyb2lkICYmXG4gICAgICAgICgoY2hhbmdlLnRvID09IHNlbC50byAmJlxuICAgICAgICAgICAgLy8gR0JvYXJkIHdpbGwgc29tZXRpbWVzIHJlbW92ZSBhIHNwYWNlIGl0IGp1c3QgaW5zZXJ0ZWRcbiAgICAgICAgICAgIC8vIGFmdGVyIGEgY29tcGxldGlvbiB3aGVuIHlvdSBwcmVzcyBlbnRlclxuICAgICAgICAgICAgKGNoYW5nZS5mcm9tID09IHNlbC5mcm9tIHx8IGNoYW5nZS5mcm9tID09IHNlbC5mcm9tIC0gMSAmJiB2aWV3LnN0YXRlLnNsaWNlRG9jKGNoYW5nZS5mcm9tLCBzZWwuZnJvbSkgPT0gXCIgXCIpICYmXG4gICAgICAgICAgICBjaGFuZ2UuaW5zZXJ0Lmxlbmd0aCA9PSAxICYmIGNoYW5nZS5pbnNlcnQubGluZXMgPT0gMiAmJlxuICAgICAgICAgICAgZGlzcGF0Y2hLZXkodmlldy5jb250ZW50RE9NLCBcIkVudGVyXCIsIDEzKSkgfHxcbiAgICAgICAgICAgICgoY2hhbmdlLmZyb20gPT0gc2VsLmZyb20gLSAxICYmIGNoYW5nZS50byA9PSBzZWwudG8gJiYgY2hhbmdlLmluc2VydC5sZW5ndGggPT0gMCB8fFxuICAgICAgICAgICAgICAgIGxhc3RLZXkgPT0gOCAmJiBjaGFuZ2UuaW5zZXJ0Lmxlbmd0aCA8IGNoYW5nZS50byAtIGNoYW5nZS5mcm9tICYmIGNoYW5nZS50byA+IHNlbC5oZWFkKSAmJlxuICAgICAgICAgICAgICAgIGRpc3BhdGNoS2V5KHZpZXcuY29udGVudERPTSwgXCJCYWNrc3BhY2VcIiwgOCkpIHx8XG4gICAgICAgICAgICAoY2hhbmdlLmZyb20gPT0gc2VsLmZyb20gJiYgY2hhbmdlLnRvID09IHNlbC50byArIDEgJiYgY2hhbmdlLmluc2VydC5sZW5ndGggPT0gMCAmJlxuICAgICAgICAgICAgICAgIGRpc3BhdGNoS2V5KHZpZXcuY29udGVudERPTSwgXCJEZWxldGVcIiwgNDYpKSkpXG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIGxldCB0ZXh0ID0gY2hhbmdlLmluc2VydC50b1N0cmluZygpO1xuICAgIGlmICh2aWV3LmlucHV0U3RhdGUuY29tcG9zaW5nID49IDApXG4gICAgICAgIHZpZXcuaW5wdXRTdGF0ZS5jb21wb3NpbmcrKztcbiAgICBsZXQgZGVmYXVsdFRyO1xuICAgIGxldCBkZWZhdWx0SW5zZXJ0ID0gKCkgPT4gZGVmYXVsdFRyIHx8IChkZWZhdWx0VHIgPSBhcHBseURlZmF1bHRJbnNlcnQodmlldywgY2hhbmdlLCBuZXdTZWwpKTtcbiAgICBpZiAoIXZpZXcuc3RhdGUuZmFjZXQoaW5wdXRIYW5kbGVyKS5zb21lKGggPT4gaCh2aWV3LCBjaGFuZ2UuZnJvbSwgY2hhbmdlLnRvLCB0ZXh0LCBkZWZhdWx0SW5zZXJ0KSkpXG4gICAgICAgIHZpZXcuZGlzcGF0Y2goZGVmYXVsdEluc2VydCgpKTtcbiAgICByZXR1cm4gdHJ1ZTtcbn1cbmZ1bmN0aW9uIGFwcGx5RGVmYXVsdEluc2VydCh2aWV3LCBjaGFuZ2UsIG5ld1NlbCkge1xuICAgIGxldCB0ciwgc3RhcnRTdGF0ZSA9IHZpZXcuc3RhdGUsIHNlbCA9IHN0YXJ0U3RhdGUuc2VsZWN0aW9uLm1haW4sIGluQXRvbWljID0gLTE7XG4gICAgaWYgKGNoYW5nZS5mcm9tID09IGNoYW5nZS50byAmJiBjaGFuZ2UuZnJvbSA8IHNlbC5mcm9tIHx8IGNoYW5nZS5mcm9tID4gc2VsLnRvKSB7XG4gICAgICAgIGxldCBzaWRlID0gY2hhbmdlLmZyb20gPCBzZWwuZnJvbSA/IC0xIDogMSwgcG9zID0gc2lkZSA8IDAgPyBzZWwuZnJvbSA6IHNlbC50bztcbiAgICAgICAgbGV0IG1vdmVkID0gc2tpcEF0b21pY1JhbmdlcyhzdGFydFN0YXRlLmZhY2V0KGF0b21pY1JhbmdlcykubWFwKGYgPT4gZih2aWV3KSksIHBvcywgc2lkZSk7XG4gICAgICAgIGlmIChjaGFuZ2UuZnJvbSA9PSBtb3ZlZClcbiAgICAgICAgICAgIGluQXRvbWljID0gbW92ZWQ7XG4gICAgfVxuICAgIGlmIChpbkF0b21pYyA+IC0xKSB7XG4gICAgICAgIHRyID0ge1xuICAgICAgICAgICAgY2hhbmdlczogY2hhbmdlLFxuICAgICAgICAgICAgc2VsZWN0aW9uOiBFZGl0b3JTZWxlY3Rpb24uY3Vyc29yKGNoYW5nZS5mcm9tICsgY2hhbmdlLmluc2VydC5sZW5ndGgsIC0xKVxuICAgICAgICB9O1xuICAgIH1cbiAgICBlbHNlIGlmIChjaGFuZ2UuZnJvbSA+PSBzZWwuZnJvbSAmJiBjaGFuZ2UudG8gPD0gc2VsLnRvICYmIGNoYW5nZS50byAtIGNoYW5nZS5mcm9tID49IChzZWwudG8gLSBzZWwuZnJvbSkgLyAzICYmXG4gICAgICAgICghbmV3U2VsIHx8IG5ld1NlbC5tYWluLmVtcHR5ICYmIG5ld1NlbC5tYWluLmZyb20gPT0gY2hhbmdlLmZyb20gKyBjaGFuZ2UuaW5zZXJ0Lmxlbmd0aCkgJiZcbiAgICAgICAgdmlldy5pbnB1dFN0YXRlLmNvbXBvc2luZyA8IDApIHtcbiAgICAgICAgbGV0IGJlZm9yZSA9IHNlbC5mcm9tIDwgY2hhbmdlLmZyb20gPyBzdGFydFN0YXRlLnNsaWNlRG9jKHNlbC5mcm9tLCBjaGFuZ2UuZnJvbSkgOiBcIlwiO1xuICAgICAgICBsZXQgYWZ0ZXIgPSBzZWwudG8gPiBjaGFuZ2UudG8gPyBzdGFydFN0YXRlLnNsaWNlRG9jKGNoYW5nZS50bywgc2VsLnRvKSA6IFwiXCI7XG4gICAgICAgIHRyID0gc3RhcnRTdGF0ZS5yZXBsYWNlU2VsZWN0aW9uKHZpZXcuc3RhdGUudG9UZXh0KGJlZm9yZSArIGNoYW5nZS5pbnNlcnQuc2xpY2VTdHJpbmcoMCwgdW5kZWZpbmVkLCB2aWV3LnN0YXRlLmxpbmVCcmVhaykgKyBhZnRlcikpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgbGV0IGNoYW5nZXMgPSBzdGFydFN0YXRlLmNoYW5nZXMoY2hhbmdlKTtcbiAgICAgICAgbGV0IG1haW5TZWwgPSBuZXdTZWwgJiYgbmV3U2VsLm1haW4udG8gPD0gY2hhbmdlcy5uZXdMZW5ndGggPyBuZXdTZWwubWFpbiA6IHVuZGVmaW5lZDtcbiAgICAgICAgLy8gVHJ5IHRvIGFwcGx5IGEgY29tcG9zaXRpb24gY2hhbmdlIHRvIGFsbCBjdXJzb3JzXG4gICAgICAgIGlmIChzdGFydFN0YXRlLnNlbGVjdGlvbi5yYW5nZXMubGVuZ3RoID4gMSAmJiAodmlldy5pbnB1dFN0YXRlLmNvbXBvc2luZyA+PSAwIHx8IHZpZXcuaW5wdXRTdGF0ZS5jb21wb3NpdGlvblBlbmRpbmdDaGFuZ2UpICYmXG4gICAgICAgICAgICBjaGFuZ2UudG8gPD0gc2VsLnRvICsgMTAgJiYgY2hhbmdlLnRvID49IHNlbC50byAtIDEwKSB7XG4gICAgICAgICAgICBsZXQgcmVwbGFjZWQgPSB2aWV3LnN0YXRlLnNsaWNlRG9jKGNoYW5nZS5mcm9tLCBjaGFuZ2UudG8pO1xuICAgICAgICAgICAgbGV0IGNvbXBvc2l0aW9uUmFuZ2UsIGNvbXBvc2l0aW9uID0gbmV3U2VsICYmIGZpbmRDb21wb3NpdGlvbk5vZGUodmlldywgbmV3U2VsLm1haW4uaGVhZCk7XG4gICAgICAgICAgICBpZiAoY29tcG9zaXRpb24pIHtcbiAgICAgICAgICAgICAgICBsZXQgZExlbiA9IGNoYW5nZS5pbnNlcnQubGVuZ3RoIC0gKGNoYW5nZS50byAtIGNoYW5nZS5mcm9tKTtcbiAgICAgICAgICAgICAgICBjb21wb3NpdGlvblJhbmdlID0geyBmcm9tOiBjb21wb3NpdGlvbi5mcm9tLCB0bzogY29tcG9zaXRpb24udG8gLSBkTGVuIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb21wb3NpdGlvblJhbmdlID0gdmlldy5zdGF0ZS5kb2MubGluZUF0KHNlbC5oZWFkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxldCBvZmZzZXQgPSBzZWwudG8gLSBjaGFuZ2UudG87XG4gICAgICAgICAgICB0ciA9IHN0YXJ0U3RhdGUuY2hhbmdlQnlSYW5nZShyYW5nZSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKHJhbmdlLmZyb20gPT0gc2VsLmZyb20gJiYgcmFuZ2UudG8gPT0gc2VsLnRvKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4geyBjaGFuZ2VzLCByYW5nZTogbWFpblNlbCB8fCByYW5nZS5tYXAoY2hhbmdlcykgfTtcbiAgICAgICAgICAgICAgICBsZXQgdG8gPSByYW5nZS50byAtIG9mZnNldCwgZnJvbSA9IHRvIC0gcmVwbGFjZWQubGVuZ3RoO1xuICAgICAgICAgICAgICAgIGlmICh2aWV3LnN0YXRlLnNsaWNlRG9jKGZyb20sIHRvKSAhPSByZXBsYWNlZCB8fFxuICAgICAgICAgICAgICAgICAgICAvLyBVbmZvcnR1bmF0ZWx5LCB0aGVyZSdzIG5vIHdheSB0byBtYWtlIG11bHRpcGxlXG4gICAgICAgICAgICAgICAgICAgIC8vIGNoYW5nZXMgaW4gdGhlIHNhbWUgbm9kZSB3b3JrIHdpdGhvdXQgYWJvcnRpbmdcbiAgICAgICAgICAgICAgICAgICAgLy8gY29tcG9zaXRpb24sIHNvIGN1cnNvcnMgaW4gdGhlIGNvbXBvc2l0aW9uIHJhbmdlIGFyZVxuICAgICAgICAgICAgICAgICAgICAvLyBpZ25vcmVkLlxuICAgICAgICAgICAgICAgICAgICB0byA+PSBjb21wb3NpdGlvblJhbmdlLmZyb20gJiYgZnJvbSA8PSBjb21wb3NpdGlvblJhbmdlLnRvKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4geyByYW5nZSB9O1xuICAgICAgICAgICAgICAgIGxldCByYW5nZUNoYW5nZXMgPSBzdGFydFN0YXRlLmNoYW5nZXMoeyBmcm9tLCB0bywgaW5zZXJ0OiBjaGFuZ2UuaW5zZXJ0IH0pLCBzZWxPZmYgPSByYW5nZS50byAtIHNlbC50bztcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICBjaGFuZ2VzOiByYW5nZUNoYW5nZXMsXG4gICAgICAgICAgICAgICAgICAgIHJhbmdlOiAhbWFpblNlbCA/IHJhbmdlLm1hcChyYW5nZUNoYW5nZXMpIDpcbiAgICAgICAgICAgICAgICAgICAgICAgIEVkaXRvclNlbGVjdGlvbi5yYW5nZShNYXRoLm1heCgwLCBtYWluU2VsLmFuY2hvciArIHNlbE9mZiksIE1hdGgubWF4KDAsIG1haW5TZWwuaGVhZCArIHNlbE9mZikpXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdHIgPSB7XG4gICAgICAgICAgICAgICAgY2hhbmdlcyxcbiAgICAgICAgICAgICAgICBzZWxlY3Rpb246IG1haW5TZWwgJiYgc3RhcnRTdGF0ZS5zZWxlY3Rpb24ucmVwbGFjZVJhbmdlKG1haW5TZWwpXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgfVxuICAgIGxldCB1c2VyRXZlbnQgPSBcImlucHV0LnR5cGVcIjtcbiAgICBpZiAodmlldy5jb21wb3NpbmcgfHxcbiAgICAgICAgdmlldy5pbnB1dFN0YXRlLmNvbXBvc2l0aW9uUGVuZGluZ0NoYW5nZSAmJiB2aWV3LmlucHV0U3RhdGUuY29tcG9zaXRpb25FbmRlZEF0ID4gRGF0ZS5ub3coKSAtIDUwKSB7XG4gICAgICAgIHZpZXcuaW5wdXRTdGF0ZS5jb21wb3NpdGlvblBlbmRpbmdDaGFuZ2UgPSBmYWxzZTtcbiAgICAgICAgdXNlckV2ZW50ICs9IFwiLmNvbXBvc2VcIjtcbiAgICAgICAgaWYgKHZpZXcuaW5wdXRTdGF0ZS5jb21wb3NpdGlvbkZpcnN0Q2hhbmdlKSB7XG4gICAgICAgICAgICB1c2VyRXZlbnQgKz0gXCIuc3RhcnRcIjtcbiAgICAgICAgICAgIHZpZXcuaW5wdXRTdGF0ZS5jb21wb3NpdGlvbkZpcnN0Q2hhbmdlID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHN0YXJ0U3RhdGUudXBkYXRlKHRyLCB7IHVzZXJFdmVudCwgc2Nyb2xsSW50b1ZpZXc6IHRydWUgfSk7XG59XG5mdW5jdGlvbiBmaW5kRGlmZihhLCBiLCBwcmVmZXJyZWRQb3MsIHByZWZlcnJlZFNpZGUpIHtcbiAgICBsZXQgbWluTGVuID0gTWF0aC5taW4oYS5sZW5ndGgsIGIubGVuZ3RoKTtcbiAgICBsZXQgZnJvbSA9IDA7XG4gICAgd2hpbGUgKGZyb20gPCBtaW5MZW4gJiYgYS5jaGFyQ29kZUF0KGZyb20pID09IGIuY2hhckNvZGVBdChmcm9tKSlcbiAgICAgICAgZnJvbSsrO1xuICAgIGlmIChmcm9tID09IG1pbkxlbiAmJiBhLmxlbmd0aCA9PSBiLmxlbmd0aClcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgbGV0IHRvQSA9IGEubGVuZ3RoLCB0b0IgPSBiLmxlbmd0aDtcbiAgICB3aGlsZSAodG9BID4gMCAmJiB0b0IgPiAwICYmIGEuY2hhckNvZGVBdCh0b0EgLSAxKSA9PSBiLmNoYXJDb2RlQXQodG9CIC0gMSkpIHtcbiAgICAgICAgdG9BLS07XG4gICAgICAgIHRvQi0tO1xuICAgIH1cbiAgICBpZiAocHJlZmVycmVkU2lkZSA9PSBcImVuZFwiKSB7XG4gICAgICAgIGxldCBhZGp1c3QgPSBNYXRoLm1heCgwLCBmcm9tIC0gTWF0aC5taW4odG9BLCB0b0IpKTtcbiAgICAgICAgcHJlZmVycmVkUG9zIC09IHRvQSArIGFkanVzdCAtIGZyb207XG4gICAgfVxuICAgIGlmICh0b0EgPCBmcm9tICYmIGEubGVuZ3RoIDwgYi5sZW5ndGgpIHtcbiAgICAgICAgbGV0IG1vdmUgPSBwcmVmZXJyZWRQb3MgPD0gZnJvbSAmJiBwcmVmZXJyZWRQb3MgPj0gdG9BID8gZnJvbSAtIHByZWZlcnJlZFBvcyA6IDA7XG4gICAgICAgIGZyb20gLT0gbW92ZTtcbiAgICAgICAgdG9CID0gZnJvbSArICh0b0IgLSB0b0EpO1xuICAgICAgICB0b0EgPSBmcm9tO1xuICAgIH1cbiAgICBlbHNlIGlmICh0b0IgPCBmcm9tKSB7XG4gICAgICAgIGxldCBtb3ZlID0gcHJlZmVycmVkUG9zIDw9IGZyb20gJiYgcHJlZmVycmVkUG9zID49IHRvQiA/IGZyb20gLSBwcmVmZXJyZWRQb3MgOiAwO1xuICAgICAgICBmcm9tIC09IG1vdmU7XG4gICAgICAgIHRvQSA9IGZyb20gKyAodG9BIC0gdG9CKTtcbiAgICAgICAgdG9CID0gZnJvbTtcbiAgICB9XG4gICAgcmV0dXJuIHsgZnJvbSwgdG9BLCB0b0IgfTtcbn1cbmZ1bmN0aW9uIHNlbGVjdGlvblBvaW50cyh2aWV3KSB7XG4gICAgbGV0IHJlc3VsdCA9IFtdO1xuICAgIGlmICh2aWV3LnJvb3QuYWN0aXZlRWxlbWVudCAhPSB2aWV3LmNvbnRlbnRET00pXG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgbGV0IHsgYW5jaG9yTm9kZSwgYW5jaG9yT2Zmc2V0LCBmb2N1c05vZGUsIGZvY3VzT2Zmc2V0IH0gPSB2aWV3Lm9ic2VydmVyLnNlbGVjdGlvblJhbmdlO1xuICAgIGlmIChhbmNob3JOb2RlKSB7XG4gICAgICAgIHJlc3VsdC5wdXNoKG5ldyBET01Qb2ludChhbmNob3JOb2RlLCBhbmNob3JPZmZzZXQpKTtcbiAgICAgICAgaWYgKGZvY3VzTm9kZSAhPSBhbmNob3JOb2RlIHx8IGZvY3VzT2Zmc2V0ICE9IGFuY2hvck9mZnNldClcbiAgICAgICAgICAgIHJlc3VsdC5wdXNoKG5ldyBET01Qb2ludChmb2N1c05vZGUsIGZvY3VzT2Zmc2V0KSk7XG4gICAgfVxuICAgIHJldHVybiByZXN1bHQ7XG59XG5mdW5jdGlvbiBzZWxlY3Rpb25Gcm9tUG9pbnRzKHBvaW50cywgYmFzZSkge1xuICAgIGlmIChwb2ludHMubGVuZ3RoID09IDApXG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIGxldCBhbmNob3IgPSBwb2ludHNbMF0ucG9zLCBoZWFkID0gcG9pbnRzLmxlbmd0aCA9PSAyID8gcG9pbnRzWzFdLnBvcyA6IGFuY2hvcjtcbiAgICByZXR1cm4gYW5jaG9yID4gLTEgJiYgaGVhZCA+IC0xID8gRWRpdG9yU2VsZWN0aW9uLnNpbmdsZShhbmNob3IgKyBiYXNlLCBoZWFkICsgYmFzZSkgOiBudWxsO1xufVxuXG5jbGFzcyBJbnB1dFN0YXRlIHtcbiAgICBzZXRTZWxlY3Rpb25PcmlnaW4ob3JpZ2luKSB7XG4gICAgICAgIHRoaXMubGFzdFNlbGVjdGlvbk9yaWdpbiA9IG9yaWdpbjtcbiAgICAgICAgdGhpcy5sYXN0U2VsZWN0aW9uVGltZSA9IERhdGUubm93KCk7XG4gICAgfVxuICAgIGNvbnN0cnVjdG9yKHZpZXcpIHtcbiAgICAgICAgdGhpcy52aWV3ID0gdmlldztcbiAgICAgICAgdGhpcy5sYXN0S2V5Q29kZSA9IDA7XG4gICAgICAgIHRoaXMubGFzdEtleVRpbWUgPSAwO1xuICAgICAgICB0aGlzLmxhc3RUb3VjaFRpbWUgPSAwO1xuICAgICAgICB0aGlzLmxhc3RGb2N1c1RpbWUgPSAwO1xuICAgICAgICB0aGlzLmxhc3RTY3JvbGxUb3AgPSAwO1xuICAgICAgICB0aGlzLmxhc3RTY3JvbGxMZWZ0ID0gMDtcbiAgICAgICAgLy8gT24gaU9TLCBzb21lIGtleXMgbmVlZCB0byBoYXZlIHRoZWlyIGRlZmF1bHQgYmVoYXZpb3IgaGFwcGVuXG4gICAgICAgIC8vIChhZnRlciB3aGljaCB3ZSByZXRyb2FjdGl2ZWx5IGhhbmRsZSB0aGVtIGFuZCByZXNldCB0aGUgRE9NKSB0b1xuICAgICAgICAvLyBhdm9pZCBtZXNzaW5nIHVwIHRoZSB2aXJ0dWFsIGtleWJvYXJkIHN0YXRlLlxuICAgICAgICB0aGlzLnBlbmRpbmdJT1NLZXkgPSB1bmRlZmluZWQ7XG4gICAgICAgIC8qKlxuICAgICAgICBXaGVuIGVuYWJsZWQgKD4tMSksIHRhYiBwcmVzc2VzIGFyZSBub3QgZ2l2ZW4gdG8ga2V5IGhhbmRsZXJzLFxuICAgICAgICBsZWF2aW5nIHRoZSBicm93c2VyJ3MgZGVmYXVsdCBiZWhhdmlvci4gSWYgPjAsIHRoZSBtb2RlIGV4cGlyZXNcbiAgICAgICAgYXQgdGhhdCB0aW1lc3RhbXAsIGFuZCBhbnkgb3RoZXIga2V5cHJlc3MgY2xlYXJzIGl0LlxuICAgICAgICBFc2MgZW5hYmxlcyB0ZW1wb3JhcnkgdGFiIGZvY3VzIG1vZGUgZm9yIHR3byBzZWNvbmRzIHdoZW4gbm90XG4gICAgICAgIG90aGVyd2lzZSBoYW5kbGVkLlxuICAgICAgICAqL1xuICAgICAgICB0aGlzLnRhYkZvY3VzTW9kZSA9IC0xO1xuICAgICAgICB0aGlzLmxhc3RTZWxlY3Rpb25PcmlnaW4gPSBudWxsO1xuICAgICAgICB0aGlzLmxhc3RTZWxlY3Rpb25UaW1lID0gMDtcbiAgICAgICAgdGhpcy5sYXN0Q29udGV4dE1lbnUgPSAwO1xuICAgICAgICB0aGlzLnNjcm9sbEhhbmRsZXJzID0gW107XG4gICAgICAgIHRoaXMuaGFuZGxlcnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICAgICAgICAvLyAtMSBtZWFucyBub3QgaW4gYSBjb21wb3NpdGlvbi4gT3RoZXJ3aXNlLCB0aGlzIGNvdW50cyB0aGUgbnVtYmVyXG4gICAgICAgIC8vIG9mIGNoYW5nZXMgbWFkZSBkdXJpbmcgdGhlIGNvbXBvc2l0aW9uLiBUaGUgY291bnQgaXMgdXNlZCB0b1xuICAgICAgICAvLyBhdm9pZCB0cmVhdGluZyB0aGUgc3RhcnQgc3RhdGUgb2YgdGhlIGNvbXBvc2l0aW9uLCBiZWZvcmUgYW55XG4gICAgICAgIC8vIGNoYW5nZXMgaGF2ZSBiZWVuIG1hZGUsIGFzIHBhcnQgb2YgdGhlIGNvbXBvc2l0aW9uLlxuICAgICAgICB0aGlzLmNvbXBvc2luZyA9IC0xO1xuICAgICAgICAvLyBUcmFja3Mgd2hldGhlciB0aGUgbmV4dCBjaGFuZ2Ugc2hvdWxkIGJlIG1hcmtlZCBhcyBzdGFydGluZyB0aGVcbiAgICAgICAgLy8gY29tcG9zaXRpb24gKG51bGwgbWVhbnMgbm8gY29tcG9zaXRpb24sIHRydWUgbWVhbnMgbmV4dCBpcyB0aGVcbiAgICAgICAgLy8gZmlyc3QsIGZhbHNlIG1lYW5zIGZpcnN0IGhhcyBhbHJlYWR5IGJlZW4gbWFya2VkIGZvciB0aGlzXG4gICAgICAgIC8vIGNvbXBvc2l0aW9uKVxuICAgICAgICB0aGlzLmNvbXBvc2l0aW9uRmlyc3RDaGFuZ2UgPSBudWxsO1xuICAgICAgICAvLyBFbmQgdGltZSBvZiB0aGUgcHJldmlvdXMgY29tcG9zaXRpb25cbiAgICAgICAgdGhpcy5jb21wb3NpdGlvbkVuZGVkQXQgPSAwO1xuICAgICAgICAvLyBVc2VkIGluIGEga2x1ZGdlIHRvIGRldGVjdCB3aGVuIGFuIEVudGVyIGtleXByZXNzIHNob3VsZCBiZVxuICAgICAgICAvLyBjb25zaWRlcmVkIHBhcnQgb2YgdGhlIGNvbXBvc2l0aW9uIG9uIFNhZmFyaSwgd2hpY2ggZmlyZXMgZXZlbnRzXG4gICAgICAgIC8vIGluIHRoZSB3cm9uZyBvcmRlclxuICAgICAgICB0aGlzLmNvbXBvc2l0aW9uUGVuZGluZ0tleSA9IGZhbHNlO1xuICAgICAgICAvLyBVc2VkIHRvIGNhdGVnb3JpemUgY2hhbmdlcyBhcyBwYXJ0IG9mIGEgY29tcG9zaXRpb24sIGV2ZW4gd2hlblxuICAgICAgICAvLyB0aGUgbXV0YXRpb24gZXZlbnRzIGZpcmUgc2hvcnRseSBhZnRlciB0aGUgY29tcG9zaXRpb25lbmQgZXZlbnRcbiAgICAgICAgdGhpcy5jb21wb3NpdGlvblBlbmRpbmdDaGFuZ2UgPSBmYWxzZTtcbiAgICAgICAgLy8gU2V0IGJ5IGJlZm9yZWlucHV0LCB1c2VkIGluIERPTSBjaGFuZ2UgcmVhZGVyXG4gICAgICAgIHRoaXMuaW5zZXJ0aW5nVGV4dCA9IFwiXCI7XG4gICAgICAgIHRoaXMuaW5zZXJ0aW5nVGV4dEF0ID0gMDtcbiAgICAgICAgdGhpcy5tb3VzZVNlbGVjdGlvbiA9IG51bGw7XG4gICAgICAgIC8vIFdoZW4gYSBkcmFnIGZyb20gdGhlIGVkaXRvciBpcyBhY3RpdmUsIHRoaXMgcG9pbnRzIGF0IHRoZSByYW5nZVxuICAgICAgICAvLyBiZWluZyBkcmFnZ2VkLlxuICAgICAgICB0aGlzLmRyYWdnZWRDb250ZW50ID0gbnVsbDtcbiAgICAgICAgdGhpcy5oYW5kbGVFdmVudCA9IHRoaXMuaGFuZGxlRXZlbnQuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5ub3RpZmllZEZvY3VzZWQgPSB2aWV3Lmhhc0ZvY3VzO1xuICAgICAgICAvLyBPbiBTYWZhcmkgYWRkaW5nIGFuIGlucHV0IGV2ZW50IGhhbmRsZXIgc29tZWhvdyBwcmV2ZW50cyBhblxuICAgICAgICAvLyBpc3N1ZSB3aGVyZSB0aGUgY29tcG9zaXRpb24gdmFuaXNoZXMgd2hlbiB5b3UgcHJlc3MgZW50ZXIuXG4gICAgICAgIGlmIChicm93c2VyLnNhZmFyaSlcbiAgICAgICAgICAgIHZpZXcuY29udGVudERPTS5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgKCkgPT4gbnVsbCk7XG4gICAgICAgIGlmIChicm93c2VyLmdlY2tvKVxuICAgICAgICAgICAgZmlyZWZveENvcHlDdXRIYWNrKHZpZXcuY29udGVudERPTS5vd25lckRvY3VtZW50KTtcbiAgICB9XG4gICAgaGFuZGxlRXZlbnQoZXZlbnQpIHtcbiAgICAgICAgaWYgKCFldmVudEJlbG9uZ3NUb0VkaXRvcih0aGlzLnZpZXcsIGV2ZW50KSB8fCB0aGlzLmlnbm9yZUR1cmluZ0NvbXBvc2l0aW9uKGV2ZW50KSlcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgaWYgKGV2ZW50LnR5cGUgPT0gXCJrZXlkb3duXCIgJiYgdGhpcy5rZXlkb3duKGV2ZW50KSlcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgaWYgKHRoaXMudmlldy51cGRhdGVTdGF0ZSAhPSAwIC8qIFVwZGF0ZVN0YXRlLklkbGUgKi8pXG4gICAgICAgICAgICBQcm9taXNlLnJlc29sdmUoKS50aGVuKCgpID0+IHRoaXMucnVuSGFuZGxlcnMoZXZlbnQudHlwZSwgZXZlbnQpKTtcbiAgICAgICAgZWxzZVxuICAgICAgICAgICAgdGhpcy5ydW5IYW5kbGVycyhldmVudC50eXBlLCBldmVudCk7XG4gICAgfVxuICAgIHJ1bkhhbmRsZXJzKHR5cGUsIGV2ZW50KSB7XG4gICAgICAgIGxldCBoYW5kbGVycyA9IHRoaXMuaGFuZGxlcnNbdHlwZV07XG4gICAgICAgIGlmIChoYW5kbGVycykge1xuICAgICAgICAgICAgZm9yIChsZXQgb2JzZXJ2ZXIgb2YgaGFuZGxlcnMub2JzZXJ2ZXJzKVxuICAgICAgICAgICAgICAgIG9ic2VydmVyKHRoaXMudmlldywgZXZlbnQpO1xuICAgICAgICAgICAgZm9yIChsZXQgaGFuZGxlciBvZiBoYW5kbGVycy5oYW5kbGVycykge1xuICAgICAgICAgICAgICAgIGlmIChldmVudC5kZWZhdWx0UHJldmVudGVkKVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBpZiAoaGFuZGxlcih0aGlzLnZpZXcsIGV2ZW50KSkge1xuICAgICAgICAgICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgZW5zdXJlSGFuZGxlcnMocGx1Z2lucykge1xuICAgICAgICBsZXQgaGFuZGxlcnMgPSBjb21wdXRlSGFuZGxlcnMocGx1Z2lucyksIHByZXYgPSB0aGlzLmhhbmRsZXJzLCBkb20gPSB0aGlzLnZpZXcuY29udGVudERPTTtcbiAgICAgICAgZm9yIChsZXQgdHlwZSBpbiBoYW5kbGVycylcbiAgICAgICAgICAgIGlmICh0eXBlICE9IFwic2Nyb2xsXCIpIHtcbiAgICAgICAgICAgICAgICBsZXQgcGFzc2l2ZSA9ICFoYW5kbGVyc1t0eXBlXS5oYW5kbGVycy5sZW5ndGg7XG4gICAgICAgICAgICAgICAgbGV0IGV4aXN0cyA9IHByZXZbdHlwZV07XG4gICAgICAgICAgICAgICAgaWYgKGV4aXN0cyAmJiBwYXNzaXZlICE9ICFleGlzdHMuaGFuZGxlcnMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIGRvbS5yZW1vdmVFdmVudExpc3RlbmVyKHR5cGUsIHRoaXMuaGFuZGxlRXZlbnQpO1xuICAgICAgICAgICAgICAgICAgICBleGlzdHMgPSBudWxsO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoIWV4aXN0cylcbiAgICAgICAgICAgICAgICAgICAgZG9tLmFkZEV2ZW50TGlzdGVuZXIodHlwZSwgdGhpcy5oYW5kbGVFdmVudCwgeyBwYXNzaXZlIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICBmb3IgKGxldCB0eXBlIGluIHByZXYpXG4gICAgICAgICAgICBpZiAodHlwZSAhPSBcInNjcm9sbFwiICYmICFoYW5kbGVyc1t0eXBlXSlcbiAgICAgICAgICAgICAgICBkb20ucmVtb3ZlRXZlbnRMaXN0ZW5lcih0eXBlLCB0aGlzLmhhbmRsZUV2ZW50KTtcbiAgICAgICAgdGhpcy5oYW5kbGVycyA9IGhhbmRsZXJzO1xuICAgIH1cbiAgICBrZXlkb3duKGV2ZW50KSB7XG4gICAgICAgIC8vIE11c3QgYWx3YXlzIHJ1biwgZXZlbiBpZiBhIGN1c3RvbSBoYW5kbGVyIGhhbmRsZWQgdGhlIGV2ZW50XG4gICAgICAgIHRoaXMubGFzdEtleUNvZGUgPSBldmVudC5rZXlDb2RlO1xuICAgICAgICB0aGlzLmxhc3RLZXlUaW1lID0gRGF0ZS5ub3coKTtcbiAgICAgICAgaWYgKGV2ZW50LmtleUNvZGUgPT0gOSAmJiB0aGlzLnRhYkZvY3VzTW9kZSA+IC0xICYmICghdGhpcy50YWJGb2N1c01vZGUgfHwgRGF0ZS5ub3coKSA8PSB0aGlzLnRhYkZvY3VzTW9kZSkpXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgaWYgKHRoaXMudGFiRm9jdXNNb2RlID4gMCAmJiBldmVudC5rZXlDb2RlICE9IDI3ICYmIG1vZGlmaWVyQ29kZXMuaW5kZXhPZihldmVudC5rZXlDb2RlKSA8IDApXG4gICAgICAgICAgICB0aGlzLnRhYkZvY3VzTW9kZSA9IC0xO1xuICAgICAgICAvLyBDaHJvbWUgZm9yIEFuZHJvaWQgdXN1YWxseSBkb2Vzbid0IGZpcmUgcHJvcGVyIGtleSBldmVudHMsIGJ1dFxuICAgICAgICAvLyBvY2Nhc2lvbmFsbHkgZG9lcywgdXN1YWxseSBzdXJyb3VuZGVkIGJ5IGEgYnVuY2ggb2YgY29tcGxpY2F0ZWRcbiAgICAgICAgLy8gY29tcG9zaXRpb24gY2hhbmdlcy4gV2hlbiBhbiBlbnRlciBvciBiYWNrc3BhY2Uga2V5IGV2ZW50IGlzXG4gICAgICAgIC8vIHNlZW4sIGhvbGQgb2ZmIG9uIGhhbmRsaW5nIERPTSBldmVudHMgZm9yIGEgYml0LCBhbmQgdGhlblxuICAgICAgICAvLyBkaXNwYXRjaCBpdC5cbiAgICAgICAgaWYgKGJyb3dzZXIuYW5kcm9pZCAmJiBicm93c2VyLmNocm9tZSAmJiAhZXZlbnQuc3ludGhldGljICYmXG4gICAgICAgICAgICAoZXZlbnQua2V5Q29kZSA9PSAxMyB8fCBldmVudC5rZXlDb2RlID09IDgpKSB7XG4gICAgICAgICAgICB0aGlzLnZpZXcub2JzZXJ2ZXIuZGVsYXlBbmRyb2lkS2V5KGV2ZW50LmtleSwgZXZlbnQua2V5Q29kZSk7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICAvLyBQcmV2ZW50aW5nIHRoZSBkZWZhdWx0IGJlaGF2aW9yIG9mIEVudGVyIG9uIGlPUyBtYWtlcyB0aGVcbiAgICAgICAgLy8gdmlydHVhbCBrZXlib2FyZCBnZXQgc3R1Y2sgaW4gdGhlIHdyb25nIChsb3dlcmNhc2UpXG4gICAgICAgIC8vIHN0YXRlLiBTbyB3ZSBsZXQgaXQgZ28gdGhyb3VnaCwgYW5kIHRoZW4sIGluXG4gICAgICAgIC8vIGFwcGx5RE9NQ2hhbmdlLCBub3RpZnkga2V5IGhhbmRsZXJzIG9mIGl0IGFuZCByZXNldCB0b1xuICAgICAgICAvLyB0aGUgc3RhdGUgdGhleSBwcm9kdWNlLlxuICAgICAgICBsZXQgcGVuZGluZztcbiAgICAgICAgaWYgKGJyb3dzZXIuaW9zICYmICFldmVudC5zeW50aGV0aWMgJiYgIWV2ZW50LmFsdEtleSAmJiAhZXZlbnQubWV0YUtleSAmJlxuICAgICAgICAgICAgKChwZW5kaW5nID0gUGVuZGluZ0tleXMuZmluZChrZXkgPT4ga2V5LmtleUNvZGUgPT0gZXZlbnQua2V5Q29kZSkpICYmICFldmVudC5jdHJsS2V5IHx8XG4gICAgICAgICAgICAgICAgRW1hY3N5UGVuZGluZ0tleXMuaW5kZXhPZihldmVudC5rZXkpID4gLTEgJiYgZXZlbnQuY3RybEtleSAmJiAhZXZlbnQuc2hpZnRLZXkpKSB7XG4gICAgICAgICAgICB0aGlzLnBlbmRpbmdJT1NLZXkgPSBwZW5kaW5nIHx8IGV2ZW50O1xuICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB0aGlzLmZsdXNoSU9TS2V5KCksIDI1MCk7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZXZlbnQua2V5Q29kZSAhPSAyMjkpXG4gICAgICAgICAgICB0aGlzLnZpZXcub2JzZXJ2ZXIuZm9yY2VGbHVzaCgpO1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGZsdXNoSU9TS2V5KGNoYW5nZSkge1xuICAgICAgICBsZXQga2V5ID0gdGhpcy5wZW5kaW5nSU9TS2V5O1xuICAgICAgICBpZiAoIWtleSlcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgLy8gVGhpcyBsb29rcyBsaWtlIGFuIGF1dG9jb3JyZWN0aW9uIGJlZm9yZSBFbnRlclxuICAgICAgICBpZiAoa2V5LmtleSA9PSBcIkVudGVyXCIgJiYgY2hhbmdlICYmIGNoYW5nZS5mcm9tIDwgY2hhbmdlLnRvICYmIC9eXFxTKyQvLnRlc3QoY2hhbmdlLmluc2VydC50b1N0cmluZygpKSlcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgdGhpcy5wZW5kaW5nSU9TS2V5ID0gdW5kZWZpbmVkO1xuICAgICAgICByZXR1cm4gZGlzcGF0Y2hLZXkodGhpcy52aWV3LmNvbnRlbnRET00sIGtleS5rZXksIGtleS5rZXlDb2RlLCBrZXkgaW5zdGFuY2VvZiBLZXlib2FyZEV2ZW50ID8ga2V5IDogdW5kZWZpbmVkKTtcbiAgICB9XG4gICAgaWdub3JlRHVyaW5nQ29tcG9zaXRpb24oZXZlbnQpIHtcbiAgICAgICAgaWYgKCEvXmtleS8udGVzdChldmVudC50eXBlKSB8fCBldmVudC5zeW50aGV0aWMpXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIGlmICh0aGlzLmNvbXBvc2luZyA+IDApXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgLy8gU2VlIGh0dHBzOi8vd3d3LnN0dW0uZGUvMjAxNi8wNi8yNC9oYW5kbGluZy1pbWUtZXZlbnRzLWluLWphdmFzY3JpcHQvLlxuICAgICAgICAvLyBPbiBzb21lIGlucHV0IG1ldGhvZCBlZGl0b3JzIChJTUVzKSwgdGhlIEVudGVyIGtleSBpcyB1c2VkIHRvXG4gICAgICAgIC8vIGNvbmZpcm0gY2hhcmFjdGVyIHNlbGVjdGlvbi4gT24gU2FmYXJpLCB3aGVuIEVudGVyIGlzIHByZXNzZWQsXG4gICAgICAgIC8vIGNvbXBvc2l0aW9uZW5kIGFuZCBrZXlkb3duIGV2ZW50cyBhcmUgc29tZXRpbWVzIGVtaXR0ZWQgaW4gdGhlXG4gICAgICAgIC8vIHdyb25nIG9yZGVyLiBUaGUga2V5IGV2ZW50IHNob3VsZCBzdGlsbCBiZSBpZ25vcmVkLCBldmVuIHdoZW5cbiAgICAgICAgLy8gaXQgaGFwcGVucyBhZnRlciB0aGUgY29tcG9zaXRpb25lbmQgZXZlbnQuXG4gICAgICAgIGlmIChicm93c2VyLnNhZmFyaSAmJiAhYnJvd3Nlci5pb3MgJiYgdGhpcy5jb21wb3NpdGlvblBlbmRpbmdLZXkgJiYgRGF0ZS5ub3coKSAtIHRoaXMuY29tcG9zaXRpb25FbmRlZEF0IDwgMTAwKSB7XG4gICAgICAgICAgICB0aGlzLmNvbXBvc2l0aW9uUGVuZGluZ0tleSA9IGZhbHNlO1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBzdGFydE1vdXNlU2VsZWN0aW9uKG1vdXNlU2VsZWN0aW9uKSB7XG4gICAgICAgIGlmICh0aGlzLm1vdXNlU2VsZWN0aW9uKVxuICAgICAgICAgICAgdGhpcy5tb3VzZVNlbGVjdGlvbi5kZXN0cm95KCk7XG4gICAgICAgIHRoaXMubW91c2VTZWxlY3Rpb24gPSBtb3VzZVNlbGVjdGlvbjtcbiAgICB9XG4gICAgdXBkYXRlKHVwZGF0ZSkge1xuICAgICAgICB0aGlzLnZpZXcub2JzZXJ2ZXIudXBkYXRlKHVwZGF0ZSk7XG4gICAgICAgIGlmICh0aGlzLm1vdXNlU2VsZWN0aW9uKVxuICAgICAgICAgICAgdGhpcy5tb3VzZVNlbGVjdGlvbi51cGRhdGUodXBkYXRlKTtcbiAgICAgICAgaWYgKHRoaXMuZHJhZ2dlZENvbnRlbnQgJiYgdXBkYXRlLmRvY0NoYW5nZWQpXG4gICAgICAgICAgICB0aGlzLmRyYWdnZWRDb250ZW50ID0gdGhpcy5kcmFnZ2VkQ29udGVudC5tYXAodXBkYXRlLmNoYW5nZXMpO1xuICAgICAgICBpZiAodXBkYXRlLnRyYW5zYWN0aW9ucy5sZW5ndGgpXG4gICAgICAgICAgICB0aGlzLmxhc3RLZXlDb2RlID0gdGhpcy5sYXN0U2VsZWN0aW9uVGltZSA9IDA7XG4gICAgfVxuICAgIGRlc3Ryb3koKSB7XG4gICAgICAgIGlmICh0aGlzLm1vdXNlU2VsZWN0aW9uKVxuICAgICAgICAgICAgdGhpcy5tb3VzZVNlbGVjdGlvbi5kZXN0cm95KCk7XG4gICAgfVxufVxuZnVuY3Rpb24gYmluZEhhbmRsZXIocGx1Z2luLCBoYW5kbGVyKSB7XG4gICAgcmV0dXJuICh2aWV3LCBldmVudCkgPT4ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgcmV0dXJuIGhhbmRsZXIuY2FsbChwbHVnaW4sIGV2ZW50LCB2aWV3KTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgbG9nRXhjZXB0aW9uKHZpZXcuc3RhdGUsIGUpO1xuICAgICAgICB9XG4gICAgfTtcbn1cbmZ1bmN0aW9uIGNvbXB1dGVIYW5kbGVycyhwbHVnaW5zKSB7XG4gICAgbGV0IHJlc3VsdCA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gICAgZnVuY3Rpb24gcmVjb3JkKHR5cGUpIHtcbiAgICAgICAgcmV0dXJuIHJlc3VsdFt0eXBlXSB8fCAocmVzdWx0W3R5cGVdID0geyBvYnNlcnZlcnM6IFtdLCBoYW5kbGVyczogW10gfSk7XG4gICAgfVxuICAgIGZvciAobGV0IHBsdWdpbiBvZiBwbHVnaW5zKSB7XG4gICAgICAgIGxldCBzcGVjID0gcGx1Z2luLnNwZWMsIGhhbmRsZXJzID0gc3BlYyAmJiBzcGVjLnBsdWdpbi5kb21FdmVudEhhbmRsZXJzLCBvYnNlcnZlcnMgPSBzcGVjICYmIHNwZWMucGx1Z2luLmRvbUV2ZW50T2JzZXJ2ZXJzO1xuICAgICAgICBpZiAoaGFuZGxlcnMpXG4gICAgICAgICAgICBmb3IgKGxldCB0eXBlIGluIGhhbmRsZXJzKSB7XG4gICAgICAgICAgICAgICAgbGV0IGYgPSBoYW5kbGVyc1t0eXBlXTtcbiAgICAgICAgICAgICAgICBpZiAoZilcbiAgICAgICAgICAgICAgICAgICAgcmVjb3JkKHR5cGUpLmhhbmRsZXJzLnB1c2goYmluZEhhbmRsZXIocGx1Z2luLnZhbHVlLCBmKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIGlmIChvYnNlcnZlcnMpXG4gICAgICAgICAgICBmb3IgKGxldCB0eXBlIGluIG9ic2VydmVycykge1xuICAgICAgICAgICAgICAgIGxldCBmID0gb2JzZXJ2ZXJzW3R5cGVdO1xuICAgICAgICAgICAgICAgIGlmIChmKVxuICAgICAgICAgICAgICAgICAgICByZWNvcmQodHlwZSkub2JzZXJ2ZXJzLnB1c2goYmluZEhhbmRsZXIocGx1Z2luLnZhbHVlLCBmKSk7XG4gICAgICAgICAgICB9XG4gICAgfVxuICAgIGZvciAobGV0IHR5cGUgaW4gaGFuZGxlcnMpXG4gICAgICAgIHJlY29yZCh0eXBlKS5oYW5kbGVycy5wdXNoKGhhbmRsZXJzW3R5cGVdKTtcbiAgICBmb3IgKGxldCB0eXBlIGluIG9ic2VydmVycylcbiAgICAgICAgcmVjb3JkKHR5cGUpLm9ic2VydmVycy5wdXNoKG9ic2VydmVyc1t0eXBlXSk7XG4gICAgcmV0dXJuIHJlc3VsdDtcbn1cbmNvbnN0IFBlbmRpbmdLZXlzID0gW1xuICAgIHsga2V5OiBcIkJhY2tzcGFjZVwiLCBrZXlDb2RlOiA4LCBpbnB1dFR5cGU6IFwiZGVsZXRlQ29udGVudEJhY2t3YXJkXCIgfSxcbiAgICB7IGtleTogXCJFbnRlclwiLCBrZXlDb2RlOiAxMywgaW5wdXRUeXBlOiBcImluc2VydFBhcmFncmFwaFwiIH0sXG4gICAgeyBrZXk6IFwiRW50ZXJcIiwga2V5Q29kZTogMTMsIGlucHV0VHlwZTogXCJpbnNlcnRMaW5lQnJlYWtcIiB9LFxuICAgIHsga2V5OiBcIkRlbGV0ZVwiLCBrZXlDb2RlOiA0NiwgaW5wdXRUeXBlOiBcImRlbGV0ZUNvbnRlbnRGb3J3YXJkXCIgfVxuXTtcbmNvbnN0IEVtYWNzeVBlbmRpbmdLZXlzID0gXCJkdGhrb1wiO1xuLy8gS2V5IGNvZGVzIGZvciBtb2RpZmllciBrZXlzXG5jb25zdCBtb2RpZmllckNvZGVzID0gWzE2LCAxNywgMTgsIDIwLCA5MSwgOTIsIDIyNCwgMjI1XTtcbmNvbnN0IGRyYWdTY3JvbGxNYXJnaW4gPSA2O1xuZnVuY3Rpb24gZHJhZ1Njcm9sbFNwZWVkKGRpc3QpIHtcbiAgICByZXR1cm4gTWF0aC5tYXgoMCwgZGlzdCkgKiAwLjcgKyA4O1xufVxuZnVuY3Rpb24gZGlzdChhLCBiKSB7XG4gICAgcmV0dXJuIE1hdGgubWF4KE1hdGguYWJzKGEuY2xpZW50WCAtIGIuY2xpZW50WCksIE1hdGguYWJzKGEuY2xpZW50WSAtIGIuY2xpZW50WSkpO1xufVxuY2xhc3MgTW91c2VTZWxlY3Rpb24ge1xuICAgIGNvbnN0cnVjdG9yKHZpZXcsIHN0YXJ0RXZlbnQsIHN0eWxlLCBtdXN0U2VsZWN0KSB7XG4gICAgICAgIHRoaXMudmlldyA9IHZpZXc7XG4gICAgICAgIHRoaXMuc3RhcnRFdmVudCA9IHN0YXJ0RXZlbnQ7XG4gICAgICAgIHRoaXMuc3R5bGUgPSBzdHlsZTtcbiAgICAgICAgdGhpcy5tdXN0U2VsZWN0ID0gbXVzdFNlbGVjdDtcbiAgICAgICAgdGhpcy5zY3JvbGxTcGVlZCA9IHsgeDogMCwgeTogMCB9O1xuICAgICAgICB0aGlzLnNjcm9sbGluZyA9IC0xO1xuICAgICAgICB0aGlzLmxhc3RFdmVudCA9IHN0YXJ0RXZlbnQ7XG4gICAgICAgIHRoaXMuc2Nyb2xsUGFyZW50cyA9IHNjcm9sbGFibGVQYXJlbnRzKHZpZXcuY29udGVudERPTSk7XG4gICAgICAgIHRoaXMuYXRvbXMgPSB2aWV3LnN0YXRlLmZhY2V0KGF0b21pY1JhbmdlcykubWFwKGYgPT4gZih2aWV3KSk7XG4gICAgICAgIGxldCBkb2MgPSB2aWV3LmNvbnRlbnRET00ub3duZXJEb2N1bWVudDtcbiAgICAgICAgZG9jLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZW1vdmVcIiwgdGhpcy5tb3ZlID0gdGhpcy5tb3ZlLmJpbmQodGhpcykpO1xuICAgICAgICBkb2MuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNldXBcIiwgdGhpcy51cCA9IHRoaXMudXAuYmluZCh0aGlzKSk7XG4gICAgICAgIHRoaXMuZXh0ZW5kID0gc3RhcnRFdmVudC5zaGlmdEtleTtcbiAgICAgICAgdGhpcy5tdWx0aXBsZSA9IHZpZXcuc3RhdGUuZmFjZXQoRWRpdG9yU3RhdGUuYWxsb3dNdWx0aXBsZVNlbGVjdGlvbnMpICYmIGFkZHNTZWxlY3Rpb25SYW5nZSh2aWV3LCBzdGFydEV2ZW50KTtcbiAgICAgICAgdGhpcy5kcmFnZ2luZyA9IGlzSW5QcmltYXJ5U2VsZWN0aW9uKHZpZXcsIHN0YXJ0RXZlbnQpICYmIGdldENsaWNrVHlwZShzdGFydEV2ZW50KSA9PSAxID8gbnVsbCA6IGZhbHNlO1xuICAgIH1cbiAgICBzdGFydChldmVudCkge1xuICAgICAgICAvLyBXaGVuIGNsaWNraW5nIG91dHNpZGUgb2YgdGhlIHNlbGVjdGlvbiwgaW1tZWRpYXRlbHkgYXBwbHkgdGhlXG4gICAgICAgIC8vIGVmZmVjdCBvZiBzdGFydGluZyB0aGUgc2VsZWN0aW9uXG4gICAgICAgIGlmICh0aGlzLmRyYWdnaW5nID09PSBmYWxzZSlcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0KGV2ZW50KTtcbiAgICB9XG4gICAgbW92ZShldmVudCkge1xuICAgICAgICBpZiAoZXZlbnQuYnV0dG9ucyA9PSAwKVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZGVzdHJveSgpO1xuICAgICAgICBpZiAodGhpcy5kcmFnZ2luZyB8fCB0aGlzLmRyYWdnaW5nID09IG51bGwgJiYgZGlzdCh0aGlzLnN0YXJ0RXZlbnQsIGV2ZW50KSA8IDEwKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB0aGlzLnNlbGVjdCh0aGlzLmxhc3RFdmVudCA9IGV2ZW50KTtcbiAgICAgICAgbGV0IHN4ID0gMCwgc3kgPSAwO1xuICAgICAgICBsZXQgbGVmdCA9IDAsIHRvcCA9IDAsIHJpZ2h0ID0gdGhpcy52aWV3Lndpbi5pbm5lcldpZHRoLCBib3R0b20gPSB0aGlzLnZpZXcud2luLmlubmVySGVpZ2h0O1xuICAgICAgICBpZiAodGhpcy5zY3JvbGxQYXJlbnRzLngpXG4gICAgICAgICAgICAoeyBsZWZ0LCByaWdodCB9ID0gdGhpcy5zY3JvbGxQYXJlbnRzLnguZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkpO1xuICAgICAgICBpZiAodGhpcy5zY3JvbGxQYXJlbnRzLnkpXG4gICAgICAgICAgICAoeyB0b3AsIGJvdHRvbSB9ID0gdGhpcy5zY3JvbGxQYXJlbnRzLnkuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkpO1xuICAgICAgICBsZXQgbWFyZ2lucyA9IGdldFNjcm9sbE1hcmdpbnModGhpcy52aWV3KTtcbiAgICAgICAgaWYgKGV2ZW50LmNsaWVudFggLSBtYXJnaW5zLmxlZnQgPD0gbGVmdCArIGRyYWdTY3JvbGxNYXJnaW4pXG4gICAgICAgICAgICBzeCA9IC1kcmFnU2Nyb2xsU3BlZWQobGVmdCAtIGV2ZW50LmNsaWVudFgpO1xuICAgICAgICBlbHNlIGlmIChldmVudC5jbGllbnRYICsgbWFyZ2lucy5yaWdodCA+PSByaWdodCAtIGRyYWdTY3JvbGxNYXJnaW4pXG4gICAgICAgICAgICBzeCA9IGRyYWdTY3JvbGxTcGVlZChldmVudC5jbGllbnRYIC0gcmlnaHQpO1xuICAgICAgICBpZiAoZXZlbnQuY2xpZW50WSAtIG1hcmdpbnMudG9wIDw9IHRvcCArIGRyYWdTY3JvbGxNYXJnaW4pXG4gICAgICAgICAgICBzeSA9IC1kcmFnU2Nyb2xsU3BlZWQodG9wIC0gZXZlbnQuY2xpZW50WSk7XG4gICAgICAgIGVsc2UgaWYgKGV2ZW50LmNsaWVudFkgKyBtYXJnaW5zLmJvdHRvbSA+PSBib3R0b20gLSBkcmFnU2Nyb2xsTWFyZ2luKVxuICAgICAgICAgICAgc3kgPSBkcmFnU2Nyb2xsU3BlZWQoZXZlbnQuY2xpZW50WSAtIGJvdHRvbSk7XG4gICAgICAgIHRoaXMuc2V0U2Nyb2xsU3BlZWQoc3gsIHN5KTtcbiAgICB9XG4gICAgdXAoZXZlbnQpIHtcbiAgICAgICAgaWYgKHRoaXMuZHJhZ2dpbmcgPT0gbnVsbClcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0KHRoaXMubGFzdEV2ZW50KTtcbiAgICAgICAgaWYgKCF0aGlzLmRyYWdnaW5nKVxuICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgdGhpcy5kZXN0cm95KCk7XG4gICAgfVxuICAgIGRlc3Ryb3koKSB7XG4gICAgICAgIHRoaXMuc2V0U2Nyb2xsU3BlZWQoMCwgMCk7XG4gICAgICAgIGxldCBkb2MgPSB0aGlzLnZpZXcuY29udGVudERPTS5vd25lckRvY3VtZW50O1xuICAgICAgICBkb2MucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1vdXNlbW92ZVwiLCB0aGlzLm1vdmUpO1xuICAgICAgICBkb2MucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1vdXNldXBcIiwgdGhpcy51cCk7XG4gICAgICAgIHRoaXMudmlldy5pbnB1dFN0YXRlLm1vdXNlU2VsZWN0aW9uID0gdGhpcy52aWV3LmlucHV0U3RhdGUuZHJhZ2dlZENvbnRlbnQgPSBudWxsO1xuICAgIH1cbiAgICBzZXRTY3JvbGxTcGVlZChzeCwgc3kpIHtcbiAgICAgICAgdGhpcy5zY3JvbGxTcGVlZCA9IHsgeDogc3gsIHk6IHN5IH07XG4gICAgICAgIGlmIChzeCB8fCBzeSkge1xuICAgICAgICAgICAgaWYgKHRoaXMuc2Nyb2xsaW5nIDwgMClcbiAgICAgICAgICAgICAgICB0aGlzLnNjcm9sbGluZyA9IHNldEludGVydmFsKCgpID0+IHRoaXMuc2Nyb2xsKCksIDUwKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0aGlzLnNjcm9sbGluZyA+IC0xKSB7XG4gICAgICAgICAgICBjbGVhckludGVydmFsKHRoaXMuc2Nyb2xsaW5nKTtcbiAgICAgICAgICAgIHRoaXMuc2Nyb2xsaW5nID0gLTE7XG4gICAgICAgIH1cbiAgICB9XG4gICAgc2Nyb2xsKCkge1xuICAgICAgICBsZXQgeyB4LCB5IH0gPSB0aGlzLnNjcm9sbFNwZWVkO1xuICAgICAgICBpZiAoeCAmJiB0aGlzLnNjcm9sbFBhcmVudHMueCkge1xuICAgICAgICAgICAgdGhpcy5zY3JvbGxQYXJlbnRzLnguc2Nyb2xsTGVmdCArPSB4O1xuICAgICAgICAgICAgeCA9IDA7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHkgJiYgdGhpcy5zY3JvbGxQYXJlbnRzLnkpIHtcbiAgICAgICAgICAgIHRoaXMuc2Nyb2xsUGFyZW50cy55LnNjcm9sbFRvcCArPSB5O1xuICAgICAgICAgICAgeSA9IDA7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHggfHwgeSlcbiAgICAgICAgICAgIHRoaXMudmlldy53aW4uc2Nyb2xsQnkoeCwgeSk7XG4gICAgICAgIGlmICh0aGlzLmRyYWdnaW5nID09PSBmYWxzZSlcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0KHRoaXMubGFzdEV2ZW50KTtcbiAgICB9XG4gICAgc2VsZWN0KGV2ZW50KSB7XG4gICAgICAgIGxldCB7IHZpZXcgfSA9IHRoaXMsIHNlbGVjdGlvbiA9IHNraXBBdG9tc0ZvclNlbGVjdGlvbih0aGlzLmF0b21zLCB0aGlzLnN0eWxlLmdldChldmVudCwgdGhpcy5leHRlbmQsIHRoaXMubXVsdGlwbGUpKTtcbiAgICAgICAgaWYgKHRoaXMubXVzdFNlbGVjdCB8fCAhc2VsZWN0aW9uLmVxKHZpZXcuc3RhdGUuc2VsZWN0aW9uLCB0aGlzLmRyYWdnaW5nID09PSBmYWxzZSkpXG4gICAgICAgICAgICB0aGlzLnZpZXcuZGlzcGF0Y2goe1xuICAgICAgICAgICAgICAgIHNlbGVjdGlvbixcbiAgICAgICAgICAgICAgICB1c2VyRXZlbnQ6IFwic2VsZWN0LnBvaW50ZXJcIlxuICAgICAgICAgICAgfSk7XG4gICAgICAgIHRoaXMubXVzdFNlbGVjdCA9IGZhbHNlO1xuICAgIH1cbiAgICB1cGRhdGUodXBkYXRlKSB7XG4gICAgICAgIGlmICh1cGRhdGUudHJhbnNhY3Rpb25zLnNvbWUodHIgPT4gdHIuaXNVc2VyRXZlbnQoXCJpbnB1dC50eXBlXCIpKSlcbiAgICAgICAgICAgIHRoaXMuZGVzdHJveSgpO1xuICAgICAgICBlbHNlIGlmICh0aGlzLnN0eWxlLnVwZGF0ZSh1cGRhdGUpKVxuICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB0aGlzLnNlbGVjdCh0aGlzLmxhc3RFdmVudCksIDIwKTtcbiAgICB9XG59XG5mdW5jdGlvbiBhZGRzU2VsZWN0aW9uUmFuZ2UodmlldywgZXZlbnQpIHtcbiAgICBsZXQgZmFjZXQgPSB2aWV3LnN0YXRlLmZhY2V0KGNsaWNrQWRkc1NlbGVjdGlvblJhbmdlKTtcbiAgICByZXR1cm4gZmFjZXQubGVuZ3RoID8gZmFjZXRbMF0oZXZlbnQpIDogYnJvd3Nlci5tYWMgPyBldmVudC5tZXRhS2V5IDogZXZlbnQuY3RybEtleTtcbn1cbmZ1bmN0aW9uIGRyYWdNb3Zlc1NlbGVjdGlvbih2aWV3LCBldmVudCkge1xuICAgIGxldCBmYWNldCA9IHZpZXcuc3RhdGUuZmFjZXQoZHJhZ01vdmVzU2VsZWN0aW9uJDEpO1xuICAgIHJldHVybiBmYWNldC5sZW5ndGggPyBmYWNldFswXShldmVudCkgOiBicm93c2VyLm1hYyA/ICFldmVudC5hbHRLZXkgOiAhZXZlbnQuY3RybEtleTtcbn1cbmZ1bmN0aW9uIGlzSW5QcmltYXJ5U2VsZWN0aW9uKHZpZXcsIGV2ZW50KSB7XG4gICAgbGV0IHsgbWFpbiB9ID0gdmlldy5zdGF0ZS5zZWxlY3Rpb247XG4gICAgaWYgKG1haW4uZW1wdHkpXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAvLyBPbiBib3VuZGFyeSBjbGlja3MsIGNoZWNrIHdoZXRoZXIgdGhlIGNvb3JkaW5hdGVzIGFyZSBpbnNpZGUgdGhlXG4gICAgLy8gc2VsZWN0aW9uJ3MgY2xpZW50IHJlY3RhbmdsZXNcbiAgICBsZXQgc2VsID0gZ2V0U2VsZWN0aW9uKHZpZXcucm9vdCk7XG4gICAgaWYgKCFzZWwgfHwgc2VsLnJhbmdlQ291bnQgPT0gMClcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgbGV0IHJlY3RzID0gc2VsLmdldFJhbmdlQXQoMCkuZ2V0Q2xpZW50UmVjdHMoKTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHJlY3RzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGxldCByZWN0ID0gcmVjdHNbaV07XG4gICAgICAgIGlmIChyZWN0LmxlZnQgPD0gZXZlbnQuY2xpZW50WCAmJiByZWN0LnJpZ2h0ID49IGV2ZW50LmNsaWVudFggJiZcbiAgICAgICAgICAgIHJlY3QudG9wIDw9IGV2ZW50LmNsaWVudFkgJiYgcmVjdC5ib3R0b20gPj0gZXZlbnQuY2xpZW50WSlcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG59XG5mdW5jdGlvbiBldmVudEJlbG9uZ3NUb0VkaXRvcih2aWV3LCBldmVudCkge1xuICAgIGlmICghZXZlbnQuYnViYmxlcylcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgaWYgKGV2ZW50LmRlZmF1bHRQcmV2ZW50ZWQpXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICBmb3IgKGxldCBub2RlID0gZXZlbnQudGFyZ2V0LCB0aWxlOyBub2RlICE9IHZpZXcuY29udGVudERPTTsgbm9kZSA9IG5vZGUucGFyZW50Tm9kZSlcbiAgICAgICAgaWYgKCFub2RlIHx8IG5vZGUubm9kZVR5cGUgPT0gMTEgfHxcbiAgICAgICAgICAgICgodGlsZSA9IFRpbGUuZ2V0KG5vZGUpKSAmJiB0aWxlLmlzV2lkZ2V0KCkgJiYgIXRpbGUuaXNIaWRkZW4gJiYgdGlsZS53aWRnZXQuaWdub3JlRXZlbnQoZXZlbnQpKSlcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICByZXR1cm4gdHJ1ZTtcbn1cbmNvbnN0IGhhbmRsZXJzID0gLypAX19QVVJFX18qL09iamVjdC5jcmVhdGUobnVsbCk7XG5jb25zdCBvYnNlcnZlcnMgPSAvKkBfX1BVUkVfXyovT2JqZWN0LmNyZWF0ZShudWxsKTtcbi8vIFRoaXMgaXMgdmVyeSBjcnVkZSwgYnV0IHVuZm9ydHVuYXRlbHkgYm90aCB0aGVzZSBicm93c2VycyBfcHJldGVuZF9cbi8vIHRoYXQgdGhleSBoYXZlIGEgY2xpcGJvYXJkIEFQSeKAlGFsbCB0aGUgb2JqZWN0cyBhbmQgbWV0aG9kcyBhcmVcbi8vIHRoZXJlLCB0aGV5IGp1c3QgZG9uJ3Qgd29yaywgYW5kIHRoZXkgYXJlIGhhcmQgdG8gdGVzdC5cbmNvbnN0IGJyb2tlbkNsaXBib2FyZEFQSSA9IChicm93c2VyLmllICYmIGJyb3dzZXIuaWVfdmVyc2lvbiA8IDE1KSB8fFxuICAgIChicm93c2VyLmlvcyAmJiBicm93c2VyLndlYmtpdF92ZXJzaW9uIDwgNjA0KTtcbmZ1bmN0aW9uIGNhcHR1cmVQYXN0ZSh2aWV3KSB7XG4gICAgbGV0IHBhcmVudCA9IHZpZXcuZG9tLnBhcmVudE5vZGU7XG4gICAgaWYgKCFwYXJlbnQpXG4gICAgICAgIHJldHVybjtcbiAgICBsZXQgdGFyZ2V0ID0gcGFyZW50LmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJ0ZXh0YXJlYVwiKSk7XG4gICAgdGFyZ2V0LnN0eWxlLmNzc1RleHQgPSBcInBvc2l0aW9uOiBmaXhlZDsgbGVmdDogLTEwMDAwcHg7IHRvcDogMTBweFwiO1xuICAgIHRhcmdldC5mb2N1cygpO1xuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICB2aWV3LmZvY3VzKCk7XG4gICAgICAgIHRhcmdldC5yZW1vdmUoKTtcbiAgICAgICAgZG9QYXN0ZSh2aWV3LCB0YXJnZXQudmFsdWUpO1xuICAgIH0sIDUwKTtcbn1cbmZ1bmN0aW9uIHRleHRGaWx0ZXIoc3RhdGUsIGZhY2V0LCB0ZXh0KSB7XG4gICAgZm9yIChsZXQgZmlsdGVyIG9mIHN0YXRlLmZhY2V0KGZhY2V0KSlcbiAgICAgICAgdGV4dCA9IGZpbHRlcih0ZXh0LCBzdGF0ZSk7XG4gICAgcmV0dXJuIHRleHQ7XG59XG5mdW5jdGlvbiBkb1Bhc3RlKHZpZXcsIGlucHV0KSB7XG4gICAgaW5wdXQgPSB0ZXh0RmlsdGVyKHZpZXcuc3RhdGUsIGNsaXBib2FyZElucHV0RmlsdGVyLCBpbnB1dCk7XG4gICAgbGV0IHsgc3RhdGUgfSA9IHZpZXcsIGNoYW5nZXMsIGkgPSAxLCB0ZXh0ID0gc3RhdGUudG9UZXh0KGlucHV0KTtcbiAgICBsZXQgYnlMaW5lID0gdGV4dC5saW5lcyA9PSBzdGF0ZS5zZWxlY3Rpb24ucmFuZ2VzLmxlbmd0aDtcbiAgICBsZXQgbGluZXdpc2UgPSBsYXN0TGluZXdpc2VDb3B5ICE9IG51bGwgJiYgc3RhdGUuc2VsZWN0aW9uLnJhbmdlcy5ldmVyeShyID0+IHIuZW1wdHkpICYmIGxhc3RMaW5ld2lzZUNvcHkgPT0gdGV4dC50b1N0cmluZygpO1xuICAgIGlmIChsaW5ld2lzZSkge1xuICAgICAgICBsZXQgbGFzdExpbmUgPSAtMTtcbiAgICAgICAgY2hhbmdlcyA9IHN0YXRlLmNoYW5nZUJ5UmFuZ2UocmFuZ2UgPT4ge1xuICAgICAgICAgICAgbGV0IGxpbmUgPSBzdGF0ZS5kb2MubGluZUF0KHJhbmdlLmZyb20pO1xuICAgICAgICAgICAgaWYgKGxpbmUuZnJvbSA9PSBsYXN0TGluZSlcbiAgICAgICAgICAgICAgICByZXR1cm4geyByYW5nZSB9O1xuICAgICAgICAgICAgbGFzdExpbmUgPSBsaW5lLmZyb207XG4gICAgICAgICAgICBsZXQgaW5zZXJ0ID0gc3RhdGUudG9UZXh0KChieUxpbmUgPyB0ZXh0LmxpbmUoaSsrKS50ZXh0IDogaW5wdXQpICsgc3RhdGUubGluZUJyZWFrKTtcbiAgICAgICAgICAgIHJldHVybiB7IGNoYW5nZXM6IHsgZnJvbTogbGluZS5mcm9tLCBpbnNlcnQgfSxcbiAgICAgICAgICAgICAgICByYW5nZTogRWRpdG9yU2VsZWN0aW9uLmN1cnNvcihyYW5nZS5mcm9tICsgaW5zZXJ0Lmxlbmd0aCkgfTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGVsc2UgaWYgKGJ5TGluZSkge1xuICAgICAgICBjaGFuZ2VzID0gc3RhdGUuY2hhbmdlQnlSYW5nZShyYW5nZSA9PiB7XG4gICAgICAgICAgICBsZXQgbGluZSA9IHRleHQubGluZShpKyspO1xuICAgICAgICAgICAgcmV0dXJuIHsgY2hhbmdlczogeyBmcm9tOiByYW5nZS5mcm9tLCB0bzogcmFuZ2UudG8sIGluc2VydDogbGluZS50ZXh0IH0sXG4gICAgICAgICAgICAgICAgcmFuZ2U6IEVkaXRvclNlbGVjdGlvbi5jdXJzb3IocmFuZ2UuZnJvbSArIGxpbmUubGVuZ3RoKSB9O1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGNoYW5nZXMgPSBzdGF0ZS5yZXBsYWNlU2VsZWN0aW9uKHRleHQpO1xuICAgIH1cbiAgICB2aWV3LmRpc3BhdGNoKGNoYW5nZXMsIHtcbiAgICAgICAgdXNlckV2ZW50OiBcImlucHV0LnBhc3RlXCIsXG4gICAgICAgIHNjcm9sbEludG9WaWV3OiB0cnVlXG4gICAgfSk7XG59XG5vYnNlcnZlcnMuc2Nyb2xsID0gdmlldyA9PiB7XG4gICAgdmlldy5pbnB1dFN0YXRlLmxhc3RTY3JvbGxUb3AgPSB2aWV3LnNjcm9sbERPTS5zY3JvbGxUb3A7XG4gICAgdmlldy5pbnB1dFN0YXRlLmxhc3RTY3JvbGxMZWZ0ID0gdmlldy5zY3JvbGxET00uc2Nyb2xsTGVmdDtcbn07XG5oYW5kbGVycy5rZXlkb3duID0gKHZpZXcsIGV2ZW50KSA9PiB7XG4gICAgdmlldy5pbnB1dFN0YXRlLnNldFNlbGVjdGlvbk9yaWdpbihcInNlbGVjdFwiKTtcbiAgICBpZiAoZXZlbnQua2V5Q29kZSA9PSAyNyAmJiB2aWV3LmlucHV0U3RhdGUudGFiRm9jdXNNb2RlICE9IDApXG4gICAgICAgIHZpZXcuaW5wdXRTdGF0ZS50YWJGb2N1c01vZGUgPSBEYXRlLm5vdygpICsgMjAwMDtcbiAgICByZXR1cm4gZmFsc2U7XG59O1xub2JzZXJ2ZXJzLnRvdWNoc3RhcnQgPSAodmlldywgZSkgPT4ge1xuICAgIHZpZXcuaW5wdXRTdGF0ZS5sYXN0VG91Y2hUaW1lID0gRGF0ZS5ub3coKTtcbiAgICB2aWV3LmlucHV0U3RhdGUuc2V0U2VsZWN0aW9uT3JpZ2luKFwic2VsZWN0LnBvaW50ZXJcIik7XG59O1xub2JzZXJ2ZXJzLnRvdWNobW92ZSA9IHZpZXcgPT4ge1xuICAgIHZpZXcuaW5wdXRTdGF0ZS5zZXRTZWxlY3Rpb25PcmlnaW4oXCJzZWxlY3QucG9pbnRlclwiKTtcbn07XG5oYW5kbGVycy5tb3VzZWRvd24gPSAodmlldywgZXZlbnQpID0+IHtcbiAgICB2aWV3Lm9ic2VydmVyLmZsdXNoKCk7XG4gICAgaWYgKHZpZXcuaW5wdXRTdGF0ZS5sYXN0VG91Y2hUaW1lID4gRGF0ZS5ub3coKSAtIDIwMDApXG4gICAgICAgIHJldHVybiBmYWxzZTsgLy8gSWdub3JlIHRvdWNoIGludGVyYWN0aW9uXG4gICAgbGV0IHN0eWxlID0gbnVsbDtcbiAgICBmb3IgKGxldCBtYWtlU3R5bGUgb2Ygdmlldy5zdGF0ZS5mYWNldChtb3VzZVNlbGVjdGlvblN0eWxlKSkge1xuICAgICAgICBzdHlsZSA9IG1ha2VTdHlsZSh2aWV3LCBldmVudCk7XG4gICAgICAgIGlmIChzdHlsZSlcbiAgICAgICAgICAgIGJyZWFrO1xuICAgIH1cbiAgICBpZiAoIXN0eWxlICYmIGV2ZW50LmJ1dHRvbiA9PSAwKVxuICAgICAgICBzdHlsZSA9IGJhc2ljTW91c2VTZWxlY3Rpb24odmlldywgZXZlbnQpO1xuICAgIGlmIChzdHlsZSkge1xuICAgICAgICBsZXQgbXVzdEZvY3VzID0gIXZpZXcuaGFzRm9jdXM7XG4gICAgICAgIHZpZXcuaW5wdXRTdGF0ZS5zdGFydE1vdXNlU2VsZWN0aW9uKG5ldyBNb3VzZVNlbGVjdGlvbih2aWV3LCBldmVudCwgc3R5bGUsIG11c3RGb2N1cykpO1xuICAgICAgICBpZiAobXVzdEZvY3VzKVxuICAgICAgICAgICAgdmlldy5vYnNlcnZlci5pZ25vcmUoKCkgPT4ge1xuICAgICAgICAgICAgICAgIGZvY3VzUHJldmVudFNjcm9sbCh2aWV3LmNvbnRlbnRET00pO1xuICAgICAgICAgICAgICAgIGxldCBhY3RpdmUgPSB2aWV3LnJvb3QuYWN0aXZlRWxlbWVudDtcbiAgICAgICAgICAgICAgICBpZiAoYWN0aXZlICYmICFhY3RpdmUuY29udGFpbnModmlldy5jb250ZW50RE9NKSlcbiAgICAgICAgICAgICAgICAgICAgYWN0aXZlLmJsdXIoKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICBsZXQgbW91c2VTZWwgPSB2aWV3LmlucHV0U3RhdGUubW91c2VTZWxlY3Rpb247XG4gICAgICAgIGlmIChtb3VzZVNlbCkge1xuICAgICAgICAgICAgbW91c2VTZWwuc3RhcnQoZXZlbnQpO1xuICAgICAgICAgICAgcmV0dXJuIG1vdXNlU2VsLmRyYWdnaW5nID09PSBmYWxzZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgdmlldy5pbnB1dFN0YXRlLnNldFNlbGVjdGlvbk9yaWdpbihcInNlbGVjdC5wb2ludGVyXCIpO1xuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG59O1xuZnVuY3Rpb24gcmFuZ2VGb3JDbGljayh2aWV3LCBwb3MsIGJpYXMsIHR5cGUpIHtcbiAgICBpZiAodHlwZSA9PSAxKSB7IC8vIFNpbmdsZSBjbGlja1xuICAgICAgICByZXR1cm4gRWRpdG9yU2VsZWN0aW9uLmN1cnNvcihwb3MsIGJpYXMpO1xuICAgIH1cbiAgICBlbHNlIGlmICh0eXBlID09IDIpIHsgLy8gRG91YmxlIGNsaWNrXG4gICAgICAgIHJldHVybiBncm91cEF0KHZpZXcuc3RhdGUsIHBvcywgYmlhcyk7XG4gICAgfVxuICAgIGVsc2UgeyAvLyBUcmlwbGUgY2xpY2tcbiAgICAgICAgbGV0IHZpc3VhbCA9IHZpZXcuZG9jVmlldy5saW5lQXQocG9zLCBiaWFzKSwgbGluZSA9IHZpZXcuc3RhdGUuZG9jLmxpbmVBdCh2aXN1YWwgPyB2aXN1YWwucG9zQXRFbmQgOiBwb3MpO1xuICAgICAgICBsZXQgZnJvbSA9IHZpc3VhbCA/IHZpc3VhbC5wb3NBdFN0YXJ0IDogbGluZS5mcm9tLCB0byA9IHZpc3VhbCA/IHZpc3VhbC5wb3NBdEVuZCA6IGxpbmUudG87XG4gICAgICAgIGlmICh0byA8IHZpZXcuc3RhdGUuZG9jLmxlbmd0aCAmJiB0byA9PSBsaW5lLnRvKVxuICAgICAgICAgICAgdG8rKztcbiAgICAgICAgcmV0dXJuIEVkaXRvclNlbGVjdGlvbi5yYW5nZShmcm9tLCB0byk7XG4gICAgfVxufVxuY29uc3QgQmFkTW91c2VEZXRhaWwgPSBicm93c2VyLmllICYmIGJyb3dzZXIuaWVfdmVyc2lvbiA8PSAxMTtcbmxldCBsYXN0TW91c2VEb3duID0gbnVsbCwgbGFzdE1vdXNlRG93bkNvdW50ID0gMCwgbGFzdE1vdXNlRG93blRpbWUgPSAwO1xuZnVuY3Rpb24gZ2V0Q2xpY2tUeXBlKGV2ZW50KSB7XG4gICAgaWYgKCFCYWRNb3VzZURldGFpbClcbiAgICAgICAgcmV0dXJuIGV2ZW50LmRldGFpbDtcbiAgICBsZXQgbGFzdCA9IGxhc3RNb3VzZURvd24sIGxhc3RUaW1lID0gbGFzdE1vdXNlRG93blRpbWU7XG4gICAgbGFzdE1vdXNlRG93biA9IGV2ZW50O1xuICAgIGxhc3RNb3VzZURvd25UaW1lID0gRGF0ZS5ub3coKTtcbiAgICByZXR1cm4gbGFzdE1vdXNlRG93bkNvdW50ID0gIWxhc3QgfHwgKGxhc3RUaW1lID4gRGF0ZS5ub3coKSAtIDQwMCAmJiBNYXRoLmFicyhsYXN0LmNsaWVudFggLSBldmVudC5jbGllbnRYKSA8IDIgJiZcbiAgICAgICAgTWF0aC5hYnMobGFzdC5jbGllbnRZIC0gZXZlbnQuY2xpZW50WSkgPCAyKSA/IChsYXN0TW91c2VEb3duQ291bnQgKyAxKSAlIDMgOiAxO1xufVxuZnVuY3Rpb24gYmFzaWNNb3VzZVNlbGVjdGlvbih2aWV3LCBldmVudCkge1xuICAgIGxldCBzdGFydCA9IHZpZXcucG9zQW5kU2lkZUF0Q29vcmRzKHsgeDogZXZlbnQuY2xpZW50WCwgeTogZXZlbnQuY2xpZW50WSB9LCBmYWxzZSksIHR5cGUgPSBnZXRDbGlja1R5cGUoZXZlbnQpO1xuICAgIGxldCBzdGFydFNlbCA9IHZpZXcuc3RhdGUuc2VsZWN0aW9uO1xuICAgIHJldHVybiB7XG4gICAgICAgIHVwZGF0ZSh1cGRhdGUpIHtcbiAgICAgICAgICAgIGlmICh1cGRhdGUuZG9jQ2hhbmdlZCkge1xuICAgICAgICAgICAgICAgIHN0YXJ0LnBvcyA9IHVwZGF0ZS5jaGFuZ2VzLm1hcFBvcyhzdGFydC5wb3MpO1xuICAgICAgICAgICAgICAgIHN0YXJ0U2VsID0gc3RhcnRTZWwubWFwKHVwZGF0ZS5jaGFuZ2VzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgZ2V0KGV2ZW50LCBleHRlbmQsIG11bHRpcGxlKSB7XG4gICAgICAgICAgICBsZXQgY3VyID0gdmlldy5wb3NBbmRTaWRlQXRDb29yZHMoeyB4OiBldmVudC5jbGllbnRYLCB5OiBldmVudC5jbGllbnRZIH0sIGZhbHNlKSwgcmVtb3ZlZDtcbiAgICAgICAgICAgIGxldCByYW5nZSA9IHJhbmdlRm9yQ2xpY2sodmlldywgY3VyLnBvcywgY3VyLmFzc29jLCB0eXBlKTtcbiAgICAgICAgICAgIGlmIChzdGFydC5wb3MgIT0gY3VyLnBvcyAmJiAhZXh0ZW5kKSB7XG4gICAgICAgICAgICAgICAgbGV0IHN0YXJ0UmFuZ2UgPSByYW5nZUZvckNsaWNrKHZpZXcsIHN0YXJ0LnBvcywgc3RhcnQuYXNzb2MsIHR5cGUpO1xuICAgICAgICAgICAgICAgIGxldCBmcm9tID0gTWF0aC5taW4oc3RhcnRSYW5nZS5mcm9tLCByYW5nZS5mcm9tKSwgdG8gPSBNYXRoLm1heChzdGFydFJhbmdlLnRvLCByYW5nZS50byk7XG4gICAgICAgICAgICAgICAgcmFuZ2UgPSBmcm9tIDwgcmFuZ2UuZnJvbSA/IEVkaXRvclNlbGVjdGlvbi5yYW5nZShmcm9tLCB0bykgOiBFZGl0b3JTZWxlY3Rpb24ucmFuZ2UodG8sIGZyb20pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGV4dGVuZClcbiAgICAgICAgICAgICAgICByZXR1cm4gc3RhcnRTZWwucmVwbGFjZVJhbmdlKHN0YXJ0U2VsLm1haW4uZXh0ZW5kKHJhbmdlLmZyb20sIHJhbmdlLnRvKSk7XG4gICAgICAgICAgICBlbHNlIGlmIChtdWx0aXBsZSAmJiB0eXBlID09IDEgJiYgc3RhcnRTZWwucmFuZ2VzLmxlbmd0aCA+IDEgJiYgKHJlbW92ZWQgPSByZW1vdmVSYW5nZUFyb3VuZChzdGFydFNlbCwgY3VyLnBvcykpKVxuICAgICAgICAgICAgICAgIHJldHVybiByZW1vdmVkO1xuICAgICAgICAgICAgZWxzZSBpZiAobXVsdGlwbGUpXG4gICAgICAgICAgICAgICAgcmV0dXJuIHN0YXJ0U2VsLmFkZFJhbmdlKHJhbmdlKTtcbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICByZXR1cm4gRWRpdG9yU2VsZWN0aW9uLmNyZWF0ZShbcmFuZ2VdKTtcbiAgICAgICAgfVxuICAgIH07XG59XG5mdW5jdGlvbiByZW1vdmVSYW5nZUFyb3VuZChzZWwsIHBvcykge1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc2VsLnJhbmdlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICBsZXQgeyBmcm9tLCB0byB9ID0gc2VsLnJhbmdlc1tpXTtcbiAgICAgICAgaWYgKGZyb20gPD0gcG9zICYmIHRvID49IHBvcylcbiAgICAgICAgICAgIHJldHVybiBFZGl0b3JTZWxlY3Rpb24uY3JlYXRlKHNlbC5yYW5nZXMuc2xpY2UoMCwgaSkuY29uY2F0KHNlbC5yYW5nZXMuc2xpY2UoaSArIDEpKSwgc2VsLm1haW5JbmRleCA9PSBpID8gMCA6IHNlbC5tYWluSW5kZXggLSAoc2VsLm1haW5JbmRleCA+IGkgPyAxIDogMCkpO1xuICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbn1cbmhhbmRsZXJzLmRyYWdzdGFydCA9ICh2aWV3LCBldmVudCkgPT4ge1xuICAgIGxldCB7IHNlbGVjdGlvbjogeyBtYWluOiByYW5nZSB9IH0gPSB2aWV3LnN0YXRlO1xuICAgIGlmIChldmVudC50YXJnZXQuZHJhZ2dhYmxlKSB7XG4gICAgICAgIGxldCB0aWxlID0gdmlldy5kb2NWaWV3LnRpbGUubmVhcmVzdChldmVudC50YXJnZXQpO1xuICAgICAgICBpZiAodGlsZSAmJiB0aWxlLmlzV2lkZ2V0KCkpIHtcbiAgICAgICAgICAgIGxldCBmcm9tID0gdGlsZS5wb3NBdFN0YXJ0LCB0byA9IGZyb20gKyB0aWxlLmxlbmd0aDtcbiAgICAgICAgICAgIGlmIChmcm9tID49IHJhbmdlLnRvIHx8IHRvIDw9IHJhbmdlLmZyb20pXG4gICAgICAgICAgICAgICAgcmFuZ2UgPSBFZGl0b3JTZWxlY3Rpb24ucmFuZ2UoZnJvbSwgdG8pO1xuICAgICAgICB9XG4gICAgfVxuICAgIGxldCB7IGlucHV0U3RhdGUgfSA9IHZpZXc7XG4gICAgaWYgKGlucHV0U3RhdGUubW91c2VTZWxlY3Rpb24pXG4gICAgICAgIGlucHV0U3RhdGUubW91c2VTZWxlY3Rpb24uZHJhZ2dpbmcgPSB0cnVlO1xuICAgIGlucHV0U3RhdGUuZHJhZ2dlZENvbnRlbnQgPSByYW5nZTtcbiAgICBpZiAoZXZlbnQuZGF0YVRyYW5zZmVyKSB7XG4gICAgICAgIGV2ZW50LmRhdGFUcmFuc2Zlci5zZXREYXRhKFwiVGV4dFwiLCB0ZXh0RmlsdGVyKHZpZXcuc3RhdGUsIGNsaXBib2FyZE91dHB1dEZpbHRlciwgdmlldy5zdGF0ZS5zbGljZURvYyhyYW5nZS5mcm9tLCByYW5nZS50bykpKTtcbiAgICAgICAgZXZlbnQuZGF0YVRyYW5zZmVyLmVmZmVjdEFsbG93ZWQgPSBcImNvcHlNb3ZlXCI7XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbn07XG5oYW5kbGVycy5kcmFnZW5kID0gdmlldyA9PiB7XG4gICAgdmlldy5pbnB1dFN0YXRlLmRyYWdnZWRDb250ZW50ID0gbnVsbDtcbiAgICByZXR1cm4gZmFsc2U7XG59O1xuZnVuY3Rpb24gZHJvcFRleHQodmlldywgZXZlbnQsIHRleHQsIGRpcmVjdCkge1xuICAgIHRleHQgPSB0ZXh0RmlsdGVyKHZpZXcuc3RhdGUsIGNsaXBib2FyZElucHV0RmlsdGVyLCB0ZXh0KTtcbiAgICBpZiAoIXRleHQpXG4gICAgICAgIHJldHVybjtcbiAgICBsZXQgZHJvcFBvcyA9IHZpZXcucG9zQXRDb29yZHMoeyB4OiBldmVudC5jbGllbnRYLCB5OiBldmVudC5jbGllbnRZIH0sIGZhbHNlKTtcbiAgICBsZXQgeyBkcmFnZ2VkQ29udGVudCB9ID0gdmlldy5pbnB1dFN0YXRlO1xuICAgIGxldCBkZWwgPSBkaXJlY3QgJiYgZHJhZ2dlZENvbnRlbnQgJiYgZHJhZ01vdmVzU2VsZWN0aW9uKHZpZXcsIGV2ZW50KVxuICAgICAgICA/IHsgZnJvbTogZHJhZ2dlZENvbnRlbnQuZnJvbSwgdG86IGRyYWdnZWRDb250ZW50LnRvIH0gOiBudWxsO1xuICAgIGxldCBpbnMgPSB7IGZyb206IGRyb3BQb3MsIGluc2VydDogdGV4dCB9O1xuICAgIGxldCBjaGFuZ2VzID0gdmlldy5zdGF0ZS5jaGFuZ2VzKGRlbCA/IFtkZWwsIGluc10gOiBpbnMpO1xuICAgIHZpZXcuZm9jdXMoKTtcbiAgICB2aWV3LmRpc3BhdGNoKHtcbiAgICAgICAgY2hhbmdlcyxcbiAgICAgICAgc2VsZWN0aW9uOiB7IGFuY2hvcjogY2hhbmdlcy5tYXBQb3MoZHJvcFBvcywgLTEpLCBoZWFkOiBjaGFuZ2VzLm1hcFBvcyhkcm9wUG9zLCAxKSB9LFxuICAgICAgICB1c2VyRXZlbnQ6IGRlbCA/IFwibW92ZS5kcm9wXCIgOiBcImlucHV0LmRyb3BcIlxuICAgIH0pO1xuICAgIHZpZXcuaW5wdXRTdGF0ZS5kcmFnZ2VkQ29udGVudCA9IG51bGw7XG59XG5oYW5kbGVycy5kcm9wID0gKHZpZXcsIGV2ZW50KSA9PiB7XG4gICAgaWYgKCFldmVudC5kYXRhVHJhbnNmZXIpXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICBpZiAodmlldy5zdGF0ZS5yZWFkT25seSlcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgbGV0IGZpbGVzID0gZXZlbnQuZGF0YVRyYW5zZmVyLmZpbGVzO1xuICAgIGlmIChmaWxlcyAmJiBmaWxlcy5sZW5ndGgpIHsgLy8gRm9yIGEgZmlsZSBkcm9wLCByZWFkIHRoZSBmaWxlJ3MgdGV4dC5cbiAgICAgICAgbGV0IHRleHQgPSBBcnJheShmaWxlcy5sZW5ndGgpLCByZWFkID0gMDtcbiAgICAgICAgbGV0IGZpbmlzaEZpbGUgPSAoKSA9PiB7XG4gICAgICAgICAgICBpZiAoKytyZWFkID09IGZpbGVzLmxlbmd0aClcbiAgICAgICAgICAgICAgICBkcm9wVGV4dCh2aWV3LCBldmVudCwgdGV4dC5maWx0ZXIocyA9PiBzICE9IG51bGwpLmpvaW4odmlldy5zdGF0ZS5saW5lQnJlYWspLCBmYWxzZSk7XG4gICAgICAgIH07XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZmlsZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGxldCByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcjtcbiAgICAgICAgICAgIHJlYWRlci5vbmVycm9yID0gZmluaXNoRmlsZTtcbiAgICAgICAgICAgIHJlYWRlci5vbmxvYWQgPSAoKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKCEvW1xceDAwLVxceDA4XFx4MGUtXFx4MWZdezJ9Ly50ZXN0KHJlYWRlci5yZXN1bHQpKVxuICAgICAgICAgICAgICAgICAgICB0ZXh0W2ldID0gcmVhZGVyLnJlc3VsdDtcbiAgICAgICAgICAgICAgICBmaW5pc2hGaWxlKCk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgcmVhZGVyLnJlYWRBc1RleHQoZmlsZXNbaV0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgbGV0IHRleHQgPSBldmVudC5kYXRhVHJhbnNmZXIuZ2V0RGF0YShcIlRleHRcIik7XG4gICAgICAgIGlmICh0ZXh0KSB7XG4gICAgICAgICAgICBkcm9wVGV4dCh2aWV3LCBldmVudCwgdGV4dCwgdHJ1ZSk7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG59O1xuaGFuZGxlcnMucGFzdGUgPSAodmlldywgZXZlbnQpID0+IHtcbiAgICBpZiAodmlldy5zdGF0ZS5yZWFkT25seSlcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgdmlldy5vYnNlcnZlci5mbHVzaCgpO1xuICAgIGxldCBkYXRhID0gYnJva2VuQ2xpcGJvYXJkQVBJID8gbnVsbCA6IGV2ZW50LmNsaXBib2FyZERhdGE7XG4gICAgaWYgKGRhdGEpIHtcbiAgICAgICAgZG9QYXN0ZSh2aWV3LCBkYXRhLmdldERhdGEoXCJ0ZXh0L3BsYWluXCIpIHx8IGRhdGEuZ2V0RGF0YShcInRleHQvdXJpLWxpc3RcIikpO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGNhcHR1cmVQYXN0ZSh2aWV3KTtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbn07XG5mdW5jdGlvbiBjYXB0dXJlQ29weSh2aWV3LCB0ZXh0KSB7XG4gICAgLy8gVGhlIGV4dHJhIHdyYXBwZXIgaXMgc29tZWhvdyBuZWNlc3Nhcnkgb24gSUUvRWRnZSB0byBwcmV2ZW50IHRoZVxuICAgIC8vIGNvbnRlbnQgZnJvbSBiZWluZyBtYW5nbGVkIHdoZW4gaXQgaXMgcHV0IG9udG8gdGhlIGNsaXBib2FyZFxuICAgIGxldCBwYXJlbnQgPSB2aWV3LmRvbS5wYXJlbnROb2RlO1xuICAgIGlmICghcGFyZW50KVxuICAgICAgICByZXR1cm47XG4gICAgbGV0IHRhcmdldCA9IHBhcmVudC5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwidGV4dGFyZWFcIikpO1xuICAgIHRhcmdldC5zdHlsZS5jc3NUZXh0ID0gXCJwb3NpdGlvbjogZml4ZWQ7IGxlZnQ6IC0xMDAwMHB4OyB0b3A6IDEwcHhcIjtcbiAgICB0YXJnZXQudmFsdWUgPSB0ZXh0O1xuICAgIHRhcmdldC5mb2N1cygpO1xuICAgIHRhcmdldC5zZWxlY3Rpb25FbmQgPSB0ZXh0Lmxlbmd0aDtcbiAgICB0YXJnZXQuc2VsZWN0aW9uU3RhcnQgPSAwO1xuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICB0YXJnZXQucmVtb3ZlKCk7XG4gICAgICAgIHZpZXcuZm9jdXMoKTtcbiAgICB9LCA1MCk7XG59XG5mdW5jdGlvbiBjb3BpZWRSYW5nZShzdGF0ZSkge1xuICAgIGxldCBjb250ZW50ID0gW10sIHJhbmdlcyA9IFtdLCBsaW5ld2lzZSA9IGZhbHNlO1xuICAgIGZvciAobGV0IHJhbmdlIG9mIHN0YXRlLnNlbGVjdGlvbi5yYW5nZXMpXG4gICAgICAgIGlmICghcmFuZ2UuZW1wdHkpIHtcbiAgICAgICAgICAgIGNvbnRlbnQucHVzaChzdGF0ZS5zbGljZURvYyhyYW5nZS5mcm9tLCByYW5nZS50bykpO1xuICAgICAgICAgICAgcmFuZ2VzLnB1c2gocmFuZ2UpO1xuICAgICAgICB9XG4gICAgaWYgKCFjb250ZW50Lmxlbmd0aCkge1xuICAgICAgICAvLyBOb3RoaW5nIHNlbGVjdGVkLCBkbyBhIGxpbmUtd2lzZSBjb3B5XG4gICAgICAgIGxldCB1cHRvID0gLTE7XG4gICAgICAgIGZvciAobGV0IHsgZnJvbSB9IG9mIHN0YXRlLnNlbGVjdGlvbi5yYW5nZXMpIHtcbiAgICAgICAgICAgIGxldCBsaW5lID0gc3RhdGUuZG9jLmxpbmVBdChmcm9tKTtcbiAgICAgICAgICAgIGlmIChsaW5lLm51bWJlciA+IHVwdG8pIHtcbiAgICAgICAgICAgICAgICBjb250ZW50LnB1c2gobGluZS50ZXh0KTtcbiAgICAgICAgICAgICAgICByYW5nZXMucHVzaCh7IGZyb206IGxpbmUuZnJvbSwgdG86IE1hdGgubWluKHN0YXRlLmRvYy5sZW5ndGgsIGxpbmUudG8gKyAxKSB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHVwdG8gPSBsaW5lLm51bWJlcjtcbiAgICAgICAgfVxuICAgICAgICBsaW5ld2lzZSA9IHRydWU7XG4gICAgfVxuICAgIHJldHVybiB7IHRleHQ6IHRleHRGaWx0ZXIoc3RhdGUsIGNsaXBib2FyZE91dHB1dEZpbHRlciwgY29udGVudC5qb2luKHN0YXRlLmxpbmVCcmVhaykpLCByYW5nZXMsIGxpbmV3aXNlIH07XG59XG5sZXQgbGFzdExpbmV3aXNlQ29weSA9IG51bGw7XG5oYW5kbGVycy5jb3B5ID0gaGFuZGxlcnMuY3V0ID0gKHZpZXcsIGV2ZW50KSA9PiB7XG4gICAgbGV0IHsgdGV4dCwgcmFuZ2VzLCBsaW5ld2lzZSB9ID0gY29waWVkUmFuZ2Uodmlldy5zdGF0ZSk7XG4gICAgaWYgKCF0ZXh0ICYmICFsaW5ld2lzZSlcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIGxhc3RMaW5ld2lzZUNvcHkgPSBsaW5ld2lzZSA/IHRleHQgOiBudWxsO1xuICAgIGlmIChldmVudC50eXBlID09IFwiY3V0XCIgJiYgIXZpZXcuc3RhdGUucmVhZE9ubHkpXG4gICAgICAgIHZpZXcuZGlzcGF0Y2goe1xuICAgICAgICAgICAgY2hhbmdlczogcmFuZ2VzLFxuICAgICAgICAgICAgc2Nyb2xsSW50b1ZpZXc6IHRydWUsXG4gICAgICAgICAgICB1c2VyRXZlbnQ6IFwiZGVsZXRlLmN1dFwiXG4gICAgICAgIH0pO1xuICAgIGxldCBkYXRhID0gYnJva2VuQ2xpcGJvYXJkQVBJID8gbnVsbCA6IGV2ZW50LmNsaXBib2FyZERhdGE7XG4gICAgaWYgKGRhdGEpIHtcbiAgICAgICAgZGF0YS5jbGVhckRhdGEoKTtcbiAgICAgICAgZGF0YS5zZXREYXRhKFwidGV4dC9wbGFpblwiLCB0ZXh0KTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBjYXB0dXJlQ29weSh2aWV3LCB0ZXh0KTtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbn07XG5jb25zdCBpc0ZvY3VzQ2hhbmdlID0gLypAX19QVVJFX18qL0Fubm90YXRpb24uZGVmaW5lKCk7XG5mdW5jdGlvbiBmb2N1c0NoYW5nZVRyYW5zYWN0aW9uKHN0YXRlLCBmb2N1cykge1xuICAgIGxldCBlZmZlY3RzID0gW107XG4gICAgZm9yIChsZXQgZ2V0RWZmZWN0IG9mIHN0YXRlLmZhY2V0KGZvY3VzQ2hhbmdlRWZmZWN0KSkge1xuICAgICAgICBsZXQgZWZmZWN0ID0gZ2V0RWZmZWN0KHN0YXRlLCBmb2N1cyk7XG4gICAgICAgIGlmIChlZmZlY3QpXG4gICAgICAgICAgICBlZmZlY3RzLnB1c2goZWZmZWN0KTtcbiAgICB9XG4gICAgcmV0dXJuIGVmZmVjdHMubGVuZ3RoID8gc3RhdGUudXBkYXRlKHsgZWZmZWN0cywgYW5ub3RhdGlvbnM6IGlzRm9jdXNDaGFuZ2Uub2YodHJ1ZSkgfSkgOiBudWxsO1xufVxuZnVuY3Rpb24gdXBkYXRlRm9yRm9jdXNDaGFuZ2Uodmlldykge1xuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICBsZXQgZm9jdXMgPSB2aWV3Lmhhc0ZvY3VzO1xuICAgICAgICBpZiAoZm9jdXMgIT0gdmlldy5pbnB1dFN0YXRlLm5vdGlmaWVkRm9jdXNlZCkge1xuICAgICAgICAgICAgbGV0IHRyID0gZm9jdXNDaGFuZ2VUcmFuc2FjdGlvbih2aWV3LnN0YXRlLCBmb2N1cyk7XG4gICAgICAgICAgICBpZiAodHIpXG4gICAgICAgICAgICAgICAgdmlldy5kaXNwYXRjaCh0cik7XG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgdmlldy51cGRhdGUoW10pO1xuICAgICAgICB9XG4gICAgfSwgMTApO1xufVxub2JzZXJ2ZXJzLmZvY3VzID0gdmlldyA9PiB7XG4gICAgdmlldy5pbnB1dFN0YXRlLmxhc3RGb2N1c1RpbWUgPSBEYXRlLm5vdygpO1xuICAgIC8vIFdoZW4gZm9jdXNpbmcgcmVzZXQgdGhlIHNjcm9sbCBwb3NpdGlvbiwgbW92ZSBpdCBiYWNrIHRvIHdoZXJlIGl0IHdhc1xuICAgIGlmICghdmlldy5zY3JvbGxET00uc2Nyb2xsVG9wICYmICh2aWV3LmlucHV0U3RhdGUubGFzdFNjcm9sbFRvcCB8fCB2aWV3LmlucHV0U3RhdGUubGFzdFNjcm9sbExlZnQpKSB7XG4gICAgICAgIHZpZXcuc2Nyb2xsRE9NLnNjcm9sbFRvcCA9IHZpZXcuaW5wdXRTdGF0ZS5sYXN0U2Nyb2xsVG9wO1xuICAgICAgICB2aWV3LnNjcm9sbERPTS5zY3JvbGxMZWZ0ID0gdmlldy5pbnB1dFN0YXRlLmxhc3RTY3JvbGxMZWZ0O1xuICAgIH1cbiAgICB1cGRhdGVGb3JGb2N1c0NoYW5nZSh2aWV3KTtcbn07XG5vYnNlcnZlcnMuYmx1ciA9IHZpZXcgPT4ge1xuICAgIHZpZXcub2JzZXJ2ZXIuY2xlYXJTZWxlY3Rpb25SYW5nZSgpO1xuICAgIHVwZGF0ZUZvckZvY3VzQ2hhbmdlKHZpZXcpO1xufTtcbm9ic2VydmVycy5jb21wb3NpdGlvbnN0YXJ0ID0gb2JzZXJ2ZXJzLmNvbXBvc2l0aW9udXBkYXRlID0gdmlldyA9PiB7XG4gICAgaWYgKHZpZXcub2JzZXJ2ZXIuZWRpdENvbnRleHQpXG4gICAgICAgIHJldHVybjsgLy8gQ29tcG9zaXRpb24gaGFuZGxlZCBieSBlZGl0IGNvbnRleHRcbiAgICBpZiAodmlldy5pbnB1dFN0YXRlLmNvbXBvc2l0aW9uRmlyc3RDaGFuZ2UgPT0gbnVsbClcbiAgICAgICAgdmlldy5pbnB1dFN0YXRlLmNvbXBvc2l0aW9uRmlyc3RDaGFuZ2UgPSB0cnVlO1xuICAgIGlmICh2aWV3LmlucHV0U3RhdGUuY29tcG9zaW5nIDwgMCkge1xuICAgICAgICAvLyBGSVhNRSBwb3NzaWJseSBzZXQgYSB0aW1lb3V0IHRvIGNsZWFyIGl0IGFnYWluIG9uIEFuZHJvaWRcbiAgICAgICAgdmlldy5pbnB1dFN0YXRlLmNvbXBvc2luZyA9IDA7XG4gICAgfVxufTtcbm9ic2VydmVycy5jb21wb3NpdGlvbmVuZCA9IHZpZXcgPT4ge1xuICAgIGlmICh2aWV3Lm9ic2VydmVyLmVkaXRDb250ZXh0KVxuICAgICAgICByZXR1cm47IC8vIENvbXBvc2l0aW9uIGhhbmRsZWQgYnkgZWRpdCBjb250ZXh0XG4gICAgdmlldy5pbnB1dFN0YXRlLmNvbXBvc2luZyA9IC0xO1xuICAgIHZpZXcuaW5wdXRTdGF0ZS5jb21wb3NpdGlvbkVuZGVkQXQgPSBEYXRlLm5vdygpO1xuICAgIHZpZXcuaW5wdXRTdGF0ZS5jb21wb3NpdGlvblBlbmRpbmdLZXkgPSB0cnVlO1xuICAgIHZpZXcuaW5wdXRTdGF0ZS5jb21wb3NpdGlvblBlbmRpbmdDaGFuZ2UgPSB2aWV3Lm9ic2VydmVyLnBlbmRpbmdSZWNvcmRzKCkubGVuZ3RoID4gMDtcbiAgICB2aWV3LmlucHV0U3RhdGUuY29tcG9zaXRpb25GaXJzdENoYW5nZSA9IG51bGw7XG4gICAgaWYgKGJyb3dzZXIuY2hyb21lICYmIGJyb3dzZXIuYW5kcm9pZCkge1xuICAgICAgICAvLyBEZWxheSBmbHVzaGluZyBmb3IgYSBiaXQgb24gQW5kcm9pZCBiZWNhdXNlIGl0J2xsIG9mdGVuIGZpcmUgYVxuICAgICAgICAvLyBidW5jaCBvZiBjb250cmFkaWN0b3J5IGNoYW5nZXMgaW4gYSByb3cgYXQgZW5kIG9mIGNvbXBvc2l0b25cbiAgICAgICAgdmlldy5vYnNlcnZlci5mbHVzaFNvb24oKTtcbiAgICB9XG4gICAgZWxzZSBpZiAodmlldy5pbnB1dFN0YXRlLmNvbXBvc2l0aW9uUGVuZGluZ0NoYW5nZSkge1xuICAgICAgICAvLyBJZiB3ZSBmb3VuZCBwZW5kaW5nIHJlY29yZHMsIHNjaGVkdWxlIGEgZmx1c2guXG4gICAgICAgIFByb21pc2UucmVzb2x2ZSgpLnRoZW4oKCkgPT4gdmlldy5vYnNlcnZlci5mbHVzaCgpKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIC8vIE90aGVyd2lzZSwgbWFrZSBzdXJlIHRoYXQsIGlmIG5vIGNoYW5nZXMgY29tZSBpbiBzb29uLCB0aGVcbiAgICAgICAgLy8gY29tcG9zaXRpb24gdmlldyBpcyBjbGVhcmVkLlxuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgIGlmICh2aWV3LmlucHV0U3RhdGUuY29tcG9zaW5nIDwgMCAmJiB2aWV3LmRvY1ZpZXcuaGFzQ29tcG9zaXRpb24pXG4gICAgICAgICAgICAgICAgdmlldy51cGRhdGUoW10pO1xuICAgICAgICB9LCA1MCk7XG4gICAgfVxufTtcbm9ic2VydmVycy5jb250ZXh0bWVudSA9IHZpZXcgPT4ge1xuICAgIHZpZXcuaW5wdXRTdGF0ZS5sYXN0Q29udGV4dE1lbnUgPSBEYXRlLm5vdygpO1xufTtcbmhhbmRsZXJzLmJlZm9yZWlucHV0ID0gKHZpZXcsIGV2ZW50KSA9PiB7XG4gICAgdmFyIF9hLCBfYjtcbiAgICBpZiAoZXZlbnQuaW5wdXRUeXBlID09IFwiaW5zZXJ0VGV4dFwiIHx8IGV2ZW50LmlucHV0VHlwZSA9PSBcImluc2VydENvbXBvc2l0aW9uVGV4dFwiKSB7XG4gICAgICAgIHZpZXcuaW5wdXRTdGF0ZS5pbnNlcnRpbmdUZXh0ID0gZXZlbnQuZGF0YTtcbiAgICAgICAgdmlldy5pbnB1dFN0YXRlLmluc2VydGluZ1RleHRBdCA9IERhdGUubm93KCk7XG4gICAgfVxuICAgIC8vIEluIEVkaXRDb250ZXh0IG1vZGUsIHdlIG11c3QgaGFuZGxlIGluc2VydFJlcGxhY2VtZW50VGV4dCBldmVudHNcbiAgICAvLyBkaXJlY3RseSwgdG8gbWFrZSBzcGVsbCBjaGVja2luZyBjb3JyZWN0aW9ucyB3b3JrXG4gICAgaWYgKGV2ZW50LmlucHV0VHlwZSA9PSBcImluc2VydFJlcGxhY2VtZW50VGV4dFwiICYmIHZpZXcub2JzZXJ2ZXIuZWRpdENvbnRleHQpIHtcbiAgICAgICAgbGV0IHRleHQgPSAoX2EgPSBldmVudC5kYXRhVHJhbnNmZXIpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5nZXREYXRhKFwidGV4dC9wbGFpblwiKSwgcmFuZ2VzID0gZXZlbnQuZ2V0VGFyZ2V0UmFuZ2VzKCk7XG4gICAgICAgIGlmICh0ZXh0ICYmIHJhbmdlcy5sZW5ndGgpIHtcbiAgICAgICAgICAgIGxldCByID0gcmFuZ2VzWzBdO1xuICAgICAgICAgICAgbGV0IGZyb20gPSB2aWV3LnBvc0F0RE9NKHIuc3RhcnRDb250YWluZXIsIHIuc3RhcnRPZmZzZXQpLCB0byA9IHZpZXcucG9zQXRET00oci5lbmRDb250YWluZXIsIHIuZW5kT2Zmc2V0KTtcbiAgICAgICAgICAgIGFwcGx5RE9NQ2hhbmdlSW5uZXIodmlldywgeyBmcm9tLCB0bywgaW5zZXJ0OiB2aWV3LnN0YXRlLnRvVGV4dCh0ZXh0KSB9LCBudWxsKTtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8vIEJlY2F1c2UgQ2hyb21lIEFuZHJvaWQgZG9lc24ndCBmaXJlIHVzZWZ1bCBrZXkgZXZlbnRzLCB1c2VcbiAgICAvLyBiZWZvcmVpbnB1dCB0byBkZXRlY3QgYmFja3NwYWNlIChhbmQgcG9zc2libHkgZW50ZXIgYW5kIGRlbGV0ZSxcbiAgICAvLyBidXQgdGhvc2UgdXN1YWxseSBkb24ndCBldmVuIHNlZW0gdG8gZmlyZSBiZWZvcmVpbnB1dCBldmVudHMgYXRcbiAgICAvLyB0aGUgbW9tZW50KSBhbmQgZmFrZSBhIGtleSBldmVudCBmb3IgaXQuXG4gICAgLy9cbiAgICAvLyAocHJldmVudERlZmF1bHQgb24gYmVmb3JlaW5wdXQsIHRob3VnaCBzdXBwb3J0ZWQgaW4gdGhlIHNwZWMsXG4gICAgLy8gc2VlbXMgdG8gZG8gbm90aGluZyBhdCBhbGwgb24gQ2hyb21lKS5cbiAgICBsZXQgcGVuZGluZztcbiAgICBpZiAoYnJvd3Nlci5jaHJvbWUgJiYgYnJvd3Nlci5hbmRyb2lkICYmIChwZW5kaW5nID0gUGVuZGluZ0tleXMuZmluZChrZXkgPT4ga2V5LmlucHV0VHlwZSA9PSBldmVudC5pbnB1dFR5cGUpKSkge1xuICAgICAgICB2aWV3Lm9ic2VydmVyLmRlbGF5QW5kcm9pZEtleShwZW5kaW5nLmtleSwgcGVuZGluZy5rZXlDb2RlKTtcbiAgICAgICAgaWYgKHBlbmRpbmcua2V5ID09IFwiQmFja3NwYWNlXCIgfHwgcGVuZGluZy5rZXkgPT0gXCJEZWxldGVcIikge1xuICAgICAgICAgICAgbGV0IHN0YXJ0Vmlld0hlaWdodCA9ICgoX2IgPSB3aW5kb3cudmlzdWFsVmlld3BvcnQpID09PSBudWxsIHx8IF9iID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYi5oZWlnaHQpIHx8IDA7XG4gICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgICB2YXIgX2E7XG4gICAgICAgICAgICAgICAgLy8gQmFja3NwYWNpbmcgbmVhciB1bmVkaXRhYmxlIG5vZGVzIG9uIENocm9tZSBBbmRyb2lkIHNvbWV0aW1lc1xuICAgICAgICAgICAgICAgIC8vIGNsb3NlcyB0aGUgdmlydHVhbCBrZXlib2FyZC4gVGhpcyB0cmllcyB0byBjcnVkZWx5IGRldGVjdFxuICAgICAgICAgICAgICAgIC8vIHRoYXQgYW5kIHJlZm9jdXMgdG8gZ2V0IGl0IGJhY2suXG4gICAgICAgICAgICAgICAgaWYgKCgoKF9hID0gd2luZG93LnZpc3VhbFZpZXdwb3J0KSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuaGVpZ2h0KSB8fCAwKSA+IHN0YXJ0Vmlld0hlaWdodCArIDEwICYmIHZpZXcuaGFzRm9jdXMpIHtcbiAgICAgICAgICAgICAgICAgICAgdmlldy5jb250ZW50RE9NLmJsdXIoKTtcbiAgICAgICAgICAgICAgICAgICAgdmlldy5mb2N1cygpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sIDEwMCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaWYgKGJyb3dzZXIuaW9zICYmIGV2ZW50LmlucHV0VHlwZSA9PSBcImRlbGV0ZUNvbnRlbnRGb3J3YXJkXCIpIHtcbiAgICAgICAgLy8gRm9yIHNvbWUgcmVhc29uLCBET00gY2hhbmdlcyAoYW5kIGJlZm9yZWlucHV0KSBoYXBwZW4gX2JlZm9yZV9cbiAgICAgICAgLy8gdGhlIGtleSBldmVudCBmb3IgY3RybC1kIG9uIGlPUyB3aGVuIHVzaW5nIGFuIGV4dGVybmFsXG4gICAgICAgIC8vIGtleWJvYXJkLlxuICAgICAgICB2aWV3Lm9ic2VydmVyLmZsdXNoU29vbigpO1xuICAgIH1cbiAgICAvLyBTYWZhcmkgd2lsbCBvY2Nhc2lvbmFsbHkgZm9yZ2V0IHRvIGZpcmUgY29tcG9zaXRpb25lbmQgYXQgdGhlIGVuZCBvZiBhIGRlYWQta2V5IGNvbXBvc2l0aW9uXG4gICAgaWYgKGJyb3dzZXIuc2FmYXJpICYmIGV2ZW50LmlucHV0VHlwZSA9PSBcImluc2VydFRleHRcIiAmJiB2aWV3LmlucHV0U3RhdGUuY29tcG9zaW5nID49IDApIHtcbiAgICAgICAgc2V0VGltZW91dCgoKSA9PiBvYnNlcnZlcnMuY29tcG9zaXRpb25lbmQodmlldywgZXZlbnQpLCAyMCk7XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbn07XG5jb25zdCBhcHBsaWVkRmlyZWZveEhhY2sgPSAvKkBfX1BVUkVfXyovbmV3IFNldDtcbi8vIEluIEZpcmVmb3gsIHdoZW4gY3V0L2NvcHkgaGFuZGxlcnMgYXJlIGFkZGVkIHRvIHRoZSBkb2N1bWVudCwgdGhhdFxuLy8gc29tZWhvdyBhdm9pZHMgYSBidWcgd2hlcmUgdGhvc2UgZXZlbnRzIGFyZW4ndCBmaXJlZCB3aGVuIHRoZVxuLy8gc2VsZWN0aW9uIGlzIGVtcHR5LiBTZWUgaHR0cHM6Ly9naXRodWIuY29tL2NvZGVtaXJyb3IvZGV2L2lzc3Vlcy8xMDgyXG4vLyBhbmQgaHR0cHM6Ly9idWd6aWxsYS5tb3ppbGxhLm9yZy9zaG93X2J1Zy5jZ2k/aWQ9OTk1OTYxXG5mdW5jdGlvbiBmaXJlZm94Q29weUN1dEhhY2soZG9jKSB7XG4gICAgaWYgKCFhcHBsaWVkRmlyZWZveEhhY2suaGFzKGRvYykpIHtcbiAgICAgICAgYXBwbGllZEZpcmVmb3hIYWNrLmFkZChkb2MpO1xuICAgICAgICBkb2MuYWRkRXZlbnRMaXN0ZW5lcihcImNvcHlcIiwgKCkgPT4geyB9KTtcbiAgICAgICAgZG9jLmFkZEV2ZW50TGlzdGVuZXIoXCJjdXRcIiwgKCkgPT4geyB9KTtcbiAgICB9XG59XG5cbmNvbnN0IHdyYXBwaW5nV2hpdGVTcGFjZSA9IFtcInByZS13cmFwXCIsIFwibm9ybWFsXCIsIFwicHJlLWxpbmVcIiwgXCJicmVhay1zcGFjZXNcIl07XG4vLyBVc2VkIHRvIHRyYWNrLCBkdXJpbmcgdXBkYXRlSGVpZ2h0LCBpZiBhbnkgYWN0dWFsIGhlaWdodHMgY2hhbmdlZFxubGV0IGhlaWdodENoYW5nZUZsYWcgPSBmYWxzZTtcbmZ1bmN0aW9uIGNsZWFySGVpZ2h0Q2hhbmdlRmxhZygpIHsgaGVpZ2h0Q2hhbmdlRmxhZyA9IGZhbHNlOyB9XG5jbGFzcyBIZWlnaHRPcmFjbGUge1xuICAgIGNvbnN0cnVjdG9yKGxpbmVXcmFwcGluZykge1xuICAgICAgICB0aGlzLmxpbmVXcmFwcGluZyA9IGxpbmVXcmFwcGluZztcbiAgICAgICAgdGhpcy5kb2MgPSBUZXh0LmVtcHR5O1xuICAgICAgICB0aGlzLmhlaWdodFNhbXBsZXMgPSB7fTtcbiAgICAgICAgdGhpcy5saW5lSGVpZ2h0ID0gMTQ7IC8vIFRoZSBoZWlnaHQgb2YgYW4gZW50aXJlIGxpbmUgKGxpbmUtaGVpZ2h0KVxuICAgICAgICB0aGlzLmNoYXJXaWR0aCA9IDc7XG4gICAgICAgIHRoaXMudGV4dEhlaWdodCA9IDE0OyAvLyBUaGUgaGVpZ2h0IG9mIHRoZSBhY3R1YWwgZm9udCAoZm9udC1zaXplKVxuICAgICAgICB0aGlzLmxpbmVMZW5ndGggPSAzMDtcbiAgICB9XG4gICAgaGVpZ2h0Rm9yR2FwKGZyb20sIHRvKSB7XG4gICAgICAgIGxldCBsaW5lcyA9IHRoaXMuZG9jLmxpbmVBdCh0bykubnVtYmVyIC0gdGhpcy5kb2MubGluZUF0KGZyb20pLm51bWJlciArIDE7XG4gICAgICAgIGlmICh0aGlzLmxpbmVXcmFwcGluZylcbiAgICAgICAgICAgIGxpbmVzICs9IE1hdGgubWF4KDAsIE1hdGguY2VpbCgoKHRvIC0gZnJvbSkgLSAobGluZXMgKiB0aGlzLmxpbmVMZW5ndGggKiAwLjUpKSAvIHRoaXMubGluZUxlbmd0aCkpO1xuICAgICAgICByZXR1cm4gdGhpcy5saW5lSGVpZ2h0ICogbGluZXM7XG4gICAgfVxuICAgIGhlaWdodEZvckxpbmUobGVuZ3RoKSB7XG4gICAgICAgIGlmICghdGhpcy5saW5lV3JhcHBpbmcpXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5saW5lSGVpZ2h0O1xuICAgICAgICBsZXQgbGluZXMgPSAxICsgTWF0aC5tYXgoMCwgTWF0aC5jZWlsKChsZW5ndGggLSB0aGlzLmxpbmVMZW5ndGgpIC8gTWF0aC5tYXgoMSwgdGhpcy5saW5lTGVuZ3RoIC0gNSkpKTtcbiAgICAgICAgcmV0dXJuIGxpbmVzICogdGhpcy5saW5lSGVpZ2h0O1xuICAgIH1cbiAgICBzZXREb2MoZG9jKSB7IHRoaXMuZG9jID0gZG9jOyByZXR1cm4gdGhpczsgfVxuICAgIG11c3RSZWZyZXNoRm9yV3JhcHBpbmcod2hpdGVTcGFjZSkge1xuICAgICAgICByZXR1cm4gKHdyYXBwaW5nV2hpdGVTcGFjZS5pbmRleE9mKHdoaXRlU3BhY2UpID4gLTEpICE9IHRoaXMubGluZVdyYXBwaW5nO1xuICAgIH1cbiAgICBtdXN0UmVmcmVzaEZvckhlaWdodHMobGluZUhlaWdodHMpIHtcbiAgICAgICAgbGV0IG5ld0hlaWdodCA9IGZhbHNlO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxpbmVIZWlnaHRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBsZXQgaCA9IGxpbmVIZWlnaHRzW2ldO1xuICAgICAgICAgICAgaWYgKGggPCAwKSB7XG4gICAgICAgICAgICAgICAgaSsrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoIXRoaXMuaGVpZ2h0U2FtcGxlc1tNYXRoLmZsb29yKGggKiAxMCldKSB7IC8vIFJvdW5kIHRvIC4xIHBpeGVsc1xuICAgICAgICAgICAgICAgIG5ld0hlaWdodCA9IHRydWU7XG4gICAgICAgICAgICAgICAgdGhpcy5oZWlnaHRTYW1wbGVzW01hdGguZmxvb3IoaCAqIDEwKV0gPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXdIZWlnaHQ7XG4gICAgfVxuICAgIHJlZnJlc2god2hpdGVTcGFjZSwgbGluZUhlaWdodCwgY2hhcldpZHRoLCB0ZXh0SGVpZ2h0LCBsaW5lTGVuZ3RoLCBrbm93bkhlaWdodHMpIHtcbiAgICAgICAgbGV0IGxpbmVXcmFwcGluZyA9IHdyYXBwaW5nV2hpdGVTcGFjZS5pbmRleE9mKHdoaXRlU3BhY2UpID4gLTE7XG4gICAgICAgIGxldCBjaGFuZ2VkID0gTWF0aC5yb3VuZChsaW5lSGVpZ2h0KSAhPSBNYXRoLnJvdW5kKHRoaXMubGluZUhlaWdodCkgfHwgdGhpcy5saW5lV3JhcHBpbmcgIT0gbGluZVdyYXBwaW5nO1xuICAgICAgICB0aGlzLmxpbmVXcmFwcGluZyA9IGxpbmVXcmFwcGluZztcbiAgICAgICAgdGhpcy5saW5lSGVpZ2h0ID0gbGluZUhlaWdodDtcbiAgICAgICAgdGhpcy5jaGFyV2lkdGggPSBjaGFyV2lkdGg7XG4gICAgICAgIHRoaXMudGV4dEhlaWdodCA9IHRleHRIZWlnaHQ7XG4gICAgICAgIHRoaXMubGluZUxlbmd0aCA9IGxpbmVMZW5ndGg7XG4gICAgICAgIGlmIChjaGFuZ2VkKSB7XG4gICAgICAgICAgICB0aGlzLmhlaWdodFNhbXBsZXMgPSB7fTtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwga25vd25IZWlnaHRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgbGV0IGggPSBrbm93bkhlaWdodHNbaV07XG4gICAgICAgICAgICAgICAgaWYgKGggPCAwKVxuICAgICAgICAgICAgICAgICAgICBpKys7XG4gICAgICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgICAgICB0aGlzLmhlaWdodFNhbXBsZXNbTWF0aC5mbG9vcihoICogMTApXSA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGNoYW5nZWQ7XG4gICAgfVxufVxuLy8gVGhpcyBvYmplY3QgaXMgdXNlZCBieSBgdXBkYXRlSGVpZ2h0YCB0byBtYWtlIERPTSBtZWFzdXJlbWVudHNcbi8vIGFycml2ZSBhdCB0aGUgcmlnaHQgbm9kZXMuIFRoZSBgaGVpZ2h0c2AgYXJyYXkgaXMgYSBzZXF1ZW5jZSBvZlxuLy8gYmxvY2sgaGVpZ2h0cywgc3RhcnRpbmcgZnJvbSBwb3NpdGlvbiBgZnJvbWAuXG5jbGFzcyBNZWFzdXJlZEhlaWdodHMge1xuICAgIGNvbnN0cnVjdG9yKGZyb20sIGhlaWdodHMpIHtcbiAgICAgICAgdGhpcy5mcm9tID0gZnJvbTtcbiAgICAgICAgdGhpcy5oZWlnaHRzID0gaGVpZ2h0cztcbiAgICAgICAgdGhpcy5pbmRleCA9IDA7XG4gICAgfVxuICAgIGdldCBtb3JlKCkgeyByZXR1cm4gdGhpcy5pbmRleCA8IHRoaXMuaGVpZ2h0cy5sZW5ndGg7IH1cbn1cbi8qKlxuUmVjb3JkIHVzZWQgdG8gcmVwcmVzZW50IGluZm9ybWF0aW9uIGFib3V0IGEgYmxvY2stbGV2ZWwgZWxlbWVudFxuaW4gdGhlIGVkaXRvciB2aWV3LlxuKi9cbmNsYXNzIEJsb2NrSW5mbyB7XG4gICAgLyoqXG4gICAgQGludGVybmFsXG4gICAgKi9cbiAgICBjb25zdHJ1Y3RvcihcbiAgICAvKipcbiAgICBUaGUgc3RhcnQgb2YgdGhlIGVsZW1lbnQgaW4gdGhlIGRvY3VtZW50LlxuICAgICovXG4gICAgZnJvbSwgXG4gICAgLyoqXG4gICAgVGhlIGxlbmd0aCBvZiB0aGUgZWxlbWVudC5cbiAgICAqL1xuICAgIGxlbmd0aCwgXG4gICAgLyoqXG4gICAgVGhlIHRvcCBwb3NpdGlvbiBvZiB0aGUgZWxlbWVudCAocmVsYXRpdmUgdG8gdGhlIHRvcCBvZiB0aGVcbiAgICBkb2N1bWVudCkuXG4gICAgKi9cbiAgICB0b3AsIFxuICAgIC8qKlxuICAgIEl0cyBoZWlnaHQuXG4gICAgKi9cbiAgICBoZWlnaHQsIFxuICAgIC8qKlxuICAgIEBpbnRlcm5hbCBXZWlyZCBwYWNrZWQgZmllbGQgdGhhdCBob2xkcyBhbiBhcnJheSBvZiBjaGlsZHJlblxuICAgIGZvciBjb21wb3NpdGUgYmxvY2tzLCBhIGRlY29yYXRpb24gZm9yIGJsb2NrIHdpZGdldHMsIGFuZCBhXG4gICAgbnVtYmVyIGluZGljYXRpbmcgdGhlIGFtb3VudCBvZiB3aWRnZXQtY3JlYXRlZCBsaW5lIGJyZWFrcyBmb3JcbiAgICB0ZXh0IGJsb2Nrcy5cbiAgICAqL1xuICAgIF9jb250ZW50KSB7XG4gICAgICAgIHRoaXMuZnJvbSA9IGZyb207XG4gICAgICAgIHRoaXMubGVuZ3RoID0gbGVuZ3RoO1xuICAgICAgICB0aGlzLnRvcCA9IHRvcDtcbiAgICAgICAgdGhpcy5oZWlnaHQgPSBoZWlnaHQ7XG4gICAgICAgIHRoaXMuX2NvbnRlbnQgPSBfY29udGVudDtcbiAgICB9XG4gICAgLyoqXG4gICAgVGhlIHR5cGUgb2YgZWxlbWVudCB0aGlzIGlzLiBXaGVuIHF1ZXJ5aW5nIGxpbmVzLCB0aGlzIG1heSBiZVxuICAgIGFuIGFycmF5IG9mIGFsbCB0aGUgYmxvY2tzIHRoYXQgbWFrZSB1cCB0aGUgbGluZS5cbiAgICAqL1xuICAgIGdldCB0eXBlKCkge1xuICAgICAgICByZXR1cm4gdHlwZW9mIHRoaXMuX2NvbnRlbnQgPT0gXCJudW1iZXJcIiA/IEJsb2NrVHlwZS5UZXh0IDpcbiAgICAgICAgICAgIEFycmF5LmlzQXJyYXkodGhpcy5fY29udGVudCkgPyB0aGlzLl9jb250ZW50IDogdGhpcy5fY29udGVudC50eXBlO1xuICAgIH1cbiAgICAvKipcbiAgICBUaGUgZW5kIG9mIHRoZSBlbGVtZW50IGFzIGEgZG9jdW1lbnQgcG9zaXRpb24uXG4gICAgKi9cbiAgICBnZXQgdG8oKSB7IHJldHVybiB0aGlzLmZyb20gKyB0aGlzLmxlbmd0aDsgfVxuICAgIC8qKlxuICAgIFRoZSBib3R0b20gcG9zaXRpb24gb2YgdGhlIGVsZW1lbnQuXG4gICAgKi9cbiAgICBnZXQgYm90dG9tKCkgeyByZXR1cm4gdGhpcy50b3AgKyB0aGlzLmhlaWdodDsgfVxuICAgIC8qKlxuICAgIElmIHRoaXMgaXMgYSB3aWRnZXQgYmxvY2ssIHRoaXMgd2lsbCByZXR1cm4gdGhlIHdpZGdldFxuICAgIGFzc29jaWF0ZWQgd2l0aCBpdC5cbiAgICAqL1xuICAgIGdldCB3aWRnZXQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9jb250ZW50IGluc3RhbmNlb2YgUG9pbnREZWNvcmF0aW9uID8gdGhpcy5fY29udGVudC53aWRnZXQgOiBudWxsO1xuICAgIH1cbiAgICAvKipcbiAgICBJZiB0aGlzIGlzIGEgdGV4dGJsb2NrLCB0aGlzIGhvbGRzIHRoZSBudW1iZXIgb2YgbGluZSBicmVha3NcbiAgICB0aGF0IGFwcGVhciBpbiB3aWRnZXRzIGluc2lkZSB0aGUgYmxvY2suXG4gICAgKi9cbiAgICBnZXQgd2lkZ2V0TGluZUJyZWFrcygpIHtcbiAgICAgICAgcmV0dXJuIHR5cGVvZiB0aGlzLl9jb250ZW50ID09IFwibnVtYmVyXCIgPyB0aGlzLl9jb250ZW50IDogMDtcbiAgICB9XG4gICAgLyoqXG4gICAgQGludGVybmFsXG4gICAgKi9cbiAgICBqb2luKG90aGVyKSB7XG4gICAgICAgIGxldCBjb250ZW50ID0gKEFycmF5LmlzQXJyYXkodGhpcy5fY29udGVudCkgPyB0aGlzLl9jb250ZW50IDogW3RoaXNdKVxuICAgICAgICAgICAgLmNvbmNhdChBcnJheS5pc0FycmF5KG90aGVyLl9jb250ZW50KSA/IG90aGVyLl9jb250ZW50IDogW290aGVyXSk7XG4gICAgICAgIHJldHVybiBuZXcgQmxvY2tJbmZvKHRoaXMuZnJvbSwgdGhpcy5sZW5ndGggKyBvdGhlci5sZW5ndGgsIHRoaXMudG9wLCB0aGlzLmhlaWdodCArIG90aGVyLmhlaWdodCwgY29udGVudCk7XG4gICAgfVxufVxudmFyIFF1ZXJ5VHlwZSA9IC8qQF9fUFVSRV9fKi8oZnVuY3Rpb24gKFF1ZXJ5VHlwZSkge1xuICAgIFF1ZXJ5VHlwZVtRdWVyeVR5cGVbXCJCeVBvc1wiXSA9IDBdID0gXCJCeVBvc1wiO1xuICAgIFF1ZXJ5VHlwZVtRdWVyeVR5cGVbXCJCeUhlaWdodFwiXSA9IDFdID0gXCJCeUhlaWdodFwiO1xuICAgIFF1ZXJ5VHlwZVtRdWVyeVR5cGVbXCJCeVBvc05vSGVpZ2h0XCJdID0gMl0gPSBcIkJ5UG9zTm9IZWlnaHRcIjtcbnJldHVybiBRdWVyeVR5cGV9KShRdWVyeVR5cGUgfHwgKFF1ZXJ5VHlwZSA9IHt9KSk7XG5jb25zdCBFcHNpbG9uID0gMWUtMztcbmNsYXNzIEhlaWdodE1hcCB7XG4gICAgY29uc3RydWN0b3IobGVuZ3RoLCAvLyBUaGUgbnVtYmVyIG9mIGNoYXJhY3RlcnMgY292ZXJlZFxuICAgIGhlaWdodCwgLy8gSGVpZ2h0IG9mIHRoaXMgcGFydCBvZiB0aGUgZG9jdW1lbnRcbiAgICBmbGFncyA9IDIgLyogRmxhZy5PdXRkYXRlZCAqLykge1xuICAgICAgICB0aGlzLmxlbmd0aCA9IGxlbmd0aDtcbiAgICAgICAgdGhpcy5oZWlnaHQgPSBoZWlnaHQ7XG4gICAgICAgIHRoaXMuZmxhZ3MgPSBmbGFncztcbiAgICB9XG4gICAgZ2V0IG91dGRhdGVkKCkgeyByZXR1cm4gKHRoaXMuZmxhZ3MgJiAyIC8qIEZsYWcuT3V0ZGF0ZWQgKi8pID4gMDsgfVxuICAgIHNldCBvdXRkYXRlZCh2YWx1ZSkgeyB0aGlzLmZsYWdzID0gKHZhbHVlID8gMiAvKiBGbGFnLk91dGRhdGVkICovIDogMCkgfCAodGhpcy5mbGFncyAmIH4yIC8qIEZsYWcuT3V0ZGF0ZWQgKi8pOyB9XG4gICAgc2V0SGVpZ2h0KGhlaWdodCkge1xuICAgICAgICBpZiAodGhpcy5oZWlnaHQgIT0gaGVpZ2h0KSB7XG4gICAgICAgICAgICBpZiAoTWF0aC5hYnModGhpcy5oZWlnaHQgLSBoZWlnaHQpID4gRXBzaWxvbilcbiAgICAgICAgICAgICAgICBoZWlnaHRDaGFuZ2VGbGFnID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMuaGVpZ2h0ID0gaGVpZ2h0O1xuICAgICAgICB9XG4gICAgfVxuICAgIC8vIEJhc2UgY2FzZSBpcyB0byByZXBsYWNlIGEgbGVhZiBub2RlLCB3aGljaCBzaW1wbHkgYnVpbGRzIGEgdHJlZVxuICAgIC8vIGZyb20gdGhlIG5ldyBub2RlcyBhbmQgcmV0dXJucyB0aGF0IChIZWlnaHRNYXBCcmFuY2ggYW5kXG4gICAgLy8gSGVpZ2h0TWFwR2FwIG92ZXJyaWRlIHRoaXMgdG8gYWN0dWFsbHkgdXNlIGZyb20vdG8pXG4gICAgcmVwbGFjZShfZnJvbSwgX3RvLCBub2Rlcykge1xuICAgICAgICByZXR1cm4gSGVpZ2h0TWFwLm9mKG5vZGVzKTtcbiAgICB9XG4gICAgLy8gQWdhaW4sIHRoZXNlIGFyZSBiYXNlIGNhc2VzLCBhbmQgYXJlIG92ZXJyaWRkZW4gZm9yIGJyYW5jaCBhbmQgZ2FwIG5vZGVzLlxuICAgIGRlY29tcG9zZUxlZnQoX3RvLCByZXN1bHQpIHsgcmVzdWx0LnB1c2godGhpcyk7IH1cbiAgICBkZWNvbXBvc2VSaWdodChfZnJvbSwgcmVzdWx0KSB7IHJlc3VsdC5wdXNoKHRoaXMpOyB9XG4gICAgYXBwbHlDaGFuZ2VzKGRlY29yYXRpb25zLCBvbGREb2MsIG9yYWNsZSwgY2hhbmdlcykge1xuICAgICAgICBsZXQgbWUgPSB0aGlzLCBkb2MgPSBvcmFjbGUuZG9jO1xuICAgICAgICBmb3IgKGxldCBpID0gY2hhbmdlcy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuICAgICAgICAgICAgbGV0IHsgZnJvbUEsIHRvQSwgZnJvbUIsIHRvQiB9ID0gY2hhbmdlc1tpXTtcbiAgICAgICAgICAgIGxldCBzdGFydCA9IG1lLmxpbmVBdChmcm9tQSwgUXVlcnlUeXBlLkJ5UG9zTm9IZWlnaHQsIG9yYWNsZS5zZXREb2Mob2xkRG9jKSwgMCwgMCk7XG4gICAgICAgICAgICBsZXQgZW5kID0gc3RhcnQudG8gPj0gdG9BID8gc3RhcnQgOiBtZS5saW5lQXQodG9BLCBRdWVyeVR5cGUuQnlQb3NOb0hlaWdodCwgb3JhY2xlLCAwLCAwKTtcbiAgICAgICAgICAgIHRvQiArPSBlbmQudG8gLSB0b0E7XG4gICAgICAgICAgICB0b0EgPSBlbmQudG87XG4gICAgICAgICAgICB3aGlsZSAoaSA+IDAgJiYgc3RhcnQuZnJvbSA8PSBjaGFuZ2VzW2kgLSAxXS50b0EpIHtcbiAgICAgICAgICAgICAgICBmcm9tQSA9IGNoYW5nZXNbaSAtIDFdLmZyb21BO1xuICAgICAgICAgICAgICAgIGZyb21CID0gY2hhbmdlc1tpIC0gMV0uZnJvbUI7XG4gICAgICAgICAgICAgICAgaS0tO1xuICAgICAgICAgICAgICAgIGlmIChmcm9tQSA8IHN0YXJ0LmZyb20pXG4gICAgICAgICAgICAgICAgICAgIHN0YXJ0ID0gbWUubGluZUF0KGZyb21BLCBRdWVyeVR5cGUuQnlQb3NOb0hlaWdodCwgb3JhY2xlLCAwLCAwKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZyb21CICs9IHN0YXJ0LmZyb20gLSBmcm9tQTtcbiAgICAgICAgICAgIGZyb21BID0gc3RhcnQuZnJvbTtcbiAgICAgICAgICAgIGxldCBub2RlcyA9IE5vZGVCdWlsZGVyLmJ1aWxkKG9yYWNsZS5zZXREb2MoZG9jKSwgZGVjb3JhdGlvbnMsIGZyb21CLCB0b0IpO1xuICAgICAgICAgICAgbWUgPSByZXBsYWNlKG1lLCBtZS5yZXBsYWNlKGZyb21BLCB0b0EsIG5vZGVzKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG1lLnVwZGF0ZUhlaWdodChvcmFjbGUsIDApO1xuICAgIH1cbiAgICBzdGF0aWMgZW1wdHkoKSB7IHJldHVybiBuZXcgSGVpZ2h0TWFwVGV4dCgwLCAwLCAwKTsgfVxuICAgIC8vIG5vZGVzIHVzZXMgbnVsbCB2YWx1ZXMgdG8gaW5kaWNhdGUgdGhlIHBvc2l0aW9uIG9mIGxpbmUgYnJlYWtzLlxuICAgIC8vIFRoZXJlIGFyZSBuZXZlciBsaW5lIGJyZWFrcyBhdCB0aGUgc3RhcnQgb3IgZW5kIG9mIHRoZSBhcnJheSwgb3JcbiAgICAvLyB0d28gbGluZSBicmVha3MgbmV4dCB0byBlYWNoIG90aGVyLCBhbmQgdGhlIGFycmF5IGlzbid0IGFsbG93ZWRcbiAgICAvLyB0byBiZSBlbXB0eSAoc2FtZSByZXN0cmljdGlvbnMgYXMgcmV0dXJuIHZhbHVlIGZyb20gdGhlIGJ1aWxkZXIpLlxuICAgIHN0YXRpYyBvZihub2Rlcykge1xuICAgICAgICBpZiAobm9kZXMubGVuZ3RoID09IDEpXG4gICAgICAgICAgICByZXR1cm4gbm9kZXNbMF07XG4gICAgICAgIGxldCBpID0gMCwgaiA9IG5vZGVzLmxlbmd0aCwgYmVmb3JlID0gMCwgYWZ0ZXIgPSAwO1xuICAgICAgICBmb3IgKDs7KSB7XG4gICAgICAgICAgICBpZiAoaSA9PSBqKSB7XG4gICAgICAgICAgICAgICAgaWYgKGJlZm9yZSA+IGFmdGVyICogMikge1xuICAgICAgICAgICAgICAgICAgICBsZXQgc3BsaXQgPSBub2Rlc1tpIC0gMV07XG4gICAgICAgICAgICAgICAgICAgIGlmIChzcGxpdC5icmVhaylcbiAgICAgICAgICAgICAgICAgICAgICAgIG5vZGVzLnNwbGljZSgtLWksIDEsIHNwbGl0LmxlZnQsIG51bGwsIHNwbGl0LnJpZ2h0KTtcbiAgICAgICAgICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgICAgICAgICAgbm9kZXMuc3BsaWNlKC0taSwgMSwgc3BsaXQubGVmdCwgc3BsaXQucmlnaHQpO1xuICAgICAgICAgICAgICAgICAgICBqICs9IDEgKyBzcGxpdC5icmVhaztcbiAgICAgICAgICAgICAgICAgICAgYmVmb3JlIC09IHNwbGl0LnNpemU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGFmdGVyID4gYmVmb3JlICogMikge1xuICAgICAgICAgICAgICAgICAgICBsZXQgc3BsaXQgPSBub2Rlc1tqXTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHNwbGl0LmJyZWFrKVxuICAgICAgICAgICAgICAgICAgICAgICAgbm9kZXMuc3BsaWNlKGosIDEsIHNwbGl0LmxlZnQsIG51bGwsIHNwbGl0LnJpZ2h0KTtcbiAgICAgICAgICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgICAgICAgICAgbm9kZXMuc3BsaWNlKGosIDEsIHNwbGl0LmxlZnQsIHNwbGl0LnJpZ2h0KTtcbiAgICAgICAgICAgICAgICAgICAgaiArPSAyICsgc3BsaXQuYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGFmdGVyIC09IHNwbGl0LnNpemU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChiZWZvcmUgPCBhZnRlcikge1xuICAgICAgICAgICAgICAgIGxldCBuZXh0ID0gbm9kZXNbaSsrXTtcbiAgICAgICAgICAgICAgICBpZiAobmV4dClcbiAgICAgICAgICAgICAgICAgICAgYmVmb3JlICs9IG5leHQuc2l6ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGxldCBuZXh0ID0gbm9kZXNbLS1qXTtcbiAgICAgICAgICAgICAgICBpZiAobmV4dClcbiAgICAgICAgICAgICAgICAgICAgYWZ0ZXIgKz0gbmV4dC5zaXplO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGxldCBicmsgPSAwO1xuICAgICAgICBpZiAobm9kZXNbaSAtIDFdID09IG51bGwpIHtcbiAgICAgICAgICAgIGJyayA9IDE7XG4gICAgICAgICAgICBpLS07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAobm9kZXNbaV0gPT0gbnVsbCkge1xuICAgICAgICAgICAgYnJrID0gMTtcbiAgICAgICAgICAgIGorKztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbmV3IEhlaWdodE1hcEJyYW5jaChIZWlnaHRNYXAub2Yobm9kZXMuc2xpY2UoMCwgaSkpLCBicmssIEhlaWdodE1hcC5vZihub2Rlcy5zbGljZShqKSkpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIHJlcGxhY2Uob2xkLCB2YWwpIHtcbiAgICBpZiAob2xkID09IHZhbClcbiAgICAgICAgcmV0dXJuIG9sZDtcbiAgICBpZiAob2xkLmNvbnN0cnVjdG9yICE9IHZhbC5jb25zdHJ1Y3RvcilcbiAgICAgICAgaGVpZ2h0Q2hhbmdlRmxhZyA9IHRydWU7XG4gICAgcmV0dXJuIHZhbDtcbn1cbkhlaWdodE1hcC5wcm90b3R5cGUuc2l6ZSA9IDE7XG5jb25zdCBTcGFjZURlY28gPSAvKkBfX1BVUkVfXyovRGVjb3JhdGlvbi5yZXBsYWNlKHt9KTtcbmNsYXNzIEhlaWdodE1hcEJsb2NrIGV4dGVuZHMgSGVpZ2h0TWFwIHtcbiAgICBjb25zdHJ1Y3RvcihsZW5ndGgsIGhlaWdodCwgZGVjbykge1xuICAgICAgICBzdXBlcihsZW5ndGgsIGhlaWdodCk7XG4gICAgICAgIHRoaXMuZGVjbyA9IGRlY287XG4gICAgICAgIHRoaXMuc3BhY2VBYm92ZSA9IDA7XG4gICAgfVxuICAgIG1haW5CbG9jayh0b3AsIG9mZnNldCkge1xuICAgICAgICByZXR1cm4gbmV3IEJsb2NrSW5mbyhvZmZzZXQsIHRoaXMubGVuZ3RoLCB0b3AgKyB0aGlzLnNwYWNlQWJvdmUsIHRoaXMuaGVpZ2h0IC0gdGhpcy5zcGFjZUFib3ZlLCB0aGlzLmRlY28gfHwgMCk7XG4gICAgfVxuICAgIGJsb2NrQXQoaGVpZ2h0LCBfb3JhY2xlLCB0b3AsIG9mZnNldCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zcGFjZUFib3ZlICYmIGhlaWdodCA8IHRvcCArIHRoaXMuc3BhY2VBYm92ZSA/IG5ldyBCbG9ja0luZm8ob2Zmc2V0LCAwLCB0b3AsIHRoaXMuc3BhY2VBYm92ZSwgU3BhY2VEZWNvKVxuICAgICAgICAgICAgOiB0aGlzLm1haW5CbG9jayh0b3AsIG9mZnNldCk7XG4gICAgfVxuICAgIGxpbmVBdChfdmFsdWUsIF90eXBlLCBvcmFjbGUsIHRvcCwgb2Zmc2V0KSB7XG4gICAgICAgIGxldCBtYWluID0gdGhpcy5tYWluQmxvY2sodG9wLCBvZmZzZXQpO1xuICAgICAgICByZXR1cm4gdGhpcy5zcGFjZUFib3ZlID8gdGhpcy5ibG9ja0F0KDAsIG9yYWNsZSwgdG9wLCBvZmZzZXQpLmpvaW4obWFpbikgOiBtYWluO1xuICAgIH1cbiAgICBmb3JFYWNoTGluZShmcm9tLCB0bywgb3JhY2xlLCB0b3AsIG9mZnNldCwgZikge1xuICAgICAgICBpZiAoZnJvbSA8PSBvZmZzZXQgKyB0aGlzLmxlbmd0aCAmJiB0byA+PSBvZmZzZXQpXG4gICAgICAgICAgICBmKHRoaXMubGluZUF0KDAsIFF1ZXJ5VHlwZS5CeVBvcywgb3JhY2xlLCB0b3AsIG9mZnNldCkpO1xuICAgIH1cbiAgICBzZXRNZWFzdXJlZEhlaWdodChtZWFzdXJlZCkge1xuICAgICAgICBsZXQgbmV4dCA9IG1lYXN1cmVkLmhlaWdodHNbbWVhc3VyZWQuaW5kZXgrK107XG4gICAgICAgIGlmIChuZXh0IDwgMCkge1xuICAgICAgICAgICAgdGhpcy5zcGFjZUFib3ZlID0gLW5leHQ7XG4gICAgICAgICAgICBuZXh0ID0gbWVhc3VyZWQuaGVpZ2h0c1ttZWFzdXJlZC5pbmRleCsrXTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuc3BhY2VBYm92ZSA9IDA7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5zZXRIZWlnaHQobmV4dCk7XG4gICAgfVxuICAgIHVwZGF0ZUhlaWdodChvcmFjbGUsIG9mZnNldCA9IDAsIF9mb3JjZSA9IGZhbHNlLCBtZWFzdXJlZCkge1xuICAgICAgICBpZiAobWVhc3VyZWQgJiYgbWVhc3VyZWQuZnJvbSA8PSBvZmZzZXQgJiYgbWVhc3VyZWQubW9yZSlcbiAgICAgICAgICAgIHRoaXMuc2V0TWVhc3VyZWRIZWlnaHQobWVhc3VyZWQpO1xuICAgICAgICB0aGlzLm91dGRhdGVkID0gZmFsc2U7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICB0b1N0cmluZygpIHsgcmV0dXJuIGBibG9jaygke3RoaXMubGVuZ3RofSlgOyB9XG59XG5jbGFzcyBIZWlnaHRNYXBUZXh0IGV4dGVuZHMgSGVpZ2h0TWFwQmxvY2sge1xuICAgIGNvbnN0cnVjdG9yKGxlbmd0aCwgaGVpZ2h0LCBhYm92ZSkge1xuICAgICAgICBzdXBlcihsZW5ndGgsIGhlaWdodCwgbnVsbCk7XG4gICAgICAgIHRoaXMuY29sbGFwc2VkID0gMDsgLy8gQW1vdW50IG9mIGNvbGxhcHNlZCBjb250ZW50IGluIHRoZSBsaW5lXG4gICAgICAgIHRoaXMud2lkZ2V0SGVpZ2h0ID0gMDsgLy8gTWF4aW11bSBpbmxpbmUgd2lkZ2V0IGhlaWdodFxuICAgICAgICB0aGlzLmJyZWFrcyA9IDA7IC8vIE51bWJlciBvZiB3aWRnZXQtaW50cm9kdWNlZCBsaW5lIGJyZWFrcyBvbiB0aGUgbGluZVxuICAgICAgICB0aGlzLnNwYWNlQWJvdmUgPSBhYm92ZTtcbiAgICB9XG4gICAgbWFpbkJsb2NrKHRvcCwgb2Zmc2V0KSB7XG4gICAgICAgIHJldHVybiBuZXcgQmxvY2tJbmZvKG9mZnNldCwgdGhpcy5sZW5ndGgsIHRvcCArIHRoaXMuc3BhY2VBYm92ZSwgdGhpcy5oZWlnaHQgLSB0aGlzLnNwYWNlQWJvdmUsIHRoaXMuYnJlYWtzKTtcbiAgICB9XG4gICAgcmVwbGFjZShfZnJvbSwgX3RvLCBub2Rlcykge1xuICAgICAgICBsZXQgbm9kZSA9IG5vZGVzWzBdO1xuICAgICAgICBpZiAobm9kZXMubGVuZ3RoID09IDEgJiYgKG5vZGUgaW5zdGFuY2VvZiBIZWlnaHRNYXBUZXh0IHx8IG5vZGUgaW5zdGFuY2VvZiBIZWlnaHRNYXBHYXAgJiYgKG5vZGUuZmxhZ3MgJiA0IC8qIEZsYWcuU2luZ2xlTGluZSAqLykpICYmXG4gICAgICAgICAgICBNYXRoLmFicyh0aGlzLmxlbmd0aCAtIG5vZGUubGVuZ3RoKSA8IDEwKSB7XG4gICAgICAgICAgICBpZiAobm9kZSBpbnN0YW5jZW9mIEhlaWdodE1hcEdhcClcbiAgICAgICAgICAgICAgICBub2RlID0gbmV3IEhlaWdodE1hcFRleHQobm9kZS5sZW5ndGgsIHRoaXMuaGVpZ2h0LCB0aGlzLnNwYWNlQWJvdmUpO1xuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgIG5vZGUuaGVpZ2h0ID0gdGhpcy5oZWlnaHQ7XG4gICAgICAgICAgICBpZiAoIXRoaXMub3V0ZGF0ZWQpXG4gICAgICAgICAgICAgICAgbm9kZS5vdXRkYXRlZCA9IGZhbHNlO1xuICAgICAgICAgICAgcmV0dXJuIG5vZGU7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gSGVpZ2h0TWFwLm9mKG5vZGVzKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICB1cGRhdGVIZWlnaHQob3JhY2xlLCBvZmZzZXQgPSAwLCBmb3JjZSA9IGZhbHNlLCBtZWFzdXJlZCkge1xuICAgICAgICBpZiAobWVhc3VyZWQgJiYgbWVhc3VyZWQuZnJvbSA8PSBvZmZzZXQgJiYgbWVhc3VyZWQubW9yZSkge1xuICAgICAgICAgICAgdGhpcy5zZXRNZWFzdXJlZEhlaWdodChtZWFzdXJlZCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoZm9yY2UgfHwgdGhpcy5vdXRkYXRlZCkge1xuICAgICAgICAgICAgdGhpcy5zcGFjZUFib3ZlID0gMDtcbiAgICAgICAgICAgIHRoaXMuc2V0SGVpZ2h0KE1hdGgubWF4KHRoaXMud2lkZ2V0SGVpZ2h0LCBvcmFjbGUuaGVpZ2h0Rm9yTGluZSh0aGlzLmxlbmd0aCAtIHRoaXMuY29sbGFwc2VkKSkgK1xuICAgICAgICAgICAgICAgIHRoaXMuYnJlYWtzICogb3JhY2xlLmxpbmVIZWlnaHQpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMub3V0ZGF0ZWQgPSBmYWxzZTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIHRvU3RyaW5nKCkge1xuICAgICAgICByZXR1cm4gYGxpbmUoJHt0aGlzLmxlbmd0aH0ke3RoaXMuY29sbGFwc2VkID8gLXRoaXMuY29sbGFwc2VkIDogXCJcIn0ke3RoaXMud2lkZ2V0SGVpZ2h0ID8gXCI6XCIgKyB0aGlzLndpZGdldEhlaWdodCA6IFwiXCJ9KWA7XG4gICAgfVxufVxuY2xhc3MgSGVpZ2h0TWFwR2FwIGV4dGVuZHMgSGVpZ2h0TWFwIHtcbiAgICBjb25zdHJ1Y3RvcihsZW5ndGgpIHsgc3VwZXIobGVuZ3RoLCAwKTsgfVxuICAgIGhlaWdodE1ldHJpY3Mob3JhY2xlLCBvZmZzZXQpIHtcbiAgICAgICAgbGV0IGZpcnN0TGluZSA9IG9yYWNsZS5kb2MubGluZUF0KG9mZnNldCkubnVtYmVyLCBsYXN0TGluZSA9IG9yYWNsZS5kb2MubGluZUF0KG9mZnNldCArIHRoaXMubGVuZ3RoKS5udW1iZXI7XG4gICAgICAgIGxldCBsaW5lcyA9IGxhc3RMaW5lIC0gZmlyc3RMaW5lICsgMTtcbiAgICAgICAgbGV0IHBlckxpbmUsIHBlckNoYXIgPSAwO1xuICAgICAgICBpZiAob3JhY2xlLmxpbmVXcmFwcGluZykge1xuICAgICAgICAgICAgbGV0IHRvdGFsUGVyTGluZSA9IE1hdGgubWluKHRoaXMuaGVpZ2h0LCBvcmFjbGUubGluZUhlaWdodCAqIGxpbmVzKTtcbiAgICAgICAgICAgIHBlckxpbmUgPSB0b3RhbFBlckxpbmUgLyBsaW5lcztcbiAgICAgICAgICAgIGlmICh0aGlzLmxlbmd0aCA+IGxpbmVzICsgMSlcbiAgICAgICAgICAgICAgICBwZXJDaGFyID0gKHRoaXMuaGVpZ2h0IC0gdG90YWxQZXJMaW5lKSAvICh0aGlzLmxlbmd0aCAtIGxpbmVzIC0gMSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBwZXJMaW5lID0gdGhpcy5oZWlnaHQgLyBsaW5lcztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4geyBmaXJzdExpbmUsIGxhc3RMaW5lLCBwZXJMaW5lLCBwZXJDaGFyIH07XG4gICAgfVxuICAgIGJsb2NrQXQoaGVpZ2h0LCBvcmFjbGUsIHRvcCwgb2Zmc2V0KSB7XG4gICAgICAgIGxldCB7IGZpcnN0TGluZSwgbGFzdExpbmUsIHBlckxpbmUsIHBlckNoYXIgfSA9IHRoaXMuaGVpZ2h0TWV0cmljcyhvcmFjbGUsIG9mZnNldCk7XG4gICAgICAgIGlmIChvcmFjbGUubGluZVdyYXBwaW5nKSB7XG4gICAgICAgICAgICBsZXQgZ3Vlc3MgPSBvZmZzZXQgKyAoaGVpZ2h0IDwgb3JhY2xlLmxpbmVIZWlnaHQgPyAwXG4gICAgICAgICAgICAgICAgOiBNYXRoLnJvdW5kKE1hdGgubWF4KDAsIE1hdGgubWluKDEsIChoZWlnaHQgLSB0b3ApIC8gdGhpcy5oZWlnaHQpKSAqIHRoaXMubGVuZ3RoKSk7XG4gICAgICAgICAgICBsZXQgbGluZSA9IG9yYWNsZS5kb2MubGluZUF0KGd1ZXNzKSwgbGluZUhlaWdodCA9IHBlckxpbmUgKyBsaW5lLmxlbmd0aCAqIHBlckNoYXI7XG4gICAgICAgICAgICBsZXQgbGluZVRvcCA9IE1hdGgubWF4KHRvcCwgaGVpZ2h0IC0gbGluZUhlaWdodCAvIDIpO1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBCbG9ja0luZm8obGluZS5mcm9tLCBsaW5lLmxlbmd0aCwgbGluZVRvcCwgbGluZUhlaWdodCwgMCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBsZXQgbGluZSA9IE1hdGgubWF4KDAsIE1hdGgubWluKGxhc3RMaW5lIC0gZmlyc3RMaW5lLCBNYXRoLmZsb29yKChoZWlnaHQgLSB0b3ApIC8gcGVyTGluZSkpKTtcbiAgICAgICAgICAgIGxldCB7IGZyb20sIGxlbmd0aCB9ID0gb3JhY2xlLmRvYy5saW5lKGZpcnN0TGluZSArIGxpbmUpO1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBCbG9ja0luZm8oZnJvbSwgbGVuZ3RoLCB0b3AgKyBwZXJMaW5lICogbGluZSwgcGVyTGluZSwgMCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgbGluZUF0KHZhbHVlLCB0eXBlLCBvcmFjbGUsIHRvcCwgb2Zmc2V0KSB7XG4gICAgICAgIGlmICh0eXBlID09IFF1ZXJ5VHlwZS5CeUhlaWdodClcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmJsb2NrQXQodmFsdWUsIG9yYWNsZSwgdG9wLCBvZmZzZXQpO1xuICAgICAgICBpZiAodHlwZSA9PSBRdWVyeVR5cGUuQnlQb3NOb0hlaWdodCkge1xuICAgICAgICAgICAgbGV0IHsgZnJvbSwgdG8gfSA9IG9yYWNsZS5kb2MubGluZUF0KHZhbHVlKTtcbiAgICAgICAgICAgIHJldHVybiBuZXcgQmxvY2tJbmZvKGZyb20sIHRvIC0gZnJvbSwgMCwgMCwgMCk7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IHsgZmlyc3RMaW5lLCBwZXJMaW5lLCBwZXJDaGFyIH0gPSB0aGlzLmhlaWdodE1ldHJpY3Mob3JhY2xlLCBvZmZzZXQpO1xuICAgICAgICBsZXQgbGluZSA9IG9yYWNsZS5kb2MubGluZUF0KHZhbHVlKSwgbGluZUhlaWdodCA9IHBlckxpbmUgKyBsaW5lLmxlbmd0aCAqIHBlckNoYXI7XG4gICAgICAgIGxldCBsaW5lc0Fib3ZlID0gbGluZS5udW1iZXIgLSBmaXJzdExpbmU7XG4gICAgICAgIGxldCBsaW5lVG9wID0gdG9wICsgcGVyTGluZSAqIGxpbmVzQWJvdmUgKyBwZXJDaGFyICogKGxpbmUuZnJvbSAtIG9mZnNldCAtIGxpbmVzQWJvdmUpO1xuICAgICAgICByZXR1cm4gbmV3IEJsb2NrSW5mbyhsaW5lLmZyb20sIGxpbmUubGVuZ3RoLCBNYXRoLm1heCh0b3AsIE1hdGgubWluKGxpbmVUb3AsIHRvcCArIHRoaXMuaGVpZ2h0IC0gbGluZUhlaWdodCkpLCBsaW5lSGVpZ2h0LCAwKTtcbiAgICB9XG4gICAgZm9yRWFjaExpbmUoZnJvbSwgdG8sIG9yYWNsZSwgdG9wLCBvZmZzZXQsIGYpIHtcbiAgICAgICAgZnJvbSA9IE1hdGgubWF4KGZyb20sIG9mZnNldCk7XG4gICAgICAgIHRvID0gTWF0aC5taW4odG8sIG9mZnNldCArIHRoaXMubGVuZ3RoKTtcbiAgICAgICAgbGV0IHsgZmlyc3RMaW5lLCBwZXJMaW5lLCBwZXJDaGFyIH0gPSB0aGlzLmhlaWdodE1ldHJpY3Mob3JhY2xlLCBvZmZzZXQpO1xuICAgICAgICBmb3IgKGxldCBwb3MgPSBmcm9tLCBsaW5lVG9wID0gdG9wOyBwb3MgPD0gdG87KSB7XG4gICAgICAgICAgICBsZXQgbGluZSA9IG9yYWNsZS5kb2MubGluZUF0KHBvcyk7XG4gICAgICAgICAgICBpZiAocG9zID09IGZyb20pIHtcbiAgICAgICAgICAgICAgICBsZXQgbGluZXNBYm92ZSA9IGxpbmUubnVtYmVyIC0gZmlyc3RMaW5lO1xuICAgICAgICAgICAgICAgIGxpbmVUb3AgKz0gcGVyTGluZSAqIGxpbmVzQWJvdmUgKyBwZXJDaGFyICogKGZyb20gLSBvZmZzZXQgLSBsaW5lc0Fib3ZlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxldCBsaW5lSGVpZ2h0ID0gcGVyTGluZSArIHBlckNoYXIgKiBsaW5lLmxlbmd0aDtcbiAgICAgICAgICAgIGYobmV3IEJsb2NrSW5mbyhsaW5lLmZyb20sIGxpbmUubGVuZ3RoLCBsaW5lVG9wLCBsaW5lSGVpZ2h0LCAwKSk7XG4gICAgICAgICAgICBsaW5lVG9wICs9IGxpbmVIZWlnaHQ7XG4gICAgICAgICAgICBwb3MgPSBsaW5lLnRvICsgMTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXBsYWNlKGZyb20sIHRvLCBub2Rlcykge1xuICAgICAgICBsZXQgYWZ0ZXIgPSB0aGlzLmxlbmd0aCAtIHRvO1xuICAgICAgICBpZiAoYWZ0ZXIgPiAwKSB7XG4gICAgICAgICAgICBsZXQgbGFzdCA9IG5vZGVzW25vZGVzLmxlbmd0aCAtIDFdO1xuICAgICAgICAgICAgaWYgKGxhc3QgaW5zdGFuY2VvZiBIZWlnaHRNYXBHYXApXG4gICAgICAgICAgICAgICAgbm9kZXNbbm9kZXMubGVuZ3RoIC0gMV0gPSBuZXcgSGVpZ2h0TWFwR2FwKGxhc3QubGVuZ3RoICsgYWZ0ZXIpO1xuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgIG5vZGVzLnB1c2gobnVsbCwgbmV3IEhlaWdodE1hcEdhcChhZnRlciAtIDEpKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZnJvbSA+IDApIHtcbiAgICAgICAgICAgIGxldCBmaXJzdCA9IG5vZGVzWzBdO1xuICAgICAgICAgICAgaWYgKGZpcnN0IGluc3RhbmNlb2YgSGVpZ2h0TWFwR2FwKVxuICAgICAgICAgICAgICAgIG5vZGVzWzBdID0gbmV3IEhlaWdodE1hcEdhcChmcm9tICsgZmlyc3QubGVuZ3RoKTtcbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICBub2Rlcy51bnNoaWZ0KG5ldyBIZWlnaHRNYXBHYXAoZnJvbSAtIDEpLCBudWxsKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gSGVpZ2h0TWFwLm9mKG5vZGVzKTtcbiAgICB9XG4gICAgZGVjb21wb3NlTGVmdCh0bywgcmVzdWx0KSB7XG4gICAgICAgIHJlc3VsdC5wdXNoKG5ldyBIZWlnaHRNYXBHYXAodG8gLSAxKSwgbnVsbCk7XG4gICAgfVxuICAgIGRlY29tcG9zZVJpZ2h0KGZyb20sIHJlc3VsdCkge1xuICAgICAgICByZXN1bHQucHVzaChudWxsLCBuZXcgSGVpZ2h0TWFwR2FwKHRoaXMubGVuZ3RoIC0gZnJvbSAtIDEpKTtcbiAgICB9XG4gICAgdXBkYXRlSGVpZ2h0KG9yYWNsZSwgb2Zmc2V0ID0gMCwgZm9yY2UgPSBmYWxzZSwgbWVhc3VyZWQpIHtcbiAgICAgICAgbGV0IGVuZCA9IG9mZnNldCArIHRoaXMubGVuZ3RoO1xuICAgICAgICBpZiAobWVhc3VyZWQgJiYgbWVhc3VyZWQuZnJvbSA8PSBvZmZzZXQgKyB0aGlzLmxlbmd0aCAmJiBtZWFzdXJlZC5tb3JlKSB7XG4gICAgICAgICAgICAvLyBGaWxsIGluIHBhcnQgb2YgdGhpcyBnYXAgd2l0aCBtZWFzdXJlZCBsaW5lcy4gV2Uga25vdyB0aGVyZVxuICAgICAgICAgICAgLy8gY2FuJ3QgYmUgd2lkZ2V0cyBvciBjb2xsYXBzZWQgcmFuZ2VzIGluIHRob3NlIGxpbmVzLCBiZWNhdXNlXG4gICAgICAgICAgICAvLyB0aGV5IHdvdWxkIGFscmVhZHkgaGF2ZSBiZWVuIGFkZGVkIHRvIHRoZSBoZWlnaHRtYXAgKGdhcHNcbiAgICAgICAgICAgIC8vIG9ubHkgY29udGFpbiBwbGFpbiB0ZXh0KS5cbiAgICAgICAgICAgIGxldCBub2RlcyA9IFtdLCBwb3MgPSBNYXRoLm1heChvZmZzZXQsIG1lYXN1cmVkLmZyb20pLCBzaW5nbGVIZWlnaHQgPSAtMTtcbiAgICAgICAgICAgIGlmIChtZWFzdXJlZC5mcm9tID4gb2Zmc2V0KVxuICAgICAgICAgICAgICAgIG5vZGVzLnB1c2gobmV3IEhlaWdodE1hcEdhcChtZWFzdXJlZC5mcm9tIC0gb2Zmc2V0IC0gMSkudXBkYXRlSGVpZ2h0KG9yYWNsZSwgb2Zmc2V0KSk7XG4gICAgICAgICAgICB3aGlsZSAocG9zIDw9IGVuZCAmJiBtZWFzdXJlZC5tb3JlKSB7XG4gICAgICAgICAgICAgICAgbGV0IGxlbiA9IG9yYWNsZS5kb2MubGluZUF0KHBvcykubGVuZ3RoO1xuICAgICAgICAgICAgICAgIGlmIChub2Rlcy5sZW5ndGgpXG4gICAgICAgICAgICAgICAgICAgIG5vZGVzLnB1c2gobnVsbCk7XG4gICAgICAgICAgICAgICAgbGV0IGhlaWdodCA9IG1lYXN1cmVkLmhlaWdodHNbbWVhc3VyZWQuaW5kZXgrK10sIGFib3ZlID0gMDtcbiAgICAgICAgICAgICAgICBpZiAoaGVpZ2h0IDwgMCkge1xuICAgICAgICAgICAgICAgICAgICBhYm92ZSA9IC1oZWlnaHQ7XG4gICAgICAgICAgICAgICAgICAgIGhlaWdodCA9IG1lYXN1cmVkLmhlaWdodHNbbWVhc3VyZWQuaW5kZXgrK107XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChzaW5nbGVIZWlnaHQgPT0gLTEpXG4gICAgICAgICAgICAgICAgICAgIHNpbmdsZUhlaWdodCA9IGhlaWdodDtcbiAgICAgICAgICAgICAgICBlbHNlIGlmIChNYXRoLmFicyhoZWlnaHQgLSBzaW5nbGVIZWlnaHQpID49IEVwc2lsb24pXG4gICAgICAgICAgICAgICAgICAgIHNpbmdsZUhlaWdodCA9IC0yO1xuICAgICAgICAgICAgICAgIGxldCBsaW5lID0gbmV3IEhlaWdodE1hcFRleHQobGVuLCBoZWlnaHQsIGFib3ZlKTtcbiAgICAgICAgICAgICAgICBsaW5lLm91dGRhdGVkID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgbm9kZXMucHVzaChsaW5lKTtcbiAgICAgICAgICAgICAgICBwb3MgKz0gbGVuICsgMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChwb3MgPD0gZW5kKVxuICAgICAgICAgICAgICAgIG5vZGVzLnB1c2gobnVsbCwgbmV3IEhlaWdodE1hcEdhcChlbmQgLSBwb3MpLnVwZGF0ZUhlaWdodChvcmFjbGUsIHBvcykpO1xuICAgICAgICAgICAgbGV0IHJlc3VsdCA9IEhlaWdodE1hcC5vZihub2Rlcyk7XG4gICAgICAgICAgICBpZiAoc2luZ2xlSGVpZ2h0IDwgMCB8fCBNYXRoLmFicyhyZXN1bHQuaGVpZ2h0IC0gdGhpcy5oZWlnaHQpID49IEVwc2lsb24gfHxcbiAgICAgICAgICAgICAgICBNYXRoLmFicyhzaW5nbGVIZWlnaHQgLSB0aGlzLmhlaWdodE1ldHJpY3Mob3JhY2xlLCBvZmZzZXQpLnBlckxpbmUpID49IEVwc2lsb24pXG4gICAgICAgICAgICAgICAgaGVpZ2h0Q2hhbmdlRmxhZyA9IHRydWU7XG4gICAgICAgICAgICByZXR1cm4gcmVwbGFjZSh0aGlzLCByZXN1bHQpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGZvcmNlIHx8IHRoaXMub3V0ZGF0ZWQpIHtcbiAgICAgICAgICAgIHRoaXMuc2V0SGVpZ2h0KG9yYWNsZS5oZWlnaHRGb3JHYXAob2Zmc2V0LCBvZmZzZXQgKyB0aGlzLmxlbmd0aCkpO1xuICAgICAgICAgICAgdGhpcy5vdXRkYXRlZCA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICB0b1N0cmluZygpIHsgcmV0dXJuIGBnYXAoJHt0aGlzLmxlbmd0aH0pYDsgfVxufVxuY2xhc3MgSGVpZ2h0TWFwQnJhbmNoIGV4dGVuZHMgSGVpZ2h0TWFwIHtcbiAgICBjb25zdHJ1Y3RvcihsZWZ0LCBicmssIHJpZ2h0KSB7XG4gICAgICAgIHN1cGVyKGxlZnQubGVuZ3RoICsgYnJrICsgcmlnaHQubGVuZ3RoLCBsZWZ0LmhlaWdodCArIHJpZ2h0LmhlaWdodCwgYnJrIHwgKGxlZnQub3V0ZGF0ZWQgfHwgcmlnaHQub3V0ZGF0ZWQgPyAyIC8qIEZsYWcuT3V0ZGF0ZWQgKi8gOiAwKSk7XG4gICAgICAgIHRoaXMubGVmdCA9IGxlZnQ7XG4gICAgICAgIHRoaXMucmlnaHQgPSByaWdodDtcbiAgICAgICAgdGhpcy5zaXplID0gbGVmdC5zaXplICsgcmlnaHQuc2l6ZTtcbiAgICB9XG4gICAgZ2V0IGJyZWFrKCkgeyByZXR1cm4gdGhpcy5mbGFncyAmIDEgLyogRmxhZy5CcmVhayAqLzsgfVxuICAgIGJsb2NrQXQoaGVpZ2h0LCBvcmFjbGUsIHRvcCwgb2Zmc2V0KSB7XG4gICAgICAgIGxldCBtaWQgPSB0b3AgKyB0aGlzLmxlZnQuaGVpZ2h0O1xuICAgICAgICByZXR1cm4gaGVpZ2h0IDwgbWlkID8gdGhpcy5sZWZ0LmJsb2NrQXQoaGVpZ2h0LCBvcmFjbGUsIHRvcCwgb2Zmc2V0KVxuICAgICAgICAgICAgOiB0aGlzLnJpZ2h0LmJsb2NrQXQoaGVpZ2h0LCBvcmFjbGUsIG1pZCwgb2Zmc2V0ICsgdGhpcy5sZWZ0Lmxlbmd0aCArIHRoaXMuYnJlYWspO1xuICAgIH1cbiAgICBsaW5lQXQodmFsdWUsIHR5cGUsIG9yYWNsZSwgdG9wLCBvZmZzZXQpIHtcbiAgICAgICAgbGV0IHJpZ2h0VG9wID0gdG9wICsgdGhpcy5sZWZ0LmhlaWdodCwgcmlnaHRPZmZzZXQgPSBvZmZzZXQgKyB0aGlzLmxlZnQubGVuZ3RoICsgdGhpcy5icmVhaztcbiAgICAgICAgbGV0IGxlZnQgPSB0eXBlID09IFF1ZXJ5VHlwZS5CeUhlaWdodCA/IHZhbHVlIDwgcmlnaHRUb3AgOiB2YWx1ZSA8IHJpZ2h0T2Zmc2V0O1xuICAgICAgICBsZXQgYmFzZSA9IGxlZnQgPyB0aGlzLmxlZnQubGluZUF0KHZhbHVlLCB0eXBlLCBvcmFjbGUsIHRvcCwgb2Zmc2V0KVxuICAgICAgICAgICAgOiB0aGlzLnJpZ2h0LmxpbmVBdCh2YWx1ZSwgdHlwZSwgb3JhY2xlLCByaWdodFRvcCwgcmlnaHRPZmZzZXQpO1xuICAgICAgICBpZiAodGhpcy5icmVhayB8fCAobGVmdCA/IGJhc2UudG8gPCByaWdodE9mZnNldCA6IGJhc2UuZnJvbSA+IHJpZ2h0T2Zmc2V0KSlcbiAgICAgICAgICAgIHJldHVybiBiYXNlO1xuICAgICAgICBsZXQgc3ViUXVlcnkgPSB0eXBlID09IFF1ZXJ5VHlwZS5CeVBvc05vSGVpZ2h0ID8gUXVlcnlUeXBlLkJ5UG9zTm9IZWlnaHQgOiBRdWVyeVR5cGUuQnlQb3M7XG4gICAgICAgIGlmIChsZWZ0KVxuICAgICAgICAgICAgcmV0dXJuIGJhc2Uuam9pbih0aGlzLnJpZ2h0LmxpbmVBdChyaWdodE9mZnNldCwgc3ViUXVlcnksIG9yYWNsZSwgcmlnaHRUb3AsIHJpZ2h0T2Zmc2V0KSk7XG4gICAgICAgIGVsc2VcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmxlZnQubGluZUF0KHJpZ2h0T2Zmc2V0LCBzdWJRdWVyeSwgb3JhY2xlLCB0b3AsIG9mZnNldCkuam9pbihiYXNlKTtcbiAgICB9XG4gICAgZm9yRWFjaExpbmUoZnJvbSwgdG8sIG9yYWNsZSwgdG9wLCBvZmZzZXQsIGYpIHtcbiAgICAgICAgbGV0IHJpZ2h0VG9wID0gdG9wICsgdGhpcy5sZWZ0LmhlaWdodCwgcmlnaHRPZmZzZXQgPSBvZmZzZXQgKyB0aGlzLmxlZnQubGVuZ3RoICsgdGhpcy5icmVhaztcbiAgICAgICAgaWYgKHRoaXMuYnJlYWspIHtcbiAgICAgICAgICAgIGlmIChmcm9tIDwgcmlnaHRPZmZzZXQpXG4gICAgICAgICAgICAgICAgdGhpcy5sZWZ0LmZvckVhY2hMaW5lKGZyb20sIHRvLCBvcmFjbGUsIHRvcCwgb2Zmc2V0LCBmKTtcbiAgICAgICAgICAgIGlmICh0byA+PSByaWdodE9mZnNldClcbiAgICAgICAgICAgICAgICB0aGlzLnJpZ2h0LmZvckVhY2hMaW5lKGZyb20sIHRvLCBvcmFjbGUsIHJpZ2h0VG9wLCByaWdodE9mZnNldCwgZik7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBsZXQgbWlkID0gdGhpcy5saW5lQXQocmlnaHRPZmZzZXQsIFF1ZXJ5VHlwZS5CeVBvcywgb3JhY2xlLCB0b3AsIG9mZnNldCk7XG4gICAgICAgICAgICBpZiAoZnJvbSA8IG1pZC5mcm9tKVxuICAgICAgICAgICAgICAgIHRoaXMubGVmdC5mb3JFYWNoTGluZShmcm9tLCBtaWQuZnJvbSAtIDEsIG9yYWNsZSwgdG9wLCBvZmZzZXQsIGYpO1xuICAgICAgICAgICAgaWYgKG1pZC50byA+PSBmcm9tICYmIG1pZC5mcm9tIDw9IHRvKVxuICAgICAgICAgICAgICAgIGYobWlkKTtcbiAgICAgICAgICAgIGlmICh0byA+IG1pZC50bylcbiAgICAgICAgICAgICAgICB0aGlzLnJpZ2h0LmZvckVhY2hMaW5lKG1pZC50byArIDEsIHRvLCBvcmFjbGUsIHJpZ2h0VG9wLCByaWdodE9mZnNldCwgZik7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmVwbGFjZShmcm9tLCB0bywgbm9kZXMpIHtcbiAgICAgICAgbGV0IHJpZ2h0U3RhcnQgPSB0aGlzLmxlZnQubGVuZ3RoICsgdGhpcy5icmVhaztcbiAgICAgICAgaWYgKHRvIDwgcmlnaHRTdGFydClcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmJhbGFuY2VkKHRoaXMubGVmdC5yZXBsYWNlKGZyb20sIHRvLCBub2RlcyksIHRoaXMucmlnaHQpO1xuICAgICAgICBpZiAoZnJvbSA+IHRoaXMubGVmdC5sZW5ndGgpXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5iYWxhbmNlZCh0aGlzLmxlZnQsIHRoaXMucmlnaHQucmVwbGFjZShmcm9tIC0gcmlnaHRTdGFydCwgdG8gLSByaWdodFN0YXJ0LCBub2RlcykpO1xuICAgICAgICBsZXQgcmVzdWx0ID0gW107XG4gICAgICAgIGlmIChmcm9tID4gMClcbiAgICAgICAgICAgIHRoaXMuZGVjb21wb3NlTGVmdChmcm9tLCByZXN1bHQpO1xuICAgICAgICBsZXQgbGVmdCA9IHJlc3VsdC5sZW5ndGg7XG4gICAgICAgIGZvciAobGV0IG5vZGUgb2Ygbm9kZXMpXG4gICAgICAgICAgICByZXN1bHQucHVzaChub2RlKTtcbiAgICAgICAgaWYgKGZyb20gPiAwKVxuICAgICAgICAgICAgbWVyZ2VHYXBzKHJlc3VsdCwgbGVmdCAtIDEpO1xuICAgICAgICBpZiAodG8gPCB0aGlzLmxlbmd0aCkge1xuICAgICAgICAgICAgbGV0IHJpZ2h0ID0gcmVzdWx0Lmxlbmd0aDtcbiAgICAgICAgICAgIHRoaXMuZGVjb21wb3NlUmlnaHQodG8sIHJlc3VsdCk7XG4gICAgICAgICAgICBtZXJnZUdhcHMocmVzdWx0LCByaWdodCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIEhlaWdodE1hcC5vZihyZXN1bHQpO1xuICAgIH1cbiAgICBkZWNvbXBvc2VMZWZ0KHRvLCByZXN1bHQpIHtcbiAgICAgICAgbGV0IGxlZnQgPSB0aGlzLmxlZnQubGVuZ3RoO1xuICAgICAgICBpZiAodG8gPD0gbGVmdClcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmxlZnQuZGVjb21wb3NlTGVmdCh0bywgcmVzdWx0KTtcbiAgICAgICAgcmVzdWx0LnB1c2godGhpcy5sZWZ0KTtcbiAgICAgICAgaWYgKHRoaXMuYnJlYWspIHtcbiAgICAgICAgICAgIGxlZnQrKztcbiAgICAgICAgICAgIGlmICh0byA+PSBsZWZ0KVxuICAgICAgICAgICAgICAgIHJlc3VsdC5wdXNoKG51bGwpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0byA+IGxlZnQpXG4gICAgICAgICAgICB0aGlzLnJpZ2h0LmRlY29tcG9zZUxlZnQodG8gLSBsZWZ0LCByZXN1bHQpO1xuICAgIH1cbiAgICBkZWNvbXBvc2VSaWdodChmcm9tLCByZXN1bHQpIHtcbiAgICAgICAgbGV0IGxlZnQgPSB0aGlzLmxlZnQubGVuZ3RoLCByaWdodCA9IGxlZnQgKyB0aGlzLmJyZWFrO1xuICAgICAgICBpZiAoZnJvbSA+PSByaWdodClcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnJpZ2h0LmRlY29tcG9zZVJpZ2h0KGZyb20gLSByaWdodCwgcmVzdWx0KTtcbiAgICAgICAgaWYgKGZyb20gPCBsZWZ0KVxuICAgICAgICAgICAgdGhpcy5sZWZ0LmRlY29tcG9zZVJpZ2h0KGZyb20sIHJlc3VsdCk7XG4gICAgICAgIGlmICh0aGlzLmJyZWFrICYmIGZyb20gPCByaWdodClcbiAgICAgICAgICAgIHJlc3VsdC5wdXNoKG51bGwpO1xuICAgICAgICByZXN1bHQucHVzaCh0aGlzLnJpZ2h0KTtcbiAgICB9XG4gICAgYmFsYW5jZWQobGVmdCwgcmlnaHQpIHtcbiAgICAgICAgaWYgKGxlZnQuc2l6ZSA+IDIgKiByaWdodC5zaXplIHx8IHJpZ2h0LnNpemUgPiAyICogbGVmdC5zaXplKVxuICAgICAgICAgICAgcmV0dXJuIEhlaWdodE1hcC5vZih0aGlzLmJyZWFrID8gW2xlZnQsIG51bGwsIHJpZ2h0XSA6IFtsZWZ0LCByaWdodF0pO1xuICAgICAgICB0aGlzLmxlZnQgPSByZXBsYWNlKHRoaXMubGVmdCwgbGVmdCk7XG4gICAgICAgIHRoaXMucmlnaHQgPSByZXBsYWNlKHRoaXMucmlnaHQsIHJpZ2h0KTtcbiAgICAgICAgdGhpcy5zZXRIZWlnaHQobGVmdC5oZWlnaHQgKyByaWdodC5oZWlnaHQpO1xuICAgICAgICB0aGlzLm91dGRhdGVkID0gbGVmdC5vdXRkYXRlZCB8fCByaWdodC5vdXRkYXRlZDtcbiAgICAgICAgdGhpcy5zaXplID0gbGVmdC5zaXplICsgcmlnaHQuc2l6ZTtcbiAgICAgICAgdGhpcy5sZW5ndGggPSBsZWZ0Lmxlbmd0aCArIHRoaXMuYnJlYWsgKyByaWdodC5sZW5ndGg7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICB1cGRhdGVIZWlnaHQob3JhY2xlLCBvZmZzZXQgPSAwLCBmb3JjZSA9IGZhbHNlLCBtZWFzdXJlZCkge1xuICAgICAgICBsZXQgeyBsZWZ0LCByaWdodCB9ID0gdGhpcywgcmlnaHRTdGFydCA9IG9mZnNldCArIGxlZnQubGVuZ3RoICsgdGhpcy5icmVhaywgcmViYWxhbmNlID0gbnVsbDtcbiAgICAgICAgaWYgKG1lYXN1cmVkICYmIG1lYXN1cmVkLmZyb20gPD0gb2Zmc2V0ICsgbGVmdC5sZW5ndGggJiYgbWVhc3VyZWQubW9yZSlcbiAgICAgICAgICAgIHJlYmFsYW5jZSA9IGxlZnQgPSBsZWZ0LnVwZGF0ZUhlaWdodChvcmFjbGUsIG9mZnNldCwgZm9yY2UsIG1lYXN1cmVkKTtcbiAgICAgICAgZWxzZVxuICAgICAgICAgICAgbGVmdC51cGRhdGVIZWlnaHQob3JhY2xlLCBvZmZzZXQsIGZvcmNlKTtcbiAgICAgICAgaWYgKG1lYXN1cmVkICYmIG1lYXN1cmVkLmZyb20gPD0gcmlnaHRTdGFydCArIHJpZ2h0Lmxlbmd0aCAmJiBtZWFzdXJlZC5tb3JlKVxuICAgICAgICAgICAgcmViYWxhbmNlID0gcmlnaHQgPSByaWdodC51cGRhdGVIZWlnaHQob3JhY2xlLCByaWdodFN0YXJ0LCBmb3JjZSwgbWVhc3VyZWQpO1xuICAgICAgICBlbHNlXG4gICAgICAgICAgICByaWdodC51cGRhdGVIZWlnaHQob3JhY2xlLCByaWdodFN0YXJ0LCBmb3JjZSk7XG4gICAgICAgIGlmIChyZWJhbGFuY2UpXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5iYWxhbmNlZChsZWZ0LCByaWdodCk7XG4gICAgICAgIHRoaXMuaGVpZ2h0ID0gdGhpcy5sZWZ0LmhlaWdodCArIHRoaXMucmlnaHQuaGVpZ2h0O1xuICAgICAgICB0aGlzLm91dGRhdGVkID0gZmFsc2U7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICB0b1N0cmluZygpIHsgcmV0dXJuIHRoaXMubGVmdCArICh0aGlzLmJyZWFrID8gXCIgXCIgOiBcIi1cIikgKyB0aGlzLnJpZ2h0OyB9XG59XG5mdW5jdGlvbiBtZXJnZUdhcHMobm9kZXMsIGFyb3VuZCkge1xuICAgIGxldCBiZWZvcmUsIGFmdGVyO1xuICAgIGlmIChub2Rlc1thcm91bmRdID09IG51bGwgJiZcbiAgICAgICAgKGJlZm9yZSA9IG5vZGVzW2Fyb3VuZCAtIDFdKSBpbnN0YW5jZW9mIEhlaWdodE1hcEdhcCAmJlxuICAgICAgICAoYWZ0ZXIgPSBub2Rlc1thcm91bmQgKyAxXSkgaW5zdGFuY2VvZiBIZWlnaHRNYXBHYXApXG4gICAgICAgIG5vZGVzLnNwbGljZShhcm91bmQgLSAxLCAzLCBuZXcgSGVpZ2h0TWFwR2FwKGJlZm9yZS5sZW5ndGggKyAxICsgYWZ0ZXIubGVuZ3RoKSk7XG59XG5jb25zdCByZWxldmFudFdpZGdldEhlaWdodCA9IDU7XG5jbGFzcyBOb2RlQnVpbGRlciB7XG4gICAgY29uc3RydWN0b3IocG9zLCBvcmFjbGUpIHtcbiAgICAgICAgdGhpcy5wb3MgPSBwb3M7XG4gICAgICAgIHRoaXMub3JhY2xlID0gb3JhY2xlO1xuICAgICAgICB0aGlzLm5vZGVzID0gW107XG4gICAgICAgIHRoaXMubGluZVN0YXJ0ID0gLTE7XG4gICAgICAgIHRoaXMubGluZUVuZCA9IC0xO1xuICAgICAgICB0aGlzLmNvdmVyaW5nID0gbnVsbDtcbiAgICAgICAgdGhpcy53cml0dGVuVG8gPSBwb3M7XG4gICAgfVxuICAgIGdldCBpc0NvdmVyZWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNvdmVyaW5nICYmIHRoaXMubm9kZXNbdGhpcy5ub2Rlcy5sZW5ndGggLSAxXSA9PSB0aGlzLmNvdmVyaW5nO1xuICAgIH1cbiAgICBzcGFuKF9mcm9tLCB0bykge1xuICAgICAgICBpZiAodGhpcy5saW5lU3RhcnQgPiAtMSkge1xuICAgICAgICAgICAgbGV0IGVuZCA9IE1hdGgubWluKHRvLCB0aGlzLmxpbmVFbmQpLCBsYXN0ID0gdGhpcy5ub2Rlc1t0aGlzLm5vZGVzLmxlbmd0aCAtIDFdO1xuICAgICAgICAgICAgaWYgKGxhc3QgaW5zdGFuY2VvZiBIZWlnaHRNYXBUZXh0KVxuICAgICAgICAgICAgICAgIGxhc3QubGVuZ3RoICs9IGVuZCAtIHRoaXMucG9zO1xuICAgICAgICAgICAgZWxzZSBpZiAoZW5kID4gdGhpcy5wb3MgfHwgIXRoaXMuaXNDb3ZlcmVkKVxuICAgICAgICAgICAgICAgIHRoaXMubm9kZXMucHVzaChuZXcgSGVpZ2h0TWFwVGV4dChlbmQgLSB0aGlzLnBvcywgLTEsIDApKTtcbiAgICAgICAgICAgIHRoaXMud3JpdHRlblRvID0gZW5kO1xuICAgICAgICAgICAgaWYgKHRvID4gZW5kKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5ub2Rlcy5wdXNoKG51bGwpO1xuICAgICAgICAgICAgICAgIHRoaXMud3JpdHRlblRvKys7XG4gICAgICAgICAgICAgICAgdGhpcy5saW5lU3RhcnQgPSAtMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0aGlzLnBvcyA9IHRvO1xuICAgIH1cbiAgICBwb2ludChmcm9tLCB0bywgZGVjbykge1xuICAgICAgICBpZiAoZnJvbSA8IHRvIHx8IGRlY28uaGVpZ2h0UmVsZXZhbnQpIHtcbiAgICAgICAgICAgIGxldCBoZWlnaHQgPSBkZWNvLndpZGdldCA/IGRlY28ud2lkZ2V0LmVzdGltYXRlZEhlaWdodCA6IDA7XG4gICAgICAgICAgICBsZXQgYnJlYWtzID0gZGVjby53aWRnZXQgPyBkZWNvLndpZGdldC5saW5lQnJlYWtzIDogMDtcbiAgICAgICAgICAgIGlmIChoZWlnaHQgPCAwKVxuICAgICAgICAgICAgICAgIGhlaWdodCA9IHRoaXMub3JhY2xlLmxpbmVIZWlnaHQ7XG4gICAgICAgICAgICBsZXQgbGVuID0gdG8gLSBmcm9tO1xuICAgICAgICAgICAgaWYgKGRlY28uYmxvY2spIHtcbiAgICAgICAgICAgICAgICB0aGlzLmFkZEJsb2NrKG5ldyBIZWlnaHRNYXBCbG9jayhsZW4sIGhlaWdodCwgZGVjbykpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAobGVuIHx8IGJyZWFrcyB8fCBoZWlnaHQgPj0gcmVsZXZhbnRXaWRnZXRIZWlnaHQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmFkZExpbmVEZWNvKGhlaWdodCwgYnJlYWtzLCBsZW4pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHRvID4gZnJvbSkge1xuICAgICAgICAgICAgdGhpcy5zcGFuKGZyb20sIHRvKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5saW5lRW5kID4gLTEgJiYgdGhpcy5saW5lRW5kIDwgdGhpcy5wb3MpXG4gICAgICAgICAgICB0aGlzLmxpbmVFbmQgPSB0aGlzLm9yYWNsZS5kb2MubGluZUF0KHRoaXMucG9zKS50bztcbiAgICB9XG4gICAgZW50ZXJMaW5lKCkge1xuICAgICAgICBpZiAodGhpcy5saW5lU3RhcnQgPiAtMSlcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgbGV0IHsgZnJvbSwgdG8gfSA9IHRoaXMub3JhY2xlLmRvYy5saW5lQXQodGhpcy5wb3MpO1xuICAgICAgICB0aGlzLmxpbmVTdGFydCA9IGZyb207XG4gICAgICAgIHRoaXMubGluZUVuZCA9IHRvO1xuICAgICAgICBpZiAodGhpcy53cml0dGVuVG8gPCBmcm9tKSB7XG4gICAgICAgICAgICBpZiAodGhpcy53cml0dGVuVG8gPCBmcm9tIC0gMSB8fCB0aGlzLm5vZGVzW3RoaXMubm9kZXMubGVuZ3RoIC0gMV0gPT0gbnVsbClcbiAgICAgICAgICAgICAgICB0aGlzLm5vZGVzLnB1c2godGhpcy5ibGFua0NvbnRlbnQodGhpcy53cml0dGVuVG8sIGZyb20gLSAxKSk7XG4gICAgICAgICAgICB0aGlzLm5vZGVzLnB1c2gobnVsbCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMucG9zID4gZnJvbSlcbiAgICAgICAgICAgIHRoaXMubm9kZXMucHVzaChuZXcgSGVpZ2h0TWFwVGV4dCh0aGlzLnBvcyAtIGZyb20sIC0xLCAwKSk7XG4gICAgICAgIHRoaXMud3JpdHRlblRvID0gdGhpcy5wb3M7XG4gICAgfVxuICAgIGJsYW5rQ29udGVudChmcm9tLCB0bykge1xuICAgICAgICBsZXQgZ2FwID0gbmV3IEhlaWdodE1hcEdhcCh0byAtIGZyb20pO1xuICAgICAgICBpZiAodGhpcy5vcmFjbGUuZG9jLmxpbmVBdChmcm9tKS50byA9PSB0bylcbiAgICAgICAgICAgIGdhcC5mbGFncyB8PSA0IC8qIEZsYWcuU2luZ2xlTGluZSAqLztcbiAgICAgICAgcmV0dXJuIGdhcDtcbiAgICB9XG4gICAgZW5zdXJlTGluZSgpIHtcbiAgICAgICAgdGhpcy5lbnRlckxpbmUoKTtcbiAgICAgICAgbGV0IGxhc3QgPSB0aGlzLm5vZGVzLmxlbmd0aCA/IHRoaXMubm9kZXNbdGhpcy5ub2Rlcy5sZW5ndGggLSAxXSA6IG51bGw7XG4gICAgICAgIGlmIChsYXN0IGluc3RhbmNlb2YgSGVpZ2h0TWFwVGV4dClcbiAgICAgICAgICAgIHJldHVybiBsYXN0O1xuICAgICAgICBsZXQgbGluZSA9IG5ldyBIZWlnaHRNYXBUZXh0KDAsIC0xLCAwKTtcbiAgICAgICAgdGhpcy5ub2Rlcy5wdXNoKGxpbmUpO1xuICAgICAgICByZXR1cm4gbGluZTtcbiAgICB9XG4gICAgYWRkQmxvY2soYmxvY2spIHtcbiAgICAgICAgdGhpcy5lbnRlckxpbmUoKTtcbiAgICAgICAgbGV0IGRlY28gPSBibG9jay5kZWNvO1xuICAgICAgICBpZiAoZGVjbyAmJiBkZWNvLnN0YXJ0U2lkZSA+IDAgJiYgIXRoaXMuaXNDb3ZlcmVkKVxuICAgICAgICAgICAgdGhpcy5lbnN1cmVMaW5lKCk7XG4gICAgICAgIHRoaXMubm9kZXMucHVzaChibG9jayk7XG4gICAgICAgIHRoaXMud3JpdHRlblRvID0gdGhpcy5wb3MgPSB0aGlzLnBvcyArIGJsb2NrLmxlbmd0aDtcbiAgICAgICAgaWYgKGRlY28gJiYgZGVjby5lbmRTaWRlID4gMClcbiAgICAgICAgICAgIHRoaXMuY292ZXJpbmcgPSBibG9jaztcbiAgICB9XG4gICAgYWRkTGluZURlY28oaGVpZ2h0LCBicmVha3MsIGxlbmd0aCkge1xuICAgICAgICBsZXQgbGluZSA9IHRoaXMuZW5zdXJlTGluZSgpO1xuICAgICAgICBsaW5lLmxlbmd0aCArPSBsZW5ndGg7XG4gICAgICAgIGxpbmUuY29sbGFwc2VkICs9IGxlbmd0aDtcbiAgICAgICAgbGluZS53aWRnZXRIZWlnaHQgPSBNYXRoLm1heChsaW5lLndpZGdldEhlaWdodCwgaGVpZ2h0KTtcbiAgICAgICAgbGluZS5icmVha3MgKz0gYnJlYWtzO1xuICAgICAgICB0aGlzLndyaXR0ZW5UbyA9IHRoaXMucG9zID0gdGhpcy5wb3MgKyBsZW5ndGg7XG4gICAgfVxuICAgIGZpbmlzaChmcm9tKSB7XG4gICAgICAgIGxldCBsYXN0ID0gdGhpcy5ub2Rlcy5sZW5ndGggPT0gMCA/IG51bGwgOiB0aGlzLm5vZGVzW3RoaXMubm9kZXMubGVuZ3RoIC0gMV07XG4gICAgICAgIGlmICh0aGlzLmxpbmVTdGFydCA+IC0xICYmICEobGFzdCBpbnN0YW5jZW9mIEhlaWdodE1hcFRleHQpICYmICF0aGlzLmlzQ292ZXJlZClcbiAgICAgICAgICAgIHRoaXMubm9kZXMucHVzaChuZXcgSGVpZ2h0TWFwVGV4dCgwLCAtMSwgMCkpO1xuICAgICAgICBlbHNlIGlmICh0aGlzLndyaXR0ZW5UbyA8IHRoaXMucG9zIHx8IGxhc3QgPT0gbnVsbClcbiAgICAgICAgICAgIHRoaXMubm9kZXMucHVzaCh0aGlzLmJsYW5rQ29udGVudCh0aGlzLndyaXR0ZW5UbywgdGhpcy5wb3MpKTtcbiAgICAgICAgbGV0IHBvcyA9IGZyb207XG4gICAgICAgIGZvciAobGV0IG5vZGUgb2YgdGhpcy5ub2Rlcykge1xuICAgICAgICAgICAgaWYgKG5vZGUgaW5zdGFuY2VvZiBIZWlnaHRNYXBUZXh0KVxuICAgICAgICAgICAgICAgIG5vZGUudXBkYXRlSGVpZ2h0KHRoaXMub3JhY2xlLCBwb3MpO1xuICAgICAgICAgICAgcG9zICs9IG5vZGUgPyBub2RlLmxlbmd0aCA6IDE7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMubm9kZXM7XG4gICAgfVxuICAgIC8vIEFsd2F5cyBjYWxsZWQgd2l0aCBhIHJlZ2lvbiB0aGF0IG9uIGJvdGggc2lkZXMgZWl0aGVyIHN0cmV0Y2hlc1xuICAgIC8vIHRvIGEgbGluZSBicmVhayBvciB0aGUgZW5kIG9mIHRoZSBkb2N1bWVudC5cbiAgICAvLyBUaGUgcmV0dXJuZWQgYXJyYXkgdXNlcyBudWxsIHRvIGluZGljYXRlIGxpbmUgYnJlYWtzLCBidXQgbmV2ZXJcbiAgICAvLyBzdGFydHMgb3IgZW5kcyBpbiBhIGxpbmUgYnJlYWssIG9yIGhhcyBtdWx0aXBsZSBsaW5lIGJyZWFrcyBuZXh0XG4gICAgLy8gdG8gZWFjaCBvdGhlci5cbiAgICBzdGF0aWMgYnVpbGQob3JhY2xlLCBkZWNvcmF0aW9ucywgZnJvbSwgdG8pIHtcbiAgICAgICAgbGV0IGJ1aWxkZXIgPSBuZXcgTm9kZUJ1aWxkZXIoZnJvbSwgb3JhY2xlKTtcbiAgICAgICAgUmFuZ2VTZXQuc3BhbnMoZGVjb3JhdGlvbnMsIGZyb20sIHRvLCBidWlsZGVyLCAwKTtcbiAgICAgICAgcmV0dXJuIGJ1aWxkZXIuZmluaXNoKGZyb20pO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGhlaWdodFJlbGV2YW50RGVjb0NoYW5nZXMoYSwgYiwgZGlmZikge1xuICAgIGxldCBjb21wID0gbmV3IERlY29yYXRpb25Db21wYXJhdG9yO1xuICAgIFJhbmdlU2V0LmNvbXBhcmUoYSwgYiwgZGlmZiwgY29tcCwgMCk7XG4gICAgcmV0dXJuIGNvbXAuY2hhbmdlcztcbn1cbmNsYXNzIERlY29yYXRpb25Db21wYXJhdG9yIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5jaGFuZ2VzID0gW107XG4gICAgfVxuICAgIGNvbXBhcmVSYW5nZSgpIHsgfVxuICAgIGNvbXBhcmVQb2ludChmcm9tLCB0bywgYSwgYikge1xuICAgICAgICBpZiAoZnJvbSA8IHRvIHx8IGEgJiYgYS5oZWlnaHRSZWxldmFudCB8fCBiICYmIGIuaGVpZ2h0UmVsZXZhbnQpXG4gICAgICAgICAgICBhZGRSYW5nZShmcm9tLCB0bywgdGhpcy5jaGFuZ2VzLCA1KTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIHZpc2libGVQaXhlbFJhbmdlKGRvbSwgcGFkZGluZ1RvcCkge1xuICAgIGxldCByZWN0ID0gZG9tLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgIGxldCBkb2MgPSBkb20ub3duZXJEb2N1bWVudCwgd2luID0gZG9jLmRlZmF1bHRWaWV3IHx8IHdpbmRvdztcbiAgICBsZXQgbGVmdCA9IE1hdGgubWF4KDAsIHJlY3QubGVmdCksIHJpZ2h0ID0gTWF0aC5taW4od2luLmlubmVyV2lkdGgsIHJlY3QucmlnaHQpO1xuICAgIGxldCB0b3AgPSBNYXRoLm1heCgwLCByZWN0LnRvcCksIGJvdHRvbSA9IE1hdGgubWluKHdpbi5pbm5lckhlaWdodCwgcmVjdC5ib3R0b20pO1xuICAgIGZvciAobGV0IHBhcmVudCA9IGRvbS5wYXJlbnROb2RlOyBwYXJlbnQgJiYgcGFyZW50ICE9IGRvYy5ib2R5Oykge1xuICAgICAgICBpZiAocGFyZW50Lm5vZGVUeXBlID09IDEpIHtcbiAgICAgICAgICAgIGxldCBlbHQgPSBwYXJlbnQ7XG4gICAgICAgICAgICBsZXQgc3R5bGUgPSB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZShlbHQpO1xuICAgICAgICAgICAgaWYgKChlbHQuc2Nyb2xsSGVpZ2h0ID4gZWx0LmNsaWVudEhlaWdodCB8fCBlbHQuc2Nyb2xsV2lkdGggPiBlbHQuY2xpZW50V2lkdGgpICYmXG4gICAgICAgICAgICAgICAgc3R5bGUub3ZlcmZsb3cgIT0gXCJ2aXNpYmxlXCIpIHtcbiAgICAgICAgICAgICAgICBsZXQgcGFyZW50UmVjdCA9IGVsdC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgICAgICAgICAgICBsZWZ0ID0gTWF0aC5tYXgobGVmdCwgcGFyZW50UmVjdC5sZWZ0KTtcbiAgICAgICAgICAgICAgICByaWdodCA9IE1hdGgubWluKHJpZ2h0LCBwYXJlbnRSZWN0LnJpZ2h0KTtcbiAgICAgICAgICAgICAgICB0b3AgPSBNYXRoLm1heCh0b3AsIHBhcmVudFJlY3QudG9wKTtcbiAgICAgICAgICAgICAgICBib3R0b20gPSBNYXRoLm1pbihwYXJlbnQgPT0gZG9tLnBhcmVudE5vZGUgPyB3aW4uaW5uZXJIZWlnaHQgOiBib3R0b20sIHBhcmVudFJlY3QuYm90dG9tKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHBhcmVudCA9IHN0eWxlLnBvc2l0aW9uID09IFwiYWJzb2x1dGVcIiB8fCBzdHlsZS5wb3NpdGlvbiA9PSBcImZpeGVkXCIgPyBlbHQub2Zmc2V0UGFyZW50IDogZWx0LnBhcmVudE5vZGU7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAocGFyZW50Lm5vZGVUeXBlID09IDExKSB7IC8vIFNoYWRvdyByb290XG4gICAgICAgICAgICBwYXJlbnQgPSBwYXJlbnQuaG9zdDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiB7IGxlZnQ6IGxlZnQgLSByZWN0LmxlZnQsIHJpZ2h0OiBNYXRoLm1heChsZWZ0LCByaWdodCkgLSByZWN0LmxlZnQsXG4gICAgICAgIHRvcDogdG9wIC0gKHJlY3QudG9wICsgcGFkZGluZ1RvcCksIGJvdHRvbTogTWF0aC5tYXgodG9wLCBib3R0b20pIC0gKHJlY3QudG9wICsgcGFkZGluZ1RvcCkgfTtcbn1cbmZ1bmN0aW9uIGluV2luZG93KGVsdCkge1xuICAgIGxldCByZWN0ID0gZWx0LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLCB3aW4gPSBlbHQub3duZXJEb2N1bWVudC5kZWZhdWx0VmlldyB8fCB3aW5kb3c7XG4gICAgcmV0dXJuIHJlY3QubGVmdCA8IHdpbi5pbm5lcldpZHRoICYmIHJlY3QucmlnaHQgPiAwICYmXG4gICAgICAgIHJlY3QudG9wIDwgd2luLmlubmVySGVpZ2h0ICYmIHJlY3QuYm90dG9tID4gMDtcbn1cbmZ1bmN0aW9uIGZ1bGxQaXhlbFJhbmdlKGRvbSwgcGFkZGluZ1RvcCkge1xuICAgIGxldCByZWN0ID0gZG9tLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgIHJldHVybiB7IGxlZnQ6IDAsIHJpZ2h0OiByZWN0LnJpZ2h0IC0gcmVjdC5sZWZ0LFxuICAgICAgICB0b3A6IHBhZGRpbmdUb3AsIGJvdHRvbTogcmVjdC5ib3R0b20gLSAocmVjdC50b3AgKyBwYWRkaW5nVG9wKSB9O1xufVxuLy8gTGluZSBnYXBzIGFyZSBwbGFjZWhvbGRlciB3aWRnZXRzIHVzZWQgdG8gaGlkZSBwaWVjZXMgb2Ygb3Zlcmxvbmdcbi8vIGxpbmVzIHdpdGhpbiB0aGUgdmlld3BvcnQsIGFzIGEga2x1ZGdlIHRvIGtlZXAgdGhlIGVkaXRvclxuLy8gcmVzcG9uc2l2ZSB3aGVuIGEgcmlkaWN1bG91c2x5IGxvbmcgbGluZSBpcyBsb2FkZWQgaW50byBpdC5cbmNsYXNzIExpbmVHYXAge1xuICAgIGNvbnN0cnVjdG9yKGZyb20sIHRvLCBzaXplLCBkaXNwbGF5U2l6ZSkge1xuICAgICAgICB0aGlzLmZyb20gPSBmcm9tO1xuICAgICAgICB0aGlzLnRvID0gdG87XG4gICAgICAgIHRoaXMuc2l6ZSA9IHNpemU7XG4gICAgICAgIHRoaXMuZGlzcGxheVNpemUgPSBkaXNwbGF5U2l6ZTtcbiAgICB9XG4gICAgc3RhdGljIHNhbWUoYSwgYikge1xuICAgICAgICBpZiAoYS5sZW5ndGggIT0gYi5sZW5ndGgpXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYS5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgbGV0IGdBID0gYVtpXSwgZ0IgPSBiW2ldO1xuICAgICAgICAgICAgaWYgKGdBLmZyb20gIT0gZ0IuZnJvbSB8fCBnQS50byAhPSBnQi50byB8fCBnQS5zaXplICE9IGdCLnNpemUpXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBkcmF3KHZpZXdTdGF0ZSwgd3JhcHBpbmcpIHtcbiAgICAgICAgcmV0dXJuIERlY29yYXRpb24ucmVwbGFjZSh7XG4gICAgICAgICAgICB3aWRnZXQ6IG5ldyBMaW5lR2FwV2lkZ2V0KHRoaXMuZGlzcGxheVNpemUgKiAod3JhcHBpbmcgPyB2aWV3U3RhdGUuc2NhbGVZIDogdmlld1N0YXRlLnNjYWxlWCksIHdyYXBwaW5nKVxuICAgICAgICB9KS5yYW5nZSh0aGlzLmZyb20sIHRoaXMudG8pO1xuICAgIH1cbn1cbmNsYXNzIExpbmVHYXBXaWRnZXQgZXh0ZW5kcyBXaWRnZXRUeXBlIHtcbiAgICBjb25zdHJ1Y3RvcihzaXplLCB2ZXJ0aWNhbCkge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLnNpemUgPSBzaXplO1xuICAgICAgICB0aGlzLnZlcnRpY2FsID0gdmVydGljYWw7XG4gICAgfVxuICAgIGVxKG90aGVyKSB7IHJldHVybiBvdGhlci5zaXplID09IHRoaXMuc2l6ZSAmJiBvdGhlci52ZXJ0aWNhbCA9PSB0aGlzLnZlcnRpY2FsOyB9XG4gICAgdG9ET00oKSB7XG4gICAgICAgIGxldCBlbHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICBpZiAodGhpcy52ZXJ0aWNhbCkge1xuICAgICAgICAgICAgZWx0LnN0eWxlLmhlaWdodCA9IHRoaXMuc2l6ZSArIFwicHhcIjtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGVsdC5zdHlsZS53aWR0aCA9IHRoaXMuc2l6ZSArIFwicHhcIjtcbiAgICAgICAgICAgIGVsdC5zdHlsZS5oZWlnaHQgPSBcIjJweFwiO1xuICAgICAgICAgICAgZWx0LnN0eWxlLmRpc3BsYXkgPSBcImlubGluZS1ibG9ja1wiO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBlbHQ7XG4gICAgfVxuICAgIGdldCBlc3RpbWF0ZWRIZWlnaHQoKSB7IHJldHVybiB0aGlzLnZlcnRpY2FsID8gdGhpcy5zaXplIDogLTE7IH1cbn1cbmNsYXNzIFZpZXdTdGF0ZSB7XG4gICAgY29uc3RydWN0b3Ioc3RhdGUpIHtcbiAgICAgICAgdGhpcy5zdGF0ZSA9IHN0YXRlO1xuICAgICAgICAvLyBUaGVzZSBhcmUgY29udGVudERPTS1sb2NhbCBjb29yZGluYXRlc1xuICAgICAgICB0aGlzLnBpeGVsVmlld3BvcnQgPSB7IGxlZnQ6IDAsIHJpZ2h0OiB3aW5kb3cuaW5uZXJXaWR0aCwgdG9wOiAwLCBib3R0b206IDAgfTtcbiAgICAgICAgdGhpcy5pblZpZXcgPSB0cnVlO1xuICAgICAgICB0aGlzLnBhZGRpbmdUb3AgPSAwOyAvLyBQYWRkaW5nIGFib3ZlIHRoZSBkb2N1bWVudCwgc2NhbGVkXG4gICAgICAgIHRoaXMucGFkZGluZ0JvdHRvbSA9IDA7IC8vIFBhZGRpbmcgYmVsb3cgdGhlIGRvY3VtZW50LCBzY2FsZWRcbiAgICAgICAgdGhpcy5jb250ZW50RE9NV2lkdGggPSAwOyAvLyBjb250ZW50RE9NLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLndpZHRoXG4gICAgICAgIHRoaXMuY29udGVudERPTUhlaWdodCA9IDA7IC8vIGNvbnRlbnRET00uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkuaGVpZ2h0XG4gICAgICAgIHRoaXMuZWRpdG9ySGVpZ2h0ID0gMDsgLy8gc2Nyb2xsRE9NLmNsaWVudEhlaWdodCwgdW5zY2FsZWRcbiAgICAgICAgdGhpcy5lZGl0b3JXaWR0aCA9IDA7IC8vIHNjcm9sbERPTS5jbGllbnRXaWR0aCwgdW5zY2FsZWRcbiAgICAgICAgdGhpcy5zY3JvbGxUb3AgPSAwOyAvLyBMYXN0IHNlZW4gc2Nyb2xsRE9NLnNjcm9sbFRvcCwgc2NhbGVkXG4gICAgICAgIHRoaXMuc2Nyb2xsZWRUb0JvdHRvbSA9IGZhbHNlO1xuICAgICAgICAvLyBUaGUgQ1NTLXRyYW5zZm9ybWF0aW9uIHNjYWxlIG9mIHRoZSBlZGl0b3IgKHRyYW5zZm9ybWVkIHNpemUgL1xuICAgICAgICAvLyBjb25jcmV0ZSBzaXplKVxuICAgICAgICB0aGlzLnNjYWxlWCA9IDE7XG4gICAgICAgIHRoaXMuc2NhbGVZID0gMTtcbiAgICAgICAgLy8gVGhlIHZlcnRpY2FsIHBvc2l0aW9uIChkb2N1bWVudC1yZWxhdGl2ZSkgdG8gd2hpY2ggdG8gYW5jaG9yIHRoZVxuICAgICAgICAvLyBzY3JvbGwgcG9zaXRpb24uIC0xIG1lYW5zIGFuY2hvciB0byB0aGUgZW5kIG9mIHRoZSBkb2N1bWVudC5cbiAgICAgICAgdGhpcy5zY3JvbGxBbmNob3JQb3MgPSAwO1xuICAgICAgICAvLyBUaGUgaGVpZ2h0IGF0IHRoZSBhbmNob3IgcG9zaXRpb24uIFNldCBieSB0aGUgRE9NIHVwZGF0ZSBwaGFzZS5cbiAgICAgICAgLy8gLTEgbWVhbnMgbm8gaGVpZ2h0IGF2YWlsYWJsZS5cbiAgICAgICAgdGhpcy5zY3JvbGxBbmNob3JIZWlnaHQgPSAtMTtcbiAgICAgICAgLy8gU2VlIFZQLk1heERPTUhlaWdodFxuICAgICAgICB0aGlzLnNjYWxlciA9IElkU2NhbGVyO1xuICAgICAgICB0aGlzLnNjcm9sbFRhcmdldCA9IG51bGw7XG4gICAgICAgIC8vIEJyaWVmbHkgc2V0IHRvIHRydWUgd2hlbiBwcmludGluZywgdG8gZGlzYWJsZSB2aWV3cG9ydCBsaW1pdGluZ1xuICAgICAgICB0aGlzLnByaW50aW5nID0gZmFsc2U7XG4gICAgICAgIC8vIEZsYWcgc2V0IHdoZW4gZWRpdG9yIGNvbnRlbnQgd2FzIHJlZHJhd24sIHNvIHRoYXQgdGhlIG5leHRcbiAgICAgICAgLy8gbWVhc3VyZSBzdGFnZSBrbm93cyBpdCBtdXN0IHJlYWQgRE9NIGxheW91dFxuICAgICAgICB0aGlzLm11c3RNZWFzdXJlQ29udGVudCA9IHRydWU7XG4gICAgICAgIHRoaXMuZGVmYXVsdFRleHREaXJlY3Rpb24gPSBEaXJlY3Rpb24uTFRSO1xuICAgICAgICB0aGlzLnZpc2libGVSYW5nZXMgPSBbXTtcbiAgICAgICAgLy8gQ3Vyc29yICdhc3NvYycgaXMgb25seSBzaWduaWZpY2FudCB3aGVuIHRoZSBjdXJzb3IgaXMgb24gYSBsaW5lXG4gICAgICAgIC8vIHdyYXAgcG9pbnQsIHdoZXJlIGl0IG11c3Qgc3RpY2sgdG8gdGhlIGNoYXJhY3RlciB0aGF0IGl0IGlzXG4gICAgICAgIC8vIGFzc29jaWF0ZWQgd2l0aC4gU2luY2UgYnJvd3NlcnMgZG9uJ3QgcHJvdmlkZSBhIHJlYXNvbmFibGVcbiAgICAgICAgLy8gaW50ZXJmYWNlIHRvIHNldCBvciBxdWVyeSB0aGlzLCB3aGVuIGEgc2VsZWN0aW9uIGlzIHNldCB0aGF0XG4gICAgICAgIC8vIG1pZ2h0IGNhdXNlIHRoaXMgdG8gYmUgc2lnbmlmaWNhbnQsIHRoaXMgZmxhZyBpcyBzZXQuIFRoZSBuZXh0XG4gICAgICAgIC8vIG1lYXN1cmUgcGhhc2Ugd2lsbCBjaGVjayB3aGV0aGVyIHRoZSBjdXJzb3IgaXMgb24gYSBsaW5lLXdyYXBwaW5nXG4gICAgICAgIC8vIGJvdW5kYXJ5IGFuZCwgaWYgc28sIHJlc2V0IGl0IHRvIG1ha2Ugc3VyZSBpdCBpcyBwb3NpdGlvbmVkIGluXG4gICAgICAgIC8vIHRoZSByaWdodCBwbGFjZS5cbiAgICAgICAgdGhpcy5tdXN0RW5mb3JjZUN1cnNvckFzc29jID0gZmFsc2U7XG4gICAgICAgIGxldCBndWVzc1dyYXBwaW5nID0gc3RhdGUuZmFjZXQoY29udGVudEF0dHJpYnV0ZXMpLnNvbWUodiA9PiB0eXBlb2YgdiAhPSBcImZ1bmN0aW9uXCIgJiYgdi5jbGFzcyA9PSBcImNtLWxpbmVXcmFwcGluZ1wiKTtcbiAgICAgICAgdGhpcy5oZWlnaHRPcmFjbGUgPSBuZXcgSGVpZ2h0T3JhY2xlKGd1ZXNzV3JhcHBpbmcpO1xuICAgICAgICB0aGlzLnN0YXRlRGVjbyA9IHN0YXRlLmZhY2V0KGRlY29yYXRpb25zKS5maWx0ZXIoZCA9PiB0eXBlb2YgZCAhPSBcImZ1bmN0aW9uXCIpO1xuICAgICAgICB0aGlzLmhlaWdodE1hcCA9IEhlaWdodE1hcC5lbXB0eSgpLmFwcGx5Q2hhbmdlcyh0aGlzLnN0YXRlRGVjbywgVGV4dC5lbXB0eSwgdGhpcy5oZWlnaHRPcmFjbGUuc2V0RG9jKHN0YXRlLmRvYyksIFtuZXcgQ2hhbmdlZFJhbmdlKDAsIDAsIDAsIHN0YXRlLmRvYy5sZW5ndGgpXSk7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgMjsgaSsrKSB7XG4gICAgICAgICAgICB0aGlzLnZpZXdwb3J0ID0gdGhpcy5nZXRWaWV3cG9ydCgwLCBudWxsKTtcbiAgICAgICAgICAgIGlmICghdGhpcy51cGRhdGVGb3JWaWV3cG9ydCgpKVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMudXBkYXRlVmlld3BvcnRMaW5lcygpO1xuICAgICAgICB0aGlzLmxpbmVHYXBzID0gdGhpcy5lbnN1cmVMaW5lR2FwcyhbXSk7XG4gICAgICAgIHRoaXMubGluZUdhcERlY28gPSBEZWNvcmF0aW9uLnNldCh0aGlzLmxpbmVHYXBzLm1hcChnYXAgPT4gZ2FwLmRyYXcodGhpcywgZmFsc2UpKSk7XG4gICAgICAgIHRoaXMuY29tcHV0ZVZpc2libGVSYW5nZXMoKTtcbiAgICB9XG4gICAgdXBkYXRlRm9yVmlld3BvcnQoKSB7XG4gICAgICAgIGxldCB2aWV3cG9ydHMgPSBbdGhpcy52aWV3cG9ydF0sIHsgbWFpbiB9ID0gdGhpcy5zdGF0ZS5zZWxlY3Rpb247XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDw9IDE7IGkrKykge1xuICAgICAgICAgICAgbGV0IHBvcyA9IGkgPyBtYWluLmhlYWQgOiBtYWluLmFuY2hvcjtcbiAgICAgICAgICAgIGlmICghdmlld3BvcnRzLnNvbWUoKHsgZnJvbSwgdG8gfSkgPT4gcG9zID49IGZyb20gJiYgcG9zIDw9IHRvKSkge1xuICAgICAgICAgICAgICAgIGxldCB7IGZyb20sIHRvIH0gPSB0aGlzLmxpbmVCbG9ja0F0KHBvcyk7XG4gICAgICAgICAgICAgICAgdmlld3BvcnRzLnB1c2gobmV3IFZpZXdwb3J0KGZyb20sIHRvKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy52aWV3cG9ydHMgPSB2aWV3cG9ydHMuc29ydCgoYSwgYikgPT4gYS5mcm9tIC0gYi5mcm9tKTtcbiAgICAgICAgcmV0dXJuIHRoaXMudXBkYXRlU2NhbGVyKCk7XG4gICAgfVxuICAgIHVwZGF0ZVNjYWxlcigpIHtcbiAgICAgICAgbGV0IHNjYWxlciA9IHRoaXMuc2NhbGVyO1xuICAgICAgICB0aGlzLnNjYWxlciA9IHRoaXMuaGVpZ2h0TWFwLmhlaWdodCA8PSA3MDAwMDAwIC8qIFZQLk1heERPTUhlaWdodCAqLyA/IElkU2NhbGVyIDpcbiAgICAgICAgICAgIG5ldyBCaWdTY2FsZXIodGhpcy5oZWlnaHRPcmFjbGUsIHRoaXMuaGVpZ2h0TWFwLCB0aGlzLnZpZXdwb3J0cyk7XG4gICAgICAgIHJldHVybiBzY2FsZXIuZXEodGhpcy5zY2FsZXIpID8gMCA6IDIgLyogVXBkYXRlRmxhZy5IZWlnaHQgKi87XG4gICAgfVxuICAgIHVwZGF0ZVZpZXdwb3J0TGluZXMoKSB7XG4gICAgICAgIHRoaXMudmlld3BvcnRMaW5lcyA9IFtdO1xuICAgICAgICB0aGlzLmhlaWdodE1hcC5mb3JFYWNoTGluZSh0aGlzLnZpZXdwb3J0LmZyb20sIHRoaXMudmlld3BvcnQudG8sIHRoaXMuaGVpZ2h0T3JhY2xlLnNldERvYyh0aGlzLnN0YXRlLmRvYyksIDAsIDAsIGJsb2NrID0+IHtcbiAgICAgICAgICAgIHRoaXMudmlld3BvcnRMaW5lcy5wdXNoKHNjYWxlQmxvY2soYmxvY2ssIHRoaXMuc2NhbGVyKSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICB1cGRhdGUodXBkYXRlLCBzY3JvbGxUYXJnZXQgPSBudWxsKSB7XG4gICAgICAgIHRoaXMuc3RhdGUgPSB1cGRhdGUuc3RhdGU7XG4gICAgICAgIGxldCBwcmV2RGVjbyA9IHRoaXMuc3RhdGVEZWNvO1xuICAgICAgICB0aGlzLnN0YXRlRGVjbyA9IHRoaXMuc3RhdGUuZmFjZXQoZGVjb3JhdGlvbnMpLmZpbHRlcihkID0+IHR5cGVvZiBkICE9IFwiZnVuY3Rpb25cIik7XG4gICAgICAgIGxldCBjb250ZW50Q2hhbmdlcyA9IHVwZGF0ZS5jaGFuZ2VkUmFuZ2VzO1xuICAgICAgICBsZXQgaGVpZ2h0Q2hhbmdlcyA9IENoYW5nZWRSYW5nZS5leHRlbmRXaXRoUmFuZ2VzKGNvbnRlbnRDaGFuZ2VzLCBoZWlnaHRSZWxldmFudERlY29DaGFuZ2VzKHByZXZEZWNvLCB0aGlzLnN0YXRlRGVjbywgdXBkYXRlID8gdXBkYXRlLmNoYW5nZXMgOiBDaGFuZ2VTZXQuZW1wdHkodGhpcy5zdGF0ZS5kb2MubGVuZ3RoKSkpO1xuICAgICAgICBsZXQgcHJldkhlaWdodCA9IHRoaXMuaGVpZ2h0TWFwLmhlaWdodDtcbiAgICAgICAgbGV0IHNjcm9sbEFuY2hvciA9IHRoaXMuc2Nyb2xsZWRUb0JvdHRvbSA/IG51bGwgOiB0aGlzLnNjcm9sbEFuY2hvckF0KHRoaXMuc2Nyb2xsVG9wKTtcbiAgICAgICAgY2xlYXJIZWlnaHRDaGFuZ2VGbGFnKCk7XG4gICAgICAgIHRoaXMuaGVpZ2h0TWFwID0gdGhpcy5oZWlnaHRNYXAuYXBwbHlDaGFuZ2VzKHRoaXMuc3RhdGVEZWNvLCB1cGRhdGUuc3RhcnRTdGF0ZS5kb2MsIHRoaXMuaGVpZ2h0T3JhY2xlLnNldERvYyh0aGlzLnN0YXRlLmRvYyksIGhlaWdodENoYW5nZXMpO1xuICAgICAgICBpZiAodGhpcy5oZWlnaHRNYXAuaGVpZ2h0ICE9IHByZXZIZWlnaHQgfHwgaGVpZ2h0Q2hhbmdlRmxhZylcbiAgICAgICAgICAgIHVwZGF0ZS5mbGFncyB8PSAyIC8qIFVwZGF0ZUZsYWcuSGVpZ2h0ICovO1xuICAgICAgICBpZiAoc2Nyb2xsQW5jaG9yKSB7XG4gICAgICAgICAgICB0aGlzLnNjcm9sbEFuY2hvclBvcyA9IHVwZGF0ZS5jaGFuZ2VzLm1hcFBvcyhzY3JvbGxBbmNob3IuZnJvbSwgLTEpO1xuICAgICAgICAgICAgdGhpcy5zY3JvbGxBbmNob3JIZWlnaHQgPSBzY3JvbGxBbmNob3IudG9wO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5zY3JvbGxBbmNob3JQb3MgPSAtMTtcbiAgICAgICAgICAgIHRoaXMuc2Nyb2xsQW5jaG9ySGVpZ2h0ID0gcHJldkhlaWdodDtcbiAgICAgICAgfVxuICAgICAgICBsZXQgdmlld3BvcnQgPSBoZWlnaHRDaGFuZ2VzLmxlbmd0aCA/IHRoaXMubWFwVmlld3BvcnQodGhpcy52aWV3cG9ydCwgdXBkYXRlLmNoYW5nZXMpIDogdGhpcy52aWV3cG9ydDtcbiAgICAgICAgaWYgKHNjcm9sbFRhcmdldCAmJiAoc2Nyb2xsVGFyZ2V0LnJhbmdlLmhlYWQgPCB2aWV3cG9ydC5mcm9tIHx8IHNjcm9sbFRhcmdldC5yYW5nZS5oZWFkID4gdmlld3BvcnQudG8pIHx8XG4gICAgICAgICAgICAhdGhpcy52aWV3cG9ydElzQXBwcm9wcmlhdGUodmlld3BvcnQpKVxuICAgICAgICAgICAgdmlld3BvcnQgPSB0aGlzLmdldFZpZXdwb3J0KDAsIHNjcm9sbFRhcmdldCk7XG4gICAgICAgIGxldCB2aWV3cG9ydENoYW5nZSA9IHZpZXdwb3J0LmZyb20gIT0gdGhpcy52aWV3cG9ydC5mcm9tIHx8IHZpZXdwb3J0LnRvICE9IHRoaXMudmlld3BvcnQudG87XG4gICAgICAgIHRoaXMudmlld3BvcnQgPSB2aWV3cG9ydDtcbiAgICAgICAgdXBkYXRlLmZsYWdzIHw9IHRoaXMudXBkYXRlRm9yVmlld3BvcnQoKTtcbiAgICAgICAgaWYgKHZpZXdwb3J0Q2hhbmdlIHx8ICF1cGRhdGUuY2hhbmdlcy5lbXB0eSB8fCAodXBkYXRlLmZsYWdzICYgMiAvKiBVcGRhdGVGbGFnLkhlaWdodCAqLykpXG4gICAgICAgICAgICB0aGlzLnVwZGF0ZVZpZXdwb3J0TGluZXMoKTtcbiAgICAgICAgaWYgKHRoaXMubGluZUdhcHMubGVuZ3RoIHx8IHRoaXMudmlld3BvcnQudG8gLSB0aGlzLnZpZXdwb3J0LmZyb20gPiAoMjAwMCAvKiBMRy5NYXJnaW4gKi8gPDwgMSkpXG4gICAgICAgICAgICB0aGlzLnVwZGF0ZUxpbmVHYXBzKHRoaXMuZW5zdXJlTGluZUdhcHModGhpcy5tYXBMaW5lR2Fwcyh0aGlzLmxpbmVHYXBzLCB1cGRhdGUuY2hhbmdlcykpKTtcbiAgICAgICAgdXBkYXRlLmZsYWdzIHw9IHRoaXMuY29tcHV0ZVZpc2libGVSYW5nZXModXBkYXRlLmNoYW5nZXMpO1xuICAgICAgICBpZiAoc2Nyb2xsVGFyZ2V0KVxuICAgICAgICAgICAgdGhpcy5zY3JvbGxUYXJnZXQgPSBzY3JvbGxUYXJnZXQ7XG4gICAgICAgIGlmICghdGhpcy5tdXN0RW5mb3JjZUN1cnNvckFzc29jICYmIHVwZGF0ZS5zZWxlY3Rpb25TZXQgJiYgdXBkYXRlLnZpZXcubGluZVdyYXBwaW5nICYmXG4gICAgICAgICAgICB1cGRhdGUuc3RhdGUuc2VsZWN0aW9uLm1haW4uZW1wdHkgJiYgdXBkYXRlLnN0YXRlLnNlbGVjdGlvbi5tYWluLmFzc29jICYmXG4gICAgICAgICAgICAhdXBkYXRlLnN0YXRlLmZhY2V0KG5hdGl2ZVNlbGVjdGlvbkhpZGRlbikpXG4gICAgICAgICAgICB0aGlzLm11c3RFbmZvcmNlQ3Vyc29yQXNzb2MgPSB0cnVlO1xuICAgIH1cbiAgICBtZWFzdXJlKHZpZXcpIHtcbiAgICAgICAgbGV0IGRvbSA9IHZpZXcuY29udGVudERPTSwgc3R5bGUgPSB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZShkb20pO1xuICAgICAgICBsZXQgb3JhY2xlID0gdGhpcy5oZWlnaHRPcmFjbGU7XG4gICAgICAgIGxldCB3aGl0ZVNwYWNlID0gc3R5bGUud2hpdGVTcGFjZTtcbiAgICAgICAgdGhpcy5kZWZhdWx0VGV4dERpcmVjdGlvbiA9IHN0eWxlLmRpcmVjdGlvbiA9PSBcInJ0bFwiID8gRGlyZWN0aW9uLlJUTCA6IERpcmVjdGlvbi5MVFI7XG4gICAgICAgIGxldCByZWZyZXNoID0gdGhpcy5oZWlnaHRPcmFjbGUubXVzdFJlZnJlc2hGb3JXcmFwcGluZyh3aGl0ZVNwYWNlKTtcbiAgICAgICAgbGV0IGRvbVJlY3QgPSBkb20uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICAgIGxldCBtZWFzdXJlQ29udGVudCA9IHJlZnJlc2ggfHwgdGhpcy5tdXN0TWVhc3VyZUNvbnRlbnQgfHwgdGhpcy5jb250ZW50RE9NSGVpZ2h0ICE9IGRvbVJlY3QuaGVpZ2h0O1xuICAgICAgICB0aGlzLmNvbnRlbnRET01IZWlnaHQgPSBkb21SZWN0LmhlaWdodDtcbiAgICAgICAgdGhpcy5tdXN0TWVhc3VyZUNvbnRlbnQgPSBmYWxzZTtcbiAgICAgICAgbGV0IHJlc3VsdCA9IDAsIGJpYXMgPSAwO1xuICAgICAgICBpZiAoZG9tUmVjdC53aWR0aCAmJiBkb21SZWN0LmhlaWdodCkge1xuICAgICAgICAgICAgbGV0IHsgc2NhbGVYLCBzY2FsZVkgfSA9IGdldFNjYWxlKGRvbSwgZG9tUmVjdCk7XG4gICAgICAgICAgICBpZiAoc2NhbGVYID4gLjAwNSAmJiBNYXRoLmFicyh0aGlzLnNjYWxlWCAtIHNjYWxlWCkgPiAuMDA1IHx8XG4gICAgICAgICAgICAgICAgc2NhbGVZID4gLjAwNSAmJiBNYXRoLmFicyh0aGlzLnNjYWxlWSAtIHNjYWxlWSkgPiAuMDA1KSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zY2FsZVggPSBzY2FsZVg7XG4gICAgICAgICAgICAgICAgdGhpcy5zY2FsZVkgPSBzY2FsZVk7XG4gICAgICAgICAgICAgICAgcmVzdWx0IHw9IDE2IC8qIFVwZGF0ZUZsYWcuR2VvbWV0cnkgKi87XG4gICAgICAgICAgICAgICAgcmVmcmVzaCA9IG1lYXN1cmVDb250ZW50ID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvLyBWZXJ0aWNhbCBwYWRkaW5nXG4gICAgICAgIGxldCBwYWRkaW5nVG9wID0gKHBhcnNlSW50KHN0eWxlLnBhZGRpbmdUb3ApIHx8IDApICogdGhpcy5zY2FsZVk7XG4gICAgICAgIGxldCBwYWRkaW5nQm90dG9tID0gKHBhcnNlSW50KHN0eWxlLnBhZGRpbmdCb3R0b20pIHx8IDApICogdGhpcy5zY2FsZVk7XG4gICAgICAgIGlmICh0aGlzLnBhZGRpbmdUb3AgIT0gcGFkZGluZ1RvcCB8fCB0aGlzLnBhZGRpbmdCb3R0b20gIT0gcGFkZGluZ0JvdHRvbSkge1xuICAgICAgICAgICAgdGhpcy5wYWRkaW5nVG9wID0gcGFkZGluZ1RvcDtcbiAgICAgICAgICAgIHRoaXMucGFkZGluZ0JvdHRvbSA9IHBhZGRpbmdCb3R0b207XG4gICAgICAgICAgICByZXN1bHQgfD0gMTYgLyogVXBkYXRlRmxhZy5HZW9tZXRyeSAqLyB8IDIgLyogVXBkYXRlRmxhZy5IZWlnaHQgKi87XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuZWRpdG9yV2lkdGggIT0gdmlldy5zY3JvbGxET00uY2xpZW50V2lkdGgpIHtcbiAgICAgICAgICAgIGlmIChvcmFjbGUubGluZVdyYXBwaW5nKVxuICAgICAgICAgICAgICAgIG1lYXN1cmVDb250ZW50ID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMuZWRpdG9yV2lkdGggPSB2aWV3LnNjcm9sbERPTS5jbGllbnRXaWR0aDtcbiAgICAgICAgICAgIHJlc3VsdCB8PSAxNiAvKiBVcGRhdGVGbGFnLkdlb21ldHJ5ICovO1xuICAgICAgICB9XG4gICAgICAgIGxldCBzY3JvbGxUb3AgPSB2aWV3LnNjcm9sbERPTS5zY3JvbGxUb3AgKiB0aGlzLnNjYWxlWTtcbiAgICAgICAgaWYgKHRoaXMuc2Nyb2xsVG9wICE9IHNjcm9sbFRvcCkge1xuICAgICAgICAgICAgdGhpcy5zY3JvbGxBbmNob3JIZWlnaHQgPSAtMTtcbiAgICAgICAgICAgIHRoaXMuc2Nyb2xsVG9wID0gc2Nyb2xsVG9wO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuc2Nyb2xsZWRUb0JvdHRvbSA9IGlzU2Nyb2xsZWRUb0JvdHRvbSh2aWV3LnNjcm9sbERPTSk7XG4gICAgICAgIC8vIFBpeGVsIHZpZXdwb3J0XG4gICAgICAgIGxldCBwaXhlbFZpZXdwb3J0ID0gKHRoaXMucHJpbnRpbmcgPyBmdWxsUGl4ZWxSYW5nZSA6IHZpc2libGVQaXhlbFJhbmdlKShkb20sIHRoaXMucGFkZGluZ1RvcCk7XG4gICAgICAgIGxldCBkVG9wID0gcGl4ZWxWaWV3cG9ydC50b3AgLSB0aGlzLnBpeGVsVmlld3BvcnQudG9wLCBkQm90dG9tID0gcGl4ZWxWaWV3cG9ydC5ib3R0b20gLSB0aGlzLnBpeGVsVmlld3BvcnQuYm90dG9tO1xuICAgICAgICB0aGlzLnBpeGVsVmlld3BvcnQgPSBwaXhlbFZpZXdwb3J0O1xuICAgICAgICBsZXQgaW5WaWV3ID0gdGhpcy5waXhlbFZpZXdwb3J0LmJvdHRvbSA+IHRoaXMucGl4ZWxWaWV3cG9ydC50b3AgJiYgdGhpcy5waXhlbFZpZXdwb3J0LnJpZ2h0ID4gdGhpcy5waXhlbFZpZXdwb3J0LmxlZnQ7XG4gICAgICAgIGlmIChpblZpZXcgIT0gdGhpcy5pblZpZXcpIHtcbiAgICAgICAgICAgIHRoaXMuaW5WaWV3ID0gaW5WaWV3O1xuICAgICAgICAgICAgaWYgKGluVmlldylcbiAgICAgICAgICAgICAgICBtZWFzdXJlQ29udGVudCA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCF0aGlzLmluVmlldyAmJiAhdGhpcy5zY3JvbGxUYXJnZXQgJiYgIWluV2luZG93KHZpZXcuZG9tKSlcbiAgICAgICAgICAgIHJldHVybiAwO1xuICAgICAgICBsZXQgY29udGVudFdpZHRoID0gZG9tUmVjdC53aWR0aDtcbiAgICAgICAgaWYgKHRoaXMuY29udGVudERPTVdpZHRoICE9IGNvbnRlbnRXaWR0aCB8fCB0aGlzLmVkaXRvckhlaWdodCAhPSB2aWV3LnNjcm9sbERPTS5jbGllbnRIZWlnaHQpIHtcbiAgICAgICAgICAgIHRoaXMuY29udGVudERPTVdpZHRoID0gZG9tUmVjdC53aWR0aDtcbiAgICAgICAgICAgIHRoaXMuZWRpdG9ySGVpZ2h0ID0gdmlldy5zY3JvbGxET00uY2xpZW50SGVpZ2h0O1xuICAgICAgICAgICAgcmVzdWx0IHw9IDE2IC8qIFVwZGF0ZUZsYWcuR2VvbWV0cnkgKi87XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lYXN1cmVDb250ZW50KSB7XG4gICAgICAgICAgICBsZXQgbGluZUhlaWdodHMgPSB2aWV3LmRvY1ZpZXcubWVhc3VyZVZpc2libGVMaW5lSGVpZ2h0cyh0aGlzLnZpZXdwb3J0KTtcbiAgICAgICAgICAgIGlmIChvcmFjbGUubXVzdFJlZnJlc2hGb3JIZWlnaHRzKGxpbmVIZWlnaHRzKSlcbiAgICAgICAgICAgICAgICByZWZyZXNoID0gdHJ1ZTtcbiAgICAgICAgICAgIGlmIChyZWZyZXNoIHx8IG9yYWNsZS5saW5lV3JhcHBpbmcgJiYgTWF0aC5hYnMoY29udGVudFdpZHRoIC0gdGhpcy5jb250ZW50RE9NV2lkdGgpID4gb3JhY2xlLmNoYXJXaWR0aCkge1xuICAgICAgICAgICAgICAgIGxldCB7IGxpbmVIZWlnaHQsIGNoYXJXaWR0aCwgdGV4dEhlaWdodCB9ID0gdmlldy5kb2NWaWV3Lm1lYXN1cmVUZXh0U2l6ZSgpO1xuICAgICAgICAgICAgICAgIHJlZnJlc2ggPSBsaW5lSGVpZ2h0ID4gMCAmJiBvcmFjbGUucmVmcmVzaCh3aGl0ZVNwYWNlLCBsaW5lSGVpZ2h0LCBjaGFyV2lkdGgsIHRleHRIZWlnaHQsIE1hdGgubWF4KDUsIGNvbnRlbnRXaWR0aCAvIGNoYXJXaWR0aCksIGxpbmVIZWlnaHRzKTtcbiAgICAgICAgICAgICAgICBpZiAocmVmcmVzaCkge1xuICAgICAgICAgICAgICAgICAgICB2aWV3LmRvY1ZpZXcubWluV2lkdGggPSAwO1xuICAgICAgICAgICAgICAgICAgICByZXN1bHQgfD0gMTYgLyogVXBkYXRlRmxhZy5HZW9tZXRyeSAqLztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZFRvcCA+IDAgJiYgZEJvdHRvbSA+IDApXG4gICAgICAgICAgICAgICAgYmlhcyA9IE1hdGgubWF4KGRUb3AsIGRCb3R0b20pO1xuICAgICAgICAgICAgZWxzZSBpZiAoZFRvcCA8IDAgJiYgZEJvdHRvbSA8IDApXG4gICAgICAgICAgICAgICAgYmlhcyA9IE1hdGgubWluKGRUb3AsIGRCb3R0b20pO1xuICAgICAgICAgICAgY2xlYXJIZWlnaHRDaGFuZ2VGbGFnKCk7XG4gICAgICAgICAgICBmb3IgKGxldCB2cCBvZiB0aGlzLnZpZXdwb3J0cykge1xuICAgICAgICAgICAgICAgIGxldCBoZWlnaHRzID0gdnAuZnJvbSA9PSB0aGlzLnZpZXdwb3J0LmZyb20gPyBsaW5lSGVpZ2h0cyA6IHZpZXcuZG9jVmlldy5tZWFzdXJlVmlzaWJsZUxpbmVIZWlnaHRzKHZwKTtcbiAgICAgICAgICAgICAgICB0aGlzLmhlaWdodE1hcCA9IChyZWZyZXNoID8gSGVpZ2h0TWFwLmVtcHR5KCkuYXBwbHlDaGFuZ2VzKHRoaXMuc3RhdGVEZWNvLCBUZXh0LmVtcHR5LCB0aGlzLmhlaWdodE9yYWNsZSwgW25ldyBDaGFuZ2VkUmFuZ2UoMCwgMCwgMCwgdmlldy5zdGF0ZS5kb2MubGVuZ3RoKV0pIDogdGhpcy5oZWlnaHRNYXApLnVwZGF0ZUhlaWdodChvcmFjbGUsIDAsIHJlZnJlc2gsIG5ldyBNZWFzdXJlZEhlaWdodHModnAuZnJvbSwgaGVpZ2h0cykpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGhlaWdodENoYW5nZUZsYWcpXG4gICAgICAgICAgICAgICAgcmVzdWx0IHw9IDIgLyogVXBkYXRlRmxhZy5IZWlnaHQgKi87XG4gICAgICAgIH1cbiAgICAgICAgbGV0IHZpZXdwb3J0Q2hhbmdlID0gIXRoaXMudmlld3BvcnRJc0FwcHJvcHJpYXRlKHRoaXMudmlld3BvcnQsIGJpYXMpIHx8XG4gICAgICAgICAgICB0aGlzLnNjcm9sbFRhcmdldCAmJiAodGhpcy5zY3JvbGxUYXJnZXQucmFuZ2UuaGVhZCA8IHRoaXMudmlld3BvcnQuZnJvbSB8fFxuICAgICAgICAgICAgICAgIHRoaXMuc2Nyb2xsVGFyZ2V0LnJhbmdlLmhlYWQgPiB0aGlzLnZpZXdwb3J0LnRvKTtcbiAgICAgICAgaWYgKHZpZXdwb3J0Q2hhbmdlKSB7XG4gICAgICAgICAgICBpZiAocmVzdWx0ICYgMiAvKiBVcGRhdGVGbGFnLkhlaWdodCAqLylcbiAgICAgICAgICAgICAgICByZXN1bHQgfD0gdGhpcy51cGRhdGVTY2FsZXIoKTtcbiAgICAgICAgICAgIHRoaXMudmlld3BvcnQgPSB0aGlzLmdldFZpZXdwb3J0KGJpYXMsIHRoaXMuc2Nyb2xsVGFyZ2V0KTtcbiAgICAgICAgICAgIHJlc3VsdCB8PSB0aGlzLnVwZGF0ZUZvclZpZXdwb3J0KCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKChyZXN1bHQgJiAyIC8qIFVwZGF0ZUZsYWcuSGVpZ2h0ICovKSB8fCB2aWV3cG9ydENoYW5nZSlcbiAgICAgICAgICAgIHRoaXMudXBkYXRlVmlld3BvcnRMaW5lcygpO1xuICAgICAgICBpZiAodGhpcy5saW5lR2Fwcy5sZW5ndGggfHwgdGhpcy52aWV3cG9ydC50byAtIHRoaXMudmlld3BvcnQuZnJvbSA+ICgyMDAwIC8qIExHLk1hcmdpbiAqLyA8PCAxKSlcbiAgICAgICAgICAgIHRoaXMudXBkYXRlTGluZUdhcHModGhpcy5lbnN1cmVMaW5lR2FwcyhyZWZyZXNoID8gW10gOiB0aGlzLmxpbmVHYXBzLCB2aWV3KSk7XG4gICAgICAgIHJlc3VsdCB8PSB0aGlzLmNvbXB1dGVWaXNpYmxlUmFuZ2VzKCk7XG4gICAgICAgIGlmICh0aGlzLm11c3RFbmZvcmNlQ3Vyc29yQXNzb2MpIHtcbiAgICAgICAgICAgIHRoaXMubXVzdEVuZm9yY2VDdXJzb3JBc3NvYyA9IGZhbHNlO1xuICAgICAgICAgICAgLy8gVGhpcyBpcyBkb25lIGluIHRoZSByZWFkIHN0YWdlLCBiZWNhdXNlIG1vdmluZyB0aGUgc2VsZWN0aW9uXG4gICAgICAgICAgICAvLyB0byBhIGxpbmUgZW5kIGlzIGdvaW5nIHRvIHRyaWdnZXIgYSBsYXlvdXQgYW55d2F5LCBzbyBpdFxuICAgICAgICAgICAgLy8gY2FuJ3QgYmUgYSBwdXJlIHdyaXRlLiBJdCBzaG91bGQgYmUgcmFyZSB0aGF0IGl0IGRvZXMgYW55XG4gICAgICAgICAgICAvLyB3cml0aW5nLlxuICAgICAgICAgICAgdmlldy5kb2NWaWV3LmVuZm9yY2VDdXJzb3JBc3NvYygpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuICAgIGdldCB2aXNpYmxlVG9wKCkgeyByZXR1cm4gdGhpcy5zY2FsZXIuZnJvbURPTSh0aGlzLnBpeGVsVmlld3BvcnQudG9wKTsgfVxuICAgIGdldCB2aXNpYmxlQm90dG9tKCkgeyByZXR1cm4gdGhpcy5zY2FsZXIuZnJvbURPTSh0aGlzLnBpeGVsVmlld3BvcnQuYm90dG9tKTsgfVxuICAgIGdldFZpZXdwb3J0KGJpYXMsIHNjcm9sbFRhcmdldCkge1xuICAgICAgICAvLyBUaGlzIHdpbGwgZGl2aWRlIFZQLk1hcmdpbiBiZXR3ZWVuIHRoZSB0b3AgYW5kIHRoZVxuICAgICAgICAvLyBib3R0b20sIGRlcGVuZGluZyBvbiB0aGUgYmlhcyAodGhlIGNoYW5nZSBpbiB2aWV3cG9ydCBwb3NpdGlvblxuICAgICAgICAvLyBzaW5jZSB0aGUgbGFzdCB1cGRhdGUpLiBJdCdsbCBob2xkIGEgbnVtYmVyIGJldHdlZW4gMCBhbmQgMVxuICAgICAgICBsZXQgbWFyZ2luVG9wID0gMC41IC0gTWF0aC5tYXgoLTAuNSwgTWF0aC5taW4oMC41LCBiaWFzIC8gMTAwMCAvKiBWUC5NYXJnaW4gKi8gLyAyKSk7XG4gICAgICAgIGxldCBtYXAgPSB0aGlzLmhlaWdodE1hcCwgb3JhY2xlID0gdGhpcy5oZWlnaHRPcmFjbGU7XG4gICAgICAgIGxldCB7IHZpc2libGVUb3AsIHZpc2libGVCb3R0b20gfSA9IHRoaXM7XG4gICAgICAgIGxldCB2aWV3cG9ydCA9IG5ldyBWaWV3cG9ydChtYXAubGluZUF0KHZpc2libGVUb3AgLSBtYXJnaW5Ub3AgKiAxMDAwIC8qIFZQLk1hcmdpbiAqLywgUXVlcnlUeXBlLkJ5SGVpZ2h0LCBvcmFjbGUsIDAsIDApLmZyb20sIG1hcC5saW5lQXQodmlzaWJsZUJvdHRvbSArICgxIC0gbWFyZ2luVG9wKSAqIDEwMDAgLyogVlAuTWFyZ2luICovLCBRdWVyeVR5cGUuQnlIZWlnaHQsIG9yYWNsZSwgMCwgMCkudG8pO1xuICAgICAgICAvLyBJZiBzY3JvbGxUYXJnZXQgaXMgZ2l2ZW4sIG1ha2Ugc3VyZSB0aGUgdmlld3BvcnQgaW5jbHVkZXMgdGhhdCBwb3NpdGlvblxuICAgICAgICBpZiAoc2Nyb2xsVGFyZ2V0KSB7XG4gICAgICAgICAgICBsZXQgeyBoZWFkIH0gPSBzY3JvbGxUYXJnZXQucmFuZ2U7XG4gICAgICAgICAgICBpZiAoaGVhZCA8IHZpZXdwb3J0LmZyb20gfHwgaGVhZCA+IHZpZXdwb3J0LnRvKSB7XG4gICAgICAgICAgICAgICAgbGV0IHZpZXdIZWlnaHQgPSBNYXRoLm1pbih0aGlzLmVkaXRvckhlaWdodCwgdGhpcy5waXhlbFZpZXdwb3J0LmJvdHRvbSAtIHRoaXMucGl4ZWxWaWV3cG9ydC50b3ApO1xuICAgICAgICAgICAgICAgIGxldCBibG9jayA9IG1hcC5saW5lQXQoaGVhZCwgUXVlcnlUeXBlLkJ5UG9zLCBvcmFjbGUsIDAsIDApLCB0b3BQb3M7XG4gICAgICAgICAgICAgICAgaWYgKHNjcm9sbFRhcmdldC55ID09IFwiY2VudGVyXCIpXG4gICAgICAgICAgICAgICAgICAgIHRvcFBvcyA9IChibG9jay50b3AgKyBibG9jay5ib3R0b20pIC8gMiAtIHZpZXdIZWlnaHQgLyAyO1xuICAgICAgICAgICAgICAgIGVsc2UgaWYgKHNjcm9sbFRhcmdldC55ID09IFwic3RhcnRcIiB8fCBzY3JvbGxUYXJnZXQueSA9PSBcIm5lYXJlc3RcIiAmJiBoZWFkIDwgdmlld3BvcnQuZnJvbSlcbiAgICAgICAgICAgICAgICAgICAgdG9wUG9zID0gYmxvY2sudG9wO1xuICAgICAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICAgICAgdG9wUG9zID0gYmxvY2suYm90dG9tIC0gdmlld0hlaWdodDtcbiAgICAgICAgICAgICAgICB2aWV3cG9ydCA9IG5ldyBWaWV3cG9ydChtYXAubGluZUF0KHRvcFBvcyAtIDEwMDAgLyogVlAuTWFyZ2luICovIC8gMiwgUXVlcnlUeXBlLkJ5SGVpZ2h0LCBvcmFjbGUsIDAsIDApLmZyb20sIG1hcC5saW5lQXQodG9wUG9zICsgdmlld0hlaWdodCArIDEwMDAgLyogVlAuTWFyZ2luICovIC8gMiwgUXVlcnlUeXBlLkJ5SGVpZ2h0LCBvcmFjbGUsIDAsIDApLnRvKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdmlld3BvcnQ7XG4gICAgfVxuICAgIG1hcFZpZXdwb3J0KHZpZXdwb3J0LCBjaGFuZ2VzKSB7XG4gICAgICAgIGxldCBmcm9tID0gY2hhbmdlcy5tYXBQb3Modmlld3BvcnQuZnJvbSwgLTEpLCB0byA9IGNoYW5nZXMubWFwUG9zKHZpZXdwb3J0LnRvLCAxKTtcbiAgICAgICAgcmV0dXJuIG5ldyBWaWV3cG9ydCh0aGlzLmhlaWdodE1hcC5saW5lQXQoZnJvbSwgUXVlcnlUeXBlLkJ5UG9zLCB0aGlzLmhlaWdodE9yYWNsZSwgMCwgMCkuZnJvbSwgdGhpcy5oZWlnaHRNYXAubGluZUF0KHRvLCBRdWVyeVR5cGUuQnlQb3MsIHRoaXMuaGVpZ2h0T3JhY2xlLCAwLCAwKS50byk7XG4gICAgfVxuICAgIC8vIENoZWNrcyBpZiBhIGdpdmVuIHZpZXdwb3J0IGNvdmVycyB0aGUgdmlzaWJsZSBwYXJ0IG9mIHRoZVxuICAgIC8vIGRvY3VtZW50IGFuZCBub3QgdG9vIG11Y2ggYmV5b25kIHRoYXQuXG4gICAgdmlld3BvcnRJc0FwcHJvcHJpYXRlKHsgZnJvbSwgdG8gfSwgYmlhcyA9IDApIHtcbiAgICAgICAgaWYgKCF0aGlzLmluVmlldylcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICBsZXQgeyB0b3AgfSA9IHRoaXMuaGVpZ2h0TWFwLmxpbmVBdChmcm9tLCBRdWVyeVR5cGUuQnlQb3MsIHRoaXMuaGVpZ2h0T3JhY2xlLCAwLCAwKTtcbiAgICAgICAgbGV0IHsgYm90dG9tIH0gPSB0aGlzLmhlaWdodE1hcC5saW5lQXQodG8sIFF1ZXJ5VHlwZS5CeVBvcywgdGhpcy5oZWlnaHRPcmFjbGUsIDAsIDApO1xuICAgICAgICBsZXQgeyB2aXNpYmxlVG9wLCB2aXNpYmxlQm90dG9tIH0gPSB0aGlzO1xuICAgICAgICByZXR1cm4gKGZyb20gPT0gMCB8fCB0b3AgPD0gdmlzaWJsZVRvcCAtIE1hdGgubWF4KDEwIC8qIFZQLk1pbkNvdmVyTWFyZ2luICovLCBNYXRoLm1pbigtYmlhcywgMjUwIC8qIFZQLk1heENvdmVyTWFyZ2luICovKSkpICYmXG4gICAgICAgICAgICAodG8gPT0gdGhpcy5zdGF0ZS5kb2MubGVuZ3RoIHx8XG4gICAgICAgICAgICAgICAgYm90dG9tID49IHZpc2libGVCb3R0b20gKyBNYXRoLm1heCgxMCAvKiBWUC5NaW5Db3Zlck1hcmdpbiAqLywgTWF0aC5taW4oYmlhcywgMjUwIC8qIFZQLk1heENvdmVyTWFyZ2luICovKSkpICYmXG4gICAgICAgICAgICAodG9wID4gdmlzaWJsZVRvcCAtIDIgKiAxMDAwIC8qIFZQLk1hcmdpbiAqLyAmJiBib3R0b20gPCB2aXNpYmxlQm90dG9tICsgMiAqIDEwMDAgLyogVlAuTWFyZ2luICovKTtcbiAgICB9XG4gICAgbWFwTGluZUdhcHMoZ2FwcywgY2hhbmdlcykge1xuICAgICAgICBpZiAoIWdhcHMubGVuZ3RoIHx8IGNoYW5nZXMuZW1wdHkpXG4gICAgICAgICAgICByZXR1cm4gZ2FwcztcbiAgICAgICAgbGV0IG1hcHBlZCA9IFtdO1xuICAgICAgICBmb3IgKGxldCBnYXAgb2YgZ2FwcylcbiAgICAgICAgICAgIGlmICghY2hhbmdlcy50b3VjaGVzUmFuZ2UoZ2FwLmZyb20sIGdhcC50bykpXG4gICAgICAgICAgICAgICAgbWFwcGVkLnB1c2gobmV3IExpbmVHYXAoY2hhbmdlcy5tYXBQb3MoZ2FwLmZyb20pLCBjaGFuZ2VzLm1hcFBvcyhnYXAudG8pLCBnYXAuc2l6ZSwgZ2FwLmRpc3BsYXlTaXplKSk7XG4gICAgICAgIHJldHVybiBtYXBwZWQ7XG4gICAgfVxuICAgIC8vIENvbXB1dGVzIHBvc2l0aW9ucyBpbiB0aGUgdmlld3BvcnQgd2hlcmUgdGhlIHN0YXJ0IG9yIGVuZCBvZiBhXG4gICAgLy8gbGluZSBzaG91bGQgYmUgaGlkZGVuLCB0cnlpbmcgdG8gcmV1c2UgZXhpc3RpbmcgbGluZSBnYXBzIHdoZW5cbiAgICAvLyBhcHByb3ByaWF0ZSB0byBhdm9pZCB1bm5lY2Nlc2FyeSByZWRyYXdzLlxuICAgIC8vIFVzZXMgY3J1ZGUgY2hhcmFjdGVyLWNvdW50aW5nIGZvciB0aGUgcG9zaXRpb25pbmcgYW5kIHNpemluZyxcbiAgICAvLyBzaW5jZSBhY3R1YWwgRE9NIGNvb3JkaW5hdGVzIGFyZW4ndCBhbHdheXMgYXZhaWxhYmxlIGFuZFxuICAgIC8vIHByZWRpY3RhYmxlLiBSZWxpZXMgb24gZ2VuZXJvdXMgbWFyZ2lucyAoc2VlIExHLk1hcmdpbikgdG8gaGlkZVxuICAgIC8vIHRoZSBhcnRpZmFjdHMgdGhpcyBtaWdodCBwcm9kdWNlIGZyb20gdGhlIHVzZXIuXG4gICAgZW5zdXJlTGluZUdhcHMoY3VycmVudCwgbWF5TWVhc3VyZSkge1xuICAgICAgICBsZXQgd3JhcHBpbmcgPSB0aGlzLmhlaWdodE9yYWNsZS5saW5lV3JhcHBpbmc7XG4gICAgICAgIGxldCBtYXJnaW4gPSB3cmFwcGluZyA/IDEwMDAwIC8qIExHLk1hcmdpbldyYXAgKi8gOiAyMDAwIC8qIExHLk1hcmdpbiAqLywgaGFsZk1hcmdpbiA9IG1hcmdpbiA+PiAxLCBkb3VibGVNYXJnaW4gPSBtYXJnaW4gPDwgMTtcbiAgICAgICAgLy8gVGhlIG5vbi13cmFwcGluZyBsb2dpYyB3b24ndCB3b3JrIGF0IGFsbCBpbiBwcmVkb21pbmFudGx5IHJpZ2h0LXRvLWxlZnQgdGV4dC5cbiAgICAgICAgaWYgKHRoaXMuZGVmYXVsdFRleHREaXJlY3Rpb24gIT0gRGlyZWN0aW9uLkxUUiAmJiAhd3JhcHBpbmcpXG4gICAgICAgICAgICByZXR1cm4gW107XG4gICAgICAgIGxldCBnYXBzID0gW107XG4gICAgICAgIGxldCBhZGRHYXAgPSAoZnJvbSwgdG8sIGxpbmUsIHN0cnVjdHVyZSkgPT4ge1xuICAgICAgICAgICAgaWYgKHRvIC0gZnJvbSA8IGhhbGZNYXJnaW4pXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgbGV0IHNlbCA9IHRoaXMuc3RhdGUuc2VsZWN0aW9uLm1haW4sIGF2b2lkID0gW3NlbC5mcm9tXTtcbiAgICAgICAgICAgIGlmICghc2VsLmVtcHR5KVxuICAgICAgICAgICAgICAgIGF2b2lkLnB1c2goc2VsLnRvKTtcbiAgICAgICAgICAgIGZvciAobGV0IHBvcyBvZiBhdm9pZCkge1xuICAgICAgICAgICAgICAgIGlmIChwb3MgPiBmcm9tICYmIHBvcyA8IHRvKSB7XG4gICAgICAgICAgICAgICAgICAgIGFkZEdhcChmcm9tLCBwb3MgLSAxMCAvKiBMRy5TZWxlY3Rpb25NYXJnaW4gKi8sIGxpbmUsIHN0cnVjdHVyZSk7XG4gICAgICAgICAgICAgICAgICAgIGFkZEdhcChwb3MgKyAxMCAvKiBMRy5TZWxlY3Rpb25NYXJnaW4gKi8sIHRvLCBsaW5lLCBzdHJ1Y3R1cmUpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbGV0IGdhcCA9IGZpbmQoY3VycmVudCwgZ2FwID0+IGdhcC5mcm9tID49IGxpbmUuZnJvbSAmJiBnYXAudG8gPD0gbGluZS50byAmJlxuICAgICAgICAgICAgICAgIE1hdGguYWJzKGdhcC5mcm9tIC0gZnJvbSkgPCBoYWxmTWFyZ2luICYmIE1hdGguYWJzKGdhcC50byAtIHRvKSA8IGhhbGZNYXJnaW4gJiZcbiAgICAgICAgICAgICAgICAhYXZvaWQuc29tZShwb3MgPT4gZ2FwLmZyb20gPCBwb3MgJiYgZ2FwLnRvID4gcG9zKSk7XG4gICAgICAgICAgICBpZiAoIWdhcCkge1xuICAgICAgICAgICAgICAgIC8vIFdoZW4gc2Nyb2xsaW5nIGRvd24sIHNuYXAgZ2FwIGVuZHMgdG8gbGluZSBzdGFydHMgdG8gYXZvaWQgc2hpZnRzIGluIHdyYXBwaW5nXG4gICAgICAgICAgICAgICAgaWYgKHRvIDwgbGluZS50byAmJiBtYXlNZWFzdXJlICYmIHdyYXBwaW5nICYmXG4gICAgICAgICAgICAgICAgICAgIG1heU1lYXN1cmUudmlzaWJsZVJhbmdlcy5zb21lKHIgPT4gci5mcm9tIDw9IHRvICYmIHIudG8gPj0gdG8pKSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBsaW5lU3RhcnQgPSBtYXlNZWFzdXJlLm1vdmVUb0xpbmVCb3VuZGFyeShFZGl0b3JTZWxlY3Rpb24uY3Vyc29yKHRvKSwgZmFsc2UsIHRydWUpLmhlYWQ7XG4gICAgICAgICAgICAgICAgICAgIGlmIChsaW5lU3RhcnQgPiBmcm9tKVxuICAgICAgICAgICAgICAgICAgICAgICAgdG8gPSBsaW5lU3RhcnQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGxldCBzaXplID0gdGhpcy5nYXBTaXplKGxpbmUsIGZyb20sIHRvLCBzdHJ1Y3R1cmUpO1xuICAgICAgICAgICAgICAgIGxldCBkaXNwbGF5U2l6ZSA9IHdyYXBwaW5nIHx8IHNpemUgPCAyMDAwMDAwIC8qIFZQLk1heEhvcml6R2FwICovID8gc2l6ZSA6IDIwMDAwMDAgLyogVlAuTWF4SG9yaXpHYXAgKi87XG4gICAgICAgICAgICAgICAgZ2FwID0gbmV3IExpbmVHYXAoZnJvbSwgdG8sIHNpemUsIGRpc3BsYXlTaXplKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGdhcHMucHVzaChnYXApO1xuICAgICAgICB9O1xuICAgICAgICBsZXQgY2hlY2tMaW5lID0gKGxpbmUpID0+IHtcbiAgICAgICAgICAgIGlmIChsaW5lLmxlbmd0aCA8IGRvdWJsZU1hcmdpbiB8fCBsaW5lLnR5cGUgIT0gQmxvY2tUeXBlLlRleHQpXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgbGV0IHN0cnVjdHVyZSA9IGxpbmVTdHJ1Y3R1cmUobGluZS5mcm9tLCBsaW5lLnRvLCB0aGlzLnN0YXRlRGVjbyk7XG4gICAgICAgICAgICBpZiAoc3RydWN0dXJlLnRvdGFsIDwgZG91YmxlTWFyZ2luKVxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIGxldCB0YXJnZXQgPSB0aGlzLnNjcm9sbFRhcmdldCA/IHRoaXMuc2Nyb2xsVGFyZ2V0LnJhbmdlLmhlYWQgOiBudWxsO1xuICAgICAgICAgICAgbGV0IHZpZXdGcm9tLCB2aWV3VG87XG4gICAgICAgICAgICBpZiAod3JhcHBpbmcpIHtcbiAgICAgICAgICAgICAgICBsZXQgbWFyZ2luSGVpZ2h0ID0gKG1hcmdpbiAvIHRoaXMuaGVpZ2h0T3JhY2xlLmxpbmVMZW5ndGgpICogdGhpcy5oZWlnaHRPcmFjbGUubGluZUhlaWdodDtcbiAgICAgICAgICAgICAgICBsZXQgdG9wLCBib3Q7XG4gICAgICAgICAgICAgICAgaWYgKHRhcmdldCAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCB0YXJnZXRGcmFjID0gZmluZEZyYWN0aW9uKHN0cnVjdHVyZSwgdGFyZ2V0KTtcbiAgICAgICAgICAgICAgICAgICAgbGV0IHNwYWNlRnJhYyA9ICgodGhpcy52aXNpYmxlQm90dG9tIC0gdGhpcy52aXNpYmxlVG9wKSAvIDIgKyBtYXJnaW5IZWlnaHQpIC8gbGluZS5oZWlnaHQ7XG4gICAgICAgICAgICAgICAgICAgIHRvcCA9IHRhcmdldEZyYWMgLSBzcGFjZUZyYWM7XG4gICAgICAgICAgICAgICAgICAgIGJvdCA9IHRhcmdldEZyYWMgKyBzcGFjZUZyYWM7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0b3AgPSAodGhpcy52aXNpYmxlVG9wIC0gbGluZS50b3AgLSBtYXJnaW5IZWlnaHQpIC8gbGluZS5oZWlnaHQ7XG4gICAgICAgICAgICAgICAgICAgIGJvdCA9ICh0aGlzLnZpc2libGVCb3R0b20gLSBsaW5lLnRvcCArIG1hcmdpbkhlaWdodCkgLyBsaW5lLmhlaWdodDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdmlld0Zyb20gPSBmaW5kUG9zaXRpb24oc3RydWN0dXJlLCB0b3ApO1xuICAgICAgICAgICAgICAgIHZpZXdUbyA9IGZpbmRQb3NpdGlvbihzdHJ1Y3R1cmUsIGJvdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBsZXQgdG90YWxXaWR0aCA9IHN0cnVjdHVyZS50b3RhbCAqIHRoaXMuaGVpZ2h0T3JhY2xlLmNoYXJXaWR0aDtcbiAgICAgICAgICAgICAgICBsZXQgbWFyZ2luV2lkdGggPSBtYXJnaW4gKiB0aGlzLmhlaWdodE9yYWNsZS5jaGFyV2lkdGg7XG4gICAgICAgICAgICAgICAgbGV0IGhvcml6T2Zmc2V0ID0gMDtcbiAgICAgICAgICAgICAgICBpZiAodG90YWxXaWR0aCA+IDIwMDAwMDAgLyogVlAuTWF4SG9yaXpHYXAgKi8pXG4gICAgICAgICAgICAgICAgICAgIGZvciAobGV0IG9sZCBvZiBjdXJyZW50KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAob2xkLmZyb20gPj0gbGluZS5mcm9tICYmIG9sZC5mcm9tIDwgbGluZS50byAmJiBvbGQuc2l6ZSAhPSBvbGQuZGlzcGxheVNpemUgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbGQuZnJvbSAqIHRoaXMuaGVpZ2h0T3JhY2xlLmNoYXJXaWR0aCArIGhvcml6T2Zmc2V0IDwgdGhpcy5waXhlbFZpZXdwb3J0LmxlZnQpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaG9yaXpPZmZzZXQgPSBvbGQuc2l6ZSAtIG9sZC5kaXNwbGF5U2l6ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGxldCBweExlZnQgPSB0aGlzLnBpeGVsVmlld3BvcnQubGVmdCArIGhvcml6T2Zmc2V0LCBweFJpZ2h0ID0gdGhpcy5waXhlbFZpZXdwb3J0LnJpZ2h0ICsgaG9yaXpPZmZzZXQ7XG4gICAgICAgICAgICAgICAgbGV0IGxlZnQsIHJpZ2h0O1xuICAgICAgICAgICAgICAgIGlmICh0YXJnZXQgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICBsZXQgdGFyZ2V0RnJhYyA9IGZpbmRGcmFjdGlvbihzdHJ1Y3R1cmUsIHRhcmdldCk7XG4gICAgICAgICAgICAgICAgICAgIGxldCBzcGFjZUZyYWMgPSAoKHB4UmlnaHQgLSBweExlZnQpIC8gMiArIG1hcmdpbldpZHRoKSAvIHRvdGFsV2lkdGg7XG4gICAgICAgICAgICAgICAgICAgIGxlZnQgPSB0YXJnZXRGcmFjIC0gc3BhY2VGcmFjO1xuICAgICAgICAgICAgICAgICAgICByaWdodCA9IHRhcmdldEZyYWMgKyBzcGFjZUZyYWM7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBsZWZ0ID0gKHB4TGVmdCAtIG1hcmdpbldpZHRoKSAvIHRvdGFsV2lkdGg7XG4gICAgICAgICAgICAgICAgICAgIHJpZ2h0ID0gKHB4UmlnaHQgKyBtYXJnaW5XaWR0aCkgLyB0b3RhbFdpZHRoO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2aWV3RnJvbSA9IGZpbmRQb3NpdGlvbihzdHJ1Y3R1cmUsIGxlZnQpO1xuICAgICAgICAgICAgICAgIHZpZXdUbyA9IGZpbmRQb3NpdGlvbihzdHJ1Y3R1cmUsIHJpZ2h0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh2aWV3RnJvbSA+IGxpbmUuZnJvbSlcbiAgICAgICAgICAgICAgICBhZGRHYXAobGluZS5mcm9tLCB2aWV3RnJvbSwgbGluZSwgc3RydWN0dXJlKTtcbiAgICAgICAgICAgIGlmICh2aWV3VG8gPCBsaW5lLnRvKVxuICAgICAgICAgICAgICAgIGFkZEdhcCh2aWV3VG8sIGxpbmUudG8sIGxpbmUsIHN0cnVjdHVyZSk7XG4gICAgICAgIH07XG4gICAgICAgIGZvciAobGV0IGxpbmUgb2YgdGhpcy52aWV3cG9ydExpbmVzKSB7XG4gICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShsaW5lLnR5cGUpKVxuICAgICAgICAgICAgICAgIGxpbmUudHlwZS5mb3JFYWNoKGNoZWNrTGluZSk7XG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgY2hlY2tMaW5lKGxpbmUpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBnYXBzO1xuICAgIH1cbiAgICBnYXBTaXplKGxpbmUsIGZyb20sIHRvLCBzdHJ1Y3R1cmUpIHtcbiAgICAgICAgbGV0IGZyYWN0aW9uID0gZmluZEZyYWN0aW9uKHN0cnVjdHVyZSwgdG8pIC0gZmluZEZyYWN0aW9uKHN0cnVjdHVyZSwgZnJvbSk7XG4gICAgICAgIGlmICh0aGlzLmhlaWdodE9yYWNsZS5saW5lV3JhcHBpbmcpIHtcbiAgICAgICAgICAgIHJldHVybiBsaW5lLmhlaWdodCAqIGZyYWN0aW9uO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHN0cnVjdHVyZS50b3RhbCAqIHRoaXMuaGVpZ2h0T3JhY2xlLmNoYXJXaWR0aCAqIGZyYWN0aW9uO1xuICAgICAgICB9XG4gICAgfVxuICAgIHVwZGF0ZUxpbmVHYXBzKGdhcHMpIHtcbiAgICAgICAgaWYgKCFMaW5lR2FwLnNhbWUoZ2FwcywgdGhpcy5saW5lR2FwcykpIHtcbiAgICAgICAgICAgIHRoaXMubGluZUdhcHMgPSBnYXBzO1xuICAgICAgICAgICAgdGhpcy5saW5lR2FwRGVjbyA9IERlY29yYXRpb24uc2V0KGdhcHMubWFwKGdhcCA9PiBnYXAuZHJhdyh0aGlzLCB0aGlzLmhlaWdodE9yYWNsZS5saW5lV3JhcHBpbmcpKSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgY29tcHV0ZVZpc2libGVSYW5nZXMoY2hhbmdlcykge1xuICAgICAgICBsZXQgZGVjbyA9IHRoaXMuc3RhdGVEZWNvO1xuICAgICAgICBpZiAodGhpcy5saW5lR2Fwcy5sZW5ndGgpXG4gICAgICAgICAgICBkZWNvID0gZGVjby5jb25jYXQodGhpcy5saW5lR2FwRGVjbyk7XG4gICAgICAgIGxldCByYW5nZXMgPSBbXTtcbiAgICAgICAgUmFuZ2VTZXQuc3BhbnMoZGVjbywgdGhpcy52aWV3cG9ydC5mcm9tLCB0aGlzLnZpZXdwb3J0LnRvLCB7XG4gICAgICAgICAgICBzcGFuKGZyb20sIHRvKSB7IHJhbmdlcy5wdXNoKHsgZnJvbSwgdG8gfSk7IH0sXG4gICAgICAgICAgICBwb2ludCgpIHsgfVxuICAgICAgICB9LCAyMCk7XG4gICAgICAgIGxldCBjaGFuZ2VkID0gMDtcbiAgICAgICAgaWYgKHJhbmdlcy5sZW5ndGggIT0gdGhpcy52aXNpYmxlUmFuZ2VzLmxlbmd0aCkge1xuICAgICAgICAgICAgY2hhbmdlZCA9IDggLyogVXBkYXRlRmxhZy5WaWV3cG9ydE1vdmVkICovIHwgNCAvKiBVcGRhdGVGbGFnLlZpZXdwb3J0ICovO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCByYW5nZXMubGVuZ3RoICYmICEoY2hhbmdlZCAmIDggLyogVXBkYXRlRmxhZy5WaWV3cG9ydE1vdmVkICovKTsgaSsrKSB7XG4gICAgICAgICAgICAgICAgbGV0IG9sZCA9IHRoaXMudmlzaWJsZVJhbmdlc1tpXSwgbncgPSByYW5nZXNbaV07XG4gICAgICAgICAgICAgICAgaWYgKG9sZC5mcm9tICE9IG53LmZyb20gfHwgb2xkLnRvICE9IG53LnRvKSB7XG4gICAgICAgICAgICAgICAgICAgIGNoYW5nZWQgfD0gNCAvKiBVcGRhdGVGbGFnLlZpZXdwb3J0ICovO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIShjaGFuZ2VzICYmIGNoYW5nZXMubWFwUG9zKG9sZC5mcm9tLCAtMSkgPT0gbncuZnJvbSAmJiBjaGFuZ2VzLm1hcFBvcyhvbGQudG8sIDEpID09IG53LnRvKSlcbiAgICAgICAgICAgICAgICAgICAgICAgIGNoYW5nZWQgfD0gOCAvKiBVcGRhdGVGbGFnLlZpZXdwb3J0TW92ZWQgKi87XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHRoaXMudmlzaWJsZVJhbmdlcyA9IHJhbmdlcztcbiAgICAgICAgcmV0dXJuIGNoYW5nZWQ7XG4gICAgfVxuICAgIGxpbmVCbG9ja0F0KHBvcykge1xuICAgICAgICByZXR1cm4gKHBvcyA+PSB0aGlzLnZpZXdwb3J0LmZyb20gJiYgcG9zIDw9IHRoaXMudmlld3BvcnQudG8gJiZcbiAgICAgICAgICAgIHRoaXMudmlld3BvcnRMaW5lcy5maW5kKGIgPT4gYi5mcm9tIDw9IHBvcyAmJiBiLnRvID49IHBvcykpIHx8XG4gICAgICAgICAgICBzY2FsZUJsb2NrKHRoaXMuaGVpZ2h0TWFwLmxpbmVBdChwb3MsIFF1ZXJ5VHlwZS5CeVBvcywgdGhpcy5oZWlnaHRPcmFjbGUsIDAsIDApLCB0aGlzLnNjYWxlcik7XG4gICAgfVxuICAgIGxpbmVCbG9ja0F0SGVpZ2h0KGhlaWdodCkge1xuICAgICAgICByZXR1cm4gKGhlaWdodCA+PSB0aGlzLnZpZXdwb3J0TGluZXNbMF0udG9wICYmIGhlaWdodCA8PSB0aGlzLnZpZXdwb3J0TGluZXNbdGhpcy52aWV3cG9ydExpbmVzLmxlbmd0aCAtIDFdLmJvdHRvbSAmJlxuICAgICAgICAgICAgdGhpcy52aWV3cG9ydExpbmVzLmZpbmQobCA9PiBsLnRvcCA8PSBoZWlnaHQgJiYgbC5ib3R0b20gPj0gaGVpZ2h0KSkgfHxcbiAgICAgICAgICAgIHNjYWxlQmxvY2sodGhpcy5oZWlnaHRNYXAubGluZUF0KHRoaXMuc2NhbGVyLmZyb21ET00oaGVpZ2h0KSwgUXVlcnlUeXBlLkJ5SGVpZ2h0LCB0aGlzLmhlaWdodE9yYWNsZSwgMCwgMCksIHRoaXMuc2NhbGVyKTtcbiAgICB9XG4gICAgc2Nyb2xsQW5jaG9yQXQoc2Nyb2xsVG9wKSB7XG4gICAgICAgIGxldCBibG9jayA9IHRoaXMubGluZUJsb2NrQXRIZWlnaHQoc2Nyb2xsVG9wICsgOCk7XG4gICAgICAgIHJldHVybiBibG9jay5mcm9tID49IHRoaXMudmlld3BvcnQuZnJvbSB8fCB0aGlzLnZpZXdwb3J0TGluZXNbMF0udG9wIC0gc2Nyb2xsVG9wID4gMjAwID8gYmxvY2sgOiB0aGlzLnZpZXdwb3J0TGluZXNbMF07XG4gICAgfVxuICAgIGVsZW1lbnRBdEhlaWdodChoZWlnaHQpIHtcbiAgICAgICAgcmV0dXJuIHNjYWxlQmxvY2sodGhpcy5oZWlnaHRNYXAuYmxvY2tBdCh0aGlzLnNjYWxlci5mcm9tRE9NKGhlaWdodCksIHRoaXMuaGVpZ2h0T3JhY2xlLCAwLCAwKSwgdGhpcy5zY2FsZXIpO1xuICAgIH1cbiAgICBnZXQgZG9jSGVpZ2h0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zY2FsZXIudG9ET00odGhpcy5oZWlnaHRNYXAuaGVpZ2h0KTtcbiAgICB9XG4gICAgZ2V0IGNvbnRlbnRIZWlnaHQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRvY0hlaWdodCArIHRoaXMucGFkZGluZ1RvcCArIHRoaXMucGFkZGluZ0JvdHRvbTtcbiAgICB9XG59XG5jbGFzcyBWaWV3cG9ydCB7XG4gICAgY29uc3RydWN0b3IoZnJvbSwgdG8pIHtcbiAgICAgICAgdGhpcy5mcm9tID0gZnJvbTtcbiAgICAgICAgdGhpcy50byA9IHRvO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGxpbmVTdHJ1Y3R1cmUoZnJvbSwgdG8sIHN0YXRlRGVjbykge1xuICAgIGxldCByYW5nZXMgPSBbXSwgcG9zID0gZnJvbSwgdG90YWwgPSAwO1xuICAgIFJhbmdlU2V0LnNwYW5zKHN0YXRlRGVjbywgZnJvbSwgdG8sIHtcbiAgICAgICAgc3BhbigpIHsgfSxcbiAgICAgICAgcG9pbnQoZnJvbSwgdG8pIHtcbiAgICAgICAgICAgIGlmIChmcm9tID4gcG9zKSB7XG4gICAgICAgICAgICAgICAgcmFuZ2VzLnB1c2goeyBmcm9tOiBwb3MsIHRvOiBmcm9tIH0pO1xuICAgICAgICAgICAgICAgIHRvdGFsICs9IGZyb20gLSBwb3M7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBwb3MgPSB0bztcbiAgICAgICAgfVxuICAgIH0sIDIwKTsgLy8gV2UncmUgb25seSBpbnRlcmVzdGVkIGluIGNvbGxhcHNlZCByYW5nZXMgb2YgYSBzaWduaWZpY2FudCBzaXplXG4gICAgaWYgKHBvcyA8IHRvKSB7XG4gICAgICAgIHJhbmdlcy5wdXNoKHsgZnJvbTogcG9zLCB0byB9KTtcbiAgICAgICAgdG90YWwgKz0gdG8gLSBwb3M7XG4gICAgfVxuICAgIHJldHVybiB7IHRvdGFsLCByYW5nZXMgfTtcbn1cbmZ1bmN0aW9uIGZpbmRQb3NpdGlvbih7IHRvdGFsLCByYW5nZXMgfSwgcmF0aW8pIHtcbiAgICBpZiAocmF0aW8gPD0gMClcbiAgICAgICAgcmV0dXJuIHJhbmdlc1swXS5mcm9tO1xuICAgIGlmIChyYXRpbyA+PSAxKVxuICAgICAgICByZXR1cm4gcmFuZ2VzW3Jhbmdlcy5sZW5ndGggLSAxXS50bztcbiAgICBsZXQgZGlzdCA9IE1hdGguZmxvb3IodG90YWwgKiByYXRpbyk7XG4gICAgZm9yIChsZXQgaSA9IDA7OyBpKyspIHtcbiAgICAgICAgbGV0IHsgZnJvbSwgdG8gfSA9IHJhbmdlc1tpXSwgc2l6ZSA9IHRvIC0gZnJvbTtcbiAgICAgICAgaWYgKGRpc3QgPD0gc2l6ZSlcbiAgICAgICAgICAgIHJldHVybiBmcm9tICsgZGlzdDtcbiAgICAgICAgZGlzdCAtPSBzaXplO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGZpbmRGcmFjdGlvbihzdHJ1Y3R1cmUsIHBvcykge1xuICAgIGxldCBjb3VudGVkID0gMDtcbiAgICBmb3IgKGxldCB7IGZyb20sIHRvIH0gb2Ygc3RydWN0dXJlLnJhbmdlcykge1xuICAgICAgICBpZiAocG9zIDw9IHRvKSB7XG4gICAgICAgICAgICBjb3VudGVkICs9IHBvcyAtIGZyb207XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBjb3VudGVkICs9IHRvIC0gZnJvbTtcbiAgICB9XG4gICAgcmV0dXJuIGNvdW50ZWQgLyBzdHJ1Y3R1cmUudG90YWw7XG59XG5mdW5jdGlvbiBmaW5kKGFycmF5LCBmKSB7XG4gICAgZm9yIChsZXQgdmFsIG9mIGFycmF5KVxuICAgICAgICBpZiAoZih2YWwpKVxuICAgICAgICAgICAgcmV0dXJuIHZhbDtcbiAgICByZXR1cm4gdW5kZWZpbmVkO1xufVxuLy8gRG9uJ3Qgc2NhbGUgd2hlbiB0aGUgZG9jdW1lbnQgaGVpZ2h0IGlzIHdpdGhpbiB0aGUgcmFuZ2Ugb2Ygd2hhdFxuLy8gdGhlIERPTSBjYW4gaGFuZGxlLlxuY29uc3QgSWRTY2FsZXIgPSB7XG4gICAgdG9ET00obikgeyByZXR1cm4gbjsgfSxcbiAgICBmcm9tRE9NKG4pIHsgcmV0dXJuIG47IH0sXG4gICAgc2NhbGU6IDEsXG4gICAgZXEob3RoZXIpIHsgcmV0dXJuIG90aGVyID09IHRoaXM7IH1cbn07XG4vLyBXaGVuIHRoZSBoZWlnaHQgaXMgdG9vIGJpZyAoPiBWUC5NYXhET01IZWlnaHQpLCBzY2FsZSBkb3duIHRoZVxuLy8gcmVnaW9ucyBvdXRzaWRlIHRoZSB2aWV3cG9ydHMgc28gdGhhdCB0aGUgdG90YWwgaGVpZ2h0IGlzXG4vLyBWUC5NYXhET01IZWlnaHQuXG5jbGFzcyBCaWdTY2FsZXIge1xuICAgIGNvbnN0cnVjdG9yKG9yYWNsZSwgaGVpZ2h0TWFwLCB2aWV3cG9ydHMpIHtcbiAgICAgICAgbGV0IHZwSGVpZ2h0ID0gMCwgYmFzZSA9IDAsIGRvbUJhc2UgPSAwO1xuICAgICAgICB0aGlzLnZpZXdwb3J0cyA9IHZpZXdwb3J0cy5tYXAoKHsgZnJvbSwgdG8gfSkgPT4ge1xuICAgICAgICAgICAgbGV0IHRvcCA9IGhlaWdodE1hcC5saW5lQXQoZnJvbSwgUXVlcnlUeXBlLkJ5UG9zLCBvcmFjbGUsIDAsIDApLnRvcDtcbiAgICAgICAgICAgIGxldCBib3R0b20gPSBoZWlnaHRNYXAubGluZUF0KHRvLCBRdWVyeVR5cGUuQnlQb3MsIG9yYWNsZSwgMCwgMCkuYm90dG9tO1xuICAgICAgICAgICAgdnBIZWlnaHQgKz0gYm90dG9tIC0gdG9wO1xuICAgICAgICAgICAgcmV0dXJuIHsgZnJvbSwgdG8sIHRvcCwgYm90dG9tLCBkb21Ub3A6IDAsIGRvbUJvdHRvbTogMCB9O1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5zY2FsZSA9ICg3MDAwMDAwIC8qIFZQLk1heERPTUhlaWdodCAqLyAtIHZwSGVpZ2h0KSAvIChoZWlnaHRNYXAuaGVpZ2h0IC0gdnBIZWlnaHQpO1xuICAgICAgICBmb3IgKGxldCBvYmogb2YgdGhpcy52aWV3cG9ydHMpIHtcbiAgICAgICAgICAgIG9iai5kb21Ub3AgPSBkb21CYXNlICsgKG9iai50b3AgLSBiYXNlKSAqIHRoaXMuc2NhbGU7XG4gICAgICAgICAgICBkb21CYXNlID0gb2JqLmRvbUJvdHRvbSA9IG9iai5kb21Ub3AgKyAob2JqLmJvdHRvbSAtIG9iai50b3ApO1xuICAgICAgICAgICAgYmFzZSA9IG9iai5ib3R0b207XG4gICAgICAgIH1cbiAgICB9XG4gICAgdG9ET00obikge1xuICAgICAgICBmb3IgKGxldCBpID0gMCwgYmFzZSA9IDAsIGRvbUJhc2UgPSAwOzsgaSsrKSB7XG4gICAgICAgICAgICBsZXQgdnAgPSBpIDwgdGhpcy52aWV3cG9ydHMubGVuZ3RoID8gdGhpcy52aWV3cG9ydHNbaV0gOiBudWxsO1xuICAgICAgICAgICAgaWYgKCF2cCB8fCBuIDwgdnAudG9wKVxuICAgICAgICAgICAgICAgIHJldHVybiBkb21CYXNlICsgKG4gLSBiYXNlKSAqIHRoaXMuc2NhbGU7XG4gICAgICAgICAgICBpZiAobiA8PSB2cC5ib3R0b20pXG4gICAgICAgICAgICAgICAgcmV0dXJuIHZwLmRvbVRvcCArIChuIC0gdnAudG9wKTtcbiAgICAgICAgICAgIGJhc2UgPSB2cC5ib3R0b207XG4gICAgICAgICAgICBkb21CYXNlID0gdnAuZG9tQm90dG9tO1xuICAgICAgICB9XG4gICAgfVxuICAgIGZyb21ET00obikge1xuICAgICAgICBmb3IgKGxldCBpID0gMCwgYmFzZSA9IDAsIGRvbUJhc2UgPSAwOzsgaSsrKSB7XG4gICAgICAgICAgICBsZXQgdnAgPSBpIDwgdGhpcy52aWV3cG9ydHMubGVuZ3RoID8gdGhpcy52aWV3cG9ydHNbaV0gOiBudWxsO1xuICAgICAgICAgICAgaWYgKCF2cCB8fCBuIDwgdnAuZG9tVG9wKVxuICAgICAgICAgICAgICAgIHJldHVybiBiYXNlICsgKG4gLSBkb21CYXNlKSAvIHRoaXMuc2NhbGU7XG4gICAgICAgICAgICBpZiAobiA8PSB2cC5kb21Cb3R0b20pXG4gICAgICAgICAgICAgICAgcmV0dXJuIHZwLnRvcCArIChuIC0gdnAuZG9tVG9wKTtcbiAgICAgICAgICAgIGJhc2UgPSB2cC5ib3R0b207XG4gICAgICAgICAgICBkb21CYXNlID0gdnAuZG9tQm90dG9tO1xuICAgICAgICB9XG4gICAgfVxuICAgIGVxKG90aGVyKSB7XG4gICAgICAgIGlmICghKG90aGVyIGluc3RhbmNlb2YgQmlnU2NhbGVyKSlcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2NhbGUgPT0gb3RoZXIuc2NhbGUgJiYgdGhpcy52aWV3cG9ydHMubGVuZ3RoID09IG90aGVyLnZpZXdwb3J0cy5sZW5ndGggJiZcbiAgICAgICAgICAgIHRoaXMudmlld3BvcnRzLmV2ZXJ5KCh2cCwgaSkgPT4gdnAuZnJvbSA9PSBvdGhlci52aWV3cG9ydHNbaV0uZnJvbSAmJiB2cC50byA9PSBvdGhlci52aWV3cG9ydHNbaV0udG8pO1xuICAgIH1cbn1cbmZ1bmN0aW9uIHNjYWxlQmxvY2soYmxvY2ssIHNjYWxlcikge1xuICAgIGlmIChzY2FsZXIuc2NhbGUgPT0gMSlcbiAgICAgICAgcmV0dXJuIGJsb2NrO1xuICAgIGxldCBiVG9wID0gc2NhbGVyLnRvRE9NKGJsb2NrLnRvcCksIGJCb3R0b20gPSBzY2FsZXIudG9ET00oYmxvY2suYm90dG9tKTtcbiAgICByZXR1cm4gbmV3IEJsb2NrSW5mbyhibG9jay5mcm9tLCBibG9jay5sZW5ndGgsIGJUb3AsIGJCb3R0b20gLSBiVG9wLCBBcnJheS5pc0FycmF5KGJsb2NrLl9jb250ZW50KSA/IGJsb2NrLl9jb250ZW50Lm1hcChiID0+IHNjYWxlQmxvY2soYiwgc2NhbGVyKSkgOiBibG9jay5fY29udGVudCk7XG59XG5cbmNvbnN0IHRoZW1lID0gLypAX19QVVJFX18qL0ZhY2V0LmRlZmluZSh7IGNvbWJpbmU6IHN0cnMgPT4gc3Rycy5qb2luKFwiIFwiKSB9KTtcbmNvbnN0IGRhcmtUaGVtZSA9IC8qQF9fUFVSRV9fKi9GYWNldC5kZWZpbmUoeyBjb21iaW5lOiB2YWx1ZXMgPT4gdmFsdWVzLmluZGV4T2YodHJ1ZSkgPiAtMSB9KTtcbmNvbnN0IGJhc2VUaGVtZUlEID0gLypAX19QVVJFX18qL1N0eWxlTW9kdWxlLm5ld05hbWUoKSwgYmFzZUxpZ2h0SUQgPSAvKkBfX1BVUkVfXyovU3R5bGVNb2R1bGUubmV3TmFtZSgpLCBiYXNlRGFya0lEID0gLypAX19QVVJFX18qL1N0eWxlTW9kdWxlLm5ld05hbWUoKTtcbmNvbnN0IGxpZ2h0RGFya0lEcyA9IHsgXCImbGlnaHRcIjogXCIuXCIgKyBiYXNlTGlnaHRJRCwgXCImZGFya1wiOiBcIi5cIiArIGJhc2VEYXJrSUQgfTtcbmZ1bmN0aW9uIGJ1aWxkVGhlbWUobWFpbiwgc3BlYywgc2NvcGVzKSB7XG4gICAgcmV0dXJuIG5ldyBTdHlsZU1vZHVsZShzcGVjLCB7XG4gICAgICAgIGZpbmlzaChzZWwpIHtcbiAgICAgICAgICAgIHJldHVybiAvJi8udGVzdChzZWwpID8gc2VsLnJlcGxhY2UoLyZcXHcqLywgbSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKG0gPT0gXCImXCIpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBtYWluO1xuICAgICAgICAgICAgICAgIGlmICghc2NvcGVzIHx8ICFzY29wZXNbbV0pXG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBSYW5nZUVycm9yKGBVbnN1cHBvcnRlZCBzZWxlY3RvcjogJHttfWApO1xuICAgICAgICAgICAgICAgIHJldHVybiBzY29wZXNbbV07XG4gICAgICAgICAgICB9KSA6IG1haW4gKyBcIiBcIiArIHNlbDtcbiAgICAgICAgfVxuICAgIH0pO1xufVxuY29uc3QgYmFzZVRoZW1lJDEgPSAvKkBfX1BVUkVfXyovYnVpbGRUaGVtZShcIi5cIiArIGJhc2VUaGVtZUlELCB7XG4gICAgXCImXCI6IHtcbiAgICAgICAgcG9zaXRpb246IFwicmVsYXRpdmUgIWltcG9ydGFudFwiLFxuICAgICAgICBib3hTaXppbmc6IFwiYm9yZGVyLWJveFwiLFxuICAgICAgICBcIiYuY20tZm9jdXNlZFwiOiB7XG4gICAgICAgICAgICAvLyBQcm92aWRlIGEgc2ltcGxlIGRlZmF1bHQgb3V0bGluZSB0byBtYWtlIHN1cmUgYSBmb2N1c2VkXG4gICAgICAgICAgICAvLyBlZGl0b3IgaXMgdmlzdWFsbHkgZGlzdGluY3QuIENhbid0IGxlYXZlIHRoZSBkZWZhdWx0IGJlaGF2aW9yXG4gICAgICAgICAgICAvLyBiZWNhdXNlIHRoYXQgd2lsbCBhcHBseSB0byB0aGUgY29udGVudCBlbGVtZW50LCB3aGljaCBpc1xuICAgICAgICAgICAgLy8gaW5zaWRlIHRoZSBzY3JvbGxhYmxlIGNvbnRhaW5lciBhbmQgZG9lc24ndCBpbmNsdWRlIHRoZVxuICAgICAgICAgICAgLy8gZ3V0dGVycy4gV2UgYWxzbyBjYW4ndCB1c2UgYW4gJ2F1dG8nIG91dGxpbmUsIHNpbmNlIHRob3NlXG4gICAgICAgICAgICAvLyBhcmUsIGZvciBzb21lIHJlYXNvbiwgZHJhd24gYmVoaW5kIHRoZSBlbGVtZW50IGNvbnRlbnQsIHdoaWNoXG4gICAgICAgICAgICAvLyB3aWxsIGNhdXNlIHRoaW5ncyBsaWtlIHRoZSBhY3RpdmUgbGluZSBiYWNrZ3JvdW5kIHRvIGNvdmVyXG4gICAgICAgICAgICAvLyB0aGUgb3V0bGluZSAoIzI5NykuXG4gICAgICAgICAgICBvdXRsaW5lOiBcIjFweCBkb3R0ZWQgIzIxMjEyMVwiXG4gICAgICAgIH0sXG4gICAgICAgIGRpc3BsYXk6IFwiZmxleCAhaW1wb3J0YW50XCIsXG4gICAgICAgIGZsZXhEaXJlY3Rpb246IFwiY29sdW1uXCJcbiAgICB9LFxuICAgIFwiLmNtLXNjcm9sbGVyXCI6IHtcbiAgICAgICAgZGlzcGxheTogXCJmbGV4ICFpbXBvcnRhbnRcIixcbiAgICAgICAgYWxpZ25JdGVtczogXCJmbGV4LXN0YXJ0ICFpbXBvcnRhbnRcIixcbiAgICAgICAgZm9udEZhbWlseTogXCJtb25vc3BhY2VcIixcbiAgICAgICAgbGluZUhlaWdodDogMS40LFxuICAgICAgICBoZWlnaHQ6IFwiMTAwJVwiLFxuICAgICAgICBvdmVyZmxvd1g6IFwiYXV0b1wiLFxuICAgICAgICBwb3NpdGlvbjogXCJyZWxhdGl2ZVwiLFxuICAgICAgICB6SW5kZXg6IDAsXG4gICAgICAgIG92ZXJmbG93QW5jaG9yOiBcIm5vbmVcIixcbiAgICB9LFxuICAgIFwiLmNtLWNvbnRlbnRcIjoge1xuICAgICAgICBtYXJnaW46IDAsXG4gICAgICAgIGZsZXhHcm93OiAyLFxuICAgICAgICBmbGV4U2hyaW5rOiAwLFxuICAgICAgICBkaXNwbGF5OiBcImJsb2NrXCIsXG4gICAgICAgIHdoaXRlU3BhY2U6IFwicHJlXCIsXG4gICAgICAgIHdvcmRXcmFwOiBcIm5vcm1hbFwiLCAvLyBodHRwczovL2dpdGh1Yi5jb20vY29kZW1pcnJvci9kZXYvaXNzdWVzLzQ1NlxuICAgICAgICBib3hTaXppbmc6IFwiYm9yZGVyLWJveFwiLFxuICAgICAgICBtaW5IZWlnaHQ6IFwiMTAwJVwiLFxuICAgICAgICBwYWRkaW5nOiBcIjRweCAwXCIsXG4gICAgICAgIG91dGxpbmU6IFwibm9uZVwiLFxuICAgICAgICBcIiZbY29udGVudGVkaXRhYmxlPXRydWVdXCI6IHtcbiAgICAgICAgICAgIFdlYmtpdFVzZXJNb2RpZnk6IFwicmVhZC13cml0ZS1wbGFpbnRleHQtb25seVwiLFxuICAgICAgICB9XG4gICAgfSxcbiAgICBcIi5jbS1saW5lV3JhcHBpbmdcIjoge1xuICAgICAgICB3aGl0ZVNwYWNlX2ZhbGxiYWNrOiBcInByZS13cmFwXCIsIC8vIEZvciBJRVxuICAgICAgICB3aGl0ZVNwYWNlOiBcImJyZWFrLXNwYWNlc1wiLFxuICAgICAgICB3b3JkQnJlYWs6IFwiYnJlYWstd29yZFwiLCAvLyBGb3IgU2FmYXJpLCB3aGljaCBkb2Vzbid0IHN1cHBvcnQgb3ZlcmZsb3ctd3JhcDogYW55d2hlcmVcbiAgICAgICAgb3ZlcmZsb3dXcmFwOiBcImFueXdoZXJlXCIsXG4gICAgICAgIGZsZXhTaHJpbms6IDFcbiAgICB9LFxuICAgIFwiJmxpZ2h0IC5jbS1jb250ZW50XCI6IHsgY2FyZXRDb2xvcjogXCJibGFja1wiIH0sXG4gICAgXCImZGFyayAuY20tY29udGVudFwiOiB7IGNhcmV0Q29sb3I6IFwid2hpdGVcIiB9LFxuICAgIFwiLmNtLWxpbmVcIjoge1xuICAgICAgICBkaXNwbGF5OiBcImJsb2NrXCIsXG4gICAgICAgIHBhZGRpbmc6IFwiMCAycHggMCA2cHhcIlxuICAgIH0sXG4gICAgXCIuY20tbGF5ZXJcIjoge1xuICAgICAgICBwb3NpdGlvbjogXCJhYnNvbHV0ZVwiLFxuICAgICAgICBsZWZ0OiAwLFxuICAgICAgICB0b3A6IDAsXG4gICAgICAgIGNvbnRhaW46IFwic2l6ZSBzdHlsZVwiLFxuICAgICAgICBcIiYgPiAqXCI6IHtcbiAgICAgICAgICAgIHBvc2l0aW9uOiBcImFic29sdXRlXCJcbiAgICAgICAgfVxuICAgIH0sXG4gICAgXCImbGlnaHQgLmNtLXNlbGVjdGlvbkJhY2tncm91bmRcIjoge1xuICAgICAgICBiYWNrZ3JvdW5kOiBcIiNkOWQ5ZDlcIlxuICAgIH0sXG4gICAgXCImZGFyayAuY20tc2VsZWN0aW9uQmFja2dyb3VuZFwiOiB7XG4gICAgICAgIGJhY2tncm91bmQ6IFwiIzIyMlwiXG4gICAgfSxcbiAgICBcIiZsaWdodC5jbS1mb2N1c2VkID4gLmNtLXNjcm9sbGVyID4gLmNtLXNlbGVjdGlvbkxheWVyIC5jbS1zZWxlY3Rpb25CYWNrZ3JvdW5kXCI6IHtcbiAgICAgICAgYmFja2dyb3VuZDogXCIjZDdkNGYwXCJcbiAgICB9LFxuICAgIFwiJmRhcmsuY20tZm9jdXNlZCA+IC5jbS1zY3JvbGxlciA+IC5jbS1zZWxlY3Rpb25MYXllciAuY20tc2VsZWN0aW9uQmFja2dyb3VuZFwiOiB7XG4gICAgICAgIGJhY2tncm91bmQ6IFwiIzIzM1wiXG4gICAgfSxcbiAgICBcIi5jbS1jdXJzb3JMYXllclwiOiB7XG4gICAgICAgIHBvaW50ZXJFdmVudHM6IFwibm9uZVwiXG4gICAgfSxcbiAgICBcIiYuY20tZm9jdXNlZCA+IC5jbS1zY3JvbGxlciA+IC5jbS1jdXJzb3JMYXllclwiOiB7XG4gICAgICAgIGFuaW1hdGlvbjogXCJzdGVwcygxKSBjbS1ibGluayAxLjJzIGluZmluaXRlXCJcbiAgICB9LFxuICAgIC8vIFR3byBhbmltYXRpb25zIGRlZmluZWQgc28gdGhhdCB3ZSBjYW4gc3dpdGNoIGJldHdlZW4gdGhlbSB0b1xuICAgIC8vIHJlc3RhcnQgdGhlIGFuaW1hdGlvbiB3aXRob3V0IGZvcmNpbmcgYW5vdGhlciBzdHlsZVxuICAgIC8vIHJlY29tcHV0YXRpb24uXG4gICAgXCJAa2V5ZnJhbWVzIGNtLWJsaW5rXCI6IHsgXCIwJVwiOiB7fSwgXCI1MCVcIjogeyBvcGFjaXR5OiAwIH0sIFwiMTAwJVwiOiB7fSB9LFxuICAgIFwiQGtleWZyYW1lcyBjbS1ibGluazJcIjogeyBcIjAlXCI6IHt9LCBcIjUwJVwiOiB7IG9wYWNpdHk6IDAgfSwgXCIxMDAlXCI6IHt9IH0sXG4gICAgXCIuY20tY3Vyc29yLCAuY20tZHJvcEN1cnNvclwiOiB7XG4gICAgICAgIGJvcmRlckxlZnQ6IFwiMS4ycHggc29saWQgYmxhY2tcIixcbiAgICAgICAgbWFyZ2luTGVmdDogXCItMC42cHhcIixcbiAgICAgICAgcG9pbnRlckV2ZW50czogXCJub25lXCIsXG4gICAgfSxcbiAgICBcIi5jbS1jdXJzb3JcIjoge1xuICAgICAgICBkaXNwbGF5OiBcIm5vbmVcIlxuICAgIH0sXG4gICAgXCImZGFyayAuY20tY3Vyc29yXCI6IHtcbiAgICAgICAgYm9yZGVyTGVmdENvbG9yOiBcIiNkZGRcIlxuICAgIH0sXG4gICAgXCIuY20tZHJvcEN1cnNvclwiOiB7XG4gICAgICAgIHBvc2l0aW9uOiBcImFic29sdXRlXCJcbiAgICB9LFxuICAgIFwiJi5jbS1mb2N1c2VkID4gLmNtLXNjcm9sbGVyID4gLmNtLWN1cnNvckxheWVyIC5jbS1jdXJzb3JcIjoge1xuICAgICAgICBkaXNwbGF5OiBcImJsb2NrXCJcbiAgICB9LFxuICAgIFwiLmNtLWlzb1wiOiB7XG4gICAgICAgIHVuaWNvZGVCaWRpOiBcImlzb2xhdGVcIlxuICAgIH0sXG4gICAgXCIuY20tYW5ub3VuY2VkXCI6IHtcbiAgICAgICAgcG9zaXRpb246IFwiZml4ZWRcIixcbiAgICAgICAgdG9wOiBcIi0xMDAwMHB4XCJcbiAgICB9LFxuICAgIFwiQG1lZGlhIHByaW50XCI6IHtcbiAgICAgICAgXCIuY20tYW5ub3VuY2VkXCI6IHsgZGlzcGxheTogXCJub25lXCIgfVxuICAgIH0sXG4gICAgXCImbGlnaHQgLmNtLWFjdGl2ZUxpbmVcIjogeyBiYWNrZ3JvdW5kQ29sb3I6IFwiI2NjZWVmZjQ0XCIgfSxcbiAgICBcIiZkYXJrIC5jbS1hY3RpdmVMaW5lXCI6IHsgYmFja2dyb3VuZENvbG9yOiBcIiM5OWVlZmYzM1wiIH0sXG4gICAgXCImbGlnaHQgLmNtLXNwZWNpYWxDaGFyXCI6IHsgY29sb3I6IFwicmVkXCIgfSxcbiAgICBcIiZkYXJrIC5jbS1zcGVjaWFsQ2hhclwiOiB7IGNvbG9yOiBcIiNmNzhcIiB9LFxuICAgIFwiLmNtLWd1dHRlcnNcIjoge1xuICAgICAgICBmbGV4U2hyaW5rOiAwLFxuICAgICAgICBkaXNwbGF5OiBcImZsZXhcIixcbiAgICAgICAgaGVpZ2h0OiBcIjEwMCVcIixcbiAgICAgICAgYm94U2l6aW5nOiBcImJvcmRlci1ib3hcIixcbiAgICAgICAgekluZGV4OiAyMDAsXG4gICAgfSxcbiAgICBcIi5jbS1ndXR0ZXJzLWJlZm9yZVwiOiB7IGluc2V0SW5saW5lU3RhcnQ6IDAgfSxcbiAgICBcIi5jbS1ndXR0ZXJzLWFmdGVyXCI6IHsgaW5zZXRJbmxpbmVFbmQ6IDAgfSxcbiAgICBcIiZsaWdodCAuY20tZ3V0dGVyc1wiOiB7XG4gICAgICAgIGJhY2tncm91bmRDb2xvcjogXCIjZjVmNWY1XCIsXG4gICAgICAgIGNvbG9yOiBcIiM2YzZjNmNcIixcbiAgICAgICAgYm9yZGVyOiBcIjBweCBzb2xpZCAjZGRkXCIsXG4gICAgICAgIFwiJi5jbS1ndXR0ZXJzLWJlZm9yZVwiOiB7IGJvcmRlclJpZ2h0V2lkdGg6IFwiMXB4XCIgfSxcbiAgICAgICAgXCImLmNtLWd1dHRlcnMtYWZ0ZXJcIjogeyBib3JkZXJMZWZ0V2lkdGg6IFwiMXB4XCIgfSxcbiAgICB9LFxuICAgIFwiJmRhcmsgLmNtLWd1dHRlcnNcIjoge1xuICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6IFwiIzMzMzMzOFwiLFxuICAgICAgICBjb2xvcjogXCIjY2NjXCJcbiAgICB9LFxuICAgIFwiLmNtLWd1dHRlclwiOiB7XG4gICAgICAgIGRpc3BsYXk6IFwiZmxleCAhaW1wb3J0YW50XCIsIC8vIE5lY2Vzc2FyeSAtLSBwcmV2ZW50cyBtYXJnaW4gY29sbGFwc2luZ1xuICAgICAgICBmbGV4RGlyZWN0aW9uOiBcImNvbHVtblwiLFxuICAgICAgICBmbGV4U2hyaW5rOiAwLFxuICAgICAgICBib3hTaXppbmc6IFwiYm9yZGVyLWJveFwiLFxuICAgICAgICBtaW5IZWlnaHQ6IFwiMTAwJVwiLFxuICAgICAgICBvdmVyZmxvdzogXCJoaWRkZW5cIlxuICAgIH0sXG4gICAgXCIuY20tZ3V0dGVyRWxlbWVudFwiOiB7XG4gICAgICAgIGJveFNpemluZzogXCJib3JkZXItYm94XCJcbiAgICB9LFxuICAgIFwiLmNtLWxpbmVOdW1iZXJzIC5jbS1ndXR0ZXJFbGVtZW50XCI6IHtcbiAgICAgICAgcGFkZGluZzogXCIwIDNweCAwIDVweFwiLFxuICAgICAgICBtaW5XaWR0aDogXCIyMHB4XCIsXG4gICAgICAgIHRleHRBbGlnbjogXCJyaWdodFwiLFxuICAgICAgICB3aGl0ZVNwYWNlOiBcIm5vd3JhcFwiXG4gICAgfSxcbiAgICBcIiZsaWdodCAuY20tYWN0aXZlTGluZUd1dHRlclwiOiB7XG4gICAgICAgIGJhY2tncm91bmRDb2xvcjogXCIjZTJmMmZmXCJcbiAgICB9LFxuICAgIFwiJmRhcmsgLmNtLWFjdGl2ZUxpbmVHdXR0ZXJcIjoge1xuICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6IFwiIzIyMjIyN1wiXG4gICAgfSxcbiAgICBcIi5jbS1wYW5lbHNcIjoge1xuICAgICAgICBib3hTaXppbmc6IFwiYm9yZGVyLWJveFwiLFxuICAgICAgICBwb3NpdGlvbjogXCJzdGlja3lcIixcbiAgICAgICAgbGVmdDogMCxcbiAgICAgICAgcmlnaHQ6IDAsXG4gICAgICAgIHpJbmRleDogMzAwXG4gICAgfSxcbiAgICBcIiZsaWdodCAuY20tcGFuZWxzXCI6IHtcbiAgICAgICAgYmFja2dyb3VuZENvbG9yOiBcIiNmNWY1ZjVcIixcbiAgICAgICAgY29sb3I6IFwiYmxhY2tcIlxuICAgIH0sXG4gICAgXCImbGlnaHQgLmNtLXBhbmVscy10b3BcIjoge1xuICAgICAgICBib3JkZXJCb3R0b206IFwiMXB4IHNvbGlkICNkZGRcIlxuICAgIH0sXG4gICAgXCImbGlnaHQgLmNtLXBhbmVscy1ib3R0b21cIjoge1xuICAgICAgICBib3JkZXJUb3A6IFwiMXB4IHNvbGlkICNkZGRcIlxuICAgIH0sXG4gICAgXCImZGFyayAuY20tcGFuZWxzXCI6IHtcbiAgICAgICAgYmFja2dyb3VuZENvbG9yOiBcIiMzMzMzMzhcIixcbiAgICAgICAgY29sb3I6IFwid2hpdGVcIlxuICAgIH0sXG4gICAgXCIuY20tZGlhbG9nXCI6IHtcbiAgICAgICAgcGFkZGluZzogXCIycHggMTlweCA0cHggNnB4XCIsXG4gICAgICAgIHBvc2l0aW9uOiBcInJlbGF0aXZlXCIsXG4gICAgICAgIFwiJiBsYWJlbFwiOiB7IGZvbnRTaXplOiBcIjgwJVwiIH0sXG4gICAgfSxcbiAgICBcIi5jbS1kaWFsb2ctY2xvc2VcIjoge1xuICAgICAgICBwb3NpdGlvbjogXCJhYnNvbHV0ZVwiLFxuICAgICAgICB0b3A6IFwiM3B4XCIsXG4gICAgICAgIHJpZ2h0OiBcIjRweFwiLFxuICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6IFwiaW5oZXJpdFwiLFxuICAgICAgICBib3JkZXI6IFwibm9uZVwiLFxuICAgICAgICBmb250OiBcImluaGVyaXRcIixcbiAgICAgICAgZm9udFNpemU6IFwiMTRweFwiLFxuICAgICAgICBwYWRkaW5nOiBcIjBcIlxuICAgIH0sXG4gICAgXCIuY20tdGFiXCI6IHtcbiAgICAgICAgZGlzcGxheTogXCJpbmxpbmUtYmxvY2tcIixcbiAgICAgICAgb3ZlcmZsb3c6IFwiaGlkZGVuXCIsXG4gICAgICAgIHZlcnRpY2FsQWxpZ246IFwiYm90dG9tXCJcbiAgICB9LFxuICAgIFwiLmNtLXdpZGdldEJ1ZmZlclwiOiB7XG4gICAgICAgIHZlcnRpY2FsQWxpZ246IFwidGV4dC10b3BcIixcbiAgICAgICAgaGVpZ2h0OiBcIjFlbVwiLFxuICAgICAgICB3aWR0aDogMCxcbiAgICAgICAgZGlzcGxheTogXCJpbmxpbmVcIlxuICAgIH0sXG4gICAgXCIuY20tcGxhY2Vob2xkZXJcIjoge1xuICAgICAgICBjb2xvcjogXCIjODg4XCIsXG4gICAgICAgIGRpc3BsYXk6IFwiaW5saW5lLWJsb2NrXCIsXG4gICAgICAgIHZlcnRpY2FsQWxpZ246IFwidG9wXCIsXG4gICAgICAgIHVzZXJTZWxlY3Q6IFwibm9uZVwiXG4gICAgfSxcbiAgICBcIi5jbS1oaWdobGlnaHRTcGFjZVwiOiB7XG4gICAgICAgIGJhY2tncm91bmRJbWFnZTogXCJyYWRpYWwtZ3JhZGllbnQoY2lyY2xlIGF0IDUwJSA1NSUsICNhYWEgMjAlLCB0cmFuc3BhcmVudCA1JSlcIixcbiAgICAgICAgYmFja2dyb3VuZFBvc2l0aW9uOiBcImNlbnRlclwiLFxuICAgIH0sXG4gICAgXCIuY20taGlnaGxpZ2h0VGFiXCI6IHtcbiAgICAgICAgYmFja2dyb3VuZEltYWdlOiBgdXJsKCdkYXRhOmltYWdlL3N2Zyt4bWwsPHN2ZyB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIgd2lkdGg9XCIyMDBcIiBoZWlnaHQ9XCIyMFwiPjxwYXRoIHN0cm9rZT1cIiUyMzg4OFwiIHN0cm9rZS13aWR0aD1cIjFcIiBmaWxsPVwibm9uZVwiIGQ9XCJNMSAxMEgxOTZMMTkwIDVNMTkwIDE1TDE5NiAxME0xOTcgNEwxOTcgMTZcIi8+PC9zdmc+JylgLFxuICAgICAgICBiYWNrZ3JvdW5kU2l6ZTogXCJhdXRvIDEwMCVcIixcbiAgICAgICAgYmFja2dyb3VuZFBvc2l0aW9uOiBcInJpZ2h0IDkwJVwiLFxuICAgICAgICBiYWNrZ3JvdW5kUmVwZWF0OiBcIm5vLXJlcGVhdFwiXG4gICAgfSxcbiAgICBcIi5jbS10cmFpbGluZ1NwYWNlXCI6IHtcbiAgICAgICAgYmFja2dyb3VuZENvbG9yOiBcIiNmZjMzMjI1NVwiXG4gICAgfSxcbiAgICBcIi5jbS1idXR0b25cIjoge1xuICAgICAgICB2ZXJ0aWNhbEFsaWduOiBcIm1pZGRsZVwiLFxuICAgICAgICBjb2xvcjogXCJpbmhlcml0XCIsXG4gICAgICAgIGZvbnRTaXplOiBcIjcwJVwiLFxuICAgICAgICBwYWRkaW5nOiBcIi4yZW0gMWVtXCIsXG4gICAgICAgIGJvcmRlclJhZGl1czogXCIxcHhcIlxuICAgIH0sXG4gICAgXCImbGlnaHQgLmNtLWJ1dHRvblwiOiB7XG4gICAgICAgIGJhY2tncm91bmRJbWFnZTogXCJsaW5lYXItZ3JhZGllbnQoI2VmZjFmNSwgI2Q5ZDlkZilcIixcbiAgICAgICAgYm9yZGVyOiBcIjFweCBzb2xpZCAjODg4XCIsXG4gICAgICAgIFwiJjphY3RpdmVcIjoge1xuICAgICAgICAgICAgYmFja2dyb3VuZEltYWdlOiBcImxpbmVhci1ncmFkaWVudCgjYjRiNGI0LCAjZDBkM2Q2KVwiXG4gICAgICAgIH1cbiAgICB9LFxuICAgIFwiJmRhcmsgLmNtLWJ1dHRvblwiOiB7XG4gICAgICAgIGJhY2tncm91bmRJbWFnZTogXCJsaW5lYXItZ3JhZGllbnQoIzM5MzkzOSwgIzExMSlcIixcbiAgICAgICAgYm9yZGVyOiBcIjFweCBzb2xpZCAjODg4XCIsXG4gICAgICAgIFwiJjphY3RpdmVcIjoge1xuICAgICAgICAgICAgYmFja2dyb3VuZEltYWdlOiBcImxpbmVhci1ncmFkaWVudCgjMTExLCAjMzMzKVwiXG4gICAgICAgIH1cbiAgICB9LFxuICAgIFwiLmNtLXRleHRmaWVsZFwiOiB7XG4gICAgICAgIHZlcnRpY2FsQWxpZ246IFwibWlkZGxlXCIsXG4gICAgICAgIGNvbG9yOiBcImluaGVyaXRcIixcbiAgICAgICAgZm9udFNpemU6IFwiNzAlXCIsXG4gICAgICAgIGJvcmRlcjogXCIxcHggc29saWQgc2lsdmVyXCIsXG4gICAgICAgIHBhZGRpbmc6IFwiLjJlbSAuNWVtXCJcbiAgICB9LFxuICAgIFwiJmxpZ2h0IC5jbS10ZXh0ZmllbGRcIjoge1xuICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6IFwid2hpdGVcIlxuICAgIH0sXG4gICAgXCImZGFyayAuY20tdGV4dGZpZWxkXCI6IHtcbiAgICAgICAgYm9yZGVyOiBcIjFweCBzb2xpZCAjNTU1XCIsXG4gICAgICAgIGJhY2tncm91bmRDb2xvcjogXCJpbmhlcml0XCJcbiAgICB9XG59LCBsaWdodERhcmtJRHMpO1xuXG5jb25zdCBvYnNlcnZlT3B0aW9ucyA9IHtcbiAgICBjaGlsZExpc3Q6IHRydWUsXG4gICAgY2hhcmFjdGVyRGF0YTogdHJ1ZSxcbiAgICBzdWJ0cmVlOiB0cnVlLFxuICAgIGF0dHJpYnV0ZXM6IHRydWUsXG4gICAgY2hhcmFjdGVyRGF0YU9sZFZhbHVlOiB0cnVlXG59O1xuLy8gSUUxMSBoYXMgdmVyeSBicm9rZW4gbXV0YXRpb24gb2JzZXJ2ZXJzLCBzbyB3ZSBhbHNvIGxpc3RlbiB0b1xuLy8gRE9NQ2hhcmFjdGVyRGF0YU1vZGlmaWVkIHRoZXJlXG5jb25zdCB1c2VDaGFyRGF0YSA9IGJyb3dzZXIuaWUgJiYgYnJvd3Nlci5pZV92ZXJzaW9uIDw9IDExO1xuY2xhc3MgRE9NT2JzZXJ2ZXIge1xuICAgIGNvbnN0cnVjdG9yKHZpZXcpIHtcbiAgICAgICAgdGhpcy52aWV3ID0gdmlldztcbiAgICAgICAgdGhpcy5hY3RpdmUgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5lZGl0Q29udGV4dCA9IG51bGw7XG4gICAgICAgIC8vIFRoZSBrbm93biBzZWxlY3Rpb24uIEtlcHQgaW4gb3VyIG93biBvYmplY3QsIGFzIG9wcG9zZWQgdG8ganVzdFxuICAgICAgICAvLyBkaXJlY3RseSBhY2Nlc3NpbmcgdGhlIHNlbGVjdGlvbiBiZWNhdXNlOlxuICAgICAgICAvLyAgLSBTYWZhcmkgZG9lc24ndCByZXBvcnQgdGhlIHJpZ2h0IHNlbGVjdGlvbiBpbiBzaGFkb3cgRE9NXG4gICAgICAgIC8vICAtIFJlYWRpbmcgZnJvbSB0aGUgc2VsZWN0aW9uIGZvcmNlcyBhIERPTSBsYXlvdXRcbiAgICAgICAgLy8gIC0gVGhpcyB3YXksIHdlIGNhbiBpZ25vcmUgc2VsZWN0aW9uY2hhbmdlIGV2ZW50cyBpZiB3ZSBoYXZlXG4gICAgICAgIC8vICAgIGFscmVhZHkgc2VlbiB0aGUgJ25ldycgc2VsZWN0aW9uXG4gICAgICAgIHRoaXMuc2VsZWN0aW9uUmFuZ2UgPSBuZXcgRE9NU2VsZWN0aW9uU3RhdGU7XG4gICAgICAgIC8vIFNldCB3aGVuIGEgc2VsZWN0aW9uIGNoYW5nZSBpcyBkZXRlY3RlZCwgY2xlYXJlZCBvbiBmbHVzaFxuICAgICAgICB0aGlzLnNlbGVjdGlvbkNoYW5nZWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5kZWxheWVkRmx1c2ggPSAtMTtcbiAgICAgICAgdGhpcy5yZXNpemVUaW1lb3V0ID0gLTE7XG4gICAgICAgIHRoaXMucXVldWUgPSBbXTtcbiAgICAgICAgdGhpcy5kZWxheWVkQW5kcm9pZEtleSA9IG51bGw7XG4gICAgICAgIHRoaXMuZmx1c2hpbmdBbmRyb2lkS2V5ID0gLTE7XG4gICAgICAgIHRoaXMubGFzdENoYW5nZSA9IDA7XG4gICAgICAgIHRoaXMuc2Nyb2xsVGFyZ2V0cyA9IFtdO1xuICAgICAgICB0aGlzLmludGVyc2VjdGlvbiA9IG51bGw7XG4gICAgICAgIHRoaXMucmVzaXplU2Nyb2xsID0gbnVsbDtcbiAgICAgICAgdGhpcy5pbnRlcnNlY3RpbmcgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5nYXBJbnRlcnNlY3Rpb24gPSBudWxsO1xuICAgICAgICB0aGlzLmdhcHMgPSBbXTtcbiAgICAgICAgdGhpcy5wcmludFF1ZXJ5ID0gbnVsbDtcbiAgICAgICAgLy8gVGltZW91dCBmb3Igc2NoZWR1bGluZyBjaGVjayBvZiB0aGUgcGFyZW50cyB0aGF0IG5lZWQgc2Nyb2xsIGhhbmRsZXJzXG4gICAgICAgIHRoaXMucGFyZW50Q2hlY2sgPSAtMTtcbiAgICAgICAgdGhpcy5kb20gPSB2aWV3LmNvbnRlbnRET007XG4gICAgICAgIHRoaXMub2JzZXJ2ZXIgPSBuZXcgTXV0YXRpb25PYnNlcnZlcihtdXRhdGlvbnMgPT4ge1xuICAgICAgICAgICAgZm9yIChsZXQgbXV0IG9mIG11dGF0aW9ucylcbiAgICAgICAgICAgICAgICB0aGlzLnF1ZXVlLnB1c2gobXV0KTtcbiAgICAgICAgICAgIC8vIElFMTEgd2lsbCBzb21ldGltZXMgKG9uIHR5cGluZyBvdmVyIGEgc2VsZWN0aW9uIG9yXG4gICAgICAgICAgICAvLyBiYWNrc3BhY2luZyBvdXQgYSBzaW5nbGUgY2hhcmFjdGVyIHRleHQgbm9kZSkgY2FsbCB0aGVcbiAgICAgICAgICAgIC8vIG9ic2VydmVyIGNhbGxiYWNrIGJlZm9yZSBhY3R1YWxseSB1cGRhdGluZyB0aGUgRE9NLlxuICAgICAgICAgICAgLy9cbiAgICAgICAgICAgIC8vIFVucmVsYXRlZGx5LCBpT1MgU2FmYXJpIHdpbGwsIHdoZW4gZW5kaW5nIGEgY29tcG9zaXRpb24sXG4gICAgICAgICAgICAvLyBzb21ldGltZXMgZmlyc3QgY2xlYXIgaXQsIGRlbGl2ZXIgdGhlIG11dGF0aW9ucywgYW5kIHRoZW5cbiAgICAgICAgICAgIC8vIHJlaW5zZXJ0IHRoZSBmaW5pc2hlZCB0ZXh0LiBDb2RlTWlycm9yJ3MgaGFuZGxpbmcgb2YgdGhlXG4gICAgICAgICAgICAvLyBkZWxldGlvbiB3aWxsIHByZXZlbnQgdGhlIHJlaW5zZXJ0aW9uIGZyb20gaGFwcGVuaW5nLFxuICAgICAgICAgICAgLy8gYnJlYWtpbmcgY29tcG9zaXRpb24uXG4gICAgICAgICAgICBpZiAoKGJyb3dzZXIuaWUgJiYgYnJvd3Nlci5pZV92ZXJzaW9uIDw9IDExIHx8IGJyb3dzZXIuaW9zICYmIHZpZXcuY29tcG9zaW5nKSAmJlxuICAgICAgICAgICAgICAgIG11dGF0aW9ucy5zb21lKG0gPT4gbS50eXBlID09IFwiY2hpbGRMaXN0XCIgJiYgbS5yZW1vdmVkTm9kZXMubGVuZ3RoIHx8XG4gICAgICAgICAgICAgICAgICAgIG0udHlwZSA9PSBcImNoYXJhY3RlckRhdGFcIiAmJiBtLm9sZFZhbHVlLmxlbmd0aCA+IG0udGFyZ2V0Lm5vZGVWYWx1ZS5sZW5ndGgpKVxuICAgICAgICAgICAgICAgIHRoaXMuZmx1c2hTb29uKCk7XG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgdGhpcy5mbHVzaCgpO1xuICAgICAgICB9KTtcbiAgICAgICAgaWYgKHdpbmRvdy5FZGl0Q29udGV4dCAmJiBicm93c2VyLmFuZHJvaWQgJiYgdmlldy5jb25zdHJ1Y3Rvci5FRElUX0NPTlRFWFQgIT09IGZhbHNlICYmXG4gICAgICAgICAgICAvLyBDaHJvbWUgPDEyNiBkb2Vzbid0IHN1cHBvcnQgaW52ZXJ0ZWQgc2VsZWN0aW9ucyBpbiBlZGl0IGNvbnRleHQgKCMxMzkyKVxuICAgICAgICAgICAgIShicm93c2VyLmNocm9tZSAmJiBicm93c2VyLmNocm9tZV92ZXJzaW9uIDwgMTI2KSkge1xuICAgICAgICAgICAgdGhpcy5lZGl0Q29udGV4dCA9IG5ldyBFZGl0Q29udGV4dE1hbmFnZXIodmlldyk7XG4gICAgICAgICAgICBpZiAodmlldy5zdGF0ZS5mYWNldChlZGl0YWJsZSkpXG4gICAgICAgICAgICAgICAgdmlldy5jb250ZW50RE9NLmVkaXRDb250ZXh0ID0gdGhpcy5lZGl0Q29udGV4dC5lZGl0Q29udGV4dDtcbiAgICAgICAgfVxuICAgICAgICBpZiAodXNlQ2hhckRhdGEpXG4gICAgICAgICAgICB0aGlzLm9uQ2hhckRhdGEgPSAoZXZlbnQpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLnF1ZXVlLnB1c2goeyB0YXJnZXQ6IGV2ZW50LnRhcmdldCxcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJjaGFyYWN0ZXJEYXRhXCIsXG4gICAgICAgICAgICAgICAgICAgIG9sZFZhbHVlOiBldmVudC5wcmV2VmFsdWUgfSk7XG4gICAgICAgICAgICAgICAgdGhpcy5mbHVzaFNvb24oKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgIHRoaXMub25TZWxlY3Rpb25DaGFuZ2UgPSB0aGlzLm9uU2VsZWN0aW9uQ2hhbmdlLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMub25SZXNpemUgPSB0aGlzLm9uUmVzaXplLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMub25QcmludCA9IHRoaXMub25QcmludC5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLm9uU2Nyb2xsID0gdGhpcy5vblNjcm9sbC5iaW5kKHRoaXMpO1xuICAgICAgICBpZiAod2luZG93Lm1hdGNoTWVkaWEpXG4gICAgICAgICAgICB0aGlzLnByaW50UXVlcnkgPSB3aW5kb3cubWF0Y2hNZWRpYShcInByaW50XCIpO1xuICAgICAgICBpZiAodHlwZW9mIFJlc2l6ZU9ic2VydmVyID09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgICAgdGhpcy5yZXNpemVTY3JvbGwgPSBuZXcgUmVzaXplT2JzZXJ2ZXIoKCkgPT4ge1xuICAgICAgICAgICAgICAgIHZhciBfYTtcbiAgICAgICAgICAgICAgICBpZiAoKChfYSA9IHRoaXMudmlldy5kb2NWaWV3KSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EubGFzdFVwZGF0ZSkgPCBEYXRlLm5vdygpIC0gNzUpXG4gICAgICAgICAgICAgICAgICAgIHRoaXMub25SZXNpemUoKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy5yZXNpemVTY3JvbGwub2JzZXJ2ZSh2aWV3LnNjcm9sbERPTSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5hZGRXaW5kb3dMaXN0ZW5lcnModGhpcy53aW4gPSB2aWV3Lndpbik7XG4gICAgICAgIHRoaXMuc3RhcnQoKTtcbiAgICAgICAgaWYgKHR5cGVvZiBJbnRlcnNlY3Rpb25PYnNlcnZlciA9PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICAgIHRoaXMuaW50ZXJzZWN0aW9uID0gbmV3IEludGVyc2VjdGlvbk9ic2VydmVyKGVudHJpZXMgPT4ge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudENoZWNrIDwgMClcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wYXJlbnRDaGVjayA9IHNldFRpbWVvdXQodGhpcy5saXN0ZW5Gb3JTY3JvbGwuYmluZCh0aGlzKSwgMTAwMCk7XG4gICAgICAgICAgICAgICAgaWYgKGVudHJpZXMubGVuZ3RoID4gMCAmJiAoZW50cmllc1tlbnRyaWVzLmxlbmd0aCAtIDFdLmludGVyc2VjdGlvblJhdGlvID4gMCkgIT0gdGhpcy5pbnRlcnNlY3RpbmcpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pbnRlcnNlY3RpbmcgPSAhdGhpcy5pbnRlcnNlY3Rpbmc7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmludGVyc2VjdGluZyAhPSB0aGlzLnZpZXcuaW5WaWV3KVxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5vblNjcm9sbENoYW5nZWQoZG9jdW1lbnQuY3JlYXRlRXZlbnQoXCJFdmVudFwiKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSwgeyB0aHJlc2hvbGQ6IFswLCAuMDAxXSB9KTtcbiAgICAgICAgICAgIHRoaXMuaW50ZXJzZWN0aW9uLm9ic2VydmUodGhpcy5kb20pO1xuICAgICAgICAgICAgdGhpcy5nYXBJbnRlcnNlY3Rpb24gPSBuZXcgSW50ZXJzZWN0aW9uT2JzZXJ2ZXIoZW50cmllcyA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKGVudHJpZXMubGVuZ3RoID4gMCAmJiBlbnRyaWVzW2VudHJpZXMubGVuZ3RoIC0gMV0uaW50ZXJzZWN0aW9uUmF0aW8gPiAwKVxuICAgICAgICAgICAgICAgICAgICB0aGlzLm9uU2Nyb2xsQ2hhbmdlZChkb2N1bWVudC5jcmVhdGVFdmVudChcIkV2ZW50XCIpKTtcbiAgICAgICAgICAgIH0sIHt9KTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmxpc3RlbkZvclNjcm9sbCgpO1xuICAgICAgICB0aGlzLnJlYWRTZWxlY3Rpb25SYW5nZSgpO1xuICAgIH1cbiAgICBvblNjcm9sbENoYW5nZWQoZSkge1xuICAgICAgICB0aGlzLnZpZXcuaW5wdXRTdGF0ZS5ydW5IYW5kbGVycyhcInNjcm9sbFwiLCBlKTtcbiAgICAgICAgaWYgKHRoaXMuaW50ZXJzZWN0aW5nKVxuICAgICAgICAgICAgdGhpcy52aWV3Lm1lYXN1cmUoKTtcbiAgICB9XG4gICAgb25TY3JvbGwoZSkge1xuICAgICAgICBpZiAodGhpcy5pbnRlcnNlY3RpbmcpXG4gICAgICAgICAgICB0aGlzLmZsdXNoKGZhbHNlKTtcbiAgICAgICAgaWYgKHRoaXMuZWRpdENvbnRleHQpXG4gICAgICAgICAgICB0aGlzLnZpZXcucmVxdWVzdE1lYXN1cmUodGhpcy5lZGl0Q29udGV4dC5tZWFzdXJlUmVxKTtcbiAgICAgICAgdGhpcy5vblNjcm9sbENoYW5nZWQoZSk7XG4gICAgfVxuICAgIG9uUmVzaXplKCkge1xuICAgICAgICBpZiAodGhpcy5yZXNpemVUaW1lb3V0IDwgMClcbiAgICAgICAgICAgIHRoaXMucmVzaXplVGltZW91dCA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMucmVzaXplVGltZW91dCA9IC0xO1xuICAgICAgICAgICAgICAgIHRoaXMudmlldy5yZXF1ZXN0TWVhc3VyZSgpO1xuICAgICAgICAgICAgfSwgNTApO1xuICAgIH1cbiAgICBvblByaW50KGV2ZW50KSB7XG4gICAgICAgIGlmICgoZXZlbnQudHlwZSA9PSBcImNoYW5nZVwiIHx8ICFldmVudC50eXBlKSAmJiAhZXZlbnQubWF0Y2hlcylcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgdGhpcy52aWV3LnZpZXdTdGF0ZS5wcmludGluZyA9IHRydWU7XG4gICAgICAgIHRoaXMudmlldy5tZWFzdXJlKCk7XG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy52aWV3LnZpZXdTdGF0ZS5wcmludGluZyA9IGZhbHNlO1xuICAgICAgICAgICAgdGhpcy52aWV3LnJlcXVlc3RNZWFzdXJlKCk7XG4gICAgICAgIH0sIDUwMCk7XG4gICAgfVxuICAgIHVwZGF0ZUdhcHMoZ2Fwcykge1xuICAgICAgICBpZiAodGhpcy5nYXBJbnRlcnNlY3Rpb24gJiYgKGdhcHMubGVuZ3RoICE9IHRoaXMuZ2Fwcy5sZW5ndGggfHwgdGhpcy5nYXBzLnNvbWUoKGcsIGkpID0+IGcgIT0gZ2Fwc1tpXSkpKSB7XG4gICAgICAgICAgICB0aGlzLmdhcEludGVyc2VjdGlvbi5kaXNjb25uZWN0KCk7XG4gICAgICAgICAgICBmb3IgKGxldCBnYXAgb2YgZ2FwcylcbiAgICAgICAgICAgICAgICB0aGlzLmdhcEludGVyc2VjdGlvbi5vYnNlcnZlKGdhcCk7XG4gICAgICAgICAgICB0aGlzLmdhcHMgPSBnYXBzO1xuICAgICAgICB9XG4gICAgfVxuICAgIG9uU2VsZWN0aW9uQ2hhbmdlKGV2ZW50KSB7XG4gICAgICAgIGxldCB3YXNDaGFuZ2VkID0gdGhpcy5zZWxlY3Rpb25DaGFuZ2VkO1xuICAgICAgICBpZiAoIXRoaXMucmVhZFNlbGVjdGlvblJhbmdlKCkgfHwgdGhpcy5kZWxheWVkQW5kcm9pZEtleSlcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgbGV0IHsgdmlldyB9ID0gdGhpcywgc2VsID0gdGhpcy5zZWxlY3Rpb25SYW5nZTtcbiAgICAgICAgaWYgKHZpZXcuc3RhdGUuZmFjZXQoZWRpdGFibGUpID8gdmlldy5yb290LmFjdGl2ZUVsZW1lbnQgIT0gdGhpcy5kb20gOiAhaGFzU2VsZWN0aW9uKHRoaXMuZG9tLCBzZWwpKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICBsZXQgY29udGV4dCA9IHNlbC5hbmNob3JOb2RlICYmIHZpZXcuZG9jVmlldy50aWxlLm5lYXJlc3Qoc2VsLmFuY2hvck5vZGUpO1xuICAgICAgICBpZiAoY29udGV4dCAmJiBjb250ZXh0LmlzV2lkZ2V0KCkgJiYgY29udGV4dC53aWRnZXQuaWdub3JlRXZlbnQoZXZlbnQpKSB7XG4gICAgICAgICAgICBpZiAoIXdhc0NoYW5nZWQpXG4gICAgICAgICAgICAgICAgdGhpcy5zZWxlY3Rpb25DaGFuZ2VkID0gZmFsc2U7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgLy8gRGVsZXRpb25zIG9uIElFMTEgZmlyZSB0aGVpciBldmVudHMgaW4gdGhlIHdyb25nIG9yZGVyLCBnaXZpbmdcbiAgICAgICAgLy8gdXMgYSBzZWxlY3Rpb24gY2hhbmdlIGV2ZW50IGJlZm9yZSB0aGUgRE9NIGNoYW5nZXMgYXJlXG4gICAgICAgIC8vIHJlcG9ydGVkLlxuICAgICAgICAvLyBDaHJvbWUgQW5kcm9pZCBoYXMgYSBzaW1pbGFyIGlzc3VlIHdoZW4gYmFja3NwYWNpbmcgb3V0IGFcbiAgICAgICAgLy8gc2VsZWN0aW9uICgjNjQ1KS5cbiAgICAgICAgaWYgKChicm93c2VyLmllICYmIGJyb3dzZXIuaWVfdmVyc2lvbiA8PSAxMSB8fCBicm93c2VyLmFuZHJvaWQgJiYgYnJvd3Nlci5jaHJvbWUpICYmICF2aWV3LnN0YXRlLnNlbGVjdGlvbi5tYWluLmVtcHR5ICYmXG4gICAgICAgICAgICAvLyAoU2VsZWN0aW9uLmlzQ29sbGFwc2VkIGlzbid0IHJlbGlhYmxlIG9uIElFKVxuICAgICAgICAgICAgc2VsLmZvY3VzTm9kZSAmJiBpc0VxdWl2YWxlbnRQb3NpdGlvbihzZWwuZm9jdXNOb2RlLCBzZWwuZm9jdXNPZmZzZXQsIHNlbC5hbmNob3JOb2RlLCBzZWwuYW5jaG9yT2Zmc2V0KSlcbiAgICAgICAgICAgIHRoaXMuZmx1c2hTb29uKCk7XG4gICAgICAgIGVsc2VcbiAgICAgICAgICAgIHRoaXMuZmx1c2goZmFsc2UpO1xuICAgIH1cbiAgICByZWFkU2VsZWN0aW9uUmFuZ2UoKSB7XG4gICAgICAgIGxldCB7IHZpZXcgfSA9IHRoaXM7XG4gICAgICAgIC8vIFRoZSBTZWxlY3Rpb24gb2JqZWN0IGlzIGJyb2tlbiBpbiBzaGFkb3cgcm9vdHMgaW4gU2FmYXJpLiBTZWVcbiAgICAgICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL2NvZGVtaXJyb3IvZGV2L2lzc3Vlcy80MTRcbiAgICAgICAgbGV0IHNlbGVjdGlvbiA9IGdldFNlbGVjdGlvbih2aWV3LnJvb3QpO1xuICAgICAgICBpZiAoIXNlbGVjdGlvbilcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgbGV0IHJhbmdlID0gYnJvd3Nlci5zYWZhcmkgJiYgdmlldy5yb290Lm5vZGVUeXBlID09IDExICYmXG4gICAgICAgICAgICB2aWV3LnJvb3QuYWN0aXZlRWxlbWVudCA9PSB0aGlzLmRvbSAmJlxuICAgICAgICAgICAgc2FmYXJpU2VsZWN0aW9uUmFuZ2VIYWNrKHRoaXMudmlldywgc2VsZWN0aW9uKSB8fCBzZWxlY3Rpb247XG4gICAgICAgIGlmICghcmFuZ2UgfHwgdGhpcy5zZWxlY3Rpb25SYW5nZS5lcShyYW5nZSkpXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIGxldCBsb2NhbCA9IGhhc1NlbGVjdGlvbih0aGlzLmRvbSwgcmFuZ2UpO1xuICAgICAgICAvLyBEZXRlY3QgdGhlIHNpdHVhdGlvbiB3aGVyZSB0aGUgYnJvd3NlciBoYXMsIG9uIGZvY3VzLCBtb3ZlZCB0aGVcbiAgICAgICAgLy8gc2VsZWN0aW9uIHRvIHRoZSBzdGFydCBvZiB0aGUgY29udGVudCBlbGVtZW50LiBSZXNldCBpdCB0byB0aGVcbiAgICAgICAgLy8gcG9zaXRpb24gZnJvbSB0aGUgZWRpdG9yIHN0YXRlLlxuICAgICAgICBpZiAobG9jYWwgJiYgIXRoaXMuc2VsZWN0aW9uQ2hhbmdlZCAmJlxuICAgICAgICAgICAgdmlldy5pbnB1dFN0YXRlLmxhc3RGb2N1c1RpbWUgPiBEYXRlLm5vdygpIC0gMjAwICYmXG4gICAgICAgICAgICB2aWV3LmlucHV0U3RhdGUubGFzdFRvdWNoVGltZSA8IERhdGUubm93KCkgLSAzMDAgJiZcbiAgICAgICAgICAgIGF0RWxlbWVudFN0YXJ0KHRoaXMuZG9tLCByYW5nZSkpIHtcbiAgICAgICAgICAgIHRoaXMudmlldy5pbnB1dFN0YXRlLmxhc3RGb2N1c1RpbWUgPSAwO1xuICAgICAgICAgICAgdmlldy5kb2NWaWV3LnVwZGF0ZVNlbGVjdGlvbigpO1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuc2VsZWN0aW9uUmFuZ2Uuc2V0UmFuZ2UocmFuZ2UpO1xuICAgICAgICBpZiAobG9jYWwpXG4gICAgICAgICAgICB0aGlzLnNlbGVjdGlvbkNoYW5nZWQgPSB0cnVlO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgc2V0U2VsZWN0aW9uUmFuZ2UoYW5jaG9yLCBoZWFkKSB7XG4gICAgICAgIHRoaXMuc2VsZWN0aW9uUmFuZ2Uuc2V0KGFuY2hvci5ub2RlLCBhbmNob3Iub2Zmc2V0LCBoZWFkLm5vZGUsIGhlYWQub2Zmc2V0KTtcbiAgICAgICAgdGhpcy5zZWxlY3Rpb25DaGFuZ2VkID0gZmFsc2U7XG4gICAgfVxuICAgIGNsZWFyU2VsZWN0aW9uUmFuZ2UoKSB7XG4gICAgICAgIHRoaXMuc2VsZWN0aW9uUmFuZ2Uuc2V0KG51bGwsIDAsIG51bGwsIDApO1xuICAgIH1cbiAgICBsaXN0ZW5Gb3JTY3JvbGwoKSB7XG4gICAgICAgIHRoaXMucGFyZW50Q2hlY2sgPSAtMTtcbiAgICAgICAgbGV0IGkgPSAwLCBjaGFuZ2VkID0gbnVsbDtcbiAgICAgICAgZm9yIChsZXQgZG9tID0gdGhpcy5kb207IGRvbTspIHtcbiAgICAgICAgICAgIGlmIChkb20ubm9kZVR5cGUgPT0gMSkge1xuICAgICAgICAgICAgICAgIGlmICghY2hhbmdlZCAmJiBpIDwgdGhpcy5zY3JvbGxUYXJnZXRzLmxlbmd0aCAmJiB0aGlzLnNjcm9sbFRhcmdldHNbaV0gPT0gZG9tKVxuICAgICAgICAgICAgICAgICAgICBpKys7XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoIWNoYW5nZWQpXG4gICAgICAgICAgICAgICAgICAgIGNoYW5nZWQgPSB0aGlzLnNjcm9sbFRhcmdldHMuc2xpY2UoMCwgaSk7XG4gICAgICAgICAgICAgICAgaWYgKGNoYW5nZWQpXG4gICAgICAgICAgICAgICAgICAgIGNoYW5nZWQucHVzaChkb20pO1xuICAgICAgICAgICAgICAgIGRvbSA9IGRvbS5hc3NpZ25lZFNsb3QgfHwgZG9tLnBhcmVudE5vZGU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChkb20ubm9kZVR5cGUgPT0gMTEpIHsgLy8gU2hhZG93IHJvb3RcbiAgICAgICAgICAgICAgICBkb20gPSBkb20uaG9zdDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChpIDwgdGhpcy5zY3JvbGxUYXJnZXRzLmxlbmd0aCAmJiAhY2hhbmdlZClcbiAgICAgICAgICAgIGNoYW5nZWQgPSB0aGlzLnNjcm9sbFRhcmdldHMuc2xpY2UoMCwgaSk7XG4gICAgICAgIGlmIChjaGFuZ2VkKSB7XG4gICAgICAgICAgICBmb3IgKGxldCBkb20gb2YgdGhpcy5zY3JvbGxUYXJnZXRzKVxuICAgICAgICAgICAgICAgIGRvbS5yZW1vdmVFdmVudExpc3RlbmVyKFwic2Nyb2xsXCIsIHRoaXMub25TY3JvbGwpO1xuICAgICAgICAgICAgZm9yIChsZXQgZG9tIG9mIHRoaXMuc2Nyb2xsVGFyZ2V0cyA9IGNoYW5nZWQpXG4gICAgICAgICAgICAgICAgZG9tLmFkZEV2ZW50TGlzdGVuZXIoXCJzY3JvbGxcIiwgdGhpcy5vblNjcm9sbCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaWdub3JlKGYpIHtcbiAgICAgICAgaWYgKCF0aGlzLmFjdGl2ZSlcbiAgICAgICAgICAgIHJldHVybiBmKCk7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICB0aGlzLnN0b3AoKTtcbiAgICAgICAgICAgIHJldHVybiBmKCk7XG4gICAgICAgIH1cbiAgICAgICAgZmluYWxseSB7XG4gICAgICAgICAgICB0aGlzLnN0YXJ0KCk7XG4gICAgICAgICAgICB0aGlzLmNsZWFyKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgc3RhcnQoKSB7XG4gICAgICAgIGlmICh0aGlzLmFjdGl2ZSlcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgdGhpcy5vYnNlcnZlci5vYnNlcnZlKHRoaXMuZG9tLCBvYnNlcnZlT3B0aW9ucyk7XG4gICAgICAgIGlmICh1c2VDaGFyRGF0YSlcbiAgICAgICAgICAgIHRoaXMuZG9tLmFkZEV2ZW50TGlzdGVuZXIoXCJET01DaGFyYWN0ZXJEYXRhTW9kaWZpZWRcIiwgdGhpcy5vbkNoYXJEYXRhKTtcbiAgICAgICAgdGhpcy5hY3RpdmUgPSB0cnVlO1xuICAgIH1cbiAgICBzdG9wKCkge1xuICAgICAgICBpZiAoIXRoaXMuYWN0aXZlKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB0aGlzLmFjdGl2ZSA9IGZhbHNlO1xuICAgICAgICB0aGlzLm9ic2VydmVyLmRpc2Nvbm5lY3QoKTtcbiAgICAgICAgaWYgKHVzZUNoYXJEYXRhKVxuICAgICAgICAgICAgdGhpcy5kb20ucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIkRPTUNoYXJhY3RlckRhdGFNb2RpZmllZFwiLCB0aGlzLm9uQ2hhckRhdGEpO1xuICAgIH1cbiAgICAvLyBUaHJvdyBhd2F5IGFueSBwZW5kaW5nIGNoYW5nZXNcbiAgICBjbGVhcigpIHtcbiAgICAgICAgdGhpcy5wcm9jZXNzUmVjb3JkcygpO1xuICAgICAgICB0aGlzLnF1ZXVlLmxlbmd0aCA9IDA7XG4gICAgICAgIHRoaXMuc2VsZWN0aW9uQ2hhbmdlZCA9IGZhbHNlO1xuICAgIH1cbiAgICAvLyBDaHJvbWUgQW5kcm9pZCwgZXNwZWNpYWxseSBpbiBjb21iaW5hdGlvbiB3aXRoIEdCb2FyZCwgbm90IG9ubHlcbiAgICAvLyBkb2Vzbid0IHJlbGlhYmx5IGZpcmUgcmVndWxhciBrZXkgZXZlbnRzLCBidXQgYWxzbyBvZnRlblxuICAgIC8vIHN1cnJvdW5kcyB0aGUgZWZmZWN0IG9mIGVudGVyIG9yIGJhY2tzcGFjZSB3aXRoIGEgYnVuY2ggb2ZcbiAgICAvLyBjb21wb3NpdGlvbiBldmVudHMgdGhhdCwgd2hlbiBpbnRlcnJ1cHRlZCwgY2F1c2UgdGV4dCBkdXBsaWNhdGlvblxuICAgIC8vIG9yIG90aGVyIGtpbmRzIG9mIGNvcnJ1cHRpb24uIFRoaXMgaGFjayBtYWtlcyB0aGUgZWRpdG9yIGJhY2sgb2ZmXG4gICAgLy8gZnJvbSBoYW5kbGluZyBET00gY2hhbmdlcyBmb3IgYSBtb21lbnQgd2hlbiBzdWNoIGEga2V5IGlzXG4gICAgLy8gZGV0ZWN0ZWQgKHZpYSBiZWZvcmVpbnB1dCBvciBrZXlkb3duKSwgYW5kIHRoZW4gdHJpZXMgdG8gZmx1c2hcbiAgICAvLyB0aGVtIG9yLCBpZiB0aGF0IGhhcyBubyBlZmZlY3QsIGRpc3BhdGNoZXMgdGhlIGdpdmVuIGtleS5cbiAgICBkZWxheUFuZHJvaWRLZXkoa2V5LCBrZXlDb2RlKSB7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgaWYgKCF0aGlzLmRlbGF5ZWRBbmRyb2lkS2V5KSB7XG4gICAgICAgICAgICBsZXQgZmx1c2ggPSAoKSA9PiB7XG4gICAgICAgICAgICAgICAgbGV0IGtleSA9IHRoaXMuZGVsYXllZEFuZHJvaWRLZXk7XG4gICAgICAgICAgICAgICAgaWYgKGtleSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNsZWFyRGVsYXllZEFuZHJvaWRLZXkoKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy52aWV3LmlucHV0U3RhdGUubGFzdEtleUNvZGUgPSBrZXkua2V5Q29kZTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy52aWV3LmlucHV0U3RhdGUubGFzdEtleVRpbWUgPSBEYXRlLm5vdygpO1xuICAgICAgICAgICAgICAgICAgICBsZXQgZmx1c2hlZCA9IHRoaXMuZmx1c2goKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFmbHVzaGVkICYmIGtleS5mb3JjZSlcbiAgICAgICAgICAgICAgICAgICAgICAgIGRpc3BhdGNoS2V5KHRoaXMuZG9tLCBrZXkua2V5LCBrZXkua2V5Q29kZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHRoaXMuZmx1c2hpbmdBbmRyb2lkS2V5ID0gdGhpcy52aWV3Lndpbi5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoZmx1c2gpO1xuICAgICAgICB9XG4gICAgICAgIC8vIFNpbmNlIGJhY2tzcGFjZSBiZWZvcmVpbnB1dCBpcyBzb21ldGltZXMgc2lnbmFsbGVkIHNwdXJpb3VzbHksXG4gICAgICAgIC8vIEVudGVyIGFsd2F5cyB0YWtlcyBwcmVjZWRlbmNlLlxuICAgICAgICBpZiAoIXRoaXMuZGVsYXllZEFuZHJvaWRLZXkgfHwga2V5ID09IFwiRW50ZXJcIilcbiAgICAgICAgICAgIHRoaXMuZGVsYXllZEFuZHJvaWRLZXkgPSB7XG4gICAgICAgICAgICAgICAga2V5LCBrZXlDb2RlLFxuICAgICAgICAgICAgICAgIC8vIE9ubHkgcnVuIHRoZSBrZXkgaGFuZGxlciB3aGVuIG5vIGNoYW5nZXMgYXJlIGRldGVjdGVkIGlmXG4gICAgICAgICAgICAgICAgLy8gdGhpcyBpc24ndCBjb21pbmcgcmlnaHQgYWZ0ZXIgYW5vdGhlciBjaGFuZ2UsIGluIHdoaWNoIGNhc2VcbiAgICAgICAgICAgICAgICAvLyBpdCBpcyBwcm9iYWJseSBwYXJ0IG9mIGEgd2VpcmQgY2hhaW4gb2YgdXBkYXRlcywgYW5kIHNob3VsZFxuICAgICAgICAgICAgICAgIC8vIGJlIGlnbm9yZWQgaWYgaXQgcmV0dXJucyB0aGUgRE9NIHRvIGl0cyBwcmV2aW91cyBzdGF0ZS5cbiAgICAgICAgICAgICAgICBmb3JjZTogdGhpcy5sYXN0Q2hhbmdlIDwgRGF0ZS5ub3coKSAtIDUwIHx8ICEhKChfYSA9IHRoaXMuZGVsYXllZEFuZHJvaWRLZXkpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5mb3JjZSlcbiAgICAgICAgICAgIH07XG4gICAgfVxuICAgIGNsZWFyRGVsYXllZEFuZHJvaWRLZXkoKSB7XG4gICAgICAgIHRoaXMud2luLmNhbmNlbEFuaW1hdGlvbkZyYW1lKHRoaXMuZmx1c2hpbmdBbmRyb2lkS2V5KTtcbiAgICAgICAgdGhpcy5kZWxheWVkQW5kcm9pZEtleSA9IG51bGw7XG4gICAgICAgIHRoaXMuZmx1c2hpbmdBbmRyb2lkS2V5ID0gLTE7XG4gICAgfVxuICAgIGZsdXNoU29vbigpIHtcbiAgICAgICAgaWYgKHRoaXMuZGVsYXllZEZsdXNoIDwgMClcbiAgICAgICAgICAgIHRoaXMuZGVsYXllZEZsdXNoID0gdGhpcy52aWV3Lndpbi5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4geyB0aGlzLmRlbGF5ZWRGbHVzaCA9IC0xOyB0aGlzLmZsdXNoKCk7IH0pO1xuICAgIH1cbiAgICBmb3JjZUZsdXNoKCkge1xuICAgICAgICBpZiAodGhpcy5kZWxheWVkRmx1c2ggPj0gMCkge1xuICAgICAgICAgICAgdGhpcy52aWV3Lndpbi5jYW5jZWxBbmltYXRpb25GcmFtZSh0aGlzLmRlbGF5ZWRGbHVzaCk7XG4gICAgICAgICAgICB0aGlzLmRlbGF5ZWRGbHVzaCA9IC0xO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuZmx1c2goKTtcbiAgICB9XG4gICAgcGVuZGluZ1JlY29yZHMoKSB7XG4gICAgICAgIGZvciAobGV0IG11dCBvZiB0aGlzLm9ic2VydmVyLnRha2VSZWNvcmRzKCkpXG4gICAgICAgICAgICB0aGlzLnF1ZXVlLnB1c2gobXV0KTtcbiAgICAgICAgcmV0dXJuIHRoaXMucXVldWU7XG4gICAgfVxuICAgIHByb2Nlc3NSZWNvcmRzKCkge1xuICAgICAgICBsZXQgcmVjb3JkcyA9IHRoaXMucGVuZGluZ1JlY29yZHMoKTtcbiAgICAgICAgaWYgKHJlY29yZHMubGVuZ3RoKVxuICAgICAgICAgICAgdGhpcy5xdWV1ZSA9IFtdO1xuICAgICAgICBsZXQgZnJvbSA9IC0xLCB0byA9IC0xLCB0eXBlT3ZlciA9IGZhbHNlO1xuICAgICAgICBmb3IgKGxldCByZWNvcmQgb2YgcmVjb3Jkcykge1xuICAgICAgICAgICAgbGV0IHJhbmdlID0gdGhpcy5yZWFkTXV0YXRpb24ocmVjb3JkKTtcbiAgICAgICAgICAgIGlmICghcmFuZ2UpXG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICBpZiAocmFuZ2UudHlwZU92ZXIpXG4gICAgICAgICAgICAgICAgdHlwZU92ZXIgPSB0cnVlO1xuICAgICAgICAgICAgaWYgKGZyb20gPT0gLTEpIHtcbiAgICAgICAgICAgICAgICAoeyBmcm9tLCB0byB9ID0gcmFuZ2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgZnJvbSA9IE1hdGgubWluKHJhbmdlLmZyb20sIGZyb20pO1xuICAgICAgICAgICAgICAgIHRvID0gTWF0aC5tYXgocmFuZ2UudG8sIHRvKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4geyBmcm9tLCB0bywgdHlwZU92ZXIgfTtcbiAgICB9XG4gICAgcmVhZENoYW5nZSgpIHtcbiAgICAgICAgbGV0IHsgZnJvbSwgdG8sIHR5cGVPdmVyIH0gPSB0aGlzLnByb2Nlc3NSZWNvcmRzKCk7XG4gICAgICAgIGxldCBuZXdTZWwgPSB0aGlzLnNlbGVjdGlvbkNoYW5nZWQgJiYgaGFzU2VsZWN0aW9uKHRoaXMuZG9tLCB0aGlzLnNlbGVjdGlvblJhbmdlKTtcbiAgICAgICAgaWYgKGZyb20gPCAwICYmICFuZXdTZWwpXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgaWYgKGZyb20gPiAtMSlcbiAgICAgICAgICAgIHRoaXMubGFzdENoYW5nZSA9IERhdGUubm93KCk7XG4gICAgICAgIHRoaXMudmlldy5pbnB1dFN0YXRlLmxhc3RGb2N1c1RpbWUgPSAwO1xuICAgICAgICB0aGlzLnNlbGVjdGlvbkNoYW5nZWQgPSBmYWxzZTtcbiAgICAgICAgbGV0IGNoYW5nZSA9IG5ldyBET01DaGFuZ2UodGhpcy52aWV3LCBmcm9tLCB0bywgdHlwZU92ZXIpO1xuICAgICAgICB0aGlzLnZpZXcuZG9jVmlldy5kb21DaGFuZ2VkID0geyBuZXdTZWw6IGNoYW5nZS5uZXdTZWwgPyBjaGFuZ2UubmV3U2VsLm1haW4gOiBudWxsIH07XG4gICAgICAgIHJldHVybiBjaGFuZ2U7XG4gICAgfVxuICAgIC8vIEFwcGx5IHBlbmRpbmcgY2hhbmdlcywgaWYgYW55XG4gICAgZmx1c2gocmVhZFNlbGVjdGlvbiA9IHRydWUpIHtcbiAgICAgICAgLy8gQ29tcGxldGVseSBob2xkIG9mZiBmbHVzaGluZyB3aGVuIHBlbmRpbmcga2V5cyBhcmUgc2V04oCUdGhlIGNvZGVcbiAgICAgICAgLy8gbWFuYWdpbmcgdGhvc2Ugd2lsbCBtYWtlIHN1cmUgcHJvY2Vzc1JlY29yZHMgaXMgY2FsbGVkIGFuZCB0aGVcbiAgICAgICAgLy8gdmlldyBpcyByZXN5bmNocm9uaXplZCBhZnRlclxuICAgICAgICBpZiAodGhpcy5kZWxheWVkRmx1c2ggPj0gMCB8fCB0aGlzLmRlbGF5ZWRBbmRyb2lkS2V5KVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICBpZiAocmVhZFNlbGVjdGlvbilcbiAgICAgICAgICAgIHRoaXMucmVhZFNlbGVjdGlvblJhbmdlKCk7XG4gICAgICAgIGxldCBkb21DaGFuZ2UgPSB0aGlzLnJlYWRDaGFuZ2UoKTtcbiAgICAgICAgaWYgKCFkb21DaGFuZ2UpIHtcbiAgICAgICAgICAgIHRoaXMudmlldy5yZXF1ZXN0TWVhc3VyZSgpO1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGxldCBzdGFydFN0YXRlID0gdGhpcy52aWV3LnN0YXRlO1xuICAgICAgICBsZXQgaGFuZGxlZCA9IGFwcGx5RE9NQ2hhbmdlKHRoaXMudmlldywgZG9tQ2hhbmdlKTtcbiAgICAgICAgLy8gVGhlIHZpZXcgd2Fzbid0IHVwZGF0ZWQgYnV0IERPTS9zZWxlY3Rpb24gY2hhbmdlcyB3ZXJlIHNlZW4uIFJlc2V0IHRoZSB2aWV3LlxuICAgICAgICBpZiAodGhpcy52aWV3LnN0YXRlID09IHN0YXJ0U3RhdGUgJiZcbiAgICAgICAgICAgIChkb21DaGFuZ2UuZG9tQ2hhbmdlZCB8fCBkb21DaGFuZ2UubmV3U2VsICYmICFkb21DaGFuZ2UubmV3U2VsLm1haW4uZXEodGhpcy52aWV3LnN0YXRlLnNlbGVjdGlvbi5tYWluKSkpXG4gICAgICAgICAgICB0aGlzLnZpZXcudXBkYXRlKFtdKTtcbiAgICAgICAgcmV0dXJuIGhhbmRsZWQ7XG4gICAgfVxuICAgIHJlYWRNdXRhdGlvbihyZWMpIHtcbiAgICAgICAgbGV0IHRpbGUgPSB0aGlzLnZpZXcuZG9jVmlldy50aWxlLm5lYXJlc3QocmVjLnRhcmdldCk7XG4gICAgICAgIGlmICghdGlsZSB8fCB0aWxlLmlzV2lkZ2V0KCkpXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgdGlsZS5tYXJrRGlydHkocmVjLnR5cGUgPT0gXCJhdHRyaWJ1dGVzXCIpO1xuICAgICAgICBpZiAocmVjLnR5cGUgPT0gXCJjaGlsZExpc3RcIikge1xuICAgICAgICAgICAgbGV0IGNoaWxkQmVmb3JlID0gZmluZENoaWxkKHRpbGUsIHJlYy5wcmV2aW91c1NpYmxpbmcgfHwgcmVjLnRhcmdldC5wcmV2aW91c1NpYmxpbmcsIC0xKTtcbiAgICAgICAgICAgIGxldCBjaGlsZEFmdGVyID0gZmluZENoaWxkKHRpbGUsIHJlYy5uZXh0U2libGluZyB8fCByZWMudGFyZ2V0Lm5leHRTaWJsaW5nLCAxKTtcbiAgICAgICAgICAgIHJldHVybiB7IGZyb206IGNoaWxkQmVmb3JlID8gdGlsZS5wb3NBZnRlcihjaGlsZEJlZm9yZSkgOiB0aWxlLnBvc0F0U3RhcnQsXG4gICAgICAgICAgICAgICAgdG86IGNoaWxkQWZ0ZXIgPyB0aWxlLnBvc0JlZm9yZShjaGlsZEFmdGVyKSA6IHRpbGUucG9zQXRFbmQsIHR5cGVPdmVyOiBmYWxzZSB9O1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHJlYy50eXBlID09IFwiY2hhcmFjdGVyRGF0YVwiKSB7XG4gICAgICAgICAgICByZXR1cm4geyBmcm9tOiB0aWxlLnBvc0F0U3RhcnQsIHRvOiB0aWxlLnBvc0F0RW5kLCB0eXBlT3ZlcjogcmVjLnRhcmdldC5ub2RlVmFsdWUgPT0gcmVjLm9sZFZhbHVlIH07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzZXRXaW5kb3cod2luKSB7XG4gICAgICAgIGlmICh3aW4gIT0gdGhpcy53aW4pIHtcbiAgICAgICAgICAgIHRoaXMucmVtb3ZlV2luZG93TGlzdGVuZXJzKHRoaXMud2luKTtcbiAgICAgICAgICAgIHRoaXMud2luID0gd2luO1xuICAgICAgICAgICAgdGhpcy5hZGRXaW5kb3dMaXN0ZW5lcnModGhpcy53aW4pO1xuICAgICAgICB9XG4gICAgfVxuICAgIGFkZFdpbmRvd0xpc3RlbmVycyh3aW4pIHtcbiAgICAgICAgd2luLmFkZEV2ZW50TGlzdGVuZXIoXCJyZXNpemVcIiwgdGhpcy5vblJlc2l6ZSk7XG4gICAgICAgIGlmICh0aGlzLnByaW50UXVlcnkpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnByaW50UXVlcnkuYWRkRXZlbnRMaXN0ZW5lcilcbiAgICAgICAgICAgICAgICB0aGlzLnByaW50UXVlcnkuYWRkRXZlbnRMaXN0ZW5lcihcImNoYW5nZVwiLCB0aGlzLm9uUHJpbnQpO1xuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgIHRoaXMucHJpbnRRdWVyeS5hZGRMaXN0ZW5lcih0aGlzLm9uUHJpbnQpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2VcbiAgICAgICAgICAgIHdpbi5hZGRFdmVudExpc3RlbmVyKFwiYmVmb3JlcHJpbnRcIiwgdGhpcy5vblByaW50KTtcbiAgICAgICAgd2luLmFkZEV2ZW50TGlzdGVuZXIoXCJzY3JvbGxcIiwgdGhpcy5vblNjcm9sbCk7XG4gICAgICAgIHdpbi5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwic2VsZWN0aW9uY2hhbmdlXCIsIHRoaXMub25TZWxlY3Rpb25DaGFuZ2UpO1xuICAgIH1cbiAgICByZW1vdmVXaW5kb3dMaXN0ZW5lcnMod2luKSB7XG4gICAgICAgIHdpbi5yZW1vdmVFdmVudExpc3RlbmVyKFwic2Nyb2xsXCIsIHRoaXMub25TY3JvbGwpO1xuICAgICAgICB3aW4ucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInJlc2l6ZVwiLCB0aGlzLm9uUmVzaXplKTtcbiAgICAgICAgaWYgKHRoaXMucHJpbnRRdWVyeSkge1xuICAgICAgICAgICAgaWYgKHRoaXMucHJpbnRRdWVyeS5yZW1vdmVFdmVudExpc3RlbmVyKVxuICAgICAgICAgICAgICAgIHRoaXMucHJpbnRRdWVyeS5yZW1vdmVFdmVudExpc3RlbmVyKFwiY2hhbmdlXCIsIHRoaXMub25QcmludCk7XG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgdGhpcy5wcmludFF1ZXJ5LnJlbW92ZUxpc3RlbmVyKHRoaXMub25QcmludCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZVxuICAgICAgICAgICAgd2luLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJiZWZvcmVwcmludFwiLCB0aGlzLm9uUHJpbnQpO1xuICAgICAgICB3aW4uZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInNlbGVjdGlvbmNoYW5nZVwiLCB0aGlzLm9uU2VsZWN0aW9uQ2hhbmdlKTtcbiAgICB9XG4gICAgdXBkYXRlKHVwZGF0ZSkge1xuICAgICAgICBpZiAodGhpcy5lZGl0Q29udGV4dCkge1xuICAgICAgICAgICAgdGhpcy5lZGl0Q29udGV4dC51cGRhdGUodXBkYXRlKTtcbiAgICAgICAgICAgIGlmICh1cGRhdGUuc3RhcnRTdGF0ZS5mYWNldChlZGl0YWJsZSkgIT0gdXBkYXRlLnN0YXRlLmZhY2V0KGVkaXRhYmxlKSlcbiAgICAgICAgICAgICAgICB1cGRhdGUudmlldy5jb250ZW50RE9NLmVkaXRDb250ZXh0ID0gdXBkYXRlLnN0YXRlLmZhY2V0KGVkaXRhYmxlKSA/IHRoaXMuZWRpdENvbnRleHQuZWRpdENvbnRleHQgOiBudWxsO1xuICAgICAgICB9XG4gICAgfVxuICAgIGRlc3Ryb3koKSB7XG4gICAgICAgIHZhciBfYSwgX2IsIF9jO1xuICAgICAgICB0aGlzLnN0b3AoKTtcbiAgICAgICAgKF9hID0gdGhpcy5pbnRlcnNlY3Rpb24pID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5kaXNjb25uZWN0KCk7XG4gICAgICAgIChfYiA9IHRoaXMuZ2FwSW50ZXJzZWN0aW9uKSA9PT0gbnVsbCB8fCBfYiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2IuZGlzY29ubmVjdCgpO1xuICAgICAgICAoX2MgPSB0aGlzLnJlc2l6ZVNjcm9sbCkgPT09IG51bGwgfHwgX2MgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9jLmRpc2Nvbm5lY3QoKTtcbiAgICAgICAgZm9yIChsZXQgZG9tIG9mIHRoaXMuc2Nyb2xsVGFyZ2V0cylcbiAgICAgICAgICAgIGRvbS5yZW1vdmVFdmVudExpc3RlbmVyKFwic2Nyb2xsXCIsIHRoaXMub25TY3JvbGwpO1xuICAgICAgICB0aGlzLnJlbW92ZVdpbmRvd0xpc3RlbmVycyh0aGlzLndpbik7XG4gICAgICAgIGNsZWFyVGltZW91dCh0aGlzLnBhcmVudENoZWNrKTtcbiAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMucmVzaXplVGltZW91dCk7XG4gICAgICAgIHRoaXMud2luLmNhbmNlbEFuaW1hdGlvbkZyYW1lKHRoaXMuZGVsYXllZEZsdXNoKTtcbiAgICAgICAgdGhpcy53aW4uY2FuY2VsQW5pbWF0aW9uRnJhbWUodGhpcy5mbHVzaGluZ0FuZHJvaWRLZXkpO1xuICAgICAgICBpZiAodGhpcy5lZGl0Q29udGV4dCkge1xuICAgICAgICAgICAgdGhpcy52aWV3LmNvbnRlbnRET00uZWRpdENvbnRleHQgPSBudWxsO1xuICAgICAgICAgICAgdGhpcy5lZGl0Q29udGV4dC5kZXN0cm95KCk7XG4gICAgICAgIH1cbiAgICB9XG59XG5mdW5jdGlvbiBmaW5kQ2hpbGQodGlsZSwgZG9tLCBkaXIpIHtcbiAgICB3aGlsZSAoZG9tKSB7XG4gICAgICAgIGxldCBjdXJUaWxlID0gVGlsZS5nZXQoZG9tKTtcbiAgICAgICAgaWYgKGN1clRpbGUgJiYgY3VyVGlsZS5wYXJlbnQgPT0gdGlsZSlcbiAgICAgICAgICAgIHJldHVybiBjdXJUaWxlO1xuICAgICAgICBsZXQgcGFyZW50ID0gZG9tLnBhcmVudE5vZGU7XG4gICAgICAgIGRvbSA9IHBhcmVudCAhPSB0aWxlLmRvbSA/IHBhcmVudCA6IGRpciA+IDAgPyBkb20ubmV4dFNpYmxpbmcgOiBkb20ucHJldmlvdXNTaWJsaW5nO1xuICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbn1cbmZ1bmN0aW9uIGJ1aWxkU2VsZWN0aW9uUmFuZ2VGcm9tUmFuZ2UodmlldywgcmFuZ2UpIHtcbiAgICBsZXQgYW5jaG9yTm9kZSA9IHJhbmdlLnN0YXJ0Q29udGFpbmVyLCBhbmNob3JPZmZzZXQgPSByYW5nZS5zdGFydE9mZnNldDtcbiAgICBsZXQgZm9jdXNOb2RlID0gcmFuZ2UuZW5kQ29udGFpbmVyLCBmb2N1c09mZnNldCA9IHJhbmdlLmVuZE9mZnNldDtcbiAgICBsZXQgY3VyQW5jaG9yID0gdmlldy5kb2NWaWV3LmRvbUF0UG9zKHZpZXcuc3RhdGUuc2VsZWN0aW9uLm1haW4uYW5jaG9yLCAxKTtcbiAgICAvLyBTaW5jZSBzdWNoIGEgcmFuZ2UgZG9lc24ndCBkaXN0aW5ndWlzaCBiZXR3ZWVuIGFuY2hvciBhbmQgaGVhZCxcbiAgICAvLyB1c2UgYSBoZXVyaXN0aWMgdGhhdCBmbGlwcyBpdCBhcm91bmQgaWYgaXRzIGVuZCBtYXRjaGVzIHRoZVxuICAgIC8vIGN1cnJlbnQgYW5jaG9yLlxuICAgIGlmIChpc0VxdWl2YWxlbnRQb3NpdGlvbihjdXJBbmNob3Iubm9kZSwgY3VyQW5jaG9yLm9mZnNldCwgZm9jdXNOb2RlLCBmb2N1c09mZnNldCkpXG4gICAgICAgIFthbmNob3JOb2RlLCBhbmNob3JPZmZzZXQsIGZvY3VzTm9kZSwgZm9jdXNPZmZzZXRdID0gW2ZvY3VzTm9kZSwgZm9jdXNPZmZzZXQsIGFuY2hvck5vZGUsIGFuY2hvck9mZnNldF07XG4gICAgcmV0dXJuIHsgYW5jaG9yTm9kZSwgYW5jaG9yT2Zmc2V0LCBmb2N1c05vZGUsIGZvY3VzT2Zmc2V0IH07XG59XG4vLyBVc2VkIHRvIHdvcmsgYXJvdW5kIGEgU2FmYXJpIFNlbGVjdGlvbi9zaGFkb3cgRE9NIGJ1ZyAoIzQxNClcbmZ1bmN0aW9uIHNhZmFyaVNlbGVjdGlvblJhbmdlSGFjayh2aWV3LCBzZWxlY3Rpb24pIHtcbiAgICBpZiAoc2VsZWN0aW9uLmdldENvbXBvc2VkUmFuZ2VzKSB7XG4gICAgICAgIGxldCByYW5nZSA9IHNlbGVjdGlvbi5nZXRDb21wb3NlZFJhbmdlcyh2aWV3LnJvb3QpWzBdO1xuICAgICAgICBpZiAocmFuZ2UpXG4gICAgICAgICAgICByZXR1cm4gYnVpbGRTZWxlY3Rpb25SYW5nZUZyb21SYW5nZSh2aWV3LCByYW5nZSk7XG4gICAgfVxuICAgIGxldCBmb3VuZCA9IG51bGw7XG4gICAgLy8gQmVjYXVzZSBTYWZhcmkgKGF0IGxlYXN0IGluIDIwMTgtMjAyMSkgZG9lc24ndCBwcm92aWRlIHJlZ3VsYXJcbiAgICAvLyBhY2Nlc3MgdG8gdGhlIHNlbGVjdGlvbiBpbnNpZGUgYSBzaGFkb3dyb290LCB3ZSBoYXZlIHRvIHBlcmZvcm0gYVxuICAgIC8vIHJpZGljdWxvdXMgaGFjayB0byBnZXQgYXQgaXTigJR1c2luZyBgZXhlY0NvbW1hbmRgIHRvIHRyaWdnZXIgYVxuICAgIC8vIGBiZWZvcmVJbnB1dGAgZXZlbnQgc28gdGhhdCB3ZSBjYW4gcmVhZCB0aGUgdGFyZ2V0IHJhbmdlIGZyb20gdGhlXG4gICAgLy8gZXZlbnQuXG4gICAgZnVuY3Rpb24gcmVhZChldmVudCkge1xuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICBldmVudC5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKTtcbiAgICAgICAgZm91bmQgPSBldmVudC5nZXRUYXJnZXRSYW5nZXMoKVswXTtcbiAgICB9XG4gICAgdmlldy5jb250ZW50RE9NLmFkZEV2ZW50TGlzdGVuZXIoXCJiZWZvcmVpbnB1dFwiLCByZWFkLCB0cnVlKTtcbiAgICB2aWV3LmRvbS5vd25lckRvY3VtZW50LmV4ZWNDb21tYW5kKFwiaW5kZW50XCIpO1xuICAgIHZpZXcuY29udGVudERPTS5yZW1vdmVFdmVudExpc3RlbmVyKFwiYmVmb3JlaW5wdXRcIiwgcmVhZCwgdHJ1ZSk7XG4gICAgcmV0dXJuIGZvdW5kID8gYnVpbGRTZWxlY3Rpb25SYW5nZUZyb21SYW5nZSh2aWV3LCBmb3VuZCkgOiBudWxsO1xufVxuY2xhc3MgRWRpdENvbnRleHRNYW5hZ2VyIHtcbiAgICBjb25zdHJ1Y3Rvcih2aWV3KSB7XG4gICAgICAgIC8vIFRoZSBkb2N1bWVudCB3aW5kb3cgZm9yIHdoaWNoIHRoZSB0ZXh0IGluIHRoZSBjb250ZXh0IGlzXG4gICAgICAgIC8vIG1haW50YWluZWQuIEZvciBsYXJnZSBkb2N1bWVudHMsIHRoaXMgbWF5IGJlIHNtYWxsZXIgdGhhbiB0aGVcbiAgICAgICAgLy8gZWRpdG9yIGRvY3VtZW50LiBUaGlzIHdpbmRvdyBhbHdheXMgaW5jbHVkZXMgdGhlIHNlbGVjdGlvbiBoZWFkLlxuICAgICAgICB0aGlzLmZyb20gPSAwO1xuICAgICAgICB0aGlzLnRvID0gMDtcbiAgICAgICAgLy8gV2hlbiBhcHBseWluZyBhIHRyYW5zYWN0aW9uLCB0aGlzIGlzIHVzZWQgdG8gY29tcGFyZSB0aGUgY2hhbmdlXG4gICAgICAgIC8vIG1hZGUgdG8gdGhlIGNvbnRleHQgY29udGVudCB0byB0aGUgY2hhbmdlIGluIHRoZSB0cmFuc2FjdGlvbiBpblxuICAgICAgICAvLyBvcmRlciB0byBtYWtlIHRoZSBtaW5pbWFsIGNoYW5nZXMgdG8gdGhlIGNvbnRleHQgKHNpbmNlIHRvdWNoaW5nXG4gICAgICAgIC8vIHRoYXQgc29tZXRpbWVzIGJyZWFrcyBzZXJpZXMgb2YgbXVsdGlwbGUgZWRpdHMgbWFkZSBmb3IgYSBzaW5nbGVcbiAgICAgICAgLy8gdXNlciBhY3Rpb24gb24gc29tZSBBbmRyb2lkIGtleWJvYXJkcylcbiAgICAgICAgdGhpcy5wZW5kaW5nQ29udGV4dENoYW5nZSA9IG51bGw7XG4gICAgICAgIHRoaXMuaGFuZGxlcnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICAgICAgICAvLyBLbHVkZ2UgdG8gd29yayBhcm91bmQgdGhlIGZhY3QgdGhhdCBFZGl0Q29udGV4dCBkb2VzIG5vdCByZXNwb25kXG4gICAgICAgIC8vIHdlbGwgdG8gaGF2aW5nIGl0cyBjb250ZW50IHVwZGF0ZWQgZHVyaW5nIGEgY29tcG9zaXRpb24gKHNlZSAjMTQ3MilcbiAgICAgICAgdGhpcy5jb21wb3NpbmcgPSBudWxsO1xuICAgICAgICB0aGlzLnJlc2V0UmFuZ2Uodmlldy5zdGF0ZSk7XG4gICAgICAgIGxldCBjb250ZXh0ID0gdGhpcy5lZGl0Q29udGV4dCA9IG5ldyB3aW5kb3cuRWRpdENvbnRleHQoe1xuICAgICAgICAgICAgdGV4dDogdmlldy5zdGF0ZS5kb2Muc2xpY2VTdHJpbmcodGhpcy5mcm9tLCB0aGlzLnRvKSxcbiAgICAgICAgICAgIHNlbGVjdGlvblN0YXJ0OiB0aGlzLnRvQ29udGV4dFBvcyhNYXRoLm1heCh0aGlzLmZyb20sIE1hdGgubWluKHRoaXMudG8sIHZpZXcuc3RhdGUuc2VsZWN0aW9uLm1haW4uYW5jaG9yKSkpLFxuICAgICAgICAgICAgc2VsZWN0aW9uRW5kOiB0aGlzLnRvQ29udGV4dFBvcyh2aWV3LnN0YXRlLnNlbGVjdGlvbi5tYWluLmhlYWQpXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmhhbmRsZXJzLnRleHR1cGRhdGUgPSBlID0+IHtcbiAgICAgICAgICAgIGxldCBtYWluID0gdmlldy5zdGF0ZS5zZWxlY3Rpb24ubWFpbiwgeyBhbmNob3IsIGhlYWQgfSA9IG1haW47XG4gICAgICAgICAgICBsZXQgZnJvbSA9IHRoaXMudG9FZGl0b3JQb3MoZS51cGRhdGVSYW5nZVN0YXJ0KSwgdG8gPSB0aGlzLnRvRWRpdG9yUG9zKGUudXBkYXRlUmFuZ2VFbmQpO1xuICAgICAgICAgICAgaWYgKHZpZXcuaW5wdXRTdGF0ZS5jb21wb3NpbmcgPj0gMCAmJiAhdGhpcy5jb21wb3NpbmcpXG4gICAgICAgICAgICAgICAgdGhpcy5jb21wb3NpbmcgPSB7IGNvbnRleHRCYXNlOiBlLnVwZGF0ZVJhbmdlU3RhcnQsIGVkaXRvckJhc2U6IGZyb20sIGRyaWZ0ZWQ6IGZhbHNlIH07XG4gICAgICAgICAgICBsZXQgZGVsZXRlcyA9IHRvIC0gZnJvbSA+IGUudGV4dC5sZW5ndGg7XG4gICAgICAgICAgICAvLyBJZiB0aGUgd2luZG93IGRvZXNuJ3QgaW5jbHVkZSB0aGUgYW5jaG9yLCBhc3N1bWUgY2hhbmdlc1xuICAgICAgICAgICAgLy8gYWRqYWNlbnQgdG8gYSBzaWRlIGdvIHVwIHRvIHRoZSBhbmNob3IuXG4gICAgICAgICAgICBpZiAoZnJvbSA9PSB0aGlzLmZyb20gJiYgYW5jaG9yIDwgdGhpcy5mcm9tKVxuICAgICAgICAgICAgICAgIGZyb20gPSBhbmNob3I7XG4gICAgICAgICAgICBlbHNlIGlmICh0byA9PSB0aGlzLnRvICYmIGFuY2hvciA+IHRoaXMudG8pXG4gICAgICAgICAgICAgICAgdG8gPSBhbmNob3I7XG4gICAgICAgICAgICBsZXQgZGlmZiA9IGZpbmREaWZmKHZpZXcuc3RhdGUuc2xpY2VEb2MoZnJvbSwgdG8pLCBlLnRleHQsIChkZWxldGVzID8gbWFpbi5mcm9tIDogbWFpbi50bykgLSBmcm9tLCBkZWxldGVzID8gXCJlbmRcIiA6IG51bGwpO1xuICAgICAgICAgICAgLy8gRWRpdCBjb250ZXh0cyBzb21ldGltZXMgZmlyZSBlbXB0eSBjaGFuZ2VzXG4gICAgICAgICAgICBpZiAoIWRpZmYpIHtcbiAgICAgICAgICAgICAgICBsZXQgbmV3U2VsID0gRWRpdG9yU2VsZWN0aW9uLnNpbmdsZSh0aGlzLnRvRWRpdG9yUG9zKGUuc2VsZWN0aW9uU3RhcnQpLCB0aGlzLnRvRWRpdG9yUG9zKGUuc2VsZWN0aW9uRW5kKSk7XG4gICAgICAgICAgICAgICAgaWYgKCFuZXdTZWwubWFpbi5lcShtYWluKSlcbiAgICAgICAgICAgICAgICAgICAgdmlldy5kaXNwYXRjaCh7IHNlbGVjdGlvbjogbmV3U2VsLCB1c2VyRXZlbnQ6IFwic2VsZWN0XCIgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbGV0IGNoYW5nZSA9IHsgZnJvbTogZGlmZi5mcm9tICsgZnJvbSwgdG86IGRpZmYudG9BICsgZnJvbSxcbiAgICAgICAgICAgICAgICBpbnNlcnQ6IFRleHQub2YoZS50ZXh0LnNsaWNlKGRpZmYuZnJvbSwgZGlmZi50b0IpLnNwbGl0KFwiXFxuXCIpKSB9O1xuICAgICAgICAgICAgaWYgKChicm93c2VyLm1hYyB8fCBicm93c2VyLmFuZHJvaWQpICYmIGNoYW5nZS5mcm9tID09IGhlYWQgLSAxICYmXG4gICAgICAgICAgICAgICAgL15cXC4gPyQvLnRlc3QoZS50ZXh0KSAmJiB2aWV3LmNvbnRlbnRET00uZ2V0QXR0cmlidXRlKFwiYXV0b2NvcnJlY3RcIikgPT0gXCJvZmZcIilcbiAgICAgICAgICAgICAgICBjaGFuZ2UgPSB7IGZyb20sIHRvLCBpbnNlcnQ6IFRleHQub2YoW2UudGV4dC5yZXBsYWNlKFwiLlwiLCBcIiBcIildKSB9O1xuICAgICAgICAgICAgdGhpcy5wZW5kaW5nQ29udGV4dENoYW5nZSA9IGNoYW5nZTtcbiAgICAgICAgICAgIGlmICghdmlldy5zdGF0ZS5yZWFkT25seSkge1xuICAgICAgICAgICAgICAgIGxldCBuZXdMZW4gPSB0aGlzLnRvIC0gdGhpcy5mcm9tICsgKGNoYW5nZS50byAtIGNoYW5nZS5mcm9tICsgY2hhbmdlLmluc2VydC5sZW5ndGgpO1xuICAgICAgICAgICAgICAgIGFwcGx5RE9NQ2hhbmdlSW5uZXIodmlldywgY2hhbmdlLCBFZGl0b3JTZWxlY3Rpb24uc2luZ2xlKHRoaXMudG9FZGl0b3JQb3MoZS5zZWxlY3Rpb25TdGFydCwgbmV3TGVuKSwgdGhpcy50b0VkaXRvclBvcyhlLnNlbGVjdGlvbkVuZCwgbmV3TGVuKSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gSWYgdGhlIHRyYW5zYWN0aW9uIGRpZG4ndCBmbHVzaCBvdXIgY2hhbmdlLCByZXZlcnQgaXQgc29cbiAgICAgICAgICAgIC8vIHRoYXQgdGhlIGNvbnRleHQgaXMgaW4gc3luYyB3aXRoIHRoZSBlZGl0b3Igc3RhdGUgYWdhaW4uXG4gICAgICAgICAgICBpZiAodGhpcy5wZW5kaW5nQ29udGV4dENoYW5nZSkge1xuICAgICAgICAgICAgICAgIHRoaXMucmV2ZXJ0UGVuZGluZyh2aWV3LnN0YXRlKTtcbiAgICAgICAgICAgICAgICB0aGlzLnNldFNlbGVjdGlvbih2aWV3LnN0YXRlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIFdvcmsgYXJvdW5kIG1pc3NlZCBjb21wb3NpdGlvbmVuZCBldmVudHMuIFNlZSBodHRwczovL2Rpc2N1c3MuY29kZW1pcnJvci5uZXQvdC9hLzk1MTRcbiAgICAgICAgICAgIGlmIChjaGFuZ2UuZnJvbSA8IGNoYW5nZS50byAmJiAhY2hhbmdlLmluc2VydC5sZW5ndGggJiYgdmlldy5pbnB1dFN0YXRlLmNvbXBvc2luZyA+PSAwICYmXG4gICAgICAgICAgICAgICAgIS9bXFxcXHB7QWxwaGFiZXRpY31cXFxccHtOdW1iZXJ9X10vLnRlc3QoY29udGV4dC50ZXh0LnNsaWNlKE1hdGgubWF4KDAsIGUudXBkYXRlUmFuZ2VTdGFydCAtIDEpLCBNYXRoLm1pbihjb250ZXh0LnRleHQubGVuZ3RoLCBlLnVwZGF0ZVJhbmdlU3RhcnQgKyAxKSkpKVxuICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlcnMuY29tcG9zaXRpb25lbmQoZSk7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuaGFuZGxlcnMuY2hhcmFjdGVyYm91bmRzdXBkYXRlID0gZSA9PiB7XG4gICAgICAgICAgICBsZXQgcmVjdHMgPSBbXSwgcHJldiA9IG51bGw7XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gdGhpcy50b0VkaXRvclBvcyhlLnJhbmdlU3RhcnQpLCBlbmQgPSB0aGlzLnRvRWRpdG9yUG9zKGUucmFuZ2VFbmQpOyBpIDwgZW5kOyBpKyspIHtcbiAgICAgICAgICAgICAgICBsZXQgcmVjdCA9IHZpZXcuY29vcmRzRm9yQ2hhcihpKTtcbiAgICAgICAgICAgICAgICBwcmV2ID0gKHJlY3QgJiYgbmV3IERPTVJlY3QocmVjdC5sZWZ0LCByZWN0LnRvcCwgcmVjdC5yaWdodCAtIHJlY3QubGVmdCwgcmVjdC5ib3R0b20gLSByZWN0LnRvcCkpXG4gICAgICAgICAgICAgICAgICAgIHx8IHByZXYgfHwgbmV3IERPTVJlY3Q7XG4gICAgICAgICAgICAgICAgcmVjdHMucHVzaChwcmV2KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnRleHQudXBkYXRlQ2hhcmFjdGVyQm91bmRzKGUucmFuZ2VTdGFydCwgcmVjdHMpO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLmhhbmRsZXJzLnRleHRmb3JtYXR1cGRhdGUgPSBlID0+IHtcbiAgICAgICAgICAgIGxldCBkZWNvID0gW107XG4gICAgICAgICAgICBmb3IgKGxldCBmb3JtYXQgb2YgZS5nZXRUZXh0Rm9ybWF0cygpKSB7XG4gICAgICAgICAgICAgICAgbGV0IGxpbmVTdHlsZSA9IGZvcm1hdC51bmRlcmxpbmVTdHlsZSwgdGhpY2tuZXNzID0gZm9ybWF0LnVuZGVybGluZVRoaWNrbmVzcztcbiAgICAgICAgICAgICAgICBpZiAoIS9ub25lL2kudGVzdChsaW5lU3R5bGUpICYmICEvbm9uZS9pLnRlc3QodGhpY2tuZXNzKSkge1xuICAgICAgICAgICAgICAgICAgICBsZXQgZnJvbSA9IHRoaXMudG9FZGl0b3JQb3MoZm9ybWF0LnJhbmdlU3RhcnQpLCB0byA9IHRoaXMudG9FZGl0b3JQb3MoZm9ybWF0LnJhbmdlRW5kKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGZyb20gPCB0bykge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gVGhlc2UgdmFsdWVzIGNoYW5nZWQgZnJvbSBjYXBpdGFsaXplZCBjdXN0b20gc3RyaW5ncyB0byBsb3dlci1jYXNlIENTUyBrZXl3b3JkcyBpbiAyMDI1XG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgc3R5bGUgPSBgdGV4dC1kZWNvcmF0aW9uOiB1bmRlcmxpbmUgJHsvXlthLXpdLy50ZXN0KGxpbmVTdHlsZSkgPyBsaW5lU3R5bGUgKyBcIiBcIiA6IGxpbmVTdHlsZSA9PSBcIkRhc2hlZFwiID8gXCJkYXNoZWQgXCIgOiBsaW5lU3R5bGUgPT0gXCJTcXVpZ2dsZVwiID8gXCJ3YXZ5IFwiIDogXCJcIn0key90aGluL2kudGVzdCh0aGlja25lc3MpID8gMSA6IDJ9cHhgO1xuICAgICAgICAgICAgICAgICAgICAgICAgZGVjby5wdXNoKERlY29yYXRpb24ubWFyayh7IGF0dHJpYnV0ZXM6IHsgc3R5bGUgfSB9KS5yYW5nZShmcm9tLCB0bykpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmlldy5kaXNwYXRjaCh7IGVmZmVjdHM6IHNldEVkaXRDb250ZXh0Rm9ybWF0dGluZy5vZihEZWNvcmF0aW9uLnNldChkZWNvKSkgfSk7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuaGFuZGxlcnMuY29tcG9zaXRpb25zdGFydCA9ICgpID0+IHtcbiAgICAgICAgICAgIGlmICh2aWV3LmlucHV0U3RhdGUuY29tcG9zaW5nIDwgMCkge1xuICAgICAgICAgICAgICAgIHZpZXcuaW5wdXRTdGF0ZS5jb21wb3NpbmcgPSAwO1xuICAgICAgICAgICAgICAgIHZpZXcuaW5wdXRTdGF0ZS5jb21wb3NpdGlvbkZpcnN0Q2hhbmdlID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5oYW5kbGVycy5jb21wb3NpdGlvbmVuZCA9ICgpID0+IHtcbiAgICAgICAgICAgIHZpZXcuaW5wdXRTdGF0ZS5jb21wb3NpbmcgPSAtMTtcbiAgICAgICAgICAgIHZpZXcuaW5wdXRTdGF0ZS5jb21wb3NpdGlvbkZpcnN0Q2hhbmdlID0gbnVsbDtcbiAgICAgICAgICAgIGlmICh0aGlzLmNvbXBvc2luZykge1xuICAgICAgICAgICAgICAgIGxldCB7IGRyaWZ0ZWQgfSA9IHRoaXMuY29tcG9zaW5nO1xuICAgICAgICAgICAgICAgIHRoaXMuY29tcG9zaW5nID0gbnVsbDtcbiAgICAgICAgICAgICAgICBpZiAoZHJpZnRlZClcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZXNldCh2aWV3LnN0YXRlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgZm9yIChsZXQgZXZlbnQgaW4gdGhpcy5oYW5kbGVycylcbiAgICAgICAgICAgIGNvbnRleHQuYWRkRXZlbnRMaXN0ZW5lcihldmVudCwgdGhpcy5oYW5kbGVyc1tldmVudF0pO1xuICAgICAgICB0aGlzLm1lYXN1cmVSZXEgPSB7IHJlYWQ6IHZpZXcgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuZWRpdENvbnRleHQudXBkYXRlQ29udHJvbEJvdW5kcyh2aWV3LmNvbnRlbnRET00uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkpO1xuICAgICAgICAgICAgICAgIGxldCBzZWwgPSBnZXRTZWxlY3Rpb24odmlldy5yb290KTtcbiAgICAgICAgICAgICAgICBpZiAoc2VsICYmIHNlbC5yYW5nZUNvdW50KVxuICAgICAgICAgICAgICAgICAgICB0aGlzLmVkaXRDb250ZXh0LnVwZGF0ZVNlbGVjdGlvbkJvdW5kcyhzZWwuZ2V0UmFuZ2VBdCgwKS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSk7XG4gICAgICAgICAgICB9IH07XG4gICAgfVxuICAgIGFwcGx5RWRpdHModXBkYXRlKSB7XG4gICAgICAgIGxldCBvZmYgPSAwLCBhYm9ydCA9IGZhbHNlLCBwZW5kaW5nID0gdGhpcy5wZW5kaW5nQ29udGV4dENoYW5nZTtcbiAgICAgICAgdXBkYXRlLmNoYW5nZXMuaXRlckNoYW5nZXMoKGZyb21BLCB0b0EsIF9mcm9tQiwgX3RvQiwgaW5zZXJ0KSA9PiB7XG4gICAgICAgICAgICBpZiAoYWJvcnQpXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgbGV0IGRMZW4gPSBpbnNlcnQubGVuZ3RoIC0gKHRvQSAtIGZyb21BKTtcbiAgICAgICAgICAgIGlmIChwZW5kaW5nICYmIHRvQSA+PSBwZW5kaW5nLnRvKSB7XG4gICAgICAgICAgICAgICAgaWYgKHBlbmRpbmcuZnJvbSA9PSBmcm9tQSAmJiBwZW5kaW5nLnRvID09IHRvQSAmJiBwZW5kaW5nLmluc2VydC5lcShpbnNlcnQpKSB7XG4gICAgICAgICAgICAgICAgICAgIHBlbmRpbmcgPSB0aGlzLnBlbmRpbmdDb250ZXh0Q2hhbmdlID0gbnVsbDsgLy8gTWF0Y2hcbiAgICAgICAgICAgICAgICAgICAgb2ZmICs9IGRMZW47XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudG8gKz0gZExlbjtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHsgLy8gTWlzbWF0Y2gsIHJldmVydFxuICAgICAgICAgICAgICAgICAgICBwZW5kaW5nID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZXZlcnRQZW5kaW5nKHVwZGF0ZS5zdGF0ZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZnJvbUEgKz0gb2ZmO1xuICAgICAgICAgICAgdG9BICs9IG9mZjtcbiAgICAgICAgICAgIGlmICh0b0EgPD0gdGhpcy5mcm9tKSB7IC8vIEJlZm9yZSB0aGUgd2luZG93XG4gICAgICAgICAgICAgICAgdGhpcy5mcm9tICs9IGRMZW47XG4gICAgICAgICAgICAgICAgdGhpcy50byArPSBkTGVuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoZnJvbUEgPCB0aGlzLnRvKSB7IC8vIE92ZXJsYXBzIHdpdGggd2luZG93XG4gICAgICAgICAgICAgICAgaWYgKGZyb21BIDwgdGhpcy5mcm9tIHx8IHRvQSA+IHRoaXMudG8gfHwgKHRoaXMudG8gLSB0aGlzLmZyb20pICsgaW5zZXJ0Lmxlbmd0aCA+IDMwMDAwIC8qIEN4VnAuTWF4U2l6ZSAqLykge1xuICAgICAgICAgICAgICAgICAgICBhYm9ydCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5lZGl0Q29udGV4dC51cGRhdGVUZXh0KHRoaXMudG9Db250ZXh0UG9zKGZyb21BKSwgdGhpcy50b0NvbnRleHRQb3ModG9BKSwgaW5zZXJ0LnRvU3RyaW5nKCkpO1xuICAgICAgICAgICAgICAgIHRoaXMudG8gKz0gZExlbjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG9mZiArPSBkTGVuO1xuICAgICAgICB9KTtcbiAgICAgICAgaWYgKHBlbmRpbmcgJiYgIWFib3J0KVxuICAgICAgICAgICAgdGhpcy5yZXZlcnRQZW5kaW5nKHVwZGF0ZS5zdGF0ZSk7XG4gICAgICAgIHJldHVybiAhYWJvcnQ7XG4gICAgfVxuICAgIHVwZGF0ZSh1cGRhdGUpIHtcbiAgICAgICAgbGV0IHJldmVydGVkID0gdGhpcy5wZW5kaW5nQ29udGV4dENoYW5nZSwgc3RhcnRTZWwgPSB1cGRhdGUuc3RhcnRTdGF0ZS5zZWxlY3Rpb24ubWFpbjtcbiAgICAgICAgaWYgKHRoaXMuY29tcG9zaW5nICYmXG4gICAgICAgICAgICAodGhpcy5jb21wb3NpbmcuZHJpZnRlZCB8fFxuICAgICAgICAgICAgICAgICghdXBkYXRlLmNoYW5nZXMudG91Y2hlc1JhbmdlKHN0YXJ0U2VsLmZyb20sIHN0YXJ0U2VsLnRvKSAmJlxuICAgICAgICAgICAgICAgICAgICB1cGRhdGUudHJhbnNhY3Rpb25zLnNvbWUodHIgPT4gIXRyLmlzVXNlckV2ZW50KFwiaW5wdXQudHlwZVwiKSAmJiB0ci5jaGFuZ2VzLnRvdWNoZXNSYW5nZSh0aGlzLmZyb20sIHRoaXMudG8pKSkpKSB7XG4gICAgICAgICAgICB0aGlzLmNvbXBvc2luZy5kcmlmdGVkID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMuY29tcG9zaW5nLmVkaXRvckJhc2UgPSB1cGRhdGUuY2hhbmdlcy5tYXBQb3ModGhpcy5jb21wb3NpbmcuZWRpdG9yQmFzZSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoIXRoaXMuYXBwbHlFZGl0cyh1cGRhdGUpIHx8ICF0aGlzLnJhbmdlSXNWYWxpZCh1cGRhdGUuc3RhdGUpKSB7XG4gICAgICAgICAgICB0aGlzLnBlbmRpbmdDb250ZXh0Q2hhbmdlID0gbnVsbDtcbiAgICAgICAgICAgIHRoaXMucmVzZXQodXBkYXRlLnN0YXRlKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh1cGRhdGUuZG9jQ2hhbmdlZCB8fCB1cGRhdGUuc2VsZWN0aW9uU2V0IHx8IHJldmVydGVkKSB7XG4gICAgICAgICAgICB0aGlzLnNldFNlbGVjdGlvbih1cGRhdGUuc3RhdGUpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh1cGRhdGUuZ2VvbWV0cnlDaGFuZ2VkIHx8IHVwZGF0ZS5kb2NDaGFuZ2VkIHx8IHVwZGF0ZS5zZWxlY3Rpb25TZXQpXG4gICAgICAgICAgICB1cGRhdGUudmlldy5yZXF1ZXN0TWVhc3VyZSh0aGlzLm1lYXN1cmVSZXEpO1xuICAgIH1cbiAgICByZXNldFJhbmdlKHN0YXRlKSB7XG4gICAgICAgIGxldCB7IGhlYWQgfSA9IHN0YXRlLnNlbGVjdGlvbi5tYWluO1xuICAgICAgICB0aGlzLmZyb20gPSBNYXRoLm1heCgwLCBoZWFkIC0gMTAwMDAgLyogQ3hWcC5NYXJnaW4gKi8pO1xuICAgICAgICB0aGlzLnRvID0gTWF0aC5taW4oc3RhdGUuZG9jLmxlbmd0aCwgaGVhZCArIDEwMDAwIC8qIEN4VnAuTWFyZ2luICovKTtcbiAgICB9XG4gICAgcmVzZXQoc3RhdGUpIHtcbiAgICAgICAgdGhpcy5yZXNldFJhbmdlKHN0YXRlKTtcbiAgICAgICAgdGhpcy5lZGl0Q29udGV4dC51cGRhdGVUZXh0KDAsIHRoaXMuZWRpdENvbnRleHQudGV4dC5sZW5ndGgsIHN0YXRlLmRvYy5zbGljZVN0cmluZyh0aGlzLmZyb20sIHRoaXMudG8pKTtcbiAgICAgICAgdGhpcy5zZXRTZWxlY3Rpb24oc3RhdGUpO1xuICAgIH1cbiAgICByZXZlcnRQZW5kaW5nKHN0YXRlKSB7XG4gICAgICAgIGxldCBwZW5kaW5nID0gdGhpcy5wZW5kaW5nQ29udGV4dENoYW5nZTtcbiAgICAgICAgdGhpcy5wZW5kaW5nQ29udGV4dENoYW5nZSA9IG51bGw7XG4gICAgICAgIHRoaXMuZWRpdENvbnRleHQudXBkYXRlVGV4dCh0aGlzLnRvQ29udGV4dFBvcyhwZW5kaW5nLmZyb20pLCB0aGlzLnRvQ29udGV4dFBvcyhwZW5kaW5nLmZyb20gKyBwZW5kaW5nLmluc2VydC5sZW5ndGgpLCBzdGF0ZS5kb2Muc2xpY2VTdHJpbmcocGVuZGluZy5mcm9tLCBwZW5kaW5nLnRvKSk7XG4gICAgfVxuICAgIHNldFNlbGVjdGlvbihzdGF0ZSkge1xuICAgICAgICBsZXQgeyBtYWluIH0gPSBzdGF0ZS5zZWxlY3Rpb247XG4gICAgICAgIGxldCBzdGFydCA9IHRoaXMudG9Db250ZXh0UG9zKE1hdGgubWF4KHRoaXMuZnJvbSwgTWF0aC5taW4odGhpcy50bywgbWFpbi5hbmNob3IpKSk7XG4gICAgICAgIGxldCBlbmQgPSB0aGlzLnRvQ29udGV4dFBvcyhtYWluLmhlYWQpO1xuICAgICAgICBpZiAodGhpcy5lZGl0Q29udGV4dC5zZWxlY3Rpb25TdGFydCAhPSBzdGFydCB8fCB0aGlzLmVkaXRDb250ZXh0LnNlbGVjdGlvbkVuZCAhPSBlbmQpXG4gICAgICAgICAgICB0aGlzLmVkaXRDb250ZXh0LnVwZGF0ZVNlbGVjdGlvbihzdGFydCwgZW5kKTtcbiAgICB9XG4gICAgcmFuZ2VJc1ZhbGlkKHN0YXRlKSB7XG4gICAgICAgIGxldCB7IGhlYWQgfSA9IHN0YXRlLnNlbGVjdGlvbi5tYWluO1xuICAgICAgICByZXR1cm4gISh0aGlzLmZyb20gPiAwICYmIGhlYWQgLSB0aGlzLmZyb20gPCA1MDAgLyogQ3hWcC5NaW5NYXJnaW4gKi8gfHxcbiAgICAgICAgICAgIHRoaXMudG8gPCBzdGF0ZS5kb2MubGVuZ3RoICYmIHRoaXMudG8gLSBoZWFkIDwgNTAwIC8qIEN4VnAuTWluTWFyZ2luICovIHx8XG4gICAgICAgICAgICB0aGlzLnRvIC0gdGhpcy5mcm9tID4gMTAwMDAgLyogQ3hWcC5NYXJnaW4gKi8gKiAzKTtcbiAgICB9XG4gICAgdG9FZGl0b3JQb3MoY29udGV4dFBvcywgY2xpcExlbiA9IHRoaXMudG8gLSB0aGlzLmZyb20pIHtcbiAgICAgICAgY29udGV4dFBvcyA9IE1hdGgubWluKGNvbnRleHRQb3MsIGNsaXBMZW4pO1xuICAgICAgICBsZXQgYyA9IHRoaXMuY29tcG9zaW5nO1xuICAgICAgICByZXR1cm4gYyAmJiBjLmRyaWZ0ZWQgPyBjLmVkaXRvckJhc2UgKyAoY29udGV4dFBvcyAtIGMuY29udGV4dEJhc2UpIDogY29udGV4dFBvcyArIHRoaXMuZnJvbTtcbiAgICB9XG4gICAgdG9Db250ZXh0UG9zKGVkaXRvclBvcykge1xuICAgICAgICBsZXQgYyA9IHRoaXMuY29tcG9zaW5nO1xuICAgICAgICByZXR1cm4gYyAmJiBjLmRyaWZ0ZWQgPyBjLmNvbnRleHRCYXNlICsgKGVkaXRvclBvcyAtIGMuZWRpdG9yQmFzZSkgOiBlZGl0b3JQb3MgLSB0aGlzLmZyb207XG4gICAgfVxuICAgIGRlc3Ryb3koKSB7XG4gICAgICAgIGZvciAobGV0IGV2ZW50IGluIHRoaXMuaGFuZGxlcnMpXG4gICAgICAgICAgICB0aGlzLmVkaXRDb250ZXh0LnJlbW92ZUV2ZW50TGlzdGVuZXIoZXZlbnQsIHRoaXMuaGFuZGxlcnNbZXZlbnRdKTtcbiAgICB9XG59XG5cbi8vIFRoZSBlZGl0b3IncyB1cGRhdGUgc3RhdGUgbWFjaGluZSBsb29rcyBzb21ldGhpbmcgbGlrZSB0aGlzOlxuLy9cbi8vICAgICBJZGxlIOKGkiBVcGRhdGluZyDih4YgSWRsZSAodW5jaGVja2VkKSDihpIgTWVhc3VyaW5nIOKGkiBJZGxlXG4vLyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg4oaRICAgICAg4oaTXG4vLyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVXBkYXRpbmcgKG1lYXN1cmUpXG4vL1xuLy8gVGhlIGRpZmZlcmVuY2UgYmV0d2VlbiAnSWRsZScgYW5kICdJZGxlICh1bmNoZWNrZWQpJyBsaWVzIGluXG4vLyB3aGV0aGVyIGEgbGF5b3V0IGNoZWNrIGhhcyBiZWVuIHNjaGVkdWxlZC4gQSByZWd1bGFyIHVwZGF0ZSB0aHJvdWdoXG4vLyB0aGUgYHVwZGF0ZWAgbWV0aG9kIHVwZGF0ZXMgdGhlIERPTSBpbiBhIHdyaXRlLW9ubHkgZmFzaGlvbiwgYW5kXG4vLyByZWxpZXMgb24gYSBjaGVjayAoc2NoZWR1bGVkIHdpdGggYHJlcXVlc3RBbmltYXRpb25GcmFtZWApIHRvIG1ha2Vcbi8vIHN1cmUgZXZlcnl0aGluZyBpcyB3aGVyZSBpdCBzaG91bGQgYmUgYW5kIHRoZSB2aWV3cG9ydCBjb3ZlcnMgdGhlXG4vLyB2aXNpYmxlIGNvZGUuIFRoYXQgY2hlY2sgY29udGludWVzIHRvIG1lYXN1cmUgYW5kIHRoZW4gb3B0aW9uYWxseVxuLy8gdXBkYXRlIHVudGlsIGl0IHJlYWNoZXMgYSBjb2hlcmVudCBzdGF0ZS5cbi8qKlxuQW4gZWRpdG9yIHZpZXcgcmVwcmVzZW50cyB0aGUgZWRpdG9yJ3MgdXNlciBpbnRlcmZhY2UuIEl0IGhvbGRzXG50aGUgZWRpdGFibGUgRE9NIHN1cmZhY2UsIGFuZCBwb3NzaWJseSBvdGhlciBlbGVtZW50cyBzdWNoIGFzIHRoZVxubGluZSBudW1iZXIgZ3V0dGVyLiBJdCBoYW5kbGVzIGV2ZW50cyBhbmQgZGlzcGF0Y2hlcyBzdGF0ZVxudHJhbnNhY3Rpb25zIGZvciBlZGl0aW5nIGFjdGlvbnMuXG4qL1xuY2xhc3MgRWRpdG9yVmlldyB7XG4gICAgLyoqXG4gICAgVGhlIGN1cnJlbnQgZWRpdG9yIHN0YXRlLlxuICAgICovXG4gICAgZ2V0IHN0YXRlKCkgeyByZXR1cm4gdGhpcy52aWV3U3RhdGUuc3RhdGU7IH1cbiAgICAvKipcbiAgICBUbyBiZSBhYmxlIHRvIGRpc3BsYXkgbGFyZ2UgZG9jdW1lbnRzIHdpdGhvdXQgY29uc3VtaW5nIHRvbyBtdWNoXG4gICAgbWVtb3J5IG9yIG92ZXJsb2FkaW5nIHRoZSBicm93c2VyLCBDb2RlTWlycm9yIG9ubHkgZHJhd3MgdGhlXG4gICAgY29kZSB0aGF0IGlzIHZpc2libGUgKHBsdXMgYSBtYXJnaW4gYXJvdW5kIGl0KSB0byB0aGUgRE9NLiBUaGlzXG4gICAgcHJvcGVydHkgdGVsbHMgeW91IHRoZSBleHRlbnQgb2YgdGhlIGN1cnJlbnQgZHJhd24gdmlld3BvcnQsIGluXG4gICAgZG9jdW1lbnQgcG9zaXRpb25zLlxuICAgICovXG4gICAgZ2V0IHZpZXdwb3J0KCkgeyByZXR1cm4gdGhpcy52aWV3U3RhdGUudmlld3BvcnQ7IH1cbiAgICAvKipcbiAgICBXaGVuIHRoZXJlIGFyZSwgZm9yIGV4YW1wbGUsIGxhcmdlIGNvbGxhcHNlZCByYW5nZXMgaW4gdGhlXG4gICAgdmlld3BvcnQsIGl0cyBzaXplIGNhbiBiZSBhIGxvdCBiaWdnZXIgdGhhbiB0aGUgYWN0dWFsIHZpc2libGVcbiAgICBjb250ZW50LiBUaHVzLCBpZiB5b3UgYXJlIGRvaW5nIHNvbWV0aGluZyBsaWtlIHN0eWxpbmcgdGhlXG4gICAgY29udGVudCBpbiB0aGUgdmlld3BvcnQsIGl0IGlzIHByZWZlcmFibGUgdG8gb25seSBkbyBzbyBmb3JcbiAgICB0aGVzZSByYW5nZXMsIHdoaWNoIGFyZSB0aGUgc3Vic2V0IG9mIHRoZSB2aWV3cG9ydCB0aGF0IGlzXG4gICAgYWN0dWFsbHkgZHJhd24uXG4gICAgKi9cbiAgICBnZXQgdmlzaWJsZVJhbmdlcygpIHsgcmV0dXJuIHRoaXMudmlld1N0YXRlLnZpc2libGVSYW5nZXM7IH1cbiAgICAvKipcbiAgICBSZXR1cm5zIGZhbHNlIHdoZW4gdGhlIGVkaXRvciBpcyBlbnRpcmVseSBzY3JvbGxlZCBvdXQgb2Ygdmlld1xuICAgIG9yIG90aGVyd2lzZSBoaWRkZW4uXG4gICAgKi9cbiAgICBnZXQgaW5WaWV3KCkgeyByZXR1cm4gdGhpcy52aWV3U3RhdGUuaW5WaWV3OyB9XG4gICAgLyoqXG4gICAgSW5kaWNhdGVzIHdoZXRoZXIgdGhlIHVzZXIgaXMgY3VycmVudGx5IGNvbXBvc2luZyB0ZXh0IHZpYVxuICAgIFtJTUVdKGh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0lucHV0X21ldGhvZCksIGFuZCBhdCBsZWFzdFxuICAgIG9uZSBjaGFuZ2UgaGFzIGJlZW4gbWFkZSBpbiB0aGUgY3VycmVudCBjb21wb3NpdGlvbi5cbiAgICAqL1xuICAgIGdldCBjb21wb3NpbmcoKSB7IHJldHVybiAhIXRoaXMuaW5wdXRTdGF0ZSAmJiB0aGlzLmlucHV0U3RhdGUuY29tcG9zaW5nID4gMDsgfVxuICAgIC8qKlxuICAgIEluZGljYXRlcyB3aGV0aGVyIHRoZSB1c2VyIGlzIGN1cnJlbnRseSBpbiBjb21wb3Npbmcgc3RhdGUuIE5vdGVcbiAgICB0aGF0IG9uIHNvbWUgcGxhdGZvcm1zLCBsaWtlIEFuZHJvaWQsIHRoaXMgd2lsbCBiZSB0aGUgY2FzZSBhXG4gICAgbG90LCBzaW5jZSBqdXN0IHB1dHRpbmcgdGhlIGN1cnNvciBvbiBhIHdvcmQgc3RhcnRzIGFcbiAgICBjb21wb3NpdGlvbiB0aGVyZS5cbiAgICAqL1xuICAgIGdldCBjb21wb3NpdGlvblN0YXJ0ZWQoKSB7IHJldHVybiAhIXRoaXMuaW5wdXRTdGF0ZSAmJiB0aGlzLmlucHV0U3RhdGUuY29tcG9zaW5nID49IDA7IH1cbiAgICAvKipcbiAgICBUaGUgZG9jdW1lbnQgb3Igc2hhZG93IHJvb3QgdGhhdCB0aGUgdmlldyBsaXZlcyBpbi5cbiAgICAqL1xuICAgIGdldCByb290KCkgeyByZXR1cm4gdGhpcy5fcm9vdDsgfVxuICAgIC8qKlxuICAgIEBpbnRlcm5hbFxuICAgICovXG4gICAgZ2V0IHdpbigpIHsgcmV0dXJuIHRoaXMuZG9tLm93bmVyRG9jdW1lbnQuZGVmYXVsdFZpZXcgfHwgd2luZG93OyB9XG4gICAgLyoqXG4gICAgQ29uc3RydWN0IGEgbmV3IHZpZXcuIFlvdSdsbCB3YW50IHRvIGVpdGhlciBwcm92aWRlIGEgYHBhcmVudGBcbiAgICBvcHRpb24sIG9yIHB1dCBgdmlldy5kb21gIGludG8geW91ciBkb2N1bWVudCBhZnRlciBjcmVhdGluZyBhXG4gICAgdmlldywgc28gdGhhdCB0aGUgdXNlciBjYW4gc2VlIHRoZSBlZGl0b3IuXG4gICAgKi9cbiAgICBjb25zdHJ1Y3Rvcihjb25maWcgPSB7fSkge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIHRoaXMucGx1Z2lucyA9IFtdO1xuICAgICAgICB0aGlzLnBsdWdpbk1hcCA9IG5ldyBNYXA7XG4gICAgICAgIHRoaXMuZWRpdG9yQXR0cnMgPSB7fTtcbiAgICAgICAgdGhpcy5jb250ZW50QXR0cnMgPSB7fTtcbiAgICAgICAgdGhpcy5iaWRpQ2FjaGUgPSBbXTtcbiAgICAgICAgdGhpcy5kZXN0cm95ZWQgPSBmYWxzZTtcbiAgICAgICAgLyoqXG4gICAgICAgIEBpbnRlcm5hbFxuICAgICAgICAqL1xuICAgICAgICB0aGlzLnVwZGF0ZVN0YXRlID0gMiAvKiBVcGRhdGVTdGF0ZS5VcGRhdGluZyAqLztcbiAgICAgICAgLyoqXG4gICAgICAgIEBpbnRlcm5hbFxuICAgICAgICAqL1xuICAgICAgICB0aGlzLm1lYXN1cmVTY2hlZHVsZWQgPSAtMTtcbiAgICAgICAgLyoqXG4gICAgICAgIEBpbnRlcm5hbFxuICAgICAgICAqL1xuICAgICAgICB0aGlzLm1lYXN1cmVSZXF1ZXN0cyA9IFtdO1xuICAgICAgICB0aGlzLmNvbnRlbnRET00gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICB0aGlzLnNjcm9sbERPTSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgIHRoaXMuc2Nyb2xsRE9NLnRhYkluZGV4ID0gLTE7XG4gICAgICAgIHRoaXMuc2Nyb2xsRE9NLmNsYXNzTmFtZSA9IFwiY20tc2Nyb2xsZXJcIjtcbiAgICAgICAgdGhpcy5zY3JvbGxET00uYXBwZW5kQ2hpbGQodGhpcy5jb250ZW50RE9NKTtcbiAgICAgICAgdGhpcy5hbm5vdW5jZURPTSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgIHRoaXMuYW5ub3VuY2VET00uY2xhc3NOYW1lID0gXCJjbS1hbm5vdW5jZWRcIjtcbiAgICAgICAgdGhpcy5hbm5vdW5jZURPTS5zZXRBdHRyaWJ1dGUoXCJhcmlhLWxpdmVcIiwgXCJwb2xpdGVcIik7XG4gICAgICAgIHRoaXMuZG9tID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgdGhpcy5kb20uYXBwZW5kQ2hpbGQodGhpcy5hbm5vdW5jZURPTSk7XG4gICAgICAgIHRoaXMuZG9tLmFwcGVuZENoaWxkKHRoaXMuc2Nyb2xsRE9NKTtcbiAgICAgICAgaWYgKGNvbmZpZy5wYXJlbnQpXG4gICAgICAgICAgICBjb25maWcucGFyZW50LmFwcGVuZENoaWxkKHRoaXMuZG9tKTtcbiAgICAgICAgbGV0IHsgZGlzcGF0Y2ggfSA9IGNvbmZpZztcbiAgICAgICAgdGhpcy5kaXNwYXRjaFRyYW5zYWN0aW9ucyA9IGNvbmZpZy5kaXNwYXRjaFRyYW5zYWN0aW9ucyB8fFxuICAgICAgICAgICAgKGRpc3BhdGNoICYmICgodHJzKSA9PiB0cnMuZm9yRWFjaCh0ciA9PiBkaXNwYXRjaCh0ciwgdGhpcykpKSkgfHxcbiAgICAgICAgICAgICgodHJzKSA9PiB0aGlzLnVwZGF0ZSh0cnMpKTtcbiAgICAgICAgdGhpcy5kaXNwYXRjaCA9IHRoaXMuZGlzcGF0Y2guYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5fcm9vdCA9IChjb25maWcucm9vdCB8fCBnZXRSb290KGNvbmZpZy5wYXJlbnQpIHx8IGRvY3VtZW50KTtcbiAgICAgICAgdGhpcy52aWV3U3RhdGUgPSBuZXcgVmlld1N0YXRlKGNvbmZpZy5zdGF0ZSB8fCBFZGl0b3JTdGF0ZS5jcmVhdGUoY29uZmlnKSk7XG4gICAgICAgIGlmIChjb25maWcuc2Nyb2xsVG8gJiYgY29uZmlnLnNjcm9sbFRvLmlzKHNjcm9sbEludG9WaWV3KSlcbiAgICAgICAgICAgIHRoaXMudmlld1N0YXRlLnNjcm9sbFRhcmdldCA9IGNvbmZpZy5zY3JvbGxUby52YWx1ZS5jbGlwKHRoaXMudmlld1N0YXRlLnN0YXRlKTtcbiAgICAgICAgdGhpcy5wbHVnaW5zID0gdGhpcy5zdGF0ZS5mYWNldCh2aWV3UGx1Z2luKS5tYXAoc3BlYyA9PiBuZXcgUGx1Z2luSW5zdGFuY2Uoc3BlYykpO1xuICAgICAgICBmb3IgKGxldCBwbHVnaW4gb2YgdGhpcy5wbHVnaW5zKVxuICAgICAgICAgICAgcGx1Z2luLnVwZGF0ZSh0aGlzKTtcbiAgICAgICAgdGhpcy5vYnNlcnZlciA9IG5ldyBET01PYnNlcnZlcih0aGlzKTtcbiAgICAgICAgdGhpcy5pbnB1dFN0YXRlID0gbmV3IElucHV0U3RhdGUodGhpcyk7XG4gICAgICAgIHRoaXMuaW5wdXRTdGF0ZS5lbnN1cmVIYW5kbGVycyh0aGlzLnBsdWdpbnMpO1xuICAgICAgICB0aGlzLmRvY1ZpZXcgPSBuZXcgRG9jVmlldyh0aGlzKTtcbiAgICAgICAgdGhpcy5tb3VudFN0eWxlcygpO1xuICAgICAgICB0aGlzLnVwZGF0ZUF0dHJzKCk7XG4gICAgICAgIHRoaXMudXBkYXRlU3RhdGUgPSAwIC8qIFVwZGF0ZVN0YXRlLklkbGUgKi87XG4gICAgICAgIHRoaXMucmVxdWVzdE1lYXN1cmUoKTtcbiAgICAgICAgaWYgKChfYSA9IGRvY3VtZW50LmZvbnRzKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EucmVhZHkpXG4gICAgICAgICAgICBkb2N1bWVudC5mb250cy5yZWFkeS50aGVuKCgpID0+IHRoaXMucmVxdWVzdE1lYXN1cmUoKSk7XG4gICAgfVxuICAgIGRpc3BhdGNoKC4uLmlucHV0KSB7XG4gICAgICAgIGxldCB0cnMgPSBpbnB1dC5sZW5ndGggPT0gMSAmJiBpbnB1dFswXSBpbnN0YW5jZW9mIFRyYW5zYWN0aW9uID8gaW5wdXRcbiAgICAgICAgICAgIDogaW5wdXQubGVuZ3RoID09IDEgJiYgQXJyYXkuaXNBcnJheShpbnB1dFswXSkgPyBpbnB1dFswXVxuICAgICAgICAgICAgICAgIDogW3RoaXMuc3RhdGUudXBkYXRlKC4uLmlucHV0KV07XG4gICAgICAgIHRoaXMuZGlzcGF0Y2hUcmFuc2FjdGlvbnModHJzLCB0aGlzKTtcbiAgICB9XG4gICAgLyoqXG4gICAgVXBkYXRlIHRoZSB2aWV3IGZvciB0aGUgZ2l2ZW4gYXJyYXkgb2YgdHJhbnNhY3Rpb25zLiBUaGlzIHdpbGxcbiAgICB1cGRhdGUgdGhlIHZpc2libGUgZG9jdW1lbnQgYW5kIHNlbGVjdGlvbiB0byBtYXRjaCB0aGUgc3RhdGVcbiAgICBwcm9kdWNlZCBieSB0aGUgdHJhbnNhY3Rpb25zLCBhbmQgbm90aWZ5IHZpZXcgcGx1Z2lucyBvZiB0aGVcbiAgICBjaGFuZ2UuIFlvdSBzaG91bGQgdXN1YWxseSBjYWxsXG4gICAgW2BkaXNwYXRjaGBdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jdmlldy5FZGl0b3JWaWV3LmRpc3BhdGNoKSBpbnN0ZWFkLCB3aGljaCB1c2VzIHRoaXNcbiAgICBhcyBhIHByaW1pdGl2ZS5cbiAgICAqL1xuICAgIHVwZGF0ZSh0cmFuc2FjdGlvbnMpIHtcbiAgICAgICAgaWYgKHRoaXMudXBkYXRlU3RhdGUgIT0gMCAvKiBVcGRhdGVTdGF0ZS5JZGxlICovKVxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQ2FsbHMgdG8gRWRpdG9yVmlldy51cGRhdGUgYXJlIG5vdCBhbGxvd2VkIHdoaWxlIGFuIHVwZGF0ZSBpcyBpbiBwcm9ncmVzc1wiKTtcbiAgICAgICAgbGV0IHJlZHJhd24gPSBmYWxzZSwgYXR0cnNDaGFuZ2VkID0gZmFsc2UsIHVwZGF0ZTtcbiAgICAgICAgbGV0IHN0YXRlID0gdGhpcy5zdGF0ZTtcbiAgICAgICAgZm9yIChsZXQgdHIgb2YgdHJhbnNhY3Rpb25zKSB7XG4gICAgICAgICAgICBpZiAodHIuc3RhcnRTdGF0ZSAhPSBzdGF0ZSlcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcihcIlRyeWluZyB0byB1cGRhdGUgc3RhdGUgd2l0aCBhIHRyYW5zYWN0aW9uIHRoYXQgZG9lc24ndCBzdGFydCBmcm9tIHRoZSBwcmV2aW91cyBzdGF0ZS5cIik7XG4gICAgICAgICAgICBzdGF0ZSA9IHRyLnN0YXRlO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmRlc3Ryb3llZCkge1xuICAgICAgICAgICAgdGhpcy52aWV3U3RhdGUuc3RhdGUgPSBzdGF0ZTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBsZXQgZm9jdXMgPSB0aGlzLmhhc0ZvY3VzLCBmb2N1c0ZsYWcgPSAwLCBkaXNwYXRjaEZvY3VzID0gbnVsbDtcbiAgICAgICAgaWYgKHRyYW5zYWN0aW9ucy5zb21lKHRyID0+IHRyLmFubm90YXRpb24oaXNGb2N1c0NoYW5nZSkpKSB7XG4gICAgICAgICAgICB0aGlzLmlucHV0U3RhdGUubm90aWZpZWRGb2N1c2VkID0gZm9jdXM7XG4gICAgICAgICAgICAvLyBJZiBhIGZvY3VzLWNoYW5nZSB0cmFuc2FjdGlvbiBpcyBiZWluZyBkaXNwYXRjaGVkLCBzZXQgdGhpcyB1cGRhdGUgZmxhZy5cbiAgICAgICAgICAgIGZvY3VzRmxhZyA9IDEgLyogVXBkYXRlRmxhZy5Gb2N1cyAqLztcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChmb2N1cyAhPSB0aGlzLmlucHV0U3RhdGUubm90aWZpZWRGb2N1c2VkKSB7XG4gICAgICAgICAgICB0aGlzLmlucHV0U3RhdGUubm90aWZpZWRGb2N1c2VkID0gZm9jdXM7XG4gICAgICAgICAgICAvLyBTY2hlZHVsZSBhIHNlcGFyYXRlIGZvY3VzIHRyYW5zYWN0aW9uIGlmIG5lY2Vzc2FyeSwgb3RoZXJ3aXNlXG4gICAgICAgICAgICAvLyBhZGQgYSBmbGFnIHRvIHRoaXMgdXBkYXRlXG4gICAgICAgICAgICBkaXNwYXRjaEZvY3VzID0gZm9jdXNDaGFuZ2VUcmFuc2FjdGlvbihzdGF0ZSwgZm9jdXMpO1xuICAgICAgICAgICAgaWYgKCFkaXNwYXRjaEZvY3VzKVxuICAgICAgICAgICAgICAgIGZvY3VzRmxhZyA9IDEgLyogVXBkYXRlRmxhZy5Gb2N1cyAqLztcbiAgICAgICAgfVxuICAgICAgICAvLyBJZiB0aGVyZSB3YXMgYSBwZW5kaW5nIERPTSBjaGFuZ2UsIGVhZ2VybHkgcmVhZCBpdCBhbmQgdHJ5IHRvXG4gICAgICAgIC8vIGFwcGx5IGl0IGFmdGVyIHRoZSBnaXZlbiB0cmFuc2FjdGlvbnMuXG4gICAgICAgIGxldCBwZW5kaW5nS2V5ID0gdGhpcy5vYnNlcnZlci5kZWxheWVkQW5kcm9pZEtleSwgZG9tQ2hhbmdlID0gbnVsbDtcbiAgICAgICAgaWYgKHBlbmRpbmdLZXkpIHtcbiAgICAgICAgICAgIHRoaXMub2JzZXJ2ZXIuY2xlYXJEZWxheWVkQW5kcm9pZEtleSgpO1xuICAgICAgICAgICAgZG9tQ2hhbmdlID0gdGhpcy5vYnNlcnZlci5yZWFkQ2hhbmdlKCk7XG4gICAgICAgICAgICAvLyBPbmx5IHRyeSB0byBhcHBseSBET00gY2hhbmdlcyBpZiB0aGUgdHJhbnNhY3Rpb25zIGRpZG4ndFxuICAgICAgICAgICAgLy8gY2hhbmdlIHRoZSBkb2Mgb3Igc2VsZWN0aW9uLlxuICAgICAgICAgICAgaWYgKGRvbUNoYW5nZSAmJiAhdGhpcy5zdGF0ZS5kb2MuZXEoc3RhdGUuZG9jKSB8fCAhdGhpcy5zdGF0ZS5zZWxlY3Rpb24uZXEoc3RhdGUuc2VsZWN0aW9uKSlcbiAgICAgICAgICAgICAgICBkb21DaGFuZ2UgPSBudWxsO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5vYnNlcnZlci5jbGVhcigpO1xuICAgICAgICB9XG4gICAgICAgIC8vIFdoZW4gdGhlIHBocmFzZXMgY2hhbmdlLCByZWRyYXcgdGhlIGVkaXRvclxuICAgICAgICBpZiAoc3RhdGUuZmFjZXQoRWRpdG9yU3RhdGUucGhyYXNlcykgIT0gdGhpcy5zdGF0ZS5mYWNldChFZGl0b3JTdGF0ZS5waHJhc2VzKSlcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnNldFN0YXRlKHN0YXRlKTtcbiAgICAgICAgdXBkYXRlID0gVmlld1VwZGF0ZS5jcmVhdGUodGhpcywgc3RhdGUsIHRyYW5zYWN0aW9ucyk7XG4gICAgICAgIHVwZGF0ZS5mbGFncyB8PSBmb2N1c0ZsYWc7XG4gICAgICAgIGxldCBzY3JvbGxUYXJnZXQgPSB0aGlzLnZpZXdTdGF0ZS5zY3JvbGxUYXJnZXQ7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZVN0YXRlID0gMiAvKiBVcGRhdGVTdGF0ZS5VcGRhdGluZyAqLztcbiAgICAgICAgICAgIGZvciAobGV0IHRyIG9mIHRyYW5zYWN0aW9ucykge1xuICAgICAgICAgICAgICAgIGlmIChzY3JvbGxUYXJnZXQpXG4gICAgICAgICAgICAgICAgICAgIHNjcm9sbFRhcmdldCA9IHNjcm9sbFRhcmdldC5tYXAodHIuY2hhbmdlcyk7XG4gICAgICAgICAgICAgICAgaWYgKHRyLnNjcm9sbEludG9WaWV3KSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCB7IG1haW4gfSA9IHRyLnN0YXRlLnNlbGVjdGlvbjtcbiAgICAgICAgICAgICAgICAgICAgc2Nyb2xsVGFyZ2V0ID0gbmV3IFNjcm9sbFRhcmdldChtYWluLmVtcHR5ID8gbWFpbiA6IEVkaXRvclNlbGVjdGlvbi5jdXJzb3IobWFpbi5oZWFkLCBtYWluLmhlYWQgPiBtYWluLmFuY2hvciA/IC0xIDogMSkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBmb3IgKGxldCBlIG9mIHRyLmVmZmVjdHMpXG4gICAgICAgICAgICAgICAgICAgIGlmIChlLmlzKHNjcm9sbEludG9WaWV3KSlcbiAgICAgICAgICAgICAgICAgICAgICAgIHNjcm9sbFRhcmdldCA9IGUudmFsdWUuY2xpcCh0aGlzLnN0YXRlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMudmlld1N0YXRlLnVwZGF0ZSh1cGRhdGUsIHNjcm9sbFRhcmdldCk7XG4gICAgICAgICAgICB0aGlzLmJpZGlDYWNoZSA9IENhY2hlZE9yZGVyLnVwZGF0ZSh0aGlzLmJpZGlDYWNoZSwgdXBkYXRlLmNoYW5nZXMpO1xuICAgICAgICAgICAgaWYgKCF1cGRhdGUuZW1wdHkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZVBsdWdpbnModXBkYXRlKTtcbiAgICAgICAgICAgICAgICB0aGlzLmlucHV0U3RhdGUudXBkYXRlKHVwZGF0ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZWRyYXduID0gdGhpcy5kb2NWaWV3LnVwZGF0ZSh1cGRhdGUpO1xuICAgICAgICAgICAgaWYgKHRoaXMuc3RhdGUuZmFjZXQoc3R5bGVNb2R1bGUpICE9IHRoaXMuc3R5bGVNb2R1bGVzKVxuICAgICAgICAgICAgICAgIHRoaXMubW91bnRTdHlsZXMoKTtcbiAgICAgICAgICAgIGF0dHJzQ2hhbmdlZCA9IHRoaXMudXBkYXRlQXR0cnMoKTtcbiAgICAgICAgICAgIHRoaXMuc2hvd0Fubm91bmNlbWVudHModHJhbnNhY3Rpb25zKTtcbiAgICAgICAgICAgIHRoaXMuZG9jVmlldy51cGRhdGVTZWxlY3Rpb24ocmVkcmF3biwgdHJhbnNhY3Rpb25zLnNvbWUodHIgPT4gdHIuaXNVc2VyRXZlbnQoXCJzZWxlY3QucG9pbnRlclwiKSkpO1xuICAgICAgICB9XG4gICAgICAgIGZpbmFsbHkge1xuICAgICAgICAgICAgdGhpcy51cGRhdGVTdGF0ZSA9IDAgLyogVXBkYXRlU3RhdGUuSWRsZSAqLztcbiAgICAgICAgfVxuICAgICAgICBpZiAodXBkYXRlLnN0YXJ0U3RhdGUuZmFjZXQodGhlbWUpICE9IHVwZGF0ZS5zdGF0ZS5mYWNldCh0aGVtZSkpXG4gICAgICAgICAgICB0aGlzLnZpZXdTdGF0ZS5tdXN0TWVhc3VyZUNvbnRlbnQgPSB0cnVlO1xuICAgICAgICBpZiAocmVkcmF3biB8fCBhdHRyc0NoYW5nZWQgfHwgc2Nyb2xsVGFyZ2V0IHx8IHRoaXMudmlld1N0YXRlLm11c3RFbmZvcmNlQ3Vyc29yQXNzb2MgfHwgdGhpcy52aWV3U3RhdGUubXVzdE1lYXN1cmVDb250ZW50KVxuICAgICAgICAgICAgdGhpcy5yZXF1ZXN0TWVhc3VyZSgpO1xuICAgICAgICBpZiAocmVkcmF3bilcbiAgICAgICAgICAgIHRoaXMuZG9jVmlld1VwZGF0ZSgpO1xuICAgICAgICBpZiAoIXVwZGF0ZS5lbXB0eSlcbiAgICAgICAgICAgIGZvciAobGV0IGxpc3RlbmVyIG9mIHRoaXMuc3RhdGUuZmFjZXQodXBkYXRlTGlzdGVuZXIpKSB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgbGlzdGVuZXIodXBkYXRlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgbG9nRXhjZXB0aW9uKHRoaXMuc3RhdGUsIGUsIFwidXBkYXRlIGxpc3RlbmVyXCIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgaWYgKGRpc3BhdGNoRm9jdXMgfHwgZG9tQ2hhbmdlKVxuICAgICAgICAgICAgUHJvbWlzZS5yZXNvbHZlKCkudGhlbigoKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKGRpc3BhdGNoRm9jdXMgJiYgdGhpcy5zdGF0ZSA9PSBkaXNwYXRjaEZvY3VzLnN0YXJ0U3RhdGUpXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGlzcGF0Y2goZGlzcGF0Y2hGb2N1cyk7XG4gICAgICAgICAgICAgICAgaWYgKGRvbUNoYW5nZSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWFwcGx5RE9NQ2hhbmdlKHRoaXMsIGRvbUNoYW5nZSkgJiYgcGVuZGluZ0tleS5mb3JjZSlcbiAgICAgICAgICAgICAgICAgICAgICAgIGRpc3BhdGNoS2V5KHRoaXMuY29udGVudERPTSwgcGVuZGluZ0tleS5rZXksIHBlbmRpbmdLZXkua2V5Q29kZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgIFJlc2V0IHRoZSB2aWV3IHRvIHRoZSBnaXZlbiBzdGF0ZS4gKFRoaXMgd2lsbCBjYXVzZSB0aGUgZW50aXJlXG4gICAgZG9jdW1lbnQgdG8gYmUgcmVkcmF3biBhbmQgYWxsIHZpZXcgcGx1Z2lucyB0byBiZSByZWluaXRpYWxpemVkLFxuICAgIHNvIHlvdSBzaG91bGQgcHJvYmFibHkgb25seSB1c2UgaXQgd2hlbiB0aGUgbmV3IHN0YXRlIGlzbid0XG4gICAgZGVyaXZlZCBmcm9tIHRoZSBvbGQgc3RhdGUuIE90aGVyd2lzZSwgdXNlXG4gICAgW2BkaXNwYXRjaGBdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jdmlldy5FZGl0b3JWaWV3LmRpc3BhdGNoKSBpbnN0ZWFkLilcbiAgICAqL1xuICAgIHNldFN0YXRlKG5ld1N0YXRlKSB7XG4gICAgICAgIGlmICh0aGlzLnVwZGF0ZVN0YXRlICE9IDAgLyogVXBkYXRlU3RhdGUuSWRsZSAqLylcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkNhbGxzIHRvIEVkaXRvclZpZXcuc2V0U3RhdGUgYXJlIG5vdCBhbGxvd2VkIHdoaWxlIGFuIHVwZGF0ZSBpcyBpbiBwcm9ncmVzc1wiKTtcbiAgICAgICAgaWYgKHRoaXMuZGVzdHJveWVkKSB7XG4gICAgICAgICAgICB0aGlzLnZpZXdTdGF0ZS5zdGF0ZSA9IG5ld1N0YXRlO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMudXBkYXRlU3RhdGUgPSAyIC8qIFVwZGF0ZVN0YXRlLlVwZGF0aW5nICovO1xuICAgICAgICBsZXQgaGFkRm9jdXMgPSB0aGlzLmhhc0ZvY3VzO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgZm9yIChsZXQgcGx1Z2luIG9mIHRoaXMucGx1Z2lucylcbiAgICAgICAgICAgICAgICBwbHVnaW4uZGVzdHJveSh0aGlzKTtcbiAgICAgICAgICAgIHRoaXMudmlld1N0YXRlID0gbmV3IFZpZXdTdGF0ZShuZXdTdGF0ZSk7XG4gICAgICAgICAgICB0aGlzLnBsdWdpbnMgPSBuZXdTdGF0ZS5mYWNldCh2aWV3UGx1Z2luKS5tYXAoc3BlYyA9PiBuZXcgUGx1Z2luSW5zdGFuY2Uoc3BlYykpO1xuICAgICAgICAgICAgdGhpcy5wbHVnaW5NYXAuY2xlYXIoKTtcbiAgICAgICAgICAgIGZvciAobGV0IHBsdWdpbiBvZiB0aGlzLnBsdWdpbnMpXG4gICAgICAgICAgICAgICAgcGx1Z2luLnVwZGF0ZSh0aGlzKTtcbiAgICAgICAgICAgIHRoaXMuZG9jVmlldy5kZXN0cm95KCk7XG4gICAgICAgICAgICB0aGlzLmRvY1ZpZXcgPSBuZXcgRG9jVmlldyh0aGlzKTtcbiAgICAgICAgICAgIHRoaXMuaW5wdXRTdGF0ZS5lbnN1cmVIYW5kbGVycyh0aGlzLnBsdWdpbnMpO1xuICAgICAgICAgICAgdGhpcy5tb3VudFN0eWxlcygpO1xuICAgICAgICAgICAgdGhpcy51cGRhdGVBdHRycygpO1xuICAgICAgICAgICAgdGhpcy5iaWRpQ2FjaGUgPSBbXTtcbiAgICAgICAgfVxuICAgICAgICBmaW5hbGx5IHtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlU3RhdGUgPSAwIC8qIFVwZGF0ZVN0YXRlLklkbGUgKi87XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGhhZEZvY3VzKVxuICAgICAgICAgICAgdGhpcy5mb2N1cygpO1xuICAgICAgICB0aGlzLnJlcXVlc3RNZWFzdXJlKCk7XG4gICAgfVxuICAgIHVwZGF0ZVBsdWdpbnModXBkYXRlKSB7XG4gICAgICAgIGxldCBwcmV2U3BlY3MgPSB1cGRhdGUuc3RhcnRTdGF0ZS5mYWNldCh2aWV3UGx1Z2luKSwgc3BlY3MgPSB1cGRhdGUuc3RhdGUuZmFjZXQodmlld1BsdWdpbik7XG4gICAgICAgIGlmIChwcmV2U3BlY3MgIT0gc3BlY3MpIHtcbiAgICAgICAgICAgIGxldCBuZXdQbHVnaW5zID0gW107XG4gICAgICAgICAgICBmb3IgKGxldCBzcGVjIG9mIHNwZWNzKSB7XG4gICAgICAgICAgICAgICAgbGV0IGZvdW5kID0gcHJldlNwZWNzLmluZGV4T2Yoc3BlYyk7XG4gICAgICAgICAgICAgICAgaWYgKGZvdW5kIDwgMCkge1xuICAgICAgICAgICAgICAgICAgICBuZXdQbHVnaW5zLnB1c2gobmV3IFBsdWdpbkluc3RhbmNlKHNwZWMpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBwbHVnaW4gPSB0aGlzLnBsdWdpbnNbZm91bmRdO1xuICAgICAgICAgICAgICAgICAgICBwbHVnaW4ubXVzdFVwZGF0ZSA9IHVwZGF0ZTtcbiAgICAgICAgICAgICAgICAgICAgbmV3UGx1Z2lucy5wdXNoKHBsdWdpbik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZm9yIChsZXQgcGx1Z2luIG9mIHRoaXMucGx1Z2lucylcbiAgICAgICAgICAgICAgICBpZiAocGx1Z2luLm11c3RVcGRhdGUgIT0gdXBkYXRlKVxuICAgICAgICAgICAgICAgICAgICBwbHVnaW4uZGVzdHJveSh0aGlzKTtcbiAgICAgICAgICAgIHRoaXMucGx1Z2lucyA9IG5ld1BsdWdpbnM7XG4gICAgICAgICAgICB0aGlzLnBsdWdpbk1hcC5jbGVhcigpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgZm9yIChsZXQgcCBvZiB0aGlzLnBsdWdpbnMpXG4gICAgICAgICAgICAgICAgcC5tdXN0VXBkYXRlID0gdXBkYXRlO1xuICAgICAgICB9XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5wbHVnaW5zLmxlbmd0aDsgaSsrKVxuICAgICAgICAgICAgdGhpcy5wbHVnaW5zW2ldLnVwZGF0ZSh0aGlzKTtcbiAgICAgICAgaWYgKHByZXZTcGVjcyAhPSBzcGVjcylcbiAgICAgICAgICAgIHRoaXMuaW5wdXRTdGF0ZS5lbnN1cmVIYW5kbGVycyh0aGlzLnBsdWdpbnMpO1xuICAgIH1cbiAgICBkb2NWaWV3VXBkYXRlKCkge1xuICAgICAgICBmb3IgKGxldCBwbHVnaW4gb2YgdGhpcy5wbHVnaW5zKSB7XG4gICAgICAgICAgICBsZXQgdmFsID0gcGx1Z2luLnZhbHVlO1xuICAgICAgICAgICAgaWYgKHZhbCAmJiB2YWwuZG9jVmlld1VwZGF0ZSkge1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIHZhbC5kb2NWaWV3VXBkYXRlKHRoaXMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgICAgICBsb2dFeGNlcHRpb24odGhpcy5zdGF0ZSwgZSwgXCJkb2MgdmlldyB1cGRhdGUgbGlzdGVuZXJcIik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgIEBpbnRlcm5hbFxuICAgICovXG4gICAgbWVhc3VyZShmbHVzaCA9IHRydWUpIHtcbiAgICAgICAgaWYgKHRoaXMuZGVzdHJveWVkKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICBpZiAodGhpcy5tZWFzdXJlU2NoZWR1bGVkID4gLTEpXG4gICAgICAgICAgICB0aGlzLndpbi5jYW5jZWxBbmltYXRpb25GcmFtZSh0aGlzLm1lYXN1cmVTY2hlZHVsZWQpO1xuICAgICAgICBpZiAodGhpcy5vYnNlcnZlci5kZWxheWVkQW5kcm9pZEtleSkge1xuICAgICAgICAgICAgdGhpcy5tZWFzdXJlU2NoZWR1bGVkID0gLTE7XG4gICAgICAgICAgICB0aGlzLnJlcXVlc3RNZWFzdXJlKCk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5tZWFzdXJlU2NoZWR1bGVkID0gMDsgLy8gUHJldmVudCByZXF1ZXN0TWVhc3VyZSBjYWxscyBmcm9tIHNjaGVkdWxpbmcgYW5vdGhlciBhbmltYXRpb24gZnJhbWVcbiAgICAgICAgaWYgKGZsdXNoKVxuICAgICAgICAgICAgdGhpcy5vYnNlcnZlci5mb3JjZUZsdXNoKCk7XG4gICAgICAgIGxldCB1cGRhdGVkID0gbnVsbDtcbiAgICAgICAgbGV0IHNET00gPSB0aGlzLnNjcm9sbERPTSwgc2Nyb2xsVG9wID0gc0RPTS5zY3JvbGxUb3AgKiB0aGlzLnNjYWxlWTtcbiAgICAgICAgbGV0IHsgc2Nyb2xsQW5jaG9yUG9zLCBzY3JvbGxBbmNob3JIZWlnaHQgfSA9IHRoaXMudmlld1N0YXRlO1xuICAgICAgICBpZiAoTWF0aC5hYnMoc2Nyb2xsVG9wIC0gdGhpcy52aWV3U3RhdGUuc2Nyb2xsVG9wKSA+IDEpXG4gICAgICAgICAgICBzY3JvbGxBbmNob3JIZWlnaHQgPSAtMTtcbiAgICAgICAgdGhpcy52aWV3U3RhdGUuc2Nyb2xsQW5jaG9ySGVpZ2h0ID0gLTE7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDs7IGkrKykge1xuICAgICAgICAgICAgICAgIGlmIChzY3JvbGxBbmNob3JIZWlnaHQgPCAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChpc1Njcm9sbGVkVG9Cb3R0b20oc0RPTSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNjcm9sbEFuY2hvclBvcyA9IC0xO1xuICAgICAgICAgICAgICAgICAgICAgICAgc2Nyb2xsQW5jaG9ySGVpZ2h0ID0gdGhpcy52aWV3U3RhdGUuaGVpZ2h0TWFwLmhlaWdodDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBibG9jayA9IHRoaXMudmlld1N0YXRlLnNjcm9sbEFuY2hvckF0KHNjcm9sbFRvcCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBzY3JvbGxBbmNob3JQb3MgPSBibG9jay5mcm9tO1xuICAgICAgICAgICAgICAgICAgICAgICAgc2Nyb2xsQW5jaG9ySGVpZ2h0ID0gYmxvY2sudG9wO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlU3RhdGUgPSAxIC8qIFVwZGF0ZVN0YXRlLk1lYXN1cmluZyAqLztcbiAgICAgICAgICAgICAgICBsZXQgY2hhbmdlZCA9IHRoaXMudmlld1N0YXRlLm1lYXN1cmUodGhpcyk7XG4gICAgICAgICAgICAgICAgaWYgKCFjaGFuZ2VkICYmICF0aGlzLm1lYXN1cmVSZXF1ZXN0cy5sZW5ndGggJiYgdGhpcy52aWV3U3RhdGUuc2Nyb2xsVGFyZ2V0ID09IG51bGwpXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGlmIChpID4gNSkge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4odGhpcy5tZWFzdXJlUmVxdWVzdHMubGVuZ3RoXG4gICAgICAgICAgICAgICAgICAgICAgICA/IFwiTWVhc3VyZSBsb29wIHJlc3RhcnRlZCBtb3JlIHRoYW4gNSB0aW1lc1wiXG4gICAgICAgICAgICAgICAgICAgICAgICA6IFwiVmlld3BvcnQgZmFpbGVkIHRvIHN0YWJpbGl6ZVwiKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGxldCBtZWFzdXJpbmcgPSBbXTtcbiAgICAgICAgICAgICAgICAvLyBPbmx5IHJ1biBtZWFzdXJlIHJlcXVlc3RzIGluIHRoaXMgY3ljbGUgd2hlbiB0aGUgdmlld3BvcnQgZGlkbid0IGNoYW5nZVxuICAgICAgICAgICAgICAgIGlmICghKGNoYW5nZWQgJiA0IC8qIFVwZGF0ZUZsYWcuVmlld3BvcnQgKi8pKVxuICAgICAgICAgICAgICAgICAgICBbdGhpcy5tZWFzdXJlUmVxdWVzdHMsIG1lYXN1cmluZ10gPSBbbWVhc3VyaW5nLCB0aGlzLm1lYXN1cmVSZXF1ZXN0c107XG4gICAgICAgICAgICAgICAgbGV0IG1lYXN1cmVkID0gbWVhc3VyaW5nLm1hcChtID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBtLnJlYWQodGhpcyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvZ0V4Y2VwdGlvbih0aGlzLnN0YXRlLCBlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBCYWRNZWFzdXJlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgbGV0IHVwZGF0ZSA9IFZpZXdVcGRhdGUuY3JlYXRlKHRoaXMsIHRoaXMuc3RhdGUsIFtdKSwgcmVkcmF3biA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIHVwZGF0ZS5mbGFncyB8PSBjaGFuZ2VkO1xuICAgICAgICAgICAgICAgIGlmICghdXBkYXRlZClcbiAgICAgICAgICAgICAgICAgICAgdXBkYXRlZCA9IHVwZGF0ZTtcbiAgICAgICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgICAgIHVwZGF0ZWQuZmxhZ3MgfD0gY2hhbmdlZDtcbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZVN0YXRlID0gMiAvKiBVcGRhdGVTdGF0ZS5VcGRhdGluZyAqLztcbiAgICAgICAgICAgICAgICBpZiAoIXVwZGF0ZS5lbXB0eSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZVBsdWdpbnModXBkYXRlKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pbnB1dFN0YXRlLnVwZGF0ZSh1cGRhdGUpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUF0dHJzKCk7XG4gICAgICAgICAgICAgICAgICAgIHJlZHJhd24gPSB0aGlzLmRvY1ZpZXcudXBkYXRlKHVwZGF0ZSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChyZWRyYXduKVxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kb2NWaWV3VXBkYXRlKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbWVhc3VyaW5nLmxlbmd0aDsgaSsrKVxuICAgICAgICAgICAgICAgICAgICBpZiAobWVhc3VyZWRbaV0gIT0gQmFkTWVhc3VyZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgbSA9IG1lYXN1cmluZ1tpXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobS53cml0ZSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbS53cml0ZShtZWFzdXJlZFtpXSwgdGhpcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvZ0V4Y2VwdGlvbih0aGlzLnN0YXRlLCBlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChyZWRyYXduKVxuICAgICAgICAgICAgICAgICAgICB0aGlzLmRvY1ZpZXcudXBkYXRlU2VsZWN0aW9uKHRydWUpO1xuICAgICAgICAgICAgICAgIGlmICghdXBkYXRlLnZpZXdwb3J0Q2hhbmdlZCAmJiB0aGlzLm1lYXN1cmVSZXF1ZXN0cy5sZW5ndGggPT0gMCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy52aWV3U3RhdGUuZWRpdG9ySGVpZ2h0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy52aWV3U3RhdGUuc2Nyb2xsVGFyZ2V0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kb2NWaWV3LnNjcm9sbEludG9WaWV3KHRoaXMudmlld1N0YXRlLnNjcm9sbFRhcmdldCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy52aWV3U3RhdGUuc2Nyb2xsVGFyZ2V0ID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzY3JvbGxBbmNob3JIZWlnaHQgPSAtMTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBuZXdBbmNob3JIZWlnaHQgPSBzY3JvbGxBbmNob3JQb3MgPCAwID8gdGhpcy52aWV3U3RhdGUuaGVpZ2h0TWFwLmhlaWdodCA6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudmlld1N0YXRlLmxpbmVCbG9ja0F0KHNjcm9sbEFuY2hvclBvcykudG9wO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBkaWZmID0gbmV3QW5jaG9ySGVpZ2h0IC0gc2Nyb2xsQW5jaG9ySGVpZ2h0O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkaWZmID4gMSB8fCBkaWZmIDwgLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2Nyb2xsVG9wID0gc2Nyb2xsVG9wICsgZGlmZjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc0RPTS5zY3JvbGxUb3AgPSBzY3JvbGxUb3AgLyB0aGlzLnNjYWxlWTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2Nyb2xsQW5jaG9ySGVpZ2h0ID0gLTE7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZmluYWxseSB7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZVN0YXRlID0gMCAvKiBVcGRhdGVTdGF0ZS5JZGxlICovO1xuICAgICAgICAgICAgdGhpcy5tZWFzdXJlU2NoZWR1bGVkID0gLTE7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHVwZGF0ZWQgJiYgIXVwZGF0ZWQuZW1wdHkpXG4gICAgICAgICAgICBmb3IgKGxldCBsaXN0ZW5lciBvZiB0aGlzLnN0YXRlLmZhY2V0KHVwZGF0ZUxpc3RlbmVyKSlcbiAgICAgICAgICAgICAgICBsaXN0ZW5lcih1cGRhdGVkKTtcbiAgICB9XG4gICAgLyoqXG4gICAgR2V0IHRoZSBDU1MgY2xhc3NlcyBmb3IgdGhlIGN1cnJlbnRseSBhY3RpdmUgZWRpdG9yIHRoZW1lcy5cbiAgICAqL1xuICAgIGdldCB0aGVtZUNsYXNzZXMoKSB7XG4gICAgICAgIHJldHVybiBiYXNlVGhlbWVJRCArIFwiIFwiICtcbiAgICAgICAgICAgICh0aGlzLnN0YXRlLmZhY2V0KGRhcmtUaGVtZSkgPyBiYXNlRGFya0lEIDogYmFzZUxpZ2h0SUQpICsgXCIgXCIgK1xuICAgICAgICAgICAgdGhpcy5zdGF0ZS5mYWNldCh0aGVtZSk7XG4gICAgfVxuICAgIHVwZGF0ZUF0dHJzKCkge1xuICAgICAgICBsZXQgZWRpdG9yQXR0cnMgPSBhdHRyc0Zyb21GYWNldCh0aGlzLCBlZGl0b3JBdHRyaWJ1dGVzLCB7XG4gICAgICAgICAgICBjbGFzczogXCJjbS1lZGl0b3JcIiArICh0aGlzLmhhc0ZvY3VzID8gXCIgY20tZm9jdXNlZCBcIiA6IFwiIFwiKSArIHRoaXMudGhlbWVDbGFzc2VzXG4gICAgICAgIH0pO1xuICAgICAgICBsZXQgY29udGVudEF0dHJzID0ge1xuICAgICAgICAgICAgc3BlbGxjaGVjazogXCJmYWxzZVwiLFxuICAgICAgICAgICAgYXV0b2NvcnJlY3Q6IFwib2ZmXCIsXG4gICAgICAgICAgICBhdXRvY2FwaXRhbGl6ZTogXCJvZmZcIixcbiAgICAgICAgICAgIHdyaXRpbmdzdWdnZXN0aW9uczogXCJmYWxzZVwiLFxuICAgICAgICAgICAgdHJhbnNsYXRlOiBcIm5vXCIsXG4gICAgICAgICAgICBjb250ZW50ZWRpdGFibGU6ICF0aGlzLnN0YXRlLmZhY2V0KGVkaXRhYmxlKSA/IFwiZmFsc2VcIiA6IFwidHJ1ZVwiLFxuICAgICAgICAgICAgY2xhc3M6IFwiY20tY29udGVudFwiLFxuICAgICAgICAgICAgc3R5bGU6IGAke2Jyb3dzZXIudGFiU2l6ZX06ICR7dGhpcy5zdGF0ZS50YWJTaXplfWAsXG4gICAgICAgICAgICByb2xlOiBcInRleHRib3hcIixcbiAgICAgICAgICAgIFwiYXJpYS1tdWx0aWxpbmVcIjogXCJ0cnVlXCJcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKHRoaXMuc3RhdGUucmVhZE9ubHkpXG4gICAgICAgICAgICBjb250ZW50QXR0cnNbXCJhcmlhLXJlYWRvbmx5XCJdID0gXCJ0cnVlXCI7XG4gICAgICAgIGF0dHJzRnJvbUZhY2V0KHRoaXMsIGNvbnRlbnRBdHRyaWJ1dGVzLCBjb250ZW50QXR0cnMpO1xuICAgICAgICBsZXQgY2hhbmdlZCA9IHRoaXMub2JzZXJ2ZXIuaWdub3JlKCgpID0+IHtcbiAgICAgICAgICAgIGxldCBjaGFuZ2VkQ29udGVudCA9IHVwZGF0ZUF0dHJzKHRoaXMuY29udGVudERPTSwgdGhpcy5jb250ZW50QXR0cnMsIGNvbnRlbnRBdHRycyk7XG4gICAgICAgICAgICBsZXQgY2hhbmdlZEVkaXRvciA9IHVwZGF0ZUF0dHJzKHRoaXMuZG9tLCB0aGlzLmVkaXRvckF0dHJzLCBlZGl0b3JBdHRycyk7XG4gICAgICAgICAgICByZXR1cm4gY2hhbmdlZENvbnRlbnQgfHwgY2hhbmdlZEVkaXRvcjtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuZWRpdG9yQXR0cnMgPSBlZGl0b3JBdHRycztcbiAgICAgICAgdGhpcy5jb250ZW50QXR0cnMgPSBjb250ZW50QXR0cnM7XG4gICAgICAgIHJldHVybiBjaGFuZ2VkO1xuICAgIH1cbiAgICBzaG93QW5ub3VuY2VtZW50cyh0cnMpIHtcbiAgICAgICAgbGV0IGZpcnN0ID0gdHJ1ZTtcbiAgICAgICAgZm9yIChsZXQgdHIgb2YgdHJzKVxuICAgICAgICAgICAgZm9yIChsZXQgZWZmZWN0IG9mIHRyLmVmZmVjdHMpXG4gICAgICAgICAgICAgICAgaWYgKGVmZmVjdC5pcyhFZGl0b3JWaWV3LmFubm91bmNlKSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoZmlyc3QpXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmFubm91bmNlRE9NLnRleHRDb250ZW50ID0gXCJcIjtcbiAgICAgICAgICAgICAgICAgICAgZmlyc3QgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGRpdiA9IHRoaXMuYW5ub3VuY2VET00uYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKSk7XG4gICAgICAgICAgICAgICAgICAgIGRpdi50ZXh0Q29udGVudCA9IGVmZmVjdC52YWx1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgfVxuICAgIG1vdW50U3R5bGVzKCkge1xuICAgICAgICB0aGlzLnN0eWxlTW9kdWxlcyA9IHRoaXMuc3RhdGUuZmFjZXQoc3R5bGVNb2R1bGUpO1xuICAgICAgICBsZXQgbm9uY2UgPSB0aGlzLnN0YXRlLmZhY2V0KEVkaXRvclZpZXcuY3NwTm9uY2UpO1xuICAgICAgICBTdHlsZU1vZHVsZS5tb3VudCh0aGlzLnJvb3QsIHRoaXMuc3R5bGVNb2R1bGVzLmNvbmNhdChiYXNlVGhlbWUkMSkucmV2ZXJzZSgpLCBub25jZSA/IHsgbm9uY2UgfSA6IHVuZGVmaW5lZCk7XG4gICAgfVxuICAgIHJlYWRNZWFzdXJlZCgpIHtcbiAgICAgICAgaWYgKHRoaXMudXBkYXRlU3RhdGUgPT0gMiAvKiBVcGRhdGVTdGF0ZS5VcGRhdGluZyAqLylcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlJlYWRpbmcgdGhlIGVkaXRvciBsYXlvdXQgaXNuJ3QgYWxsb3dlZCBkdXJpbmcgYW4gdXBkYXRlXCIpO1xuICAgICAgICBpZiAodGhpcy51cGRhdGVTdGF0ZSA9PSAwIC8qIFVwZGF0ZVN0YXRlLklkbGUgKi8gJiYgdGhpcy5tZWFzdXJlU2NoZWR1bGVkID4gLTEpXG4gICAgICAgICAgICB0aGlzLm1lYXN1cmUoZmFsc2UpO1xuICAgIH1cbiAgICAvKipcbiAgICBTY2hlZHVsZSBhIGxheW91dCBtZWFzdXJlbWVudCwgb3B0aW9uYWxseSBwcm92aWRpbmcgY2FsbGJhY2tzIHRvXG4gICAgZG8gY3VzdG9tIERPTSBtZWFzdXJpbmcgZm9sbG93ZWQgYnkgYSBET00gd3JpdGUgcGhhc2UuIFVzaW5nXG4gICAgdGhpcyBpcyBwcmVmZXJhYmxlIHJlYWRpbmcgRE9NIGxheW91dCBkaXJlY3RseSBmcm9tLCBmb3JcbiAgICBleGFtcGxlLCBhbiBldmVudCBoYW5kbGVyLCBiZWNhdXNlIGl0J2xsIG1ha2Ugc3VyZSBtZWFzdXJpbmcgYW5kXG4gICAgZHJhd2luZyBkb25lIGJ5IG90aGVyIGNvbXBvbmVudHMgaXMgc3luY2hyb25pemVkLCBhdm9pZGluZ1xuICAgIHVubmVjZXNzYXJ5IERPTSBsYXlvdXQgY29tcHV0YXRpb25zLlxuICAgICovXG4gICAgcmVxdWVzdE1lYXN1cmUocmVxdWVzdCkge1xuICAgICAgICBpZiAodGhpcy5tZWFzdXJlU2NoZWR1bGVkIDwgMClcbiAgICAgICAgICAgIHRoaXMubWVhc3VyZVNjaGVkdWxlZCA9IHRoaXMud2luLnJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB0aGlzLm1lYXN1cmUoKSk7XG4gICAgICAgIGlmIChyZXF1ZXN0KSB7XG4gICAgICAgICAgICBpZiAodGhpcy5tZWFzdXJlUmVxdWVzdHMuaW5kZXhPZihyZXF1ZXN0KSA+IC0xKVxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIGlmIChyZXF1ZXN0LmtleSAhPSBudWxsKVxuICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5tZWFzdXJlUmVxdWVzdHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMubWVhc3VyZVJlcXVlc3RzW2ldLmtleSA9PT0gcmVxdWVzdC5rZXkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubWVhc3VyZVJlcXVlc3RzW2ldID0gcmVxdWVzdDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMubWVhc3VyZVJlcXVlc3RzLnB1c2gocmVxdWVzdCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgR2V0IHRoZSB2YWx1ZSBvZiBhIHNwZWNpZmljIHBsdWdpbiwgaWYgcHJlc2VudC4gTm90ZSB0aGF0XG4gICAgcGx1Z2lucyB0aGF0IGNyYXNoIGNhbiBiZSBkcm9wcGVkIGZyb20gYSB2aWV3LCBzbyBldmVuIHdoZW4geW91XG4gICAga25vdyB5b3UgcmVnaXN0ZXJlZCBhIGdpdmVuIHBsdWdpbiwgaXQgaXMgcmVjb21tZW5kZWQgdG8gY2hlY2tcbiAgICB0aGUgcmV0dXJuIHZhbHVlIG9mIHRoaXMgbWV0aG9kLlxuICAgICovXG4gICAgcGx1Z2luKHBsdWdpbikge1xuICAgICAgICBsZXQga25vd24gPSB0aGlzLnBsdWdpbk1hcC5nZXQocGx1Z2luKTtcbiAgICAgICAgaWYgKGtub3duID09PSB1bmRlZmluZWQgfHwga25vd24gJiYga25vd24ucGx1Z2luICE9IHBsdWdpbilcbiAgICAgICAgICAgIHRoaXMucGx1Z2luTWFwLnNldChwbHVnaW4sIGtub3duID0gdGhpcy5wbHVnaW5zLmZpbmQocCA9PiBwLnBsdWdpbiA9PSBwbHVnaW4pIHx8IG51bGwpO1xuICAgICAgICByZXR1cm4ga25vd24gJiYga25vd24udXBkYXRlKHRoaXMpLnZhbHVlO1xuICAgIH1cbiAgICAvKipcbiAgICBUaGUgdG9wIHBvc2l0aW9uIG9mIHRoZSBkb2N1bWVudCwgaW4gc2NyZWVuIGNvb3JkaW5hdGVzLiBUaGlzXG4gICAgbWF5IGJlIG5lZ2F0aXZlIHdoZW4gdGhlIGVkaXRvciBpcyBzY3JvbGxlZCBkb3duLiBQb2ludHNcbiAgICBkaXJlY3RseSB0byB0aGUgdG9wIG9mIHRoZSBmaXJzdCBsaW5lLCBub3QgYWJvdmUgdGhlIHBhZGRpbmcuXG4gICAgKi9cbiAgICBnZXQgZG9jdW1lbnRUb3AoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNvbnRlbnRET00uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkudG9wICsgdGhpcy52aWV3U3RhdGUucGFkZGluZ1RvcDtcbiAgICB9XG4gICAgLyoqXG4gICAgUmVwb3J0cyB0aGUgcGFkZGluZyBhYm92ZSBhbmQgYmVsb3cgdGhlIGRvY3VtZW50LlxuICAgICovXG4gICAgZ2V0IGRvY3VtZW50UGFkZGluZygpIHtcbiAgICAgICAgcmV0dXJuIHsgdG9wOiB0aGlzLnZpZXdTdGF0ZS5wYWRkaW5nVG9wLCBib3R0b206IHRoaXMudmlld1N0YXRlLnBhZGRpbmdCb3R0b20gfTtcbiAgICB9XG4gICAgLyoqXG4gICAgSWYgdGhlIGVkaXRvciBpcyB0cmFuc2Zvcm1lZCB3aXRoIENTUywgdGhpcyBwcm92aWRlcyB0aGUgc2NhbGVcbiAgICBhbG9uZyB0aGUgWCBheGlzLiBPdGhlcndpc2UsIGl0IHdpbGwganVzdCBiZSAxLiBOb3RlIHRoYXRcbiAgICB0cmFuc2Zvcm1zIG90aGVyIHRoYW4gdHJhbnNsYXRpb24gYW5kIHNjYWxpbmcgYXJlIG5vdCBzdXBwb3J0ZWQuXG4gICAgKi9cbiAgICBnZXQgc2NhbGVYKCkgeyByZXR1cm4gdGhpcy52aWV3U3RhdGUuc2NhbGVYOyB9XG4gICAgLyoqXG4gICAgUHJvdmlkZSB0aGUgQ1NTIHRyYW5zZm9ybWVkIHNjYWxlIGFsb25nIHRoZSBZIGF4aXMuXG4gICAgKi9cbiAgICBnZXQgc2NhbGVZKCkgeyByZXR1cm4gdGhpcy52aWV3U3RhdGUuc2NhbGVZOyB9XG4gICAgLyoqXG4gICAgRmluZCB0aGUgdGV4dCBsaW5lIG9yIGJsb2NrIHdpZGdldCBhdCB0aGUgZ2l2ZW4gdmVydGljYWxcbiAgICBwb3NpdGlvbiAod2hpY2ggaXMgaW50ZXJwcmV0ZWQgYXMgcmVsYXRpdmUgdG8gdGhlIFt0b3Agb2YgdGhlXG4gICAgZG9jdW1lbnRdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jdmlldy5FZGl0b3JWaWV3LmRvY3VtZW50VG9wKSkuXG4gICAgKi9cbiAgICBlbGVtZW50QXRIZWlnaHQoaGVpZ2h0KSB7XG4gICAgICAgIHRoaXMucmVhZE1lYXN1cmVkKCk7XG4gICAgICAgIHJldHVybiB0aGlzLnZpZXdTdGF0ZS5lbGVtZW50QXRIZWlnaHQoaGVpZ2h0KTtcbiAgICB9XG4gICAgLyoqXG4gICAgRmluZCB0aGUgbGluZSBibG9jayAoc2VlXG4gICAgW2BsaW5lQmxvY2tBdGBdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jdmlldy5FZGl0b3JWaWV3LmxpbmVCbG9ja0F0KSkgYXQgdGhlIGdpdmVuXG4gICAgaGVpZ2h0LCBhZ2FpbiBpbnRlcnByZXRlZCByZWxhdGl2ZSB0byB0aGUgW3RvcCBvZiB0aGVcbiAgICBkb2N1bWVudF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyN2aWV3LkVkaXRvclZpZXcuZG9jdW1lbnRUb3ApLlxuICAgICovXG4gICAgbGluZUJsb2NrQXRIZWlnaHQoaGVpZ2h0KSB7XG4gICAgICAgIHRoaXMucmVhZE1lYXN1cmVkKCk7XG4gICAgICAgIHJldHVybiB0aGlzLnZpZXdTdGF0ZS5saW5lQmxvY2tBdEhlaWdodChoZWlnaHQpO1xuICAgIH1cbiAgICAvKipcbiAgICBHZXQgdGhlIGV4dGVudCBhbmQgdmVydGljYWwgcG9zaXRpb24gb2YgYWxsIFtsaW5lXG4gICAgYmxvY2tzXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI3ZpZXcuRWRpdG9yVmlldy5saW5lQmxvY2tBdCkgaW4gdGhlIHZpZXdwb3J0LiBQb3NpdGlvbnNcbiAgICBhcmUgcmVsYXRpdmUgdG8gdGhlIFt0b3Agb2YgdGhlXG4gICAgZG9jdW1lbnRdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jdmlldy5FZGl0b3JWaWV3LmRvY3VtZW50VG9wKTtcbiAgICAqL1xuICAgIGdldCB2aWV3cG9ydExpbmVCbG9ja3MoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnZpZXdTdGF0ZS52aWV3cG9ydExpbmVzO1xuICAgIH1cbiAgICAvKipcbiAgICBGaW5kIHRoZSBsaW5lIGJsb2NrIGFyb3VuZCB0aGUgZ2l2ZW4gZG9jdW1lbnQgcG9zaXRpb24uIEEgbGluZVxuICAgIGJsb2NrIGlzIGEgcmFuZ2UgZGVsaW1pdGVkIG9uIGJvdGggc2lkZXMgYnkgZWl0aGVyIGFcbiAgICBub24tW2hpZGRlbl0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyN2aWV3LkRlY29yYXRpb25ecmVwbGFjZSkgbGluZSBicmVhaywgb3IgdGhlXG4gICAgc3RhcnQvZW5kIG9mIHRoZSBkb2N1bWVudC4gSXQgd2lsbCB1c3VhbGx5IGp1c3QgaG9sZCBhIGxpbmUgb2ZcbiAgICB0ZXh0LCBidXQgbWF5IGJlIGJyb2tlbiBpbnRvIG11bHRpcGxlIHRleHRibG9ja3MgYnkgYmxvY2tcbiAgICB3aWRnZXRzLlxuICAgICovXG4gICAgbGluZUJsb2NrQXQocG9zKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnZpZXdTdGF0ZS5saW5lQmxvY2tBdChwb3MpO1xuICAgIH1cbiAgICAvKipcbiAgICBUaGUgZWRpdG9yJ3MgdG90YWwgY29udGVudCBoZWlnaHQuXG4gICAgKi9cbiAgICBnZXQgY29udGVudEhlaWdodCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudmlld1N0YXRlLmNvbnRlbnRIZWlnaHQ7XG4gICAgfVxuICAgIC8qKlxuICAgIE1vdmUgYSBjdXJzb3IgcG9zaXRpb24gYnkgW2dyYXBoZW1lXG4gICAgY2x1c3Rlcl0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNzdGF0ZS5maW5kQ2x1c3RlckJyZWFrKS4gYGZvcndhcmRgIGRldGVybWluZXMgd2hldGhlclxuICAgIHRoZSBtb3Rpb24gaXMgYXdheSBmcm9tIHRoZSBsaW5lIHN0YXJ0LCBvciB0b3dhcmRzIGl0LiBJblxuICAgIGJpZGlyZWN0aW9uYWwgdGV4dCwgdGhlIGxpbmUgaXMgdHJhdmVyc2VkIGluIHZpc3VhbCBvcmRlciwgdXNpbmdcbiAgICB0aGUgZWRpdG9yJ3MgW3RleHQgZGlyZWN0aW9uXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI3ZpZXcuRWRpdG9yVmlldy50ZXh0RGlyZWN0aW9uKS5cbiAgICBXaGVuIHRoZSBzdGFydCBwb3NpdGlvbiB3YXMgdGhlIGxhc3Qgb25lIG9uIHRoZSBsaW5lLCB0aGVcbiAgICByZXR1cm5lZCBwb3NpdGlvbiB3aWxsIGJlIGFjcm9zcyB0aGUgbGluZSBicmVhay4gSWYgdGhlcmUgaXMgbm9cbiAgICBmdXJ0aGVyIGxpbmUsIHRoZSBvcmlnaW5hbCBwb3NpdGlvbiBpcyByZXR1cm5lZC5cbiAgICBcbiAgICBCeSBkZWZhdWx0LCB0aGlzIG1ldGhvZCBtb3ZlcyBvdmVyIGEgc2luZ2xlIGNsdXN0ZXIuIFRoZVxuICAgIG9wdGlvbmFsIGBieWAgYXJndW1lbnQgY2FuIGJlIHVzZWQgdG8gbW92ZSBhY3Jvc3MgbW9yZS4gSXQgd2lsbFxuICAgIGJlIGNhbGxlZCB3aXRoIHRoZSBmaXJzdCBjbHVzdGVyIGFzIGFyZ3VtZW50LCBhbmQgc2hvdWxkIHJldHVyblxuICAgIGEgcHJlZGljYXRlIHRoYXQgZGV0ZXJtaW5lcywgZm9yIGVhY2ggc3Vic2VxdWVudCBjbHVzdGVyLFxuICAgIHdoZXRoZXIgaXQgc2hvdWxkIGFsc28gYmUgbW92ZWQgb3Zlci5cbiAgICAqL1xuICAgIG1vdmVCeUNoYXIoc3RhcnQsIGZvcndhcmQsIGJ5KSB7XG4gICAgICAgIHJldHVybiBza2lwQXRvbXModGhpcywgc3RhcnQsIG1vdmVCeUNoYXIodGhpcywgc3RhcnQsIGZvcndhcmQsIGJ5KSk7XG4gICAgfVxuICAgIC8qKlxuICAgIE1vdmUgYSBjdXJzb3IgcG9zaXRpb24gYWNyb3NzIHRoZSBuZXh0IGdyb3VwIG9mIGVpdGhlclxuICAgIFtsZXR0ZXJzXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI3N0YXRlLkVkaXRvclN0YXRlLmNoYXJDYXRlZ29yaXplcikgb3Igbm9uLWxldHRlclxuICAgIG5vbi13aGl0ZXNwYWNlIGNoYXJhY3RlcnMuXG4gICAgKi9cbiAgICBtb3ZlQnlHcm91cChzdGFydCwgZm9yd2FyZCkge1xuICAgICAgICByZXR1cm4gc2tpcEF0b21zKHRoaXMsIHN0YXJ0LCBtb3ZlQnlDaGFyKHRoaXMsIHN0YXJ0LCBmb3J3YXJkLCBpbml0aWFsID0+IGJ5R3JvdXAodGhpcywgc3RhcnQuaGVhZCwgaW5pdGlhbCkpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgR2V0IHRoZSBjdXJzb3IgcG9zaXRpb24gdmlzdWFsbHkgYXQgdGhlIHN0YXJ0IG9yIGVuZCBvZiBhIGxpbmUuXG4gICAgTm90ZSB0aGF0IHRoaXMgbWF5IGRpZmZlciBmcm9tIHRoZSBfbG9naWNhbF8gcG9zaXRpb24gYXQgaXRzXG4gICAgc3RhcnQgb3IgZW5kICh3aGljaCBpcyBzaW1wbHkgYXQgYGxpbmUuZnJvbWAvYGxpbmUudG9gKSBpZiB0ZXh0XG4gICAgYXQgdGhlIHN0YXJ0IG9yIGVuZCBnb2VzIGFnYWluc3QgdGhlIGxpbmUncyBiYXNlIHRleHQgZGlyZWN0aW9uLlxuICAgICovXG4gICAgdmlzdWFsTGluZVNpZGUobGluZSwgZW5kKSB7XG4gICAgICAgIGxldCBvcmRlciA9IHRoaXMuYmlkaVNwYW5zKGxpbmUpLCBkaXIgPSB0aGlzLnRleHREaXJlY3Rpb25BdChsaW5lLmZyb20pO1xuICAgICAgICBsZXQgc3BhbiA9IG9yZGVyW2VuZCA/IG9yZGVyLmxlbmd0aCAtIDEgOiAwXTtcbiAgICAgICAgcmV0dXJuIEVkaXRvclNlbGVjdGlvbi5jdXJzb3Ioc3Bhbi5zaWRlKGVuZCwgZGlyKSArIGxpbmUuZnJvbSwgc3Bhbi5mb3J3YXJkKCFlbmQsIGRpcikgPyAxIDogLTEpO1xuICAgIH1cbiAgICAvKipcbiAgICBNb3ZlIHRvIHRoZSBuZXh0IGxpbmUgYm91bmRhcnkgaW4gdGhlIGdpdmVuIGRpcmVjdGlvbi4gSWZcbiAgICBgaW5jbHVkZVdyYXBgIGlzIHRydWUsIGxpbmUgd3JhcHBpbmcgaXMgb24sIGFuZCB0aGVyZSBpcyBhXG4gICAgZnVydGhlciB3cmFwIHBvaW50IG9uIHRoZSBjdXJyZW50IGxpbmUsIHRoZSB3cmFwIHBvaW50IHdpbGwgYmVcbiAgICByZXR1cm5lZC4gT3RoZXJ3aXNlIHRoaXMgZnVuY3Rpb24gd2lsbCByZXR1cm4gdGhlIHN0YXJ0IG9yIGVuZFxuICAgIG9mIHRoZSBsaW5lLlxuICAgICovXG4gICAgbW92ZVRvTGluZUJvdW5kYXJ5KHN0YXJ0LCBmb3J3YXJkLCBpbmNsdWRlV3JhcCA9IHRydWUpIHtcbiAgICAgICAgcmV0dXJuIG1vdmVUb0xpbmVCb3VuZGFyeSh0aGlzLCBzdGFydCwgZm9yd2FyZCwgaW5jbHVkZVdyYXApO1xuICAgIH1cbiAgICAvKipcbiAgICBNb3ZlIGEgY3Vyc29yIHBvc2l0aW9uIHZlcnRpY2FsbHkuIFdoZW4gYGRpc3RhbmNlYCBpc24ndCBnaXZlbixcbiAgICBpdCBkZWZhdWx0cyB0byBtb3ZpbmcgdG8gdGhlIG5leHQgbGluZSAoaW5jbHVkaW5nIHdyYXBwZWRcbiAgICBsaW5lcykuIE90aGVyd2lzZSwgYGRpc3RhbmNlYCBzaG91bGQgcHJvdmlkZSBhIHBvc2l0aXZlIGRpc3RhbmNlXG4gICAgaW4gcGl4ZWxzLlxuICAgIFxuICAgIFdoZW4gYHN0YXJ0YCBoYXMgYVxuICAgIFtgZ29hbENvbHVtbmBdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jc3RhdGUuU2VsZWN0aW9uUmFuZ2UuZ29hbENvbHVtbiksIHRoZSB2ZXJ0aWNhbFxuICAgIG1vdGlvbiB3aWxsIHVzZSB0aGF0IGFzIGEgdGFyZ2V0IGhvcml6b250YWwgcG9zaXRpb24uIE90aGVyd2lzZSxcbiAgICB0aGUgY3Vyc29yJ3Mgb3duIGhvcml6b250YWwgcG9zaXRpb24gaXMgdXNlZC4gVGhlIHJldHVybmVkXG4gICAgY3Vyc29yIHdpbGwgaGF2ZSBpdHMgZ29hbCBjb2x1bW4gc2V0IHRvIHdoaWNoZXZlciBjb2x1bW4gd2FzXG4gICAgdXNlZC5cbiAgICAqL1xuICAgIG1vdmVWZXJ0aWNhbGx5KHN0YXJ0LCBmb3J3YXJkLCBkaXN0YW5jZSkge1xuICAgICAgICByZXR1cm4gc2tpcEF0b21zKHRoaXMsIHN0YXJ0LCBtb3ZlVmVydGljYWxseSh0aGlzLCBzdGFydCwgZm9yd2FyZCwgZGlzdGFuY2UpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgRmluZCB0aGUgRE9NIHBhcmVudCBub2RlIGFuZCBvZmZzZXQgKGNoaWxkIG9mZnNldCBpZiBgbm9kZWAgaXNcbiAgICBhbiBlbGVtZW50LCBjaGFyYWN0ZXIgb2Zmc2V0IHdoZW4gaXQgaXMgYSB0ZXh0IG5vZGUpIGF0IHRoZVxuICAgIGdpdmVuIGRvY3VtZW50IHBvc2l0aW9uLlxuICAgIFxuICAgIE5vdGUgdGhhdCBmb3IgcG9zaXRpb25zIHRoYXQgYXJlbid0IGN1cnJlbnRseSBpblxuICAgIGB2aXNpYmxlUmFuZ2VzYCwgdGhlIHJlc3VsdGluZyBET00gcG9zaXRpb24gaXNuJ3QgbmVjZXNzYXJpbHlcbiAgICBtZWFuaW5nZnVsIChpdCBtYXkganVzdCBwb2ludCBiZWZvcmUgb3IgYWZ0ZXIgYSBwbGFjZWhvbGRlclxuICAgIGVsZW1lbnQpLlxuICAgICovXG4gICAgZG9tQXRQb3MocG9zLCBzaWRlID0gMSkge1xuICAgICAgICByZXR1cm4gdGhpcy5kb2NWaWV3LmRvbUF0UG9zKHBvcywgc2lkZSk7XG4gICAgfVxuICAgIC8qKlxuICAgIEZpbmQgdGhlIGRvY3VtZW50IHBvc2l0aW9uIGF0IHRoZSBnaXZlbiBET00gbm9kZS4gQ2FuIGJlIHVzZWZ1bFxuICAgIGZvciBhc3NvY2lhdGluZyBwb3NpdGlvbnMgd2l0aCBET00gZXZlbnRzLiBXaWxsIHJhaXNlIGFuIGVycm9yXG4gICAgd2hlbiBgbm9kZWAgaXNuJ3QgcGFydCBvZiB0aGUgZWRpdG9yIGNvbnRlbnQuXG4gICAgKi9cbiAgICBwb3NBdERPTShub2RlLCBvZmZzZXQgPSAwKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRvY1ZpZXcucG9zRnJvbURPTShub2RlLCBvZmZzZXQpO1xuICAgIH1cbiAgICBwb3NBdENvb3Jkcyhjb29yZHMsIHByZWNpc2UgPSB0cnVlKSB7XG4gICAgICAgIHRoaXMucmVhZE1lYXN1cmVkKCk7XG4gICAgICAgIGxldCBmb3VuZCA9IHBvc0F0Q29vcmRzKHRoaXMsIGNvb3JkcywgcHJlY2lzZSk7XG4gICAgICAgIHJldHVybiBmb3VuZCAmJiBmb3VuZC5wb3M7XG4gICAgfVxuICAgIHBvc0FuZFNpZGVBdENvb3Jkcyhjb29yZHMsIHByZWNpc2UgPSB0cnVlKSB7XG4gICAgICAgIHRoaXMucmVhZE1lYXN1cmVkKCk7XG4gICAgICAgIHJldHVybiBwb3NBdENvb3Jkcyh0aGlzLCBjb29yZHMsIHByZWNpc2UpO1xuICAgIH1cbiAgICAvKipcbiAgICBHZXQgdGhlIHNjcmVlbiBjb29yZGluYXRlcyBhdCB0aGUgZ2l2ZW4gZG9jdW1lbnQgcG9zaXRpb24uXG4gICAgYHNpZGVgIGRldGVybWluZXMgd2hldGhlciB0aGUgY29vcmRpbmF0ZXMgYXJlIGJhc2VkIG9uIHRoZVxuICAgIGVsZW1lbnQgYmVmb3JlICgtMSkgb3IgYWZ0ZXIgKDEpIHRoZSBwb3NpdGlvbiAoaWYgbm8gZWxlbWVudCBpc1xuICAgIGF2YWlsYWJsZSBvbiB0aGUgZ2l2ZW4gc2lkZSwgdGhlIG1ldGhvZCB3aWxsIHRyYW5zcGFyZW50bHkgdXNlXG4gICAgYW5vdGhlciBzdHJhdGVneSB0byBnZXQgcmVhc29uYWJsZSBjb29yZGluYXRlcykuXG4gICAgKi9cbiAgICBjb29yZHNBdFBvcyhwb3MsIHNpZGUgPSAxKSB7XG4gICAgICAgIHRoaXMucmVhZE1lYXN1cmVkKCk7XG4gICAgICAgIGxldCByZWN0ID0gdGhpcy5kb2NWaWV3LmNvb3Jkc0F0KHBvcywgc2lkZSk7XG4gICAgICAgIGlmICghcmVjdCB8fCByZWN0LmxlZnQgPT0gcmVjdC5yaWdodClcbiAgICAgICAgICAgIHJldHVybiByZWN0O1xuICAgICAgICBsZXQgbGluZSA9IHRoaXMuc3RhdGUuZG9jLmxpbmVBdChwb3MpLCBvcmRlciA9IHRoaXMuYmlkaVNwYW5zKGxpbmUpO1xuICAgICAgICBsZXQgc3BhbiA9IG9yZGVyW0JpZGlTcGFuLmZpbmQob3JkZXIsIHBvcyAtIGxpbmUuZnJvbSwgLTEsIHNpZGUpXTtcbiAgICAgICAgcmV0dXJuIGZsYXR0ZW5SZWN0KHJlY3QsIChzcGFuLmRpciA9PSBEaXJlY3Rpb24uTFRSKSA9PSAoc2lkZSA+IDApKTtcbiAgICB9XG4gICAgLyoqXG4gICAgUmV0dXJuIHRoZSByZWN0YW5nbGUgYXJvdW5kIGEgZ2l2ZW4gY2hhcmFjdGVyLiBJZiBgcG9zYCBkb2VzIG5vdFxuICAgIHBvaW50IGluIGZyb250IG9mIGEgY2hhcmFjdGVyIHRoYXQgaXMgaW4gdGhlIHZpZXdwb3J0IGFuZFxuICAgIHJlbmRlcmVkIChpLmUuIG5vdCByZXBsYWNlZCwgbm90IGEgbGluZSBicmVhayksIHRoaXMgd2lsbCByZXR1cm5cbiAgICBudWxsLiBGb3Igc3BhY2UgY2hhcmFjdGVycyB0aGF0IGFyZSBhIGxpbmUgd3JhcCBwb2ludCwgdGhpcyB3aWxsXG4gICAgcmV0dXJuIHRoZSBwb3NpdGlvbiBiZWZvcmUgdGhlIGxpbmUgYnJlYWsuXG4gICAgKi9cbiAgICBjb29yZHNGb3JDaGFyKHBvcykge1xuICAgICAgICB0aGlzLnJlYWRNZWFzdXJlZCgpO1xuICAgICAgICByZXR1cm4gdGhpcy5kb2NWaWV3LmNvb3Jkc0ZvckNoYXIocG9zKTtcbiAgICB9XG4gICAgLyoqXG4gICAgVGhlIGRlZmF1bHQgd2lkdGggb2YgYSBjaGFyYWN0ZXIgaW4gdGhlIGVkaXRvci4gTWF5IG5vdFxuICAgIGFjY3VyYXRlbHkgcmVmbGVjdCB0aGUgd2lkdGggb2YgYWxsIGNoYXJhY3RlcnMgKGdpdmVuIHZhcmlhYmxlXG4gICAgd2lkdGggZm9udHMgb3Igc3R5bGluZyBvZiBpbnZpZGlkdWFsIHJhbmdlcykuXG4gICAgKi9cbiAgICBnZXQgZGVmYXVsdENoYXJhY3RlcldpZHRoKCkgeyByZXR1cm4gdGhpcy52aWV3U3RhdGUuaGVpZ2h0T3JhY2xlLmNoYXJXaWR0aDsgfVxuICAgIC8qKlxuICAgIFRoZSBkZWZhdWx0IGhlaWdodCBvZiBhIGxpbmUgaW4gdGhlIGVkaXRvci4gTWF5IG5vdCBiZSBhY2N1cmF0ZVxuICAgIGZvciBhbGwgbGluZXMuXG4gICAgKi9cbiAgICBnZXQgZGVmYXVsdExpbmVIZWlnaHQoKSB7IHJldHVybiB0aGlzLnZpZXdTdGF0ZS5oZWlnaHRPcmFjbGUubGluZUhlaWdodDsgfVxuICAgIC8qKlxuICAgIFRoZSB0ZXh0IGRpcmVjdGlvblxuICAgIChbYGRpcmVjdGlvbmBdKGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0NTUy9kaXJlY3Rpb24pXG4gICAgQ1NTIHByb3BlcnR5KSBvZiB0aGUgZWRpdG9yJ3MgY29udGVudCBlbGVtZW50LlxuICAgICovXG4gICAgZ2V0IHRleHREaXJlY3Rpb24oKSB7IHJldHVybiB0aGlzLnZpZXdTdGF0ZS5kZWZhdWx0VGV4dERpcmVjdGlvbjsgfVxuICAgIC8qKlxuICAgIEZpbmQgdGhlIHRleHQgZGlyZWN0aW9uIG9mIHRoZSBibG9jayBhdCB0aGUgZ2l2ZW4gcG9zaXRpb24sIGFzXG4gICAgYXNzaWduZWQgYnkgQ1NTLiBJZlxuICAgIFtgcGVyTGluZVRleHREaXJlY3Rpb25gXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI3ZpZXcuRWRpdG9yVmlld15wZXJMaW5lVGV4dERpcmVjdGlvbilcbiAgICBpc24ndCBlbmFibGVkLCBvciB0aGUgZ2l2ZW4gcG9zaXRpb24gaXMgb3V0c2lkZSBvZiB0aGUgdmlld3BvcnQsXG4gICAgdGhpcyB3aWxsIGFsd2F5cyByZXR1cm4gdGhlIHNhbWUgYXNcbiAgICBbYHRleHREaXJlY3Rpb25gXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI3ZpZXcuRWRpdG9yVmlldy50ZXh0RGlyZWN0aW9uKS4gTm90ZSB0aGF0XG4gICAgdGhpcyBtYXkgdHJpZ2dlciBhIERPTSBsYXlvdXQuXG4gICAgKi9cbiAgICB0ZXh0RGlyZWN0aW9uQXQocG9zKSB7XG4gICAgICAgIGxldCBwZXJMaW5lID0gdGhpcy5zdGF0ZS5mYWNldChwZXJMaW5lVGV4dERpcmVjdGlvbik7XG4gICAgICAgIGlmICghcGVyTGluZSB8fCBwb3MgPCB0aGlzLnZpZXdwb3J0LmZyb20gfHwgcG9zID4gdGhpcy52aWV3cG9ydC50bylcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnRleHREaXJlY3Rpb247XG4gICAgICAgIHRoaXMucmVhZE1lYXN1cmVkKCk7XG4gICAgICAgIHJldHVybiB0aGlzLmRvY1ZpZXcudGV4dERpcmVjdGlvbkF0KHBvcyk7XG4gICAgfVxuICAgIC8qKlxuICAgIFdoZXRoZXIgdGhpcyBlZGl0b3IgW3dyYXBzIGxpbmVzXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI3ZpZXcuRWRpdG9yVmlldy5saW5lV3JhcHBpbmcpXG4gICAgKGFzIGRldGVybWluZWQgYnkgdGhlXG4gICAgW2B3aGl0ZS1zcGFjZWBdKGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0NTUy93aGl0ZS1zcGFjZSlcbiAgICBDU1MgcHJvcGVydHkgb2YgaXRzIGNvbnRlbnQgZWxlbWVudCkuXG4gICAgKi9cbiAgICBnZXQgbGluZVdyYXBwaW5nKCkgeyByZXR1cm4gdGhpcy52aWV3U3RhdGUuaGVpZ2h0T3JhY2xlLmxpbmVXcmFwcGluZzsgfVxuICAgIC8qKlxuICAgIFJldHVybnMgdGhlIGJpZGlyZWN0aW9uYWwgdGV4dCBzdHJ1Y3R1cmUgb2YgdGhlIGdpdmVuIGxpbmVcbiAgICAod2hpY2ggc2hvdWxkIGJlIGluIHRoZSBjdXJyZW50IGRvY3VtZW50KSBhcyBhbiBhcnJheSBvZiBzcGFuXG4gICAgb2JqZWN0cy4gVGhlIG9yZGVyIG9mIHRoZXNlIHNwYW5zIG1hdGNoZXMgdGhlIFt0ZXh0XG4gICAgZGlyZWN0aW9uXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI3ZpZXcuRWRpdG9yVmlldy50ZXh0RGlyZWN0aW9uKeKAlGlmIHRoYXQgaXNcbiAgICBsZWZ0LXRvLXJpZ2h0LCB0aGUgbGVmdG1vc3Qgc3BhbnMgY29tZSBmaXJzdCwgb3RoZXJ3aXNlIHRoZVxuICAgIHJpZ2h0bW9zdCBzcGFucyBjb21lIGZpcnN0LlxuICAgICovXG4gICAgYmlkaVNwYW5zKGxpbmUpIHtcbiAgICAgICAgaWYgKGxpbmUubGVuZ3RoID4gTWF4QmlkaUxpbmUpXG4gICAgICAgICAgICByZXR1cm4gdHJpdmlhbE9yZGVyKGxpbmUubGVuZ3RoKTtcbiAgICAgICAgbGV0IGRpciA9IHRoaXMudGV4dERpcmVjdGlvbkF0KGxpbmUuZnJvbSksIGlzb2xhdGVzO1xuICAgICAgICBmb3IgKGxldCBlbnRyeSBvZiB0aGlzLmJpZGlDYWNoZSkge1xuICAgICAgICAgICAgaWYgKGVudHJ5LmZyb20gPT0gbGluZS5mcm9tICYmIGVudHJ5LmRpciA9PSBkaXIgJiZcbiAgICAgICAgICAgICAgICAoZW50cnkuZnJlc2ggfHwgaXNvbGF0ZXNFcShlbnRyeS5pc29sYXRlcywgaXNvbGF0ZXMgPSBnZXRJc29sYXRlZFJhbmdlcyh0aGlzLCBsaW5lKSkpKVxuICAgICAgICAgICAgICAgIHJldHVybiBlbnRyeS5vcmRlcjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIWlzb2xhdGVzKVxuICAgICAgICAgICAgaXNvbGF0ZXMgPSBnZXRJc29sYXRlZFJhbmdlcyh0aGlzLCBsaW5lKTtcbiAgICAgICAgbGV0IG9yZGVyID0gY29tcHV0ZU9yZGVyKGxpbmUudGV4dCwgZGlyLCBpc29sYXRlcyk7XG4gICAgICAgIHRoaXMuYmlkaUNhY2hlLnB1c2gobmV3IENhY2hlZE9yZGVyKGxpbmUuZnJvbSwgbGluZS50bywgZGlyLCBpc29sYXRlcywgdHJ1ZSwgb3JkZXIpKTtcbiAgICAgICAgcmV0dXJuIG9yZGVyO1xuICAgIH1cbiAgICAvKipcbiAgICBDaGVjayB3aGV0aGVyIHRoZSBlZGl0b3IgaGFzIGZvY3VzLlxuICAgICovXG4gICAgZ2V0IGhhc0ZvY3VzKCkge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIC8vIFNhZmFyaSByZXR1cm4gZmFsc2UgZm9yIGhhc0ZvY3VzIHdoZW4gdGhlIGNvbnRleHQgbWVudSBpcyBvcGVuXG4gICAgICAgIC8vIG9yIGNsb3NpbmcsIHdoaWNoIGxlYWRzIHVzIHRvIGlnbm9yZSBzZWxlY3Rpb24gY2hhbmdlcyBmcm9tIHRoZVxuICAgICAgICAvLyBjb250ZXh0IG1lbnUgYmVjYXVzZSBpdCBsb29rcyBsaWtlIHRoZSBlZGl0b3IgaXNuJ3QgZm9jdXNlZC5cbiAgICAgICAgLy8gVGhpcyBrbHVkZ2VzIGFyb3VuZCB0aGF0LlxuICAgICAgICByZXR1cm4gKHRoaXMuZG9tLm93bmVyRG9jdW1lbnQuaGFzRm9jdXMoKSB8fCBicm93c2VyLnNhZmFyaSAmJiAoKF9hID0gdGhpcy5pbnB1dFN0YXRlKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EubGFzdENvbnRleHRNZW51KSA+IERhdGUubm93KCkgLSAzZTQpICYmXG4gICAgICAgICAgICB0aGlzLnJvb3QuYWN0aXZlRWxlbWVudCA9PSB0aGlzLmNvbnRlbnRET007XG4gICAgfVxuICAgIC8qKlxuICAgIFB1dCBmb2N1cyBvbiB0aGUgZWRpdG9yLlxuICAgICovXG4gICAgZm9jdXMoKSB7XG4gICAgICAgIHRoaXMub2JzZXJ2ZXIuaWdub3JlKCgpID0+IHtcbiAgICAgICAgICAgIGZvY3VzUHJldmVudFNjcm9sbCh0aGlzLmNvbnRlbnRET00pO1xuICAgICAgICAgICAgdGhpcy5kb2NWaWV3LnVwZGF0ZVNlbGVjdGlvbigpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgVXBkYXRlIHRoZSBbcm9vdF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyMjdmlldy5FZGl0b3JWaWV3Q29uZmlnLnJvb3QpIGluIHdoaWNoIHRoZSBlZGl0b3IgbGl2ZXMuIFRoaXMgaXMgb25seVxuICAgIG5lY2Vzc2FyeSB3aGVuIG1vdmluZyB0aGUgZWRpdG9yJ3MgZXhpc3RpbmcgRE9NIHRvIGEgbmV3IHdpbmRvdyBvciBzaGFkb3cgcm9vdC5cbiAgICAqL1xuICAgIHNldFJvb3Qocm9vdCkge1xuICAgICAgICBpZiAodGhpcy5fcm9vdCAhPSByb290KSB7XG4gICAgICAgICAgICB0aGlzLl9yb290ID0gcm9vdDtcbiAgICAgICAgICAgIHRoaXMub2JzZXJ2ZXIuc2V0V2luZG93KChyb290Lm5vZGVUeXBlID09IDkgPyByb290IDogcm9vdC5vd25lckRvY3VtZW50KS5kZWZhdWx0VmlldyB8fCB3aW5kb3cpO1xuICAgICAgICAgICAgdGhpcy5tb3VudFN0eWxlcygpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgIENsZWFuIHVwIHRoaXMgZWRpdG9yIHZpZXcsIHJlbW92aW5nIGl0cyBlbGVtZW50IGZyb20gdGhlXG4gICAgZG9jdW1lbnQsIHVucmVnaXN0ZXJpbmcgZXZlbnQgaGFuZGxlcnMsIGFuZCBub3RpZnlpbmdcbiAgICBwbHVnaW5zLiBUaGUgdmlldyBpbnN0YW5jZSBjYW4gbm8gbG9uZ2VyIGJlIHVzZWQgYWZ0ZXJcbiAgICBjYWxsaW5nIHRoaXMuXG4gICAgKi9cbiAgICBkZXN0cm95KCkge1xuICAgICAgICBpZiAodGhpcy5yb290LmFjdGl2ZUVsZW1lbnQgPT0gdGhpcy5jb250ZW50RE9NKVxuICAgICAgICAgICAgdGhpcy5jb250ZW50RE9NLmJsdXIoKTtcbiAgICAgICAgZm9yIChsZXQgcGx1Z2luIG9mIHRoaXMucGx1Z2lucylcbiAgICAgICAgICAgIHBsdWdpbi5kZXN0cm95KHRoaXMpO1xuICAgICAgICB0aGlzLnBsdWdpbnMgPSBbXTtcbiAgICAgICAgdGhpcy5pbnB1dFN0YXRlLmRlc3Ryb3koKTtcbiAgICAgICAgdGhpcy5kb2NWaWV3LmRlc3Ryb3koKTtcbiAgICAgICAgdGhpcy5kb20ucmVtb3ZlKCk7XG4gICAgICAgIHRoaXMub2JzZXJ2ZXIuZGVzdHJveSgpO1xuICAgICAgICBpZiAodGhpcy5tZWFzdXJlU2NoZWR1bGVkID4gLTEpXG4gICAgICAgICAgICB0aGlzLndpbi5jYW5jZWxBbmltYXRpb25GcmFtZSh0aGlzLm1lYXN1cmVTY2hlZHVsZWQpO1xuICAgICAgICB0aGlzLmRlc3Ryb3llZCA9IHRydWU7XG4gICAgfVxuICAgIC8qKlxuICAgIFJldHVybnMgYW4gZWZmZWN0IHRoYXQgY2FuIGJlXG4gICAgW2FkZGVkXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI3N0YXRlLlRyYW5zYWN0aW9uU3BlYy5lZmZlY3RzKSB0byBhIHRyYW5zYWN0aW9uIHRvXG4gICAgY2F1c2UgaXQgdG8gc2Nyb2xsIHRoZSBnaXZlbiBwb3NpdGlvbiBvciByYW5nZSBpbnRvIHZpZXcuXG4gICAgKi9cbiAgICBzdGF0aWMgc2Nyb2xsSW50b1ZpZXcocG9zLCBvcHRpb25zID0ge30pIHtcbiAgICAgICAgcmV0dXJuIHNjcm9sbEludG9WaWV3Lm9mKG5ldyBTY3JvbGxUYXJnZXQodHlwZW9mIHBvcyA9PSBcIm51bWJlclwiID8gRWRpdG9yU2VsZWN0aW9uLmN1cnNvcihwb3MpIDogcG9zLCBvcHRpb25zLnksIG9wdGlvbnMueCwgb3B0aW9ucy55TWFyZ2luLCBvcHRpb25zLnhNYXJnaW4pKTtcbiAgICB9XG4gICAgLyoqXG4gICAgUmV0dXJuIGFuIGVmZmVjdCB0aGF0IHJlc2V0cyB0aGUgZWRpdG9yIHRvIGl0cyBjdXJyZW50IChhdCB0aGVcbiAgICB0aW1lIHRoaXMgbWV0aG9kIHdhcyBjYWxsZWQpIHNjcm9sbCBwb3NpdGlvbi4gTm90ZSB0aGF0IHRoaXNcbiAgICBvbmx5IGFmZmVjdHMgdGhlIGVkaXRvcidzIG93biBzY3JvbGxhYmxlIGVsZW1lbnQsIG5vdCBwYXJlbnRzLlxuICAgIFNlZSBhbHNvXG4gICAgW2BFZGl0b3JWaWV3Q29uZmlnLnNjcm9sbFRvYF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyN2aWV3LkVkaXRvclZpZXdDb25maWcuc2Nyb2xsVG8pLlxuICAgIFxuICAgIFRoZSBlZmZlY3Qgc2hvdWxkIGJlIHVzZWQgd2l0aCBhIGRvY3VtZW50IGlkZW50aWNhbCB0byB0aGUgb25lXG4gICAgaXQgd2FzIGNyZWF0ZWQgZm9yLiBGYWlsaW5nIHRvIGRvIHNvIGlzIG5vdCBhbiBlcnJvciwgYnV0IG1heVxuICAgIG5vdCBzY3JvbGwgdG8gdGhlIGV4cGVjdGVkIHBvc2l0aW9uLiBZb3UgY2FuXG4gICAgW21hcF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNzdGF0ZS5TdGF0ZUVmZmVjdC5tYXApIHRoZSBlZmZlY3QgdG8gYWNjb3VudCBmb3IgY2hhbmdlcy5cbiAgICAqL1xuICAgIHNjcm9sbFNuYXBzaG90KCkge1xuICAgICAgICBsZXQgeyBzY3JvbGxUb3AsIHNjcm9sbExlZnQgfSA9IHRoaXMuc2Nyb2xsRE9NO1xuICAgICAgICBsZXQgcmVmID0gdGhpcy52aWV3U3RhdGUuc2Nyb2xsQW5jaG9yQXQoc2Nyb2xsVG9wKTtcbiAgICAgICAgcmV0dXJuIHNjcm9sbEludG9WaWV3Lm9mKG5ldyBTY3JvbGxUYXJnZXQoRWRpdG9yU2VsZWN0aW9uLmN1cnNvcihyZWYuZnJvbSksIFwic3RhcnRcIiwgXCJzdGFydFwiLCByZWYudG9wIC0gc2Nyb2xsVG9wLCBzY3JvbGxMZWZ0LCB0cnVlKSk7XG4gICAgfVxuICAgIC8qKlxuICAgIEVuYWJsZSBvciBkaXNhYmxlIHRhYi1mb2N1cyBtb2RlLCB3aGljaCBkaXNhYmxlcyBrZXkgYmluZGluZ3NcbiAgICBmb3IgVGFiIGFuZCBTaGlmdC1UYWIsIGxldHRpbmcgdGhlIGJyb3dzZXIncyBkZWZhdWx0XG4gICAgZm9jdXMtY2hhbmdpbmcgYmVoYXZpb3IgZ28gdGhyb3VnaCBpbnN0ZWFkLiBUaGlzIGlzIHVzZWZ1bCB0b1xuICAgIHByZXZlbnQgdHJhcHBpbmcga2V5Ym9hcmQgdXNlcnMgaW4geW91ciBlZGl0b3IuXG4gICAgXG4gICAgV2l0aG91dCBhcmd1bWVudCwgdGhpcyB0b2dnbGVzIHRoZSBtb2RlLiBXaXRoIGEgYm9vbGVhbiwgaXRcbiAgICBlbmFibGVzICh0cnVlKSBvciBkaXNhYmxlcyBpdCAoZmFsc2UpLiBHaXZlbiBhIG51bWJlciwgaXRcbiAgICB0ZW1wb3JhcmlseSBlbmFibGVzIHRoZSBtb2RlIHVudGlsIHRoYXQgbnVtYmVyIG9mIG1pbGxpc2Vjb25kc1xuICAgIGhhdmUgcGFzc2VkIG9yIGFub3RoZXIgbm9uLVRhYiBrZXkgaXMgcHJlc3NlZC5cbiAgICAqL1xuICAgIHNldFRhYkZvY3VzTW9kZSh0bykge1xuICAgICAgICBpZiAodG8gPT0gbnVsbClcbiAgICAgICAgICAgIHRoaXMuaW5wdXRTdGF0ZS50YWJGb2N1c01vZGUgPSB0aGlzLmlucHV0U3RhdGUudGFiRm9jdXNNb2RlIDwgMCA/IDAgOiAtMTtcbiAgICAgICAgZWxzZSBpZiAodHlwZW9mIHRvID09IFwiYm9vbGVhblwiKVxuICAgICAgICAgICAgdGhpcy5pbnB1dFN0YXRlLnRhYkZvY3VzTW9kZSA9IHRvID8gMCA6IC0xO1xuICAgICAgICBlbHNlIGlmICh0aGlzLmlucHV0U3RhdGUudGFiRm9jdXNNb2RlICE9IDApXG4gICAgICAgICAgICB0aGlzLmlucHV0U3RhdGUudGFiRm9jdXNNb2RlID0gRGF0ZS5ub3coKSArIHRvO1xuICAgIH1cbiAgICAvKipcbiAgICBSZXR1cm5zIGFuIGV4dGVuc2lvbiB0aGF0IGNhbiBiZSB1c2VkIHRvIGFkZCBET00gZXZlbnQgaGFuZGxlcnMuXG4gICAgVGhlIHZhbHVlIHNob3VsZCBiZSBhbiBvYmplY3QgbWFwcGluZyBldmVudCBuYW1lcyB0byBoYW5kbGVyXG4gICAgZnVuY3Rpb25zLiBGb3IgYW55IGdpdmVuIGV2ZW50LCBzdWNoIGZ1bmN0aW9ucyBhcmUgb3JkZXJlZCBieVxuICAgIGV4dGVuc2lvbiBwcmVjZWRlbmNlLCBhbmQgdGhlIGZpcnN0IGhhbmRsZXIgdG8gcmV0dXJuIHRydWUgd2lsbFxuICAgIGJlIGFzc3VtZWQgdG8gaGF2ZSBoYW5kbGVkIHRoYXQgZXZlbnQsIGFuZCBubyBvdGhlciBoYW5kbGVycyBvclxuICAgIGJ1aWx0LWluIGJlaGF2aW9yIHdpbGwgYmUgYWN0aXZhdGVkIGZvciBpdC4gVGhlc2UgYXJlIHJlZ2lzdGVyZWRcbiAgICBvbiB0aGUgW2NvbnRlbnQgZWxlbWVudF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyN2aWV3LkVkaXRvclZpZXcuY29udGVudERPTSksIGV4Y2VwdFxuICAgIGZvciBgc2Nyb2xsYCBoYW5kbGVycywgd2hpY2ggd2lsbCBiZSBjYWxsZWQgYW55IHRpbWUgdGhlXG4gICAgZWRpdG9yJ3MgW3Njcm9sbCBlbGVtZW50XShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI3ZpZXcuRWRpdG9yVmlldy5zY3JvbGxET00pIG9yIG9uZSBvZlxuICAgIGl0cyBwYXJlbnQgbm9kZXMgaXMgc2Nyb2xsZWQuXG4gICAgKi9cbiAgICBzdGF0aWMgZG9tRXZlbnRIYW5kbGVycyhoYW5kbGVycykge1xuICAgICAgICByZXR1cm4gVmlld1BsdWdpbi5kZWZpbmUoKCkgPT4gKHt9KSwgeyBldmVudEhhbmRsZXJzOiBoYW5kbGVycyB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgQ3JlYXRlIGFuIGV4dGVuc2lvbiB0aGF0IHJlZ2lzdGVycyBET00gZXZlbnQgb2JzZXJ2ZXJzLiBDb250cmFyeVxuICAgIHRvIGV2ZW50IFtoYW5kbGVyc10oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyN2aWV3LkVkaXRvclZpZXdeZG9tRXZlbnRIYW5kbGVycyksXG4gICAgb2JzZXJ2ZXJzIGNhbid0IGJlIHByZXZlbnRlZCBmcm9tIHJ1bm5pbmcgYnkgYSBoaWdoZXItcHJlY2VkZW5jZVxuICAgIGhhbmRsZXIgcmV0dXJuaW5nIHRydWUuIFRoZXkgYWxzbyBkb24ndCBwcmV2ZW50IG90aGVyIGhhbmRsZXJzXG4gICAgYW5kIG9ic2VydmVycyBmcm9tIHJ1bm5pbmcgd2hlbiB0aGV5IHJldHVybiB0cnVlLCBhbmQgc2hvdWxkIG5vdFxuICAgIGNhbGwgYHByZXZlbnREZWZhdWx0YC5cbiAgICAqL1xuICAgIHN0YXRpYyBkb21FdmVudE9ic2VydmVycyhvYnNlcnZlcnMpIHtcbiAgICAgICAgcmV0dXJuIFZpZXdQbHVnaW4uZGVmaW5lKCgpID0+ICh7fSksIHsgZXZlbnRPYnNlcnZlcnM6IG9ic2VydmVycyB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgQ3JlYXRlIGEgdGhlbWUgZXh0ZW5zaW9uLiBUaGUgZmlyc3QgYXJndW1lbnQgY2FuIGJlIGFcbiAgICBbYHN0eWxlLW1vZGBdKGh0dHBzOi8vZ2l0aHViLmNvbS9tYXJpam5oL3N0eWxlLW1vZCNkb2N1bWVudGF0aW9uKVxuICAgIHN0eWxlIHNwZWMgcHJvdmlkaW5nIHRoZSBzdHlsZXMgZm9yIHRoZSB0aGVtZS4gVGhlc2Ugd2lsbCBiZVxuICAgIHByZWZpeGVkIHdpdGggYSBnZW5lcmF0ZWQgY2xhc3MgZm9yIHRoZSBzdHlsZS5cbiAgICBcbiAgICBCZWNhdXNlIHRoZSBzZWxlY3RvcnMgd2lsbCBiZSBwcmVmaXhlZCB3aXRoIGEgc2NvcGUgY2xhc3MsIHJ1bGVcbiAgICB0aGF0IGRpcmVjdGx5IG1hdGNoIHRoZSBlZGl0b3IncyBbd3JhcHBlclxuICAgIGVsZW1lbnRdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jdmlldy5FZGl0b3JWaWV3LmRvbSnigJR0byB3aGljaCB0aGUgc2NvcGUgY2xhc3Mgd2lsbCBiZVxuICAgIGFkZGVk4oCUbmVlZCB0byBiZSBleHBsaWNpdGx5IGRpZmZlcmVudGlhdGVkIGJ5IGFkZGluZyBhbiBgJmAgdG9cbiAgICB0aGUgc2VsZWN0b3IgZm9yIHRoYXQgZWxlbWVudOKAlGZvciBleGFtcGxlXG4gICAgYCYuY20tZm9jdXNlZGAuXG4gICAgXG4gICAgV2hlbiBgZGFya2AgaXMgc2V0IHRvIHRydWUsIHRoZSB0aGVtZSB3aWxsIGJlIG1hcmtlZCBhcyBkYXJrLFxuICAgIHdoaWNoIHdpbGwgY2F1c2UgdGhlIGAmZGFya2AgcnVsZXMgZnJvbSBbYmFzZVxuICAgIHRoZW1lc10oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyN2aWV3LkVkaXRvclZpZXdeYmFzZVRoZW1lKSB0byBiZSB1c2VkIChhcyBvcHBvc2VkIHRvXG4gICAgYCZsaWdodGAgd2hlbiBhIGxpZ2h0IHRoZW1lIGlzIGFjdGl2ZSkuXG4gICAgKi9cbiAgICBzdGF0aWMgdGhlbWUoc3BlYywgb3B0aW9ucykge1xuICAgICAgICBsZXQgcHJlZml4ID0gU3R5bGVNb2R1bGUubmV3TmFtZSgpO1xuICAgICAgICBsZXQgcmVzdWx0ID0gW3RoZW1lLm9mKHByZWZpeCksIHN0eWxlTW9kdWxlLm9mKGJ1aWxkVGhlbWUoYC4ke3ByZWZpeH1gLCBzcGVjKSldO1xuICAgICAgICBpZiAob3B0aW9ucyAmJiBvcHRpb25zLmRhcmspXG4gICAgICAgICAgICByZXN1bHQucHVzaChkYXJrVGhlbWUub2YodHJ1ZSkpO1xuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cbiAgICAvKipcbiAgICBDcmVhdGUgYW4gZXh0ZW5zaW9uIHRoYXQgYWRkcyBzdHlsZXMgdG8gdGhlIGJhc2UgdGhlbWUuIExpa2VcbiAgICB3aXRoIFtgdGhlbWVgXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI3ZpZXcuRWRpdG9yVmlld150aGVtZSksIHVzZSBgJmAgdG8gaW5kaWNhdGUgdGhlXG4gICAgcGxhY2Ugb2YgdGhlIGVkaXRvciB3cmFwcGVyIGVsZW1lbnQgd2hlbiBkaXJlY3RseSB0YXJnZXRpbmdcbiAgICB0aGF0LiBZb3UgY2FuIGFsc28gdXNlIGAmZGFya2Agb3IgYCZsaWdodGAgaW5zdGVhZCB0byBvbmx5XG4gICAgdGFyZ2V0IGVkaXRvcnMgd2l0aCBhIGRhcmsgb3IgbGlnaHQgdGhlbWUuXG4gICAgKi9cbiAgICBzdGF0aWMgYmFzZVRoZW1lKHNwZWMpIHtcbiAgICAgICAgcmV0dXJuIFByZWMubG93ZXN0KHN0eWxlTW9kdWxlLm9mKGJ1aWxkVGhlbWUoXCIuXCIgKyBiYXNlVGhlbWVJRCwgc3BlYywgbGlnaHREYXJrSURzKSkpO1xuICAgIH1cbiAgICAvKipcbiAgICBSZXRyaWV2ZSBhbiBlZGl0b3IgdmlldyBpbnN0YW5jZSBmcm9tIHRoZSB2aWV3J3MgRE9NXG4gICAgcmVwcmVzZW50YXRpb24uXG4gICAgKi9cbiAgICBzdGF0aWMgZmluZEZyb21ET00oZG9tKSB7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgbGV0IGNvbnRlbnQgPSBkb20ucXVlcnlTZWxlY3RvcihcIi5jbS1jb250ZW50XCIpO1xuICAgICAgICBsZXQgdGlsZSA9IGNvbnRlbnQgJiYgVGlsZS5nZXQoY29udGVudCkgfHwgVGlsZS5nZXQoZG9tKTtcbiAgICAgICAgcmV0dXJuICgoX2EgPSB0aWxlID09PSBudWxsIHx8IHRpbGUgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHRpbGUucm9vdCkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLnZpZXcpIHx8IG51bGw7XG4gICAgfVxufVxuLyoqXG5GYWNldCB0byBhZGQgYSBbc3R5bGVcbm1vZHVsZV0oaHR0cHM6Ly9naXRodWIuY29tL21hcmlqbmgvc3R5bGUtbW9kI2RvY3VtZW50YXRpb24pIHRvXG5hbiBlZGl0b3Igdmlldy4gVGhlIHZpZXcgd2lsbCBlbnN1cmUgdGhhdCB0aGUgbW9kdWxlIGlzXG5tb3VudGVkIGluIGl0cyBbZG9jdW1lbnRcbnJvb3RdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jdmlldy5FZGl0b3JWaWV3LmNvbnN0cnVjdG9yXmNvbmZpZy5yb290KS5cbiovXG5FZGl0b3JWaWV3LnN0eWxlTW9kdWxlID0gc3R5bGVNb2R1bGU7XG4vKipcbkFuIGlucHV0IGhhbmRsZXIgY2FuIG92ZXJyaWRlIHRoZSB3YXkgY2hhbmdlcyB0byB0aGUgZWRpdGFibGVcbkRPTSBjb250ZW50IGFyZSBoYW5kbGVkLiBIYW5kbGVycyBhcmUgcGFzc2VkIHRoZSBkb2N1bWVudFxucG9zaXRpb25zIGJldHdlZW4gd2hpY2ggdGhlIGNoYW5nZSB3YXMgZm91bmQsIGFuZCB0aGUgbmV3XG5jb250ZW50LiBXaGVuIG9uZSByZXR1cm5zIHRydWUsIG5vIGZ1cnRoZXIgaW5wdXQgaGFuZGxlcnMgYXJlXG5jYWxsZWQgYW5kIHRoZSBkZWZhdWx0IGJlaGF2aW9yIGlzIHByZXZlbnRlZC5cblxuVGhlIGBpbnNlcnRgIGFyZ3VtZW50IGNhbiBiZSB1c2VkIHRvIGdldCB0aGUgZGVmYXVsdCB0cmFuc2FjdGlvblxudGhhdCB3b3VsZCBiZSBhcHBsaWVkIGZvciB0aGlzIGlucHV0LiBUaGlzIGNhbiBiZSB1c2VmdWwgd2hlblxuZGlzcGF0Y2hpbmcgdGhlIGN1c3RvbSBiZWhhdmlvciBhcyBhIHNlcGFyYXRlIHRyYW5zYWN0aW9uLlxuKi9cbkVkaXRvclZpZXcuaW5wdXRIYW5kbGVyID0gaW5wdXRIYW5kbGVyO1xuLyoqXG5GdW5jdGlvbnMgcHJvdmlkZWQgaW4gdGhpcyBmYWNldCB3aWxsIGJlIHVzZWQgdG8gdHJhbnNmb3JtIHRleHRcbnBhc3RlZCBvciBkcm9wcGVkIGludG8gdGhlIGVkaXRvci5cbiovXG5FZGl0b3JWaWV3LmNsaXBib2FyZElucHV0RmlsdGVyID0gY2xpcGJvYXJkSW5wdXRGaWx0ZXI7XG4vKipcblRyYW5zZm9ybSB0ZXh0IGNvcGllZCBvciBkcmFnZ2VkIGZyb20gdGhlIGVkaXRvci5cbiovXG5FZGl0b3JWaWV3LmNsaXBib2FyZE91dHB1dEZpbHRlciA9IGNsaXBib2FyZE91dHB1dEZpbHRlcjtcbi8qKlxuU2Nyb2xsIGhhbmRsZXJzIGNhbiBvdmVycmlkZSBob3cgdGhpbmdzIGFyZSBzY3JvbGxlZCBpbnRvIHZpZXcuXG5JZiB0aGV5IHJldHVybiBgdHJ1ZWAsIG5vIGZ1cnRoZXIgaGFuZGxpbmcgaGFwcGVucyBmb3IgdGhlXG5zY3JvbGxpbmcuIElmIHRoZXkgcmV0dXJuIGZhbHNlLCB0aGUgZGVmYXVsdCBzY3JvbGwgYmVoYXZpb3IgaXNcbmFwcGxpZWQuIFNjcm9sbCBoYW5kbGVycyBzaG91bGQgbmV2ZXIgaW5pdGlhdGUgZWRpdG9yIHVwZGF0ZXMuXG4qL1xuRWRpdG9yVmlldy5zY3JvbGxIYW5kbGVyID0gc2Nyb2xsSGFuZGxlcjtcbi8qKlxuVGhpcyBmYWNldCBjYW4gYmUgdXNlZCB0byBwcm92aWRlIGZ1bmN0aW9ucyB0aGF0IGNyZWF0ZSBlZmZlY3RzXG50byBiZSBkaXNwYXRjaGVkIHdoZW4gdGhlIGVkaXRvcidzIGZvY3VzIHN0YXRlIGNoYW5nZXMuXG4qL1xuRWRpdG9yVmlldy5mb2N1c0NoYW5nZUVmZmVjdCA9IGZvY3VzQ2hhbmdlRWZmZWN0O1xuLyoqXG5CeSBkZWZhdWx0LCB0aGUgZWRpdG9yIGFzc3VtZXMgYWxsIGl0cyBjb250ZW50IGhhcyB0aGUgc2FtZVxuW3RleHQgZGlyZWN0aW9uXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI3ZpZXcuRGlyZWN0aW9uKS4gQ29uZmlndXJlIHRoaXMgd2l0aCBhIGB0cnVlYFxudmFsdWUgdG8gbWFrZSBpdCByZWFkIHRoZSB0ZXh0IGRpcmVjdGlvbiBvZiBldmVyeSAocmVuZGVyZWQpXG5saW5lIHNlcGFyYXRlbHkuXG4qL1xuRWRpdG9yVmlldy5wZXJMaW5lVGV4dERpcmVjdGlvbiA9IHBlckxpbmVUZXh0RGlyZWN0aW9uO1xuLyoqXG5BbGxvd3MgeW91IHRvIHByb3ZpZGUgYSBmdW5jdGlvbiB0aGF0IHNob3VsZCBiZSBjYWxsZWQgd2hlbiB0aGVcbmxpYnJhcnkgY2F0Y2hlcyBhbiBleGNlcHRpb24gZnJvbSBhbiBleHRlbnNpb24gKG1vc3RseSBmcm9tIHZpZXdcbnBsdWdpbnMsIGJ1dCBtYXkgYmUgdXNlZCBieSBvdGhlciBleHRlbnNpb25zIHRvIHJvdXRlIGV4Y2VwdGlvbnNcbmZyb20gdXNlci1jb2RlLXByb3ZpZGVkIGNhbGxiYWNrcykuIFRoaXMgaXMgbW9zdGx5IHVzZWZ1bCBmb3JcbmRlYnVnZ2luZyBhbmQgbG9nZ2luZy4gU2VlIFtgbG9nRXhjZXB0aW9uYF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyN2aWV3LmxvZ0V4Y2VwdGlvbikuXG4qL1xuRWRpdG9yVmlldy5leGNlcHRpb25TaW5rID0gZXhjZXB0aW9uU2luaztcbi8qKlxuQSBmYWNldCB0aGF0IGNhbiBiZSB1c2VkIHRvIHJlZ2lzdGVyIGEgZnVuY3Rpb24gdG8gYmUgY2FsbGVkXG5ldmVyeSB0aW1lIHRoZSB2aWV3IHVwZGF0ZXMuXG4qL1xuRWRpdG9yVmlldy51cGRhdGVMaXN0ZW5lciA9IHVwZGF0ZUxpc3RlbmVyO1xuLyoqXG5GYWNldCB0aGF0IGNvbnRyb2xzIHdoZXRoZXIgdGhlIGVkaXRvciBjb250ZW50IERPTSBpcyBlZGl0YWJsZS5cbldoZW4gaXRzIGhpZ2hlc3QtcHJlY2VkZW5jZSB2YWx1ZSBpcyBgZmFsc2VgLCB0aGUgZWxlbWVudCB3aWxsXG5ub3QgaGF2ZSBpdHMgYGNvbnRlbnRlZGl0YWJsZWAgYXR0cmlidXRlIHNldC4gKE5vdGUgdGhhdCB0aGlzXG5kb2Vzbid0IGFmZmVjdCBBUEkgY2FsbHMgdGhhdCBjaGFuZ2UgdGhlIGVkaXRvciBjb250ZW50LCBldmVuXG53aGVuIHRob3NlIGFyZSBib3VuZCB0byBrZXlzIG9yIGJ1dHRvbnMuIFNlZSB0aGVcbltgcmVhZE9ubHlgXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI3N0YXRlLkVkaXRvclN0YXRlLnJlYWRPbmx5KSBmYWNldCBmb3IgdGhhdC4pXG4qL1xuRWRpdG9yVmlldy5lZGl0YWJsZSA9IGVkaXRhYmxlO1xuLyoqXG5BbGxvd3MgeW91IHRvIGluZmx1ZW5jZSB0aGUgd2F5IG1vdXNlIHNlbGVjdGlvbiBoYXBwZW5zLiBUaGVcbmZ1bmN0aW9ucyBpbiB0aGlzIGZhY2V0IHdpbGwgYmUgY2FsbGVkIGZvciBhIGBtb3VzZWRvd25gIGV2ZW50XG5vbiB0aGUgZWRpdG9yLCBhbmQgY2FuIHJldHVybiBhbiBvYmplY3QgdGhhdCBvdmVycmlkZXMgdGhlIHdheSBhXG5zZWxlY3Rpb24gaXMgY29tcHV0ZWQgZnJvbSB0aGF0IG1vdXNlIGNsaWNrIG9yIGRyYWcuXG4qL1xuRWRpdG9yVmlldy5tb3VzZVNlbGVjdGlvblN0eWxlID0gbW91c2VTZWxlY3Rpb25TdHlsZTtcbi8qKlxuRmFjZXQgdXNlZCB0byBjb25maWd1cmUgd2hldGhlciBhIGdpdmVuIHNlbGVjdGlvbiBkcmFnIGV2ZW50XG5zaG91bGQgbW92ZSBvciBjb3B5IHRoZSBzZWxlY3Rpb24uIFRoZSBnaXZlbiBwcmVkaWNhdGUgd2lsbCBiZVxuY2FsbGVkIHdpdGggdGhlIGBtb3VzZWRvd25gIGV2ZW50LCBhbmQgY2FuIHJldHVybiBgdHJ1ZWAgd2hlblxudGhlIGRyYWcgc2hvdWxkIG1vdmUgdGhlIGNvbnRlbnQuXG4qL1xuRWRpdG9yVmlldy5kcmFnTW92ZXNTZWxlY3Rpb24gPSBkcmFnTW92ZXNTZWxlY3Rpb24kMTtcbi8qKlxuRmFjZXQgdXNlZCB0byBjb25maWd1cmUgd2hldGhlciBhIGdpdmVuIHNlbGVjdGluZyBjbGljayBhZGRzIGFcbm5ldyByYW5nZSB0byB0aGUgZXhpc3Rpbmcgc2VsZWN0aW9uIG9yIHJlcGxhY2VzIGl0IGVudGlyZWx5LiBUaGVcbmRlZmF1bHQgYmVoYXZpb3IgaXMgdG8gY2hlY2sgYGV2ZW50Lm1ldGFLZXlgIG9uIG1hY09TLCBhbmRcbmBldmVudC5jdHJsS2V5YCBlbHNld2hlcmUuXG4qL1xuRWRpdG9yVmlldy5jbGlja0FkZHNTZWxlY3Rpb25SYW5nZSA9IGNsaWNrQWRkc1NlbGVjdGlvblJhbmdlO1xuLyoqXG5BIGZhY2V0IHRoYXQgZGV0ZXJtaW5lcyB3aGljaCBbZGVjb3JhdGlvbnNdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jdmlldy5EZWNvcmF0aW9uKVxuYXJlIHNob3duIGluIHRoZSB2aWV3LiBEZWNvcmF0aW9ucyBjYW4gYmUgcHJvdmlkZWQgaW4gdHdvXG53YXlz4oCUZGlyZWN0bHksIG9yIHZpYSBhIGZ1bmN0aW9uIHRoYXQgdGFrZXMgYW4gZWRpdG9yIHZpZXcuXG5cbk9ubHkgZGVjb3JhdGlvbiBzZXRzIHByb3ZpZGVkIGRpcmVjdGx5IGFyZSBhbGxvd2VkIHRvIGluZmx1ZW5jZVxudGhlIGVkaXRvcidzIHZlcnRpY2FsIGxheW91dCBzdHJ1Y3R1cmUuIFRoZSBvbmVzIHByb3ZpZGVkIGFzXG5mdW5jdGlvbnMgYXJlIGNhbGxlZCBfYWZ0ZXJfIHRoZSBuZXcgdmlld3BvcnQgaGFzIGJlZW4gY29tcHV0ZWQsXG5hbmQgdGh1cyAqKm11c3Qgbm90KiogaW50cm9kdWNlIGJsb2NrIHdpZGdldHMgb3IgcmVwbGFjaW5nXG5kZWNvcmF0aW9ucyB0aGF0IGNvdmVyIGxpbmUgYnJlYWtzLlxuXG5JZiB5b3Ugd2FudCBkZWNvcmF0ZWQgcmFuZ2VzIHRvIGJlaGF2ZSBsaWtlIGF0b21pYyB1bml0cyBmb3JcbmN1cnNvciBtb3Rpb24gYW5kIGRlbGV0aW9uIHB1cnBvc2VzLCBhbHNvIHByb3ZpZGUgdGhlIHJhbmdlIHNldFxuY29udGFpbmluZyB0aGUgZGVjb3JhdGlvbnMgdG9cbltgRWRpdG9yVmlldy5hdG9taWNSYW5nZXNgXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI3ZpZXcuRWRpdG9yVmlld15hdG9taWNSYW5nZXMpLlxuKi9cbkVkaXRvclZpZXcuZGVjb3JhdGlvbnMgPSBkZWNvcmF0aW9ucztcbi8qKlxuW0Jsb2NrIHdyYXBwZXJzXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI3ZpZXcuQmxvY2tXcmFwcGVyKSBwcm92aWRlIGEgd2F5IHRvIGFkZCBET01cbnN0cnVjdHVyZSBhcm91bmQgZWRpdG9yIGxpbmVzIGFuZCBibG9jayB3aWRnZXRzLiBTZXRzIG9mXG53cmFwcGVycyBhcmUgcHJvdmlkZWQgaW4gYSBzaW1pbGFyIHdheSB0byBkZWNvcmF0aW9ucywgYW5kIGFyZVxubmVzdGVkIGluIGEgc2ltaWxhciB3YXkgd2hlbiB0aGV5IG92ZXJsYXAuIEEgd3JhcHBlciBhZmZlY3RzIGFsbFxubGluZXMgYW5kIGJsb2NrIHdpZGdldHMgdGhhdCBzdGFydCBpbnNpZGUgaXRzIHJhbmdlLlxuKi9cbkVkaXRvclZpZXcuYmxvY2tXcmFwcGVycyA9IGJsb2NrV3JhcHBlcnM7XG4vKipcbkZhY2V0IHRoYXQgd29ya3MgbXVjaCBsaWtlXG5bYGRlY29yYXRpb25zYF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyN2aWV3LkVkaXRvclZpZXdeZGVjb3JhdGlvbnMpLCBidXQgcHV0cyBpdHNcbmlucHV0cyBhdCB0aGUgdmVyeSBib3R0b20gb2YgdGhlIHByZWNlZGVuY2Ugc3RhY2ssIG1lYW5pbmcgbWFya1xuZGVjb3JhdGlvbnMgcHJvdmlkZWQgaGVyZSB3aWxsIG9ubHkgYmUgc3BsaXQgYnkgb3RoZXIsIHBhcnRpYWxseVxub3ZlcmxhcHBpbmcgYG91dGVyRGVjb3JhdGlvbnNgIHJhbmdlcywgYW5kIHdyYXAgYXJvdW5kIGFsbFxucmVndWxhciBkZWNvcmF0aW9ucy4gVXNlIHRoaXMgZm9yIG1hcmsgZWxlbWVudHMgdGhhdCBzaG91bGQsIGFzXG5tdWNoIGFzIHBvc3NpYmxlLCByZW1haW4gaW4gb25lIHBpZWNlLlxuKi9cbkVkaXRvclZpZXcub3V0ZXJEZWNvcmF0aW9ucyA9IG91dGVyRGVjb3JhdGlvbnM7XG4vKipcblVzZWQgdG8gcHJvdmlkZSByYW5nZXMgdGhhdCBzaG91bGQgYmUgdHJlYXRlZCBhcyBhdG9tcyBhcyBmYXIgYXNcbmN1cnNvciBtb3Rpb24gaXMgY29uY2VybmVkLiBUaGlzIGNhdXNlcyBtZXRob2RzIGxpa2VcbltgbW92ZUJ5Q2hhcmBdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jdmlldy5FZGl0b3JWaWV3Lm1vdmVCeUNoYXIpIGFuZFxuW2Btb3ZlVmVydGljYWxseWBdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jdmlldy5FZGl0b3JWaWV3Lm1vdmVWZXJ0aWNhbGx5KSAoYW5kIHRoZVxuY29tbWFuZHMgYnVpbHQgb24gdG9wIG9mIHRoZW0pIHRvIHNraXAgYWNyb3NzIHN1Y2ggcmVnaW9ucyB3aGVuXG5hIHNlbGVjdGlvbiBlbmRwb2ludCB3b3VsZCBlbnRlciB0aGVtLiBUaGlzIGRvZXMgX25vdF8gcHJldmVudFxuZGlyZWN0IHByb2dyYW1tYXRpYyBbc2VsZWN0aW9uXG51cGRhdGVzXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI3N0YXRlLlRyYW5zYWN0aW9uU3BlYy5zZWxlY3Rpb24pIGZyb20gbW92aW5nIGludG8gc3VjaFxucmVnaW9ucy5cbiovXG5FZGl0b3JWaWV3LmF0b21pY1JhbmdlcyA9IGF0b21pY1Jhbmdlcztcbi8qKlxuV2hlbiByYW5nZSBkZWNvcmF0aW9ucyBhZGQgYSBgdW5pY29kZS1iaWRpOiBpc29sYXRlYCBzdHlsZSwgdGhleVxuc2hvdWxkIGFsc28gaW5jbHVkZSBhXG5bYGJpZGlJc29sYXRlYF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyN2aWV3Lk1hcmtEZWNvcmF0aW9uU3BlYy5iaWRpSXNvbGF0ZSkgcHJvcGVydHlcbmluIHRoZWlyIGRlY29yYXRpb24gc3BlYywgYW5kIGJlIGV4cG9zZWQgdGhyb3VnaCB0aGlzIGZhY2V0LCBzb1xudGhhdCB0aGUgZWRpdG9yIGNhbiBjb21wdXRlIHRoZSBwcm9wZXIgdGV4dCBvcmRlci4gKE90aGVyIHZhbHVlc1xuZm9yIGB1bmljb2RlLWJpZGlgLCBleGNlcHQgb2YgY291cnNlIGBub3JtYWxgLCBhcmUgbm90XG5zdXBwb3J0ZWQuKVxuKi9cbkVkaXRvclZpZXcuYmlkaUlzb2xhdGVkUmFuZ2VzID0gYmlkaUlzb2xhdGVkUmFuZ2VzO1xuLyoqXG5GYWNldCB0aGF0IGFsbG93cyBleHRlbnNpb25zIHRvIHByb3ZpZGUgYWRkaXRpb25hbCBzY3JvbGxcbm1hcmdpbnMgKHNwYWNlIGFyb3VuZCB0aGUgc2lkZXMgb2YgdGhlIHNjcm9sbGluZyBlbGVtZW50IHRoYXRcbnNob3VsZCBiZSBjb25zaWRlcmVkIGludmlzaWJsZSkuIFRoaXMgY2FuIGJlIHVzZWZ1bCB3aGVuIHRoZVxucGx1Z2luIGludHJvZHVjZXMgZWxlbWVudHMgdGhhdCBjb3ZlciBwYXJ0IG9mIHRoYXQgZWxlbWVudCAoZm9yXG5leGFtcGxlIGEgaG9yaXpvbnRhbGx5IGZpeGVkIGd1dHRlcikuXG4qL1xuRWRpdG9yVmlldy5zY3JvbGxNYXJnaW5zID0gc2Nyb2xsTWFyZ2lucztcbi8qKlxuVGhpcyBmYWNldCByZWNvcmRzIHdoZXRoZXIgYSBkYXJrIHRoZW1lIGlzIGFjdGl2ZS4gVGhlIGV4dGVuc2lvblxucmV0dXJuZWQgYnkgW2B0aGVtZWBdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jdmlldy5FZGl0b3JWaWV3XnRoZW1lKSBhdXRvbWF0aWNhbGx5XG5pbmNsdWRlcyBhbiBpbnN0YW5jZSBvZiB0aGlzIHdoZW4gdGhlIGBkYXJrYCBvcHRpb24gaXMgc2V0IHRvXG50cnVlLlxuKi9cbkVkaXRvclZpZXcuZGFya1RoZW1lID0gZGFya1RoZW1lO1xuLyoqXG5Qcm92aWRlcyBhIENvbnRlbnQgU2VjdXJpdHkgUG9saWN5IG5vbmNlIHRvIHVzZSB3aGVuIGNyZWF0aW5nXG50aGUgc3R5bGUgc2hlZXRzIGZvciB0aGUgZWRpdG9yLiBIb2xkcyB0aGUgZW1wdHkgc3RyaW5nIHdoZW4gbm9cbm5vbmNlIGhhcyBiZWVuIHByb3ZpZGVkLlxuKi9cbkVkaXRvclZpZXcuY3NwTm9uY2UgPSAvKkBfX1BVUkVfXyovRmFjZXQuZGVmaW5lKHsgY29tYmluZTogdmFsdWVzID0+IHZhbHVlcy5sZW5ndGggPyB2YWx1ZXNbMF0gOiBcIlwiIH0pO1xuLyoqXG5GYWNldCB0aGF0IHByb3ZpZGVzIGFkZGl0aW9uYWwgRE9NIGF0dHJpYnV0ZXMgZm9yIHRoZSBlZGl0b3Inc1xuZWRpdGFibGUgRE9NIGVsZW1lbnQuXG4qL1xuRWRpdG9yVmlldy5jb250ZW50QXR0cmlidXRlcyA9IGNvbnRlbnRBdHRyaWJ1dGVzO1xuLyoqXG5GYWNldCB0aGF0IHByb3ZpZGVzIERPTSBhdHRyaWJ1dGVzIGZvciB0aGUgZWRpdG9yJ3Mgb3V0ZXJcbmVsZW1lbnQuXG4qL1xuRWRpdG9yVmlldy5lZGl0b3JBdHRyaWJ1dGVzID0gZWRpdG9yQXR0cmlidXRlcztcbi8qKlxuQW4gZXh0ZW5zaW9uIHRoYXQgZW5hYmxlcyBsaW5lIHdyYXBwaW5nIGluIHRoZSBlZGl0b3IgKGJ5XG5zZXR0aW5nIENTUyBgd2hpdGUtc3BhY2VgIHRvIGBwcmUtd3JhcGAgaW4gdGhlIGNvbnRlbnQpLlxuKi9cbkVkaXRvclZpZXcubGluZVdyYXBwaW5nID0gLypAX19QVVJFX18qL0VkaXRvclZpZXcuY29udGVudEF0dHJpYnV0ZXMub2YoeyBcImNsYXNzXCI6IFwiY20tbGluZVdyYXBwaW5nXCIgfSk7XG4vKipcblN0YXRlIGVmZmVjdCB1c2VkIHRvIGluY2x1ZGUgc2NyZWVuIHJlYWRlciBhbm5vdW5jZW1lbnRzIGluIGFcbnRyYW5zYWN0aW9uLiBUaGVzZSB3aWxsIGJlIGFkZGVkIHRvIHRoZSBET00gaW4gYSB2aXN1YWxseSBoaWRkZW5cbmVsZW1lbnQgd2l0aCBgYXJpYS1saXZlPVwicG9saXRlXCJgIHNldCwgYW5kIHNob3VsZCBiZSB1c2VkIHRvXG5kZXNjcmliZSBlZmZlY3RzIHRoYXQgYXJlIHZpc3VhbGx5IG9idmlvdXMgYnV0IG1heSBub3QgYmVcbm5vdGljZWQgYnkgc2NyZWVuIHJlYWRlciB1c2VycyAoc3VjaCBhcyBtb3ZpbmcgdG8gdGhlIG5leHRcbnNlYXJjaCBtYXRjaCkuXG4qL1xuRWRpdG9yVmlldy5hbm5vdW5jZSA9IC8qQF9fUFVSRV9fKi9TdGF0ZUVmZmVjdC5kZWZpbmUoKTtcbi8vIE1heGltdW0gbGluZSBsZW5ndGggZm9yIHdoaWNoIHdlIGNvbXB1dGUgYWNjdXJhdGUgYmlkaSBpbmZvXG5jb25zdCBNYXhCaWRpTGluZSA9IDQwOTY7XG5jb25zdCBCYWRNZWFzdXJlID0ge307XG5jbGFzcyBDYWNoZWRPcmRlciB7XG4gICAgY29uc3RydWN0b3IoZnJvbSwgdG8sIGRpciwgaXNvbGF0ZXMsIGZyZXNoLCBvcmRlcikge1xuICAgICAgICB0aGlzLmZyb20gPSBmcm9tO1xuICAgICAgICB0aGlzLnRvID0gdG87XG4gICAgICAgIHRoaXMuZGlyID0gZGlyO1xuICAgICAgICB0aGlzLmlzb2xhdGVzID0gaXNvbGF0ZXM7XG4gICAgICAgIHRoaXMuZnJlc2ggPSBmcmVzaDtcbiAgICAgICAgdGhpcy5vcmRlciA9IG9yZGVyO1xuICAgIH1cbiAgICBzdGF0aWMgdXBkYXRlKGNhY2hlLCBjaGFuZ2VzKSB7XG4gICAgICAgIGlmIChjaGFuZ2VzLmVtcHR5ICYmICFjYWNoZS5zb21lKGMgPT4gYy5mcmVzaCkpXG4gICAgICAgICAgICByZXR1cm4gY2FjaGU7XG4gICAgICAgIGxldCByZXN1bHQgPSBbXSwgbGFzdERpciA9IGNhY2hlLmxlbmd0aCA/IGNhY2hlW2NhY2hlLmxlbmd0aCAtIDFdLmRpciA6IERpcmVjdGlvbi5MVFI7XG4gICAgICAgIGZvciAobGV0IGkgPSBNYXRoLm1heCgwLCBjYWNoZS5sZW5ndGggLSAxMCk7IGkgPCBjYWNoZS5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgbGV0IGVudHJ5ID0gY2FjaGVbaV07XG4gICAgICAgICAgICBpZiAoZW50cnkuZGlyID09IGxhc3REaXIgJiYgIWNoYW5nZXMudG91Y2hlc1JhbmdlKGVudHJ5LmZyb20sIGVudHJ5LnRvKSlcbiAgICAgICAgICAgICAgICByZXN1bHQucHVzaChuZXcgQ2FjaGVkT3JkZXIoY2hhbmdlcy5tYXBQb3MoZW50cnkuZnJvbSwgMSksIGNoYW5nZXMubWFwUG9zKGVudHJ5LnRvLCAtMSksIGVudHJ5LmRpciwgZW50cnkuaXNvbGF0ZXMsIGZhbHNlLCBlbnRyeS5vcmRlcikpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxufVxuZnVuY3Rpb24gYXR0cnNGcm9tRmFjZXQodmlldywgZmFjZXQsIGJhc2UpIHtcbiAgICBmb3IgKGxldCBzb3VyY2VzID0gdmlldy5zdGF0ZS5mYWNldChmYWNldCksIGkgPSBzb3VyY2VzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgICAgIGxldCBzb3VyY2UgPSBzb3VyY2VzW2ldLCB2YWx1ZSA9IHR5cGVvZiBzb3VyY2UgPT0gXCJmdW5jdGlvblwiID8gc291cmNlKHZpZXcpIDogc291cmNlO1xuICAgICAgICBpZiAodmFsdWUpXG4gICAgICAgICAgICBjb21iaW5lQXR0cnModmFsdWUsIGJhc2UpO1xuICAgIH1cbiAgICByZXR1cm4gYmFzZTtcbn1cblxuY29uc3QgY3VycmVudFBsYXRmb3JtID0gYnJvd3Nlci5tYWMgPyBcIm1hY1wiIDogYnJvd3Nlci53aW5kb3dzID8gXCJ3aW5cIiA6IGJyb3dzZXIubGludXggPyBcImxpbnV4XCIgOiBcImtleVwiO1xuZnVuY3Rpb24gbm9ybWFsaXplS2V5TmFtZShuYW1lLCBwbGF0Zm9ybSkge1xuICAgIGNvbnN0IHBhcnRzID0gbmFtZS5zcGxpdCgvLSg/ISQpLyk7XG4gICAgbGV0IHJlc3VsdCA9IHBhcnRzW3BhcnRzLmxlbmd0aCAtIDFdO1xuICAgIGlmIChyZXN1bHQgPT0gXCJTcGFjZVwiKVxuICAgICAgICByZXN1bHQgPSBcIiBcIjtcbiAgICBsZXQgYWx0LCBjdHJsLCBzaGlmdCwgbWV0YTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHBhcnRzLmxlbmd0aCAtIDE7ICsraSkge1xuICAgICAgICBjb25zdCBtb2QgPSBwYXJ0c1tpXTtcbiAgICAgICAgaWYgKC9eKGNtZHxtZXRhfG0pJC9pLnRlc3QobW9kKSlcbiAgICAgICAgICAgIG1ldGEgPSB0cnVlO1xuICAgICAgICBlbHNlIGlmICgvXmEobHQpPyQvaS50ZXN0KG1vZCkpXG4gICAgICAgICAgICBhbHQgPSB0cnVlO1xuICAgICAgICBlbHNlIGlmICgvXihjfGN0cmx8Y29udHJvbCkkL2kudGVzdChtb2QpKVxuICAgICAgICAgICAgY3RybCA9IHRydWU7XG4gICAgICAgIGVsc2UgaWYgKC9ecyhoaWZ0KT8kL2kudGVzdChtb2QpKVxuICAgICAgICAgICAgc2hpZnQgPSB0cnVlO1xuICAgICAgICBlbHNlIGlmICgvXm1vZCQvaS50ZXN0KG1vZCkpIHtcbiAgICAgICAgICAgIGlmIChwbGF0Zm9ybSA9PSBcIm1hY1wiKVxuICAgICAgICAgICAgICAgIG1ldGEgPSB0cnVlO1xuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgIGN0cmwgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2VcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlVucmVjb2duaXplZCBtb2RpZmllciBuYW1lOiBcIiArIG1vZCk7XG4gICAgfVxuICAgIGlmIChhbHQpXG4gICAgICAgIHJlc3VsdCA9IFwiQWx0LVwiICsgcmVzdWx0O1xuICAgIGlmIChjdHJsKVxuICAgICAgICByZXN1bHQgPSBcIkN0cmwtXCIgKyByZXN1bHQ7XG4gICAgaWYgKG1ldGEpXG4gICAgICAgIHJlc3VsdCA9IFwiTWV0YS1cIiArIHJlc3VsdDtcbiAgICBpZiAoc2hpZnQpXG4gICAgICAgIHJlc3VsdCA9IFwiU2hpZnQtXCIgKyByZXN1bHQ7XG4gICAgcmV0dXJuIHJlc3VsdDtcbn1cbmZ1bmN0aW9uIG1vZGlmaWVycyhuYW1lLCBldmVudCwgc2hpZnQpIHtcbiAgICBpZiAoZXZlbnQuYWx0S2V5KVxuICAgICAgICBuYW1lID0gXCJBbHQtXCIgKyBuYW1lO1xuICAgIGlmIChldmVudC5jdHJsS2V5KVxuICAgICAgICBuYW1lID0gXCJDdHJsLVwiICsgbmFtZTtcbiAgICBpZiAoZXZlbnQubWV0YUtleSlcbiAgICAgICAgbmFtZSA9IFwiTWV0YS1cIiArIG5hbWU7XG4gICAgaWYgKHNoaWZ0ICE9PSBmYWxzZSAmJiBldmVudC5zaGlmdEtleSlcbiAgICAgICAgbmFtZSA9IFwiU2hpZnQtXCIgKyBuYW1lO1xuICAgIHJldHVybiBuYW1lO1xufVxuY29uc3QgaGFuZGxlS2V5RXZlbnRzID0gLypAX19QVVJFX18qL1ByZWMuZGVmYXVsdCgvKkBfX1BVUkVfXyovRWRpdG9yVmlldy5kb21FdmVudEhhbmRsZXJzKHtcbiAgICBrZXlkb3duKGV2ZW50LCB2aWV3KSB7XG4gICAgICAgIHJldHVybiBydW5IYW5kbGVycyhnZXRLZXltYXAodmlldy5zdGF0ZSksIGV2ZW50LCB2aWV3LCBcImVkaXRvclwiKTtcbiAgICB9XG59KSk7XG4vKipcbkZhY2V0IHVzZWQgZm9yIHJlZ2lzdGVyaW5nIGtleW1hcHMuXG5cbllvdSBjYW4gYWRkIG11bHRpcGxlIGtleW1hcHMgdG8gYW4gZWRpdG9yLiBUaGVpciBwcmlvcml0aWVzXG5kZXRlcm1pbmUgdGhlaXIgcHJlY2VkZW5jZSAodGhlIG9uZXMgc3BlY2lmaWVkIGVhcmx5IG9yIHdpdGggaGlnaFxucHJpb3JpdHkgZ2V0IGNoZWNrZWQgZmlyc3QpLiBXaGVuIGEgaGFuZGxlciBoYXMgcmV0dXJuZWQgYHRydWVgXG5mb3IgYSBnaXZlbiBrZXksIG5vIGZ1cnRoZXIgaGFuZGxlcnMgYXJlIGNhbGxlZC5cbiovXG5jb25zdCBrZXltYXAgPSAvKkBfX1BVUkVfXyovRmFjZXQuZGVmaW5lKHsgZW5hYmxlczogaGFuZGxlS2V5RXZlbnRzIH0pO1xuY29uc3QgS2V5bWFwcyA9IC8qQF9fUFVSRV9fKi9uZXcgV2Vha01hcCgpO1xuLy8gVGhpcyBpcyBoaWRkZW4gYmVoaW5kIGFuIGluZGlyZWN0aW9uLCByYXRoZXIgdGhhbiBkaXJlY3RseSBjb21wdXRlZFxuLy8gYnkgdGhlIGZhY2V0LCB0byBrZWVwIGludGVybmFsIHR5cGVzIG91dCBvZiB0aGUgZmFjZXQncyB0eXBlLlxuZnVuY3Rpb24gZ2V0S2V5bWFwKHN0YXRlKSB7XG4gICAgbGV0IGJpbmRpbmdzID0gc3RhdGUuZmFjZXQoa2V5bWFwKTtcbiAgICBsZXQgbWFwID0gS2V5bWFwcy5nZXQoYmluZGluZ3MpO1xuICAgIGlmICghbWFwKVxuICAgICAgICBLZXltYXBzLnNldChiaW5kaW5ncywgbWFwID0gYnVpbGRLZXltYXAoYmluZGluZ3MucmVkdWNlKChhLCBiKSA9PiBhLmNvbmNhdChiKSwgW10pKSk7XG4gICAgcmV0dXJuIG1hcDtcbn1cbi8qKlxuUnVuIHRoZSBrZXkgaGFuZGxlcnMgcmVnaXN0ZXJlZCBmb3IgYSBnaXZlbiBzY29wZS4gVGhlIGV2ZW50XG5vYmplY3Qgc2hvdWxkIGJlIGEgYFwia2V5ZG93blwiYCBldmVudC4gUmV0dXJucyB0cnVlIGlmIGFueSBvZiB0aGVcbmhhbmRsZXJzIGhhbmRsZWQgaXQuXG4qL1xuZnVuY3Rpb24gcnVuU2NvcGVIYW5kbGVycyh2aWV3LCBldmVudCwgc2NvcGUpIHtcbiAgICByZXR1cm4gcnVuSGFuZGxlcnMoZ2V0S2V5bWFwKHZpZXcuc3RhdGUpLCBldmVudCwgdmlldywgc2NvcGUpO1xufVxubGV0IHN0b3JlZFByZWZpeCA9IG51bGw7XG5jb25zdCBQcmVmaXhUaW1lb3V0ID0gNDAwMDtcbmZ1bmN0aW9uIGJ1aWxkS2V5bWFwKGJpbmRpbmdzLCBwbGF0Zm9ybSA9IGN1cnJlbnRQbGF0Zm9ybSkge1xuICAgIGxldCBib3VuZCA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gICAgbGV0IGlzUHJlZml4ID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgICBsZXQgY2hlY2tQcmVmaXggPSAobmFtZSwgaXMpID0+IHtcbiAgICAgICAgbGV0IGN1cnJlbnQgPSBpc1ByZWZpeFtuYW1lXTtcbiAgICAgICAgaWYgKGN1cnJlbnQgPT0gbnVsbClcbiAgICAgICAgICAgIGlzUHJlZml4W25hbWVdID0gaXM7XG4gICAgICAgIGVsc2UgaWYgKGN1cnJlbnQgIT0gaXMpXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJLZXkgYmluZGluZyBcIiArIG5hbWUgKyBcIiBpcyB1c2VkIGJvdGggYXMgYSByZWd1bGFyIGJpbmRpbmcgYW5kIGFzIGEgbXVsdGktc3Ryb2tlIHByZWZpeFwiKTtcbiAgICB9O1xuICAgIGxldCBhZGQgPSAoc2NvcGUsIGtleSwgY29tbWFuZCwgcHJldmVudERlZmF1bHQsIHN0b3BQcm9wYWdhdGlvbikgPT4ge1xuICAgICAgICB2YXIgX2EsIF9iO1xuICAgICAgICBsZXQgc2NvcGVPYmogPSBib3VuZFtzY29wZV0gfHwgKGJvdW5kW3Njb3BlXSA9IE9iamVjdC5jcmVhdGUobnVsbCkpO1xuICAgICAgICBsZXQgcGFydHMgPSBrZXkuc3BsaXQoLyAoPyEkKS8pLm1hcChrID0+IG5vcm1hbGl6ZUtleU5hbWUoaywgcGxhdGZvcm0pKTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDE7IGkgPCBwYXJ0cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgbGV0IHByZWZpeCA9IHBhcnRzLnNsaWNlKDAsIGkpLmpvaW4oXCIgXCIpO1xuICAgICAgICAgICAgY2hlY2tQcmVmaXgocHJlZml4LCB0cnVlKTtcbiAgICAgICAgICAgIGlmICghc2NvcGVPYmpbcHJlZml4XSlcbiAgICAgICAgICAgICAgICBzY29wZU9ialtwcmVmaXhdID0ge1xuICAgICAgICAgICAgICAgICAgICBwcmV2ZW50RGVmYXVsdDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgc3RvcFByb3BhZ2F0aW9uOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgcnVuOiBbKHZpZXcpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgb3VyT2JqID0gc3RvcmVkUHJlZml4ID0geyB2aWV3LCBwcmVmaXgsIHNjb3BlIH07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7IGlmIChzdG9yZWRQcmVmaXggPT0gb3VyT2JqKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdG9yZWRQcmVmaXggPSBudWxsOyB9LCBQcmVmaXhUaW1lb3V0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1dXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICBsZXQgZnVsbCA9IHBhcnRzLmpvaW4oXCIgXCIpO1xuICAgICAgICBjaGVja1ByZWZpeChmdWxsLCBmYWxzZSk7XG4gICAgICAgIGxldCBiaW5kaW5nID0gc2NvcGVPYmpbZnVsbF0gfHwgKHNjb3BlT2JqW2Z1bGxdID0ge1xuICAgICAgICAgICAgcHJldmVudERlZmF1bHQ6IGZhbHNlLFxuICAgICAgICAgICAgc3RvcFByb3BhZ2F0aW9uOiBmYWxzZSxcbiAgICAgICAgICAgIHJ1bjogKChfYiA9IChfYSA9IHNjb3BlT2JqLl9hbnkpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5ydW4pID09PSBudWxsIHx8IF9iID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYi5zbGljZSgpKSB8fCBbXVxuICAgICAgICB9KTtcbiAgICAgICAgaWYgKGNvbW1hbmQpXG4gICAgICAgICAgICBiaW5kaW5nLnJ1bi5wdXNoKGNvbW1hbmQpO1xuICAgICAgICBpZiAocHJldmVudERlZmF1bHQpXG4gICAgICAgICAgICBiaW5kaW5nLnByZXZlbnREZWZhdWx0ID0gdHJ1ZTtcbiAgICAgICAgaWYgKHN0b3BQcm9wYWdhdGlvbilcbiAgICAgICAgICAgIGJpbmRpbmcuc3RvcFByb3BhZ2F0aW9uID0gdHJ1ZTtcbiAgICB9O1xuICAgIGZvciAobGV0IGIgb2YgYmluZGluZ3MpIHtcbiAgICAgICAgbGV0IHNjb3BlcyA9IGIuc2NvcGUgPyBiLnNjb3BlLnNwbGl0KFwiIFwiKSA6IFtcImVkaXRvclwiXTtcbiAgICAgICAgaWYgKGIuYW55KVxuICAgICAgICAgICAgZm9yIChsZXQgc2NvcGUgb2Ygc2NvcGVzKSB7XG4gICAgICAgICAgICAgICAgbGV0IHNjb3BlT2JqID0gYm91bmRbc2NvcGVdIHx8IChib3VuZFtzY29wZV0gPSBPYmplY3QuY3JlYXRlKG51bGwpKTtcbiAgICAgICAgICAgICAgICBpZiAoIXNjb3BlT2JqLl9hbnkpXG4gICAgICAgICAgICAgICAgICAgIHNjb3BlT2JqLl9hbnkgPSB7IHByZXZlbnREZWZhdWx0OiBmYWxzZSwgc3RvcFByb3BhZ2F0aW9uOiBmYWxzZSwgcnVuOiBbXSB9O1xuICAgICAgICAgICAgICAgIGxldCB7IGFueSB9ID0gYjtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBrZXkgaW4gc2NvcGVPYmopXG4gICAgICAgICAgICAgICAgICAgIHNjb3BlT2JqW2tleV0ucnVuLnB1c2godmlldyA9PiBhbnkodmlldywgY3VycmVudEtleUV2ZW50KSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIGxldCBuYW1lID0gYltwbGF0Zm9ybV0gfHwgYi5rZXk7XG4gICAgICAgIGlmICghbmFtZSlcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICBmb3IgKGxldCBzY29wZSBvZiBzY29wZXMpIHtcbiAgICAgICAgICAgIGFkZChzY29wZSwgbmFtZSwgYi5ydW4sIGIucHJldmVudERlZmF1bHQsIGIuc3RvcFByb3BhZ2F0aW9uKTtcbiAgICAgICAgICAgIGlmIChiLnNoaWZ0KVxuICAgICAgICAgICAgICAgIGFkZChzY29wZSwgXCJTaGlmdC1cIiArIG5hbWUsIGIuc2hpZnQsIGIucHJldmVudERlZmF1bHQsIGIuc3RvcFByb3BhZ2F0aW9uKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gYm91bmQ7XG59XG5sZXQgY3VycmVudEtleUV2ZW50ID0gbnVsbDtcbmZ1bmN0aW9uIHJ1bkhhbmRsZXJzKG1hcCwgZXZlbnQsIHZpZXcsIHNjb3BlKSB7XG4gICAgY3VycmVudEtleUV2ZW50ID0gZXZlbnQ7XG4gICAgbGV0IG5hbWUgPSBrZXlOYW1lKGV2ZW50KTtcbiAgICBsZXQgY2hhckNvZGUgPSBjb2RlUG9pbnRBdChuYW1lLCAwKSwgaXNDaGFyID0gY29kZVBvaW50U2l6ZShjaGFyQ29kZSkgPT0gbmFtZS5sZW5ndGggJiYgbmFtZSAhPSBcIiBcIjtcbiAgICBsZXQgcHJlZml4ID0gXCJcIiwgaGFuZGxlZCA9IGZhbHNlLCBwcmV2ZW50ZWQgPSBmYWxzZSwgc3RvcFByb3BhZ2F0aW9uID0gZmFsc2U7XG4gICAgaWYgKHN0b3JlZFByZWZpeCAmJiBzdG9yZWRQcmVmaXgudmlldyA9PSB2aWV3ICYmIHN0b3JlZFByZWZpeC5zY29wZSA9PSBzY29wZSkge1xuICAgICAgICBwcmVmaXggPSBzdG9yZWRQcmVmaXgucHJlZml4ICsgXCIgXCI7XG4gICAgICAgIGlmIChtb2RpZmllckNvZGVzLmluZGV4T2YoZXZlbnQua2V5Q29kZSkgPCAwKSB7XG4gICAgICAgICAgICBwcmV2ZW50ZWQgPSB0cnVlO1xuICAgICAgICAgICAgc3RvcmVkUHJlZml4ID0gbnVsbDtcbiAgICAgICAgfVxuICAgIH1cbiAgICBsZXQgcmFuID0gbmV3IFNldDtcbiAgICBsZXQgcnVuRm9yID0gKGJpbmRpbmcpID0+IHtcbiAgICAgICAgaWYgKGJpbmRpbmcpIHtcbiAgICAgICAgICAgIGZvciAobGV0IGNtZCBvZiBiaW5kaW5nLnJ1bilcbiAgICAgICAgICAgICAgICBpZiAoIXJhbi5oYXMoY21kKSkge1xuICAgICAgICAgICAgICAgICAgICByYW4uYWRkKGNtZCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjbWQodmlldykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChiaW5kaW5nLnN0b3BQcm9wYWdhdGlvbilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdG9wUHJvcGFnYXRpb24gPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoYmluZGluZy5wcmV2ZW50RGVmYXVsdCkge1xuICAgICAgICAgICAgICAgIGlmIChiaW5kaW5nLnN0b3BQcm9wYWdhdGlvbilcbiAgICAgICAgICAgICAgICAgICAgc3RvcFByb3BhZ2F0aW9uID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBwcmV2ZW50ZWQgPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9O1xuICAgIGxldCBzY29wZU9iaiA9IG1hcFtzY29wZV0sIGJhc2VOYW1lLCBzaGlmdE5hbWU7XG4gICAgaWYgKHNjb3BlT2JqKSB7XG4gICAgICAgIGlmIChydW5Gb3Ioc2NvcGVPYmpbcHJlZml4ICsgbW9kaWZpZXJzKG5hbWUsIGV2ZW50LCAhaXNDaGFyKV0pKSB7XG4gICAgICAgICAgICBoYW5kbGVkID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChpc0NoYXIgJiYgKGV2ZW50LmFsdEtleSB8fCBldmVudC5tZXRhS2V5IHx8IGV2ZW50LmN0cmxLZXkpICYmXG4gICAgICAgICAgICAvLyBDdHJsLUFsdCBtYXkgYmUgdXNlZCBmb3IgQWx0R3Igb24gV2luZG93c1xuICAgICAgICAgICAgIShicm93c2VyLndpbmRvd3MgJiYgZXZlbnQuY3RybEtleSAmJiBldmVudC5hbHRLZXkpICYmXG4gICAgICAgICAgICAvLyBBbHQtY29tYmluYXRpb25zIG9uIG1hY09TIHRlbmQgdG8gYmUgdHlwZWQgY2hhcmFjdGVyc1xuICAgICAgICAgICAgIShicm93c2VyLm1hYyAmJiBldmVudC5hbHRLZXkgJiYgIShldmVudC5jdHJsS2V5IHx8IGV2ZW50Lm1ldGFLZXkpKSAmJlxuICAgICAgICAgICAgKGJhc2VOYW1lID0gYmFzZVtldmVudC5rZXlDb2RlXSkgJiYgYmFzZU5hbWUgIT0gbmFtZSkge1xuICAgICAgICAgICAgaWYgKHJ1bkZvcihzY29wZU9ialtwcmVmaXggKyBtb2RpZmllcnMoYmFzZU5hbWUsIGV2ZW50LCB0cnVlKV0pKSB7XG4gICAgICAgICAgICAgICAgaGFuZGxlZCA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChldmVudC5zaGlmdEtleSAmJiAoc2hpZnROYW1lID0gc2hpZnRbZXZlbnQua2V5Q29kZV0pICE9IG5hbWUgJiYgc2hpZnROYW1lICE9IGJhc2VOYW1lICYmXG4gICAgICAgICAgICAgICAgcnVuRm9yKHNjb3BlT2JqW3ByZWZpeCArIG1vZGlmaWVycyhzaGlmdE5hbWUsIGV2ZW50LCBmYWxzZSldKSkge1xuICAgICAgICAgICAgICAgIGhhbmRsZWQgPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGlzQ2hhciAmJiBldmVudC5zaGlmdEtleSAmJlxuICAgICAgICAgICAgcnVuRm9yKHNjb3BlT2JqW3ByZWZpeCArIG1vZGlmaWVycyhuYW1lLCBldmVudCwgdHJ1ZSldKSkge1xuICAgICAgICAgICAgaGFuZGxlZCA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFoYW5kbGVkICYmIHJ1bkZvcihzY29wZU9iai5fYW55KSlcbiAgICAgICAgICAgIGhhbmRsZWQgPSB0cnVlO1xuICAgIH1cbiAgICBpZiAocHJldmVudGVkKVxuICAgICAgICBoYW5kbGVkID0gdHJ1ZTtcbiAgICBpZiAoaGFuZGxlZCAmJiBzdG9wUHJvcGFnYXRpb24pXG4gICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgIGN1cnJlbnRLZXlFdmVudCA9IG51bGw7XG4gICAgcmV0dXJuIGhhbmRsZWQ7XG59XG5cbi8qKlxuSW1wbGVtZW50YXRpb24gb2YgW2BMYXllck1hcmtlcmBdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jdmlldy5MYXllck1hcmtlcikgdGhhdCBjcmVhdGVzXG5hIHJlY3RhbmdsZSBhdCBhIGdpdmVuIHNldCBvZiBjb29yZGluYXRlcy5cbiovXG5jbGFzcyBSZWN0YW5nbGVNYXJrZXIge1xuICAgIC8qKlxuICAgIENyZWF0ZSBhIG1hcmtlciB3aXRoIHRoZSBnaXZlbiBjbGFzcyBhbmQgZGltZW5zaW9ucy4gSWYgYHdpZHRoYFxuICAgIGlzIG51bGwsIHRoZSBET00gZWxlbWVudCB3aWxsIGdldCBubyB3aWR0aCBzdHlsZS5cbiAgICAqL1xuICAgIGNvbnN0cnVjdG9yKGNsYXNzTmFtZSwgXG4gICAgLyoqXG4gICAgVGhlIGxlZnQgcG9zaXRpb24gb2YgdGhlIG1hcmtlciAoaW4gcGl4ZWxzLCBkb2N1bWVudC1yZWxhdGl2ZSkuXG4gICAgKi9cbiAgICBsZWZ0LCBcbiAgICAvKipcbiAgICBUaGUgdG9wIHBvc2l0aW9uIG9mIHRoZSBtYXJrZXIuXG4gICAgKi9cbiAgICB0b3AsIFxuICAgIC8qKlxuICAgIFRoZSB3aWR0aCBvZiB0aGUgbWFya2VyLCBvciBudWxsIGlmIGl0IHNob3VsZG4ndCBnZXQgYSB3aWR0aCBhc3NpZ25lZC5cbiAgICAqL1xuICAgIHdpZHRoLCBcbiAgICAvKipcbiAgICBUaGUgaGVpZ2h0IG9mIHRoZSBtYXJrZXIuXG4gICAgKi9cbiAgICBoZWlnaHQpIHtcbiAgICAgICAgdGhpcy5jbGFzc05hbWUgPSBjbGFzc05hbWU7XG4gICAgICAgIHRoaXMubGVmdCA9IGxlZnQ7XG4gICAgICAgIHRoaXMudG9wID0gdG9wO1xuICAgICAgICB0aGlzLndpZHRoID0gd2lkdGg7XG4gICAgICAgIHRoaXMuaGVpZ2h0ID0gaGVpZ2h0O1xuICAgIH1cbiAgICBkcmF3KCkge1xuICAgICAgICBsZXQgZWx0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgZWx0LmNsYXNzTmFtZSA9IHRoaXMuY2xhc3NOYW1lO1xuICAgICAgICB0aGlzLmFkanVzdChlbHQpO1xuICAgICAgICByZXR1cm4gZWx0O1xuICAgIH1cbiAgICB1cGRhdGUoZWx0LCBwcmV2KSB7XG4gICAgICAgIGlmIChwcmV2LmNsYXNzTmFtZSAhPSB0aGlzLmNsYXNzTmFtZSlcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgdGhpcy5hZGp1c3QoZWx0KTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIGFkanVzdChlbHQpIHtcbiAgICAgICAgZWx0LnN0eWxlLmxlZnQgPSB0aGlzLmxlZnQgKyBcInB4XCI7XG4gICAgICAgIGVsdC5zdHlsZS50b3AgPSB0aGlzLnRvcCArIFwicHhcIjtcbiAgICAgICAgaWYgKHRoaXMud2lkdGggIT0gbnVsbClcbiAgICAgICAgICAgIGVsdC5zdHlsZS53aWR0aCA9IHRoaXMud2lkdGggKyBcInB4XCI7XG4gICAgICAgIGVsdC5zdHlsZS5oZWlnaHQgPSB0aGlzLmhlaWdodCArIFwicHhcIjtcbiAgICB9XG4gICAgZXEocCkge1xuICAgICAgICByZXR1cm4gdGhpcy5sZWZ0ID09IHAubGVmdCAmJiB0aGlzLnRvcCA9PSBwLnRvcCAmJiB0aGlzLndpZHRoID09IHAud2lkdGggJiYgdGhpcy5oZWlnaHQgPT0gcC5oZWlnaHQgJiZcbiAgICAgICAgICAgIHRoaXMuY2xhc3NOYW1lID09IHAuY2xhc3NOYW1lO1xuICAgIH1cbiAgICAvKipcbiAgICBDcmVhdGUgYSBzZXQgb2YgcmVjdGFuZ2xlcyBmb3IgdGhlIGdpdmVuIHNlbGVjdGlvbiByYW5nZSxcbiAgICBhc3NpZ25pbmcgdGhlbSB0aGVjbGFzc2BjbGFzc05hbWVgLiBXaWxsIGNyZWF0ZSBhIHNpbmdsZVxuICAgIHJlY3RhbmdsZSBmb3IgZW1wdHkgcmFuZ2VzLCBhbmQgYSBzZXQgb2Ygc2VsZWN0aW9uLXN0eWxlXG4gICAgcmVjdGFuZ2xlcyBjb3ZlcmluZyB0aGUgcmFuZ2UncyBjb250ZW50IChpbiBhIGJpZGktYXdhcmVcbiAgICB3YXkpIGZvciBub24tZW1wdHkgb25lcy5cbiAgICAqL1xuICAgIHN0YXRpYyBmb3JSYW5nZSh2aWV3LCBjbGFzc05hbWUsIHJhbmdlKSB7XG4gICAgICAgIGlmIChyYW5nZS5lbXB0eSkge1xuICAgICAgICAgICAgbGV0IHBvcyA9IHZpZXcuY29vcmRzQXRQb3MocmFuZ2UuaGVhZCwgcmFuZ2UuYXNzb2MgfHwgMSk7XG4gICAgICAgICAgICBpZiAoIXBvcylcbiAgICAgICAgICAgICAgICByZXR1cm4gW107XG4gICAgICAgICAgICBsZXQgYmFzZSA9IGdldEJhc2Uodmlldyk7XG4gICAgICAgICAgICByZXR1cm4gW25ldyBSZWN0YW5nbGVNYXJrZXIoY2xhc3NOYW1lLCBwb3MubGVmdCAtIGJhc2UubGVmdCwgcG9zLnRvcCAtIGJhc2UudG9wLCBudWxsLCBwb3MuYm90dG9tIC0gcG9zLnRvcCldO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHJlY3RhbmdsZXNGb3JSYW5nZSh2aWV3LCBjbGFzc05hbWUsIHJhbmdlKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbmZ1bmN0aW9uIGdldEJhc2Uodmlldykge1xuICAgIGxldCByZWN0ID0gdmlldy5zY3JvbGxET00uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgbGV0IGxlZnQgPSB2aWV3LnRleHREaXJlY3Rpb24gPT0gRGlyZWN0aW9uLkxUUiA/IHJlY3QubGVmdCA6IHJlY3QucmlnaHQgLSB2aWV3LnNjcm9sbERPTS5jbGllbnRXaWR0aCAqIHZpZXcuc2NhbGVYO1xuICAgIHJldHVybiB7IGxlZnQ6IGxlZnQgLSB2aWV3LnNjcm9sbERPTS5zY3JvbGxMZWZ0ICogdmlldy5zY2FsZVgsIHRvcDogcmVjdC50b3AgLSB2aWV3LnNjcm9sbERPTS5zY3JvbGxUb3AgKiB2aWV3LnNjYWxlWSB9O1xufVxuZnVuY3Rpb24gd3JhcHBlZExpbmUodmlldywgcG9zLCBzaWRlLCBpbnNpZGUpIHtcbiAgICBsZXQgY29vcmRzID0gdmlldy5jb29yZHNBdFBvcyhwb3MsIHNpZGUgKiAyKTtcbiAgICBpZiAoIWNvb3JkcylcbiAgICAgICAgcmV0dXJuIGluc2lkZTtcbiAgICBsZXQgZWRpdG9yUmVjdCA9IHZpZXcuZG9tLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgIGxldCB5ID0gKGNvb3Jkcy50b3AgKyBjb29yZHMuYm90dG9tKSAvIDI7XG4gICAgbGV0IGxlZnQgPSB2aWV3LnBvc0F0Q29vcmRzKHsgeDogZWRpdG9yUmVjdC5sZWZ0ICsgMSwgeSB9KTtcbiAgICBsZXQgcmlnaHQgPSB2aWV3LnBvc0F0Q29vcmRzKHsgeDogZWRpdG9yUmVjdC5yaWdodCAtIDEsIHkgfSk7XG4gICAgaWYgKGxlZnQgPT0gbnVsbCB8fCByaWdodCA9PSBudWxsKVxuICAgICAgICByZXR1cm4gaW5zaWRlO1xuICAgIHJldHVybiB7IGZyb206IE1hdGgubWF4KGluc2lkZS5mcm9tLCBNYXRoLm1pbihsZWZ0LCByaWdodCkpLCB0bzogTWF0aC5taW4oaW5zaWRlLnRvLCBNYXRoLm1heChsZWZ0LCByaWdodCkpIH07XG59XG5mdW5jdGlvbiByZWN0YW5nbGVzRm9yUmFuZ2UodmlldywgY2xhc3NOYW1lLCByYW5nZSkge1xuICAgIGlmIChyYW5nZS50byA8PSB2aWV3LnZpZXdwb3J0LmZyb20gfHwgcmFuZ2UuZnJvbSA+PSB2aWV3LnZpZXdwb3J0LnRvKVxuICAgICAgICByZXR1cm4gW107XG4gICAgbGV0IGZyb20gPSBNYXRoLm1heChyYW5nZS5mcm9tLCB2aWV3LnZpZXdwb3J0LmZyb20pLCB0byA9IE1hdGgubWluKHJhbmdlLnRvLCB2aWV3LnZpZXdwb3J0LnRvKTtcbiAgICBsZXQgbHRyID0gdmlldy50ZXh0RGlyZWN0aW9uID09IERpcmVjdGlvbi5MVFI7XG4gICAgbGV0IGNvbnRlbnQgPSB2aWV3LmNvbnRlbnRET00sIGNvbnRlbnRSZWN0ID0gY29udGVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSwgYmFzZSA9IGdldEJhc2Uodmlldyk7XG4gICAgbGV0IGxpbmVFbHQgPSBjb250ZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY20tbGluZVwiKSwgbGluZVN0eWxlID0gbGluZUVsdCAmJiB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZShsaW5lRWx0KTtcbiAgICBsZXQgbGVmdFNpZGUgPSBjb250ZW50UmVjdC5sZWZ0ICtcbiAgICAgICAgKGxpbmVTdHlsZSA/IHBhcnNlSW50KGxpbmVTdHlsZS5wYWRkaW5nTGVmdCkgKyBNYXRoLm1pbigwLCBwYXJzZUludChsaW5lU3R5bGUudGV4dEluZGVudCkpIDogMCk7XG4gICAgbGV0IHJpZ2h0U2lkZSA9IGNvbnRlbnRSZWN0LnJpZ2h0IC0gKGxpbmVTdHlsZSA/IHBhcnNlSW50KGxpbmVTdHlsZS5wYWRkaW5nUmlnaHQpIDogMCk7XG4gICAgbGV0IHN0YXJ0QmxvY2sgPSBibG9ja0F0KHZpZXcsIGZyb20sIDEpLCBlbmRCbG9jayA9IGJsb2NrQXQodmlldywgdG8sIC0xKTtcbiAgICBsZXQgdmlzdWFsU3RhcnQgPSBzdGFydEJsb2NrLnR5cGUgPT0gQmxvY2tUeXBlLlRleHQgPyBzdGFydEJsb2NrIDogbnVsbDtcbiAgICBsZXQgdmlzdWFsRW5kID0gZW5kQmxvY2sudHlwZSA9PSBCbG9ja1R5cGUuVGV4dCA/IGVuZEJsb2NrIDogbnVsbDtcbiAgICBpZiAodmlzdWFsU3RhcnQgJiYgKHZpZXcubGluZVdyYXBwaW5nIHx8IHN0YXJ0QmxvY2sud2lkZ2V0TGluZUJyZWFrcykpXG4gICAgICAgIHZpc3VhbFN0YXJ0ID0gd3JhcHBlZExpbmUodmlldywgZnJvbSwgMSwgdmlzdWFsU3RhcnQpO1xuICAgIGlmICh2aXN1YWxFbmQgJiYgKHZpZXcubGluZVdyYXBwaW5nIHx8IGVuZEJsb2NrLndpZGdldExpbmVCcmVha3MpKVxuICAgICAgICB2aXN1YWxFbmQgPSB3cmFwcGVkTGluZSh2aWV3LCB0bywgLTEsIHZpc3VhbEVuZCk7XG4gICAgaWYgKHZpc3VhbFN0YXJ0ICYmIHZpc3VhbEVuZCAmJiB2aXN1YWxTdGFydC5mcm9tID09IHZpc3VhbEVuZC5mcm9tICYmIHZpc3VhbFN0YXJ0LnRvID09IHZpc3VhbEVuZC50bykge1xuICAgICAgICByZXR1cm4gcGllY2VzKGRyYXdGb3JMaW5lKHJhbmdlLmZyb20sIHJhbmdlLnRvLCB2aXN1YWxTdGFydCkpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgbGV0IHRvcCA9IHZpc3VhbFN0YXJ0ID8gZHJhd0ZvckxpbmUocmFuZ2UuZnJvbSwgbnVsbCwgdmlzdWFsU3RhcnQpIDogZHJhd0ZvcldpZGdldChzdGFydEJsb2NrLCBmYWxzZSk7XG4gICAgICAgIGxldCBib3R0b20gPSB2aXN1YWxFbmQgPyBkcmF3Rm9yTGluZShudWxsLCByYW5nZS50bywgdmlzdWFsRW5kKSA6IGRyYXdGb3JXaWRnZXQoZW5kQmxvY2ssIHRydWUpO1xuICAgICAgICBsZXQgYmV0d2VlbiA9IFtdO1xuICAgICAgICBpZiAoKHZpc3VhbFN0YXJ0IHx8IHN0YXJ0QmxvY2spLnRvIDwgKHZpc3VhbEVuZCB8fCBlbmRCbG9jaykuZnJvbSAtICh2aXN1YWxTdGFydCAmJiB2aXN1YWxFbmQgPyAxIDogMCkgfHxcbiAgICAgICAgICAgIHN0YXJ0QmxvY2sud2lkZ2V0TGluZUJyZWFrcyA+IDEgJiYgdG9wLmJvdHRvbSArIHZpZXcuZGVmYXVsdExpbmVIZWlnaHQgLyAyIDwgYm90dG9tLnRvcClcbiAgICAgICAgICAgIGJldHdlZW4ucHVzaChwaWVjZShsZWZ0U2lkZSwgdG9wLmJvdHRvbSwgcmlnaHRTaWRlLCBib3R0b20udG9wKSk7XG4gICAgICAgIGVsc2UgaWYgKHRvcC5ib3R0b20gPCBib3R0b20udG9wICYmIHZpZXcuZWxlbWVudEF0SGVpZ2h0KCh0b3AuYm90dG9tICsgYm90dG9tLnRvcCkgLyAyKS50eXBlID09IEJsb2NrVHlwZS5UZXh0KVxuICAgICAgICAgICAgdG9wLmJvdHRvbSA9IGJvdHRvbS50b3AgPSAodG9wLmJvdHRvbSArIGJvdHRvbS50b3ApIC8gMjtcbiAgICAgICAgcmV0dXJuIHBpZWNlcyh0b3ApLmNvbmNhdChiZXR3ZWVuKS5jb25jYXQocGllY2VzKGJvdHRvbSkpO1xuICAgIH1cbiAgICBmdW5jdGlvbiBwaWVjZShsZWZ0LCB0b3AsIHJpZ2h0LCBib3R0b20pIHtcbiAgICAgICAgcmV0dXJuIG5ldyBSZWN0YW5nbGVNYXJrZXIoY2xhc3NOYW1lLCBsZWZ0IC0gYmFzZS5sZWZ0LCB0b3AgLSBiYXNlLnRvcCwgcmlnaHQgLSBsZWZ0LCBib3R0b20gLSB0b3ApO1xuICAgIH1cbiAgICBmdW5jdGlvbiBwaWVjZXMoeyB0b3AsIGJvdHRvbSwgaG9yaXpvbnRhbCB9KSB7XG4gICAgICAgIGxldCBwaWVjZXMgPSBbXTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBob3Jpem9udGFsLmxlbmd0aDsgaSArPSAyKVxuICAgICAgICAgICAgcGllY2VzLnB1c2gocGllY2UoaG9yaXpvbnRhbFtpXSwgdG9wLCBob3Jpem9udGFsW2kgKyAxXSwgYm90dG9tKSk7XG4gICAgICAgIHJldHVybiBwaWVjZXM7XG4gICAgfVxuICAgIC8vIEdldHMgcGFzc2VkIGZyb20vdG8gaW4gbGluZS1sb2NhbCBwb3NpdGlvbnNcbiAgICBmdW5jdGlvbiBkcmF3Rm9yTGluZShmcm9tLCB0bywgbGluZSkge1xuICAgICAgICBsZXQgdG9wID0gMWU5LCBib3R0b20gPSAtMWU5LCBob3Jpem9udGFsID0gW107XG4gICAgICAgIGZ1bmN0aW9uIGFkZFNwYW4oZnJvbSwgZnJvbU9wZW4sIHRvLCB0b09wZW4sIGRpcikge1xuICAgICAgICAgICAgLy8gUGFzc2luZyAyLy0yIGlzIGEga2x1ZGdlIHRvIGZvcmNlIHRoZSB2aWV3IHRvIHJldHVyblxuICAgICAgICAgICAgLy8gY29vcmRpbmF0ZXMgb24gdGhlIHByb3BlciBzaWRlIG9mIGJsb2NrIHdpZGdldHMsIHNpbmNlXG4gICAgICAgICAgICAvLyBub3JtYWxpemluZyB0aGUgc2lkZSB0aGVyZSwgdGhvdWdoIGFwcHJvcHJpYXRlIGZvciBtb3N0XG4gICAgICAgICAgICAvLyBjb29yZHNBdFBvcyBxdWVyaWVzLCB3b3VsZCBicmVhayBzZWxlY3Rpb24gZHJhd2luZy5cbiAgICAgICAgICAgIGxldCBmcm9tQ29vcmRzID0gdmlldy5jb29yZHNBdFBvcyhmcm9tLCAoZnJvbSA9PSBsaW5lLnRvID8gLTIgOiAyKSk7XG4gICAgICAgICAgICBsZXQgdG9Db29yZHMgPSB2aWV3LmNvb3Jkc0F0UG9zKHRvLCAodG8gPT0gbGluZS5mcm9tID8gMiA6IC0yKSk7XG4gICAgICAgICAgICBpZiAoIWZyb21Db29yZHMgfHwgIXRvQ29vcmRzKVxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIHRvcCA9IE1hdGgubWluKGZyb21Db29yZHMudG9wLCB0b0Nvb3Jkcy50b3AsIHRvcCk7XG4gICAgICAgICAgICBib3R0b20gPSBNYXRoLm1heChmcm9tQ29vcmRzLmJvdHRvbSwgdG9Db29yZHMuYm90dG9tLCBib3R0b20pO1xuICAgICAgICAgICAgaWYgKGRpciA9PSBEaXJlY3Rpb24uTFRSKVxuICAgICAgICAgICAgICAgIGhvcml6b250YWwucHVzaChsdHIgJiYgZnJvbU9wZW4gPyBsZWZ0U2lkZSA6IGZyb21Db29yZHMubGVmdCwgbHRyICYmIHRvT3BlbiA/IHJpZ2h0U2lkZSA6IHRvQ29vcmRzLnJpZ2h0KTtcbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICBob3Jpem9udGFsLnB1c2goIWx0ciAmJiB0b09wZW4gPyBsZWZ0U2lkZSA6IHRvQ29vcmRzLmxlZnQsICFsdHIgJiYgZnJvbU9wZW4gPyByaWdodFNpZGUgOiBmcm9tQ29vcmRzLnJpZ2h0KTtcbiAgICAgICAgfVxuICAgICAgICBsZXQgc3RhcnQgPSBmcm9tICE9PSBudWxsICYmIGZyb20gIT09IHZvaWQgMCA/IGZyb20gOiBsaW5lLmZyb20sIGVuZCA9IHRvICE9PSBudWxsICYmIHRvICE9PSB2b2lkIDAgPyB0byA6IGxpbmUudG87XG4gICAgICAgIC8vIFNwbGl0IHRoZSByYW5nZSBieSB2aXNpYmxlIHJhbmdlIGFuZCBkb2N1bWVudCBsaW5lXG4gICAgICAgIGZvciAobGV0IHIgb2Ygdmlldy52aXNpYmxlUmFuZ2VzKVxuICAgICAgICAgICAgaWYgKHIudG8gPiBzdGFydCAmJiByLmZyb20gPCBlbmQpIHtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBwb3MgPSBNYXRoLm1heChyLmZyb20sIHN0YXJ0KSwgZW5kUG9zID0gTWF0aC5taW4oci50bywgZW5kKTs7KSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBkb2NMaW5lID0gdmlldy5zdGF0ZS5kb2MubGluZUF0KHBvcyk7XG4gICAgICAgICAgICAgICAgICAgIGZvciAobGV0IHNwYW4gb2Ygdmlldy5iaWRpU3BhbnMoZG9jTGluZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBzcGFuRnJvbSA9IHNwYW4uZnJvbSArIGRvY0xpbmUuZnJvbSwgc3BhblRvID0gc3Bhbi50byArIGRvY0xpbmUuZnJvbTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzcGFuRnJvbSA+PSBlbmRQb3MpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoc3BhblRvID4gcG9zKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFkZFNwYW4oTWF0aC5tYXgoc3BhbkZyb20sIHBvcyksIGZyb20gPT0gbnVsbCAmJiBzcGFuRnJvbSA8PSBzdGFydCwgTWF0aC5taW4oc3BhblRvLCBlbmRQb3MpLCB0byA9PSBudWxsICYmIHNwYW5UbyA+PSBlbmQsIHNwYW4uZGlyKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBwb3MgPSBkb2NMaW5lLnRvICsgMTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHBvcyA+PSBlbmRQb3MpXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIGlmIChob3Jpem9udGFsLmxlbmd0aCA9PSAwKVxuICAgICAgICAgICAgYWRkU3BhbihzdGFydCwgZnJvbSA9PSBudWxsLCBlbmQsIHRvID09IG51bGwsIHZpZXcudGV4dERpcmVjdGlvbik7XG4gICAgICAgIHJldHVybiB7IHRvcCwgYm90dG9tLCBob3Jpem9udGFsIH07XG4gICAgfVxuICAgIGZ1bmN0aW9uIGRyYXdGb3JXaWRnZXQoYmxvY2ssIHRvcCkge1xuICAgICAgICBsZXQgeSA9IGNvbnRlbnRSZWN0LnRvcCArICh0b3AgPyBibG9jay50b3AgOiBibG9jay5ib3R0b20pO1xuICAgICAgICByZXR1cm4geyB0b3A6IHksIGJvdHRvbTogeSwgaG9yaXpvbnRhbDogW10gfTtcbiAgICB9XG59XG5mdW5jdGlvbiBzYW1lTWFya2VyKGEsIGIpIHtcbiAgICByZXR1cm4gYS5jb25zdHJ1Y3RvciA9PSBiLmNvbnN0cnVjdG9yICYmIGEuZXEoYik7XG59XG5jbGFzcyBMYXllclZpZXcge1xuICAgIGNvbnN0cnVjdG9yKHZpZXcsIGxheWVyKSB7XG4gICAgICAgIHRoaXMudmlldyA9IHZpZXc7XG4gICAgICAgIHRoaXMubGF5ZXIgPSBsYXllcjtcbiAgICAgICAgdGhpcy5kcmF3biA9IFtdO1xuICAgICAgICB0aGlzLnNjYWxlWCA9IDE7XG4gICAgICAgIHRoaXMuc2NhbGVZID0gMTtcbiAgICAgICAgdGhpcy5tZWFzdXJlUmVxID0geyByZWFkOiB0aGlzLm1lYXN1cmUuYmluZCh0aGlzKSwgd3JpdGU6IHRoaXMuZHJhdy5iaW5kKHRoaXMpIH07XG4gICAgICAgIHRoaXMuZG9tID0gdmlldy5zY3JvbGxET00uYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKSk7XG4gICAgICAgIHRoaXMuZG9tLmNsYXNzTGlzdC5hZGQoXCJjbS1sYXllclwiKTtcbiAgICAgICAgaWYgKGxheWVyLmFib3ZlKVxuICAgICAgICAgICAgdGhpcy5kb20uY2xhc3NMaXN0LmFkZChcImNtLWxheWVyLWFib3ZlXCIpO1xuICAgICAgICBpZiAobGF5ZXIuY2xhc3MpXG4gICAgICAgICAgICB0aGlzLmRvbS5jbGFzc0xpc3QuYWRkKGxheWVyLmNsYXNzKTtcbiAgICAgICAgdGhpcy5zY2FsZSgpO1xuICAgICAgICB0aGlzLmRvbS5zZXRBdHRyaWJ1dGUoXCJhcmlhLWhpZGRlblwiLCBcInRydWVcIik7XG4gICAgICAgIHRoaXMuc2V0T3JkZXIodmlldy5zdGF0ZSk7XG4gICAgICAgIHZpZXcucmVxdWVzdE1lYXN1cmUodGhpcy5tZWFzdXJlUmVxKTtcbiAgICAgICAgaWYgKGxheWVyLm1vdW50KVxuICAgICAgICAgICAgbGF5ZXIubW91bnQodGhpcy5kb20sIHZpZXcpO1xuICAgIH1cbiAgICB1cGRhdGUodXBkYXRlKSB7XG4gICAgICAgIGlmICh1cGRhdGUuc3RhcnRTdGF0ZS5mYWNldChsYXllck9yZGVyKSAhPSB1cGRhdGUuc3RhdGUuZmFjZXQobGF5ZXJPcmRlcikpXG4gICAgICAgICAgICB0aGlzLnNldE9yZGVyKHVwZGF0ZS5zdGF0ZSk7XG4gICAgICAgIGlmICh0aGlzLmxheWVyLnVwZGF0ZSh1cGRhdGUsIHRoaXMuZG9tKSB8fCB1cGRhdGUuZ2VvbWV0cnlDaGFuZ2VkKSB7XG4gICAgICAgICAgICB0aGlzLnNjYWxlKCk7XG4gICAgICAgICAgICB1cGRhdGUudmlldy5yZXF1ZXN0TWVhc3VyZSh0aGlzLm1lYXN1cmVSZXEpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGRvY1ZpZXdVcGRhdGUodmlldykge1xuICAgICAgICBpZiAodGhpcy5sYXllci51cGRhdGVPbkRvY1ZpZXdVcGRhdGUgIT09IGZhbHNlKVxuICAgICAgICAgICAgdmlldy5yZXF1ZXN0TWVhc3VyZSh0aGlzLm1lYXN1cmVSZXEpO1xuICAgIH1cbiAgICBzZXRPcmRlcihzdGF0ZSkge1xuICAgICAgICBsZXQgcG9zID0gMCwgb3JkZXIgPSBzdGF0ZS5mYWNldChsYXllck9yZGVyKTtcbiAgICAgICAgd2hpbGUgKHBvcyA8IG9yZGVyLmxlbmd0aCAmJiBvcmRlcltwb3NdICE9IHRoaXMubGF5ZXIpXG4gICAgICAgICAgICBwb3MrKztcbiAgICAgICAgdGhpcy5kb20uc3R5bGUuekluZGV4ID0gU3RyaW5nKCh0aGlzLmxheWVyLmFib3ZlID8gMTUwIDogLTEpIC0gcG9zKTtcbiAgICB9XG4gICAgbWVhc3VyZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubGF5ZXIubWFya2Vycyh0aGlzLnZpZXcpO1xuICAgIH1cbiAgICBzY2FsZSgpIHtcbiAgICAgICAgbGV0IHsgc2NhbGVYLCBzY2FsZVkgfSA9IHRoaXMudmlldztcbiAgICAgICAgaWYgKHNjYWxlWCAhPSB0aGlzLnNjYWxlWCB8fCBzY2FsZVkgIT0gdGhpcy5zY2FsZVkpIHtcbiAgICAgICAgICAgIHRoaXMuc2NhbGVYID0gc2NhbGVYO1xuICAgICAgICAgICAgdGhpcy5zY2FsZVkgPSBzY2FsZVk7XG4gICAgICAgICAgICB0aGlzLmRvbS5zdHlsZS50cmFuc2Zvcm0gPSBgc2NhbGUoJHsxIC8gc2NhbGVYfSwgJHsxIC8gc2NhbGVZfSlgO1xuICAgICAgICB9XG4gICAgfVxuICAgIGRyYXcobWFya2Vycykge1xuICAgICAgICBpZiAobWFya2Vycy5sZW5ndGggIT0gdGhpcy5kcmF3bi5sZW5ndGggfHwgbWFya2Vycy5zb21lKChwLCBpKSA9PiAhc2FtZU1hcmtlcihwLCB0aGlzLmRyYXduW2ldKSkpIHtcbiAgICAgICAgICAgIGxldCBvbGQgPSB0aGlzLmRvbS5maXJzdENoaWxkLCBvbGRJID0gMDtcbiAgICAgICAgICAgIGZvciAobGV0IG1hcmtlciBvZiBtYXJrZXJzKSB7XG4gICAgICAgICAgICAgICAgaWYgKG1hcmtlci51cGRhdGUgJiYgb2xkICYmIG1hcmtlci5jb25zdHJ1Y3RvciAmJiB0aGlzLmRyYXduW29sZEldLmNvbnN0cnVjdG9yICYmXG4gICAgICAgICAgICAgICAgICAgIG1hcmtlci51cGRhdGUob2xkLCB0aGlzLmRyYXduW29sZEldKSkge1xuICAgICAgICAgICAgICAgICAgICBvbGQgPSBvbGQubmV4dFNpYmxpbmc7XG4gICAgICAgICAgICAgICAgICAgIG9sZEkrKztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZG9tLmluc2VydEJlZm9yZShtYXJrZXIuZHJhdygpLCBvbGQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHdoaWxlIChvbGQpIHtcbiAgICAgICAgICAgICAgICBsZXQgbmV4dCA9IG9sZC5uZXh0U2libGluZztcbiAgICAgICAgICAgICAgICBvbGQucmVtb3ZlKCk7XG4gICAgICAgICAgICAgICAgb2xkID0gbmV4dDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuZHJhd24gPSBtYXJrZXJzO1xuICAgICAgICAgICAgaWYgKGJyb3dzZXIuc2FmYXJpICYmIGJyb3dzZXIuc2FmYXJpX3ZlcnNpb24gPj0gMjYpIC8vIElzc3VlICMxNjAwLCAxNjI3XG4gICAgICAgICAgICAgICAgdGhpcy5kb20uc3R5bGUuZGlzcGxheSA9IHRoaXMuZG9tLmZpcnN0Q2hpbGQgPyBcIlwiIDogXCJub25lXCI7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZGVzdHJveSgpIHtcbiAgICAgICAgaWYgKHRoaXMubGF5ZXIuZGVzdHJveSlcbiAgICAgICAgICAgIHRoaXMubGF5ZXIuZGVzdHJveSh0aGlzLmRvbSwgdGhpcy52aWV3KTtcbiAgICAgICAgdGhpcy5kb20ucmVtb3ZlKCk7XG4gICAgfVxufVxuY29uc3QgbGF5ZXJPcmRlciA9IC8qQF9fUFVSRV9fKi9GYWNldC5kZWZpbmUoKTtcbi8qKlxuRGVmaW5lIGEgbGF5ZXIuXG4qL1xuZnVuY3Rpb24gbGF5ZXIoY29uZmlnKSB7XG4gICAgcmV0dXJuIFtcbiAgICAgICAgVmlld1BsdWdpbi5kZWZpbmUodiA9PiBuZXcgTGF5ZXJWaWV3KHYsIGNvbmZpZykpLFxuICAgICAgICBsYXllck9yZGVyLm9mKGNvbmZpZylcbiAgICBdO1xufVxuXG5jb25zdCBzZWxlY3Rpb25Db25maWcgPSAvKkBfX1BVUkVfXyovRmFjZXQuZGVmaW5lKHtcbiAgICBjb21iaW5lKGNvbmZpZ3MpIHtcbiAgICAgICAgcmV0dXJuIGNvbWJpbmVDb25maWcoY29uZmlncywge1xuICAgICAgICAgICAgY3Vyc29yQmxpbmtSYXRlOiAxMjAwLFxuICAgICAgICAgICAgZHJhd1JhbmdlQ3Vyc29yOiB0cnVlXG4gICAgICAgIH0sIHtcbiAgICAgICAgICAgIGN1cnNvckJsaW5rUmF0ZTogKGEsIGIpID0+IE1hdGgubWluKGEsIGIpLFxuICAgICAgICAgICAgZHJhd1JhbmdlQ3Vyc29yOiAoYSwgYikgPT4gYSB8fCBiXG4gICAgICAgIH0pO1xuICAgIH1cbn0pO1xuLyoqXG5SZXR1cm5zIGFuIGV4dGVuc2lvbiB0aGF0IGhpZGVzIHRoZSBicm93c2VyJ3MgbmF0aXZlIHNlbGVjdGlvbiBhbmRcbmN1cnNvciwgcmVwbGFjaW5nIHRoZSBzZWxlY3Rpb24gd2l0aCBhIGJhY2tncm91bmQgYmVoaW5kIHRoZSB0ZXh0XG4od2l0aCB0aGUgYGNtLXNlbGVjdGlvbkJhY2tncm91bmRgIGNsYXNzKSwgYW5kIHRoZVxuY3Vyc29ycyB3aXRoIGVsZW1lbnRzIG92ZXJsYWlkIG92ZXIgdGhlIGNvZGUgKHVzaW5nXG5gY20tY3Vyc29yLXByaW1hcnlgIGFuZCBgY20tY3Vyc29yLXNlY29uZGFyeWApLlxuXG5UaGlzIGFsbG93cyB0aGUgZWRpdG9yIHRvIGRpc3BsYXkgc2Vjb25kYXJ5IHNlbGVjdGlvbiByYW5nZXMsIGFuZFxudGVuZHMgdG8gcHJvZHVjZSBhIHR5cGUgb2Ygc2VsZWN0aW9uIG1vcmUgaW4gbGluZSB3aXRoIHRoYXQgdXNlcnNcbmV4cGVjdCBpbiBhIHRleHQgZWRpdG9yICh0aGUgbmF0aXZlIHNlbGVjdGlvbiBzdHlsaW5nIHdpbGwgb2Z0ZW5cbmxlYXZlIGdhcHMgYmV0d2VlbiBsaW5lcyBhbmQgd29uJ3QgZmlsbCB0aGUgaG9yaXpvbnRhbCBzcGFjZSBhZnRlclxuYSBsaW5lIHdoZW4gdGhlIHNlbGVjdGlvbiBjb250aW51ZXMgcGFzdCBpdCkuXG5cbkl0IGRvZXMgaGF2ZSBhIHBlcmZvcm1hbmNlIGNvc3QsIGluIHRoYXQgaXQgcmVxdWlyZXMgYW4gZXh0cmEgRE9NXG5sYXlvdXQgY3ljbGUgZm9yIG1hbnkgdXBkYXRlcyAodGhlIHNlbGVjdGlvbiBpcyBkcmF3biBiYXNlZCBvbiBET01cbmxheW91dCBpbmZvcm1hdGlvbiB0aGF0J3Mgb25seSBhdmFpbGFibGUgYWZ0ZXIgbGF5aW5nIG91dCB0aGVcbmNvbnRlbnQpLlxuKi9cbmZ1bmN0aW9uIGRyYXdTZWxlY3Rpb24oY29uZmlnID0ge30pIHtcbiAgICByZXR1cm4gW1xuICAgICAgICBzZWxlY3Rpb25Db25maWcub2YoY29uZmlnKSxcbiAgICAgICAgY3Vyc29yTGF5ZXIsXG4gICAgICAgIHNlbGVjdGlvbkxheWVyLFxuICAgICAgICBoaWRlTmF0aXZlU2VsZWN0aW9uLFxuICAgICAgICBuYXRpdmVTZWxlY3Rpb25IaWRkZW4ub2YodHJ1ZSlcbiAgICBdO1xufVxuLyoqXG5SZXRyaWV2ZSB0aGUgW2BkcmF3U2VsZWN0aW9uYF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyN2aWV3LmRyYXdTZWxlY3Rpb24pIGNvbmZpZ3VyYXRpb25cbmZvciB0aGlzIHN0YXRlLiAoTm90ZSB0aGF0IHRoaXMgd2lsbCByZXR1cm4gYSBzZXQgb2YgZGVmYXVsdHMgZXZlblxuaWYgYGRyYXdTZWxlY3Rpb25gIGlzbid0IGVuYWJsZWQuKVxuKi9cbmZ1bmN0aW9uIGdldERyYXdTZWxlY3Rpb25Db25maWcoc3RhdGUpIHtcbiAgICByZXR1cm4gc3RhdGUuZmFjZXQoc2VsZWN0aW9uQ29uZmlnKTtcbn1cbmZ1bmN0aW9uIGNvbmZpZ0NoYW5nZWQodXBkYXRlKSB7XG4gICAgcmV0dXJuIHVwZGF0ZS5zdGFydFN0YXRlLmZhY2V0KHNlbGVjdGlvbkNvbmZpZykgIT0gdXBkYXRlLnN0YXRlLmZhY2V0KHNlbGVjdGlvbkNvbmZpZyk7XG59XG5jb25zdCBjdXJzb3JMYXllciA9IC8qQF9fUFVSRV9fKi9sYXllcih7XG4gICAgYWJvdmU6IHRydWUsXG4gICAgbWFya2Vycyh2aWV3KSB7XG4gICAgICAgIGxldCB7IHN0YXRlIH0gPSB2aWV3LCBjb25mID0gc3RhdGUuZmFjZXQoc2VsZWN0aW9uQ29uZmlnKTtcbiAgICAgICAgbGV0IGN1cnNvcnMgPSBbXTtcbiAgICAgICAgZm9yIChsZXQgciBvZiBzdGF0ZS5zZWxlY3Rpb24ucmFuZ2VzKSB7XG4gICAgICAgICAgICBsZXQgcHJpbSA9IHIgPT0gc3RhdGUuc2VsZWN0aW9uLm1haW47XG4gICAgICAgICAgICBpZiAoci5lbXB0eSB8fCBjb25mLmRyYXdSYW5nZUN1cnNvcikge1xuICAgICAgICAgICAgICAgIGxldCBjbGFzc05hbWUgPSBwcmltID8gXCJjbS1jdXJzb3IgY20tY3Vyc29yLXByaW1hcnlcIiA6IFwiY20tY3Vyc29yIGNtLWN1cnNvci1zZWNvbmRhcnlcIjtcbiAgICAgICAgICAgICAgICBsZXQgY3Vyc29yID0gci5lbXB0eSA/IHIgOiBFZGl0b3JTZWxlY3Rpb24uY3Vyc29yKHIuaGVhZCwgci5oZWFkID4gci5hbmNob3IgPyAtMSA6IDEpO1xuICAgICAgICAgICAgICAgIGZvciAobGV0IHBpZWNlIG9mIFJlY3RhbmdsZU1hcmtlci5mb3JSYW5nZSh2aWV3LCBjbGFzc05hbWUsIGN1cnNvcikpXG4gICAgICAgICAgICAgICAgICAgIGN1cnNvcnMucHVzaChwaWVjZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGN1cnNvcnM7XG4gICAgfSxcbiAgICB1cGRhdGUodXBkYXRlLCBkb20pIHtcbiAgICAgICAgaWYgKHVwZGF0ZS50cmFuc2FjdGlvbnMuc29tZSh0ciA9PiB0ci5zZWxlY3Rpb24pKVxuICAgICAgICAgICAgZG9tLnN0eWxlLmFuaW1hdGlvbk5hbWUgPSBkb20uc3R5bGUuYW5pbWF0aW9uTmFtZSA9PSBcImNtLWJsaW5rXCIgPyBcImNtLWJsaW5rMlwiIDogXCJjbS1ibGlua1wiO1xuICAgICAgICBsZXQgY29uZkNoYW5nZSA9IGNvbmZpZ0NoYW5nZWQodXBkYXRlKTtcbiAgICAgICAgaWYgKGNvbmZDaGFuZ2UpXG4gICAgICAgICAgICBzZXRCbGlua1JhdGUodXBkYXRlLnN0YXRlLCBkb20pO1xuICAgICAgICByZXR1cm4gdXBkYXRlLmRvY0NoYW5nZWQgfHwgdXBkYXRlLnNlbGVjdGlvblNldCB8fCBjb25mQ2hhbmdlO1xuICAgIH0sXG4gICAgbW91bnQoZG9tLCB2aWV3KSB7XG4gICAgICAgIHNldEJsaW5rUmF0ZSh2aWV3LnN0YXRlLCBkb20pO1xuICAgIH0sXG4gICAgY2xhc3M6IFwiY20tY3Vyc29yTGF5ZXJcIlxufSk7XG5mdW5jdGlvbiBzZXRCbGlua1JhdGUoc3RhdGUsIGRvbSkge1xuICAgIGRvbS5zdHlsZS5hbmltYXRpb25EdXJhdGlvbiA9IHN0YXRlLmZhY2V0KHNlbGVjdGlvbkNvbmZpZykuY3Vyc29yQmxpbmtSYXRlICsgXCJtc1wiO1xufVxuY29uc3Qgc2VsZWN0aW9uTGF5ZXIgPSAvKkBfX1BVUkVfXyovbGF5ZXIoe1xuICAgIGFib3ZlOiBmYWxzZSxcbiAgICBtYXJrZXJzKHZpZXcpIHtcbiAgICAgICAgcmV0dXJuIHZpZXcuc3RhdGUuc2VsZWN0aW9uLnJhbmdlcy5tYXAociA9PiByLmVtcHR5ID8gW10gOiBSZWN0YW5nbGVNYXJrZXIuZm9yUmFuZ2UodmlldywgXCJjbS1zZWxlY3Rpb25CYWNrZ3JvdW5kXCIsIHIpKVxuICAgICAgICAgICAgLnJlZHVjZSgoYSwgYikgPT4gYS5jb25jYXQoYikpO1xuICAgIH0sXG4gICAgdXBkYXRlKHVwZGF0ZSwgZG9tKSB7XG4gICAgICAgIHJldHVybiB1cGRhdGUuZG9jQ2hhbmdlZCB8fCB1cGRhdGUuc2VsZWN0aW9uU2V0IHx8IHVwZGF0ZS52aWV3cG9ydENoYW5nZWQgfHwgY29uZmlnQ2hhbmdlZCh1cGRhdGUpO1xuICAgIH0sXG4gICAgY2xhc3M6IFwiY20tc2VsZWN0aW9uTGF5ZXJcIlxufSk7XG5jb25zdCBoaWRlTmF0aXZlU2VsZWN0aW9uID0gLypAX19QVVJFX18qL1ByZWMuaGlnaGVzdCgvKkBfX1BVUkVfXyovRWRpdG9yVmlldy50aGVtZSh7XG4gICAgXCIuY20tbGluZVwiOiB7XG4gICAgICAgIFwiJiA6OnNlbGVjdGlvbiwgJjo6c2VsZWN0aW9uXCI6IHsgYmFja2dyb3VuZENvbG9yOiBcInRyYW5zcGFyZW50ICFpbXBvcnRhbnRcIiB9LFxuICAgICAgICBjYXJldENvbG9yOiBcInRyYW5zcGFyZW50ICFpbXBvcnRhbnRcIlxuICAgIH0sXG4gICAgXCIuY20tY29udGVudFwiOiB7XG4gICAgICAgIGNhcmV0Q29sb3I6IFwidHJhbnNwYXJlbnQgIWltcG9ydGFudFwiLFxuICAgICAgICBcIiYgOmZvY3VzXCI6IHtcbiAgICAgICAgICAgIGNhcmV0Q29sb3I6IFwiaW5pdGlhbCAhaW1wb3J0YW50XCIsXG4gICAgICAgICAgICBcIiY6OnNlbGVjdGlvbiwgJiA6OnNlbGVjdGlvblwiOiB7XG4gICAgICAgICAgICAgICAgYmFja2dyb3VuZENvbG9yOiBcIkhpZ2hsaWdodCAhaW1wb3J0YW50XCJcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbn0pKTtcblxuY29uc3Qgc2V0RHJvcEN1cnNvclBvcyA9IC8qQF9fUFVSRV9fKi9TdGF0ZUVmZmVjdC5kZWZpbmUoe1xuICAgIG1hcChwb3MsIG1hcHBpbmcpIHsgcmV0dXJuIHBvcyA9PSBudWxsID8gbnVsbCA6IG1hcHBpbmcubWFwUG9zKHBvcyk7IH1cbn0pO1xuY29uc3QgZHJvcEN1cnNvclBvcyA9IC8qQF9fUFVSRV9fKi9TdGF0ZUZpZWxkLmRlZmluZSh7XG4gICAgY3JlYXRlKCkgeyByZXR1cm4gbnVsbDsgfSxcbiAgICB1cGRhdGUocG9zLCB0cikge1xuICAgICAgICBpZiAocG9zICE9IG51bGwpXG4gICAgICAgICAgICBwb3MgPSB0ci5jaGFuZ2VzLm1hcFBvcyhwb3MpO1xuICAgICAgICByZXR1cm4gdHIuZWZmZWN0cy5yZWR1Y2UoKHBvcywgZSkgPT4gZS5pcyhzZXREcm9wQ3Vyc29yUG9zKSA/IGUudmFsdWUgOiBwb3MsIHBvcyk7XG4gICAgfVxufSk7XG5jb25zdCBkcmF3RHJvcEN1cnNvciA9IC8qQF9fUFVSRV9fKi9WaWV3UGx1Z2luLmZyb21DbGFzcyhjbGFzcyB7XG4gICAgY29uc3RydWN0b3Iodmlldykge1xuICAgICAgICB0aGlzLnZpZXcgPSB2aWV3O1xuICAgICAgICB0aGlzLmN1cnNvciA9IG51bGw7XG4gICAgICAgIHRoaXMubWVhc3VyZVJlcSA9IHsgcmVhZDogdGhpcy5yZWFkUG9zLmJpbmQodGhpcyksIHdyaXRlOiB0aGlzLmRyYXdDdXJzb3IuYmluZCh0aGlzKSB9O1xuICAgIH1cbiAgICB1cGRhdGUodXBkYXRlKSB7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgbGV0IGN1cnNvclBvcyA9IHVwZGF0ZS5zdGF0ZS5maWVsZChkcm9wQ3Vyc29yUG9zKTtcbiAgICAgICAgaWYgKGN1cnNvclBvcyA9PSBudWxsKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5jdXJzb3IgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIChfYSA9IHRoaXMuY3Vyc29yKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EucmVtb3ZlKCk7XG4gICAgICAgICAgICAgICAgdGhpcy5jdXJzb3IgPSBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgaWYgKCF0aGlzLmN1cnNvcikge1xuICAgICAgICAgICAgICAgIHRoaXMuY3Vyc29yID0gdGhpcy52aWV3LnNjcm9sbERPTS5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpKTtcbiAgICAgICAgICAgICAgICB0aGlzLmN1cnNvci5jbGFzc05hbWUgPSBcImNtLWRyb3BDdXJzb3JcIjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh1cGRhdGUuc3RhcnRTdGF0ZS5maWVsZChkcm9wQ3Vyc29yUG9zKSAhPSBjdXJzb3JQb3MgfHwgdXBkYXRlLmRvY0NoYW5nZWQgfHwgdXBkYXRlLmdlb21ldHJ5Q2hhbmdlZClcbiAgICAgICAgICAgICAgICB0aGlzLnZpZXcucmVxdWVzdE1lYXN1cmUodGhpcy5tZWFzdXJlUmVxKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZWFkUG9zKCkge1xuICAgICAgICBsZXQgeyB2aWV3IH0gPSB0aGlzO1xuICAgICAgICBsZXQgcG9zID0gdmlldy5zdGF0ZS5maWVsZChkcm9wQ3Vyc29yUG9zKTtcbiAgICAgICAgbGV0IHJlY3QgPSBwb3MgIT0gbnVsbCAmJiB2aWV3LmNvb3Jkc0F0UG9zKHBvcyk7XG4gICAgICAgIGlmICghcmVjdClcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICBsZXQgb3V0ZXIgPSB2aWV3LnNjcm9sbERPTS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGxlZnQ6IHJlY3QubGVmdCAtIG91dGVyLmxlZnQgKyB2aWV3LnNjcm9sbERPTS5zY3JvbGxMZWZ0ICogdmlldy5zY2FsZVgsXG4gICAgICAgICAgICB0b3A6IHJlY3QudG9wIC0gb3V0ZXIudG9wICsgdmlldy5zY3JvbGxET00uc2Nyb2xsVG9wICogdmlldy5zY2FsZVksXG4gICAgICAgICAgICBoZWlnaHQ6IHJlY3QuYm90dG9tIC0gcmVjdC50b3BcbiAgICAgICAgfTtcbiAgICB9XG4gICAgZHJhd0N1cnNvcihwb3MpIHtcbiAgICAgICAgaWYgKHRoaXMuY3Vyc29yKSB7XG4gICAgICAgICAgICBsZXQgeyBzY2FsZVgsIHNjYWxlWSB9ID0gdGhpcy52aWV3O1xuICAgICAgICAgICAgaWYgKHBvcykge1xuICAgICAgICAgICAgICAgIHRoaXMuY3Vyc29yLnN0eWxlLmxlZnQgPSBwb3MubGVmdCAvIHNjYWxlWCArIFwicHhcIjtcbiAgICAgICAgICAgICAgICB0aGlzLmN1cnNvci5zdHlsZS50b3AgPSBwb3MudG9wIC8gc2NhbGVZICsgXCJweFwiO1xuICAgICAgICAgICAgICAgIHRoaXMuY3Vyc29yLnN0eWxlLmhlaWdodCA9IHBvcy5oZWlnaHQgLyBzY2FsZVkgKyBcInB4XCI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLmN1cnNvci5zdHlsZS5sZWZ0ID0gXCItMTAwMDAwcHhcIjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBkZXN0cm95KCkge1xuICAgICAgICBpZiAodGhpcy5jdXJzb3IpXG4gICAgICAgICAgICB0aGlzLmN1cnNvci5yZW1vdmUoKTtcbiAgICB9XG4gICAgc2V0RHJvcFBvcyhwb3MpIHtcbiAgICAgICAgaWYgKHRoaXMudmlldy5zdGF0ZS5maWVsZChkcm9wQ3Vyc29yUG9zKSAhPSBwb3MpXG4gICAgICAgICAgICB0aGlzLnZpZXcuZGlzcGF0Y2goeyBlZmZlY3RzOiBzZXREcm9wQ3Vyc29yUG9zLm9mKHBvcykgfSk7XG4gICAgfVxufSwge1xuICAgIGV2ZW50T2JzZXJ2ZXJzOiB7XG4gICAgICAgIGRyYWdvdmVyKGV2ZW50KSB7XG4gICAgICAgICAgICB0aGlzLnNldERyb3BQb3ModGhpcy52aWV3LnBvc0F0Q29vcmRzKHsgeDogZXZlbnQuY2xpZW50WCwgeTogZXZlbnQuY2xpZW50WSB9KSk7XG4gICAgICAgIH0sXG4gICAgICAgIGRyYWdsZWF2ZShldmVudCkge1xuICAgICAgICAgICAgaWYgKGV2ZW50LnRhcmdldCA9PSB0aGlzLnZpZXcuY29udGVudERPTSB8fCAhdGhpcy52aWV3LmNvbnRlbnRET00uY29udGFpbnMoZXZlbnQucmVsYXRlZFRhcmdldCkpXG4gICAgICAgICAgICAgICAgdGhpcy5zZXREcm9wUG9zKG51bGwpO1xuICAgICAgICB9LFxuICAgICAgICBkcmFnZW5kKCkge1xuICAgICAgICAgICAgdGhpcy5zZXREcm9wUG9zKG51bGwpO1xuICAgICAgICB9LFxuICAgICAgICBkcm9wKCkge1xuICAgICAgICAgICAgdGhpcy5zZXREcm9wUG9zKG51bGwpO1xuICAgICAgICB9XG4gICAgfVxufSk7XG4vKipcbkRyYXdzIGEgY3Vyc29yIGF0IHRoZSBjdXJyZW50IGRyb3AgcG9zaXRpb24gd2hlbiBzb21ldGhpbmcgaXNcbmRyYWdnZWQgb3ZlciB0aGUgZWRpdG9yLlxuKi9cbmZ1bmN0aW9uIGRyb3BDdXJzb3IoKSB7XG4gICAgcmV0dXJuIFtkcm9wQ3Vyc29yUG9zLCBkcmF3RHJvcEN1cnNvcl07XG59XG5cbmZ1bmN0aW9uIGl0ZXJNYXRjaGVzKGRvYywgcmUsIGZyb20sIHRvLCBmKSB7XG4gICAgcmUubGFzdEluZGV4ID0gMDtcbiAgICBmb3IgKGxldCBjdXJzb3IgPSBkb2MuaXRlclJhbmdlKGZyb20sIHRvKSwgcG9zID0gZnJvbSwgbTsgIWN1cnNvci5uZXh0KCkuZG9uZTsgcG9zICs9IGN1cnNvci52YWx1ZS5sZW5ndGgpIHtcbiAgICAgICAgaWYgKCFjdXJzb3IubGluZUJyZWFrKVxuICAgICAgICAgICAgd2hpbGUgKG0gPSByZS5leGVjKGN1cnNvci52YWx1ZSkpXG4gICAgICAgICAgICAgICAgZihwb3MgKyBtLmluZGV4LCBtKTtcbiAgICB9XG59XG5mdW5jdGlvbiBtYXRjaFJhbmdlcyh2aWV3LCBtYXhMZW5ndGgpIHtcbiAgICBsZXQgdmlzaWJsZSA9IHZpZXcudmlzaWJsZVJhbmdlcztcbiAgICBpZiAodmlzaWJsZS5sZW5ndGggPT0gMSAmJiB2aXNpYmxlWzBdLmZyb20gPT0gdmlldy52aWV3cG9ydC5mcm9tICYmXG4gICAgICAgIHZpc2libGVbMF0udG8gPT0gdmlldy52aWV3cG9ydC50bylcbiAgICAgICAgcmV0dXJuIHZpc2libGU7XG4gICAgbGV0IHJlc3VsdCA9IFtdO1xuICAgIGZvciAobGV0IHsgZnJvbSwgdG8gfSBvZiB2aXNpYmxlKSB7XG4gICAgICAgIGZyb20gPSBNYXRoLm1heCh2aWV3LnN0YXRlLmRvYy5saW5lQXQoZnJvbSkuZnJvbSwgZnJvbSAtIG1heExlbmd0aCk7XG4gICAgICAgIHRvID0gTWF0aC5taW4odmlldy5zdGF0ZS5kb2MubGluZUF0KHRvKS50bywgdG8gKyBtYXhMZW5ndGgpO1xuICAgICAgICBpZiAocmVzdWx0Lmxlbmd0aCAmJiByZXN1bHRbcmVzdWx0Lmxlbmd0aCAtIDFdLnRvID49IGZyb20pXG4gICAgICAgICAgICByZXN1bHRbcmVzdWx0Lmxlbmd0aCAtIDFdLnRvID0gdG87XG4gICAgICAgIGVsc2VcbiAgICAgICAgICAgIHJlc3VsdC5wdXNoKHsgZnJvbSwgdG8gfSk7XG4gICAgfVxuICAgIHJldHVybiByZXN1bHQ7XG59XG4vKipcbkhlbHBlciBjbGFzcyB1c2VkIHRvIG1ha2UgaXQgZWFzaWVyIHRvIG1haW50YWluIGRlY29yYXRpb25zIG9uXG52aXNpYmxlIGNvZGUgdGhhdCBtYXRjaGVzIGEgZ2l2ZW4gcmVndWxhciBleHByZXNzaW9uLiBUbyBiZSB1c2VkXG5pbiBhIFt2aWV3IHBsdWdpbl0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyN2aWV3LlZpZXdQbHVnaW4pLiBJbnN0YW5jZXMgb2YgdGhpcyBvYmplY3RcbnJlcHJlc2VudCBhIG1hdGNoaW5nIGNvbmZpZ3VyYXRpb24uXG4qL1xuY2xhc3MgTWF0Y2hEZWNvcmF0b3Ige1xuICAgIC8qKlxuICAgIENyZWF0ZSBhIGRlY29yYXRvci5cbiAgICAqL1xuICAgIGNvbnN0cnVjdG9yKGNvbmZpZykge1xuICAgICAgICBjb25zdCB7IHJlZ2V4cCwgZGVjb3JhdGlvbiwgZGVjb3JhdGUsIGJvdW5kYXJ5LCBtYXhMZW5ndGggPSAxMDAwIH0gPSBjb25maWc7XG4gICAgICAgIGlmICghcmVnZXhwLmdsb2JhbClcbiAgICAgICAgICAgIHRocm93IG5ldyBSYW5nZUVycm9yKFwiVGhlIHJlZ3VsYXIgZXhwcmVzc2lvbiBnaXZlbiB0byBNYXRjaERlY29yYXRvciBzaG91bGQgaGF2ZSBpdHMgJ2cnIGZsYWcgc2V0XCIpO1xuICAgICAgICB0aGlzLnJlZ2V4cCA9IHJlZ2V4cDtcbiAgICAgICAgaWYgKGRlY29yYXRlKSB7XG4gICAgICAgICAgICB0aGlzLmFkZE1hdGNoID0gKG1hdGNoLCB2aWV3LCBmcm9tLCBhZGQpID0+IGRlY29yYXRlKGFkZCwgZnJvbSwgZnJvbSArIG1hdGNoWzBdLmxlbmd0aCwgbWF0Y2gsIHZpZXcpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHR5cGVvZiBkZWNvcmF0aW9uID09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgICAgdGhpcy5hZGRNYXRjaCA9IChtYXRjaCwgdmlldywgZnJvbSwgYWRkKSA9PiB7XG4gICAgICAgICAgICAgICAgbGV0IGRlY28gPSBkZWNvcmF0aW9uKG1hdGNoLCB2aWV3LCBmcm9tKTtcbiAgICAgICAgICAgICAgICBpZiAoZGVjbylcbiAgICAgICAgICAgICAgICAgICAgYWRkKGZyb20sIGZyb20gKyBtYXRjaFswXS5sZW5ndGgsIGRlY28pO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChkZWNvcmF0aW9uKSB7XG4gICAgICAgICAgICB0aGlzLmFkZE1hdGNoID0gKG1hdGNoLCBfdmlldywgZnJvbSwgYWRkKSA9PiBhZGQoZnJvbSwgZnJvbSArIG1hdGNoWzBdLmxlbmd0aCwgZGVjb3JhdGlvbik7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcihcIkVpdGhlciAnZGVjb3JhdGUnIG9yICdkZWNvcmF0aW9uJyBzaG91bGQgYmUgcHJvdmlkZWQgdG8gTWF0Y2hEZWNvcmF0b3JcIik7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5ib3VuZGFyeSA9IGJvdW5kYXJ5O1xuICAgICAgICB0aGlzLm1heExlbmd0aCA9IG1heExlbmd0aDtcbiAgICB9XG4gICAgLyoqXG4gICAgQ29tcHV0ZSB0aGUgZnVsbCBzZXQgb2YgZGVjb3JhdGlvbnMgZm9yIG1hdGNoZXMgaW4gdGhlIGdpdmVuXG4gICAgdmlldydzIHZpZXdwb3J0LiBZb3UnbGwgd2FudCB0byBjYWxsIHRoaXMgd2hlbiBpbml0aWFsaXppbmcgeW91clxuICAgIHBsdWdpbi5cbiAgICAqL1xuICAgIGNyZWF0ZURlY28odmlldykge1xuICAgICAgICBsZXQgYnVpbGQgPSBuZXcgUmFuZ2VTZXRCdWlsZGVyKCksIGFkZCA9IGJ1aWxkLmFkZC5iaW5kKGJ1aWxkKTtcbiAgICAgICAgZm9yIChsZXQgeyBmcm9tLCB0byB9IG9mIG1hdGNoUmFuZ2VzKHZpZXcsIHRoaXMubWF4TGVuZ3RoKSlcbiAgICAgICAgICAgIGl0ZXJNYXRjaGVzKHZpZXcuc3RhdGUuZG9jLCB0aGlzLnJlZ2V4cCwgZnJvbSwgdG8sIChmcm9tLCBtKSA9PiB0aGlzLmFkZE1hdGNoKG0sIHZpZXcsIGZyb20sIGFkZCkpO1xuICAgICAgICByZXR1cm4gYnVpbGQuZmluaXNoKCk7XG4gICAgfVxuICAgIC8qKlxuICAgIFVwZGF0ZSBhIHNldCBvZiBkZWNvcmF0aW9ucyBmb3IgYSB2aWV3IHVwZGF0ZS4gYGRlY29gIF9tdXN0XyBiZVxuICAgIHRoZSBzZXQgb2YgZGVjb3JhdGlvbnMgcHJvZHVjZWQgYnkgX3RoaXNfIGBNYXRjaERlY29yYXRvcmAgZm9yXG4gICAgdGhlIHZpZXcgc3RhdGUgYmVmb3JlIHRoZSB1cGRhdGUuXG4gICAgKi9cbiAgICB1cGRhdGVEZWNvKHVwZGF0ZSwgZGVjbykge1xuICAgICAgICBsZXQgY2hhbmdlRnJvbSA9IDFlOSwgY2hhbmdlVG8gPSAtMTtcbiAgICAgICAgaWYgKHVwZGF0ZS5kb2NDaGFuZ2VkKVxuICAgICAgICAgICAgdXBkYXRlLmNoYW5nZXMuaXRlckNoYW5nZXMoKF9mLCBfdCwgZnJvbSwgdG8pID0+IHtcbiAgICAgICAgICAgICAgICBpZiAodG8gPj0gdXBkYXRlLnZpZXcudmlld3BvcnQuZnJvbSAmJiBmcm9tIDw9IHVwZGF0ZS52aWV3LnZpZXdwb3J0LnRvKSB7XG4gICAgICAgICAgICAgICAgICAgIGNoYW5nZUZyb20gPSBNYXRoLm1pbihmcm9tLCBjaGFuZ2VGcm9tKTtcbiAgICAgICAgICAgICAgICAgICAgY2hhbmdlVG8gPSBNYXRoLm1heCh0bywgY2hhbmdlVG8pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICBpZiAodXBkYXRlLnZpZXdwb3J0TW92ZWQgfHwgY2hhbmdlVG8gLSBjaGFuZ2VGcm9tID4gMTAwMClcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNyZWF0ZURlY28odXBkYXRlLnZpZXcpO1xuICAgICAgICBpZiAoY2hhbmdlVG8gPiAtMSlcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnVwZGF0ZVJhbmdlKHVwZGF0ZS52aWV3LCBkZWNvLm1hcCh1cGRhdGUuY2hhbmdlcyksIGNoYW5nZUZyb20sIGNoYW5nZVRvKTtcbiAgICAgICAgcmV0dXJuIGRlY287XG4gICAgfVxuICAgIHVwZGF0ZVJhbmdlKHZpZXcsIGRlY28sIHVwZGF0ZUZyb20sIHVwZGF0ZVRvKSB7XG4gICAgICAgIGZvciAobGV0IHIgb2Ygdmlldy52aXNpYmxlUmFuZ2VzKSB7XG4gICAgICAgICAgICBsZXQgZnJvbSA9IE1hdGgubWF4KHIuZnJvbSwgdXBkYXRlRnJvbSksIHRvID0gTWF0aC5taW4oci50bywgdXBkYXRlVG8pO1xuICAgICAgICAgICAgaWYgKHRvID49IGZyb20pIHtcbiAgICAgICAgICAgICAgICBsZXQgZnJvbUxpbmUgPSB2aWV3LnN0YXRlLmRvYy5saW5lQXQoZnJvbSksIHRvTGluZSA9IGZyb21MaW5lLnRvIDwgdG8gPyB2aWV3LnN0YXRlLmRvYy5saW5lQXQodG8pIDogZnJvbUxpbmU7XG4gICAgICAgICAgICAgICAgbGV0IHN0YXJ0ID0gTWF0aC5tYXgoci5mcm9tLCBmcm9tTGluZS5mcm9tKSwgZW5kID0gTWF0aC5taW4oci50bywgdG9MaW5lLnRvKTtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5ib3VuZGFyeSkge1xuICAgICAgICAgICAgICAgICAgICBmb3IgKDsgZnJvbSA+IGZyb21MaW5lLmZyb207IGZyb20tLSlcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmJvdW5kYXJ5LnRlc3QoZnJvbUxpbmUudGV4dFtmcm9tIC0gMSAtIGZyb21MaW5lLmZyb21dKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXJ0ID0gZnJvbTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZm9yICg7IHRvIDwgdG9MaW5lLnRvOyB0bysrKVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuYm91bmRhcnkudGVzdCh0b0xpbmUudGV4dFt0byAtIHRvTGluZS5mcm9tXSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQgPSB0bztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgbGV0IHJhbmdlcyA9IFtdLCBtO1xuICAgICAgICAgICAgICAgIGxldCBhZGQgPSAoZnJvbSwgdG8sIGRlY28pID0+IHJhbmdlcy5wdXNoKGRlY28ucmFuZ2UoZnJvbSwgdG8pKTtcbiAgICAgICAgICAgICAgICBpZiAoZnJvbUxpbmUgPT0gdG9MaW5lKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmVnZXhwLmxhc3RJbmRleCA9IHN0YXJ0IC0gZnJvbUxpbmUuZnJvbTtcbiAgICAgICAgICAgICAgICAgICAgd2hpbGUgKChtID0gdGhpcy5yZWdleHAuZXhlYyhmcm9tTGluZS50ZXh0KSkgJiYgbS5pbmRleCA8IGVuZCAtIGZyb21MaW5lLmZyb20pXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmFkZE1hdGNoKG0sIHZpZXcsIG0uaW5kZXggKyBmcm9tTGluZS5mcm9tLCBhZGQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgaXRlck1hdGNoZXModmlldy5zdGF0ZS5kb2MsIHRoaXMucmVnZXhwLCBzdGFydCwgZW5kLCAoZnJvbSwgbSkgPT4gdGhpcy5hZGRNYXRjaChtLCB2aWV3LCBmcm9tLCBhZGQpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZGVjbyA9IGRlY28udXBkYXRlKHsgZmlsdGVyRnJvbTogc3RhcnQsIGZpbHRlclRvOiBlbmQsIGZpbHRlcjogKGZyb20sIHRvKSA9PiBmcm9tIDwgc3RhcnQgfHwgdG8gPiBlbmQsIGFkZDogcmFuZ2VzIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBkZWNvO1xuICAgIH1cbn1cblxuY29uc3QgVW5pY29kZVJlZ2V4cFN1cHBvcnQgPSAveC8udW5pY29kZSAhPSBudWxsID8gXCJndVwiIDogXCJnXCI7XG5jb25zdCBTcGVjaWFscyA9IC8qQF9fUFVSRV9fKi9uZXcgUmVnRXhwKFwiW1xcdTAwMDAtXFx1MDAwOFxcdTAwMGEtXFx1MDAxZlxcdTAwN2YtXFx1MDA5ZlxcdTAwYWRcXHUwNjFjXFx1MjAwYlxcdTIwMGVcXHUyMDBmXFx1MjAyOFxcdTIwMjlcXHUyMDJkXFx1MjAyZVxcdTIwNjZcXHUyMDY3XFx1MjA2OVxcdWZlZmZcXHVmZmY5LVxcdWZmZmNdXCIsIFVuaWNvZGVSZWdleHBTdXBwb3J0KTtcbmNvbnN0IE5hbWVzID0ge1xuICAgIDA6IFwibnVsbFwiLFxuICAgIDc6IFwiYmVsbFwiLFxuICAgIDg6IFwiYmFja3NwYWNlXCIsXG4gICAgMTA6IFwibmV3bGluZVwiLFxuICAgIDExOiBcInZlcnRpY2FsIHRhYlwiLFxuICAgIDEzOiBcImNhcnJpYWdlIHJldHVyblwiLFxuICAgIDI3OiBcImVzY2FwZVwiLFxuICAgIDgyMDM6IFwiemVybyB3aWR0aCBzcGFjZVwiLFxuICAgIDgyMDQ6IFwiemVybyB3aWR0aCBub24tam9pbmVyXCIsXG4gICAgODIwNTogXCJ6ZXJvIHdpZHRoIGpvaW5lclwiLFxuICAgIDgyMDY6IFwibGVmdC10by1yaWdodCBtYXJrXCIsXG4gICAgODIwNzogXCJyaWdodC10by1sZWZ0IG1hcmtcIixcbiAgICA4MjMyOiBcImxpbmUgc2VwYXJhdG9yXCIsXG4gICAgODIzNzogXCJsZWZ0LXRvLXJpZ2h0IG92ZXJyaWRlXCIsXG4gICAgODIzODogXCJyaWdodC10by1sZWZ0IG92ZXJyaWRlXCIsXG4gICAgODI5NDogXCJsZWZ0LXRvLXJpZ2h0IGlzb2xhdGVcIixcbiAgICA4Mjk1OiBcInJpZ2h0LXRvLWxlZnQgaXNvbGF0ZVwiLFxuICAgIDgyOTc6IFwicG9wIGRpcmVjdGlvbmFsIGlzb2xhdGVcIixcbiAgICA4MjMzOiBcInBhcmFncmFwaCBzZXBhcmF0b3JcIixcbiAgICA2NTI3OTogXCJ6ZXJvIHdpZHRoIG5vLWJyZWFrIHNwYWNlXCIsXG4gICAgNjU1MzI6IFwib2JqZWN0IHJlcGxhY2VtZW50XCJcbn07XG5sZXQgX3N1cHBvcnRzVGFiU2l6ZSA9IG51bGw7XG5mdW5jdGlvbiBzdXBwb3J0c1RhYlNpemUoKSB7XG4gICAgdmFyIF9hO1xuICAgIGlmIChfc3VwcG9ydHNUYWJTaXplID09IG51bGwgJiYgdHlwZW9mIGRvY3VtZW50ICE9IFwidW5kZWZpbmVkXCIgJiYgZG9jdW1lbnQuYm9keSkge1xuICAgICAgICBsZXQgc3R5bGVzID0gZG9jdW1lbnQuYm9keS5zdHlsZTtcbiAgICAgICAgX3N1cHBvcnRzVGFiU2l6ZSA9ICgoX2EgPSBzdHlsZXMudGFiU2l6ZSkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogc3R5bGVzLk1velRhYlNpemUpICE9IG51bGw7XG4gICAgfVxuICAgIHJldHVybiBfc3VwcG9ydHNUYWJTaXplIHx8IGZhbHNlO1xufVxuY29uc3Qgc3BlY2lhbENoYXJDb25maWcgPSAvKkBfX1BVUkVfXyovRmFjZXQuZGVmaW5lKHtcbiAgICBjb21iaW5lKGNvbmZpZ3MpIHtcbiAgICAgICAgbGV0IGNvbmZpZyA9IGNvbWJpbmVDb25maWcoY29uZmlncywge1xuICAgICAgICAgICAgcmVuZGVyOiBudWxsLFxuICAgICAgICAgICAgc3BlY2lhbENoYXJzOiBTcGVjaWFscyxcbiAgICAgICAgICAgIGFkZFNwZWNpYWxDaGFyczogbnVsbFxuICAgICAgICB9KTtcbiAgICAgICAgaWYgKGNvbmZpZy5yZXBsYWNlVGFicyA9ICFzdXBwb3J0c1RhYlNpemUoKSlcbiAgICAgICAgICAgIGNvbmZpZy5zcGVjaWFsQ2hhcnMgPSBuZXcgUmVnRXhwKFwiXFx0fFwiICsgY29uZmlnLnNwZWNpYWxDaGFycy5zb3VyY2UsIFVuaWNvZGVSZWdleHBTdXBwb3J0KTtcbiAgICAgICAgaWYgKGNvbmZpZy5hZGRTcGVjaWFsQ2hhcnMpXG4gICAgICAgICAgICBjb25maWcuc3BlY2lhbENoYXJzID0gbmV3IFJlZ0V4cChjb25maWcuc3BlY2lhbENoYXJzLnNvdXJjZSArIFwifFwiICsgY29uZmlnLmFkZFNwZWNpYWxDaGFycy5zb3VyY2UsIFVuaWNvZGVSZWdleHBTdXBwb3J0KTtcbiAgICAgICAgcmV0dXJuIGNvbmZpZztcbiAgICB9XG59KTtcbi8qKlxuUmV0dXJucyBhbiBleHRlbnNpb24gdGhhdCBpbnN0YWxscyBoaWdobGlnaHRpbmcgb2Ygc3BlY2lhbFxuY2hhcmFjdGVycy5cbiovXG5mdW5jdGlvbiBoaWdobGlnaHRTcGVjaWFsQ2hhcnMoXG4vKipcbkNvbmZpZ3VyYXRpb24gb3B0aW9ucy5cbiovXG5jb25maWcgPSB7fSkge1xuICAgIHJldHVybiBbc3BlY2lhbENoYXJDb25maWcub2YoY29uZmlnKSwgc3BlY2lhbENoYXJQbHVnaW4oKV07XG59XG5sZXQgX3BsdWdpbiA9IG51bGw7XG5mdW5jdGlvbiBzcGVjaWFsQ2hhclBsdWdpbigpIHtcbiAgICByZXR1cm4gX3BsdWdpbiB8fCAoX3BsdWdpbiA9IFZpZXdQbHVnaW4uZnJvbUNsYXNzKGNsYXNzIHtcbiAgICAgICAgY29uc3RydWN0b3Iodmlldykge1xuICAgICAgICAgICAgdGhpcy52aWV3ID0gdmlldztcbiAgICAgICAgICAgIHRoaXMuZGVjb3JhdGlvbnMgPSBEZWNvcmF0aW9uLm5vbmU7XG4gICAgICAgICAgICB0aGlzLmRlY29yYXRpb25DYWNoZSA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gICAgICAgICAgICB0aGlzLmRlY29yYXRvciA9IHRoaXMubWFrZURlY29yYXRvcih2aWV3LnN0YXRlLmZhY2V0KHNwZWNpYWxDaGFyQ29uZmlnKSk7XG4gICAgICAgICAgICB0aGlzLmRlY29yYXRpb25zID0gdGhpcy5kZWNvcmF0b3IuY3JlYXRlRGVjbyh2aWV3KTtcbiAgICAgICAgfVxuICAgICAgICBtYWtlRGVjb3JhdG9yKGNvbmYpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgTWF0Y2hEZWNvcmF0b3Ioe1xuICAgICAgICAgICAgICAgIHJlZ2V4cDogY29uZi5zcGVjaWFsQ2hhcnMsXG4gICAgICAgICAgICAgICAgZGVjb3JhdGlvbjogKG0sIHZpZXcsIHBvcykgPT4ge1xuICAgICAgICAgICAgICAgICAgICBsZXQgeyBkb2MgfSA9IHZpZXcuc3RhdGU7XG4gICAgICAgICAgICAgICAgICAgIGxldCBjb2RlID0gY29kZVBvaW50QXQobVswXSwgMCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjb2RlID09IDkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBsaW5lID0gZG9jLmxpbmVBdChwb3MpO1xuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHNpemUgPSB2aWV3LnN0YXRlLnRhYlNpemUsIGNvbCA9IGNvdW50Q29sdW1uKGxpbmUudGV4dCwgc2l6ZSwgcG9zIC0gbGluZS5mcm9tKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBEZWNvcmF0aW9uLnJlcGxhY2Uoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpZGdldDogbmV3IFRhYldpZGdldCgoc2l6ZSAtIChjb2wgJSBzaXplKSkgKiB0aGlzLnZpZXcuZGVmYXVsdENoYXJhY3RlcldpZHRoIC8gdGhpcy52aWV3LnNjYWxlWClcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmRlY29yYXRpb25DYWNoZVtjb2RlXSB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgKHRoaXMuZGVjb3JhdGlvbkNhY2hlW2NvZGVdID0gRGVjb3JhdGlvbi5yZXBsYWNlKHsgd2lkZ2V0OiBuZXcgU3BlY2lhbENoYXJXaWRnZXQoY29uZiwgY29kZSkgfSkpO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgYm91bmRhcnk6IGNvbmYucmVwbGFjZVRhYnMgPyB1bmRlZmluZWQgOiAvW15dL1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgdXBkYXRlKHVwZGF0ZSkge1xuICAgICAgICAgICAgbGV0IGNvbmYgPSB1cGRhdGUuc3RhdGUuZmFjZXQoc3BlY2lhbENoYXJDb25maWcpO1xuICAgICAgICAgICAgaWYgKHVwZGF0ZS5zdGFydFN0YXRlLmZhY2V0KHNwZWNpYWxDaGFyQ29uZmlnKSAhPSBjb25mKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5kZWNvcmF0b3IgPSB0aGlzLm1ha2VEZWNvcmF0b3IoY29uZik7XG4gICAgICAgICAgICAgICAgdGhpcy5kZWNvcmF0aW9ucyA9IHRoaXMuZGVjb3JhdG9yLmNyZWF0ZURlY28odXBkYXRlLnZpZXcpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5kZWNvcmF0aW9ucyA9IHRoaXMuZGVjb3JhdG9yLnVwZGF0ZURlY28odXBkYXRlLCB0aGlzLmRlY29yYXRpb25zKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAgZGVjb3JhdGlvbnM6IHYgPT4gdi5kZWNvcmF0aW9uc1xuICAgIH0pKTtcbn1cbmNvbnN0IERlZmF1bHRQbGFjZWhvbGRlciA9IFwiXFx1MjAyMlwiO1xuLy8gQXNzaWducyBwbGFjZWhvbGRlciBjaGFyYWN0ZXJzIGZyb20gdGhlIENvbnRyb2wgUGljdHVyZXMgYmxvY2sgdG9cbi8vIEFTQ0lJIGNvbnRyb2wgY2hhcmFjdGVyc1xuZnVuY3Rpb24gcGxhY2Vob2xkZXIkMShjb2RlKSB7XG4gICAgaWYgKGNvZGUgPj0gMzIpXG4gICAgICAgIHJldHVybiBEZWZhdWx0UGxhY2Vob2xkZXI7XG4gICAgaWYgKGNvZGUgPT0gMTApXG4gICAgICAgIHJldHVybiBcIlxcdTI0MjRcIjtcbiAgICByZXR1cm4gU3RyaW5nLmZyb21DaGFyQ29kZSg5MjE2ICsgY29kZSk7XG59XG5jbGFzcyBTcGVjaWFsQ2hhcldpZGdldCBleHRlbmRzIFdpZGdldFR5cGUge1xuICAgIGNvbnN0cnVjdG9yKG9wdGlvbnMsIGNvZGUpIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy5vcHRpb25zID0gb3B0aW9ucztcbiAgICAgICAgdGhpcy5jb2RlID0gY29kZTtcbiAgICB9XG4gICAgZXEob3RoZXIpIHsgcmV0dXJuIG90aGVyLmNvZGUgPT0gdGhpcy5jb2RlOyB9XG4gICAgdG9ET00odmlldykge1xuICAgICAgICBsZXQgcGggPSBwbGFjZWhvbGRlciQxKHRoaXMuY29kZSk7XG4gICAgICAgIGxldCBkZXNjID0gdmlldy5zdGF0ZS5waHJhc2UoXCJDb250cm9sIGNoYXJhY3RlclwiKSArIFwiIFwiICsgKE5hbWVzW3RoaXMuY29kZV0gfHwgXCIweFwiICsgdGhpcy5jb2RlLnRvU3RyaW5nKDE2KSk7XG4gICAgICAgIGxldCBjdXN0b20gPSB0aGlzLm9wdGlvbnMucmVuZGVyICYmIHRoaXMub3B0aW9ucy5yZW5kZXIodGhpcy5jb2RlLCBkZXNjLCBwaCk7XG4gICAgICAgIGlmIChjdXN0b20pXG4gICAgICAgICAgICByZXR1cm4gY3VzdG9tO1xuICAgICAgICBsZXQgc3BhbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIpO1xuICAgICAgICBzcGFuLnRleHRDb250ZW50ID0gcGg7XG4gICAgICAgIHNwYW4udGl0bGUgPSBkZXNjO1xuICAgICAgICBzcGFuLnNldEF0dHJpYnV0ZShcImFyaWEtbGFiZWxcIiwgZGVzYyk7XG4gICAgICAgIHNwYW4uY2xhc3NOYW1lID0gXCJjbS1zcGVjaWFsQ2hhclwiO1xuICAgICAgICByZXR1cm4gc3BhbjtcbiAgICB9XG4gICAgaWdub3JlRXZlbnQoKSB7IHJldHVybiBmYWxzZTsgfVxufVxuY2xhc3MgVGFiV2lkZ2V0IGV4dGVuZHMgV2lkZ2V0VHlwZSB7XG4gICAgY29uc3RydWN0b3Iod2lkdGgpIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy53aWR0aCA9IHdpZHRoO1xuICAgIH1cbiAgICBlcShvdGhlcikgeyByZXR1cm4gb3RoZXIud2lkdGggPT0gdGhpcy53aWR0aDsgfVxuICAgIHRvRE9NKCkge1xuICAgICAgICBsZXQgc3BhbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIpO1xuICAgICAgICBzcGFuLnRleHRDb250ZW50ID0gXCJcXHRcIjtcbiAgICAgICAgc3Bhbi5jbGFzc05hbWUgPSBcImNtLXRhYlwiO1xuICAgICAgICBzcGFuLnN0eWxlLndpZHRoID0gdGhpcy53aWR0aCArIFwicHhcIjtcbiAgICAgICAgcmV0dXJuIHNwYW47XG4gICAgfVxuICAgIGlnbm9yZUV2ZW50KCkgeyByZXR1cm4gZmFsc2U7IH1cbn1cblxuY29uc3QgcGx1Z2luID0gLypAX19QVVJFX18qL1ZpZXdQbHVnaW4uZnJvbUNsYXNzKGNsYXNzIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5oZWlnaHQgPSAxMDAwO1xuICAgICAgICB0aGlzLmF0dHJzID0geyBzdHlsZTogXCJwYWRkaW5nLWJvdHRvbTogMTAwMHB4XCIgfTtcbiAgICB9XG4gICAgdXBkYXRlKHVwZGF0ZSkge1xuICAgICAgICBsZXQgeyB2aWV3IH0gPSB1cGRhdGU7XG4gICAgICAgIGxldCBoZWlnaHQgPSB2aWV3LnZpZXdTdGF0ZS5lZGl0b3JIZWlnaHQgLVxuICAgICAgICAgICAgdmlldy5kZWZhdWx0TGluZUhlaWdodCAtIHZpZXcuZG9jdW1lbnRQYWRkaW5nLnRvcCAtIDAuNTtcbiAgICAgICAgaWYgKGhlaWdodCA+PSAwICYmIGhlaWdodCAhPSB0aGlzLmhlaWdodCkge1xuICAgICAgICAgICAgdGhpcy5oZWlnaHQgPSBoZWlnaHQ7XG4gICAgICAgICAgICB0aGlzLmF0dHJzID0geyBzdHlsZTogYHBhZGRpbmctYm90dG9tOiAke2hlaWdodH1weGAgfTtcbiAgICAgICAgfVxuICAgIH1cbn0pO1xuLyoqXG5SZXR1cm5zIGFuIGV4dGVuc2lvbiB0aGF0IG1ha2VzIHN1cmUgdGhlIGNvbnRlbnQgaGFzIGEgYm90dG9tXG5tYXJnaW4gZXF1aXZhbGVudCB0byB0aGUgaGVpZ2h0IG9mIHRoZSBlZGl0b3IsIG1pbnVzIG9uZSBsaW5lXG5oZWlnaHQsIHNvIHRoYXQgZXZlcnkgbGluZSBpbiB0aGUgZG9jdW1lbnQgY2FuIGJlIHNjcm9sbGVkIHRvIHRoZVxudG9wIG9mIHRoZSBlZGl0b3IuXG5cblRoaXMgaXMgb25seSBtZWFuaW5nZnVsIHdoZW4gdGhlIGVkaXRvciBpcyBzY3JvbGxhYmxlLCBhbmQgc2hvdWxkXG5ub3QgYmUgZW5hYmxlZCBpbiBlZGl0b3JzIHRoYXQgdGFrZSB0aGUgc2l6ZSBvZiB0aGVpciBjb250ZW50LlxuKi9cbmZ1bmN0aW9uIHNjcm9sbFBhc3RFbmQoKSB7XG4gICAgcmV0dXJuIFtwbHVnaW4sIGNvbnRlbnRBdHRyaWJ1dGVzLm9mKHZpZXcgPT4geyB2YXIgX2E7IHJldHVybiAoKF9hID0gdmlldy5wbHVnaW4ocGx1Z2luKSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmF0dHJzKSB8fCBudWxsOyB9KV07XG59XG5cbi8qKlxuTWFyayBsaW5lcyB0aGF0IGhhdmUgYSBjdXJzb3Igb24gdGhlbSB3aXRoIHRoZSBgXCJjbS1hY3RpdmVMaW5lXCJgXG5ET00gY2xhc3MuXG4qL1xuZnVuY3Rpb24gaGlnaGxpZ2h0QWN0aXZlTGluZSgpIHtcbiAgICByZXR1cm4gYWN0aXZlTGluZUhpZ2hsaWdodGVyO1xufVxuY29uc3QgbGluZURlY28gPSAvKkBfX1BVUkVfXyovRGVjb3JhdGlvbi5saW5lKHsgY2xhc3M6IFwiY20tYWN0aXZlTGluZVwiIH0pO1xuY29uc3QgYWN0aXZlTGluZUhpZ2hsaWdodGVyID0gLypAX19QVVJFX18qL1ZpZXdQbHVnaW4uZnJvbUNsYXNzKGNsYXNzIHtcbiAgICBjb25zdHJ1Y3Rvcih2aWV3KSB7XG4gICAgICAgIHRoaXMuZGVjb3JhdGlvbnMgPSB0aGlzLmdldERlY28odmlldyk7XG4gICAgfVxuICAgIHVwZGF0ZSh1cGRhdGUpIHtcbiAgICAgICAgaWYgKHVwZGF0ZS5kb2NDaGFuZ2VkIHx8IHVwZGF0ZS5zZWxlY3Rpb25TZXQpXG4gICAgICAgICAgICB0aGlzLmRlY29yYXRpb25zID0gdGhpcy5nZXREZWNvKHVwZGF0ZS52aWV3KTtcbiAgICB9XG4gICAgZ2V0RGVjbyh2aWV3KSB7XG4gICAgICAgIGxldCBsYXN0TGluZVN0YXJ0ID0gLTEsIGRlY28gPSBbXTtcbiAgICAgICAgZm9yIChsZXQgciBvZiB2aWV3LnN0YXRlLnNlbGVjdGlvbi5yYW5nZXMpIHtcbiAgICAgICAgICAgIGxldCBsaW5lID0gdmlldy5saW5lQmxvY2tBdChyLmhlYWQpO1xuICAgICAgICAgICAgaWYgKGxpbmUuZnJvbSA+IGxhc3RMaW5lU3RhcnQpIHtcbiAgICAgICAgICAgICAgICBkZWNvLnB1c2gobGluZURlY28ucmFuZ2UobGluZS5mcm9tKSk7XG4gICAgICAgICAgICAgICAgbGFzdExpbmVTdGFydCA9IGxpbmUuZnJvbTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gRGVjb3JhdGlvbi5zZXQoZGVjbyk7XG4gICAgfVxufSwge1xuICAgIGRlY29yYXRpb25zOiB2ID0+IHYuZGVjb3JhdGlvbnNcbn0pO1xuXG5jbGFzcyBQbGFjZWhvbGRlciBleHRlbmRzIFdpZGdldFR5cGUge1xuICAgIGNvbnN0cnVjdG9yKGNvbnRlbnQpIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy5jb250ZW50ID0gY29udGVudDtcbiAgICB9XG4gICAgdG9ET00odmlldykge1xuICAgICAgICBsZXQgd3JhcCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIpO1xuICAgICAgICB3cmFwLmNsYXNzTmFtZSA9IFwiY20tcGxhY2Vob2xkZXJcIjtcbiAgICAgICAgd3JhcC5zdHlsZS5wb2ludGVyRXZlbnRzID0gXCJub25lXCI7XG4gICAgICAgIHdyYXAuYXBwZW5kQ2hpbGQodHlwZW9mIHRoaXMuY29udGVudCA9PSBcInN0cmluZ1wiID8gZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUodGhpcy5jb250ZW50KSA6XG4gICAgICAgICAgICB0eXBlb2YgdGhpcy5jb250ZW50ID09IFwiZnVuY3Rpb25cIiA/IHRoaXMuY29udGVudCh2aWV3KSA6XG4gICAgICAgICAgICAgICAgdGhpcy5jb250ZW50LmNsb25lTm9kZSh0cnVlKSk7XG4gICAgICAgIHdyYXAuc2V0QXR0cmlidXRlKFwiYXJpYS1oaWRkZW5cIiwgXCJ0cnVlXCIpO1xuICAgICAgICByZXR1cm4gd3JhcDtcbiAgICB9XG4gICAgY29vcmRzQXQoZG9tKSB7XG4gICAgICAgIGxldCByZWN0cyA9IGRvbS5maXJzdENoaWxkID8gY2xpZW50UmVjdHNGb3IoZG9tLmZpcnN0Q2hpbGQpIDogW107XG4gICAgICAgIGlmICghcmVjdHMubGVuZ3RoKVxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIGxldCBzdHlsZSA9IHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKGRvbS5wYXJlbnROb2RlKTtcbiAgICAgICAgbGV0IHJlY3QgPSBmbGF0dGVuUmVjdChyZWN0c1swXSwgc3R5bGUuZGlyZWN0aW9uICE9IFwicnRsXCIpO1xuICAgICAgICBsZXQgbGluZUhlaWdodCA9IHBhcnNlSW50KHN0eWxlLmxpbmVIZWlnaHQpO1xuICAgICAgICBpZiAocmVjdC5ib3R0b20gLSByZWN0LnRvcCA+IGxpbmVIZWlnaHQgKiAxLjUpXG4gICAgICAgICAgICByZXR1cm4geyBsZWZ0OiByZWN0LmxlZnQsIHJpZ2h0OiByZWN0LnJpZ2h0LCB0b3A6IHJlY3QudG9wLCBib3R0b206IHJlY3QudG9wICsgbGluZUhlaWdodCB9O1xuICAgICAgICByZXR1cm4gcmVjdDtcbiAgICB9XG4gICAgaWdub3JlRXZlbnQoKSB7IHJldHVybiBmYWxzZTsgfVxufVxuLyoqXG5FeHRlbnNpb24gdGhhdCBlbmFibGVzIGEgcGxhY2Vob2xkZXLigJRhIHBpZWNlIG9mIGV4YW1wbGUgY29udGVudFxudG8gc2hvdyB3aGVuIHRoZSBlZGl0b3IgaXMgZW1wdHkuXG4qL1xuZnVuY3Rpb24gcGxhY2Vob2xkZXIoY29udGVudCkge1xuICAgIGxldCBwbHVnaW4gPSBWaWV3UGx1Z2luLmZyb21DbGFzcyhjbGFzcyB7XG4gICAgICAgIGNvbnN0cnVjdG9yKHZpZXcpIHtcbiAgICAgICAgICAgIHRoaXMudmlldyA9IHZpZXc7XG4gICAgICAgICAgICB0aGlzLnBsYWNlaG9sZGVyID0gY29udGVudFxuICAgICAgICAgICAgICAgID8gRGVjb3JhdGlvbi5zZXQoW0RlY29yYXRpb24ud2lkZ2V0KHsgd2lkZ2V0OiBuZXcgUGxhY2Vob2xkZXIoY29udGVudCksIHNpZGU6IDEgfSkucmFuZ2UoMCldKVxuICAgICAgICAgICAgICAgIDogRGVjb3JhdGlvbi5ub25lO1xuICAgICAgICB9XG4gICAgICAgIGdldCBkZWNvcmF0aW9ucygpIHsgcmV0dXJuIHRoaXMudmlldy5zdGF0ZS5kb2MubGVuZ3RoID8gRGVjb3JhdGlvbi5ub25lIDogdGhpcy5wbGFjZWhvbGRlcjsgfVxuICAgIH0sIHsgZGVjb3JhdGlvbnM6IHYgPT4gdi5kZWNvcmF0aW9ucyB9KTtcbiAgICByZXR1cm4gdHlwZW9mIGNvbnRlbnQgPT0gXCJzdHJpbmdcIiA/IFtcbiAgICAgICAgcGx1Z2luLCBFZGl0b3JWaWV3LmNvbnRlbnRBdHRyaWJ1dGVzLm9mKHsgXCJhcmlhLXBsYWNlaG9sZGVyXCI6IGNvbnRlbnQgfSlcbiAgICBdIDogcGx1Z2luO1xufVxuXG4vLyBEb24ndCBjb21wdXRlIHByZWNpc2UgY29sdW1uIHBvc2l0aW9ucyBmb3IgbGluZSBvZmZzZXRzIGFib3ZlIHRoaXNcbi8vIChzaW5jZSBpdCBjb3VsZCBnZXQgZXhwZW5zaXZlKS4gQXNzdW1lIG9mZnNldD09Y29sdW1uIGZvciB0aGVtLlxuY29uc3QgTWF4T2ZmID0gMjAwMDtcbmZ1bmN0aW9uIHJlY3RhbmdsZUZvcihzdGF0ZSwgYSwgYikge1xuICAgIGxldCBzdGFydExpbmUgPSBNYXRoLm1pbihhLmxpbmUsIGIubGluZSksIGVuZExpbmUgPSBNYXRoLm1heChhLmxpbmUsIGIubGluZSk7XG4gICAgbGV0IHJhbmdlcyA9IFtdO1xuICAgIGlmIChhLm9mZiA+IE1heE9mZiB8fCBiLm9mZiA+IE1heE9mZiB8fCBhLmNvbCA8IDAgfHwgYi5jb2wgPCAwKSB7XG4gICAgICAgIGxldCBzdGFydE9mZiA9IE1hdGgubWluKGEub2ZmLCBiLm9mZiksIGVuZE9mZiA9IE1hdGgubWF4KGEub2ZmLCBiLm9mZik7XG4gICAgICAgIGZvciAobGV0IGkgPSBzdGFydExpbmU7IGkgPD0gZW5kTGluZTsgaSsrKSB7XG4gICAgICAgICAgICBsZXQgbGluZSA9IHN0YXRlLmRvYy5saW5lKGkpO1xuICAgICAgICAgICAgaWYgKGxpbmUubGVuZ3RoIDw9IGVuZE9mZilcbiAgICAgICAgICAgICAgICByYW5nZXMucHVzaChFZGl0b3JTZWxlY3Rpb24ucmFuZ2UobGluZS5mcm9tICsgc3RhcnRPZmYsIGxpbmUudG8gKyBlbmRPZmYpKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgbGV0IHN0YXJ0Q29sID0gTWF0aC5taW4oYS5jb2wsIGIuY29sKSwgZW5kQ29sID0gTWF0aC5tYXgoYS5jb2wsIGIuY29sKTtcbiAgICAgICAgZm9yIChsZXQgaSA9IHN0YXJ0TGluZTsgaSA8PSBlbmRMaW5lOyBpKyspIHtcbiAgICAgICAgICAgIGxldCBsaW5lID0gc3RhdGUuZG9jLmxpbmUoaSk7XG4gICAgICAgICAgICBsZXQgc3RhcnQgPSBmaW5kQ29sdW1uKGxpbmUudGV4dCwgc3RhcnRDb2wsIHN0YXRlLnRhYlNpemUsIHRydWUpO1xuICAgICAgICAgICAgaWYgKHN0YXJ0IDwgMCkge1xuICAgICAgICAgICAgICAgIHJhbmdlcy5wdXNoKEVkaXRvclNlbGVjdGlvbi5jdXJzb3IobGluZS50bykpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgbGV0IGVuZCA9IGZpbmRDb2x1bW4obGluZS50ZXh0LCBlbmRDb2wsIHN0YXRlLnRhYlNpemUpO1xuICAgICAgICAgICAgICAgIHJhbmdlcy5wdXNoKEVkaXRvclNlbGVjdGlvbi5yYW5nZShsaW5lLmZyb20gKyBzdGFydCwgbGluZS5mcm9tICsgZW5kKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHJhbmdlcztcbn1cbmZ1bmN0aW9uIGFic29sdXRlQ29sdW1uKHZpZXcsIHgpIHtcbiAgICBsZXQgcmVmID0gdmlldy5jb29yZHNBdFBvcyh2aWV3LnZpZXdwb3J0LmZyb20pO1xuICAgIHJldHVybiByZWYgPyBNYXRoLnJvdW5kKE1hdGguYWJzKChyZWYubGVmdCAtIHgpIC8gdmlldy5kZWZhdWx0Q2hhcmFjdGVyV2lkdGgpKSA6IC0xO1xufVxuZnVuY3Rpb24gZ2V0UG9zKHZpZXcsIGV2ZW50KSB7XG4gICAgbGV0IG9mZnNldCA9IHZpZXcucG9zQXRDb29yZHMoeyB4OiBldmVudC5jbGllbnRYLCB5OiBldmVudC5jbGllbnRZIH0sIGZhbHNlKTtcbiAgICBsZXQgbGluZSA9IHZpZXcuc3RhdGUuZG9jLmxpbmVBdChvZmZzZXQpLCBvZmYgPSBvZmZzZXQgLSBsaW5lLmZyb207XG4gICAgbGV0IGNvbCA9IG9mZiA+IE1heE9mZiA/IC0xXG4gICAgICAgIDogb2ZmID09IGxpbmUubGVuZ3RoID8gYWJzb2x1dGVDb2x1bW4odmlldywgZXZlbnQuY2xpZW50WClcbiAgICAgICAgICAgIDogY291bnRDb2x1bW4obGluZS50ZXh0LCB2aWV3LnN0YXRlLnRhYlNpemUsIG9mZnNldCAtIGxpbmUuZnJvbSk7XG4gICAgcmV0dXJuIHsgbGluZTogbGluZS5udW1iZXIsIGNvbCwgb2ZmIH07XG59XG5mdW5jdGlvbiByZWN0YW5nbGVTZWxlY3Rpb25TdHlsZSh2aWV3LCBldmVudCkge1xuICAgIGxldCBzdGFydCA9IGdldFBvcyh2aWV3LCBldmVudCksIHN0YXJ0U2VsID0gdmlldy5zdGF0ZS5zZWxlY3Rpb247XG4gICAgaWYgKCFzdGFydClcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgdXBkYXRlKHVwZGF0ZSkge1xuICAgICAgICAgICAgaWYgKHVwZGF0ZS5kb2NDaGFuZ2VkKSB7XG4gICAgICAgICAgICAgICAgbGV0IG5ld1N0YXJ0ID0gdXBkYXRlLmNoYW5nZXMubWFwUG9zKHVwZGF0ZS5zdGFydFN0YXRlLmRvYy5saW5lKHN0YXJ0LmxpbmUpLmZyb20pO1xuICAgICAgICAgICAgICAgIGxldCBuZXdMaW5lID0gdXBkYXRlLnN0YXRlLmRvYy5saW5lQXQobmV3U3RhcnQpO1xuICAgICAgICAgICAgICAgIHN0YXJ0ID0geyBsaW5lOiBuZXdMaW5lLm51bWJlciwgY29sOiBzdGFydC5jb2wsIG9mZjogTWF0aC5taW4oc3RhcnQub2ZmLCBuZXdMaW5lLmxlbmd0aCkgfTtcbiAgICAgICAgICAgICAgICBzdGFydFNlbCA9IHN0YXJ0U2VsLm1hcCh1cGRhdGUuY2hhbmdlcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIGdldChldmVudCwgX2V4dGVuZCwgbXVsdGlwbGUpIHtcbiAgICAgICAgICAgIGxldCBjdXIgPSBnZXRQb3ModmlldywgZXZlbnQpO1xuICAgICAgICAgICAgaWYgKCFjdXIpXG4gICAgICAgICAgICAgICAgcmV0dXJuIHN0YXJ0U2VsO1xuICAgICAgICAgICAgbGV0IHJhbmdlcyA9IHJlY3RhbmdsZUZvcih2aWV3LnN0YXRlLCBzdGFydCwgY3VyKTtcbiAgICAgICAgICAgIGlmICghcmFuZ2VzLmxlbmd0aClcbiAgICAgICAgICAgICAgICByZXR1cm4gc3RhcnRTZWw7XG4gICAgICAgICAgICBpZiAobXVsdGlwbGUpXG4gICAgICAgICAgICAgICAgcmV0dXJuIEVkaXRvclNlbGVjdGlvbi5jcmVhdGUocmFuZ2VzLmNvbmNhdChzdGFydFNlbC5yYW5nZXMpKTtcbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICByZXR1cm4gRWRpdG9yU2VsZWN0aW9uLmNyZWF0ZShyYW5nZXMpO1xuICAgICAgICB9XG4gICAgfTtcbn1cbi8qKlxuQ3JlYXRlIGFuIGV4dGVuc2lvbiB0aGF0IGVuYWJsZXMgcmVjdGFuZ3VsYXIgc2VsZWN0aW9ucy4gQnlcbmRlZmF1bHQsIGl0IHdpbGwgcmVhY3QgdG8gbGVmdCBtb3VzZSBkcmFnIHdpdGggdGhlIEFsdCBrZXkgaGVsZFxuZG93bi4gV2hlbiBzdWNoIGEgc2VsZWN0aW9uIG9jY3VycywgdGhlIHRleHQgd2l0aGluIHRoZSByZWN0YW5nbGVcbnRoYXQgd2FzIGRyYWdnZWQgb3ZlciB3aWxsIGJlIHNlbGVjdGVkLCBhcyBvbmUgc2VsZWN0aW9uXG5bcmFuZ2VdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jc3RhdGUuU2VsZWN0aW9uUmFuZ2UpIHBlciBsaW5lLlxuKi9cbmZ1bmN0aW9uIHJlY3Rhbmd1bGFyU2VsZWN0aW9uKG9wdGlvbnMpIHtcbiAgICBsZXQgZmlsdGVyID0gKG9wdGlvbnMgPT09IG51bGwgfHwgb3B0aW9ucyA9PT0gdm9pZCAwID8gdm9pZCAwIDogb3B0aW9ucy5ldmVudEZpbHRlcikgfHwgKGUgPT4gZS5hbHRLZXkgJiYgZS5idXR0b24gPT0gMCk7XG4gICAgcmV0dXJuIEVkaXRvclZpZXcubW91c2VTZWxlY3Rpb25TdHlsZS5vZigodmlldywgZXZlbnQpID0+IGZpbHRlcihldmVudCkgPyByZWN0YW5nbGVTZWxlY3Rpb25TdHlsZSh2aWV3LCBldmVudCkgOiBudWxsKTtcbn1cbmNvbnN0IGtleXMgPSB7XG4gICAgQWx0OiBbMTgsIGUgPT4gISFlLmFsdEtleV0sXG4gICAgQ29udHJvbDogWzE3LCBlID0+ICEhZS5jdHJsS2V5XSxcbiAgICBTaGlmdDogWzE2LCBlID0+ICEhZS5zaGlmdEtleV0sXG4gICAgTWV0YTogWzkxLCBlID0+ICEhZS5tZXRhS2V5XVxufTtcbmNvbnN0IHNob3dDcm9zc2hhaXIgPSB7IHN0eWxlOiBcImN1cnNvcjogY3Jvc3NoYWlyXCIgfTtcbi8qKlxuUmV0dXJucyBhbiBleHRlbnNpb24gdGhhdCB0dXJucyB0aGUgcG9pbnRlciBjdXJzb3IgaW50byBhXG5jcm9zc2hhaXIgd2hlbiBhIGdpdmVuIG1vZGlmaWVyIGtleSwgZGVmYXVsdGluZyB0byBBbHQsIGlzIGhlbGRcbmRvd24uIENhbiBzZXJ2ZSBhcyBhIHZpc3VhbCBoaW50IHRoYXQgcmVjdGFuZ3VsYXIgc2VsZWN0aW9uIGlzXG5nb2luZyB0byBoYXBwZW4gd2hlbiBwYWlyZWQgd2l0aFxuW2ByZWN0YW5ndWxhclNlbGVjdGlvbmBdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jdmlldy5yZWN0YW5ndWxhclNlbGVjdGlvbikuXG4qL1xuZnVuY3Rpb24gY3Jvc3NoYWlyQ3Vyc29yKG9wdGlvbnMgPSB7fSkge1xuICAgIGxldCBbY29kZSwgZ2V0dGVyXSA9IGtleXNbb3B0aW9ucy5rZXkgfHwgXCJBbHRcIl07XG4gICAgbGV0IHBsdWdpbiA9IFZpZXdQbHVnaW4uZnJvbUNsYXNzKGNsYXNzIHtcbiAgICAgICAgY29uc3RydWN0b3Iodmlldykge1xuICAgICAgICAgICAgdGhpcy52aWV3ID0gdmlldztcbiAgICAgICAgICAgIHRoaXMuaXNEb3duID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgc2V0KGlzRG93bikge1xuICAgICAgICAgICAgaWYgKHRoaXMuaXNEb3duICE9IGlzRG93bikge1xuICAgICAgICAgICAgICAgIHRoaXMuaXNEb3duID0gaXNEb3duO1xuICAgICAgICAgICAgICAgIHRoaXMudmlldy51cGRhdGUoW10pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBldmVudE9ic2VydmVyczoge1xuICAgICAgICAgICAga2V5ZG93bihlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXQoZS5rZXlDb2RlID09IGNvZGUgfHwgZ2V0dGVyKGUpKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBrZXl1cChlKSB7XG4gICAgICAgICAgICAgICAgaWYgKGUua2V5Q29kZSA9PSBjb2RlIHx8ICFnZXR0ZXIoZSkpXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0KGZhbHNlKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBtb3VzZW1vdmUoZSkge1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0KGdldHRlcihlKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gW1xuICAgICAgICBwbHVnaW4sXG4gICAgICAgIEVkaXRvclZpZXcuY29udGVudEF0dHJpYnV0ZXMub2YodmlldyA9PiB7IHZhciBfYTsgcmV0dXJuICgoX2EgPSB2aWV3LnBsdWdpbihwbHVnaW4pKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuaXNEb3duKSA/IHNob3dDcm9zc2hhaXIgOiBudWxsOyB9KVxuICAgIF07XG59XG5cbmNvbnN0IE91dHNpZGUgPSBcIi0xMDAwMHB4XCI7XG5jbGFzcyBUb29sdGlwVmlld01hbmFnZXIge1xuICAgIGNvbnN0cnVjdG9yKHZpZXcsIGZhY2V0LCBjcmVhdGVUb29sdGlwVmlldywgcmVtb3ZlVG9vbHRpcFZpZXcpIHtcbiAgICAgICAgdGhpcy5mYWNldCA9IGZhY2V0O1xuICAgICAgICB0aGlzLmNyZWF0ZVRvb2x0aXBWaWV3ID0gY3JlYXRlVG9vbHRpcFZpZXc7XG4gICAgICAgIHRoaXMucmVtb3ZlVG9vbHRpcFZpZXcgPSByZW1vdmVUb29sdGlwVmlldztcbiAgICAgICAgdGhpcy5pbnB1dCA9IHZpZXcuc3RhdGUuZmFjZXQoZmFjZXQpO1xuICAgICAgICB0aGlzLnRvb2x0aXBzID0gdGhpcy5pbnB1dC5maWx0ZXIodCA9PiB0KTtcbiAgICAgICAgbGV0IHByZXYgPSBudWxsO1xuICAgICAgICB0aGlzLnRvb2x0aXBWaWV3cyA9IHRoaXMudG9vbHRpcHMubWFwKHQgPT4gcHJldiA9IGNyZWF0ZVRvb2x0aXBWaWV3KHQsIHByZXYpKTtcbiAgICB9XG4gICAgdXBkYXRlKHVwZGF0ZSwgYWJvdmUpIHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICBsZXQgaW5wdXQgPSB1cGRhdGUuc3RhdGUuZmFjZXQodGhpcy5mYWNldCk7XG4gICAgICAgIGxldCB0b29sdGlwcyA9IGlucHV0LmZpbHRlcih4ID0+IHgpO1xuICAgICAgICBpZiAoaW5wdXQgPT09IHRoaXMuaW5wdXQpIHtcbiAgICAgICAgICAgIGZvciAobGV0IHQgb2YgdGhpcy50b29sdGlwVmlld3MpXG4gICAgICAgICAgICAgICAgaWYgKHQudXBkYXRlKVxuICAgICAgICAgICAgICAgICAgICB0LnVwZGF0ZSh1cGRhdGUpO1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGxldCB0b29sdGlwVmlld3MgPSBbXSwgbmV3QWJvdmUgPSBhYm92ZSA/IFtdIDogbnVsbDtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0b29sdGlwcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgbGV0IHRpcCA9IHRvb2x0aXBzW2ldLCBrbm93biA9IC0xO1xuICAgICAgICAgICAgaWYgKCF0aXApXG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMudG9vbHRpcHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICBsZXQgb3RoZXIgPSB0aGlzLnRvb2x0aXBzW2ldO1xuICAgICAgICAgICAgICAgIGlmIChvdGhlciAmJiBvdGhlci5jcmVhdGUgPT0gdGlwLmNyZWF0ZSlcbiAgICAgICAgICAgICAgICAgICAga25vd24gPSBpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGtub3duIDwgMCkge1xuICAgICAgICAgICAgICAgIHRvb2x0aXBWaWV3c1tpXSA9IHRoaXMuY3JlYXRlVG9vbHRpcFZpZXcodGlwLCBpID8gdG9vbHRpcFZpZXdzW2kgLSAxXSA6IG51bGwpO1xuICAgICAgICAgICAgICAgIGlmIChuZXdBYm92ZSlcbiAgICAgICAgICAgICAgICAgICAgbmV3QWJvdmVbaV0gPSAhIXRpcC5hYm92ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGxldCB0b29sdGlwVmlldyA9IHRvb2x0aXBWaWV3c1tpXSA9IHRoaXMudG9vbHRpcFZpZXdzW2tub3duXTtcbiAgICAgICAgICAgICAgICBpZiAobmV3QWJvdmUpXG4gICAgICAgICAgICAgICAgICAgIG5ld0Fib3ZlW2ldID0gYWJvdmVba25vd25dO1xuICAgICAgICAgICAgICAgIGlmICh0b29sdGlwVmlldy51cGRhdGUpXG4gICAgICAgICAgICAgICAgICAgIHRvb2x0aXBWaWV3LnVwZGF0ZSh1cGRhdGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGZvciAobGV0IHQgb2YgdGhpcy50b29sdGlwVmlld3MpXG4gICAgICAgICAgICBpZiAodG9vbHRpcFZpZXdzLmluZGV4T2YodCkgPCAwKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5yZW1vdmVUb29sdGlwVmlldyh0KTtcbiAgICAgICAgICAgICAgICAoX2EgPSB0LmRlc3Ryb3kpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5jYWxsKHQpO1xuICAgICAgICAgICAgfVxuICAgICAgICBpZiAoYWJvdmUpIHtcbiAgICAgICAgICAgIG5ld0Fib3ZlLmZvckVhY2goKHZhbCwgaSkgPT4gYWJvdmVbaV0gPSB2YWwpO1xuICAgICAgICAgICAgYWJvdmUubGVuZ3RoID0gbmV3QWJvdmUubGVuZ3RoO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuaW5wdXQgPSBpbnB1dDtcbiAgICAgICAgdGhpcy50b29sdGlwcyA9IHRvb2x0aXBzO1xuICAgICAgICB0aGlzLnRvb2x0aXBWaWV3cyA9IHRvb2x0aXBWaWV3cztcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxufVxuLyoqXG5DcmVhdGVzIGFuIGV4dGVuc2lvbiB0aGF0IGNvbmZpZ3VyZXMgdG9vbHRpcCBiZWhhdmlvci5cbiovXG5mdW5jdGlvbiB0b29sdGlwcyhjb25maWcgPSB7fSkge1xuICAgIHJldHVybiB0b29sdGlwQ29uZmlnLm9mKGNvbmZpZyk7XG59XG5mdW5jdGlvbiB3aW5kb3dTcGFjZSh2aWV3KSB7XG4gICAgbGV0IGRvY0VsdCA9IHZpZXcuZG9tLm93bmVyRG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50O1xuICAgIHJldHVybiB7IHRvcDogMCwgbGVmdDogMCwgYm90dG9tOiBkb2NFbHQuY2xpZW50SGVpZ2h0LCByaWdodDogZG9jRWx0LmNsaWVudFdpZHRoIH07XG59XG5jb25zdCB0b29sdGlwQ29uZmlnID0gLypAX19QVVJFX18qL0ZhY2V0LmRlZmluZSh7XG4gICAgY29tYmluZTogdmFsdWVzID0+IHtcbiAgICAgICAgdmFyIF9hLCBfYiwgX2M7XG4gICAgICAgIHJldHVybiAoe1xuICAgICAgICAgICAgcG9zaXRpb246IGJyb3dzZXIuaW9zID8gXCJhYnNvbHV0ZVwiIDogKChfYSA9IHZhbHVlcy5maW5kKGNvbmYgPT4gY29uZi5wb3NpdGlvbikpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5wb3NpdGlvbikgfHwgXCJmaXhlZFwiLFxuICAgICAgICAgICAgcGFyZW50OiAoKF9iID0gdmFsdWVzLmZpbmQoY29uZiA9PiBjb25mLnBhcmVudCkpID09PSBudWxsIHx8IF9iID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYi5wYXJlbnQpIHx8IG51bGwsXG4gICAgICAgICAgICB0b29sdGlwU3BhY2U6ICgoX2MgPSB2YWx1ZXMuZmluZChjb25mID0+IGNvbmYudG9vbHRpcFNwYWNlKSkgPT09IG51bGwgfHwgX2MgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9jLnRvb2x0aXBTcGFjZSkgfHwgd2luZG93U3BhY2UsXG4gICAgICAgIH0pO1xuICAgIH1cbn0pO1xuY29uc3Qga25vd25IZWlnaHQgPSAvKkBfX1BVUkVfXyovbmV3IFdlYWtNYXAoKTtcbmNvbnN0IHRvb2x0aXBQbHVnaW4gPSAvKkBfX1BVUkVfXyovVmlld1BsdWdpbi5mcm9tQ2xhc3MoY2xhc3Mge1xuICAgIGNvbnN0cnVjdG9yKHZpZXcpIHtcbiAgICAgICAgdGhpcy52aWV3ID0gdmlldztcbiAgICAgICAgdGhpcy5hYm92ZSA9IFtdO1xuICAgICAgICB0aGlzLmluVmlldyA9IHRydWU7XG4gICAgICAgIHRoaXMubWFkZUFic29sdXRlID0gZmFsc2U7XG4gICAgICAgIHRoaXMubGFzdFRyYW5zYWN0aW9uID0gMDtcbiAgICAgICAgdGhpcy5tZWFzdXJlVGltZW91dCA9IC0xO1xuICAgICAgICBsZXQgY29uZmlnID0gdmlldy5zdGF0ZS5mYWNldCh0b29sdGlwQ29uZmlnKTtcbiAgICAgICAgdGhpcy5wb3NpdGlvbiA9IGNvbmZpZy5wb3NpdGlvbjtcbiAgICAgICAgdGhpcy5wYXJlbnQgPSBjb25maWcucGFyZW50O1xuICAgICAgICB0aGlzLmNsYXNzZXMgPSB2aWV3LnRoZW1lQ2xhc3NlcztcbiAgICAgICAgdGhpcy5jcmVhdGVDb250YWluZXIoKTtcbiAgICAgICAgdGhpcy5tZWFzdXJlUmVxID0geyByZWFkOiB0aGlzLnJlYWRNZWFzdXJlLmJpbmQodGhpcyksIHdyaXRlOiB0aGlzLndyaXRlTWVhc3VyZS5iaW5kKHRoaXMpLCBrZXk6IHRoaXMgfTtcbiAgICAgICAgdGhpcy5yZXNpemVPYnNlcnZlciA9IHR5cGVvZiBSZXNpemVPYnNlcnZlciA9PSBcImZ1bmN0aW9uXCIgPyBuZXcgUmVzaXplT2JzZXJ2ZXIoKCkgPT4gdGhpcy5tZWFzdXJlU29vbigpKSA6IG51bGw7XG4gICAgICAgIHRoaXMubWFuYWdlciA9IG5ldyBUb29sdGlwVmlld01hbmFnZXIodmlldywgc2hvd1Rvb2x0aXAsICh0LCBwKSA9PiB0aGlzLmNyZWF0ZVRvb2x0aXAodCwgcCksIHQgPT4ge1xuICAgICAgICAgICAgaWYgKHRoaXMucmVzaXplT2JzZXJ2ZXIpXG4gICAgICAgICAgICAgICAgdGhpcy5yZXNpemVPYnNlcnZlci51bm9ic2VydmUodC5kb20pO1xuICAgICAgICAgICAgdC5kb20ucmVtb3ZlKCk7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmFib3ZlID0gdGhpcy5tYW5hZ2VyLnRvb2x0aXBzLm1hcCh0ID0+ICEhdC5hYm92ZSk7XG4gICAgICAgIHRoaXMuaW50ZXJzZWN0aW9uT2JzZXJ2ZXIgPSB0eXBlb2YgSW50ZXJzZWN0aW9uT2JzZXJ2ZXIgPT0gXCJmdW5jdGlvblwiID8gbmV3IEludGVyc2VjdGlvbk9ic2VydmVyKGVudHJpZXMgPT4ge1xuICAgICAgICAgICAgaWYgKERhdGUubm93KCkgPiB0aGlzLmxhc3RUcmFuc2FjdGlvbiAtIDUwICYmXG4gICAgICAgICAgICAgICAgZW50cmllcy5sZW5ndGggPiAwICYmIGVudHJpZXNbZW50cmllcy5sZW5ndGggLSAxXS5pbnRlcnNlY3Rpb25SYXRpbyA8IDEpXG4gICAgICAgICAgICAgICAgdGhpcy5tZWFzdXJlU29vbigpO1xuICAgICAgICB9LCB7IHRocmVzaG9sZDogWzFdIH0pIDogbnVsbDtcbiAgICAgICAgdGhpcy5vYnNlcnZlSW50ZXJzZWN0aW9uKCk7XG4gICAgICAgIHZpZXcud2luLmFkZEV2ZW50TGlzdGVuZXIoXCJyZXNpemVcIiwgdGhpcy5tZWFzdXJlU29vbiA9IHRoaXMubWVhc3VyZVNvb24uYmluZCh0aGlzKSk7XG4gICAgICAgIHRoaXMubWF5YmVNZWFzdXJlKCk7XG4gICAgfVxuICAgIGNyZWF0ZUNvbnRhaW5lcigpIHtcbiAgICAgICAgaWYgKHRoaXMucGFyZW50KSB7XG4gICAgICAgICAgICB0aGlzLmNvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgICAgICB0aGlzLmNvbnRhaW5lci5zdHlsZS5wb3NpdGlvbiA9IFwicmVsYXRpdmVcIjtcbiAgICAgICAgICAgIHRoaXMuY29udGFpbmVyLmNsYXNzTmFtZSA9IHRoaXMudmlldy50aGVtZUNsYXNzZXM7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5hcHBlbmRDaGlsZCh0aGlzLmNvbnRhaW5lcik7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmNvbnRhaW5lciA9IHRoaXMudmlldy5kb207XG4gICAgICAgIH1cbiAgICB9XG4gICAgb2JzZXJ2ZUludGVyc2VjdGlvbigpIHtcbiAgICAgICAgaWYgKHRoaXMuaW50ZXJzZWN0aW9uT2JzZXJ2ZXIpIHtcbiAgICAgICAgICAgIHRoaXMuaW50ZXJzZWN0aW9uT2JzZXJ2ZXIuZGlzY29ubmVjdCgpO1xuICAgICAgICAgICAgZm9yIChsZXQgdG9vbHRpcCBvZiB0aGlzLm1hbmFnZXIudG9vbHRpcFZpZXdzKVxuICAgICAgICAgICAgICAgIHRoaXMuaW50ZXJzZWN0aW9uT2JzZXJ2ZXIub2JzZXJ2ZSh0b29sdGlwLmRvbSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgbWVhc3VyZVNvb24oKSB7XG4gICAgICAgIGlmICh0aGlzLm1lYXN1cmVUaW1lb3V0IDwgMClcbiAgICAgICAgICAgIHRoaXMubWVhc3VyZVRpbWVvdXQgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLm1lYXN1cmVUaW1lb3V0ID0gLTE7XG4gICAgICAgICAgICAgICAgdGhpcy5tYXliZU1lYXN1cmUoKTtcbiAgICAgICAgICAgIH0sIDUwKTtcbiAgICB9XG4gICAgdXBkYXRlKHVwZGF0ZSkge1xuICAgICAgICBpZiAodXBkYXRlLnRyYW5zYWN0aW9ucy5sZW5ndGgpXG4gICAgICAgICAgICB0aGlzLmxhc3RUcmFuc2FjdGlvbiA9IERhdGUubm93KCk7XG4gICAgICAgIGxldCB1cGRhdGVkID0gdGhpcy5tYW5hZ2VyLnVwZGF0ZSh1cGRhdGUsIHRoaXMuYWJvdmUpO1xuICAgICAgICBpZiAodXBkYXRlZClcbiAgICAgICAgICAgIHRoaXMub2JzZXJ2ZUludGVyc2VjdGlvbigpO1xuICAgICAgICBsZXQgc2hvdWxkTWVhc3VyZSA9IHVwZGF0ZWQgfHwgdXBkYXRlLmdlb21ldHJ5Q2hhbmdlZDtcbiAgICAgICAgbGV0IG5ld0NvbmZpZyA9IHVwZGF0ZS5zdGF0ZS5mYWNldCh0b29sdGlwQ29uZmlnKTtcbiAgICAgICAgaWYgKG5ld0NvbmZpZy5wb3NpdGlvbiAhPSB0aGlzLnBvc2l0aW9uICYmICF0aGlzLm1hZGVBYnNvbHV0ZSkge1xuICAgICAgICAgICAgdGhpcy5wb3NpdGlvbiA9IG5ld0NvbmZpZy5wb3NpdGlvbjtcbiAgICAgICAgICAgIGZvciAobGV0IHQgb2YgdGhpcy5tYW5hZ2VyLnRvb2x0aXBWaWV3cylcbiAgICAgICAgICAgICAgICB0LmRvbS5zdHlsZS5wb3NpdGlvbiA9IHRoaXMucG9zaXRpb247XG4gICAgICAgICAgICBzaG91bGRNZWFzdXJlID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobmV3Q29uZmlnLnBhcmVudCAhPSB0aGlzLnBhcmVudCkge1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50KVxuICAgICAgICAgICAgICAgIHRoaXMuY29udGFpbmVyLnJlbW92ZSgpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQgPSBuZXdDb25maWcucGFyZW50O1xuICAgICAgICAgICAgdGhpcy5jcmVhdGVDb250YWluZXIoKTtcbiAgICAgICAgICAgIGZvciAobGV0IHQgb2YgdGhpcy5tYW5hZ2VyLnRvb2x0aXBWaWV3cylcbiAgICAgICAgICAgICAgICB0aGlzLmNvbnRhaW5lci5hcHBlbmRDaGlsZCh0LmRvbSk7XG4gICAgICAgICAgICBzaG91bGRNZWFzdXJlID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0aGlzLnBhcmVudCAmJiB0aGlzLnZpZXcudGhlbWVDbGFzc2VzICE9IHRoaXMuY2xhc3Nlcykge1xuICAgICAgICAgICAgdGhpcy5jbGFzc2VzID0gdGhpcy5jb250YWluZXIuY2xhc3NOYW1lID0gdGhpcy52aWV3LnRoZW1lQ2xhc3NlcztcbiAgICAgICAgfVxuICAgICAgICBpZiAoc2hvdWxkTWVhc3VyZSlcbiAgICAgICAgICAgIHRoaXMubWF5YmVNZWFzdXJlKCk7XG4gICAgfVxuICAgIGNyZWF0ZVRvb2x0aXAodG9vbHRpcCwgcHJldikge1xuICAgICAgICBsZXQgdG9vbHRpcFZpZXcgPSB0b29sdGlwLmNyZWF0ZSh0aGlzLnZpZXcpO1xuICAgICAgICBsZXQgYmVmb3JlID0gcHJldiA/IHByZXYuZG9tIDogbnVsbDtcbiAgICAgICAgdG9vbHRpcFZpZXcuZG9tLmNsYXNzTGlzdC5hZGQoXCJjbS10b29sdGlwXCIpO1xuICAgICAgICBpZiAodG9vbHRpcC5hcnJvdyAmJiAhdG9vbHRpcFZpZXcuZG9tLnF1ZXJ5U2VsZWN0b3IoXCIuY20tdG9vbHRpcCA+IC5jbS10b29sdGlwLWFycm93XCIpKSB7XG4gICAgICAgICAgICBsZXQgYXJyb3cgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICAgICAgYXJyb3cuY2xhc3NOYW1lID0gXCJjbS10b29sdGlwLWFycm93XCI7XG4gICAgICAgICAgICB0b29sdGlwVmlldy5kb20uYXBwZW5kQ2hpbGQoYXJyb3cpO1xuICAgICAgICB9XG4gICAgICAgIHRvb2x0aXBWaWV3LmRvbS5zdHlsZS5wb3NpdGlvbiA9IHRoaXMucG9zaXRpb247XG4gICAgICAgIHRvb2x0aXBWaWV3LmRvbS5zdHlsZS50b3AgPSBPdXRzaWRlO1xuICAgICAgICB0b29sdGlwVmlldy5kb20uc3R5bGUubGVmdCA9IFwiMHB4XCI7XG4gICAgICAgIHRoaXMuY29udGFpbmVyLmluc2VydEJlZm9yZSh0b29sdGlwVmlldy5kb20sIGJlZm9yZSk7XG4gICAgICAgIGlmICh0b29sdGlwVmlldy5tb3VudClcbiAgICAgICAgICAgIHRvb2x0aXBWaWV3Lm1vdW50KHRoaXMudmlldyk7XG4gICAgICAgIGlmICh0aGlzLnJlc2l6ZU9ic2VydmVyKVxuICAgICAgICAgICAgdGhpcy5yZXNpemVPYnNlcnZlci5vYnNlcnZlKHRvb2x0aXBWaWV3LmRvbSk7XG4gICAgICAgIHJldHVybiB0b29sdGlwVmlldztcbiAgICB9XG4gICAgZGVzdHJveSgpIHtcbiAgICAgICAgdmFyIF9hLCBfYiwgX2M7XG4gICAgICAgIHRoaXMudmlldy53aW4ucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInJlc2l6ZVwiLCB0aGlzLm1lYXN1cmVTb29uKTtcbiAgICAgICAgZm9yIChsZXQgdG9vbHRpcFZpZXcgb2YgdGhpcy5tYW5hZ2VyLnRvb2x0aXBWaWV3cykge1xuICAgICAgICAgICAgdG9vbHRpcFZpZXcuZG9tLnJlbW92ZSgpO1xuICAgICAgICAgICAgKF9hID0gdG9vbHRpcFZpZXcuZGVzdHJveSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmNhbGwodG9vbHRpcFZpZXcpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLnBhcmVudClcbiAgICAgICAgICAgIHRoaXMuY29udGFpbmVyLnJlbW92ZSgpO1xuICAgICAgICAoX2IgPSB0aGlzLnJlc2l6ZU9ic2VydmVyKSA9PT0gbnVsbCB8fCBfYiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2IuZGlzY29ubmVjdCgpO1xuICAgICAgICAoX2MgPSB0aGlzLmludGVyc2VjdGlvbk9ic2VydmVyKSA9PT0gbnVsbCB8fCBfYyA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2MuZGlzY29ubmVjdCgpO1xuICAgICAgICBjbGVhclRpbWVvdXQodGhpcy5tZWFzdXJlVGltZW91dCk7XG4gICAgfVxuICAgIHJlYWRNZWFzdXJlKCkge1xuICAgICAgICBsZXQgc2NhbGVYID0gMSwgc2NhbGVZID0gMSwgbWFrZUFic29sdXRlID0gZmFsc2U7XG4gICAgICAgIGlmICh0aGlzLnBvc2l0aW9uID09IFwiZml4ZWRcIiAmJiB0aGlzLm1hbmFnZXIudG9vbHRpcFZpZXdzLmxlbmd0aCkge1xuICAgICAgICAgICAgbGV0IHsgZG9tIH0gPSB0aGlzLm1hbmFnZXIudG9vbHRpcFZpZXdzWzBdO1xuICAgICAgICAgICAgaWYgKGJyb3dzZXIuc2FmYXJpKSB7XG4gICAgICAgICAgICAgICAgLy8gU2FmYXJpIGFsd2F5cyBzZXRzIG9mZnNldFBhcmVudCB0byBudWxsLCBldmVuIGlmIGEgZml4ZWRcbiAgICAgICAgICAgICAgICAvLyBlbGVtZW50IGlzIHBvc2l0aW9uZWQgcmVsYXRpdmUgdG8gYSB0cmFuc2Zvcm1lZCBwYXJlbnQuIFNvXG4gICAgICAgICAgICAgICAgLy8gd2UgdXNlIHRoaXMga2x1ZGdlIHRvIHRyeSBhbmQgZGV0ZWN0IHRoaXMuXG4gICAgICAgICAgICAgICAgbGV0IHJlY3QgPSBkb20uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICAgICAgICAgICAgbWFrZUFic29sdXRlID0gTWF0aC5hYnMocmVjdC50b3AgKyAxMDAwMCkgPiAxIHx8IE1hdGguYWJzKHJlY3QubGVmdCkgPiAxO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gTW9yZSBjb25mb3JtaW5nIGJyb3dzZXJzIHdpbGwgc2V0IG9mZnNldFBhcmVudCB0byB0aGVcbiAgICAgICAgICAgICAgICAvLyB0cmFuc2Zvcm1lZCBlbGVtZW50LlxuICAgICAgICAgICAgICAgIG1ha2VBYnNvbHV0ZSA9ICEhZG9tLm9mZnNldFBhcmVudCAmJiBkb20ub2Zmc2V0UGFyZW50ICE9IHRoaXMuY29udGFpbmVyLm93bmVyRG9jdW1lbnQuYm9keTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAobWFrZUFic29sdXRlIHx8IHRoaXMucG9zaXRpb24gPT0gXCJhYnNvbHV0ZVwiKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQpIHtcbiAgICAgICAgICAgICAgICBsZXQgcmVjdCA9IHRoaXMucGFyZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgICAgICAgICAgIGlmIChyZWN0LndpZHRoICYmIHJlY3QuaGVpZ2h0KSB7XG4gICAgICAgICAgICAgICAgICAgIHNjYWxlWCA9IHJlY3Qud2lkdGggLyB0aGlzLnBhcmVudC5vZmZzZXRXaWR0aDtcbiAgICAgICAgICAgICAgICAgICAgc2NhbGVZID0gcmVjdC5oZWlnaHQgLyB0aGlzLnBhcmVudC5vZmZzZXRIZWlnaHQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgKHsgc2NhbGVYLCBzY2FsZVkgfSA9IHRoaXMudmlldy52aWV3U3RhdGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGxldCB2aXNpYmxlID0gdGhpcy52aWV3LnNjcm9sbERPTS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSwgbWFyZ2lucyA9IGdldFNjcm9sbE1hcmdpbnModGhpcy52aWV3KTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHZpc2libGU6IHtcbiAgICAgICAgICAgICAgICBsZWZ0OiB2aXNpYmxlLmxlZnQgKyBtYXJnaW5zLmxlZnQsIHRvcDogdmlzaWJsZS50b3AgKyBtYXJnaW5zLnRvcCxcbiAgICAgICAgICAgICAgICByaWdodDogdmlzaWJsZS5yaWdodCAtIG1hcmdpbnMucmlnaHQsIGJvdHRvbTogdmlzaWJsZS5ib3R0b20gLSBtYXJnaW5zLmJvdHRvbVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHBhcmVudDogdGhpcy5wYXJlbnQgPyB0aGlzLmNvbnRhaW5lci5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSA6IHRoaXMudmlldy5kb20uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCksXG4gICAgICAgICAgICBwb3M6IHRoaXMubWFuYWdlci50b29sdGlwcy5tYXAoKHQsIGkpID0+IHtcbiAgICAgICAgICAgICAgICBsZXQgdHYgPSB0aGlzLm1hbmFnZXIudG9vbHRpcFZpZXdzW2ldO1xuICAgICAgICAgICAgICAgIHJldHVybiB0di5nZXRDb29yZHMgPyB0di5nZXRDb29yZHModC5wb3MpIDogdGhpcy52aWV3LmNvb3Jkc0F0UG9zKHQucG9zKTtcbiAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgc2l6ZTogdGhpcy5tYW5hZ2VyLnRvb2x0aXBWaWV3cy5tYXAoKHsgZG9tIH0pID0+IGRvbS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSksXG4gICAgICAgICAgICBzcGFjZTogdGhpcy52aWV3LnN0YXRlLmZhY2V0KHRvb2x0aXBDb25maWcpLnRvb2x0aXBTcGFjZSh0aGlzLnZpZXcpLFxuICAgICAgICAgICAgc2NhbGVYLCBzY2FsZVksIG1ha2VBYnNvbHV0ZVxuICAgICAgICB9O1xuICAgIH1cbiAgICB3cml0ZU1lYXN1cmUobWVhc3VyZWQpIHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICBpZiAobWVhc3VyZWQubWFrZUFic29sdXRlKSB7XG4gICAgICAgICAgICB0aGlzLm1hZGVBYnNvbHV0ZSA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLnBvc2l0aW9uID0gXCJhYnNvbHV0ZVwiO1xuICAgICAgICAgICAgZm9yIChsZXQgdCBvZiB0aGlzLm1hbmFnZXIudG9vbHRpcFZpZXdzKVxuICAgICAgICAgICAgICAgIHQuZG9tLnN0eWxlLnBvc2l0aW9uID0gXCJhYnNvbHV0ZVwiO1xuICAgICAgICB9XG4gICAgICAgIGxldCB7IHZpc2libGUsIHNwYWNlLCBzY2FsZVgsIHNjYWxlWSB9ID0gbWVhc3VyZWQ7XG4gICAgICAgIGxldCBvdGhlcnMgPSBbXTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLm1hbmFnZXIudG9vbHRpcHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGxldCB0b29sdGlwID0gdGhpcy5tYW5hZ2VyLnRvb2x0aXBzW2ldLCB0VmlldyA9IHRoaXMubWFuYWdlci50b29sdGlwVmlld3NbaV0sIHsgZG9tIH0gPSB0VmlldztcbiAgICAgICAgICAgIGxldCBwb3MgPSBtZWFzdXJlZC5wb3NbaV0sIHNpemUgPSBtZWFzdXJlZC5zaXplW2ldO1xuICAgICAgICAgICAgLy8gSGlkZSB0b29sdGlwcyB0aGF0IGFyZSBvdXRzaWRlIG9mIHRoZSBlZGl0b3IuXG4gICAgICAgICAgICBpZiAoIXBvcyB8fCB0b29sdGlwLmNsaXAgIT09IGZhbHNlICYmIChwb3MuYm90dG9tIDw9IE1hdGgubWF4KHZpc2libGUudG9wLCBzcGFjZS50b3ApIHx8XG4gICAgICAgICAgICAgICAgcG9zLnRvcCA+PSBNYXRoLm1pbih2aXNpYmxlLmJvdHRvbSwgc3BhY2UuYm90dG9tKSB8fFxuICAgICAgICAgICAgICAgIHBvcy5yaWdodCA8IE1hdGgubWF4KHZpc2libGUubGVmdCwgc3BhY2UubGVmdCkgLSAuMSB8fFxuICAgICAgICAgICAgICAgIHBvcy5sZWZ0ID4gTWF0aC5taW4odmlzaWJsZS5yaWdodCwgc3BhY2UucmlnaHQpICsgLjEpKSB7XG4gICAgICAgICAgICAgICAgZG9tLnN0eWxlLnRvcCA9IE91dHNpZGU7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsZXQgYXJyb3cgPSB0b29sdGlwLmFycm93ID8gdFZpZXcuZG9tLnF1ZXJ5U2VsZWN0b3IoXCIuY20tdG9vbHRpcC1hcnJvd1wiKSA6IG51bGw7XG4gICAgICAgICAgICBsZXQgYXJyb3dIZWlnaHQgPSBhcnJvdyA/IDcgLyogQXJyb3cuU2l6ZSAqLyA6IDA7XG4gICAgICAgICAgICBsZXQgd2lkdGggPSBzaXplLnJpZ2h0IC0gc2l6ZS5sZWZ0LCBoZWlnaHQgPSAoX2EgPSBrbm93bkhlaWdodC5nZXQodFZpZXcpKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiBzaXplLmJvdHRvbSAtIHNpemUudG9wO1xuICAgICAgICAgICAgbGV0IG9mZnNldCA9IHRWaWV3Lm9mZnNldCB8fCBub09mZnNldCwgbHRyID0gdGhpcy52aWV3LnRleHREaXJlY3Rpb24gPT0gRGlyZWN0aW9uLkxUUjtcbiAgICAgICAgICAgIGxldCBsZWZ0ID0gc2l6ZS53aWR0aCA+IHNwYWNlLnJpZ2h0IC0gc3BhY2UubGVmdFxuICAgICAgICAgICAgICAgID8gKGx0ciA/IHNwYWNlLmxlZnQgOiBzcGFjZS5yaWdodCAtIHNpemUud2lkdGgpXG4gICAgICAgICAgICAgICAgOiBsdHIgPyBNYXRoLm1heChzcGFjZS5sZWZ0LCBNYXRoLm1pbihwb3MubGVmdCAtIChhcnJvdyA/IDE0IC8qIEFycm93Lk9mZnNldCAqLyA6IDApICsgb2Zmc2V0LngsIHNwYWNlLnJpZ2h0IC0gd2lkdGgpKVxuICAgICAgICAgICAgICAgICAgICA6IE1hdGgubWluKE1hdGgubWF4KHNwYWNlLmxlZnQsIHBvcy5sZWZ0IC0gd2lkdGggKyAoYXJyb3cgPyAxNCAvKiBBcnJvdy5PZmZzZXQgKi8gOiAwKSAtIG9mZnNldC54KSwgc3BhY2UucmlnaHQgLSB3aWR0aCk7XG4gICAgICAgICAgICBsZXQgYWJvdmUgPSB0aGlzLmFib3ZlW2ldO1xuICAgICAgICAgICAgaWYgKCF0b29sdGlwLnN0cmljdFNpZGUgJiYgKGFib3ZlXG4gICAgICAgICAgICAgICAgPyBwb3MudG9wIC0gaGVpZ2h0IC0gYXJyb3dIZWlnaHQgLSBvZmZzZXQueSA8IHNwYWNlLnRvcFxuICAgICAgICAgICAgICAgIDogcG9zLmJvdHRvbSArIGhlaWdodCArIGFycm93SGVpZ2h0ICsgb2Zmc2V0LnkgPiBzcGFjZS5ib3R0b20pICYmXG4gICAgICAgICAgICAgICAgYWJvdmUgPT0gKHNwYWNlLmJvdHRvbSAtIHBvcy5ib3R0b20gPiBwb3MudG9wIC0gc3BhY2UudG9wKSlcbiAgICAgICAgICAgICAgICBhYm92ZSA9IHRoaXMuYWJvdmVbaV0gPSAhYWJvdmU7XG4gICAgICAgICAgICBsZXQgc3BhY2VWZXJ0ID0gKGFib3ZlID8gcG9zLnRvcCAtIHNwYWNlLnRvcCA6IHNwYWNlLmJvdHRvbSAtIHBvcy5ib3R0b20pIC0gYXJyb3dIZWlnaHQ7XG4gICAgICAgICAgICBpZiAoc3BhY2VWZXJ0IDwgaGVpZ2h0ICYmIHRWaWV3LnJlc2l6ZSAhPT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgICBpZiAoc3BhY2VWZXJ0IDwgdGhpcy52aWV3LmRlZmF1bHRMaW5lSGVpZ2h0KSB7XG4gICAgICAgICAgICAgICAgICAgIGRvbS5zdHlsZS50b3AgPSBPdXRzaWRlO1xuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAga25vd25IZWlnaHQuc2V0KHRWaWV3LCBoZWlnaHQpO1xuICAgICAgICAgICAgICAgIGRvbS5zdHlsZS5oZWlnaHQgPSAoaGVpZ2h0ID0gc3BhY2VWZXJ0KSAvIHNjYWxlWSArIFwicHhcIjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGRvbS5zdHlsZS5oZWlnaHQpIHtcbiAgICAgICAgICAgICAgICBkb20uc3R5bGUuaGVpZ2h0ID0gXCJcIjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxldCB0b3AgPSBhYm92ZSA/IHBvcy50b3AgLSBoZWlnaHQgLSBhcnJvd0hlaWdodCAtIG9mZnNldC55IDogcG9zLmJvdHRvbSArIGFycm93SGVpZ2h0ICsgb2Zmc2V0Lnk7XG4gICAgICAgICAgICBsZXQgcmlnaHQgPSBsZWZ0ICsgd2lkdGg7XG4gICAgICAgICAgICBpZiAodFZpZXcub3ZlcmxhcCAhPT0gdHJ1ZSlcbiAgICAgICAgICAgICAgICBmb3IgKGxldCByIG9mIG90aGVycylcbiAgICAgICAgICAgICAgICAgICAgaWYgKHIubGVmdCA8IHJpZ2h0ICYmIHIucmlnaHQgPiBsZWZ0ICYmIHIudG9wIDwgdG9wICsgaGVpZ2h0ICYmIHIuYm90dG9tID4gdG9wKVxuICAgICAgICAgICAgICAgICAgICAgICAgdG9wID0gYWJvdmUgPyByLnRvcCAtIGhlaWdodCAtIDIgLSBhcnJvd0hlaWdodCA6IHIuYm90dG9tICsgYXJyb3dIZWlnaHQgKyAyO1xuICAgICAgICAgICAgaWYgKHRoaXMucG9zaXRpb24gPT0gXCJhYnNvbHV0ZVwiKSB7XG4gICAgICAgICAgICAgICAgZG9tLnN0eWxlLnRvcCA9ICh0b3AgLSBtZWFzdXJlZC5wYXJlbnQudG9wKSAvIHNjYWxlWSArIFwicHhcIjtcbiAgICAgICAgICAgICAgICBzZXRMZWZ0U3R5bGUoZG9tLCAobGVmdCAtIG1lYXN1cmVkLnBhcmVudC5sZWZ0KSAvIHNjYWxlWCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBkb20uc3R5bGUudG9wID0gdG9wIC8gc2NhbGVZICsgXCJweFwiO1xuICAgICAgICAgICAgICAgIHNldExlZnRTdHlsZShkb20sIGxlZnQgLyBzY2FsZVgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGFycm93KSB7XG4gICAgICAgICAgICAgICAgbGV0IGFycm93TGVmdCA9IHBvcy5sZWZ0ICsgKGx0ciA/IG9mZnNldC54IDogLW9mZnNldC54KSAtIChsZWZ0ICsgMTQgLyogQXJyb3cuT2Zmc2V0ICovIC0gNyAvKiBBcnJvdy5TaXplICovKTtcbiAgICAgICAgICAgICAgICBhcnJvdy5zdHlsZS5sZWZ0ID0gYXJyb3dMZWZ0IC8gc2NhbGVYICsgXCJweFwiO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRWaWV3Lm92ZXJsYXAgIT09IHRydWUpXG4gICAgICAgICAgICAgICAgb3RoZXJzLnB1c2goeyBsZWZ0LCB0b3AsIHJpZ2h0LCBib3R0b206IHRvcCArIGhlaWdodCB9KTtcbiAgICAgICAgICAgIGRvbS5jbGFzc0xpc3QudG9nZ2xlKFwiY20tdG9vbHRpcC1hYm92ZVwiLCBhYm92ZSk7XG4gICAgICAgICAgICBkb20uY2xhc3NMaXN0LnRvZ2dsZShcImNtLXRvb2x0aXAtYmVsb3dcIiwgIWFib3ZlKTtcbiAgICAgICAgICAgIGlmICh0Vmlldy5wb3NpdGlvbmVkKVxuICAgICAgICAgICAgICAgIHRWaWV3LnBvc2l0aW9uZWQobWVhc3VyZWQuc3BhY2UpO1xuICAgICAgICB9XG4gICAgfVxuICAgIG1heWJlTWVhc3VyZSgpIHtcbiAgICAgICAgaWYgKHRoaXMubWFuYWdlci50b29sdGlwcy5sZW5ndGgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnZpZXcuaW5WaWV3KVxuICAgICAgICAgICAgICAgIHRoaXMudmlldy5yZXF1ZXN0TWVhc3VyZSh0aGlzLm1lYXN1cmVSZXEpO1xuICAgICAgICAgICAgaWYgKHRoaXMuaW5WaWV3ICE9IHRoaXMudmlldy5pblZpZXcpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmluVmlldyA9IHRoaXMudmlldy5pblZpZXc7XG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLmluVmlldylcbiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgdHYgb2YgdGhpcy5tYW5hZ2VyLnRvb2x0aXBWaWV3cylcbiAgICAgICAgICAgICAgICAgICAgICAgIHR2LmRvbS5zdHlsZS50b3AgPSBPdXRzaWRlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufSwge1xuICAgIGV2ZW50T2JzZXJ2ZXJzOiB7XG4gICAgICAgIHNjcm9sbCgpIHsgdGhpcy5tYXliZU1lYXN1cmUoKTsgfVxuICAgIH1cbn0pO1xuZnVuY3Rpb24gc2V0TGVmdFN0eWxlKGVsdCwgdmFsdWUpIHtcbiAgICBsZXQgY3VycmVudCA9IHBhcnNlSW50KGVsdC5zdHlsZS5sZWZ0LCAxMCk7XG4gICAgaWYgKGlzTmFOKGN1cnJlbnQpIHx8IE1hdGguYWJzKHZhbHVlIC0gY3VycmVudCkgPiAxKVxuICAgICAgICBlbHQuc3R5bGUubGVmdCA9IHZhbHVlICsgXCJweFwiO1xufVxuY29uc3QgYmFzZVRoZW1lID0gLypAX19QVVJFX18qL0VkaXRvclZpZXcuYmFzZVRoZW1lKHtcbiAgICBcIi5jbS10b29sdGlwXCI6IHtcbiAgICAgICAgekluZGV4OiA1MDAsXG4gICAgICAgIGJveFNpemluZzogXCJib3JkZXItYm94XCJcbiAgICB9LFxuICAgIFwiJmxpZ2h0IC5jbS10b29sdGlwXCI6IHtcbiAgICAgICAgYm9yZGVyOiBcIjFweCBzb2xpZCAjYmJiXCIsXG4gICAgICAgIGJhY2tncm91bmRDb2xvcjogXCIjZjVmNWY1XCJcbiAgICB9LFxuICAgIFwiJmxpZ2h0IC5jbS10b29sdGlwLXNlY3Rpb246bm90KDpmaXJzdC1jaGlsZClcIjoge1xuICAgICAgICBib3JkZXJUb3A6IFwiMXB4IHNvbGlkICNiYmJcIixcbiAgICB9LFxuICAgIFwiJmRhcmsgLmNtLXRvb2x0aXBcIjoge1xuICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6IFwiIzMzMzMzOFwiLFxuICAgICAgICBjb2xvcjogXCJ3aGl0ZVwiXG4gICAgfSxcbiAgICBcIi5jbS10b29sdGlwLWFycm93XCI6IHtcbiAgICAgICAgaGVpZ2h0OiBgJHs3IC8qIEFycm93LlNpemUgKi99cHhgLFxuICAgICAgICB3aWR0aDogYCR7NyAvKiBBcnJvdy5TaXplICovICogMn1weGAsXG4gICAgICAgIHBvc2l0aW9uOiBcImFic29sdXRlXCIsXG4gICAgICAgIHpJbmRleDogLTEsXG4gICAgICAgIG92ZXJmbG93OiBcImhpZGRlblwiLFxuICAgICAgICBcIiY6YmVmb3JlLCAmOmFmdGVyXCI6IHtcbiAgICAgICAgICAgIGNvbnRlbnQ6IFwiJydcIixcbiAgICAgICAgICAgIHBvc2l0aW9uOiBcImFic29sdXRlXCIsXG4gICAgICAgICAgICB3aWR0aDogMCxcbiAgICAgICAgICAgIGhlaWdodDogMCxcbiAgICAgICAgICAgIGJvcmRlckxlZnQ6IGAkezcgLyogQXJyb3cuU2l6ZSAqL31weCBzb2xpZCB0cmFuc3BhcmVudGAsXG4gICAgICAgICAgICBib3JkZXJSaWdodDogYCR7NyAvKiBBcnJvdy5TaXplICovfXB4IHNvbGlkIHRyYW5zcGFyZW50YCxcbiAgICAgICAgfSxcbiAgICAgICAgXCIuY20tdG9vbHRpcC1hYm92ZSAmXCI6IHtcbiAgICAgICAgICAgIGJvdHRvbTogYC0kezcgLyogQXJyb3cuU2l6ZSAqL31weGAsXG4gICAgICAgICAgICBcIiY6YmVmb3JlXCI6IHtcbiAgICAgICAgICAgICAgICBib3JkZXJUb3A6IGAkezcgLyogQXJyb3cuU2l6ZSAqL31weCBzb2xpZCAjYmJiYCxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBcIiY6YWZ0ZXJcIjoge1xuICAgICAgICAgICAgICAgIGJvcmRlclRvcDogYCR7NyAvKiBBcnJvdy5TaXplICovfXB4IHNvbGlkICNmNWY1ZjVgLFxuICAgICAgICAgICAgICAgIGJvdHRvbTogXCIxcHhcIlxuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBcIi5jbS10b29sdGlwLWJlbG93ICZcIjoge1xuICAgICAgICAgICAgdG9wOiBgLSR7NyAvKiBBcnJvdy5TaXplICovfXB4YCxcbiAgICAgICAgICAgIFwiJjpiZWZvcmVcIjoge1xuICAgICAgICAgICAgICAgIGJvcmRlckJvdHRvbTogYCR7NyAvKiBBcnJvdy5TaXplICovfXB4IHNvbGlkICNiYmJgLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIFwiJjphZnRlclwiOiB7XG4gICAgICAgICAgICAgICAgYm9yZGVyQm90dG9tOiBgJHs3IC8qIEFycm93LlNpemUgKi99cHggc29saWQgI2Y1ZjVmNWAsXG4gICAgICAgICAgICAgICAgdG9wOiBcIjFweFwiXG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgfSxcbiAgICBcIiZkYXJrIC5jbS10b29sdGlwIC5jbS10b29sdGlwLWFycm93XCI6IHtcbiAgICAgICAgXCImOmJlZm9yZVwiOiB7XG4gICAgICAgICAgICBib3JkZXJUb3BDb2xvcjogXCIjMzMzMzM4XCIsXG4gICAgICAgICAgICBib3JkZXJCb3R0b21Db2xvcjogXCIjMzMzMzM4XCJcbiAgICAgICAgfSxcbiAgICAgICAgXCImOmFmdGVyXCI6IHtcbiAgICAgICAgICAgIGJvcmRlclRvcENvbG9yOiBcInRyYW5zcGFyZW50XCIsXG4gICAgICAgICAgICBib3JkZXJCb3R0b21Db2xvcjogXCJ0cmFuc3BhcmVudFwiXG4gICAgICAgIH1cbiAgICB9XG59KTtcbmNvbnN0IG5vT2Zmc2V0ID0geyB4OiAwLCB5OiAwIH07XG4vKipcbkZhY2V0IHRvIHdoaWNoIGFuIGV4dGVuc2lvbiBjYW4gYWRkIGEgdmFsdWUgdG8gc2hvdyBhIHRvb2x0aXAuXG4qL1xuY29uc3Qgc2hvd1Rvb2x0aXAgPSAvKkBfX1BVUkVfXyovRmFjZXQuZGVmaW5lKHtcbiAgICBlbmFibGVzOiBbdG9vbHRpcFBsdWdpbiwgYmFzZVRoZW1lXVxufSk7XG5jb25zdCBzaG93SG92ZXJUb29sdGlwID0gLypAX19QVVJFX18qL0ZhY2V0LmRlZmluZSh7XG4gICAgY29tYmluZTogaW5wdXRzID0+IGlucHV0cy5yZWR1Y2UoKGEsIGkpID0+IGEuY29uY2F0KGkpLCBbXSlcbn0pO1xuY2xhc3MgSG92ZXJUb29sdGlwSG9zdCB7XG4gICAgLy8gTmVlZHMgdG8gYmUgc3RhdGljIHNvIHRoYXQgaG9zdCB0b29sdGlwIGluc3RhbmNlcyBhbHdheXMgbWF0Y2hcbiAgICBzdGF0aWMgY3JlYXRlKHZpZXcpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBIb3ZlclRvb2x0aXBIb3N0KHZpZXcpO1xuICAgIH1cbiAgICBjb25zdHJ1Y3Rvcih2aWV3KSB7XG4gICAgICAgIHRoaXMudmlldyA9IHZpZXc7XG4gICAgICAgIHRoaXMubW91bnRlZCA9IGZhbHNlO1xuICAgICAgICB0aGlzLmRvbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgIHRoaXMuZG9tLmNsYXNzTGlzdC5hZGQoXCJjbS10b29sdGlwLWhvdmVyXCIpO1xuICAgICAgICB0aGlzLm1hbmFnZXIgPSBuZXcgVG9vbHRpcFZpZXdNYW5hZ2VyKHZpZXcsIHNob3dIb3ZlclRvb2x0aXAsICh0LCBwKSA9PiB0aGlzLmNyZWF0ZUhvc3RlZFZpZXcodCwgcCksIHQgPT4gdC5kb20ucmVtb3ZlKCkpO1xuICAgIH1cbiAgICBjcmVhdGVIb3N0ZWRWaWV3KHRvb2x0aXAsIHByZXYpIHtcbiAgICAgICAgbGV0IGhvc3RlZFZpZXcgPSB0b29sdGlwLmNyZWF0ZSh0aGlzLnZpZXcpO1xuICAgICAgICBob3N0ZWRWaWV3LmRvbS5jbGFzc0xpc3QuYWRkKFwiY20tdG9vbHRpcC1zZWN0aW9uXCIpO1xuICAgICAgICB0aGlzLmRvbS5pbnNlcnRCZWZvcmUoaG9zdGVkVmlldy5kb20sIHByZXYgPyBwcmV2LmRvbS5uZXh0U2libGluZyA6IHRoaXMuZG9tLmZpcnN0Q2hpbGQpO1xuICAgICAgICBpZiAodGhpcy5tb3VudGVkICYmIGhvc3RlZFZpZXcubW91bnQpXG4gICAgICAgICAgICBob3N0ZWRWaWV3Lm1vdW50KHRoaXMudmlldyk7XG4gICAgICAgIHJldHVybiBob3N0ZWRWaWV3O1xuICAgIH1cbiAgICBtb3VudCh2aWV3KSB7XG4gICAgICAgIGZvciAobGV0IGhvc3RlZFZpZXcgb2YgdGhpcy5tYW5hZ2VyLnRvb2x0aXBWaWV3cykge1xuICAgICAgICAgICAgaWYgKGhvc3RlZFZpZXcubW91bnQpXG4gICAgICAgICAgICAgICAgaG9zdGVkVmlldy5tb3VudCh2aWV3KTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLm1vdW50ZWQgPSB0cnVlO1xuICAgIH1cbiAgICBwb3NpdGlvbmVkKHNwYWNlKSB7XG4gICAgICAgIGZvciAobGV0IGhvc3RlZFZpZXcgb2YgdGhpcy5tYW5hZ2VyLnRvb2x0aXBWaWV3cykge1xuICAgICAgICAgICAgaWYgKGhvc3RlZFZpZXcucG9zaXRpb25lZClcbiAgICAgICAgICAgICAgICBob3N0ZWRWaWV3LnBvc2l0aW9uZWQoc3BhY2UpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHVwZGF0ZSh1cGRhdGUpIHtcbiAgICAgICAgdGhpcy5tYW5hZ2VyLnVwZGF0ZSh1cGRhdGUpO1xuICAgIH1cbiAgICBkZXN0cm95KCkge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIGZvciAobGV0IHQgb2YgdGhpcy5tYW5hZ2VyLnRvb2x0aXBWaWV3cylcbiAgICAgICAgICAgIChfYSA9IHQuZGVzdHJveSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmNhbGwodCk7XG4gICAgfVxuICAgIHBhc3NQcm9wKG5hbWUpIHtcbiAgICAgICAgbGV0IHZhbHVlID0gdW5kZWZpbmVkO1xuICAgICAgICBmb3IgKGxldCB2aWV3IG9mIHRoaXMubWFuYWdlci50b29sdGlwVmlld3MpIHtcbiAgICAgICAgICAgIGxldCBnaXZlbiA9IHZpZXdbbmFtZV07XG4gICAgICAgICAgICBpZiAoZ2l2ZW4gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIGlmICh2YWx1ZSA9PT0gdW5kZWZpbmVkKVxuICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IGdpdmVuO1xuICAgICAgICAgICAgICAgIGVsc2UgaWYgKHZhbHVlICE9PSBnaXZlbilcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgfVxuICAgIGdldCBvZmZzZXQoKSB7IHJldHVybiB0aGlzLnBhc3NQcm9wKFwib2Zmc2V0XCIpOyB9XG4gICAgZ2V0IGdldENvb3JkcygpIHsgcmV0dXJuIHRoaXMucGFzc1Byb3AoXCJnZXRDb29yZHNcIik7IH1cbiAgICBnZXQgb3ZlcmxhcCgpIHsgcmV0dXJuIHRoaXMucGFzc1Byb3AoXCJvdmVybGFwXCIpOyB9XG4gICAgZ2V0IHJlc2l6ZSgpIHsgcmV0dXJuIHRoaXMucGFzc1Byb3AoXCJyZXNpemVcIik7IH1cbn1cbmNvbnN0IHNob3dIb3ZlclRvb2x0aXBIb3N0ID0gLypAX19QVVJFX18qL3Nob3dUb29sdGlwLmNvbXB1dGUoW3Nob3dIb3ZlclRvb2x0aXBdLCBzdGF0ZSA9PiB7XG4gICAgbGV0IHRvb2x0aXBzID0gc3RhdGUuZmFjZXQoc2hvd0hvdmVyVG9vbHRpcCk7XG4gICAgaWYgKHRvb2x0aXBzLmxlbmd0aCA9PT0gMClcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgcG9zOiBNYXRoLm1pbiguLi50b29sdGlwcy5tYXAodCA9PiB0LnBvcykpLFxuICAgICAgICBlbmQ6IE1hdGgubWF4KC4uLnRvb2x0aXBzLm1hcCh0ID0+IHsgdmFyIF9hOyByZXR1cm4gKF9hID0gdC5lbmQpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IHQucG9zOyB9KSksXG4gICAgICAgIGNyZWF0ZTogSG92ZXJUb29sdGlwSG9zdC5jcmVhdGUsXG4gICAgICAgIGFib3ZlOiB0b29sdGlwc1swXS5hYm92ZSxcbiAgICAgICAgYXJyb3c6IHRvb2x0aXBzLnNvbWUodCA9PiB0LmFycm93KSxcbiAgICB9O1xufSk7XG5jbGFzcyBIb3ZlclBsdWdpbiB7XG4gICAgY29uc3RydWN0b3Iodmlldywgc291cmNlLCBmaWVsZCwgc2V0SG92ZXIsIGhvdmVyVGltZSkge1xuICAgICAgICB0aGlzLnZpZXcgPSB2aWV3O1xuICAgICAgICB0aGlzLnNvdXJjZSA9IHNvdXJjZTtcbiAgICAgICAgdGhpcy5maWVsZCA9IGZpZWxkO1xuICAgICAgICB0aGlzLnNldEhvdmVyID0gc2V0SG92ZXI7XG4gICAgICAgIHRoaXMuaG92ZXJUaW1lID0gaG92ZXJUaW1lO1xuICAgICAgICB0aGlzLmhvdmVyVGltZW91dCA9IC0xO1xuICAgICAgICB0aGlzLnJlc3RhcnRUaW1lb3V0ID0gLTE7XG4gICAgICAgIHRoaXMucGVuZGluZyA9IG51bGw7XG4gICAgICAgIHRoaXMubGFzdE1vdmUgPSB7IHg6IDAsIHk6IDAsIHRhcmdldDogdmlldy5kb20sIHRpbWU6IDAgfTtcbiAgICAgICAgdGhpcy5jaGVja0hvdmVyID0gdGhpcy5jaGVja0hvdmVyLmJpbmQodGhpcyk7XG4gICAgICAgIHZpZXcuZG9tLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWxlYXZlXCIsIHRoaXMubW91c2VsZWF2ZSA9IHRoaXMubW91c2VsZWF2ZS5iaW5kKHRoaXMpKTtcbiAgICAgICAgdmlldy5kb20uYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlbW92ZVwiLCB0aGlzLm1vdXNlbW92ZSA9IHRoaXMubW91c2Vtb3ZlLmJpbmQodGhpcykpO1xuICAgIH1cbiAgICB1cGRhdGUoKSB7XG4gICAgICAgIGlmICh0aGlzLnBlbmRpbmcpIHtcbiAgICAgICAgICAgIHRoaXMucGVuZGluZyA9IG51bGw7XG4gICAgICAgICAgICBjbGVhclRpbWVvdXQodGhpcy5yZXN0YXJ0VGltZW91dCk7XG4gICAgICAgICAgICB0aGlzLnJlc3RhcnRUaW1lb3V0ID0gc2V0VGltZW91dCgoKSA9PiB0aGlzLnN0YXJ0SG92ZXIoKSwgMjApO1xuICAgICAgICB9XG4gICAgfVxuICAgIGdldCBhY3RpdmUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnZpZXcuc3RhdGUuZmllbGQodGhpcy5maWVsZCk7XG4gICAgfVxuICAgIGNoZWNrSG92ZXIoKSB7XG4gICAgICAgIHRoaXMuaG92ZXJUaW1lb3V0ID0gLTE7XG4gICAgICAgIGlmICh0aGlzLmFjdGl2ZS5sZW5ndGgpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIGxldCBob3ZlcmVkID0gRGF0ZS5ub3coKSAtIHRoaXMubGFzdE1vdmUudGltZTtcbiAgICAgICAgaWYgKGhvdmVyZWQgPCB0aGlzLmhvdmVyVGltZSlcbiAgICAgICAgICAgIHRoaXMuaG92ZXJUaW1lb3V0ID0gc2V0VGltZW91dCh0aGlzLmNoZWNrSG92ZXIsIHRoaXMuaG92ZXJUaW1lIC0gaG92ZXJlZCk7XG4gICAgICAgIGVsc2VcbiAgICAgICAgICAgIHRoaXMuc3RhcnRIb3ZlcigpO1xuICAgIH1cbiAgICBzdGFydEhvdmVyKCkge1xuICAgICAgICBjbGVhclRpbWVvdXQodGhpcy5yZXN0YXJ0VGltZW91dCk7XG4gICAgICAgIGxldCB7IHZpZXcsIGxhc3RNb3ZlIH0gPSB0aGlzO1xuICAgICAgICBsZXQgdGlsZSA9IHZpZXcuZG9jVmlldy50aWxlLm5lYXJlc3QobGFzdE1vdmUudGFyZ2V0KTtcbiAgICAgICAgaWYgKCF0aWxlKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICBsZXQgcG9zLCBzaWRlID0gMTtcbiAgICAgICAgaWYgKHRpbGUuaXNXaWRnZXQoKSkge1xuICAgICAgICAgICAgcG9zID0gdGlsZS5wb3NBdFN0YXJ0O1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcG9zID0gdmlldy5wb3NBdENvb3JkcyhsYXN0TW92ZSk7XG4gICAgICAgICAgICBpZiAocG9zID09IG51bGwpXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgbGV0IHBvc0Nvb3JkcyA9IHZpZXcuY29vcmRzQXRQb3MocG9zKTtcbiAgICAgICAgICAgIGlmICghcG9zQ29vcmRzIHx8XG4gICAgICAgICAgICAgICAgbGFzdE1vdmUueSA8IHBvc0Nvb3Jkcy50b3AgfHwgbGFzdE1vdmUueSA+IHBvc0Nvb3Jkcy5ib3R0b20gfHxcbiAgICAgICAgICAgICAgICBsYXN0TW92ZS54IDwgcG9zQ29vcmRzLmxlZnQgLSB2aWV3LmRlZmF1bHRDaGFyYWN0ZXJXaWR0aCB8fFxuICAgICAgICAgICAgICAgIGxhc3RNb3ZlLnggPiBwb3NDb29yZHMucmlnaHQgKyB2aWV3LmRlZmF1bHRDaGFyYWN0ZXJXaWR0aClcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICBsZXQgYmlkaSA9IHZpZXcuYmlkaVNwYW5zKHZpZXcuc3RhdGUuZG9jLmxpbmVBdChwb3MpKS5maW5kKHMgPT4gcy5mcm9tIDw9IHBvcyAmJiBzLnRvID49IHBvcyk7XG4gICAgICAgICAgICBsZXQgcnRsID0gYmlkaSAmJiBiaWRpLmRpciA9PSBEaXJlY3Rpb24uUlRMID8gLTEgOiAxO1xuICAgICAgICAgICAgc2lkZSA9IChsYXN0TW92ZS54IDwgcG9zQ29vcmRzLmxlZnQgPyAtcnRsIDogcnRsKTtcbiAgICAgICAgfVxuICAgICAgICBsZXQgb3BlbiA9IHRoaXMuc291cmNlKHZpZXcsIHBvcywgc2lkZSk7XG4gICAgICAgIGlmIChvcGVuID09PSBudWxsIHx8IG9wZW4gPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9wZW4udGhlbikge1xuICAgICAgICAgICAgbGV0IHBlbmRpbmcgPSB0aGlzLnBlbmRpbmcgPSB7IHBvcyB9O1xuICAgICAgICAgICAgb3Blbi50aGVuKHJlc3VsdCA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMucGVuZGluZyA9PSBwZW5kaW5nKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGVuZGluZyA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHQgJiYgIShBcnJheS5pc0FycmF5KHJlc3VsdCkgJiYgIXJlc3VsdC5sZW5ndGgpKVxuICAgICAgICAgICAgICAgICAgICAgICAgdmlldy5kaXNwYXRjaCh7IGVmZmVjdHM6IHRoaXMuc2V0SG92ZXIub2YoQXJyYXkuaXNBcnJheShyZXN1bHQpID8gcmVzdWx0IDogW3Jlc3VsdF0pIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sIGUgPT4gbG9nRXhjZXB0aW9uKHZpZXcuc3RhdGUsIGUsIFwiaG92ZXIgdG9vbHRpcFwiKSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAob3BlbiAmJiAhKEFycmF5LmlzQXJyYXkob3BlbikgJiYgIW9wZW4ubGVuZ3RoKSkge1xuICAgICAgICAgICAgdmlldy5kaXNwYXRjaCh7IGVmZmVjdHM6IHRoaXMuc2V0SG92ZXIub2YoQXJyYXkuaXNBcnJheShvcGVuKSA/IG9wZW4gOiBbb3Blbl0pIH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIGdldCB0b29sdGlwKCkge1xuICAgICAgICBsZXQgcGx1Z2luID0gdGhpcy52aWV3LnBsdWdpbih0b29sdGlwUGx1Z2luKTtcbiAgICAgICAgbGV0IGluZGV4ID0gcGx1Z2luID8gcGx1Z2luLm1hbmFnZXIudG9vbHRpcHMuZmluZEluZGV4KHQgPT4gdC5jcmVhdGUgPT0gSG92ZXJUb29sdGlwSG9zdC5jcmVhdGUpIDogLTE7XG4gICAgICAgIHJldHVybiBpbmRleCA+IC0xID8gcGx1Z2luLm1hbmFnZXIudG9vbHRpcFZpZXdzW2luZGV4XSA6IG51bGw7XG4gICAgfVxuICAgIG1vdXNlbW92ZShldmVudCkge1xuICAgICAgICB2YXIgX2EsIF9iO1xuICAgICAgICB0aGlzLmxhc3RNb3ZlID0geyB4OiBldmVudC5jbGllbnRYLCB5OiBldmVudC5jbGllbnRZLCB0YXJnZXQ6IGV2ZW50LnRhcmdldCwgdGltZTogRGF0ZS5ub3coKSB9O1xuICAgICAgICBpZiAodGhpcy5ob3ZlclRpbWVvdXQgPCAwKVxuICAgICAgICAgICAgdGhpcy5ob3ZlclRpbWVvdXQgPSBzZXRUaW1lb3V0KHRoaXMuY2hlY2tIb3ZlciwgdGhpcy5ob3ZlclRpbWUpO1xuICAgICAgICBsZXQgeyBhY3RpdmUsIHRvb2x0aXAgfSA9IHRoaXM7XG4gICAgICAgIGlmIChhY3RpdmUubGVuZ3RoICYmIHRvb2x0aXAgJiYgIWlzSW5Ub29sdGlwKHRvb2x0aXAuZG9tLCBldmVudCkgfHwgdGhpcy5wZW5kaW5nKSB7XG4gICAgICAgICAgICBsZXQgeyBwb3MgfSA9IGFjdGl2ZVswXSB8fCB0aGlzLnBlbmRpbmcsIGVuZCA9IChfYiA9IChfYSA9IGFjdGl2ZVswXSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmVuZCkgIT09IG51bGwgJiYgX2IgIT09IHZvaWQgMCA/IF9iIDogcG9zO1xuICAgICAgICAgICAgaWYgKChwb3MgPT0gZW5kID8gdGhpcy52aWV3LnBvc0F0Q29vcmRzKHRoaXMubGFzdE1vdmUpICE9IHBvc1xuICAgICAgICAgICAgICAgIDogIWlzT3ZlclJhbmdlKHRoaXMudmlldywgcG9zLCBlbmQsIGV2ZW50LmNsaWVudFgsIGV2ZW50LmNsaWVudFkpKSkge1xuICAgICAgICAgICAgICAgIHRoaXMudmlldy5kaXNwYXRjaCh7IGVmZmVjdHM6IHRoaXMuc2V0SG92ZXIub2YoW10pIH0pO1xuICAgICAgICAgICAgICAgIHRoaXMucGVuZGluZyA9IG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgbW91c2VsZWF2ZShldmVudCkge1xuICAgICAgICBjbGVhclRpbWVvdXQodGhpcy5ob3ZlclRpbWVvdXQpO1xuICAgICAgICB0aGlzLmhvdmVyVGltZW91dCA9IC0xO1xuICAgICAgICBsZXQgeyBhY3RpdmUgfSA9IHRoaXM7XG4gICAgICAgIGlmIChhY3RpdmUubGVuZ3RoKSB7XG4gICAgICAgICAgICBsZXQgeyB0b29sdGlwIH0gPSB0aGlzO1xuICAgICAgICAgICAgbGV0IGluVG9vbHRpcCA9IHRvb2x0aXAgJiYgdG9vbHRpcC5kb20uY29udGFpbnMoZXZlbnQucmVsYXRlZFRhcmdldCk7XG4gICAgICAgICAgICBpZiAoIWluVG9vbHRpcClcbiAgICAgICAgICAgICAgICB0aGlzLnZpZXcuZGlzcGF0Y2goeyBlZmZlY3RzOiB0aGlzLnNldEhvdmVyLm9mKFtdKSB9KTtcbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICB0aGlzLndhdGNoVG9vbHRpcExlYXZlKHRvb2x0aXAuZG9tKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICB3YXRjaFRvb2x0aXBMZWF2ZSh0b29sdGlwKSB7XG4gICAgICAgIGxldCB3YXRjaCA9IChldmVudCkgPT4ge1xuICAgICAgICAgICAgdG9vbHRpcC5yZW1vdmVFdmVudExpc3RlbmVyKFwibW91c2VsZWF2ZVwiLCB3YXRjaCk7XG4gICAgICAgICAgICBpZiAodGhpcy5hY3RpdmUubGVuZ3RoICYmICF0aGlzLnZpZXcuZG9tLmNvbnRhaW5zKGV2ZW50LnJlbGF0ZWRUYXJnZXQpKVxuICAgICAgICAgICAgICAgIHRoaXMudmlldy5kaXNwYXRjaCh7IGVmZmVjdHM6IHRoaXMuc2V0SG92ZXIub2YoW10pIH0pO1xuICAgICAgICB9O1xuICAgICAgICB0b29sdGlwLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWxlYXZlXCIsIHdhdGNoKTtcbiAgICB9XG4gICAgZGVzdHJveSgpIHtcbiAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMuaG92ZXJUaW1lb3V0KTtcbiAgICAgICAgdGhpcy52aWV3LmRvbS5yZW1vdmVFdmVudExpc3RlbmVyKFwibW91c2VsZWF2ZVwiLCB0aGlzLm1vdXNlbGVhdmUpO1xuICAgICAgICB0aGlzLnZpZXcuZG9tLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJtb3VzZW1vdmVcIiwgdGhpcy5tb3VzZW1vdmUpO1xuICAgIH1cbn1cbmNvbnN0IHRvb2x0aXBNYXJnaW4gPSA0O1xuZnVuY3Rpb24gaXNJblRvb2x0aXAodG9vbHRpcCwgZXZlbnQpIHtcbiAgICBsZXQgeyBsZWZ0LCByaWdodCwgdG9wLCBib3R0b20gfSA9IHRvb2x0aXAuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCksIGFycm93O1xuICAgIGlmIChhcnJvdyA9IHRvb2x0aXAucXVlcnlTZWxlY3RvcihcIi5jbS10b29sdGlwLWFycm93XCIpKSB7XG4gICAgICAgIGxldCBhcnJvd1JlY3QgPSBhcnJvdy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgICAgdG9wID0gTWF0aC5taW4oYXJyb3dSZWN0LnRvcCwgdG9wKTtcbiAgICAgICAgYm90dG9tID0gTWF0aC5tYXgoYXJyb3dSZWN0LmJvdHRvbSwgYm90dG9tKTtcbiAgICB9XG4gICAgcmV0dXJuIGV2ZW50LmNsaWVudFggPj0gbGVmdCAtIHRvb2x0aXBNYXJnaW4gJiYgZXZlbnQuY2xpZW50WCA8PSByaWdodCArIHRvb2x0aXBNYXJnaW4gJiZcbiAgICAgICAgZXZlbnQuY2xpZW50WSA+PSB0b3AgLSB0b29sdGlwTWFyZ2luICYmIGV2ZW50LmNsaWVudFkgPD0gYm90dG9tICsgdG9vbHRpcE1hcmdpbjtcbn1cbmZ1bmN0aW9uIGlzT3ZlclJhbmdlKHZpZXcsIGZyb20sIHRvLCB4LCB5LCBtYXJnaW4pIHtcbiAgICBsZXQgcmVjdCA9IHZpZXcuc2Nyb2xsRE9NLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgIGxldCBkb2NCb3R0b20gPSB2aWV3LmRvY3VtZW50VG9wICsgdmlldy5kb2N1bWVudFBhZGRpbmcudG9wICsgdmlldy5jb250ZW50SGVpZ2h0O1xuICAgIGlmIChyZWN0LmxlZnQgPiB4IHx8IHJlY3QucmlnaHQgPCB4IHx8IHJlY3QudG9wID4geSB8fCBNYXRoLm1pbihyZWN0LmJvdHRvbSwgZG9jQm90dG9tKSA8IHkpXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICBsZXQgcG9zID0gdmlldy5wb3NBdENvb3Jkcyh7IHgsIHkgfSwgZmFsc2UpO1xuICAgIHJldHVybiBwb3MgPj0gZnJvbSAmJiBwb3MgPD0gdG87XG59XG4vKipcblNldCB1cCBhIGhvdmVyIHRvb2x0aXAsIHdoaWNoIHNob3dzIHVwIHdoZW4gdGhlIHBvaW50ZXIgaG92ZXJzXG5vdmVyIHJhbmdlcyBvZiB0ZXh0LiBUaGUgY2FsbGJhY2sgaXMgY2FsbGVkIHdoZW4gdGhlIG1vdXNlIGhvdmVyc1xub3ZlciB0aGUgZG9jdW1lbnQgdGV4dC4gSXQgc2hvdWxkLCBpZiB0aGVyZSBpcyBhIHRvb2x0aXBcbmFzc29jaWF0ZWQgd2l0aCBwb3NpdGlvbiBgcG9zYCwgcmV0dXJuIHRoZSB0b29sdGlwIGRlc2NyaXB0aW9uXG4oZWl0aGVyIGRpcmVjdGx5IG9yIGluIGEgcHJvbWlzZSkuIFRoZSBgc2lkZWAgYXJndW1lbnQgaW5kaWNhdGVzXG5vbiB3aGljaCBzaWRlIG9mIHRoZSBwb3NpdGlvbiB0aGUgcG9pbnRlciBpc+KAlGl0IHdpbGwgYmUgLTEgaWYgdGhlXG5wb2ludGVyIGlzIGJlZm9yZSB0aGUgcG9zaXRpb24sIDEgaWYgYWZ0ZXIgdGhlIHBvc2l0aW9uLlxuXG5Ob3RlIHRoYXQgYWxsIGhvdmVyIHRvb2x0aXBzIGFyZSBob3N0ZWQgd2l0aGluIGEgc2luZ2xlIHRvb2x0aXBcbmNvbnRhaW5lciBlbGVtZW50LiBUaGlzIGFsbG93cyBtdWx0aXBsZSB0b29sdGlwcyBvdmVyIHRoZSBzYW1lXG5yYW5nZSB0byBiZSBcIm1lcmdlZFwiIHRvZ2V0aGVyIHdpdGhvdXQgb3ZlcmxhcHBpbmcuXG5cblRoZSByZXR1cm4gdmFsdWUgaXMgYSB2YWxpZCBbZWRpdG9yIGV4dGVuc2lvbl0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNzdGF0ZS5FeHRlbnNpb24pXG5idXQgYWxzbyBwcm92aWRlcyBhbiBgYWN0aXZlYCBwcm9wZXJ0eSBob2xkaW5nIGEgc3RhdGUgZmllbGQgdGhhdFxuY2FuIGJlIHVzZWQgdG8gcmVhZCB0aGUgY3VycmVudGx5IGFjdGl2ZSB0b29sdGlwcyBwcm9kdWNlZCBieSB0aGlzXG5leHRlbnNpb24uXG4qL1xuZnVuY3Rpb24gaG92ZXJUb29sdGlwKHNvdXJjZSwgb3B0aW9ucyA9IHt9KSB7XG4gICAgbGV0IHNldEhvdmVyID0gU3RhdGVFZmZlY3QuZGVmaW5lKCk7XG4gICAgbGV0IGhvdmVyU3RhdGUgPSBTdGF0ZUZpZWxkLmRlZmluZSh7XG4gICAgICAgIGNyZWF0ZSgpIHsgcmV0dXJuIFtdOyB9LFxuICAgICAgICB1cGRhdGUodmFsdWUsIHRyKSB7XG4gICAgICAgICAgICBpZiAodmFsdWUubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMuaGlkZU9uQ2hhbmdlICYmICh0ci5kb2NDaGFuZ2VkIHx8IHRyLnNlbGVjdGlvbikpXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlID0gW107XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAob3B0aW9ucy5oaWRlT24pXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlID0gdmFsdWUuZmlsdGVyKHYgPT4gIW9wdGlvbnMuaGlkZU9uKHRyLCB2KSk7XG4gICAgICAgICAgICAgICAgaWYgKHRyLmRvY0NoYW5nZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IG1hcHBlZCA9IFtdO1xuICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCB0b29sdGlwIG9mIHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgbmV3UG9zID0gdHIuY2hhbmdlcy5tYXBQb3ModG9vbHRpcC5wb3MsIC0xLCBNYXBNb2RlLlRyYWNrRGVsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChuZXdQb3MgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBjb3B5ID0gT2JqZWN0LmFzc2lnbihPYmplY3QuY3JlYXRlKG51bGwpLCB0b29sdGlwKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb3B5LnBvcyA9IG5ld1BvcztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY29weS5lbmQgIT0gbnVsbClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29weS5lbmQgPSB0ci5jaGFuZ2VzLm1hcFBvcyhjb3B5LmVuZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFwcGVkLnB1c2goY29weSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSBtYXBwZWQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZm9yIChsZXQgZWZmZWN0IG9mIHRyLmVmZmVjdHMpIHtcbiAgICAgICAgICAgICAgICBpZiAoZWZmZWN0LmlzKHNldEhvdmVyKSlcbiAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSBlZmZlY3QudmFsdWU7XG4gICAgICAgICAgICAgICAgaWYgKGVmZmVjdC5pcyhjbG9zZUhvdmVyVG9vbHRpcEVmZmVjdCkpXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlID0gW107XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgICAgIH0sXG4gICAgICAgIHByb3ZpZGU6IGYgPT4gc2hvd0hvdmVyVG9vbHRpcC5mcm9tKGYpXG4gICAgfSk7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgYWN0aXZlOiBob3ZlclN0YXRlLFxuICAgICAgICBleHRlbnNpb246IFtcbiAgICAgICAgICAgIGhvdmVyU3RhdGUsXG4gICAgICAgICAgICBWaWV3UGx1Z2luLmRlZmluZSh2aWV3ID0+IG5ldyBIb3ZlclBsdWdpbih2aWV3LCBzb3VyY2UsIGhvdmVyU3RhdGUsIHNldEhvdmVyLCBvcHRpb25zLmhvdmVyVGltZSB8fCAzMDAgLyogSG92ZXIuVGltZSAqLykpLFxuICAgICAgICAgICAgc2hvd0hvdmVyVG9vbHRpcEhvc3RcbiAgICAgICAgXVxuICAgIH07XG59XG4vKipcbkdldCB0aGUgYWN0aXZlIHRvb2x0aXAgdmlldyBmb3IgYSBnaXZlbiB0b29sdGlwLCBpZiBhdmFpbGFibGUuXG4qL1xuZnVuY3Rpb24gZ2V0VG9vbHRpcCh2aWV3LCB0b29sdGlwKSB7XG4gICAgbGV0IHBsdWdpbiA9IHZpZXcucGx1Z2luKHRvb2x0aXBQbHVnaW4pO1xuICAgIGlmICghcGx1Z2luKVxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICBsZXQgZm91bmQgPSBwbHVnaW4ubWFuYWdlci50b29sdGlwcy5pbmRleE9mKHRvb2x0aXApO1xuICAgIHJldHVybiBmb3VuZCA8IDAgPyBudWxsIDogcGx1Z2luLm1hbmFnZXIudG9vbHRpcFZpZXdzW2ZvdW5kXTtcbn1cbi8qKlxuUmV0dXJucyB0cnVlIGlmIGFueSBob3ZlciB0b29sdGlwcyBhcmUgY3VycmVudGx5IGFjdGl2ZS5cbiovXG5mdW5jdGlvbiBoYXNIb3ZlclRvb2x0aXBzKHN0YXRlKSB7XG4gICAgcmV0dXJuIHN0YXRlLmZhY2V0KHNob3dIb3ZlclRvb2x0aXApLnNvbWUoeCA9PiB4KTtcbn1cbmNvbnN0IGNsb3NlSG92ZXJUb29sdGlwRWZmZWN0ID0gLypAX19QVVJFX18qL1N0YXRlRWZmZWN0LmRlZmluZSgpO1xuLyoqXG5UcmFuc2FjdGlvbiBlZmZlY3QgdGhhdCBjbG9zZXMgYWxsIGhvdmVyIHRvb2x0aXBzLlxuKi9cbmNvbnN0IGNsb3NlSG92ZXJUb29sdGlwcyA9IC8qQF9fUFVSRV9fKi9jbG9zZUhvdmVyVG9vbHRpcEVmZmVjdC5vZihudWxsKTtcbi8qKlxuVGVsbCB0aGUgdG9vbHRpcCBleHRlbnNpb24gdG8gcmVjb21wdXRlIHRoZSBwb3NpdGlvbiBvZiB0aGUgYWN0aXZlXG50b29sdGlwcy4gVGhpcyBjYW4gYmUgdXNlZnVsIHdoZW4gc29tZXRoaW5nIGhhcHBlbnMgKHN1Y2ggYXMgYVxucmUtcG9zaXRpb25pbmcgb3IgQ1NTIGNoYW5nZSBhZmZlY3RpbmcgdGhlIGVkaXRvcikgdGhhdCBjb3VsZFxuaW52YWxpZGF0ZSB0aGUgZXhpc3RpbmcgdG9vbHRpcCBwb3NpdGlvbnMuXG4qL1xuZnVuY3Rpb24gcmVwb3NpdGlvblRvb2x0aXBzKHZpZXcpIHtcbiAgICBsZXQgcGx1Z2luID0gdmlldy5wbHVnaW4odG9vbHRpcFBsdWdpbik7XG4gICAgaWYgKHBsdWdpbilcbiAgICAgICAgcGx1Z2luLm1heWJlTWVhc3VyZSgpO1xufVxuXG5jb25zdCBwYW5lbENvbmZpZyA9IC8qQF9fUFVSRV9fKi9GYWNldC5kZWZpbmUoe1xuICAgIGNvbWJpbmUoY29uZmlncykge1xuICAgICAgICBsZXQgdG9wQ29udGFpbmVyLCBib3R0b21Db250YWluZXI7XG4gICAgICAgIGZvciAobGV0IGMgb2YgY29uZmlncykge1xuICAgICAgICAgICAgdG9wQ29udGFpbmVyID0gdG9wQ29udGFpbmVyIHx8IGMudG9wQ29udGFpbmVyO1xuICAgICAgICAgICAgYm90dG9tQ29udGFpbmVyID0gYm90dG9tQ29udGFpbmVyIHx8IGMuYm90dG9tQ29udGFpbmVyO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7IHRvcENvbnRhaW5lciwgYm90dG9tQ29udGFpbmVyIH07XG4gICAgfVxufSk7XG4vKipcbkNvbmZpZ3VyZXMgdGhlIHBhbmVsLW1hbmFnaW5nIGV4dGVuc2lvbi5cbiovXG5mdW5jdGlvbiBwYW5lbHMoY29uZmlnKSB7XG4gICAgcmV0dXJuIGNvbmZpZyA/IFtwYW5lbENvbmZpZy5vZihjb25maWcpXSA6IFtdO1xufVxuLyoqXG5HZXQgdGhlIGFjdGl2ZSBwYW5lbCBjcmVhdGVkIGJ5IHRoZSBnaXZlbiBjb25zdHJ1Y3RvciwgaWYgYW55LlxuVGhpcyBjYW4gYmUgdXNlZnVsIHdoZW4geW91IG5lZWQgYWNjZXNzIHRvIHlvdXIgcGFuZWxzJyBET01cbnN0cnVjdHVyZS5cbiovXG5mdW5jdGlvbiBnZXRQYW5lbCh2aWV3LCBwYW5lbCkge1xuICAgIGxldCBwbHVnaW4gPSB2aWV3LnBsdWdpbihwYW5lbFBsdWdpbik7XG4gICAgbGV0IGluZGV4ID0gcGx1Z2luID8gcGx1Z2luLnNwZWNzLmluZGV4T2YocGFuZWwpIDogLTE7XG4gICAgcmV0dXJuIGluZGV4ID4gLTEgPyBwbHVnaW4ucGFuZWxzW2luZGV4XSA6IG51bGw7XG59XG5jb25zdCBwYW5lbFBsdWdpbiA9IC8qQF9fUFVSRV9fKi9WaWV3UGx1Z2luLmZyb21DbGFzcyhjbGFzcyB7XG4gICAgY29uc3RydWN0b3Iodmlldykge1xuICAgICAgICB0aGlzLmlucHV0ID0gdmlldy5zdGF0ZS5mYWNldChzaG93UGFuZWwpO1xuICAgICAgICB0aGlzLnNwZWNzID0gdGhpcy5pbnB1dC5maWx0ZXIocyA9PiBzKTtcbiAgICAgICAgdGhpcy5wYW5lbHMgPSB0aGlzLnNwZWNzLm1hcChzcGVjID0+IHNwZWModmlldykpO1xuICAgICAgICBsZXQgY29uZiA9IHZpZXcuc3RhdGUuZmFjZXQocGFuZWxDb25maWcpO1xuICAgICAgICB0aGlzLnRvcCA9IG5ldyBQYW5lbEdyb3VwKHZpZXcsIHRydWUsIGNvbmYudG9wQ29udGFpbmVyKTtcbiAgICAgICAgdGhpcy5ib3R0b20gPSBuZXcgUGFuZWxHcm91cCh2aWV3LCBmYWxzZSwgY29uZi5ib3R0b21Db250YWluZXIpO1xuICAgICAgICB0aGlzLnRvcC5zeW5jKHRoaXMucGFuZWxzLmZpbHRlcihwID0+IHAudG9wKSk7XG4gICAgICAgIHRoaXMuYm90dG9tLnN5bmModGhpcy5wYW5lbHMuZmlsdGVyKHAgPT4gIXAudG9wKSk7XG4gICAgICAgIGZvciAobGV0IHAgb2YgdGhpcy5wYW5lbHMpIHtcbiAgICAgICAgICAgIHAuZG9tLmNsYXNzTGlzdC5hZGQoXCJjbS1wYW5lbFwiKTtcbiAgICAgICAgICAgIGlmIChwLm1vdW50KVxuICAgICAgICAgICAgICAgIHAubW91bnQoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICB1cGRhdGUodXBkYXRlKSB7XG4gICAgICAgIGxldCBjb25mID0gdXBkYXRlLnN0YXRlLmZhY2V0KHBhbmVsQ29uZmlnKTtcbiAgICAgICAgaWYgKHRoaXMudG9wLmNvbnRhaW5lciAhPSBjb25mLnRvcENvbnRhaW5lcikge1xuICAgICAgICAgICAgdGhpcy50b3Auc3luYyhbXSk7XG4gICAgICAgICAgICB0aGlzLnRvcCA9IG5ldyBQYW5lbEdyb3VwKHVwZGF0ZS52aWV3LCB0cnVlLCBjb25mLnRvcENvbnRhaW5lcik7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuYm90dG9tLmNvbnRhaW5lciAhPSBjb25mLmJvdHRvbUNvbnRhaW5lcikge1xuICAgICAgICAgICAgdGhpcy5ib3R0b20uc3luYyhbXSk7XG4gICAgICAgICAgICB0aGlzLmJvdHRvbSA9IG5ldyBQYW5lbEdyb3VwKHVwZGF0ZS52aWV3LCBmYWxzZSwgY29uZi5ib3R0b21Db250YWluZXIpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMudG9wLnN5bmNDbGFzc2VzKCk7XG4gICAgICAgIHRoaXMuYm90dG9tLnN5bmNDbGFzc2VzKCk7XG4gICAgICAgIGxldCBpbnB1dCA9IHVwZGF0ZS5zdGF0ZS5mYWNldChzaG93UGFuZWwpO1xuICAgICAgICBpZiAoaW5wdXQgIT0gdGhpcy5pbnB1dCkge1xuICAgICAgICAgICAgbGV0IHNwZWNzID0gaW5wdXQuZmlsdGVyKHggPT4geCk7XG4gICAgICAgICAgICBsZXQgcGFuZWxzID0gW10sIHRvcCA9IFtdLCBib3R0b20gPSBbXSwgbW91bnQgPSBbXTtcbiAgICAgICAgICAgIGZvciAobGV0IHNwZWMgb2Ygc3BlY3MpIHtcbiAgICAgICAgICAgICAgICBsZXQga25vd24gPSB0aGlzLnNwZWNzLmluZGV4T2Yoc3BlYyksIHBhbmVsO1xuICAgICAgICAgICAgICAgIGlmIChrbm93biA8IDApIHtcbiAgICAgICAgICAgICAgICAgICAgcGFuZWwgPSBzcGVjKHVwZGF0ZS52aWV3KTtcbiAgICAgICAgICAgICAgICAgICAgbW91bnQucHVzaChwYW5lbCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBwYW5lbCA9IHRoaXMucGFuZWxzW2tub3duXTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHBhbmVsLnVwZGF0ZSlcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhbmVsLnVwZGF0ZSh1cGRhdGUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBwYW5lbHMucHVzaChwYW5lbCk7XG4gICAgICAgICAgICAgICAgKHBhbmVsLnRvcCA/IHRvcCA6IGJvdHRvbSkucHVzaChwYW5lbCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnNwZWNzID0gc3BlY3M7XG4gICAgICAgICAgICB0aGlzLnBhbmVscyA9IHBhbmVscztcbiAgICAgICAgICAgIHRoaXMudG9wLnN5bmModG9wKTtcbiAgICAgICAgICAgIHRoaXMuYm90dG9tLnN5bmMoYm90dG9tKTtcbiAgICAgICAgICAgIGZvciAobGV0IHAgb2YgbW91bnQpIHtcbiAgICAgICAgICAgICAgICBwLmRvbS5jbGFzc0xpc3QuYWRkKFwiY20tcGFuZWxcIik7XG4gICAgICAgICAgICAgICAgaWYgKHAubW91bnQpXG4gICAgICAgICAgICAgICAgICAgIHAubW91bnQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGZvciAobGV0IHAgb2YgdGhpcy5wYW5lbHMpXG4gICAgICAgICAgICAgICAgaWYgKHAudXBkYXRlKVxuICAgICAgICAgICAgICAgICAgICBwLnVwZGF0ZSh1cGRhdGUpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGRlc3Ryb3koKSB7XG4gICAgICAgIHRoaXMudG9wLnN5bmMoW10pO1xuICAgICAgICB0aGlzLmJvdHRvbS5zeW5jKFtdKTtcbiAgICB9XG59LCB7XG4gICAgcHJvdmlkZTogcGx1Z2luID0+IEVkaXRvclZpZXcuc2Nyb2xsTWFyZ2lucy5vZih2aWV3ID0+IHtcbiAgICAgICAgbGV0IHZhbHVlID0gdmlldy5wbHVnaW4ocGx1Z2luKTtcbiAgICAgICAgcmV0dXJuIHZhbHVlICYmIHsgdG9wOiB2YWx1ZS50b3Auc2Nyb2xsTWFyZ2luKCksIGJvdHRvbTogdmFsdWUuYm90dG9tLnNjcm9sbE1hcmdpbigpIH07XG4gICAgfSlcbn0pO1xuY2xhc3MgUGFuZWxHcm91cCB7XG4gICAgY29uc3RydWN0b3IodmlldywgdG9wLCBjb250YWluZXIpIHtcbiAgICAgICAgdGhpcy52aWV3ID0gdmlldztcbiAgICAgICAgdGhpcy50b3AgPSB0b3A7XG4gICAgICAgIHRoaXMuY29udGFpbmVyID0gY29udGFpbmVyO1xuICAgICAgICB0aGlzLmRvbSA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy5jbGFzc2VzID0gXCJcIjtcbiAgICAgICAgdGhpcy5wYW5lbHMgPSBbXTtcbiAgICAgICAgdGhpcy5zeW5jQ2xhc3NlcygpO1xuICAgIH1cbiAgICBzeW5jKHBhbmVscykge1xuICAgICAgICBmb3IgKGxldCBwIG9mIHRoaXMucGFuZWxzKVxuICAgICAgICAgICAgaWYgKHAuZGVzdHJveSAmJiBwYW5lbHMuaW5kZXhPZihwKSA8IDApXG4gICAgICAgICAgICAgICAgcC5kZXN0cm95KCk7XG4gICAgICAgIHRoaXMucGFuZWxzID0gcGFuZWxzO1xuICAgICAgICB0aGlzLnN5bmNET00oKTtcbiAgICB9XG4gICAgc3luY0RPTSgpIHtcbiAgICAgICAgaWYgKHRoaXMucGFuZWxzLmxlbmd0aCA9PSAwKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5kb20pIHtcbiAgICAgICAgICAgICAgICB0aGlzLmRvbS5yZW1vdmUoKTtcbiAgICAgICAgICAgICAgICB0aGlzLmRvbSA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXRoaXMuZG9tKSB7XG4gICAgICAgICAgICB0aGlzLmRvbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgICAgICB0aGlzLmRvbS5jbGFzc05hbWUgPSB0aGlzLnRvcCA/IFwiY20tcGFuZWxzIGNtLXBhbmVscy10b3BcIiA6IFwiY20tcGFuZWxzIGNtLXBhbmVscy1ib3R0b21cIjtcbiAgICAgICAgICAgIHRoaXMuZG9tLnN0eWxlW3RoaXMudG9wID8gXCJ0b3BcIiA6IFwiYm90dG9tXCJdID0gXCIwXCI7XG4gICAgICAgICAgICBsZXQgcGFyZW50ID0gdGhpcy5jb250YWluZXIgfHwgdGhpcy52aWV3LmRvbTtcbiAgICAgICAgICAgIHBhcmVudC5pbnNlcnRCZWZvcmUodGhpcy5kb20sIHRoaXMudG9wID8gcGFyZW50LmZpcnN0Q2hpbGQgOiBudWxsKTtcbiAgICAgICAgfVxuICAgICAgICBsZXQgY3VyRE9NID0gdGhpcy5kb20uZmlyc3RDaGlsZDtcbiAgICAgICAgZm9yIChsZXQgcGFuZWwgb2YgdGhpcy5wYW5lbHMpIHtcbiAgICAgICAgICAgIGlmIChwYW5lbC5kb20ucGFyZW50Tm9kZSA9PSB0aGlzLmRvbSkge1xuICAgICAgICAgICAgICAgIHdoaWxlIChjdXJET00gIT0gcGFuZWwuZG9tKVxuICAgICAgICAgICAgICAgICAgICBjdXJET00gPSBybShjdXJET00pO1xuICAgICAgICAgICAgICAgIGN1ckRPTSA9IGN1ckRPTS5uZXh0U2libGluZztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuZG9tLmluc2VydEJlZm9yZShwYW5lbC5kb20sIGN1ckRPTSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgd2hpbGUgKGN1ckRPTSlcbiAgICAgICAgICAgIGN1ckRPTSA9IHJtKGN1ckRPTSk7XG4gICAgfVxuICAgIHNjcm9sbE1hcmdpbigpIHtcbiAgICAgICAgcmV0dXJuICF0aGlzLmRvbSB8fCB0aGlzLmNvbnRhaW5lciA/IDBcbiAgICAgICAgICAgIDogTWF0aC5tYXgoMCwgdGhpcy50b3AgP1xuICAgICAgICAgICAgICAgIHRoaXMuZG9tLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmJvdHRvbSAtIE1hdGgubWF4KDAsIHRoaXMudmlldy5zY3JvbGxET00uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkudG9wKSA6XG4gICAgICAgICAgICAgICAgTWF0aC5taW4oaW5uZXJIZWlnaHQsIHRoaXMudmlldy5zY3JvbGxET00uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkuYm90dG9tKSAtIHRoaXMuZG9tLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLnRvcCk7XG4gICAgfVxuICAgIHN5bmNDbGFzc2VzKCkge1xuICAgICAgICBpZiAoIXRoaXMuY29udGFpbmVyIHx8IHRoaXMuY2xhc3NlcyA9PSB0aGlzLnZpZXcudGhlbWVDbGFzc2VzKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICBmb3IgKGxldCBjbHMgb2YgdGhpcy5jbGFzc2VzLnNwbGl0KFwiIFwiKSlcbiAgICAgICAgICAgIGlmIChjbHMpXG4gICAgICAgICAgICAgICAgdGhpcy5jb250YWluZXIuY2xhc3NMaXN0LnJlbW92ZShjbHMpO1xuICAgICAgICBmb3IgKGxldCBjbHMgb2YgKHRoaXMuY2xhc3NlcyA9IHRoaXMudmlldy50aGVtZUNsYXNzZXMpLnNwbGl0KFwiIFwiKSlcbiAgICAgICAgICAgIGlmIChjbHMpXG4gICAgICAgICAgICAgICAgdGhpcy5jb250YWluZXIuY2xhc3NMaXN0LmFkZChjbHMpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIHJtKG5vZGUpIHtcbiAgICBsZXQgbmV4dCA9IG5vZGUubmV4dFNpYmxpbmc7XG4gICAgbm9kZS5yZW1vdmUoKTtcbiAgICByZXR1cm4gbmV4dDtcbn1cbi8qKlxuT3BlbmluZyBhIHBhbmVsIGlzIGRvbmUgYnkgcHJvdmlkaW5nIGEgY29uc3RydWN0b3IgZnVuY3Rpb24gZm9yXG50aGUgcGFuZWwgdGhyb3VnaCB0aGlzIGZhY2V0LiAoVGhlIHBhbmVsIGlzIGNsb3NlZCBhZ2FpbiB3aGVuIGl0c1xuY29uc3RydWN0b3IgaXMgbm8gbG9uZ2VyIHByb3ZpZGVkLikgVmFsdWVzIG9mIGBudWxsYCBhcmUgaWdub3JlZC5cbiovXG5jb25zdCBzaG93UGFuZWwgPSAvKkBfX1BVUkVfXyovRmFjZXQuZGVmaW5lKHtcbiAgICBlbmFibGVzOiBwYW5lbFBsdWdpblxufSk7XG5cbi8qKlxuU2hvdyBhIHBhbmVsIGFib3ZlIG9yIGJlbG93IHRoZSBlZGl0b3IgdG8gc2hvdyB0aGUgdXNlciBhIG1lc3NhZ2Vcbm9yIHByb21wdCB0aGVtIGZvciBpbnB1dC4gUmV0dXJucyBhbiBlZmZlY3QgdGhhdCBjYW4gYmUgZGlzcGF0Y2hlZFxudG8gY2xvc2UgdGhlIGRpYWxvZywgYW5kIGEgcHJvbWlzZSB0aGF0IHJlc29sdmVzIHdoZW4gdGhlIGRpYWxvZ1xuaXMgY2xvc2VkIG9yIGEgZm9ybSBpbnNpZGUgb2YgaXQgaXMgc3VibWl0dGVkLlxuXG5Zb3UgYXJlIGVuY291cmFnZWQsIGlmIHlvdXIgaGFuZGxpbmcgb2YgdGhlIHJlc3VsdCBvZiB0aGUgcHJvbWlzZVxuZGlzcGF0Y2hlcyBhIHRyYW5zYWN0aW9uLCB0byBpbmNsdWRlIHRoZSBgY2xvc2VgIGVmZmVjdCBpbiBpdC4gSWZcbnlvdSBkb24ndCwgdGhpcyBmdW5jdGlvbiB3aWxsIGF1dG9tYXRpY2FsbHkgZGlzcGF0Y2ggYSBzZXBhcmF0ZVxudHJhbnNhY3Rpb24gcmlnaHQgYWZ0ZXIuXG4qL1xuZnVuY3Rpb24gc2hvd0RpYWxvZyh2aWV3LCBjb25maWcpIHtcbiAgICBsZXQgcmVzb2x2ZTtcbiAgICBsZXQgcHJvbWlzZSA9IG5ldyBQcm9taXNlKHIgPT4gcmVzb2x2ZSA9IHIpO1xuICAgIGxldCBwYW5lbEN0b3IgPSAodmlldykgPT4gY3JlYXRlRGlhbG9nKHZpZXcsIGNvbmZpZywgcmVzb2x2ZSk7XG4gICAgaWYgKHZpZXcuc3RhdGUuZmllbGQoZGlhbG9nRmllbGQsIGZhbHNlKSkge1xuICAgICAgICB2aWV3LmRpc3BhdGNoKHsgZWZmZWN0czogb3BlbkRpYWxvZ0VmZmVjdC5vZihwYW5lbEN0b3IpIH0pO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgdmlldy5kaXNwYXRjaCh7IGVmZmVjdHM6IFN0YXRlRWZmZWN0LmFwcGVuZENvbmZpZy5vZihkaWFsb2dGaWVsZC5pbml0KCgpID0+IFtwYW5lbEN0b3JdKSkgfSk7XG4gICAgfVxuICAgIGxldCBjbG9zZSA9IGNsb3NlRGlhbG9nRWZmZWN0Lm9mKHBhbmVsQ3Rvcik7XG4gICAgcmV0dXJuIHsgY2xvc2UsIHJlc3VsdDogcHJvbWlzZS50aGVuKGZvcm0gPT4ge1xuICAgICAgICAgICAgbGV0IHF1ZXVlID0gdmlldy53aW4ucXVldWVNaWNyb3Rhc2sgfHwgKChmKSA9PiB2aWV3Lndpbi5zZXRUaW1lb3V0KGYsIDEwKSk7XG4gICAgICAgICAgICBxdWV1ZSgoKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKHZpZXcuc3RhdGUuZmllbGQoZGlhbG9nRmllbGQpLmluZGV4T2YocGFuZWxDdG9yKSA+IC0xKVxuICAgICAgICAgICAgICAgICAgICB2aWV3LmRpc3BhdGNoKHsgZWZmZWN0czogY2xvc2UgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBmb3JtO1xuICAgICAgICB9KSB9O1xufVxuLyoqXG5GaW5kIHRoZSBbYFBhbmVsYF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyN2aWV3LlBhbmVsKSBmb3IgYW4gb3BlbiBkaWFsb2csIHVzaW5nIGEgY2xhc3Ncbm5hbWUgYXMgaWRlbnRpZmllci5cbiovXG5mdW5jdGlvbiBnZXREaWFsb2codmlldywgY2xhc3NOYW1lKSB7XG4gICAgbGV0IGRpYWxvZ3MgPSB2aWV3LnN0YXRlLmZpZWxkKGRpYWxvZ0ZpZWxkLCBmYWxzZSkgfHwgW107XG4gICAgZm9yIChsZXQgb3BlbiBvZiBkaWFsb2dzKSB7XG4gICAgICAgIGxldCBwYW5lbCA9IGdldFBhbmVsKHZpZXcsIG9wZW4pO1xuICAgICAgICBpZiAocGFuZWwgJiYgcGFuZWwuZG9tLmNsYXNzTGlzdC5jb250YWlucyhjbGFzc05hbWUpKVxuICAgICAgICAgICAgcmV0dXJuIHBhbmVsO1xuICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbn1cbmNvbnN0IGRpYWxvZ0ZpZWxkID0gLypAX19QVVJFX18qL1N0YXRlRmllbGQuZGVmaW5lKHtcbiAgICBjcmVhdGUoKSB7IHJldHVybiBbXTsgfSxcbiAgICB1cGRhdGUoZGlhbG9ncywgdHIpIHtcbiAgICAgICAgZm9yIChsZXQgZSBvZiB0ci5lZmZlY3RzKSB7XG4gICAgICAgICAgICBpZiAoZS5pcyhvcGVuRGlhbG9nRWZmZWN0KSlcbiAgICAgICAgICAgICAgICBkaWFsb2dzID0gW2UudmFsdWVdLmNvbmNhdChkaWFsb2dzKTtcbiAgICAgICAgICAgIGVsc2UgaWYgKGUuaXMoY2xvc2VEaWFsb2dFZmZlY3QpKVxuICAgICAgICAgICAgICAgIGRpYWxvZ3MgPSBkaWFsb2dzLmZpbHRlcihkID0+IGQgIT0gZS52YWx1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGRpYWxvZ3M7XG4gICAgfSxcbiAgICBwcm92aWRlOiBmID0+IHNob3dQYW5lbC5jb21wdXRlTihbZl0sIHN0YXRlID0+IHN0YXRlLmZpZWxkKGYpKVxufSk7XG5jb25zdCBvcGVuRGlhbG9nRWZmZWN0ID0gLypAX19QVVJFX18qL1N0YXRlRWZmZWN0LmRlZmluZSgpO1xuY29uc3QgY2xvc2VEaWFsb2dFZmZlY3QgPSAvKkBfX1BVUkVfXyovU3RhdGVFZmZlY3QuZGVmaW5lKCk7XG5mdW5jdGlvbiBjcmVhdGVEaWFsb2codmlldywgY29uZmlnLCByZXN1bHQpIHtcbiAgICBsZXQgY29udGVudCA9IGNvbmZpZy5jb250ZW50ID8gY29uZmlnLmNvbnRlbnQodmlldywgKCkgPT4gZG9uZShudWxsKSkgOiBudWxsO1xuICAgIGlmICghY29udGVudCkge1xuICAgICAgICBjb250ZW50ID0gZWx0KFwiZm9ybVwiKTtcbiAgICAgICAgaWYgKGNvbmZpZy5pbnB1dCkge1xuICAgICAgICAgICAgbGV0IGlucHV0ID0gZWx0KFwiaW5wdXRcIiwgY29uZmlnLmlucHV0KTtcbiAgICAgICAgICAgIGlmICgvXih0ZXh0fHBhc3N3b3JkfG51bWJlcnxlbWFpbHx0ZWx8dXJsKSQvLnRlc3QoaW5wdXQudHlwZSkpXG4gICAgICAgICAgICAgICAgaW5wdXQuY2xhc3NMaXN0LmFkZChcImNtLXRleHRmaWVsZFwiKTtcbiAgICAgICAgICAgIGlmICghaW5wdXQubmFtZSlcbiAgICAgICAgICAgICAgICBpbnB1dC5uYW1lID0gXCJpbnB1dFwiO1xuICAgICAgICAgICAgY29udGVudC5hcHBlbmRDaGlsZChlbHQoXCJsYWJlbFwiLCAoY29uZmlnLmxhYmVsIHx8IFwiXCIpICsgXCI6IFwiLCBpbnB1dCkpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgY29udGVudC5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShjb25maWcubGFiZWwgfHwgXCJcIikpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnRlbnQuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoXCIgXCIpKTtcbiAgICAgICAgY29udGVudC5hcHBlbmRDaGlsZChlbHQoXCJidXR0b25cIiwgeyBjbGFzczogXCJjbS1idXR0b25cIiwgdHlwZTogXCJzdWJtaXRcIiB9LCBjb25maWcuc3VibWl0TGFiZWwgfHwgXCJPS1wiKSk7XG4gICAgfVxuICAgIGxldCBmb3JtcyA9IGNvbnRlbnQubm9kZU5hbWUgPT0gXCJGT1JNXCIgPyBbY29udGVudF0gOiBjb250ZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCJmb3JtXCIpO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZm9ybXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgbGV0IGZvcm0gPSBmb3Jtc1tpXTtcbiAgICAgICAgZm9ybS5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCAoZXZlbnQpID0+IHtcbiAgICAgICAgICAgIGlmIChldmVudC5rZXlDb2RlID09IDI3KSB7IC8vIEVzY2FwZVxuICAgICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgZG9uZShudWxsKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGV2ZW50LmtleUNvZGUgPT0gMTMpIHsgLy8gRW50ZXJcbiAgICAgICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgIGRvbmUoZm9ybSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICBmb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgZG9uZShmb3JtKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGxldCBwYW5lbCA9IGVsdChcImRpdlwiLCBjb250ZW50LCBlbHQoXCJidXR0b25cIiwge1xuICAgICAgICBvbmNsaWNrOiAoKSA9PiBkb25lKG51bGwpLFxuICAgICAgICBcImFyaWEtbGFiZWxcIjogdmlldy5zdGF0ZS5waHJhc2UoXCJjbG9zZVwiKSxcbiAgICAgICAgY2xhc3M6IFwiY20tZGlhbG9nLWNsb3NlXCIsXG4gICAgICAgIHR5cGU6IFwiYnV0dG9uXCJcbiAgICB9LCBbXCLDl1wiXSkpO1xuICAgIGlmIChjb25maWcuY2xhc3MpXG4gICAgICAgIHBhbmVsLmNsYXNzTmFtZSA9IGNvbmZpZy5jbGFzcztcbiAgICBwYW5lbC5jbGFzc0xpc3QuYWRkKFwiY20tZGlhbG9nXCIpO1xuICAgIGZ1bmN0aW9uIGRvbmUoZm9ybSkge1xuICAgICAgICBpZiAocGFuZWwuY29udGFpbnMocGFuZWwub3duZXJEb2N1bWVudC5hY3RpdmVFbGVtZW50KSlcbiAgICAgICAgICAgIHZpZXcuZm9jdXMoKTtcbiAgICAgICAgcmVzdWx0KGZvcm0pO1xuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgICBkb206IHBhbmVsLFxuICAgICAgICB0b3A6IGNvbmZpZy50b3AsXG4gICAgICAgIG1vdW50OiAoKSA9PiB7XG4gICAgICAgICAgICBpZiAoY29uZmlnLmZvY3VzKSB7XG4gICAgICAgICAgICAgICAgbGV0IGZvY3VzO1xuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgY29uZmlnLmZvY3VzID09IFwic3RyaW5nXCIpXG4gICAgICAgICAgICAgICAgICAgIGZvY3VzID0gY29udGVudC5xdWVyeVNlbGVjdG9yKGNvbmZpZy5mb2N1cyk7XG4gICAgICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgICAgICBmb2N1cyA9IGNvbnRlbnQucXVlcnlTZWxlY3RvcihcImlucHV0XCIpIHx8IGNvbnRlbnQucXVlcnlTZWxlY3RvcihcImJ1dHRvblwiKTtcbiAgICAgICAgICAgICAgICBpZiAoZm9jdXMgJiYgXCJzZWxlY3RcIiBpbiBmb2N1cylcbiAgICAgICAgICAgICAgICAgICAgZm9jdXMuc2VsZWN0KCk7XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoZm9jdXMgJiYgXCJmb2N1c1wiIGluIGZvY3VzKVxuICAgICAgICAgICAgICAgICAgICBmb2N1cy5mb2N1cygpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbn1cblxuLyoqXG5BIGd1dHRlciBtYXJrZXIgcmVwcmVzZW50cyBhIGJpdCBvZiBpbmZvcm1hdGlvbiBhdHRhY2hlZCB0byBhIGxpbmVcbmluIGEgc3BlY2lmaWMgZ3V0dGVyLiBZb3VyIG93biBjdXN0b20gbWFya2VycyBoYXZlIHRvIGV4dGVuZCB0aGlzXG5jbGFzcy5cbiovXG5jbGFzcyBHdXR0ZXJNYXJrZXIgZXh0ZW5kcyBSYW5nZVZhbHVlIHtcbiAgICAvKipcbiAgICBAaW50ZXJuYWxcbiAgICAqL1xuICAgIGNvbXBhcmUob3RoZXIpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMgPT0gb3RoZXIgfHwgdGhpcy5jb25zdHJ1Y3RvciA9PSBvdGhlci5jb25zdHJ1Y3RvciAmJiB0aGlzLmVxKG90aGVyKTtcbiAgICB9XG4gICAgLyoqXG4gICAgQ29tcGFyZSB0aGlzIG1hcmtlciB0byBhbm90aGVyIG1hcmtlciBvZiB0aGUgc2FtZSB0eXBlLlxuICAgICovXG4gICAgZXEob3RoZXIpIHsgcmV0dXJuIGZhbHNlOyB9XG4gICAgLyoqXG4gICAgQ2FsbGVkIGlmIHRoZSBtYXJrZXIgaGFzIGEgYHRvRE9NYCBtZXRob2QgYW5kIGl0cyByZXByZXNlbnRhdGlvblxuICAgIHdhcyByZW1vdmVkIGZyb20gYSBndXR0ZXIuXG4gICAgKi9cbiAgICBkZXN0cm95KGRvbSkgeyB9XG59XG5HdXR0ZXJNYXJrZXIucHJvdG90eXBlLmVsZW1lbnRDbGFzcyA9IFwiXCI7XG5HdXR0ZXJNYXJrZXIucHJvdG90eXBlLnRvRE9NID0gdW5kZWZpbmVkO1xuR3V0dGVyTWFya2VyLnByb3RvdHlwZS5tYXBNb2RlID0gTWFwTW9kZS5UcmFja0JlZm9yZTtcbkd1dHRlck1hcmtlci5wcm90b3R5cGUuc3RhcnRTaWRlID0gR3V0dGVyTWFya2VyLnByb3RvdHlwZS5lbmRTaWRlID0gLTE7XG5HdXR0ZXJNYXJrZXIucHJvdG90eXBlLnBvaW50ID0gdHJ1ZTtcbi8qKlxuRmFjZXQgdXNlZCB0byBhZGQgYSBjbGFzcyB0byBhbGwgZ3V0dGVyIGVsZW1lbnRzIGZvciBhIGdpdmVuIGxpbmUuXG5NYXJrZXJzIGdpdmVuIHRvIHRoaXMgZmFjZXQgc2hvdWxkIF9vbmx5XyBkZWZpbmUgYW5cbltgZWxlbWVudGNsYXNzYF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyN2aWV3Lkd1dHRlck1hcmtlci5lbGVtZW50Q2xhc3MpLCBub3QgYVxuW2B0b0RPTWBdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jdmlldy5HdXR0ZXJNYXJrZXIudG9ET00pIChvciB0aGUgbWFya2VyIHdpbGwgYXBwZWFyXG5pbiBhbGwgZ3V0dGVycyBmb3IgdGhlIGxpbmUpLlxuKi9cbmNvbnN0IGd1dHRlckxpbmVDbGFzcyA9IC8qQF9fUFVSRV9fKi9GYWNldC5kZWZpbmUoKTtcbi8qKlxuRmFjZXQgdXNlZCB0byBhZGQgYSBjbGFzcyB0byBhbGwgZ3V0dGVyIGVsZW1lbnRzIG5leHQgdG8gYSB3aWRnZXQuXG5TaG91bGQgbm90IHByb3ZpZGUgd2lkZ2V0cyB3aXRoIGEgYHRvRE9NYCBtZXRob2QuXG4qL1xuY29uc3QgZ3V0dGVyV2lkZ2V0Q2xhc3MgPSAvKkBfX1BVUkVfXyovRmFjZXQuZGVmaW5lKCk7XG5jb25zdCBkZWZhdWx0cyA9IHtcbiAgICBjbGFzczogXCJcIixcbiAgICByZW5kZXJFbXB0eUVsZW1lbnRzOiBmYWxzZSxcbiAgICBlbGVtZW50U3R5bGU6IFwiXCIsXG4gICAgbWFya2VyczogKCkgPT4gUmFuZ2VTZXQuZW1wdHksXG4gICAgbGluZU1hcmtlcjogKCkgPT4gbnVsbCxcbiAgICB3aWRnZXRNYXJrZXI6ICgpID0+IG51bGwsXG4gICAgbGluZU1hcmtlckNoYW5nZTogbnVsbCxcbiAgICBpbml0aWFsU3BhY2VyOiBudWxsLFxuICAgIHVwZGF0ZVNwYWNlcjogbnVsbCxcbiAgICBkb21FdmVudEhhbmRsZXJzOiB7fSxcbiAgICBzaWRlOiBcImJlZm9yZVwiXG59O1xuY29uc3QgYWN0aXZlR3V0dGVycyA9IC8qQF9fUFVSRV9fKi9GYWNldC5kZWZpbmUoKTtcbi8qKlxuRGVmaW5lIGFuIGVkaXRvciBndXR0ZXIuIFRoZSBvcmRlciBpbiB3aGljaCB0aGUgZ3V0dGVycyBhcHBlYXIgaXNcbmRldGVybWluZWQgYnkgdGhlaXIgZXh0ZW5zaW9uIHByaW9yaXR5LlxuKi9cbmZ1bmN0aW9uIGd1dHRlcihjb25maWcpIHtcbiAgICByZXR1cm4gW2d1dHRlcnMoKSwgYWN0aXZlR3V0dGVycy5vZih7IC4uLmRlZmF1bHRzLCAuLi5jb25maWcgfSldO1xufVxuY29uc3QgdW5maXhHdXR0ZXJzID0gLypAX19QVVJFX18qL0ZhY2V0LmRlZmluZSh7XG4gICAgY29tYmluZTogdmFsdWVzID0+IHZhbHVlcy5zb21lKHggPT4geClcbn0pO1xuLyoqXG5UaGUgZ3V0dGVyLWRyYXdpbmcgcGx1Z2luIGlzIGF1dG9tYXRpY2FsbHkgZW5hYmxlZCB3aGVuIHlvdSBhZGQgYVxuZ3V0dGVyLCBidXQgeW91IGNhbiB1c2UgdGhpcyBmdW5jdGlvbiB0byBleHBsaWNpdGx5IGNvbmZpZ3VyZSBpdC5cblxuVW5sZXNzIGBmaXhlZGAgaXMgZXhwbGljaXRseSBzZXQgdG8gYGZhbHNlYCwgdGhlIGd1dHRlcnMgYXJlXG5maXhlZCwgbWVhbmluZyB0aGV5IGRvbid0IHNjcm9sbCBhbG9uZyB3aXRoIHRoZSBjb250ZW50XG5ob3Jpem9udGFsbHkgKGV4Y2VwdCBvbiBJbnRlcm5ldCBFeHBsb3Jlciwgd2hpY2ggZG9lc24ndCBzdXBwb3J0XG5DU1MgW2Bwb3NpdGlvbjpcbnN0aWNreWBdKGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0NTUy9wb3NpdGlvbiNzdGlja3kpKS5cbiovXG5mdW5jdGlvbiBndXR0ZXJzKGNvbmZpZykge1xuICAgIGxldCByZXN1bHQgPSBbXG4gICAgICAgIGd1dHRlclZpZXcsXG4gICAgXTtcbiAgICBpZiAoY29uZmlnICYmIGNvbmZpZy5maXhlZCA9PT0gZmFsc2UpXG4gICAgICAgIHJlc3VsdC5wdXNoKHVuZml4R3V0dGVycy5vZih0cnVlKSk7XG4gICAgcmV0dXJuIHJlc3VsdDtcbn1cbmNvbnN0IGd1dHRlclZpZXcgPSAvKkBfX1BVUkVfXyovVmlld1BsdWdpbi5mcm9tQ2xhc3MoY2xhc3Mge1xuICAgIGNvbnN0cnVjdG9yKHZpZXcpIHtcbiAgICAgICAgdGhpcy52aWV3ID0gdmlldztcbiAgICAgICAgdGhpcy5kb21BZnRlciA9IG51bGw7XG4gICAgICAgIHRoaXMucHJldlZpZXdwb3J0ID0gdmlldy52aWV3cG9ydDtcbiAgICAgICAgdGhpcy5kb20gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICB0aGlzLmRvbS5jbGFzc05hbWUgPSBcImNtLWd1dHRlcnMgY20tZ3V0dGVycy1iZWZvcmVcIjtcbiAgICAgICAgdGhpcy5kb20uc2V0QXR0cmlidXRlKFwiYXJpYS1oaWRkZW5cIiwgXCJ0cnVlXCIpO1xuICAgICAgICB0aGlzLmRvbS5zdHlsZS5taW5IZWlnaHQgPSAodGhpcy52aWV3LmNvbnRlbnRIZWlnaHQgLyB0aGlzLnZpZXcuc2NhbGVZKSArIFwicHhcIjtcbiAgICAgICAgdGhpcy5ndXR0ZXJzID0gdmlldy5zdGF0ZS5mYWNldChhY3RpdmVHdXR0ZXJzKS5tYXAoY29uZiA9PiBuZXcgU2luZ2xlR3V0dGVyVmlldyh2aWV3LCBjb25mKSk7XG4gICAgICAgIHRoaXMuZml4ZWQgPSAhdmlldy5zdGF0ZS5mYWNldCh1bmZpeEd1dHRlcnMpO1xuICAgICAgICBmb3IgKGxldCBndXR0ZXIgb2YgdGhpcy5ndXR0ZXJzKSB7XG4gICAgICAgICAgICBpZiAoZ3V0dGVyLmNvbmZpZy5zaWRlID09IFwiYWZ0ZXJcIilcbiAgICAgICAgICAgICAgICB0aGlzLmdldERPTUFmdGVyKCkuYXBwZW5kQ2hpbGQoZ3V0dGVyLmRvbSk7XG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgdGhpcy5kb20uYXBwZW5kQ2hpbGQoZ3V0dGVyLmRvbSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuZml4ZWQpIHtcbiAgICAgICAgICAgIC8vIEZJWE1FIElFMTEgZmFsbGJhY2ssIHdoaWNoIGRvZXNuJ3Qgc3VwcG9ydCBwb3NpdGlvbjogc3RpY2t5LFxuICAgICAgICAgICAgLy8gYnkgdXNpbmcgcG9zaXRpb246IHJlbGF0aXZlICsgZXZlbnQgaGFuZGxlcnMgdGhhdCByZWFsaWduIHRoZVxuICAgICAgICAgICAgLy8gZ3V0dGVyIChvciBqdXN0IGZvcmNlIGZpeGVkPWZhbHNlIG9uIElFMTE/KVxuICAgICAgICAgICAgdGhpcy5kb20uc3R5bGUucG9zaXRpb24gPSBcInN0aWNreVwiO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuc3luY0d1dHRlcnMoZmFsc2UpO1xuICAgICAgICB2aWV3LnNjcm9sbERPTS5pbnNlcnRCZWZvcmUodGhpcy5kb20sIHZpZXcuY29udGVudERPTSk7XG4gICAgfVxuICAgIGdldERPTUFmdGVyKCkge1xuICAgICAgICBpZiAoIXRoaXMuZG9tQWZ0ZXIpIHtcbiAgICAgICAgICAgIHRoaXMuZG9tQWZ0ZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICAgICAgdGhpcy5kb21BZnRlci5jbGFzc05hbWUgPSBcImNtLWd1dHRlcnMgY20tZ3V0dGVycy1hZnRlclwiO1xuICAgICAgICAgICAgdGhpcy5kb21BZnRlci5zZXRBdHRyaWJ1dGUoXCJhcmlhLWhpZGRlblwiLCBcInRydWVcIik7XG4gICAgICAgICAgICB0aGlzLmRvbUFmdGVyLnN0eWxlLm1pbkhlaWdodCA9ICh0aGlzLnZpZXcuY29udGVudEhlaWdodCAvIHRoaXMudmlldy5zY2FsZVkpICsgXCJweFwiO1xuICAgICAgICAgICAgdGhpcy5kb21BZnRlci5zdHlsZS5wb3NpdGlvbiA9IHRoaXMuZml4ZWQgPyBcInN0aWNreVwiIDogXCJcIjtcbiAgICAgICAgICAgIHRoaXMudmlldy5zY3JvbGxET00uYXBwZW5kQ2hpbGQodGhpcy5kb21BZnRlcik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuZG9tQWZ0ZXI7XG4gICAgfVxuICAgIHVwZGF0ZSh1cGRhdGUpIHtcbiAgICAgICAgaWYgKHRoaXMudXBkYXRlR3V0dGVycyh1cGRhdGUpKSB7XG4gICAgICAgICAgICAvLyBEZXRhY2ggZHVyaW5nIHN5bmMgd2hlbiB0aGUgdmlld3BvcnQgY2hhbmdlZCBzaWduaWZpY2FudGx5XG4gICAgICAgICAgICAvLyAoc3VjaCBhcyBkdXJpbmcgc2Nyb2xsaW5nKSwgc2luY2UgZm9yIGxhcmdlIHVwZGF0ZXMgdGhhdCBpc1xuICAgICAgICAgICAgLy8gZmFzdGVyLlxuICAgICAgICAgICAgbGV0IHZwQSA9IHRoaXMucHJldlZpZXdwb3J0LCB2cEIgPSB1cGRhdGUudmlldy52aWV3cG9ydDtcbiAgICAgICAgICAgIGxldCB2cE92ZXJsYXAgPSBNYXRoLm1pbih2cEEudG8sIHZwQi50bykgLSBNYXRoLm1heCh2cEEuZnJvbSwgdnBCLmZyb20pO1xuICAgICAgICAgICAgdGhpcy5zeW5jR3V0dGVycyh2cE92ZXJsYXAgPCAodnBCLnRvIC0gdnBCLmZyb20pICogMC44KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodXBkYXRlLmdlb21ldHJ5Q2hhbmdlZCkge1xuICAgICAgICAgICAgbGV0IG1pbiA9ICh0aGlzLnZpZXcuY29udGVudEhlaWdodCAvIHRoaXMudmlldy5zY2FsZVkpICsgXCJweFwiO1xuICAgICAgICAgICAgdGhpcy5kb20uc3R5bGUubWluSGVpZ2h0ID0gbWluO1xuICAgICAgICAgICAgaWYgKHRoaXMuZG9tQWZ0ZXIpXG4gICAgICAgICAgICAgICAgdGhpcy5kb21BZnRlci5zdHlsZS5taW5IZWlnaHQgPSBtaW47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMudmlldy5zdGF0ZS5mYWNldCh1bmZpeEd1dHRlcnMpICE9ICF0aGlzLmZpeGVkKSB7XG4gICAgICAgICAgICB0aGlzLmZpeGVkID0gIXRoaXMuZml4ZWQ7XG4gICAgICAgICAgICB0aGlzLmRvbS5zdHlsZS5wb3NpdGlvbiA9IHRoaXMuZml4ZWQgPyBcInN0aWNreVwiIDogXCJcIjtcbiAgICAgICAgICAgIGlmICh0aGlzLmRvbUFmdGVyKVxuICAgICAgICAgICAgICAgIHRoaXMuZG9tQWZ0ZXIuc3R5bGUucG9zaXRpb24gPSB0aGlzLmZpeGVkID8gXCJzdGlja3lcIiA6IFwiXCI7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5wcmV2Vmlld3BvcnQgPSB1cGRhdGUudmlldy52aWV3cG9ydDtcbiAgICB9XG4gICAgc3luY0d1dHRlcnMoZGV0YWNoKSB7XG4gICAgICAgIGxldCBhZnRlciA9IHRoaXMuZG9tLm5leHRTaWJsaW5nO1xuICAgICAgICBpZiAoZGV0YWNoKSB7XG4gICAgICAgICAgICB0aGlzLmRvbS5yZW1vdmUoKTtcbiAgICAgICAgICAgIGlmICh0aGlzLmRvbUFmdGVyKVxuICAgICAgICAgICAgICAgIHRoaXMuZG9tQWZ0ZXIucmVtb3ZlKCk7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IGxpbmVDbGFzc2VzID0gUmFuZ2VTZXQuaXRlcih0aGlzLnZpZXcuc3RhdGUuZmFjZXQoZ3V0dGVyTGluZUNsYXNzKSwgdGhpcy52aWV3LnZpZXdwb3J0LmZyb20pO1xuICAgICAgICBsZXQgY2xhc3NTZXQgPSBbXTtcbiAgICAgICAgbGV0IGNvbnRleHRzID0gdGhpcy5ndXR0ZXJzLm1hcChndXR0ZXIgPT4gbmV3IFVwZGF0ZUNvbnRleHQoZ3V0dGVyLCB0aGlzLnZpZXcudmlld3BvcnQsIC10aGlzLnZpZXcuZG9jdW1lbnRQYWRkaW5nLnRvcCkpO1xuICAgICAgICBmb3IgKGxldCBsaW5lIG9mIHRoaXMudmlldy52aWV3cG9ydExpbmVCbG9ja3MpIHtcbiAgICAgICAgICAgIGlmIChjbGFzc1NldC5sZW5ndGgpXG4gICAgICAgICAgICAgICAgY2xhc3NTZXQgPSBbXTtcbiAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KGxpbmUudHlwZSkpIHtcbiAgICAgICAgICAgICAgICBsZXQgZmlyc3QgPSB0cnVlO1xuICAgICAgICAgICAgICAgIGZvciAobGV0IGIgb2YgbGluZS50eXBlKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChiLnR5cGUgPT0gQmxvY2tUeXBlLlRleHQgJiYgZmlyc3QpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFkdmFuY2VDdXJzb3IobGluZUNsYXNzZXMsIGNsYXNzU2V0LCBiLmZyb20pO1xuICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgY3ggb2YgY29udGV4dHMpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3gubGluZSh0aGlzLnZpZXcsIGIsIGNsYXNzU2V0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZpcnN0ID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoYi53aWRnZXQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGN4IG9mIGNvbnRleHRzKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN4LndpZGdldCh0aGlzLnZpZXcsIGIpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAobGluZS50eXBlID09IEJsb2NrVHlwZS5UZXh0KSB7XG4gICAgICAgICAgICAgICAgYWR2YW5jZUN1cnNvcihsaW5lQ2xhc3NlcywgY2xhc3NTZXQsIGxpbmUuZnJvbSk7XG4gICAgICAgICAgICAgICAgZm9yIChsZXQgY3ggb2YgY29udGV4dHMpXG4gICAgICAgICAgICAgICAgICAgIGN4LmxpbmUodGhpcy52aWV3LCBsaW5lLCBjbGFzc1NldCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChsaW5lLndpZGdldCkge1xuICAgICAgICAgICAgICAgIGZvciAobGV0IGN4IG9mIGNvbnRleHRzKVxuICAgICAgICAgICAgICAgICAgICBjeC53aWRnZXQodGhpcy52aWV3LCBsaW5lKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBmb3IgKGxldCBjeCBvZiBjb250ZXh0cylcbiAgICAgICAgICAgIGN4LmZpbmlzaCgpO1xuICAgICAgICBpZiAoZGV0YWNoKSB7XG4gICAgICAgICAgICB0aGlzLnZpZXcuc2Nyb2xsRE9NLmluc2VydEJlZm9yZSh0aGlzLmRvbSwgYWZ0ZXIpO1xuICAgICAgICAgICAgaWYgKHRoaXMuZG9tQWZ0ZXIpXG4gICAgICAgICAgICAgICAgdGhpcy52aWV3LnNjcm9sbERPTS5hcHBlbmRDaGlsZCh0aGlzLmRvbUFmdGVyKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICB1cGRhdGVHdXR0ZXJzKHVwZGF0ZSkge1xuICAgICAgICBsZXQgcHJldiA9IHVwZGF0ZS5zdGFydFN0YXRlLmZhY2V0KGFjdGl2ZUd1dHRlcnMpLCBjdXIgPSB1cGRhdGUuc3RhdGUuZmFjZXQoYWN0aXZlR3V0dGVycyk7XG4gICAgICAgIGxldCBjaGFuZ2UgPSB1cGRhdGUuZG9jQ2hhbmdlZCB8fCB1cGRhdGUuaGVpZ2h0Q2hhbmdlZCB8fCB1cGRhdGUudmlld3BvcnRDaGFuZ2VkIHx8XG4gICAgICAgICAgICAhUmFuZ2VTZXQuZXEodXBkYXRlLnN0YXJ0U3RhdGUuZmFjZXQoZ3V0dGVyTGluZUNsYXNzKSwgdXBkYXRlLnN0YXRlLmZhY2V0KGd1dHRlckxpbmVDbGFzcyksIHVwZGF0ZS52aWV3LnZpZXdwb3J0LmZyb20sIHVwZGF0ZS52aWV3LnZpZXdwb3J0LnRvKTtcbiAgICAgICAgaWYgKHByZXYgPT0gY3VyKSB7XG4gICAgICAgICAgICBmb3IgKGxldCBndXR0ZXIgb2YgdGhpcy5ndXR0ZXJzKVxuICAgICAgICAgICAgICAgIGlmIChndXR0ZXIudXBkYXRlKHVwZGF0ZSkpXG4gICAgICAgICAgICAgICAgICAgIGNoYW5nZSA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBjaGFuZ2UgPSB0cnVlO1xuICAgICAgICAgICAgbGV0IGd1dHRlcnMgPSBbXTtcbiAgICAgICAgICAgIGZvciAobGV0IGNvbmYgb2YgY3VyKSB7XG4gICAgICAgICAgICAgICAgbGV0IGtub3duID0gcHJldi5pbmRleE9mKGNvbmYpO1xuICAgICAgICAgICAgICAgIGlmIChrbm93biA8IDApIHtcbiAgICAgICAgICAgICAgICAgICAgZ3V0dGVycy5wdXNoKG5ldyBTaW5nbGVHdXR0ZXJWaWV3KHRoaXMudmlldywgY29uZikpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5ndXR0ZXJzW2tub3duXS51cGRhdGUodXBkYXRlKTtcbiAgICAgICAgICAgICAgICAgICAgZ3V0dGVycy5wdXNoKHRoaXMuZ3V0dGVyc1trbm93bl0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZvciAobGV0IGcgb2YgdGhpcy5ndXR0ZXJzKSB7XG4gICAgICAgICAgICAgICAgZy5kb20ucmVtb3ZlKCk7XG4gICAgICAgICAgICAgICAgaWYgKGd1dHRlcnMuaW5kZXhPZihnKSA8IDApXG4gICAgICAgICAgICAgICAgICAgIGcuZGVzdHJveSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZm9yIChsZXQgZyBvZiBndXR0ZXJzKSB7XG4gICAgICAgICAgICAgICAgaWYgKGcuY29uZmlnLnNpZGUgPT0gXCJhZnRlclwiKVxuICAgICAgICAgICAgICAgICAgICB0aGlzLmdldERPTUFmdGVyKCkuYXBwZW5kQ2hpbGQoZy5kb20pO1xuICAgICAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kb20uYXBwZW5kQ2hpbGQoZy5kb20pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5ndXR0ZXJzID0gZ3V0dGVycztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gY2hhbmdlO1xuICAgIH1cbiAgICBkZXN0cm95KCkge1xuICAgICAgICBmb3IgKGxldCB2aWV3IG9mIHRoaXMuZ3V0dGVycylcbiAgICAgICAgICAgIHZpZXcuZGVzdHJveSgpO1xuICAgICAgICB0aGlzLmRvbS5yZW1vdmUoKTtcbiAgICAgICAgaWYgKHRoaXMuZG9tQWZ0ZXIpXG4gICAgICAgICAgICB0aGlzLmRvbUFmdGVyLnJlbW92ZSgpO1xuICAgIH1cbn0sIHtcbiAgICBwcm92aWRlOiBwbHVnaW4gPT4gRWRpdG9yVmlldy5zY3JvbGxNYXJnaW5zLm9mKHZpZXcgPT4ge1xuICAgICAgICBsZXQgdmFsdWUgPSB2aWV3LnBsdWdpbihwbHVnaW4pO1xuICAgICAgICBpZiAoIXZhbHVlIHx8IHZhbHVlLmd1dHRlcnMubGVuZ3RoID09IDAgfHwgIXZhbHVlLmZpeGVkKVxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIGxldCBiZWZvcmUgPSB2YWx1ZS5kb20ub2Zmc2V0V2lkdGggKiB2aWV3LnNjYWxlWCwgYWZ0ZXIgPSB2YWx1ZS5kb21BZnRlciA/IHZhbHVlLmRvbUFmdGVyLm9mZnNldFdpZHRoICogdmlldy5zY2FsZVggOiAwO1xuICAgICAgICByZXR1cm4gdmlldy50ZXh0RGlyZWN0aW9uID09IERpcmVjdGlvbi5MVFJcbiAgICAgICAgICAgID8geyBsZWZ0OiBiZWZvcmUsIHJpZ2h0OiBhZnRlciB9XG4gICAgICAgICAgICA6IHsgcmlnaHQ6IGJlZm9yZSwgbGVmdDogYWZ0ZXIgfTtcbiAgICB9KVxufSk7XG5mdW5jdGlvbiBhc0FycmF5KHZhbCkgeyByZXR1cm4gKEFycmF5LmlzQXJyYXkodmFsKSA/IHZhbCA6IFt2YWxdKTsgfVxuZnVuY3Rpb24gYWR2YW5jZUN1cnNvcihjdXJzb3IsIGNvbGxlY3QsIHBvcykge1xuICAgIHdoaWxlIChjdXJzb3IudmFsdWUgJiYgY3Vyc29yLmZyb20gPD0gcG9zKSB7XG4gICAgICAgIGlmIChjdXJzb3IuZnJvbSA9PSBwb3MpXG4gICAgICAgICAgICBjb2xsZWN0LnB1c2goY3Vyc29yLnZhbHVlKTtcbiAgICAgICAgY3Vyc29yLm5leHQoKTtcbiAgICB9XG59XG5jbGFzcyBVcGRhdGVDb250ZXh0IHtcbiAgICBjb25zdHJ1Y3RvcihndXR0ZXIsIHZpZXdwb3J0LCBoZWlnaHQpIHtcbiAgICAgICAgdGhpcy5ndXR0ZXIgPSBndXR0ZXI7XG4gICAgICAgIHRoaXMuaGVpZ2h0ID0gaGVpZ2h0O1xuICAgICAgICB0aGlzLmkgPSAwO1xuICAgICAgICB0aGlzLmN1cnNvciA9IFJhbmdlU2V0Lml0ZXIoZ3V0dGVyLm1hcmtlcnMsIHZpZXdwb3J0LmZyb20pO1xuICAgIH1cbiAgICBhZGRFbGVtZW50KHZpZXcsIGJsb2NrLCBtYXJrZXJzKSB7XG4gICAgICAgIGxldCB7IGd1dHRlciB9ID0gdGhpcywgYWJvdmUgPSAoYmxvY2sudG9wIC0gdGhpcy5oZWlnaHQpIC8gdmlldy5zY2FsZVksIGhlaWdodCA9IGJsb2NrLmhlaWdodCAvIHZpZXcuc2NhbGVZO1xuICAgICAgICBpZiAodGhpcy5pID09IGd1dHRlci5lbGVtZW50cy5sZW5ndGgpIHtcbiAgICAgICAgICAgIGxldCBuZXdFbHQgPSBuZXcgR3V0dGVyRWxlbWVudCh2aWV3LCBoZWlnaHQsIGFib3ZlLCBtYXJrZXJzKTtcbiAgICAgICAgICAgIGd1dHRlci5lbGVtZW50cy5wdXNoKG5ld0VsdCk7XG4gICAgICAgICAgICBndXR0ZXIuZG9tLmFwcGVuZENoaWxkKG5ld0VsdC5kb20pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgZ3V0dGVyLmVsZW1lbnRzW3RoaXMuaV0udXBkYXRlKHZpZXcsIGhlaWdodCwgYWJvdmUsIG1hcmtlcnMpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuaGVpZ2h0ID0gYmxvY2suYm90dG9tO1xuICAgICAgICB0aGlzLmkrKztcbiAgICB9XG4gICAgbGluZSh2aWV3LCBsaW5lLCBleHRyYU1hcmtlcnMpIHtcbiAgICAgICAgbGV0IGxvY2FsTWFya2VycyA9IFtdO1xuICAgICAgICBhZHZhbmNlQ3Vyc29yKHRoaXMuY3Vyc29yLCBsb2NhbE1hcmtlcnMsIGxpbmUuZnJvbSk7XG4gICAgICAgIGlmIChleHRyYU1hcmtlcnMubGVuZ3RoKVxuICAgICAgICAgICAgbG9jYWxNYXJrZXJzID0gbG9jYWxNYXJrZXJzLmNvbmNhdChleHRyYU1hcmtlcnMpO1xuICAgICAgICBsZXQgZm9yTGluZSA9IHRoaXMuZ3V0dGVyLmNvbmZpZy5saW5lTWFya2VyKHZpZXcsIGxpbmUsIGxvY2FsTWFya2Vycyk7XG4gICAgICAgIGlmIChmb3JMaW5lKVxuICAgICAgICAgICAgbG9jYWxNYXJrZXJzLnVuc2hpZnQoZm9yTGluZSk7XG4gICAgICAgIGxldCBndXR0ZXIgPSB0aGlzLmd1dHRlcjtcbiAgICAgICAgaWYgKGxvY2FsTWFya2Vycy5sZW5ndGggPT0gMCAmJiAhZ3V0dGVyLmNvbmZpZy5yZW5kZXJFbXB0eUVsZW1lbnRzKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB0aGlzLmFkZEVsZW1lbnQodmlldywgbGluZSwgbG9jYWxNYXJrZXJzKTtcbiAgICB9XG4gICAgd2lkZ2V0KHZpZXcsIGJsb2NrKSB7XG4gICAgICAgIGxldCBtYXJrZXIgPSB0aGlzLmd1dHRlci5jb25maWcud2lkZ2V0TWFya2VyKHZpZXcsIGJsb2NrLndpZGdldCwgYmxvY2spLCBtYXJrZXJzID0gbWFya2VyID8gW21hcmtlcl0gOiBudWxsO1xuICAgICAgICBmb3IgKGxldCBjbHMgb2Ygdmlldy5zdGF0ZS5mYWNldChndXR0ZXJXaWRnZXRDbGFzcykpIHtcbiAgICAgICAgICAgIGxldCBtYXJrZXIgPSBjbHModmlldywgYmxvY2sud2lkZ2V0LCBibG9jayk7XG4gICAgICAgICAgICBpZiAobWFya2VyKVxuICAgICAgICAgICAgICAgIChtYXJrZXJzIHx8IChtYXJrZXJzID0gW10pKS5wdXNoKG1hcmtlcik7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1hcmtlcnMpXG4gICAgICAgICAgICB0aGlzLmFkZEVsZW1lbnQodmlldywgYmxvY2ssIG1hcmtlcnMpO1xuICAgIH1cbiAgICBmaW5pc2goKSB7XG4gICAgICAgIGxldCBndXR0ZXIgPSB0aGlzLmd1dHRlcjtcbiAgICAgICAgd2hpbGUgKGd1dHRlci5lbGVtZW50cy5sZW5ndGggPiB0aGlzLmkpIHtcbiAgICAgICAgICAgIGxldCBsYXN0ID0gZ3V0dGVyLmVsZW1lbnRzLnBvcCgpO1xuICAgICAgICAgICAgZ3V0dGVyLmRvbS5yZW1vdmVDaGlsZChsYXN0LmRvbSk7XG4gICAgICAgICAgICBsYXN0LmRlc3Ryb3koKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbmNsYXNzIFNpbmdsZUd1dHRlclZpZXcge1xuICAgIGNvbnN0cnVjdG9yKHZpZXcsIGNvbmZpZykge1xuICAgICAgICB0aGlzLnZpZXcgPSB2aWV3O1xuICAgICAgICB0aGlzLmNvbmZpZyA9IGNvbmZpZztcbiAgICAgICAgdGhpcy5lbGVtZW50cyA9IFtdO1xuICAgICAgICB0aGlzLnNwYWNlciA9IG51bGw7XG4gICAgICAgIHRoaXMuZG9tID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgdGhpcy5kb20uY2xhc3NOYW1lID0gXCJjbS1ndXR0ZXJcIiArICh0aGlzLmNvbmZpZy5jbGFzcyA/IFwiIFwiICsgdGhpcy5jb25maWcuY2xhc3MgOiBcIlwiKTtcbiAgICAgICAgZm9yIChsZXQgcHJvcCBpbiBjb25maWcuZG9tRXZlbnRIYW5kbGVycykge1xuICAgICAgICAgICAgdGhpcy5kb20uYWRkRXZlbnRMaXN0ZW5lcihwcm9wLCAoZXZlbnQpID0+IHtcbiAgICAgICAgICAgICAgICBsZXQgdGFyZ2V0ID0gZXZlbnQudGFyZ2V0LCB5O1xuICAgICAgICAgICAgICAgIGlmICh0YXJnZXQgIT0gdGhpcy5kb20gJiYgdGhpcy5kb20uY29udGFpbnModGFyZ2V0KSkge1xuICAgICAgICAgICAgICAgICAgICB3aGlsZSAodGFyZ2V0LnBhcmVudE5vZGUgIT0gdGhpcy5kb20pXG4gICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXQgPSB0YXJnZXQucGFyZW50Tm9kZTtcbiAgICAgICAgICAgICAgICAgICAgbGV0IHJlY3QgPSB0YXJnZXQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICAgICAgICAgICAgICAgIHkgPSAocmVjdC50b3AgKyByZWN0LmJvdHRvbSkgLyAyO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgeSA9IGV2ZW50LmNsaWVudFk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGxldCBsaW5lID0gdmlldy5saW5lQmxvY2tBdEhlaWdodCh5IC0gdmlldy5kb2N1bWVudFRvcCk7XG4gICAgICAgICAgICAgICAgaWYgKGNvbmZpZy5kb21FdmVudEhhbmRsZXJzW3Byb3BdKHZpZXcsIGxpbmUsIGV2ZW50KSlcbiAgICAgICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMubWFya2VycyA9IGFzQXJyYXkoY29uZmlnLm1hcmtlcnModmlldykpO1xuICAgICAgICBpZiAoY29uZmlnLmluaXRpYWxTcGFjZXIpIHtcbiAgICAgICAgICAgIHRoaXMuc3BhY2VyID0gbmV3IEd1dHRlckVsZW1lbnQodmlldywgMCwgMCwgW2NvbmZpZy5pbml0aWFsU3BhY2VyKHZpZXcpXSk7XG4gICAgICAgICAgICB0aGlzLmRvbS5hcHBlbmRDaGlsZCh0aGlzLnNwYWNlci5kb20pO1xuICAgICAgICAgICAgdGhpcy5zcGFjZXIuZG9tLnN0eWxlLmNzc1RleHQgKz0gXCJ2aXNpYmlsaXR5OiBoaWRkZW47IHBvaW50ZXItZXZlbnRzOiBub25lXCI7XG4gICAgICAgIH1cbiAgICB9XG4gICAgdXBkYXRlKHVwZGF0ZSkge1xuICAgICAgICBsZXQgcHJldk1hcmtlcnMgPSB0aGlzLm1hcmtlcnM7XG4gICAgICAgIHRoaXMubWFya2VycyA9IGFzQXJyYXkodGhpcy5jb25maWcubWFya2Vycyh1cGRhdGUudmlldykpO1xuICAgICAgICBpZiAodGhpcy5zcGFjZXIgJiYgdGhpcy5jb25maWcudXBkYXRlU3BhY2VyKSB7XG4gICAgICAgICAgICBsZXQgdXBkYXRlZCA9IHRoaXMuY29uZmlnLnVwZGF0ZVNwYWNlcih0aGlzLnNwYWNlci5tYXJrZXJzWzBdLCB1cGRhdGUpO1xuICAgICAgICAgICAgaWYgKHVwZGF0ZWQgIT0gdGhpcy5zcGFjZXIubWFya2Vyc1swXSlcbiAgICAgICAgICAgICAgICB0aGlzLnNwYWNlci51cGRhdGUodXBkYXRlLnZpZXcsIDAsIDAsIFt1cGRhdGVkXSk7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IHZwID0gdXBkYXRlLnZpZXcudmlld3BvcnQ7XG4gICAgICAgIHJldHVybiAhUmFuZ2VTZXQuZXEodGhpcy5tYXJrZXJzLCBwcmV2TWFya2VycywgdnAuZnJvbSwgdnAudG8pIHx8XG4gICAgICAgICAgICAodGhpcy5jb25maWcubGluZU1hcmtlckNoYW5nZSA/IHRoaXMuY29uZmlnLmxpbmVNYXJrZXJDaGFuZ2UodXBkYXRlKSA6IGZhbHNlKTtcbiAgICB9XG4gICAgZGVzdHJveSgpIHtcbiAgICAgICAgZm9yIChsZXQgZWx0IG9mIHRoaXMuZWxlbWVudHMpXG4gICAgICAgICAgICBlbHQuZGVzdHJveSgpO1xuICAgIH1cbn1cbmNsYXNzIEd1dHRlckVsZW1lbnQge1xuICAgIGNvbnN0cnVjdG9yKHZpZXcsIGhlaWdodCwgYWJvdmUsIG1hcmtlcnMpIHtcbiAgICAgICAgdGhpcy5oZWlnaHQgPSAtMTtcbiAgICAgICAgdGhpcy5hYm92ZSA9IDA7XG4gICAgICAgIHRoaXMubWFya2VycyA9IFtdO1xuICAgICAgICB0aGlzLmRvbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgIHRoaXMuZG9tLmNsYXNzTmFtZSA9IFwiY20tZ3V0dGVyRWxlbWVudFwiO1xuICAgICAgICB0aGlzLnVwZGF0ZSh2aWV3LCBoZWlnaHQsIGFib3ZlLCBtYXJrZXJzKTtcbiAgICB9XG4gICAgdXBkYXRlKHZpZXcsIGhlaWdodCwgYWJvdmUsIG1hcmtlcnMpIHtcbiAgICAgICAgaWYgKHRoaXMuaGVpZ2h0ICE9IGhlaWdodCkge1xuICAgICAgICAgICAgdGhpcy5oZWlnaHQgPSBoZWlnaHQ7XG4gICAgICAgICAgICB0aGlzLmRvbS5zdHlsZS5oZWlnaHQgPSBoZWlnaHQgKyBcInB4XCI7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuYWJvdmUgIT0gYWJvdmUpXG4gICAgICAgICAgICB0aGlzLmRvbS5zdHlsZS5tYXJnaW5Ub3AgPSAodGhpcy5hYm92ZSA9IGFib3ZlKSA/IGFib3ZlICsgXCJweFwiIDogXCJcIjtcbiAgICAgICAgaWYgKCFzYW1lTWFya2Vycyh0aGlzLm1hcmtlcnMsIG1hcmtlcnMpKVxuICAgICAgICAgICAgdGhpcy5zZXRNYXJrZXJzKHZpZXcsIG1hcmtlcnMpO1xuICAgIH1cbiAgICBzZXRNYXJrZXJzKHZpZXcsIG1hcmtlcnMpIHtcbiAgICAgICAgbGV0IGNscyA9IFwiY20tZ3V0dGVyRWxlbWVudFwiLCBkb21Qb3MgPSB0aGlzLmRvbS5maXJzdENoaWxkO1xuICAgICAgICBmb3IgKGxldCBpTmV3ID0gMCwgaU9sZCA9IDA7Oykge1xuICAgICAgICAgICAgbGV0IHNraXBUbyA9IGlPbGQsIG1hcmtlciA9IGlOZXcgPCBtYXJrZXJzLmxlbmd0aCA/IG1hcmtlcnNbaU5ldysrXSA6IG51bGwsIG1hdGNoZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIGlmIChtYXJrZXIpIHtcbiAgICAgICAgICAgICAgICBsZXQgYyA9IG1hcmtlci5lbGVtZW50Q2xhc3M7XG4gICAgICAgICAgICAgICAgaWYgKGMpXG4gICAgICAgICAgICAgICAgICAgIGNscyArPSBcIiBcIiArIGM7XG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IGlPbGQ7IGkgPCB0aGlzLm1hcmtlcnMubGVuZ3RoOyBpKyspXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLm1hcmtlcnNbaV0uY29tcGFyZShtYXJrZXIpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBza2lwVG8gPSBpO1xuICAgICAgICAgICAgICAgICAgICAgICAgbWF0Y2hlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgc2tpcFRvID0gdGhpcy5tYXJrZXJzLmxlbmd0aDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHdoaWxlIChpT2xkIDwgc2tpcFRvKSB7XG4gICAgICAgICAgICAgICAgbGV0IG5leHQgPSB0aGlzLm1hcmtlcnNbaU9sZCsrXTtcbiAgICAgICAgICAgICAgICBpZiAobmV4dC50b0RPTSkge1xuICAgICAgICAgICAgICAgICAgICBuZXh0LmRlc3Ryb3koZG9tUG9zKTtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGFmdGVyID0gZG9tUG9zLm5leHRTaWJsaW5nO1xuICAgICAgICAgICAgICAgICAgICBkb21Qb3MucmVtb3ZlKCk7XG4gICAgICAgICAgICAgICAgICAgIGRvbVBvcyA9IGFmdGVyO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghbWFya2VyKVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgaWYgKG1hcmtlci50b0RPTSkge1xuICAgICAgICAgICAgICAgIGlmIChtYXRjaGVkKVxuICAgICAgICAgICAgICAgICAgICBkb21Qb3MgPSBkb21Qb3MubmV4dFNpYmxpbmc7XG4gICAgICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgICAgICB0aGlzLmRvbS5pbnNlcnRCZWZvcmUobWFya2VyLnRvRE9NKHZpZXcpLCBkb21Qb3MpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKG1hdGNoZWQpXG4gICAgICAgICAgICAgICAgaU9sZCsrO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuZG9tLmNsYXNzTmFtZSA9IGNscztcbiAgICAgICAgdGhpcy5tYXJrZXJzID0gbWFya2VycztcbiAgICB9XG4gICAgZGVzdHJveSgpIHtcbiAgICAgICAgdGhpcy5zZXRNYXJrZXJzKG51bGwsIFtdKTsgLy8gRmlyc3QgYXJndW1lbnQgbm90IHVzZWQgdW5sZXNzIGNyZWF0aW5nIG1hcmtlcnNcbiAgICB9XG59XG5mdW5jdGlvbiBzYW1lTWFya2VycyhhLCBiKSB7XG4gICAgaWYgKGEubGVuZ3RoICE9IGIubGVuZ3RoKVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBhLmxlbmd0aDsgaSsrKVxuICAgICAgICBpZiAoIWFbaV0uY29tcGFyZShiW2ldKSlcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICByZXR1cm4gdHJ1ZTtcbn1cbi8qKlxuRmFjZXQgdXNlZCB0byBwcm92aWRlIG1hcmtlcnMgdG8gdGhlIGxpbmUgbnVtYmVyIGd1dHRlci5cbiovXG5jb25zdCBsaW5lTnVtYmVyTWFya2VycyA9IC8qQF9fUFVSRV9fKi9GYWNldC5kZWZpbmUoKTtcbi8qKlxuRmFjZXQgdXNlZCB0byBjcmVhdGUgbWFya2VycyBpbiB0aGUgbGluZSBudW1iZXIgZ3V0dGVyIG5leHQgdG8gd2lkZ2V0cy5cbiovXG5jb25zdCBsaW5lTnVtYmVyV2lkZ2V0TWFya2VyID0gLypAX19QVVJFX18qL0ZhY2V0LmRlZmluZSgpO1xuY29uc3QgbGluZU51bWJlckNvbmZpZyA9IC8qQF9fUFVSRV9fKi9GYWNldC5kZWZpbmUoe1xuICAgIGNvbWJpbmUodmFsdWVzKSB7XG4gICAgICAgIHJldHVybiBjb21iaW5lQ29uZmlnKHZhbHVlcywgeyBmb3JtYXROdW1iZXI6IFN0cmluZywgZG9tRXZlbnRIYW5kbGVyczoge30gfSwge1xuICAgICAgICAgICAgZG9tRXZlbnRIYW5kbGVycyhhLCBiKSB7XG4gICAgICAgICAgICAgICAgbGV0IHJlc3VsdCA9IE9iamVjdC5hc3NpZ24oe30sIGEpO1xuICAgICAgICAgICAgICAgIGZvciAobGV0IGV2ZW50IGluIGIpIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGV4aXN0cyA9IHJlc3VsdFtldmVudF0sIGFkZCA9IGJbZXZlbnRdO1xuICAgICAgICAgICAgICAgICAgICByZXN1bHRbZXZlbnRdID0gZXhpc3RzID8gKHZpZXcsIGxpbmUsIGV2ZW50KSA9PiBleGlzdHModmlldywgbGluZSwgZXZlbnQpIHx8IGFkZCh2aWV3LCBsaW5lLCBldmVudCkgOiBhZGQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbn0pO1xuY2xhc3MgTnVtYmVyTWFya2VyIGV4dGVuZHMgR3V0dGVyTWFya2VyIHtcbiAgICBjb25zdHJ1Y3RvcihudW1iZXIpIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy5udW1iZXIgPSBudW1iZXI7XG4gICAgfVxuICAgIGVxKG90aGVyKSB7IHJldHVybiB0aGlzLm51bWJlciA9PSBvdGhlci5udW1iZXI7IH1cbiAgICB0b0RPTSgpIHsgcmV0dXJuIGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKHRoaXMubnVtYmVyKTsgfVxufVxuZnVuY3Rpb24gZm9ybWF0TnVtYmVyKHZpZXcsIG51bWJlcikge1xuICAgIHJldHVybiB2aWV3LnN0YXRlLmZhY2V0KGxpbmVOdW1iZXJDb25maWcpLmZvcm1hdE51bWJlcihudW1iZXIsIHZpZXcuc3RhdGUpO1xufVxuY29uc3QgbGluZU51bWJlckd1dHRlciA9IC8qQF9fUFVSRV9fKi9hY3RpdmVHdXR0ZXJzLmNvbXB1dGUoW2xpbmVOdW1iZXJDb25maWddLCBzdGF0ZSA9PiAoe1xuICAgIGNsYXNzOiBcImNtLWxpbmVOdW1iZXJzXCIsXG4gICAgcmVuZGVyRW1wdHlFbGVtZW50czogZmFsc2UsXG4gICAgbWFya2Vycyh2aWV3KSB7IHJldHVybiB2aWV3LnN0YXRlLmZhY2V0KGxpbmVOdW1iZXJNYXJrZXJzKTsgfSxcbiAgICBsaW5lTWFya2VyKHZpZXcsIGxpbmUsIG90aGVycykge1xuICAgICAgICBpZiAob3RoZXJzLnNvbWUobSA9PiBtLnRvRE9NKSlcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICByZXR1cm4gbmV3IE51bWJlck1hcmtlcihmb3JtYXROdW1iZXIodmlldywgdmlldy5zdGF0ZS5kb2MubGluZUF0KGxpbmUuZnJvbSkubnVtYmVyKSk7XG4gICAgfSxcbiAgICB3aWRnZXRNYXJrZXI6ICh2aWV3LCB3aWRnZXQsIGJsb2NrKSA9PiB7XG4gICAgICAgIGZvciAobGV0IG0gb2Ygdmlldy5zdGF0ZS5mYWNldChsaW5lTnVtYmVyV2lkZ2V0TWFya2VyKSkge1xuICAgICAgICAgICAgbGV0IHJlc3VsdCA9IG0odmlldywgd2lkZ2V0LCBibG9jayk7XG4gICAgICAgICAgICBpZiAocmVzdWx0KVxuICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfSxcbiAgICBsaW5lTWFya2VyQ2hhbmdlOiB1cGRhdGUgPT4gdXBkYXRlLnN0YXJ0U3RhdGUuZmFjZXQobGluZU51bWJlckNvbmZpZykgIT0gdXBkYXRlLnN0YXRlLmZhY2V0KGxpbmVOdW1iZXJDb25maWcpLFxuICAgIGluaXRpYWxTcGFjZXIodmlldykge1xuICAgICAgICByZXR1cm4gbmV3IE51bWJlck1hcmtlcihmb3JtYXROdW1iZXIodmlldywgbWF4TGluZU51bWJlcih2aWV3LnN0YXRlLmRvYy5saW5lcykpKTtcbiAgICB9LFxuICAgIHVwZGF0ZVNwYWNlcihzcGFjZXIsIHVwZGF0ZSkge1xuICAgICAgICBsZXQgbWF4ID0gZm9ybWF0TnVtYmVyKHVwZGF0ZS52aWV3LCBtYXhMaW5lTnVtYmVyKHVwZGF0ZS52aWV3LnN0YXRlLmRvYy5saW5lcykpO1xuICAgICAgICByZXR1cm4gbWF4ID09IHNwYWNlci5udW1iZXIgPyBzcGFjZXIgOiBuZXcgTnVtYmVyTWFya2VyKG1heCk7XG4gICAgfSxcbiAgICBkb21FdmVudEhhbmRsZXJzOiBzdGF0ZS5mYWNldChsaW5lTnVtYmVyQ29uZmlnKS5kb21FdmVudEhhbmRsZXJzLFxuICAgIHNpZGU6IFwiYmVmb3JlXCJcbn0pKTtcbi8qKlxuQ3JlYXRlIGEgbGluZSBudW1iZXIgZ3V0dGVyIGV4dGVuc2lvbi5cbiovXG5mdW5jdGlvbiBsaW5lTnVtYmVycyhjb25maWcgPSB7fSkge1xuICAgIHJldHVybiBbXG4gICAgICAgIGxpbmVOdW1iZXJDb25maWcub2YoY29uZmlnKSxcbiAgICAgICAgZ3V0dGVycygpLFxuICAgICAgICBsaW5lTnVtYmVyR3V0dGVyXG4gICAgXTtcbn1cbmZ1bmN0aW9uIG1heExpbmVOdW1iZXIobGluZXMpIHtcbiAgICBsZXQgbGFzdCA9IDk7XG4gICAgd2hpbGUgKGxhc3QgPCBsaW5lcylcbiAgICAgICAgbGFzdCA9IGxhc3QgKiAxMCArIDk7XG4gICAgcmV0dXJuIGxhc3Q7XG59XG5jb25zdCBhY3RpdmVMaW5lR3V0dGVyTWFya2VyID0gLypAX19QVVJFX18qL25ldyBjbGFzcyBleHRlbmRzIEd1dHRlck1hcmtlciB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKC4uLmFyZ3VtZW50cyk7XG4gICAgICAgIHRoaXMuZWxlbWVudENsYXNzID0gXCJjbS1hY3RpdmVMaW5lR3V0dGVyXCI7XG4gICAgfVxufTtcbmNvbnN0IGFjdGl2ZUxpbmVHdXR0ZXJIaWdobGlnaHRlciA9IC8qQF9fUFVSRV9fKi9ndXR0ZXJMaW5lQ2xhc3MuY29tcHV0ZShbXCJzZWxlY3Rpb25cIl0sIHN0YXRlID0+IHtcbiAgICBsZXQgbWFya3MgPSBbXSwgbGFzdCA9IC0xO1xuICAgIGZvciAobGV0IHJhbmdlIG9mIHN0YXRlLnNlbGVjdGlvbi5yYW5nZXMpIHtcbiAgICAgICAgbGV0IGxpbmVQb3MgPSBzdGF0ZS5kb2MubGluZUF0KHJhbmdlLmhlYWQpLmZyb207XG4gICAgICAgIGlmIChsaW5lUG9zID4gbGFzdCkge1xuICAgICAgICAgICAgbGFzdCA9IGxpbmVQb3M7XG4gICAgICAgICAgICBtYXJrcy5wdXNoKGFjdGl2ZUxpbmVHdXR0ZXJNYXJrZXIucmFuZ2UobGluZVBvcykpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBSYW5nZVNldC5vZihtYXJrcyk7XG59KTtcbi8qKlxuUmV0dXJucyBhbiBleHRlbnNpb24gdGhhdCBhZGRzIGEgYGNtLWFjdGl2ZUxpbmVHdXR0ZXJgIGNsYXNzIHRvXG5hbGwgZ3V0dGVyIGVsZW1lbnRzIG9uIHRoZSBbYWN0aXZlXG5saW5lXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI3ZpZXcuaGlnaGxpZ2h0QWN0aXZlTGluZSkuXG4qL1xuZnVuY3Rpb24gaGlnaGxpZ2h0QWN0aXZlTGluZUd1dHRlcigpIHtcbiAgICByZXR1cm4gYWN0aXZlTGluZUd1dHRlckhpZ2hsaWdodGVyO1xufVxuXG5mdW5jdGlvbiBtYXRjaGVyKGRlY29yYXRvcikge1xuICAgIHJldHVybiBWaWV3UGx1Z2luLmRlZmluZSh2aWV3ID0+ICh7XG4gICAgICAgIGRlY29yYXRpb25zOiBkZWNvcmF0b3IuY3JlYXRlRGVjbyh2aWV3KSxcbiAgICAgICAgdXBkYXRlKHUpIHtcbiAgICAgICAgICAgIHRoaXMuZGVjb3JhdGlvbnMgPSBkZWNvcmF0b3IudXBkYXRlRGVjbyh1LCB0aGlzLmRlY29yYXRpb25zKTtcbiAgICAgICAgfSxcbiAgICB9KSwge1xuICAgICAgICBkZWNvcmF0aW9uczogdiA9PiB2LmRlY29yYXRpb25zXG4gICAgfSk7XG59XG5jb25zdCB0YWJEZWNvID0gLypAX19QVVJFX18qL0RlY29yYXRpb24ubWFyayh7IGNsYXNzOiBcImNtLWhpZ2hsaWdodFRhYlwiIH0pO1xuY29uc3Qgc3BhY2VEZWNvID0gLypAX19QVVJFX18qL0RlY29yYXRpb24ubWFyayh7IGNsYXNzOiBcImNtLWhpZ2hsaWdodFNwYWNlXCIgfSk7XG5jb25zdCB3aGl0ZXNwYWNlSGlnaGxpZ2h0ZXIgPSAvKkBfX1BVUkVfXyovbWF0Y2hlcigvKkBfX1BVUkVfXyovbmV3IE1hdGNoRGVjb3JhdG9yKHtcbiAgICByZWdleHA6IC9cXHR8IC9nLFxuICAgIGRlY29yYXRpb246IG1hdGNoID0+IG1hdGNoWzBdID09IFwiXFx0XCIgPyB0YWJEZWNvIDogc3BhY2VEZWNvLFxuICAgIGJvdW5kYXJ5OiAvXFxTLyxcbn0pKTtcbi8qKlxuUmV0dXJucyBhbiBleHRlbnNpb24gdGhhdCBoaWdobGlnaHRzIHdoaXRlc3BhY2UsIGFkZGluZyBhXG5gY20taGlnaGxpZ2h0U3BhY2VgIGNsYXNzIHRvIHN0cmV0Y2hlcyBvZiBzcGFjZXMsIGFuZCBhXG5gY20taGlnaGxpZ2h0VGFiYCBjbGFzcyB0byBpbmRpdmlkdWFsIHRhYiBjaGFyYWN0ZXJzLiBCeSBkZWZhdWx0LFxudGhlIGZvcm1lciBhcmUgc2hvd24gYXMgZmFpbnQgZG90cywgYW5kIHRoZSBsYXR0ZXIgYXMgYXJyb3dzLlxuKi9cbmZ1bmN0aW9uIGhpZ2hsaWdodFdoaXRlc3BhY2UoKSB7XG4gICAgcmV0dXJuIHdoaXRlc3BhY2VIaWdobGlnaHRlcjtcbn1cbmNvbnN0IHRyYWlsaW5nSGlnaGxpZ2h0ZXIgPSAvKkBfX1BVUkVfXyovbWF0Y2hlcigvKkBfX1BVUkVfXyovbmV3IE1hdGNoRGVjb3JhdG9yKHtcbiAgICByZWdleHA6IC9cXHMrJC9nLFxuICAgIGRlY29yYXRpb246IC8qQF9fUFVSRV9fKi9EZWNvcmF0aW9uLm1hcmsoeyBjbGFzczogXCJjbS10cmFpbGluZ1NwYWNlXCIgfSlcbn0pKTtcbi8qKlxuUmV0dXJucyBhbiBleHRlbnNpb24gdGhhdCBhZGRzIGEgYGNtLXRyYWlsaW5nU3BhY2VgIGNsYXNzIHRvIGFsbFxudHJhaWxpbmcgd2hpdGVzcGFjZS5cbiovXG5mdW5jdGlvbiBoaWdobGlnaHRUcmFpbGluZ1doaXRlc3BhY2UoKSB7XG4gICAgcmV0dXJuIHRyYWlsaW5nSGlnaGxpZ2h0ZXI7XG59XG5cbi8qKlxuQGludGVybmFsXG4qL1xuY29uc3QgX190ZXN0ID0geyBIZWlnaHRNYXAsIEhlaWdodE9yYWNsZSwgTWVhc3VyZWRIZWlnaHRzLCBRdWVyeVR5cGUsIENoYW5nZWRSYW5nZSwgY29tcHV0ZU9yZGVyLFxuICAgIG1vdmVWaXN1YWxseSwgY2xlYXJIZWlnaHRDaGFuZ2VGbGFnLCBnZXRIZWlnaHRDaGFuZ2VGbGFnOiAoKSA9PiBoZWlnaHRDaGFuZ2VGbGFnIH07XG5cbmV4cG9ydCB7IEJpZGlTcGFuLCBCbG9ja0luZm8sIEJsb2NrVHlwZSwgQmxvY2tXcmFwcGVyLCBEZWNvcmF0aW9uLCBEaXJlY3Rpb24sIEVkaXRvclZpZXcsIEd1dHRlck1hcmtlciwgTWF0Y2hEZWNvcmF0b3IsIFJlY3RhbmdsZU1hcmtlciwgVmlld1BsdWdpbiwgVmlld1VwZGF0ZSwgV2lkZ2V0VHlwZSwgX190ZXN0LCBjbG9zZUhvdmVyVG9vbHRpcHMsIGNyb3NzaGFpckN1cnNvciwgZHJhd1NlbGVjdGlvbiwgZHJvcEN1cnNvciwgZ2V0RGlhbG9nLCBnZXREcmF3U2VsZWN0aW9uQ29uZmlnLCBnZXRQYW5lbCwgZ2V0VG9vbHRpcCwgZ3V0dGVyLCBndXR0ZXJMaW5lQ2xhc3MsIGd1dHRlcldpZGdldENsYXNzLCBndXR0ZXJzLCBoYXNIb3ZlclRvb2x0aXBzLCBoaWdobGlnaHRBY3RpdmVMaW5lLCBoaWdobGlnaHRBY3RpdmVMaW5lR3V0dGVyLCBoaWdobGlnaHRTcGVjaWFsQ2hhcnMsIGhpZ2hsaWdodFRyYWlsaW5nV2hpdGVzcGFjZSwgaGlnaGxpZ2h0V2hpdGVzcGFjZSwgaG92ZXJUb29sdGlwLCBrZXltYXAsIGxheWVyLCBsaW5lTnVtYmVyTWFya2VycywgbGluZU51bWJlcldpZGdldE1hcmtlciwgbGluZU51bWJlcnMsIGxvZ0V4Y2VwdGlvbiwgcGFuZWxzLCBwbGFjZWhvbGRlciwgcmVjdGFuZ3VsYXJTZWxlY3Rpb24sIHJlcG9zaXRpb25Ub29sdGlwcywgcnVuU2NvcGVIYW5kbGVycywgc2Nyb2xsUGFzdEVuZCwgc2hvd0RpYWxvZywgc2hvd1BhbmVsLCBzaG93VG9vbHRpcCwgdG9vbHRpcHMgfTtcbiIsCiAgICAiLyoqXG5UaGUgZGVmYXVsdCBtYXhpbXVtIGxlbmd0aCBvZiBhIGBUcmVlQnVmZmVyYCBub2RlLlxuKi9cbmNvbnN0IERlZmF1bHRCdWZmZXJMZW5ndGggPSAxMDI0O1xubGV0IG5leHRQcm9wSUQgPSAwO1xuY2xhc3MgUmFuZ2Uge1xuICAgIGNvbnN0cnVjdG9yKGZyb20sIHRvKSB7XG4gICAgICAgIHRoaXMuZnJvbSA9IGZyb207XG4gICAgICAgIHRoaXMudG8gPSB0bztcbiAgICB9XG59XG4vKipcbkVhY2ggW25vZGUgdHlwZV0oI2NvbW1vbi5Ob2RlVHlwZSkgb3IgW2luZGl2aWR1YWwgdHJlZV0oI2NvbW1vbi5UcmVlKVxuY2FuIGhhdmUgbWV0YWRhdGEgYXNzb2NpYXRlZCB3aXRoIGl0IGluIHByb3BzLiBJbnN0YW5jZXMgb2YgdGhpc1xuY2xhc3MgcmVwcmVzZW50IHByb3AgbmFtZXMuXG4qL1xuY2xhc3MgTm9kZVByb3Age1xuICAgIC8qKlxuICAgIENyZWF0ZSBhIG5ldyBub2RlIHByb3AgdHlwZS5cbiAgICAqL1xuICAgIGNvbnN0cnVjdG9yKGNvbmZpZyA9IHt9KSB7XG4gICAgICAgIHRoaXMuaWQgPSBuZXh0UHJvcElEKys7XG4gICAgICAgIHRoaXMucGVyTm9kZSA9ICEhY29uZmlnLnBlck5vZGU7XG4gICAgICAgIHRoaXMuZGVzZXJpYWxpemUgPSBjb25maWcuZGVzZXJpYWxpemUgfHwgKCgpID0+IHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlRoaXMgbm9kZSB0eXBlIGRvZXNuJ3QgZGVmaW5lIGEgZGVzZXJpYWxpemUgZnVuY3Rpb25cIik7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmNvbWJpbmUgPSBjb25maWcuY29tYmluZSB8fCBudWxsO1xuICAgIH1cbiAgICAvKipcbiAgICBUaGlzIGlzIG1lYW50IHRvIGJlIHVzZWQgd2l0aFxuICAgIFtgTm9kZVNldC5leHRlbmRgXSgjY29tbW9uLk5vZGVTZXQuZXh0ZW5kKSBvclxuICAgIFtgTFJQYXJzZXIuY29uZmlndXJlYF0oI2xyLlBhcnNlckNvbmZpZy5wcm9wcykgdG8gY29tcHV0ZVxuICAgIHByb3AgdmFsdWVzIGZvciBlYWNoIG5vZGUgdHlwZSBpbiB0aGUgc2V0LiBUYWtlcyBhIFttYXRjaFxuICAgIG9iamVjdF0oI2NvbW1vbi5Ob2RlVHlwZV5tYXRjaCkgb3IgZnVuY3Rpb24gdGhhdCByZXR1cm5zIHVuZGVmaW5lZFxuICAgIGlmIHRoZSBub2RlIHR5cGUgZG9lc24ndCBnZXQgdGhpcyBwcm9wLCBhbmQgdGhlIHByb3AncyB2YWx1ZSBpZlxuICAgIGl0IGRvZXMuXG4gICAgKi9cbiAgICBhZGQobWF0Y2gpIHtcbiAgICAgICAgaWYgKHRoaXMucGVyTm9kZSlcbiAgICAgICAgICAgIHRocm93IG5ldyBSYW5nZUVycm9yKFwiQ2FuJ3QgYWRkIHBlci1ub2RlIHByb3BzIHRvIG5vZGUgdHlwZXNcIik7XG4gICAgICAgIGlmICh0eXBlb2YgbWF0Y2ggIT0gXCJmdW5jdGlvblwiKVxuICAgICAgICAgICAgbWF0Y2ggPSBOb2RlVHlwZS5tYXRjaChtYXRjaCk7XG4gICAgICAgIHJldHVybiAodHlwZSkgPT4ge1xuICAgICAgICAgICAgbGV0IHJlc3VsdCA9IG1hdGNoKHR5cGUpO1xuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdCA9PT0gdW5kZWZpbmVkID8gbnVsbCA6IFt0aGlzLCByZXN1bHRdO1xuICAgICAgICB9O1xuICAgIH1cbn1cbi8qKlxuUHJvcCB0aGF0IGlzIHVzZWQgdG8gZGVzY3JpYmUgbWF0Y2hpbmcgZGVsaW1pdGVycy4gRm9yIG9wZW5pbmdcbmRlbGltaXRlcnMsIHRoaXMgaG9sZHMgYW4gYXJyYXkgb2Ygbm9kZSBuYW1lcyAod3JpdHRlbiBhcyBhXG5zcGFjZS1zZXBhcmF0ZWQgc3RyaW5nIHdoZW4gZGVjbGFyaW5nIHRoaXMgcHJvcCBpbiBhIGdyYW1tYXIpXG5mb3IgdGhlIG5vZGUgdHlwZXMgb2YgY2xvc2luZyBkZWxpbWl0ZXJzIHRoYXQgbWF0Y2ggaXQuXG4qL1xuTm9kZVByb3AuY2xvc2VkQnkgPSBuZXcgTm9kZVByb3AoeyBkZXNlcmlhbGl6ZTogc3RyID0+IHN0ci5zcGxpdChcIiBcIikgfSk7XG4vKipcblRoZSBpbnZlcnNlIG9mIFtgY2xvc2VkQnlgXSgjY29tbW9uLk5vZGVQcm9wXmNsb3NlZEJ5KS4gVGhpcyBpc1xuYXR0YWNoZWQgdG8gY2xvc2luZyBkZWxpbWl0ZXJzLCBob2xkaW5nIGFuIGFycmF5IG9mIG5vZGUgbmFtZXNcbm9mIHR5cGVzIG9mIG1hdGNoaW5nIG9wZW5pbmcgZGVsaW1pdGVycy5cbiovXG5Ob2RlUHJvcC5vcGVuZWRCeSA9IG5ldyBOb2RlUHJvcCh7IGRlc2VyaWFsaXplOiBzdHIgPT4gc3RyLnNwbGl0KFwiIFwiKSB9KTtcbi8qKlxuVXNlZCB0byBhc3NpZ24gbm9kZSB0eXBlcyB0byBncm91cHMgKGZvciBleGFtcGxlLCBhbGwgbm9kZVxudHlwZXMgdGhhdCByZXByZXNlbnQgYW4gZXhwcmVzc2lvbiBjb3VsZCBiZSB0YWdnZWQgd2l0aCBhblxuYFwiRXhwcmVzc2lvblwiYCBncm91cCkuXG4qL1xuTm9kZVByb3AuZ3JvdXAgPSBuZXcgTm9kZVByb3AoeyBkZXNlcmlhbGl6ZTogc3RyID0+IHN0ci5zcGxpdChcIiBcIikgfSk7XG4vKipcbkF0dGFjaGVkIHRvIG5vZGVzIHRvIGluZGljYXRlIHRoZXNlIHNob3VsZCBiZVxuW2Rpc3BsYXllZF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC9kb2NzL3JlZi8jbGFuZ3VhZ2Uuc3ludGF4VHJlZSlcbmluIGEgYmlkaXJlY3Rpb25hbCB0ZXh0IGlzb2xhdGUsIHNvIHRoYXQgZGlyZWN0aW9uLW5ldXRyYWxcbmNoYXJhY3RlcnMgb24gdGhlaXIgc2lkZXMgZG9uJ3QgaW5jb3JyZWN0bHkgZ2V0IGFzc29jaWF0ZWQgd2l0aFxuc3Vycm91bmRpbmcgdGV4dC4gWW91J2xsIGdlbmVyYWxseSB3YW50IHRvIHNldCB0aGlzIGZvciBub2Rlc1xudGhhdCBjb250YWluIGFyYml0cmFyeSB0ZXh0LCBsaWtlIHN0cmluZ3MgYW5kIGNvbW1lbnRzLCBhbmQgZm9yXG5ub2RlcyB0aGF0IGFwcGVhciBfaW5zaWRlXyBhcmJpdHJhcnkgdGV4dCwgbGlrZSBIVE1MIHRhZ3MuIFdoZW5cbm5vdCBnaXZlbiBhIHZhbHVlLCBpbiBhIGdyYW1tYXIgZGVjbGFyYXRpb24sIGRlZmF1bHRzIHRvXG5gXCJhdXRvXCJgLlxuKi9cbk5vZGVQcm9wLmlzb2xhdGUgPSBuZXcgTm9kZVByb3AoeyBkZXNlcmlhbGl6ZTogdmFsdWUgPT4ge1xuICAgICAgICBpZiAodmFsdWUgJiYgdmFsdWUgIT0gXCJydGxcIiAmJiB2YWx1ZSAhPSBcImx0clwiICYmIHZhbHVlICE9IFwiYXV0b1wiKVxuICAgICAgICAgICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoXCJJbnZhbGlkIHZhbHVlIGZvciBpc29sYXRlOiBcIiArIHZhbHVlKTtcbiAgICAgICAgcmV0dXJuIHZhbHVlIHx8IFwiYXV0b1wiO1xuICAgIH0gfSk7XG4vKipcblRoZSBoYXNoIG9mIHRoZSBbY29udGV4dF0oI2xyLkNvbnRleHRUcmFja2VyLmNvbnN0cnVjdG9yKVxudGhhdCB0aGUgbm9kZSB3YXMgcGFyc2VkIGluLCBpZiBhbnkuIFVzZWQgdG8gbGltaXQgcmV1c2Ugb2ZcbmNvbnRleHR1YWwgbm9kZXMuXG4qL1xuTm9kZVByb3AuY29udGV4dEhhc2ggPSBuZXcgTm9kZVByb3AoeyBwZXJOb2RlOiB0cnVlIH0pO1xuLyoqXG5UaGUgZGlzdGFuY2UgYmV5b25kIHRoZSBlbmQgb2YgdGhlIG5vZGUgdGhhdCB0aGUgdG9rZW5pemVyXG5sb29rZWQgYWhlYWQgZm9yIGFueSBvZiB0aGUgdG9rZW5zIGluc2lkZSB0aGUgbm9kZS4gKFRoZSBMUlxucGFyc2VyIG9ubHkgc3RvcmVzIHRoaXMgd2hlbiBpdCBpcyBsYXJnZXIgdGhhbiAyNSwgZm9yXG5lZmZpY2llbmN5IHJlYXNvbnMuKVxuKi9cbk5vZGVQcm9wLmxvb2tBaGVhZCA9IG5ldyBOb2RlUHJvcCh7IHBlck5vZGU6IHRydWUgfSk7XG4vKipcblRoaXMgcGVyLW5vZGUgcHJvcCBpcyB1c2VkIHRvIHJlcGxhY2UgYSBnaXZlbiBub2RlLCBvciBwYXJ0IG9mIGFcbm5vZGUsIHdpdGggYW5vdGhlciB0cmVlLiBUaGlzIGlzIHVzZWZ1bCB0byBpbmNsdWRlIHRyZWVzIGZyb21cbmRpZmZlcmVudCBsYW5ndWFnZXMgaW4gbWl4ZWQtbGFuZ3VhZ2UgcGFyc2Vycy5cbiovXG5Ob2RlUHJvcC5tb3VudGVkID0gbmV3IE5vZGVQcm9wKHsgcGVyTm9kZTogdHJ1ZSB9KTtcbi8qKlxuQSBtb3VudGVkIHRyZWUsIHdoaWNoIGNhbiBiZSBbc3RvcmVkXSgjY29tbW9uLk5vZGVQcm9wXm1vdW50ZWQpIG9uXG5hIHRyZWUgbm9kZSB0byBpbmRpY2F0ZSB0aGF0IHBhcnRzIG9mIGl0cyBjb250ZW50IGFyZVxucmVwcmVzZW50ZWQgYnkgYW5vdGhlciB0cmVlLlxuKi9cbmNsYXNzIE1vdW50ZWRUcmVlIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAvKipcbiAgICBUaGUgaW5uZXIgdHJlZS5cbiAgICAqL1xuICAgIHRyZWUsIFxuICAgIC8qKlxuICAgIElmIHRoaXMgaXMgbnVsbCwgdGhpcyB0cmVlIHJlcGxhY2VzIHRoZSBlbnRpcmUgbm9kZSAoaXQgd2lsbFxuICAgIGJlIGluY2x1ZGVkIGluIHRoZSByZWd1bGFyIGl0ZXJhdGlvbiBpbnN0ZWFkIG9mIGl0cyBob3N0XG4gICAgbm9kZSkuIElmIG5vdCwgb25seSB0aGUgZ2l2ZW4gcmFuZ2VzIGFyZSBjb25zaWRlcmVkIHRvIGJlXG4gICAgY292ZXJlZCBieSB0aGlzIHRyZWUuIFRoaXMgaXMgdXNlZCBmb3IgdHJlZXMgdGhhdCBhcmUgbWl4ZWQgaW5cbiAgICBhIHdheSB0aGF0IGlzbid0IHN0cmljdGx5IGhpZXJhcmNoaWNhbC4gU3VjaCBtb3VudGVkIHRyZWVzIGFyZVxuICAgIG9ubHkgZW50ZXJlZCBieSBbYHJlc29sdmVJbm5lcmBdKCNjb21tb24uVHJlZS5yZXNvbHZlSW5uZXIpXG4gICAgYW5kIFtgZW50ZXJgXSgjY29tbW9uLlN5bnRheE5vZGUuZW50ZXIpLlxuICAgICovXG4gICAgb3ZlcmxheSwgXG4gICAgLyoqXG4gICAgVGhlIHBhcnNlciB1c2VkIHRvIGNyZWF0ZSB0aGlzIHN1YnRyZWUuXG4gICAgKi9cbiAgICBwYXJzZXIsIFxuICAgIC8qKlxuICAgIFtJbmRpY2F0ZXNdKCNjb21tb24uSXRlck1vZGUuRW50ZXJCcmFja2V0ZWQpIHRoYXQgdGhlIG5lc3RlZFxuICAgIGNvbnRlbnQgaXMgZGVsaW5lYXRlZCB3aXRoIHNvbWUga2luZFxuICAgIG9mIGJyYWNrZXQgdG9rZW4uXG4gICAgKi9cbiAgICBicmFja2V0ZWQgPSBmYWxzZSkge1xuICAgICAgICB0aGlzLnRyZWUgPSB0cmVlO1xuICAgICAgICB0aGlzLm92ZXJsYXkgPSBvdmVybGF5O1xuICAgICAgICB0aGlzLnBhcnNlciA9IHBhcnNlcjtcbiAgICAgICAgdGhpcy5icmFja2V0ZWQgPSBicmFja2V0ZWQ7XG4gICAgfVxuICAgIC8qKlxuICAgIEBpbnRlcm5hbFxuICAgICovXG4gICAgc3RhdGljIGdldCh0cmVlKSB7XG4gICAgICAgIHJldHVybiB0cmVlICYmIHRyZWUucHJvcHMgJiYgdHJlZS5wcm9wc1tOb2RlUHJvcC5tb3VudGVkLmlkXTtcbiAgICB9XG59XG5jb25zdCBub1Byb3BzID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbi8qKlxuRWFjaCBub2RlIGluIGEgc3ludGF4IHRyZWUgaGFzIGEgbm9kZSB0eXBlIGFzc29jaWF0ZWQgd2l0aCBpdC5cbiovXG5jbGFzcyBOb2RlVHlwZSB7XG4gICAgLyoqXG4gICAgQGludGVybmFsXG4gICAgKi9cbiAgICBjb25zdHJ1Y3RvcihcbiAgICAvKipcbiAgICBUaGUgbmFtZSBvZiB0aGUgbm9kZSB0eXBlLiBOb3QgbmVjZXNzYXJpbHkgdW5pcXVlLCBidXQgaWYgdGhlXG4gICAgZ3JhbW1hciB3YXMgd3JpdHRlbiBwcm9wZXJseSwgZGlmZmVyZW50IG5vZGUgdHlwZXMgd2l0aCB0aGVcbiAgICBzYW1lIG5hbWUgd2l0aGluIGEgbm9kZSBzZXQgc2hvdWxkIHBsYXkgdGhlIHNhbWUgc2VtYW50aWNcbiAgICByb2xlLlxuICAgICovXG4gICAgbmFtZSwgXG4gICAgLyoqXG4gICAgQGludGVybmFsXG4gICAgKi9cbiAgICBwcm9wcywgXG4gICAgLyoqXG4gICAgVGhlIGlkIG9mIHRoaXMgbm9kZSBpbiBpdHMgc2V0LiBDb3JyZXNwb25kcyB0byB0aGUgdGVybSBpZHNcbiAgICB1c2VkIGluIHRoZSBwYXJzZXIuXG4gICAgKi9cbiAgICBpZCwgXG4gICAgLyoqXG4gICAgQGludGVybmFsXG4gICAgKi9cbiAgICBmbGFncyA9IDApIHtcbiAgICAgICAgdGhpcy5uYW1lID0gbmFtZTtcbiAgICAgICAgdGhpcy5wcm9wcyA9IHByb3BzO1xuICAgICAgICB0aGlzLmlkID0gaWQ7XG4gICAgICAgIHRoaXMuZmxhZ3MgPSBmbGFncztcbiAgICB9XG4gICAgLyoqXG4gICAgRGVmaW5lIGEgbm9kZSB0eXBlLlxuICAgICovXG4gICAgc3RhdGljIGRlZmluZShzcGVjKSB7XG4gICAgICAgIGxldCBwcm9wcyA9IHNwZWMucHJvcHMgJiYgc3BlYy5wcm9wcy5sZW5ndGggPyBPYmplY3QuY3JlYXRlKG51bGwpIDogbm9Qcm9wcztcbiAgICAgICAgbGV0IGZsYWdzID0gKHNwZWMudG9wID8gMSAvKiBOb2RlRmxhZy5Ub3AgKi8gOiAwKSB8IChzcGVjLnNraXBwZWQgPyAyIC8qIE5vZGVGbGFnLlNraXBwZWQgKi8gOiAwKSB8XG4gICAgICAgICAgICAoc3BlYy5lcnJvciA/IDQgLyogTm9kZUZsYWcuRXJyb3IgKi8gOiAwKSB8IChzcGVjLm5hbWUgPT0gbnVsbCA/IDggLyogTm9kZUZsYWcuQW5vbnltb3VzICovIDogMCk7XG4gICAgICAgIGxldCB0eXBlID0gbmV3IE5vZGVUeXBlKHNwZWMubmFtZSB8fCBcIlwiLCBwcm9wcywgc3BlYy5pZCwgZmxhZ3MpO1xuICAgICAgICBpZiAoc3BlYy5wcm9wcylcbiAgICAgICAgICAgIGZvciAobGV0IHNyYyBvZiBzcGVjLnByb3BzKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFBcnJheS5pc0FycmF5KHNyYykpXG4gICAgICAgICAgICAgICAgICAgIHNyYyA9IHNyYyh0eXBlKTtcbiAgICAgICAgICAgICAgICBpZiAoc3JjKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChzcmNbMF0ucGVyTm9kZSlcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBSYW5nZUVycm9yKFwiQ2FuJ3Qgc3RvcmUgYSBwZXItbm9kZSBwcm9wIG9uIGEgbm9kZSB0eXBlXCIpO1xuICAgICAgICAgICAgICAgICAgICBwcm9wc1tzcmNbMF0uaWRdID0gc3JjWzFdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHR5cGU7XG4gICAgfVxuICAgIC8qKlxuICAgIFJldHJpZXZlcyBhIG5vZGUgcHJvcCBmb3IgdGhpcyB0eXBlLiBXaWxsIHJldHVybiBgdW5kZWZpbmVkYCBpZlxuICAgIHRoZSBwcm9wIGlzbid0IHByZXNlbnQgb24gdGhpcyBub2RlLlxuICAgICovXG4gICAgcHJvcChwcm9wKSB7IHJldHVybiB0aGlzLnByb3BzW3Byb3AuaWRdOyB9XG4gICAgLyoqXG4gICAgVHJ1ZSB3aGVuIHRoaXMgaXMgdGhlIHRvcCBub2RlIG9mIGEgZ3JhbW1hci5cbiAgICAqL1xuICAgIGdldCBpc1RvcCgpIHsgcmV0dXJuICh0aGlzLmZsYWdzICYgMSAvKiBOb2RlRmxhZy5Ub3AgKi8pID4gMDsgfVxuICAgIC8qKlxuICAgIFRydWUgd2hlbiB0aGlzIG5vZGUgaXMgcHJvZHVjZWQgYnkgYSBza2lwIHJ1bGUuXG4gICAgKi9cbiAgICBnZXQgaXNTa2lwcGVkKCkgeyByZXR1cm4gKHRoaXMuZmxhZ3MgJiAyIC8qIE5vZGVGbGFnLlNraXBwZWQgKi8pID4gMDsgfVxuICAgIC8qKlxuICAgIEluZGljYXRlcyB3aGV0aGVyIHRoaXMgaXMgYW4gZXJyb3Igbm9kZS5cbiAgICAqL1xuICAgIGdldCBpc0Vycm9yKCkgeyByZXR1cm4gKHRoaXMuZmxhZ3MgJiA0IC8qIE5vZGVGbGFnLkVycm9yICovKSA+IDA7IH1cbiAgICAvKipcbiAgICBXaGVuIHRydWUsIHRoaXMgbm9kZSB0eXBlIGRvZXNuJ3QgY29ycmVzcG9uZCB0byBhIHVzZXItZGVjbGFyZWRcbiAgICBuYW1lZCBub2RlLCBmb3IgZXhhbXBsZSBiZWNhdXNlIGl0IGlzIHVzZWQgdG8gY2FjaGUgcmVwZXRpdGlvbi5cbiAgICAqL1xuICAgIGdldCBpc0Fub255bW91cygpIHsgcmV0dXJuICh0aGlzLmZsYWdzICYgOCAvKiBOb2RlRmxhZy5Bbm9ueW1vdXMgKi8pID4gMDsgfVxuICAgIC8qKlxuICAgIFJldHVybnMgdHJ1ZSB3aGVuIHRoaXMgbm9kZSdzIG5hbWUgb3Igb25lIG9mIGl0c1xuICAgIFtncm91cHNdKCNjb21tb24uTm9kZVByb3BeZ3JvdXApIG1hdGNoZXMgdGhlIGdpdmVuIHN0cmluZy5cbiAgICAqL1xuICAgIGlzKG5hbWUpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBuYW1lID09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5uYW1lID09IG5hbWUpXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICBsZXQgZ3JvdXAgPSB0aGlzLnByb3AoTm9kZVByb3AuZ3JvdXApO1xuICAgICAgICAgICAgcmV0dXJuIGdyb3VwID8gZ3JvdXAuaW5kZXhPZihuYW1lKSA+IC0xIDogZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuaWQgPT0gbmFtZTtcbiAgICB9XG4gICAgLyoqXG4gICAgQ3JlYXRlIGEgZnVuY3Rpb24gZnJvbSBub2RlIHR5cGVzIHRvIGFyYml0cmFyeSB2YWx1ZXMgYnlcbiAgICBzcGVjaWZ5aW5nIGFuIG9iamVjdCB3aG9zZSBwcm9wZXJ0eSBuYW1lcyBhcmUgbm9kZSBvclxuICAgIFtncm91cF0oI2NvbW1vbi5Ob2RlUHJvcF5ncm91cCkgbmFtZXMuIE9mdGVuIHVzZWZ1bCB3aXRoXG4gICAgW2BOb2RlUHJvcC5hZGRgXSgjY29tbW9uLk5vZGVQcm9wLmFkZCkuIFlvdSBjYW4gcHV0IG11bHRpcGxlXG4gICAgbmFtZXMsIHNlcGFyYXRlZCBieSBzcGFjZXMsIGluIGEgc2luZ2xlIHByb3BlcnR5IG5hbWUgdG8gbWFwXG4gICAgbXVsdGlwbGUgbm9kZSBuYW1lcyB0byBhIHNpbmdsZSB2YWx1ZS5cbiAgICAqL1xuICAgIHN0YXRpYyBtYXRjaChtYXApIHtcbiAgICAgICAgbGV0IGRpcmVjdCA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gICAgICAgIGZvciAobGV0IHByb3AgaW4gbWFwKVxuICAgICAgICAgICAgZm9yIChsZXQgbmFtZSBvZiBwcm9wLnNwbGl0KFwiIFwiKSlcbiAgICAgICAgICAgICAgICBkaXJlY3RbbmFtZV0gPSBtYXBbcHJvcF07XG4gICAgICAgIHJldHVybiAobm9kZSkgPT4ge1xuICAgICAgICAgICAgZm9yIChsZXQgZ3JvdXBzID0gbm9kZS5wcm9wKE5vZGVQcm9wLmdyb3VwKSwgaSA9IC0xOyBpIDwgKGdyb3VwcyA/IGdyb3Vwcy5sZW5ndGggOiAwKTsgaSsrKSB7XG4gICAgICAgICAgICAgICAgbGV0IGZvdW5kID0gZGlyZWN0W2kgPCAwID8gbm9kZS5uYW1lIDogZ3JvdXBzW2ldXTtcbiAgICAgICAgICAgICAgICBpZiAoZm91bmQpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmb3VuZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICB9XG59XG4vKipcbkFuIGVtcHR5IGR1bW15IG5vZGUgdHlwZSB0byB1c2Ugd2hlbiBubyBhY3R1YWwgdHlwZSBpcyBhdmFpbGFibGUuXG4qL1xuTm9kZVR5cGUubm9uZSA9IG5ldyBOb2RlVHlwZShcIlwiLCBPYmplY3QuY3JlYXRlKG51bGwpLCAwLCA4IC8qIE5vZGVGbGFnLkFub255bW91cyAqLyk7XG4vKipcbkEgbm9kZSBzZXQgaG9sZHMgYSBjb2xsZWN0aW9uIG9mIG5vZGUgdHlwZXMuIEl0IGlzIHVzZWQgdG9cbmNvbXBhY3RseSByZXByZXNlbnQgdHJlZXMgYnkgc3RvcmluZyB0aGVpciB0eXBlIGlkcywgcmF0aGVyIHRoYW4gYVxuZnVsbCBwb2ludGVyIHRvIHRoZSB0eXBlIG9iamVjdCwgaW4gYSBudW1lcmljIGFycmF5LiBFYWNoIHBhcnNlclxuW2hhc10oI2xyLkxSUGFyc2VyLm5vZGVTZXQpIGEgbm9kZSBzZXQsIGFuZCBbdHJlZVxuYnVmZmVyc10oI2NvbW1vbi5UcmVlQnVmZmVyKSBjYW4gb25seSBzdG9yZSBjb2xsZWN0aW9ucyBvZiBub2Rlc1xuZnJvbSB0aGUgc2FtZSBzZXQuIEEgc2V0IGNhbiBoYXZlIGEgbWF4aW11bSBvZiAyKioxNiAoNjU1MzYpIG5vZGVcbnR5cGVzIGluIGl0LCBzbyB0aGF0IHRoZSBpZHMgZml0IGludG8gMTYtYml0IHR5cGVkIGFycmF5IHNsb3RzLlxuKi9cbmNsYXNzIE5vZGVTZXQge1xuICAgIC8qKlxuICAgIENyZWF0ZSBhIHNldCB3aXRoIHRoZSBnaXZlbiB0eXBlcy4gVGhlIGBpZGAgcHJvcGVydHkgb2YgZWFjaFxuICAgIHR5cGUgc2hvdWxkIGNvcnJlc3BvbmQgdG8gaXRzIHBvc2l0aW9uIHdpdGhpbiB0aGUgYXJyYXkuXG4gICAgKi9cbiAgICBjb25zdHJ1Y3RvcihcbiAgICAvKipcbiAgICBUaGUgbm9kZSB0eXBlcyBpbiB0aGlzIHNldCwgYnkgaWQuXG4gICAgKi9cbiAgICB0eXBlcykge1xuICAgICAgICB0aGlzLnR5cGVzID0gdHlwZXM7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdHlwZXMubGVuZ3RoOyBpKyspXG4gICAgICAgICAgICBpZiAodHlwZXNbaV0uaWQgIT0gaSlcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcihcIk5vZGUgdHlwZSBpZHMgc2hvdWxkIGNvcnJlc3BvbmQgdG8gYXJyYXkgcG9zaXRpb25zIHdoZW4gY3JlYXRpbmcgYSBub2RlIHNldFwiKTtcbiAgICB9XG4gICAgLyoqXG4gICAgQ3JlYXRlIGEgY29weSBvZiB0aGlzIHNldCB3aXRoIHNvbWUgbm9kZSBwcm9wZXJ0aWVzIGFkZGVkLiBUaGVcbiAgICBhcmd1bWVudHMgdG8gdGhpcyBtZXRob2QgY2FuIGJlIGNyZWF0ZWQgd2l0aFxuICAgIFtgTm9kZVByb3AuYWRkYF0oI2NvbW1vbi5Ob2RlUHJvcC5hZGQpLlxuICAgICovXG4gICAgZXh0ZW5kKC4uLnByb3BzKSB7XG4gICAgICAgIGxldCBuZXdUeXBlcyA9IFtdO1xuICAgICAgICBmb3IgKGxldCB0eXBlIG9mIHRoaXMudHlwZXMpIHtcbiAgICAgICAgICAgIGxldCBuZXdQcm9wcyA9IG51bGw7XG4gICAgICAgICAgICBmb3IgKGxldCBzb3VyY2Ugb2YgcHJvcHMpIHtcbiAgICAgICAgICAgICAgICBsZXQgYWRkID0gc291cmNlKHR5cGUpO1xuICAgICAgICAgICAgICAgIGlmIChhZGQpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFuZXdQcm9wcylcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ld1Byb3BzID0gT2JqZWN0LmFzc2lnbih7fSwgdHlwZS5wcm9wcyk7XG4gICAgICAgICAgICAgICAgICAgIGxldCB2YWx1ZSA9IGFkZFsxXSwgcHJvcCA9IGFkZFswXTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHByb3AuY29tYmluZSAmJiBwcm9wLmlkIGluIG5ld1Byb3BzKVxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSBwcm9wLmNvbWJpbmUobmV3UHJvcHNbcHJvcC5pZF0sIHZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgbmV3UHJvcHNbcHJvcC5pZF0gPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBuZXdUeXBlcy5wdXNoKG5ld1Byb3BzID8gbmV3IE5vZGVUeXBlKHR5cGUubmFtZSwgbmV3UHJvcHMsIHR5cGUuaWQsIHR5cGUuZmxhZ3MpIDogdHlwZSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBOb2RlU2V0KG5ld1R5cGVzKTtcbiAgICB9XG59XG5jb25zdCBDYWNoZWROb2RlID0gbmV3IFdlYWtNYXAoKSwgQ2FjaGVkSW5uZXJOb2RlID0gbmV3IFdlYWtNYXAoKTtcbi8qKlxuT3B0aW9ucyB0aGF0IGNvbnRyb2wgaXRlcmF0aW9uLiBDYW4gYmUgY29tYmluZWQgd2l0aCB0aGUgYHxgXG5vcGVyYXRvciB0byBlbmFibGUgbXVsdGlwbGUgb25lcy5cbiovXG52YXIgSXRlck1vZGU7XG4oZnVuY3Rpb24gKEl0ZXJNb2RlKSB7XG4gICAgLyoqXG4gICAgV2hlbiBlbmFibGVkLCBpdGVyYXRpb24gd2lsbCBvbmx5IHZpc2l0IFtgVHJlZWBdKCNjb21tb24uVHJlZSlcbiAgICBvYmplY3RzLCBub3Qgbm9kZXMgcGFja2VkIGludG9cbiAgICBbYFRyZWVCdWZmZXJgXSgjY29tbW9uLlRyZWVCdWZmZXIpcy5cbiAgICAqL1xuICAgIEl0ZXJNb2RlW0l0ZXJNb2RlW1wiRXhjbHVkZUJ1ZmZlcnNcIl0gPSAxXSA9IFwiRXhjbHVkZUJ1ZmZlcnNcIjtcbiAgICAvKipcbiAgICBFbmFibGUgdGhpcyB0byBtYWtlIGl0ZXJhdGlvbiBpbmNsdWRlIGFub255bW91cyBub2RlcyAoc3VjaCBhc1xuICAgIHRoZSBub2RlcyB0aGF0IHdyYXAgcmVwZWF0ZWQgZ3JhbW1hciBjb25zdHJ1Y3RzIGludG8gYSBiYWxhbmNlZFxuICAgIHRyZWUpLlxuICAgICovXG4gICAgSXRlck1vZGVbSXRlck1vZGVbXCJJbmNsdWRlQW5vbnltb3VzXCJdID0gMl0gPSBcIkluY2x1ZGVBbm9ueW1vdXNcIjtcbiAgICAvKipcbiAgICBCeSBkZWZhdWx0LCByZWd1bGFyIFttb3VudGVkXSgjY29tbW9uLk5vZGVQcm9wXm1vdW50ZWQpIG5vZGVzXG4gICAgcmVwbGFjZSB0aGVpciBiYXNlIG5vZGUgaW4gaXRlcmF0aW9uLiBFbmFibGUgdGhpcyB0byBpZ25vcmUgdGhlbVxuICAgIGluc3RlYWQuXG4gICAgKi9cbiAgICBJdGVyTW9kZVtJdGVyTW9kZVtcIklnbm9yZU1vdW50c1wiXSA9IDRdID0gXCJJZ25vcmVNb3VudHNcIjtcbiAgICAvKipcbiAgICBUaGlzIG9wdGlvbiBvbmx5IGFwcGxpZXMgaW5cbiAgICBbYGVudGVyYF0oI2NvbW1vbi5TeW50YXhOb2RlLmVudGVyKS1zdHlsZSBtZXRob2RzLiBJdCB0ZWxscyB0aGVcbiAgICBsaWJyYXJ5IHRvIG5vdCBlbnRlciBtb3VudGVkIG92ZXJsYXlzIGlmIG9uZSBjb3ZlcnMgdGhlIGdpdmVuXG4gICAgcG9zaXRpb24uXG4gICAgKi9cbiAgICBJdGVyTW9kZVtJdGVyTW9kZVtcIklnbm9yZU92ZXJsYXlzXCJdID0gOF0gPSBcIklnbm9yZU92ZXJsYXlzXCI7XG4gICAgLyoqXG4gICAgV2hlbiBzZXQsIHBvc2l0aW9ucyBvbiB0aGUgYm91bmRhcnkgb2YgYSBtb3VudGVkIG92ZXJsYXkgdHJlZVxuICAgIHRoYXQgaGFzIGl0cyBbYGJyYWNrZXRlZGBdKCNjb21tb24uTmVzdGVkUGFyc2UuYnJhY2tldGVkKSBmbGFnXG4gICAgc2V0IHdpbGwgZW50ZXIgdGhhdCB0cmVlIHJlZ2FyZGxlc3Mgb2Ygc2lkZS4gT25seSBzdXBwb3J0ZWQgaW5cbiAgICBbYGVudGVyYF0oI2NvbW1vbi5TeW50YXhOb2RlLmVudGVyKSwgbm90IGluIGN1cnNvcnMuXG4gICAgKi9cbiAgICBJdGVyTW9kZVtJdGVyTW9kZVtcIkVudGVyQnJhY2tldGVkXCJdID0gMTZdID0gXCJFbnRlckJyYWNrZXRlZFwiO1xufSkoSXRlck1vZGUgfHwgKEl0ZXJNb2RlID0ge30pKTtcbi8qKlxuQSBwaWVjZSBvZiBzeW50YXggdHJlZS4gVGhlcmUgYXJlIHR3byB3YXlzIHRvIGFwcHJvYWNoIHRoZXNlXG50cmVlczogdGhlIHdheSB0aGV5IGFyZSBhY3R1YWxseSBzdG9yZWQgaW4gbWVtb3J5LCBhbmQgdGhlXG5jb252ZW5pZW50IHdheS5cblxuU3ludGF4IHRyZWVzIGFyZSBzdG9yZWQgYXMgYSB0cmVlIG9mIGBUcmVlYCBhbmQgYFRyZWVCdWZmZXJgXG5vYmplY3RzLiBCeSBwYWNraW5nIGRldGFpbCBpbmZvcm1hdGlvbiBpbnRvIGBUcmVlQnVmZmVyYCBsZWFmXG5ub2RlcywgdGhlIHJlcHJlc2VudGF0aW9uIGlzIG1hZGUgYSBsb3QgbW9yZSBtZW1vcnktZWZmaWNpZW50LlxuXG5Ib3dldmVyLCB3aGVuIHlvdSB3YW50IHRvIGFjdHVhbGx5IHdvcmsgd2l0aCB0cmVlIG5vZGVzLCB0aGlzXG5yZXByZXNlbnRhdGlvbiBpcyB2ZXJ5IGF3a3dhcmQsIHNvIG1vc3QgY2xpZW50IGNvZGUgd2lsbCB3YW50IHRvXG51c2UgdGhlIFtgVHJlZUN1cnNvcmBdKCNjb21tb24uVHJlZUN1cnNvcikgb3JcbltgU3ludGF4Tm9kZWBdKCNjb21tb24uU3ludGF4Tm9kZSkgaW50ZXJmYWNlIGluc3RlYWQsIHdoaWNoIHByb3ZpZGVzXG5hIHZpZXcgb24gc29tZSBwYXJ0IG9mIHRoaXMgZGF0YSBzdHJ1Y3R1cmUsIGFuZCBjYW4gYmUgdXNlZCB0b1xubW92ZSBhcm91bmQgdG8gYWRqYWNlbnQgbm9kZXMuXG4qL1xuY2xhc3MgVHJlZSB7XG4gICAgLyoqXG4gICAgQ29uc3RydWN0IGEgbmV3IHRyZWUuIFNlZSBhbHNvIFtgVHJlZS5idWlsZGBdKCNjb21tb24uVHJlZV5idWlsZCkuXG4gICAgKi9cbiAgICBjb25zdHJ1Y3RvcihcbiAgICAvKipcbiAgICBUaGUgdHlwZSBvZiB0aGUgdG9wIG5vZGUuXG4gICAgKi9cbiAgICB0eXBlLCBcbiAgICAvKipcbiAgICBUaGlzIG5vZGUncyBjaGlsZCBub2Rlcy5cbiAgICAqL1xuICAgIGNoaWxkcmVuLCBcbiAgICAvKipcbiAgICBUaGUgcG9zaXRpb25zIChvZmZzZXRzIHJlbGF0aXZlIHRvIHRoZSBzdGFydCBvZiB0aGlzIHRyZWUpIG9mXG4gICAgdGhlIGNoaWxkcmVuLlxuICAgICovXG4gICAgcG9zaXRpb25zLCBcbiAgICAvKipcbiAgICBUaGUgdG90YWwgbGVuZ3RoIG9mIHRoaXMgdHJlZVxuICAgICovXG4gICAgbGVuZ3RoLCBcbiAgICAvKipcbiAgICBQZXItbm9kZSBbbm9kZSBwcm9wc10oI2NvbW1vbi5Ob2RlUHJvcCkgdG8gYXNzb2NpYXRlIHdpdGggdGhpcyBub2RlLlxuICAgICovXG4gICAgcHJvcHMpIHtcbiAgICAgICAgdGhpcy50eXBlID0gdHlwZTtcbiAgICAgICAgdGhpcy5jaGlsZHJlbiA9IGNoaWxkcmVuO1xuICAgICAgICB0aGlzLnBvc2l0aW9ucyA9IHBvc2l0aW9ucztcbiAgICAgICAgdGhpcy5sZW5ndGggPSBsZW5ndGg7XG4gICAgICAgIC8qKlxuICAgICAgICBAaW50ZXJuYWxcbiAgICAgICAgKi9cbiAgICAgICAgdGhpcy5wcm9wcyA9IG51bGw7XG4gICAgICAgIGlmIChwcm9wcyAmJiBwcm9wcy5sZW5ndGgpIHtcbiAgICAgICAgICAgIHRoaXMucHJvcHMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICAgICAgICAgICAgZm9yIChsZXQgW3Byb3AsIHZhbHVlXSBvZiBwcm9wcylcbiAgICAgICAgICAgICAgICB0aGlzLnByb3BzW3R5cGVvZiBwcm9wID09IFwibnVtYmVyXCIgPyBwcm9wIDogcHJvcC5pZF0gPSB2YWx1ZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICBAaW50ZXJuYWxcbiAgICAqL1xuICAgIHRvU3RyaW5nKCkge1xuICAgICAgICBsZXQgbW91bnRlZCA9IE1vdW50ZWRUcmVlLmdldCh0aGlzKTtcbiAgICAgICAgaWYgKG1vdW50ZWQgJiYgIW1vdW50ZWQub3ZlcmxheSlcbiAgICAgICAgICAgIHJldHVybiBtb3VudGVkLnRyZWUudG9TdHJpbmcoKTtcbiAgICAgICAgbGV0IGNoaWxkcmVuID0gXCJcIjtcbiAgICAgICAgZm9yIChsZXQgY2ggb2YgdGhpcy5jaGlsZHJlbikge1xuICAgICAgICAgICAgbGV0IHN0ciA9IGNoLnRvU3RyaW5nKCk7XG4gICAgICAgICAgICBpZiAoc3RyKSB7XG4gICAgICAgICAgICAgICAgaWYgKGNoaWxkcmVuKVxuICAgICAgICAgICAgICAgICAgICBjaGlsZHJlbiArPSBcIixcIjtcbiAgICAgICAgICAgICAgICBjaGlsZHJlbiArPSBzdHI7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuICF0aGlzLnR5cGUubmFtZSA/IGNoaWxkcmVuIDpcbiAgICAgICAgICAgICgvXFxXLy50ZXN0KHRoaXMudHlwZS5uYW1lKSAmJiAhdGhpcy50eXBlLmlzRXJyb3IgPyBKU09OLnN0cmluZ2lmeSh0aGlzLnR5cGUubmFtZSkgOiB0aGlzLnR5cGUubmFtZSkgK1xuICAgICAgICAgICAgICAgIChjaGlsZHJlbi5sZW5ndGggPyBcIihcIiArIGNoaWxkcmVuICsgXCIpXCIgOiBcIlwiKTtcbiAgICB9XG4gICAgLyoqXG4gICAgR2V0IGEgW3RyZWUgY3Vyc29yXSgjY29tbW9uLlRyZWVDdXJzb3IpIHBvc2l0aW9uZWQgYXQgdGhlIHRvcCBvZlxuICAgIHRoZSB0cmVlLiBNb2RlIGNhbiBiZSB1c2VkIHRvIFtjb250cm9sXSgjY29tbW9uLkl0ZXJNb2RlKSB3aGljaFxuICAgIG5vZGVzIHRoZSBjdXJzb3IgdmlzaXRzLlxuICAgICovXG4gICAgY3Vyc29yKG1vZGUgPSAwKSB7XG4gICAgICAgIHJldHVybiBuZXcgVHJlZUN1cnNvcih0aGlzLnRvcE5vZGUsIG1vZGUpO1xuICAgIH1cbiAgICAvKipcbiAgICBHZXQgYSBbdHJlZSBjdXJzb3JdKCNjb21tb24uVHJlZUN1cnNvcikgcG9pbnRpbmcgaW50byB0aGlzIHRyZWVcbiAgICBhdCB0aGUgZ2l2ZW4gcG9zaXRpb24gYW5kIHNpZGUgKHNlZVxuICAgIFtgbW92ZVRvYF0oI2NvbW1vbi5UcmVlQ3Vyc29yLm1vdmVUbykuXG4gICAgKi9cbiAgICBjdXJzb3JBdChwb3MsIHNpZGUgPSAwLCBtb2RlID0gMCkge1xuICAgICAgICBsZXQgc2NvcGUgPSBDYWNoZWROb2RlLmdldCh0aGlzKSB8fCB0aGlzLnRvcE5vZGU7XG4gICAgICAgIGxldCBjdXJzb3IgPSBuZXcgVHJlZUN1cnNvcihzY29wZSk7XG4gICAgICAgIGN1cnNvci5tb3ZlVG8ocG9zLCBzaWRlKTtcbiAgICAgICAgQ2FjaGVkTm9kZS5zZXQodGhpcywgY3Vyc29yLl90cmVlKTtcbiAgICAgICAgcmV0dXJuIGN1cnNvcjtcbiAgICB9XG4gICAgLyoqXG4gICAgR2V0IGEgW3N5bnRheCBub2RlXSgjY29tbW9uLlN5bnRheE5vZGUpIG9iamVjdCBmb3IgdGhlIHRvcCBvZiB0aGVcbiAgICB0cmVlLlxuICAgICovXG4gICAgZ2V0IHRvcE5vZGUoKSB7XG4gICAgICAgIHJldHVybiBuZXcgVHJlZU5vZGUodGhpcywgMCwgMCwgbnVsbCk7XG4gICAgfVxuICAgIC8qKlxuICAgIEdldCB0aGUgW3N5bnRheCBub2RlXSgjY29tbW9uLlN5bnRheE5vZGUpIGF0IHRoZSBnaXZlbiBwb3NpdGlvbi5cbiAgICBJZiBgc2lkZWAgaXMgLTEsIHRoaXMgd2lsbCBtb3ZlIGludG8gbm9kZXMgdGhhdCBlbmQgYXQgdGhlXG4gICAgcG9zaXRpb24uIElmIDEsIGl0J2xsIG1vdmUgaW50byBub2RlcyB0aGF0IHN0YXJ0IGF0IHRoZVxuICAgIHBvc2l0aW9uLiBXaXRoIDAsIGl0J2xsIG9ubHkgZW50ZXIgbm9kZXMgdGhhdCBjb3ZlciB0aGUgcG9zaXRpb25cbiAgICBmcm9tIGJvdGggc2lkZXMuXG4gICAgXG4gICAgTm90ZSB0aGF0IHRoaXMgd2lsbCBub3QgZW50ZXJcbiAgICBbb3ZlcmxheXNdKCNjb21tb24uTW91bnRlZFRyZWUub3ZlcmxheSksIGFuZCB5b3Ugb2Z0ZW4gd2FudFxuICAgIFtgcmVzb2x2ZUlubmVyYF0oI2NvbW1vbi5UcmVlLnJlc29sdmVJbm5lcikgaW5zdGVhZC5cbiAgICAqL1xuICAgIHJlc29sdmUocG9zLCBzaWRlID0gMCkge1xuICAgICAgICBsZXQgbm9kZSA9IHJlc29sdmVOb2RlKENhY2hlZE5vZGUuZ2V0KHRoaXMpIHx8IHRoaXMudG9wTm9kZSwgcG9zLCBzaWRlLCBmYWxzZSk7XG4gICAgICAgIENhY2hlZE5vZGUuc2V0KHRoaXMsIG5vZGUpO1xuICAgICAgICByZXR1cm4gbm9kZTtcbiAgICB9XG4gICAgLyoqXG4gICAgTGlrZSBbYHJlc29sdmVgXSgjY29tbW9uLlRyZWUucmVzb2x2ZSksIGJ1dCB3aWxsIGVudGVyXG4gICAgW292ZXJsYWlkXSgjY29tbW9uLk1vdW50ZWRUcmVlLm92ZXJsYXkpIG5vZGVzLCBwcm9kdWNpbmcgYSBzeW50YXggbm9kZVxuICAgIHBvaW50aW5nIGludG8gdGhlIGlubmVybW9zdCBvdmVybGFpZCB0cmVlIGF0IHRoZSBnaXZlbiBwb3NpdGlvblxuICAgICh3aXRoIHBhcmVudCBsaW5rcyBnb2luZyB0aHJvdWdoIGFsbCBwYXJlbnQgc3RydWN0dXJlLCBpbmNsdWRpbmdcbiAgICB0aGUgaG9zdCB0cmVlcykuXG4gICAgKi9cbiAgICByZXNvbHZlSW5uZXIocG9zLCBzaWRlID0gMCkge1xuICAgICAgICBsZXQgbm9kZSA9IHJlc29sdmVOb2RlKENhY2hlZElubmVyTm9kZS5nZXQodGhpcykgfHwgdGhpcy50b3BOb2RlLCBwb3MsIHNpZGUsIHRydWUpO1xuICAgICAgICBDYWNoZWRJbm5lck5vZGUuc2V0KHRoaXMsIG5vZGUpO1xuICAgICAgICByZXR1cm4gbm9kZTtcbiAgICB9XG4gICAgLyoqXG4gICAgSW4gc29tZSBzaXR1YXRpb25zLCBpdCBjYW4gYmUgdXNlZnVsIHRvIGl0ZXJhdGUgdGhyb3VnaCBhbGxcbiAgICBub2RlcyBhcm91bmQgYSBwb3NpdGlvbiwgaW5jbHVkaW5nIHRob3NlIGluIG92ZXJsYXlzIHRoYXQgZG9uJ3RcbiAgICBkaXJlY3RseSBjb3ZlciB0aGUgcG9zaXRpb24uIFRoaXMgbWV0aG9kIGdpdmVzIHlvdSBhbiBpdGVyYXRvclxuICAgIHRoYXQgd2lsbCBwcm9kdWNlIGFsbCBub2RlcywgZnJvbSBzbWFsbCB0byBiaWcsIGFyb3VuZCB0aGUgZ2l2ZW5cbiAgICBwb3NpdGlvbi5cbiAgICAqL1xuICAgIHJlc29sdmVTdGFjayhwb3MsIHNpZGUgPSAwKSB7XG4gICAgICAgIHJldHVybiBzdGFja0l0ZXJhdG9yKHRoaXMsIHBvcywgc2lkZSk7XG4gICAgfVxuICAgIC8qKlxuICAgIEl0ZXJhdGUgb3ZlciB0aGUgdHJlZSBhbmQgaXRzIGNoaWxkcmVuLCBjYWxsaW5nIGBlbnRlcmAgZm9yIGFueVxuICAgIG5vZGUgdGhhdCB0b3VjaGVzIHRoZSBgZnJvbWAvYHRvYCByZWdpb24gKGlmIGdpdmVuKSBiZWZvcmVcbiAgICBydW5uaW5nIG92ZXIgc3VjaCBhIG5vZGUncyBjaGlsZHJlbiwgYW5kIGBsZWF2ZWAgKGlmIGdpdmVuKSB3aGVuXG4gICAgbGVhdmluZyB0aGUgbm9kZS4gV2hlbiBgZW50ZXJgIHJldHVybnMgYGZhbHNlYCwgdGhhdCBub2RlIHdpbGxcbiAgICBub3QgaGF2ZSBpdHMgY2hpbGRyZW4gaXRlcmF0ZWQgb3ZlciAob3IgYGxlYXZlYCBjYWxsZWQpLlxuICAgICovXG4gICAgaXRlcmF0ZShzcGVjKSB7XG4gICAgICAgIGxldCB7IGVudGVyLCBsZWF2ZSwgZnJvbSA9IDAsIHRvID0gdGhpcy5sZW5ndGggfSA9IHNwZWM7XG4gICAgICAgIGxldCBtb2RlID0gc3BlYy5tb2RlIHx8IDAsIGFub24gPSAobW9kZSAmIEl0ZXJNb2RlLkluY2x1ZGVBbm9ueW1vdXMpID4gMDtcbiAgICAgICAgZm9yIChsZXQgYyA9IHRoaXMuY3Vyc29yKG1vZGUgfCBJdGVyTW9kZS5JbmNsdWRlQW5vbnltb3VzKTs7KSB7XG4gICAgICAgICAgICBsZXQgZW50ZXJlZCA9IGZhbHNlO1xuICAgICAgICAgICAgaWYgKGMuZnJvbSA8PSB0byAmJiBjLnRvID49IGZyb20gJiYgKCFhbm9uICYmIGMudHlwZS5pc0Fub255bW91cyB8fCBlbnRlcihjKSAhPT0gZmFsc2UpKSB7XG4gICAgICAgICAgICAgICAgaWYgKGMuZmlyc3RDaGlsZCgpKVxuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICBlbnRlcmVkID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZvciAoOzspIHtcbiAgICAgICAgICAgICAgICBpZiAoZW50ZXJlZCAmJiBsZWF2ZSAmJiAoYW5vbiB8fCAhYy50eXBlLmlzQW5vbnltb3VzKSlcbiAgICAgICAgICAgICAgICAgICAgbGVhdmUoYyk7XG4gICAgICAgICAgICAgICAgaWYgKGMubmV4dFNpYmxpbmcoKSlcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgaWYgKCFjLnBhcmVudCgpKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgZW50ZXJlZCA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgR2V0IHRoZSB2YWx1ZSBvZiB0aGUgZ2l2ZW4gW25vZGUgcHJvcF0oI2NvbW1vbi5Ob2RlUHJvcCkgZm9yIHRoaXNcbiAgICBub2RlLiBXb3JrcyB3aXRoIGJvdGggcGVyLW5vZGUgYW5kIHBlci10eXBlIHByb3BzLlxuICAgICovXG4gICAgcHJvcChwcm9wKSB7XG4gICAgICAgIHJldHVybiAhcHJvcC5wZXJOb2RlID8gdGhpcy50eXBlLnByb3AocHJvcCkgOiB0aGlzLnByb3BzID8gdGhpcy5wcm9wc1twcm9wLmlkXSA6IHVuZGVmaW5lZDtcbiAgICB9XG4gICAgLyoqXG4gICAgUmV0dXJucyB0aGUgbm9kZSdzIFtwZXItbm9kZSBwcm9wc10oI2NvbW1vbi5Ob2RlUHJvcC5wZXJOb2RlKSBpbiBhXG4gICAgZm9ybWF0IHRoYXQgY2FuIGJlIHBhc3NlZCB0byB0aGUgW2BUcmVlYF0oI2NvbW1vbi5UcmVlKVxuICAgIGNvbnN0cnVjdG9yLlxuICAgICovXG4gICAgZ2V0IHByb3BWYWx1ZXMoKSB7XG4gICAgICAgIGxldCByZXN1bHQgPSBbXTtcbiAgICAgICAgaWYgKHRoaXMucHJvcHMpXG4gICAgICAgICAgICBmb3IgKGxldCBpZCBpbiB0aGlzLnByb3BzKVxuICAgICAgICAgICAgICAgIHJlc3VsdC5wdXNoKFsraWQsIHRoaXMucHJvcHNbaWRdXSk7XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuICAgIC8qKlxuICAgIEJhbGFuY2UgdGhlIGRpcmVjdCBjaGlsZHJlbiBvZiB0aGlzIHRyZWUsIHByb2R1Y2luZyBhIGNvcHkgb2ZcbiAgICB3aGljaCBtYXkgaGF2ZSBjaGlsZHJlbiBncm91cGVkIGludG8gc3VidHJlZXMgd2l0aCB0eXBlXG4gICAgW2BOb2RlVHlwZS5ub25lYF0oI2NvbW1vbi5Ob2RlVHlwZV5ub25lKS5cbiAgICAqL1xuICAgIGJhbGFuY2UoY29uZmlnID0ge30pIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY2hpbGRyZW4ubGVuZ3RoIDw9IDggLyogQmFsYW5jZS5CcmFuY2hGYWN0b3IgKi8gPyB0aGlzIDpcbiAgICAgICAgICAgIGJhbGFuY2VSYW5nZShOb2RlVHlwZS5ub25lLCB0aGlzLmNoaWxkcmVuLCB0aGlzLnBvc2l0aW9ucywgMCwgdGhpcy5jaGlsZHJlbi5sZW5ndGgsIDAsIHRoaXMubGVuZ3RoLCAoY2hpbGRyZW4sIHBvc2l0aW9ucywgbGVuZ3RoKSA9PiBuZXcgVHJlZSh0aGlzLnR5cGUsIGNoaWxkcmVuLCBwb3NpdGlvbnMsIGxlbmd0aCwgdGhpcy5wcm9wVmFsdWVzKSwgY29uZmlnLm1ha2VUcmVlIHx8ICgoY2hpbGRyZW4sIHBvc2l0aW9ucywgbGVuZ3RoKSA9PiBuZXcgVHJlZShOb2RlVHlwZS5ub25lLCBjaGlsZHJlbiwgcG9zaXRpb25zLCBsZW5ndGgpKSk7XG4gICAgfVxuICAgIC8qKlxuICAgIEJ1aWxkIGEgdHJlZSBmcm9tIGEgcG9zdGZpeC1vcmRlcmVkIGJ1ZmZlciBvZiBub2RlIGluZm9ybWF0aW9uLFxuICAgIG9yIGEgY3Vyc29yIG92ZXIgc3VjaCBhIGJ1ZmZlci5cbiAgICAqL1xuICAgIHN0YXRpYyBidWlsZChkYXRhKSB7IHJldHVybiBidWlsZFRyZWUoZGF0YSk7IH1cbn1cbi8qKlxuVGhlIGVtcHR5IHRyZWVcbiovXG5UcmVlLmVtcHR5ID0gbmV3IFRyZWUoTm9kZVR5cGUubm9uZSwgW10sIFtdLCAwKTtcbmNsYXNzIEZsYXRCdWZmZXJDdXJzb3Ige1xuICAgIGNvbnN0cnVjdG9yKGJ1ZmZlciwgaW5kZXgpIHtcbiAgICAgICAgdGhpcy5idWZmZXIgPSBidWZmZXI7XG4gICAgICAgIHRoaXMuaW5kZXggPSBpbmRleDtcbiAgICB9XG4gICAgZ2V0IGlkKCkgeyByZXR1cm4gdGhpcy5idWZmZXJbdGhpcy5pbmRleCAtIDRdOyB9XG4gICAgZ2V0IHN0YXJ0KCkgeyByZXR1cm4gdGhpcy5idWZmZXJbdGhpcy5pbmRleCAtIDNdOyB9XG4gICAgZ2V0IGVuZCgpIHsgcmV0dXJuIHRoaXMuYnVmZmVyW3RoaXMuaW5kZXggLSAyXTsgfVxuICAgIGdldCBzaXplKCkgeyByZXR1cm4gdGhpcy5idWZmZXJbdGhpcy5pbmRleCAtIDFdOyB9XG4gICAgZ2V0IHBvcygpIHsgcmV0dXJuIHRoaXMuaW5kZXg7IH1cbiAgICBuZXh0KCkgeyB0aGlzLmluZGV4IC09IDQ7IH1cbiAgICBmb3JrKCkgeyByZXR1cm4gbmV3IEZsYXRCdWZmZXJDdXJzb3IodGhpcy5idWZmZXIsIHRoaXMuaW5kZXgpOyB9XG59XG4vKipcblRyZWUgYnVmZmVycyBjb250YWluICh0eXBlLCBzdGFydCwgZW5kLCBlbmRJbmRleCkgcXVhZHMgZm9yIGVhY2hcbm5vZGUuIEluIHN1Y2ggYSBidWZmZXIsIG5vZGVzIGFyZSBzdG9yZWQgaW4gcHJlZml4IG9yZGVyIChwYXJlbnRzXG5iZWZvcmUgY2hpbGRyZW4sIHdpdGggdGhlIGVuZEluZGV4IG9mIHRoZSBwYXJlbnQgaW5kaWNhdGluZyB3aGljaFxuY2hpbGRyZW4gYmVsb25nIHRvIGl0KS5cbiovXG5jbGFzcyBUcmVlQnVmZmVyIHtcbiAgICAvKipcbiAgICBDcmVhdGUgYSB0cmVlIGJ1ZmZlci5cbiAgICAqL1xuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8qKlxuICAgIFRoZSBidWZmZXIncyBjb250ZW50LlxuICAgICovXG4gICAgYnVmZmVyLCBcbiAgICAvKipcbiAgICBUaGUgdG90YWwgbGVuZ3RoIG9mIHRoZSBncm91cCBvZiBub2RlcyBpbiB0aGUgYnVmZmVyLlxuICAgICovXG4gICAgbGVuZ3RoLCBcbiAgICAvKipcbiAgICBUaGUgbm9kZSBzZXQgdXNlZCBpbiB0aGlzIGJ1ZmZlci5cbiAgICAqL1xuICAgIHNldCkge1xuICAgICAgICB0aGlzLmJ1ZmZlciA9IGJ1ZmZlcjtcbiAgICAgICAgdGhpcy5sZW5ndGggPSBsZW5ndGg7XG4gICAgICAgIHRoaXMuc2V0ID0gc2V0O1xuICAgIH1cbiAgICAvKipcbiAgICBAaW50ZXJuYWxcbiAgICAqL1xuICAgIGdldCB0eXBlKCkgeyByZXR1cm4gTm9kZVR5cGUubm9uZTsgfVxuICAgIC8qKlxuICAgIEBpbnRlcm5hbFxuICAgICovXG4gICAgdG9TdHJpbmcoKSB7XG4gICAgICAgIGxldCByZXN1bHQgPSBbXTtcbiAgICAgICAgZm9yIChsZXQgaW5kZXggPSAwOyBpbmRleCA8IHRoaXMuYnVmZmVyLmxlbmd0aDspIHtcbiAgICAgICAgICAgIHJlc3VsdC5wdXNoKHRoaXMuY2hpbGRTdHJpbmcoaW5kZXgpKTtcbiAgICAgICAgICAgIGluZGV4ID0gdGhpcy5idWZmZXJbaW5kZXggKyAzXTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0LmpvaW4oXCIsXCIpO1xuICAgIH1cbiAgICAvKipcbiAgICBAaW50ZXJuYWxcbiAgICAqL1xuICAgIGNoaWxkU3RyaW5nKGluZGV4KSB7XG4gICAgICAgIGxldCBpZCA9IHRoaXMuYnVmZmVyW2luZGV4XSwgZW5kSW5kZXggPSB0aGlzLmJ1ZmZlcltpbmRleCArIDNdO1xuICAgICAgICBsZXQgdHlwZSA9IHRoaXMuc2V0LnR5cGVzW2lkXSwgcmVzdWx0ID0gdHlwZS5uYW1lO1xuICAgICAgICBpZiAoL1xcVy8udGVzdChyZXN1bHQpICYmICF0eXBlLmlzRXJyb3IpXG4gICAgICAgICAgICByZXN1bHQgPSBKU09OLnN0cmluZ2lmeShyZXN1bHQpO1xuICAgICAgICBpbmRleCArPSA0O1xuICAgICAgICBpZiAoZW5kSW5kZXggPT0gaW5kZXgpXG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICBsZXQgY2hpbGRyZW4gPSBbXTtcbiAgICAgICAgd2hpbGUgKGluZGV4IDwgZW5kSW5kZXgpIHtcbiAgICAgICAgICAgIGNoaWxkcmVuLnB1c2godGhpcy5jaGlsZFN0cmluZyhpbmRleCkpO1xuICAgICAgICAgICAgaW5kZXggPSB0aGlzLmJ1ZmZlcltpbmRleCArIDNdO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHQgKyBcIihcIiArIGNoaWxkcmVuLmpvaW4oXCIsXCIpICsgXCIpXCI7XG4gICAgfVxuICAgIC8qKlxuICAgIEBpbnRlcm5hbFxuICAgICovXG4gICAgZmluZENoaWxkKHN0YXJ0SW5kZXgsIGVuZEluZGV4LCBkaXIsIHBvcywgc2lkZSkge1xuICAgICAgICBsZXQgeyBidWZmZXIgfSA9IHRoaXMsIHBpY2sgPSAtMTtcbiAgICAgICAgZm9yIChsZXQgaSA9IHN0YXJ0SW5kZXg7IGkgIT0gZW5kSW5kZXg7IGkgPSBidWZmZXJbaSArIDNdKSB7XG4gICAgICAgICAgICBpZiAoY2hlY2tTaWRlKHNpZGUsIHBvcywgYnVmZmVyW2kgKyAxXSwgYnVmZmVyW2kgKyAyXSkpIHtcbiAgICAgICAgICAgICAgICBwaWNrID0gaTtcbiAgICAgICAgICAgICAgICBpZiAoZGlyID4gMClcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHBpY2s7XG4gICAgfVxuICAgIC8qKlxuICAgIEBpbnRlcm5hbFxuICAgICovXG4gICAgc2xpY2Uoc3RhcnRJLCBlbmRJLCBmcm9tKSB7XG4gICAgICAgIGxldCBiID0gdGhpcy5idWZmZXI7XG4gICAgICAgIGxldCBjb3B5ID0gbmV3IFVpbnQxNkFycmF5KGVuZEkgLSBzdGFydEkpLCBsZW4gPSAwO1xuICAgICAgICBmb3IgKGxldCBpID0gc3RhcnRJLCBqID0gMDsgaSA8IGVuZEk7KSB7XG4gICAgICAgICAgICBjb3B5W2orK10gPSBiW2krK107XG4gICAgICAgICAgICBjb3B5W2orK10gPSBiW2krK10gLSBmcm9tO1xuICAgICAgICAgICAgbGV0IHRvID0gY29weVtqKytdID0gYltpKytdIC0gZnJvbTtcbiAgICAgICAgICAgIGNvcHlbaisrXSA9IGJbaSsrXSAtIHN0YXJ0STtcbiAgICAgICAgICAgIGxlbiA9IE1hdGgubWF4KGxlbiwgdG8pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgVHJlZUJ1ZmZlcihjb3B5LCBsZW4sIHRoaXMuc2V0KTtcbiAgICB9XG59XG5mdW5jdGlvbiBjaGVja1NpZGUoc2lkZSwgcG9zLCBmcm9tLCB0bykge1xuICAgIHN3aXRjaCAoc2lkZSkge1xuICAgICAgICBjYXNlIC0yIC8qIFNpZGUuQmVmb3JlICovOiByZXR1cm4gZnJvbSA8IHBvcztcbiAgICAgICAgY2FzZSAtMSAvKiBTaWRlLkF0T3JCZWZvcmUgKi86IHJldHVybiB0byA+PSBwb3MgJiYgZnJvbSA8IHBvcztcbiAgICAgICAgY2FzZSAwIC8qIFNpZGUuQXJvdW5kICovOiByZXR1cm4gZnJvbSA8IHBvcyAmJiB0byA+IHBvcztcbiAgICAgICAgY2FzZSAxIC8qIFNpZGUuQXRPckFmdGVyICovOiByZXR1cm4gZnJvbSA8PSBwb3MgJiYgdG8gPiBwb3M7XG4gICAgICAgIGNhc2UgMiAvKiBTaWRlLkFmdGVyICovOiByZXR1cm4gdG8gPiBwb3M7XG4gICAgICAgIGNhc2UgNCAvKiBTaWRlLkRvbnRDYXJlICovOiByZXR1cm4gdHJ1ZTtcbiAgICB9XG59XG5mdW5jdGlvbiByZXNvbHZlTm9kZShub2RlLCBwb3MsIHNpZGUsIG92ZXJsYXlzKSB7XG4gICAgdmFyIF9hO1xuICAgIC8vIE1vdmUgdXAgdG8gYSBub2RlIHRoYXQgYWN0dWFsbHkgaG9sZHMgdGhlIHBvc2l0aW9uLCBpZiBwb3NzaWJsZVxuICAgIHdoaWxlIChub2RlLmZyb20gPT0gbm9kZS50byB8fFxuICAgICAgICAoc2lkZSA8IDEgPyBub2RlLmZyb20gPj0gcG9zIDogbm9kZS5mcm9tID4gcG9zKSB8fFxuICAgICAgICAoc2lkZSA+IC0xID8gbm9kZS50byA8PSBwb3MgOiBub2RlLnRvIDwgcG9zKSkge1xuICAgICAgICBsZXQgcGFyZW50ID0gIW92ZXJsYXlzICYmIG5vZGUgaW5zdGFuY2VvZiBUcmVlTm9kZSAmJiBub2RlLmluZGV4IDwgMCA/IG51bGwgOiBub2RlLnBhcmVudDtcbiAgICAgICAgaWYgKCFwYXJlbnQpXG4gICAgICAgICAgICByZXR1cm4gbm9kZTtcbiAgICAgICAgbm9kZSA9IHBhcmVudDtcbiAgICB9XG4gICAgbGV0IG1vZGUgPSBvdmVybGF5cyA/IDAgOiBJdGVyTW9kZS5JZ25vcmVPdmVybGF5cztcbiAgICAvLyBNdXN0IGdvIHVwIG91dCBvZiBvdmVybGF5cyB3aGVuIHRob3NlIGRvIG5vdCBvdmVybGFwIHdpdGggcG9zXG4gICAgaWYgKG92ZXJsYXlzKVxuICAgICAgICBmb3IgKGxldCBzY2FuID0gbm9kZSwgcGFyZW50ID0gc2Nhbi5wYXJlbnQ7IHBhcmVudDsgc2NhbiA9IHBhcmVudCwgcGFyZW50ID0gc2Nhbi5wYXJlbnQpIHtcbiAgICAgICAgICAgIGlmIChzY2FuIGluc3RhbmNlb2YgVHJlZU5vZGUgJiYgc2Nhbi5pbmRleCA8IDAgJiYgKChfYSA9IHBhcmVudC5lbnRlcihwb3MsIHNpZGUsIG1vZGUpKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuZnJvbSkgIT0gc2Nhbi5mcm9tKVxuICAgICAgICAgICAgICAgIG5vZGUgPSBwYXJlbnQ7XG4gICAgICAgIH1cbiAgICBmb3IgKDs7KSB7XG4gICAgICAgIGxldCBpbm5lciA9IG5vZGUuZW50ZXIocG9zLCBzaWRlLCBtb2RlKTtcbiAgICAgICAgaWYgKCFpbm5lcilcbiAgICAgICAgICAgIHJldHVybiBub2RlO1xuICAgICAgICBub2RlID0gaW5uZXI7XG4gICAgfVxufVxuY2xhc3MgQmFzZU5vZGUge1xuICAgIGN1cnNvcihtb2RlID0gMCkgeyByZXR1cm4gbmV3IFRyZWVDdXJzb3IodGhpcywgbW9kZSk7IH1cbiAgICBnZXRDaGlsZCh0eXBlLCBiZWZvcmUgPSBudWxsLCBhZnRlciA9IG51bGwpIHtcbiAgICAgICAgbGV0IHIgPSBnZXRDaGlsZHJlbih0aGlzLCB0eXBlLCBiZWZvcmUsIGFmdGVyKTtcbiAgICAgICAgcmV0dXJuIHIubGVuZ3RoID8gclswXSA6IG51bGw7XG4gICAgfVxuICAgIGdldENoaWxkcmVuKHR5cGUsIGJlZm9yZSA9IG51bGwsIGFmdGVyID0gbnVsbCkge1xuICAgICAgICByZXR1cm4gZ2V0Q2hpbGRyZW4odGhpcywgdHlwZSwgYmVmb3JlLCBhZnRlcik7XG4gICAgfVxuICAgIHJlc29sdmUocG9zLCBzaWRlID0gMCkge1xuICAgICAgICByZXR1cm4gcmVzb2x2ZU5vZGUodGhpcywgcG9zLCBzaWRlLCBmYWxzZSk7XG4gICAgfVxuICAgIHJlc29sdmVJbm5lcihwb3MsIHNpZGUgPSAwKSB7XG4gICAgICAgIHJldHVybiByZXNvbHZlTm9kZSh0aGlzLCBwb3MsIHNpZGUsIHRydWUpO1xuICAgIH1cbiAgICBtYXRjaENvbnRleHQoY29udGV4dCkge1xuICAgICAgICByZXR1cm4gbWF0Y2hOb2RlQ29udGV4dCh0aGlzLnBhcmVudCwgY29udGV4dCk7XG4gICAgfVxuICAgIGVudGVyVW5maW5pc2hlZE5vZGVzQmVmb3JlKHBvcykge1xuICAgICAgICBsZXQgc2NhbiA9IHRoaXMuY2hpbGRCZWZvcmUocG9zKSwgbm9kZSA9IHRoaXM7XG4gICAgICAgIHdoaWxlIChzY2FuKSB7XG4gICAgICAgICAgICBsZXQgbGFzdCA9IHNjYW4ubGFzdENoaWxkO1xuICAgICAgICAgICAgaWYgKCFsYXN0IHx8IGxhc3QudG8gIT0gc2Nhbi50bylcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGlmIChsYXN0LnR5cGUuaXNFcnJvciAmJiBsYXN0LmZyb20gPT0gbGFzdC50bykge1xuICAgICAgICAgICAgICAgIG5vZGUgPSBzY2FuO1xuICAgICAgICAgICAgICAgIHNjYW4gPSBsYXN0LnByZXZTaWJsaW5nO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgc2NhbiA9IGxhc3Q7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5vZGU7XG4gICAgfVxuICAgIGdldCBub2RlKCkgeyByZXR1cm4gdGhpczsgfVxuICAgIGdldCBuZXh0KCkgeyByZXR1cm4gdGhpcy5wYXJlbnQ7IH1cbn1cbmNsYXNzIFRyZWVOb2RlIGV4dGVuZHMgQmFzZU5vZGUge1xuICAgIGNvbnN0cnVjdG9yKF90cmVlLCBmcm9tLCBcbiAgICAvLyBJbmRleCBpbiBwYXJlbnQgbm9kZSwgc2V0IHRvIC0xIGlmIHRoZSBub2RlIGlzIG5vdCBhIGRpcmVjdCBjaGlsZCBvZiBfcGFyZW50Lm5vZGUgKG92ZXJsYXkpXG4gICAgaW5kZXgsIF9wYXJlbnQpIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy5fdHJlZSA9IF90cmVlO1xuICAgICAgICB0aGlzLmZyb20gPSBmcm9tO1xuICAgICAgICB0aGlzLmluZGV4ID0gaW5kZXg7XG4gICAgICAgIHRoaXMuX3BhcmVudCA9IF9wYXJlbnQ7XG4gICAgfVxuICAgIGdldCB0eXBlKCkgeyByZXR1cm4gdGhpcy5fdHJlZS50eXBlOyB9XG4gICAgZ2V0IG5hbWUoKSB7IHJldHVybiB0aGlzLl90cmVlLnR5cGUubmFtZTsgfVxuICAgIGdldCB0bygpIHsgcmV0dXJuIHRoaXMuZnJvbSArIHRoaXMuX3RyZWUubGVuZ3RoOyB9XG4gICAgbmV4dENoaWxkKGksIGRpciwgcG9zLCBzaWRlLCBtb2RlID0gMCkge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIGZvciAobGV0IHBhcmVudCA9IHRoaXM7Oykge1xuICAgICAgICAgICAgZm9yIChsZXQgeyBjaGlsZHJlbiwgcG9zaXRpb25zIH0gPSBwYXJlbnQuX3RyZWUsIGUgPSBkaXIgPiAwID8gY2hpbGRyZW4ubGVuZ3RoIDogLTE7IGkgIT0gZTsgaSArPSBkaXIpIHtcbiAgICAgICAgICAgICAgICBsZXQgbmV4dCA9IGNoaWxkcmVuW2ldLCBzdGFydCA9IHBvc2l0aW9uc1tpXSArIHBhcmVudC5mcm9tO1xuICAgICAgICAgICAgICAgIGlmICghKChtb2RlICYgSXRlck1vZGUuRW50ZXJCcmFja2V0ZWQpICYmIG5leHQgaW5zdGFuY2VvZiBUcmVlICYmXG4gICAgICAgICAgICAgICAgICAgICgoX2EgPSBNb3VudGVkVHJlZS5nZXQobmV4dCkpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5vdmVybGF5KSA9PT0gbnVsbCAmJiAoc3RhcnQgPj0gcG9zIHx8IHN0YXJ0ICsgbmV4dC5sZW5ndGggPD0gcG9zKSkgJiZcbiAgICAgICAgICAgICAgICAgICAgIWNoZWNrU2lkZShzaWRlLCBwb3MsIHN0YXJ0LCBzdGFydCArIG5leHQubGVuZ3RoKSlcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgaWYgKG5leHQgaW5zdGFuY2VvZiBUcmVlQnVmZmVyKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChtb2RlICYgSXRlck1vZGUuRXhjbHVkZUJ1ZmZlcnMpXG4gICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGluZGV4ID0gbmV4dC5maW5kQ2hpbGQoMCwgbmV4dC5idWZmZXIubGVuZ3RoLCBkaXIsIHBvcyAtIHN0YXJ0LCBzaWRlKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGluZGV4ID4gLTEpXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IEJ1ZmZlck5vZGUobmV3IEJ1ZmZlckNvbnRleHQocGFyZW50LCBuZXh0LCBpLCBzdGFydCksIG51bGwsIGluZGV4KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoKG1vZGUgJiBJdGVyTW9kZS5JbmNsdWRlQW5vbnltb3VzKSB8fCAoIW5leHQudHlwZS5pc0Fub255bW91cyB8fCBoYXNDaGlsZChuZXh0KSkpIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IG1vdW50ZWQ7XG4gICAgICAgICAgICAgICAgICAgIGlmICghKG1vZGUgJiBJdGVyTW9kZS5JZ25vcmVNb3VudHMpICYmIChtb3VudGVkID0gTW91bnRlZFRyZWUuZ2V0KG5leHQpKSAmJiAhbW91bnRlZC5vdmVybGF5KVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBUcmVlTm9kZShtb3VudGVkLnRyZWUsIHN0YXJ0LCBpLCBwYXJlbnQpO1xuICAgICAgICAgICAgICAgICAgICBsZXQgaW5uZXIgPSBuZXcgVHJlZU5vZGUobmV4dCwgc3RhcnQsIGksIHBhcmVudCk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAobW9kZSAmIEl0ZXJNb2RlLkluY2x1ZGVBbm9ueW1vdXMpIHx8ICFpbm5lci50eXBlLmlzQW5vbnltb3VzID8gaW5uZXJcbiAgICAgICAgICAgICAgICAgICAgICAgIDogaW5uZXIubmV4dENoaWxkKGRpciA8IDAgPyBuZXh0LmNoaWxkcmVuLmxlbmd0aCAtIDEgOiAwLCBkaXIsIHBvcywgc2lkZSwgbW9kZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKChtb2RlICYgSXRlck1vZGUuSW5jbHVkZUFub255bW91cykgfHwgIXBhcmVudC50eXBlLmlzQW5vbnltb3VzKVxuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgaWYgKHBhcmVudC5pbmRleCA+PSAwKVxuICAgICAgICAgICAgICAgIGkgPSBwYXJlbnQuaW5kZXggKyBkaXI7XG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgaSA9IGRpciA8IDAgPyAtMSA6IHBhcmVudC5fcGFyZW50Ll90cmVlLmNoaWxkcmVuLmxlbmd0aDtcbiAgICAgICAgICAgIHBhcmVudCA9IHBhcmVudC5fcGFyZW50O1xuICAgICAgICAgICAgaWYgKCFwYXJlbnQpXG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZ2V0IGZpcnN0Q2hpbGQoKSB7IHJldHVybiB0aGlzLm5leHRDaGlsZCgwLCAxLCAwLCA0IC8qIFNpZGUuRG9udENhcmUgKi8pOyB9XG4gICAgZ2V0IGxhc3RDaGlsZCgpIHsgcmV0dXJuIHRoaXMubmV4dENoaWxkKHRoaXMuX3RyZWUuY2hpbGRyZW4ubGVuZ3RoIC0gMSwgLTEsIDAsIDQgLyogU2lkZS5Eb250Q2FyZSAqLyk7IH1cbiAgICBjaGlsZEFmdGVyKHBvcykgeyByZXR1cm4gdGhpcy5uZXh0Q2hpbGQoMCwgMSwgcG9zLCAyIC8qIFNpZGUuQWZ0ZXIgKi8pOyB9XG4gICAgY2hpbGRCZWZvcmUocG9zKSB7IHJldHVybiB0aGlzLm5leHRDaGlsZCh0aGlzLl90cmVlLmNoaWxkcmVuLmxlbmd0aCAtIDEsIC0xLCBwb3MsIC0yIC8qIFNpZGUuQmVmb3JlICovKTsgfVxuICAgIHByb3AocHJvcCkgeyByZXR1cm4gdGhpcy5fdHJlZS5wcm9wKHByb3ApOyB9XG4gICAgZW50ZXIocG9zLCBzaWRlLCBtb2RlID0gMCkge1xuICAgICAgICBsZXQgbW91bnRlZDtcbiAgICAgICAgaWYgKCEobW9kZSAmIEl0ZXJNb2RlLklnbm9yZU92ZXJsYXlzKSAmJiAobW91bnRlZCA9IE1vdW50ZWRUcmVlLmdldCh0aGlzLl90cmVlKSkgJiYgbW91bnRlZC5vdmVybGF5KSB7XG4gICAgICAgICAgICBsZXQgclBvcyA9IHBvcyAtIHRoaXMuZnJvbSwgZW50ZXJCcmFja2V0ZWQgPSAobW9kZSAmIEl0ZXJNb2RlLkVudGVyQnJhY2tldGVkKSAmJiBtb3VudGVkLmJyYWNrZXRlZDtcbiAgICAgICAgICAgIGZvciAobGV0IHsgZnJvbSwgdG8gfSBvZiBtb3VudGVkLm92ZXJsYXkpIHtcbiAgICAgICAgICAgICAgICBpZiAoKHNpZGUgPiAwIHx8IGVudGVyQnJhY2tldGVkID8gZnJvbSA8PSByUG9zIDogZnJvbSA8IHJQb3MpICYmXG4gICAgICAgICAgICAgICAgICAgIChzaWRlIDwgMCB8fCBlbnRlckJyYWNrZXRlZCA/IHRvID49IHJQb3MgOiB0byA+IHJQb3MpKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFRyZWVOb2RlKG1vdW50ZWQudHJlZSwgbW91bnRlZC5vdmVybGF5WzBdLmZyb20gKyB0aGlzLmZyb20sIC0xLCB0aGlzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5uZXh0Q2hpbGQoMCwgMSwgcG9zLCBzaWRlLCBtb2RlKTtcbiAgICB9XG4gICAgbmV4dFNpZ25pZmljYW50UGFyZW50KCkge1xuICAgICAgICBsZXQgdmFsID0gdGhpcztcbiAgICAgICAgd2hpbGUgKHZhbC50eXBlLmlzQW5vbnltb3VzICYmIHZhbC5fcGFyZW50KVxuICAgICAgICAgICAgdmFsID0gdmFsLl9wYXJlbnQ7XG4gICAgICAgIHJldHVybiB2YWw7XG4gICAgfVxuICAgIGdldCBwYXJlbnQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9wYXJlbnQgPyB0aGlzLl9wYXJlbnQubmV4dFNpZ25pZmljYW50UGFyZW50KCkgOiBudWxsO1xuICAgIH1cbiAgICBnZXQgbmV4dFNpYmxpbmcoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9wYXJlbnQgJiYgdGhpcy5pbmRleCA+PSAwID8gdGhpcy5fcGFyZW50Lm5leHRDaGlsZCh0aGlzLmluZGV4ICsgMSwgMSwgMCwgNCAvKiBTaWRlLkRvbnRDYXJlICovKSA6IG51bGw7XG4gICAgfVxuICAgIGdldCBwcmV2U2libGluZygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3BhcmVudCAmJiB0aGlzLmluZGV4ID49IDAgPyB0aGlzLl9wYXJlbnQubmV4dENoaWxkKHRoaXMuaW5kZXggLSAxLCAtMSwgMCwgNCAvKiBTaWRlLkRvbnRDYXJlICovKSA6IG51bGw7XG4gICAgfVxuICAgIGdldCB0cmVlKCkgeyByZXR1cm4gdGhpcy5fdHJlZTsgfVxuICAgIHRvVHJlZSgpIHsgcmV0dXJuIHRoaXMuX3RyZWU7IH1cbiAgICAvKipcbiAgICBAaW50ZXJuYWxcbiAgICAqL1xuICAgIHRvU3RyaW5nKCkgeyByZXR1cm4gdGhpcy5fdHJlZS50b1N0cmluZygpOyB9XG59XG5mdW5jdGlvbiBnZXRDaGlsZHJlbihub2RlLCB0eXBlLCBiZWZvcmUsIGFmdGVyKSB7XG4gICAgbGV0IGN1ciA9IG5vZGUuY3Vyc29yKCksIHJlc3VsdCA9IFtdO1xuICAgIGlmICghY3VyLmZpcnN0Q2hpbGQoKSlcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICBpZiAoYmVmb3JlICE9IG51bGwpXG4gICAgICAgIGZvciAobGV0IGZvdW5kID0gZmFsc2U7ICFmb3VuZDspIHtcbiAgICAgICAgICAgIGZvdW5kID0gY3VyLnR5cGUuaXMoYmVmb3JlKTtcbiAgICAgICAgICAgIGlmICghY3VyLm5leHRTaWJsaW5nKCkpXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgfVxuICAgIGZvciAoOzspIHtcbiAgICAgICAgaWYgKGFmdGVyICE9IG51bGwgJiYgY3VyLnR5cGUuaXMoYWZ0ZXIpKVxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgaWYgKGN1ci50eXBlLmlzKHR5cGUpKVxuICAgICAgICAgICAgcmVzdWx0LnB1c2goY3VyLm5vZGUpO1xuICAgICAgICBpZiAoIWN1ci5uZXh0U2libGluZygpKVxuICAgICAgICAgICAgcmV0dXJuIGFmdGVyID09IG51bGwgPyByZXN1bHQgOiBbXTtcbiAgICB9XG59XG5mdW5jdGlvbiBtYXRjaE5vZGVDb250ZXh0KG5vZGUsIGNvbnRleHQsIGkgPSBjb250ZXh0Lmxlbmd0aCAtIDEpIHtcbiAgICBmb3IgKGxldCBwID0gbm9kZTsgaSA+PSAwOyBwID0gcC5wYXJlbnQpIHtcbiAgICAgICAgaWYgKCFwKVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICBpZiAoIXAudHlwZS5pc0Fub255bW91cykge1xuICAgICAgICAgICAgaWYgKGNvbnRleHRbaV0gJiYgY29udGV4dFtpXSAhPSBwLm5hbWUpXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgaS0tO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xufVxuY2xhc3MgQnVmZmVyQ29udGV4dCB7XG4gICAgY29uc3RydWN0b3IocGFyZW50LCBidWZmZXIsIGluZGV4LCBzdGFydCkge1xuICAgICAgICB0aGlzLnBhcmVudCA9IHBhcmVudDtcbiAgICAgICAgdGhpcy5idWZmZXIgPSBidWZmZXI7XG4gICAgICAgIHRoaXMuaW5kZXggPSBpbmRleDtcbiAgICAgICAgdGhpcy5zdGFydCA9IHN0YXJ0O1xuICAgIH1cbn1cbmNsYXNzIEJ1ZmZlck5vZGUgZXh0ZW5kcyBCYXNlTm9kZSB7XG4gICAgZ2V0IG5hbWUoKSB7IHJldHVybiB0aGlzLnR5cGUubmFtZTsgfVxuICAgIGdldCBmcm9tKCkgeyByZXR1cm4gdGhpcy5jb250ZXh0LnN0YXJ0ICsgdGhpcy5jb250ZXh0LmJ1ZmZlci5idWZmZXJbdGhpcy5pbmRleCArIDFdOyB9XG4gICAgZ2V0IHRvKCkgeyByZXR1cm4gdGhpcy5jb250ZXh0LnN0YXJ0ICsgdGhpcy5jb250ZXh0LmJ1ZmZlci5idWZmZXJbdGhpcy5pbmRleCArIDJdOyB9XG4gICAgY29uc3RydWN0b3IoY29udGV4dCwgX3BhcmVudCwgaW5kZXgpIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy5jb250ZXh0ID0gY29udGV4dDtcbiAgICAgICAgdGhpcy5fcGFyZW50ID0gX3BhcmVudDtcbiAgICAgICAgdGhpcy5pbmRleCA9IGluZGV4O1xuICAgICAgICB0aGlzLnR5cGUgPSBjb250ZXh0LmJ1ZmZlci5zZXQudHlwZXNbY29udGV4dC5idWZmZXIuYnVmZmVyW2luZGV4XV07XG4gICAgfVxuICAgIGNoaWxkKGRpciwgcG9zLCBzaWRlKSB7XG4gICAgICAgIGxldCB7IGJ1ZmZlciB9ID0gdGhpcy5jb250ZXh0O1xuICAgICAgICBsZXQgaW5kZXggPSBidWZmZXIuZmluZENoaWxkKHRoaXMuaW5kZXggKyA0LCBidWZmZXIuYnVmZmVyW3RoaXMuaW5kZXggKyAzXSwgZGlyLCBwb3MgLSB0aGlzLmNvbnRleHQuc3RhcnQsIHNpZGUpO1xuICAgICAgICByZXR1cm4gaW5kZXggPCAwID8gbnVsbCA6IG5ldyBCdWZmZXJOb2RlKHRoaXMuY29udGV4dCwgdGhpcywgaW5kZXgpO1xuICAgIH1cbiAgICBnZXQgZmlyc3RDaGlsZCgpIHsgcmV0dXJuIHRoaXMuY2hpbGQoMSwgMCwgNCAvKiBTaWRlLkRvbnRDYXJlICovKTsgfVxuICAgIGdldCBsYXN0Q2hpbGQoKSB7IHJldHVybiB0aGlzLmNoaWxkKC0xLCAwLCA0IC8qIFNpZGUuRG9udENhcmUgKi8pOyB9XG4gICAgY2hpbGRBZnRlcihwb3MpIHsgcmV0dXJuIHRoaXMuY2hpbGQoMSwgcG9zLCAyIC8qIFNpZGUuQWZ0ZXIgKi8pOyB9XG4gICAgY2hpbGRCZWZvcmUocG9zKSB7IHJldHVybiB0aGlzLmNoaWxkKC0xLCBwb3MsIC0yIC8qIFNpZGUuQmVmb3JlICovKTsgfVxuICAgIHByb3AocHJvcCkgeyByZXR1cm4gdGhpcy50eXBlLnByb3AocHJvcCk7IH1cbiAgICBlbnRlcihwb3MsIHNpZGUsIG1vZGUgPSAwKSB7XG4gICAgICAgIGlmIChtb2RlICYgSXRlck1vZGUuRXhjbHVkZUJ1ZmZlcnMpXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgbGV0IHsgYnVmZmVyIH0gPSB0aGlzLmNvbnRleHQ7XG4gICAgICAgIGxldCBpbmRleCA9IGJ1ZmZlci5maW5kQ2hpbGQodGhpcy5pbmRleCArIDQsIGJ1ZmZlci5idWZmZXJbdGhpcy5pbmRleCArIDNdLCBzaWRlID4gMCA/IDEgOiAtMSwgcG9zIC0gdGhpcy5jb250ZXh0LnN0YXJ0LCBzaWRlKTtcbiAgICAgICAgcmV0dXJuIGluZGV4IDwgMCA/IG51bGwgOiBuZXcgQnVmZmVyTm9kZSh0aGlzLmNvbnRleHQsIHRoaXMsIGluZGV4KTtcbiAgICB9XG4gICAgZ2V0IHBhcmVudCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3BhcmVudCB8fCB0aGlzLmNvbnRleHQucGFyZW50Lm5leHRTaWduaWZpY2FudFBhcmVudCgpO1xuICAgIH1cbiAgICBleHRlcm5hbFNpYmxpbmcoZGlyKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9wYXJlbnQgPyBudWxsIDogdGhpcy5jb250ZXh0LnBhcmVudC5uZXh0Q2hpbGQodGhpcy5jb250ZXh0LmluZGV4ICsgZGlyLCBkaXIsIDAsIDQgLyogU2lkZS5Eb250Q2FyZSAqLyk7XG4gICAgfVxuICAgIGdldCBuZXh0U2libGluZygpIHtcbiAgICAgICAgbGV0IHsgYnVmZmVyIH0gPSB0aGlzLmNvbnRleHQ7XG4gICAgICAgIGxldCBhZnRlciA9IGJ1ZmZlci5idWZmZXJbdGhpcy5pbmRleCArIDNdO1xuICAgICAgICBpZiAoYWZ0ZXIgPCAodGhpcy5fcGFyZW50ID8gYnVmZmVyLmJ1ZmZlclt0aGlzLl9wYXJlbnQuaW5kZXggKyAzXSA6IGJ1ZmZlci5idWZmZXIubGVuZ3RoKSlcbiAgICAgICAgICAgIHJldHVybiBuZXcgQnVmZmVyTm9kZSh0aGlzLmNvbnRleHQsIHRoaXMuX3BhcmVudCwgYWZ0ZXIpO1xuICAgICAgICByZXR1cm4gdGhpcy5leHRlcm5hbFNpYmxpbmcoMSk7XG4gICAgfVxuICAgIGdldCBwcmV2U2libGluZygpIHtcbiAgICAgICAgbGV0IHsgYnVmZmVyIH0gPSB0aGlzLmNvbnRleHQ7XG4gICAgICAgIGxldCBwYXJlbnRTdGFydCA9IHRoaXMuX3BhcmVudCA/IHRoaXMuX3BhcmVudC5pbmRleCArIDQgOiAwO1xuICAgICAgICBpZiAodGhpcy5pbmRleCA9PSBwYXJlbnRTdGFydClcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmV4dGVybmFsU2libGluZygtMSk7XG4gICAgICAgIHJldHVybiBuZXcgQnVmZmVyTm9kZSh0aGlzLmNvbnRleHQsIHRoaXMuX3BhcmVudCwgYnVmZmVyLmZpbmRDaGlsZChwYXJlbnRTdGFydCwgdGhpcy5pbmRleCwgLTEsIDAsIDQgLyogU2lkZS5Eb250Q2FyZSAqLykpO1xuICAgIH1cbiAgICBnZXQgdHJlZSgpIHsgcmV0dXJuIG51bGw7IH1cbiAgICB0b1RyZWUoKSB7XG4gICAgICAgIGxldCBjaGlsZHJlbiA9IFtdLCBwb3NpdGlvbnMgPSBbXTtcbiAgICAgICAgbGV0IHsgYnVmZmVyIH0gPSB0aGlzLmNvbnRleHQ7XG4gICAgICAgIGxldCBzdGFydEkgPSB0aGlzLmluZGV4ICsgNCwgZW5kSSA9IGJ1ZmZlci5idWZmZXJbdGhpcy5pbmRleCArIDNdO1xuICAgICAgICBpZiAoZW5kSSA+IHN0YXJ0SSkge1xuICAgICAgICAgICAgbGV0IGZyb20gPSBidWZmZXIuYnVmZmVyW3RoaXMuaW5kZXggKyAxXTtcbiAgICAgICAgICAgIGNoaWxkcmVuLnB1c2goYnVmZmVyLnNsaWNlKHN0YXJ0SSwgZW5kSSwgZnJvbSkpO1xuICAgICAgICAgICAgcG9zaXRpb25zLnB1c2goMCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBUcmVlKHRoaXMudHlwZSwgY2hpbGRyZW4sIHBvc2l0aW9ucywgdGhpcy50byAtIHRoaXMuZnJvbSk7XG4gICAgfVxuICAgIC8qKlxuICAgIEBpbnRlcm5hbFxuICAgICovXG4gICAgdG9TdHJpbmcoKSB7IHJldHVybiB0aGlzLmNvbnRleHQuYnVmZmVyLmNoaWxkU3RyaW5nKHRoaXMuaW5kZXgpOyB9XG59XG5mdW5jdGlvbiBpdGVyU3RhY2soaGVhZHMpIHtcbiAgICBpZiAoIWhlYWRzLmxlbmd0aClcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgbGV0IHBpY2sgPSAwLCBwaWNrZWQgPSBoZWFkc1swXTtcbiAgICBmb3IgKGxldCBpID0gMTsgaSA8IGhlYWRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGxldCBub2RlID0gaGVhZHNbaV07XG4gICAgICAgIGlmIChub2RlLmZyb20gPiBwaWNrZWQuZnJvbSB8fCBub2RlLnRvIDwgcGlja2VkLnRvKSB7XG4gICAgICAgICAgICBwaWNrZWQgPSBub2RlO1xuICAgICAgICAgICAgcGljayA9IGk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgbGV0IG5leHQgPSBwaWNrZWQgaW5zdGFuY2VvZiBUcmVlTm9kZSAmJiBwaWNrZWQuaW5kZXggPCAwID8gbnVsbCA6IHBpY2tlZC5wYXJlbnQ7XG4gICAgbGV0IG5ld0hlYWRzID0gaGVhZHMuc2xpY2UoKTtcbiAgICBpZiAobmV4dClcbiAgICAgICAgbmV3SGVhZHNbcGlja10gPSBuZXh0O1xuICAgIGVsc2VcbiAgICAgICAgbmV3SGVhZHMuc3BsaWNlKHBpY2ssIDEpO1xuICAgIHJldHVybiBuZXcgU3RhY2tJdGVyYXRvcihuZXdIZWFkcywgcGlja2VkKTtcbn1cbmNsYXNzIFN0YWNrSXRlcmF0b3Ige1xuICAgIGNvbnN0cnVjdG9yKGhlYWRzLCBub2RlKSB7XG4gICAgICAgIHRoaXMuaGVhZHMgPSBoZWFkcztcbiAgICAgICAgdGhpcy5ub2RlID0gbm9kZTtcbiAgICB9XG4gICAgZ2V0IG5leHQoKSB7IHJldHVybiBpdGVyU3RhY2sodGhpcy5oZWFkcyk7IH1cbn1cbmZ1bmN0aW9uIHN0YWNrSXRlcmF0b3IodHJlZSwgcG9zLCBzaWRlKSB7XG4gICAgbGV0IGlubmVyID0gdHJlZS5yZXNvbHZlSW5uZXIocG9zLCBzaWRlKSwgbGF5ZXJzID0gbnVsbDtcbiAgICBmb3IgKGxldCBzY2FuID0gaW5uZXIgaW5zdGFuY2VvZiBUcmVlTm9kZSA/IGlubmVyIDogaW5uZXIuY29udGV4dC5wYXJlbnQ7IHNjYW47IHNjYW4gPSBzY2FuLnBhcmVudCkge1xuICAgICAgICBpZiAoc2Nhbi5pbmRleCA8IDApIHsgLy8gVGhpcyBpcyBhbiBvdmVybGF5IHJvb3RcbiAgICAgICAgICAgIGxldCBwYXJlbnQgPSBzY2FuLnBhcmVudDtcbiAgICAgICAgICAgIChsYXllcnMgfHwgKGxheWVycyA9IFtpbm5lcl0pKS5wdXNoKHBhcmVudC5yZXNvbHZlKHBvcywgc2lkZSkpO1xuICAgICAgICAgICAgc2NhbiA9IHBhcmVudDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGxldCBtb3VudCA9IE1vdW50ZWRUcmVlLmdldChzY2FuLnRyZWUpO1xuICAgICAgICAgICAgLy8gUmVsZXZhbnQgb3ZlcmxheSBicmFuY2hpbmcgb2ZmXG4gICAgICAgICAgICBpZiAobW91bnQgJiYgbW91bnQub3ZlcmxheSAmJiBtb3VudC5vdmVybGF5WzBdLmZyb20gPD0gcG9zICYmIG1vdW50Lm92ZXJsYXlbbW91bnQub3ZlcmxheS5sZW5ndGggLSAxXS50byA+PSBwb3MpIHtcbiAgICAgICAgICAgICAgICBsZXQgcm9vdCA9IG5ldyBUcmVlTm9kZShtb3VudC50cmVlLCBtb3VudC5vdmVybGF5WzBdLmZyb20gKyBzY2FuLmZyb20sIC0xLCBzY2FuKTtcbiAgICAgICAgICAgICAgICAobGF5ZXJzIHx8IChsYXllcnMgPSBbaW5uZXJdKSkucHVzaChyZXNvbHZlTm9kZShyb290LCBwb3MsIHNpZGUsIGZhbHNlKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGxheWVycyA/IGl0ZXJTdGFjayhsYXllcnMpIDogaW5uZXI7XG59XG4vKipcbkEgdHJlZSBjdXJzb3Igb2JqZWN0IGZvY3VzZXMgb24gYSBnaXZlbiBub2RlIGluIGEgc3ludGF4IHRyZWUsIGFuZFxuYWxsb3dzIHlvdSB0byBtb3ZlIHRvIGFkamFjZW50IG5vZGVzLlxuKi9cbmNsYXNzIFRyZWVDdXJzb3Ige1xuICAgIC8qKlxuICAgIFNob3J0aGFuZCBmb3IgYC50eXBlLm5hbWVgLlxuICAgICovXG4gICAgZ2V0IG5hbWUoKSB7IHJldHVybiB0aGlzLnR5cGUubmFtZTsgfVxuICAgIC8qKlxuICAgIEBpbnRlcm5hbFxuICAgICovXG4gICAgY29uc3RydWN0b3Iobm9kZSwgbW9kZSA9IDApIHtcbiAgICAgICAgLyoqXG4gICAgICAgIEBpbnRlcm5hbFxuICAgICAgICAqL1xuICAgICAgICB0aGlzLmJ1ZmZlciA9IG51bGw7XG4gICAgICAgIHRoaXMuc3RhY2sgPSBbXTtcbiAgICAgICAgLyoqXG4gICAgICAgIEBpbnRlcm5hbFxuICAgICAgICAqL1xuICAgICAgICB0aGlzLmluZGV4ID0gMDtcbiAgICAgICAgdGhpcy5idWZmZXJOb2RlID0gbnVsbDtcbiAgICAgICAgdGhpcy5tb2RlID0gbW9kZSAmIH5JdGVyTW9kZS5FbnRlckJyYWNrZXRlZDtcbiAgICAgICAgaWYgKG5vZGUgaW5zdGFuY2VvZiBUcmVlTm9kZSkge1xuICAgICAgICAgICAgdGhpcy55aWVsZE5vZGUobm9kZSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLl90cmVlID0gbm9kZS5jb250ZXh0LnBhcmVudDtcbiAgICAgICAgICAgIHRoaXMuYnVmZmVyID0gbm9kZS5jb250ZXh0O1xuICAgICAgICAgICAgZm9yIChsZXQgbiA9IG5vZGUuX3BhcmVudDsgbjsgbiA9IG4uX3BhcmVudClcbiAgICAgICAgICAgICAgICB0aGlzLnN0YWNrLnVuc2hpZnQobi5pbmRleCk7XG4gICAgICAgICAgICB0aGlzLmJ1ZmZlck5vZGUgPSBub2RlO1xuICAgICAgICAgICAgdGhpcy55aWVsZEJ1Zihub2RlLmluZGV4KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICB5aWVsZE5vZGUobm9kZSkge1xuICAgICAgICBpZiAoIW5vZGUpXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIHRoaXMuX3RyZWUgPSBub2RlO1xuICAgICAgICB0aGlzLnR5cGUgPSBub2RlLnR5cGU7XG4gICAgICAgIHRoaXMuZnJvbSA9IG5vZGUuZnJvbTtcbiAgICAgICAgdGhpcy50byA9IG5vZGUudG87XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICB5aWVsZEJ1ZihpbmRleCwgdHlwZSkge1xuICAgICAgICB0aGlzLmluZGV4ID0gaW5kZXg7XG4gICAgICAgIGxldCB7IHN0YXJ0LCBidWZmZXIgfSA9IHRoaXMuYnVmZmVyO1xuICAgICAgICB0aGlzLnR5cGUgPSB0eXBlIHx8IGJ1ZmZlci5zZXQudHlwZXNbYnVmZmVyLmJ1ZmZlcltpbmRleF1dO1xuICAgICAgICB0aGlzLmZyb20gPSBzdGFydCArIGJ1ZmZlci5idWZmZXJbaW5kZXggKyAxXTtcbiAgICAgICAgdGhpcy50byA9IHN0YXJ0ICsgYnVmZmVyLmJ1ZmZlcltpbmRleCArIDJdO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgLyoqXG4gICAgQGludGVybmFsXG4gICAgKi9cbiAgICB5aWVsZChub2RlKSB7XG4gICAgICAgIGlmICghbm9kZSlcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgaWYgKG5vZGUgaW5zdGFuY2VvZiBUcmVlTm9kZSkge1xuICAgICAgICAgICAgdGhpcy5idWZmZXIgPSBudWxsO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMueWllbGROb2RlKG5vZGUpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuYnVmZmVyID0gbm9kZS5jb250ZXh0O1xuICAgICAgICByZXR1cm4gdGhpcy55aWVsZEJ1Zihub2RlLmluZGV4LCBub2RlLnR5cGUpO1xuICAgIH1cbiAgICAvKipcbiAgICBAaW50ZXJuYWxcbiAgICAqL1xuICAgIHRvU3RyaW5nKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5idWZmZXIgPyB0aGlzLmJ1ZmZlci5idWZmZXIuY2hpbGRTdHJpbmcodGhpcy5pbmRleCkgOiB0aGlzLl90cmVlLnRvU3RyaW5nKCk7XG4gICAgfVxuICAgIC8qKlxuICAgIEBpbnRlcm5hbFxuICAgICovXG4gICAgZW50ZXJDaGlsZChkaXIsIHBvcywgc2lkZSkge1xuICAgICAgICBpZiAoIXRoaXMuYnVmZmVyKVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMueWllbGQodGhpcy5fdHJlZS5uZXh0Q2hpbGQoZGlyIDwgMCA/IHRoaXMuX3RyZWUuX3RyZWUuY2hpbGRyZW4ubGVuZ3RoIC0gMSA6IDAsIGRpciwgcG9zLCBzaWRlLCB0aGlzLm1vZGUpKTtcbiAgICAgICAgbGV0IHsgYnVmZmVyIH0gPSB0aGlzLmJ1ZmZlcjtcbiAgICAgICAgbGV0IGluZGV4ID0gYnVmZmVyLmZpbmRDaGlsZCh0aGlzLmluZGV4ICsgNCwgYnVmZmVyLmJ1ZmZlclt0aGlzLmluZGV4ICsgM10sIGRpciwgcG9zIC0gdGhpcy5idWZmZXIuc3RhcnQsIHNpZGUpO1xuICAgICAgICBpZiAoaW5kZXggPCAwKVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB0aGlzLnN0YWNrLnB1c2godGhpcy5pbmRleCk7XG4gICAgICAgIHJldHVybiB0aGlzLnlpZWxkQnVmKGluZGV4KTtcbiAgICB9XG4gICAgLyoqXG4gICAgTW92ZSB0aGUgY3Vyc29yIHRvIHRoaXMgbm9kZSdzIGZpcnN0IGNoaWxkLiBXaGVuIHRoaXMgcmV0dXJuc1xuICAgIGZhbHNlLCB0aGUgbm9kZSBoYXMgbm8gY2hpbGQsIGFuZCB0aGUgY3Vyc29yIGhhcyBub3QgYmVlbiBtb3ZlZC5cbiAgICAqL1xuICAgIGZpcnN0Q2hpbGQoKSB7IHJldHVybiB0aGlzLmVudGVyQ2hpbGQoMSwgMCwgNCAvKiBTaWRlLkRvbnRDYXJlICovKTsgfVxuICAgIC8qKlxuICAgIE1vdmUgdGhlIGN1cnNvciB0byB0aGlzIG5vZGUncyBsYXN0IGNoaWxkLlxuICAgICovXG4gICAgbGFzdENoaWxkKCkgeyByZXR1cm4gdGhpcy5lbnRlckNoaWxkKC0xLCAwLCA0IC8qIFNpZGUuRG9udENhcmUgKi8pOyB9XG4gICAgLyoqXG4gICAgTW92ZSB0aGUgY3Vyc29yIHRvIHRoZSBmaXJzdCBjaGlsZCB0aGF0IGVuZHMgYWZ0ZXIgYHBvc2AuXG4gICAgKi9cbiAgICBjaGlsZEFmdGVyKHBvcykgeyByZXR1cm4gdGhpcy5lbnRlckNoaWxkKDEsIHBvcywgMiAvKiBTaWRlLkFmdGVyICovKTsgfVxuICAgIC8qKlxuICAgIE1vdmUgdG8gdGhlIGxhc3QgY2hpbGQgdGhhdCBzdGFydHMgYmVmb3JlIGBwb3NgLlxuICAgICovXG4gICAgY2hpbGRCZWZvcmUocG9zKSB7IHJldHVybiB0aGlzLmVudGVyQ2hpbGQoLTEsIHBvcywgLTIgLyogU2lkZS5CZWZvcmUgKi8pOyB9XG4gICAgLyoqXG4gICAgTW92ZSB0aGUgY3Vyc29yIHRvIHRoZSBjaGlsZCBhcm91bmQgYHBvc2AuIElmIHNpZGUgaXMgLTEgdGhlXG4gICAgY2hpbGQgbWF5IGVuZCBhdCB0aGF0IHBvc2l0aW9uLCB3aGVuIDEgaXQgbWF5IHN0YXJ0IHRoZXJlLiBUaGlzXG4gICAgd2lsbCBhbHNvIGVudGVyIFtvdmVybGFpZF0oI2NvbW1vbi5Nb3VudGVkVHJlZS5vdmVybGF5KVxuICAgIFttb3VudGVkXSgjY29tbW9uLk5vZGVQcm9wXm1vdW50ZWQpIHRyZWVzIHVubGVzcyBgb3ZlcmxheXNgIGlzXG4gICAgc2V0IHRvIGZhbHNlLlxuICAgICovXG4gICAgZW50ZXIocG9zLCBzaWRlLCBtb2RlID0gdGhpcy5tb2RlKSB7XG4gICAgICAgIGlmICghdGhpcy5idWZmZXIpXG4gICAgICAgICAgICByZXR1cm4gdGhpcy55aWVsZCh0aGlzLl90cmVlLmVudGVyKHBvcywgc2lkZSwgbW9kZSkpO1xuICAgICAgICByZXR1cm4gbW9kZSAmIEl0ZXJNb2RlLkV4Y2x1ZGVCdWZmZXJzID8gZmFsc2UgOiB0aGlzLmVudGVyQ2hpbGQoMSwgcG9zLCBzaWRlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgTW92ZSB0byB0aGUgbm9kZSdzIHBhcmVudCBub2RlLCBpZiB0aGlzIGlzbid0IHRoZSB0b3Agbm9kZS5cbiAgICAqL1xuICAgIHBhcmVudCgpIHtcbiAgICAgICAgaWYgKCF0aGlzLmJ1ZmZlcilcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnlpZWxkTm9kZSgodGhpcy5tb2RlICYgSXRlck1vZGUuSW5jbHVkZUFub255bW91cykgPyB0aGlzLl90cmVlLl9wYXJlbnQgOiB0aGlzLl90cmVlLnBhcmVudCk7XG4gICAgICAgIGlmICh0aGlzLnN0YWNrLmxlbmd0aClcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnlpZWxkQnVmKHRoaXMuc3RhY2sucG9wKCkpO1xuICAgICAgICBsZXQgcGFyZW50ID0gKHRoaXMubW9kZSAmIEl0ZXJNb2RlLkluY2x1ZGVBbm9ueW1vdXMpID8gdGhpcy5idWZmZXIucGFyZW50IDogdGhpcy5idWZmZXIucGFyZW50Lm5leHRTaWduaWZpY2FudFBhcmVudCgpO1xuICAgICAgICB0aGlzLmJ1ZmZlciA9IG51bGw7XG4gICAgICAgIHJldHVybiB0aGlzLnlpZWxkTm9kZShwYXJlbnQpO1xuICAgIH1cbiAgICAvKipcbiAgICBAaW50ZXJuYWxcbiAgICAqL1xuICAgIHNpYmxpbmcoZGlyKSB7XG4gICAgICAgIGlmICghdGhpcy5idWZmZXIpXG4gICAgICAgICAgICByZXR1cm4gIXRoaXMuX3RyZWUuX3BhcmVudCA/IGZhbHNlXG4gICAgICAgICAgICAgICAgOiB0aGlzLnlpZWxkKHRoaXMuX3RyZWUuaW5kZXggPCAwID8gbnVsbFxuICAgICAgICAgICAgICAgICAgICA6IHRoaXMuX3RyZWUuX3BhcmVudC5uZXh0Q2hpbGQodGhpcy5fdHJlZS5pbmRleCArIGRpciwgZGlyLCAwLCA0IC8qIFNpZGUuRG9udENhcmUgKi8sIHRoaXMubW9kZSkpO1xuICAgICAgICBsZXQgeyBidWZmZXIgfSA9IHRoaXMuYnVmZmVyLCBkID0gdGhpcy5zdGFjay5sZW5ndGggLSAxO1xuICAgICAgICBpZiAoZGlyIDwgMCkge1xuICAgICAgICAgICAgbGV0IHBhcmVudFN0YXJ0ID0gZCA8IDAgPyAwIDogdGhpcy5zdGFja1tkXSArIDQ7XG4gICAgICAgICAgICBpZiAodGhpcy5pbmRleCAhPSBwYXJlbnRTdGFydClcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy55aWVsZEJ1ZihidWZmZXIuZmluZENoaWxkKHBhcmVudFN0YXJ0LCB0aGlzLmluZGV4LCAtMSwgMCwgNCAvKiBTaWRlLkRvbnRDYXJlICovKSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBsZXQgYWZ0ZXIgPSBidWZmZXIuYnVmZmVyW3RoaXMuaW5kZXggKyAzXTtcbiAgICAgICAgICAgIGlmIChhZnRlciA8IChkIDwgMCA/IGJ1ZmZlci5idWZmZXIubGVuZ3RoIDogYnVmZmVyLmJ1ZmZlclt0aGlzLnN0YWNrW2RdICsgM10pKVxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnlpZWxkQnVmKGFmdGVyKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZCA8IDAgPyB0aGlzLnlpZWxkKHRoaXMuYnVmZmVyLnBhcmVudC5uZXh0Q2hpbGQodGhpcy5idWZmZXIuaW5kZXggKyBkaXIsIGRpciwgMCwgNCAvKiBTaWRlLkRvbnRDYXJlICovLCB0aGlzLm1vZGUpKSA6IGZhbHNlO1xuICAgIH1cbiAgICAvKipcbiAgICBNb3ZlIHRvIHRoaXMgbm9kZSdzIG5leHQgc2libGluZywgaWYgYW55LlxuICAgICovXG4gICAgbmV4dFNpYmxpbmcoKSB7IHJldHVybiB0aGlzLnNpYmxpbmcoMSk7IH1cbiAgICAvKipcbiAgICBNb3ZlIHRvIHRoaXMgbm9kZSdzIHByZXZpb3VzIHNpYmxpbmcsIGlmIGFueS5cbiAgICAqL1xuICAgIHByZXZTaWJsaW5nKCkgeyByZXR1cm4gdGhpcy5zaWJsaW5nKC0xKTsgfVxuICAgIGF0TGFzdE5vZGUoZGlyKSB7XG4gICAgICAgIGxldCBpbmRleCwgcGFyZW50LCB7IGJ1ZmZlciB9ID0gdGhpcztcbiAgICAgICAgaWYgKGJ1ZmZlcikge1xuICAgICAgICAgICAgaWYgKGRpciA+IDApIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5pbmRleCA8IGJ1ZmZlci5idWZmZXIuYnVmZmVyLmxlbmd0aClcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmluZGV4OyBpKyspXG4gICAgICAgICAgICAgICAgICAgIGlmIChidWZmZXIuYnVmZmVyLmJ1ZmZlcltpICsgM10gPCB0aGlzLmluZGV4KVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgKHsgaW5kZXgsIHBhcmVudCB9ID0gYnVmZmVyKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICh7IGluZGV4LCBfcGFyZW50OiBwYXJlbnQgfSA9IHRoaXMuX3RyZWUpO1xuICAgICAgICB9XG4gICAgICAgIGZvciAoOyBwYXJlbnQ7IHsgaW5kZXgsIF9wYXJlbnQ6IHBhcmVudCB9ID0gcGFyZW50KSB7XG4gICAgICAgICAgICBpZiAoaW5kZXggPiAtMSlcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gaW5kZXggKyBkaXIsIGUgPSBkaXIgPCAwID8gLTEgOiBwYXJlbnQuX3RyZWUuY2hpbGRyZW4ubGVuZ3RoOyBpICE9IGU7IGkgKz0gZGlyKSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBjaGlsZCA9IHBhcmVudC5fdHJlZS5jaGlsZHJlbltpXTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCh0aGlzLm1vZGUgJiBJdGVyTW9kZS5JbmNsdWRlQW5vbnltb3VzKSB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgY2hpbGQgaW5zdGFuY2VvZiBUcmVlQnVmZmVyIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAhY2hpbGQudHlwZS5pc0Fub255bW91cyB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgaGFzQ2hpbGQoY2hpbGQpKVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgbW92ZShkaXIsIGVudGVyKSB7XG4gICAgICAgIGlmIChlbnRlciAmJiB0aGlzLmVudGVyQ2hpbGQoZGlyLCAwLCA0IC8qIFNpZGUuRG9udENhcmUgKi8pKVxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIGZvciAoOzspIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnNpYmxpbmcoZGlyKSlcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIGlmICh0aGlzLmF0TGFzdE5vZGUoZGlyKSB8fCAhdGhpcy5wYXJlbnQoKSlcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgTW92ZSB0byB0aGUgbmV4dCBub2RlIGluIGFcbiAgICBbcHJlLW9yZGVyXShodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9UcmVlX3RyYXZlcnNhbCNQcmUtb3JkZXIsX05MUilcbiAgICB0cmF2ZXJzYWwsIGdvaW5nIGZyb20gYSBub2RlIHRvIGl0cyBmaXJzdCBjaGlsZCBvciwgaWYgdGhlXG4gICAgY3VycmVudCBub2RlIGlzIGVtcHR5IG9yIGBlbnRlcmAgaXMgZmFsc2UsIGl0cyBuZXh0IHNpYmxpbmcgb3JcbiAgICB0aGUgbmV4dCBzaWJsaW5nIG9mIHRoZSBmaXJzdCBwYXJlbnQgbm9kZSB0aGF0IGhhcyBvbmUuXG4gICAgKi9cbiAgICBuZXh0KGVudGVyID0gdHJ1ZSkgeyByZXR1cm4gdGhpcy5tb3ZlKDEsIGVudGVyKTsgfVxuICAgIC8qKlxuICAgIE1vdmUgdG8gdGhlIG5leHQgbm9kZSBpbiBhIGxhc3QtdG8tZmlyc3QgcHJlLW9yZGVyIHRyYXZlcnNhbC4gQVxuICAgIG5vZGUgaXMgZm9sbG93ZWQgYnkgaXRzIGxhc3QgY2hpbGQgb3IsIGlmIGl0IGhhcyBub25lLCBpdHNcbiAgICBwcmV2aW91cyBzaWJsaW5nIG9yIHRoZSBwcmV2aW91cyBzaWJsaW5nIG9mIHRoZSBmaXJzdCBwYXJlbnRcbiAgICBub2RlIHRoYXQgaGFzIG9uZS5cbiAgICAqL1xuICAgIHByZXYoZW50ZXIgPSB0cnVlKSB7IHJldHVybiB0aGlzLm1vdmUoLTEsIGVudGVyKTsgfVxuICAgIC8qKlxuICAgIE1vdmUgdGhlIGN1cnNvciB0byB0aGUgaW5uZXJtb3N0IG5vZGUgdGhhdCBjb3ZlcnMgYHBvc2AuIElmXG4gICAgYHNpZGVgIGlzIC0xLCBpdCB3aWxsIGVudGVyIG5vZGVzIHRoYXQgZW5kIGF0IGBwb3NgLiBJZiBpdCBpcyAxLFxuICAgIGl0IHdpbGwgZW50ZXIgbm9kZXMgdGhhdCBzdGFydCBhdCBgcG9zYC5cbiAgICAqL1xuICAgIG1vdmVUbyhwb3MsIHNpZGUgPSAwKSB7XG4gICAgICAgIC8vIE1vdmUgdXAgdG8gYSBub2RlIHRoYXQgYWN0dWFsbHkgaG9sZHMgdGhlIHBvc2l0aW9uLCBpZiBwb3NzaWJsZVxuICAgICAgICB3aGlsZSAodGhpcy5mcm9tID09IHRoaXMudG8gfHxcbiAgICAgICAgICAgIChzaWRlIDwgMSA/IHRoaXMuZnJvbSA+PSBwb3MgOiB0aGlzLmZyb20gPiBwb3MpIHx8XG4gICAgICAgICAgICAoc2lkZSA+IC0xID8gdGhpcy50byA8PSBwb3MgOiB0aGlzLnRvIDwgcG9zKSlcbiAgICAgICAgICAgIGlmICghdGhpcy5wYXJlbnQoKSlcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgLy8gVGhlbiBzY2FuIGRvd24gaW50byBjaGlsZCBub2RlcyBhcyBmYXIgYXMgcG9zc2libGVcbiAgICAgICAgd2hpbGUgKHRoaXMuZW50ZXJDaGlsZCgxLCBwb3MsIHNpZGUpKSB7IH1cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgIEdldCBhIFtzeW50YXggbm9kZV0oI2NvbW1vbi5TeW50YXhOb2RlKSBhdCB0aGUgY3Vyc29yJ3MgY3VycmVudFxuICAgIHBvc2l0aW9uLlxuICAgICovXG4gICAgZ2V0IG5vZGUoKSB7XG4gICAgICAgIGlmICghdGhpcy5idWZmZXIpXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fdHJlZTtcbiAgICAgICAgbGV0IGNhY2hlID0gdGhpcy5idWZmZXJOb2RlLCByZXN1bHQgPSBudWxsLCBkZXB0aCA9IDA7XG4gICAgICAgIGlmIChjYWNoZSAmJiBjYWNoZS5jb250ZXh0ID09IHRoaXMuYnVmZmVyKSB7XG4gICAgICAgICAgICBzY2FuOiBmb3IgKGxldCBpbmRleCA9IHRoaXMuaW5kZXgsIGQgPSB0aGlzLnN0YWNrLmxlbmd0aDsgZCA+PSAwOykge1xuICAgICAgICAgICAgICAgIGZvciAobGV0IGMgPSBjYWNoZTsgYzsgYyA9IGMuX3BhcmVudClcbiAgICAgICAgICAgICAgICAgICAgaWYgKGMuaW5kZXggPT0gaW5kZXgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpbmRleCA9PSB0aGlzLmluZGV4KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBjO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gYztcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlcHRoID0gZCArIDE7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhayBzY2FuO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaW5kZXggPSB0aGlzLnN0YWNrWy0tZF07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZm9yIChsZXQgaSA9IGRlcHRoOyBpIDwgdGhpcy5zdGFjay5sZW5ndGg7IGkrKylcbiAgICAgICAgICAgIHJlc3VsdCA9IG5ldyBCdWZmZXJOb2RlKHRoaXMuYnVmZmVyLCByZXN1bHQsIHRoaXMuc3RhY2tbaV0pO1xuICAgICAgICByZXR1cm4gdGhpcy5idWZmZXJOb2RlID0gbmV3IEJ1ZmZlck5vZGUodGhpcy5idWZmZXIsIHJlc3VsdCwgdGhpcy5pbmRleCk7XG4gICAgfVxuICAgIC8qKlxuICAgIEdldCB0aGUgW3RyZWVdKCNjb21tb24uVHJlZSkgdGhhdCByZXByZXNlbnRzIHRoZSBjdXJyZW50IG5vZGUsIGlmXG4gICAgYW55LiBXaWxsIHJldHVybiBudWxsIHdoZW4gdGhlIG5vZGUgaXMgaW4gYSBbdHJlZVxuICAgIGJ1ZmZlcl0oI2NvbW1vbi5UcmVlQnVmZmVyKS5cbiAgICAqL1xuICAgIGdldCB0cmVlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5idWZmZXIgPyBudWxsIDogdGhpcy5fdHJlZS5fdHJlZTtcbiAgICB9XG4gICAgLyoqXG4gICAgSXRlcmF0ZSBvdmVyIHRoZSBjdXJyZW50IG5vZGUgYW5kIGFsbCBpdHMgZGVzY2VuZGFudHMsIGNhbGxpbmdcbiAgICBgZW50ZXJgIHdoZW4gZW50ZXJpbmcgYSBub2RlIGFuZCBgbGVhdmVgLCBpZiBnaXZlbiwgd2hlbiBsZWF2aW5nXG4gICAgb25lLiBXaGVuIGBlbnRlcmAgcmV0dXJucyBgZmFsc2VgLCBhbnkgY2hpbGRyZW4gb2YgdGhhdCBub2RlIGFyZVxuICAgIHNraXBwZWQsIGFuZCBgbGVhdmVgIGlzbid0IGNhbGxlZCBmb3IgaXQuXG4gICAgKi9cbiAgICBpdGVyYXRlKGVudGVyLCBsZWF2ZSkge1xuICAgICAgICBmb3IgKGxldCBkZXB0aCA9IDA7Oykge1xuICAgICAgICAgICAgbGV0IG11c3RMZWF2ZSA9IGZhbHNlO1xuICAgICAgICAgICAgaWYgKHRoaXMudHlwZS5pc0Fub255bW91cyB8fCBlbnRlcih0aGlzKSAhPT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5maXJzdENoaWxkKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgZGVwdGgrKztcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICghdGhpcy50eXBlLmlzQW5vbnltb3VzKVxuICAgICAgICAgICAgICAgICAgICBtdXN0TGVhdmUgPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZm9yICg7Oykge1xuICAgICAgICAgICAgICAgIGlmIChtdXN0TGVhdmUgJiYgbGVhdmUpXG4gICAgICAgICAgICAgICAgICAgIGxlYXZlKHRoaXMpO1xuICAgICAgICAgICAgICAgIG11c3RMZWF2ZSA9IHRoaXMudHlwZS5pc0Fub255bW91cztcbiAgICAgICAgICAgICAgICBpZiAoIWRlcHRoKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMubmV4dFNpYmxpbmcoKSlcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgdGhpcy5wYXJlbnQoKTtcbiAgICAgICAgICAgICAgICBkZXB0aC0tO1xuICAgICAgICAgICAgICAgIG11c3RMZWF2ZSA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgVGVzdCB3aGV0aGVyIHRoZSBjdXJyZW50IG5vZGUgbWF0Y2hlcyBhIGdpdmVuIGNvbnRleHTigJRhIHNlcXVlbmNlXG4gICAgb2YgZGlyZWN0IHBhcmVudCBub2RlIG5hbWVzLiBFbXB0eSBzdHJpbmdzIGluIHRoZSBjb250ZXh0IGFycmF5XG4gICAgYXJlIHRyZWF0ZWQgYXMgd2lsZGNhcmRzLlxuICAgICovXG4gICAgbWF0Y2hDb250ZXh0KGNvbnRleHQpIHtcbiAgICAgICAgaWYgKCF0aGlzLmJ1ZmZlcilcbiAgICAgICAgICAgIHJldHVybiBtYXRjaE5vZGVDb250ZXh0KHRoaXMubm9kZS5wYXJlbnQsIGNvbnRleHQpO1xuICAgICAgICBsZXQgeyBidWZmZXIgfSA9IHRoaXMuYnVmZmVyLCB7IHR5cGVzIH0gPSBidWZmZXIuc2V0O1xuICAgICAgICBmb3IgKGxldCBpID0gY29udGV4dC5sZW5ndGggLSAxLCBkID0gdGhpcy5zdGFjay5sZW5ndGggLSAxOyBpID49IDA7IGQtLSkge1xuICAgICAgICAgICAgaWYgKGQgPCAwKVxuICAgICAgICAgICAgICAgIHJldHVybiBtYXRjaE5vZGVDb250ZXh0KHRoaXMuX3RyZWUsIGNvbnRleHQsIGkpO1xuICAgICAgICAgICAgbGV0IHR5cGUgPSB0eXBlc1tidWZmZXIuYnVmZmVyW3RoaXMuc3RhY2tbZF1dXTtcbiAgICAgICAgICAgIGlmICghdHlwZS5pc0Fub255bW91cykge1xuICAgICAgICAgICAgICAgIGlmIChjb250ZXh0W2ldICYmIGNvbnRleHRbaV0gIT0gdHlwZS5uYW1lKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgaS0tO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGhhc0NoaWxkKHRyZWUpIHtcbiAgICByZXR1cm4gdHJlZS5jaGlsZHJlbi5zb21lKGNoID0+IGNoIGluc3RhbmNlb2YgVHJlZUJ1ZmZlciB8fCAhY2gudHlwZS5pc0Fub255bW91cyB8fCBoYXNDaGlsZChjaCkpO1xufVxuZnVuY3Rpb24gYnVpbGRUcmVlKGRhdGEpIHtcbiAgICB2YXIgX2E7XG4gICAgbGV0IHsgYnVmZmVyLCBub2RlU2V0LCBtYXhCdWZmZXJMZW5ndGggPSBEZWZhdWx0QnVmZmVyTGVuZ3RoLCByZXVzZWQgPSBbXSwgbWluUmVwZWF0VHlwZSA9IG5vZGVTZXQudHlwZXMubGVuZ3RoIH0gPSBkYXRhO1xuICAgIGxldCBjdXJzb3IgPSBBcnJheS5pc0FycmF5KGJ1ZmZlcikgPyBuZXcgRmxhdEJ1ZmZlckN1cnNvcihidWZmZXIsIGJ1ZmZlci5sZW5ndGgpIDogYnVmZmVyO1xuICAgIGxldCB0eXBlcyA9IG5vZGVTZXQudHlwZXM7XG4gICAgbGV0IGNvbnRleHRIYXNoID0gMCwgbG9va0FoZWFkID0gMDtcbiAgICBmdW5jdGlvbiB0YWtlTm9kZShwYXJlbnRTdGFydCwgbWluUG9zLCBjaGlsZHJlbiwgcG9zaXRpb25zLCBpblJlcGVhdCwgZGVwdGgpIHtcbiAgICAgICAgbGV0IHsgaWQsIHN0YXJ0LCBlbmQsIHNpemUgfSA9IGN1cnNvcjtcbiAgICAgICAgbGV0IGxvb2tBaGVhZEF0U3RhcnQgPSBsb29rQWhlYWQsIGNvbnRleHRBdFN0YXJ0ID0gY29udGV4dEhhc2g7XG4gICAgICAgIGlmIChzaXplIDwgMCkge1xuICAgICAgICAgICAgY3Vyc29yLm5leHQoKTtcbiAgICAgICAgICAgIGlmIChzaXplID09IC0xIC8qIFNwZWNpYWxSZWNvcmQuUmV1c2UgKi8pIHtcbiAgICAgICAgICAgICAgICBsZXQgbm9kZSA9IHJldXNlZFtpZF07XG4gICAgICAgICAgICAgICAgY2hpbGRyZW4ucHVzaChub2RlKTtcbiAgICAgICAgICAgICAgICBwb3NpdGlvbnMucHVzaChzdGFydCAtIHBhcmVudFN0YXJ0KTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChzaXplID09IC0zIC8qIFNwZWNpYWxSZWNvcmQuQ29udGV4dENoYW5nZSAqLykgeyAvLyBDb250ZXh0IGNoYW5nZVxuICAgICAgICAgICAgICAgIGNvbnRleHRIYXNoID0gaWQ7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoc2l6ZSA9PSAtNCAvKiBTcGVjaWFsUmVjb3JkLkxvb2tBaGVhZCAqLykge1xuICAgICAgICAgICAgICAgIGxvb2tBaGVhZCA9IGlkO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBSYW5nZUVycm9yKGBVbnJlY29nbml6ZWQgcmVjb3JkIHNpemU6ICR7c2l6ZX1gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBsZXQgdHlwZSA9IHR5cGVzW2lkXSwgbm9kZSwgYnVmZmVyO1xuICAgICAgICBsZXQgc3RhcnRQb3MgPSBzdGFydCAtIHBhcmVudFN0YXJ0O1xuICAgICAgICBpZiAoZW5kIC0gc3RhcnQgPD0gbWF4QnVmZmVyTGVuZ3RoICYmIChidWZmZXIgPSBmaW5kQnVmZmVyU2l6ZShjdXJzb3IucG9zIC0gbWluUG9zLCBpblJlcGVhdCkpKSB7XG4gICAgICAgICAgICAvLyBTbWFsbCBlbm91Z2ggZm9yIGEgYnVmZmVyLCBhbmQgbm8gcmV1c2VkIG5vZGVzIGluc2lkZVxuICAgICAgICAgICAgbGV0IGRhdGEgPSBuZXcgVWludDE2QXJyYXkoYnVmZmVyLnNpemUgLSBidWZmZXIuc2tpcCk7XG4gICAgICAgICAgICBsZXQgZW5kUG9zID0gY3Vyc29yLnBvcyAtIGJ1ZmZlci5zaXplLCBpbmRleCA9IGRhdGEubGVuZ3RoO1xuICAgICAgICAgICAgd2hpbGUgKGN1cnNvci5wb3MgPiBlbmRQb3MpXG4gICAgICAgICAgICAgICAgaW5kZXggPSBjb3B5VG9CdWZmZXIoYnVmZmVyLnN0YXJ0LCBkYXRhLCBpbmRleCk7XG4gICAgICAgICAgICBub2RlID0gbmV3IFRyZWVCdWZmZXIoZGF0YSwgZW5kIC0gYnVmZmVyLnN0YXJ0LCBub2RlU2V0KTtcbiAgICAgICAgICAgIHN0YXJ0UG9zID0gYnVmZmVyLnN0YXJ0IC0gcGFyZW50U3RhcnQ7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7IC8vIE1ha2UgaXQgYSBub2RlXG4gICAgICAgICAgICBsZXQgZW5kUG9zID0gY3Vyc29yLnBvcyAtIHNpemU7XG4gICAgICAgICAgICBjdXJzb3IubmV4dCgpO1xuICAgICAgICAgICAgbGV0IGxvY2FsQ2hpbGRyZW4gPSBbXSwgbG9jYWxQb3NpdGlvbnMgPSBbXTtcbiAgICAgICAgICAgIGxldCBsb2NhbEluUmVwZWF0ID0gaWQgPj0gbWluUmVwZWF0VHlwZSA/IGlkIDogLTE7XG4gICAgICAgICAgICBsZXQgbGFzdEdyb3VwID0gMCwgbGFzdEVuZCA9IGVuZDtcbiAgICAgICAgICAgIHdoaWxlIChjdXJzb3IucG9zID4gZW5kUG9zKSB7XG4gICAgICAgICAgICAgICAgaWYgKGxvY2FsSW5SZXBlYXQgPj0gMCAmJiBjdXJzb3IuaWQgPT0gbG9jYWxJblJlcGVhdCAmJiBjdXJzb3Iuc2l6ZSA+PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjdXJzb3IuZW5kIDw9IGxhc3RFbmQgLSBtYXhCdWZmZXJMZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1ha2VSZXBlYXRMZWFmKGxvY2FsQ2hpbGRyZW4sIGxvY2FsUG9zaXRpb25zLCBzdGFydCwgbGFzdEdyb3VwLCBjdXJzb3IuZW5kLCBsYXN0RW5kLCBsb2NhbEluUmVwZWF0LCBsb29rQWhlYWRBdFN0YXJ0LCBjb250ZXh0QXRTdGFydCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBsYXN0R3JvdXAgPSBsb2NhbENoaWxkcmVuLmxlbmd0aDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxhc3RFbmQgPSBjdXJzb3IuZW5kO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGN1cnNvci5uZXh0KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGRlcHRoID4gMjUwMCAvKiBDdXRPZmYuRGVwdGggKi8pIHtcbiAgICAgICAgICAgICAgICAgICAgdGFrZUZsYXROb2RlKHN0YXJ0LCBlbmRQb3MsIGxvY2FsQ2hpbGRyZW4sIGxvY2FsUG9zaXRpb25zKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRha2VOb2RlKHN0YXJ0LCBlbmRQb3MsIGxvY2FsQ2hpbGRyZW4sIGxvY2FsUG9zaXRpb25zLCBsb2NhbEluUmVwZWF0LCBkZXB0aCArIDEpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChsb2NhbEluUmVwZWF0ID49IDAgJiYgbGFzdEdyb3VwID4gMCAmJiBsYXN0R3JvdXAgPCBsb2NhbENoaWxkcmVuLmxlbmd0aClcbiAgICAgICAgICAgICAgICBtYWtlUmVwZWF0TGVhZihsb2NhbENoaWxkcmVuLCBsb2NhbFBvc2l0aW9ucywgc3RhcnQsIGxhc3RHcm91cCwgc3RhcnQsIGxhc3RFbmQsIGxvY2FsSW5SZXBlYXQsIGxvb2tBaGVhZEF0U3RhcnQsIGNvbnRleHRBdFN0YXJ0KTtcbiAgICAgICAgICAgIGxvY2FsQ2hpbGRyZW4ucmV2ZXJzZSgpO1xuICAgICAgICAgICAgbG9jYWxQb3NpdGlvbnMucmV2ZXJzZSgpO1xuICAgICAgICAgICAgaWYgKGxvY2FsSW5SZXBlYXQgPiAtMSAmJiBsYXN0R3JvdXAgPiAwKSB7XG4gICAgICAgICAgICAgICAgbGV0IG1ha2UgPSBtYWtlQmFsYW5jZWQodHlwZSwgY29udGV4dEF0U3RhcnQpO1xuICAgICAgICAgICAgICAgIG5vZGUgPSBiYWxhbmNlUmFuZ2UodHlwZSwgbG9jYWxDaGlsZHJlbiwgbG9jYWxQb3NpdGlvbnMsIDAsIGxvY2FsQ2hpbGRyZW4ubGVuZ3RoLCAwLCBlbmQgLSBzdGFydCwgbWFrZSwgbWFrZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBub2RlID0gbWFrZVRyZWUodHlwZSwgbG9jYWxDaGlsZHJlbiwgbG9jYWxQb3NpdGlvbnMsIGVuZCAtIHN0YXJ0LCBsb29rQWhlYWRBdFN0YXJ0IC0gZW5kLCBjb250ZXh0QXRTdGFydCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY2hpbGRyZW4ucHVzaChub2RlKTtcbiAgICAgICAgcG9zaXRpb25zLnB1c2goc3RhcnRQb3MpO1xuICAgIH1cbiAgICBmdW5jdGlvbiB0YWtlRmxhdE5vZGUocGFyZW50U3RhcnQsIG1pblBvcywgY2hpbGRyZW4sIHBvc2l0aW9ucykge1xuICAgICAgICBsZXQgbm9kZXMgPSBbXTsgLy8gVGVtcG9yYXJ5LCBpbnZlcnRlZCBhcnJheSBvZiBsZWFmIG5vZGVzIGZvdW5kLCB3aXRoIGFic29sdXRlIHBvc2l0aW9uc1xuICAgICAgICBsZXQgbm9kZUNvdW50ID0gMCwgc3RvcEF0ID0gLTE7XG4gICAgICAgIHdoaWxlIChjdXJzb3IucG9zID4gbWluUG9zKSB7XG4gICAgICAgICAgICBsZXQgeyBpZCwgc3RhcnQsIGVuZCwgc2l6ZSB9ID0gY3Vyc29yO1xuICAgICAgICAgICAgaWYgKHNpemUgPiA0KSB7IC8vIE5vdCBhIGxlYWZcbiAgICAgICAgICAgICAgICBjdXJzb3IubmV4dCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoc3RvcEF0ID4gLTEgJiYgc3RhcnQgPCBzdG9wQXQpIHtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGlmIChzdG9wQXQgPCAwKVxuICAgICAgICAgICAgICAgICAgICBzdG9wQXQgPSBlbmQgLSBtYXhCdWZmZXJMZW5ndGg7XG4gICAgICAgICAgICAgICAgbm9kZXMucHVzaChpZCwgc3RhcnQsIGVuZCk7XG4gICAgICAgICAgICAgICAgbm9kZUNvdW50Kys7XG4gICAgICAgICAgICAgICAgY3Vyc29yLm5leHQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAobm9kZUNvdW50KSB7XG4gICAgICAgICAgICBsZXQgYnVmZmVyID0gbmV3IFVpbnQxNkFycmF5KG5vZGVDb3VudCAqIDQpO1xuICAgICAgICAgICAgbGV0IHN0YXJ0ID0gbm9kZXNbbm9kZXMubGVuZ3RoIC0gMl07XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gbm9kZXMubGVuZ3RoIC0gMywgaiA9IDA7IGkgPj0gMDsgaSAtPSAzKSB7XG4gICAgICAgICAgICAgICAgYnVmZmVyW2orK10gPSBub2Rlc1tpXTtcbiAgICAgICAgICAgICAgICBidWZmZXJbaisrXSA9IG5vZGVzW2kgKyAxXSAtIHN0YXJ0O1xuICAgICAgICAgICAgICAgIGJ1ZmZlcltqKytdID0gbm9kZXNbaSArIDJdIC0gc3RhcnQ7XG4gICAgICAgICAgICAgICAgYnVmZmVyW2orK10gPSBqO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2hpbGRyZW4ucHVzaChuZXcgVHJlZUJ1ZmZlcihidWZmZXIsIG5vZGVzWzJdIC0gc3RhcnQsIG5vZGVTZXQpKTtcbiAgICAgICAgICAgIHBvc2l0aW9ucy5wdXNoKHN0YXJ0IC0gcGFyZW50U3RhcnQpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGZ1bmN0aW9uIG1ha2VCYWxhbmNlZCh0eXBlLCBjb250ZXh0SGFzaCkge1xuICAgICAgICByZXR1cm4gKGNoaWxkcmVuLCBwb3NpdGlvbnMsIGxlbmd0aCkgPT4ge1xuICAgICAgICAgICAgbGV0IGxvb2tBaGVhZCA9IDAsIGxhc3RJID0gY2hpbGRyZW4ubGVuZ3RoIC0gMSwgbGFzdCwgbG9va0FoZWFkUHJvcDtcbiAgICAgICAgICAgIGlmIChsYXN0SSA+PSAwICYmIChsYXN0ID0gY2hpbGRyZW5bbGFzdEldKSBpbnN0YW5jZW9mIFRyZWUpIHtcbiAgICAgICAgICAgICAgICBpZiAoIWxhc3RJICYmIGxhc3QudHlwZSA9PSB0eXBlICYmIGxhc3QubGVuZ3RoID09IGxlbmd0aClcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGxhc3Q7XG4gICAgICAgICAgICAgICAgaWYgKGxvb2tBaGVhZFByb3AgPSBsYXN0LnByb3AoTm9kZVByb3AubG9va0FoZWFkKSlcbiAgICAgICAgICAgICAgICAgICAgbG9va0FoZWFkID0gcG9zaXRpb25zW2xhc3RJXSArIGxhc3QubGVuZ3RoICsgbG9va0FoZWFkUHJvcDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBtYWtlVHJlZSh0eXBlLCBjaGlsZHJlbiwgcG9zaXRpb25zLCBsZW5ndGgsIGxvb2tBaGVhZCwgY29udGV4dEhhc2gpO1xuICAgICAgICB9O1xuICAgIH1cbiAgICBmdW5jdGlvbiBtYWtlUmVwZWF0TGVhZihjaGlsZHJlbiwgcG9zaXRpb25zLCBiYXNlLCBpLCBmcm9tLCB0bywgdHlwZSwgbG9va0FoZWFkLCBjb250ZXh0SGFzaCkge1xuICAgICAgICBsZXQgbG9jYWxDaGlsZHJlbiA9IFtdLCBsb2NhbFBvc2l0aW9ucyA9IFtdO1xuICAgICAgICB3aGlsZSAoY2hpbGRyZW4ubGVuZ3RoID4gaSkge1xuICAgICAgICAgICAgbG9jYWxDaGlsZHJlbi5wdXNoKGNoaWxkcmVuLnBvcCgpKTtcbiAgICAgICAgICAgIGxvY2FsUG9zaXRpb25zLnB1c2gocG9zaXRpb25zLnBvcCgpICsgYmFzZSAtIGZyb20pO1xuICAgICAgICB9XG4gICAgICAgIGNoaWxkcmVuLnB1c2gobWFrZVRyZWUobm9kZVNldC50eXBlc1t0eXBlXSwgbG9jYWxDaGlsZHJlbiwgbG9jYWxQb3NpdGlvbnMsIHRvIC0gZnJvbSwgbG9va0FoZWFkIC0gdG8sIGNvbnRleHRIYXNoKSk7XG4gICAgICAgIHBvc2l0aW9ucy5wdXNoKGZyb20gLSBiYXNlKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gbWFrZVRyZWUodHlwZSwgY2hpbGRyZW4sIHBvc2l0aW9ucywgbGVuZ3RoLCBsb29rQWhlYWQsIGNvbnRleHRIYXNoLCBwcm9wcykge1xuICAgICAgICBpZiAoY29udGV4dEhhc2gpIHtcbiAgICAgICAgICAgIGxldCBwYWlyID0gW05vZGVQcm9wLmNvbnRleHRIYXNoLCBjb250ZXh0SGFzaF07XG4gICAgICAgICAgICBwcm9wcyA9IHByb3BzID8gW3BhaXJdLmNvbmNhdChwcm9wcykgOiBbcGFpcl07XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGxvb2tBaGVhZCA+IDI1KSB7XG4gICAgICAgICAgICBsZXQgcGFpciA9IFtOb2RlUHJvcC5sb29rQWhlYWQsIGxvb2tBaGVhZF07XG4gICAgICAgICAgICBwcm9wcyA9IHByb3BzID8gW3BhaXJdLmNvbmNhdChwcm9wcykgOiBbcGFpcl07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBUcmVlKHR5cGUsIGNoaWxkcmVuLCBwb3NpdGlvbnMsIGxlbmd0aCwgcHJvcHMpO1xuICAgIH1cbiAgICBmdW5jdGlvbiBmaW5kQnVmZmVyU2l6ZShtYXhTaXplLCBpblJlcGVhdCkge1xuICAgICAgICAvLyBTY2FuIHRocm91Z2ggdGhlIGJ1ZmZlciB0byBmaW5kIHByZXZpb3VzIHNpYmxpbmdzIHRoYXQgZml0XG4gICAgICAgIC8vIHRvZ2V0aGVyIGluIGEgVHJlZUJ1ZmZlciwgYW5kIGRvbid0IGNvbnRhaW4gYW55IHJldXNlZCBub2Rlc1xuICAgICAgICAvLyAod2hpY2ggY2FuJ3QgYmUgc3RvcmVkIGluIGEgYnVmZmVyKS5cbiAgICAgICAgLy8gSWYgYGluUmVwZWF0YCBpcyA+IC0xLCBpZ25vcmUgbm9kZSBib3VuZGFyaWVzIG9mIHRoYXQgdHlwZSBmb3JcbiAgICAgICAgLy8gbmVzdGluZywgYnV0IG1ha2Ugc3VyZSB0aGUgZW5kIGZhbGxzIGVpdGhlciBhdCB0aGUgc3RhcnRcbiAgICAgICAgLy8gKGBtYXhTaXplYCkgb3IgYmVmb3JlIHN1Y2ggYSBub2RlLlxuICAgICAgICBsZXQgZm9yayA9IGN1cnNvci5mb3JrKCk7XG4gICAgICAgIGxldCBzaXplID0gMCwgc3RhcnQgPSAwLCBza2lwID0gMCwgbWluU3RhcnQgPSBmb3JrLmVuZCAtIG1heEJ1ZmZlckxlbmd0aDtcbiAgICAgICAgbGV0IHJlc3VsdCA9IHsgc2l6ZTogMCwgc3RhcnQ6IDAsIHNraXA6IDAgfTtcbiAgICAgICAgc2NhbjogZm9yIChsZXQgbWluUG9zID0gZm9yay5wb3MgLSBtYXhTaXplOyBmb3JrLnBvcyA+IG1pblBvczspIHtcbiAgICAgICAgICAgIGxldCBub2RlU2l6ZSA9IGZvcmsuc2l6ZTtcbiAgICAgICAgICAgIC8vIFByZXRlbmQgbmVzdGVkIHJlcGVhdCBub2RlcyBvZiB0aGUgc2FtZSB0eXBlIGRvbid0IGV4aXN0XG4gICAgICAgICAgICBpZiAoZm9yay5pZCA9PSBpblJlcGVhdCAmJiBub2RlU2l6ZSA+PSAwKSB7XG4gICAgICAgICAgICAgICAgLy8gRXhjZXB0IHRoYXQgd2Ugc3RvcmUgdGhlIGN1cnJlbnQgc3RhdGUgYXMgYSB2YWxpZCByZXR1cm5cbiAgICAgICAgICAgICAgICAvLyB2YWx1ZS5cbiAgICAgICAgICAgICAgICByZXN1bHQuc2l6ZSA9IHNpemU7XG4gICAgICAgICAgICAgICAgcmVzdWx0LnN0YXJ0ID0gc3RhcnQ7XG4gICAgICAgICAgICAgICAgcmVzdWx0LnNraXAgPSBza2lwO1xuICAgICAgICAgICAgICAgIHNraXAgKz0gNDtcbiAgICAgICAgICAgICAgICBzaXplICs9IDQ7XG4gICAgICAgICAgICAgICAgZm9yay5uZXh0KCk7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsZXQgc3RhcnRQb3MgPSBmb3JrLnBvcyAtIG5vZGVTaXplO1xuICAgICAgICAgICAgaWYgKG5vZGVTaXplIDwgMCB8fCBzdGFydFBvcyA8IG1pblBvcyB8fCBmb3JrLnN0YXJ0IDwgbWluU3RhcnQpXG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBsZXQgbG9jYWxTa2lwcGVkID0gZm9yay5pZCA+PSBtaW5SZXBlYXRUeXBlID8gNCA6IDA7XG4gICAgICAgICAgICBsZXQgbm9kZVN0YXJ0ID0gZm9yay5zdGFydDtcbiAgICAgICAgICAgIGZvcmsubmV4dCgpO1xuICAgICAgICAgICAgd2hpbGUgKGZvcmsucG9zID4gc3RhcnRQb3MpIHtcbiAgICAgICAgICAgICAgICBpZiAoZm9yay5zaXplIDwgMCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoZm9yay5zaXplID09IC0zIC8qIFNwZWNpYWxSZWNvcmQuQ29udGV4dENoYW5nZSAqLyB8fCBmb3JrLnNpemUgPT0gLTQgLyogU3BlY2lhbFJlY29yZC5Mb29rQWhlYWQgKi8pXG4gICAgICAgICAgICAgICAgICAgICAgICBsb2NhbFNraXBwZWQgKz0gNDtcbiAgICAgICAgICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWsgc2NhbjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoZm9yay5pZCA+PSBtaW5SZXBlYXRUeXBlKSB7XG4gICAgICAgICAgICAgICAgICAgIGxvY2FsU2tpcHBlZCArPSA0O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBmb3JrLm5leHQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHN0YXJ0ID0gbm9kZVN0YXJ0O1xuICAgICAgICAgICAgc2l6ZSArPSBub2RlU2l6ZTtcbiAgICAgICAgICAgIHNraXAgKz0gbG9jYWxTa2lwcGVkO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpblJlcGVhdCA8IDAgfHwgc2l6ZSA9PSBtYXhTaXplKSB7XG4gICAgICAgICAgICByZXN1bHQuc2l6ZSA9IHNpemU7XG4gICAgICAgICAgICByZXN1bHQuc3RhcnQgPSBzdGFydDtcbiAgICAgICAgICAgIHJlc3VsdC5za2lwID0gc2tpcDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0LnNpemUgPiA0ID8gcmVzdWx0IDogdW5kZWZpbmVkO1xuICAgIH1cbiAgICBmdW5jdGlvbiBjb3B5VG9CdWZmZXIoYnVmZmVyU3RhcnQsIGJ1ZmZlciwgaW5kZXgpIHtcbiAgICAgICAgbGV0IHsgaWQsIHN0YXJ0LCBlbmQsIHNpemUgfSA9IGN1cnNvcjtcbiAgICAgICAgY3Vyc29yLm5leHQoKTtcbiAgICAgICAgaWYgKHNpemUgPj0gMCAmJiBpZCA8IG1pblJlcGVhdFR5cGUpIHtcbiAgICAgICAgICAgIGxldCBzdGFydEluZGV4ID0gaW5kZXg7XG4gICAgICAgICAgICBpZiAoc2l6ZSA+IDQpIHtcbiAgICAgICAgICAgICAgICBsZXQgZW5kUG9zID0gY3Vyc29yLnBvcyAtIChzaXplIC0gNCk7XG4gICAgICAgICAgICAgICAgd2hpbGUgKGN1cnNvci5wb3MgPiBlbmRQb3MpXG4gICAgICAgICAgICAgICAgICAgIGluZGV4ID0gY29weVRvQnVmZmVyKGJ1ZmZlclN0YXJ0LCBidWZmZXIsIGluZGV4KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGJ1ZmZlclstLWluZGV4XSA9IHN0YXJ0SW5kZXg7XG4gICAgICAgICAgICBidWZmZXJbLS1pbmRleF0gPSBlbmQgLSBidWZmZXJTdGFydDtcbiAgICAgICAgICAgIGJ1ZmZlclstLWluZGV4XSA9IHN0YXJ0IC0gYnVmZmVyU3RhcnQ7XG4gICAgICAgICAgICBidWZmZXJbLS1pbmRleF0gPSBpZDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChzaXplID09IC0zIC8qIFNwZWNpYWxSZWNvcmQuQ29udGV4dENoYW5nZSAqLykge1xuICAgICAgICAgICAgY29udGV4dEhhc2ggPSBpZDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChzaXplID09IC00IC8qIFNwZWNpYWxSZWNvcmQuTG9va0FoZWFkICovKSB7XG4gICAgICAgICAgICBsb29rQWhlYWQgPSBpZDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gaW5kZXg7XG4gICAgfVxuICAgIGxldCBjaGlsZHJlbiA9IFtdLCBwb3NpdGlvbnMgPSBbXTtcbiAgICB3aGlsZSAoY3Vyc29yLnBvcyA+IDApXG4gICAgICAgIHRha2VOb2RlKGRhdGEuc3RhcnQgfHwgMCwgZGF0YS5idWZmZXJTdGFydCB8fCAwLCBjaGlsZHJlbiwgcG9zaXRpb25zLCAtMSwgMCk7XG4gICAgbGV0IGxlbmd0aCA9IChfYSA9IGRhdGEubGVuZ3RoKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiAoY2hpbGRyZW4ubGVuZ3RoID8gcG9zaXRpb25zWzBdICsgY2hpbGRyZW5bMF0ubGVuZ3RoIDogMCk7XG4gICAgcmV0dXJuIG5ldyBUcmVlKHR5cGVzW2RhdGEudG9wSURdLCBjaGlsZHJlbi5yZXZlcnNlKCksIHBvc2l0aW9ucy5yZXZlcnNlKCksIGxlbmd0aCk7XG59XG5jb25zdCBub2RlU2l6ZUNhY2hlID0gbmV3IFdlYWtNYXA7XG5mdW5jdGlvbiBub2RlU2l6ZShiYWxhbmNlVHlwZSwgbm9kZSkge1xuICAgIGlmICghYmFsYW5jZVR5cGUuaXNBbm9ueW1vdXMgfHwgbm9kZSBpbnN0YW5jZW9mIFRyZWVCdWZmZXIgfHwgbm9kZS50eXBlICE9IGJhbGFuY2VUeXBlKVxuICAgICAgICByZXR1cm4gMTtcbiAgICBsZXQgc2l6ZSA9IG5vZGVTaXplQ2FjaGUuZ2V0KG5vZGUpO1xuICAgIGlmIChzaXplID09IG51bGwpIHtcbiAgICAgICAgc2l6ZSA9IDE7XG4gICAgICAgIGZvciAobGV0IGNoaWxkIG9mIG5vZGUuY2hpbGRyZW4pIHtcbiAgICAgICAgICAgIGlmIChjaGlsZC50eXBlICE9IGJhbGFuY2VUeXBlIHx8ICEoY2hpbGQgaW5zdGFuY2VvZiBUcmVlKSkge1xuICAgICAgICAgICAgICAgIHNpemUgPSAxO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc2l6ZSArPSBub2RlU2l6ZShiYWxhbmNlVHlwZSwgY2hpbGQpO1xuICAgICAgICB9XG4gICAgICAgIG5vZGVTaXplQ2FjaGUuc2V0KG5vZGUsIHNpemUpO1xuICAgIH1cbiAgICByZXR1cm4gc2l6ZTtcbn1cbmZ1bmN0aW9uIGJhbGFuY2VSYW5nZShcbi8vIFRoZSB0eXBlIHRoZSBiYWxhbmNlZCB0cmVlJ3MgaW5uZXIgbm9kZXMuXG5iYWxhbmNlVHlwZSwgXG4vLyBUaGUgZGlyZWN0IGNoaWxkcmVuIGFuZCB0aGVpciBwb3NpdGlvbnNcbmNoaWxkcmVuLCBwb3NpdGlvbnMsIFxuLy8gVGhlIGluZGV4IHJhbmdlIGluIGNoaWxkcmVuL3Bvc2l0aW9ucyB0byB1c2VcbmZyb20sIHRvLCBcbi8vIFRoZSBzdGFydCBwb3NpdGlvbiBvZiB0aGUgbm9kZXMsIHJlbGF0aXZlIHRvIHRoZWlyIHBhcmVudC5cbnN0YXJ0LCBcbi8vIExlbmd0aCBvZiB0aGUgb3V0ZXIgbm9kZVxubGVuZ3RoLCBcbi8vIEZ1bmN0aW9uIHRvIGJ1aWxkIHRoZSB0b3Agbm9kZSBvZiB0aGUgYmFsYW5jZWQgdHJlZVxubWtUb3AsIFxuLy8gRnVuY3Rpb24gdG8gYnVpbGQgaW50ZXJuYWwgbm9kZXMgZm9yIHRoZSBiYWxhbmNlZCB0cmVlXG5ta1RyZWUpIHtcbiAgICBsZXQgdG90YWwgPSAwO1xuICAgIGZvciAobGV0IGkgPSBmcm9tOyBpIDwgdG87IGkrKylcbiAgICAgICAgdG90YWwgKz0gbm9kZVNpemUoYmFsYW5jZVR5cGUsIGNoaWxkcmVuW2ldKTtcbiAgICBsZXQgbWF4Q2hpbGQgPSBNYXRoLmNlaWwoKHRvdGFsICogMS41KSAvIDggLyogQmFsYW5jZS5CcmFuY2hGYWN0b3IgKi8pO1xuICAgIGxldCBsb2NhbENoaWxkcmVuID0gW10sIGxvY2FsUG9zaXRpb25zID0gW107XG4gICAgZnVuY3Rpb24gZGl2aWRlKGNoaWxkcmVuLCBwb3NpdGlvbnMsIGZyb20sIHRvLCBvZmZzZXQpIHtcbiAgICAgICAgZm9yIChsZXQgaSA9IGZyb207IGkgPCB0bzspIHtcbiAgICAgICAgICAgIGxldCBncm91cEZyb20gPSBpLCBncm91cFN0YXJ0ID0gcG9zaXRpb25zW2ldLCBncm91cFNpemUgPSBub2RlU2l6ZShiYWxhbmNlVHlwZSwgY2hpbGRyZW5baV0pO1xuICAgICAgICAgICAgaSsrO1xuICAgICAgICAgICAgZm9yICg7IGkgPCB0bzsgaSsrKSB7XG4gICAgICAgICAgICAgICAgbGV0IG5leHRTaXplID0gbm9kZVNpemUoYmFsYW5jZVR5cGUsIGNoaWxkcmVuW2ldKTtcbiAgICAgICAgICAgICAgICBpZiAoZ3JvdXBTaXplICsgbmV4dFNpemUgPj0gbWF4Q2hpbGQpXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGdyb3VwU2l6ZSArPSBuZXh0U2l6ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChpID09IGdyb3VwRnJvbSArIDEpIHtcbiAgICAgICAgICAgICAgICBpZiAoZ3JvdXBTaXplID4gbWF4Q2hpbGQpIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IG9ubHkgPSBjaGlsZHJlbltncm91cEZyb21dOyAvLyBPbmx5IHRyZWVzIGNhbiBoYXZlIGEgc2l6ZSA+IDFcbiAgICAgICAgICAgICAgICAgICAgZGl2aWRlKG9ubHkuY2hpbGRyZW4sIG9ubHkucG9zaXRpb25zLCAwLCBvbmx5LmNoaWxkcmVuLmxlbmd0aCwgcG9zaXRpb25zW2dyb3VwRnJvbV0gKyBvZmZzZXQpO1xuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgbG9jYWxDaGlsZHJlbi5wdXNoKGNoaWxkcmVuW2dyb3VwRnJvbV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgbGV0IGxlbmd0aCA9IHBvc2l0aW9uc1tpIC0gMV0gKyBjaGlsZHJlbltpIC0gMV0ubGVuZ3RoIC0gZ3JvdXBTdGFydDtcbiAgICAgICAgICAgICAgICBsb2NhbENoaWxkcmVuLnB1c2goYmFsYW5jZVJhbmdlKGJhbGFuY2VUeXBlLCBjaGlsZHJlbiwgcG9zaXRpb25zLCBncm91cEZyb20sIGksIGdyb3VwU3RhcnQsIGxlbmd0aCwgbnVsbCwgbWtUcmVlKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsb2NhbFBvc2l0aW9ucy5wdXNoKGdyb3VwU3RhcnQgKyBvZmZzZXQgLSBzdGFydCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZGl2aWRlKGNoaWxkcmVuLCBwb3NpdGlvbnMsIGZyb20sIHRvLCAwKTtcbiAgICByZXR1cm4gKG1rVG9wIHx8IG1rVHJlZSkobG9jYWxDaGlsZHJlbiwgbG9jYWxQb3NpdGlvbnMsIGxlbmd0aCk7XG59XG4vKipcblByb3ZpZGVzIGEgd2F5IHRvIGFzc29jaWF0ZSB2YWx1ZXMgd2l0aCBwaWVjZXMgb2YgdHJlZXMuIEFzIGxvbmdcbmFzIHRoYXQgcGFydCBvZiB0aGUgdHJlZSBpcyByZXVzZWQsIHRoZSBhc3NvY2lhdGVkIHZhbHVlcyBjYW4gYmVcbnJldHJpZXZlZCBmcm9tIGFuIHVwZGF0ZWQgdHJlZS5cbiovXG5jbGFzcyBOb2RlV2Vha01hcCB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMubWFwID0gbmV3IFdlYWtNYXAoKTtcbiAgICB9XG4gICAgc2V0QnVmZmVyKGJ1ZmZlciwgaW5kZXgsIHZhbHVlKSB7XG4gICAgICAgIGxldCBpbm5lciA9IHRoaXMubWFwLmdldChidWZmZXIpO1xuICAgICAgICBpZiAoIWlubmVyKVxuICAgICAgICAgICAgdGhpcy5tYXAuc2V0KGJ1ZmZlciwgaW5uZXIgPSBuZXcgTWFwKTtcbiAgICAgICAgaW5uZXIuc2V0KGluZGV4LCB2YWx1ZSk7XG4gICAgfVxuICAgIGdldEJ1ZmZlcihidWZmZXIsIGluZGV4KSB7XG4gICAgICAgIGxldCBpbm5lciA9IHRoaXMubWFwLmdldChidWZmZXIpO1xuICAgICAgICByZXR1cm4gaW5uZXIgJiYgaW5uZXIuZ2V0KGluZGV4KTtcbiAgICB9XG4gICAgLyoqXG4gICAgU2V0IHRoZSB2YWx1ZSBmb3IgdGhpcyBzeW50YXggbm9kZS5cbiAgICAqL1xuICAgIHNldChub2RlLCB2YWx1ZSkge1xuICAgICAgICBpZiAobm9kZSBpbnN0YW5jZW9mIEJ1ZmZlck5vZGUpXG4gICAgICAgICAgICB0aGlzLnNldEJ1ZmZlcihub2RlLmNvbnRleHQuYnVmZmVyLCBub2RlLmluZGV4LCB2YWx1ZSk7XG4gICAgICAgIGVsc2UgaWYgKG5vZGUgaW5zdGFuY2VvZiBUcmVlTm9kZSlcbiAgICAgICAgICAgIHRoaXMubWFwLnNldChub2RlLnRyZWUsIHZhbHVlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgUmV0cmlldmUgdmFsdWUgZm9yIHRoaXMgc3ludGF4IG5vZGUsIGlmIGl0IGV4aXN0cyBpbiB0aGUgbWFwLlxuICAgICovXG4gICAgZ2V0KG5vZGUpIHtcbiAgICAgICAgcmV0dXJuIG5vZGUgaW5zdGFuY2VvZiBCdWZmZXJOb2RlID8gdGhpcy5nZXRCdWZmZXIobm9kZS5jb250ZXh0LmJ1ZmZlciwgbm9kZS5pbmRleClcbiAgICAgICAgICAgIDogbm9kZSBpbnN0YW5jZW9mIFRyZWVOb2RlID8gdGhpcy5tYXAuZ2V0KG5vZGUudHJlZSkgOiB1bmRlZmluZWQ7XG4gICAgfVxuICAgIC8qKlxuICAgIFNldCB0aGUgdmFsdWUgZm9yIHRoZSBub2RlIHRoYXQgYSBjdXJzb3IgY3VycmVudGx5IHBvaW50cyB0by5cbiAgICAqL1xuICAgIGN1cnNvclNldChjdXJzb3IsIHZhbHVlKSB7XG4gICAgICAgIGlmIChjdXJzb3IuYnVmZmVyKVxuICAgICAgICAgICAgdGhpcy5zZXRCdWZmZXIoY3Vyc29yLmJ1ZmZlci5idWZmZXIsIGN1cnNvci5pbmRleCwgdmFsdWUpO1xuICAgICAgICBlbHNlXG4gICAgICAgICAgICB0aGlzLm1hcC5zZXQoY3Vyc29yLnRyZWUsIHZhbHVlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgUmV0cmlldmUgdGhlIHZhbHVlIGZvciB0aGUgbm9kZSB0aGF0IGEgY3Vyc29yIGN1cnJlbnRseSBwb2ludHNcbiAgICB0by5cbiAgICAqL1xuICAgIGN1cnNvckdldChjdXJzb3IpIHtcbiAgICAgICAgcmV0dXJuIGN1cnNvci5idWZmZXIgPyB0aGlzLmdldEJ1ZmZlcihjdXJzb3IuYnVmZmVyLmJ1ZmZlciwgY3Vyc29yLmluZGV4KSA6IHRoaXMubWFwLmdldChjdXJzb3IudHJlZSk7XG4gICAgfVxufVxuXG4vKipcblRyZWUgZnJhZ21lbnRzIGFyZSB1c2VkIGR1cmluZyBbaW5jcmVtZW50YWxcbnBhcnNpbmddKCNjb21tb24uUGFyc2VyLnN0YXJ0UGFyc2UpIHRvIHRyYWNrIHBhcnRzIG9mIG9sZCB0cmVlc1xudGhhdCBjYW4gYmUgcmV1c2VkIGluIGEgbmV3IHBhcnNlLiBBbiBhcnJheSBvZiBmcmFnbWVudHMgaXMgdXNlZFxudG8gdHJhY2sgcmVnaW9ucyBvZiBhbiBvbGQgdHJlZSB3aG9zZSBub2RlcyBtaWdodCBiZSByZXVzZWQgaW4gbmV3XG5wYXJzZXMuIFVzZSB0aGUgc3RhdGljXG5bYGFwcGx5Q2hhbmdlc2BdKCNjb21tb24uVHJlZUZyYWdtZW50XmFwcGx5Q2hhbmdlcykgbWV0aG9kIHRvXG51cGRhdGUgZnJhZ21lbnRzIGZvciBkb2N1bWVudCBjaGFuZ2VzLlxuKi9cbmNsYXNzIFRyZWVGcmFnbWVudCB7XG4gICAgLyoqXG4gICAgQ29uc3RydWN0IGEgdHJlZSBmcmFnbWVudC4gWW91J2xsIHVzdWFsbHkgd2FudCB0byB1c2VcbiAgICBbYGFkZFRyZWVgXSgjY29tbW9uLlRyZWVGcmFnbWVudF5hZGRUcmVlKSBhbmRcbiAgICBbYGFwcGx5Q2hhbmdlc2BdKCNjb21tb24uVHJlZUZyYWdtZW50XmFwcGx5Q2hhbmdlcykgaW5zdGVhZCBvZlxuICAgIGNhbGxpbmcgdGhpcyBkaXJlY3RseS5cbiAgICAqL1xuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8qKlxuICAgIFRoZSBzdGFydCBvZiB0aGUgdW5jaGFuZ2VkIHJhbmdlIHBvaW50ZWQgdG8gYnkgdGhpcyBmcmFnbWVudC5cbiAgICBUaGlzIHJlZmVycyB0byBhbiBvZmZzZXQgaW4gdGhlIF91cGRhdGVkXyBkb2N1bWVudCAoYXMgb3Bwb3NlZFxuICAgIHRvIHRoZSBvcmlnaW5hbCB0cmVlKS5cbiAgICAqL1xuICAgIGZyb20sIFxuICAgIC8qKlxuICAgIFRoZSBlbmQgb2YgdGhlIHVuY2hhbmdlZCByYW5nZS5cbiAgICAqL1xuICAgIHRvLCBcbiAgICAvKipcbiAgICBUaGUgdHJlZSB0aGF0IHRoaXMgZnJhZ21lbnQgaXMgYmFzZWQgb24uXG4gICAgKi9cbiAgICB0cmVlLCBcbiAgICAvKipcbiAgICBUaGUgb2Zmc2V0IGJldHdlZW4gdGhlIGZyYWdtZW50J3MgdHJlZSBhbmQgdGhlIGRvY3VtZW50IHRoYXRcbiAgICB0aGlzIGZyYWdtZW50IGNhbiBiZSB1c2VkIGFnYWluc3QuIEFkZCB0aGlzIHdoZW4gZ29pbmcgZnJvbVxuICAgIGRvY3VtZW50IHRvIHRyZWUgcG9zaXRpb25zLCBzdWJ0cmFjdCBpdCB0byBnbyBmcm9tIHRyZWUgdG9cbiAgICBkb2N1bWVudCBwb3NpdGlvbnMuXG4gICAgKi9cbiAgICBvZmZzZXQsIG9wZW5TdGFydCA9IGZhbHNlLCBvcGVuRW5kID0gZmFsc2UpIHtcbiAgICAgICAgdGhpcy5mcm9tID0gZnJvbTtcbiAgICAgICAgdGhpcy50byA9IHRvO1xuICAgICAgICB0aGlzLnRyZWUgPSB0cmVlO1xuICAgICAgICB0aGlzLm9mZnNldCA9IG9mZnNldDtcbiAgICAgICAgdGhpcy5vcGVuID0gKG9wZW5TdGFydCA/IDEgLyogT3Blbi5TdGFydCAqLyA6IDApIHwgKG9wZW5FbmQgPyAyIC8qIE9wZW4uRW5kICovIDogMCk7XG4gICAgfVxuICAgIC8qKlxuICAgIFdoZXRoZXIgdGhlIHN0YXJ0IG9mIHRoZSBmcmFnbWVudCByZXByZXNlbnRzIHRoZSBzdGFydCBvZiBhXG4gICAgcGFyc2UsIG9yIHRoZSBlbmQgb2YgYSBjaGFuZ2UuIChJbiB0aGUgc2Vjb25kIGNhc2UsIGl0IG1heSBub3RcbiAgICBiZSBzYWZlIHRvIHJldXNlIHNvbWUgbm9kZXMgYXQgdGhlIHN0YXJ0LCBkZXBlbmRpbmcgb24gdGhlXG4gICAgcGFyc2luZyBhbGdvcml0aG0uKVxuICAgICovXG4gICAgZ2V0IG9wZW5TdGFydCgpIHsgcmV0dXJuICh0aGlzLm9wZW4gJiAxIC8qIE9wZW4uU3RhcnQgKi8pID4gMDsgfVxuICAgIC8qKlxuICAgIFdoZXRoZXIgdGhlIGVuZCBvZiB0aGUgZnJhZ21lbnQgcmVwcmVzZW50cyB0aGUgZW5kIG9mIGFcbiAgICBmdWxsLWRvY3VtZW50IHBhcnNlLCBvciB0aGUgc3RhcnQgb2YgYSBjaGFuZ2UuXG4gICAgKi9cbiAgICBnZXQgb3BlbkVuZCgpIHsgcmV0dXJuICh0aGlzLm9wZW4gJiAyIC8qIE9wZW4uRW5kICovKSA+IDA7IH1cbiAgICAvKipcbiAgICBDcmVhdGUgYSBzZXQgb2YgZnJhZ21lbnRzIGZyb20gYSBmcmVzaGx5IHBhcnNlZCB0cmVlLCBvciB1cGRhdGVcbiAgICBhbiBleGlzdGluZyBzZXQgb2YgZnJhZ21lbnRzIGJ5IHJlcGxhY2luZyB0aGUgb25lcyB0aGF0IG92ZXJsYXBcbiAgICB3aXRoIGEgdHJlZSB3aXRoIGNvbnRlbnQgZnJvbSB0aGUgbmV3IHRyZWUuIFdoZW4gYHBhcnRpYWxgIGlzXG4gICAgdHJ1ZSwgdGhlIHBhcnNlIGlzIHRyZWF0ZWQgYXMgaW5jb21wbGV0ZSwgYW5kIHRoZSByZXN1bHRpbmdcbiAgICBmcmFnbWVudCBoYXMgW2BvcGVuRW5kYF0oI2NvbW1vbi5UcmVlRnJhZ21lbnQub3BlbkVuZCkgc2V0IHRvXG4gICAgdHJ1ZS5cbiAgICAqL1xuICAgIHN0YXRpYyBhZGRUcmVlKHRyZWUsIGZyYWdtZW50cyA9IFtdLCBwYXJ0aWFsID0gZmFsc2UpIHtcbiAgICAgICAgbGV0IHJlc3VsdCA9IFtuZXcgVHJlZUZyYWdtZW50KDAsIHRyZWUubGVuZ3RoLCB0cmVlLCAwLCBmYWxzZSwgcGFydGlhbCldO1xuICAgICAgICBmb3IgKGxldCBmIG9mIGZyYWdtZW50cylcbiAgICAgICAgICAgIGlmIChmLnRvID4gdHJlZS5sZW5ndGgpXG4gICAgICAgICAgICAgICAgcmVzdWx0LnB1c2goZik7XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuICAgIC8qKlxuICAgIEFwcGx5IGEgc2V0IG9mIGVkaXRzIHRvIGFuIGFycmF5IG9mIGZyYWdtZW50cywgcmVtb3Zpbmcgb3JcbiAgICBzcGxpdHRpbmcgZnJhZ21lbnRzIGFzIG5lY2Vzc2FyeSB0byByZW1vdmUgZWRpdGVkIHJhbmdlcywgYW5kXG4gICAgYWRqdXN0aW5nIG9mZnNldHMgZm9yIGZyYWdtZW50cyB0aGF0IG1vdmVkLlxuICAgICovXG4gICAgc3RhdGljIGFwcGx5Q2hhbmdlcyhmcmFnbWVudHMsIGNoYW5nZXMsIG1pbkdhcCA9IDEyOCkge1xuICAgICAgICBpZiAoIWNoYW5nZXMubGVuZ3RoKVxuICAgICAgICAgICAgcmV0dXJuIGZyYWdtZW50cztcbiAgICAgICAgbGV0IHJlc3VsdCA9IFtdO1xuICAgICAgICBsZXQgZkkgPSAxLCBuZXh0RiA9IGZyYWdtZW50cy5sZW5ndGggPyBmcmFnbWVudHNbMF0gOiBudWxsO1xuICAgICAgICBmb3IgKGxldCBjSSA9IDAsIHBvcyA9IDAsIG9mZiA9IDA7OyBjSSsrKSB7XG4gICAgICAgICAgICBsZXQgbmV4dEMgPSBjSSA8IGNoYW5nZXMubGVuZ3RoID8gY2hhbmdlc1tjSV0gOiBudWxsO1xuICAgICAgICAgICAgbGV0IG5leHRQb3MgPSBuZXh0QyA/IG5leHRDLmZyb21BIDogMWU5O1xuICAgICAgICAgICAgaWYgKG5leHRQb3MgLSBwb3MgPj0gbWluR2FwKVxuICAgICAgICAgICAgICAgIHdoaWxlIChuZXh0RiAmJiBuZXh0Ri5mcm9tIDwgbmV4dFBvcykge1xuICAgICAgICAgICAgICAgICAgICBsZXQgY3V0ID0gbmV4dEY7XG4gICAgICAgICAgICAgICAgICAgIGlmIChwb3MgPj0gY3V0LmZyb20gfHwgbmV4dFBvcyA8PSBjdXQudG8gfHwgb2ZmKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgZkZyb20gPSBNYXRoLm1heChjdXQuZnJvbSwgcG9zKSAtIG9mZiwgZlRvID0gTWF0aC5taW4oY3V0LnRvLCBuZXh0UG9zKSAtIG9mZjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1dCA9IGZGcm9tID49IGZUbyA/IG51bGwgOiBuZXcgVHJlZUZyYWdtZW50KGZGcm9tLCBmVG8sIGN1dC50cmVlLCBjdXQub2Zmc2V0ICsgb2ZmLCBjSSA+IDAsICEhbmV4dEMpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChjdXQpXG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQucHVzaChjdXQpO1xuICAgICAgICAgICAgICAgICAgICBpZiAobmV4dEYudG8gPiBuZXh0UG9zKVxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIG5leHRGID0gZkkgPCBmcmFnbWVudHMubGVuZ3RoID8gZnJhZ21lbnRzW2ZJKytdIDogbnVsbDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIW5leHRDKVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgcG9zID0gbmV4dEMudG9BO1xuICAgICAgICAgICAgb2ZmID0gbmV4dEMudG9BIC0gbmV4dEMudG9CO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxufVxuLyoqXG5BIHN1cGVyY2xhc3MgdGhhdCBwYXJzZXJzIHNob3VsZCBleHRlbmQuXG4qL1xuY2xhc3MgUGFyc2VyIHtcbiAgICAvKipcbiAgICBTdGFydCBhIHBhcnNlLCByZXR1cm5pbmcgYSBbcGFydGlhbCBwYXJzZV0oI2NvbW1vbi5QYXJ0aWFsUGFyc2UpXG4gICAgb2JqZWN0LiBbYGZyYWdtZW50c2BdKCNjb21tb24uVHJlZUZyYWdtZW50KSBjYW4gYmUgcGFzc2VkIGluIHRvXG4gICAgbWFrZSB0aGUgcGFyc2UgaW5jcmVtZW50YWwuXG4gICAgXG4gICAgQnkgZGVmYXVsdCwgdGhlIGVudGlyZSBpbnB1dCBpcyBwYXJzZWQuIFlvdSBjYW4gcGFzcyBgcmFuZ2VzYCxcbiAgICB3aGljaCBzaG91bGQgYmUgYSBzb3J0ZWQgYXJyYXkgb2Ygbm9uLWVtcHR5LCBub24tb3ZlcmxhcHBpbmdcbiAgICByYW5nZXMsIHRvIHBhcnNlIG9ubHkgdGhvc2UgcmFuZ2VzLiBUaGUgdHJlZSByZXR1cm5lZCBpbiB0aGF0XG4gICAgY2FzZSB3aWxsIHN0YXJ0IGF0IGByYW5nZXNbMF0uZnJvbWAuXG4gICAgKi9cbiAgICBzdGFydFBhcnNlKGlucHV0LCBmcmFnbWVudHMsIHJhbmdlcykge1xuICAgICAgICBpZiAodHlwZW9mIGlucHV0ID09IFwic3RyaW5nXCIpXG4gICAgICAgICAgICBpbnB1dCA9IG5ldyBTdHJpbmdJbnB1dChpbnB1dCk7XG4gICAgICAgIHJhbmdlcyA9ICFyYW5nZXMgPyBbbmV3IFJhbmdlKDAsIGlucHV0Lmxlbmd0aCldIDogcmFuZ2VzLmxlbmd0aCA/IHJhbmdlcy5tYXAociA9PiBuZXcgUmFuZ2Uoci5mcm9tLCByLnRvKSkgOiBbbmV3IFJhbmdlKDAsIDApXTtcbiAgICAgICAgcmV0dXJuIHRoaXMuY3JlYXRlUGFyc2UoaW5wdXQsIGZyYWdtZW50cyB8fCBbXSwgcmFuZ2VzKTtcbiAgICB9XG4gICAgLyoqXG4gICAgUnVuIGEgZnVsbCBwYXJzZSwgcmV0dXJuaW5nIHRoZSByZXN1bHRpbmcgdHJlZS5cbiAgICAqL1xuICAgIHBhcnNlKGlucHV0LCBmcmFnbWVudHMsIHJhbmdlcykge1xuICAgICAgICBsZXQgcGFyc2UgPSB0aGlzLnN0YXJ0UGFyc2UoaW5wdXQsIGZyYWdtZW50cywgcmFuZ2VzKTtcbiAgICAgICAgZm9yICg7Oykge1xuICAgICAgICAgICAgbGV0IGRvbmUgPSBwYXJzZS5hZHZhbmNlKCk7XG4gICAgICAgICAgICBpZiAoZG9uZSlcbiAgICAgICAgICAgICAgICByZXR1cm4gZG9uZTtcbiAgICAgICAgfVxuICAgIH1cbn1cbmNsYXNzIFN0cmluZ0lucHV0IHtcbiAgICBjb25zdHJ1Y3RvcihzdHJpbmcpIHtcbiAgICAgICAgdGhpcy5zdHJpbmcgPSBzdHJpbmc7XG4gICAgfVxuICAgIGdldCBsZW5ndGgoKSB7IHJldHVybiB0aGlzLnN0cmluZy5sZW5ndGg7IH1cbiAgICBjaHVuayhmcm9tKSB7IHJldHVybiB0aGlzLnN0cmluZy5zbGljZShmcm9tKTsgfVxuICAgIGdldCBsaW5lQ2h1bmtzKCkgeyByZXR1cm4gZmFsc2U7IH1cbiAgICByZWFkKGZyb20sIHRvKSB7IHJldHVybiB0aGlzLnN0cmluZy5zbGljZShmcm9tLCB0byk7IH1cbn1cblxuLyoqXG5DcmVhdGUgYSBwYXJzZSB3cmFwcGVyIHRoYXQsIGFmdGVyIHRoZSBpbm5lciBwYXJzZSBjb21wbGV0ZXMsXG5zY2FucyBpdHMgdHJlZSBmb3IgbWl4ZWQgbGFuZ3VhZ2UgcmVnaW9ucyB3aXRoIHRoZSBgbmVzdGBcbmZ1bmN0aW9uLCBydW5zIHRoZSByZXN1bHRpbmcgW2lubmVyIHBhcnNlc10oI2NvbW1vbi5OZXN0ZWRQYXJzZSksXG5hbmQgdGhlbiBbbW91bnRzXSgjY29tbW9uLk5vZGVQcm9wXm1vdW50ZWQpIHRoZWlyIHJlc3VsdHMgb250byB0aGVcbnRyZWUuXG4qL1xuZnVuY3Rpb24gcGFyc2VNaXhlZChuZXN0KSB7XG4gICAgcmV0dXJuIChwYXJzZSwgaW5wdXQsIGZyYWdtZW50cywgcmFuZ2VzKSA9PiBuZXcgTWl4ZWRQYXJzZShwYXJzZSwgbmVzdCwgaW5wdXQsIGZyYWdtZW50cywgcmFuZ2VzKTtcbn1cbmNsYXNzIElubmVyUGFyc2Uge1xuICAgIGNvbnN0cnVjdG9yKHBhcnNlciwgcGFyc2UsIG92ZXJsYXksIGJyYWNrZXRlZCwgdGFyZ2V0LCBmcm9tKSB7XG4gICAgICAgIHRoaXMucGFyc2VyID0gcGFyc2VyO1xuICAgICAgICB0aGlzLnBhcnNlID0gcGFyc2U7XG4gICAgICAgIHRoaXMub3ZlcmxheSA9IG92ZXJsYXk7XG4gICAgICAgIHRoaXMuYnJhY2tldGVkID0gYnJhY2tldGVkO1xuICAgICAgICB0aGlzLnRhcmdldCA9IHRhcmdldDtcbiAgICAgICAgdGhpcy5mcm9tID0gZnJvbTtcbiAgICB9XG59XG5mdW5jdGlvbiBjaGVja1JhbmdlcyhyYW5nZXMpIHtcbiAgICBpZiAoIXJhbmdlcy5sZW5ndGggfHwgcmFuZ2VzLnNvbWUociA9PiByLmZyb20gPj0gci50bykpXG4gICAgICAgIHRocm93IG5ldyBSYW5nZUVycm9yKFwiSW52YWxpZCBpbm5lciBwYXJzZSByYW5nZXMgZ2l2ZW46IFwiICsgSlNPTi5zdHJpbmdpZnkocmFuZ2VzKSk7XG59XG5jbGFzcyBBY3RpdmVPdmVybGF5IHtcbiAgICBjb25zdHJ1Y3RvcihwYXJzZXIsIHByZWRpY2F0ZSwgbW91bnRzLCBpbmRleCwgc3RhcnQsIGJyYWNrZXRlZCwgdGFyZ2V0LCBwcmV2KSB7XG4gICAgICAgIHRoaXMucGFyc2VyID0gcGFyc2VyO1xuICAgICAgICB0aGlzLnByZWRpY2F0ZSA9IHByZWRpY2F0ZTtcbiAgICAgICAgdGhpcy5tb3VudHMgPSBtb3VudHM7XG4gICAgICAgIHRoaXMuaW5kZXggPSBpbmRleDtcbiAgICAgICAgdGhpcy5zdGFydCA9IHN0YXJ0O1xuICAgICAgICB0aGlzLmJyYWNrZXRlZCA9IGJyYWNrZXRlZDtcbiAgICAgICAgdGhpcy50YXJnZXQgPSB0YXJnZXQ7XG4gICAgICAgIHRoaXMucHJldiA9IHByZXY7XG4gICAgICAgIHRoaXMuZGVwdGggPSAwO1xuICAgICAgICB0aGlzLnJhbmdlcyA9IFtdO1xuICAgIH1cbn1cbmNvbnN0IHN0b3BwZWRJbm5lciA9IG5ldyBOb2RlUHJvcCh7IHBlck5vZGU6IHRydWUgfSk7XG5jbGFzcyBNaXhlZFBhcnNlIHtcbiAgICBjb25zdHJ1Y3RvcihiYXNlLCBuZXN0LCBpbnB1dCwgZnJhZ21lbnRzLCByYW5nZXMpIHtcbiAgICAgICAgdGhpcy5uZXN0ID0gbmVzdDtcbiAgICAgICAgdGhpcy5pbnB1dCA9IGlucHV0O1xuICAgICAgICB0aGlzLmZyYWdtZW50cyA9IGZyYWdtZW50cztcbiAgICAgICAgdGhpcy5yYW5nZXMgPSByYW5nZXM7XG4gICAgICAgIHRoaXMuaW5uZXIgPSBbXTtcbiAgICAgICAgdGhpcy5pbm5lckRvbmUgPSAwO1xuICAgICAgICB0aGlzLmJhc2VUcmVlID0gbnVsbDtcbiAgICAgICAgdGhpcy5zdG9wcGVkQXQgPSBudWxsO1xuICAgICAgICB0aGlzLmJhc2VQYXJzZSA9IGJhc2U7XG4gICAgfVxuICAgIGFkdmFuY2UoKSB7XG4gICAgICAgIGlmICh0aGlzLmJhc2VQYXJzZSkge1xuICAgICAgICAgICAgbGV0IGRvbmUgPSB0aGlzLmJhc2VQYXJzZS5hZHZhbmNlKCk7XG4gICAgICAgICAgICBpZiAoIWRvbmUpXG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICB0aGlzLmJhc2VQYXJzZSA9IG51bGw7XG4gICAgICAgICAgICB0aGlzLmJhc2VUcmVlID0gZG9uZTtcbiAgICAgICAgICAgIHRoaXMuc3RhcnRJbm5lcigpO1xuICAgICAgICAgICAgaWYgKHRoaXMuc3RvcHBlZEF0ICE9IG51bGwpXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaW5uZXIgb2YgdGhpcy5pbm5lcilcbiAgICAgICAgICAgICAgICAgICAgaW5uZXIucGFyc2Uuc3RvcEF0KHRoaXMuc3RvcHBlZEF0KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5pbm5lckRvbmUgPT0gdGhpcy5pbm5lci5sZW5ndGgpIHtcbiAgICAgICAgICAgIGxldCByZXN1bHQgPSB0aGlzLmJhc2VUcmVlO1xuICAgICAgICAgICAgaWYgKHRoaXMuc3RvcHBlZEF0ICE9IG51bGwpXG4gICAgICAgICAgICAgICAgcmVzdWx0ID0gbmV3IFRyZWUocmVzdWx0LnR5cGUsIHJlc3VsdC5jaGlsZHJlbiwgcmVzdWx0LnBvc2l0aW9ucywgcmVzdWx0Lmxlbmd0aCwgcmVzdWx0LnByb3BWYWx1ZXMuY29uY2F0KFtbc3RvcHBlZElubmVyLCB0aGlzLnN0b3BwZWRBdF1dKSk7XG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICB9XG4gICAgICAgIGxldCBpbm5lciA9IHRoaXMuaW5uZXJbdGhpcy5pbm5lckRvbmVdLCBkb25lID0gaW5uZXIucGFyc2UuYWR2YW5jZSgpO1xuICAgICAgICBpZiAoZG9uZSkge1xuICAgICAgICAgICAgdGhpcy5pbm5lckRvbmUrKztcbiAgICAgICAgICAgIC8vIFRoaXMgaXMgYSBzb21ld2hhdCBkb2RneSBidXQgc3VwZXIgaGVscGZ1bCBoYWNrIHdoZXJlIHdlXG4gICAgICAgICAgICAvLyBwYXRjaCB1cCBub2RlcyBjcmVhdGVkIGJ5IHRoZSBpbm5lciBwYXJzZSAoYW5kIHRodXNcbiAgICAgICAgICAgIC8vIHByZXN1bWFibHkgbm90IGFsaWFzZWQgYW55d2hlcmUgZWxzZSkgdG8gaG9sZCB0aGUgaW5mb3JtYXRpb25cbiAgICAgICAgICAgIC8vIGFib3V0IHRoZSBpbm5lciBwYXJzZS5cbiAgICAgICAgICAgIGxldCBwcm9wcyA9IE9iamVjdC5hc3NpZ24oT2JqZWN0LmNyZWF0ZShudWxsKSwgaW5uZXIudGFyZ2V0LnByb3BzKTtcbiAgICAgICAgICAgIHByb3BzW05vZGVQcm9wLm1vdW50ZWQuaWRdID0gbmV3IE1vdW50ZWRUcmVlKGRvbmUsIGlubmVyLm92ZXJsYXksIGlubmVyLnBhcnNlciwgaW5uZXIuYnJhY2tldGVkKTtcbiAgICAgICAgICAgIGlubmVyLnRhcmdldC5wcm9wcyA9IHByb3BzO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBnZXQgcGFyc2VkUG9zKCkge1xuICAgICAgICBpZiAodGhpcy5iYXNlUGFyc2UpXG4gICAgICAgICAgICByZXR1cm4gMDtcbiAgICAgICAgbGV0IHBvcyA9IHRoaXMuaW5wdXQubGVuZ3RoO1xuICAgICAgICBmb3IgKGxldCBpID0gdGhpcy5pbm5lckRvbmU7IGkgPCB0aGlzLmlubmVyLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5pbm5lcltpXS5mcm9tIDwgcG9zKVxuICAgICAgICAgICAgICAgIHBvcyA9IE1hdGgubWluKHBvcywgdGhpcy5pbm5lcltpXS5wYXJzZS5wYXJzZWRQb3MpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBwb3M7XG4gICAgfVxuICAgIHN0b3BBdChwb3MpIHtcbiAgICAgICAgdGhpcy5zdG9wcGVkQXQgPSBwb3M7XG4gICAgICAgIGlmICh0aGlzLmJhc2VQYXJzZSlcbiAgICAgICAgICAgIHRoaXMuYmFzZVBhcnNlLnN0b3BBdChwb3MpO1xuICAgICAgICBlbHNlXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gdGhpcy5pbm5lckRvbmU7IGkgPCB0aGlzLmlubmVyLmxlbmd0aDsgaSsrKVxuICAgICAgICAgICAgICAgIHRoaXMuaW5uZXJbaV0ucGFyc2Uuc3RvcEF0KHBvcyk7XG4gICAgfVxuICAgIHN0YXJ0SW5uZXIoKSB7XG4gICAgICAgIGxldCBmcmFnbWVudEN1cnNvciA9IG5ldyBGcmFnbWVudEN1cnNvcih0aGlzLmZyYWdtZW50cyk7XG4gICAgICAgIGxldCBvdmVybGF5ID0gbnVsbDtcbiAgICAgICAgbGV0IGNvdmVyZWQgPSBudWxsO1xuICAgICAgICBsZXQgY3Vyc29yID0gbmV3IFRyZWVDdXJzb3IobmV3IFRyZWVOb2RlKHRoaXMuYmFzZVRyZWUsIHRoaXMucmFuZ2VzWzBdLmZyb20sIDAsIG51bGwpLCBJdGVyTW9kZS5JbmNsdWRlQW5vbnltb3VzIHwgSXRlck1vZGUuSWdub3JlTW91bnRzKTtcbiAgICAgICAgc2NhbjogZm9yIChsZXQgbmVzdCwgaXNDb3ZlcmVkOzspIHtcbiAgICAgICAgICAgIGxldCBlbnRlciA9IHRydWUsIHJhbmdlO1xuICAgICAgICAgICAgaWYgKHRoaXMuc3RvcHBlZEF0ICE9IG51bGwgJiYgY3Vyc29yLmZyb20gPj0gdGhpcy5zdG9wcGVkQXQpIHtcbiAgICAgICAgICAgICAgICBlbnRlciA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoZnJhZ21lbnRDdXJzb3IuaGFzTm9kZShjdXJzb3IpKSB7XG4gICAgICAgICAgICAgICAgaWYgKG92ZXJsYXkpIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IG1hdGNoID0gb3ZlcmxheS5tb3VudHMuZmluZChtID0+IG0uZnJhZy5mcm9tIDw9IGN1cnNvci5mcm9tICYmIG0uZnJhZy50byA+PSBjdXJzb3IudG8gJiYgbS5tb3VudC5vdmVybGF5KTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1hdGNoKVxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgciBvZiBtYXRjaC5tb3VudC5vdmVybGF5KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGZyb20gPSByLmZyb20gKyBtYXRjaC5wb3MsIHRvID0gci50byArIG1hdGNoLnBvcztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZnJvbSA+PSBjdXJzb3IuZnJvbSAmJiB0byA8PSBjdXJzb3IudG8gJiYgIW92ZXJsYXkucmFuZ2VzLnNvbWUociA9PiByLmZyb20gPCB0byAmJiByLnRvID4gZnJvbSkpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG92ZXJsYXkucmFuZ2VzLnB1c2goeyBmcm9tLCB0byB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZW50ZXIgPSBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNvdmVyZWQgJiYgKGlzQ292ZXJlZCA9IGNoZWNrQ292ZXIoY292ZXJlZC5yYW5nZXMsIGN1cnNvci5mcm9tLCBjdXJzb3IudG8pKSkge1xuICAgICAgICAgICAgICAgIGVudGVyID0gaXNDb3ZlcmVkICE9IDIgLyogQ292ZXIuRnVsbCAqLztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKCFjdXJzb3IudHlwZS5pc0Fub255bW91cyAmJiAobmVzdCA9IHRoaXMubmVzdChjdXJzb3IsIHRoaXMuaW5wdXQpKSAmJlxuICAgICAgICAgICAgICAgIChjdXJzb3IuZnJvbSA8IGN1cnNvci50byB8fCAhbmVzdC5vdmVybGF5KSkge1xuICAgICAgICAgICAgICAgIGlmICghY3Vyc29yLnRyZWUpIHtcbiAgICAgICAgICAgICAgICAgICAgbWF0ZXJpYWxpemUoY3Vyc29yKTtcbiAgICAgICAgICAgICAgICAgICAgLy8gbWF0ZXJpYWxpemUgY3JlYXRlIG9uZSBtb3JlIGxldmVsIG9mIG5lc3RpbmdcbiAgICAgICAgICAgICAgICAgICAgLy8gd2UgbmVlZCB0byBhZGQgZGVwdGggdG8gYWN0aXZlIG92ZXJsYXkgZm9yIGdvaW5nIGJhY2t3YXJkc1xuICAgICAgICAgICAgICAgICAgICBpZiAob3ZlcmxheSlcbiAgICAgICAgICAgICAgICAgICAgICAgIG92ZXJsYXkuZGVwdGgrKztcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNvdmVyZWQpXG4gICAgICAgICAgICAgICAgICAgICAgICBjb3ZlcmVkLmRlcHRoKys7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGxldCBvbGRNb3VudHMgPSBmcmFnbWVudEN1cnNvci5maW5kTW91bnRzKGN1cnNvci5mcm9tLCBuZXN0LnBhcnNlcik7XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBuZXN0Lm92ZXJsYXkgPT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgICAgICAgICAgIG92ZXJsYXkgPSBuZXcgQWN0aXZlT3ZlcmxheShuZXN0LnBhcnNlciwgbmVzdC5vdmVybGF5LCBvbGRNb3VudHMsIHRoaXMuaW5uZXIubGVuZ3RoLCBjdXJzb3IuZnJvbSwgISFuZXN0LmJyYWNrZXRlZCwgY3Vyc29yLnRyZWUsIG92ZXJsYXkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IHJhbmdlcyA9IHB1bmNoUmFuZ2VzKHRoaXMucmFuZ2VzLCBuZXN0Lm92ZXJsYXkgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgIChjdXJzb3IuZnJvbSA8IGN1cnNvci50byA/IFtuZXcgUmFuZ2UoY3Vyc29yLmZyb20sIGN1cnNvci50byldIDogW10pKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJhbmdlcy5sZW5ndGgpXG4gICAgICAgICAgICAgICAgICAgICAgICBjaGVja1JhbmdlcyhyYW5nZXMpO1xuICAgICAgICAgICAgICAgICAgICBpZiAocmFuZ2VzLmxlbmd0aCB8fCAhbmVzdC5vdmVybGF5KVxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5pbm5lci5wdXNoKG5ldyBJbm5lclBhcnNlKG5lc3QucGFyc2VyLCByYW5nZXMubGVuZ3RoID8gbmVzdC5wYXJzZXIuc3RhcnRQYXJzZSh0aGlzLmlucHV0LCBlbnRlckZyYWdtZW50cyhvbGRNb3VudHMsIHJhbmdlcyksIHJhbmdlcylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IG5lc3QucGFyc2VyLnN0YXJ0UGFyc2UoXCJcIiksIG5lc3Qub3ZlcmxheSA/IG5lc3Qub3ZlcmxheS5tYXAociA9PiBuZXcgUmFuZ2Uoci5mcm9tIC0gY3Vyc29yLmZyb20sIHIudG8gLSBjdXJzb3IuZnJvbSkpIDogbnVsbCwgISFuZXN0LmJyYWNrZXRlZCwgY3Vyc29yLnRyZWUsIHJhbmdlcy5sZW5ndGggPyByYW5nZXNbMF0uZnJvbSA6IGN1cnNvci5mcm9tKSk7XG4gICAgICAgICAgICAgICAgICAgIGlmICghbmVzdC5vdmVybGF5KVxuICAgICAgICAgICAgICAgICAgICAgICAgZW50ZXIgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAocmFuZ2VzLmxlbmd0aClcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvdmVyZWQgPSB7IHJhbmdlcywgZGVwdGg6IDAsIHByZXY6IGNvdmVyZWQgfTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChvdmVybGF5ICYmIChyYW5nZSA9IG92ZXJsYXkucHJlZGljYXRlKGN1cnNvcikpKSB7XG4gICAgICAgICAgICAgICAgaWYgKHJhbmdlID09PSB0cnVlKVxuICAgICAgICAgICAgICAgICAgICByYW5nZSA9IG5ldyBSYW5nZShjdXJzb3IuZnJvbSwgY3Vyc29yLnRvKTtcbiAgICAgICAgICAgICAgICBpZiAocmFuZ2UuZnJvbSA8IHJhbmdlLnRvKSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBsYXN0ID0gb3ZlcmxheS5yYW5nZXMubGVuZ3RoIC0gMTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGxhc3QgPj0gMCAmJiBvdmVybGF5LnJhbmdlc1tsYXN0XS50byA9PSByYW5nZS5mcm9tKVxuICAgICAgICAgICAgICAgICAgICAgICAgb3ZlcmxheS5yYW5nZXNbbGFzdF0gPSB7IGZyb206IG92ZXJsYXkucmFuZ2VzW2xhc3RdLmZyb20sIHRvOiByYW5nZS50byB9O1xuICAgICAgICAgICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgICAgICAgICBvdmVybGF5LnJhbmdlcy5wdXNoKHJhbmdlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZW50ZXIgJiYgY3Vyc29yLmZpcnN0Q2hpbGQoKSkge1xuICAgICAgICAgICAgICAgIGlmIChvdmVybGF5KVxuICAgICAgICAgICAgICAgICAgICBvdmVybGF5LmRlcHRoKys7XG4gICAgICAgICAgICAgICAgaWYgKGNvdmVyZWQpXG4gICAgICAgICAgICAgICAgICAgIGNvdmVyZWQuZGVwdGgrKztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGZvciAoOzspIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGN1cnNvci5uZXh0U2libGluZygpKVxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGlmICghY3Vyc29yLnBhcmVudCgpKVxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWsgc2NhbjtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG92ZXJsYXkgJiYgIS0tb3ZlcmxheS5kZXB0aCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHJhbmdlcyA9IHB1bmNoUmFuZ2VzKHRoaXMucmFuZ2VzLCBvdmVybGF5LnJhbmdlcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocmFuZ2VzLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoZWNrUmFuZ2VzKHJhbmdlcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5pbm5lci5zcGxpY2Uob3ZlcmxheS5pbmRleCwgMCwgbmV3IElubmVyUGFyc2Uob3ZlcmxheS5wYXJzZXIsIG92ZXJsYXkucGFyc2VyLnN0YXJ0UGFyc2UodGhpcy5pbnB1dCwgZW50ZXJGcmFnbWVudHMob3ZlcmxheS5tb3VudHMsIHJhbmdlcyksIHJhbmdlcyksIG92ZXJsYXkucmFuZ2VzLm1hcChyID0+IG5ldyBSYW5nZShyLmZyb20gLSBvdmVybGF5LnN0YXJ0LCByLnRvIC0gb3ZlcmxheS5zdGFydCkpLCBvdmVybGF5LmJyYWNrZXRlZCwgb3ZlcmxheS50YXJnZXQsIHJhbmdlc1swXS5mcm9tKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBvdmVybGF5ID0gb3ZlcmxheS5wcmV2O1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChjb3ZlcmVkICYmICEtLWNvdmVyZWQuZGVwdGgpXG4gICAgICAgICAgICAgICAgICAgICAgICBjb3ZlcmVkID0gY292ZXJlZC5wcmV2O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbn1cbmZ1bmN0aW9uIGNoZWNrQ292ZXIoY292ZXJlZCwgZnJvbSwgdG8pIHtcbiAgICBmb3IgKGxldCByYW5nZSBvZiBjb3ZlcmVkKSB7XG4gICAgICAgIGlmIChyYW5nZS5mcm9tID49IHRvKVxuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGlmIChyYW5nZS50byA+IGZyb20pXG4gICAgICAgICAgICByZXR1cm4gcmFuZ2UuZnJvbSA8PSBmcm9tICYmIHJhbmdlLnRvID49IHRvID8gMiAvKiBDb3Zlci5GdWxsICovIDogMSAvKiBDb3Zlci5QYXJ0aWFsICovO1xuICAgIH1cbiAgICByZXR1cm4gMCAvKiBDb3Zlci5Ob25lICovO1xufVxuLy8gVGFrZSBhIHBpZWNlIG9mIGJ1ZmZlciBhbmQgY29udmVydCBpdCBpbnRvIGEgc3RhbmQtYWxvbmVcbi8vIFRyZWVCdWZmZXIuXG5mdW5jdGlvbiBzbGljZUJ1ZihidWYsIHN0YXJ0SSwgZW5kSSwgbm9kZXMsIHBvc2l0aW9ucywgb2ZmKSB7XG4gICAgaWYgKHN0YXJ0SSA8IGVuZEkpIHtcbiAgICAgICAgbGV0IGZyb20gPSBidWYuYnVmZmVyW3N0YXJ0SSArIDFdO1xuICAgICAgICBub2Rlcy5wdXNoKGJ1Zi5zbGljZShzdGFydEksIGVuZEksIGZyb20pKTtcbiAgICAgICAgcG9zaXRpb25zLnB1c2goZnJvbSAtIG9mZik7XG4gICAgfVxufVxuLy8gVGhpcyBmdW5jdGlvbiB0YWtlcyBhIG5vZGUgdGhhdCdzIGluIGEgYnVmZmVyLCBhbmQgY29udmVydHMgaXQsIGFuZFxuLy8gaXRzIHBhcmVudCBidWZmZXIgbm9kZXMsIGludG8gYSBUcmVlLiBUaGlzIGlzIGFnYWluIGFjdGluZyBvbiB0aGVcbi8vIGFzc3VtcHRpb24gdGhhdCB0aGUgdHJlZXMgYW5kIGJ1ZmZlcnMgaGF2ZSBiZWVuIGNvbnN0cnVjdGVkIGJ5IHRoZVxuLy8gcGFyc2UgdGhhdCB3YXMgcmFuIHZpYSB0aGUgbWl4IHBhcnNlciwgYW5kIHRodXMgYXJlbid0IHNoYXJlZCB3aXRoXG4vLyBhbnkgb3RoZXIgY29kZSwgbWFraW5nIHZpb2xhdGlvbnMgb2YgdGhlIGltbXV0YWJpbGl0eSBzYWZlLlxuZnVuY3Rpb24gbWF0ZXJpYWxpemUoY3Vyc29yKSB7XG4gICAgbGV0IHsgbm9kZSB9ID0gY3Vyc29yLCBzdGFjayA9IFtdO1xuICAgIGxldCBidWZmZXIgPSBub2RlLmNvbnRleHQuYnVmZmVyO1xuICAgIC8vIFNjYW4gdXAgdG8gdGhlIG5lYXJlc3QgdHJlZVxuICAgIGRvIHtcbiAgICAgICAgc3RhY2sucHVzaChjdXJzb3IuaW5kZXgpO1xuICAgICAgICBjdXJzb3IucGFyZW50KCk7XG4gICAgfSB3aGlsZSAoIWN1cnNvci50cmVlKTtcbiAgICAvLyBGaW5kIHRoZSBpbmRleCBvZiB0aGUgYnVmZmVyIGluIHRoYXQgdHJlZVxuICAgIGxldCBiYXNlID0gY3Vyc29yLnRyZWUsIGkgPSBiYXNlLmNoaWxkcmVuLmluZGV4T2YoYnVmZmVyKTtcbiAgICBsZXQgYnVmID0gYmFzZS5jaGlsZHJlbltpXSwgYiA9IGJ1Zi5idWZmZXIsIG5ld1N0YWNrID0gW2ldO1xuICAgIC8vIFNwbGl0IGEgbGV2ZWwgaW4gdGhlIGJ1ZmZlciwgcHV0dGluZyB0aGUgbm9kZXMgYmVmb3JlIGFuZCBhZnRlclxuICAgIC8vIHRoZSBjaGlsZCB0aGF0IGNvbnRhaW5zIGBub2RlYCBpbnRvIG5ldyBidWZmZXJzLlxuICAgIGZ1bmN0aW9uIHNwbGl0KHN0YXJ0SSwgZW5kSSwgdHlwZSwgaW5uZXJPZmZzZXQsIGxlbmd0aCwgc3RhY2tQb3MpIHtcbiAgICAgICAgbGV0IHRhcmdldEkgPSBzdGFja1tzdGFja1Bvc107XG4gICAgICAgIGxldCBjaGlsZHJlbiA9IFtdLCBwb3NpdGlvbnMgPSBbXTtcbiAgICAgICAgc2xpY2VCdWYoYnVmLCBzdGFydEksIHRhcmdldEksIGNoaWxkcmVuLCBwb3NpdGlvbnMsIGlubmVyT2Zmc2V0KTtcbiAgICAgICAgbGV0IGZyb20gPSBiW3RhcmdldEkgKyAxXSwgdG8gPSBiW3RhcmdldEkgKyAyXTtcbiAgICAgICAgbmV3U3RhY2sucHVzaChjaGlsZHJlbi5sZW5ndGgpO1xuICAgICAgICBsZXQgY2hpbGQgPSBzdGFja1Bvc1xuICAgICAgICAgICAgPyBzcGxpdCh0YXJnZXRJICsgNCwgYlt0YXJnZXRJICsgM10sIGJ1Zi5zZXQudHlwZXNbYlt0YXJnZXRJXV0sIGZyb20sIHRvIC0gZnJvbSwgc3RhY2tQb3MgLSAxKVxuICAgICAgICAgICAgOiBub2RlLnRvVHJlZSgpO1xuICAgICAgICBjaGlsZHJlbi5wdXNoKGNoaWxkKTtcbiAgICAgICAgcG9zaXRpb25zLnB1c2goZnJvbSAtIGlubmVyT2Zmc2V0KTtcbiAgICAgICAgc2xpY2VCdWYoYnVmLCBiW3RhcmdldEkgKyAzXSwgZW5kSSwgY2hpbGRyZW4sIHBvc2l0aW9ucywgaW5uZXJPZmZzZXQpO1xuICAgICAgICByZXR1cm4gbmV3IFRyZWUodHlwZSwgY2hpbGRyZW4sIHBvc2l0aW9ucywgbGVuZ3RoKTtcbiAgICB9XG4gICAgYmFzZS5jaGlsZHJlbltpXSA9IHNwbGl0KDAsIGIubGVuZ3RoLCBOb2RlVHlwZS5ub25lLCAwLCBidWYubGVuZ3RoLCBzdGFjay5sZW5ndGggLSAxKTtcbiAgICAvLyBNb3ZlIHRoZSBjdXJzb3IgYmFjayB0byB0aGUgdGFyZ2V0IG5vZGVcbiAgICBmb3IgKGxldCBpbmRleCBvZiBuZXdTdGFjaykge1xuICAgICAgICBsZXQgdHJlZSA9IGN1cnNvci50cmVlLmNoaWxkcmVuW2luZGV4XSwgcG9zID0gY3Vyc29yLnRyZWUucG9zaXRpb25zW2luZGV4XTtcbiAgICAgICAgY3Vyc29yLnlpZWxkKG5ldyBUcmVlTm9kZSh0cmVlLCBwb3MgKyBjdXJzb3IuZnJvbSwgaW5kZXgsIGN1cnNvci5fdHJlZSkpO1xuICAgIH1cbn1cbmNsYXNzIFN0cnVjdHVyZUN1cnNvciB7XG4gICAgY29uc3RydWN0b3Iocm9vdCwgb2Zmc2V0KSB7XG4gICAgICAgIHRoaXMub2Zmc2V0ID0gb2Zmc2V0O1xuICAgICAgICB0aGlzLmRvbmUgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5jdXJzb3IgPSByb290LmN1cnNvcihJdGVyTW9kZS5JbmNsdWRlQW5vbnltb3VzIHwgSXRlck1vZGUuSWdub3JlTW91bnRzKTtcbiAgICB9XG4gICAgLy8gTW92ZSB0byB0aGUgZmlyc3Qgbm9kZSAoaW4gcHJlLW9yZGVyKSB0aGF0IHN0YXJ0cyBhdCBvciBhZnRlciBgcG9zYC5cbiAgICBtb3ZlVG8ocG9zKSB7XG4gICAgICAgIGxldCB7IGN1cnNvciB9ID0gdGhpcywgcCA9IHBvcyAtIHRoaXMub2Zmc2V0O1xuICAgICAgICB3aGlsZSAoIXRoaXMuZG9uZSAmJiBjdXJzb3IuZnJvbSA8IHApIHtcbiAgICAgICAgICAgIGlmIChjdXJzb3IudG8gPj0gcG9zICYmIGN1cnNvci5lbnRlcihwLCAxLCBJdGVyTW9kZS5JZ25vcmVPdmVybGF5cyB8IEl0ZXJNb2RlLkV4Y2x1ZGVCdWZmZXJzKSkgO1xuICAgICAgICAgICAgZWxzZSBpZiAoIWN1cnNvci5uZXh0KGZhbHNlKSlcbiAgICAgICAgICAgICAgICB0aGlzLmRvbmUgPSB0cnVlO1xuICAgICAgICB9XG4gICAgfVxuICAgIGhhc05vZGUoY3Vyc29yKSB7XG4gICAgICAgIHRoaXMubW92ZVRvKGN1cnNvci5mcm9tKTtcbiAgICAgICAgaWYgKCF0aGlzLmRvbmUgJiYgdGhpcy5jdXJzb3IuZnJvbSArIHRoaXMub2Zmc2V0ID09IGN1cnNvci5mcm9tICYmIHRoaXMuY3Vyc29yLnRyZWUpIHtcbiAgICAgICAgICAgIGZvciAobGV0IHRyZWUgPSB0aGlzLmN1cnNvci50cmVlOzspIHtcbiAgICAgICAgICAgICAgICBpZiAodHJlZSA9PSBjdXJzb3IudHJlZSlcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgICAgaWYgKHRyZWUuY2hpbGRyZW4ubGVuZ3RoICYmIHRyZWUucG9zaXRpb25zWzBdID09IDAgJiYgdHJlZS5jaGlsZHJlblswXSBpbnN0YW5jZW9mIFRyZWUpXG4gICAgICAgICAgICAgICAgICAgIHRyZWUgPSB0cmVlLmNoaWxkcmVuWzBdO1xuICAgICAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbn1cbmNsYXNzIEZyYWdtZW50Q3Vyc29yIHtcbiAgICBjb25zdHJ1Y3RvcihmcmFnbWVudHMpIHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICB0aGlzLmZyYWdtZW50cyA9IGZyYWdtZW50cztcbiAgICAgICAgdGhpcy5jdXJUbyA9IDA7XG4gICAgICAgIHRoaXMuZnJhZ0kgPSAwO1xuICAgICAgICBpZiAoZnJhZ21lbnRzLmxlbmd0aCkge1xuICAgICAgICAgICAgbGV0IGZpcnN0ID0gdGhpcy5jdXJGcmFnID0gZnJhZ21lbnRzWzBdO1xuICAgICAgICAgICAgdGhpcy5jdXJUbyA9IChfYSA9IGZpcnN0LnRyZWUucHJvcChzdG9wcGVkSW5uZXIpKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiBmaXJzdC50bztcbiAgICAgICAgICAgIHRoaXMuaW5uZXIgPSBuZXcgU3RydWN0dXJlQ3Vyc29yKGZpcnN0LnRyZWUsIC1maXJzdC5vZmZzZXQpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5jdXJGcmFnID0gdGhpcy5pbm5lciA9IG51bGw7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaGFzTm9kZShub2RlKSB7XG4gICAgICAgIHdoaWxlICh0aGlzLmN1ckZyYWcgJiYgbm9kZS5mcm9tID49IHRoaXMuY3VyVG8pXG4gICAgICAgICAgICB0aGlzLm5leHRGcmFnKCk7XG4gICAgICAgIHJldHVybiB0aGlzLmN1ckZyYWcgJiYgdGhpcy5jdXJGcmFnLmZyb20gPD0gbm9kZS5mcm9tICYmIHRoaXMuY3VyVG8gPj0gbm9kZS50byAmJiB0aGlzLmlubmVyLmhhc05vZGUobm9kZSk7XG4gICAgfVxuICAgIG5leHRGcmFnKCkge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIHRoaXMuZnJhZ0krKztcbiAgICAgICAgaWYgKHRoaXMuZnJhZ0kgPT0gdGhpcy5mcmFnbWVudHMubGVuZ3RoKSB7XG4gICAgICAgICAgICB0aGlzLmN1ckZyYWcgPSB0aGlzLmlubmVyID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGxldCBmcmFnID0gdGhpcy5jdXJGcmFnID0gdGhpcy5mcmFnbWVudHNbdGhpcy5mcmFnSV07XG4gICAgICAgICAgICB0aGlzLmN1clRvID0gKF9hID0gZnJhZy50cmVlLnByb3Aoc3RvcHBlZElubmVyKSkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogZnJhZy50bztcbiAgICAgICAgICAgIHRoaXMuaW5uZXIgPSBuZXcgU3RydWN0dXJlQ3Vyc29yKGZyYWcudHJlZSwgLWZyYWcub2Zmc2V0KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBmaW5kTW91bnRzKHBvcywgcGFyc2VyKSB7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgbGV0IHJlc3VsdCA9IFtdO1xuICAgICAgICBpZiAodGhpcy5pbm5lcikge1xuICAgICAgICAgICAgdGhpcy5pbm5lci5jdXJzb3IubW92ZVRvKHBvcywgMSk7XG4gICAgICAgICAgICBmb3IgKGxldCBwb3MgPSB0aGlzLmlubmVyLmN1cnNvci5ub2RlOyBwb3M7IHBvcyA9IHBvcy5wYXJlbnQpIHtcbiAgICAgICAgICAgICAgICBsZXQgbW91bnQgPSAoX2EgPSBwb3MudHJlZSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLnByb3AoTm9kZVByb3AubW91bnRlZCk7XG4gICAgICAgICAgICAgICAgaWYgKG1vdW50ICYmIG1vdW50LnBhcnNlciA9PSBwYXJzZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IHRoaXMuZnJhZ0k7IGkgPCB0aGlzLmZyYWdtZW50cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGZyYWcgPSB0aGlzLmZyYWdtZW50c1tpXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChmcmFnLmZyb20gPj0gcG9zLnRvKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGZyYWcudHJlZSA9PSB0aGlzLmN1ckZyYWcudHJlZSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZyYWcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvczogcG9zLmZyb20gLSBmcmFnLm9mZnNldCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW91bnRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cbn1cbmZ1bmN0aW9uIHB1bmNoUmFuZ2VzKG91dGVyLCByYW5nZXMpIHtcbiAgICBsZXQgY29weSA9IG51bGwsIGN1cnJlbnQgPSByYW5nZXM7XG4gICAgZm9yIChsZXQgaSA9IDEsIGogPSAwOyBpIDwgb3V0ZXIubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgbGV0IGdhcEZyb20gPSBvdXRlcltpIC0gMV0udG8sIGdhcFRvID0gb3V0ZXJbaV0uZnJvbTtcbiAgICAgICAgZm9yICg7IGogPCBjdXJyZW50Lmxlbmd0aDsgaisrKSB7XG4gICAgICAgICAgICBsZXQgciA9IGN1cnJlbnRbal07XG4gICAgICAgICAgICBpZiAoci5mcm9tID49IGdhcFRvKVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgaWYgKHIudG8gPD0gZ2FwRnJvbSlcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIGlmICghY29weSlcbiAgICAgICAgICAgICAgICBjdXJyZW50ID0gY29weSA9IHJhbmdlcy5zbGljZSgpO1xuICAgICAgICAgICAgaWYgKHIuZnJvbSA8IGdhcEZyb20pIHtcbiAgICAgICAgICAgICAgICBjb3B5W2pdID0gbmV3IFJhbmdlKHIuZnJvbSwgZ2FwRnJvbSk7XG4gICAgICAgICAgICAgICAgaWYgKHIudG8gPiBnYXBUbylcbiAgICAgICAgICAgICAgICAgICAgY29weS5zcGxpY2UoaiArIDEsIDAsIG5ldyBSYW5nZShnYXBUbywgci50bykpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoci50byA+IGdhcFRvKSB7XG4gICAgICAgICAgICAgICAgY29weVtqLS1dID0gbmV3IFJhbmdlKGdhcFRvLCByLnRvKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvcHkuc3BsaWNlKGotLSwgMSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGN1cnJlbnQ7XG59XG5mdW5jdGlvbiBmaW5kQ292ZXJDaGFuZ2VzKGEsIGIsIGZyb20sIHRvKSB7XG4gICAgbGV0IGlBID0gMCwgaUIgPSAwLCBpbkEgPSBmYWxzZSwgaW5CID0gZmFsc2UsIHBvcyA9IC0xZTk7XG4gICAgbGV0IHJlc3VsdCA9IFtdO1xuICAgIGZvciAoOzspIHtcbiAgICAgICAgbGV0IG5leHRBID0gaUEgPT0gYS5sZW5ndGggPyAxZTkgOiBpbkEgPyBhW2lBXS50byA6IGFbaUFdLmZyb207XG4gICAgICAgIGxldCBuZXh0QiA9IGlCID09IGIubGVuZ3RoID8gMWU5IDogaW5CID8gYltpQl0udG8gOiBiW2lCXS5mcm9tO1xuICAgICAgICBpZiAoaW5BICE9IGluQikge1xuICAgICAgICAgICAgbGV0IHN0YXJ0ID0gTWF0aC5tYXgocG9zLCBmcm9tKSwgZW5kID0gTWF0aC5taW4obmV4dEEsIG5leHRCLCB0byk7XG4gICAgICAgICAgICBpZiAoc3RhcnQgPCBlbmQpXG4gICAgICAgICAgICAgICAgcmVzdWx0LnB1c2gobmV3IFJhbmdlKHN0YXJ0LCBlbmQpKTtcbiAgICAgICAgfVxuICAgICAgICBwb3MgPSBNYXRoLm1pbihuZXh0QSwgbmV4dEIpO1xuICAgICAgICBpZiAocG9zID09IDFlOSlcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBpZiAobmV4dEEgPT0gcG9zKSB7XG4gICAgICAgICAgICBpZiAoIWluQSlcbiAgICAgICAgICAgICAgICBpbkEgPSB0cnVlO1xuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgaW5BID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgaUErKztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAobmV4dEIgPT0gcG9zKSB7XG4gICAgICAgICAgICBpZiAoIWluQilcbiAgICAgICAgICAgICAgICBpbkIgPSB0cnVlO1xuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgaW5CID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgaUIrKztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xufVxuLy8gR2l2ZW4gYSBudW1iZXIgb2YgZnJhZ21lbnRzIGZvciB0aGUgb3V0ZXIgdHJlZSwgYW5kIGEgc2V0IG9mIHJhbmdlc1xuLy8gdG8gcGFyc2UsIGZpbmQgZnJhZ21lbnRzIGZvciBpbm5lciB0cmVlcyBtb3VudGVkIGFyb3VuZCB0aG9zZVxuLy8gcmFuZ2VzLCBpZiBhbnkuXG5mdW5jdGlvbiBlbnRlckZyYWdtZW50cyhtb3VudHMsIHJhbmdlcykge1xuICAgIGxldCByZXN1bHQgPSBbXTtcbiAgICBmb3IgKGxldCB7IHBvcywgbW91bnQsIGZyYWcgfSBvZiBtb3VudHMpIHtcbiAgICAgICAgbGV0IHN0YXJ0UG9zID0gcG9zICsgKG1vdW50Lm92ZXJsYXkgPyBtb3VudC5vdmVybGF5WzBdLmZyb20gOiAwKSwgZW5kUG9zID0gc3RhcnRQb3MgKyBtb3VudC50cmVlLmxlbmd0aDtcbiAgICAgICAgbGV0IGZyb20gPSBNYXRoLm1heChmcmFnLmZyb20sIHN0YXJ0UG9zKSwgdG8gPSBNYXRoLm1pbihmcmFnLnRvLCBlbmRQb3MpO1xuICAgICAgICBpZiAobW91bnQub3ZlcmxheSkge1xuICAgICAgICAgICAgbGV0IG92ZXJsYXkgPSBtb3VudC5vdmVybGF5Lm1hcChyID0+IG5ldyBSYW5nZShyLmZyb20gKyBwb3MsIHIudG8gKyBwb3MpKTtcbiAgICAgICAgICAgIGxldCBjaGFuZ2VzID0gZmluZENvdmVyQ2hhbmdlcyhyYW5nZXMsIG92ZXJsYXksIGZyb20sIHRvKTtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwLCBwb3MgPSBmcm9tOzsgaSsrKSB7XG4gICAgICAgICAgICAgICAgbGV0IGxhc3QgPSBpID09IGNoYW5nZXMubGVuZ3RoLCBlbmQgPSBsYXN0ID8gdG8gOiBjaGFuZ2VzW2ldLmZyb207XG4gICAgICAgICAgICAgICAgaWYgKGVuZCA+IHBvcylcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnB1c2gobmV3IFRyZWVGcmFnbWVudChwb3MsIGVuZCwgbW91bnQudHJlZSwgLXN0YXJ0UG9zLCBmcmFnLmZyb20gPj0gcG9zIHx8IGZyYWcub3BlblN0YXJ0LCBmcmFnLnRvIDw9IGVuZCB8fCBmcmFnLm9wZW5FbmQpKTtcbiAgICAgICAgICAgICAgICBpZiAobGFzdClcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgcG9zID0gY2hhbmdlc1tpXS50bztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJlc3VsdC5wdXNoKG5ldyBUcmVlRnJhZ21lbnQoZnJvbSwgdG8sIG1vdW50LnRyZWUsIC1zdGFydFBvcywgZnJhZy5mcm9tID49IHN0YXJ0UG9zIHx8IGZyYWcub3BlblN0YXJ0LCBmcmFnLnRvIDw9IGVuZFBvcyB8fCBmcmFnLm9wZW5FbmQpKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xufVxuXG5leHBvcnQgeyBEZWZhdWx0QnVmZmVyTGVuZ3RoLCBJdGVyTW9kZSwgTW91bnRlZFRyZWUsIE5vZGVQcm9wLCBOb2RlU2V0LCBOb2RlVHlwZSwgTm9kZVdlYWtNYXAsIFBhcnNlciwgVHJlZSwgVHJlZUJ1ZmZlciwgVHJlZUN1cnNvciwgVHJlZUZyYWdtZW50LCBwYXJzZU1peGVkIH07XG4iLAogICAgImltcG9ydCB7IE5vZGVQcm9wIH0gZnJvbSAnQGxlemVyL2NvbW1vbic7XG5cbmxldCBuZXh0VGFnSUQgPSAwO1xuLyoqXG5IaWdobGlnaHRpbmcgdGFncyBhcmUgbWFya2VycyB0aGF0IGRlbm90ZSBhIGhpZ2hsaWdodGluZyBjYXRlZ29yeS5cblRoZXkgYXJlIFthc3NvY2lhdGVkXSgjaGlnaGxpZ2h0LnN0eWxlVGFncykgd2l0aCBwYXJ0cyBvZiBhIHN5bnRheFxudHJlZSBieSBhIGxhbmd1YWdlIG1vZGUsIGFuZCB0aGVuIG1hcHBlZCB0byBhbiBhY3R1YWwgQ1NTIHN0eWxlIGJ5XG5hIFtoaWdobGlnaHRlcl0oI2hpZ2hsaWdodC5IaWdobGlnaHRlcikuXG5cbkJlY2F1c2Ugc3ludGF4IHRyZWUgbm9kZSB0eXBlcyBhbmQgaGlnaGxpZ2h0IHN0eWxlcyBoYXZlIHRvIGJlXG5hYmxlIHRvIHRhbGsgdGhlIHNhbWUgbGFuZ3VhZ2UsIENvZGVNaXJyb3IgdXNlcyBhIG1vc3RseSBfY2xvc2VkX1xuW3ZvY2FidWxhcnldKCNoaWdobGlnaHQudGFncykgb2Ygc3ludGF4IHRhZ3MgKGFzIG9wcG9zZWQgdG9cbnRyYWRpdGlvbmFsIG9wZW4gc3RyaW5nLWJhc2VkIHN5c3RlbXMsIHdoaWNoIG1ha2UgaXQgaGFyZCBmb3JcbmhpZ2hsaWdodGluZyB0aGVtZXMgdG8gY292ZXIgYWxsIHRoZSB0b2tlbnMgcHJvZHVjZWQgYnkgdGhlXG52YXJpb3VzIGxhbmd1YWdlcykuXG5cbkl0IF9pc18gcG9zc2libGUgdG8gW2RlZmluZV0oI2hpZ2hsaWdodC5UYWdeZGVmaW5lKSB5b3VyIG93blxuaGlnaGxpZ2h0aW5nIHRhZ3MgZm9yIHN5c3RlbS1pbnRlcm5hbCB1c2UgKHdoZXJlIHlvdSBjb250cm9sIGJvdGhcbnRoZSBsYW5ndWFnZSBwYWNrYWdlIGFuZCB0aGUgaGlnaGxpZ2h0ZXIpLCBidXQgc3VjaCB0YWdzIHdpbGwgbm90XG5iZSBwaWNrZWQgdXAgYnkgcmVndWxhciBoaWdobGlnaHRlcnMgKHRob3VnaCB5b3UgY2FuIGRlcml2ZSB0aGVtXG5mcm9tIHN0YW5kYXJkIHRhZ3MgdG8gYWxsb3cgaGlnaGxpZ2h0ZXJzIHRvIGZhbGwgYmFjayB0byB0aG9zZSkuXG4qL1xuY2xhc3MgVGFnIHtcbiAgICAvKipcbiAgICBAaW50ZXJuYWxcbiAgICAqL1xuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8qKlxuICAgIFRoZSBvcHRpb25hbCBuYW1lIG9mIHRoZSBiYXNlIHRhZyBAaW50ZXJuYWxcbiAgICAqL1xuICAgIG5hbWUsIFxuICAgIC8qKlxuICAgIFRoZSBzZXQgb2YgdGhpcyB0YWcgYW5kIGFsbCBpdHMgcGFyZW50IHRhZ3MsIHN0YXJ0aW5nIHdpdGhcbiAgICB0aGlzIG9uZSBpdHNlbGYgYW5kIHNvcnRlZCBpbiBvcmRlciBvZiBkZWNyZWFzaW5nIHNwZWNpZmljaXR5LlxuICAgICovXG4gICAgc2V0LCBcbiAgICAvKipcbiAgICBUaGUgYmFzZSB1bm1vZGlmaWVkIHRhZyB0aGF0IHRoaXMgb25lIGlzIGJhc2VkIG9uLCBpZiBpdCdzXG4gICAgbW9kaWZpZWQgQGludGVybmFsXG4gICAgKi9cbiAgICBiYXNlLCBcbiAgICAvKipcbiAgICBUaGUgbW9kaWZpZXJzIGFwcGxpZWQgdG8gdGhpcy5iYXNlIEBpbnRlcm5hbFxuICAgICovXG4gICAgbW9kaWZpZWQpIHtcbiAgICAgICAgdGhpcy5uYW1lID0gbmFtZTtcbiAgICAgICAgdGhpcy5zZXQgPSBzZXQ7XG4gICAgICAgIHRoaXMuYmFzZSA9IGJhc2U7XG4gICAgICAgIHRoaXMubW9kaWZpZWQgPSBtb2RpZmllZDtcbiAgICAgICAgLyoqXG4gICAgICAgIEBpbnRlcm5hbFxuICAgICAgICAqL1xuICAgICAgICB0aGlzLmlkID0gbmV4dFRhZ0lEKys7XG4gICAgfVxuICAgIHRvU3RyaW5nKCkge1xuICAgICAgICBsZXQgeyBuYW1lIH0gPSB0aGlzO1xuICAgICAgICBmb3IgKGxldCBtb2Qgb2YgdGhpcy5tb2RpZmllZClcbiAgICAgICAgICAgIGlmIChtb2QubmFtZSlcbiAgICAgICAgICAgICAgICBuYW1lID0gYCR7bW9kLm5hbWV9KCR7bmFtZX0pYDtcbiAgICAgICAgcmV0dXJuIG5hbWU7XG4gICAgfVxuICAgIHN0YXRpYyBkZWZpbmUobmFtZU9yUGFyZW50LCBwYXJlbnQpIHtcbiAgICAgICAgbGV0IG5hbWUgPSB0eXBlb2YgbmFtZU9yUGFyZW50ID09IFwic3RyaW5nXCIgPyBuYW1lT3JQYXJlbnQgOiBcIj9cIjtcbiAgICAgICAgaWYgKG5hbWVPclBhcmVudCBpbnN0YW5jZW9mIFRhZylcbiAgICAgICAgICAgIHBhcmVudCA9IG5hbWVPclBhcmVudDtcbiAgICAgICAgaWYgKHBhcmVudCA9PT0gbnVsbCB8fCBwYXJlbnQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHBhcmVudC5iYXNlKVxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQ2FuIG5vdCBkZXJpdmUgZnJvbSBhIG1vZGlmaWVkIHRhZ1wiKTtcbiAgICAgICAgbGV0IHRhZyA9IG5ldyBUYWcobmFtZSwgW10sIG51bGwsIFtdKTtcbiAgICAgICAgdGFnLnNldC5wdXNoKHRhZyk7XG4gICAgICAgIGlmIChwYXJlbnQpXG4gICAgICAgICAgICBmb3IgKGxldCB0IG9mIHBhcmVudC5zZXQpXG4gICAgICAgICAgICAgICAgdGFnLnNldC5wdXNoKHQpO1xuICAgICAgICByZXR1cm4gdGFnO1xuICAgIH1cbiAgICAvKipcbiAgICBEZWZpbmUgYSB0YWcgX21vZGlmaWVyXywgd2hpY2ggaXMgYSBmdW5jdGlvbiB0aGF0LCBnaXZlbiBhIHRhZyxcbiAgICB3aWxsIHJldHVybiBhIHRhZyB0aGF0IGlzIGEgc3VidGFnIG9mIHRoZSBvcmlnaW5hbC4gQXBwbHlpbmcgdGhlXG4gICAgc2FtZSBtb2RpZmllciB0byBhIHR3aWNlIHRhZyB3aWxsIHJldHVybiB0aGUgc2FtZSB2YWx1ZSAoYG0xKHQxKVxuICAgID09IG0xKHQxKWApIGFuZCBhcHBseWluZyBtdWx0aXBsZSBtb2RpZmllcnMgd2lsbCwgcmVnYXJkbGVzcyBvclxuICAgIG9yZGVyLCBwcm9kdWNlIHRoZSBzYW1lIHRhZyAoYG0xKG0yKHQxKSkgPT0gbTIobTEodDEpKWApLlxuICAgIFxuICAgIFdoZW4gbXVsdGlwbGUgbW9kaWZpZXJzIGFyZSBhcHBsaWVkIHRvIGEgZ2l2ZW4gYmFzZSB0YWcsIGVhY2hcbiAgICBzbWFsbGVyIHNldCBvZiBtb2RpZmllcnMgaXMgcmVnaXN0ZXJlZCBhcyBhIHBhcmVudCwgc28gdGhhdCBmb3JcbiAgICBleGFtcGxlIGBtMShtMihtMyh0MSkpKWAgaXMgYSBzdWJ0eXBlIG9mIGBtMShtMih0MSkpYCxcbiAgICBgbTEobTModDEpYCwgYW5kIHNvIG9uLlxuICAgICovXG4gICAgc3RhdGljIGRlZmluZU1vZGlmaWVyKG5hbWUpIHtcbiAgICAgICAgbGV0IG1vZCA9IG5ldyBNb2RpZmllcihuYW1lKTtcbiAgICAgICAgcmV0dXJuICh0YWcpID0+IHtcbiAgICAgICAgICAgIGlmICh0YWcubW9kaWZpZWQuaW5kZXhPZihtb2QpID4gLTEpXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRhZztcbiAgICAgICAgICAgIHJldHVybiBNb2RpZmllci5nZXQodGFnLmJhc2UgfHwgdGFnLCB0YWcubW9kaWZpZWQuY29uY2F0KG1vZCkuc29ydCgoYSwgYikgPT4gYS5pZCAtIGIuaWQpKTtcbiAgICAgICAgfTtcbiAgICB9XG59XG5sZXQgbmV4dE1vZGlmaWVySUQgPSAwO1xuY2xhc3MgTW9kaWZpZXIge1xuICAgIGNvbnN0cnVjdG9yKG5hbWUpIHtcbiAgICAgICAgdGhpcy5uYW1lID0gbmFtZTtcbiAgICAgICAgdGhpcy5pbnN0YW5jZXMgPSBbXTtcbiAgICAgICAgdGhpcy5pZCA9IG5leHRNb2RpZmllcklEKys7XG4gICAgfVxuICAgIHN0YXRpYyBnZXQoYmFzZSwgbW9kcykge1xuICAgICAgICBpZiAoIW1vZHMubGVuZ3RoKVxuICAgICAgICAgICAgcmV0dXJuIGJhc2U7XG4gICAgICAgIGxldCBleGlzdHMgPSBtb2RzWzBdLmluc3RhbmNlcy5maW5kKHQgPT4gdC5iYXNlID09IGJhc2UgJiYgc2FtZUFycmF5KG1vZHMsIHQubW9kaWZpZWQpKTtcbiAgICAgICAgaWYgKGV4aXN0cylcbiAgICAgICAgICAgIHJldHVybiBleGlzdHM7XG4gICAgICAgIGxldCBzZXQgPSBbXSwgdGFnID0gbmV3IFRhZyhiYXNlLm5hbWUsIHNldCwgYmFzZSwgbW9kcyk7XG4gICAgICAgIGZvciAobGV0IG0gb2YgbW9kcylcbiAgICAgICAgICAgIG0uaW5zdGFuY2VzLnB1c2godGFnKTtcbiAgICAgICAgbGV0IGNvbmZpZ3MgPSBwb3dlclNldChtb2RzKTtcbiAgICAgICAgZm9yIChsZXQgcGFyZW50IG9mIGJhc2Uuc2V0KVxuICAgICAgICAgICAgaWYgKCFwYXJlbnQubW9kaWZpZWQubGVuZ3RoKVxuICAgICAgICAgICAgICAgIGZvciAobGV0IGNvbmZpZyBvZiBjb25maWdzKVxuICAgICAgICAgICAgICAgICAgICBzZXQucHVzaChNb2RpZmllci5nZXQocGFyZW50LCBjb25maWcpKTtcbiAgICAgICAgcmV0dXJuIHRhZztcbiAgICB9XG59XG5mdW5jdGlvbiBzYW1lQXJyYXkoYSwgYikge1xuICAgIHJldHVybiBhLmxlbmd0aCA9PSBiLmxlbmd0aCAmJiBhLmV2ZXJ5KCh4LCBpKSA9PiB4ID09IGJbaV0pO1xufVxuZnVuY3Rpb24gcG93ZXJTZXQoYXJyYXkpIHtcbiAgICBsZXQgc2V0cyA9IFtbXV07XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBhcnJheS5sZW5ndGg7IGkrKykge1xuICAgICAgICBmb3IgKGxldCBqID0gMCwgZSA9IHNldHMubGVuZ3RoOyBqIDwgZTsgaisrKSB7XG4gICAgICAgICAgICBzZXRzLnB1c2goc2V0c1tqXS5jb25jYXQoYXJyYXlbaV0pKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gc2V0cy5zb3J0KChhLCBiKSA9PiBiLmxlbmd0aCAtIGEubGVuZ3RoKTtcbn1cbi8qKlxuVGhpcyBmdW5jdGlvbiBpcyB1c2VkIHRvIGFkZCBhIHNldCBvZiB0YWdzIHRvIGEgbGFuZ3VhZ2Ugc3ludGF4XG52aWEgW2BOb2RlU2V0LmV4dGVuZGBdKCNjb21tb24uTm9kZVNldC5leHRlbmQpIG9yXG5bYExSUGFyc2VyLmNvbmZpZ3VyZWBdKCNsci5MUlBhcnNlci5jb25maWd1cmUpLlxuXG5UaGUgYXJndW1lbnQgb2JqZWN0IG1hcHMgbm9kZSBzZWxlY3RvcnMgdG8gW2hpZ2hsaWdodGluZ1xudGFnc10oI2hpZ2hsaWdodC5UYWcpIG9yIGFycmF5cyBvZiB0YWdzLlxuXG5Ob2RlIHNlbGVjdG9ycyBtYXkgaG9sZCBvbmUgb3IgbW9yZSAoc3BhY2Utc2VwYXJhdGVkKSBub2RlIHBhdGhzLlxuU3VjaCBhIHBhdGggY2FuIGJlIGEgW25vZGUgbmFtZV0oI2NvbW1vbi5Ob2RlVHlwZS5uYW1lKSwgb3Jcbm11bHRpcGxlIG5vZGUgbmFtZXMgKG9yIGAqYCB3aWxkY2FyZHMpIHNlcGFyYXRlZCBieSBzbGFzaFxuY2hhcmFjdGVycywgYXMgaW4gYFwiQmxvY2svRGVjbGFyYXRpb24vVmFyaWFibGVOYW1lXCJgLiBTdWNoIGEgcGF0aFxubWF0Y2hlcyB0aGUgZmluYWwgbm9kZSBidXQgb25seSBpZiBpdHMgZGlyZWN0IHBhcmVudCBub2RlcyBhcmUgdGhlXG5vdGhlciBub2RlcyBtZW50aW9uZWQuIEEgYCpgIGluIHN1Y2ggYSBwYXRoIG1hdGNoZXMgYW55IHBhcmVudCxcbmJ1dCBvbmx5IGEgc2luZ2xlIGxldmVs4oCUd2lsZGNhcmRzIHRoYXQgbWF0Y2ggbXVsdGlwbGUgcGFyZW50c1xuYXJlbid0IHN1cHBvcnRlZCwgYm90aCBmb3IgZWZmaWNpZW5jeSByZWFzb25zIGFuZCBiZWNhdXNlIExlemVyXG50cmVlcyBtYWtlIGl0IHJhdGhlciBoYXJkIHRvIHJlYXNvbiBhYm91dCB3aGF0IHRoZXkgd291bGQgbWF0Y2guKVxuXG5BIHBhdGggY2FuIGJlIGVuZGVkIHdpdGggYC8uLi5gIHRvIGluZGljYXRlIHRoYXQgdGhlIHRhZyBhc3NpZ25lZFxudG8gdGhlIG5vZGUgc2hvdWxkIGFsc28gYXBwbHkgdG8gYWxsIGNoaWxkIG5vZGVzLCBldmVuIGlmIHRoZXlcbm1hdGNoIHRoZWlyIG93biBzdHlsZSAoYnkgZGVmYXVsdCwgb25seSB0aGUgaW5uZXJtb3N0IHN0eWxlIGlzXG51c2VkKS5cblxuV2hlbiBhIHBhdGggZW5kcyBpbiBgIWAsIGFzIGluIGBBdHRyaWJ1dGUhYCwgbm8gZnVydGhlciBtYXRjaGluZ1xuaGFwcGVucyBmb3IgdGhlIG5vZGUncyBjaGlsZCBub2RlcywgYW5kIHRoZSBlbnRpcmUgbm9kZSBnZXRzIHRoZVxuZ2l2ZW4gc3R5bGUuXG5cbkluIHRoaXMgbm90YXRpb24sIG5vZGUgbmFtZXMgdGhhdCBjb250YWluIGAvYCwgYCFgLCBgKmAsIG9yIGAuLi5gXG5tdXN0IGJlIHF1b3RlZCBhcyBKU09OIHN0cmluZ3MuXG5cbkZvciBleGFtcGxlOlxuXG5gYGBqYXZhc2NyaXB0XG5wYXJzZXIuY29uZmlndXJlKHtwcm9wczogW1xuICBzdHlsZVRhZ3Moe1xuICAgIC8vIFN0eWxlIE51bWJlciBhbmQgQmlnTnVtYmVyIG5vZGVzXG4gICAgXCJOdW1iZXIgQmlnTnVtYmVyXCI6IHRhZ3MubnVtYmVyLFxuICAgIC8vIFN0eWxlIEVzY2FwZSBub2RlcyB3aG9zZSBwYXJlbnQgaXMgU3RyaW5nXG4gICAgXCJTdHJpbmcvRXNjYXBlXCI6IHRhZ3MuZXNjYXBlLFxuICAgIC8vIFN0eWxlIGFueXRoaW5nIGluc2lkZSBBdHRyaWJ1dGVzIG5vZGVzXG4gICAgXCJBdHRyaWJ1dGVzIVwiOiB0YWdzLm1ldGEsXG4gICAgLy8gQWRkIGEgc3R5bGUgdG8gYWxsIGNvbnRlbnQgaW5zaWRlIEl0YWxpYyBub2Rlc1xuICAgIFwiSXRhbGljLy4uLlwiOiB0YWdzLmVtcGhhc2lzLFxuICAgIC8vIFN0eWxlIEludmFsaWRTdHJpbmcgbm9kZXMgYXMgYm90aCBgc3RyaW5nYCBhbmQgYGludmFsaWRgXG4gICAgXCJJbnZhbGlkU3RyaW5nXCI6IFt0YWdzLnN0cmluZywgdGFncy5pbnZhbGlkXSxcbiAgICAvLyBTdHlsZSB0aGUgbm9kZSBuYW1lZCBcIi9cIiBhcyBwdW5jdHVhdGlvblxuICAgICdcIi9cIic6IHRhZ3MucHVuY3R1YXRpb25cbiAgfSlcbl19KVxuYGBgXG4qL1xuZnVuY3Rpb24gc3R5bGVUYWdzKHNwZWMpIHtcbiAgICBsZXQgYnlOYW1lID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgICBmb3IgKGxldCBwcm9wIGluIHNwZWMpIHtcbiAgICAgICAgbGV0IHRhZ3MgPSBzcGVjW3Byb3BdO1xuICAgICAgICBpZiAoIUFycmF5LmlzQXJyYXkodGFncykpXG4gICAgICAgICAgICB0YWdzID0gW3RhZ3NdO1xuICAgICAgICBmb3IgKGxldCBwYXJ0IG9mIHByb3Auc3BsaXQoXCIgXCIpKVxuICAgICAgICAgICAgaWYgKHBhcnQpIHtcbiAgICAgICAgICAgICAgICBsZXQgcGllY2VzID0gW10sIG1vZGUgPSAyIC8qIE1vZGUuTm9ybWFsICovLCByZXN0ID0gcGFydDtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBwb3MgPSAwOzspIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3QgPT0gXCIuLi5cIiAmJiBwb3MgPiAwICYmIHBvcyArIDMgPT0gcGFydC5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1vZGUgPSAxIC8qIE1vZGUuSW5oZXJpdCAqLztcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGxldCBtID0gL15cIig/OlteXCJcXFxcXXxcXFxcLikqP1wifFteXFwvIV0rLy5leGVjKHJlc3QpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIW0pXG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcihcIkludmFsaWQgcGF0aDogXCIgKyBwYXJ0KTtcbiAgICAgICAgICAgICAgICAgICAgcGllY2VzLnB1c2gobVswXSA9PSBcIipcIiA/IFwiXCIgOiBtWzBdWzBdID09ICdcIicgPyBKU09OLnBhcnNlKG1bMF0pIDogbVswXSk7XG4gICAgICAgICAgICAgICAgICAgIHBvcyArPSBtWzBdLmxlbmd0aDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHBvcyA9PSBwYXJ0Lmxlbmd0aClcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBsZXQgbmV4dCA9IHBhcnRbcG9zKytdO1xuICAgICAgICAgICAgICAgICAgICBpZiAocG9zID09IHBhcnQubGVuZ3RoICYmIG5leHQgPT0gXCIhXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1vZGUgPSAwIC8qIE1vZGUuT3BhcXVlICovO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKG5leHQgIT0gXCIvXCIpXG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcihcIkludmFsaWQgcGF0aDogXCIgKyBwYXJ0KTtcbiAgICAgICAgICAgICAgICAgICAgcmVzdCA9IHBhcnQuc2xpY2UocG9zKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgbGV0IGxhc3QgPSBwaWVjZXMubGVuZ3RoIC0gMSwgaW5uZXIgPSBwaWVjZXNbbGFzdF07XG4gICAgICAgICAgICAgICAgaWYgKCFpbm5lcilcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoXCJJbnZhbGlkIHBhdGg6IFwiICsgcGFydCk7XG4gICAgICAgICAgICAgICAgbGV0IHJ1bGUgPSBuZXcgUnVsZSh0YWdzLCBtb2RlLCBsYXN0ID4gMCA/IHBpZWNlcy5zbGljZSgwLCBsYXN0KSA6IG51bGwpO1xuICAgICAgICAgICAgICAgIGJ5TmFtZVtpbm5lcl0gPSBydWxlLnNvcnQoYnlOYW1lW2lubmVyXSk7XG4gICAgICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBydWxlTm9kZVByb3AuYWRkKGJ5TmFtZSk7XG59XG5jb25zdCBydWxlTm9kZVByb3AgPSBuZXcgTm9kZVByb3Aoe1xuICAgIGNvbWJpbmUoYSwgYikge1xuICAgICAgICBsZXQgY3VyLCByb290LCB0YWtlO1xuICAgICAgICB3aGlsZSAoYSB8fCBiKSB7XG4gICAgICAgICAgICBpZiAoIWEgfHwgYiAmJiBhLmRlcHRoID49IGIuZGVwdGgpIHtcbiAgICAgICAgICAgICAgICB0YWtlID0gYjtcbiAgICAgICAgICAgICAgICBiID0gYi5uZXh0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGFrZSA9IGE7XG4gICAgICAgICAgICAgICAgYSA9IGEubmV4dDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChjdXIgJiYgY3VyLm1vZGUgPT0gdGFrZS5tb2RlICYmICF0YWtlLmNvbnRleHQgJiYgIWN1ci5jb250ZXh0KVxuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgbGV0IGNvcHkgPSBuZXcgUnVsZSh0YWtlLnRhZ3MsIHRha2UubW9kZSwgdGFrZS5jb250ZXh0KTtcbiAgICAgICAgICAgIGlmIChjdXIpXG4gICAgICAgICAgICAgICAgY3VyLm5leHQgPSBjb3B5O1xuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgIHJvb3QgPSBjb3B5O1xuICAgICAgICAgICAgY3VyID0gY29weTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcm9vdDtcbiAgICB9XG59KTtcbmNsYXNzIFJ1bGUge1xuICAgIGNvbnN0cnVjdG9yKHRhZ3MsIG1vZGUsIGNvbnRleHQsIG5leHQpIHtcbiAgICAgICAgdGhpcy50YWdzID0gdGFncztcbiAgICAgICAgdGhpcy5tb2RlID0gbW9kZTtcbiAgICAgICAgdGhpcy5jb250ZXh0ID0gY29udGV4dDtcbiAgICAgICAgdGhpcy5uZXh0ID0gbmV4dDtcbiAgICB9XG4gICAgZ2V0IG9wYXF1ZSgpIHsgcmV0dXJuIHRoaXMubW9kZSA9PSAwIC8qIE1vZGUuT3BhcXVlICovOyB9XG4gICAgZ2V0IGluaGVyaXQoKSB7IHJldHVybiB0aGlzLm1vZGUgPT0gMSAvKiBNb2RlLkluaGVyaXQgKi87IH1cbiAgICBzb3J0KG90aGVyKSB7XG4gICAgICAgIGlmICghb3RoZXIgfHwgb3RoZXIuZGVwdGggPCB0aGlzLmRlcHRoKSB7XG4gICAgICAgICAgICB0aGlzLm5leHQgPSBvdGhlcjtcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9XG4gICAgICAgIG90aGVyLm5leHQgPSB0aGlzLnNvcnQob3RoZXIubmV4dCk7XG4gICAgICAgIHJldHVybiBvdGhlcjtcbiAgICB9XG4gICAgZ2V0IGRlcHRoKCkgeyByZXR1cm4gdGhpcy5jb250ZXh0ID8gdGhpcy5jb250ZXh0Lmxlbmd0aCA6IDA7IH1cbn1cblJ1bGUuZW1wdHkgPSBuZXcgUnVsZShbXSwgMiAvKiBNb2RlLk5vcm1hbCAqLywgbnVsbCk7XG4vKipcbkRlZmluZSBhIFtoaWdobGlnaHRlcl0oI2hpZ2hsaWdodC5IaWdobGlnaHRlcikgZnJvbSBhbiBhcnJheSBvZlxudGFnL2NsYXNzIHBhaXJzLiBDbGFzc2VzIGFzc29jaWF0ZWQgd2l0aCBtb3JlIHNwZWNpZmljIHRhZ3Mgd2lsbFxudGFrZSBwcmVjZWRlbmNlLlxuKi9cbmZ1bmN0aW9uIHRhZ0hpZ2hsaWdodGVyKHRhZ3MsIG9wdGlvbnMpIHtcbiAgICBsZXQgbWFwID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgICBmb3IgKGxldCBzdHlsZSBvZiB0YWdzKSB7XG4gICAgICAgIGlmICghQXJyYXkuaXNBcnJheShzdHlsZS50YWcpKVxuICAgICAgICAgICAgbWFwW3N0eWxlLnRhZy5pZF0gPSBzdHlsZS5jbGFzcztcbiAgICAgICAgZWxzZVxuICAgICAgICAgICAgZm9yIChsZXQgdGFnIG9mIHN0eWxlLnRhZylcbiAgICAgICAgICAgICAgICBtYXBbdGFnLmlkXSA9IHN0eWxlLmNsYXNzO1xuICAgIH1cbiAgICBsZXQgeyBzY29wZSwgYWxsID0gbnVsbCB9ID0gb3B0aW9ucyB8fCB7fTtcbiAgICByZXR1cm4ge1xuICAgICAgICBzdHlsZTogKHRhZ3MpID0+IHtcbiAgICAgICAgICAgIGxldCBjbHMgPSBhbGw7XG4gICAgICAgICAgICBmb3IgKGxldCB0YWcgb2YgdGFncykge1xuICAgICAgICAgICAgICAgIGZvciAobGV0IHN1YiBvZiB0YWcuc2V0KSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCB0YWdDbGFzcyA9IG1hcFtzdWIuaWRdO1xuICAgICAgICAgICAgICAgICAgICBpZiAodGFnQ2xhc3MpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNscyA9IGNscyA/IGNscyArIFwiIFwiICsgdGFnQ2xhc3MgOiB0YWdDbGFzcztcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGNscztcbiAgICAgICAgfSxcbiAgICAgICAgc2NvcGVcbiAgICB9O1xufVxuZnVuY3Rpb24gaGlnaGxpZ2h0VGFncyhoaWdobGlnaHRlcnMsIHRhZ3MpIHtcbiAgICBsZXQgcmVzdWx0ID0gbnVsbDtcbiAgICBmb3IgKGxldCBoaWdobGlnaHRlciBvZiBoaWdobGlnaHRlcnMpIHtcbiAgICAgICAgbGV0IHZhbHVlID0gaGlnaGxpZ2h0ZXIuc3R5bGUodGFncyk7XG4gICAgICAgIGlmICh2YWx1ZSlcbiAgICAgICAgICAgIHJlc3VsdCA9IHJlc3VsdCA/IHJlc3VsdCArIFwiIFwiICsgdmFsdWUgOiB2YWx1ZTtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbn1cbi8qKlxuSGlnaGxpZ2h0IHRoZSBnaXZlbiBbdHJlZV0oI2NvbW1vbi5UcmVlKSB3aXRoIHRoZSBnaXZlblxuW2hpZ2hsaWdodGVyXSgjaGlnaGxpZ2h0LkhpZ2hsaWdodGVyKS4gT2Z0ZW4sIHRoZSBoaWdoZXItbGV2ZWxcbltgaGlnaGxpZ2h0Q29kZWBdKCNoaWdobGlnaHQuaGlnaGxpZ2h0Q29kZSkgZnVuY3Rpb24gaXMgZWFzaWVyIHRvXG51c2UuXG4qL1xuZnVuY3Rpb24gaGlnaGxpZ2h0VHJlZSh0cmVlLCBoaWdobGlnaHRlciwgXG4vKipcbkFzc2lnbiBzdHlsaW5nIHRvIGEgcmVnaW9uIG9mIHRoZSB0ZXh0LiBXaWxsIGJlIGNhbGxlZCwgaW4gb3JkZXJcbm9mIHBvc2l0aW9uLCBmb3IgYW55IHJhbmdlcyB3aGVyZSBtb3JlIHRoYW4gemVybyBjbGFzc2VzIGFwcGx5LlxuYGNsYXNzZXNgIGlzIGEgc3BhY2Ugc2VwYXJhdGVkIHN0cmluZyBvZiBDU1MgY2xhc3Nlcy5cbiovXG5wdXRTdHlsZSwgXG4vKipcblRoZSBzdGFydCBvZiB0aGUgcmFuZ2UgdG8gaGlnaGxpZ2h0LlxuKi9cbmZyb20gPSAwLCBcbi8qKlxuVGhlIGVuZCBvZiB0aGUgcmFuZ2UuXG4qL1xudG8gPSB0cmVlLmxlbmd0aCkge1xuICAgIGxldCBidWlsZGVyID0gbmV3IEhpZ2hsaWdodEJ1aWxkZXIoZnJvbSwgQXJyYXkuaXNBcnJheShoaWdobGlnaHRlcikgPyBoaWdobGlnaHRlciA6IFtoaWdobGlnaHRlcl0sIHB1dFN0eWxlKTtcbiAgICBidWlsZGVyLmhpZ2hsaWdodFJhbmdlKHRyZWUuY3Vyc29yKCksIGZyb20sIHRvLCBcIlwiLCBidWlsZGVyLmhpZ2hsaWdodGVycyk7XG4gICAgYnVpbGRlci5mbHVzaCh0byk7XG59XG4vKipcbkhpZ2hsaWdodCB0aGUgZ2l2ZW4gdHJlZSB3aXRoIHRoZSBnaXZlbiBoaWdobGlnaHRlciwgY2FsbGluZ1xuYHB1dFRleHRgIGZvciBldmVyeSBwaWVjZSBvZiB0ZXh0LCBlaXRoZXIgd2l0aCBhIHNldCBvZiBjbGFzc2VzIG9yXG53aXRoIHRoZSBlbXB0eSBzdHJpbmcgd2hlbiB1bnN0eWxlZCwgYW5kIGBwdXRCcmVha2AgZm9yIGV2ZXJ5IGxpbmVcbmJyZWFrLlxuKi9cbmZ1bmN0aW9uIGhpZ2hsaWdodENvZGUoY29kZSwgdHJlZSwgaGlnaGxpZ2h0ZXIsIHB1dFRleHQsIHB1dEJyZWFrLCBmcm9tID0gMCwgdG8gPSBjb2RlLmxlbmd0aCkge1xuICAgIGxldCBwb3MgPSBmcm9tO1xuICAgIGZ1bmN0aW9uIHdyaXRlVG8ocCwgY2xhc3Nlcykge1xuICAgICAgICBpZiAocCA8PSBwb3MpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIGZvciAobGV0IHRleHQgPSBjb2RlLnNsaWNlKHBvcywgcCksIGkgPSAwOzspIHtcbiAgICAgICAgICAgIGxldCBuZXh0QnJlYWsgPSB0ZXh0LmluZGV4T2YoXCJcXG5cIiwgaSk7XG4gICAgICAgICAgICBsZXQgdXB0byA9IG5leHRCcmVhayA8IDAgPyB0ZXh0Lmxlbmd0aCA6IG5leHRCcmVhaztcbiAgICAgICAgICAgIGlmICh1cHRvID4gaSlcbiAgICAgICAgICAgICAgICBwdXRUZXh0KHRleHQuc2xpY2UoaSwgdXB0byksIGNsYXNzZXMpO1xuICAgICAgICAgICAgaWYgKG5leHRCcmVhayA8IDApXG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBwdXRCcmVhaygpO1xuICAgICAgICAgICAgaSA9IG5leHRCcmVhayArIDE7XG4gICAgICAgIH1cbiAgICAgICAgcG9zID0gcDtcbiAgICB9XG4gICAgaGlnaGxpZ2h0VHJlZSh0cmVlLCBoaWdobGlnaHRlciwgKGZyb20sIHRvLCBjbGFzc2VzKSA9PiB7XG4gICAgICAgIHdyaXRlVG8oZnJvbSwgXCJcIik7XG4gICAgICAgIHdyaXRlVG8odG8sIGNsYXNzZXMpO1xuICAgIH0sIGZyb20sIHRvKTtcbiAgICB3cml0ZVRvKHRvLCBcIlwiKTtcbn1cbmNsYXNzIEhpZ2hsaWdodEJ1aWxkZXIge1xuICAgIGNvbnN0cnVjdG9yKGF0LCBoaWdobGlnaHRlcnMsIHNwYW4pIHtcbiAgICAgICAgdGhpcy5hdCA9IGF0O1xuICAgICAgICB0aGlzLmhpZ2hsaWdodGVycyA9IGhpZ2hsaWdodGVycztcbiAgICAgICAgdGhpcy5zcGFuID0gc3BhbjtcbiAgICAgICAgdGhpcy5jbGFzcyA9IFwiXCI7XG4gICAgfVxuICAgIHN0YXJ0U3BhbihhdCwgY2xzKSB7XG4gICAgICAgIGlmIChjbHMgIT0gdGhpcy5jbGFzcykge1xuICAgICAgICAgICAgdGhpcy5mbHVzaChhdCk7XG4gICAgICAgICAgICBpZiAoYXQgPiB0aGlzLmF0KVxuICAgICAgICAgICAgICAgIHRoaXMuYXQgPSBhdDtcbiAgICAgICAgICAgIHRoaXMuY2xhc3MgPSBjbHM7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZmx1c2godG8pIHtcbiAgICAgICAgaWYgKHRvID4gdGhpcy5hdCAmJiB0aGlzLmNsYXNzKVxuICAgICAgICAgICAgdGhpcy5zcGFuKHRoaXMuYXQsIHRvLCB0aGlzLmNsYXNzKTtcbiAgICB9XG4gICAgaGlnaGxpZ2h0UmFuZ2UoY3Vyc29yLCBmcm9tLCB0bywgaW5oZXJpdGVkQ2xhc3MsIGhpZ2hsaWdodGVycykge1xuICAgICAgICBsZXQgeyB0eXBlLCBmcm9tOiBzdGFydCwgdG86IGVuZCB9ID0gY3Vyc29yO1xuICAgICAgICBpZiAoc3RhcnQgPj0gdG8gfHwgZW5kIDw9IGZyb20pXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIGlmICh0eXBlLmlzVG9wKVxuICAgICAgICAgICAgaGlnaGxpZ2h0ZXJzID0gdGhpcy5oaWdobGlnaHRlcnMuZmlsdGVyKGggPT4gIWguc2NvcGUgfHwgaC5zY29wZSh0eXBlKSk7XG4gICAgICAgIGxldCBjbHMgPSBpbmhlcml0ZWRDbGFzcztcbiAgICAgICAgbGV0IHJ1bGUgPSBnZXRTdHlsZVRhZ3MoY3Vyc29yKSB8fCBSdWxlLmVtcHR5O1xuICAgICAgICBsZXQgdGFnQ2xzID0gaGlnaGxpZ2h0VGFncyhoaWdobGlnaHRlcnMsIHJ1bGUudGFncyk7XG4gICAgICAgIGlmICh0YWdDbHMpIHtcbiAgICAgICAgICAgIGlmIChjbHMpXG4gICAgICAgICAgICAgICAgY2xzICs9IFwiIFwiO1xuICAgICAgICAgICAgY2xzICs9IHRhZ0NscztcbiAgICAgICAgICAgIGlmIChydWxlLm1vZGUgPT0gMSAvKiBNb2RlLkluaGVyaXQgKi8pXG4gICAgICAgICAgICAgICAgaW5oZXJpdGVkQ2xhc3MgKz0gKGluaGVyaXRlZENsYXNzID8gXCIgXCIgOiBcIlwiKSArIHRhZ0NscztcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnN0YXJ0U3BhbihNYXRoLm1heChmcm9tLCBzdGFydCksIGNscyk7XG4gICAgICAgIGlmIChydWxlLm9wYXF1ZSlcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgbGV0IG1vdW50ZWQgPSBjdXJzb3IudHJlZSAmJiBjdXJzb3IudHJlZS5wcm9wKE5vZGVQcm9wLm1vdW50ZWQpO1xuICAgICAgICBpZiAobW91bnRlZCAmJiBtb3VudGVkLm92ZXJsYXkpIHtcbiAgICAgICAgICAgIGxldCBpbm5lciA9IGN1cnNvci5ub2RlLmVudGVyKG1vdW50ZWQub3ZlcmxheVswXS5mcm9tICsgc3RhcnQsIDEpO1xuICAgICAgICAgICAgbGV0IGlubmVySGlnaGxpZ2h0ZXJzID0gdGhpcy5oaWdobGlnaHRlcnMuZmlsdGVyKGggPT4gIWguc2NvcGUgfHwgaC5zY29wZShtb3VudGVkLnRyZWUudHlwZSkpO1xuICAgICAgICAgICAgbGV0IGhhc0NoaWxkID0gY3Vyc29yLmZpcnN0Q2hpbGQoKTtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwLCBwb3MgPSBzdGFydDs7IGkrKykge1xuICAgICAgICAgICAgICAgIGxldCBuZXh0ID0gaSA8IG1vdW50ZWQub3ZlcmxheS5sZW5ndGggPyBtb3VudGVkLm92ZXJsYXlbaV0gOiBudWxsO1xuICAgICAgICAgICAgICAgIGxldCBuZXh0UG9zID0gbmV4dCA/IG5leHQuZnJvbSArIHN0YXJ0IDogZW5kO1xuICAgICAgICAgICAgICAgIGxldCByYW5nZUZyb20gPSBNYXRoLm1heChmcm9tLCBwb3MpLCByYW5nZVRvID0gTWF0aC5taW4odG8sIG5leHRQb3MpO1xuICAgICAgICAgICAgICAgIGlmIChyYW5nZUZyb20gPCByYW5nZVRvICYmIGhhc0NoaWxkKSB7XG4gICAgICAgICAgICAgICAgICAgIHdoaWxlIChjdXJzb3IuZnJvbSA8IHJhbmdlVG8pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaGlnaGxpZ2h0UmFuZ2UoY3Vyc29yLCByYW5nZUZyb20sIHJhbmdlVG8sIGluaGVyaXRlZENsYXNzLCBoaWdobGlnaHRlcnMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGFydFNwYW4oTWF0aC5taW4ocmFuZ2VUbywgY3Vyc29yLnRvKSwgY2xzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjdXJzb3IudG8gPj0gbmV4dFBvcyB8fCAhY3Vyc29yLm5leHRTaWJsaW5nKCkpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKCFuZXh0IHx8IG5leHRQb3MgPiB0bylcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgcG9zID0gbmV4dC50byArIHN0YXJ0O1xuICAgICAgICAgICAgICAgIGlmIChwb3MgPiBmcm9tKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaGlnaGxpZ2h0UmFuZ2UoaW5uZXIuY3Vyc29yKCksIE1hdGgubWF4KGZyb20sIG5leHQuZnJvbSArIHN0YXJ0KSwgTWF0aC5taW4odG8sIHBvcyksIFwiXCIsIGlubmVySGlnaGxpZ2h0ZXJzKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGFydFNwYW4oTWF0aC5taW4odG8sIHBvcyksIGNscyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGhhc0NoaWxkKVxuICAgICAgICAgICAgICAgIGN1cnNvci5wYXJlbnQoKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChjdXJzb3IuZmlyc3RDaGlsZCgpKSB7XG4gICAgICAgICAgICBpZiAobW91bnRlZClcbiAgICAgICAgICAgICAgICBpbmhlcml0ZWRDbGFzcyA9IFwiXCI7XG4gICAgICAgICAgICBkbyB7XG4gICAgICAgICAgICAgICAgaWYgKGN1cnNvci50byA8PSBmcm9tKVxuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICBpZiAoY3Vyc29yLmZyb20gPj0gdG8pXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIHRoaXMuaGlnaGxpZ2h0UmFuZ2UoY3Vyc29yLCBmcm9tLCB0bywgaW5oZXJpdGVkQ2xhc3MsIGhpZ2hsaWdodGVycyk7XG4gICAgICAgICAgICAgICAgdGhpcy5zdGFydFNwYW4oTWF0aC5taW4odG8sIGN1cnNvci50byksIGNscyk7XG4gICAgICAgICAgICB9IHdoaWxlIChjdXJzb3IubmV4dFNpYmxpbmcoKSk7XG4gICAgICAgICAgICBjdXJzb3IucGFyZW50KCk7XG4gICAgICAgIH1cbiAgICB9XG59XG4vKipcbk1hdGNoIGEgc3ludGF4IG5vZGUncyBbaGlnaGxpZ2h0IHJ1bGVzXSgjaGlnaGxpZ2h0LnN0eWxlVGFncykuIElmXG50aGVyZSdzIGEgbWF0Y2gsIHJldHVybiBpdHMgc2V0IG9mIHRhZ3MsIGFuZCB3aGV0aGVyIGl0IGlzXG5vcGFxdWUgKHVzZXMgYSBgIWApIG9yIGFwcGxpZXMgdG8gYWxsIGNoaWxkIG5vZGVzIChgLy4uLmApLlxuKi9cbmZ1bmN0aW9uIGdldFN0eWxlVGFncyhub2RlKSB7XG4gICAgbGV0IHJ1bGUgPSBub2RlLnR5cGUucHJvcChydWxlTm9kZVByb3ApO1xuICAgIHdoaWxlIChydWxlICYmIHJ1bGUuY29udGV4dCAmJiAhbm9kZS5tYXRjaENvbnRleHQocnVsZS5jb250ZXh0KSlcbiAgICAgICAgcnVsZSA9IHJ1bGUubmV4dDtcbiAgICByZXR1cm4gcnVsZSB8fCBudWxsO1xufVxuY29uc3QgdCA9IFRhZy5kZWZpbmU7XG5jb25zdCBjb21tZW50ID0gdCgpLCBuYW1lID0gdCgpLCB0eXBlTmFtZSA9IHQobmFtZSksIHByb3BlcnR5TmFtZSA9IHQobmFtZSksIGxpdGVyYWwgPSB0KCksIHN0cmluZyA9IHQobGl0ZXJhbCksIG51bWJlciA9IHQobGl0ZXJhbCksIGNvbnRlbnQgPSB0KCksIGhlYWRpbmcgPSB0KGNvbnRlbnQpLCBrZXl3b3JkID0gdCgpLCBvcGVyYXRvciA9IHQoKSwgcHVuY3R1YXRpb24gPSB0KCksIGJyYWNrZXQgPSB0KHB1bmN0dWF0aW9uKSwgbWV0YSA9IHQoKTtcbi8qKlxuVGhlIGRlZmF1bHQgc2V0IG9mIGhpZ2hsaWdodGluZyBbdGFnc10oI2hpZ2hsaWdodC5UYWcpLlxuXG5UaGlzIGNvbGxlY3Rpb24gaXMgaGVhdmlseSBiaWFzZWQgdG93YXJkcyBwcm9ncmFtbWluZyBsYW5ndWFnZXMsXG5hbmQgbmVjZXNzYXJpbHkgaW5jb21wbGV0ZS4gQSBmdWxsIG9udG9sb2d5IG9mIHN5bnRhY3RpY1xuY29uc3RydWN0cyB3b3VsZCBmaWxsIGEgc3RhY2sgb2YgYm9va3MsIGFuZCBiZSBpbXByYWN0aWNhbCB0b1xud3JpdGUgdGhlbWVzIGZvci4gU28gdHJ5IHRvIG1ha2UgZG8gd2l0aCB0aGlzIHNldC4gSWYgYWxsIGVsc2VcbmZhaWxzLCBbb3BlbiBhblxuaXNzdWVdKGh0dHBzOi8vZ2l0aHViLmNvbS9jb2RlbWlycm9yL2NvZGVtaXJyb3IubmV4dCkgdG8gcHJvcG9zZSBhXG5uZXcgdGFnLCBvciBbZGVmaW5lXSgjaGlnaGxpZ2h0LlRhZ15kZWZpbmUpIGEgbG9jYWwgY3VzdG9tIHRhZyBmb3JcbnlvdXIgdXNlIGNhc2UuXG5cbk5vdGUgdGhhdCBpdCBpcyBub3Qgb2JsaWdhdG9yeSB0byBhbHdheXMgYXR0YWNoIHRoZSBtb3N0IHNwZWNpZmljXG50YWcgcG9zc2libGUgdG8gYW4gZWxlbWVudOKAlGlmIHlvdXIgZ3JhbW1hciBjYW4ndCBlYXNpbHlcbmRpc3Rpbmd1aXNoIGEgY2VydGFpbiB0eXBlIG9mIGVsZW1lbnQgKHN1Y2ggYXMgYSBsb2NhbCB2YXJpYWJsZSksXG5pdCBpcyBva2F5IHRvIHN0eWxlIGl0IGFzIGl0cyBtb3JlIGdlbmVyYWwgdmFyaWFudCAoYSB2YXJpYWJsZSkuXG5cbkZvciB0YWdzIHRoYXQgZXh0ZW5kIHNvbWUgcGFyZW50IHRhZywgdGhlIGRvY3VtZW50YXRpb24gbGlua3MgdG9cbnRoZSBwYXJlbnQuXG4qL1xuY29uc3QgdGFncyA9IHtcbiAgICAvKipcbiAgICBBIGNvbW1lbnQuXG4gICAgKi9cbiAgICBjb21tZW50LFxuICAgIC8qKlxuICAgIEEgbGluZSBbY29tbWVudF0oI2hpZ2hsaWdodC50YWdzLmNvbW1lbnQpLlxuICAgICovXG4gICAgbGluZUNvbW1lbnQ6IHQoY29tbWVudCksXG4gICAgLyoqXG4gICAgQSBibG9jayBbY29tbWVudF0oI2hpZ2hsaWdodC50YWdzLmNvbW1lbnQpLlxuICAgICovXG4gICAgYmxvY2tDb21tZW50OiB0KGNvbW1lbnQpLFxuICAgIC8qKlxuICAgIEEgZG9jdW1lbnRhdGlvbiBbY29tbWVudF0oI2hpZ2hsaWdodC50YWdzLmNvbW1lbnQpLlxuICAgICovXG4gICAgZG9jQ29tbWVudDogdChjb21tZW50KSxcbiAgICAvKipcbiAgICBBbnkga2luZCBvZiBpZGVudGlmaWVyLlxuICAgICovXG4gICAgbmFtZSxcbiAgICAvKipcbiAgICBUaGUgW25hbWVdKCNoaWdobGlnaHQudGFncy5uYW1lKSBvZiBhIHZhcmlhYmxlLlxuICAgICovXG4gICAgdmFyaWFibGVOYW1lOiB0KG5hbWUpLFxuICAgIC8qKlxuICAgIEEgdHlwZSBbbmFtZV0oI2hpZ2hsaWdodC50YWdzLm5hbWUpLlxuICAgICovXG4gICAgdHlwZU5hbWU6IHR5cGVOYW1lLFxuICAgIC8qKlxuICAgIEEgdGFnIG5hbWUgKHN1YnRhZyBvZiBbYHR5cGVOYW1lYF0oI2hpZ2hsaWdodC50YWdzLnR5cGVOYW1lKSkuXG4gICAgKi9cbiAgICB0YWdOYW1lOiB0KHR5cGVOYW1lKSxcbiAgICAvKipcbiAgICBBIHByb3BlcnR5IG9yIGZpZWxkIFtuYW1lXSgjaGlnaGxpZ2h0LnRhZ3MubmFtZSkuXG4gICAgKi9cbiAgICBwcm9wZXJ0eU5hbWU6IHByb3BlcnR5TmFtZSxcbiAgICAvKipcbiAgICBBbiBhdHRyaWJ1dGUgbmFtZSAoc3VidGFnIG9mIFtgcHJvcGVydHlOYW1lYF0oI2hpZ2hsaWdodC50YWdzLnByb3BlcnR5TmFtZSkpLlxuICAgICovXG4gICAgYXR0cmlidXRlTmFtZTogdChwcm9wZXJ0eU5hbWUpLFxuICAgIC8qKlxuICAgIFRoZSBbbmFtZV0oI2hpZ2hsaWdodC50YWdzLm5hbWUpIG9mIGEgY2xhc3MuXG4gICAgKi9cbiAgICBjbGFzc05hbWU6IHQobmFtZSksXG4gICAgLyoqXG4gICAgQSBsYWJlbCBbbmFtZV0oI2hpZ2hsaWdodC50YWdzLm5hbWUpLlxuICAgICovXG4gICAgbGFiZWxOYW1lOiB0KG5hbWUpLFxuICAgIC8qKlxuICAgIEEgbmFtZXNwYWNlIFtuYW1lXSgjaGlnaGxpZ2h0LnRhZ3MubmFtZSkuXG4gICAgKi9cbiAgICBuYW1lc3BhY2U6IHQobmFtZSksXG4gICAgLyoqXG4gICAgVGhlIFtuYW1lXSgjaGlnaGxpZ2h0LnRhZ3MubmFtZSkgb2YgYSBtYWNyby5cbiAgICAqL1xuICAgIG1hY3JvTmFtZTogdChuYW1lKSxcbiAgICAvKipcbiAgICBBIGxpdGVyYWwgdmFsdWUuXG4gICAgKi9cbiAgICBsaXRlcmFsLFxuICAgIC8qKlxuICAgIEEgc3RyaW5nIFtsaXRlcmFsXSgjaGlnaGxpZ2h0LnRhZ3MubGl0ZXJhbCkuXG4gICAgKi9cbiAgICBzdHJpbmcsXG4gICAgLyoqXG4gICAgQSBkb2N1bWVudGF0aW9uIFtzdHJpbmddKCNoaWdobGlnaHQudGFncy5zdHJpbmcpLlxuICAgICovXG4gICAgZG9jU3RyaW5nOiB0KHN0cmluZyksXG4gICAgLyoqXG4gICAgQSBjaGFyYWN0ZXIgbGl0ZXJhbCAoc3VidGFnIG9mIFtzdHJpbmddKCNoaWdobGlnaHQudGFncy5zdHJpbmcpKS5cbiAgICAqL1xuICAgIGNoYXJhY3RlcjogdChzdHJpbmcpLFxuICAgIC8qKlxuICAgIEFuIGF0dHJpYnV0ZSB2YWx1ZSAoc3VidGFnIG9mIFtzdHJpbmddKCNoaWdobGlnaHQudGFncy5zdHJpbmcpKS5cbiAgICAqL1xuICAgIGF0dHJpYnV0ZVZhbHVlOiB0KHN0cmluZyksXG4gICAgLyoqXG4gICAgQSBudW1iZXIgW2xpdGVyYWxdKCNoaWdobGlnaHQudGFncy5saXRlcmFsKS5cbiAgICAqL1xuICAgIG51bWJlcixcbiAgICAvKipcbiAgICBBbiBpbnRlZ2VyIFtudW1iZXJdKCNoaWdobGlnaHQudGFncy5udW1iZXIpIGxpdGVyYWwuXG4gICAgKi9cbiAgICBpbnRlZ2VyOiB0KG51bWJlciksXG4gICAgLyoqXG4gICAgQSBmbG9hdGluZy1wb2ludCBbbnVtYmVyXSgjaGlnaGxpZ2h0LnRhZ3MubnVtYmVyKSBsaXRlcmFsLlxuICAgICovXG4gICAgZmxvYXQ6IHQobnVtYmVyKSxcbiAgICAvKipcbiAgICBBIGJvb2xlYW4gW2xpdGVyYWxdKCNoaWdobGlnaHQudGFncy5saXRlcmFsKS5cbiAgICAqL1xuICAgIGJvb2w6IHQobGl0ZXJhbCksXG4gICAgLyoqXG4gICAgUmVndWxhciBleHByZXNzaW9uIFtsaXRlcmFsXSgjaGlnaGxpZ2h0LnRhZ3MubGl0ZXJhbCkuXG4gICAgKi9cbiAgICByZWdleHA6IHQobGl0ZXJhbCksXG4gICAgLyoqXG4gICAgQW4gZXNjYXBlIFtsaXRlcmFsXSgjaGlnaGxpZ2h0LnRhZ3MubGl0ZXJhbCksIGZvciBleGFtcGxlIGFcbiAgICBiYWNrc2xhc2ggZXNjYXBlIGluIGEgc3RyaW5nLlxuICAgICovXG4gICAgZXNjYXBlOiB0KGxpdGVyYWwpLFxuICAgIC8qKlxuICAgIEEgY29sb3IgW2xpdGVyYWxdKCNoaWdobGlnaHQudGFncy5saXRlcmFsKS5cbiAgICAqL1xuICAgIGNvbG9yOiB0KGxpdGVyYWwpLFxuICAgIC8qKlxuICAgIEEgVVJMIFtsaXRlcmFsXSgjaGlnaGxpZ2h0LnRhZ3MubGl0ZXJhbCkuXG4gICAgKi9cbiAgICB1cmw6IHQobGl0ZXJhbCksXG4gICAgLyoqXG4gICAgQSBsYW5ndWFnZSBrZXl3b3JkLlxuICAgICovXG4gICAga2V5d29yZCxcbiAgICAvKipcbiAgICBUaGUgW2tleXdvcmRdKCNoaWdobGlnaHQudGFncy5rZXl3b3JkKSBmb3IgdGhlIHNlbGYgb3IgdGhpc1xuICAgIG9iamVjdC5cbiAgICAqL1xuICAgIHNlbGY6IHQoa2V5d29yZCksXG4gICAgLyoqXG4gICAgVGhlIFtrZXl3b3JkXSgjaGlnaGxpZ2h0LnRhZ3Mua2V5d29yZCkgZm9yIG51bGwuXG4gICAgKi9cbiAgICBudWxsOiB0KGtleXdvcmQpLFxuICAgIC8qKlxuICAgIEEgW2tleXdvcmRdKCNoaWdobGlnaHQudGFncy5rZXl3b3JkKSBkZW5vdGluZyBzb21lIGF0b21pYyB2YWx1ZS5cbiAgICAqL1xuICAgIGF0b206IHQoa2V5d29yZCksXG4gICAgLyoqXG4gICAgQSBba2V5d29yZF0oI2hpZ2hsaWdodC50YWdzLmtleXdvcmQpIHRoYXQgcmVwcmVzZW50cyBhIHVuaXQuXG4gICAgKi9cbiAgICB1bml0OiB0KGtleXdvcmQpLFxuICAgIC8qKlxuICAgIEEgbW9kaWZpZXIgW2tleXdvcmRdKCNoaWdobGlnaHQudGFncy5rZXl3b3JkKS5cbiAgICAqL1xuICAgIG1vZGlmaWVyOiB0KGtleXdvcmQpLFxuICAgIC8qKlxuICAgIEEgW2tleXdvcmRdKCNoaWdobGlnaHQudGFncy5rZXl3b3JkKSB0aGF0IGFjdHMgYXMgYW4gb3BlcmF0b3IuXG4gICAgKi9cbiAgICBvcGVyYXRvcktleXdvcmQ6IHQoa2V5d29yZCksXG4gICAgLyoqXG4gICAgQSBjb250cm9sLWZsb3cgcmVsYXRlZCBba2V5d29yZF0oI2hpZ2hsaWdodC50YWdzLmtleXdvcmQpLlxuICAgICovXG4gICAgY29udHJvbEtleXdvcmQ6IHQoa2V5d29yZCksXG4gICAgLyoqXG4gICAgQSBba2V5d29yZF0oI2hpZ2hsaWdodC50YWdzLmtleXdvcmQpIHRoYXQgZGVmaW5lcyBzb21ldGhpbmcuXG4gICAgKi9cbiAgICBkZWZpbml0aW9uS2V5d29yZDogdChrZXl3b3JkKSxcbiAgICAvKipcbiAgICBBIFtrZXl3b3JkXSgjaGlnaGxpZ2h0LnRhZ3Mua2V5d29yZCkgcmVsYXRlZCB0byBkZWZpbmluZyBvclxuICAgIGludGVyZmFjaW5nIHdpdGggbW9kdWxlcy5cbiAgICAqL1xuICAgIG1vZHVsZUtleXdvcmQ6IHQoa2V5d29yZCksXG4gICAgLyoqXG4gICAgQW4gb3BlcmF0b3IuXG4gICAgKi9cbiAgICBvcGVyYXRvcixcbiAgICAvKipcbiAgICBBbiBbb3BlcmF0b3JdKCNoaWdobGlnaHQudGFncy5vcGVyYXRvcikgdGhhdCBkZXJlZmVyZW5jZXMgc29tZXRoaW5nLlxuICAgICovXG4gICAgZGVyZWZPcGVyYXRvcjogdChvcGVyYXRvciksXG4gICAgLyoqXG4gICAgQXJpdGhtZXRpYy1yZWxhdGVkIFtvcGVyYXRvcl0oI2hpZ2hsaWdodC50YWdzLm9wZXJhdG9yKS5cbiAgICAqL1xuICAgIGFyaXRobWV0aWNPcGVyYXRvcjogdChvcGVyYXRvciksXG4gICAgLyoqXG4gICAgTG9naWNhbCBbb3BlcmF0b3JdKCNoaWdobGlnaHQudGFncy5vcGVyYXRvcikuXG4gICAgKi9cbiAgICBsb2dpY09wZXJhdG9yOiB0KG9wZXJhdG9yKSxcbiAgICAvKipcbiAgICBCaXQgW29wZXJhdG9yXSgjaGlnaGxpZ2h0LnRhZ3Mub3BlcmF0b3IpLlxuICAgICovXG4gICAgYml0d2lzZU9wZXJhdG9yOiB0KG9wZXJhdG9yKSxcbiAgICAvKipcbiAgICBDb21wYXJpc29uIFtvcGVyYXRvcl0oI2hpZ2hsaWdodC50YWdzLm9wZXJhdG9yKS5cbiAgICAqL1xuICAgIGNvbXBhcmVPcGVyYXRvcjogdChvcGVyYXRvciksXG4gICAgLyoqXG4gICAgW09wZXJhdG9yXSgjaGlnaGxpZ2h0LnRhZ3Mub3BlcmF0b3IpIHRoYXQgdXBkYXRlcyBpdHMgb3BlcmFuZC5cbiAgICAqL1xuICAgIHVwZGF0ZU9wZXJhdG9yOiB0KG9wZXJhdG9yKSxcbiAgICAvKipcbiAgICBbT3BlcmF0b3JdKCNoaWdobGlnaHQudGFncy5vcGVyYXRvcikgdGhhdCBkZWZpbmVzIHNvbWV0aGluZy5cbiAgICAqL1xuICAgIGRlZmluaXRpb25PcGVyYXRvcjogdChvcGVyYXRvciksXG4gICAgLyoqXG4gICAgVHlwZS1yZWxhdGVkIFtvcGVyYXRvcl0oI2hpZ2hsaWdodC50YWdzLm9wZXJhdG9yKS5cbiAgICAqL1xuICAgIHR5cGVPcGVyYXRvcjogdChvcGVyYXRvciksXG4gICAgLyoqXG4gICAgQ29udHJvbC1mbG93IFtvcGVyYXRvcl0oI2hpZ2hsaWdodC50YWdzLm9wZXJhdG9yKS5cbiAgICAqL1xuICAgIGNvbnRyb2xPcGVyYXRvcjogdChvcGVyYXRvciksXG4gICAgLyoqXG4gICAgUHJvZ3JhbSBvciBtYXJrdXAgcHVuY3R1YXRpb24uXG4gICAgKi9cbiAgICBwdW5jdHVhdGlvbixcbiAgICAvKipcbiAgICBbUHVuY3R1YXRpb25dKCNoaWdobGlnaHQudGFncy5wdW5jdHVhdGlvbikgdGhhdCBzZXBhcmF0ZXNcbiAgICB0aGluZ3MuXG4gICAgKi9cbiAgICBzZXBhcmF0b3I6IHQocHVuY3R1YXRpb24pLFxuICAgIC8qKlxuICAgIEJyYWNrZXQtc3R5bGUgW3B1bmN0dWF0aW9uXSgjaGlnaGxpZ2h0LnRhZ3MucHVuY3R1YXRpb24pLlxuICAgICovXG4gICAgYnJhY2tldCxcbiAgICAvKipcbiAgICBBbmdsZSBbYnJhY2tldHNdKCNoaWdobGlnaHQudGFncy5icmFja2V0KSAodXN1YWxseSBgPGAgYW5kIGA+YFxuICAgIHRva2VucykuXG4gICAgKi9cbiAgICBhbmdsZUJyYWNrZXQ6IHQoYnJhY2tldCksXG4gICAgLyoqXG4gICAgU3F1YXJlIFticmFja2V0c10oI2hpZ2hsaWdodC50YWdzLmJyYWNrZXQpICh1c3VhbGx5IGBbYCBhbmQgYF1gXG4gICAgdG9rZW5zKS5cbiAgICAqL1xuICAgIHNxdWFyZUJyYWNrZXQ6IHQoYnJhY2tldCksXG4gICAgLyoqXG4gICAgUGFyZW50aGVzZXMgKHVzdWFsbHkgYChgIGFuZCBgKWAgdG9rZW5zKS4gU3VidGFnIG9mXG4gICAgW2JyYWNrZXRdKCNoaWdobGlnaHQudGFncy5icmFja2V0KS5cbiAgICAqL1xuICAgIHBhcmVuOiB0KGJyYWNrZXQpLFxuICAgIC8qKlxuICAgIEJyYWNlcyAodXN1YWxseSBge2AgYW5kIGB9YCB0b2tlbnMpLiBTdWJ0YWcgb2ZcbiAgICBbYnJhY2tldF0oI2hpZ2hsaWdodC50YWdzLmJyYWNrZXQpLlxuICAgICovXG4gICAgYnJhY2U6IHQoYnJhY2tldCksXG4gICAgLyoqXG4gICAgQ29udGVudCwgZm9yIGV4YW1wbGUgcGxhaW4gdGV4dCBpbiBYTUwgb3IgbWFya3VwIGRvY3VtZW50cy5cbiAgICAqL1xuICAgIGNvbnRlbnQsXG4gICAgLyoqXG4gICAgW0NvbnRlbnRdKCNoaWdobGlnaHQudGFncy5jb250ZW50KSB0aGF0IHJlcHJlc2VudHMgYSBoZWFkaW5nLlxuICAgICovXG4gICAgaGVhZGluZyxcbiAgICAvKipcbiAgICBBIGxldmVsIDEgW2hlYWRpbmddKCNoaWdobGlnaHQudGFncy5oZWFkaW5nKS5cbiAgICAqL1xuICAgIGhlYWRpbmcxOiB0KGhlYWRpbmcpLFxuICAgIC8qKlxuICAgIEEgbGV2ZWwgMiBbaGVhZGluZ10oI2hpZ2hsaWdodC50YWdzLmhlYWRpbmcpLlxuICAgICovXG4gICAgaGVhZGluZzI6IHQoaGVhZGluZyksXG4gICAgLyoqXG4gICAgQSBsZXZlbCAzIFtoZWFkaW5nXSgjaGlnaGxpZ2h0LnRhZ3MuaGVhZGluZykuXG4gICAgKi9cbiAgICBoZWFkaW5nMzogdChoZWFkaW5nKSxcbiAgICAvKipcbiAgICBBIGxldmVsIDQgW2hlYWRpbmddKCNoaWdobGlnaHQudGFncy5oZWFkaW5nKS5cbiAgICAqL1xuICAgIGhlYWRpbmc0OiB0KGhlYWRpbmcpLFxuICAgIC8qKlxuICAgIEEgbGV2ZWwgNSBbaGVhZGluZ10oI2hpZ2hsaWdodC50YWdzLmhlYWRpbmcpLlxuICAgICovXG4gICAgaGVhZGluZzU6IHQoaGVhZGluZyksXG4gICAgLyoqXG4gICAgQSBsZXZlbCA2IFtoZWFkaW5nXSgjaGlnaGxpZ2h0LnRhZ3MuaGVhZGluZykuXG4gICAgKi9cbiAgICBoZWFkaW5nNjogdChoZWFkaW5nKSxcbiAgICAvKipcbiAgICBBIHByb3NlIFtjb250ZW50XSgjaGlnaGxpZ2h0LnRhZ3MuY29udGVudCkgc2VwYXJhdG9yIChzdWNoIGFzIGEgaG9yaXpvbnRhbCBydWxlKS5cbiAgICAqL1xuICAgIGNvbnRlbnRTZXBhcmF0b3I6IHQoY29udGVudCksXG4gICAgLyoqXG4gICAgW0NvbnRlbnRdKCNoaWdobGlnaHQudGFncy5jb250ZW50KSB0aGF0IHJlcHJlc2VudHMgYSBsaXN0LlxuICAgICovXG4gICAgbGlzdDogdChjb250ZW50KSxcbiAgICAvKipcbiAgICBbQ29udGVudF0oI2hpZ2hsaWdodC50YWdzLmNvbnRlbnQpIHRoYXQgcmVwcmVzZW50cyBhIHF1b3RlLlxuICAgICovXG4gICAgcXVvdGU6IHQoY29udGVudCksXG4gICAgLyoqXG4gICAgW0NvbnRlbnRdKCNoaWdobGlnaHQudGFncy5jb250ZW50KSB0aGF0IGlzIGVtcGhhc2l6ZWQuXG4gICAgKi9cbiAgICBlbXBoYXNpczogdChjb250ZW50KSxcbiAgICAvKipcbiAgICBbQ29udGVudF0oI2hpZ2hsaWdodC50YWdzLmNvbnRlbnQpIHRoYXQgaXMgc3R5bGVkIHN0cm9uZy5cbiAgICAqL1xuICAgIHN0cm9uZzogdChjb250ZW50KSxcbiAgICAvKipcbiAgICBbQ29udGVudF0oI2hpZ2hsaWdodC50YWdzLmNvbnRlbnQpIHRoYXQgaXMgcGFydCBvZiBhIGxpbmsuXG4gICAgKi9cbiAgICBsaW5rOiB0KGNvbnRlbnQpLFxuICAgIC8qKlxuICAgIFtDb250ZW50XSgjaGlnaGxpZ2h0LnRhZ3MuY29udGVudCkgdGhhdCBpcyBzdHlsZWQgYXMgY29kZSBvclxuICAgIG1vbm9zcGFjZS5cbiAgICAqL1xuICAgIG1vbm9zcGFjZTogdChjb250ZW50KSxcbiAgICAvKipcbiAgICBbQ29udGVudF0oI2hpZ2hsaWdodC50YWdzLmNvbnRlbnQpIHRoYXQgaGFzIGEgc3RyaWtlLXRocm91Z2hcbiAgICBzdHlsZS5cbiAgICAqL1xuICAgIHN0cmlrZXRocm91Z2g6IHQoY29udGVudCksXG4gICAgLyoqXG4gICAgSW5zZXJ0ZWQgdGV4dCBpbiBhIGNoYW5nZS10cmFja2luZyBmb3JtYXQuXG4gICAgKi9cbiAgICBpbnNlcnRlZDogdCgpLFxuICAgIC8qKlxuICAgIERlbGV0ZWQgdGV4dC5cbiAgICAqL1xuICAgIGRlbGV0ZWQ6IHQoKSxcbiAgICAvKipcbiAgICBDaGFuZ2VkIHRleHQuXG4gICAgKi9cbiAgICBjaGFuZ2VkOiB0KCksXG4gICAgLyoqXG4gICAgQW4gaW52YWxpZCBvciB1bnN5bnRhY3RpYyBlbGVtZW50LlxuICAgICovXG4gICAgaW52YWxpZDogdCgpLFxuICAgIC8qKlxuICAgIE1ldGFkYXRhIG9yIG1ldGEtaW5zdHJ1Y3Rpb24uXG4gICAgKi9cbiAgICBtZXRhLFxuICAgIC8qKlxuICAgIFtNZXRhZGF0YV0oI2hpZ2hsaWdodC50YWdzLm1ldGEpIHRoYXQgYXBwbGllcyB0byB0aGUgZW50aXJlXG4gICAgZG9jdW1lbnQuXG4gICAgKi9cbiAgICBkb2N1bWVudE1ldGE6IHQobWV0YSksXG4gICAgLyoqXG4gICAgW01ldGFkYXRhXSgjaGlnaGxpZ2h0LnRhZ3MubWV0YSkgdGhhdCBhbm5vdGF0ZXMgb3IgYWRkc1xuICAgIGF0dHJpYnV0ZXMgdG8gYSBnaXZlbiBzeW50YWN0aWMgZWxlbWVudC5cbiAgICAqL1xuICAgIGFubm90YXRpb246IHQobWV0YSksXG4gICAgLyoqXG4gICAgUHJvY2Vzc2luZyBpbnN0cnVjdGlvbiBvciBwcmVwcm9jZXNzb3IgZGlyZWN0aXZlLiBTdWJ0YWcgb2ZcbiAgICBbbWV0YV0oI2hpZ2hsaWdodC50YWdzLm1ldGEpLlxuICAgICovXG4gICAgcHJvY2Vzc2luZ0luc3RydWN0aW9uOiB0KG1ldGEpLFxuICAgIC8qKlxuICAgIFtNb2RpZmllcl0oI2hpZ2hsaWdodC5UYWdeZGVmaW5lTW9kaWZpZXIpIHRoYXQgaW5kaWNhdGVzIHRoYXQgYVxuICAgIGdpdmVuIGVsZW1lbnQgaXMgYmVpbmcgZGVmaW5lZC4gRXhwZWN0ZWQgdG8gYmUgdXNlZCB3aXRoIHRoZVxuICAgIHZhcmlvdXMgW25hbWVdKCNoaWdobGlnaHQudGFncy5uYW1lKSB0YWdzLlxuICAgICovXG4gICAgZGVmaW5pdGlvbjogVGFnLmRlZmluZU1vZGlmaWVyKFwiZGVmaW5pdGlvblwiKSxcbiAgICAvKipcbiAgICBbTW9kaWZpZXJdKCNoaWdobGlnaHQuVGFnXmRlZmluZU1vZGlmaWVyKSB0aGF0IGluZGljYXRlcyB0aGF0XG4gICAgc29tZXRoaW5nIGlzIGNvbnN0YW50LiBNb3N0bHkgZXhwZWN0ZWQgdG8gYmUgdXNlZCB3aXRoXG4gICAgW3ZhcmlhYmxlIG5hbWVzXSgjaGlnaGxpZ2h0LnRhZ3MudmFyaWFibGVOYW1lKS5cbiAgICAqL1xuICAgIGNvbnN0YW50OiBUYWcuZGVmaW5lTW9kaWZpZXIoXCJjb25zdGFudFwiKSxcbiAgICAvKipcbiAgICBbTW9kaWZpZXJdKCNoaWdobGlnaHQuVGFnXmRlZmluZU1vZGlmaWVyKSB1c2VkIHRvIGluZGljYXRlIHRoYXRcbiAgICBhIFt2YXJpYWJsZV0oI2hpZ2hsaWdodC50YWdzLnZhcmlhYmxlTmFtZSkgb3IgW3Byb3BlcnR5XG4gICAgbmFtZV0oI2hpZ2hsaWdodC50YWdzLnByb3BlcnR5TmFtZSkgaXMgYmVpbmcgY2FsbGVkIG9yIGRlZmluZWRcbiAgICBhcyBhIGZ1bmN0aW9uLlxuICAgICovXG4gICAgZnVuY3Rpb246IFRhZy5kZWZpbmVNb2RpZmllcihcImZ1bmN0aW9uXCIpLFxuICAgIC8qKlxuICAgIFtNb2RpZmllcl0oI2hpZ2hsaWdodC5UYWdeZGVmaW5lTW9kaWZpZXIpIHRoYXQgY2FuIGJlIGFwcGxpZWQgdG9cbiAgICBbbmFtZXNdKCNoaWdobGlnaHQudGFncy5uYW1lKSB0byBpbmRpY2F0ZSB0aGF0IHRoZXkgYmVsb25nIHRvXG4gICAgdGhlIGxhbmd1YWdlJ3Mgc3RhbmRhcmQgZW52aXJvbm1lbnQuXG4gICAgKi9cbiAgICBzdGFuZGFyZDogVGFnLmRlZmluZU1vZGlmaWVyKFwic3RhbmRhcmRcIiksXG4gICAgLyoqXG4gICAgW01vZGlmaWVyXSgjaGlnaGxpZ2h0LlRhZ15kZWZpbmVNb2RpZmllcikgdGhhdCBpbmRpY2F0ZXMgYSBnaXZlblxuICAgIFtuYW1lc10oI2hpZ2hsaWdodC50YWdzLm5hbWUpIGlzIGxvY2FsIHRvIHNvbWUgc2NvcGUuXG4gICAgKi9cbiAgICBsb2NhbDogVGFnLmRlZmluZU1vZGlmaWVyKFwibG9jYWxcIiksXG4gICAgLyoqXG4gICAgQSBnZW5lcmljIHZhcmlhbnQgW21vZGlmaWVyXSgjaGlnaGxpZ2h0LlRhZ15kZWZpbmVNb2RpZmllcikgdGhhdFxuICAgIGNhbiBiZSB1c2VkIHRvIHRhZyBsYW5ndWFnZS1zcGVjaWZpYyBhbHRlcm5hdGl2ZSB2YXJpYW50cyBvZlxuICAgIHNvbWUgY29tbW9uIHRhZy4gSXQgaXMgcmVjb21tZW5kZWQgZm9yIHRoZW1lcyB0byBkZWZpbmUgc3BlY2lhbFxuICAgIGZvcm1zIG9mIGF0IGxlYXN0IHRoZSBbc3RyaW5nXSgjaGlnaGxpZ2h0LnRhZ3Muc3RyaW5nKSBhbmRcbiAgICBbdmFyaWFibGUgbmFtZV0oI2hpZ2hsaWdodC50YWdzLnZhcmlhYmxlTmFtZSkgdGFncywgc2luY2UgdGhvc2VcbiAgICBjb21lIHVwIGEgbG90LlxuICAgICovXG4gICAgc3BlY2lhbDogVGFnLmRlZmluZU1vZGlmaWVyKFwic3BlY2lhbFwiKVxufTtcbmZvciAobGV0IG5hbWUgaW4gdGFncykge1xuICAgIGxldCB2YWwgPSB0YWdzW25hbWVdO1xuICAgIGlmICh2YWwgaW5zdGFuY2VvZiBUYWcpXG4gICAgICAgIHZhbC5uYW1lID0gbmFtZTtcbn1cbi8qKlxuVGhpcyBpcyBhIGhpZ2hsaWdodGVyIHRoYXQgYWRkcyBzdGFibGUsIHByZWRpY3RhYmxlIGNsYXNzZXMgdG9cbnRva2VucywgZm9yIHN0eWxpbmcgd2l0aCBleHRlcm5hbCBDU1MuXG5cblRoZSBmb2xsb3dpbmcgdGFncyBhcmUgbWFwcGVkIHRvIHRoZWlyIG5hbWUgcHJlZml4ZWQgd2l0aCBgXCJ0b2stXCJgXG4oZm9yIGV4YW1wbGUgYFwidG9rLWNvbW1lbnRcImApOlxuXG4qIFtgbGlua2BdKCNoaWdobGlnaHQudGFncy5saW5rKVxuKiBbYGhlYWRpbmdgXSgjaGlnaGxpZ2h0LnRhZ3MuaGVhZGluZylcbiogW2BlbXBoYXNpc2BdKCNoaWdobGlnaHQudGFncy5lbXBoYXNpcylcbiogW2BzdHJvbmdgXSgjaGlnaGxpZ2h0LnRhZ3Muc3Ryb25nKVxuKiBbYGtleXdvcmRgXSgjaGlnaGxpZ2h0LnRhZ3Mua2V5d29yZClcbiogW2BhdG9tYF0oI2hpZ2hsaWdodC50YWdzLmF0b20pXG4qIFtgYm9vbGBdKCNoaWdobGlnaHQudGFncy5ib29sKVxuKiBbYHVybGBdKCNoaWdobGlnaHQudGFncy51cmwpXG4qIFtgbGFiZWxOYW1lYF0oI2hpZ2hsaWdodC50YWdzLmxhYmVsTmFtZSlcbiogW2BpbnNlcnRlZGBdKCNoaWdobGlnaHQudGFncy5pbnNlcnRlZClcbiogW2BkZWxldGVkYF0oI2hpZ2hsaWdodC50YWdzLmRlbGV0ZWQpXG4qIFtgbGl0ZXJhbGBdKCNoaWdobGlnaHQudGFncy5saXRlcmFsKVxuKiBbYHN0cmluZ2BdKCNoaWdobGlnaHQudGFncy5zdHJpbmcpXG4qIFtgbnVtYmVyYF0oI2hpZ2hsaWdodC50YWdzLm51bWJlcilcbiogW2B2YXJpYWJsZU5hbWVgXSgjaGlnaGxpZ2h0LnRhZ3MudmFyaWFibGVOYW1lKVxuKiBbYHR5cGVOYW1lYF0oI2hpZ2hsaWdodC50YWdzLnR5cGVOYW1lKVxuKiBbYG5hbWVzcGFjZWBdKCNoaWdobGlnaHQudGFncy5uYW1lc3BhY2UpXG4qIFtgY2xhc3NOYW1lYF0oI2hpZ2hsaWdodC50YWdzLmNsYXNzTmFtZSlcbiogW2BtYWNyb05hbWVgXSgjaGlnaGxpZ2h0LnRhZ3MubWFjcm9OYW1lKVxuKiBbYHByb3BlcnR5TmFtZWBdKCNoaWdobGlnaHQudGFncy5wcm9wZXJ0eU5hbWUpXG4qIFtgb3BlcmF0b3JgXSgjaGlnaGxpZ2h0LnRhZ3Mub3BlcmF0b3IpXG4qIFtgY29tbWVudGBdKCNoaWdobGlnaHQudGFncy5jb21tZW50KVxuKiBbYG1ldGFgXSgjaGlnaGxpZ2h0LnRhZ3MubWV0YSlcbiogW2BwdW5jdHVhdGlvbmBdKCNoaWdobGlnaHQudGFncy5wdW5jdHVhdGlvbilcbiogW2BpbnZhbGlkYF0oI2hpZ2hsaWdodC50YWdzLmludmFsaWQpXG5cbkluIGFkZGl0aW9uLCB0aGVzZSBtYXBwaW5ncyBhcmUgcHJvdmlkZWQ6XG5cbiogW2ByZWdleHBgXSgjaGlnaGxpZ2h0LnRhZ3MucmVnZXhwKSxcbiAgW2Blc2NhcGVgXSgjaGlnaGxpZ2h0LnRhZ3MuZXNjYXBlKSwgYW5kXG4gIFtgc3BlY2lhbGBdKCNoaWdobGlnaHQudGFncy5zcGVjaWFsKVtgKHN0cmluZylgXSgjaGlnaGxpZ2h0LnRhZ3Muc3RyaW5nKVxuICBhcmUgbWFwcGVkIHRvIGBcInRvay1zdHJpbmcyXCJgXG4qIFtgc3BlY2lhbGBdKCNoaWdobGlnaHQudGFncy5zcGVjaWFsKVtgKHZhcmlhYmxlTmFtZSlgXSgjaGlnaGxpZ2h0LnRhZ3MudmFyaWFibGVOYW1lKVxuICB0byBgXCJ0b2stdmFyaWFibGVOYW1lMlwiYFxuKiBbYGxvY2FsYF0oI2hpZ2hsaWdodC50YWdzLmxvY2FsKVtgKHZhcmlhYmxlTmFtZSlgXSgjaGlnaGxpZ2h0LnRhZ3MudmFyaWFibGVOYW1lKVxuICB0byBgXCJ0b2stdmFyaWFibGVOYW1lIHRvay1sb2NhbFwiYFxuKiBbYGRlZmluaXRpb25gXSgjaGlnaGxpZ2h0LnRhZ3MuZGVmaW5pdGlvbilbYCh2YXJpYWJsZU5hbWUpYF0oI2hpZ2hsaWdodC50YWdzLnZhcmlhYmxlTmFtZSlcbiAgdG8gYFwidG9rLXZhcmlhYmxlTmFtZSB0b2stZGVmaW5pdGlvblwiYFxuKiBbYGRlZmluaXRpb25gXSgjaGlnaGxpZ2h0LnRhZ3MuZGVmaW5pdGlvbilbYChwcm9wZXJ0eU5hbWUpYF0oI2hpZ2hsaWdodC50YWdzLnByb3BlcnR5TmFtZSlcbiAgdG8gYFwidG9rLXByb3BlcnR5TmFtZSB0b2stZGVmaW5pdGlvblwiYFxuKi9cbmNvbnN0IGNsYXNzSGlnaGxpZ2h0ZXIgPSB0YWdIaWdobGlnaHRlcihbXG4gICAgeyB0YWc6IHRhZ3MubGluaywgY2xhc3M6IFwidG9rLWxpbmtcIiB9LFxuICAgIHsgdGFnOiB0YWdzLmhlYWRpbmcsIGNsYXNzOiBcInRvay1oZWFkaW5nXCIgfSxcbiAgICB7IHRhZzogdGFncy5lbXBoYXNpcywgY2xhc3M6IFwidG9rLWVtcGhhc2lzXCIgfSxcbiAgICB7IHRhZzogdGFncy5zdHJvbmcsIGNsYXNzOiBcInRvay1zdHJvbmdcIiB9LFxuICAgIHsgdGFnOiB0YWdzLmtleXdvcmQsIGNsYXNzOiBcInRvay1rZXl3b3JkXCIgfSxcbiAgICB7IHRhZzogdGFncy5hdG9tLCBjbGFzczogXCJ0b2stYXRvbVwiIH0sXG4gICAgeyB0YWc6IHRhZ3MuYm9vbCwgY2xhc3M6IFwidG9rLWJvb2xcIiB9LFxuICAgIHsgdGFnOiB0YWdzLnVybCwgY2xhc3M6IFwidG9rLXVybFwiIH0sXG4gICAgeyB0YWc6IHRhZ3MubGFiZWxOYW1lLCBjbGFzczogXCJ0b2stbGFiZWxOYW1lXCIgfSxcbiAgICB7IHRhZzogdGFncy5pbnNlcnRlZCwgY2xhc3M6IFwidG9rLWluc2VydGVkXCIgfSxcbiAgICB7IHRhZzogdGFncy5kZWxldGVkLCBjbGFzczogXCJ0b2stZGVsZXRlZFwiIH0sXG4gICAgeyB0YWc6IHRhZ3MubGl0ZXJhbCwgY2xhc3M6IFwidG9rLWxpdGVyYWxcIiB9LFxuICAgIHsgdGFnOiB0YWdzLnN0cmluZywgY2xhc3M6IFwidG9rLXN0cmluZ1wiIH0sXG4gICAgeyB0YWc6IHRhZ3MubnVtYmVyLCBjbGFzczogXCJ0b2stbnVtYmVyXCIgfSxcbiAgICB7IHRhZzogW3RhZ3MucmVnZXhwLCB0YWdzLmVzY2FwZSwgdGFncy5zcGVjaWFsKHRhZ3Muc3RyaW5nKV0sIGNsYXNzOiBcInRvay1zdHJpbmcyXCIgfSxcbiAgICB7IHRhZzogdGFncy52YXJpYWJsZU5hbWUsIGNsYXNzOiBcInRvay12YXJpYWJsZU5hbWVcIiB9LFxuICAgIHsgdGFnOiB0YWdzLmxvY2FsKHRhZ3MudmFyaWFibGVOYW1lKSwgY2xhc3M6IFwidG9rLXZhcmlhYmxlTmFtZSB0b2stbG9jYWxcIiB9LFxuICAgIHsgdGFnOiB0YWdzLmRlZmluaXRpb24odGFncy52YXJpYWJsZU5hbWUpLCBjbGFzczogXCJ0b2stdmFyaWFibGVOYW1lIHRvay1kZWZpbml0aW9uXCIgfSxcbiAgICB7IHRhZzogdGFncy5zcGVjaWFsKHRhZ3MudmFyaWFibGVOYW1lKSwgY2xhc3M6IFwidG9rLXZhcmlhYmxlTmFtZTJcIiB9LFxuICAgIHsgdGFnOiB0YWdzLmRlZmluaXRpb24odGFncy5wcm9wZXJ0eU5hbWUpLCBjbGFzczogXCJ0b2stcHJvcGVydHlOYW1lIHRvay1kZWZpbml0aW9uXCIgfSxcbiAgICB7IHRhZzogdGFncy50eXBlTmFtZSwgY2xhc3M6IFwidG9rLXR5cGVOYW1lXCIgfSxcbiAgICB7IHRhZzogdGFncy5uYW1lc3BhY2UsIGNsYXNzOiBcInRvay1uYW1lc3BhY2VcIiB9LFxuICAgIHsgdGFnOiB0YWdzLmNsYXNzTmFtZSwgY2xhc3M6IFwidG9rLWNsYXNzTmFtZVwiIH0sXG4gICAgeyB0YWc6IHRhZ3MubWFjcm9OYW1lLCBjbGFzczogXCJ0b2stbWFjcm9OYW1lXCIgfSxcbiAgICB7IHRhZzogdGFncy5wcm9wZXJ0eU5hbWUsIGNsYXNzOiBcInRvay1wcm9wZXJ0eU5hbWVcIiB9LFxuICAgIHsgdGFnOiB0YWdzLm9wZXJhdG9yLCBjbGFzczogXCJ0b2stb3BlcmF0b3JcIiB9LFxuICAgIHsgdGFnOiB0YWdzLmNvbW1lbnQsIGNsYXNzOiBcInRvay1jb21tZW50XCIgfSxcbiAgICB7IHRhZzogdGFncy5tZXRhLCBjbGFzczogXCJ0b2stbWV0YVwiIH0sXG4gICAgeyB0YWc6IHRhZ3MuaW52YWxpZCwgY2xhc3M6IFwidG9rLWludmFsaWRcIiB9LFxuICAgIHsgdGFnOiB0YWdzLnB1bmN0dWF0aW9uLCBjbGFzczogXCJ0b2stcHVuY3R1YXRpb25cIiB9XG5dKTtcblxuZXhwb3J0IHsgVGFnLCBjbGFzc0hpZ2hsaWdodGVyLCBnZXRTdHlsZVRhZ3MsIGhpZ2hsaWdodENvZGUsIGhpZ2hsaWdodFRyZWUsIHN0eWxlVGFncywgdGFnSGlnaGxpZ2h0ZXIsIHRhZ3MgfTtcbiIsCiAgICAiaW1wb3J0IHsgTm9kZVByb3AsIEl0ZXJNb2RlLCBUcmVlLCBUcmVlRnJhZ21lbnQsIFBhcnNlciwgTm9kZVR5cGUsIE5vZGVTZXQgfSBmcm9tICdAbGV6ZXIvY29tbW9uJztcbmltcG9ydCB7IFN0YXRlRWZmZWN0LCBTdGF0ZUZpZWxkLCBGYWNldCwgRWRpdG9yU3RhdGUsIGNvdW50Q29sdW1uLCBjb21iaW5lQ29uZmlnLCBSYW5nZVNldCwgUmFuZ2VTZXRCdWlsZGVyLCBQcmVjIH0gZnJvbSAnQGNvZGVtaXJyb3Ivc3RhdGUnO1xuaW1wb3J0IHsgVmlld1BsdWdpbiwgbG9nRXhjZXB0aW9uLCBFZGl0b3JWaWV3LCBEZWNvcmF0aW9uLCBXaWRnZXRUeXBlLCBndXR0ZXIsIEd1dHRlck1hcmtlciwgRGlyZWN0aW9uIH0gZnJvbSAnQGNvZGVtaXJyb3Ivdmlldyc7XG5pbXBvcnQgeyB0YWdzLCB0YWdIaWdobGlnaHRlciwgaGlnaGxpZ2h0VHJlZSwgc3R5bGVUYWdzIH0gZnJvbSAnQGxlemVyL2hpZ2hsaWdodCc7XG5pbXBvcnQgeyBTdHlsZU1vZHVsZSB9IGZyb20gJ3N0eWxlLW1vZCc7XG5cbnZhciBfYTtcbi8qKlxuTm9kZSBwcm9wIHN0b3JlZCBpbiBhIHBhcnNlcidzIHRvcCBzeW50YXggbm9kZSB0byBwcm92aWRlIHRoZVxuZmFjZXQgdGhhdCBzdG9yZXMgbGFuZ3VhZ2Utc3BlY2lmaWMgZGF0YSBmb3IgdGhhdCBsYW5ndWFnZS5cbiovXG5jb25zdCBsYW5ndWFnZURhdGFQcm9wID0gLypAX19QVVJFX18qL25ldyBOb2RlUHJvcCgpO1xuLyoqXG5IZWxwZXIgZnVuY3Rpb24gdG8gZGVmaW5lIGEgZmFjZXQgKHRvIGJlIGFkZGVkIHRvIHRoZSB0b3Agc3ludGF4XG5ub2RlKHMpIGZvciBhIGxhbmd1YWdlIHZpYVxuW2BsYW5ndWFnZURhdGFQcm9wYF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNsYW5ndWFnZS5sYW5ndWFnZURhdGFQcm9wKSksIHRoYXQgd2lsbCBiZVxudXNlZCB0byBhc3NvY2lhdGUgbGFuZ3VhZ2UgZGF0YSB3aXRoIHRoZSBsYW5ndWFnZS4gWW91XG5wcm9iYWJseSBvbmx5IG5lZWQgdGhpcyB3aGVuIHN1YmNsYXNzaW5nXG5bYExhbmd1YWdlYF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNsYW5ndWFnZS5MYW5ndWFnZSkuXG4qL1xuZnVuY3Rpb24gZGVmaW5lTGFuZ3VhZ2VGYWNldChiYXNlRGF0YSkge1xuICAgIHJldHVybiBGYWNldC5kZWZpbmUoe1xuICAgICAgICBjb21iaW5lOiBiYXNlRGF0YSA/IHZhbHVlcyA9PiB2YWx1ZXMuY29uY2F0KGJhc2VEYXRhKSA6IHVuZGVmaW5lZFxuICAgIH0pO1xufVxuLyoqXG5TeW50YXggbm9kZSBwcm9wIHVzZWQgdG8gcmVnaXN0ZXIgc3VibGFuZ3VhZ2VzLiBTaG91bGQgYmUgYWRkZWQgdG9cbnRoZSB0b3AgbGV2ZWwgbm9kZSB0eXBlIGZvciB0aGUgbGFuZ3VhZ2UuXG4qL1xuY29uc3Qgc3VibGFuZ3VhZ2VQcm9wID0gLypAX19QVVJFX18qL25ldyBOb2RlUHJvcCgpO1xuLyoqXG5BIGxhbmd1YWdlIG9iamVjdCBtYW5hZ2VzIHBhcnNpbmcgYW5kIHBlci1sYW5ndWFnZVxuW21ldGFkYXRhXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI3N0YXRlLkVkaXRvclN0YXRlLmxhbmd1YWdlRGF0YUF0KS4gUGFyc2UgZGF0YSBpc1xubWFuYWdlZCBhcyBhIFtMZXplcl0oaHR0cHM6Ly9sZXplci5jb2RlbWlycm9yLm5ldCkgdHJlZS4gVGhlIGNsYXNzXG5jYW4gYmUgdXNlZCBkaXJlY3RseSwgdmlhIHRoZSBbYExSTGFuZ3VhZ2VgXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI2xhbmd1YWdlLkxSTGFuZ3VhZ2UpXG5zdWJjbGFzcyBmb3IgW0xlemVyXShodHRwczovL2xlemVyLmNvZGVtaXJyb3IubmV0LykgTFIgcGFyc2Vycywgb3JcbnZpYSB0aGUgW2BTdHJlYW1MYW5ndWFnZWBdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jbGFuZ3VhZ2UuU3RyZWFtTGFuZ3VhZ2UpIHN1YmNsYXNzXG5mb3Igc3RyZWFtIHBhcnNlcnMuXG4qL1xuY2xhc3MgTGFuZ3VhZ2Uge1xuICAgIC8qKlxuICAgIENvbnN0cnVjdCBhIGxhbmd1YWdlIG9iamVjdC4gSWYgeW91IG5lZWQgdG8gaW52b2tlIHRoaXNcbiAgICBkaXJlY3RseSwgZmlyc3QgZGVmaW5lIGEgZGF0YSBmYWNldCB3aXRoXG4gICAgW2BkZWZpbmVMYW5ndWFnZUZhY2V0YF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNsYW5ndWFnZS5kZWZpbmVMYW5ndWFnZUZhY2V0KSwgYW5kIHRoZW5cbiAgICBjb25maWd1cmUgeW91ciBwYXJzZXIgdG8gW2F0dGFjaF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNsYW5ndWFnZS5sYW5ndWFnZURhdGFQcm9wKSBpdFxuICAgIHRvIHRoZSBsYW5ndWFnZSdzIG91dGVyIHN5bnRheCBub2RlLlxuICAgICovXG4gICAgY29uc3RydWN0b3IoXG4gICAgLyoqXG4gICAgVGhlIFtsYW5ndWFnZSBkYXRhXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI3N0YXRlLkVkaXRvclN0YXRlLmxhbmd1YWdlRGF0YUF0KSBmYWNldFxuICAgIHVzZWQgZm9yIHRoaXMgbGFuZ3VhZ2UuXG4gICAgKi9cbiAgICBkYXRhLCBwYXJzZXIsIGV4dHJhRXh0ZW5zaW9ucyA9IFtdLCBcbiAgICAvKipcbiAgICBBIGxhbmd1YWdlIG5hbWUuXG4gICAgKi9cbiAgICBuYW1lID0gXCJcIikge1xuICAgICAgICB0aGlzLmRhdGEgPSBkYXRhO1xuICAgICAgICB0aGlzLm5hbWUgPSBuYW1lO1xuICAgICAgICAvLyBLbHVkZ2UgdG8gZGVmaW5lIEVkaXRvclN0YXRlLnRyZWUgYXMgYSBkZWJ1Z2dpbmcgaGVscGVyLFxuICAgICAgICAvLyB3aXRob3V0IHRoZSBFZGl0b3JTdGF0ZSBwYWNrYWdlIGFjdHVhbGx5IGtub3dpbmcgYWJvdXRcbiAgICAgICAgLy8gbGFuZ3VhZ2VzIGFuZCBsZXplciB0cmVlcy5cbiAgICAgICAgaWYgKCFFZGl0b3JTdGF0ZS5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkoXCJ0cmVlXCIpKVxuICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KEVkaXRvclN0YXRlLnByb3RvdHlwZSwgXCJ0cmVlXCIsIHsgZ2V0KCkgeyByZXR1cm4gc3ludGF4VHJlZSh0aGlzKTsgfSB9KTtcbiAgICAgICAgdGhpcy5wYXJzZXIgPSBwYXJzZXI7XG4gICAgICAgIHRoaXMuZXh0ZW5zaW9uID0gW1xuICAgICAgICAgICAgbGFuZ3VhZ2Uub2YodGhpcyksXG4gICAgICAgICAgICBFZGl0b3JTdGF0ZS5sYW5ndWFnZURhdGEub2YoKHN0YXRlLCBwb3MsIHNpZGUpID0+IHtcbiAgICAgICAgICAgICAgICBsZXQgdG9wID0gdG9wTm9kZUF0KHN0YXRlLCBwb3MsIHNpZGUpLCBkYXRhID0gdG9wLnR5cGUucHJvcChsYW5ndWFnZURhdGFQcm9wKTtcbiAgICAgICAgICAgICAgICBpZiAoIWRhdGEpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbXTtcbiAgICAgICAgICAgICAgICBsZXQgYmFzZSA9IHN0YXRlLmZhY2V0KGRhdGEpLCBzdWIgPSB0b3AudHlwZS5wcm9wKHN1Ymxhbmd1YWdlUHJvcCk7XG4gICAgICAgICAgICAgICAgaWYgKHN1Yikge1xuICAgICAgICAgICAgICAgICAgICBsZXQgaW5uZXJOb2RlID0gdG9wLnJlc29sdmUocG9zIC0gdG9wLmZyb20sIHNpZGUpO1xuICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBzdWJsYW5nIG9mIHN1YilcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzdWJsYW5nLnRlc3QoaW5uZXJOb2RlLCBzdGF0ZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgZGF0YSA9IHN0YXRlLmZhY2V0KHN1YmxhbmcuZmFjZXQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBzdWJsYW5nLnR5cGUgPT0gXCJyZXBsYWNlXCIgPyBkYXRhIDogZGF0YS5jb25jYXQoYmFzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBiYXNlO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgXS5jb25jYXQoZXh0cmFFeHRlbnNpb25zKTtcbiAgICB9XG4gICAgLyoqXG4gICAgUXVlcnkgd2hldGhlciB0aGlzIGxhbmd1YWdlIGlzIGFjdGl2ZSBhdCB0aGUgZ2l2ZW4gcG9zaXRpb24uXG4gICAgKi9cbiAgICBpc0FjdGl2ZUF0KHN0YXRlLCBwb3MsIHNpZGUgPSAtMSkge1xuICAgICAgICByZXR1cm4gdG9wTm9kZUF0KHN0YXRlLCBwb3MsIHNpZGUpLnR5cGUucHJvcChsYW5ndWFnZURhdGFQcm9wKSA9PSB0aGlzLmRhdGE7XG4gICAgfVxuICAgIC8qKlxuICAgIEZpbmQgdGhlIGRvY3VtZW50IHJlZ2lvbnMgdGhhdCB3ZXJlIHBhcnNlZCB1c2luZyB0aGlzIGxhbmd1YWdlLlxuICAgIFRoZSByZXR1cm5lZCByZWdpb25zIHdpbGwgX2luY2x1ZGVfIGFueSBuZXN0ZWQgbGFuZ3VhZ2VzIHJvb3RlZFxuICAgIGluIHRoaXMgbGFuZ3VhZ2UsIHdoZW4gdGhvc2UgZXhpc3QuXG4gICAgKi9cbiAgICBmaW5kUmVnaW9ucyhzdGF0ZSkge1xuICAgICAgICBsZXQgbGFuZyA9IHN0YXRlLmZhY2V0KGxhbmd1YWdlKTtcbiAgICAgICAgaWYgKChsYW5nID09PSBudWxsIHx8IGxhbmcgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGxhbmcuZGF0YSkgPT0gdGhpcy5kYXRhKVxuICAgICAgICAgICAgcmV0dXJuIFt7IGZyb206IDAsIHRvOiBzdGF0ZS5kb2MubGVuZ3RoIH1dO1xuICAgICAgICBpZiAoIWxhbmcgfHwgIWxhbmcuYWxsb3dzTmVzdGluZylcbiAgICAgICAgICAgIHJldHVybiBbXTtcbiAgICAgICAgbGV0IHJlc3VsdCA9IFtdO1xuICAgICAgICBsZXQgZXhwbG9yZSA9ICh0cmVlLCBmcm9tKSA9PiB7XG4gICAgICAgICAgICBpZiAodHJlZS5wcm9wKGxhbmd1YWdlRGF0YVByb3ApID09IHRoaXMuZGF0YSkge1xuICAgICAgICAgICAgICAgIHJlc3VsdC5wdXNoKHsgZnJvbSwgdG86IGZyb20gKyB0cmVlLmxlbmd0aCB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsZXQgbW91bnQgPSB0cmVlLnByb3AoTm9kZVByb3AubW91bnRlZCk7XG4gICAgICAgICAgICBpZiAobW91bnQpIHtcbiAgICAgICAgICAgICAgICBpZiAobW91bnQudHJlZS5wcm9wKGxhbmd1YWdlRGF0YVByb3ApID09IHRoaXMuZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAobW91bnQub3ZlcmxheSlcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobGV0IHIgb2YgbW91bnQub3ZlcmxheSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQucHVzaCh7IGZyb206IHIuZnJvbSArIGZyb20sIHRvOiByLnRvICsgZnJvbSB9KTtcbiAgICAgICAgICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnB1c2goeyBmcm9tOiBmcm9tLCB0bzogZnJvbSArIHRyZWUubGVuZ3RoIH0pO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKG1vdW50Lm92ZXJsYXkpIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IHNpemUgPSByZXN1bHQubGVuZ3RoO1xuICAgICAgICAgICAgICAgICAgICBleHBsb3JlKG1vdW50LnRyZWUsIG1vdW50Lm92ZXJsYXlbMF0uZnJvbSArIGZyb20pO1xuICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0Lmxlbmd0aCA+IHNpemUpXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0cmVlLmNoaWxkcmVuLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgbGV0IGNoID0gdHJlZS5jaGlsZHJlbltpXTtcbiAgICAgICAgICAgICAgICBpZiAoY2ggaW5zdGFuY2VvZiBUcmVlKVxuICAgICAgICAgICAgICAgICAgICBleHBsb3JlKGNoLCB0cmVlLnBvc2l0aW9uc1tpXSArIGZyb20pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBleHBsb3JlKHN5bnRheFRyZWUoc3RhdGUpLCAwKTtcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG4gICAgLyoqXG4gICAgSW5kaWNhdGVzIHdoZXRoZXIgdGhpcyBsYW5ndWFnZSBhbGxvd3MgbmVzdGVkIGxhbmd1YWdlcy4gVGhlXG4gICAgZGVmYXVsdCBpbXBsZW1lbnRhdGlvbiByZXR1cm5zIHRydWUuXG4gICAgKi9cbiAgICBnZXQgYWxsb3dzTmVzdGluZygpIHsgcmV0dXJuIHRydWU7IH1cbn1cbi8qKlxuQGludGVybmFsXG4qL1xuTGFuZ3VhZ2Uuc2V0U3RhdGUgPSAvKkBfX1BVUkVfXyovU3RhdGVFZmZlY3QuZGVmaW5lKCk7XG5mdW5jdGlvbiB0b3BOb2RlQXQoc3RhdGUsIHBvcywgc2lkZSkge1xuICAgIGxldCB0b3BMYW5nID0gc3RhdGUuZmFjZXQobGFuZ3VhZ2UpLCB0cmVlID0gc3ludGF4VHJlZShzdGF0ZSkudG9wTm9kZTtcbiAgICBpZiAoIXRvcExhbmcgfHwgdG9wTGFuZy5hbGxvd3NOZXN0aW5nKSB7XG4gICAgICAgIGZvciAobGV0IG5vZGUgPSB0cmVlOyBub2RlOyBub2RlID0gbm9kZS5lbnRlcihwb3MsIHNpZGUsIEl0ZXJNb2RlLkV4Y2x1ZGVCdWZmZXJzIHwgSXRlck1vZGUuRW50ZXJCcmFja2V0ZWQpKVxuICAgICAgICAgICAgaWYgKG5vZGUudHlwZS5pc1RvcClcbiAgICAgICAgICAgICAgICB0cmVlID0gbm9kZTtcbiAgICB9XG4gICAgcmV0dXJuIHRyZWU7XG59XG4vKipcbkEgc3ViY2xhc3Mgb2YgW2BMYW5ndWFnZWBdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jbGFuZ3VhZ2UuTGFuZ3VhZ2UpIGZvciB1c2Ugd2l0aCBMZXplclxuW0xSIHBhcnNlcnNdKGh0dHBzOi8vbGV6ZXIuY29kZW1pcnJvci5uZXQvZG9jcy9yZWYjbHIuTFJQYXJzZXIpXG5wYXJzZXJzLlxuKi9cbmNsYXNzIExSTGFuZ3VhZ2UgZXh0ZW5kcyBMYW5ndWFnZSB7XG4gICAgY29uc3RydWN0b3IoZGF0YSwgcGFyc2VyLCBuYW1lKSB7XG4gICAgICAgIHN1cGVyKGRhdGEsIHBhcnNlciwgW10sIG5hbWUpO1xuICAgICAgICB0aGlzLnBhcnNlciA9IHBhcnNlcjtcbiAgICB9XG4gICAgLyoqXG4gICAgRGVmaW5lIGEgbGFuZ3VhZ2UgZnJvbSBhIHBhcnNlci5cbiAgICAqL1xuICAgIHN0YXRpYyBkZWZpbmUoc3BlYykge1xuICAgICAgICBsZXQgZGF0YSA9IGRlZmluZUxhbmd1YWdlRmFjZXQoc3BlYy5sYW5ndWFnZURhdGEpO1xuICAgICAgICByZXR1cm4gbmV3IExSTGFuZ3VhZ2UoZGF0YSwgc3BlYy5wYXJzZXIuY29uZmlndXJlKHtcbiAgICAgICAgICAgIHByb3BzOiBbbGFuZ3VhZ2VEYXRhUHJvcC5hZGQodHlwZSA9PiB0eXBlLmlzVG9wID8gZGF0YSA6IHVuZGVmaW5lZCldXG4gICAgICAgIH0pLCBzcGVjLm5hbWUpO1xuICAgIH1cbiAgICAvKipcbiAgICBDcmVhdGUgYSBuZXcgaW5zdGFuY2Ugb2YgdGhpcyBsYW5ndWFnZSB3aXRoIGEgcmVjb25maWd1cmVkXG4gICAgdmVyc2lvbiBvZiBpdHMgcGFyc2VyIGFuZCBvcHRpb25hbGx5IGEgbmV3IG5hbWUuXG4gICAgKi9cbiAgICBjb25maWd1cmUob3B0aW9ucywgbmFtZSkge1xuICAgICAgICByZXR1cm4gbmV3IExSTGFuZ3VhZ2UodGhpcy5kYXRhLCB0aGlzLnBhcnNlci5jb25maWd1cmUob3B0aW9ucyksIG5hbWUgfHwgdGhpcy5uYW1lKTtcbiAgICB9XG4gICAgZ2V0IGFsbG93c05lc3RpbmcoKSB7IHJldHVybiB0aGlzLnBhcnNlci5oYXNXcmFwcGVycygpOyB9XG59XG4vKipcbkdldCB0aGUgc3ludGF4IHRyZWUgZm9yIGEgc3RhdGUsIHdoaWNoIGlzIHRoZSBjdXJyZW50IChwb3NzaWJseVxuaW5jb21wbGV0ZSkgcGFyc2UgdHJlZSBvZiB0aGUgYWN0aXZlXG5bbGFuZ3VhZ2VdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jbGFuZ3VhZ2UuTGFuZ3VhZ2UpLCBvciB0aGUgZW1wdHkgdHJlZSBpZiB0aGVyZSBpcyBub1xubGFuZ3VhZ2UgYXZhaWxhYmxlLlxuKi9cbmZ1bmN0aW9uIHN5bnRheFRyZWUoc3RhdGUpIHtcbiAgICBsZXQgZmllbGQgPSBzdGF0ZS5maWVsZChMYW5ndWFnZS5zdGF0ZSwgZmFsc2UpO1xuICAgIHJldHVybiBmaWVsZCA/IGZpZWxkLnRyZWUgOiBUcmVlLmVtcHR5O1xufVxuLyoqXG5UcnkgdG8gZ2V0IGEgcGFyc2UgdHJlZSB0aGF0IHNwYW5zIGF0IGxlYXN0IHVwIHRvIGB1cHRvYC4gVGhlXG5tZXRob2Qgd2lsbCBkbyBhdCBtb3N0IGB0aW1lb3V0YCBtaWxsaXNlY29uZHMgb2Ygd29yayB0byBwYXJzZVxudXAgdG8gdGhhdCBwb2ludCBpZiB0aGUgdHJlZSBpc24ndCBhbHJlYWR5IGF2YWlsYWJsZS5cbiovXG5mdW5jdGlvbiBlbnN1cmVTeW50YXhUcmVlKHN0YXRlLCB1cHRvLCB0aW1lb3V0ID0gNTApIHtcbiAgICB2YXIgX2E7XG4gICAgbGV0IHBhcnNlID0gKF9hID0gc3RhdGUuZmllbGQoTGFuZ3VhZ2Uuc3RhdGUsIGZhbHNlKSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmNvbnRleHQ7XG4gICAgaWYgKCFwYXJzZSlcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgbGV0IG9sZFZpZXBvcnQgPSBwYXJzZS52aWV3cG9ydDtcbiAgICBwYXJzZS51cGRhdGVWaWV3cG9ydCh7IGZyb206IDAsIHRvOiB1cHRvIH0pO1xuICAgIGxldCByZXN1bHQgPSBwYXJzZS5pc0RvbmUodXB0bykgfHwgcGFyc2Uud29yayh0aW1lb3V0LCB1cHRvKSA/IHBhcnNlLnRyZWUgOiBudWxsO1xuICAgIHBhcnNlLnVwZGF0ZVZpZXdwb3J0KG9sZFZpZXBvcnQpO1xuICAgIHJldHVybiByZXN1bHQ7XG59XG4vKipcblF1ZXJpZXMgd2hldGhlciB0aGVyZSBpcyBhIGZ1bGwgc3ludGF4IHRyZWUgYXZhaWxhYmxlIHVwIHRvIHRoZVxuZ2l2ZW4gZG9jdW1lbnQgcG9zaXRpb24uIElmIHRoZXJlIGlzbid0LCB0aGUgYmFja2dyb3VuZCBwYXJzZVxucHJvY2VzcyBfbWlnaHRfIHN0aWxsIGJlIHdvcmtpbmcgYW5kIHVwZGF0ZSB0aGUgdHJlZSBmdXJ0aGVyLCBidXRcbnRoZXJlIGlzIG5vIGd1YXJhbnRlZSBvZiB0aGF04oCUdGhlIHBhcnNlciB3aWxsIFtzdG9wXG53b3JraW5nXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI2xhbmd1YWdlLnN5bnRheFBhcnNlclJ1bm5pbmcpIHdoZW4gaXQgaGFzIHNwZW50IGFcbmNlcnRhaW4gYW1vdW50IG9mIHRpbWUgb3IgaGFzIG1vdmVkIGJleW9uZCB0aGUgdmlzaWJsZSB2aWV3cG9ydC5cbkFsd2F5cyByZXR1cm5zIGZhbHNlIGlmIG5vIGxhbmd1YWdlIGhhcyBiZWVuIGVuYWJsZWQuXG4qL1xuZnVuY3Rpb24gc3ludGF4VHJlZUF2YWlsYWJsZShzdGF0ZSwgdXB0byA9IHN0YXRlLmRvYy5sZW5ndGgpIHtcbiAgICB2YXIgX2E7XG4gICAgcmV0dXJuICgoX2EgPSBzdGF0ZS5maWVsZChMYW5ndWFnZS5zdGF0ZSwgZmFsc2UpKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuY29udGV4dC5pc0RvbmUodXB0bykpIHx8IGZhbHNlO1xufVxuLyoqXG5Nb3ZlIHBhcnNpbmcgZm9yd2FyZCwgYW5kIHVwZGF0ZSB0aGUgZWRpdG9yIHN0YXRlIGFmdGVyd2FyZHMgdG9cbnJlZmxlY3QgdGhlIG5ldyB0cmVlLiBXaWxsIHdvcmsgZm9yIGF0IG1vc3QgYHRpbWVvdXRgXG5taWxsaXNlY29uZHMuIFJldHVybnMgdHJ1ZSBpZiB0aGUgcGFyc2VyIG1hbmFnZWQgZ2V0IHRvIHRoZSBnaXZlblxucG9zaXRpb24gaW4gdGhhdCB0aW1lLlxuKi9cbmZ1bmN0aW9uIGZvcmNlUGFyc2luZyh2aWV3LCB1cHRvID0gdmlldy52aWV3cG9ydC50bywgdGltZW91dCA9IDEwMCkge1xuICAgIGxldCBzdWNjZXNzID0gZW5zdXJlU3ludGF4VHJlZSh2aWV3LnN0YXRlLCB1cHRvLCB0aW1lb3V0KTtcbiAgICBpZiAoc3VjY2VzcyAhPSBzeW50YXhUcmVlKHZpZXcuc3RhdGUpKVxuICAgICAgICB2aWV3LmRpc3BhdGNoKHt9KTtcbiAgICByZXR1cm4gISFzdWNjZXNzO1xufVxuLyoqXG5UZWxscyB5b3Ugd2hldGhlciB0aGUgbGFuZ3VhZ2UgcGFyc2VyIGlzIHBsYW5uaW5nIHRvIGRvIG1vcmVcbnBhcnNpbmcgd29yayAoaW4gYSBgcmVxdWVzdElkbGVDYWxsYmFja2AgcHNldWRvLXRocmVhZCkgb3IgaGFzXG5zdG9wcGVkIHJ1bm5pbmcsIGVpdGhlciBiZWNhdXNlIGl0IHBhcnNlZCB0aGUgZW50aXJlIGRvY3VtZW50LFxuYmVjYXVzZSBpdCBzcGVudCB0b28gbXVjaCB0aW1lIGFuZCB3YXMgY3V0IG9mZiwgb3IgYmVjYXVzZSB0aGVyZVxuaXMgbm8gbGFuZ3VhZ2UgcGFyc2VyIGVuYWJsZWQuXG4qL1xuZnVuY3Rpb24gc3ludGF4UGFyc2VyUnVubmluZyh2aWV3KSB7XG4gICAgdmFyIF9hO1xuICAgIHJldHVybiAoKF9hID0gdmlldy5wbHVnaW4ocGFyc2VXb3JrZXIpKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuaXNXb3JraW5nKCkpIHx8IGZhbHNlO1xufVxuLyoqXG5MZXplci1zdHlsZVxuW2BJbnB1dGBdKGh0dHBzOi8vbGV6ZXIuY29kZW1pcnJvci5uZXQvZG9jcy9yZWYjY29tbW9uLklucHV0KVxub2JqZWN0IGZvciBhIFtgVGV4dGBdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jc3RhdGUuVGV4dCkgb2JqZWN0LlxuKi9cbmNsYXNzIERvY0lucHV0IHtcbiAgICAvKipcbiAgICBDcmVhdGUgYW4gaW5wdXQgb2JqZWN0IGZvciB0aGUgZ2l2ZW4gZG9jdW1lbnQuXG4gICAgKi9cbiAgICBjb25zdHJ1Y3Rvcihkb2MpIHtcbiAgICAgICAgdGhpcy5kb2MgPSBkb2M7XG4gICAgICAgIHRoaXMuY3Vyc29yUG9zID0gMDtcbiAgICAgICAgdGhpcy5zdHJpbmcgPSBcIlwiO1xuICAgICAgICB0aGlzLmN1cnNvciA9IGRvYy5pdGVyKCk7XG4gICAgfVxuICAgIGdldCBsZW5ndGgoKSB7IHJldHVybiB0aGlzLmRvYy5sZW5ndGg7IH1cbiAgICBzeW5jVG8ocG9zKSB7XG4gICAgICAgIHRoaXMuc3RyaW5nID0gdGhpcy5jdXJzb3IubmV4dChwb3MgLSB0aGlzLmN1cnNvclBvcykudmFsdWU7XG4gICAgICAgIHRoaXMuY3Vyc29yUG9zID0gcG9zICsgdGhpcy5zdHJpbmcubGVuZ3RoO1xuICAgICAgICByZXR1cm4gdGhpcy5jdXJzb3JQb3MgLSB0aGlzLnN0cmluZy5sZW5ndGg7XG4gICAgfVxuICAgIGNodW5rKHBvcykge1xuICAgICAgICB0aGlzLnN5bmNUbyhwb3MpO1xuICAgICAgICByZXR1cm4gdGhpcy5zdHJpbmc7XG4gICAgfVxuICAgIGdldCBsaW5lQ2h1bmtzKCkgeyByZXR1cm4gdHJ1ZTsgfVxuICAgIHJlYWQoZnJvbSwgdG8pIHtcbiAgICAgICAgbGV0IHN0cmluZ1N0YXJ0ID0gdGhpcy5jdXJzb3JQb3MgLSB0aGlzLnN0cmluZy5sZW5ndGg7XG4gICAgICAgIGlmIChmcm9tIDwgc3RyaW5nU3RhcnQgfHwgdG8gPj0gdGhpcy5jdXJzb3JQb3MpXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5kb2Muc2xpY2VTdHJpbmcoZnJvbSwgdG8pO1xuICAgICAgICBlbHNlXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zdHJpbmcuc2xpY2UoZnJvbSAtIHN0cmluZ1N0YXJ0LCB0byAtIHN0cmluZ1N0YXJ0KTtcbiAgICB9XG59XG5sZXQgY3VycmVudENvbnRleHQgPSBudWxsO1xuLyoqXG5BIHBhcnNlIGNvbnRleHQgcHJvdmlkZWQgdG8gcGFyc2VycyB3b3JraW5nIG9uIHRoZSBlZGl0b3IgY29udGVudC5cbiovXG5jbGFzcyBQYXJzZUNvbnRleHQge1xuICAgIGNvbnN0cnVjdG9yKHBhcnNlciwgXG4gICAgLyoqXG4gICAgVGhlIGN1cnJlbnQgZWRpdG9yIHN0YXRlLlxuICAgICovXG4gICAgc3RhdGUsIFxuICAgIC8qKlxuICAgIFRyZWUgZnJhZ21lbnRzIHRoYXQgY2FuIGJlIHJldXNlZCBieSBpbmNyZW1lbnRhbCByZS1wYXJzZXMuXG4gICAgKi9cbiAgICBmcmFnbWVudHMgPSBbXSwgXG4gICAgLyoqXG4gICAgQGludGVybmFsXG4gICAgKi9cbiAgICB0cmVlLCBcbiAgICAvKipcbiAgICBAaW50ZXJuYWxcbiAgICAqL1xuICAgIHRyZWVMZW4sIFxuICAgIC8qKlxuICAgIFRoZSBjdXJyZW50IGVkaXRvciB2aWV3cG9ydCAob3Igc29tZSBvdmVyYXBwcm94aW1hdGlvblxuICAgIHRoZXJlb2YpLiBJbnRlbmRlZCB0byBiZSB1c2VkIGZvciBvcHBvcnR1bmlzdGljYWxseSBhdm9pZGluZ1xuICAgIHdvcmsgKGluIHdoaWNoIGNhc2VcbiAgICBbYHNraXBVbnRpbEluVmlld2BdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jbGFuZ3VhZ2UuUGFyc2VDb250ZXh0LnNraXBVbnRpbEluVmlldylcbiAgICBzaG91bGQgYmUgY2FsbGVkIHRvIG1ha2Ugc3VyZSB0aGUgcGFyc2VyIGlzIHJlc3RhcnRlZCB3aGVuIHRoZVxuICAgIHNraXBwZWQgcmVnaW9uIGJlY29tZXMgdmlzaWJsZSkuXG4gICAgKi9cbiAgICB2aWV3cG9ydCwgXG4gICAgLyoqXG4gICAgQGludGVybmFsXG4gICAgKi9cbiAgICBza2lwcGVkLCBcbiAgICAvKipcbiAgICBUaGlzIGlzIHdoZXJlIHNraXBwaW5nIHBhcnNlcnMgY2FuIHJlZ2lzdGVyIGEgcHJvbWlzZSB0aGF0LFxuICAgIHdoZW4gcmVzb2x2ZWQsIHdpbGwgc2NoZWR1bGUgYSBuZXcgcGFyc2UuIEl0IGlzIGNsZWFyZWQgd2hlblxuICAgIHRoZSBwYXJzZSB3b3JrZXIgcGlja3MgdXAgdGhlIHByb21pc2UuIEBpbnRlcm5hbFxuICAgICovXG4gICAgc2NoZWR1bGVPbikge1xuICAgICAgICB0aGlzLnBhcnNlciA9IHBhcnNlcjtcbiAgICAgICAgdGhpcy5zdGF0ZSA9IHN0YXRlO1xuICAgICAgICB0aGlzLmZyYWdtZW50cyA9IGZyYWdtZW50cztcbiAgICAgICAgdGhpcy50cmVlID0gdHJlZTtcbiAgICAgICAgdGhpcy50cmVlTGVuID0gdHJlZUxlbjtcbiAgICAgICAgdGhpcy52aWV3cG9ydCA9IHZpZXdwb3J0O1xuICAgICAgICB0aGlzLnNraXBwZWQgPSBza2lwcGVkO1xuICAgICAgICB0aGlzLnNjaGVkdWxlT24gPSBzY2hlZHVsZU9uO1xuICAgICAgICB0aGlzLnBhcnNlID0gbnVsbDtcbiAgICAgICAgLyoqXG4gICAgICAgIEBpbnRlcm5hbFxuICAgICAgICAqL1xuICAgICAgICB0aGlzLnRlbXBTa2lwcGVkID0gW107XG4gICAgfVxuICAgIC8qKlxuICAgIEBpbnRlcm5hbFxuICAgICovXG4gICAgc3RhdGljIGNyZWF0ZShwYXJzZXIsIHN0YXRlLCB2aWV3cG9ydCkge1xuICAgICAgICByZXR1cm4gbmV3IFBhcnNlQ29udGV4dChwYXJzZXIsIHN0YXRlLCBbXSwgVHJlZS5lbXB0eSwgMCwgdmlld3BvcnQsIFtdLCBudWxsKTtcbiAgICB9XG4gICAgc3RhcnRQYXJzZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucGFyc2VyLnN0YXJ0UGFyc2UobmV3IERvY0lucHV0KHRoaXMuc3RhdGUuZG9jKSwgdGhpcy5mcmFnbWVudHMpO1xuICAgIH1cbiAgICAvKipcbiAgICBAaW50ZXJuYWxcbiAgICAqL1xuICAgIHdvcmsodW50aWwsIHVwdG8pIHtcbiAgICAgICAgaWYgKHVwdG8gIT0gbnVsbCAmJiB1cHRvID49IHRoaXMuc3RhdGUuZG9jLmxlbmd0aClcbiAgICAgICAgICAgIHVwdG8gPSB1bmRlZmluZWQ7XG4gICAgICAgIGlmICh0aGlzLnRyZWUgIT0gVHJlZS5lbXB0eSAmJiB0aGlzLmlzRG9uZSh1cHRvICE9PSBudWxsICYmIHVwdG8gIT09IHZvaWQgMCA/IHVwdG8gOiB0aGlzLnN0YXRlLmRvYy5sZW5ndGgpKSB7XG4gICAgICAgICAgICB0aGlzLnRha2VUcmVlKCk7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy53aXRoQ29udGV4dCgoKSA9PiB7XG4gICAgICAgICAgICB2YXIgX2E7XG4gICAgICAgICAgICBpZiAodHlwZW9mIHVudGlsID09IFwibnVtYmVyXCIpIHtcbiAgICAgICAgICAgICAgICBsZXQgZW5kVGltZSA9IERhdGUubm93KCkgKyB1bnRpbDtcbiAgICAgICAgICAgICAgICB1bnRpbCA9ICgpID0+IERhdGUubm93KCkgPiBlbmRUaW1lO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCF0aGlzLnBhcnNlKVxuICAgICAgICAgICAgICAgIHRoaXMucGFyc2UgPSB0aGlzLnN0YXJ0UGFyc2UoKTtcbiAgICAgICAgICAgIGlmICh1cHRvICE9IG51bGwgJiYgKHRoaXMucGFyc2Uuc3RvcHBlZEF0ID09IG51bGwgfHwgdGhpcy5wYXJzZS5zdG9wcGVkQXQgPiB1cHRvKSAmJlxuICAgICAgICAgICAgICAgIHVwdG8gPCB0aGlzLnN0YXRlLmRvYy5sZW5ndGgpXG4gICAgICAgICAgICAgICAgdGhpcy5wYXJzZS5zdG9wQXQodXB0byk7XG4gICAgICAgICAgICBmb3IgKDs7KSB7XG4gICAgICAgICAgICAgICAgbGV0IGRvbmUgPSB0aGlzLnBhcnNlLmFkdmFuY2UoKTtcbiAgICAgICAgICAgICAgICBpZiAoZG9uZSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmZyYWdtZW50cyA9IHRoaXMud2l0aG91dFRlbXBTa2lwcGVkKFRyZWVGcmFnbWVudC5hZGRUcmVlKGRvbmUsIHRoaXMuZnJhZ21lbnRzLCB0aGlzLnBhcnNlLnN0b3BwZWRBdCAhPSBudWxsKSk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudHJlZUxlbiA9IChfYSA9IHRoaXMucGFyc2Uuc3RvcHBlZEF0KSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiB0aGlzLnN0YXRlLmRvYy5sZW5ndGg7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudHJlZSA9IGRvbmU7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGFyc2UgPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy50cmVlTGVuIDwgKHVwdG8gIT09IG51bGwgJiYgdXB0byAhPT0gdm9pZCAwID8gdXB0byA6IHRoaXMuc3RhdGUuZG9jLmxlbmd0aCkpXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBhcnNlID0gdGhpcy5zdGFydFBhcnNlKCk7XG4gICAgICAgICAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAodW50aWwoKSlcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgQGludGVybmFsXG4gICAgKi9cbiAgICB0YWtlVHJlZSgpIHtcbiAgICAgICAgbGV0IHBvcywgdHJlZTtcbiAgICAgICAgaWYgKHRoaXMucGFyc2UgJiYgKHBvcyA9IHRoaXMucGFyc2UucGFyc2VkUG9zKSA+PSB0aGlzLnRyZWVMZW4pIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcnNlLnN0b3BwZWRBdCA9PSBudWxsIHx8IHRoaXMucGFyc2Uuc3RvcHBlZEF0ID4gcG9zKVxuICAgICAgICAgICAgICAgIHRoaXMucGFyc2Uuc3RvcEF0KHBvcyk7XG4gICAgICAgICAgICB0aGlzLndpdGhDb250ZXh0KCgpID0+IHsgd2hpbGUgKCEodHJlZSA9IHRoaXMucGFyc2UuYWR2YW5jZSgpKSkgeyB9IH0pO1xuICAgICAgICAgICAgdGhpcy50cmVlTGVuID0gcG9zO1xuICAgICAgICAgICAgdGhpcy50cmVlID0gdHJlZTtcbiAgICAgICAgICAgIHRoaXMuZnJhZ21lbnRzID0gdGhpcy53aXRob3V0VGVtcFNraXBwZWQoVHJlZUZyYWdtZW50LmFkZFRyZWUodGhpcy50cmVlLCB0aGlzLmZyYWdtZW50cywgdHJ1ZSkpO1xuICAgICAgICAgICAgdGhpcy5wYXJzZSA9IG51bGw7XG4gICAgICAgIH1cbiAgICB9XG4gICAgd2l0aENvbnRleHQoZikge1xuICAgICAgICBsZXQgcHJldiA9IGN1cnJlbnRDb250ZXh0O1xuICAgICAgICBjdXJyZW50Q29udGV4dCA9IHRoaXM7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICByZXR1cm4gZigpO1xuICAgICAgICB9XG4gICAgICAgIGZpbmFsbHkge1xuICAgICAgICAgICAgY3VycmVudENvbnRleHQgPSBwcmV2O1xuICAgICAgICB9XG4gICAgfVxuICAgIHdpdGhvdXRUZW1wU2tpcHBlZChmcmFnbWVudHMpIHtcbiAgICAgICAgZm9yIChsZXQgcjsgciA9IHRoaXMudGVtcFNraXBwZWQucG9wKCk7KVxuICAgICAgICAgICAgZnJhZ21lbnRzID0gY3V0RnJhZ21lbnRzKGZyYWdtZW50cywgci5mcm9tLCByLnRvKTtcbiAgICAgICAgcmV0dXJuIGZyYWdtZW50cztcbiAgICB9XG4gICAgLyoqXG4gICAgQGludGVybmFsXG4gICAgKi9cbiAgICBjaGFuZ2VzKGNoYW5nZXMsIG5ld1N0YXRlKSB7XG4gICAgICAgIGxldCB7IGZyYWdtZW50cywgdHJlZSwgdHJlZUxlbiwgdmlld3BvcnQsIHNraXBwZWQgfSA9IHRoaXM7XG4gICAgICAgIHRoaXMudGFrZVRyZWUoKTtcbiAgICAgICAgaWYgKCFjaGFuZ2VzLmVtcHR5KSB7XG4gICAgICAgICAgICBsZXQgcmFuZ2VzID0gW107XG4gICAgICAgICAgICBjaGFuZ2VzLml0ZXJDaGFuZ2VkUmFuZ2VzKChmcm9tQSwgdG9BLCBmcm9tQiwgdG9CKSA9PiByYW5nZXMucHVzaCh7IGZyb21BLCB0b0EsIGZyb21CLCB0b0IgfSkpO1xuICAgICAgICAgICAgZnJhZ21lbnRzID0gVHJlZUZyYWdtZW50LmFwcGx5Q2hhbmdlcyhmcmFnbWVudHMsIHJhbmdlcyk7XG4gICAgICAgICAgICB0cmVlID0gVHJlZS5lbXB0eTtcbiAgICAgICAgICAgIHRyZWVMZW4gPSAwO1xuICAgICAgICAgICAgdmlld3BvcnQgPSB7IGZyb206IGNoYW5nZXMubWFwUG9zKHZpZXdwb3J0LmZyb20sIC0xKSwgdG86IGNoYW5nZXMubWFwUG9zKHZpZXdwb3J0LnRvLCAxKSB9O1xuICAgICAgICAgICAgaWYgKHRoaXMuc2tpcHBlZC5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICBza2lwcGVkID0gW107XG4gICAgICAgICAgICAgICAgZm9yIChsZXQgciBvZiB0aGlzLnNraXBwZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGZyb20gPSBjaGFuZ2VzLm1hcFBvcyhyLmZyb20sIDEpLCB0byA9IGNoYW5nZXMubWFwUG9zKHIudG8sIC0xKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGZyb20gPCB0bylcbiAgICAgICAgICAgICAgICAgICAgICAgIHNraXBwZWQucHVzaCh7IGZyb20sIHRvIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbmV3IFBhcnNlQ29udGV4dCh0aGlzLnBhcnNlciwgbmV3U3RhdGUsIGZyYWdtZW50cywgdHJlZSwgdHJlZUxlbiwgdmlld3BvcnQsIHNraXBwZWQsIHRoaXMuc2NoZWR1bGVPbik7XG4gICAgfVxuICAgIC8qKlxuICAgIEBpbnRlcm5hbFxuICAgICovXG4gICAgdXBkYXRlVmlld3BvcnQodmlld3BvcnQpIHtcbiAgICAgICAgaWYgKHRoaXMudmlld3BvcnQuZnJvbSA9PSB2aWV3cG9ydC5mcm9tICYmIHRoaXMudmlld3BvcnQudG8gPT0gdmlld3BvcnQudG8pXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIHRoaXMudmlld3BvcnQgPSB2aWV3cG9ydDtcbiAgICAgICAgbGV0IHN0YXJ0TGVuID0gdGhpcy5za2lwcGVkLmxlbmd0aDtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLnNraXBwZWQubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGxldCB7IGZyb20sIHRvIH0gPSB0aGlzLnNraXBwZWRbaV07XG4gICAgICAgICAgICBpZiAoZnJvbSA8IHZpZXdwb3J0LnRvICYmIHRvID4gdmlld3BvcnQuZnJvbSkge1xuICAgICAgICAgICAgICAgIHRoaXMuZnJhZ21lbnRzID0gY3V0RnJhZ21lbnRzKHRoaXMuZnJhZ21lbnRzLCBmcm9tLCB0byk7XG4gICAgICAgICAgICAgICAgdGhpcy5za2lwcGVkLnNwbGljZShpLS0sIDEpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLnNraXBwZWQubGVuZ3RoID49IHN0YXJ0TGVuKVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB0aGlzLnJlc2V0KCk7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICAvKipcbiAgICBAaW50ZXJuYWxcbiAgICAqL1xuICAgIHJlc2V0KCkge1xuICAgICAgICBpZiAodGhpcy5wYXJzZSkge1xuICAgICAgICAgICAgdGhpcy50YWtlVHJlZSgpO1xuICAgICAgICAgICAgdGhpcy5wYXJzZSA9IG51bGw7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgTm90aWZ5IHRoZSBwYXJzZSBzY2hlZHVsZXIgdGhhdCB0aGUgZ2l2ZW4gcmVnaW9uIHdhcyBza2lwcGVkXG4gICAgYmVjYXVzZSBpdCB3YXNuJ3QgaW4gdmlldywgYW5kIHRoZSBwYXJzZSBzaG91bGQgYmUgcmVzdGFydGVkXG4gICAgd2hlbiBpdCBjb21lcyBpbnRvIHZpZXcuXG4gICAgKi9cbiAgICBza2lwVW50aWxJblZpZXcoZnJvbSwgdG8pIHtcbiAgICAgICAgdGhpcy5za2lwcGVkLnB1c2goeyBmcm9tLCB0byB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgUmV0dXJucyBhIHBhcnNlciBpbnRlbmRlZCB0byBiZSB1c2VkIGFzIHBsYWNlaG9sZGVyIHdoZW5cbiAgICBhc3luY2hyb25vdXNseSBsb2FkaW5nIGEgbmVzdGVkIHBhcnNlci4gSXQnbGwgc2tpcCBpdHMgaW5wdXQgYW5kXG4gICAgbWFyayBpdCBhcyBub3QtcmVhbGx5LXBhcnNlZCwgc28gdGhhdCB0aGUgbmV4dCB1cGRhdGUgd2lsbCBwYXJzZVxuICAgIGl0IGFnYWluLlxuICAgIFxuICAgIFdoZW4gYHVudGlsYCBpcyBnaXZlbiwgYSByZXBhcnNlIHdpbGwgYmUgc2NoZWR1bGVkIHdoZW4gdGhhdFxuICAgIHByb21pc2UgcmVzb2x2ZXMuXG4gICAgKi9cbiAgICBzdGF0aWMgZ2V0U2tpcHBpbmdQYXJzZXIodW50aWwpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBjbGFzcyBleHRlbmRzIFBhcnNlciB7XG4gICAgICAgICAgICBjcmVhdGVQYXJzZShpbnB1dCwgZnJhZ21lbnRzLCByYW5nZXMpIHtcbiAgICAgICAgICAgICAgICBsZXQgZnJvbSA9IHJhbmdlc1swXS5mcm9tLCB0byA9IHJhbmdlc1tyYW5nZXMubGVuZ3RoIC0gMV0udG87XG4gICAgICAgICAgICAgICAgbGV0IHBhcnNlciA9IHtcbiAgICAgICAgICAgICAgICAgICAgcGFyc2VkUG9zOiBmcm9tLFxuICAgICAgICAgICAgICAgICAgICBhZHZhbmNlKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGN4ID0gY3VycmVudENvbnRleHQ7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoY3gpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCByIG9mIHJhbmdlcylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3gudGVtcFNraXBwZWQucHVzaChyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodW50aWwpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN4LnNjaGVkdWxlT24gPSBjeC5zY2hlZHVsZU9uID8gUHJvbWlzZS5hbGwoW2N4LnNjaGVkdWxlT24sIHVudGlsXSkgOiB1bnRpbDtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGFyc2VkUG9zID0gdG87XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFRyZWUoTm9kZVR5cGUubm9uZSwgW10sIFtdLCB0byAtIGZyb20pO1xuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBzdG9wcGVkQXQ6IG51bGwsXG4gICAgICAgICAgICAgICAgICAgIHN0b3BBdCgpIHsgfVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgcmV0dXJuIHBhcnNlcjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICB9XG4gICAgLyoqXG4gICAgQGludGVybmFsXG4gICAgKi9cbiAgICBpc0RvbmUodXB0bykge1xuICAgICAgICB1cHRvID0gTWF0aC5taW4odXB0bywgdGhpcy5zdGF0ZS5kb2MubGVuZ3RoKTtcbiAgICAgICAgbGV0IGZyYWdzID0gdGhpcy5mcmFnbWVudHM7XG4gICAgICAgIHJldHVybiB0aGlzLnRyZWVMZW4gPj0gdXB0byAmJiBmcmFncy5sZW5ndGggJiYgZnJhZ3NbMF0uZnJvbSA9PSAwICYmIGZyYWdzWzBdLnRvID49IHVwdG87XG4gICAgfVxuICAgIC8qKlxuICAgIEdldCB0aGUgY29udGV4dCBmb3IgdGhlIGN1cnJlbnQgcGFyc2UsIG9yIGBudWxsYCBpZiBubyBlZGl0b3JcbiAgICBwYXJzZSBpcyBpbiBwcm9ncmVzcy5cbiAgICAqL1xuICAgIHN0YXRpYyBnZXQoKSB7IHJldHVybiBjdXJyZW50Q29udGV4dDsgfVxufVxuZnVuY3Rpb24gY3V0RnJhZ21lbnRzKGZyYWdtZW50cywgZnJvbSwgdG8pIHtcbiAgICByZXR1cm4gVHJlZUZyYWdtZW50LmFwcGx5Q2hhbmdlcyhmcmFnbWVudHMsIFt7IGZyb21BOiBmcm9tLCB0b0E6IHRvLCBmcm9tQjogZnJvbSwgdG9COiB0byB9XSk7XG59XG5jbGFzcyBMYW5ndWFnZVN0YXRlIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAvLyBBIG11dGFibGUgcGFyc2Ugc3RhdGUgdGhhdCBpcyB1c2VkIHRvIHByZXNlcnZlIHdvcmsgZG9uZSBkdXJpbmdcbiAgICAvLyB0aGUgbGlmZXRpbWUgb2YgYSBzdGF0ZSB3aGVuIG1vdmluZyB0byB0aGUgbmV4dCBzdGF0ZS5cbiAgICBjb250ZXh0KSB7XG4gICAgICAgIHRoaXMuY29udGV4dCA9IGNvbnRleHQ7XG4gICAgICAgIHRoaXMudHJlZSA9IGNvbnRleHQudHJlZTtcbiAgICB9XG4gICAgYXBwbHkodHIpIHtcbiAgICAgICAgaWYgKCF0ci5kb2NDaGFuZ2VkICYmIHRoaXMudHJlZSA9PSB0aGlzLmNvbnRleHQudHJlZSlcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICBsZXQgbmV3Q3ggPSB0aGlzLmNvbnRleHQuY2hhbmdlcyh0ci5jaGFuZ2VzLCB0ci5zdGF0ZSk7XG4gICAgICAgIC8vIElmIHRoZSBwcmV2aW91cyBwYXJzZSB3YXNuJ3QgZG9uZSwgZ28gZm9yd2FyZCBvbmx5IHVwIHRvIGl0c1xuICAgICAgICAvLyBlbmQgcG9zaXRpb24gb3IgdGhlIGVuZCBvZiB0aGUgdmlld3BvcnQsIHRvIGF2b2lkIHNsb3dpbmcgZG93blxuICAgICAgICAvLyBzdGF0ZSB1cGRhdGVzIHdpdGggcGFyc2Ugd29yayBiZXlvbmQgdGhlIHZpZXdwb3J0LlxuICAgICAgICBsZXQgdXB0byA9IHRoaXMuY29udGV4dC50cmVlTGVuID09IHRyLnN0YXJ0U3RhdGUuZG9jLmxlbmd0aCA/IHVuZGVmaW5lZFxuICAgICAgICAgICAgOiBNYXRoLm1heCh0ci5jaGFuZ2VzLm1hcFBvcyh0aGlzLmNvbnRleHQudHJlZUxlbiksIG5ld0N4LnZpZXdwb3J0LnRvKTtcbiAgICAgICAgaWYgKCFuZXdDeC53b3JrKDIwIC8qIFdvcmsuQXBwbHkgKi8sIHVwdG8pKVxuICAgICAgICAgICAgbmV3Q3gudGFrZVRyZWUoKTtcbiAgICAgICAgcmV0dXJuIG5ldyBMYW5ndWFnZVN0YXRlKG5ld0N4KTtcbiAgICB9XG4gICAgc3RhdGljIGluaXQoc3RhdGUpIHtcbiAgICAgICAgbGV0IHZwVG8gPSBNYXRoLm1pbigzMDAwIC8qIFdvcmsuSW5pdFZpZXdwb3J0ICovLCBzdGF0ZS5kb2MubGVuZ3RoKTtcbiAgICAgICAgbGV0IHBhcnNlU3RhdGUgPSBQYXJzZUNvbnRleHQuY3JlYXRlKHN0YXRlLmZhY2V0KGxhbmd1YWdlKS5wYXJzZXIsIHN0YXRlLCB7IGZyb206IDAsIHRvOiB2cFRvIH0pO1xuICAgICAgICBpZiAoIXBhcnNlU3RhdGUud29yaygyMCAvKiBXb3JrLkFwcGx5ICovLCB2cFRvKSlcbiAgICAgICAgICAgIHBhcnNlU3RhdGUudGFrZVRyZWUoKTtcbiAgICAgICAgcmV0dXJuIG5ldyBMYW5ndWFnZVN0YXRlKHBhcnNlU3RhdGUpO1xuICAgIH1cbn1cbkxhbmd1YWdlLnN0YXRlID0gLypAX19QVVJFX18qL1N0YXRlRmllbGQuZGVmaW5lKHtcbiAgICBjcmVhdGU6IExhbmd1YWdlU3RhdGUuaW5pdCxcbiAgICB1cGRhdGUodmFsdWUsIHRyKSB7XG4gICAgICAgIGZvciAobGV0IGUgb2YgdHIuZWZmZWN0cylcbiAgICAgICAgICAgIGlmIChlLmlzKExhbmd1YWdlLnNldFN0YXRlKSlcbiAgICAgICAgICAgICAgICByZXR1cm4gZS52YWx1ZTtcbiAgICAgICAgaWYgKHRyLnN0YXJ0U3RhdGUuZmFjZXQobGFuZ3VhZ2UpICE9IHRyLnN0YXRlLmZhY2V0KGxhbmd1YWdlKSlcbiAgICAgICAgICAgIHJldHVybiBMYW5ndWFnZVN0YXRlLmluaXQodHIuc3RhdGUpO1xuICAgICAgICByZXR1cm4gdmFsdWUuYXBwbHkodHIpO1xuICAgIH1cbn0pO1xubGV0IHJlcXVlc3RJZGxlID0gKGNhbGxiYWNrKSA9PiB7XG4gICAgbGV0IHRpbWVvdXQgPSBzZXRUaW1lb3V0KCgpID0+IGNhbGxiYWNrKCksIDUwMCAvKiBXb3JrLk1heFBhdXNlICovKTtcbiAgICByZXR1cm4gKCkgPT4gY2xlYXJUaW1lb3V0KHRpbWVvdXQpO1xufTtcbmlmICh0eXBlb2YgcmVxdWVzdElkbGVDYWxsYmFjayAhPSBcInVuZGVmaW5lZFwiKVxuICAgIHJlcXVlc3RJZGxlID0gKGNhbGxiYWNrKSA9PiB7XG4gICAgICAgIGxldCBpZGxlID0gLTEsIHRpbWVvdXQgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgIGlkbGUgPSByZXF1ZXN0SWRsZUNhbGxiYWNrKGNhbGxiYWNrLCB7IHRpbWVvdXQ6IDUwMCAvKiBXb3JrLk1heFBhdXNlICovIC0gMTAwIC8qIFdvcmsuTWluUGF1c2UgKi8gfSk7XG4gICAgICAgIH0sIDEwMCAvKiBXb3JrLk1pblBhdXNlICovKTtcbiAgICAgICAgcmV0dXJuICgpID0+IGlkbGUgPCAwID8gY2xlYXJUaW1lb3V0KHRpbWVvdXQpIDogY2FuY2VsSWRsZUNhbGxiYWNrKGlkbGUpO1xuICAgIH07XG5jb25zdCBpc0lucHV0UGVuZGluZyA9IHR5cGVvZiBuYXZpZ2F0b3IgIT0gXCJ1bmRlZmluZWRcIiAmJiAoKF9hID0gbmF2aWdhdG9yLnNjaGVkdWxpbmcpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5pc0lucHV0UGVuZGluZylcbiAgICA/ICgpID0+IG5hdmlnYXRvci5zY2hlZHVsaW5nLmlzSW5wdXRQZW5kaW5nKCkgOiBudWxsO1xuY29uc3QgcGFyc2VXb3JrZXIgPSAvKkBfX1BVUkVfXyovVmlld1BsdWdpbi5mcm9tQ2xhc3MoY2xhc3MgUGFyc2VXb3JrZXIge1xuICAgIGNvbnN0cnVjdG9yKHZpZXcpIHtcbiAgICAgICAgdGhpcy52aWV3ID0gdmlldztcbiAgICAgICAgdGhpcy53b3JraW5nID0gbnVsbDtcbiAgICAgICAgdGhpcy53b3JrU2NoZWR1bGVkID0gMDtcbiAgICAgICAgLy8gRW5kIG9mIHRoZSBjdXJyZW50IHRpbWUgY2h1bmtcbiAgICAgICAgdGhpcy5jaHVua0VuZCA9IC0xO1xuICAgICAgICAvLyBNaWxsaXNlY29uZHMgb2YgYnVkZ2V0IGxlZnQgZm9yIHRoaXMgY2h1bmtcbiAgICAgICAgdGhpcy5jaHVua0J1ZGdldCA9IC0xO1xuICAgICAgICB0aGlzLndvcmsgPSB0aGlzLndvcmsuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5zY2hlZHVsZVdvcmsoKTtcbiAgICB9XG4gICAgdXBkYXRlKHVwZGF0ZSkge1xuICAgICAgICBsZXQgY3ggPSB0aGlzLnZpZXcuc3RhdGUuZmllbGQoTGFuZ3VhZ2Uuc3RhdGUpLmNvbnRleHQ7XG4gICAgICAgIGlmIChjeC51cGRhdGVWaWV3cG9ydCh1cGRhdGUudmlldy52aWV3cG9ydCkgfHwgdGhpcy52aWV3LnZpZXdwb3J0LnRvID4gY3gudHJlZUxlbilcbiAgICAgICAgICAgIHRoaXMuc2NoZWR1bGVXb3JrKCk7XG4gICAgICAgIGlmICh1cGRhdGUuZG9jQ2hhbmdlZCB8fCB1cGRhdGUuc2VsZWN0aW9uU2V0KSB7XG4gICAgICAgICAgICBpZiAodGhpcy52aWV3Lmhhc0ZvY3VzKVxuICAgICAgICAgICAgICAgIHRoaXMuY2h1bmtCdWRnZXQgKz0gNTAgLyogV29yay5DaGFuZ2VCb251cyAqLztcbiAgICAgICAgICAgIHRoaXMuc2NoZWR1bGVXb3JrKCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5jaGVja0FzeW5jU2NoZWR1bGUoY3gpO1xuICAgIH1cbiAgICBzY2hlZHVsZVdvcmsoKSB7XG4gICAgICAgIGlmICh0aGlzLndvcmtpbmcpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIGxldCB7IHN0YXRlIH0gPSB0aGlzLnZpZXcsIGZpZWxkID0gc3RhdGUuZmllbGQoTGFuZ3VhZ2Uuc3RhdGUpO1xuICAgICAgICBpZiAoZmllbGQudHJlZSAhPSBmaWVsZC5jb250ZXh0LnRyZWUgfHwgIWZpZWxkLmNvbnRleHQuaXNEb25lKHN0YXRlLmRvYy5sZW5ndGgpKVxuICAgICAgICAgICAgdGhpcy53b3JraW5nID0gcmVxdWVzdElkbGUodGhpcy53b3JrKTtcbiAgICB9XG4gICAgd29yayhkZWFkbGluZSkge1xuICAgICAgICB0aGlzLndvcmtpbmcgPSBudWxsO1xuICAgICAgICBsZXQgbm93ID0gRGF0ZS5ub3coKTtcbiAgICAgICAgaWYgKHRoaXMuY2h1bmtFbmQgPCBub3cgJiYgKHRoaXMuY2h1bmtFbmQgPCAwIHx8IHRoaXMudmlldy5oYXNGb2N1cykpIHsgLy8gU3RhcnQgYSBuZXcgY2h1bmtcbiAgICAgICAgICAgIHRoaXMuY2h1bmtFbmQgPSBub3cgKyAzMDAwMCAvKiBXb3JrLkNodW5rVGltZSAqLztcbiAgICAgICAgICAgIHRoaXMuY2h1bmtCdWRnZXQgPSAzMDAwIC8qIFdvcmsuQ2h1bmtCdWRnZXQgKi87XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuY2h1bmtCdWRnZXQgPD0gMClcbiAgICAgICAgICAgIHJldHVybjsgLy8gTm8gbW9yZSBidWRnZXRcbiAgICAgICAgbGV0IHsgc3RhdGUsIHZpZXdwb3J0OiB7IHRvOiB2cFRvIH0gfSA9IHRoaXMudmlldywgZmllbGQgPSBzdGF0ZS5maWVsZChMYW5ndWFnZS5zdGF0ZSk7XG4gICAgICAgIGlmIChmaWVsZC50cmVlID09IGZpZWxkLmNvbnRleHQudHJlZSAmJiBmaWVsZC5jb250ZXh0LmlzRG9uZSh2cFRvICsgMTAwMDAwIC8qIFdvcmsuTWF4UGFyc2VBaGVhZCAqLykpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIGxldCBlbmRUaW1lID0gRGF0ZS5ub3coKSArIE1hdGgubWluKHRoaXMuY2h1bmtCdWRnZXQsIDEwMCAvKiBXb3JrLlNsaWNlICovLCBkZWFkbGluZSAmJiAhaXNJbnB1dFBlbmRpbmcgPyBNYXRoLm1heCgyNSAvKiBXb3JrLk1pblNsaWNlICovLCBkZWFkbGluZS50aW1lUmVtYWluaW5nKCkgLSA1KSA6IDFlOSk7XG4gICAgICAgIGxldCB2aWV3cG9ydEZpcnN0ID0gZmllbGQuY29udGV4dC50cmVlTGVuIDwgdnBUbyAmJiBzdGF0ZS5kb2MubGVuZ3RoID4gdnBUbyArIDEwMDA7XG4gICAgICAgIGxldCBkb25lID0gZmllbGQuY29udGV4dC53b3JrKCgpID0+IHtcbiAgICAgICAgICAgIHJldHVybiBpc0lucHV0UGVuZGluZyAmJiBpc0lucHV0UGVuZGluZygpIHx8IERhdGUubm93KCkgPiBlbmRUaW1lO1xuICAgICAgICB9LCB2cFRvICsgKHZpZXdwb3J0Rmlyc3QgPyAwIDogMTAwMDAwIC8qIFdvcmsuTWF4UGFyc2VBaGVhZCAqLykpO1xuICAgICAgICB0aGlzLmNodW5rQnVkZ2V0IC09IERhdGUubm93KCkgLSBub3c7XG4gICAgICAgIGlmIChkb25lIHx8IHRoaXMuY2h1bmtCdWRnZXQgPD0gMCkge1xuICAgICAgICAgICAgZmllbGQuY29udGV4dC50YWtlVHJlZSgpO1xuICAgICAgICAgICAgdGhpcy52aWV3LmRpc3BhdGNoKHsgZWZmZWN0czogTGFuZ3VhZ2Uuc2V0U3RhdGUub2YobmV3IExhbmd1YWdlU3RhdGUoZmllbGQuY29udGV4dCkpIH0pO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmNodW5rQnVkZ2V0ID4gMCAmJiAhKGRvbmUgJiYgIXZpZXdwb3J0Rmlyc3QpKVxuICAgICAgICAgICAgdGhpcy5zY2hlZHVsZVdvcmsoKTtcbiAgICAgICAgdGhpcy5jaGVja0FzeW5jU2NoZWR1bGUoZmllbGQuY29udGV4dCk7XG4gICAgfVxuICAgIGNoZWNrQXN5bmNTY2hlZHVsZShjeCkge1xuICAgICAgICBpZiAoY3guc2NoZWR1bGVPbikge1xuICAgICAgICAgICAgdGhpcy53b3JrU2NoZWR1bGVkKys7XG4gICAgICAgICAgICBjeC5zY2hlZHVsZU9uXG4gICAgICAgICAgICAgICAgLnRoZW4oKCkgPT4gdGhpcy5zY2hlZHVsZVdvcmsoKSlcbiAgICAgICAgICAgICAgICAuY2F0Y2goZXJyID0+IGxvZ0V4Y2VwdGlvbih0aGlzLnZpZXcuc3RhdGUsIGVycikpXG4gICAgICAgICAgICAgICAgLnRoZW4oKCkgPT4gdGhpcy53b3JrU2NoZWR1bGVkLS0pO1xuICAgICAgICAgICAgY3guc2NoZWR1bGVPbiA9IG51bGw7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZGVzdHJveSgpIHtcbiAgICAgICAgaWYgKHRoaXMud29ya2luZylcbiAgICAgICAgICAgIHRoaXMud29ya2luZygpO1xuICAgIH1cbiAgICBpc1dvcmtpbmcoKSB7XG4gICAgICAgIHJldHVybiAhISh0aGlzLndvcmtpbmcgfHwgdGhpcy53b3JrU2NoZWR1bGVkID4gMCk7XG4gICAgfVxufSwge1xuICAgIGV2ZW50SGFuZGxlcnM6IHsgZm9jdXMoKSB7IHRoaXMuc2NoZWR1bGVXb3JrKCk7IH0gfVxufSk7XG4vKipcblRoZSBmYWNldCB1c2VkIHRvIGFzc29jaWF0ZSBhIGxhbmd1YWdlIHdpdGggYW4gZWRpdG9yIHN0YXRlLiBVc2VkXG5ieSBgTGFuZ3VhZ2VgIG9iamVjdCdzIGBleHRlbnNpb25gIHByb3BlcnR5IChzbyB5b3UgZG9uJ3QgbmVlZCB0b1xubWFudWFsbHkgd3JhcCB5b3VyIGxhbmd1YWdlcyBpbiB0aGlzKS4gQ2FuIGJlIHVzZWQgdG8gYWNjZXNzIHRoZVxuY3VycmVudCBsYW5ndWFnZSBvbiBhIHN0YXRlLlxuKi9cbmNvbnN0IGxhbmd1YWdlID0gLypAX19QVVJFX18qL0ZhY2V0LmRlZmluZSh7XG4gICAgY29tYmluZShsYW5ndWFnZXMpIHsgcmV0dXJuIGxhbmd1YWdlcy5sZW5ndGggPyBsYW5ndWFnZXNbMF0gOiBudWxsOyB9LFxuICAgIGVuYWJsZXM6IGxhbmd1YWdlID0+IFtcbiAgICAgICAgTGFuZ3VhZ2Uuc3RhdGUsXG4gICAgICAgIHBhcnNlV29ya2VyLFxuICAgICAgICBFZGl0b3JWaWV3LmNvbnRlbnRBdHRyaWJ1dGVzLmNvbXB1dGUoW2xhbmd1YWdlXSwgc3RhdGUgPT4ge1xuICAgICAgICAgICAgbGV0IGxhbmcgPSBzdGF0ZS5mYWNldChsYW5ndWFnZSk7XG4gICAgICAgICAgICByZXR1cm4gbGFuZyAmJiBsYW5nLm5hbWUgPyB7IFwiZGF0YS1sYW5ndWFnZVwiOiBsYW5nLm5hbWUgfSA6IHt9O1xuICAgICAgICB9KVxuICAgIF1cbn0pO1xuLyoqXG5UaGlzIGNsYXNzIGJ1bmRsZXMgYSBbbGFuZ3VhZ2VdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jbGFuZ3VhZ2UuTGFuZ3VhZ2UpIHdpdGggYW5cbm9wdGlvbmFsIHNldCBvZiBzdXBwb3J0aW5nIGV4dGVuc2lvbnMuIExhbmd1YWdlIHBhY2thZ2VzIGFyZVxuZW5jb3VyYWdlZCB0byBleHBvcnQgYSBmdW5jdGlvbiB0aGF0IG9wdGlvbmFsbHkgdGFrZXMgYVxuY29uZmlndXJhdGlvbiBvYmplY3QgYW5kIHJldHVybnMgYSBgTGFuZ3VhZ2VTdXBwb3J0YCBpbnN0YW5jZSwgYXNcbnRoZSBtYWluIHdheSBmb3IgY2xpZW50IGNvZGUgdG8gdXNlIHRoZSBwYWNrYWdlLlxuKi9cbmNsYXNzIExhbmd1YWdlU3VwcG9ydCB7XG4gICAgLyoqXG4gICAgQ3JlYXRlIGEgbGFuZ3VhZ2Ugc3VwcG9ydCBvYmplY3QuXG4gICAgKi9cbiAgICBjb25zdHJ1Y3RvcihcbiAgICAvKipcbiAgICBUaGUgbGFuZ3VhZ2Ugb2JqZWN0LlxuICAgICovXG4gICAgbGFuZ3VhZ2UsIFxuICAgIC8qKlxuICAgIEFuIG9wdGlvbmFsIHNldCBvZiBzdXBwb3J0aW5nIGV4dGVuc2lvbnMuIFdoZW4gbmVzdGluZyBhXG4gICAgbGFuZ3VhZ2UgaW4gYW5vdGhlciBsYW5ndWFnZSwgdGhlIG91dGVyIGxhbmd1YWdlIGlzIGVuY291cmFnZWRcbiAgICB0byBpbmNsdWRlIHRoZSBzdXBwb3J0aW5nIGV4dGVuc2lvbnMgZm9yIGl0cyBpbm5lciBsYW5ndWFnZXNcbiAgICBpbiBpdHMgb3duIHNldCBvZiBzdXBwb3J0IGV4dGVuc2lvbnMuXG4gICAgKi9cbiAgICBzdXBwb3J0ID0gW10pIHtcbiAgICAgICAgdGhpcy5sYW5ndWFnZSA9IGxhbmd1YWdlO1xuICAgICAgICB0aGlzLnN1cHBvcnQgPSBzdXBwb3J0O1xuICAgICAgICB0aGlzLmV4dGVuc2lvbiA9IFtsYW5ndWFnZSwgc3VwcG9ydF07XG4gICAgfVxufVxuLyoqXG5MYW5ndWFnZSBkZXNjcmlwdGlvbnMgYXJlIHVzZWQgdG8gc3RvcmUgbWV0YWRhdGEgYWJvdXQgbGFuZ3VhZ2VzXG5hbmQgdG8gZHluYW1pY2FsbHkgbG9hZCB0aGVtLiBUaGVpciBtYWluIHJvbGUgaXMgZmluZGluZyB0aGVcbmFwcHJvcHJpYXRlIGxhbmd1YWdlIGZvciBhIGZpbGVuYW1lIG9yIGR5bmFtaWNhbGx5IGxvYWRpbmcgbmVzdGVkXG5wYXJzZXJzLlxuKi9cbmNsYXNzIExhbmd1YWdlRGVzY3JpcHRpb24ge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8qKlxuICAgIFRoZSBuYW1lIG9mIHRoaXMgbGFuZ3VhZ2UuXG4gICAgKi9cbiAgICBuYW1lLCBcbiAgICAvKipcbiAgICBBbHRlcm5hdGl2ZSBuYW1lcyBmb3IgdGhlIG1vZGUgKGxvd2VyY2FzZWQsIGluY2x1ZGVzIGB0aGlzLm5hbWVgKS5cbiAgICAqL1xuICAgIGFsaWFzLCBcbiAgICAvKipcbiAgICBGaWxlIGV4dGVuc2lvbnMgYXNzb2NpYXRlZCB3aXRoIHRoaXMgbGFuZ3VhZ2UuXG4gICAgKi9cbiAgICBleHRlbnNpb25zLCBcbiAgICAvKipcbiAgICBPcHRpb25hbCBmaWxlbmFtZSBwYXR0ZXJuIHRoYXQgc2hvdWxkIGJlIGFzc29jaWF0ZWQgd2l0aCB0aGlzXG4gICAgbGFuZ3VhZ2UuXG4gICAgKi9cbiAgICBmaWxlbmFtZSwgbG9hZEZ1bmMsIFxuICAgIC8qKlxuICAgIElmIHRoZSBsYW5ndWFnZSBoYXMgYmVlbiBsb2FkZWQsIHRoaXMgd2lsbCBob2xkIGl0cyB2YWx1ZS5cbiAgICAqL1xuICAgIHN1cHBvcnQgPSB1bmRlZmluZWQpIHtcbiAgICAgICAgdGhpcy5uYW1lID0gbmFtZTtcbiAgICAgICAgdGhpcy5hbGlhcyA9IGFsaWFzO1xuICAgICAgICB0aGlzLmV4dGVuc2lvbnMgPSBleHRlbnNpb25zO1xuICAgICAgICB0aGlzLmZpbGVuYW1lID0gZmlsZW5hbWU7XG4gICAgICAgIHRoaXMubG9hZEZ1bmMgPSBsb2FkRnVuYztcbiAgICAgICAgdGhpcy5zdXBwb3J0ID0gc3VwcG9ydDtcbiAgICAgICAgdGhpcy5sb2FkaW5nID0gbnVsbDtcbiAgICB9XG4gICAgLyoqXG4gICAgU3RhcnQgbG9hZGluZyB0aGUgdGhlIGxhbmd1YWdlLiBXaWxsIHJldHVybiBhIHByb21pc2UgdGhhdFxuICAgIHJlc29sdmVzIHRvIGEgW2BMYW5ndWFnZVN1cHBvcnRgXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI2xhbmd1YWdlLkxhbmd1YWdlU3VwcG9ydClcbiAgICBvYmplY3Qgd2hlbiB0aGUgbGFuZ3VhZ2Ugc3VjY2Vzc2Z1bGx5IGxvYWRzLlxuICAgICovXG4gICAgbG9hZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubG9hZGluZyB8fCAodGhpcy5sb2FkaW5nID0gdGhpcy5sb2FkRnVuYygpLnRoZW4oc3VwcG9ydCA9PiB0aGlzLnN1cHBvcnQgPSBzdXBwb3J0LCBlcnIgPT4geyB0aGlzLmxvYWRpbmcgPSBudWxsOyB0aHJvdyBlcnI7IH0pKTtcbiAgICB9XG4gICAgLyoqXG4gICAgQ3JlYXRlIGEgbGFuZ3VhZ2UgZGVzY3JpcHRpb24uXG4gICAgKi9cbiAgICBzdGF0aWMgb2Yoc3BlYykge1xuICAgICAgICBsZXQgeyBsb2FkLCBzdXBwb3J0IH0gPSBzcGVjO1xuICAgICAgICBpZiAoIWxvYWQpIHtcbiAgICAgICAgICAgIGlmICghc3VwcG9ydClcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcihcIk11c3QgcGFzcyBlaXRoZXIgJ2xvYWQnIG9yICdzdXBwb3J0JyB0byBMYW5ndWFnZURlc2NyaXB0aW9uLm9mXCIpO1xuICAgICAgICAgICAgbG9hZCA9ICgpID0+IFByb21pc2UucmVzb2x2ZShzdXBwb3J0KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbmV3IExhbmd1YWdlRGVzY3JpcHRpb24oc3BlYy5uYW1lLCAoc3BlYy5hbGlhcyB8fCBbXSkuY29uY2F0KHNwZWMubmFtZSkubWFwKHMgPT4gcy50b0xvd2VyQ2FzZSgpKSwgc3BlYy5leHRlbnNpb25zIHx8IFtdLCBzcGVjLmZpbGVuYW1lLCBsb2FkLCBzdXBwb3J0KTtcbiAgICB9XG4gICAgLyoqXG4gICAgTG9vayBmb3IgYSBsYW5ndWFnZSBpbiB0aGUgZ2l2ZW4gYXJyYXkgb2YgZGVzY3JpcHRpb25zIHRoYXRcbiAgICBtYXRjaGVzIHRoZSBmaWxlbmFtZS4gV2lsbCBmaXJzdCBtYXRjaFxuICAgIFtgZmlsZW5hbWVgXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI2xhbmd1YWdlLkxhbmd1YWdlRGVzY3JpcHRpb24uZmlsZW5hbWUpIHBhdHRlcm5zLFxuICAgIGFuZCB0aGVuIFtleHRlbnNpb25zXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI2xhbmd1YWdlLkxhbmd1YWdlRGVzY3JpcHRpb24uZXh0ZW5zaW9ucyksXG4gICAgYW5kIHJldHVybiB0aGUgZmlyc3QgbGFuZ3VhZ2UgdGhhdCBtYXRjaGVzLlxuICAgICovXG4gICAgc3RhdGljIG1hdGNoRmlsZW5hbWUoZGVzY3MsIGZpbGVuYW1lKSB7XG4gICAgICAgIGZvciAobGV0IGQgb2YgZGVzY3MpXG4gICAgICAgICAgICBpZiAoZC5maWxlbmFtZSAmJiBkLmZpbGVuYW1lLnRlc3QoZmlsZW5hbWUpKVxuICAgICAgICAgICAgICAgIHJldHVybiBkO1xuICAgICAgICBsZXQgZXh0ID0gL1xcLihbXi5dKykkLy5leGVjKGZpbGVuYW1lKTtcbiAgICAgICAgaWYgKGV4dClcbiAgICAgICAgICAgIGZvciAobGV0IGQgb2YgZGVzY3MpXG4gICAgICAgICAgICAgICAgaWYgKGQuZXh0ZW5zaW9ucy5pbmRleE9mKGV4dFsxXSkgPiAtMSlcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGQ7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICAvKipcbiAgICBMb29rIGZvciBhIGxhbmd1YWdlIHdob3NlIG5hbWUgb3IgYWxpYXMgbWF0Y2hlcyB0aGUgdGhlIGdpdmVuXG4gICAgbmFtZSAoY2FzZS1pbnNlbnNpdGl2ZWx5KS4gSWYgYGZ1enp5YCBpcyB0cnVlLCBhbmQgbm8gZGlyZWN0XG4gICAgbWF0Y2hzIGlzIGZvdW5kLCB0aGlzJ2xsIGFsc28gc2VhcmNoIGZvciBhIGxhbmd1YWdlIHdob3NlIG5hbWVcbiAgICBvciBhbGlhcyBvY2N1cnMgaW4gdGhlIHN0cmluZyAoZm9yIG5hbWVzIHNob3J0ZXIgdGhhbiB0aHJlZVxuICAgIGNoYXJhY3RlcnMsIG9ubHkgd2hlbiBzdXJyb3VuZGVkIGJ5IG5vbi13b3JkIGNoYXJhY3RlcnMpLlxuICAgICovXG4gICAgc3RhdGljIG1hdGNoTGFuZ3VhZ2VOYW1lKGRlc2NzLCBuYW1lLCBmdXp6eSA9IHRydWUpIHtcbiAgICAgICAgbmFtZSA9IG5hbWUudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgZm9yIChsZXQgZCBvZiBkZXNjcylcbiAgICAgICAgICAgIGlmIChkLmFsaWFzLnNvbWUoYSA9PiBhID09IG5hbWUpKVxuICAgICAgICAgICAgICAgIHJldHVybiBkO1xuICAgICAgICBpZiAoZnV6enkpXG4gICAgICAgICAgICBmb3IgKGxldCBkIG9mIGRlc2NzKVxuICAgICAgICAgICAgICAgIGZvciAobGV0IGEgb2YgZC5hbGlhcykge1xuICAgICAgICAgICAgICAgICAgICBsZXQgZm91bmQgPSBuYW1lLmluZGV4T2YoYSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChmb3VuZCA+IC0xICYmIChhLmxlbmd0aCA+IDIgfHwgIS9cXHcvLnRlc3QobmFtZVtmb3VuZCAtIDFdKSAmJiAhL1xcdy8udGVzdChuYW1lW2ZvdW5kICsgYS5sZW5ndGhdKSkpXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbn1cblxuLyoqXG5GYWNldCB0aGF0IGRlZmluZXMgYSB3YXkgdG8gcHJvdmlkZSBhIGZ1bmN0aW9uIHRoYXQgY29tcHV0ZXMgdGhlXG5hcHByb3ByaWF0ZSBpbmRlbnRhdGlvbiBkZXB0aCwgYXMgYSBjb2x1bW4gbnVtYmVyIChzZWVcbltgaW5kZW50U3RyaW5nYF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNsYW5ndWFnZS5pbmRlbnRTdHJpbmcpKSwgYXQgdGhlIHN0YXJ0IG9mIGEgZ2l2ZW5cbmxpbmUuIEEgcmV0dXJuIHZhbHVlIG9mIGBudWxsYCBpbmRpY2F0ZXMgbm8gaW5kZW50YXRpb24gY2FuIGJlXG5kZXRlcm1pbmVkLCBhbmQgdGhlIGxpbmUgc2hvdWxkIGluaGVyaXQgdGhlIGluZGVudGF0aW9uIG9mIHRoZSBvbmVcbmFib3ZlIGl0LiBBIHJldHVybiB2YWx1ZSBvZiBgdW5kZWZpbmVkYCBkZWZlcnMgdG8gdGhlIG5leHQgaW5kZW50XG5zZXJ2aWNlLlxuKi9cbmNvbnN0IGluZGVudFNlcnZpY2UgPSAvKkBfX1BVUkVfXyovRmFjZXQuZGVmaW5lKCk7XG4vKipcbkZhY2V0IGZvciBvdmVycmlkaW5nIHRoZSB1bml0IGJ5IHdoaWNoIGluZGVudGF0aW9uIGhhcHBlbnMuIFNob3VsZFxuYmUgYSBzdHJpbmcgY29uc2lzdGluZyBlbnRpcmVseSBvZiB0aGUgc2FtZSB3aGl0ZXNwYWNlIGNoYXJhY3Rlci5cbldoZW4gbm90IHNldCwgdGhpcyBkZWZhdWx0cyB0byAyIHNwYWNlcy5cbiovXG5jb25zdCBpbmRlbnRVbml0ID0gLypAX19QVVJFX18qL0ZhY2V0LmRlZmluZSh7XG4gICAgY29tYmluZTogdmFsdWVzID0+IHtcbiAgICAgICAgaWYgKCF2YWx1ZXMubGVuZ3RoKVxuICAgICAgICAgICAgcmV0dXJuIFwiICBcIjtcbiAgICAgICAgbGV0IHVuaXQgPSB2YWx1ZXNbMF07XG4gICAgICAgIGlmICghdW5pdCB8fCAvXFxTLy50ZXN0KHVuaXQpIHx8IEFycmF5LmZyb20odW5pdCkuc29tZShlID0+IGUgIT0gdW5pdFswXSkpXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIGluZGVudCB1bml0OiBcIiArIEpTT04uc3RyaW5naWZ5KHZhbHVlc1swXSkpO1xuICAgICAgICByZXR1cm4gdW5pdDtcbiAgICB9XG59KTtcbi8qKlxuUmV0dXJuIHRoZSBfY29sdW1uIHdpZHRoXyBvZiBhbiBpbmRlbnQgdW5pdCBpbiB0aGUgc3RhdGUuXG5EZXRlcm1pbmVkIGJ5IHRoZSBbYGluZGVudFVuaXRgXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI2xhbmd1YWdlLmluZGVudFVuaXQpXG5mYWNldCwgYW5kIFtgdGFiU2l6ZWBdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jc3RhdGUuRWRpdG9yU3RhdGVedGFiU2l6ZSkgd2hlbiB0aGF0XG5jb250YWlucyB0YWJzLlxuKi9cbmZ1bmN0aW9uIGdldEluZGVudFVuaXQoc3RhdGUpIHtcbiAgICBsZXQgdW5pdCA9IHN0YXRlLmZhY2V0KGluZGVudFVuaXQpO1xuICAgIHJldHVybiB1bml0LmNoYXJDb2RlQXQoMCkgPT0gOSA/IHN0YXRlLnRhYlNpemUgKiB1bml0Lmxlbmd0aCA6IHVuaXQubGVuZ3RoO1xufVxuLyoqXG5DcmVhdGUgYW4gaW5kZW50YXRpb24gc3RyaW5nIHRoYXQgY292ZXJzIGNvbHVtbnMgMCB0byBgY29sc2AuXG5XaWxsIHVzZSB0YWJzIGZvciBhcyBtdWNoIG9mIHRoZSBjb2x1bW5zIGFzIHBvc3NpYmxlIHdoZW4gdGhlXG5bYGluZGVudFVuaXRgXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI2xhbmd1YWdlLmluZGVudFVuaXQpIGZhY2V0IGNvbnRhaW5zXG50YWJzLlxuKi9cbmZ1bmN0aW9uIGluZGVudFN0cmluZyhzdGF0ZSwgY29scykge1xuICAgIGxldCByZXN1bHQgPSBcIlwiLCB0cyA9IHN0YXRlLnRhYlNpemUsIGNoID0gc3RhdGUuZmFjZXQoaW5kZW50VW5pdClbMF07XG4gICAgaWYgKGNoID09IFwiXFx0XCIpIHtcbiAgICAgICAgd2hpbGUgKGNvbHMgPj0gdHMpIHtcbiAgICAgICAgICAgIHJlc3VsdCArPSBcIlxcdFwiO1xuICAgICAgICAgICAgY29scyAtPSB0cztcbiAgICAgICAgfVxuICAgICAgICBjaCA9IFwiIFwiO1xuICAgIH1cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNvbHM7IGkrKylcbiAgICAgICAgcmVzdWx0ICs9IGNoO1xuICAgIHJldHVybiByZXN1bHQ7XG59XG4vKipcbkdldCB0aGUgaW5kZW50YXRpb24sIGFzIGEgY29sdW1uIG51bWJlciwgYXQgdGhlIGdpdmVuIHBvc2l0aW9uLlxuV2lsbCBmaXJzdCBjb25zdWx0IGFueSBbaW5kZW50IHNlcnZpY2VzXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI2xhbmd1YWdlLmluZGVudFNlcnZpY2UpXG50aGF0IGFyZSByZWdpc3RlcmVkLCBhbmQgaWYgbm9uZSBvZiB0aG9zZSByZXR1cm4gYW4gaW5kZW50YXRpb24sXG50aGlzIHdpbGwgY2hlY2sgdGhlIHN5bnRheCB0cmVlIGZvciB0aGUgW2luZGVudCBub2RlXG5wcm9wXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI2xhbmd1YWdlLmluZGVudE5vZGVQcm9wKSBhbmQgdXNlIHRoYXQgaWYgZm91bmQuIFJldHVybnMgYVxubnVtYmVyIHdoZW4gYW4gaW5kZW50YXRpb24gY291bGQgYmUgZGV0ZXJtaW5lZCwgYW5kIG51bGxcbm90aGVyd2lzZS5cbiovXG5mdW5jdGlvbiBnZXRJbmRlbnRhdGlvbihjb250ZXh0LCBwb3MpIHtcbiAgICBpZiAoY29udGV4dCBpbnN0YW5jZW9mIEVkaXRvclN0YXRlKVxuICAgICAgICBjb250ZXh0ID0gbmV3IEluZGVudENvbnRleHQoY29udGV4dCk7XG4gICAgZm9yIChsZXQgc2VydmljZSBvZiBjb250ZXh0LnN0YXRlLmZhY2V0KGluZGVudFNlcnZpY2UpKSB7XG4gICAgICAgIGxldCByZXN1bHQgPSBzZXJ2aWNlKGNvbnRleHQsIHBvcyk7XG4gICAgICAgIGlmIChyZXN1bHQgIT09IHVuZGVmaW5lZClcbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuICAgIGxldCB0cmVlID0gc3ludGF4VHJlZShjb250ZXh0LnN0YXRlKTtcbiAgICByZXR1cm4gdHJlZS5sZW5ndGggPj0gcG9zID8gc3ludGF4SW5kZW50YXRpb24oY29udGV4dCwgdHJlZSwgcG9zKSA6IG51bGw7XG59XG4vKipcbkNyZWF0ZSBhIGNoYW5nZSBzZXQgdGhhdCBhdXRvLWluZGVudHMgYWxsIGxpbmVzIHRvdWNoZWQgYnkgdGhlXG5naXZlbiBkb2N1bWVudCByYW5nZS5cbiovXG5mdW5jdGlvbiBpbmRlbnRSYW5nZShzdGF0ZSwgZnJvbSwgdG8pIHtcbiAgICBsZXQgdXBkYXRlZCA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gICAgbGV0IGNvbnRleHQgPSBuZXcgSW5kZW50Q29udGV4dChzdGF0ZSwgeyBvdmVycmlkZUluZGVudGF0aW9uOiBzdGFydCA9PiB7IHZhciBfYTsgcmV0dXJuIChfYSA9IHVwZGF0ZWRbc3RhcnRdKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiAtMTsgfSB9KTtcbiAgICBsZXQgY2hhbmdlcyA9IFtdO1xuICAgIGZvciAobGV0IHBvcyA9IGZyb207IHBvcyA8PSB0bzspIHtcbiAgICAgICAgbGV0IGxpbmUgPSBzdGF0ZS5kb2MubGluZUF0KHBvcyk7XG4gICAgICAgIHBvcyA9IGxpbmUudG8gKyAxO1xuICAgICAgICBsZXQgaW5kZW50ID0gZ2V0SW5kZW50YXRpb24oY29udGV4dCwgbGluZS5mcm9tKTtcbiAgICAgICAgaWYgKGluZGVudCA9PSBudWxsKVxuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgIGlmICghL1xcUy8udGVzdChsaW5lLnRleHQpKVxuICAgICAgICAgICAgaW5kZW50ID0gMDtcbiAgICAgICAgbGV0IGN1ciA9IC9eXFxzKi8uZXhlYyhsaW5lLnRleHQpWzBdO1xuICAgICAgICBsZXQgbm9ybSA9IGluZGVudFN0cmluZyhzdGF0ZSwgaW5kZW50KTtcbiAgICAgICAgaWYgKGN1ciAhPSBub3JtKSB7XG4gICAgICAgICAgICB1cGRhdGVkW2xpbmUuZnJvbV0gPSBpbmRlbnQ7XG4gICAgICAgICAgICBjaGFuZ2VzLnB1c2goeyBmcm9tOiBsaW5lLmZyb20sIHRvOiBsaW5lLmZyb20gKyBjdXIubGVuZ3RoLCBpbnNlcnQ6IG5vcm0gfSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHN0YXRlLmNoYW5nZXMoY2hhbmdlcyk7XG59XG4vKipcbkluZGVudGF0aW9uIGNvbnRleHRzIGFyZSB1c2VkIHdoZW4gY2FsbGluZyBbaW5kZW50YXRpb25cbnNlcnZpY2VzXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI2xhbmd1YWdlLmluZGVudFNlcnZpY2UpLiBUaGV5IHByb3ZpZGUgaGVscGVyIHV0aWxpdGllc1xudXNlZnVsIGluIGluZGVudGF0aW9uIGxvZ2ljLCBhbmQgY2FuIHNlbGVjdGl2ZWx5IG92ZXJyaWRlIHRoZVxuaW5kZW50YXRpb24gcmVwb3J0ZWQgZm9yIHNvbWUgbGluZXMuXG4qL1xuY2xhc3MgSW5kZW50Q29udGV4dCB7XG4gICAgLyoqXG4gICAgQ3JlYXRlIGFuIGluZGVudCBjb250ZXh0LlxuICAgICovXG4gICAgY29uc3RydWN0b3IoXG4gICAgLyoqXG4gICAgVGhlIGVkaXRvciBzdGF0ZS5cbiAgICAqL1xuICAgIHN0YXRlLCBcbiAgICAvKipcbiAgICBAaW50ZXJuYWxcbiAgICAqL1xuICAgIG9wdGlvbnMgPSB7fSkge1xuICAgICAgICB0aGlzLnN0YXRlID0gc3RhdGU7XG4gICAgICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7XG4gICAgICAgIHRoaXMudW5pdCA9IGdldEluZGVudFVuaXQoc3RhdGUpO1xuICAgIH1cbiAgICAvKipcbiAgICBHZXQgYSBkZXNjcmlwdGlvbiBvZiB0aGUgbGluZSBhdCB0aGUgZ2l2ZW4gcG9zaXRpb24sIHRha2luZ1xuICAgIFtzaW11bGF0ZWQgbGluZVxuICAgIGJyZWFrc10oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNsYW5ndWFnZS5JbmRlbnRDb250ZXh0LmNvbnN0cnVjdG9yXm9wdGlvbnMuc2ltdWxhdGVCcmVhaylcbiAgICBpbnRvIGFjY291bnQuIElmIHRoZXJlIGlzIHN1Y2ggYSBicmVhayBhdCBgcG9zYCwgdGhlIGBiaWFzYFxuICAgIGFyZ3VtZW50IGRldGVybWluZXMgd2hldGhlciB0aGUgcGFydCBvZiB0aGUgbGluZSBsaW5lIGJlZm9yZSBvclxuICAgIGFmdGVyIHRoZSBicmVhayBpcyB1c2VkLlxuICAgICovXG4gICAgbGluZUF0KHBvcywgYmlhcyA9IDEpIHtcbiAgICAgICAgbGV0IGxpbmUgPSB0aGlzLnN0YXRlLmRvYy5saW5lQXQocG9zKTtcbiAgICAgICAgbGV0IHsgc2ltdWxhdGVCcmVhaywgc2ltdWxhdGVEb3VibGVCcmVhayB9ID0gdGhpcy5vcHRpb25zO1xuICAgICAgICBpZiAoc2ltdWxhdGVCcmVhayAhPSBudWxsICYmIHNpbXVsYXRlQnJlYWsgPj0gbGluZS5mcm9tICYmIHNpbXVsYXRlQnJlYWsgPD0gbGluZS50bykge1xuICAgICAgICAgICAgaWYgKHNpbXVsYXRlRG91YmxlQnJlYWsgJiYgc2ltdWxhdGVCcmVhayA9PSBwb3MpXG4gICAgICAgICAgICAgICAgcmV0dXJuIHsgdGV4dDogXCJcIiwgZnJvbTogcG9zIH07XG4gICAgICAgICAgICBlbHNlIGlmIChiaWFzIDwgMCA/IHNpbXVsYXRlQnJlYWsgPCBwb3MgOiBzaW11bGF0ZUJyZWFrIDw9IHBvcylcbiAgICAgICAgICAgICAgICByZXR1cm4geyB0ZXh0OiBsaW5lLnRleHQuc2xpY2Uoc2ltdWxhdGVCcmVhayAtIGxpbmUuZnJvbSksIGZyb206IHNpbXVsYXRlQnJlYWsgfTtcbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICByZXR1cm4geyB0ZXh0OiBsaW5lLnRleHQuc2xpY2UoMCwgc2ltdWxhdGVCcmVhayAtIGxpbmUuZnJvbSksIGZyb206IGxpbmUuZnJvbSB9O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBsaW5lO1xuICAgIH1cbiAgICAvKipcbiAgICBHZXQgdGhlIHRleHQgZGlyZWN0bHkgYWZ0ZXIgYHBvc2AsIGVpdGhlciB0aGUgZW50aXJlIGxpbmVcbiAgICBvciB0aGUgbmV4dCAxMDAgY2hhcmFjdGVycywgd2hpY2hldmVyIGlzIHNob3J0ZXIuXG4gICAgKi9cbiAgICB0ZXh0QWZ0ZXJQb3MocG9zLCBiaWFzID0gMSkge1xuICAgICAgICBpZiAodGhpcy5vcHRpb25zLnNpbXVsYXRlRG91YmxlQnJlYWsgJiYgcG9zID09IHRoaXMub3B0aW9ucy5zaW11bGF0ZUJyZWFrKVxuICAgICAgICAgICAgcmV0dXJuIFwiXCI7XG4gICAgICAgIGxldCB7IHRleHQsIGZyb20gfSA9IHRoaXMubGluZUF0KHBvcywgYmlhcyk7XG4gICAgICAgIHJldHVybiB0ZXh0LnNsaWNlKHBvcyAtIGZyb20sIE1hdGgubWluKHRleHQubGVuZ3RoLCBwb3MgKyAxMDAgLSBmcm9tKSk7XG4gICAgfVxuICAgIC8qKlxuICAgIEZpbmQgdGhlIGNvbHVtbiBmb3IgdGhlIGdpdmVuIHBvc2l0aW9uLlxuICAgICovXG4gICAgY29sdW1uKHBvcywgYmlhcyA9IDEpIHtcbiAgICAgICAgbGV0IHsgdGV4dCwgZnJvbSB9ID0gdGhpcy5saW5lQXQocG9zLCBiaWFzKTtcbiAgICAgICAgbGV0IHJlc3VsdCA9IHRoaXMuY291bnRDb2x1bW4odGV4dCwgcG9zIC0gZnJvbSk7XG4gICAgICAgIGxldCBvdmVycmlkZSA9IHRoaXMub3B0aW9ucy5vdmVycmlkZUluZGVudGF0aW9uID8gdGhpcy5vcHRpb25zLm92ZXJyaWRlSW5kZW50YXRpb24oZnJvbSkgOiAtMTtcbiAgICAgICAgaWYgKG92ZXJyaWRlID4gLTEpXG4gICAgICAgICAgICByZXN1bHQgKz0gb3ZlcnJpZGUgLSB0aGlzLmNvdW50Q29sdW1uKHRleHQsIHRleHQuc2VhcmNoKC9cXFN8JC8pKTtcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG4gICAgLyoqXG4gICAgRmluZCB0aGUgY29sdW1uIHBvc2l0aW9uICh0YWtpbmcgdGFicyBpbnRvIGFjY291bnQpIG9mIHRoZSBnaXZlblxuICAgIHBvc2l0aW9uIGluIHRoZSBnaXZlbiBzdHJpbmcuXG4gICAgKi9cbiAgICBjb3VudENvbHVtbihsaW5lLCBwb3MgPSBsaW5lLmxlbmd0aCkge1xuICAgICAgICByZXR1cm4gY291bnRDb2x1bW4obGluZSwgdGhpcy5zdGF0ZS50YWJTaXplLCBwb3MpO1xuICAgIH1cbiAgICAvKipcbiAgICBGaW5kIHRoZSBpbmRlbnRhdGlvbiBjb2x1bW4gb2YgdGhlIGxpbmUgYXQgdGhlIGdpdmVuIHBvaW50LlxuICAgICovXG4gICAgbGluZUluZGVudChwb3MsIGJpYXMgPSAxKSB7XG4gICAgICAgIGxldCB7IHRleHQsIGZyb20gfSA9IHRoaXMubGluZUF0KHBvcywgYmlhcyk7XG4gICAgICAgIGxldCBvdmVycmlkZSA9IHRoaXMub3B0aW9ucy5vdmVycmlkZUluZGVudGF0aW9uO1xuICAgICAgICBpZiAob3ZlcnJpZGUpIHtcbiAgICAgICAgICAgIGxldCBvdmVycmlkZW4gPSBvdmVycmlkZShmcm9tKTtcbiAgICAgICAgICAgIGlmIChvdmVycmlkZW4gPiAtMSlcbiAgICAgICAgICAgICAgICByZXR1cm4gb3ZlcnJpZGVuO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLmNvdW50Q29sdW1uKHRleHQsIHRleHQuc2VhcmNoKC9cXFN8JC8pKTtcbiAgICB9XG4gICAgLyoqXG4gICAgUmV0dXJucyB0aGUgW3NpbXVsYXRlZCBsaW5lXG4gICAgYnJlYWtdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jbGFuZ3VhZ2UuSW5kZW50Q29udGV4dC5jb25zdHJ1Y3Rvcl5vcHRpb25zLnNpbXVsYXRlQnJlYWspXG4gICAgZm9yIHRoaXMgY29udGV4dCwgaWYgYW55LlxuICAgICovXG4gICAgZ2V0IHNpbXVsYXRlZEJyZWFrKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5vcHRpb25zLnNpbXVsYXRlQnJlYWsgfHwgbnVsbDtcbiAgICB9XG59XG4vKipcbkEgc3ludGF4IHRyZWUgbm9kZSBwcm9wIHVzZWQgdG8gYXNzb2NpYXRlIGluZGVudGF0aW9uIHN0cmF0ZWdpZXNcbndpdGggbm9kZSB0eXBlcy4gU3VjaCBhIHN0cmF0ZWd5IGlzIGEgZnVuY3Rpb24gZnJvbSBhbiBpbmRlbnRhdGlvblxuY29udGV4dCB0byBhIGNvbHVtbiBudW1iZXIgKHNlZSBhbHNvXG5bYGluZGVudFN0cmluZ2BdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jbGFuZ3VhZ2UuaW5kZW50U3RyaW5nKSkgb3IgbnVsbCwgd2hlcmUgbnVsbFxuaW5kaWNhdGVzIHRoYXQgbm8gZGVmaW5pdGl2ZSBpbmRlbnRhdGlvbiBjYW4gYmUgZGV0ZXJtaW5lZC5cbiovXG5jb25zdCBpbmRlbnROb2RlUHJvcCA9IC8qQF9fUFVSRV9fKi9uZXcgTm9kZVByb3AoKTtcbi8vIENvbXB1dGUgdGhlIGluZGVudGF0aW9uIGZvciBhIGdpdmVuIHBvc2l0aW9uIGZyb20gdGhlIHN5bnRheCB0cmVlLlxuZnVuY3Rpb24gc3ludGF4SW5kZW50YXRpb24oY3gsIGFzdCwgcG9zKSB7XG4gICAgbGV0IHN0YWNrID0gYXN0LnJlc29sdmVTdGFjayhwb3MpO1xuICAgIGxldCBpbm5lciA9IGFzdC5yZXNvbHZlSW5uZXIocG9zLCAtMSkucmVzb2x2ZShwb3MsIDApLmVudGVyVW5maW5pc2hlZE5vZGVzQmVmb3JlKHBvcyk7XG4gICAgaWYgKGlubmVyICE9IHN0YWNrLm5vZGUpIHtcbiAgICAgICAgbGV0IGFkZCA9IFtdO1xuICAgICAgICBmb3IgKGxldCBjdXIgPSBpbm5lcjsgY3VyICYmICEoY3VyLmZyb20gPCBzdGFjay5ub2RlLmZyb20gfHwgY3VyLnRvID4gc3RhY2subm9kZS50byB8fFxuICAgICAgICAgICAgY3VyLmZyb20gPT0gc3RhY2subm9kZS5mcm9tICYmIGN1ci50eXBlID09IHN0YWNrLm5vZGUudHlwZSk7IGN1ciA9IGN1ci5wYXJlbnQpXG4gICAgICAgICAgICBhZGQucHVzaChjdXIpO1xuICAgICAgICBmb3IgKGxldCBpID0gYWRkLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKVxuICAgICAgICAgICAgc3RhY2sgPSB7IG5vZGU6IGFkZFtpXSwgbmV4dDogc3RhY2sgfTtcbiAgICB9XG4gICAgcmV0dXJuIGluZGVudEZvcihzdGFjaywgY3gsIHBvcyk7XG59XG5mdW5jdGlvbiBpbmRlbnRGb3Ioc3RhY2ssIGN4LCBwb3MpIHtcbiAgICBmb3IgKGxldCBjdXIgPSBzdGFjazsgY3VyOyBjdXIgPSBjdXIubmV4dCkge1xuICAgICAgICBsZXQgc3RyYXRlZ3kgPSBpbmRlbnRTdHJhdGVneShjdXIubm9kZSk7XG4gICAgICAgIGlmIChzdHJhdGVneSlcbiAgICAgICAgICAgIHJldHVybiBzdHJhdGVneShUcmVlSW5kZW50Q29udGV4dC5jcmVhdGUoY3gsIHBvcywgY3VyKSk7XG4gICAgfVxuICAgIHJldHVybiAwO1xufVxuZnVuY3Rpb24gaWdub3JlQ2xvc2VkKGN4KSB7XG4gICAgcmV0dXJuIGN4LnBvcyA9PSBjeC5vcHRpb25zLnNpbXVsYXRlQnJlYWsgJiYgY3gub3B0aW9ucy5zaW11bGF0ZURvdWJsZUJyZWFrO1xufVxuZnVuY3Rpb24gaW5kZW50U3RyYXRlZ3kodHJlZSkge1xuICAgIGxldCBzdHJhdGVneSA9IHRyZWUudHlwZS5wcm9wKGluZGVudE5vZGVQcm9wKTtcbiAgICBpZiAoc3RyYXRlZ3kpXG4gICAgICAgIHJldHVybiBzdHJhdGVneTtcbiAgICBsZXQgZmlyc3QgPSB0cmVlLmZpcnN0Q2hpbGQsIGNsb3NlO1xuICAgIGlmIChmaXJzdCAmJiAoY2xvc2UgPSBmaXJzdC50eXBlLnByb3AoTm9kZVByb3AuY2xvc2VkQnkpKSkge1xuICAgICAgICBsZXQgbGFzdCA9IHRyZWUubGFzdENoaWxkLCBjbG9zZWQgPSBsYXN0ICYmIGNsb3NlLmluZGV4T2YobGFzdC5uYW1lKSA+IC0xO1xuICAgICAgICByZXR1cm4gY3ggPT4gZGVsaW1pdGVkU3RyYXRlZ3koY3gsIHRydWUsIDEsIHVuZGVmaW5lZCwgY2xvc2VkICYmICFpZ25vcmVDbG9zZWQoY3gpID8gbGFzdC5mcm9tIDogdW5kZWZpbmVkKTtcbiAgICB9XG4gICAgcmV0dXJuIHRyZWUucGFyZW50ID09IG51bGwgPyB0b3BJbmRlbnQgOiBudWxsO1xufVxuZnVuY3Rpb24gdG9wSW5kZW50KCkgeyByZXR1cm4gMDsgfVxuLyoqXG5PYmplY3RzIG9mIHRoaXMgdHlwZSBwcm92aWRlIGNvbnRleHQgaW5mb3JtYXRpb24gYW5kIGhlbHBlclxubWV0aG9kcyB0byBpbmRlbnRhdGlvbiBmdW5jdGlvbnMgcmVnaXN0ZXJlZCBvbiBzeW50YXggbm9kZXMuXG4qL1xuY2xhc3MgVHJlZUluZGVudENvbnRleHQgZXh0ZW5kcyBJbmRlbnRDb250ZXh0IHtcbiAgICBjb25zdHJ1Y3RvcihiYXNlLCBcbiAgICAvKipcbiAgICBUaGUgcG9zaXRpb24gYXQgd2hpY2ggaW5kZW50YXRpb24gaXMgYmVpbmcgY29tcHV0ZWQuXG4gICAgKi9cbiAgICBwb3MsIFxuICAgIC8qKlxuICAgIEBpbnRlcm5hbFxuICAgICovXG4gICAgY29udGV4dCkge1xuICAgICAgICBzdXBlcihiYXNlLnN0YXRlLCBiYXNlLm9wdGlvbnMpO1xuICAgICAgICB0aGlzLmJhc2UgPSBiYXNlO1xuICAgICAgICB0aGlzLnBvcyA9IHBvcztcbiAgICAgICAgdGhpcy5jb250ZXh0ID0gY29udGV4dDtcbiAgICB9XG4gICAgLyoqXG4gICAgVGhlIHN5bnRheCB0cmVlIG5vZGUgdG8gd2hpY2ggdGhlIGluZGVudGF0aW9uIHN0cmF0ZWd5XG4gICAgYXBwbGllcy5cbiAgICAqL1xuICAgIGdldCBub2RlKCkgeyByZXR1cm4gdGhpcy5jb250ZXh0Lm5vZGU7IH1cbiAgICAvKipcbiAgICBAaW50ZXJuYWxcbiAgICAqL1xuICAgIHN0YXRpYyBjcmVhdGUoYmFzZSwgcG9zLCBjb250ZXh0KSB7XG4gICAgICAgIHJldHVybiBuZXcgVHJlZUluZGVudENvbnRleHQoYmFzZSwgcG9zLCBjb250ZXh0KTtcbiAgICB9XG4gICAgLyoqXG4gICAgR2V0IHRoZSB0ZXh0IGRpcmVjdGx5IGFmdGVyIGB0aGlzLnBvc2AsIGVpdGhlciB0aGUgZW50aXJlIGxpbmVcbiAgICBvciB0aGUgbmV4dCAxMDAgY2hhcmFjdGVycywgd2hpY2hldmVyIGlzIHNob3J0ZXIuXG4gICAgKi9cbiAgICBnZXQgdGV4dEFmdGVyKCkge1xuICAgICAgICByZXR1cm4gdGhpcy50ZXh0QWZ0ZXJQb3ModGhpcy5wb3MpO1xuICAgIH1cbiAgICAvKipcbiAgICBHZXQgdGhlIGluZGVudGF0aW9uIGF0IHRoZSByZWZlcmVuY2UgbGluZSBmb3IgYHRoaXMubm9kZWAsIHdoaWNoXG4gICAgaXMgdGhlIGxpbmUgb24gd2hpY2ggaXQgc3RhcnRzLCB1bmxlc3MgdGhlcmUgaXMgYSBub2RlIHRoYXQgaXNcbiAgICBfbm90XyBhIHBhcmVudCBvZiB0aGlzIG5vZGUgY292ZXJpbmcgdGhlIHN0YXJ0IG9mIHRoYXQgbGluZS4gSWZcbiAgICBzbywgdGhlIGxpbmUgYXQgdGhlIHN0YXJ0IG9mIHRoYXQgbm9kZSBpcyB0cmllZCwgYWdhaW4gc2tpcHBpbmdcbiAgICBvbiBpZiBpdCBpcyBjb3ZlcmVkIGJ5IGFub3RoZXIgc3VjaCBub2RlLlxuICAgICovXG4gICAgZ2V0IGJhc2VJbmRlbnQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmJhc2VJbmRlbnRGb3IodGhpcy5ub2RlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgR2V0IHRoZSBpbmRlbnRhdGlvbiBmb3IgdGhlIHJlZmVyZW5jZSBsaW5lIG9mIHRoZSBnaXZlbiBub2RlXG4gICAgKHNlZSBbYGJhc2VJbmRlbnRgXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI2xhbmd1YWdlLlRyZWVJbmRlbnRDb250ZXh0LmJhc2VJbmRlbnQpKS5cbiAgICAqL1xuICAgIGJhc2VJbmRlbnRGb3Iobm9kZSkge1xuICAgICAgICBsZXQgbGluZSA9IHRoaXMuc3RhdGUuZG9jLmxpbmVBdChub2RlLmZyb20pO1xuICAgICAgICAvLyBTa2lwIGxpbmUgc3RhcnRzIHRoYXQgYXJlIGNvdmVyZWQgYnkgYSBzaWJsaW5nIChvciBjb3VzaW4sIGV0YylcbiAgICAgICAgZm9yICg7Oykge1xuICAgICAgICAgICAgbGV0IGF0QnJlYWsgPSBub2RlLnJlc29sdmUobGluZS5mcm9tKTtcbiAgICAgICAgICAgIHdoaWxlIChhdEJyZWFrLnBhcmVudCAmJiBhdEJyZWFrLnBhcmVudC5mcm9tID09IGF0QnJlYWsuZnJvbSlcbiAgICAgICAgICAgICAgICBhdEJyZWFrID0gYXRCcmVhay5wYXJlbnQ7XG4gICAgICAgICAgICBpZiAoaXNQYXJlbnQoYXRCcmVhaywgbm9kZSkpXG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBsaW5lID0gdGhpcy5zdGF0ZS5kb2MubGluZUF0KGF0QnJlYWsuZnJvbSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMubGluZUluZGVudChsaW5lLmZyb20pO1xuICAgIH1cbiAgICAvKipcbiAgICBDb250aW51ZSBsb29raW5nIGZvciBpbmRlbnRhdGlvbnMgaW4gdGhlIG5vZGUncyBwYXJlbnQgbm9kZXMsXG4gICAgYW5kIHJldHVybiB0aGUgcmVzdWx0IG9mIHRoYXQuXG4gICAgKi9cbiAgICBjb250aW51ZSgpIHtcbiAgICAgICAgcmV0dXJuIGluZGVudEZvcih0aGlzLmNvbnRleHQubmV4dCwgdGhpcy5iYXNlLCB0aGlzLnBvcyk7XG4gICAgfVxufVxuZnVuY3Rpb24gaXNQYXJlbnQocGFyZW50LCBvZikge1xuICAgIGZvciAobGV0IGN1ciA9IG9mOyBjdXI7IGN1ciA9IGN1ci5wYXJlbnQpXG4gICAgICAgIGlmIChwYXJlbnQgPT0gY3VyKVxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgcmV0dXJuIGZhbHNlO1xufVxuLy8gQ2hlY2sgd2hldGhlciBhIGRlbGltaXRlZCBub2RlIGlzIGFsaWduZWQgKG1lYW5pbmcgdGhlcmUgYXJlXG4vLyBub24tc2tpcHBlZCBub2RlcyBvbiB0aGUgc2FtZSBsaW5lIGFzIHRoZSBvcGVuaW5nIGRlbGltaXRlcikuIEFuZFxuLy8gaWYgc28sIHJldHVybiB0aGUgb3BlbmluZyB0b2tlbi5cbmZ1bmN0aW9uIGJyYWNrZXRlZEFsaWduZWQoY29udGV4dCkge1xuICAgIGxldCB0cmVlID0gY29udGV4dC5ub2RlO1xuICAgIGxldCBvcGVuVG9rZW4gPSB0cmVlLmNoaWxkQWZ0ZXIodHJlZS5mcm9tKSwgbGFzdCA9IHRyZWUubGFzdENoaWxkO1xuICAgIGlmICghb3BlblRva2VuKVxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICBsZXQgc2ltID0gY29udGV4dC5vcHRpb25zLnNpbXVsYXRlQnJlYWs7XG4gICAgbGV0IG9wZW5MaW5lID0gY29udGV4dC5zdGF0ZS5kb2MubGluZUF0KG9wZW5Ub2tlbi5mcm9tKTtcbiAgICBsZXQgbGluZUVuZCA9IHNpbSA9PSBudWxsIHx8IHNpbSA8PSBvcGVuTGluZS5mcm9tID8gb3BlbkxpbmUudG8gOiBNYXRoLm1pbihvcGVuTGluZS50bywgc2ltKTtcbiAgICBmb3IgKGxldCBwb3MgPSBvcGVuVG9rZW4udG87Oykge1xuICAgICAgICBsZXQgbmV4dCA9IHRyZWUuY2hpbGRBZnRlcihwb3MpO1xuICAgICAgICBpZiAoIW5leHQgfHwgbmV4dCA9PSBsYXN0KVxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIGlmICghbmV4dC50eXBlLmlzU2tpcHBlZCkge1xuICAgICAgICAgICAgaWYgKG5leHQuZnJvbSA+PSBsaW5lRW5kKVxuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgbGV0IHNwYWNlID0gL14gKi8uZXhlYyhvcGVuTGluZS50ZXh0LnNsaWNlKG9wZW5Ub2tlbi50byAtIG9wZW5MaW5lLmZyb20pKVswXS5sZW5ndGg7XG4gICAgICAgICAgICByZXR1cm4geyBmcm9tOiBvcGVuVG9rZW4uZnJvbSwgdG86IG9wZW5Ub2tlbi50byArIHNwYWNlIH07XG4gICAgICAgIH1cbiAgICAgICAgcG9zID0gbmV4dC50bztcbiAgICB9XG59XG4vKipcbkFuIGluZGVudGF0aW9uIHN0cmF0ZWd5IGZvciBkZWxpbWl0ZWQgKHVzdWFsbHkgYnJhY2tldGVkKSBub2Rlcy5cbldpbGwsIGJ5IGRlZmF1bHQsIGluZGVudCBvbmUgdW5pdCBtb3JlIHRoYW4gdGhlIHBhcmVudCdzIGJhc2VcbmluZGVudCB1bmxlc3MgdGhlIGxpbmUgc3RhcnRzIHdpdGggYSBjbG9zaW5nIHRva2VuLiBXaGVuIGBhbGlnbmBcbmlzIHRydWUgYW5kIHRoZXJlIGFyZSBub24tc2tpcHBlZCBub2RlcyBvbiB0aGUgbm9kZSdzIG9wZW5pbmdcbmxpbmUsIHRoZSBjb250ZW50IG9mIHRoZSBub2RlIHdpbGwgYmUgYWxpZ25lZCB3aXRoIHRoZSBlbmQgb2YgdGhlXG5vcGVuaW5nIG5vZGUsIGxpa2UgdGhpczpcblxuICAgIGZvbyhiYXIsXG4gICAgICAgIGJheilcbiovXG5mdW5jdGlvbiBkZWxpbWl0ZWRJbmRlbnQoeyBjbG9zaW5nLCBhbGlnbiA9IHRydWUsIHVuaXRzID0gMSB9KSB7XG4gICAgcmV0dXJuIChjb250ZXh0KSA9PiBkZWxpbWl0ZWRTdHJhdGVneShjb250ZXh0LCBhbGlnbiwgdW5pdHMsIGNsb3NpbmcpO1xufVxuZnVuY3Rpb24gZGVsaW1pdGVkU3RyYXRlZ3koY29udGV4dCwgYWxpZ24sIHVuaXRzLCBjbG9zaW5nLCBjbG9zZWRBdCkge1xuICAgIGxldCBhZnRlciA9IGNvbnRleHQudGV4dEFmdGVyLCBzcGFjZSA9IGFmdGVyLm1hdGNoKC9eXFxzKi8pWzBdLmxlbmd0aDtcbiAgICBsZXQgY2xvc2VkID0gY2xvc2luZyAmJiBhZnRlci5zbGljZShzcGFjZSwgc3BhY2UgKyBjbG9zaW5nLmxlbmd0aCkgPT0gY2xvc2luZyB8fCBjbG9zZWRBdCA9PSBjb250ZXh0LnBvcyArIHNwYWNlO1xuICAgIGxldCBhbGlnbmVkID0gYWxpZ24gPyBicmFja2V0ZWRBbGlnbmVkKGNvbnRleHQpIDogbnVsbDtcbiAgICBpZiAoYWxpZ25lZClcbiAgICAgICAgcmV0dXJuIGNsb3NlZCA/IGNvbnRleHQuY29sdW1uKGFsaWduZWQuZnJvbSkgOiBjb250ZXh0LmNvbHVtbihhbGlnbmVkLnRvKTtcbiAgICByZXR1cm4gY29udGV4dC5iYXNlSW5kZW50ICsgKGNsb3NlZCA/IDAgOiBjb250ZXh0LnVuaXQgKiB1bml0cyk7XG59XG4vKipcbkFuIGluZGVudGF0aW9uIHN0cmF0ZWd5IHRoYXQgYWxpZ25zIGEgbm9kZSdzIGNvbnRlbnQgdG8gaXRzIGJhc2VcbmluZGVudGF0aW9uLlxuKi9cbmNvbnN0IGZsYXRJbmRlbnQgPSAoY29udGV4dCkgPT4gY29udGV4dC5iYXNlSW5kZW50O1xuLyoqXG5DcmVhdGVzIGFuIGluZGVudGF0aW9uIHN0cmF0ZWd5IHRoYXQsIGJ5IGRlZmF1bHQsIGluZGVudHNcbmNvbnRpbnVlZCBsaW5lcyBvbmUgdW5pdCBtb3JlIHRoYW4gdGhlIG5vZGUncyBiYXNlIGluZGVudGF0aW9uLlxuWW91IGNhbiBwcm92aWRlIGBleGNlcHRgIHRvIHByZXZlbnQgaW5kZW50YXRpb24gb2YgbGluZXMgdGhhdFxubWF0Y2ggYSBwYXR0ZXJuIChmb3IgZXhhbXBsZSBgL15lbHNlXFxiL2AgaW4gYGlmYC9gZWxzZWBcbmNvbnN0cnVjdHMpLCBhbmQgeW91IGNhbiBjaGFuZ2UgdGhlIGFtb3VudCBvZiB1bml0cyB1c2VkIHdpdGggdGhlXG5gdW5pdHNgIG9wdGlvbi5cbiovXG5mdW5jdGlvbiBjb250aW51ZWRJbmRlbnQoeyBleGNlcHQsIHVuaXRzID0gMSB9ID0ge30pIHtcbiAgICByZXR1cm4gKGNvbnRleHQpID0+IHtcbiAgICAgICAgbGV0IG1hdGNoRXhjZXB0ID0gZXhjZXB0ICYmIGV4Y2VwdC50ZXN0KGNvbnRleHQudGV4dEFmdGVyKTtcbiAgICAgICAgcmV0dXJuIGNvbnRleHQuYmFzZUluZGVudCArIChtYXRjaEV4Y2VwdCA/IDAgOiB1bml0cyAqIGNvbnRleHQudW5pdCk7XG4gICAgfTtcbn1cbmNvbnN0IERvbnRJbmRlbnRCZXlvbmQgPSAyMDA7XG4vKipcbkVuYWJsZXMgcmVpbmRlbnRhdGlvbiBvbiBpbnB1dC4gV2hlbiBhIGxhbmd1YWdlIGRlZmluZXMgYW5cbmBpbmRlbnRPbklucHV0YCBmaWVsZCBpbiBpdHMgW2xhbmd1YWdlXG5kYXRhXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI3N0YXRlLkVkaXRvclN0YXRlLmxhbmd1YWdlRGF0YUF0KSwgd2hpY2ggbXVzdCBob2xkIGEgcmVndWxhclxuZXhwcmVzc2lvbiwgdGhlIGxpbmUgYXQgdGhlIGN1cnNvciB3aWxsIGJlIHJlaW5kZW50ZWQgd2hlbmV2ZXIgbmV3XG50ZXh0IGlzIHR5cGVkIGFuZCB0aGUgaW5wdXQgZnJvbSB0aGUgc3RhcnQgb2YgdGhlIGxpbmUgdXAgdG8gdGhlXG5jdXJzb3IgbWF0Y2hlcyB0aGF0IHJlZ2V4cC5cblxuVG8gYXZvaWQgdW5uZWNjZXNhcnkgcmVpbmRlbnRzLCBpdCBpcyByZWNvbW1lbmRlZCB0byBzdGFydCB0aGVcbnJlZ2V4cCB3aXRoIGBeYCAodXN1YWxseSBmb2xsb3dlZCBieSBgXFxzKmApLCBhbmQgZW5kIGl0IHdpdGggYCRgLlxuRm9yIGV4YW1wbGUsIGAvXlxccypcXH0kL2Agd2lsbCByZWluZGVudCB3aGVuIGEgY2xvc2luZyBicmFjZSBpc1xuYWRkZWQgYXQgdGhlIHN0YXJ0IG9mIGEgbGluZS5cbiovXG5mdW5jdGlvbiBpbmRlbnRPbklucHV0KCkge1xuICAgIHJldHVybiBFZGl0b3JTdGF0ZS50cmFuc2FjdGlvbkZpbHRlci5vZih0ciA9PiB7XG4gICAgICAgIGlmICghdHIuZG9jQ2hhbmdlZCB8fCAhdHIuaXNVc2VyRXZlbnQoXCJpbnB1dC50eXBlXCIpICYmICF0ci5pc1VzZXJFdmVudChcImlucHV0LmNvbXBsZXRlXCIpKVxuICAgICAgICAgICAgcmV0dXJuIHRyO1xuICAgICAgICBsZXQgcnVsZXMgPSB0ci5zdGFydFN0YXRlLmxhbmd1YWdlRGF0YUF0KFwiaW5kZW50T25JbnB1dFwiLCB0ci5zdGFydFN0YXRlLnNlbGVjdGlvbi5tYWluLmhlYWQpO1xuICAgICAgICBpZiAoIXJ1bGVzLmxlbmd0aClcbiAgICAgICAgICAgIHJldHVybiB0cjtcbiAgICAgICAgbGV0IGRvYyA9IHRyLm5ld0RvYywgeyBoZWFkIH0gPSB0ci5uZXdTZWxlY3Rpb24ubWFpbiwgbGluZSA9IGRvYy5saW5lQXQoaGVhZCk7XG4gICAgICAgIGlmIChoZWFkID4gbGluZS5mcm9tICsgRG9udEluZGVudEJleW9uZClcbiAgICAgICAgICAgIHJldHVybiB0cjtcbiAgICAgICAgbGV0IGxpbmVTdGFydCA9IGRvYy5zbGljZVN0cmluZyhsaW5lLmZyb20sIGhlYWQpO1xuICAgICAgICBpZiAoIXJ1bGVzLnNvbWUociA9PiByLnRlc3QobGluZVN0YXJ0KSkpXG4gICAgICAgICAgICByZXR1cm4gdHI7XG4gICAgICAgIGxldCB7IHN0YXRlIH0gPSB0ciwgbGFzdCA9IC0xLCBjaGFuZ2VzID0gW107XG4gICAgICAgIGZvciAobGV0IHsgaGVhZCB9IG9mIHN0YXRlLnNlbGVjdGlvbi5yYW5nZXMpIHtcbiAgICAgICAgICAgIGxldCBsaW5lID0gc3RhdGUuZG9jLmxpbmVBdChoZWFkKTtcbiAgICAgICAgICAgIGlmIChsaW5lLmZyb20gPT0gbGFzdClcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIGxhc3QgPSBsaW5lLmZyb207XG4gICAgICAgICAgICBsZXQgaW5kZW50ID0gZ2V0SW5kZW50YXRpb24oc3RhdGUsIGxpbmUuZnJvbSk7XG4gICAgICAgICAgICBpZiAoaW5kZW50ID09IG51bGwpXG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICBsZXQgY3VyID0gL15cXHMqLy5leGVjKGxpbmUudGV4dClbMF07XG4gICAgICAgICAgICBsZXQgbm9ybSA9IGluZGVudFN0cmluZyhzdGF0ZSwgaW5kZW50KTtcbiAgICAgICAgICAgIGlmIChjdXIgIT0gbm9ybSlcbiAgICAgICAgICAgICAgICBjaGFuZ2VzLnB1c2goeyBmcm9tOiBsaW5lLmZyb20sIHRvOiBsaW5lLmZyb20gKyBjdXIubGVuZ3RoLCBpbnNlcnQ6IG5vcm0gfSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGNoYW5nZXMubGVuZ3RoID8gW3RyLCB7IGNoYW5nZXMsIHNlcXVlbnRpYWw6IHRydWUgfV0gOiB0cjtcbiAgICB9KTtcbn1cblxuLyoqXG5BIGZhY2V0IHRoYXQgcmVnaXN0ZXJzIGEgY29kZSBmb2xkaW5nIHNlcnZpY2UuIFdoZW4gY2FsbGVkIHdpdGhcbnRoZSBleHRlbnQgb2YgYSBsaW5lLCBzdWNoIGEgZnVuY3Rpb24gc2hvdWxkIHJldHVybiBhIGZvbGRhYmxlXG5yYW5nZSB0aGF0IHN0YXJ0cyBvbiB0aGF0IGxpbmUgKGJ1dCBjb250aW51ZXMgYmV5b25kIGl0KSwgaWYgb25lXG5jYW4gYmUgZm91bmQuXG4qL1xuY29uc3QgZm9sZFNlcnZpY2UgPSAvKkBfX1BVUkVfXyovRmFjZXQuZGVmaW5lKCk7XG4vKipcblRoaXMgbm9kZSBwcm9wIGlzIHVzZWQgdG8gYXNzb2NpYXRlIGZvbGRpbmcgaW5mb3JtYXRpb24gd2l0aFxuc3ludGF4IG5vZGUgdHlwZXMuIEdpdmVuIGEgc3ludGF4IG5vZGUsIGl0IHNob3VsZCBjaGVjayB3aGV0aGVyXG50aGF0IHRyZWUgaXMgZm9sZGFibGUgYW5kIHJldHVybiB0aGUgcmFuZ2UgdGhhdCBjYW4gYmUgY29sbGFwc2VkXG53aGVuIGl0IGlzLlxuKi9cbmNvbnN0IGZvbGROb2RlUHJvcCA9IC8qQF9fUFVSRV9fKi9uZXcgTm9kZVByb3AoKTtcbi8qKlxuW0ZvbGRdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jbGFuZ3VhZ2UuZm9sZE5vZGVQcm9wKSBmdW5jdGlvbiB0aGF0IGZvbGRzIGV2ZXJ5dGhpbmcgYnV0XG50aGUgZmlyc3QgYW5kIHRoZSBsYXN0IGNoaWxkIG9mIGEgc3ludGF4IG5vZGUuIFVzZWZ1bCBmb3Igbm9kZXNcbnRoYXQgc3RhcnQgYW5kIGVuZCB3aXRoIGRlbGltaXRlcnMuXG4qL1xuZnVuY3Rpb24gZm9sZEluc2lkZShub2RlKSB7XG4gICAgbGV0IGZpcnN0ID0gbm9kZS5maXJzdENoaWxkLCBsYXN0ID0gbm9kZS5sYXN0Q2hpbGQ7XG4gICAgcmV0dXJuIGZpcnN0ICYmIGZpcnN0LnRvIDwgbGFzdC5mcm9tID8geyBmcm9tOiBmaXJzdC50bywgdG86IGxhc3QudHlwZS5pc0Vycm9yID8gbm9kZS50byA6IGxhc3QuZnJvbSB9IDogbnVsbDtcbn1cbmZ1bmN0aW9uIHN5bnRheEZvbGRpbmcoc3RhdGUsIHN0YXJ0LCBlbmQpIHtcbiAgICBsZXQgdHJlZSA9IHN5bnRheFRyZWUoc3RhdGUpO1xuICAgIGlmICh0cmVlLmxlbmd0aCA8IGVuZClcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgbGV0IHN0YWNrID0gdHJlZS5yZXNvbHZlU3RhY2soZW5kLCAxKTtcbiAgICBsZXQgZm91bmQgPSBudWxsO1xuICAgIGZvciAobGV0IGl0ZXIgPSBzdGFjazsgaXRlcjsgaXRlciA9IGl0ZXIubmV4dCkge1xuICAgICAgICBsZXQgY3VyID0gaXRlci5ub2RlO1xuICAgICAgICBpZiAoY3VyLnRvIDw9IGVuZCB8fCBjdXIuZnJvbSA+IGVuZClcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICBpZiAoZm91bmQgJiYgY3VyLmZyb20gPCBzdGFydClcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBsZXQgcHJvcCA9IGN1ci50eXBlLnByb3AoZm9sZE5vZGVQcm9wKTtcbiAgICAgICAgaWYgKHByb3AgJiYgKGN1ci50byA8IHRyZWUubGVuZ3RoIC0gNTAgfHwgdHJlZS5sZW5ndGggPT0gc3RhdGUuZG9jLmxlbmd0aCB8fCAhaXNVbmZpbmlzaGVkKGN1cikpKSB7XG4gICAgICAgICAgICBsZXQgdmFsdWUgPSBwcm9wKGN1ciwgc3RhdGUpO1xuICAgICAgICAgICAgaWYgKHZhbHVlICYmIHZhbHVlLmZyb20gPD0gZW5kICYmIHZhbHVlLmZyb20gPj0gc3RhcnQgJiYgdmFsdWUudG8gPiBlbmQpXG4gICAgICAgICAgICAgICAgZm91bmQgPSB2YWx1ZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZm91bmQ7XG59XG5mdW5jdGlvbiBpc1VuZmluaXNoZWQobm9kZSkge1xuICAgIGxldCBjaCA9IG5vZGUubGFzdENoaWxkO1xuICAgIHJldHVybiBjaCAmJiBjaC50byA9PSBub2RlLnRvICYmIGNoLnR5cGUuaXNFcnJvcjtcbn1cbi8qKlxuQ2hlY2sgd2hldGhlciB0aGUgZ2l2ZW4gbGluZSBpcyBmb2xkYWJsZS4gRmlyc3QgYXNrcyBhbnkgZm9sZFxuc2VydmljZXMgcmVnaXN0ZXJlZCB0aHJvdWdoXG5bYGZvbGRTZXJ2aWNlYF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNsYW5ndWFnZS5mb2xkU2VydmljZSksIGFuZCBpZiBub25lIG9mIHRoZW0gcmV0dXJuXG5hIHJlc3VsdCwgdHJpZXMgdG8gcXVlcnkgdGhlIFtmb2xkIG5vZGVcbnByb3BdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jbGFuZ3VhZ2UuZm9sZE5vZGVQcm9wKSBvZiBzeW50YXggbm9kZXMgdGhhdCBjb3ZlciB0aGUgZW5kXG5vZiB0aGUgbGluZS5cbiovXG5mdW5jdGlvbiBmb2xkYWJsZShzdGF0ZSwgbGluZVN0YXJ0LCBsaW5lRW5kKSB7XG4gICAgZm9yIChsZXQgc2VydmljZSBvZiBzdGF0ZS5mYWNldChmb2xkU2VydmljZSkpIHtcbiAgICAgICAgbGV0IHJlc3VsdCA9IHNlcnZpY2Uoc3RhdGUsIGxpbmVTdGFydCwgbGluZUVuZCk7XG4gICAgICAgIGlmIChyZXN1bHQpXG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cbiAgICByZXR1cm4gc3ludGF4Rm9sZGluZyhzdGF0ZSwgbGluZVN0YXJ0LCBsaW5lRW5kKTtcbn1cbmZ1bmN0aW9uIG1hcFJhbmdlKHJhbmdlLCBtYXBwaW5nKSB7XG4gICAgbGV0IGZyb20gPSBtYXBwaW5nLm1hcFBvcyhyYW5nZS5mcm9tLCAxKSwgdG8gPSBtYXBwaW5nLm1hcFBvcyhyYW5nZS50bywgLTEpO1xuICAgIHJldHVybiBmcm9tID49IHRvID8gdW5kZWZpbmVkIDogeyBmcm9tLCB0byB9O1xufVxuLyoqXG5TdGF0ZSBlZmZlY3QgdGhhdCBjYW4gYmUgYXR0YWNoZWQgdG8gYSB0cmFuc2FjdGlvbiB0byBmb2xkIHRoZVxuZ2l2ZW4gcmFuZ2UuIChZb3UgcHJvYmFibHkgb25seSBuZWVkIHRoaXMgaW4gZXhjZXB0aW9uYWxcbmNpcmN1bXN0YW5jZXPigJR1c3VhbGx5IHlvdSdsbCBqdXN0IHdhbnQgdG8gbGV0XG5bYGZvbGRDb2RlYF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNsYW5ndWFnZS5mb2xkQ29kZSkgYW5kIHRoZSBbZm9sZFxuZ3V0dGVyXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI2xhbmd1YWdlLmZvbGRHdXR0ZXIpIGNyZWF0ZSB0aGUgdHJhbnNhY3Rpb25zLilcbiovXG5jb25zdCBmb2xkRWZmZWN0ID0gLypAX19QVVJFX18qL1N0YXRlRWZmZWN0LmRlZmluZSh7IG1hcDogbWFwUmFuZ2UgfSk7XG4vKipcblN0YXRlIGVmZmVjdCB0aGF0IHVuZm9sZHMgdGhlIGdpdmVuIHJhbmdlIChpZiBpdCB3YXMgZm9sZGVkKS5cbiovXG5jb25zdCB1bmZvbGRFZmZlY3QgPSAvKkBfX1BVUkVfXyovU3RhdGVFZmZlY3QuZGVmaW5lKHsgbWFwOiBtYXBSYW5nZSB9KTtcbmZ1bmN0aW9uIHNlbGVjdGVkTGluZXModmlldykge1xuICAgIGxldCBsaW5lcyA9IFtdO1xuICAgIGZvciAobGV0IHsgaGVhZCB9IG9mIHZpZXcuc3RhdGUuc2VsZWN0aW9uLnJhbmdlcykge1xuICAgICAgICBpZiAobGluZXMuc29tZShsID0+IGwuZnJvbSA8PSBoZWFkICYmIGwudG8gPj0gaGVhZCkpXG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgbGluZXMucHVzaCh2aWV3LmxpbmVCbG9ja0F0KGhlYWQpKTtcbiAgICB9XG4gICAgcmV0dXJuIGxpbmVzO1xufVxuLyoqXG5UaGUgc3RhdGUgZmllbGQgdGhhdCBzdG9yZXMgdGhlIGZvbGRlZCByYW5nZXMgKGFzIGEgW2RlY29yYXRpb25cbnNldF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyN2aWV3LkRlY29yYXRpb25TZXQpKS4gQ2FuIGJlIHBhc3NlZCB0b1xuW2BFZGl0b3JTdGF0ZS50b0pTT05gXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI3N0YXRlLkVkaXRvclN0YXRlLnRvSlNPTikgYW5kXG5bYGZyb21KU09OYF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNzdGF0ZS5FZGl0b3JTdGF0ZV5mcm9tSlNPTikgdG8gc2VyaWFsaXplIHRoZSBmb2xkXG5zdGF0ZS5cbiovXG5jb25zdCBmb2xkU3RhdGUgPSAvKkBfX1BVUkVfXyovU3RhdGVGaWVsZC5kZWZpbmUoe1xuICAgIGNyZWF0ZSgpIHtcbiAgICAgICAgcmV0dXJuIERlY29yYXRpb24ubm9uZTtcbiAgICB9LFxuICAgIHVwZGF0ZShmb2xkZWQsIHRyKSB7XG4gICAgICAgIGlmICh0ci5pc1VzZXJFdmVudChcImRlbGV0ZVwiKSlcbiAgICAgICAgICAgIHRyLmNoYW5nZXMuaXRlckNoYW5nZWRSYW5nZXMoKGZyb21BLCB0b0EpID0+IGZvbGRlZCA9IGNsZWFyVG91Y2hlZEZvbGRzKGZvbGRlZCwgZnJvbUEsIHRvQSkpO1xuICAgICAgICBmb2xkZWQgPSBmb2xkZWQubWFwKHRyLmNoYW5nZXMpO1xuICAgICAgICBmb3IgKGxldCBlIG9mIHRyLmVmZmVjdHMpIHtcbiAgICAgICAgICAgIGlmIChlLmlzKGZvbGRFZmZlY3QpICYmICFmb2xkRXhpc3RzKGZvbGRlZCwgZS52YWx1ZS5mcm9tLCBlLnZhbHVlLnRvKSkge1xuICAgICAgICAgICAgICAgIGxldCB7IHByZXBhcmVQbGFjZWhvbGRlciB9ID0gdHIuc3RhdGUuZmFjZXQoZm9sZENvbmZpZyk7XG4gICAgICAgICAgICAgICAgbGV0IHdpZGdldCA9ICFwcmVwYXJlUGxhY2Vob2xkZXIgPyBmb2xkV2lkZ2V0IDpcbiAgICAgICAgICAgICAgICAgICAgRGVjb3JhdGlvbi5yZXBsYWNlKHsgd2lkZ2V0OiBuZXcgUHJlcGFyZWRGb2xkV2lkZ2V0KHByZXBhcmVQbGFjZWhvbGRlcih0ci5zdGF0ZSwgZS52YWx1ZSkpIH0pO1xuICAgICAgICAgICAgICAgIGZvbGRlZCA9IGZvbGRlZC51cGRhdGUoeyBhZGQ6IFt3aWRnZXQucmFuZ2UoZS52YWx1ZS5mcm9tLCBlLnZhbHVlLnRvKV0gfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChlLmlzKHVuZm9sZEVmZmVjdCkpIHtcbiAgICAgICAgICAgICAgICBmb2xkZWQgPSBmb2xkZWQudXBkYXRlKHsgZmlsdGVyOiAoZnJvbSwgdG8pID0+IGUudmFsdWUuZnJvbSAhPSBmcm9tIHx8IGUudmFsdWUudG8gIT0gdG8sXG4gICAgICAgICAgICAgICAgICAgIGZpbHRlckZyb206IGUudmFsdWUuZnJvbSwgZmlsdGVyVG86IGUudmFsdWUudG8gfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLy8gQ2xlYXIgZm9sZGVkIHJhbmdlcyB0aGF0IGNvdmVyIHRoZSBzZWxlY3Rpb24gaGVhZFxuICAgICAgICBpZiAodHIuc2VsZWN0aW9uKVxuICAgICAgICAgICAgZm9sZGVkID0gY2xlYXJUb3VjaGVkRm9sZHMoZm9sZGVkLCB0ci5zZWxlY3Rpb24ubWFpbi5oZWFkKTtcbiAgICAgICAgcmV0dXJuIGZvbGRlZDtcbiAgICB9LFxuICAgIHByb3ZpZGU6IGYgPT4gRWRpdG9yVmlldy5kZWNvcmF0aW9ucy5mcm9tKGYpLFxuICAgIHRvSlNPTihmb2xkZWQsIHN0YXRlKSB7XG4gICAgICAgIGxldCByYW5nZXMgPSBbXTtcbiAgICAgICAgZm9sZGVkLmJldHdlZW4oMCwgc3RhdGUuZG9jLmxlbmd0aCwgKGZyb20sIHRvKSA9PiB7IHJhbmdlcy5wdXNoKGZyb20sIHRvKTsgfSk7XG4gICAgICAgIHJldHVybiByYW5nZXM7XG4gICAgfSxcbiAgICBmcm9tSlNPTih2YWx1ZSkge1xuICAgICAgICBpZiAoIUFycmF5LmlzQXJyYXkodmFsdWUpIHx8IHZhbHVlLmxlbmd0aCAlIDIpXG4gICAgICAgICAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcihcIkludmFsaWQgSlNPTiBmb3IgZm9sZCBzdGF0ZVwiKTtcbiAgICAgICAgbGV0IHJhbmdlcyA9IFtdO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHZhbHVlLmxlbmd0aDspIHtcbiAgICAgICAgICAgIGxldCBmcm9tID0gdmFsdWVbaSsrXSwgdG8gPSB2YWx1ZVtpKytdO1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBmcm9tICE9IFwibnVtYmVyXCIgfHwgdHlwZW9mIHRvICE9IFwibnVtYmVyXCIpXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoXCJJbnZhbGlkIEpTT04gZm9yIGZvbGQgc3RhdGVcIik7XG4gICAgICAgICAgICByYW5nZXMucHVzaChmb2xkV2lkZ2V0LnJhbmdlKGZyb20sIHRvKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIERlY29yYXRpb24uc2V0KHJhbmdlcywgdHJ1ZSk7XG4gICAgfVxufSk7XG5mdW5jdGlvbiBjbGVhclRvdWNoZWRGb2xkcyhmb2xkZWQsIGZyb20sIHRvID0gZnJvbSkge1xuICAgIGxldCB0b3VjaGVkID0gZmFsc2U7XG4gICAgZm9sZGVkLmJldHdlZW4oZnJvbSwgdG8sIChhLCBiKSA9PiB7IGlmIChhIDwgdG8gJiYgYiA+IGZyb20pXG4gICAgICAgIHRvdWNoZWQgPSB0cnVlOyB9KTtcbiAgICByZXR1cm4gIXRvdWNoZWQgPyBmb2xkZWQgOiBmb2xkZWQudXBkYXRlKHtcbiAgICAgICAgZmlsdGVyRnJvbTogZnJvbSxcbiAgICAgICAgZmlsdGVyVG86IHRvLFxuICAgICAgICBmaWx0ZXI6IChhLCBiKSA9PiBhID49IHRvIHx8IGIgPD0gZnJvbVxuICAgIH0pO1xufVxuLyoqXG5HZXQgYSBbcmFuZ2Ugc2V0XShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI3N0YXRlLlJhbmdlU2V0KSBjb250YWluaW5nIHRoZSBmb2xkZWQgcmFuZ2VzXG5pbiB0aGUgZ2l2ZW4gc3RhdGUuXG4qL1xuZnVuY3Rpb24gZm9sZGVkUmFuZ2VzKHN0YXRlKSB7XG4gICAgcmV0dXJuIHN0YXRlLmZpZWxkKGZvbGRTdGF0ZSwgZmFsc2UpIHx8IFJhbmdlU2V0LmVtcHR5O1xufVxuZnVuY3Rpb24gZmluZEZvbGQoc3RhdGUsIGZyb20sIHRvKSB7XG4gICAgdmFyIF9hO1xuICAgIGxldCBmb3VuZCA9IG51bGw7XG4gICAgKF9hID0gc3RhdGUuZmllbGQoZm9sZFN0YXRlLCBmYWxzZSkpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5iZXR3ZWVuKGZyb20sIHRvLCAoZnJvbSwgdG8pID0+IHtcbiAgICAgICAgaWYgKCFmb3VuZCB8fCBmb3VuZC5mcm9tID4gZnJvbSlcbiAgICAgICAgICAgIGZvdW5kID0geyBmcm9tLCB0byB9O1xuICAgIH0pO1xuICAgIHJldHVybiBmb3VuZDtcbn1cbmZ1bmN0aW9uIGZvbGRFeGlzdHMoZm9sZGVkLCBmcm9tLCB0bykge1xuICAgIGxldCBmb3VuZCA9IGZhbHNlO1xuICAgIGZvbGRlZC5iZXR3ZWVuKGZyb20sIGZyb20sIChhLCBiKSA9PiB7IGlmIChhID09IGZyb20gJiYgYiA9PSB0bylcbiAgICAgICAgZm91bmQgPSB0cnVlOyB9KTtcbiAgICByZXR1cm4gZm91bmQ7XG59XG5mdW5jdGlvbiBtYXliZUVuYWJsZShzdGF0ZSwgb3RoZXIpIHtcbiAgICByZXR1cm4gc3RhdGUuZmllbGQoZm9sZFN0YXRlLCBmYWxzZSkgPyBvdGhlciA6IG90aGVyLmNvbmNhdChTdGF0ZUVmZmVjdC5hcHBlbmRDb25maWcub2YoY29kZUZvbGRpbmcoKSkpO1xufVxuLyoqXG5Gb2xkIHRoZSBsaW5lcyB0aGF0IGFyZSBzZWxlY3RlZCwgaWYgcG9zc2libGUuXG4qL1xuY29uc3QgZm9sZENvZGUgPSB2aWV3ID0+IHtcbiAgICBmb3IgKGxldCBsaW5lIG9mIHNlbGVjdGVkTGluZXModmlldykpIHtcbiAgICAgICAgbGV0IHJhbmdlID0gZm9sZGFibGUodmlldy5zdGF0ZSwgbGluZS5mcm9tLCBsaW5lLnRvKTtcbiAgICAgICAgaWYgKHJhbmdlKSB7XG4gICAgICAgICAgICB2aWV3LmRpc3BhdGNoKHsgZWZmZWN0czogbWF5YmVFbmFibGUodmlldy5zdGF0ZSwgW2ZvbGRFZmZlY3Qub2YocmFuZ2UpLCBhbm5vdW5jZUZvbGQodmlldywgcmFuZ2UpXSkgfSk7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG59O1xuLyoqXG5VbmZvbGQgZm9sZGVkIHJhbmdlcyBvbiBzZWxlY3RlZCBsaW5lcy5cbiovXG5jb25zdCB1bmZvbGRDb2RlID0gdmlldyA9PiB7XG4gICAgaWYgKCF2aWV3LnN0YXRlLmZpZWxkKGZvbGRTdGF0ZSwgZmFsc2UpKVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgbGV0IGVmZmVjdHMgPSBbXTtcbiAgICBmb3IgKGxldCBsaW5lIG9mIHNlbGVjdGVkTGluZXModmlldykpIHtcbiAgICAgICAgbGV0IGZvbGRlZCA9IGZpbmRGb2xkKHZpZXcuc3RhdGUsIGxpbmUuZnJvbSwgbGluZS50byk7XG4gICAgICAgIGlmIChmb2xkZWQpXG4gICAgICAgICAgICBlZmZlY3RzLnB1c2godW5mb2xkRWZmZWN0Lm9mKGZvbGRlZCksIGFubm91bmNlRm9sZCh2aWV3LCBmb2xkZWQsIGZhbHNlKSk7XG4gICAgfVxuICAgIGlmIChlZmZlY3RzLmxlbmd0aClcbiAgICAgICAgdmlldy5kaXNwYXRjaCh7IGVmZmVjdHMgfSk7XG4gICAgcmV0dXJuIGVmZmVjdHMubGVuZ3RoID4gMDtcbn07XG5mdW5jdGlvbiBhbm5vdW5jZUZvbGQodmlldywgcmFuZ2UsIGZvbGQgPSB0cnVlKSB7XG4gICAgbGV0IGxpbmVGcm9tID0gdmlldy5zdGF0ZS5kb2MubGluZUF0KHJhbmdlLmZyb20pLm51bWJlciwgbGluZVRvID0gdmlldy5zdGF0ZS5kb2MubGluZUF0KHJhbmdlLnRvKS5udW1iZXI7XG4gICAgcmV0dXJuIEVkaXRvclZpZXcuYW5ub3VuY2Uub2YoYCR7dmlldy5zdGF0ZS5waHJhc2UoZm9sZCA/IFwiRm9sZGVkIGxpbmVzXCIgOiBcIlVuZm9sZGVkIGxpbmVzXCIpfSAke2xpbmVGcm9tfSAke3ZpZXcuc3RhdGUucGhyYXNlKFwidG9cIil9ICR7bGluZVRvfS5gKTtcbn1cbi8qKlxuRm9sZCBhbGwgdG9wLWxldmVsIGZvbGRhYmxlIHJhbmdlcy4gTm90ZSB0aGF0LCBpbiBtb3N0IGNhc2VzLFxuZm9sZGluZyBpbmZvcm1hdGlvbiB3aWxsIGRlcGVuZCBvbiB0aGUgW3N5bnRheFxudHJlZV0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNsYW5ndWFnZS5zeW50YXhUcmVlKSwgYW5kIGZvbGRpbmcgZXZlcnl0aGluZyBtYXkgbm90IHdvcmtcbnJlbGlhYmx5IHdoZW4gdGhlIGRvY3VtZW50IGhhc24ndCBiZWVuIGZ1bGx5IHBhcnNlZCAoZWl0aGVyXG5iZWNhdXNlIHRoZSBlZGl0b3Igc3RhdGUgd2FzIG9ubHkganVzdCBpbml0aWFsaXplZCwgb3IgYmVjYXVzZSB0aGVcbmRvY3VtZW50IGlzIHNvIGJpZyB0aGF0IHRoZSBwYXJzZXIgZGVjaWRlZCBub3QgdG8gcGFyc2UgaXRcbmVudGlyZWx5KS5cbiovXG5jb25zdCBmb2xkQWxsID0gdmlldyA9PiB7XG4gICAgbGV0IHsgc3RhdGUgfSA9IHZpZXcsIGVmZmVjdHMgPSBbXTtcbiAgICBmb3IgKGxldCBwb3MgPSAwOyBwb3MgPCBzdGF0ZS5kb2MubGVuZ3RoOykge1xuICAgICAgICBsZXQgbGluZSA9IHZpZXcubGluZUJsb2NrQXQocG9zKSwgcmFuZ2UgPSBmb2xkYWJsZShzdGF0ZSwgbGluZS5mcm9tLCBsaW5lLnRvKTtcbiAgICAgICAgaWYgKHJhbmdlKVxuICAgICAgICAgICAgZWZmZWN0cy5wdXNoKGZvbGRFZmZlY3Qub2YocmFuZ2UpKTtcbiAgICAgICAgcG9zID0gKHJhbmdlID8gdmlldy5saW5lQmxvY2tBdChyYW5nZS50bykgOiBsaW5lKS50byArIDE7XG4gICAgfVxuICAgIGlmIChlZmZlY3RzLmxlbmd0aClcbiAgICAgICAgdmlldy5kaXNwYXRjaCh7IGVmZmVjdHM6IG1heWJlRW5hYmxlKHZpZXcuc3RhdGUsIGVmZmVjdHMpIH0pO1xuICAgIHJldHVybiAhIWVmZmVjdHMubGVuZ3RoO1xufTtcbi8qKlxuVW5mb2xkIGFsbCBmb2xkZWQgY29kZS5cbiovXG5jb25zdCB1bmZvbGRBbGwgPSB2aWV3ID0+IHtcbiAgICBsZXQgZmllbGQgPSB2aWV3LnN0YXRlLmZpZWxkKGZvbGRTdGF0ZSwgZmFsc2UpO1xuICAgIGlmICghZmllbGQgfHwgIWZpZWxkLnNpemUpXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICBsZXQgZWZmZWN0cyA9IFtdO1xuICAgIGZpZWxkLmJldHdlZW4oMCwgdmlldy5zdGF0ZS5kb2MubGVuZ3RoLCAoZnJvbSwgdG8pID0+IHsgZWZmZWN0cy5wdXNoKHVuZm9sZEVmZmVjdC5vZih7IGZyb20sIHRvIH0pKTsgfSk7XG4gICAgdmlldy5kaXNwYXRjaCh7IGVmZmVjdHMgfSk7XG4gICAgcmV0dXJuIHRydWU7XG59O1xuLy8gRmluZCB0aGUgZm9sZGFibGUgcmVnaW9uIGNvbnRhaW5pbmcgdGhlIGdpdmVuIGxpbmUsIGlmIG9uZSBleGlzdHNcbmZ1bmN0aW9uIGZvbGRhYmxlQ29udGFpbmVyKHZpZXcsIGxpbmVCbG9jaykge1xuICAgIC8vIExvb2sgYmFja3dhcmRzIHRocm91Z2ggbGluZSBibG9ja3MgdW50aWwgd2UgZmluZCBhIGZvbGRhYmxlIHJlZ2lvbiB0aGF0XG4gICAgLy8gaW50ZXJzZWN0cyB3aXRoIHRoZSBsaW5lXG4gICAgZm9yIChsZXQgbGluZSA9IGxpbmVCbG9jazs7KSB7XG4gICAgICAgIGxldCBmb2xkYWJsZVJlZ2lvbiA9IGZvbGRhYmxlKHZpZXcuc3RhdGUsIGxpbmUuZnJvbSwgbGluZS50byk7XG4gICAgICAgIGlmIChmb2xkYWJsZVJlZ2lvbiAmJiBmb2xkYWJsZVJlZ2lvbi50byA+IGxpbmVCbG9jay5mcm9tKVxuICAgICAgICAgICAgcmV0dXJuIGZvbGRhYmxlUmVnaW9uO1xuICAgICAgICBpZiAoIWxpbmUuZnJvbSlcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICBsaW5lID0gdmlldy5saW5lQmxvY2tBdChsaW5lLmZyb20gLSAxKTtcbiAgICB9XG59XG4vKipcblRvZ2dsZSBmb2xkaW5nIGF0IGN1cnNvcnMuIFVuZm9sZHMgaWYgdGhlcmUgaXMgYW4gZXhpc3RpbmcgZm9sZFxuc3RhcnRpbmcgaW4gdGhhdCBsaW5lLCB0cmllcyB0byBmaW5kIGEgZm9sZGFibGUgcmFuZ2UgYXJvdW5kIGl0XG5vdGhlcndpc2UuXG4qL1xuY29uc3QgdG9nZ2xlRm9sZCA9ICh2aWV3KSA9PiB7XG4gICAgbGV0IGVmZmVjdHMgPSBbXTtcbiAgICBmb3IgKGxldCBsaW5lIG9mIHNlbGVjdGVkTGluZXModmlldykpIHtcbiAgICAgICAgbGV0IGZvbGRlZCA9IGZpbmRGb2xkKHZpZXcuc3RhdGUsIGxpbmUuZnJvbSwgbGluZS50byk7XG4gICAgICAgIGlmIChmb2xkZWQpIHtcbiAgICAgICAgICAgIGVmZmVjdHMucHVzaCh1bmZvbGRFZmZlY3Qub2YoZm9sZGVkKSwgYW5ub3VuY2VGb2xkKHZpZXcsIGZvbGRlZCwgZmFsc2UpKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGxldCBmb2xkUmFuZ2UgPSBmb2xkYWJsZUNvbnRhaW5lcih2aWV3LCBsaW5lKTtcbiAgICAgICAgICAgIGlmIChmb2xkUmFuZ2UpXG4gICAgICAgICAgICAgICAgZWZmZWN0cy5wdXNoKGZvbGRFZmZlY3Qub2YoZm9sZFJhbmdlKSwgYW5ub3VuY2VGb2xkKHZpZXcsIGZvbGRSYW5nZSkpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGlmIChlZmZlY3RzLmxlbmd0aCA+IDApXG4gICAgICAgIHZpZXcuZGlzcGF0Y2goeyBlZmZlY3RzOiBtYXliZUVuYWJsZSh2aWV3LnN0YXRlLCBlZmZlY3RzKSB9KTtcbiAgICByZXR1cm4gISFlZmZlY3RzLmxlbmd0aDtcbn07XG4vKipcbkRlZmF1bHQgZm9sZC1yZWxhdGVkIGtleSBiaW5kaW5ncy5cblxuIC0gQ3RybC1TaGlmdC1bIChDbWQtQWx0LVsgb24gbWFjT1MpOiBbYGZvbGRDb2RlYF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNsYW5ndWFnZS5mb2xkQ29kZSkuXG4gLSBDdHJsLVNoaWZ0LV0gKENtZC1BbHQtXSBvbiBtYWNPUyk6IFtgdW5mb2xkQ29kZWBdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jbGFuZ3VhZ2UudW5mb2xkQ29kZSkuXG4gLSBDdHJsLUFsdC1bOiBbYGZvbGRBbGxgXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI2xhbmd1YWdlLmZvbGRBbGwpLlxuIC0gQ3RybC1BbHQtXTogW2B1bmZvbGRBbGxgXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI2xhbmd1YWdlLnVuZm9sZEFsbCkuXG4qL1xuY29uc3QgZm9sZEtleW1hcCA9IFtcbiAgICB7IGtleTogXCJDdHJsLVNoaWZ0LVtcIiwgbWFjOiBcIkNtZC1BbHQtW1wiLCBydW46IGZvbGRDb2RlIH0sXG4gICAgeyBrZXk6IFwiQ3RybC1TaGlmdC1dXCIsIG1hYzogXCJDbWQtQWx0LV1cIiwgcnVuOiB1bmZvbGRDb2RlIH0sXG4gICAgeyBrZXk6IFwiQ3RybC1BbHQtW1wiLCBydW46IGZvbGRBbGwgfSxcbiAgICB7IGtleTogXCJDdHJsLUFsdC1dXCIsIHJ1bjogdW5mb2xkQWxsIH1cbl07XG5jb25zdCBkZWZhdWx0Q29uZmlnID0ge1xuICAgIHBsYWNlaG9sZGVyRE9NOiBudWxsLFxuICAgIHByZXBhcmVQbGFjZWhvbGRlcjogbnVsbCxcbiAgICBwbGFjZWhvbGRlclRleHQ6IFwi4oCmXCJcbn07XG5jb25zdCBmb2xkQ29uZmlnID0gLypAX19QVVJFX18qL0ZhY2V0LmRlZmluZSh7XG4gICAgY29tYmluZSh2YWx1ZXMpIHsgcmV0dXJuIGNvbWJpbmVDb25maWcodmFsdWVzLCBkZWZhdWx0Q29uZmlnKTsgfVxufSk7XG4vKipcbkNyZWF0ZSBhbiBleHRlbnNpb24gdGhhdCBjb25maWd1cmVzIGNvZGUgZm9sZGluZy5cbiovXG5mdW5jdGlvbiBjb2RlRm9sZGluZyhjb25maWcpIHtcbiAgICBsZXQgcmVzdWx0ID0gW2ZvbGRTdGF0ZSwgYmFzZVRoZW1lJDFdO1xuICAgIGlmIChjb25maWcpXG4gICAgICAgIHJlc3VsdC5wdXNoKGZvbGRDb25maWcub2YoY29uZmlnKSk7XG4gICAgcmV0dXJuIHJlc3VsdDtcbn1cbmZ1bmN0aW9uIHdpZGdldFRvRE9NKHZpZXcsIHByZXBhcmVkKSB7XG4gICAgbGV0IHsgc3RhdGUgfSA9IHZpZXcsIGNvbmYgPSBzdGF0ZS5mYWNldChmb2xkQ29uZmlnKTtcbiAgICBsZXQgb25jbGljayA9IChldmVudCkgPT4ge1xuICAgICAgICBsZXQgbGluZSA9IHZpZXcubGluZUJsb2NrQXQodmlldy5wb3NBdERPTShldmVudC50YXJnZXQpKTtcbiAgICAgICAgbGV0IGZvbGRlZCA9IGZpbmRGb2xkKHZpZXcuc3RhdGUsIGxpbmUuZnJvbSwgbGluZS50byk7XG4gICAgICAgIGlmIChmb2xkZWQpXG4gICAgICAgICAgICB2aWV3LmRpc3BhdGNoKHsgZWZmZWN0czogdW5mb2xkRWZmZWN0Lm9mKGZvbGRlZCkgfSk7XG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgfTtcbiAgICBpZiAoY29uZi5wbGFjZWhvbGRlckRPTSlcbiAgICAgICAgcmV0dXJuIGNvbmYucGxhY2Vob2xkZXJET00odmlldywgb25jbGljaywgcHJlcGFyZWQpO1xuICAgIGxldCBlbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNwYW5cIik7XG4gICAgZWxlbWVudC50ZXh0Q29udGVudCA9IGNvbmYucGxhY2Vob2xkZXJUZXh0O1xuICAgIGVsZW1lbnQuc2V0QXR0cmlidXRlKFwiYXJpYS1sYWJlbFwiLCBzdGF0ZS5waHJhc2UoXCJmb2xkZWQgY29kZVwiKSk7XG4gICAgZWxlbWVudC50aXRsZSA9IHN0YXRlLnBocmFzZShcInVuZm9sZFwiKTtcbiAgICBlbGVtZW50LmNsYXNzTmFtZSA9IFwiY20tZm9sZFBsYWNlaG9sZGVyXCI7XG4gICAgZWxlbWVudC5vbmNsaWNrID0gb25jbGljaztcbiAgICByZXR1cm4gZWxlbWVudDtcbn1cbmNvbnN0IGZvbGRXaWRnZXQgPSAvKkBfX1BVUkVfXyovRGVjb3JhdGlvbi5yZXBsYWNlKHsgd2lkZ2V0OiAvKkBfX1BVUkVfXyovbmV3IGNsYXNzIGV4dGVuZHMgV2lkZ2V0VHlwZSB7XG4gICAgICAgIHRvRE9NKHZpZXcpIHsgcmV0dXJuIHdpZGdldFRvRE9NKHZpZXcsIG51bGwpOyB9XG4gICAgfSB9KTtcbmNsYXNzIFByZXBhcmVkRm9sZFdpZGdldCBleHRlbmRzIFdpZGdldFR5cGUge1xuICAgIGNvbnN0cnVjdG9yKHZhbHVlKSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIHRoaXMudmFsdWUgPSB2YWx1ZTtcbiAgICB9XG4gICAgZXEob3RoZXIpIHsgcmV0dXJuIHRoaXMudmFsdWUgPT0gb3RoZXIudmFsdWU7IH1cbiAgICB0b0RPTSh2aWV3KSB7IHJldHVybiB3aWRnZXRUb0RPTSh2aWV3LCB0aGlzLnZhbHVlKTsgfVxufVxuY29uc3QgZm9sZEd1dHRlckRlZmF1bHRzID0ge1xuICAgIG9wZW5UZXh0OiBcIuKMhFwiLFxuICAgIGNsb3NlZFRleHQ6IFwi4oC6XCIsXG4gICAgbWFya2VyRE9NOiBudWxsLFxuICAgIGRvbUV2ZW50SGFuZGxlcnM6IHt9LFxuICAgIGZvbGRpbmdDaGFuZ2VkOiAoKSA9PiBmYWxzZVxufTtcbmNsYXNzIEZvbGRNYXJrZXIgZXh0ZW5kcyBHdXR0ZXJNYXJrZXIge1xuICAgIGNvbnN0cnVjdG9yKGNvbmZpZywgb3Blbikge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLmNvbmZpZyA9IGNvbmZpZztcbiAgICAgICAgdGhpcy5vcGVuID0gb3BlbjtcbiAgICB9XG4gICAgZXEob3RoZXIpIHsgcmV0dXJuIHRoaXMuY29uZmlnID09IG90aGVyLmNvbmZpZyAmJiB0aGlzLm9wZW4gPT0gb3RoZXIub3BlbjsgfVxuICAgIHRvRE9NKHZpZXcpIHtcbiAgICAgICAgaWYgKHRoaXMuY29uZmlnLm1hcmtlckRPTSlcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbmZpZy5tYXJrZXJET00odGhpcy5vcGVuKTtcbiAgICAgICAgbGV0IHNwYW4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3BhblwiKTtcbiAgICAgICAgc3Bhbi50ZXh0Q29udGVudCA9IHRoaXMub3BlbiA/IHRoaXMuY29uZmlnLm9wZW5UZXh0IDogdGhpcy5jb25maWcuY2xvc2VkVGV4dDtcbiAgICAgICAgc3Bhbi50aXRsZSA9IHZpZXcuc3RhdGUucGhyYXNlKHRoaXMub3BlbiA/IFwiRm9sZCBsaW5lXCIgOiBcIlVuZm9sZCBsaW5lXCIpO1xuICAgICAgICByZXR1cm4gc3BhbjtcbiAgICB9XG59XG4vKipcbkNyZWF0ZSBhbiBleHRlbnNpb24gdGhhdCByZWdpc3RlcnMgYSBmb2xkIGd1dHRlciwgd2hpY2ggc2hvd3MgYVxuZm9sZCBzdGF0dXMgaW5kaWNhdG9yIGJlZm9yZSBmb2xkYWJsZSBsaW5lcyAod2hpY2ggY2FuIGJlIGNsaWNrZWRcbnRvIGZvbGQgb3IgdW5mb2xkIHRoZSBsaW5lKS5cbiovXG5mdW5jdGlvbiBmb2xkR3V0dGVyKGNvbmZpZyA9IHt9KSB7XG4gICAgbGV0IGZ1bGxDb25maWcgPSB7IC4uLmZvbGRHdXR0ZXJEZWZhdWx0cywgLi4uY29uZmlnIH07XG4gICAgbGV0IGNhbkZvbGQgPSBuZXcgRm9sZE1hcmtlcihmdWxsQ29uZmlnLCB0cnVlKSwgY2FuVW5mb2xkID0gbmV3IEZvbGRNYXJrZXIoZnVsbENvbmZpZywgZmFsc2UpO1xuICAgIGxldCBtYXJrZXJzID0gVmlld1BsdWdpbi5mcm9tQ2xhc3MoY2xhc3Mge1xuICAgICAgICBjb25zdHJ1Y3Rvcih2aWV3KSB7XG4gICAgICAgICAgICB0aGlzLmZyb20gPSB2aWV3LnZpZXdwb3J0LmZyb207XG4gICAgICAgICAgICB0aGlzLm1hcmtlcnMgPSB0aGlzLmJ1aWxkTWFya2Vycyh2aWV3KTtcbiAgICAgICAgfVxuICAgICAgICB1cGRhdGUodXBkYXRlKSB7XG4gICAgICAgICAgICBpZiAodXBkYXRlLmRvY0NoYW5nZWQgfHwgdXBkYXRlLnZpZXdwb3J0Q2hhbmdlZCB8fFxuICAgICAgICAgICAgICAgIHVwZGF0ZS5zdGFydFN0YXRlLmZhY2V0KGxhbmd1YWdlKSAhPSB1cGRhdGUuc3RhdGUuZmFjZXQobGFuZ3VhZ2UpIHx8XG4gICAgICAgICAgICAgICAgdXBkYXRlLnN0YXJ0U3RhdGUuZmllbGQoZm9sZFN0YXRlLCBmYWxzZSkgIT0gdXBkYXRlLnN0YXRlLmZpZWxkKGZvbGRTdGF0ZSwgZmFsc2UpIHx8XG4gICAgICAgICAgICAgICAgc3ludGF4VHJlZSh1cGRhdGUuc3RhcnRTdGF0ZSkgIT0gc3ludGF4VHJlZSh1cGRhdGUuc3RhdGUpIHx8XG4gICAgICAgICAgICAgICAgZnVsbENvbmZpZy5mb2xkaW5nQ2hhbmdlZCh1cGRhdGUpKVxuICAgICAgICAgICAgICAgIHRoaXMubWFya2VycyA9IHRoaXMuYnVpbGRNYXJrZXJzKHVwZGF0ZS52aWV3KTtcbiAgICAgICAgfVxuICAgICAgICBidWlsZE1hcmtlcnModmlldykge1xuICAgICAgICAgICAgbGV0IGJ1aWxkZXIgPSBuZXcgUmFuZ2VTZXRCdWlsZGVyKCk7XG4gICAgICAgICAgICBmb3IgKGxldCBsaW5lIG9mIHZpZXcudmlld3BvcnRMaW5lQmxvY2tzKSB7XG4gICAgICAgICAgICAgICAgbGV0IG1hcmsgPSBmaW5kRm9sZCh2aWV3LnN0YXRlLCBsaW5lLmZyb20sIGxpbmUudG8pID8gY2FuVW5mb2xkXG4gICAgICAgICAgICAgICAgICAgIDogZm9sZGFibGUodmlldy5zdGF0ZSwgbGluZS5mcm9tLCBsaW5lLnRvKSA/IGNhbkZvbGQgOiBudWxsO1xuICAgICAgICAgICAgICAgIGlmIChtYXJrKVxuICAgICAgICAgICAgICAgICAgICBidWlsZGVyLmFkZChsaW5lLmZyb20sIGxpbmUuZnJvbSwgbWFyayk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gYnVpbGRlci5maW5pc2goKTtcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIGxldCB7IGRvbUV2ZW50SGFuZGxlcnMgfSA9IGZ1bGxDb25maWc7XG4gICAgcmV0dXJuIFtcbiAgICAgICAgbWFya2VycyxcbiAgICAgICAgZ3V0dGVyKHtcbiAgICAgICAgICAgIGNsYXNzOiBcImNtLWZvbGRHdXR0ZXJcIixcbiAgICAgICAgICAgIG1hcmtlcnModmlldykgeyB2YXIgX2E7IHJldHVybiAoKF9hID0gdmlldy5wbHVnaW4obWFya2VycykpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5tYXJrZXJzKSB8fCBSYW5nZVNldC5lbXB0eTsgfSxcbiAgICAgICAgICAgIGluaXRpYWxTcGFjZXIoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBGb2xkTWFya2VyKGZ1bGxDb25maWcsIGZhbHNlKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBkb21FdmVudEhhbmRsZXJzOiB7XG4gICAgICAgICAgICAgICAgLi4uZG9tRXZlbnRIYW5kbGVycyxcbiAgICAgICAgICAgICAgICBjbGljazogKHZpZXcsIGxpbmUsIGV2ZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChkb21FdmVudEhhbmRsZXJzLmNsaWNrICYmIGRvbUV2ZW50SGFuZGxlcnMuY2xpY2sodmlldywgbGluZSwgZXZlbnQpKVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgICAgICAgIGxldCBmb2xkZWQgPSBmaW5kRm9sZCh2aWV3LnN0YXRlLCBsaW5lLmZyb20sIGxpbmUudG8pO1xuICAgICAgICAgICAgICAgICAgICBpZiAoZm9sZGVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2aWV3LmRpc3BhdGNoKHsgZWZmZWN0czogdW5mb2xkRWZmZWN0Lm9mKGZvbGRlZCkgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBsZXQgcmFuZ2UgPSBmb2xkYWJsZSh2aWV3LnN0YXRlLCBsaW5lLmZyb20sIGxpbmUudG8pO1xuICAgICAgICAgICAgICAgICAgICBpZiAocmFuZ2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZpZXcuZGlzcGF0Y2goeyBlZmZlY3RzOiBmb2xkRWZmZWN0Lm9mKHJhbmdlKSB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pLFxuICAgICAgICBjb2RlRm9sZGluZygpXG4gICAgXTtcbn1cbmNvbnN0IGJhc2VUaGVtZSQxID0gLypAX19QVVJFX18qL0VkaXRvclZpZXcuYmFzZVRoZW1lKHtcbiAgICBcIi5jbS1mb2xkUGxhY2Vob2xkZXJcIjoge1xuICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6IFwiI2VlZVwiLFxuICAgICAgICBib3JkZXI6IFwiMXB4IHNvbGlkICNkZGRcIixcbiAgICAgICAgY29sb3I6IFwiIzg4OFwiLFxuICAgICAgICBib3JkZXJSYWRpdXM6IFwiLjJlbVwiLFxuICAgICAgICBtYXJnaW46IFwiMCAxcHhcIixcbiAgICAgICAgcGFkZGluZzogXCIwIDFweFwiLFxuICAgICAgICBjdXJzb3I6IFwicG9pbnRlclwiXG4gICAgfSxcbiAgICBcIi5jbS1mb2xkR3V0dGVyIHNwYW5cIjoge1xuICAgICAgICBwYWRkaW5nOiBcIjAgMXB4XCIsXG4gICAgICAgIGN1cnNvcjogXCJwb2ludGVyXCJcbiAgICB9XG59KTtcblxuLyoqXG5BIGhpZ2hsaWdodCBzdHlsZSBhc3NvY2lhdGVzIENTUyBzdHlsZXMgd2l0aCBoaWdobGlnaHRpbmdcblt0YWdzXShodHRwczovL2xlemVyLmNvZGVtaXJyb3IubmV0L2RvY3MvcmVmI2hpZ2hsaWdodC5UYWcpLlxuKi9cbmNsYXNzIEhpZ2hsaWdodFN0eWxlIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAvKipcbiAgICBUaGUgdGFnIHN0eWxlcyB1c2VkIHRvIGNyZWF0ZSB0aGlzIGhpZ2hsaWdodCBzdHlsZS5cbiAgICAqL1xuICAgIHNwZWNzLCBvcHRpb25zKSB7XG4gICAgICAgIHRoaXMuc3BlY3MgPSBzcGVjcztcbiAgICAgICAgbGV0IG1vZFNwZWM7XG4gICAgICAgIGZ1bmN0aW9uIGRlZihzcGVjKSB7XG4gICAgICAgICAgICBsZXQgY2xzID0gU3R5bGVNb2R1bGUubmV3TmFtZSgpO1xuICAgICAgICAgICAgKG1vZFNwZWMgfHwgKG1vZFNwZWMgPSBPYmplY3QuY3JlYXRlKG51bGwpKSlbXCIuXCIgKyBjbHNdID0gc3BlYztcbiAgICAgICAgICAgIHJldHVybiBjbHM7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgYWxsID0gdHlwZW9mIG9wdGlvbnMuYWxsID09IFwic3RyaW5nXCIgPyBvcHRpb25zLmFsbCA6IG9wdGlvbnMuYWxsID8gZGVmKG9wdGlvbnMuYWxsKSA6IHVuZGVmaW5lZDtcbiAgICAgICAgY29uc3Qgc2NvcGVPcHQgPSBvcHRpb25zLnNjb3BlO1xuICAgICAgICB0aGlzLnNjb3BlID0gc2NvcGVPcHQgaW5zdGFuY2VvZiBMYW5ndWFnZSA/ICh0eXBlKSA9PiB0eXBlLnByb3AobGFuZ3VhZ2VEYXRhUHJvcCkgPT0gc2NvcGVPcHQuZGF0YVxuICAgICAgICAgICAgOiBzY29wZU9wdCA/ICh0eXBlKSA9PiB0eXBlID09IHNjb3BlT3B0IDogdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLnN0eWxlID0gdGFnSGlnaGxpZ2h0ZXIoc3BlY3MubWFwKHN0eWxlID0+ICh7XG4gICAgICAgICAgICB0YWc6IHN0eWxlLnRhZyxcbiAgICAgICAgICAgIGNsYXNzOiBzdHlsZS5jbGFzcyB8fCBkZWYoT2JqZWN0LmFzc2lnbih7fSwgc3R5bGUsIHsgdGFnOiBudWxsIH0pKVxuICAgICAgICB9KSksIHtcbiAgICAgICAgICAgIGFsbCxcbiAgICAgICAgfSkuc3R5bGU7XG4gICAgICAgIHRoaXMubW9kdWxlID0gbW9kU3BlYyA/IG5ldyBTdHlsZU1vZHVsZShtb2RTcGVjKSA6IG51bGw7XG4gICAgICAgIHRoaXMudGhlbWVUeXBlID0gb3B0aW9ucy50aGVtZVR5cGU7XG4gICAgfVxuICAgIC8qKlxuICAgIENyZWF0ZSBhIGhpZ2hsaWdodGVyIHN0eWxlIHRoYXQgYXNzb2NpYXRlcyB0aGUgZ2l2ZW4gc3R5bGVzIHRvXG4gICAgdGhlIGdpdmVuIHRhZ3MuIFRoZSBzcGVjcyBtdXN0IGJlIG9iamVjdHMgdGhhdCBob2xkIGEgc3R5bGUgdGFnXG4gICAgb3IgYXJyYXkgb2YgdGFncyBpbiB0aGVpciBgdGFnYCBwcm9wZXJ0eSwgYW5kIGVpdGhlciBhIHNpbmdsZVxuICAgIGBjbGFzc2AgcHJvcGVydHkgcHJvdmlkaW5nIGEgc3RhdGljIENTUyBjbGFzcyAoZm9yIGhpZ2hsaWdodGVyXG4gICAgdGhhdCByZWx5IG9uIGV4dGVybmFsIHN0eWxpbmcpLCBvciBhXG4gICAgW2BzdHlsZS1tb2RgXShodHRwczovL2dpdGh1Yi5jb20vbWFyaWpuaC9zdHlsZS1tb2QjZG9jdW1lbnRhdGlvbiktc3R5bGVcbiAgICBzZXQgb2YgQ1NTIHByb3BlcnRpZXMgKHdoaWNoIGRlZmluZSB0aGUgc3R5bGluZyBmb3IgdGhvc2UgdGFncykuXG4gICAgXG4gICAgVGhlIENTUyBydWxlcyBjcmVhdGVkIGZvciBhIGhpZ2hsaWdodGVyIHdpbGwgYmUgZW1pdHRlZCBpbiB0aGVcbiAgICBvcmRlciBvZiB0aGUgc3BlYydzIHByb3BlcnRpZXMuIFRoYXQgbWVhbnMgdGhhdCBmb3IgZWxlbWVudHMgdGhhdFxuICAgIGhhdmUgbXVsdGlwbGUgdGFncyBhc3NvY2lhdGVkIHdpdGggdGhlbSwgc3R5bGVzIGRlZmluZWQgZnVydGhlclxuICAgIGRvd24gaW4gdGhlIGxpc3Qgd2lsbCBoYXZlIGEgaGlnaGVyIENTUyBwcmVjZWRlbmNlIHRoYW4gc3R5bGVzXG4gICAgZGVmaW5lZCBlYXJsaWVyLlxuICAgICovXG4gICAgc3RhdGljIGRlZmluZShzcGVjcywgb3B0aW9ucykge1xuICAgICAgICByZXR1cm4gbmV3IEhpZ2hsaWdodFN0eWxlKHNwZWNzLCBvcHRpb25zIHx8IHt9KTtcbiAgICB9XG59XG5jb25zdCBoaWdobGlnaHRlckZhY2V0ID0gLypAX19QVVJFX18qL0ZhY2V0LmRlZmluZSgpO1xuY29uc3QgZmFsbGJhY2tIaWdobGlnaHRlciA9IC8qQF9fUFVSRV9fKi9GYWNldC5kZWZpbmUoe1xuICAgIGNvbWJpbmUodmFsdWVzKSB7IHJldHVybiB2YWx1ZXMubGVuZ3RoID8gW3ZhbHVlc1swXV0gOiBudWxsOyB9XG59KTtcbmZ1bmN0aW9uIGdldEhpZ2hsaWdodGVycyhzdGF0ZSkge1xuICAgIGxldCBtYWluID0gc3RhdGUuZmFjZXQoaGlnaGxpZ2h0ZXJGYWNldCk7XG4gICAgcmV0dXJuIG1haW4ubGVuZ3RoID8gbWFpbiA6IHN0YXRlLmZhY2V0KGZhbGxiYWNrSGlnaGxpZ2h0ZXIpO1xufVxuLyoqXG5XcmFwIGEgaGlnaGxpZ2h0ZXIgaW4gYW4gZWRpdG9yIGV4dGVuc2lvbiB0aGF0IHVzZXMgaXQgdG8gYXBwbHlcbnN5bnRheCBoaWdobGlnaHRpbmcgdG8gdGhlIGVkaXRvciBjb250ZW50LlxuXG5XaGVuIG11bHRpcGxlIChub24tZmFsbGJhY2spIHN0eWxlcyBhcmUgcHJvdmlkZWQsIHRoZSBzdHlsaW5nXG5hcHBsaWVkIGlzIHRoZSB1bmlvbiBvZiB0aGUgY2xhc3NlcyB0aGV5IGVtaXQuXG4qL1xuZnVuY3Rpb24gc3ludGF4SGlnaGxpZ2h0aW5nKGhpZ2hsaWdodGVyLCBvcHRpb25zKSB7XG4gICAgbGV0IGV4dCA9IFt0cmVlSGlnaGxpZ2h0ZXJdLCB0aGVtZVR5cGU7XG4gICAgaWYgKGhpZ2hsaWdodGVyIGluc3RhbmNlb2YgSGlnaGxpZ2h0U3R5bGUpIHtcbiAgICAgICAgaWYgKGhpZ2hsaWdodGVyLm1vZHVsZSlcbiAgICAgICAgICAgIGV4dC5wdXNoKEVkaXRvclZpZXcuc3R5bGVNb2R1bGUub2YoaGlnaGxpZ2h0ZXIubW9kdWxlKSk7XG4gICAgICAgIHRoZW1lVHlwZSA9IGhpZ2hsaWdodGVyLnRoZW1lVHlwZTtcbiAgICB9XG4gICAgaWYgKG9wdGlvbnMgPT09IG51bGwgfHwgb3B0aW9ucyA9PT0gdm9pZCAwID8gdm9pZCAwIDogb3B0aW9ucy5mYWxsYmFjaylcbiAgICAgICAgZXh0LnB1c2goZmFsbGJhY2tIaWdobGlnaHRlci5vZihoaWdobGlnaHRlcikpO1xuICAgIGVsc2UgaWYgKHRoZW1lVHlwZSlcbiAgICAgICAgZXh0LnB1c2goaGlnaGxpZ2h0ZXJGYWNldC5jb21wdXRlTihbRWRpdG9yVmlldy5kYXJrVGhlbWVdLCBzdGF0ZSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gc3RhdGUuZmFjZXQoRWRpdG9yVmlldy5kYXJrVGhlbWUpID09ICh0aGVtZVR5cGUgPT0gXCJkYXJrXCIpID8gW2hpZ2hsaWdodGVyXSA6IFtdO1xuICAgICAgICB9KSk7XG4gICAgZWxzZVxuICAgICAgICBleHQucHVzaChoaWdobGlnaHRlckZhY2V0Lm9mKGhpZ2hsaWdodGVyKSk7XG4gICAgcmV0dXJuIGV4dDtcbn1cbi8qKlxuUmV0dXJucyB0aGUgQ1NTIGNsYXNzZXMgKGlmIGFueSkgdGhhdCB0aGUgaGlnaGxpZ2h0ZXJzIGFjdGl2ZSBpblxudGhlIHN0YXRlIHdvdWxkIGFzc2lnbiB0byB0aGUgZ2l2ZW4gc3R5bGVcblt0YWdzXShodHRwczovL2xlemVyLmNvZGVtaXJyb3IubmV0L2RvY3MvcmVmI2hpZ2hsaWdodC5UYWcpIGFuZFxuKG9wdGlvbmFsKSBsYW5ndWFnZVxuW3Njb3BlXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI2xhbmd1YWdlLkhpZ2hsaWdodFN0eWxlXmRlZmluZV5vcHRpb25zLnNjb3BlKS5cbiovXG5mdW5jdGlvbiBoaWdobGlnaHRpbmdGb3Ioc3RhdGUsIHRhZ3MsIHNjb3BlKSB7XG4gICAgbGV0IGhpZ2hsaWdodGVycyA9IGdldEhpZ2hsaWdodGVycyhzdGF0ZSk7XG4gICAgbGV0IHJlc3VsdCA9IG51bGw7XG4gICAgaWYgKGhpZ2hsaWdodGVycylcbiAgICAgICAgZm9yIChsZXQgaGlnaGxpZ2h0ZXIgb2YgaGlnaGxpZ2h0ZXJzKSB7XG4gICAgICAgICAgICBpZiAoIWhpZ2hsaWdodGVyLnNjb3BlIHx8IHNjb3BlICYmIGhpZ2hsaWdodGVyLnNjb3BlKHNjb3BlKSkge1xuICAgICAgICAgICAgICAgIGxldCBjbHMgPSBoaWdobGlnaHRlci5zdHlsZSh0YWdzKTtcbiAgICAgICAgICAgICAgICBpZiAoY2xzKVxuICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSByZXN1bHQgPyByZXN1bHQgKyBcIiBcIiArIGNscyA6IGNscztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIHJldHVybiByZXN1bHQ7XG59XG5jbGFzcyBUcmVlSGlnaGxpZ2h0ZXIge1xuICAgIGNvbnN0cnVjdG9yKHZpZXcpIHtcbiAgICAgICAgdGhpcy5tYXJrQ2FjaGUgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICAgICAgICB0aGlzLnRyZWUgPSBzeW50YXhUcmVlKHZpZXcuc3RhdGUpO1xuICAgICAgICB0aGlzLmRlY29yYXRpb25zID0gdGhpcy5idWlsZERlY28odmlldywgZ2V0SGlnaGxpZ2h0ZXJzKHZpZXcuc3RhdGUpKTtcbiAgICAgICAgdGhpcy5kZWNvcmF0ZWRUbyA9IHZpZXcudmlld3BvcnQudG87XG4gICAgfVxuICAgIHVwZGF0ZSh1cGRhdGUpIHtcbiAgICAgICAgbGV0IHRyZWUgPSBzeW50YXhUcmVlKHVwZGF0ZS5zdGF0ZSksIGhpZ2hsaWdodGVycyA9IGdldEhpZ2hsaWdodGVycyh1cGRhdGUuc3RhdGUpO1xuICAgICAgICBsZXQgc3R5bGVDaGFuZ2UgPSBoaWdobGlnaHRlcnMgIT0gZ2V0SGlnaGxpZ2h0ZXJzKHVwZGF0ZS5zdGFydFN0YXRlKTtcbiAgICAgICAgbGV0IHsgdmlld3BvcnQgfSA9IHVwZGF0ZS52aWV3LCBkZWNvcmF0ZWRUb01hcHBlZCA9IHVwZGF0ZS5jaGFuZ2VzLm1hcFBvcyh0aGlzLmRlY29yYXRlZFRvLCAxKTtcbiAgICAgICAgaWYgKHRyZWUubGVuZ3RoIDwgdmlld3BvcnQudG8gJiYgIXN0eWxlQ2hhbmdlICYmIHRyZWUudHlwZSA9PSB0aGlzLnRyZWUudHlwZSAmJiBkZWNvcmF0ZWRUb01hcHBlZCA+PSB2aWV3cG9ydC50bykge1xuICAgICAgICAgICAgdGhpcy5kZWNvcmF0aW9ucyA9IHRoaXMuZGVjb3JhdGlvbnMubWFwKHVwZGF0ZS5jaGFuZ2VzKTtcbiAgICAgICAgICAgIHRoaXMuZGVjb3JhdGVkVG8gPSBkZWNvcmF0ZWRUb01hcHBlZDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0cmVlICE9IHRoaXMudHJlZSB8fCB1cGRhdGUudmlld3BvcnRDaGFuZ2VkIHx8IHN0eWxlQ2hhbmdlKSB7XG4gICAgICAgICAgICB0aGlzLnRyZWUgPSB0cmVlO1xuICAgICAgICAgICAgdGhpcy5kZWNvcmF0aW9ucyA9IHRoaXMuYnVpbGREZWNvKHVwZGF0ZS52aWV3LCBoaWdobGlnaHRlcnMpO1xuICAgICAgICAgICAgdGhpcy5kZWNvcmF0ZWRUbyA9IHZpZXdwb3J0LnRvO1xuICAgICAgICB9XG4gICAgfVxuICAgIGJ1aWxkRGVjbyh2aWV3LCBoaWdobGlnaHRlcnMpIHtcbiAgICAgICAgaWYgKCFoaWdobGlnaHRlcnMgfHwgIXRoaXMudHJlZS5sZW5ndGgpXG4gICAgICAgICAgICByZXR1cm4gRGVjb3JhdGlvbi5ub25lO1xuICAgICAgICBsZXQgYnVpbGRlciA9IG5ldyBSYW5nZVNldEJ1aWxkZXIoKTtcbiAgICAgICAgZm9yIChsZXQgeyBmcm9tLCB0byB9IG9mIHZpZXcudmlzaWJsZVJhbmdlcykge1xuICAgICAgICAgICAgaGlnaGxpZ2h0VHJlZSh0aGlzLnRyZWUsIGhpZ2hsaWdodGVycywgKGZyb20sIHRvLCBzdHlsZSkgPT4ge1xuICAgICAgICAgICAgICAgIGJ1aWxkZXIuYWRkKGZyb20sIHRvLCB0aGlzLm1hcmtDYWNoZVtzdHlsZV0gfHwgKHRoaXMubWFya0NhY2hlW3N0eWxlXSA9IERlY29yYXRpb24ubWFyayh7IGNsYXNzOiBzdHlsZSB9KSkpO1xuICAgICAgICAgICAgfSwgZnJvbSwgdG8pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBidWlsZGVyLmZpbmlzaCgpO1xuICAgIH1cbn1cbmNvbnN0IHRyZWVIaWdobGlnaHRlciA9IC8qQF9fUFVSRV9fKi9QcmVjLmhpZ2goLypAX19QVVJFX18qL1ZpZXdQbHVnaW4uZnJvbUNsYXNzKFRyZWVIaWdobGlnaHRlciwge1xuICAgIGRlY29yYXRpb25zOiB2ID0+IHYuZGVjb3JhdGlvbnNcbn0pKTtcbi8qKlxuQSBkZWZhdWx0IGhpZ2hsaWdodCBzdHlsZSAod29ya3Mgd2VsbCB3aXRoIGxpZ2h0IHRoZW1lcykuXG4qL1xuY29uc3QgZGVmYXVsdEhpZ2hsaWdodFN0eWxlID0gLypAX19QVVJFX18qL0hpZ2hsaWdodFN0eWxlLmRlZmluZShbXG4gICAgeyB0YWc6IHRhZ3MubWV0YSxcbiAgICAgICAgY29sb3I6IFwiIzQwNDc0MFwiIH0sXG4gICAgeyB0YWc6IHRhZ3MubGluayxcbiAgICAgICAgdGV4dERlY29yYXRpb246IFwidW5kZXJsaW5lXCIgfSxcbiAgICB7IHRhZzogdGFncy5oZWFkaW5nLFxuICAgICAgICB0ZXh0RGVjb3JhdGlvbjogXCJ1bmRlcmxpbmVcIixcbiAgICAgICAgZm9udFdlaWdodDogXCJib2xkXCIgfSxcbiAgICB7IHRhZzogdGFncy5lbXBoYXNpcyxcbiAgICAgICAgZm9udFN0eWxlOiBcIml0YWxpY1wiIH0sXG4gICAgeyB0YWc6IHRhZ3Muc3Ryb25nLFxuICAgICAgICBmb250V2VpZ2h0OiBcImJvbGRcIiB9LFxuICAgIHsgdGFnOiB0YWdzLnN0cmlrZXRocm91Z2gsXG4gICAgICAgIHRleHREZWNvcmF0aW9uOiBcImxpbmUtdGhyb3VnaFwiIH0sXG4gICAgeyB0YWc6IHRhZ3Mua2V5d29yZCxcbiAgICAgICAgY29sb3I6IFwiIzcwOFwiIH0sXG4gICAgeyB0YWc6IFt0YWdzLmF0b20sIHRhZ3MuYm9vbCwgdGFncy51cmwsIHRhZ3MuY29udGVudFNlcGFyYXRvciwgdGFncy5sYWJlbE5hbWVdLFxuICAgICAgICBjb2xvcjogXCIjMjE5XCIgfSxcbiAgICB7IHRhZzogW3RhZ3MubGl0ZXJhbCwgdGFncy5pbnNlcnRlZF0sXG4gICAgICAgIGNvbG9yOiBcIiMxNjRcIiB9LFxuICAgIHsgdGFnOiBbdGFncy5zdHJpbmcsIHRhZ3MuZGVsZXRlZF0sXG4gICAgICAgIGNvbG9yOiBcIiNhMTFcIiB9LFxuICAgIHsgdGFnOiBbdGFncy5yZWdleHAsIHRhZ3MuZXNjYXBlLCAvKkBfX1BVUkVfXyovdGFncy5zcGVjaWFsKHRhZ3Muc3RyaW5nKV0sXG4gICAgICAgIGNvbG9yOiBcIiNlNDBcIiB9LFxuICAgIHsgdGFnOiAvKkBfX1BVUkVfXyovdGFncy5kZWZpbml0aW9uKHRhZ3MudmFyaWFibGVOYW1lKSxcbiAgICAgICAgY29sb3I6IFwiIzAwZlwiIH0sXG4gICAgeyB0YWc6IC8qQF9fUFVSRV9fKi90YWdzLmxvY2FsKHRhZ3MudmFyaWFibGVOYW1lKSxcbiAgICAgICAgY29sb3I6IFwiIzMwYVwiIH0sXG4gICAgeyB0YWc6IFt0YWdzLnR5cGVOYW1lLCB0YWdzLm5hbWVzcGFjZV0sXG4gICAgICAgIGNvbG9yOiBcIiMwODVcIiB9LFxuICAgIHsgdGFnOiB0YWdzLmNsYXNzTmFtZSxcbiAgICAgICAgY29sb3I6IFwiIzE2N1wiIH0sXG4gICAgeyB0YWc6IFsvKkBfX1BVUkVfXyovdGFncy5zcGVjaWFsKHRhZ3MudmFyaWFibGVOYW1lKSwgdGFncy5tYWNyb05hbWVdLFxuICAgICAgICBjb2xvcjogXCIjMjU2XCIgfSxcbiAgICB7IHRhZzogLypAX19QVVJFX18qL3RhZ3MuZGVmaW5pdGlvbih0YWdzLnByb3BlcnR5TmFtZSksXG4gICAgICAgIGNvbG9yOiBcIiMwMGNcIiB9LFxuICAgIHsgdGFnOiB0YWdzLmNvbW1lbnQsXG4gICAgICAgIGNvbG9yOiBcIiM5NDBcIiB9LFxuICAgIHsgdGFnOiB0YWdzLmludmFsaWQsXG4gICAgICAgIGNvbG9yOiBcIiNmMDBcIiB9XG5dKTtcblxuY29uc3QgYmFzZVRoZW1lID0gLypAX19QVVJFX18qL0VkaXRvclZpZXcuYmFzZVRoZW1lKHtcbiAgICBcIiYuY20tZm9jdXNlZCAuY20tbWF0Y2hpbmdCcmFja2V0XCI6IHsgYmFja2dyb3VuZENvbG9yOiBcIiMzMjhjODI1MlwiIH0sXG4gICAgXCImLmNtLWZvY3VzZWQgLmNtLW5vbm1hdGNoaW5nQnJhY2tldFwiOiB7IGJhY2tncm91bmRDb2xvcjogXCIjYmI1NTU1NDRcIiB9XG59KTtcbmNvbnN0IERlZmF1bHRTY2FuRGlzdCA9IDEwMDAwLCBEZWZhdWx0QnJhY2tldHMgPSBcIigpW117fVwiO1xuY29uc3QgYnJhY2tldE1hdGNoaW5nQ29uZmlnID0gLypAX19QVVJFX18qL0ZhY2V0LmRlZmluZSh7XG4gICAgY29tYmluZShjb25maWdzKSB7XG4gICAgICAgIHJldHVybiBjb21iaW5lQ29uZmlnKGNvbmZpZ3MsIHtcbiAgICAgICAgICAgIGFmdGVyQ3Vyc29yOiB0cnVlLFxuICAgICAgICAgICAgYnJhY2tldHM6IERlZmF1bHRCcmFja2V0cyxcbiAgICAgICAgICAgIG1heFNjYW5EaXN0YW5jZTogRGVmYXVsdFNjYW5EaXN0LFxuICAgICAgICAgICAgcmVuZGVyTWF0Y2g6IGRlZmF1bHRSZW5kZXJNYXRjaFxuICAgICAgICB9KTtcbiAgICB9XG59KTtcbmNvbnN0IG1hdGNoaW5nTWFyayA9IC8qQF9fUFVSRV9fKi9EZWNvcmF0aW9uLm1hcmsoeyBjbGFzczogXCJjbS1tYXRjaGluZ0JyYWNrZXRcIiB9KSwgbm9ubWF0Y2hpbmdNYXJrID0gLypAX19QVVJFX18qL0RlY29yYXRpb24ubWFyayh7IGNsYXNzOiBcImNtLW5vbm1hdGNoaW5nQnJhY2tldFwiIH0pO1xuZnVuY3Rpb24gZGVmYXVsdFJlbmRlck1hdGNoKG1hdGNoKSB7XG4gICAgbGV0IGRlY29yYXRpb25zID0gW107XG4gICAgbGV0IG1hcmsgPSBtYXRjaC5tYXRjaGVkID8gbWF0Y2hpbmdNYXJrIDogbm9ubWF0Y2hpbmdNYXJrO1xuICAgIGRlY29yYXRpb25zLnB1c2gobWFyay5yYW5nZShtYXRjaC5zdGFydC5mcm9tLCBtYXRjaC5zdGFydC50bykpO1xuICAgIGlmIChtYXRjaC5lbmQpXG4gICAgICAgIGRlY29yYXRpb25zLnB1c2gobWFyay5yYW5nZShtYXRjaC5lbmQuZnJvbSwgbWF0Y2guZW5kLnRvKSk7XG4gICAgcmV0dXJuIGRlY29yYXRpb25zO1xufVxuY29uc3QgYnJhY2tldE1hdGNoaW5nU3RhdGUgPSAvKkBfX1BVUkVfXyovU3RhdGVGaWVsZC5kZWZpbmUoe1xuICAgIGNyZWF0ZSgpIHsgcmV0dXJuIERlY29yYXRpb24ubm9uZTsgfSxcbiAgICB1cGRhdGUoZGVjbywgdHIpIHtcbiAgICAgICAgaWYgKCF0ci5kb2NDaGFuZ2VkICYmICF0ci5zZWxlY3Rpb24pXG4gICAgICAgICAgICByZXR1cm4gZGVjbztcbiAgICAgICAgbGV0IGRlY29yYXRpb25zID0gW107XG4gICAgICAgIGxldCBjb25maWcgPSB0ci5zdGF0ZS5mYWNldChicmFja2V0TWF0Y2hpbmdDb25maWcpO1xuICAgICAgICBmb3IgKGxldCByYW5nZSBvZiB0ci5zdGF0ZS5zZWxlY3Rpb24ucmFuZ2VzKSB7XG4gICAgICAgICAgICBpZiAoIXJhbmdlLmVtcHR5KVxuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgbGV0IG1hdGNoID0gbWF0Y2hCcmFja2V0cyh0ci5zdGF0ZSwgcmFuZ2UuaGVhZCwgLTEsIGNvbmZpZylcbiAgICAgICAgICAgICAgICB8fCAocmFuZ2UuaGVhZCA+IDAgJiYgbWF0Y2hCcmFja2V0cyh0ci5zdGF0ZSwgcmFuZ2UuaGVhZCAtIDEsIDEsIGNvbmZpZykpXG4gICAgICAgICAgICAgICAgfHwgKGNvbmZpZy5hZnRlckN1cnNvciAmJlxuICAgICAgICAgICAgICAgICAgICAobWF0Y2hCcmFja2V0cyh0ci5zdGF0ZSwgcmFuZ2UuaGVhZCwgMSwgY29uZmlnKSB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgKHJhbmdlLmhlYWQgPCB0ci5zdGF0ZS5kb2MubGVuZ3RoICYmIG1hdGNoQnJhY2tldHModHIuc3RhdGUsIHJhbmdlLmhlYWQgKyAxLCAtMSwgY29uZmlnKSkpKTtcbiAgICAgICAgICAgIGlmIChtYXRjaClcbiAgICAgICAgICAgICAgICBkZWNvcmF0aW9ucyA9IGRlY29yYXRpb25zLmNvbmNhdChjb25maWcucmVuZGVyTWF0Y2gobWF0Y2gsIHRyLnN0YXRlKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIERlY29yYXRpb24uc2V0KGRlY29yYXRpb25zLCB0cnVlKTtcbiAgICB9LFxuICAgIHByb3ZpZGU6IGYgPT4gRWRpdG9yVmlldy5kZWNvcmF0aW9ucy5mcm9tKGYpXG59KTtcbmNvbnN0IGJyYWNrZXRNYXRjaGluZ1VuaXF1ZSA9IFtcbiAgICBicmFja2V0TWF0Y2hpbmdTdGF0ZSxcbiAgICBiYXNlVGhlbWVcbl07XG4vKipcbkNyZWF0ZSBhbiBleHRlbnNpb24gdGhhdCBlbmFibGVzIGJyYWNrZXQgbWF0Y2hpbmcuIFdoZW5ldmVyIHRoZVxuY3Vyc29yIGlzIG5leHQgdG8gYSBicmFja2V0LCB0aGF0IGJyYWNrZXQgYW5kIHRoZSBvbmUgaXQgbWF0Y2hlc1xuYXJlIGhpZ2hsaWdodGVkLiBPciwgd2hlbiBubyBtYXRjaGluZyBicmFja2V0IGlzIGZvdW5kLCBhbm90aGVyXG5oaWdobGlnaHRpbmcgc3R5bGUgaXMgdXNlZCB0byBpbmRpY2F0ZSB0aGlzLlxuKi9cbmZ1bmN0aW9uIGJyYWNrZXRNYXRjaGluZyhjb25maWcgPSB7fSkge1xuICAgIHJldHVybiBbYnJhY2tldE1hdGNoaW5nQ29uZmlnLm9mKGNvbmZpZyksIGJyYWNrZXRNYXRjaGluZ1VuaXF1ZV07XG59XG4vKipcbldoZW4gbGFyZ2VyIHN5bnRheCBub2Rlcywgc3VjaCBhcyBIVE1MIHRhZ3MsIGFyZSBtYXJrZWQgYXNcbm9wZW5pbmcvY2xvc2luZywgaXQgY2FuIGJlIGEgYml0IG1lc3N5IHRvIHRyZWF0IHRoZSB3aG9sZSBub2RlIGFzXG5hIG1hdGNoYWJsZSBicmFja2V0LiBUaGlzIG5vZGUgcHJvcCBhbGxvd3MgeW91IHRvIGRlZmluZSwgZm9yIHN1Y2hcbmEgbm9kZSwgYSDigJhoYW5kbGXigJnigJR0aGUgcGFydCBvZiB0aGUgbm9kZSB0aGF0IGlzIGhpZ2hsaWdodGVkLCBhbmRcbnRoYXQgdGhlIGN1cnNvciBtdXN0IGJlIG9uIHRvIGFjdGl2YXRlIGhpZ2hsaWdodGluZyBpbiB0aGUgZmlyc3RcbnBsYWNlLlxuKi9cbmNvbnN0IGJyYWNrZXRNYXRjaGluZ0hhbmRsZSA9IC8qQF9fUFVSRV9fKi9uZXcgTm9kZVByb3AoKTtcbmZ1bmN0aW9uIG1hdGNoaW5nTm9kZXMobm9kZSwgZGlyLCBicmFja2V0cykge1xuICAgIGxldCBieVByb3AgPSBub2RlLnByb3AoZGlyIDwgMCA/IE5vZGVQcm9wLm9wZW5lZEJ5IDogTm9kZVByb3AuY2xvc2VkQnkpO1xuICAgIGlmIChieVByb3ApXG4gICAgICAgIHJldHVybiBieVByb3A7XG4gICAgaWYgKG5vZGUubmFtZS5sZW5ndGggPT0gMSkge1xuICAgICAgICBsZXQgaW5kZXggPSBicmFja2V0cy5pbmRleE9mKG5vZGUubmFtZSk7XG4gICAgICAgIGlmIChpbmRleCA+IC0xICYmIGluZGV4ICUgMiA9PSAoZGlyIDwgMCA/IDEgOiAwKSlcbiAgICAgICAgICAgIHJldHVybiBbYnJhY2tldHNbaW5kZXggKyBkaXJdXTtcbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG59XG5mdW5jdGlvbiBmaW5kSGFuZGxlKG5vZGUpIHtcbiAgICBsZXQgaGFzSGFuZGxlID0gbm9kZS50eXBlLnByb3AoYnJhY2tldE1hdGNoaW5nSGFuZGxlKTtcbiAgICByZXR1cm4gaGFzSGFuZGxlID8gaGFzSGFuZGxlKG5vZGUubm9kZSkgOiBub2RlO1xufVxuLyoqXG5GaW5kIHRoZSBtYXRjaGluZyBicmFja2V0IGZvciB0aGUgdG9rZW4gYXQgYHBvc2AsIHNjYW5uaW5nXG5kaXJlY3Rpb24gYGRpcmAuIE9ubHkgdGhlIGBicmFja2V0c2AgYW5kIGBtYXhTY2FuRGlzdGFuY2VgXG5wcm9wZXJ0aWVzIGFyZSB1c2VkIGZyb20gYGNvbmZpZ2AsIGlmIGdpdmVuLiBSZXR1cm5zIG51bGwgaWYgbm9cbmJyYWNrZXQgd2FzIGZvdW5kIGF0IGBwb3NgLCBvciBhIG1hdGNoIHJlc3VsdCBvdGhlcndpc2UuXG4qL1xuZnVuY3Rpb24gbWF0Y2hCcmFja2V0cyhzdGF0ZSwgcG9zLCBkaXIsIGNvbmZpZyA9IHt9KSB7XG4gICAgbGV0IG1heFNjYW5EaXN0YW5jZSA9IGNvbmZpZy5tYXhTY2FuRGlzdGFuY2UgfHwgRGVmYXVsdFNjYW5EaXN0LCBicmFja2V0cyA9IGNvbmZpZy5icmFja2V0cyB8fCBEZWZhdWx0QnJhY2tldHM7XG4gICAgbGV0IHRyZWUgPSBzeW50YXhUcmVlKHN0YXRlKSwgbm9kZSA9IHRyZWUucmVzb2x2ZUlubmVyKHBvcywgZGlyKTtcbiAgICBmb3IgKGxldCBjdXIgPSBub2RlOyBjdXI7IGN1ciA9IGN1ci5wYXJlbnQpIHtcbiAgICAgICAgbGV0IG1hdGNoZXMgPSBtYXRjaGluZ05vZGVzKGN1ci50eXBlLCBkaXIsIGJyYWNrZXRzKTtcbiAgICAgICAgaWYgKG1hdGNoZXMgJiYgY3VyLmZyb20gPCBjdXIudG8pIHtcbiAgICAgICAgICAgIGxldCBoYW5kbGUgPSBmaW5kSGFuZGxlKGN1cik7XG4gICAgICAgICAgICBpZiAoaGFuZGxlICYmIChkaXIgPiAwID8gcG9zID49IGhhbmRsZS5mcm9tICYmIHBvcyA8IGhhbmRsZS50byA6IHBvcyA+IGhhbmRsZS5mcm9tICYmIHBvcyA8PSBoYW5kbGUudG8pKVxuICAgICAgICAgICAgICAgIHJldHVybiBtYXRjaE1hcmtlZEJyYWNrZXRzKHN0YXRlLCBwb3MsIGRpciwgY3VyLCBoYW5kbGUsIG1hdGNoZXMsIGJyYWNrZXRzKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbWF0Y2hQbGFpbkJyYWNrZXRzKHN0YXRlLCBwb3MsIGRpciwgdHJlZSwgbm9kZS50eXBlLCBtYXhTY2FuRGlzdGFuY2UsIGJyYWNrZXRzKTtcbn1cbmZ1bmN0aW9uIG1hdGNoTWFya2VkQnJhY2tldHMoX3N0YXRlLCBfcG9zLCBkaXIsIHRva2VuLCBoYW5kbGUsIG1hdGNoaW5nLCBicmFja2V0cykge1xuICAgIGxldCBwYXJlbnQgPSB0b2tlbi5wYXJlbnQsIGZpcnN0VG9rZW4gPSB7IGZyb206IGhhbmRsZS5mcm9tLCB0bzogaGFuZGxlLnRvIH07XG4gICAgbGV0IGRlcHRoID0gMCwgY3Vyc29yID0gcGFyZW50ID09PSBudWxsIHx8IHBhcmVudCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcGFyZW50LmN1cnNvcigpO1xuICAgIGlmIChjdXJzb3IgJiYgKGRpciA8IDAgPyBjdXJzb3IuY2hpbGRCZWZvcmUodG9rZW4uZnJvbSkgOiBjdXJzb3IuY2hpbGRBZnRlcih0b2tlbi50bykpKVxuICAgICAgICBkbyB7XG4gICAgICAgICAgICBpZiAoZGlyIDwgMCA/IGN1cnNvci50byA8PSB0b2tlbi5mcm9tIDogY3Vyc29yLmZyb20gPj0gdG9rZW4udG8pIHtcbiAgICAgICAgICAgICAgICBpZiAoZGVwdGggPT0gMCAmJiBtYXRjaGluZy5pbmRleE9mKGN1cnNvci50eXBlLm5hbWUpID4gLTEgJiYgY3Vyc29yLmZyb20gPCBjdXJzb3IudG8pIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGVuZEhhbmRsZSA9IGZpbmRIYW5kbGUoY3Vyc29yKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsgc3RhcnQ6IGZpcnN0VG9rZW4sIGVuZDogZW5kSGFuZGxlID8geyBmcm9tOiBlbmRIYW5kbGUuZnJvbSwgdG86IGVuZEhhbmRsZS50byB9IDogdW5kZWZpbmVkLCBtYXRjaGVkOiB0cnVlIH07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKG1hdGNoaW5nTm9kZXMoY3Vyc29yLnR5cGUsIGRpciwgYnJhY2tldHMpKSB7XG4gICAgICAgICAgICAgICAgICAgIGRlcHRoKys7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKG1hdGNoaW5nTm9kZXMoY3Vyc29yLnR5cGUsIC1kaXIsIGJyYWNrZXRzKSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoZGVwdGggPT0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGVuZEhhbmRsZSA9IGZpbmRIYW5kbGUoY3Vyc29yKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhcnQ6IGZpcnN0VG9rZW4sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kOiBlbmRIYW5kbGUgJiYgZW5kSGFuZGxlLmZyb20gPCBlbmRIYW5kbGUudG8gPyB7IGZyb206IGVuZEhhbmRsZS5mcm9tLCB0bzogZW5kSGFuZGxlLnRvIH0gOiB1bmRlZmluZWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF0Y2hlZDogZmFsc2VcbiAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZGVwdGgtLTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gd2hpbGUgKGRpciA8IDAgPyBjdXJzb3IucHJldlNpYmxpbmcoKSA6IGN1cnNvci5uZXh0U2libGluZygpKTtcbiAgICByZXR1cm4geyBzdGFydDogZmlyc3RUb2tlbiwgbWF0Y2hlZDogZmFsc2UgfTtcbn1cbmZ1bmN0aW9uIG1hdGNoUGxhaW5CcmFja2V0cyhzdGF0ZSwgcG9zLCBkaXIsIHRyZWUsIHRva2VuVHlwZSwgbWF4U2NhbkRpc3RhbmNlLCBicmFja2V0cykge1xuICAgIGxldCBzdGFydENoID0gZGlyIDwgMCA/IHN0YXRlLnNsaWNlRG9jKHBvcyAtIDEsIHBvcykgOiBzdGF0ZS5zbGljZURvYyhwb3MsIHBvcyArIDEpO1xuICAgIGxldCBicmFja2V0ID0gYnJhY2tldHMuaW5kZXhPZihzdGFydENoKTtcbiAgICBpZiAoYnJhY2tldCA8IDAgfHwgKGJyYWNrZXQgJSAyID09IDApICE9IChkaXIgPiAwKSlcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgbGV0IHN0YXJ0VG9rZW4gPSB7IGZyb206IGRpciA8IDAgPyBwb3MgLSAxIDogcG9zLCB0bzogZGlyID4gMCA/IHBvcyArIDEgOiBwb3MgfTtcbiAgICBsZXQgaXRlciA9IHN0YXRlLmRvYy5pdGVyUmFuZ2UocG9zLCBkaXIgPiAwID8gc3RhdGUuZG9jLmxlbmd0aCA6IDApLCBkZXB0aCA9IDA7XG4gICAgZm9yIChsZXQgZGlzdGFuY2UgPSAwOyAhKGl0ZXIubmV4dCgpKS5kb25lICYmIGRpc3RhbmNlIDw9IG1heFNjYW5EaXN0YW5jZTspIHtcbiAgICAgICAgbGV0IHRleHQgPSBpdGVyLnZhbHVlO1xuICAgICAgICBpZiAoZGlyIDwgMClcbiAgICAgICAgICAgIGRpc3RhbmNlICs9IHRleHQubGVuZ3RoO1xuICAgICAgICBsZXQgYmFzZVBvcyA9IHBvcyArIGRpc3RhbmNlICogZGlyO1xuICAgICAgICBmb3IgKGxldCBwb3MgPSBkaXIgPiAwID8gMCA6IHRleHQubGVuZ3RoIC0gMSwgZW5kID0gZGlyID4gMCA/IHRleHQubGVuZ3RoIDogLTE7IHBvcyAhPSBlbmQ7IHBvcyArPSBkaXIpIHtcbiAgICAgICAgICAgIGxldCBmb3VuZCA9IGJyYWNrZXRzLmluZGV4T2YodGV4dFtwb3NdKTtcbiAgICAgICAgICAgIGlmIChmb3VuZCA8IDAgfHwgdHJlZS5yZXNvbHZlSW5uZXIoYmFzZVBvcyArIHBvcywgMSkudHlwZSAhPSB0b2tlblR5cGUpXG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICBpZiAoKGZvdW5kICUgMiA9PSAwKSA9PSAoZGlyID4gMCkpIHtcbiAgICAgICAgICAgICAgICBkZXB0aCsrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoZGVwdGggPT0gMSkgeyAvLyBDbG9zaW5nXG4gICAgICAgICAgICAgICAgcmV0dXJuIHsgc3RhcnQ6IHN0YXJ0VG9rZW4sIGVuZDogeyBmcm9tOiBiYXNlUG9zICsgcG9zLCB0bzogYmFzZVBvcyArIHBvcyArIDEgfSwgbWF0Y2hlZDogKGZvdW5kID4+IDEpID09IChicmFja2V0ID4+IDEpIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBkZXB0aC0tO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChkaXIgPiAwKVxuICAgICAgICAgICAgZGlzdGFuY2UgKz0gdGV4dC5sZW5ndGg7XG4gICAgfVxuICAgIHJldHVybiBpdGVyLmRvbmUgPyB7IHN0YXJ0OiBzdGFydFRva2VuLCBtYXRjaGVkOiBmYWxzZSB9IDogbnVsbDtcbn1cblxuLy8gQ291bnRzIHRoZSBjb2x1bW4gb2Zmc2V0IGluIGEgc3RyaW5nLCB0YWtpbmcgdGFicyBpbnRvIGFjY291bnQuXG4vLyBVc2VkIG1vc3RseSB0byBmaW5kIGluZGVudGF0aW9uLlxuZnVuY3Rpb24gY291bnRDb2woc3RyaW5nLCBlbmQsIHRhYlNpemUsIHN0YXJ0SW5kZXggPSAwLCBzdGFydFZhbHVlID0gMCkge1xuICAgIGlmIChlbmQgPT0gbnVsbCkge1xuICAgICAgICBlbmQgPSBzdHJpbmcuc2VhcmNoKC9bXlxcc1xcdTAwYTBdLyk7XG4gICAgICAgIGlmIChlbmQgPT0gLTEpXG4gICAgICAgICAgICBlbmQgPSBzdHJpbmcubGVuZ3RoO1xuICAgIH1cbiAgICBsZXQgbiA9IHN0YXJ0VmFsdWU7XG4gICAgZm9yIChsZXQgaSA9IHN0YXJ0SW5kZXg7IGkgPCBlbmQ7IGkrKykge1xuICAgICAgICBpZiAoc3RyaW5nLmNoYXJDb2RlQXQoaSkgPT0gOSlcbiAgICAgICAgICAgIG4gKz0gdGFiU2l6ZSAtIChuICUgdGFiU2l6ZSk7XG4gICAgICAgIGVsc2VcbiAgICAgICAgICAgIG4rKztcbiAgICB9XG4gICAgcmV0dXJuIG47XG59XG4vKipcbkVuY2Fwc3VsYXRlcyBhIHNpbmdsZSBsaW5lIG9mIGlucHV0LiBHaXZlbiB0byBzdHJlYW0gc3ludGF4IGNvZGUsXG53aGljaCB1c2VzIGl0IHRvIHRva2VuaXplIHRoZSBjb250ZW50LlxuKi9cbmNsYXNzIFN0cmluZ1N0cmVhbSB7XG4gICAgLyoqXG4gICAgQ3JlYXRlIGEgc3RyZWFtLlxuICAgICovXG4gICAgY29uc3RydWN0b3IoXG4gICAgLyoqXG4gICAgVGhlIGxpbmUuXG4gICAgKi9cbiAgICBzdHJpbmcsIHRhYlNpemUsIFxuICAgIC8qKlxuICAgIFRoZSBjdXJyZW50IGluZGVudCB1bml0IHNpemUuXG4gICAgKi9cbiAgICBpbmRlbnRVbml0LCBvdmVycmlkZUluZGVudCkge1xuICAgICAgICB0aGlzLnN0cmluZyA9IHN0cmluZztcbiAgICAgICAgdGhpcy50YWJTaXplID0gdGFiU2l6ZTtcbiAgICAgICAgdGhpcy5pbmRlbnRVbml0ID0gaW5kZW50VW5pdDtcbiAgICAgICAgdGhpcy5vdmVycmlkZUluZGVudCA9IG92ZXJyaWRlSW5kZW50O1xuICAgICAgICAvKipcbiAgICAgICAgVGhlIGN1cnJlbnQgcG9zaXRpb24gb24gdGhlIGxpbmUuXG4gICAgICAgICovXG4gICAgICAgIHRoaXMucG9zID0gMDtcbiAgICAgICAgLyoqXG4gICAgICAgIFRoZSBzdGFydCBwb3NpdGlvbiBvZiB0aGUgY3VycmVudCB0b2tlbi5cbiAgICAgICAgKi9cbiAgICAgICAgdGhpcy5zdGFydCA9IDA7XG4gICAgICAgIHRoaXMubGFzdENvbHVtblBvcyA9IDA7XG4gICAgICAgIHRoaXMubGFzdENvbHVtblZhbHVlID0gMDtcbiAgICB9XG4gICAgLyoqXG4gICAgVHJ1ZSBpZiB3ZSBhcmUgYXQgdGhlIGVuZCBvZiB0aGUgbGluZS5cbiAgICAqL1xuICAgIGVvbCgpIHsgcmV0dXJuIHRoaXMucG9zID49IHRoaXMuc3RyaW5nLmxlbmd0aDsgfVxuICAgIC8qKlxuICAgIFRydWUgaWYgd2UgYXJlIGF0IHRoZSBzdGFydCBvZiB0aGUgbGluZS5cbiAgICAqL1xuICAgIHNvbCgpIHsgcmV0dXJuIHRoaXMucG9zID09IDA7IH1cbiAgICAvKipcbiAgICBHZXQgdGhlIG5leHQgY29kZSB1bml0IGFmdGVyIHRoZSBjdXJyZW50IHBvc2l0aW9uLCBvciB1bmRlZmluZWRcbiAgICBpZiB3ZSdyZSBhdCB0aGUgZW5kIG9mIHRoZSBsaW5lLlxuICAgICovXG4gICAgcGVlaygpIHsgcmV0dXJuIHRoaXMuc3RyaW5nLmNoYXJBdCh0aGlzLnBvcykgfHwgdW5kZWZpbmVkOyB9XG4gICAgLyoqXG4gICAgUmVhZCB0aGUgbmV4dCBjb2RlIHVuaXQgYW5kIGFkdmFuY2UgYHRoaXMucG9zYC5cbiAgICAqL1xuICAgIG5leHQoKSB7XG4gICAgICAgIGlmICh0aGlzLnBvcyA8IHRoaXMuc3RyaW5nLmxlbmd0aClcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnN0cmluZy5jaGFyQXQodGhpcy5wb3MrKyk7XG4gICAgfVxuICAgIC8qKlxuICAgIE1hdGNoIHRoZSBuZXh0IGNoYXJhY3RlciBhZ2FpbnN0IHRoZSBnaXZlbiBzdHJpbmcsIHJlZ3VsYXJcbiAgICBleHByZXNzaW9uLCBvciBwcmVkaWNhdGUuIENvbnN1bWUgYW5kIHJldHVybiBpdCBpZiBpdCBtYXRjaGVzLlxuICAgICovXG4gICAgZWF0KG1hdGNoKSB7XG4gICAgICAgIGxldCBjaCA9IHRoaXMuc3RyaW5nLmNoYXJBdCh0aGlzLnBvcyk7XG4gICAgICAgIGxldCBvaztcbiAgICAgICAgaWYgKHR5cGVvZiBtYXRjaCA9PSBcInN0cmluZ1wiKVxuICAgICAgICAgICAgb2sgPSBjaCA9PSBtYXRjaDtcbiAgICAgICAgZWxzZVxuICAgICAgICAgICAgb2sgPSBjaCAmJiAobWF0Y2ggaW5zdGFuY2VvZiBSZWdFeHAgPyBtYXRjaC50ZXN0KGNoKSA6IG1hdGNoKGNoKSk7XG4gICAgICAgIGlmIChvaykge1xuICAgICAgICAgICAgKyt0aGlzLnBvcztcbiAgICAgICAgICAgIHJldHVybiBjaDtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICBDb250aW51ZSBtYXRjaGluZyBjaGFyYWN0ZXJzIHRoYXQgbWF0Y2ggdGhlIGdpdmVuIHN0cmluZyxcbiAgICByZWd1bGFyIGV4cHJlc3Npb24sIG9yIHByZWRpY2F0ZSBmdW5jdGlvbi4gUmV0dXJuIHRydWUgaWYgYW55XG4gICAgY2hhcmFjdGVycyB3ZXJlIGNvbnN1bWVkLlxuICAgICovXG4gICAgZWF0V2hpbGUobWF0Y2gpIHtcbiAgICAgICAgbGV0IHN0YXJ0ID0gdGhpcy5wb3M7XG4gICAgICAgIHdoaWxlICh0aGlzLmVhdChtYXRjaCkpIHsgfVxuICAgICAgICByZXR1cm4gdGhpcy5wb3MgPiBzdGFydDtcbiAgICB9XG4gICAgLyoqXG4gICAgQ29uc3VtZSB3aGl0ZXNwYWNlIGFoZWFkIG9mIGB0aGlzLnBvc2AuIFJldHVybiB0cnVlIGlmIGFueSB3YXNcbiAgICBmb3VuZC5cbiAgICAqL1xuICAgIGVhdFNwYWNlKCkge1xuICAgICAgICBsZXQgc3RhcnQgPSB0aGlzLnBvcztcbiAgICAgICAgd2hpbGUgKC9bXFxzXFx1MDBhMF0vLnRlc3QodGhpcy5zdHJpbmcuY2hhckF0KHRoaXMucG9zKSkpXG4gICAgICAgICAgICArK3RoaXMucG9zO1xuICAgICAgICByZXR1cm4gdGhpcy5wb3MgPiBzdGFydDtcbiAgICB9XG4gICAgLyoqXG4gICAgTW92ZSB0byB0aGUgZW5kIG9mIHRoZSBsaW5lLlxuICAgICovXG4gICAgc2tpcFRvRW5kKCkgeyB0aGlzLnBvcyA9IHRoaXMuc3RyaW5nLmxlbmd0aDsgfVxuICAgIC8qKlxuICAgIE1vdmUgdG8gZGlyZWN0bHkgYmVmb3JlIHRoZSBnaXZlbiBjaGFyYWN0ZXIsIGlmIGZvdW5kIG9uIHRoZVxuICAgIGN1cnJlbnQgbGluZS5cbiAgICAqL1xuICAgIHNraXBUbyhjaCkge1xuICAgICAgICBsZXQgZm91bmQgPSB0aGlzLnN0cmluZy5pbmRleE9mKGNoLCB0aGlzLnBvcyk7XG4gICAgICAgIGlmIChmb3VuZCA+IC0xKSB7XG4gICAgICAgICAgICB0aGlzLnBvcyA9IGZvdW5kO1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgTW92ZSBiYWNrIGBuYCBjaGFyYWN0ZXJzLlxuICAgICovXG4gICAgYmFja1VwKG4pIHsgdGhpcy5wb3MgLT0gbjsgfVxuICAgIC8qKlxuICAgIEdldCB0aGUgY29sdW1uIHBvc2l0aW9uIGF0IGB0aGlzLnBvc2AuXG4gICAgKi9cbiAgICBjb2x1bW4oKSB7XG4gICAgICAgIGlmICh0aGlzLmxhc3RDb2x1bW5Qb3MgPCB0aGlzLnN0YXJ0KSB7XG4gICAgICAgICAgICB0aGlzLmxhc3RDb2x1bW5WYWx1ZSA9IGNvdW50Q29sKHRoaXMuc3RyaW5nLCB0aGlzLnN0YXJ0LCB0aGlzLnRhYlNpemUsIHRoaXMubGFzdENvbHVtblBvcywgdGhpcy5sYXN0Q29sdW1uVmFsdWUpO1xuICAgICAgICAgICAgdGhpcy5sYXN0Q29sdW1uUG9zID0gdGhpcy5zdGFydDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5sYXN0Q29sdW1uVmFsdWU7XG4gICAgfVxuICAgIC8qKlxuICAgIEdldCB0aGUgaW5kZW50YXRpb24gY29sdW1uIG9mIHRoZSBjdXJyZW50IGxpbmUuXG4gICAgKi9cbiAgICBpbmRlbnRhdGlvbigpIHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICByZXR1cm4gKF9hID0gdGhpcy5vdmVycmlkZUluZGVudCkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogY291bnRDb2wodGhpcy5zdHJpbmcsIG51bGwsIHRoaXMudGFiU2l6ZSk7XG4gICAgfVxuICAgIC8qKlxuICAgIE1hdGNoIHRoZSBpbnB1dCBhZ2FpbnN0IHRoZSBnaXZlbiBzdHJpbmcgb3IgcmVndWxhciBleHByZXNzaW9uXG4gICAgKHdoaWNoIHNob3VsZCBzdGFydCB3aXRoIGEgYF5gKS4gUmV0dXJuIHRydWUgb3IgdGhlIHJlZ2V4cCBtYXRjaFxuICAgIGlmIGl0IG1hdGNoZXMuXG4gICAgXG4gICAgVW5sZXNzIGBjb25zdW1lYCBpcyBzZXQgdG8gYGZhbHNlYCwgdGhpcyB3aWxsIG1vdmUgYHRoaXMucG9zYFxuICAgIHBhc3QgdGhlIG1hdGNoZWQgdGV4dC5cbiAgICBcbiAgICBXaGVuIG1hdGNoaW5nIGEgc3RyaW5nIGBjYXNlSW5zZW5zaXRpdmVgIGNhbiBiZSBzZXQgdG8gdHJ1ZSB0b1xuICAgIG1ha2UgdGhlIG1hdGNoIGNhc2UtaW5zZW5zaXRpdmUuXG4gICAgKi9cbiAgICBtYXRjaChwYXR0ZXJuLCBjb25zdW1lLCBjYXNlSW5zZW5zaXRpdmUpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBwYXR0ZXJuID09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgIGxldCBjYXNlZCA9IChzdHIpID0+IGNhc2VJbnNlbnNpdGl2ZSA/IHN0ci50b0xvd2VyQ2FzZSgpIDogc3RyO1xuICAgICAgICAgICAgbGV0IHN1YnN0ciA9IHRoaXMuc3RyaW5nLnN1YnN0cih0aGlzLnBvcywgcGF0dGVybi5sZW5ndGgpO1xuICAgICAgICAgICAgaWYgKGNhc2VkKHN1YnN0cikgPT0gY2FzZWQocGF0dGVybikpIHtcbiAgICAgICAgICAgICAgICBpZiAoY29uc3VtZSAhPT0gZmFsc2UpXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucG9zICs9IHBhdHRlcm4ubGVuZ3RoO1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgbGV0IG1hdGNoID0gdGhpcy5zdHJpbmcuc2xpY2UodGhpcy5wb3MpLm1hdGNoKHBhdHRlcm4pO1xuICAgICAgICAgICAgaWYgKG1hdGNoICYmIG1hdGNoLmluZGV4ID4gMClcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgIGlmIChtYXRjaCAmJiBjb25zdW1lICE9PSBmYWxzZSlcbiAgICAgICAgICAgICAgICB0aGlzLnBvcyArPSBtYXRjaFswXS5sZW5ndGg7XG4gICAgICAgICAgICByZXR1cm4gbWF0Y2g7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgR2V0IHRoZSBjdXJyZW50IHRva2VuLlxuICAgICovXG4gICAgY3VycmVudCgpIHsgcmV0dXJuIHRoaXMuc3RyaW5nLnNsaWNlKHRoaXMuc3RhcnQsIHRoaXMucG9zKTsgfVxufVxuXG5mdW5jdGlvbiBmdWxsUGFyc2VyKHNwZWMpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICBuYW1lOiBzcGVjLm5hbWUgfHwgXCJcIixcbiAgICAgICAgdG9rZW46IHNwZWMudG9rZW4sXG4gICAgICAgIGJsYW5rTGluZTogc3BlYy5ibGFua0xpbmUgfHwgKCgpID0+IHsgfSksXG4gICAgICAgIHN0YXJ0U3RhdGU6IHNwZWMuc3RhcnRTdGF0ZSB8fCAoKCkgPT4gdHJ1ZSksXG4gICAgICAgIGNvcHlTdGF0ZTogc3BlYy5jb3B5U3RhdGUgfHwgZGVmYXVsdENvcHlTdGF0ZSxcbiAgICAgICAgaW5kZW50OiBzcGVjLmluZGVudCB8fCAoKCkgPT4gbnVsbCksXG4gICAgICAgIGxhbmd1YWdlRGF0YTogc3BlYy5sYW5ndWFnZURhdGEgfHwge30sXG4gICAgICAgIHRva2VuVGFibGU6IHNwZWMudG9rZW5UYWJsZSB8fCBub1Rva2VucyxcbiAgICAgICAgbWVyZ2VUb2tlbnM6IHNwZWMubWVyZ2VUb2tlbnMgIT09IGZhbHNlXG4gICAgfTtcbn1cbmZ1bmN0aW9uIGRlZmF1bHRDb3B5U3RhdGUoc3RhdGUpIHtcbiAgICBpZiAodHlwZW9mIHN0YXRlICE9IFwib2JqZWN0XCIpXG4gICAgICAgIHJldHVybiBzdGF0ZTtcbiAgICBsZXQgbmV3U3RhdGUgPSB7fTtcbiAgICBmb3IgKGxldCBwcm9wIGluIHN0YXRlKSB7XG4gICAgICAgIGxldCB2YWwgPSBzdGF0ZVtwcm9wXTtcbiAgICAgICAgbmV3U3RhdGVbcHJvcF0gPSAodmFsIGluc3RhbmNlb2YgQXJyYXkgPyB2YWwuc2xpY2UoKSA6IHZhbCk7XG4gICAgfVxuICAgIHJldHVybiBuZXdTdGF0ZTtcbn1cbmNvbnN0IEluZGVudGVkRnJvbSA9IC8qQF9fUFVSRV9fKi9uZXcgV2Vha01hcCgpO1xuLyoqXG5BIFtsYW5ndWFnZV0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNsYW5ndWFnZS5MYW5ndWFnZSkgY2xhc3MgYmFzZWQgb24gYSBDb2RlTWlycm9yXG41LXN0eWxlIFtzdHJlYW1pbmcgcGFyc2VyXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI2xhbmd1YWdlLlN0cmVhbVBhcnNlcikuXG4qL1xuY2xhc3MgU3RyZWFtTGFuZ3VhZ2UgZXh0ZW5kcyBMYW5ndWFnZSB7XG4gICAgY29uc3RydWN0b3IocGFyc2VyKSB7XG4gICAgICAgIGxldCBkYXRhID0gZGVmaW5lTGFuZ3VhZ2VGYWNldChwYXJzZXIubGFuZ3VhZ2VEYXRhKTtcbiAgICAgICAgbGV0IHAgPSBmdWxsUGFyc2VyKHBhcnNlciksIHNlbGY7XG4gICAgICAgIGxldCBpbXBsID0gbmV3IGNsYXNzIGV4dGVuZHMgUGFyc2VyIHtcbiAgICAgICAgICAgIGNyZWF0ZVBhcnNlKGlucHV0LCBmcmFnbWVudHMsIHJhbmdlcykge1xuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgUGFyc2Uoc2VsZiwgaW5wdXQsIGZyYWdtZW50cywgcmFuZ2VzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgc3VwZXIoZGF0YSwgaW1wbCwgW10sIHBhcnNlci5uYW1lKTtcbiAgICAgICAgdGhpcy50b3BOb2RlID0gZG9jSUQoZGF0YSwgdGhpcyk7XG4gICAgICAgIHNlbGYgPSB0aGlzO1xuICAgICAgICB0aGlzLnN0cmVhbVBhcnNlciA9IHA7XG4gICAgICAgIHRoaXMuc3RhdGVBZnRlciA9IG5ldyBOb2RlUHJvcCh7IHBlck5vZGU6IHRydWUgfSk7XG4gICAgICAgIHRoaXMudG9rZW5UYWJsZSA9IHBhcnNlci50b2tlblRhYmxlID8gbmV3IFRva2VuVGFibGUocC50b2tlblRhYmxlKSA6IGRlZmF1bHRUb2tlblRhYmxlO1xuICAgIH1cbiAgICAvKipcbiAgICBEZWZpbmUgYSBzdHJlYW0gbGFuZ3VhZ2UuXG4gICAgKi9cbiAgICBzdGF0aWMgZGVmaW5lKHNwZWMpIHsgcmV0dXJuIG5ldyBTdHJlYW1MYW5ndWFnZShzcGVjKTsgfVxuICAgIC8qKlxuICAgIEBpbnRlcm5hbFxuICAgICovXG4gICAgZ2V0SW5kZW50KGN4KSB7XG4gICAgICAgIGxldCBmcm9tID0gdW5kZWZpbmVkO1xuICAgICAgICBsZXQgeyBvdmVycmlkZUluZGVudGF0aW9uIH0gPSBjeC5vcHRpb25zO1xuICAgICAgICBpZiAob3ZlcnJpZGVJbmRlbnRhdGlvbikge1xuICAgICAgICAgICAgZnJvbSA9IEluZGVudGVkRnJvbS5nZXQoY3guc3RhdGUpO1xuICAgICAgICAgICAgaWYgKGZyb20gIT0gbnVsbCAmJiBmcm9tIDwgY3gucG9zIC0gMWU0KVxuICAgICAgICAgICAgICAgIGZyb20gPSB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IHN0YXJ0ID0gZmluZFN0YXRlKHRoaXMsIGN4Lm5vZGUudHJlZSwgY3gubm9kZS5mcm9tLCBjeC5ub2RlLmZyb20sIGZyb20gIT09IG51bGwgJiYgZnJvbSAhPT0gdm9pZCAwID8gZnJvbSA6IGN4LnBvcyksIHN0YXRlUG9zLCBzdGF0ZTtcbiAgICAgICAgaWYgKHN0YXJ0KSB7XG4gICAgICAgICAgICBzdGF0ZSA9IHN0YXJ0LnN0YXRlO1xuICAgICAgICAgICAgc3RhdGVQb3MgPSBzdGFydC5wb3MgKyAxO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgc3RhdGUgPSB0aGlzLnN0cmVhbVBhcnNlci5zdGFydFN0YXRlKGN4LnVuaXQpO1xuICAgICAgICAgICAgc3RhdGVQb3MgPSBjeC5ub2RlLmZyb207XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGN4LnBvcyAtIHN0YXRlUG9zID4gMTAwMDAgLyogQy5NYXhJbmRlbnRTY2FuRGlzdCAqLylcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB3aGlsZSAoc3RhdGVQb3MgPCBjeC5wb3MpIHtcbiAgICAgICAgICAgIGxldCBsaW5lID0gY3guc3RhdGUuZG9jLmxpbmVBdChzdGF0ZVBvcyksIGVuZCA9IE1hdGgubWluKGN4LnBvcywgbGluZS50byk7XG4gICAgICAgICAgICBpZiAobGluZS5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICBsZXQgaW5kZW50YXRpb24gPSBvdmVycmlkZUluZGVudGF0aW9uID8gb3ZlcnJpZGVJbmRlbnRhdGlvbihsaW5lLmZyb20pIDogLTE7XG4gICAgICAgICAgICAgICAgbGV0IHN0cmVhbSA9IG5ldyBTdHJpbmdTdHJlYW0obGluZS50ZXh0LCBjeC5zdGF0ZS50YWJTaXplLCBjeC51bml0LCBpbmRlbnRhdGlvbiA8IDAgPyB1bmRlZmluZWQgOiBpbmRlbnRhdGlvbik7XG4gICAgICAgICAgICAgICAgd2hpbGUgKHN0cmVhbS5wb3MgPCBlbmQgLSBsaW5lLmZyb20pXG4gICAgICAgICAgICAgICAgICAgIHJlYWRUb2tlbih0aGlzLnN0cmVhbVBhcnNlci50b2tlbiwgc3RyZWFtLCBzdGF0ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLnN0cmVhbVBhcnNlci5ibGFua0xpbmUoc3RhdGUsIGN4LnVuaXQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGVuZCA9PSBjeC5wb3MpXG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBzdGF0ZVBvcyA9IGxpbmUudG8gKyAxO1xuICAgICAgICB9XG4gICAgICAgIGxldCBsaW5lID0gY3gubGluZUF0KGN4LnBvcyk7XG4gICAgICAgIGlmIChvdmVycmlkZUluZGVudGF0aW9uICYmIGZyb20gPT0gbnVsbClcbiAgICAgICAgICAgIEluZGVudGVkRnJvbS5zZXQoY3guc3RhdGUsIGxpbmUuZnJvbSk7XG4gICAgICAgIHJldHVybiB0aGlzLnN0cmVhbVBhcnNlci5pbmRlbnQoc3RhdGUsIC9eXFxzKiguKikvLmV4ZWMobGluZS50ZXh0KVsxXSwgY3gpO1xuICAgIH1cbiAgICBnZXQgYWxsb3dzTmVzdGluZygpIHsgcmV0dXJuIGZhbHNlOyB9XG59XG5mdW5jdGlvbiBmaW5kU3RhdGUobGFuZywgdHJlZSwgb2ZmLCBzdGFydFBvcywgYmVmb3JlKSB7XG4gICAgbGV0IHN0YXRlID0gb2ZmID49IHN0YXJ0UG9zICYmIG9mZiArIHRyZWUubGVuZ3RoIDw9IGJlZm9yZSAmJiB0cmVlLnByb3AobGFuZy5zdGF0ZUFmdGVyKTtcbiAgICBpZiAoc3RhdGUpXG4gICAgICAgIHJldHVybiB7IHN0YXRlOiBsYW5nLnN0cmVhbVBhcnNlci5jb3B5U3RhdGUoc3RhdGUpLCBwb3M6IG9mZiArIHRyZWUubGVuZ3RoIH07XG4gICAgZm9yIChsZXQgaSA9IHRyZWUuY2hpbGRyZW4ubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcbiAgICAgICAgbGV0IGNoaWxkID0gdHJlZS5jaGlsZHJlbltpXSwgcG9zID0gb2ZmICsgdHJlZS5wb3NpdGlvbnNbaV07XG4gICAgICAgIGxldCBmb3VuZCA9IGNoaWxkIGluc3RhbmNlb2YgVHJlZSAmJiBwb3MgPCBiZWZvcmUgJiYgZmluZFN0YXRlKGxhbmcsIGNoaWxkLCBwb3MsIHN0YXJ0UG9zLCBiZWZvcmUpO1xuICAgICAgICBpZiAoZm91bmQpXG4gICAgICAgICAgICByZXR1cm4gZm91bmQ7XG4gICAgfVxuICAgIHJldHVybiBudWxsO1xufVxuZnVuY3Rpb24gY3V0VHJlZShsYW5nLCB0cmVlLCBmcm9tLCB0bywgaW5zaWRlKSB7XG4gICAgaWYgKGluc2lkZSAmJiBmcm9tIDw9IDAgJiYgdG8gPj0gdHJlZS5sZW5ndGgpXG4gICAgICAgIHJldHVybiB0cmVlO1xuICAgIGlmICghaW5zaWRlICYmIGZyb20gPT0gMCAmJiB0cmVlLnR5cGUgPT0gbGFuZy50b3BOb2RlKVxuICAgICAgICBpbnNpZGUgPSB0cnVlO1xuICAgIGZvciAobGV0IGkgPSB0cmVlLmNoaWxkcmVuLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgICAgIGxldCBwb3MgPSB0cmVlLnBvc2l0aW9uc1tpXSwgY2hpbGQgPSB0cmVlLmNoaWxkcmVuW2ldLCBpbm5lcjtcbiAgICAgICAgaWYgKHBvcyA8IHRvICYmIGNoaWxkIGluc3RhbmNlb2YgVHJlZSkge1xuICAgICAgICAgICAgaWYgKCEoaW5uZXIgPSBjdXRUcmVlKGxhbmcsIGNoaWxkLCBmcm9tIC0gcG9zLCB0byAtIHBvcywgaW5zaWRlKSkpXG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICByZXR1cm4gIWluc2lkZSA/IGlubmVyXG4gICAgICAgICAgICAgICAgOiBuZXcgVHJlZSh0cmVlLnR5cGUsIHRyZWUuY2hpbGRyZW4uc2xpY2UoMCwgaSkuY29uY2F0KGlubmVyKSwgdHJlZS5wb3NpdGlvbnMuc2xpY2UoMCwgaSArIDEpLCBwb3MgKyBpbm5lci5sZW5ndGgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBudWxsO1xufVxuZnVuY3Rpb24gZmluZFN0YXJ0SW5GcmFnbWVudHMobGFuZywgZnJhZ21lbnRzLCBzdGFydFBvcywgZW5kUG9zLCBlZGl0b3JTdGF0ZSkge1xuICAgIGZvciAobGV0IGYgb2YgZnJhZ21lbnRzKSB7XG4gICAgICAgIGxldCBmcm9tID0gZi5mcm9tICsgKGYub3BlblN0YXJ0ID8gMjUgOiAwKSwgdG8gPSBmLnRvIC0gKGYub3BlbkVuZCA/IDI1IDogMCk7XG4gICAgICAgIGxldCBmb3VuZCA9IGZyb20gPD0gc3RhcnRQb3MgJiYgdG8gPiBzdGFydFBvcyAmJiBmaW5kU3RhdGUobGFuZywgZi50cmVlLCAwIC0gZi5vZmZzZXQsIHN0YXJ0UG9zLCB0byksIHRyZWU7XG4gICAgICAgIGlmIChmb3VuZCAmJiBmb3VuZC5wb3MgPD0gZW5kUG9zICYmICh0cmVlID0gY3V0VHJlZShsYW5nLCBmLnRyZWUsIHN0YXJ0UG9zICsgZi5vZmZzZXQsIGZvdW5kLnBvcyArIGYub2Zmc2V0LCBmYWxzZSkpKVxuICAgICAgICAgICAgcmV0dXJuIHsgc3RhdGU6IGZvdW5kLnN0YXRlLCB0cmVlIH07XG4gICAgfVxuICAgIHJldHVybiB7IHN0YXRlOiBsYW5nLnN0cmVhbVBhcnNlci5zdGFydFN0YXRlKGVkaXRvclN0YXRlID8gZ2V0SW5kZW50VW5pdChlZGl0b3JTdGF0ZSkgOiA0KSwgdHJlZTogVHJlZS5lbXB0eSB9O1xufVxuY2xhc3MgUGFyc2Uge1xuICAgIGNvbnN0cnVjdG9yKGxhbmcsIGlucHV0LCBmcmFnbWVudHMsIHJhbmdlcykge1xuICAgICAgICB0aGlzLmxhbmcgPSBsYW5nO1xuICAgICAgICB0aGlzLmlucHV0ID0gaW5wdXQ7XG4gICAgICAgIHRoaXMuZnJhZ21lbnRzID0gZnJhZ21lbnRzO1xuICAgICAgICB0aGlzLnJhbmdlcyA9IHJhbmdlcztcbiAgICAgICAgdGhpcy5zdG9wcGVkQXQgPSBudWxsO1xuICAgICAgICB0aGlzLmNodW5rcyA9IFtdO1xuICAgICAgICB0aGlzLmNodW5rUG9zID0gW107XG4gICAgICAgIHRoaXMuY2h1bmsgPSBbXTtcbiAgICAgICAgdGhpcy5jaHVua1JldXNlZCA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy5yYW5nZUluZGV4ID0gMDtcbiAgICAgICAgdGhpcy50byA9IHJhbmdlc1tyYW5nZXMubGVuZ3RoIC0gMV0udG87XG4gICAgICAgIGxldCBjb250ZXh0ID0gUGFyc2VDb250ZXh0LmdldCgpLCBmcm9tID0gcmFuZ2VzWzBdLmZyb207XG4gICAgICAgIGxldCB7IHN0YXRlLCB0cmVlIH0gPSBmaW5kU3RhcnRJbkZyYWdtZW50cyhsYW5nLCBmcmFnbWVudHMsIGZyb20sIHRoaXMudG8sIGNvbnRleHQgPT09IG51bGwgfHwgY29udGV4dCA9PT0gdm9pZCAwID8gdm9pZCAwIDogY29udGV4dC5zdGF0ZSk7XG4gICAgICAgIHRoaXMuc3RhdGUgPSBzdGF0ZTtcbiAgICAgICAgdGhpcy5wYXJzZWRQb3MgPSB0aGlzLmNodW5rU3RhcnQgPSBmcm9tICsgdHJlZS5sZW5ndGg7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdHJlZS5jaGlsZHJlbi5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgdGhpcy5jaHVua3MucHVzaCh0cmVlLmNoaWxkcmVuW2ldKTtcbiAgICAgICAgICAgIHRoaXMuY2h1bmtQb3MucHVzaCh0cmVlLnBvc2l0aW9uc1tpXSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGNvbnRleHQgJiYgdGhpcy5wYXJzZWRQb3MgPCBjb250ZXh0LnZpZXdwb3J0LmZyb20gLSAxMDAwMDAgLyogQy5NYXhEaXN0YW5jZUJlZm9yZVZpZXdwb3J0ICovICYmXG4gICAgICAgICAgICByYW5nZXMuc29tZShyID0+IHIuZnJvbSA8PSBjb250ZXh0LnZpZXdwb3J0LmZyb20gJiYgci50byA+PSBjb250ZXh0LnZpZXdwb3J0LmZyb20pKSB7XG4gICAgICAgICAgICB0aGlzLnN0YXRlID0gdGhpcy5sYW5nLnN0cmVhbVBhcnNlci5zdGFydFN0YXRlKGdldEluZGVudFVuaXQoY29udGV4dC5zdGF0ZSkpO1xuICAgICAgICAgICAgY29udGV4dC5za2lwVW50aWxJblZpZXcodGhpcy5wYXJzZWRQb3MsIGNvbnRleHQudmlld3BvcnQuZnJvbSk7XG4gICAgICAgICAgICB0aGlzLnBhcnNlZFBvcyA9IGNvbnRleHQudmlld3BvcnQuZnJvbTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLm1vdmVSYW5nZUluZGV4KCk7XG4gICAgfVxuICAgIGFkdmFuY2UoKSB7XG4gICAgICAgIGxldCBjb250ZXh0ID0gUGFyc2VDb250ZXh0LmdldCgpO1xuICAgICAgICBsZXQgcGFyc2VFbmQgPSB0aGlzLnN0b3BwZWRBdCA9PSBudWxsID8gdGhpcy50byA6IE1hdGgubWluKHRoaXMudG8sIHRoaXMuc3RvcHBlZEF0KTtcbiAgICAgICAgbGV0IGVuZCA9IE1hdGgubWluKHBhcnNlRW5kLCB0aGlzLmNodW5rU3RhcnQgKyA1MTIgLyogQy5DaHVua1NpemUgKi8pO1xuICAgICAgICBpZiAoY29udGV4dClcbiAgICAgICAgICAgIGVuZCA9IE1hdGgubWluKGVuZCwgY29udGV4dC52aWV3cG9ydC50byk7XG4gICAgICAgIHdoaWxlICh0aGlzLnBhcnNlZFBvcyA8IGVuZClcbiAgICAgICAgICAgIHRoaXMucGFyc2VMaW5lKGNvbnRleHQpO1xuICAgICAgICBpZiAodGhpcy5jaHVua1N0YXJ0IDwgdGhpcy5wYXJzZWRQb3MpXG4gICAgICAgICAgICB0aGlzLmZpbmlzaENodW5rKCk7XG4gICAgICAgIGlmICh0aGlzLnBhcnNlZFBvcyA+PSBwYXJzZUVuZClcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmZpbmlzaCgpO1xuICAgICAgICBpZiAoY29udGV4dCAmJiB0aGlzLnBhcnNlZFBvcyA+PSBjb250ZXh0LnZpZXdwb3J0LnRvKSB7XG4gICAgICAgICAgICBjb250ZXh0LnNraXBVbnRpbEluVmlldyh0aGlzLnBhcnNlZFBvcywgcGFyc2VFbmQpO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZmluaXNoKCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIHN0b3BBdChwb3MpIHtcbiAgICAgICAgdGhpcy5zdG9wcGVkQXQgPSBwb3M7XG4gICAgfVxuICAgIGxpbmVBZnRlcihwb3MpIHtcbiAgICAgICAgbGV0IGNodW5rID0gdGhpcy5pbnB1dC5jaHVuayhwb3MpO1xuICAgICAgICBpZiAoIXRoaXMuaW5wdXQubGluZUNodW5rcykge1xuICAgICAgICAgICAgbGV0IGVvbCA9IGNodW5rLmluZGV4T2YoXCJcXG5cIik7XG4gICAgICAgICAgICBpZiAoZW9sID4gLTEpXG4gICAgICAgICAgICAgICAgY2h1bmsgPSBjaHVuay5zbGljZSgwLCBlb2wpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGNodW5rID09IFwiXFxuXCIpIHtcbiAgICAgICAgICAgIGNodW5rID0gXCJcIjtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcG9zICsgY2h1bmsubGVuZ3RoIDw9IHRoaXMudG8gPyBjaHVuayA6IGNodW5rLnNsaWNlKDAsIHRoaXMudG8gLSBwb3MpO1xuICAgIH1cbiAgICBuZXh0TGluZSgpIHtcbiAgICAgICAgbGV0IGZyb20gPSB0aGlzLnBhcnNlZFBvcywgbGluZSA9IHRoaXMubGluZUFmdGVyKGZyb20pLCBlbmQgPSBmcm9tICsgbGluZS5sZW5ndGg7XG4gICAgICAgIGZvciAobGV0IGluZGV4ID0gdGhpcy5yYW5nZUluZGV4OzspIHtcbiAgICAgICAgICAgIGxldCByYW5nZUVuZCA9IHRoaXMucmFuZ2VzW2luZGV4XS50bztcbiAgICAgICAgICAgIGlmIChyYW5nZUVuZCA+PSBlbmQpXG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBsaW5lID0gbGluZS5zbGljZSgwLCByYW5nZUVuZCAtIChlbmQgLSBsaW5lLmxlbmd0aCkpO1xuICAgICAgICAgICAgaW5kZXgrKztcbiAgICAgICAgICAgIGlmIChpbmRleCA9PSB0aGlzLnJhbmdlcy5sZW5ndGgpXG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBsZXQgcmFuZ2VTdGFydCA9IHRoaXMucmFuZ2VzW2luZGV4XS5mcm9tO1xuICAgICAgICAgICAgbGV0IGFmdGVyID0gdGhpcy5saW5lQWZ0ZXIocmFuZ2VTdGFydCk7XG4gICAgICAgICAgICBsaW5lICs9IGFmdGVyO1xuICAgICAgICAgICAgZW5kID0gcmFuZ2VTdGFydCArIGFmdGVyLmxlbmd0aDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4geyBsaW5lLCBlbmQgfTtcbiAgICB9XG4gICAgc2tpcEdhcHNUbyhwb3MsIG9mZnNldCwgc2lkZSkge1xuICAgICAgICBmb3IgKDs7KSB7XG4gICAgICAgICAgICBsZXQgZW5kID0gdGhpcy5yYW5nZXNbdGhpcy5yYW5nZUluZGV4XS50bywgb2ZmUG9zID0gcG9zICsgb2Zmc2V0O1xuICAgICAgICAgICAgaWYgKHNpZGUgPiAwID8gZW5kID4gb2ZmUG9zIDogZW5kID49IG9mZlBvcylcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGxldCBzdGFydCA9IHRoaXMucmFuZ2VzWysrdGhpcy5yYW5nZUluZGV4XS5mcm9tO1xuICAgICAgICAgICAgb2Zmc2V0ICs9IHN0YXJ0IC0gZW5kO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvZmZzZXQ7XG4gICAgfVxuICAgIG1vdmVSYW5nZUluZGV4KCkge1xuICAgICAgICB3aGlsZSAodGhpcy5yYW5nZXNbdGhpcy5yYW5nZUluZGV4XS50byA8IHRoaXMucGFyc2VkUG9zKVxuICAgICAgICAgICAgdGhpcy5yYW5nZUluZGV4Kys7XG4gICAgfVxuICAgIGVtaXRUb2tlbihpZCwgZnJvbSwgdG8sIG9mZnNldCkge1xuICAgICAgICBsZXQgc2l6ZSA9IDQ7XG4gICAgICAgIGlmICh0aGlzLnJhbmdlcy5sZW5ndGggPiAxKSB7XG4gICAgICAgICAgICBvZmZzZXQgPSB0aGlzLnNraXBHYXBzVG8oZnJvbSwgb2Zmc2V0LCAxKTtcbiAgICAgICAgICAgIGZyb20gKz0gb2Zmc2V0O1xuICAgICAgICAgICAgbGV0IGxlbjAgPSB0aGlzLmNodW5rLmxlbmd0aDtcbiAgICAgICAgICAgIG9mZnNldCA9IHRoaXMuc2tpcEdhcHNUbyh0bywgb2Zmc2V0LCAtMSk7XG4gICAgICAgICAgICB0byArPSBvZmZzZXQ7XG4gICAgICAgICAgICBzaXplICs9IHRoaXMuY2h1bmsubGVuZ3RoIC0gbGVuMDtcbiAgICAgICAgfVxuICAgICAgICBsZXQgbGFzdCA9IHRoaXMuY2h1bmsubGVuZ3RoIC0gNDtcbiAgICAgICAgaWYgKHRoaXMubGFuZy5zdHJlYW1QYXJzZXIubWVyZ2VUb2tlbnMgJiYgc2l6ZSA9PSA0ICYmIGxhc3QgPj0gMCAmJlxuICAgICAgICAgICAgdGhpcy5jaHVua1tsYXN0XSA9PSBpZCAmJiB0aGlzLmNodW5rW2xhc3QgKyAyXSA9PSBmcm9tKVxuICAgICAgICAgICAgdGhpcy5jaHVua1tsYXN0ICsgMl0gPSB0bztcbiAgICAgICAgZWxzZVxuICAgICAgICAgICAgdGhpcy5jaHVuay5wdXNoKGlkLCBmcm9tLCB0bywgc2l6ZSk7XG4gICAgICAgIHJldHVybiBvZmZzZXQ7XG4gICAgfVxuICAgIHBhcnNlTGluZShjb250ZXh0KSB7XG4gICAgICAgIGxldCB7IGxpbmUsIGVuZCB9ID0gdGhpcy5uZXh0TGluZSgpLCBvZmZzZXQgPSAwLCB7IHN0cmVhbVBhcnNlciB9ID0gdGhpcy5sYW5nO1xuICAgICAgICBsZXQgc3RyZWFtID0gbmV3IFN0cmluZ1N0cmVhbShsaW5lLCBjb250ZXh0ID8gY29udGV4dC5zdGF0ZS50YWJTaXplIDogNCwgY29udGV4dCA/IGdldEluZGVudFVuaXQoY29udGV4dC5zdGF0ZSkgOiAyKTtcbiAgICAgICAgaWYgKHN0cmVhbS5lb2woKSkge1xuICAgICAgICAgICAgc3RyZWFtUGFyc2VyLmJsYW5rTGluZSh0aGlzLnN0YXRlLCBzdHJlYW0uaW5kZW50VW5pdCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB3aGlsZSAoIXN0cmVhbS5lb2woKSkge1xuICAgICAgICAgICAgICAgIGxldCB0b2tlbiA9IHJlYWRUb2tlbihzdHJlYW1QYXJzZXIudG9rZW4sIHN0cmVhbSwgdGhpcy5zdGF0ZSk7XG4gICAgICAgICAgICAgICAgaWYgKHRva2VuKVxuICAgICAgICAgICAgICAgICAgICBvZmZzZXQgPSB0aGlzLmVtaXRUb2tlbih0aGlzLmxhbmcudG9rZW5UYWJsZS5yZXNvbHZlKHRva2VuKSwgdGhpcy5wYXJzZWRQb3MgKyBzdHJlYW0uc3RhcnQsIHRoaXMucGFyc2VkUG9zICsgc3RyZWFtLnBvcywgb2Zmc2V0KTtcbiAgICAgICAgICAgICAgICBpZiAoc3RyZWFtLnN0YXJ0ID4gMTAwMDAgLyogQy5NYXhMaW5lTGVuZ3RoICovKVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0aGlzLnBhcnNlZFBvcyA9IGVuZDtcbiAgICAgICAgdGhpcy5tb3ZlUmFuZ2VJbmRleCgpO1xuICAgICAgICBpZiAodGhpcy5wYXJzZWRQb3MgPCB0aGlzLnRvKVxuICAgICAgICAgICAgdGhpcy5wYXJzZWRQb3MrKztcbiAgICB9XG4gICAgZmluaXNoQ2h1bmsoKSB7XG4gICAgICAgIGxldCB0cmVlID0gVHJlZS5idWlsZCh7XG4gICAgICAgICAgICBidWZmZXI6IHRoaXMuY2h1bmssXG4gICAgICAgICAgICBzdGFydDogdGhpcy5jaHVua1N0YXJ0LFxuICAgICAgICAgICAgbGVuZ3RoOiB0aGlzLnBhcnNlZFBvcyAtIHRoaXMuY2h1bmtTdGFydCxcbiAgICAgICAgICAgIG5vZGVTZXQsXG4gICAgICAgICAgICB0b3BJRDogMCxcbiAgICAgICAgICAgIG1heEJ1ZmZlckxlbmd0aDogNTEyIC8qIEMuQ2h1bmtTaXplICovLFxuICAgICAgICAgICAgcmV1c2VkOiB0aGlzLmNodW5rUmV1c2VkXG4gICAgICAgIH0pO1xuICAgICAgICB0cmVlID0gbmV3IFRyZWUodHJlZS50eXBlLCB0cmVlLmNoaWxkcmVuLCB0cmVlLnBvc2l0aW9ucywgdHJlZS5sZW5ndGgsIFtbdGhpcy5sYW5nLnN0YXRlQWZ0ZXIsIHRoaXMubGFuZy5zdHJlYW1QYXJzZXIuY29weVN0YXRlKHRoaXMuc3RhdGUpXV0pO1xuICAgICAgICB0aGlzLmNodW5rcy5wdXNoKHRyZWUpO1xuICAgICAgICB0aGlzLmNodW5rUG9zLnB1c2godGhpcy5jaHVua1N0YXJ0IC0gdGhpcy5yYW5nZXNbMF0uZnJvbSk7XG4gICAgICAgIHRoaXMuY2h1bmsgPSBbXTtcbiAgICAgICAgdGhpcy5jaHVua1JldXNlZCA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy5jaHVua1N0YXJ0ID0gdGhpcy5wYXJzZWRQb3M7XG4gICAgfVxuICAgIGZpbmlzaCgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBUcmVlKHRoaXMubGFuZy50b3BOb2RlLCB0aGlzLmNodW5rcywgdGhpcy5jaHVua1BvcywgdGhpcy5wYXJzZWRQb3MgLSB0aGlzLnJhbmdlc1swXS5mcm9tKS5iYWxhbmNlKCk7XG4gICAgfVxufVxuZnVuY3Rpb24gcmVhZFRva2VuKHRva2VuLCBzdHJlYW0sIHN0YXRlKSB7XG4gICAgc3RyZWFtLnN0YXJ0ID0gc3RyZWFtLnBvcztcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IDEwOyBpKyspIHtcbiAgICAgICAgbGV0IHJlc3VsdCA9IHRva2VuKHN0cmVhbSwgc3RhdGUpO1xuICAgICAgICBpZiAoc3RyZWFtLnBvcyA+IHN0cmVhbS5zdGFydClcbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuICAgIHRocm93IG5ldyBFcnJvcihcIlN0cmVhbSBwYXJzZXIgZmFpbGVkIHRvIGFkdmFuY2Ugc3RyZWFtLlwiKTtcbn1cbmNvbnN0IG5vVG9rZW5zID0gLypAX19QVVJFX18qL09iamVjdC5jcmVhdGUobnVsbCk7XG5jb25zdCB0eXBlQXJyYXkgPSBbTm9kZVR5cGUubm9uZV07XG5jb25zdCBub2RlU2V0ID0gLypAX19QVVJFX18qL25ldyBOb2RlU2V0KHR5cGVBcnJheSk7XG5jb25zdCB3YXJuZWQgPSBbXTtcbi8vIENhY2hlIG9mIG5vZGUgdHlwZXMgYnkgbmFtZSBhbmQgdGFnc1xuY29uc3QgYnlUYWcgPSAvKkBfX1BVUkVfXyovT2JqZWN0LmNyZWF0ZShudWxsKTtcbmNvbnN0IGRlZmF1bHRUYWJsZSA9IC8qQF9fUFVSRV9fKi9PYmplY3QuY3JlYXRlKG51bGwpO1xuZm9yIChsZXQgW2xlZ2FjeU5hbWUsIG5hbWVdIG9mIFtcbiAgICBbXCJ2YXJpYWJsZVwiLCBcInZhcmlhYmxlTmFtZVwiXSxcbiAgICBbXCJ2YXJpYWJsZS0yXCIsIFwidmFyaWFibGVOYW1lLnNwZWNpYWxcIl0sXG4gICAgW1wic3RyaW5nLTJcIiwgXCJzdHJpbmcuc3BlY2lhbFwiXSxcbiAgICBbXCJkZWZcIiwgXCJ2YXJpYWJsZU5hbWUuZGVmaW5pdGlvblwiXSxcbiAgICBbXCJ0YWdcIiwgXCJ0YWdOYW1lXCJdLFxuICAgIFtcImF0dHJpYnV0ZVwiLCBcImF0dHJpYnV0ZU5hbWVcIl0sXG4gICAgW1widHlwZVwiLCBcInR5cGVOYW1lXCJdLFxuICAgIFtcImJ1aWx0aW5cIiwgXCJ2YXJpYWJsZU5hbWUuc3RhbmRhcmRcIl0sXG4gICAgW1wicXVhbGlmaWVyXCIsIFwibW9kaWZpZXJcIl0sXG4gICAgW1wiZXJyb3JcIiwgXCJpbnZhbGlkXCJdLFxuICAgIFtcImhlYWRlclwiLCBcImhlYWRpbmdcIl0sXG4gICAgW1wicHJvcGVydHlcIiwgXCJwcm9wZXJ0eU5hbWVcIl1cbl0pXG4gICAgZGVmYXVsdFRhYmxlW2xlZ2FjeU5hbWVdID0gLypAX19QVVJFX18qL2NyZWF0ZVRva2VuVHlwZShub1Rva2VucywgbmFtZSk7XG5jbGFzcyBUb2tlblRhYmxlIHtcbiAgICBjb25zdHJ1Y3RvcihleHRyYSkge1xuICAgICAgICB0aGlzLmV4dHJhID0gZXh0cmE7XG4gICAgICAgIHRoaXMudGFibGUgPSBPYmplY3QuYXNzaWduKE9iamVjdC5jcmVhdGUobnVsbCksIGRlZmF1bHRUYWJsZSk7XG4gICAgfVxuICAgIHJlc29sdmUodGFnKSB7XG4gICAgICAgIHJldHVybiAhdGFnID8gMCA6IHRoaXMudGFibGVbdGFnXSB8fCAodGhpcy50YWJsZVt0YWddID0gY3JlYXRlVG9rZW5UeXBlKHRoaXMuZXh0cmEsIHRhZykpO1xuICAgIH1cbn1cbmNvbnN0IGRlZmF1bHRUb2tlblRhYmxlID0gLypAX19QVVJFX18qL25ldyBUb2tlblRhYmxlKG5vVG9rZW5zKTtcbmZ1bmN0aW9uIHdhcm5Gb3JQYXJ0KHBhcnQsIG1zZykge1xuICAgIGlmICh3YXJuZWQuaW5kZXhPZihwYXJ0KSA+IC0xKVxuICAgICAgICByZXR1cm47XG4gICAgd2FybmVkLnB1c2gocGFydCk7XG4gICAgY29uc29sZS53YXJuKG1zZyk7XG59XG5mdW5jdGlvbiBjcmVhdGVUb2tlblR5cGUoZXh0cmEsIHRhZ1N0cikge1xuICAgIGxldCB0YWdzJDEgPSBbXTtcbiAgICBmb3IgKGxldCBuYW1lIG9mIHRhZ1N0ci5zcGxpdChcIiBcIikpIHtcbiAgICAgICAgbGV0IGZvdW5kID0gW107XG4gICAgICAgIGZvciAobGV0IHBhcnQgb2YgbmFtZS5zcGxpdChcIi5cIikpIHtcbiAgICAgICAgICAgIGxldCB2YWx1ZSA9IChleHRyYVtwYXJ0XSB8fCB0YWdzW3BhcnRdKTtcbiAgICAgICAgICAgIGlmICghdmFsdWUpIHtcbiAgICAgICAgICAgICAgICB3YXJuRm9yUGFydChwYXJ0LCBgVW5rbm93biBoaWdobGlnaHRpbmcgdGFnICR7cGFydH1gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHR5cGVvZiB2YWx1ZSA9PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICAgICAgICBpZiAoIWZvdW5kLmxlbmd0aClcbiAgICAgICAgICAgICAgICAgICAgd2FybkZvclBhcnQocGFydCwgYE1vZGlmaWVyICR7cGFydH0gdXNlZCBhdCBzdGFydCBvZiB0YWdgKTtcbiAgICAgICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgICAgIGZvdW5kID0gZm91bmQubWFwKHZhbHVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGlmIChmb3VuZC5sZW5ndGgpXG4gICAgICAgICAgICAgICAgICAgIHdhcm5Gb3JQYXJ0KHBhcnQsIGBUYWcgJHtwYXJ0fSB1c2VkIGFzIG1vZGlmaWVyYCk7XG4gICAgICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgICAgICBmb3VuZCA9IEFycmF5LmlzQXJyYXkodmFsdWUpID8gdmFsdWUgOiBbdmFsdWVdO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGZvciAobGV0IHRhZyBvZiBmb3VuZClcbiAgICAgICAgICAgIHRhZ3MkMS5wdXNoKHRhZyk7XG4gICAgfVxuICAgIGlmICghdGFncyQxLmxlbmd0aClcbiAgICAgICAgcmV0dXJuIDA7XG4gICAgbGV0IG5hbWUgPSB0YWdTdHIucmVwbGFjZSgvIC9nLCBcIl9cIiksIGtleSA9IG5hbWUgKyBcIiBcIiArIHRhZ3MkMS5tYXAodCA9PiB0LmlkKTtcbiAgICBsZXQga25vd24gPSBieVRhZ1trZXldO1xuICAgIGlmIChrbm93bilcbiAgICAgICAgcmV0dXJuIGtub3duLmlkO1xuICAgIGxldCB0eXBlID0gYnlUYWdba2V5XSA9IE5vZGVUeXBlLmRlZmluZSh7XG4gICAgICAgIGlkOiB0eXBlQXJyYXkubGVuZ3RoLFxuICAgICAgICBuYW1lLFxuICAgICAgICBwcm9wczogW3N0eWxlVGFncyh7IFtuYW1lXTogdGFncyQxIH0pXVxuICAgIH0pO1xuICAgIHR5cGVBcnJheS5wdXNoKHR5cGUpO1xuICAgIHJldHVybiB0eXBlLmlkO1xufVxuZnVuY3Rpb24gZG9jSUQoZGF0YSwgbGFuZykge1xuICAgIGxldCB0eXBlID0gTm9kZVR5cGUuZGVmaW5lKHsgaWQ6IHR5cGVBcnJheS5sZW5ndGgsIG5hbWU6IFwiRG9jdW1lbnRcIiwgcHJvcHM6IFtcbiAgICAgICAgICAgIGxhbmd1YWdlRGF0YVByb3AuYWRkKCgpID0+IGRhdGEpLFxuICAgICAgICAgICAgaW5kZW50Tm9kZVByb3AuYWRkKCgpID0+IGN4ID0+IGxhbmcuZ2V0SW5kZW50KGN4KSlcbiAgICAgICAgXSwgdG9wOiB0cnVlIH0pO1xuICAgIHR5cGVBcnJheS5wdXNoKHR5cGUpO1xuICAgIHJldHVybiB0eXBlO1xufVxuXG5mdW5jdGlvbiBidWlsZEZvckxpbmUobGluZSkge1xuICAgIHJldHVybiBsaW5lLmxlbmd0aCA8PSA0MDk2ICYmIC9bXFx1MDU5MC1cXHUwNWY0XFx1MDYwMC1cXHUwNmZmXFx1MDcwMC1cXHUwOGFjXFx1ZmI1MC1cXHVmZGZmXS8udGVzdChsaW5lKTtcbn1cbmZ1bmN0aW9uIHRleHRIYXNSVEwodGV4dCkge1xuICAgIGZvciAobGV0IGkgPSB0ZXh0Lml0ZXIoKTsgIWkubmV4dCgpLmRvbmU7KVxuICAgICAgICBpZiAoYnVpbGRGb3JMaW5lKGkudmFsdWUpKVxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgcmV0dXJuIGZhbHNlO1xufVxuZnVuY3Rpb24gY2hhbmdlQWRkc1JUTChjaGFuZ2UpIHtcbiAgICBsZXQgYWRkZWQgPSBmYWxzZTtcbiAgICBjaGFuZ2UuaXRlckNoYW5nZXMoKGZBLCB0QSwgZkIsIHRCLCBpbnMpID0+IHtcbiAgICAgICAgaWYgKCFhZGRlZCAmJiB0ZXh0SGFzUlRMKGlucykpXG4gICAgICAgICAgICBhZGRlZCA9IHRydWU7XG4gICAgfSk7XG4gICAgcmV0dXJuIGFkZGVkO1xufVxuY29uc3QgYWx3YXlzSXNvbGF0ZSA9IC8qQF9fUFVSRV9fKi9GYWNldC5kZWZpbmUoeyBjb21iaW5lOiB2YWx1ZXMgPT4gdmFsdWVzLnNvbWUoeCA9PiB4KSB9KTtcbi8qKlxuTWFrZSBzdXJlIG5vZGVzXG5bbWFya2VkXShodHRwczovL2xlemVyLmNvZGVtaXJyb3IubmV0L2RvY3MvcmVmLyNjb21tb24uTm9kZVByb3BeaXNvbGF0ZSlcbmFzIGlzb2xhdGluZyBmb3IgYmlkaXJlY3Rpb25hbCB0ZXh0IGFyZSByZW5kZXJlZCBpbiBhIHdheSB0aGF0XG5pc29sYXRlcyB0aGVtIGZyb20gdGhlIHN1cnJvdW5kaW5nIHRleHQuXG4qL1xuZnVuY3Rpb24gYmlkaUlzb2xhdGVzKG9wdGlvbnMgPSB7fSkge1xuICAgIGxldCBleHRlbnNpb25zID0gW2lzb2xhdGVNYXJrc107XG4gICAgaWYgKG9wdGlvbnMuYWx3YXlzSXNvbGF0ZSlcbiAgICAgICAgZXh0ZW5zaW9ucy5wdXNoKGFsd2F5c0lzb2xhdGUub2YodHJ1ZSkpO1xuICAgIHJldHVybiBleHRlbnNpb25zO1xufVxuY29uc3QgaXNvbGF0ZU1hcmtzID0gLypAX19QVVJFX18qL1ZpZXdQbHVnaW4uZnJvbUNsYXNzKGNsYXNzIHtcbiAgICBjb25zdHJ1Y3Rvcih2aWV3KSB7XG4gICAgICAgIHRoaXMuYWx3YXlzID0gdmlldy5zdGF0ZS5mYWNldChhbHdheXNJc29sYXRlKSB8fFxuICAgICAgICAgICAgdmlldy50ZXh0RGlyZWN0aW9uICE9IERpcmVjdGlvbi5MVFIgfHxcbiAgICAgICAgICAgIHZpZXcuc3RhdGUuZmFjZXQoRWRpdG9yVmlldy5wZXJMaW5lVGV4dERpcmVjdGlvbik7XG4gICAgICAgIHRoaXMuaGFzUlRMID0gIXRoaXMuYWx3YXlzICYmIHRleHRIYXNSVEwodmlldy5zdGF0ZS5kb2MpO1xuICAgICAgICB0aGlzLnRyZWUgPSBzeW50YXhUcmVlKHZpZXcuc3RhdGUpO1xuICAgICAgICB0aGlzLmRlY29yYXRpb25zID0gdGhpcy5hbHdheXMgfHwgdGhpcy5oYXNSVEwgPyBidWlsZERlY28odmlldywgdGhpcy50cmVlLCB0aGlzLmFsd2F5cykgOiBEZWNvcmF0aW9uLm5vbmU7XG4gICAgfVxuICAgIHVwZGF0ZSh1cGRhdGUpIHtcbiAgICAgICAgbGV0IGFsd2F5cyA9IHVwZGF0ZS5zdGF0ZS5mYWNldChhbHdheXNJc29sYXRlKSB8fFxuICAgICAgICAgICAgdXBkYXRlLnZpZXcudGV4dERpcmVjdGlvbiAhPSBEaXJlY3Rpb24uTFRSIHx8XG4gICAgICAgICAgICB1cGRhdGUuc3RhdGUuZmFjZXQoRWRpdG9yVmlldy5wZXJMaW5lVGV4dERpcmVjdGlvbik7XG4gICAgICAgIGlmICghYWx3YXlzICYmICF0aGlzLmhhc1JUTCAmJiBjaGFuZ2VBZGRzUlRMKHVwZGF0ZS5jaGFuZ2VzKSlcbiAgICAgICAgICAgIHRoaXMuaGFzUlRMID0gdHJ1ZTtcbiAgICAgICAgaWYgKCFhbHdheXMgJiYgIXRoaXMuaGFzUlRMKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICBsZXQgdHJlZSA9IHN5bnRheFRyZWUodXBkYXRlLnN0YXRlKTtcbiAgICAgICAgaWYgKGFsd2F5cyAhPSB0aGlzLmFsd2F5cyB8fCB0cmVlICE9IHRoaXMudHJlZSB8fCB1cGRhdGUuZG9jQ2hhbmdlZCB8fCB1cGRhdGUudmlld3BvcnRDaGFuZ2VkKSB7XG4gICAgICAgICAgICB0aGlzLnRyZWUgPSB0cmVlO1xuICAgICAgICAgICAgdGhpcy5hbHdheXMgPSBhbHdheXM7XG4gICAgICAgICAgICB0aGlzLmRlY29yYXRpb25zID0gYnVpbGREZWNvKHVwZGF0ZS52aWV3LCB0cmVlLCBhbHdheXMpO1xuICAgICAgICB9XG4gICAgfVxufSwge1xuICAgIHByb3ZpZGU6IHBsdWdpbiA9PiB7XG4gICAgICAgIGZ1bmN0aW9uIGFjY2Vzcyh2aWV3KSB7XG4gICAgICAgICAgICB2YXIgX2EsIF9iO1xuICAgICAgICAgICAgcmV0dXJuIChfYiA9IChfYSA9IHZpZXcucGx1Z2luKHBsdWdpbikpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5kZWNvcmF0aW9ucykgIT09IG51bGwgJiYgX2IgIT09IHZvaWQgMCA/IF9iIDogRGVjb3JhdGlvbi5ub25lO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBbRWRpdG9yVmlldy5vdXRlckRlY29yYXRpb25zLm9mKGFjY2VzcyksXG4gICAgICAgICAgICBQcmVjLmxvd2VzdChFZGl0b3JWaWV3LmJpZGlJc29sYXRlZFJhbmdlcy5vZihhY2Nlc3MpKV07XG4gICAgfVxufSk7XG5mdW5jdGlvbiBidWlsZERlY28odmlldywgdHJlZSwgYWx3YXlzKSB7XG4gICAgbGV0IGRlY28gPSBuZXcgUmFuZ2VTZXRCdWlsZGVyKCk7XG4gICAgbGV0IHJhbmdlcyA9IHZpZXcudmlzaWJsZVJhbmdlcztcbiAgICBpZiAoIWFsd2F5cylcbiAgICAgICAgcmFuZ2VzID0gY2xpcFJUTExpbmVzKHJhbmdlcywgdmlldy5zdGF0ZS5kb2MpO1xuICAgIGZvciAobGV0IHsgZnJvbSwgdG8gfSBvZiByYW5nZXMpIHtcbiAgICAgICAgdHJlZS5pdGVyYXRlKHtcbiAgICAgICAgICAgIGVudGVyOiBub2RlID0+IHtcbiAgICAgICAgICAgICAgICBsZXQgaXNvID0gbm9kZS50eXBlLnByb3AoTm9kZVByb3AuaXNvbGF0ZSk7XG4gICAgICAgICAgICAgICAgaWYgKGlzbylcbiAgICAgICAgICAgICAgICAgICAgZGVjby5hZGQobm9kZS5mcm9tLCBub2RlLnRvLCBtYXJrc1tpc29dKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBmcm9tLCB0b1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgcmV0dXJuIGRlY28uZmluaXNoKCk7XG59XG5mdW5jdGlvbiBjbGlwUlRMTGluZXMocmFuZ2VzLCBkb2MpIHtcbiAgICBsZXQgY3VyID0gZG9jLml0ZXIoKSwgcG9zID0gMCwgcmVzdWx0ID0gW10sIGxhc3QgPSBudWxsO1xuICAgIGZvciAobGV0IHsgZnJvbSwgdG8gfSBvZiByYW5nZXMpIHtcbiAgICAgICAgaWYgKGxhc3QgJiYgbGFzdC50byA+IGZyb20pIHtcbiAgICAgICAgICAgIGZyb20gPSBsYXN0LnRvO1xuICAgICAgICAgICAgaWYgKGZyb20gPj0gdG8pXG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHBvcyArIGN1ci52YWx1ZS5sZW5ndGggPCBmcm9tKSB7XG4gICAgICAgICAgICBjdXIubmV4dChmcm9tIC0gKHBvcyArIGN1ci52YWx1ZS5sZW5ndGgpKTtcbiAgICAgICAgICAgIHBvcyA9IGZyb207XG4gICAgICAgIH1cbiAgICAgICAgZm9yICg7Oykge1xuICAgICAgICAgICAgbGV0IHN0YXJ0ID0gcG9zLCBlbmQgPSBwb3MgKyBjdXIudmFsdWUubGVuZ3RoO1xuICAgICAgICAgICAgaWYgKCFjdXIubGluZUJyZWFrICYmIGJ1aWxkRm9yTGluZShjdXIudmFsdWUpKSB7XG4gICAgICAgICAgICAgICAgaWYgKGxhc3QgJiYgbGFzdC50byA+IHN0YXJ0IC0gMTApXG4gICAgICAgICAgICAgICAgICAgIGxhc3QudG8gPSBNYXRoLm1pbih0bywgZW5kKTtcbiAgICAgICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdC5wdXNoKGxhc3QgPSB7IGZyb206IHN0YXJ0LCB0bzogTWF0aC5taW4odG8sIGVuZCkgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZW5kID49IHRvKVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgcG9zID0gZW5kO1xuICAgICAgICAgICAgY3VyLm5leHQoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xufVxuY29uc3QgbWFya3MgPSB7XG4gICAgcnRsOiAvKkBfX1BVUkVfXyovRGVjb3JhdGlvbi5tYXJrKHsgY2xhc3M6IFwiY20taXNvXCIsIGluY2x1c2l2ZTogdHJ1ZSwgYXR0cmlidXRlczogeyBkaXI6IFwicnRsXCIgfSwgYmlkaUlzb2xhdGU6IERpcmVjdGlvbi5SVEwgfSksXG4gICAgbHRyOiAvKkBfX1BVUkVfXyovRGVjb3JhdGlvbi5tYXJrKHsgY2xhc3M6IFwiY20taXNvXCIsIGluY2x1c2l2ZTogdHJ1ZSwgYXR0cmlidXRlczogeyBkaXI6IFwibHRyXCIgfSwgYmlkaUlzb2xhdGU6IERpcmVjdGlvbi5MVFIgfSksXG4gICAgYXV0bzogLypAX19QVVJFX18qL0RlY29yYXRpb24ubWFyayh7IGNsYXNzOiBcImNtLWlzb1wiLCBpbmNsdXNpdmU6IHRydWUsIGF0dHJpYnV0ZXM6IHsgZGlyOiBcImF1dG9cIiB9LCBiaWRpSXNvbGF0ZTogbnVsbCB9KVxufTtcblxuZXhwb3J0IHsgRG9jSW5wdXQsIEhpZ2hsaWdodFN0eWxlLCBJbmRlbnRDb250ZXh0LCBMUkxhbmd1YWdlLCBMYW5ndWFnZSwgTGFuZ3VhZ2VEZXNjcmlwdGlvbiwgTGFuZ3VhZ2VTdXBwb3J0LCBQYXJzZUNvbnRleHQsIFN0cmVhbUxhbmd1YWdlLCBTdHJpbmdTdHJlYW0sIFRyZWVJbmRlbnRDb250ZXh0LCBiaWRpSXNvbGF0ZXMsIGJyYWNrZXRNYXRjaGluZywgYnJhY2tldE1hdGNoaW5nSGFuZGxlLCBjb2RlRm9sZGluZywgY29udGludWVkSW5kZW50LCBkZWZhdWx0SGlnaGxpZ2h0U3R5bGUsIGRlZmluZUxhbmd1YWdlRmFjZXQsIGRlbGltaXRlZEluZGVudCwgZW5zdXJlU3ludGF4VHJlZSwgZmxhdEluZGVudCwgZm9sZEFsbCwgZm9sZENvZGUsIGZvbGRFZmZlY3QsIGZvbGRHdXR0ZXIsIGZvbGRJbnNpZGUsIGZvbGRLZXltYXAsIGZvbGROb2RlUHJvcCwgZm9sZFNlcnZpY2UsIGZvbGRTdGF0ZSwgZm9sZGFibGUsIGZvbGRlZFJhbmdlcywgZm9yY2VQYXJzaW5nLCBnZXRJbmRlbnRVbml0LCBnZXRJbmRlbnRhdGlvbiwgaGlnaGxpZ2h0aW5nRm9yLCBpbmRlbnROb2RlUHJvcCwgaW5kZW50T25JbnB1dCwgaW5kZW50UmFuZ2UsIGluZGVudFNlcnZpY2UsIGluZGVudFN0cmluZywgaW5kZW50VW5pdCwgbGFuZ3VhZ2UsIGxhbmd1YWdlRGF0YVByb3AsIG1hdGNoQnJhY2tldHMsIHN1Ymxhbmd1YWdlUHJvcCwgc3ludGF4SGlnaGxpZ2h0aW5nLCBzeW50YXhQYXJzZXJSdW5uaW5nLCBzeW50YXhUcmVlLCBzeW50YXhUcmVlQXZhaWxhYmxlLCB0b2dnbGVGb2xkLCB1bmZvbGRBbGwsIHVuZm9sZENvZGUsIHVuZm9sZEVmZmVjdCB9O1xuIiwKICAgICJpbXBvcnQgeyBBbm5vdGF0aW9uLCBGYWNldCwgY29tYmluZUNvbmZpZywgU3RhdGVGaWVsZCwgVHJhbnNhY3Rpb24sIENoYW5nZVNldCwgQ2hhbmdlRGVzYywgRWRpdG9yU2VsZWN0aW9uLCBTdGF0ZUVmZmVjdCwgVGV4dCwgZmluZENsdXN0ZXJCcmVhaywgY291bnRDb2x1bW4sIENoYXJDYXRlZ29yeSB9IGZyb20gJ0Bjb2RlbWlycm9yL3N0YXRlJztcbmltcG9ydCB7IEVkaXRvclZpZXcsIERpcmVjdGlvbiB9IGZyb20gJ0Bjb2RlbWlycm9yL3ZpZXcnO1xuaW1wb3J0IHsgSW5kZW50Q29udGV4dCwgZ2V0SW5kZW50YXRpb24sIGluZGVudFN0cmluZywgbWF0Y2hCcmFja2V0cywgc3ludGF4VHJlZSwgZ2V0SW5kZW50VW5pdCwgaW5kZW50VW5pdCB9IGZyb20gJ0Bjb2RlbWlycm9yL2xhbmd1YWdlJztcbmltcG9ydCB7IE5vZGVQcm9wIH0gZnJvbSAnQGxlemVyL2NvbW1vbic7XG5cbi8qKlxuQ29tbWVudCBvciB1bmNvbW1lbnQgdGhlIGN1cnJlbnQgc2VsZWN0aW9uLiBXaWxsIHVzZSBsaW5lIGNvbW1lbnRzXG5pZiBhdmFpbGFibGUsIG90aGVyd2lzZSBmYWxsaW5nIGJhY2sgdG8gYmxvY2sgY29tbWVudHMuXG4qL1xuY29uc3QgdG9nZ2xlQ29tbWVudCA9IHRhcmdldCA9PiB7XG4gICAgbGV0IHsgc3RhdGUgfSA9IHRhcmdldCwgbGluZSA9IHN0YXRlLmRvYy5saW5lQXQoc3RhdGUuc2VsZWN0aW9uLm1haW4uZnJvbSksIGNvbmZpZyA9IGdldENvbmZpZyh0YXJnZXQuc3RhdGUsIGxpbmUuZnJvbSk7XG4gICAgcmV0dXJuIGNvbmZpZy5saW5lID8gdG9nZ2xlTGluZUNvbW1lbnQodGFyZ2V0KSA6IGNvbmZpZy5ibG9jayA/IHRvZ2dsZUJsb2NrQ29tbWVudEJ5TGluZSh0YXJnZXQpIDogZmFsc2U7XG59O1xuZnVuY3Rpb24gY29tbWFuZChmLCBvcHRpb24pIHtcbiAgICByZXR1cm4gKHsgc3RhdGUsIGRpc3BhdGNoIH0pID0+IHtcbiAgICAgICAgaWYgKHN0YXRlLnJlYWRPbmx5KVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICBsZXQgdHIgPSBmKG9wdGlvbiwgc3RhdGUpO1xuICAgICAgICBpZiAoIXRyKVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICBkaXNwYXRjaChzdGF0ZS51cGRhdGUodHIpKTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfTtcbn1cbi8qKlxuQ29tbWVudCBvciB1bmNvbW1lbnQgdGhlIGN1cnJlbnQgc2VsZWN0aW9uIHVzaW5nIGxpbmUgY29tbWVudHMuXG5UaGUgbGluZSBjb21tZW50IHN5bnRheCBpcyB0YWtlbiBmcm9tIHRoZVxuW2Bjb21tZW50VG9rZW5zYF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNjb21tYW5kcy5Db21tZW50VG9rZW5zKSBbbGFuZ3VhZ2VcbmRhdGFdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jc3RhdGUuRWRpdG9yU3RhdGUubGFuZ3VhZ2VEYXRhQXQpLlxuKi9cbmNvbnN0IHRvZ2dsZUxpbmVDb21tZW50ID0gLypAX19QVVJFX18qL2NvbW1hbmQoY2hhbmdlTGluZUNvbW1lbnQsIDAgLyogQ29tbWVudE9wdGlvbi5Ub2dnbGUgKi8pO1xuLyoqXG5Db21tZW50IHRoZSBjdXJyZW50IHNlbGVjdGlvbiB1c2luZyBsaW5lIGNvbW1lbnRzLlxuKi9cbmNvbnN0IGxpbmVDb21tZW50ID0gLypAX19QVVJFX18qL2NvbW1hbmQoY2hhbmdlTGluZUNvbW1lbnQsIDEgLyogQ29tbWVudE9wdGlvbi5Db21tZW50ICovKTtcbi8qKlxuVW5jb21tZW50IHRoZSBjdXJyZW50IHNlbGVjdGlvbiB1c2luZyBsaW5lIGNvbW1lbnRzLlxuKi9cbmNvbnN0IGxpbmVVbmNvbW1lbnQgPSAvKkBfX1BVUkVfXyovY29tbWFuZChjaGFuZ2VMaW5lQ29tbWVudCwgMiAvKiBDb21tZW50T3B0aW9uLlVuY29tbWVudCAqLyk7XG4vKipcbkNvbW1lbnQgb3IgdW5jb21tZW50IHRoZSBjdXJyZW50IHNlbGVjdGlvbiB1c2luZyBibG9jayBjb21tZW50cy5cblRoZSBibG9jayBjb21tZW50IHN5bnRheCBpcyB0YWtlbiBmcm9tIHRoZVxuW2Bjb21tZW50VG9rZW5zYF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNjb21tYW5kcy5Db21tZW50VG9rZW5zKSBbbGFuZ3VhZ2VcbmRhdGFdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jc3RhdGUuRWRpdG9yU3RhdGUubGFuZ3VhZ2VEYXRhQXQpLlxuKi9cbmNvbnN0IHRvZ2dsZUJsb2NrQ29tbWVudCA9IC8qQF9fUFVSRV9fKi9jb21tYW5kKGNoYW5nZUJsb2NrQ29tbWVudCwgMCAvKiBDb21tZW50T3B0aW9uLlRvZ2dsZSAqLyk7XG4vKipcbkNvbW1lbnQgdGhlIGN1cnJlbnQgc2VsZWN0aW9uIHVzaW5nIGJsb2NrIGNvbW1lbnRzLlxuKi9cbmNvbnN0IGJsb2NrQ29tbWVudCA9IC8qQF9fUFVSRV9fKi9jb21tYW5kKGNoYW5nZUJsb2NrQ29tbWVudCwgMSAvKiBDb21tZW50T3B0aW9uLkNvbW1lbnQgKi8pO1xuLyoqXG5VbmNvbW1lbnQgdGhlIGN1cnJlbnQgc2VsZWN0aW9uIHVzaW5nIGJsb2NrIGNvbW1lbnRzLlxuKi9cbmNvbnN0IGJsb2NrVW5jb21tZW50ID0gLypAX19QVVJFX18qL2NvbW1hbmQoY2hhbmdlQmxvY2tDb21tZW50LCAyIC8qIENvbW1lbnRPcHRpb24uVW5jb21tZW50ICovKTtcbi8qKlxuQ29tbWVudCBvciB1bmNvbW1lbnQgdGhlIGxpbmVzIGFyb3VuZCB0aGUgY3VycmVudCBzZWxlY3Rpb24gdXNpbmdcbmJsb2NrIGNvbW1lbnRzLlxuKi9cbmNvbnN0IHRvZ2dsZUJsb2NrQ29tbWVudEJ5TGluZSA9IC8qQF9fUFVSRV9fKi9jb21tYW5kKChvLCBzKSA9PiBjaGFuZ2VCbG9ja0NvbW1lbnQobywgcywgc2VsZWN0ZWRMaW5lUmFuZ2VzKHMpKSwgMCAvKiBDb21tZW50T3B0aW9uLlRvZ2dsZSAqLyk7XG5mdW5jdGlvbiBnZXRDb25maWcoc3RhdGUsIHBvcykge1xuICAgIGxldCBkYXRhID0gc3RhdGUubGFuZ3VhZ2VEYXRhQXQoXCJjb21tZW50VG9rZW5zXCIsIHBvcywgMSk7XG4gICAgcmV0dXJuIGRhdGEubGVuZ3RoID8gZGF0YVswXSA6IHt9O1xufVxuY29uc3QgU2VhcmNoTWFyZ2luID0gNTA7XG4vKipcbkRldGVybWluZXMgaWYgdGhlIGdpdmVuIHJhbmdlIGlzIGJsb2NrLWNvbW1lbnRlZCBpbiB0aGUgZ2l2ZW5cbnN0YXRlLlxuKi9cbmZ1bmN0aW9uIGZpbmRCbG9ja0NvbW1lbnQoc3RhdGUsIHsgb3BlbiwgY2xvc2UgfSwgZnJvbSwgdG8pIHtcbiAgICBsZXQgdGV4dEJlZm9yZSA9IHN0YXRlLnNsaWNlRG9jKGZyb20gLSBTZWFyY2hNYXJnaW4sIGZyb20pO1xuICAgIGxldCB0ZXh0QWZ0ZXIgPSBzdGF0ZS5zbGljZURvYyh0bywgdG8gKyBTZWFyY2hNYXJnaW4pO1xuICAgIGxldCBzcGFjZUJlZm9yZSA9IC9cXHMqJC8uZXhlYyh0ZXh0QmVmb3JlKVswXS5sZW5ndGgsIHNwYWNlQWZ0ZXIgPSAvXlxccyovLmV4ZWModGV4dEFmdGVyKVswXS5sZW5ndGg7XG4gICAgbGV0IGJlZm9yZU9mZiA9IHRleHRCZWZvcmUubGVuZ3RoIC0gc3BhY2VCZWZvcmU7XG4gICAgaWYgKHRleHRCZWZvcmUuc2xpY2UoYmVmb3JlT2ZmIC0gb3Blbi5sZW5ndGgsIGJlZm9yZU9mZikgPT0gb3BlbiAmJlxuICAgICAgICB0ZXh0QWZ0ZXIuc2xpY2Uoc3BhY2VBZnRlciwgc3BhY2VBZnRlciArIGNsb3NlLmxlbmd0aCkgPT0gY2xvc2UpIHtcbiAgICAgICAgcmV0dXJuIHsgb3BlbjogeyBwb3M6IGZyb20gLSBzcGFjZUJlZm9yZSwgbWFyZ2luOiBzcGFjZUJlZm9yZSAmJiAxIH0sXG4gICAgICAgICAgICBjbG9zZTogeyBwb3M6IHRvICsgc3BhY2VBZnRlciwgbWFyZ2luOiBzcGFjZUFmdGVyICYmIDEgfSB9O1xuICAgIH1cbiAgICBsZXQgc3RhcnRUZXh0LCBlbmRUZXh0O1xuICAgIGlmICh0byAtIGZyb20gPD0gMiAqIFNlYXJjaE1hcmdpbikge1xuICAgICAgICBzdGFydFRleHQgPSBlbmRUZXh0ID0gc3RhdGUuc2xpY2VEb2MoZnJvbSwgdG8pO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgc3RhcnRUZXh0ID0gc3RhdGUuc2xpY2VEb2MoZnJvbSwgZnJvbSArIFNlYXJjaE1hcmdpbik7XG4gICAgICAgIGVuZFRleHQgPSBzdGF0ZS5zbGljZURvYyh0byAtIFNlYXJjaE1hcmdpbiwgdG8pO1xuICAgIH1cbiAgICBsZXQgc3RhcnRTcGFjZSA9IC9eXFxzKi8uZXhlYyhzdGFydFRleHQpWzBdLmxlbmd0aCwgZW5kU3BhY2UgPSAvXFxzKiQvLmV4ZWMoZW5kVGV4dClbMF0ubGVuZ3RoO1xuICAgIGxldCBlbmRPZmYgPSBlbmRUZXh0Lmxlbmd0aCAtIGVuZFNwYWNlIC0gY2xvc2UubGVuZ3RoO1xuICAgIGlmIChzdGFydFRleHQuc2xpY2Uoc3RhcnRTcGFjZSwgc3RhcnRTcGFjZSArIG9wZW4ubGVuZ3RoKSA9PSBvcGVuICYmXG4gICAgICAgIGVuZFRleHQuc2xpY2UoZW5kT2ZmLCBlbmRPZmYgKyBjbG9zZS5sZW5ndGgpID09IGNsb3NlKSB7XG4gICAgICAgIHJldHVybiB7IG9wZW46IHsgcG9zOiBmcm9tICsgc3RhcnRTcGFjZSArIG9wZW4ubGVuZ3RoLFxuICAgICAgICAgICAgICAgIG1hcmdpbjogL1xccy8udGVzdChzdGFydFRleHQuY2hhckF0KHN0YXJ0U3BhY2UgKyBvcGVuLmxlbmd0aCkpID8gMSA6IDAgfSxcbiAgICAgICAgICAgIGNsb3NlOiB7IHBvczogdG8gLSBlbmRTcGFjZSAtIGNsb3NlLmxlbmd0aCxcbiAgICAgICAgICAgICAgICBtYXJnaW46IC9cXHMvLnRlc3QoZW5kVGV4dC5jaGFyQXQoZW5kT2ZmIC0gMSkpID8gMSA6IDAgfSB9O1xuICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbn1cbmZ1bmN0aW9uIHNlbGVjdGVkTGluZVJhbmdlcyhzdGF0ZSkge1xuICAgIGxldCByYW5nZXMgPSBbXTtcbiAgICBmb3IgKGxldCByIG9mIHN0YXRlLnNlbGVjdGlvbi5yYW5nZXMpIHtcbiAgICAgICAgbGV0IGZyb21MaW5lID0gc3RhdGUuZG9jLmxpbmVBdChyLmZyb20pO1xuICAgICAgICBsZXQgdG9MaW5lID0gci50byA8PSBmcm9tTGluZS50byA/IGZyb21MaW5lIDogc3RhdGUuZG9jLmxpbmVBdChyLnRvKTtcbiAgICAgICAgaWYgKHRvTGluZS5mcm9tID4gZnJvbUxpbmUuZnJvbSAmJiB0b0xpbmUuZnJvbSA9PSByLnRvKVxuICAgICAgICAgICAgdG9MaW5lID0gci50byA9PSBmcm9tTGluZS50byArIDEgPyBmcm9tTGluZSA6IHN0YXRlLmRvYy5saW5lQXQoci50byAtIDEpO1xuICAgICAgICBsZXQgbGFzdCA9IHJhbmdlcy5sZW5ndGggLSAxO1xuICAgICAgICBpZiAobGFzdCA+PSAwICYmIHJhbmdlc1tsYXN0XS50byA+IGZyb21MaW5lLmZyb20pXG4gICAgICAgICAgICByYW5nZXNbbGFzdF0udG8gPSB0b0xpbmUudG87XG4gICAgICAgIGVsc2VcbiAgICAgICAgICAgIHJhbmdlcy5wdXNoKHsgZnJvbTogZnJvbUxpbmUuZnJvbSArIC9eXFxzKi8uZXhlYyhmcm9tTGluZS50ZXh0KVswXS5sZW5ndGgsIHRvOiB0b0xpbmUudG8gfSk7XG4gICAgfVxuICAgIHJldHVybiByYW5nZXM7XG59XG4vLyBQZXJmb3JtcyB0b2dnbGUsIGNvbW1lbnQgYW5kIHVuY29tbWVudCBvZiBibG9jayBjb21tZW50cyBpblxuLy8gbGFuZ3VhZ2VzIHRoYXQgc3VwcG9ydCB0aGVtLlxuZnVuY3Rpb24gY2hhbmdlQmxvY2tDb21tZW50KG9wdGlvbiwgc3RhdGUsIHJhbmdlcyA9IHN0YXRlLnNlbGVjdGlvbi5yYW5nZXMpIHtcbiAgICBsZXQgdG9rZW5zID0gcmFuZ2VzLm1hcChyID0+IGdldENvbmZpZyhzdGF0ZSwgci5mcm9tKS5ibG9jayk7XG4gICAgaWYgKCF0b2tlbnMuZXZlcnkoYyA9PiBjKSlcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgbGV0IGNvbW1lbnRzID0gcmFuZ2VzLm1hcCgociwgaSkgPT4gZmluZEJsb2NrQ29tbWVudChzdGF0ZSwgdG9rZW5zW2ldLCByLmZyb20sIHIudG8pKTtcbiAgICBpZiAob3B0aW9uICE9IDIgLyogQ29tbWVudE9wdGlvbi5VbmNvbW1lbnQgKi8gJiYgIWNvbW1lbnRzLmV2ZXJ5KGMgPT4gYykpIHtcbiAgICAgICAgcmV0dXJuIHsgY2hhbmdlczogc3RhdGUuY2hhbmdlcyhyYW5nZXMubWFwKChyYW5nZSwgaSkgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChjb21tZW50c1tpXSlcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFtdO1xuICAgICAgICAgICAgICAgIHJldHVybiBbeyBmcm9tOiByYW5nZS5mcm9tLCBpbnNlcnQ6IHRva2Vuc1tpXS5vcGVuICsgXCIgXCIgfSwgeyBmcm9tOiByYW5nZS50bywgaW5zZXJ0OiBcIiBcIiArIHRva2Vuc1tpXS5jbG9zZSB9XTtcbiAgICAgICAgICAgIH0pKSB9O1xuICAgIH1cbiAgICBlbHNlIGlmIChvcHRpb24gIT0gMSAvKiBDb21tZW50T3B0aW9uLkNvbW1lbnQgKi8gJiYgY29tbWVudHMuc29tZShjID0+IGMpKSB7XG4gICAgICAgIGxldCBjaGFuZ2VzID0gW107XG4gICAgICAgIGZvciAobGV0IGkgPSAwLCBjb21tZW50OyBpIDwgY29tbWVudHMubGVuZ3RoOyBpKyspXG4gICAgICAgICAgICBpZiAoY29tbWVudCA9IGNvbW1lbnRzW2ldKSB7XG4gICAgICAgICAgICAgICAgbGV0IHRva2VuID0gdG9rZW5zW2ldLCB7IG9wZW4sIGNsb3NlIH0gPSBjb21tZW50O1xuICAgICAgICAgICAgICAgIGNoYW5nZXMucHVzaCh7IGZyb206IG9wZW4ucG9zIC0gdG9rZW4ub3Blbi5sZW5ndGgsIHRvOiBvcGVuLnBvcyArIG9wZW4ubWFyZ2luIH0sIHsgZnJvbTogY2xvc2UucG9zIC0gY2xvc2UubWFyZ2luLCB0bzogY2xvc2UucG9zICsgdG9rZW4uY2xvc2UubGVuZ3RoIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICByZXR1cm4geyBjaGFuZ2VzIH07XG4gICAgfVxuICAgIHJldHVybiBudWxsO1xufVxuLy8gUGVyZm9ybXMgdG9nZ2xlLCBjb21tZW50IGFuZCB1bmNvbW1lbnQgb2YgbGluZSBjb21tZW50cy5cbmZ1bmN0aW9uIGNoYW5nZUxpbmVDb21tZW50KG9wdGlvbiwgc3RhdGUsIHJhbmdlcyA9IHN0YXRlLnNlbGVjdGlvbi5yYW5nZXMpIHtcbiAgICBsZXQgbGluZXMgPSBbXTtcbiAgICBsZXQgcHJldkxpbmUgPSAtMTtcbiAgICBmb3IgKGxldCB7IGZyb20sIHRvIH0gb2YgcmFuZ2VzKSB7XG4gICAgICAgIGxldCBzdGFydEkgPSBsaW5lcy5sZW5ndGgsIG1pbkluZGVudCA9IDFlOTtcbiAgICAgICAgbGV0IHRva2VuID0gZ2V0Q29uZmlnKHN0YXRlLCBmcm9tKS5saW5lO1xuICAgICAgICBpZiAoIXRva2VuKVxuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgIGZvciAobGV0IHBvcyA9IGZyb207IHBvcyA8PSB0bzspIHtcbiAgICAgICAgICAgIGxldCBsaW5lID0gc3RhdGUuZG9jLmxpbmVBdChwb3MpO1xuICAgICAgICAgICAgaWYgKGxpbmUuZnJvbSA+IHByZXZMaW5lICYmIChmcm9tID09IHRvIHx8IHRvID4gbGluZS5mcm9tKSkge1xuICAgICAgICAgICAgICAgIHByZXZMaW5lID0gbGluZS5mcm9tO1xuICAgICAgICAgICAgICAgIGxldCBpbmRlbnQgPSAvXlxccyovLmV4ZWMobGluZS50ZXh0KVswXS5sZW5ndGg7XG4gICAgICAgICAgICAgICAgbGV0IGVtcHR5ID0gaW5kZW50ID09IGxpbmUubGVuZ3RoO1xuICAgICAgICAgICAgICAgIGxldCBjb21tZW50ID0gbGluZS50ZXh0LnNsaWNlKGluZGVudCwgaW5kZW50ICsgdG9rZW4ubGVuZ3RoKSA9PSB0b2tlbiA/IGluZGVudCA6IC0xO1xuICAgICAgICAgICAgICAgIGlmIChpbmRlbnQgPCBsaW5lLnRleHQubGVuZ3RoICYmIGluZGVudCA8IG1pbkluZGVudClcbiAgICAgICAgICAgICAgICAgICAgbWluSW5kZW50ID0gaW5kZW50O1xuICAgICAgICAgICAgICAgIGxpbmVzLnB1c2goeyBsaW5lLCBjb21tZW50LCB0b2tlbiwgaW5kZW50LCBlbXB0eSwgc2luZ2xlOiBmYWxzZSB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHBvcyA9IGxpbmUudG8gKyAxO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtaW5JbmRlbnQgPCAxZTkpXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gc3RhcnRJOyBpIDwgbGluZXMubGVuZ3RoOyBpKyspXG4gICAgICAgICAgICAgICAgaWYgKGxpbmVzW2ldLmluZGVudCA8IGxpbmVzW2ldLmxpbmUudGV4dC5sZW5ndGgpXG4gICAgICAgICAgICAgICAgICAgIGxpbmVzW2ldLmluZGVudCA9IG1pbkluZGVudDtcbiAgICAgICAgaWYgKGxpbmVzLmxlbmd0aCA9PSBzdGFydEkgKyAxKVxuICAgICAgICAgICAgbGluZXNbc3RhcnRJXS5zaW5nbGUgPSB0cnVlO1xuICAgIH1cbiAgICBpZiAob3B0aW9uICE9IDIgLyogQ29tbWVudE9wdGlvbi5VbmNvbW1lbnQgKi8gJiYgbGluZXMuc29tZShsID0+IGwuY29tbWVudCA8IDAgJiYgKCFsLmVtcHR5IHx8IGwuc2luZ2xlKSkpIHtcbiAgICAgICAgbGV0IGNoYW5nZXMgPSBbXTtcbiAgICAgICAgZm9yIChsZXQgeyBsaW5lLCB0b2tlbiwgaW5kZW50LCBlbXB0eSwgc2luZ2xlIH0gb2YgbGluZXMpXG4gICAgICAgICAgICBpZiAoc2luZ2xlIHx8ICFlbXB0eSlcbiAgICAgICAgICAgICAgICBjaGFuZ2VzLnB1c2goeyBmcm9tOiBsaW5lLmZyb20gKyBpbmRlbnQsIGluc2VydDogdG9rZW4gKyBcIiBcIiB9KTtcbiAgICAgICAgbGV0IGNoYW5nZVNldCA9IHN0YXRlLmNoYW5nZXMoY2hhbmdlcyk7XG4gICAgICAgIHJldHVybiB7IGNoYW5nZXM6IGNoYW5nZVNldCwgc2VsZWN0aW9uOiBzdGF0ZS5zZWxlY3Rpb24ubWFwKGNoYW5nZVNldCwgMSkgfTtcbiAgICB9XG4gICAgZWxzZSBpZiAob3B0aW9uICE9IDEgLyogQ29tbWVudE9wdGlvbi5Db21tZW50ICovICYmIGxpbmVzLnNvbWUobCA9PiBsLmNvbW1lbnQgPj0gMCkpIHtcbiAgICAgICAgbGV0IGNoYW5nZXMgPSBbXTtcbiAgICAgICAgZm9yIChsZXQgeyBsaW5lLCBjb21tZW50LCB0b2tlbiB9IG9mIGxpbmVzKVxuICAgICAgICAgICAgaWYgKGNvbW1lbnQgPj0gMCkge1xuICAgICAgICAgICAgICAgIGxldCBmcm9tID0gbGluZS5mcm9tICsgY29tbWVudCwgdG8gPSBmcm9tICsgdG9rZW4ubGVuZ3RoO1xuICAgICAgICAgICAgICAgIGlmIChsaW5lLnRleHRbdG8gLSBsaW5lLmZyb21dID09IFwiIFwiKVxuICAgICAgICAgICAgICAgICAgICB0bysrO1xuICAgICAgICAgICAgICAgIGNoYW5nZXMucHVzaCh7IGZyb20sIHRvIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICByZXR1cm4geyBjaGFuZ2VzIH07XG4gICAgfVxuICAgIHJldHVybiBudWxsO1xufVxuXG5jb25zdCBmcm9tSGlzdG9yeSA9IC8qQF9fUFVSRV9fKi9Bbm5vdGF0aW9uLmRlZmluZSgpO1xuLyoqXG5UcmFuc2FjdGlvbiBhbm5vdGF0aW9uIHRoYXQgd2lsbCBwcmV2ZW50IHRoYXQgdHJhbnNhY3Rpb24gZnJvbVxuYmVpbmcgY29tYmluZWQgd2l0aCBvdGhlciB0cmFuc2FjdGlvbnMgaW4gdGhlIHVuZG8gaGlzdG9yeS4gR2l2ZW5cbmBcImJlZm9yZVwiYCwgaXQnbGwgcHJldmVudCBtZXJnaW5nIHdpdGggcHJldmlvdXMgdHJhbnNhY3Rpb25zLiBXaXRoXG5gXCJhZnRlclwiYCwgc3Vic2VxdWVudCB0cmFuc2FjdGlvbnMgd29uJ3QgYmUgY29tYmluZWQgd2l0aCB0aGlzXG5vbmUuIFdpdGggYFwiZnVsbFwiYCwgdGhlIHRyYW5zYWN0aW9uIGlzIGlzb2xhdGVkIG9uIGJvdGggc2lkZXMuXG4qL1xuY29uc3QgaXNvbGF0ZUhpc3RvcnkgPSAvKkBfX1BVUkVfXyovQW5ub3RhdGlvbi5kZWZpbmUoKTtcbi8qKlxuVGhpcyBmYWNldCBwcm92aWRlcyBhIHdheSB0byByZWdpc3RlciBmdW5jdGlvbnMgdGhhdCwgZ2l2ZW4gYVxudHJhbnNhY3Rpb24sIHByb3ZpZGUgYSBzZXQgb2YgZWZmZWN0cyB0aGF0IHRoZSBoaXN0b3J5IHNob3VsZFxuc3RvcmUgd2hlbiBpbnZlcnRpbmcgdGhlIHRyYW5zYWN0aW9uLiBUaGlzIGNhbiBiZSB1c2VkIHRvXG5pbnRlZ3JhdGUgc29tZSBraW5kcyBvZiBlZmZlY3RzIGluIHRoZSBoaXN0b3J5LCBzbyB0aGF0IHRoZXkgY2FuXG5iZSB1bmRvbmUgKGFuZCByZWRvbmUgYWdhaW4pLlxuKi9cbmNvbnN0IGludmVydGVkRWZmZWN0cyA9IC8qQF9fUFVSRV9fKi9GYWNldC5kZWZpbmUoKTtcbmNvbnN0IGhpc3RvcnlDb25maWcgPSAvKkBfX1BVUkVfXyovRmFjZXQuZGVmaW5lKHtcbiAgICBjb21iaW5lKGNvbmZpZ3MpIHtcbiAgICAgICAgcmV0dXJuIGNvbWJpbmVDb25maWcoY29uZmlncywge1xuICAgICAgICAgICAgbWluRGVwdGg6IDEwMCxcbiAgICAgICAgICAgIG5ld0dyb3VwRGVsYXk6IDUwMCxcbiAgICAgICAgICAgIGpvaW5Ub0V2ZW50OiAoX3QsIGlzQWRqYWNlbnQpID0+IGlzQWRqYWNlbnQsXG4gICAgICAgIH0sIHtcbiAgICAgICAgICAgIG1pbkRlcHRoOiBNYXRoLm1heCxcbiAgICAgICAgICAgIG5ld0dyb3VwRGVsYXk6IE1hdGgubWluLFxuICAgICAgICAgICAgam9pblRvRXZlbnQ6IChhLCBiKSA9PiAodHIsIGFkaikgPT4gYSh0ciwgYWRqKSB8fCBiKHRyLCBhZGopXG4gICAgICAgIH0pO1xuICAgIH1cbn0pO1xuY29uc3QgaGlzdG9yeUZpZWxkXyA9IC8qQF9fUFVSRV9fKi9TdGF0ZUZpZWxkLmRlZmluZSh7XG4gICAgY3JlYXRlKCkge1xuICAgICAgICByZXR1cm4gSGlzdG9yeVN0YXRlLmVtcHR5O1xuICAgIH0sXG4gICAgdXBkYXRlKHN0YXRlLCB0cikge1xuICAgICAgICBsZXQgY29uZmlnID0gdHIuc3RhdGUuZmFjZXQoaGlzdG9yeUNvbmZpZyk7XG4gICAgICAgIGxldCBmcm9tSGlzdCA9IHRyLmFubm90YXRpb24oZnJvbUhpc3RvcnkpO1xuICAgICAgICBpZiAoZnJvbUhpc3QpIHtcbiAgICAgICAgICAgIGxldCBpdGVtID0gSGlzdEV2ZW50LmZyb21UcmFuc2FjdGlvbih0ciwgZnJvbUhpc3Quc2VsZWN0aW9uKSwgZnJvbSA9IGZyb21IaXN0LnNpZGU7XG4gICAgICAgICAgICBsZXQgb3RoZXIgPSBmcm9tID09IDAgLyogQnJhbmNoTmFtZS5Eb25lICovID8gc3RhdGUudW5kb25lIDogc3RhdGUuZG9uZTtcbiAgICAgICAgICAgIGlmIChpdGVtKVxuICAgICAgICAgICAgICAgIG90aGVyID0gdXBkYXRlQnJhbmNoKG90aGVyLCBvdGhlci5sZW5ndGgsIGNvbmZpZy5taW5EZXB0aCwgaXRlbSk7XG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgb3RoZXIgPSBhZGRTZWxlY3Rpb24ob3RoZXIsIHRyLnN0YXJ0U3RhdGUuc2VsZWN0aW9uKTtcbiAgICAgICAgICAgIHJldHVybiBuZXcgSGlzdG9yeVN0YXRlKGZyb20gPT0gMCAvKiBCcmFuY2hOYW1lLkRvbmUgKi8gPyBmcm9tSGlzdC5yZXN0IDogb3RoZXIsIGZyb20gPT0gMCAvKiBCcmFuY2hOYW1lLkRvbmUgKi8gPyBvdGhlciA6IGZyb21IaXN0LnJlc3QpO1xuICAgICAgICB9XG4gICAgICAgIGxldCBpc29sYXRlID0gdHIuYW5ub3RhdGlvbihpc29sYXRlSGlzdG9yeSk7XG4gICAgICAgIGlmIChpc29sYXRlID09IFwiZnVsbFwiIHx8IGlzb2xhdGUgPT0gXCJiZWZvcmVcIilcbiAgICAgICAgICAgIHN0YXRlID0gc3RhdGUuaXNvbGF0ZSgpO1xuICAgICAgICBpZiAodHIuYW5ub3RhdGlvbihUcmFuc2FjdGlvbi5hZGRUb0hpc3RvcnkpID09PSBmYWxzZSlcbiAgICAgICAgICAgIHJldHVybiAhdHIuY2hhbmdlcy5lbXB0eSA/IHN0YXRlLmFkZE1hcHBpbmcodHIuY2hhbmdlcy5kZXNjKSA6IHN0YXRlO1xuICAgICAgICBsZXQgZXZlbnQgPSBIaXN0RXZlbnQuZnJvbVRyYW5zYWN0aW9uKHRyKTtcbiAgICAgICAgbGV0IHRpbWUgPSB0ci5hbm5vdGF0aW9uKFRyYW5zYWN0aW9uLnRpbWUpLCB1c2VyRXZlbnQgPSB0ci5hbm5vdGF0aW9uKFRyYW5zYWN0aW9uLnVzZXJFdmVudCk7XG4gICAgICAgIGlmIChldmVudClcbiAgICAgICAgICAgIHN0YXRlID0gc3RhdGUuYWRkQ2hhbmdlcyhldmVudCwgdGltZSwgdXNlckV2ZW50LCBjb25maWcsIHRyKTtcbiAgICAgICAgZWxzZSBpZiAodHIuc2VsZWN0aW9uKVxuICAgICAgICAgICAgc3RhdGUgPSBzdGF0ZS5hZGRTZWxlY3Rpb24odHIuc3RhcnRTdGF0ZS5zZWxlY3Rpb24sIHRpbWUsIHVzZXJFdmVudCwgY29uZmlnLm5ld0dyb3VwRGVsYXkpO1xuICAgICAgICBpZiAoaXNvbGF0ZSA9PSBcImZ1bGxcIiB8fCBpc29sYXRlID09IFwiYWZ0ZXJcIilcbiAgICAgICAgICAgIHN0YXRlID0gc3RhdGUuaXNvbGF0ZSgpO1xuICAgICAgICByZXR1cm4gc3RhdGU7XG4gICAgfSxcbiAgICB0b0pTT04odmFsdWUpIHtcbiAgICAgICAgcmV0dXJuIHsgZG9uZTogdmFsdWUuZG9uZS5tYXAoZSA9PiBlLnRvSlNPTigpKSwgdW5kb25lOiB2YWx1ZS51bmRvbmUubWFwKGUgPT4gZS50b0pTT04oKSkgfTtcbiAgICB9LFxuICAgIGZyb21KU09OKGpzb24pIHtcbiAgICAgICAgcmV0dXJuIG5ldyBIaXN0b3J5U3RhdGUoanNvbi5kb25lLm1hcChIaXN0RXZlbnQuZnJvbUpTT04pLCBqc29uLnVuZG9uZS5tYXAoSGlzdEV2ZW50LmZyb21KU09OKSk7XG4gICAgfVxufSk7XG4vKipcbkNyZWF0ZSBhIGhpc3RvcnkgZXh0ZW5zaW9uIHdpdGggdGhlIGdpdmVuIGNvbmZpZ3VyYXRpb24uXG4qL1xuZnVuY3Rpb24gaGlzdG9yeShjb25maWcgPSB7fSkge1xuICAgIHJldHVybiBbXG4gICAgICAgIGhpc3RvcnlGaWVsZF8sXG4gICAgICAgIGhpc3RvcnlDb25maWcub2YoY29uZmlnKSxcbiAgICAgICAgRWRpdG9yVmlldy5kb21FdmVudEhhbmRsZXJzKHtcbiAgICAgICAgICAgIGJlZm9yZWlucHV0KGUsIHZpZXcpIHtcbiAgICAgICAgICAgICAgICBsZXQgY29tbWFuZCA9IGUuaW5wdXRUeXBlID09IFwiaGlzdG9yeVVuZG9cIiA/IHVuZG8gOiBlLmlucHV0VHlwZSA9PSBcImhpc3RvcnlSZWRvXCIgPyByZWRvIDogbnVsbDtcbiAgICAgICAgICAgICAgICBpZiAoIWNvbW1hbmQpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNvbW1hbmQodmlldyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgXTtcbn1cbi8qKlxuVGhlIHN0YXRlIGZpZWxkIHVzZWQgdG8gc3RvcmUgdGhlIGhpc3RvcnkgZGF0YS4gU2hvdWxkIHByb2JhYmx5XG5vbmx5IGJlIHVzZWQgd2hlbiB5b3Ugd2FudCB0b1xuW3NlcmlhbGl6ZV0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNzdGF0ZS5FZGl0b3JTdGF0ZS50b0pTT04pIG9yXG5bZGVzZXJpYWxpemVdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jc3RhdGUuRWRpdG9yU3RhdGVeZnJvbUpTT04pIHN0YXRlIG9iamVjdHMgaW4gYSB3YXlcbnRoYXQgcHJlc2VydmVzIGhpc3RvcnkuXG4qL1xuY29uc3QgaGlzdG9yeUZpZWxkID0gaGlzdG9yeUZpZWxkXztcbmZ1bmN0aW9uIGNtZChzaWRlLCBzZWxlY3Rpb24pIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKHsgc3RhdGUsIGRpc3BhdGNoIH0pIHtcbiAgICAgICAgaWYgKCFzZWxlY3Rpb24gJiYgc3RhdGUucmVhZE9ubHkpXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIGxldCBoaXN0b3J5U3RhdGUgPSBzdGF0ZS5maWVsZChoaXN0b3J5RmllbGRfLCBmYWxzZSk7XG4gICAgICAgIGlmICghaGlzdG9yeVN0YXRlKVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICBsZXQgdHIgPSBoaXN0b3J5U3RhdGUucG9wKHNpZGUsIHN0YXRlLCBzZWxlY3Rpb24pO1xuICAgICAgICBpZiAoIXRyKVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICBkaXNwYXRjaCh0cik7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH07XG59XG4vKipcblVuZG8gYSBzaW5nbGUgZ3JvdXAgb2YgaGlzdG9yeSBldmVudHMuIFJldHVybnMgZmFsc2UgaWYgbm8gZ3JvdXBcbndhcyBhdmFpbGFibGUuXG4qL1xuY29uc3QgdW5kbyA9IC8qQF9fUFVSRV9fKi9jbWQoMCAvKiBCcmFuY2hOYW1lLkRvbmUgKi8sIGZhbHNlKTtcbi8qKlxuUmVkbyBhIGdyb3VwIG9mIGhpc3RvcnkgZXZlbnRzLiBSZXR1cm5zIGZhbHNlIGlmIG5vIGdyb3VwIHdhc1xuYXZhaWxhYmxlLlxuKi9cbmNvbnN0IHJlZG8gPSAvKkBfX1BVUkVfXyovY21kKDEgLyogQnJhbmNoTmFtZS5VbmRvbmUgKi8sIGZhbHNlKTtcbi8qKlxuVW5kbyBhIGNoYW5nZSBvciBzZWxlY3Rpb24gY2hhbmdlLlxuKi9cbmNvbnN0IHVuZG9TZWxlY3Rpb24gPSAvKkBfX1BVUkVfXyovY21kKDAgLyogQnJhbmNoTmFtZS5Eb25lICovLCB0cnVlKTtcbi8qKlxuUmVkbyBhIGNoYW5nZSBvciBzZWxlY3Rpb24gY2hhbmdlLlxuKi9cbmNvbnN0IHJlZG9TZWxlY3Rpb24gPSAvKkBfX1BVUkVfXyovY21kKDEgLyogQnJhbmNoTmFtZS5VbmRvbmUgKi8sIHRydWUpO1xuZnVuY3Rpb24gZGVwdGgoc2lkZSkge1xuICAgIHJldHVybiBmdW5jdGlvbiAoc3RhdGUpIHtcbiAgICAgICAgbGV0IGhpc3RTdGF0ZSA9IHN0YXRlLmZpZWxkKGhpc3RvcnlGaWVsZF8sIGZhbHNlKTtcbiAgICAgICAgaWYgKCFoaXN0U3RhdGUpXG4gICAgICAgICAgICByZXR1cm4gMDtcbiAgICAgICAgbGV0IGJyYW5jaCA9IHNpZGUgPT0gMCAvKiBCcmFuY2hOYW1lLkRvbmUgKi8gPyBoaXN0U3RhdGUuZG9uZSA6IGhpc3RTdGF0ZS51bmRvbmU7XG4gICAgICAgIHJldHVybiBicmFuY2gubGVuZ3RoIC0gKGJyYW5jaC5sZW5ndGggJiYgIWJyYW5jaFswXS5jaGFuZ2VzID8gMSA6IDApO1xuICAgIH07XG59XG4vKipcblRoZSBhbW91bnQgb2YgdW5kb2FibGUgY2hhbmdlIGV2ZW50cyBhdmFpbGFibGUgaW4gYSBnaXZlbiBzdGF0ZS5cbiovXG5jb25zdCB1bmRvRGVwdGggPSAvKkBfX1BVUkVfXyovZGVwdGgoMCAvKiBCcmFuY2hOYW1lLkRvbmUgKi8pO1xuLyoqXG5UaGUgYW1vdW50IG9mIHJlZG9hYmxlIGNoYW5nZSBldmVudHMgYXZhaWxhYmxlIGluIGEgZ2l2ZW4gc3RhdGUuXG4qL1xuY29uc3QgcmVkb0RlcHRoID0gLypAX19QVVJFX18qL2RlcHRoKDEgLyogQnJhbmNoTmFtZS5VbmRvbmUgKi8pO1xuLy8gSGlzdG9yeSBldmVudHMgc3RvcmUgZ3JvdXBzIG9mIGNoYW5nZXMgb3IgZWZmZWN0cyB0aGF0IG5lZWQgdG8gYmVcbi8vIHVuZG9uZS9yZWRvbmUgdG9nZXRoZXIuXG5jbGFzcyBIaXN0RXZlbnQge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8vIFRoZSBjaGFuZ2VzIGluIHRoaXMgZXZlbnQuIE5vcm1hbCBldmVudHMgaG9sZCBhdCBsZWFzdCBvbmVcbiAgICAvLyBjaGFuZ2Ugb3IgZWZmZWN0LiBCdXQgaXQgbWF5IGJlIG5lY2Vzc2FyeSB0byBzdG9yZSBzZWxlY3Rpb25cbiAgICAvLyBldmVudHMgYmVmb3JlIHRoZSBmaXJzdCBjaGFuZ2UsIGluIHdoaWNoIGNhc2UgYSBzcGVjaWFsIHR5cGUgb2ZcbiAgICAvLyBpbnN0YW5jZSBpcyBjcmVhdGVkIHdoaWNoIGRvZXNuJ3QgaG9sZCBhbnkgY2hhbmdlcywgd2l0aFxuICAgIC8vIGNoYW5nZXMgPT0gc3RhcnRTZWxlY3Rpb24gPT0gdW5kZWZpbmVkXG4gICAgY2hhbmdlcywgXG4gICAgLy8gVGhlIGVmZmVjdHMgYXNzb2NpYXRlZCB3aXRoIHRoaXMgZXZlbnRcbiAgICBlZmZlY3RzLCBcbiAgICAvLyBBY2N1bXVsYXRlZCBtYXBwaW5nIChmcm9tIGFkZFRvSGlzdG9yeT09ZmFsc2UpIHRoYXQgc2hvdWxkIGJlXG4gICAgLy8gYXBwbGllZCB0byBldmVudHMgYmVsb3cgdGhpcyBvbmUuXG4gICAgbWFwcGVkLCBcbiAgICAvLyBUaGUgc2VsZWN0aW9uIGJlZm9yZSB0aGlzIGV2ZW50XG4gICAgc3RhcnRTZWxlY3Rpb24sIFxuICAgIC8vIFN0b3JlcyBzZWxlY3Rpb24gY2hhbmdlcyBhZnRlciB0aGlzIGV2ZW50LCB0byBiZSB1c2VkIGZvclxuICAgIC8vIHNlbGVjdGlvbiB1bmRvL3JlZG8uXG4gICAgc2VsZWN0aW9uc0FmdGVyKSB7XG4gICAgICAgIHRoaXMuY2hhbmdlcyA9IGNoYW5nZXM7XG4gICAgICAgIHRoaXMuZWZmZWN0cyA9IGVmZmVjdHM7XG4gICAgICAgIHRoaXMubWFwcGVkID0gbWFwcGVkO1xuICAgICAgICB0aGlzLnN0YXJ0U2VsZWN0aW9uID0gc3RhcnRTZWxlY3Rpb247XG4gICAgICAgIHRoaXMuc2VsZWN0aW9uc0FmdGVyID0gc2VsZWN0aW9uc0FmdGVyO1xuICAgIH1cbiAgICBzZXRTZWxBZnRlcihhZnRlcikge1xuICAgICAgICByZXR1cm4gbmV3IEhpc3RFdmVudCh0aGlzLmNoYW5nZXMsIHRoaXMuZWZmZWN0cywgdGhpcy5tYXBwZWQsIHRoaXMuc3RhcnRTZWxlY3Rpb24sIGFmdGVyKTtcbiAgICB9XG4gICAgdG9KU09OKCkge1xuICAgICAgICB2YXIgX2EsIF9iLCBfYztcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGNoYW5nZXM6IChfYSA9IHRoaXMuY2hhbmdlcykgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLnRvSlNPTigpLFxuICAgICAgICAgICAgbWFwcGVkOiAoX2IgPSB0aGlzLm1hcHBlZCkgPT09IG51bGwgfHwgX2IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9iLnRvSlNPTigpLFxuICAgICAgICAgICAgc3RhcnRTZWxlY3Rpb246IChfYyA9IHRoaXMuc3RhcnRTZWxlY3Rpb24pID09PSBudWxsIHx8IF9jID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYy50b0pTT04oKSxcbiAgICAgICAgICAgIHNlbGVjdGlvbnNBZnRlcjogdGhpcy5zZWxlY3Rpb25zQWZ0ZXIubWFwKHMgPT4gcy50b0pTT04oKSlcbiAgICAgICAgfTtcbiAgICB9XG4gICAgc3RhdGljIGZyb21KU09OKGpzb24pIHtcbiAgICAgICAgcmV0dXJuIG5ldyBIaXN0RXZlbnQoanNvbi5jaGFuZ2VzICYmIENoYW5nZVNldC5mcm9tSlNPTihqc29uLmNoYW5nZXMpLCBbXSwganNvbi5tYXBwZWQgJiYgQ2hhbmdlRGVzYy5mcm9tSlNPTihqc29uLm1hcHBlZCksIGpzb24uc3RhcnRTZWxlY3Rpb24gJiYgRWRpdG9yU2VsZWN0aW9uLmZyb21KU09OKGpzb24uc3RhcnRTZWxlY3Rpb24pLCBqc29uLnNlbGVjdGlvbnNBZnRlci5tYXAoRWRpdG9yU2VsZWN0aW9uLmZyb21KU09OKSk7XG4gICAgfVxuICAgIC8vIFRoaXMgZG9lcyBub3QgY2hlY2sgYGFkZFRvSGlzdG9yeWAgYW5kIHN1Y2gsIGl0IGFzc3VtZXMgdGhlXG4gICAgLy8gdHJhbnNhY3Rpb24gbmVlZHMgdG8gYmUgY29udmVydGVkIHRvIGFuIGl0ZW0uIFJldHVybnMgbnVsbCB3aGVuXG4gICAgLy8gdGhlcmUgYXJlIG5vIGNoYW5nZXMgb3IgZWZmZWN0cyBpbiB0aGUgdHJhbnNhY3Rpb24uXG4gICAgc3RhdGljIGZyb21UcmFuc2FjdGlvbih0ciwgc2VsZWN0aW9uKSB7XG4gICAgICAgIGxldCBlZmZlY3RzID0gbm9uZTtcbiAgICAgICAgZm9yIChsZXQgaW52ZXJ0IG9mIHRyLnN0YXJ0U3RhdGUuZmFjZXQoaW52ZXJ0ZWRFZmZlY3RzKSkge1xuICAgICAgICAgICAgbGV0IHJlc3VsdCA9IGludmVydCh0cik7XG4gICAgICAgICAgICBpZiAocmVzdWx0Lmxlbmd0aClcbiAgICAgICAgICAgICAgICBlZmZlY3RzID0gZWZmZWN0cy5jb25jYXQocmVzdWx0KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIWVmZmVjdHMubGVuZ3RoICYmIHRyLmNoYW5nZXMuZW1wdHkpXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgcmV0dXJuIG5ldyBIaXN0RXZlbnQodHIuY2hhbmdlcy5pbnZlcnQodHIuc3RhcnRTdGF0ZS5kb2MpLCBlZmZlY3RzLCB1bmRlZmluZWQsIHNlbGVjdGlvbiB8fCB0ci5zdGFydFN0YXRlLnNlbGVjdGlvbiwgbm9uZSk7XG4gICAgfVxuICAgIHN0YXRpYyBzZWxlY3Rpb24oc2VsZWN0aW9ucykge1xuICAgICAgICByZXR1cm4gbmV3IEhpc3RFdmVudCh1bmRlZmluZWQsIG5vbmUsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCBzZWxlY3Rpb25zKTtcbiAgICB9XG59XG5mdW5jdGlvbiB1cGRhdGVCcmFuY2goYnJhbmNoLCB0bywgbWF4TGVuLCBuZXdFdmVudCkge1xuICAgIGxldCBzdGFydCA9IHRvICsgMSA+IG1heExlbiArIDIwID8gdG8gLSBtYXhMZW4gLSAxIDogMDtcbiAgICBsZXQgbmV3QnJhbmNoID0gYnJhbmNoLnNsaWNlKHN0YXJ0LCB0byk7XG4gICAgbmV3QnJhbmNoLnB1c2gobmV3RXZlbnQpO1xuICAgIHJldHVybiBuZXdCcmFuY2g7XG59XG5mdW5jdGlvbiBpc0FkamFjZW50KGEsIGIpIHtcbiAgICBsZXQgcmFuZ2VzID0gW10sIGlzQWRqYWNlbnQgPSBmYWxzZTtcbiAgICBhLml0ZXJDaGFuZ2VkUmFuZ2VzKChmLCB0KSA9PiByYW5nZXMucHVzaChmLCB0KSk7XG4gICAgYi5pdGVyQ2hhbmdlZFJhbmdlcygoX2YsIF90LCBmLCB0KSA9PiB7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcmFuZ2VzLmxlbmd0aDspIHtcbiAgICAgICAgICAgIGxldCBmcm9tID0gcmFuZ2VzW2krK10sIHRvID0gcmFuZ2VzW2krK107XG4gICAgICAgICAgICBpZiAodCA+PSBmcm9tICYmIGYgPD0gdG8pXG4gICAgICAgICAgICAgICAgaXNBZGphY2VudCA9IHRydWU7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gaXNBZGphY2VudDtcbn1cbmZ1bmN0aW9uIGVxU2VsZWN0aW9uU2hhcGUoYSwgYikge1xuICAgIHJldHVybiBhLnJhbmdlcy5sZW5ndGggPT0gYi5yYW5nZXMubGVuZ3RoICYmXG4gICAgICAgIGEucmFuZ2VzLmZpbHRlcigociwgaSkgPT4gci5lbXB0eSAhPSBiLnJhbmdlc1tpXS5lbXB0eSkubGVuZ3RoID09PSAwO1xufVxuZnVuY3Rpb24gY29uYyhhLCBiKSB7XG4gICAgcmV0dXJuICFhLmxlbmd0aCA/IGIgOiAhYi5sZW5ndGggPyBhIDogYS5jb25jYXQoYik7XG59XG5jb25zdCBub25lID0gW107XG5jb25zdCBNYXhTZWxlY3Rpb25zUGVyRXZlbnQgPSAyMDA7XG5mdW5jdGlvbiBhZGRTZWxlY3Rpb24oYnJhbmNoLCBzZWxlY3Rpb24pIHtcbiAgICBpZiAoIWJyYW5jaC5sZW5ndGgpIHtcbiAgICAgICAgcmV0dXJuIFtIaXN0RXZlbnQuc2VsZWN0aW9uKFtzZWxlY3Rpb25dKV07XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBsZXQgbGFzdEV2ZW50ID0gYnJhbmNoW2JyYW5jaC5sZW5ndGggLSAxXTtcbiAgICAgICAgbGV0IHNlbHMgPSBsYXN0RXZlbnQuc2VsZWN0aW9uc0FmdGVyLnNsaWNlKE1hdGgubWF4KDAsIGxhc3RFdmVudC5zZWxlY3Rpb25zQWZ0ZXIubGVuZ3RoIC0gTWF4U2VsZWN0aW9uc1BlckV2ZW50KSk7XG4gICAgICAgIGlmIChzZWxzLmxlbmd0aCAmJiBzZWxzW3NlbHMubGVuZ3RoIC0gMV0uZXEoc2VsZWN0aW9uKSlcbiAgICAgICAgICAgIHJldHVybiBicmFuY2g7XG4gICAgICAgIHNlbHMucHVzaChzZWxlY3Rpb24pO1xuICAgICAgICByZXR1cm4gdXBkYXRlQnJhbmNoKGJyYW5jaCwgYnJhbmNoLmxlbmd0aCAtIDEsIDFlOSwgbGFzdEV2ZW50LnNldFNlbEFmdGVyKHNlbHMpKTtcbiAgICB9XG59XG4vLyBBc3N1bWVzIHRoZSB0b3AgaXRlbSBoYXMgb25lIG9yIG1vcmUgc2VsZWN0aW9uQWZ0ZXIgdmFsdWVzXG5mdW5jdGlvbiBwb3BTZWxlY3Rpb24oYnJhbmNoKSB7XG4gICAgbGV0IGxhc3QgPSBicmFuY2hbYnJhbmNoLmxlbmd0aCAtIDFdO1xuICAgIGxldCBuZXdCcmFuY2ggPSBicmFuY2guc2xpY2UoKTtcbiAgICBuZXdCcmFuY2hbYnJhbmNoLmxlbmd0aCAtIDFdID0gbGFzdC5zZXRTZWxBZnRlcihsYXN0LnNlbGVjdGlvbnNBZnRlci5zbGljZSgwLCBsYXN0LnNlbGVjdGlvbnNBZnRlci5sZW5ndGggLSAxKSk7XG4gICAgcmV0dXJuIG5ld0JyYW5jaDtcbn1cbi8vIEFkZCBhIG1hcHBpbmcgdG8gdGhlIHRvcCBldmVudCBpbiB0aGUgZ2l2ZW4gYnJhbmNoLiBJZiB0aGlzIG1hcHNcbi8vIGF3YXkgYWxsIHRoZSBjaGFuZ2VzIGFuZCBlZmZlY3RzIGluIHRoYXQgaXRlbSwgZHJvcCBpdCBhbmRcbi8vIHByb3BhZ2F0ZSB0aGUgbWFwcGluZyB0byB0aGUgbmV4dCBpdGVtLlxuZnVuY3Rpb24gYWRkTWFwcGluZ1RvQnJhbmNoKGJyYW5jaCwgbWFwcGluZykge1xuICAgIGlmICghYnJhbmNoLmxlbmd0aClcbiAgICAgICAgcmV0dXJuIGJyYW5jaDtcbiAgICBsZXQgbGVuZ3RoID0gYnJhbmNoLmxlbmd0aCwgc2VsZWN0aW9ucyA9IG5vbmU7XG4gICAgd2hpbGUgKGxlbmd0aCkge1xuICAgICAgICBsZXQgZXZlbnQgPSBtYXBFdmVudChicmFuY2hbbGVuZ3RoIC0gMV0sIG1hcHBpbmcsIHNlbGVjdGlvbnMpO1xuICAgICAgICBpZiAoZXZlbnQuY2hhbmdlcyAmJiAhZXZlbnQuY2hhbmdlcy5lbXB0eSB8fCBldmVudC5lZmZlY3RzLmxlbmd0aCkgeyAvLyBFdmVudCBzdXJ2aXZlZCBtYXBwaW5nXG4gICAgICAgICAgICBsZXQgcmVzdWx0ID0gYnJhbmNoLnNsaWNlKDAsIGxlbmd0aCk7XG4gICAgICAgICAgICByZXN1bHRbbGVuZ3RoIC0gMV0gPSBldmVudDtcbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7IC8vIERyb3AgdGhpcyBldmVudCwgc2luY2UgdGhlcmUncyBubyBjaGFuZ2VzIG9yIGVmZmVjdHMgbGVmdFxuICAgICAgICAgICAgbWFwcGluZyA9IGV2ZW50Lm1hcHBlZDtcbiAgICAgICAgICAgIGxlbmd0aC0tO1xuICAgICAgICAgICAgc2VsZWN0aW9ucyA9IGV2ZW50LnNlbGVjdGlvbnNBZnRlcjtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gc2VsZWN0aW9ucy5sZW5ndGggPyBbSGlzdEV2ZW50LnNlbGVjdGlvbihzZWxlY3Rpb25zKV0gOiBub25lO1xufVxuZnVuY3Rpb24gbWFwRXZlbnQoZXZlbnQsIG1hcHBpbmcsIGV4dHJhU2VsZWN0aW9ucykge1xuICAgIGxldCBzZWxlY3Rpb25zID0gY29uYyhldmVudC5zZWxlY3Rpb25zQWZ0ZXIubGVuZ3RoID8gZXZlbnQuc2VsZWN0aW9uc0FmdGVyLm1hcChzID0+IHMubWFwKG1hcHBpbmcpKSA6IG5vbmUsIGV4dHJhU2VsZWN0aW9ucyk7XG4gICAgLy8gQ2hhbmdlLWxlc3MgZXZlbnRzIGRvbid0IHN0b3JlIG1hcHBpbmdzICh0aGV5IGFyZSBhbHdheXMgdGhlIGxhc3QgZXZlbnQgaW4gYSBicmFuY2gpXG4gICAgaWYgKCFldmVudC5jaGFuZ2VzKVxuICAgICAgICByZXR1cm4gSGlzdEV2ZW50LnNlbGVjdGlvbihzZWxlY3Rpb25zKTtcbiAgICBsZXQgbWFwcGVkQ2hhbmdlcyA9IGV2ZW50LmNoYW5nZXMubWFwKG1hcHBpbmcpLCBiZWZvcmUgPSBtYXBwaW5nLm1hcERlc2MoZXZlbnQuY2hhbmdlcywgdHJ1ZSk7XG4gICAgbGV0IGZ1bGxNYXBwaW5nID0gZXZlbnQubWFwcGVkID8gZXZlbnQubWFwcGVkLmNvbXBvc2VEZXNjKGJlZm9yZSkgOiBiZWZvcmU7XG4gICAgcmV0dXJuIG5ldyBIaXN0RXZlbnQobWFwcGVkQ2hhbmdlcywgU3RhdGVFZmZlY3QubWFwRWZmZWN0cyhldmVudC5lZmZlY3RzLCBtYXBwaW5nKSwgZnVsbE1hcHBpbmcsIGV2ZW50LnN0YXJ0U2VsZWN0aW9uLm1hcChiZWZvcmUpLCBzZWxlY3Rpb25zKTtcbn1cbmNvbnN0IGpvaW5hYmxlVXNlckV2ZW50ID0gL14oaW5wdXRcXC50eXBlfGRlbGV0ZSkoJHxcXC4pLztcbmNsYXNzIEhpc3RvcnlTdGF0ZSB7XG4gICAgY29uc3RydWN0b3IoZG9uZSwgdW5kb25lLCBwcmV2VGltZSA9IDAsIHByZXZVc2VyRXZlbnQgPSB1bmRlZmluZWQpIHtcbiAgICAgICAgdGhpcy5kb25lID0gZG9uZTtcbiAgICAgICAgdGhpcy51bmRvbmUgPSB1bmRvbmU7XG4gICAgICAgIHRoaXMucHJldlRpbWUgPSBwcmV2VGltZTtcbiAgICAgICAgdGhpcy5wcmV2VXNlckV2ZW50ID0gcHJldlVzZXJFdmVudDtcbiAgICB9XG4gICAgaXNvbGF0ZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJldlRpbWUgPyBuZXcgSGlzdG9yeVN0YXRlKHRoaXMuZG9uZSwgdGhpcy51bmRvbmUpIDogdGhpcztcbiAgICB9XG4gICAgYWRkQ2hhbmdlcyhldmVudCwgdGltZSwgdXNlckV2ZW50LCBjb25maWcsIHRyKSB7XG4gICAgICAgIGxldCBkb25lID0gdGhpcy5kb25lLCBsYXN0RXZlbnQgPSBkb25lW2RvbmUubGVuZ3RoIC0gMV07XG4gICAgICAgIGlmIChsYXN0RXZlbnQgJiYgbGFzdEV2ZW50LmNoYW5nZXMgJiYgIWxhc3RFdmVudC5jaGFuZ2VzLmVtcHR5ICYmIGV2ZW50LmNoYW5nZXMgJiZcbiAgICAgICAgICAgICghdXNlckV2ZW50IHx8IGpvaW5hYmxlVXNlckV2ZW50LnRlc3QodXNlckV2ZW50KSkgJiZcbiAgICAgICAgICAgICgoIWxhc3RFdmVudC5zZWxlY3Rpb25zQWZ0ZXIubGVuZ3RoICYmXG4gICAgICAgICAgICAgICAgdGltZSAtIHRoaXMucHJldlRpbWUgPCBjb25maWcubmV3R3JvdXBEZWxheSAmJlxuICAgICAgICAgICAgICAgIGNvbmZpZy5qb2luVG9FdmVudCh0ciwgaXNBZGphY2VudChsYXN0RXZlbnQuY2hhbmdlcywgZXZlbnQuY2hhbmdlcykpKSB8fFxuICAgICAgICAgICAgICAgIC8vIEZvciBjb21wb3NlIChidXQgbm90IGNvbXBvc2Uuc3RhcnQpIGV2ZW50cywgYWx3YXlzIGpvaW4gd2l0aCBwcmV2aW91cyBldmVudFxuICAgICAgICAgICAgICAgIHVzZXJFdmVudCA9PSBcImlucHV0LnR5cGUuY29tcG9zZVwiKSkge1xuICAgICAgICAgICAgZG9uZSA9IHVwZGF0ZUJyYW5jaChkb25lLCBkb25lLmxlbmd0aCAtIDEsIGNvbmZpZy5taW5EZXB0aCwgbmV3IEhpc3RFdmVudChldmVudC5jaGFuZ2VzLmNvbXBvc2UobGFzdEV2ZW50LmNoYW5nZXMpLCBjb25jKFN0YXRlRWZmZWN0Lm1hcEVmZmVjdHMoZXZlbnQuZWZmZWN0cywgbGFzdEV2ZW50LmNoYW5nZXMpLCBsYXN0RXZlbnQuZWZmZWN0cyksIGxhc3RFdmVudC5tYXBwZWQsIGxhc3RFdmVudC5zdGFydFNlbGVjdGlvbiwgbm9uZSkpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgZG9uZSA9IHVwZGF0ZUJyYW5jaChkb25lLCBkb25lLmxlbmd0aCwgY29uZmlnLm1pbkRlcHRoLCBldmVudCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBIaXN0b3J5U3RhdGUoZG9uZSwgbm9uZSwgdGltZSwgdXNlckV2ZW50KTtcbiAgICB9XG4gICAgYWRkU2VsZWN0aW9uKHNlbGVjdGlvbiwgdGltZSwgdXNlckV2ZW50LCBuZXdHcm91cERlbGF5KSB7XG4gICAgICAgIGxldCBsYXN0ID0gdGhpcy5kb25lLmxlbmd0aCA/IHRoaXMuZG9uZVt0aGlzLmRvbmUubGVuZ3RoIC0gMV0uc2VsZWN0aW9uc0FmdGVyIDogbm9uZTtcbiAgICAgICAgaWYgKGxhc3QubGVuZ3RoID4gMCAmJlxuICAgICAgICAgICAgdGltZSAtIHRoaXMucHJldlRpbWUgPCBuZXdHcm91cERlbGF5ICYmXG4gICAgICAgICAgICB1c2VyRXZlbnQgPT0gdGhpcy5wcmV2VXNlckV2ZW50ICYmIHVzZXJFdmVudCAmJiAvXnNlbGVjdCgkfFxcLikvLnRlc3QodXNlckV2ZW50KSAmJlxuICAgICAgICAgICAgZXFTZWxlY3Rpb25TaGFwZShsYXN0W2xhc3QubGVuZ3RoIC0gMV0sIHNlbGVjdGlvbikpXG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgcmV0dXJuIG5ldyBIaXN0b3J5U3RhdGUoYWRkU2VsZWN0aW9uKHRoaXMuZG9uZSwgc2VsZWN0aW9uKSwgdGhpcy51bmRvbmUsIHRpbWUsIHVzZXJFdmVudCk7XG4gICAgfVxuICAgIGFkZE1hcHBpbmcobWFwcGluZykge1xuICAgICAgICByZXR1cm4gbmV3IEhpc3RvcnlTdGF0ZShhZGRNYXBwaW5nVG9CcmFuY2godGhpcy5kb25lLCBtYXBwaW5nKSwgYWRkTWFwcGluZ1RvQnJhbmNoKHRoaXMudW5kb25lLCBtYXBwaW5nKSwgdGhpcy5wcmV2VGltZSwgdGhpcy5wcmV2VXNlckV2ZW50KTtcbiAgICB9XG4gICAgcG9wKHNpZGUsIHN0YXRlLCBvbmx5U2VsZWN0aW9uKSB7XG4gICAgICAgIGxldCBicmFuY2ggPSBzaWRlID09IDAgLyogQnJhbmNoTmFtZS5Eb25lICovID8gdGhpcy5kb25lIDogdGhpcy51bmRvbmU7XG4gICAgICAgIGlmIChicmFuY2gubGVuZ3RoID09IDApXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgbGV0IGV2ZW50ID0gYnJhbmNoW2JyYW5jaC5sZW5ndGggLSAxXSwgc2VsZWN0aW9uID0gZXZlbnQuc2VsZWN0aW9uc0FmdGVyWzBdIHx8IHN0YXRlLnNlbGVjdGlvbjtcbiAgICAgICAgaWYgKG9ubHlTZWxlY3Rpb24gJiYgZXZlbnQuc2VsZWN0aW9uc0FmdGVyLmxlbmd0aCkge1xuICAgICAgICAgICAgcmV0dXJuIHN0YXRlLnVwZGF0ZSh7XG4gICAgICAgICAgICAgICAgc2VsZWN0aW9uOiBldmVudC5zZWxlY3Rpb25zQWZ0ZXJbZXZlbnQuc2VsZWN0aW9uc0FmdGVyLmxlbmd0aCAtIDFdLFxuICAgICAgICAgICAgICAgIGFubm90YXRpb25zOiBmcm9tSGlzdG9yeS5vZih7IHNpZGUsIHJlc3Q6IHBvcFNlbGVjdGlvbihicmFuY2gpLCBzZWxlY3Rpb24gfSksXG4gICAgICAgICAgICAgICAgdXNlckV2ZW50OiBzaWRlID09IDAgLyogQnJhbmNoTmFtZS5Eb25lICovID8gXCJzZWxlY3QudW5kb1wiIDogXCJzZWxlY3QucmVkb1wiLFxuICAgICAgICAgICAgICAgIHNjcm9sbEludG9WaWV3OiB0cnVlXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICghZXZlbnQuY2hhbmdlcykge1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBsZXQgcmVzdCA9IGJyYW5jaC5sZW5ndGggPT0gMSA/IG5vbmUgOiBicmFuY2guc2xpY2UoMCwgYnJhbmNoLmxlbmd0aCAtIDEpO1xuICAgICAgICAgICAgaWYgKGV2ZW50Lm1hcHBlZClcbiAgICAgICAgICAgICAgICByZXN0ID0gYWRkTWFwcGluZ1RvQnJhbmNoKHJlc3QsIGV2ZW50Lm1hcHBlZCk7XG4gICAgICAgICAgICByZXR1cm4gc3RhdGUudXBkYXRlKHtcbiAgICAgICAgICAgICAgICBjaGFuZ2VzOiBldmVudC5jaGFuZ2VzLFxuICAgICAgICAgICAgICAgIHNlbGVjdGlvbjogZXZlbnQuc3RhcnRTZWxlY3Rpb24sXG4gICAgICAgICAgICAgICAgZWZmZWN0czogZXZlbnQuZWZmZWN0cyxcbiAgICAgICAgICAgICAgICBhbm5vdGF0aW9uczogZnJvbUhpc3Rvcnkub2YoeyBzaWRlLCByZXN0LCBzZWxlY3Rpb24gfSksXG4gICAgICAgICAgICAgICAgZmlsdGVyOiBmYWxzZSxcbiAgICAgICAgICAgICAgICB1c2VyRXZlbnQ6IHNpZGUgPT0gMCAvKiBCcmFuY2hOYW1lLkRvbmUgKi8gPyBcInVuZG9cIiA6IFwicmVkb1wiLFxuICAgICAgICAgICAgICAgIHNjcm9sbEludG9WaWV3OiB0cnVlXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cbn1cbkhpc3RvcnlTdGF0ZS5lbXB0eSA9IC8qQF9fUFVSRV9fKi9uZXcgSGlzdG9yeVN0YXRlKG5vbmUsIG5vbmUpO1xuLyoqXG5EZWZhdWx0IGtleSBiaW5kaW5ncyBmb3IgdGhlIHVuZG8gaGlzdG9yeS5cblxuLSBNb2QtejogW2B1bmRvYF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNjb21tYW5kcy51bmRvKS5cbi0gTW9kLXkgKE1vZC1TaGlmdC16IG9uIG1hY09TKSArIEN0cmwtU2hpZnQteiBvbiBMaW51eDogW2ByZWRvYF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNjb21tYW5kcy5yZWRvKS5cbi0gTW9kLXU6IFtgdW5kb1NlbGVjdGlvbmBdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jY29tbWFuZHMudW5kb1NlbGVjdGlvbikuXG4tIEFsdC11IChNb2QtU2hpZnQtdSBvbiBtYWNPUyk6IFtgcmVkb1NlbGVjdGlvbmBdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jY29tbWFuZHMucmVkb1NlbGVjdGlvbikuXG4qL1xuY29uc3QgaGlzdG9yeUtleW1hcCA9IFtcbiAgICB7IGtleTogXCJNb2QtelwiLCBydW46IHVuZG8sIHByZXZlbnREZWZhdWx0OiB0cnVlIH0sXG4gICAgeyBrZXk6IFwiTW9kLXlcIiwgbWFjOiBcIk1vZC1TaGlmdC16XCIsIHJ1bjogcmVkbywgcHJldmVudERlZmF1bHQ6IHRydWUgfSxcbiAgICB7IGxpbnV4OiBcIkN0cmwtU2hpZnQtelwiLCBydW46IHJlZG8sIHByZXZlbnREZWZhdWx0OiB0cnVlIH0sXG4gICAgeyBrZXk6IFwiTW9kLXVcIiwgcnVuOiB1bmRvU2VsZWN0aW9uLCBwcmV2ZW50RGVmYXVsdDogdHJ1ZSB9LFxuICAgIHsga2V5OiBcIkFsdC11XCIsIG1hYzogXCJNb2QtU2hpZnQtdVwiLCBydW46IHJlZG9TZWxlY3Rpb24sIHByZXZlbnREZWZhdWx0OiB0cnVlIH1cbl07XG5cbmZ1bmN0aW9uIHVwZGF0ZVNlbChzZWwsIGJ5KSB7XG4gICAgcmV0dXJuIEVkaXRvclNlbGVjdGlvbi5jcmVhdGUoc2VsLnJhbmdlcy5tYXAoYnkpLCBzZWwubWFpbkluZGV4KTtcbn1cbmZ1bmN0aW9uIHNldFNlbChzdGF0ZSwgc2VsZWN0aW9uKSB7XG4gICAgcmV0dXJuIHN0YXRlLnVwZGF0ZSh7IHNlbGVjdGlvbiwgc2Nyb2xsSW50b1ZpZXc6IHRydWUsIHVzZXJFdmVudDogXCJzZWxlY3RcIiB9KTtcbn1cbmZ1bmN0aW9uIG1vdmVTZWwoeyBzdGF0ZSwgZGlzcGF0Y2ggfSwgaG93KSB7XG4gICAgbGV0IHNlbGVjdGlvbiA9IHVwZGF0ZVNlbChzdGF0ZS5zZWxlY3Rpb24sIGhvdyk7XG4gICAgaWYgKHNlbGVjdGlvbi5lcShzdGF0ZS5zZWxlY3Rpb24sIHRydWUpKVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgZGlzcGF0Y2goc2V0U2VsKHN0YXRlLCBzZWxlY3Rpb24pKTtcbiAgICByZXR1cm4gdHJ1ZTtcbn1cbmZ1bmN0aW9uIHJhbmdlRW5kKHJhbmdlLCBmb3J3YXJkKSB7XG4gICAgcmV0dXJuIEVkaXRvclNlbGVjdGlvbi5jdXJzb3IoZm9yd2FyZCA/IHJhbmdlLnRvIDogcmFuZ2UuZnJvbSk7XG59XG5mdW5jdGlvbiBjdXJzb3JCeUNoYXIodmlldywgZm9yd2FyZCkge1xuICAgIHJldHVybiBtb3ZlU2VsKHZpZXcsIHJhbmdlID0+IHJhbmdlLmVtcHR5ID8gdmlldy5tb3ZlQnlDaGFyKHJhbmdlLCBmb3J3YXJkKSA6IHJhbmdlRW5kKHJhbmdlLCBmb3J3YXJkKSk7XG59XG5mdW5jdGlvbiBsdHJBdEN1cnNvcih2aWV3KSB7XG4gICAgcmV0dXJuIHZpZXcudGV4dERpcmVjdGlvbkF0KHZpZXcuc3RhdGUuc2VsZWN0aW9uLm1haW4uaGVhZCkgPT0gRGlyZWN0aW9uLkxUUjtcbn1cbi8qKlxuTW92ZSB0aGUgc2VsZWN0aW9uIG9uZSBjaGFyYWN0ZXIgdG8gdGhlIGxlZnQgKHdoaWNoIGlzIGJhY2t3YXJkIGluXG5sZWZ0LXRvLXJpZ2h0IHRleHQsIGZvcndhcmQgaW4gcmlnaHQtdG8tbGVmdCB0ZXh0KS5cbiovXG5jb25zdCBjdXJzb3JDaGFyTGVmdCA9IHZpZXcgPT4gY3Vyc29yQnlDaGFyKHZpZXcsICFsdHJBdEN1cnNvcih2aWV3KSk7XG4vKipcbk1vdmUgdGhlIHNlbGVjdGlvbiBvbmUgY2hhcmFjdGVyIHRvIHRoZSByaWdodC5cbiovXG5jb25zdCBjdXJzb3JDaGFyUmlnaHQgPSB2aWV3ID0+IGN1cnNvckJ5Q2hhcih2aWV3LCBsdHJBdEN1cnNvcih2aWV3KSk7XG4vKipcbk1vdmUgdGhlIHNlbGVjdGlvbiBvbmUgY2hhcmFjdGVyIGZvcndhcmQuXG4qL1xuY29uc3QgY3Vyc29yQ2hhckZvcndhcmQgPSB2aWV3ID0+IGN1cnNvckJ5Q2hhcih2aWV3LCB0cnVlKTtcbi8qKlxuTW92ZSB0aGUgc2VsZWN0aW9uIG9uZSBjaGFyYWN0ZXIgYmFja3dhcmQuXG4qL1xuY29uc3QgY3Vyc29yQ2hhckJhY2t3YXJkID0gdmlldyA9PiBjdXJzb3JCeUNoYXIodmlldywgZmFsc2UpO1xuZnVuY3Rpb24gYnlDaGFyTG9naWNhbChzdGF0ZSwgcmFuZ2UsIGZvcndhcmQpIHtcbiAgICBsZXQgcG9zID0gcmFuZ2UuaGVhZCwgbGluZSA9IHN0YXRlLmRvYy5saW5lQXQocG9zKTtcbiAgICBpZiAocG9zID09IChmb3J3YXJkID8gbGluZS50byA6IGxpbmUuZnJvbSkpXG4gICAgICAgIHBvcyA9IGZvcndhcmQgPyBNYXRoLm1pbihzdGF0ZS5kb2MubGVuZ3RoLCBsaW5lLnRvICsgMSkgOiBNYXRoLm1heCgwLCBsaW5lLmZyb20gLSAxKTtcbiAgICBlbHNlXG4gICAgICAgIHBvcyA9IGxpbmUuZnJvbSArIGZpbmRDbHVzdGVyQnJlYWsobGluZS50ZXh0LCBwb3MgLSBsaW5lLmZyb20sIGZvcndhcmQpO1xuICAgIHJldHVybiBFZGl0b3JTZWxlY3Rpb24uY3Vyc29yKHBvcywgZm9yd2FyZCA/IC0xIDogMSk7XG59XG5mdW5jdGlvbiBtb3ZlQnlDaGFyTG9naWNhbCh0YXJnZXQsIGZvcndhcmQpIHtcbiAgICByZXR1cm4gbW92ZVNlbCh0YXJnZXQsIHJhbmdlID0+IHJhbmdlLmVtcHR5ID8gYnlDaGFyTG9naWNhbCh0YXJnZXQuc3RhdGUsIHJhbmdlLCBmb3J3YXJkKSA6IHJhbmdlRW5kKHJhbmdlLCBmb3J3YXJkKSk7XG59XG4vKipcbk1vdmUgdGhlIHNlbGVjdGlvbiBvbmUgY2hhcmFjdGVyIGZvcndhcmQsIGluIGxvZ2ljYWxcbihub24tdGV4dC1kaXJlY3Rpb24tYXdhcmUpIHN0cmluZyBpbmRleCBvcmRlci5cbiovXG5jb25zdCBjdXJzb3JDaGFyRm9yd2FyZExvZ2ljYWwgPSB0YXJnZXQgPT4gbW92ZUJ5Q2hhckxvZ2ljYWwodGFyZ2V0LCB0cnVlKTtcbi8qKlxuTW92ZSB0aGUgc2VsZWN0aW9uIG9uZSBjaGFyYWN0ZXIgYmFja3dhcmQsIGluIGxvZ2ljYWwgc3RyaW5nIGluZGV4XG5vcmRlci5cbiovXG5jb25zdCBjdXJzb3JDaGFyQmFja3dhcmRMb2dpY2FsID0gdGFyZ2V0ID0+IG1vdmVCeUNoYXJMb2dpY2FsKHRhcmdldCwgZmFsc2UpO1xuZnVuY3Rpb24gY3Vyc29yQnlHcm91cCh2aWV3LCBmb3J3YXJkKSB7XG4gICAgcmV0dXJuIG1vdmVTZWwodmlldywgcmFuZ2UgPT4gcmFuZ2UuZW1wdHkgPyB2aWV3Lm1vdmVCeUdyb3VwKHJhbmdlLCBmb3J3YXJkKSA6IHJhbmdlRW5kKHJhbmdlLCBmb3J3YXJkKSk7XG59XG4vKipcbk1vdmUgdGhlIHNlbGVjdGlvbiB0byB0aGUgbGVmdCBhY3Jvc3Mgb25lIGdyb3VwIG9mIHdvcmQgb3Jcbm5vbi13b3JkIChidXQgYWxzbyBub24tc3BhY2UpIGNoYXJhY3RlcnMuXG4qL1xuY29uc3QgY3Vyc29yR3JvdXBMZWZ0ID0gdmlldyA9PiBjdXJzb3JCeUdyb3VwKHZpZXcsICFsdHJBdEN1cnNvcih2aWV3KSk7XG4vKipcbk1vdmUgdGhlIHNlbGVjdGlvbiBvbmUgZ3JvdXAgdG8gdGhlIHJpZ2h0LlxuKi9cbmNvbnN0IGN1cnNvckdyb3VwUmlnaHQgPSB2aWV3ID0+IGN1cnNvckJ5R3JvdXAodmlldywgbHRyQXRDdXJzb3IodmlldykpO1xuLyoqXG5Nb3ZlIHRoZSBzZWxlY3Rpb24gb25lIGdyb3VwIGZvcndhcmQuXG4qL1xuY29uc3QgY3Vyc29yR3JvdXBGb3J3YXJkID0gdmlldyA9PiBjdXJzb3JCeUdyb3VwKHZpZXcsIHRydWUpO1xuLyoqXG5Nb3ZlIHRoZSBzZWxlY3Rpb24gb25lIGdyb3VwIGJhY2t3YXJkLlxuKi9cbmNvbnN0IGN1cnNvckdyb3VwQmFja3dhcmQgPSB2aWV3ID0+IGN1cnNvckJ5R3JvdXAodmlldywgZmFsc2UpO1xuZnVuY3Rpb24gdG9Hcm91cFN0YXJ0KHZpZXcsIHBvcywgc3RhcnQpIHtcbiAgICBsZXQgY2F0ZWdvcml6ZSA9IHZpZXcuc3RhdGUuY2hhckNhdGVnb3JpemVyKHBvcyk7XG4gICAgbGV0IGNhdCA9IGNhdGVnb3JpemUoc3RhcnQpLCBpbml0aWFsID0gY2F0ICE9IENoYXJDYXRlZ29yeS5TcGFjZTtcbiAgICByZXR1cm4gKG5leHQpID0+IHtcbiAgICAgICAgbGV0IG5leHRDYXQgPSBjYXRlZ29yaXplKG5leHQpO1xuICAgICAgICBpZiAobmV4dENhdCAhPSBDaGFyQ2F0ZWdvcnkuU3BhY2UpXG4gICAgICAgICAgICByZXR1cm4gaW5pdGlhbCAmJiBuZXh0Q2F0ID09IGNhdDtcbiAgICAgICAgaW5pdGlhbCA9IGZhbHNlO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9O1xufVxuLyoqXG5Nb3ZlIHRoZSBjdXJzb3Igb25lIGdyb3VwIGZvcndhcmQgaW4gdGhlIGRlZmF1bHQgV2luZG93cyBzdHlsZSxcbndoZXJlIGl0IG1vdmVzIHRvIHRoZSBzdGFydCBvZiB0aGUgbmV4dCBncm91cC5cbiovXG5jb25zdCBjdXJzb3JHcm91cEZvcndhcmRXaW4gPSB2aWV3ID0+IHtcbiAgICByZXR1cm4gbW92ZVNlbCh2aWV3LCByYW5nZSA9PiByYW5nZS5lbXB0eVxuICAgICAgICA/IHZpZXcubW92ZUJ5Q2hhcihyYW5nZSwgdHJ1ZSwgc3RhcnQgPT4gdG9Hcm91cFN0YXJ0KHZpZXcsIHJhbmdlLmhlYWQsIHN0YXJ0KSlcbiAgICAgICAgOiByYW5nZUVuZChyYW5nZSwgdHJ1ZSkpO1xufTtcbmNvbnN0IHNlZ21lbnRlciA9IHR5cGVvZiBJbnRsICE9IFwidW5kZWZpbmVkXCIgJiYgSW50bC5TZWdtZW50ZXIgP1xuICAgIC8qQF9fUFVSRV9fKi9uZXcgKEludGwuU2VnbWVudGVyKSh1bmRlZmluZWQsIHsgZ3JhbnVsYXJpdHk6IFwid29yZFwiIH0pIDogbnVsbDtcbmZ1bmN0aW9uIG1vdmVCeVN1YndvcmQodmlldywgcmFuZ2UsIGZvcndhcmQpIHtcbiAgICBsZXQgY2F0ZWdvcml6ZSA9IHZpZXcuc3RhdGUuY2hhckNhdGVnb3JpemVyKHJhbmdlLmZyb20pO1xuICAgIGxldCBjYXQgPSBDaGFyQ2F0ZWdvcnkuU3BhY2UsIHBvcyA9IHJhbmdlLmZyb20sIHN0ZXBzID0gMDtcbiAgICBsZXQgZG9uZSA9IGZhbHNlLCBzYXdVcHBlciA9IGZhbHNlLCBzYXdMb3dlciA9IGZhbHNlO1xuICAgIGxldCBzdGVwID0gKG5leHQpID0+IHtcbiAgICAgICAgaWYgKGRvbmUpXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIHBvcyArPSBmb3J3YXJkID8gbmV4dC5sZW5ndGggOiAtbmV4dC5sZW5ndGg7XG4gICAgICAgIGxldCBuZXh0Q2F0ID0gY2F0ZWdvcml6ZShuZXh0KSwgYWhlYWQ7XG4gICAgICAgIGlmIChuZXh0Q2F0ID09IENoYXJDYXRlZ29yeS5Xb3JkICYmIG5leHQuY2hhckNvZGVBdCgwKSA8IDEyOCAmJiAvW1xcV19dLy50ZXN0KG5leHQpKVxuICAgICAgICAgICAgbmV4dENhdCA9IC0xOyAvLyBUcmVhdCB3b3JkIHB1bmN0dWF0aW9uIHNwZWNpYWxseVxuICAgICAgICBpZiAoY2F0ID09IENoYXJDYXRlZ29yeS5TcGFjZSlcbiAgICAgICAgICAgIGNhdCA9IG5leHRDYXQ7XG4gICAgICAgIGlmIChjYXQgIT0gbmV4dENhdClcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgaWYgKGNhdCA9PSBDaGFyQ2F0ZWdvcnkuV29yZCkge1xuICAgICAgICAgICAgaWYgKG5leHQudG9Mb3dlckNhc2UoKSA9PSBuZXh0KSB7XG4gICAgICAgICAgICAgICAgaWYgKCFmb3J3YXJkICYmIHNhd1VwcGVyKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgc2F3TG93ZXIgPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoc2F3TG93ZXIpIHtcbiAgICAgICAgICAgICAgICBpZiAoZm9yd2FyZClcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgIGRvbmUgPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYgKHNhd1VwcGVyICYmIGZvcndhcmQgJiYgY2F0ZWdvcml6ZShhaGVhZCA9IHZpZXcuc3RhdGUuc2xpY2VEb2MocG9zLCBwb3MgKyAxKSkgPT0gQ2hhckNhdGVnb3J5LldvcmQgJiZcbiAgICAgICAgICAgICAgICAgICAgYWhlYWQudG9Mb3dlckNhc2UoKSA9PSBhaGVhZClcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgIHNhd1VwcGVyID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBzdGVwcysrO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9O1xuICAgIGxldCBlbmQgPSB2aWV3Lm1vdmVCeUNoYXIocmFuZ2UsIGZvcndhcmQsIHN0YXJ0ID0+IHtcbiAgICAgICAgc3RlcChzdGFydCk7XG4gICAgICAgIHJldHVybiBzdGVwO1xuICAgIH0pO1xuICAgIGlmIChzZWdtZW50ZXIgJiYgY2F0ID09IENoYXJDYXRlZ29yeS5Xb3JkICYmIGVuZC5mcm9tID09IHJhbmdlLmZyb20gKyBzdGVwcyAqIChmb3J3YXJkID8gMSA6IC0xKSkge1xuICAgICAgICBsZXQgZnJvbSA9IE1hdGgubWluKHJhbmdlLmhlYWQsIGVuZC5oZWFkKSwgdG8gPSBNYXRoLm1heChyYW5nZS5oZWFkLCBlbmQuaGVhZCk7XG4gICAgICAgIGxldCBza2lwcGVkID0gdmlldy5zdGF0ZS5zbGljZURvYyhmcm9tLCB0byk7XG4gICAgICAgIGlmIChza2lwcGVkLmxlbmd0aCA+IDEgJiYgL1tcXHU0RTAwLVxcdWZmZmZdLy50ZXN0KHNraXBwZWQpKSB7XG4gICAgICAgICAgICBsZXQgc2VnbWVudHMgPSBBcnJheS5mcm9tKHNlZ21lbnRlci5zZWdtZW50KHNraXBwZWQpKTtcbiAgICAgICAgICAgIGlmIChzZWdtZW50cy5sZW5ndGggPiAxKSB7XG4gICAgICAgICAgICAgICAgaWYgKGZvcndhcmQpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBFZGl0b3JTZWxlY3Rpb24uY3Vyc29yKHJhbmdlLmhlYWQgKyBzZWdtZW50c1sxXS5pbmRleCwgLTEpO1xuICAgICAgICAgICAgICAgIHJldHVybiBFZGl0b3JTZWxlY3Rpb24uY3Vyc29yKGVuZC5oZWFkICsgc2VnbWVudHNbc2VnbWVudHMubGVuZ3RoIC0gMV0uaW5kZXgsIDEpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBlbmQ7XG59XG5mdW5jdGlvbiBjdXJzb3JCeVN1YndvcmQodmlldywgZm9yd2FyZCkge1xuICAgIHJldHVybiBtb3ZlU2VsKHZpZXcsIHJhbmdlID0+IHJhbmdlLmVtcHR5ID8gbW92ZUJ5U3Vid29yZCh2aWV3LCByYW5nZSwgZm9yd2FyZCkgOiByYW5nZUVuZChyYW5nZSwgZm9yd2FyZCkpO1xufVxuLyoqXG5Nb3ZlIHRoZSBzZWxlY3Rpb24gb25lIGdyb3VwIG9yIGNhbWVsLWNhc2Ugc3Vid29yZCBmb3J3YXJkLlxuKi9cbmNvbnN0IGN1cnNvclN1YndvcmRGb3J3YXJkID0gdmlldyA9PiBjdXJzb3JCeVN1YndvcmQodmlldywgdHJ1ZSk7XG4vKipcbk1vdmUgdGhlIHNlbGVjdGlvbiBvbmUgZ3JvdXAgb3IgY2FtZWwtY2FzZSBzdWJ3b3JkIGJhY2t3YXJkLlxuKi9cbmNvbnN0IGN1cnNvclN1YndvcmRCYWNrd2FyZCA9IHZpZXcgPT4gY3Vyc29yQnlTdWJ3b3JkKHZpZXcsIGZhbHNlKTtcbmZ1bmN0aW9uIGludGVyZXN0aW5nTm9kZShzdGF0ZSwgbm9kZSwgYnJhY2tldFByb3ApIHtcbiAgICBpZiAobm9kZS50eXBlLnByb3AoYnJhY2tldFByb3ApKVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICBsZXQgbGVuID0gbm9kZS50byAtIG5vZGUuZnJvbTtcbiAgICByZXR1cm4gbGVuICYmIChsZW4gPiAyIHx8IC9bXlxccywuOzpdLy50ZXN0KHN0YXRlLnNsaWNlRG9jKG5vZGUuZnJvbSwgbm9kZS50bykpKSB8fCBub2RlLmZpcnN0Q2hpbGQ7XG59XG5mdW5jdGlvbiBtb3ZlQnlTeW50YXgoc3RhdGUsIHN0YXJ0LCBmb3J3YXJkKSB7XG4gICAgbGV0IHBvcyA9IHN5bnRheFRyZWUoc3RhdGUpLnJlc29sdmVJbm5lcihzdGFydC5oZWFkKTtcbiAgICBsZXQgYnJhY2tldFByb3AgPSBmb3J3YXJkID8gTm9kZVByb3AuY2xvc2VkQnkgOiBOb2RlUHJvcC5vcGVuZWRCeTtcbiAgICAvLyBTY2FuIGZvcndhcmQgdGhyb3VnaCBjaGlsZCBub2RlcyB0byBzZWUgaWYgdGhlcmUncyBhbiBpbnRlcmVzdGluZ1xuICAgIC8vIG5vZGUgYWhlYWQuXG4gICAgZm9yIChsZXQgYXQgPSBzdGFydC5oZWFkOzspIHtcbiAgICAgICAgbGV0IG5leHQgPSBmb3J3YXJkID8gcG9zLmNoaWxkQWZ0ZXIoYXQpIDogcG9zLmNoaWxkQmVmb3JlKGF0KTtcbiAgICAgICAgaWYgKCFuZXh0KVxuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGlmIChpbnRlcmVzdGluZ05vZGUoc3RhdGUsIG5leHQsIGJyYWNrZXRQcm9wKSlcbiAgICAgICAgICAgIHBvcyA9IG5leHQ7XG4gICAgICAgIGVsc2VcbiAgICAgICAgICAgIGF0ID0gZm9yd2FyZCA/IG5leHQudG8gOiBuZXh0LmZyb207XG4gICAgfVxuICAgIGxldCBicmFja2V0ID0gcG9zLnR5cGUucHJvcChicmFja2V0UHJvcCksIG1hdGNoLCBuZXdQb3M7XG4gICAgaWYgKGJyYWNrZXQgJiYgKG1hdGNoID0gZm9yd2FyZCA/IG1hdGNoQnJhY2tldHMoc3RhdGUsIHBvcy5mcm9tLCAxKSA6IG1hdGNoQnJhY2tldHMoc3RhdGUsIHBvcy50bywgLTEpKSAmJiBtYXRjaC5tYXRjaGVkKVxuICAgICAgICBuZXdQb3MgPSBmb3J3YXJkID8gbWF0Y2guZW5kLnRvIDogbWF0Y2guZW5kLmZyb207XG4gICAgZWxzZVxuICAgICAgICBuZXdQb3MgPSBmb3J3YXJkID8gcG9zLnRvIDogcG9zLmZyb207XG4gICAgcmV0dXJuIEVkaXRvclNlbGVjdGlvbi5jdXJzb3IobmV3UG9zLCBmb3J3YXJkID8gLTEgOiAxKTtcbn1cbi8qKlxuTW92ZSB0aGUgY3Vyc29yIG92ZXIgdGhlIG5leHQgc3ludGFjdGljIGVsZW1lbnQgdG8gdGhlIGxlZnQuXG4qL1xuY29uc3QgY3Vyc29yU3ludGF4TGVmdCA9IHZpZXcgPT4gbW92ZVNlbCh2aWV3LCByYW5nZSA9PiBtb3ZlQnlTeW50YXgodmlldy5zdGF0ZSwgcmFuZ2UsICFsdHJBdEN1cnNvcih2aWV3KSkpO1xuLyoqXG5Nb3ZlIHRoZSBjdXJzb3Igb3ZlciB0aGUgbmV4dCBzeW50YWN0aWMgZWxlbWVudCB0byB0aGUgcmlnaHQuXG4qL1xuY29uc3QgY3Vyc29yU3ludGF4UmlnaHQgPSB2aWV3ID0+IG1vdmVTZWwodmlldywgcmFuZ2UgPT4gbW92ZUJ5U3ludGF4KHZpZXcuc3RhdGUsIHJhbmdlLCBsdHJBdEN1cnNvcih2aWV3KSkpO1xuZnVuY3Rpb24gY3Vyc29yQnlMaW5lKHZpZXcsIGZvcndhcmQpIHtcbiAgICByZXR1cm4gbW92ZVNlbCh2aWV3LCByYW5nZSA9PiB7XG4gICAgICAgIGlmICghcmFuZ2UuZW1wdHkpXG4gICAgICAgICAgICByZXR1cm4gcmFuZ2VFbmQocmFuZ2UsIGZvcndhcmQpO1xuICAgICAgICBsZXQgbW92ZWQgPSB2aWV3Lm1vdmVWZXJ0aWNhbGx5KHJhbmdlLCBmb3J3YXJkKTtcbiAgICAgICAgcmV0dXJuIG1vdmVkLmhlYWQgIT0gcmFuZ2UuaGVhZCA/IG1vdmVkIDogdmlldy5tb3ZlVG9MaW5lQm91bmRhcnkocmFuZ2UsIGZvcndhcmQpO1xuICAgIH0pO1xufVxuLyoqXG5Nb3ZlIHRoZSBzZWxlY3Rpb24gb25lIGxpbmUgdXAuXG4qL1xuY29uc3QgY3Vyc29yTGluZVVwID0gdmlldyA9PiBjdXJzb3JCeUxpbmUodmlldywgZmFsc2UpO1xuLyoqXG5Nb3ZlIHRoZSBzZWxlY3Rpb24gb25lIGxpbmUgZG93bi5cbiovXG5jb25zdCBjdXJzb3JMaW5lRG93biA9IHZpZXcgPT4gY3Vyc29yQnlMaW5lKHZpZXcsIHRydWUpO1xuZnVuY3Rpb24gcGFnZUluZm8odmlldykge1xuICAgIGxldCBzZWxmU2Nyb2xsID0gdmlldy5zY3JvbGxET00uY2xpZW50SGVpZ2h0IDwgdmlldy5zY3JvbGxET00uc2Nyb2xsSGVpZ2h0IC0gMjtcbiAgICBsZXQgbWFyZ2luVG9wID0gMCwgbWFyZ2luQm90dG9tID0gMCwgaGVpZ2h0O1xuICAgIGlmIChzZWxmU2Nyb2xsKSB7XG4gICAgICAgIGZvciAobGV0IHNvdXJjZSBvZiB2aWV3LnN0YXRlLmZhY2V0KEVkaXRvclZpZXcuc2Nyb2xsTWFyZ2lucykpIHtcbiAgICAgICAgICAgIGxldCBtYXJnaW5zID0gc291cmNlKHZpZXcpO1xuICAgICAgICAgICAgaWYgKG1hcmdpbnMgPT09IG51bGwgfHwgbWFyZ2lucyA9PT0gdm9pZCAwID8gdm9pZCAwIDogbWFyZ2lucy50b3ApXG4gICAgICAgICAgICAgICAgbWFyZ2luVG9wID0gTWF0aC5tYXgobWFyZ2lucyA9PT0gbnVsbCB8fCBtYXJnaW5zID09PSB2b2lkIDAgPyB2b2lkIDAgOiBtYXJnaW5zLnRvcCwgbWFyZ2luVG9wKTtcbiAgICAgICAgICAgIGlmIChtYXJnaW5zID09PSBudWxsIHx8IG1hcmdpbnMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG1hcmdpbnMuYm90dG9tKVxuICAgICAgICAgICAgICAgIG1hcmdpbkJvdHRvbSA9IE1hdGgubWF4KG1hcmdpbnMgPT09IG51bGwgfHwgbWFyZ2lucyA9PT0gdm9pZCAwID8gdm9pZCAwIDogbWFyZ2lucy5ib3R0b20sIG1hcmdpbkJvdHRvbSk7XG4gICAgICAgIH1cbiAgICAgICAgaGVpZ2h0ID0gdmlldy5zY3JvbGxET00uY2xpZW50SGVpZ2h0IC0gbWFyZ2luVG9wIC0gbWFyZ2luQm90dG9tO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgaGVpZ2h0ID0gKHZpZXcuZG9tLm93bmVyRG9jdW1lbnQuZGVmYXVsdFZpZXcgfHwgd2luZG93KS5pbm5lckhlaWdodDtcbiAgICB9XG4gICAgcmV0dXJuIHsgbWFyZ2luVG9wLCBtYXJnaW5Cb3R0b20sIHNlbGZTY3JvbGwsXG4gICAgICAgIGhlaWdodDogTWF0aC5tYXgodmlldy5kZWZhdWx0TGluZUhlaWdodCwgaGVpZ2h0IC0gNSkgfTtcbn1cbmZ1bmN0aW9uIGN1cnNvckJ5UGFnZSh2aWV3LCBmb3J3YXJkKSB7XG4gICAgbGV0IHBhZ2UgPSBwYWdlSW5mbyh2aWV3KTtcbiAgICBsZXQgeyBzdGF0ZSB9ID0gdmlldywgc2VsZWN0aW9uID0gdXBkYXRlU2VsKHN0YXRlLnNlbGVjdGlvbiwgcmFuZ2UgPT4ge1xuICAgICAgICByZXR1cm4gcmFuZ2UuZW1wdHkgPyB2aWV3Lm1vdmVWZXJ0aWNhbGx5KHJhbmdlLCBmb3J3YXJkLCBwYWdlLmhlaWdodClcbiAgICAgICAgICAgIDogcmFuZ2VFbmQocmFuZ2UsIGZvcndhcmQpO1xuICAgIH0pO1xuICAgIGlmIChzZWxlY3Rpb24uZXEoc3RhdGUuc2VsZWN0aW9uKSlcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIGxldCBlZmZlY3Q7XG4gICAgaWYgKHBhZ2Uuc2VsZlNjcm9sbCkge1xuICAgICAgICBsZXQgc3RhcnRQb3MgPSB2aWV3LmNvb3Jkc0F0UG9zKHN0YXRlLnNlbGVjdGlvbi5tYWluLmhlYWQpO1xuICAgICAgICBsZXQgc2Nyb2xsUmVjdCA9IHZpZXcuc2Nyb2xsRE9NLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgICBsZXQgc2Nyb2xsVG9wID0gc2Nyb2xsUmVjdC50b3AgKyBwYWdlLm1hcmdpblRvcCwgc2Nyb2xsQm90dG9tID0gc2Nyb2xsUmVjdC5ib3R0b20gLSBwYWdlLm1hcmdpbkJvdHRvbTtcbiAgICAgICAgaWYgKHN0YXJ0UG9zICYmIHN0YXJ0UG9zLnRvcCA+IHNjcm9sbFRvcCAmJiBzdGFydFBvcy5ib3R0b20gPCBzY3JvbGxCb3R0b20pXG4gICAgICAgICAgICBlZmZlY3QgPSBFZGl0b3JWaWV3LnNjcm9sbEludG9WaWV3KHNlbGVjdGlvbi5tYWluLmhlYWQsIHsgeTogXCJzdGFydFwiLCB5TWFyZ2luOiBzdGFydFBvcy50b3AgLSBzY3JvbGxUb3AgfSk7XG4gICAgfVxuICAgIHZpZXcuZGlzcGF0Y2goc2V0U2VsKHN0YXRlLCBzZWxlY3Rpb24pLCB7IGVmZmVjdHM6IGVmZmVjdCB9KTtcbiAgICByZXR1cm4gdHJ1ZTtcbn1cbi8qKlxuTW92ZSB0aGUgc2VsZWN0aW9uIG9uZSBwYWdlIHVwLlxuKi9cbmNvbnN0IGN1cnNvclBhZ2VVcCA9IHZpZXcgPT4gY3Vyc29yQnlQYWdlKHZpZXcsIGZhbHNlKTtcbi8qKlxuTW92ZSB0aGUgc2VsZWN0aW9uIG9uZSBwYWdlIGRvd24uXG4qL1xuY29uc3QgY3Vyc29yUGFnZURvd24gPSB2aWV3ID0+IGN1cnNvckJ5UGFnZSh2aWV3LCB0cnVlKTtcbmZ1bmN0aW9uIG1vdmVCeUxpbmVCb3VuZGFyeSh2aWV3LCBzdGFydCwgZm9yd2FyZCkge1xuICAgIGxldCBsaW5lID0gdmlldy5saW5lQmxvY2tBdChzdGFydC5oZWFkKSwgbW92ZWQgPSB2aWV3Lm1vdmVUb0xpbmVCb3VuZGFyeShzdGFydCwgZm9yd2FyZCk7XG4gICAgaWYgKG1vdmVkLmhlYWQgPT0gc3RhcnQuaGVhZCAmJiBtb3ZlZC5oZWFkICE9IChmb3J3YXJkID8gbGluZS50byA6IGxpbmUuZnJvbSkpXG4gICAgICAgIG1vdmVkID0gdmlldy5tb3ZlVG9MaW5lQm91bmRhcnkoc3RhcnQsIGZvcndhcmQsIGZhbHNlKTtcbiAgICBpZiAoIWZvcndhcmQgJiYgbW92ZWQuaGVhZCA9PSBsaW5lLmZyb20gJiYgbGluZS5sZW5ndGgpIHtcbiAgICAgICAgbGV0IHNwYWNlID0gL15cXHMqLy5leGVjKHZpZXcuc3RhdGUuc2xpY2VEb2MobGluZS5mcm9tLCBNYXRoLm1pbihsaW5lLmZyb20gKyAxMDAsIGxpbmUudG8pKSlbMF0ubGVuZ3RoO1xuICAgICAgICBpZiAoc3BhY2UgJiYgc3RhcnQuaGVhZCAhPSBsaW5lLmZyb20gKyBzcGFjZSlcbiAgICAgICAgICAgIG1vdmVkID0gRWRpdG9yU2VsZWN0aW9uLmN1cnNvcihsaW5lLmZyb20gKyBzcGFjZSk7XG4gICAgfVxuICAgIHJldHVybiBtb3ZlZDtcbn1cbi8qKlxuTW92ZSB0aGUgc2VsZWN0aW9uIHRvIHRoZSBuZXh0IGxpbmUgd3JhcCBwb2ludCwgb3IgdG8gdGhlIGVuZCBvZlxudGhlIGxpbmUgaWYgdGhlcmUgaXNuJ3Qgb25lIGxlZnQgb24gdGhpcyBsaW5lLlxuKi9cbmNvbnN0IGN1cnNvckxpbmVCb3VuZGFyeUZvcndhcmQgPSB2aWV3ID0+IG1vdmVTZWwodmlldywgcmFuZ2UgPT4gbW92ZUJ5TGluZUJvdW5kYXJ5KHZpZXcsIHJhbmdlLCB0cnVlKSk7XG4vKipcbk1vdmUgdGhlIHNlbGVjdGlvbiB0byBwcmV2aW91cyBsaW5lIHdyYXAgcG9pbnQsIG9yIGZhaWxpbmcgdGhhdCB0b1xudGhlIHN0YXJ0IG9mIHRoZSBsaW5lLiBJZiB0aGUgbGluZSBpcyBpbmRlbnRlZCwgYW5kIHRoZSBjdXJzb3Jcbmlzbid0IGFscmVhZHkgYXQgdGhlIGVuZCBvZiB0aGUgaW5kZW50YXRpb24sIHRoaXMgd2lsbCBtb3ZlIHRvIHRoZVxuZW5kIG9mIHRoZSBpbmRlbnRhdGlvbiBpbnN0ZWFkIG9mIHRoZSBzdGFydCBvZiB0aGUgbGluZS5cbiovXG5jb25zdCBjdXJzb3JMaW5lQm91bmRhcnlCYWNrd2FyZCA9IHZpZXcgPT4gbW92ZVNlbCh2aWV3LCByYW5nZSA9PiBtb3ZlQnlMaW5lQm91bmRhcnkodmlldywgcmFuZ2UsIGZhbHNlKSk7XG4vKipcbk1vdmUgdGhlIHNlbGVjdGlvbiBvbmUgbGluZSB3cmFwIHBvaW50IHRvIHRoZSBsZWZ0LlxuKi9cbmNvbnN0IGN1cnNvckxpbmVCb3VuZGFyeUxlZnQgPSB2aWV3ID0+IG1vdmVTZWwodmlldywgcmFuZ2UgPT4gbW92ZUJ5TGluZUJvdW5kYXJ5KHZpZXcsIHJhbmdlLCAhbHRyQXRDdXJzb3IodmlldykpKTtcbi8qKlxuTW92ZSB0aGUgc2VsZWN0aW9uIG9uZSBsaW5lIHdyYXAgcG9pbnQgdG8gdGhlIHJpZ2h0LlxuKi9cbmNvbnN0IGN1cnNvckxpbmVCb3VuZGFyeVJpZ2h0ID0gdmlldyA9PiBtb3ZlU2VsKHZpZXcsIHJhbmdlID0+IG1vdmVCeUxpbmVCb3VuZGFyeSh2aWV3LCByYW5nZSwgbHRyQXRDdXJzb3IodmlldykpKTtcbi8qKlxuTW92ZSB0aGUgc2VsZWN0aW9uIHRvIHRoZSBzdGFydCBvZiB0aGUgbGluZS5cbiovXG5jb25zdCBjdXJzb3JMaW5lU3RhcnQgPSB2aWV3ID0+IG1vdmVTZWwodmlldywgcmFuZ2UgPT4gRWRpdG9yU2VsZWN0aW9uLmN1cnNvcih2aWV3LmxpbmVCbG9ja0F0KHJhbmdlLmhlYWQpLmZyb20sIDEpKTtcbi8qKlxuTW92ZSB0aGUgc2VsZWN0aW9uIHRvIHRoZSBlbmQgb2YgdGhlIGxpbmUuXG4qL1xuY29uc3QgY3Vyc29yTGluZUVuZCA9IHZpZXcgPT4gbW92ZVNlbCh2aWV3LCByYW5nZSA9PiBFZGl0b3JTZWxlY3Rpb24uY3Vyc29yKHZpZXcubGluZUJsb2NrQXQocmFuZ2UuaGVhZCkudG8sIC0xKSk7XG5mdW5jdGlvbiB0b01hdGNoaW5nQnJhY2tldChzdGF0ZSwgZGlzcGF0Y2gsIGV4dGVuZCkge1xuICAgIGxldCBmb3VuZCA9IGZhbHNlLCBzZWxlY3Rpb24gPSB1cGRhdGVTZWwoc3RhdGUuc2VsZWN0aW9uLCByYW5nZSA9PiB7XG4gICAgICAgIGxldCBtYXRjaGluZyA9IG1hdGNoQnJhY2tldHMoc3RhdGUsIHJhbmdlLmhlYWQsIC0xKVxuICAgICAgICAgICAgfHwgbWF0Y2hCcmFja2V0cyhzdGF0ZSwgcmFuZ2UuaGVhZCwgMSlcbiAgICAgICAgICAgIHx8IChyYW5nZS5oZWFkID4gMCAmJiBtYXRjaEJyYWNrZXRzKHN0YXRlLCByYW5nZS5oZWFkIC0gMSwgMSkpXG4gICAgICAgICAgICB8fCAocmFuZ2UuaGVhZCA8IHN0YXRlLmRvYy5sZW5ndGggJiYgbWF0Y2hCcmFja2V0cyhzdGF0ZSwgcmFuZ2UuaGVhZCArIDEsIC0xKSk7XG4gICAgICAgIGlmICghbWF0Y2hpbmcgfHwgIW1hdGNoaW5nLmVuZClcbiAgICAgICAgICAgIHJldHVybiByYW5nZTtcbiAgICAgICAgZm91bmQgPSB0cnVlO1xuICAgICAgICBsZXQgaGVhZCA9IG1hdGNoaW5nLnN0YXJ0LmZyb20gPT0gcmFuZ2UuaGVhZCA/IG1hdGNoaW5nLmVuZC50byA6IG1hdGNoaW5nLmVuZC5mcm9tO1xuICAgICAgICByZXR1cm4gZXh0ZW5kID8gRWRpdG9yU2VsZWN0aW9uLnJhbmdlKHJhbmdlLmFuY2hvciwgaGVhZCkgOiBFZGl0b3JTZWxlY3Rpb24uY3Vyc29yKGhlYWQpO1xuICAgIH0pO1xuICAgIGlmICghZm91bmQpXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICBkaXNwYXRjaChzZXRTZWwoc3RhdGUsIHNlbGVjdGlvbikpO1xuICAgIHJldHVybiB0cnVlO1xufVxuLyoqXG5Nb3ZlIHRoZSBzZWxlY3Rpb24gdG8gdGhlIGJyYWNrZXQgbWF0Y2hpbmcgdGhlIG9uZSBpdCBpcyBjdXJyZW50bHlcbm9uLCBpZiBhbnkuXG4qL1xuY29uc3QgY3Vyc29yTWF0Y2hpbmdCcmFja2V0ID0gKHsgc3RhdGUsIGRpc3BhdGNoIH0pID0+IHRvTWF0Y2hpbmdCcmFja2V0KHN0YXRlLCBkaXNwYXRjaCwgZmFsc2UpO1xuLyoqXG5FeHRlbmQgdGhlIHNlbGVjdGlvbiB0byB0aGUgYnJhY2tldCBtYXRjaGluZyB0aGUgb25lIHRoZSBzZWxlY3Rpb25cbmhlYWQgaXMgY3VycmVudGx5IG9uLCBpZiBhbnkuXG4qL1xuY29uc3Qgc2VsZWN0TWF0Y2hpbmdCcmFja2V0ID0gKHsgc3RhdGUsIGRpc3BhdGNoIH0pID0+IHRvTWF0Y2hpbmdCcmFja2V0KHN0YXRlLCBkaXNwYXRjaCwgdHJ1ZSk7XG5mdW5jdGlvbiBleHRlbmRTZWwodGFyZ2V0LCBob3cpIHtcbiAgICBsZXQgc2VsZWN0aW9uID0gdXBkYXRlU2VsKHRhcmdldC5zdGF0ZS5zZWxlY3Rpb24sIHJhbmdlID0+IHtcbiAgICAgICAgbGV0IGhlYWQgPSBob3cocmFuZ2UpO1xuICAgICAgICByZXR1cm4gRWRpdG9yU2VsZWN0aW9uLnJhbmdlKHJhbmdlLmFuY2hvciwgaGVhZC5oZWFkLCBoZWFkLmdvYWxDb2x1bW4sIGhlYWQuYmlkaUxldmVsIHx8IHVuZGVmaW5lZCk7XG4gICAgfSk7XG4gICAgaWYgKHNlbGVjdGlvbi5lcSh0YXJnZXQuc3RhdGUuc2VsZWN0aW9uKSlcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIHRhcmdldC5kaXNwYXRjaChzZXRTZWwodGFyZ2V0LnN0YXRlLCBzZWxlY3Rpb24pKTtcbiAgICByZXR1cm4gdHJ1ZTtcbn1cbmZ1bmN0aW9uIHNlbGVjdEJ5Q2hhcih2aWV3LCBmb3J3YXJkKSB7XG4gICAgcmV0dXJuIGV4dGVuZFNlbCh2aWV3LCByYW5nZSA9PiB2aWV3Lm1vdmVCeUNoYXIocmFuZ2UsIGZvcndhcmQpKTtcbn1cbi8qKlxuTW92ZSB0aGUgc2VsZWN0aW9uIGhlYWQgb25lIGNoYXJhY3RlciB0byB0aGUgbGVmdCwgd2hpbGUgbGVhdmluZ1xudGhlIGFuY2hvciBpbiBwbGFjZS5cbiovXG5jb25zdCBzZWxlY3RDaGFyTGVmdCA9IHZpZXcgPT4gc2VsZWN0QnlDaGFyKHZpZXcsICFsdHJBdEN1cnNvcih2aWV3KSk7XG4vKipcbk1vdmUgdGhlIHNlbGVjdGlvbiBoZWFkIG9uZSBjaGFyYWN0ZXIgdG8gdGhlIHJpZ2h0LlxuKi9cbmNvbnN0IHNlbGVjdENoYXJSaWdodCA9IHZpZXcgPT4gc2VsZWN0QnlDaGFyKHZpZXcsIGx0ckF0Q3Vyc29yKHZpZXcpKTtcbi8qKlxuTW92ZSB0aGUgc2VsZWN0aW9uIGhlYWQgb25lIGNoYXJhY3RlciBmb3J3YXJkLlxuKi9cbmNvbnN0IHNlbGVjdENoYXJGb3J3YXJkID0gdmlldyA9PiBzZWxlY3RCeUNoYXIodmlldywgdHJ1ZSk7XG4vKipcbk1vdmUgdGhlIHNlbGVjdGlvbiBoZWFkIG9uZSBjaGFyYWN0ZXIgYmFja3dhcmQuXG4qL1xuY29uc3Qgc2VsZWN0Q2hhckJhY2t3YXJkID0gdmlldyA9PiBzZWxlY3RCeUNoYXIodmlldywgZmFsc2UpO1xuLyoqXG5Nb3ZlIHRoZSBzZWxlY3Rpb24gaGVhZCBvbmUgY2hhcmFjdGVyIGZvcndhcmQgYnkgbG9naWNhbFxuKG5vbi1kaXJlY3Rpb24gYXdhcmUpIHN0cmluZyBpbmRleCBvcmRlci5cbiovXG5jb25zdCBzZWxlY3RDaGFyRm9yd2FyZExvZ2ljYWwgPSB0YXJnZXQgPT4gZXh0ZW5kU2VsKHRhcmdldCwgcmFuZ2UgPT4gYnlDaGFyTG9naWNhbCh0YXJnZXQuc3RhdGUsIHJhbmdlLCB0cnVlKSk7XG4vKipcbk1vdmUgdGhlIHNlbGVjdGlvbiBoZWFkIG9uZSBjaGFyYWN0ZXIgYmFja3dhcmQgYnkgbG9naWNhbCBzdHJpbmdcbmluZGV4IG9yZGVyLlxuKi9cbmNvbnN0IHNlbGVjdENoYXJCYWNrd2FyZExvZ2ljYWwgPSB0YXJnZXQgPT4gZXh0ZW5kU2VsKHRhcmdldCwgcmFuZ2UgPT4gYnlDaGFyTG9naWNhbCh0YXJnZXQuc3RhdGUsIHJhbmdlLCBmYWxzZSkpO1xuZnVuY3Rpb24gc2VsZWN0QnlHcm91cCh2aWV3LCBmb3J3YXJkKSB7XG4gICAgcmV0dXJuIGV4dGVuZFNlbCh2aWV3LCByYW5nZSA9PiB2aWV3Lm1vdmVCeUdyb3VwKHJhbmdlLCBmb3J3YXJkKSk7XG59XG4vKipcbk1vdmUgdGhlIHNlbGVjdGlvbiBoZWFkIG9uZSBbZ3JvdXBdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jY29tbWFuZHMuY3Vyc29yR3JvdXBMZWZ0KSB0b1xudGhlIGxlZnQuXG4qL1xuY29uc3Qgc2VsZWN0R3JvdXBMZWZ0ID0gdmlldyA9PiBzZWxlY3RCeUdyb3VwKHZpZXcsICFsdHJBdEN1cnNvcih2aWV3KSk7XG4vKipcbk1vdmUgdGhlIHNlbGVjdGlvbiBoZWFkIG9uZSBncm91cCB0byB0aGUgcmlnaHQuXG4qL1xuY29uc3Qgc2VsZWN0R3JvdXBSaWdodCA9IHZpZXcgPT4gc2VsZWN0QnlHcm91cCh2aWV3LCBsdHJBdEN1cnNvcih2aWV3KSk7XG4vKipcbk1vdmUgdGhlIHNlbGVjdGlvbiBoZWFkIG9uZSBncm91cCBmb3J3YXJkLlxuKi9cbmNvbnN0IHNlbGVjdEdyb3VwRm9yd2FyZCA9IHZpZXcgPT4gc2VsZWN0QnlHcm91cCh2aWV3LCB0cnVlKTtcbi8qKlxuTW92ZSB0aGUgc2VsZWN0aW9uIGhlYWQgb25lIGdyb3VwIGJhY2t3YXJkLlxuKi9cbmNvbnN0IHNlbGVjdEdyb3VwQmFja3dhcmQgPSB2aWV3ID0+IHNlbGVjdEJ5R3JvdXAodmlldywgZmFsc2UpO1xuLyoqXG5Nb3ZlIHRoZSBzZWxlY3Rpb24gaGVhZCBvbmUgZ3JvdXAgZm9yd2FyZCBpbiB0aGUgZGVmYXVsdCBXaW5kb3dzXG5zdHlsZSwgc2tpcHBpbmcgdG8gdGhlIHN0YXJ0IG9mIHRoZSBuZXh0IGdyb3VwLlxuKi9cbmNvbnN0IHNlbGVjdEdyb3VwRm9yd2FyZFdpbiA9IHZpZXcgPT4ge1xuICAgIHJldHVybiBleHRlbmRTZWwodmlldywgcmFuZ2UgPT4gdmlldy5tb3ZlQnlDaGFyKHJhbmdlLCB0cnVlLCBzdGFydCA9PiB0b0dyb3VwU3RhcnQodmlldywgcmFuZ2UuaGVhZCwgc3RhcnQpKSk7XG59O1xuZnVuY3Rpb24gc2VsZWN0QnlTdWJ3b3JkKHZpZXcsIGZvcndhcmQpIHtcbiAgICByZXR1cm4gZXh0ZW5kU2VsKHZpZXcsIHJhbmdlID0+IG1vdmVCeVN1YndvcmQodmlldywgcmFuZ2UsIGZvcndhcmQpKTtcbn1cbi8qKlxuTW92ZSB0aGUgc2VsZWN0aW9uIGhlYWQgb25lIGdyb3VwIG9yIGNhbWVsLWNhc2Ugc3Vid29yZCBmb3J3YXJkLlxuKi9cbmNvbnN0IHNlbGVjdFN1YndvcmRGb3J3YXJkID0gdmlldyA9PiBzZWxlY3RCeVN1YndvcmQodmlldywgdHJ1ZSk7XG4vKipcbk1vdmUgdGhlIHNlbGVjdGlvbiBoZWFkIG9uZSBncm91cCBvciBzdWJ3b3JkIGJhY2t3YXJkLlxuKi9cbmNvbnN0IHNlbGVjdFN1YndvcmRCYWNrd2FyZCA9IHZpZXcgPT4gc2VsZWN0QnlTdWJ3b3JkKHZpZXcsIGZhbHNlKTtcbi8qKlxuTW92ZSB0aGUgc2VsZWN0aW9uIGhlYWQgb3ZlciB0aGUgbmV4dCBzeW50YWN0aWMgZWxlbWVudCB0byB0aGUgbGVmdC5cbiovXG5jb25zdCBzZWxlY3RTeW50YXhMZWZ0ID0gdmlldyA9PiBleHRlbmRTZWwodmlldywgcmFuZ2UgPT4gbW92ZUJ5U3ludGF4KHZpZXcuc3RhdGUsIHJhbmdlLCAhbHRyQXRDdXJzb3IodmlldykpKTtcbi8qKlxuTW92ZSB0aGUgc2VsZWN0aW9uIGhlYWQgb3ZlciB0aGUgbmV4dCBzeW50YWN0aWMgZWxlbWVudCB0byB0aGUgcmlnaHQuXG4qL1xuY29uc3Qgc2VsZWN0U3ludGF4UmlnaHQgPSB2aWV3ID0+IGV4dGVuZFNlbCh2aWV3LCByYW5nZSA9PiBtb3ZlQnlTeW50YXgodmlldy5zdGF0ZSwgcmFuZ2UsIGx0ckF0Q3Vyc29yKHZpZXcpKSk7XG5mdW5jdGlvbiBzZWxlY3RCeUxpbmUodmlldywgZm9yd2FyZCkge1xuICAgIHJldHVybiBleHRlbmRTZWwodmlldywgcmFuZ2UgPT4gdmlldy5tb3ZlVmVydGljYWxseShyYW5nZSwgZm9yd2FyZCkpO1xufVxuLyoqXG5Nb3ZlIHRoZSBzZWxlY3Rpb24gaGVhZCBvbmUgbGluZSB1cC5cbiovXG5jb25zdCBzZWxlY3RMaW5lVXAgPSB2aWV3ID0+IHNlbGVjdEJ5TGluZSh2aWV3LCBmYWxzZSk7XG4vKipcbk1vdmUgdGhlIHNlbGVjdGlvbiBoZWFkIG9uZSBsaW5lIGRvd24uXG4qL1xuY29uc3Qgc2VsZWN0TGluZURvd24gPSB2aWV3ID0+IHNlbGVjdEJ5TGluZSh2aWV3LCB0cnVlKTtcbmZ1bmN0aW9uIHNlbGVjdEJ5UGFnZSh2aWV3LCBmb3J3YXJkKSB7XG4gICAgcmV0dXJuIGV4dGVuZFNlbCh2aWV3LCByYW5nZSA9PiB2aWV3Lm1vdmVWZXJ0aWNhbGx5KHJhbmdlLCBmb3J3YXJkLCBwYWdlSW5mbyh2aWV3KS5oZWlnaHQpKTtcbn1cbi8qKlxuTW92ZSB0aGUgc2VsZWN0aW9uIGhlYWQgb25lIHBhZ2UgdXAuXG4qL1xuY29uc3Qgc2VsZWN0UGFnZVVwID0gdmlldyA9PiBzZWxlY3RCeVBhZ2UodmlldywgZmFsc2UpO1xuLyoqXG5Nb3ZlIHRoZSBzZWxlY3Rpb24gaGVhZCBvbmUgcGFnZSBkb3duLlxuKi9cbmNvbnN0IHNlbGVjdFBhZ2VEb3duID0gdmlldyA9PiBzZWxlY3RCeVBhZ2UodmlldywgdHJ1ZSk7XG4vKipcbk1vdmUgdGhlIHNlbGVjdGlvbiBoZWFkIHRvIHRoZSBuZXh0IGxpbmUgYm91bmRhcnkuXG4qL1xuY29uc3Qgc2VsZWN0TGluZUJvdW5kYXJ5Rm9yd2FyZCA9IHZpZXcgPT4gZXh0ZW5kU2VsKHZpZXcsIHJhbmdlID0+IG1vdmVCeUxpbmVCb3VuZGFyeSh2aWV3LCByYW5nZSwgdHJ1ZSkpO1xuLyoqXG5Nb3ZlIHRoZSBzZWxlY3Rpb24gaGVhZCB0byB0aGUgcHJldmlvdXMgbGluZSBib3VuZGFyeS5cbiovXG5jb25zdCBzZWxlY3RMaW5lQm91bmRhcnlCYWNrd2FyZCA9IHZpZXcgPT4gZXh0ZW5kU2VsKHZpZXcsIHJhbmdlID0+IG1vdmVCeUxpbmVCb3VuZGFyeSh2aWV3LCByYW5nZSwgZmFsc2UpKTtcbi8qKlxuTW92ZSB0aGUgc2VsZWN0aW9uIGhlYWQgb25lIGxpbmUgYm91bmRhcnkgdG8gdGhlIGxlZnQuXG4qL1xuY29uc3Qgc2VsZWN0TGluZUJvdW5kYXJ5TGVmdCA9IHZpZXcgPT4gZXh0ZW5kU2VsKHZpZXcsIHJhbmdlID0+IG1vdmVCeUxpbmVCb3VuZGFyeSh2aWV3LCByYW5nZSwgIWx0ckF0Q3Vyc29yKHZpZXcpKSk7XG4vKipcbk1vdmUgdGhlIHNlbGVjdGlvbiBoZWFkIG9uZSBsaW5lIGJvdW5kYXJ5IHRvIHRoZSByaWdodC5cbiovXG5jb25zdCBzZWxlY3RMaW5lQm91bmRhcnlSaWdodCA9IHZpZXcgPT4gZXh0ZW5kU2VsKHZpZXcsIHJhbmdlID0+IG1vdmVCeUxpbmVCb3VuZGFyeSh2aWV3LCByYW5nZSwgbHRyQXRDdXJzb3IodmlldykpKTtcbi8qKlxuTW92ZSB0aGUgc2VsZWN0aW9uIGhlYWQgdG8gdGhlIHN0YXJ0IG9mIHRoZSBsaW5lLlxuKi9cbmNvbnN0IHNlbGVjdExpbmVTdGFydCA9IHZpZXcgPT4gZXh0ZW5kU2VsKHZpZXcsIHJhbmdlID0+IEVkaXRvclNlbGVjdGlvbi5jdXJzb3Iodmlldy5saW5lQmxvY2tBdChyYW5nZS5oZWFkKS5mcm9tKSk7XG4vKipcbk1vdmUgdGhlIHNlbGVjdGlvbiBoZWFkIHRvIHRoZSBlbmQgb2YgdGhlIGxpbmUuXG4qL1xuY29uc3Qgc2VsZWN0TGluZUVuZCA9IHZpZXcgPT4gZXh0ZW5kU2VsKHZpZXcsIHJhbmdlID0+IEVkaXRvclNlbGVjdGlvbi5jdXJzb3Iodmlldy5saW5lQmxvY2tBdChyYW5nZS5oZWFkKS50bykpO1xuLyoqXG5Nb3ZlIHRoZSBzZWxlY3Rpb24gdG8gdGhlIHN0YXJ0IG9mIHRoZSBkb2N1bWVudC5cbiovXG5jb25zdCBjdXJzb3JEb2NTdGFydCA9ICh7IHN0YXRlLCBkaXNwYXRjaCB9KSA9PiB7XG4gICAgZGlzcGF0Y2goc2V0U2VsKHN0YXRlLCB7IGFuY2hvcjogMCB9KSk7XG4gICAgcmV0dXJuIHRydWU7XG59O1xuLyoqXG5Nb3ZlIHRoZSBzZWxlY3Rpb24gdG8gdGhlIGVuZCBvZiB0aGUgZG9jdW1lbnQuXG4qL1xuY29uc3QgY3Vyc29yRG9jRW5kID0gKHsgc3RhdGUsIGRpc3BhdGNoIH0pID0+IHtcbiAgICBkaXNwYXRjaChzZXRTZWwoc3RhdGUsIHsgYW5jaG9yOiBzdGF0ZS5kb2MubGVuZ3RoIH0pKTtcbiAgICByZXR1cm4gdHJ1ZTtcbn07XG4vKipcbk1vdmUgdGhlIHNlbGVjdGlvbiBoZWFkIHRvIHRoZSBzdGFydCBvZiB0aGUgZG9jdW1lbnQuXG4qL1xuY29uc3Qgc2VsZWN0RG9jU3RhcnQgPSAoeyBzdGF0ZSwgZGlzcGF0Y2ggfSkgPT4ge1xuICAgIGRpc3BhdGNoKHNldFNlbChzdGF0ZSwgeyBhbmNob3I6IHN0YXRlLnNlbGVjdGlvbi5tYWluLmFuY2hvciwgaGVhZDogMCB9KSk7XG4gICAgcmV0dXJuIHRydWU7XG59O1xuLyoqXG5Nb3ZlIHRoZSBzZWxlY3Rpb24gaGVhZCB0byB0aGUgZW5kIG9mIHRoZSBkb2N1bWVudC5cbiovXG5jb25zdCBzZWxlY3REb2NFbmQgPSAoeyBzdGF0ZSwgZGlzcGF0Y2ggfSkgPT4ge1xuICAgIGRpc3BhdGNoKHNldFNlbChzdGF0ZSwgeyBhbmNob3I6IHN0YXRlLnNlbGVjdGlvbi5tYWluLmFuY2hvciwgaGVhZDogc3RhdGUuZG9jLmxlbmd0aCB9KSk7XG4gICAgcmV0dXJuIHRydWU7XG59O1xuLyoqXG5TZWxlY3QgdGhlIGVudGlyZSBkb2N1bWVudC5cbiovXG5jb25zdCBzZWxlY3RBbGwgPSAoeyBzdGF0ZSwgZGlzcGF0Y2ggfSkgPT4ge1xuICAgIGRpc3BhdGNoKHN0YXRlLnVwZGF0ZSh7IHNlbGVjdGlvbjogeyBhbmNob3I6IDAsIGhlYWQ6IHN0YXRlLmRvYy5sZW5ndGggfSwgdXNlckV2ZW50OiBcInNlbGVjdFwiIH0pKTtcbiAgICByZXR1cm4gdHJ1ZTtcbn07XG4vKipcbkV4cGFuZCB0aGUgc2VsZWN0aW9uIHRvIGNvdmVyIGVudGlyZSBsaW5lcy5cbiovXG5jb25zdCBzZWxlY3RMaW5lID0gKHsgc3RhdGUsIGRpc3BhdGNoIH0pID0+IHtcbiAgICBsZXQgcmFuZ2VzID0gc2VsZWN0ZWRMaW5lQmxvY2tzKHN0YXRlKS5tYXAoKHsgZnJvbSwgdG8gfSkgPT4gRWRpdG9yU2VsZWN0aW9uLnJhbmdlKGZyb20sIE1hdGgubWluKHRvICsgMSwgc3RhdGUuZG9jLmxlbmd0aCkpKTtcbiAgICBkaXNwYXRjaChzdGF0ZS51cGRhdGUoeyBzZWxlY3Rpb246IEVkaXRvclNlbGVjdGlvbi5jcmVhdGUocmFuZ2VzKSwgdXNlckV2ZW50OiBcInNlbGVjdFwiIH0pKTtcbiAgICByZXR1cm4gdHJ1ZTtcbn07XG4vKipcblNlbGVjdCB0aGUgbmV4dCBzeW50YWN0aWMgY29uc3RydWN0IHRoYXQgaXMgbGFyZ2VyIHRoYW4gdGhlXG5zZWxlY3Rpb24uIE5vdGUgdGhhdCB0aGlzIHdpbGwgb25seSB3b3JrIGluc29mYXIgYXMgdGhlIGxhbmd1YWdlXG5bcHJvdmlkZXJdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jbGFuZ3VhZ2UubGFuZ3VhZ2UpIHlvdSB1c2UgYnVpbGRzIHVwIGEgZnVsbFxuc3ludGF4IHRyZWUuXG4qL1xuY29uc3Qgc2VsZWN0UGFyZW50U3ludGF4ID0gKHsgc3RhdGUsIGRpc3BhdGNoIH0pID0+IHtcbiAgICBsZXQgc2VsZWN0aW9uID0gdXBkYXRlU2VsKHN0YXRlLnNlbGVjdGlvbiwgcmFuZ2UgPT4ge1xuICAgICAgICBsZXQgdHJlZSA9IHN5bnRheFRyZWUoc3RhdGUpLCBzdGFjayA9IHRyZWUucmVzb2x2ZVN0YWNrKHJhbmdlLmZyb20sIDEpO1xuICAgICAgICBpZiAocmFuZ2UuZW1wdHkpIHtcbiAgICAgICAgICAgIGxldCBzdGFja0JlZm9yZSA9IHRyZWUucmVzb2x2ZVN0YWNrKHJhbmdlLmZyb20sIC0xKTtcbiAgICAgICAgICAgIGlmIChzdGFja0JlZm9yZS5ub2RlLmZyb20gPj0gc3RhY2subm9kZS5mcm9tICYmIHN0YWNrQmVmb3JlLm5vZGUudG8gPD0gc3RhY2subm9kZS50bylcbiAgICAgICAgICAgICAgICBzdGFjayA9IHN0YWNrQmVmb3JlO1xuICAgICAgICB9XG4gICAgICAgIGZvciAobGV0IGN1ciA9IHN0YWNrOyBjdXI7IGN1ciA9IGN1ci5uZXh0KSB7XG4gICAgICAgICAgICBsZXQgeyBub2RlIH0gPSBjdXI7XG4gICAgICAgICAgICBpZiAoKChub2RlLmZyb20gPCByYW5nZS5mcm9tICYmIG5vZGUudG8gPj0gcmFuZ2UudG8pIHx8XG4gICAgICAgICAgICAgICAgKG5vZGUudG8gPiByYW5nZS50byAmJiBub2RlLmZyb20gPD0gcmFuZ2UuZnJvbSkpICYmXG4gICAgICAgICAgICAgICAgY3VyLm5leHQpXG4gICAgICAgICAgICAgICAgcmV0dXJuIEVkaXRvclNlbGVjdGlvbi5yYW5nZShub2RlLnRvLCBub2RlLmZyb20pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByYW5nZTtcbiAgICB9KTtcbiAgICBpZiAoc2VsZWN0aW9uLmVxKHN0YXRlLnNlbGVjdGlvbikpXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICBkaXNwYXRjaChzZXRTZWwoc3RhdGUsIHNlbGVjdGlvbikpO1xuICAgIHJldHVybiB0cnVlO1xufTtcbmZ1bmN0aW9uIGFkZEN1cnNvclZlcnRpY2FsbHkodmlldywgZm9yd2FyZCkge1xuICAgIGxldCB7IHN0YXRlIH0gPSB2aWV3LCBzZWwgPSBzdGF0ZS5zZWxlY3Rpb24sIHJhbmdlcyA9IHN0YXRlLnNlbGVjdGlvbi5yYW5nZXMuc2xpY2UoKTtcbiAgICBmb3IgKGxldCByYW5nZSBvZiBzdGF0ZS5zZWxlY3Rpb24ucmFuZ2VzKSB7XG4gICAgICAgIGxldCBsaW5lID0gc3RhdGUuZG9jLmxpbmVBdChyYW5nZS5oZWFkKTtcbiAgICAgICAgaWYgKGZvcndhcmQgPyBsaW5lLnRvIDwgdmlldy5zdGF0ZS5kb2MubGVuZ3RoIDogbGluZS5mcm9tID4gMClcbiAgICAgICAgICAgIGZvciAobGV0IGN1ciA9IHJhbmdlOzspIHtcbiAgICAgICAgICAgICAgICBsZXQgbmV4dCA9IHZpZXcubW92ZVZlcnRpY2FsbHkoY3VyLCBmb3J3YXJkKTtcbiAgICAgICAgICAgICAgICBpZiAobmV4dC5oZWFkIDwgbGluZS5mcm9tIHx8IG5leHQuaGVhZCA+IGxpbmUudG8pIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFyYW5nZXMuc29tZShyID0+IHIuaGVhZCA9PSBuZXh0LmhlYWQpKVxuICAgICAgICAgICAgICAgICAgICAgICAgcmFuZ2VzLnB1c2gobmV4dCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChuZXh0LmhlYWQgPT0gY3VyLmhlYWQpIHtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBjdXIgPSBuZXh0O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICB9XG4gICAgaWYgKHJhbmdlcy5sZW5ndGggPT0gc2VsLnJhbmdlcy5sZW5ndGgpXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB2aWV3LmRpc3BhdGNoKHNldFNlbChzdGF0ZSwgRWRpdG9yU2VsZWN0aW9uLmNyZWF0ZShyYW5nZXMsIHJhbmdlcy5sZW5ndGggLSAxKSkpO1xuICAgIHJldHVybiB0cnVlO1xufVxuLyoqXG5FeHBhbmQgdGhlIHNlbGVjdGlvbiBieSBhZGRpbmcgYSBjdXJzb3IgYWJvdmUgdGhlIGhlYWRzIG9mXG5jdXJyZW50bHkgc2VsZWN0ZWQgcmFuZ2VzLlxuKi9cbmNvbnN0IGFkZEN1cnNvckFib3ZlID0gdmlldyA9PiBhZGRDdXJzb3JWZXJ0aWNhbGx5KHZpZXcsIGZhbHNlKTtcbi8qKlxuRXhwYW5kIHRoZSBzZWxlY3Rpb24gYnkgYWRkaW5nIGEgY3Vyc29yIGJlbG93IHRoZSBoZWFkcyBvZlxuY3VycmVudGx5IHNlbGVjdGVkIHJhbmdlcy5cbiovXG5jb25zdCBhZGRDdXJzb3JCZWxvdyA9IHZpZXcgPT4gYWRkQ3Vyc29yVmVydGljYWxseSh2aWV3LCB0cnVlKTtcbi8qKlxuU2ltcGxpZnkgdGhlIGN1cnJlbnQgc2VsZWN0aW9uLiBXaGVuIG11bHRpcGxlIHJhbmdlcyBhcmUgc2VsZWN0ZWQsXG5yZWR1Y2UgaXQgdG8gaXRzIG1haW4gcmFuZ2UuIE90aGVyd2lzZSwgaWYgdGhlIHNlbGVjdGlvbiBpc1xubm9uLWVtcHR5LCBjb252ZXJ0IGl0IHRvIGEgY3Vyc29yIHNlbGVjdGlvbi5cbiovXG5jb25zdCBzaW1wbGlmeVNlbGVjdGlvbiA9ICh7IHN0YXRlLCBkaXNwYXRjaCB9KSA9PiB7XG4gICAgbGV0IGN1ciA9IHN0YXRlLnNlbGVjdGlvbiwgc2VsZWN0aW9uID0gbnVsbDtcbiAgICBpZiAoY3VyLnJhbmdlcy5sZW5ndGggPiAxKVxuICAgICAgICBzZWxlY3Rpb24gPSBFZGl0b3JTZWxlY3Rpb24uY3JlYXRlKFtjdXIubWFpbl0pO1xuICAgIGVsc2UgaWYgKCFjdXIubWFpbi5lbXB0eSlcbiAgICAgICAgc2VsZWN0aW9uID0gRWRpdG9yU2VsZWN0aW9uLmNyZWF0ZShbRWRpdG9yU2VsZWN0aW9uLmN1cnNvcihjdXIubWFpbi5oZWFkKV0pO1xuICAgIGlmICghc2VsZWN0aW9uKVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgZGlzcGF0Y2goc2V0U2VsKHN0YXRlLCBzZWxlY3Rpb24pKTtcbiAgICByZXR1cm4gdHJ1ZTtcbn07XG5mdW5jdGlvbiBkZWxldGVCeSh0YXJnZXQsIGJ5KSB7XG4gICAgaWYgKHRhcmdldC5zdGF0ZS5yZWFkT25seSlcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIGxldCBldmVudCA9IFwiZGVsZXRlLnNlbGVjdGlvblwiLCB7IHN0YXRlIH0gPSB0YXJnZXQ7XG4gICAgbGV0IGNoYW5nZXMgPSBzdGF0ZS5jaGFuZ2VCeVJhbmdlKHJhbmdlID0+IHtcbiAgICAgICAgbGV0IHsgZnJvbSwgdG8gfSA9IHJhbmdlO1xuICAgICAgICBpZiAoZnJvbSA9PSB0bykge1xuICAgICAgICAgICAgbGV0IHRvd2FyZHMgPSBieShyYW5nZSk7XG4gICAgICAgICAgICBpZiAodG93YXJkcyA8IGZyb20pIHtcbiAgICAgICAgICAgICAgICBldmVudCA9IFwiZGVsZXRlLmJhY2t3YXJkXCI7XG4gICAgICAgICAgICAgICAgdG93YXJkcyA9IHNraXBBdG9taWModGFyZ2V0LCB0b3dhcmRzLCBmYWxzZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICh0b3dhcmRzID4gZnJvbSkge1xuICAgICAgICAgICAgICAgIGV2ZW50ID0gXCJkZWxldGUuZm9yd2FyZFwiO1xuICAgICAgICAgICAgICAgIHRvd2FyZHMgPSBza2lwQXRvbWljKHRhcmdldCwgdG93YXJkcywgdHJ1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmcm9tID0gTWF0aC5taW4oZnJvbSwgdG93YXJkcyk7XG4gICAgICAgICAgICB0byA9IE1hdGgubWF4KHRvLCB0b3dhcmRzKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGZyb20gPSBza2lwQXRvbWljKHRhcmdldCwgZnJvbSwgZmFsc2UpO1xuICAgICAgICAgICAgdG8gPSBza2lwQXRvbWljKHRhcmdldCwgdG8sIHRydWUpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmcm9tID09IHRvID8geyByYW5nZSB9IDogeyBjaGFuZ2VzOiB7IGZyb20sIHRvIH0sIHJhbmdlOiBFZGl0b3JTZWxlY3Rpb24uY3Vyc29yKGZyb20sIGZyb20gPCByYW5nZS5oZWFkID8gLTEgOiAxKSB9O1xuICAgIH0pO1xuICAgIGlmIChjaGFuZ2VzLmNoYW5nZXMuZW1wdHkpXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB0YXJnZXQuZGlzcGF0Y2goc3RhdGUudXBkYXRlKGNoYW5nZXMsIHtcbiAgICAgICAgc2Nyb2xsSW50b1ZpZXc6IHRydWUsXG4gICAgICAgIHVzZXJFdmVudDogZXZlbnQsXG4gICAgICAgIGVmZmVjdHM6IGV2ZW50ID09IFwiZGVsZXRlLnNlbGVjdGlvblwiID8gRWRpdG9yVmlldy5hbm5vdW5jZS5vZihzdGF0ZS5waHJhc2UoXCJTZWxlY3Rpb24gZGVsZXRlZFwiKSkgOiB1bmRlZmluZWRcbiAgICB9KSk7XG4gICAgcmV0dXJuIHRydWU7XG59XG5mdW5jdGlvbiBza2lwQXRvbWljKHRhcmdldCwgcG9zLCBmb3J3YXJkKSB7XG4gICAgaWYgKHRhcmdldCBpbnN0YW5jZW9mIEVkaXRvclZpZXcpXG4gICAgICAgIGZvciAobGV0IHJhbmdlcyBvZiB0YXJnZXQuc3RhdGUuZmFjZXQoRWRpdG9yVmlldy5hdG9taWNSYW5nZXMpLm1hcChmID0+IGYodGFyZ2V0KSkpXG4gICAgICAgICAgICByYW5nZXMuYmV0d2Vlbihwb3MsIHBvcywgKGZyb20sIHRvKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKGZyb20gPCBwb3MgJiYgdG8gPiBwb3MpXG4gICAgICAgICAgICAgICAgICAgIHBvcyA9IGZvcndhcmQgPyB0byA6IGZyb207XG4gICAgICAgICAgICB9KTtcbiAgICByZXR1cm4gcG9zO1xufVxuY29uc3QgZGVsZXRlQnlDaGFyID0gKHRhcmdldCwgZm9yd2FyZCwgYnlJbmRlbnRVbml0KSA9PiBkZWxldGVCeSh0YXJnZXQsIHJhbmdlID0+IHtcbiAgICBsZXQgcG9zID0gcmFuZ2UuZnJvbSwgeyBzdGF0ZSB9ID0gdGFyZ2V0LCBsaW5lID0gc3RhdGUuZG9jLmxpbmVBdChwb3MpLCBiZWZvcmUsIHRhcmdldFBvcztcbiAgICBpZiAoYnlJbmRlbnRVbml0ICYmICFmb3J3YXJkICYmIHBvcyA+IGxpbmUuZnJvbSAmJiBwb3MgPCBsaW5lLmZyb20gKyAyMDAgJiZcbiAgICAgICAgIS9bXiBcXHRdLy50ZXN0KGJlZm9yZSA9IGxpbmUudGV4dC5zbGljZSgwLCBwb3MgLSBsaW5lLmZyb20pKSkge1xuICAgICAgICBpZiAoYmVmb3JlW2JlZm9yZS5sZW5ndGggLSAxXSA9PSBcIlxcdFwiKVxuICAgICAgICAgICAgcmV0dXJuIHBvcyAtIDE7XG4gICAgICAgIGxldCBjb2wgPSBjb3VudENvbHVtbihiZWZvcmUsIHN0YXRlLnRhYlNpemUpLCBkcm9wID0gY29sICUgZ2V0SW5kZW50VW5pdChzdGF0ZSkgfHwgZ2V0SW5kZW50VW5pdChzdGF0ZSk7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZHJvcCAmJiBiZWZvcmVbYmVmb3JlLmxlbmd0aCAtIDEgLSBpXSA9PSBcIiBcIjsgaSsrKVxuICAgICAgICAgICAgcG9zLS07XG4gICAgICAgIHRhcmdldFBvcyA9IHBvcztcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHRhcmdldFBvcyA9IGZpbmRDbHVzdGVyQnJlYWsobGluZS50ZXh0LCBwb3MgLSBsaW5lLmZyb20sIGZvcndhcmQsIGZvcndhcmQpICsgbGluZS5mcm9tO1xuICAgICAgICBpZiAodGFyZ2V0UG9zID09IHBvcyAmJiBsaW5lLm51bWJlciAhPSAoZm9yd2FyZCA/IHN0YXRlLmRvYy5saW5lcyA6IDEpKVxuICAgICAgICAgICAgdGFyZ2V0UG9zICs9IGZvcndhcmQgPyAxIDogLTE7XG4gICAgICAgIGVsc2UgaWYgKCFmb3J3YXJkICYmIC9bXFx1ZmUwMC1cXHVmZTBmXS8udGVzdChsaW5lLnRleHQuc2xpY2UodGFyZ2V0UG9zIC0gbGluZS5mcm9tLCBwb3MgLSBsaW5lLmZyb20pKSlcbiAgICAgICAgICAgIHRhcmdldFBvcyA9IGZpbmRDbHVzdGVyQnJlYWsobGluZS50ZXh0LCB0YXJnZXRQb3MgLSBsaW5lLmZyb20sIGZhbHNlLCBmYWxzZSkgKyBsaW5lLmZyb207XG4gICAgfVxuICAgIHJldHVybiB0YXJnZXRQb3M7XG59KTtcbi8qKlxuRGVsZXRlIHRoZSBzZWxlY3Rpb24sIG9yLCBmb3IgY3Vyc29yIHNlbGVjdGlvbnMsIHRoZSBjaGFyYWN0ZXIgb3JcbmluZGVudGF0aW9uIHVuaXQgYmVmb3JlIHRoZSBjdXJzb3IuXG4qL1xuY29uc3QgZGVsZXRlQ2hhckJhY2t3YXJkID0gdmlldyA9PiBkZWxldGVCeUNoYXIodmlldywgZmFsc2UsIHRydWUpO1xuLyoqXG5EZWxldGUgdGhlIHNlbGVjdGlvbiBvciB0aGUgY2hhcmFjdGVyIGJlZm9yZSB0aGUgY3Vyc29yLiBEb2VzIG5vdFxuaW1wbGVtZW50IGFueSBleHRlbmRlZCBiZWhhdmlvciBsaWtlIGRlbGV0aW5nIHdob2xlIGluZGVudGF0aW9uXG51bml0cyBpbiBvbmUgZ28uXG4qL1xuY29uc3QgZGVsZXRlQ2hhckJhY2t3YXJkU3RyaWN0ID0gdmlldyA9PiBkZWxldGVCeUNoYXIodmlldywgZmFsc2UsIGZhbHNlKTtcbi8qKlxuRGVsZXRlIHRoZSBzZWxlY3Rpb24gb3IgdGhlIGNoYXJhY3RlciBhZnRlciB0aGUgY3Vyc29yLlxuKi9cbmNvbnN0IGRlbGV0ZUNoYXJGb3J3YXJkID0gdmlldyA9PiBkZWxldGVCeUNoYXIodmlldywgdHJ1ZSwgZmFsc2UpO1xuY29uc3QgZGVsZXRlQnlHcm91cCA9ICh0YXJnZXQsIGZvcndhcmQpID0+IGRlbGV0ZUJ5KHRhcmdldCwgcmFuZ2UgPT4ge1xuICAgIGxldCBwb3MgPSByYW5nZS5oZWFkLCB7IHN0YXRlIH0gPSB0YXJnZXQsIGxpbmUgPSBzdGF0ZS5kb2MubGluZUF0KHBvcyk7XG4gICAgbGV0IGNhdGVnb3JpemUgPSBzdGF0ZS5jaGFyQ2F0ZWdvcml6ZXIocG9zKTtcbiAgICBmb3IgKGxldCBjYXQgPSBudWxsOzspIHtcbiAgICAgICAgaWYgKHBvcyA9PSAoZm9yd2FyZCA/IGxpbmUudG8gOiBsaW5lLmZyb20pKSB7XG4gICAgICAgICAgICBpZiAocG9zID09IHJhbmdlLmhlYWQgJiYgbGluZS5udW1iZXIgIT0gKGZvcndhcmQgPyBzdGF0ZS5kb2MubGluZXMgOiAxKSlcbiAgICAgICAgICAgICAgICBwb3MgKz0gZm9yd2FyZCA/IDEgOiAtMTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIGxldCBuZXh0ID0gZmluZENsdXN0ZXJCcmVhayhsaW5lLnRleHQsIHBvcyAtIGxpbmUuZnJvbSwgZm9yd2FyZCkgKyBsaW5lLmZyb207XG4gICAgICAgIGxldCBuZXh0Q2hhciA9IGxpbmUudGV4dC5zbGljZShNYXRoLm1pbihwb3MsIG5leHQpIC0gbGluZS5mcm9tLCBNYXRoLm1heChwb3MsIG5leHQpIC0gbGluZS5mcm9tKTtcbiAgICAgICAgbGV0IG5leHRDYXQgPSBjYXRlZ29yaXplKG5leHRDaGFyKTtcbiAgICAgICAgaWYgKGNhdCAhPSBudWxsICYmIG5leHRDYXQgIT0gY2F0KVxuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGlmIChuZXh0Q2hhciAhPSBcIiBcIiB8fCBwb3MgIT0gcmFuZ2UuaGVhZClcbiAgICAgICAgICAgIGNhdCA9IG5leHRDYXQ7XG4gICAgICAgIHBvcyA9IG5leHQ7XG4gICAgfVxuICAgIHJldHVybiBwb3M7XG59KTtcbi8qKlxuRGVsZXRlIHRoZSBzZWxlY3Rpb24gb3IgYmFja3dhcmQgdW50aWwgdGhlIGVuZCBvZiB0aGUgbmV4dFxuW2dyb3VwXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI3ZpZXcuRWRpdG9yVmlldy5tb3ZlQnlHcm91cCksIG9ubHkgc2tpcHBpbmcgZ3JvdXBzIG9mXG53aGl0ZXNwYWNlIHdoZW4gdGhleSBjb25zaXN0IG9mIGEgc2luZ2xlIHNwYWNlLlxuKi9cbmNvbnN0IGRlbGV0ZUdyb3VwQmFja3dhcmQgPSB0YXJnZXQgPT4gZGVsZXRlQnlHcm91cCh0YXJnZXQsIGZhbHNlKTtcbi8qKlxuRGVsZXRlIHRoZSBzZWxlY3Rpb24gb3IgZm9yd2FyZCB1bnRpbCB0aGUgZW5kIG9mIHRoZSBuZXh0IGdyb3VwLlxuKi9cbmNvbnN0IGRlbGV0ZUdyb3VwRm9yd2FyZCA9IHRhcmdldCA9PiBkZWxldGVCeUdyb3VwKHRhcmdldCwgdHJ1ZSk7XG4vKipcblZhcmlhbnQgb2YgW2BkZWxldGVHcm91cEZvcndhcmRgXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI2NvbW1hbmRzLmRlbGV0ZUdyb3VwRm9yd2FyZClcbnRoYXQgdXNlcyB0aGUgV2luZG93cyBjb252ZW50aW9uIG9mIGFsc28gZGVsZXRpbmcgdGhlIHdoaXRlc3BhY2VcbmFmdGVyIGEgd29yZC5cbiovXG5jb25zdCBkZWxldGVHcm91cEZvcndhcmRXaW4gPSB2aWV3ID0+IGRlbGV0ZUJ5KHZpZXcsIHJhbmdlID0+IHZpZXcubW92ZUJ5Q2hhcihyYW5nZSwgdHJ1ZSwgc3RhcnQgPT4gdG9Hcm91cFN0YXJ0KHZpZXcsIHJhbmdlLmhlYWQsIHN0YXJ0KSkuaGVhZCk7XG4vKipcbkRlbGV0ZSB0aGUgc2VsZWN0aW9uLCBvciwgaWYgaXQgaXMgYSBjdXJzb3Igc2VsZWN0aW9uLCBkZWxldGUgdG9cbnRoZSBlbmQgb2YgdGhlIGxpbmUuIElmIHRoZSBjdXJzb3IgaXMgZGlyZWN0bHkgYXQgdGhlIGVuZCBvZiB0aGVcbmxpbmUsIGRlbGV0ZSB0aGUgbGluZSBicmVhayBhZnRlciBpdC5cbiovXG5jb25zdCBkZWxldGVUb0xpbmVFbmQgPSB2aWV3ID0+IGRlbGV0ZUJ5KHZpZXcsIHJhbmdlID0+IHtcbiAgICBsZXQgbGluZUVuZCA9IHZpZXcubGluZUJsb2NrQXQocmFuZ2UuaGVhZCkudG87XG4gICAgcmV0dXJuIHJhbmdlLmhlYWQgPCBsaW5lRW5kID8gbGluZUVuZCA6IE1hdGgubWluKHZpZXcuc3RhdGUuZG9jLmxlbmd0aCwgcmFuZ2UuaGVhZCArIDEpO1xufSk7XG4vKipcbkRlbGV0ZSB0aGUgc2VsZWN0aW9uLCBvciwgaWYgaXQgaXMgYSBjdXJzb3Igc2VsZWN0aW9uLCBkZWxldGUgdG9cbnRoZSBzdGFydCBvZiB0aGUgbGluZS4gSWYgdGhlIGN1cnNvciBpcyBkaXJlY3RseSBhdCB0aGUgc3RhcnQgb2YgdGhlXG5saW5lLCBkZWxldGUgdGhlIGxpbmUgYnJlYWsgYmVmb3JlIGl0LlxuKi9cbmNvbnN0IGRlbGV0ZVRvTGluZVN0YXJ0ID0gdmlldyA9PiBkZWxldGVCeSh2aWV3LCByYW5nZSA9PiB7XG4gICAgbGV0IGxpbmVTdGFydCA9IHZpZXcubGluZUJsb2NrQXQocmFuZ2UuaGVhZCkuZnJvbTtcbiAgICByZXR1cm4gcmFuZ2UuaGVhZCA+IGxpbmVTdGFydCA/IGxpbmVTdGFydCA6IE1hdGgubWF4KDAsIHJhbmdlLmhlYWQgLSAxKTtcbn0pO1xuLyoqXG5EZWxldGUgdGhlIHNlbGVjdGlvbiwgb3IsIGlmIGl0IGlzIGEgY3Vyc29yIHNlbGVjdGlvbiwgZGVsZXRlIHRvXG50aGUgc3RhcnQgb2YgdGhlIGxpbmUgb3IgdGhlIG5leHQgbGluZSB3cmFwIGJlZm9yZSB0aGUgY3Vyc29yLlxuKi9cbmNvbnN0IGRlbGV0ZUxpbmVCb3VuZGFyeUJhY2t3YXJkID0gdmlldyA9PiBkZWxldGVCeSh2aWV3LCByYW5nZSA9PiB7XG4gICAgbGV0IGxpbmVTdGFydCA9IHZpZXcubW92ZVRvTGluZUJvdW5kYXJ5KHJhbmdlLCBmYWxzZSkuaGVhZDtcbiAgICByZXR1cm4gcmFuZ2UuaGVhZCA+IGxpbmVTdGFydCA/IGxpbmVTdGFydCA6IE1hdGgubWF4KDAsIHJhbmdlLmhlYWQgLSAxKTtcbn0pO1xuLyoqXG5EZWxldGUgdGhlIHNlbGVjdGlvbiwgb3IsIGlmIGl0IGlzIGEgY3Vyc29yIHNlbGVjdGlvbiwgZGVsZXRlIHRvXG50aGUgZW5kIG9mIHRoZSBsaW5lIG9yIHRoZSBuZXh0IGxpbmUgd3JhcCBhZnRlciB0aGUgY3Vyc29yLlxuKi9cbmNvbnN0IGRlbGV0ZUxpbmVCb3VuZGFyeUZvcndhcmQgPSB2aWV3ID0+IGRlbGV0ZUJ5KHZpZXcsIHJhbmdlID0+IHtcbiAgICBsZXQgbGluZVN0YXJ0ID0gdmlldy5tb3ZlVG9MaW5lQm91bmRhcnkocmFuZ2UsIHRydWUpLmhlYWQ7XG4gICAgcmV0dXJuIHJhbmdlLmhlYWQgPCBsaW5lU3RhcnQgPyBsaW5lU3RhcnQgOiBNYXRoLm1pbih2aWV3LnN0YXRlLmRvYy5sZW5ndGgsIHJhbmdlLmhlYWQgKyAxKTtcbn0pO1xuLyoqXG5EZWxldGUgYWxsIHdoaXRlc3BhY2UgZGlyZWN0bHkgYmVmb3JlIGEgbGluZSBlbmQgZnJvbSB0aGVcbmRvY3VtZW50LlxuKi9cbmNvbnN0IGRlbGV0ZVRyYWlsaW5nV2hpdGVzcGFjZSA9ICh7IHN0YXRlLCBkaXNwYXRjaCB9KSA9PiB7XG4gICAgaWYgKHN0YXRlLnJlYWRPbmx5KVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgbGV0IGNoYW5nZXMgPSBbXTtcbiAgICBmb3IgKGxldCBwb3MgPSAwLCBwcmV2ID0gXCJcIiwgaXRlciA9IHN0YXRlLmRvYy5pdGVyKCk7Oykge1xuICAgICAgICBpdGVyLm5leHQoKTtcbiAgICAgICAgaWYgKGl0ZXIubGluZUJyZWFrIHx8IGl0ZXIuZG9uZSkge1xuICAgICAgICAgICAgbGV0IHRyYWlsaW5nID0gcHJldi5zZWFyY2goL1xccyskLyk7XG4gICAgICAgICAgICBpZiAodHJhaWxpbmcgPiAtMSlcbiAgICAgICAgICAgICAgICBjaGFuZ2VzLnB1c2goeyBmcm9tOiBwb3MgLSAocHJldi5sZW5ndGggLSB0cmFpbGluZyksIHRvOiBwb3MgfSk7XG4gICAgICAgICAgICBpZiAoaXRlci5kb25lKVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgcHJldiA9IFwiXCI7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBwcmV2ID0gaXRlci52YWx1ZTtcbiAgICAgICAgfVxuICAgICAgICBwb3MgKz0gaXRlci52YWx1ZS5sZW5ndGg7XG4gICAgfVxuICAgIGlmICghY2hhbmdlcy5sZW5ndGgpXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICBkaXNwYXRjaChzdGF0ZS51cGRhdGUoeyBjaGFuZ2VzLCB1c2VyRXZlbnQ6IFwiZGVsZXRlXCIgfSkpO1xuICAgIHJldHVybiB0cnVlO1xufTtcbi8qKlxuUmVwbGFjZSBlYWNoIHNlbGVjdGlvbiByYW5nZSB3aXRoIGEgbGluZSBicmVhaywgbGVhdmluZyB0aGUgY3Vyc29yXG5vbiB0aGUgbGluZSBiZWZvcmUgdGhlIGJyZWFrLlxuKi9cbmNvbnN0IHNwbGl0TGluZSA9ICh7IHN0YXRlLCBkaXNwYXRjaCB9KSA9PiB7XG4gICAgaWYgKHN0YXRlLnJlYWRPbmx5KVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgbGV0IGNoYW5nZXMgPSBzdGF0ZS5jaGFuZ2VCeVJhbmdlKHJhbmdlID0+IHtcbiAgICAgICAgcmV0dXJuIHsgY2hhbmdlczogeyBmcm9tOiByYW5nZS5mcm9tLCB0bzogcmFuZ2UudG8sIGluc2VydDogVGV4dC5vZihbXCJcIiwgXCJcIl0pIH0sXG4gICAgICAgICAgICByYW5nZTogRWRpdG9yU2VsZWN0aW9uLmN1cnNvcihyYW5nZS5mcm9tKSB9O1xuICAgIH0pO1xuICAgIGRpc3BhdGNoKHN0YXRlLnVwZGF0ZShjaGFuZ2VzLCB7IHNjcm9sbEludG9WaWV3OiB0cnVlLCB1c2VyRXZlbnQ6IFwiaW5wdXRcIiB9KSk7XG4gICAgcmV0dXJuIHRydWU7XG59O1xuLyoqXG5GbGlwIHRoZSBjaGFyYWN0ZXJzIGJlZm9yZSBhbmQgYWZ0ZXIgdGhlIGN1cnNvcihzKS5cbiovXG5jb25zdCB0cmFuc3Bvc2VDaGFycyA9ICh7IHN0YXRlLCBkaXNwYXRjaCB9KSA9PiB7XG4gICAgaWYgKHN0YXRlLnJlYWRPbmx5KVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgbGV0IGNoYW5nZXMgPSBzdGF0ZS5jaGFuZ2VCeVJhbmdlKHJhbmdlID0+IHtcbiAgICAgICAgaWYgKCFyYW5nZS5lbXB0eSB8fCByYW5nZS5mcm9tID09IDAgfHwgcmFuZ2UuZnJvbSA9PSBzdGF0ZS5kb2MubGVuZ3RoKVxuICAgICAgICAgICAgcmV0dXJuIHsgcmFuZ2UgfTtcbiAgICAgICAgbGV0IHBvcyA9IHJhbmdlLmZyb20sIGxpbmUgPSBzdGF0ZS5kb2MubGluZUF0KHBvcyk7XG4gICAgICAgIGxldCBmcm9tID0gcG9zID09IGxpbmUuZnJvbSA/IHBvcyAtIDEgOiBmaW5kQ2x1c3RlckJyZWFrKGxpbmUudGV4dCwgcG9zIC0gbGluZS5mcm9tLCBmYWxzZSkgKyBsaW5lLmZyb207XG4gICAgICAgIGxldCB0byA9IHBvcyA9PSBsaW5lLnRvID8gcG9zICsgMSA6IGZpbmRDbHVzdGVyQnJlYWsobGluZS50ZXh0LCBwb3MgLSBsaW5lLmZyb20sIHRydWUpICsgbGluZS5mcm9tO1xuICAgICAgICByZXR1cm4geyBjaGFuZ2VzOiB7IGZyb20sIHRvLCBpbnNlcnQ6IHN0YXRlLmRvYy5zbGljZShwb3MsIHRvKS5hcHBlbmQoc3RhdGUuZG9jLnNsaWNlKGZyb20sIHBvcykpIH0sXG4gICAgICAgICAgICByYW5nZTogRWRpdG9yU2VsZWN0aW9uLmN1cnNvcih0bykgfTtcbiAgICB9KTtcbiAgICBpZiAoY2hhbmdlcy5jaGFuZ2VzLmVtcHR5KVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgZGlzcGF0Y2goc3RhdGUudXBkYXRlKGNoYW5nZXMsIHsgc2Nyb2xsSW50b1ZpZXc6IHRydWUsIHVzZXJFdmVudDogXCJtb3ZlLmNoYXJhY3RlclwiIH0pKTtcbiAgICByZXR1cm4gdHJ1ZTtcbn07XG5mdW5jdGlvbiBzZWxlY3RlZExpbmVCbG9ja3Moc3RhdGUpIHtcbiAgICBsZXQgYmxvY2tzID0gW10sIHVwdG8gPSAtMTtcbiAgICBmb3IgKGxldCByYW5nZSBvZiBzdGF0ZS5zZWxlY3Rpb24ucmFuZ2VzKSB7XG4gICAgICAgIGxldCBzdGFydExpbmUgPSBzdGF0ZS5kb2MubGluZUF0KHJhbmdlLmZyb20pLCBlbmRMaW5lID0gc3RhdGUuZG9jLmxpbmVBdChyYW5nZS50byk7XG4gICAgICAgIGlmICghcmFuZ2UuZW1wdHkgJiYgcmFuZ2UudG8gPT0gZW5kTGluZS5mcm9tKVxuICAgICAgICAgICAgZW5kTGluZSA9IHN0YXRlLmRvYy5saW5lQXQocmFuZ2UudG8gLSAxKTtcbiAgICAgICAgaWYgKHVwdG8gPj0gc3RhcnRMaW5lLm51bWJlcikge1xuICAgICAgICAgICAgbGV0IHByZXYgPSBibG9ja3NbYmxvY2tzLmxlbmd0aCAtIDFdO1xuICAgICAgICAgICAgcHJldi50byA9IGVuZExpbmUudG87XG4gICAgICAgICAgICBwcmV2LnJhbmdlcy5wdXNoKHJhbmdlKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGJsb2Nrcy5wdXNoKHsgZnJvbTogc3RhcnRMaW5lLmZyb20sIHRvOiBlbmRMaW5lLnRvLCByYW5nZXM6IFtyYW5nZV0gfSk7XG4gICAgICAgIH1cbiAgICAgICAgdXB0byA9IGVuZExpbmUubnVtYmVyICsgMTtcbiAgICB9XG4gICAgcmV0dXJuIGJsb2Nrcztcbn1cbmZ1bmN0aW9uIG1vdmVMaW5lKHN0YXRlLCBkaXNwYXRjaCwgZm9yd2FyZCkge1xuICAgIGlmIChzdGF0ZS5yZWFkT25seSlcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIGxldCBjaGFuZ2VzID0gW10sIHJhbmdlcyA9IFtdO1xuICAgIGZvciAobGV0IGJsb2NrIG9mIHNlbGVjdGVkTGluZUJsb2NrcyhzdGF0ZSkpIHtcbiAgICAgICAgaWYgKGZvcndhcmQgPyBibG9jay50byA9PSBzdGF0ZS5kb2MubGVuZ3RoIDogYmxvY2suZnJvbSA9PSAwKVxuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgIGxldCBuZXh0TGluZSA9IHN0YXRlLmRvYy5saW5lQXQoZm9yd2FyZCA/IGJsb2NrLnRvICsgMSA6IGJsb2NrLmZyb20gLSAxKTtcbiAgICAgICAgbGV0IHNpemUgPSBuZXh0TGluZS5sZW5ndGggKyAxO1xuICAgICAgICBpZiAoZm9yd2FyZCkge1xuICAgICAgICAgICAgY2hhbmdlcy5wdXNoKHsgZnJvbTogYmxvY2sudG8sIHRvOiBuZXh0TGluZS50byB9LCB7IGZyb206IGJsb2NrLmZyb20sIGluc2VydDogbmV4dExpbmUudGV4dCArIHN0YXRlLmxpbmVCcmVhayB9KTtcbiAgICAgICAgICAgIGZvciAobGV0IHIgb2YgYmxvY2sucmFuZ2VzKVxuICAgICAgICAgICAgICAgIHJhbmdlcy5wdXNoKEVkaXRvclNlbGVjdGlvbi5yYW5nZShNYXRoLm1pbihzdGF0ZS5kb2MubGVuZ3RoLCByLmFuY2hvciArIHNpemUpLCBNYXRoLm1pbihzdGF0ZS5kb2MubGVuZ3RoLCByLmhlYWQgKyBzaXplKSkpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgY2hhbmdlcy5wdXNoKHsgZnJvbTogbmV4dExpbmUuZnJvbSwgdG86IGJsb2NrLmZyb20gfSwgeyBmcm9tOiBibG9jay50bywgaW5zZXJ0OiBzdGF0ZS5saW5lQnJlYWsgKyBuZXh0TGluZS50ZXh0IH0pO1xuICAgICAgICAgICAgZm9yIChsZXQgciBvZiBibG9jay5yYW5nZXMpXG4gICAgICAgICAgICAgICAgcmFuZ2VzLnB1c2goRWRpdG9yU2VsZWN0aW9uLnJhbmdlKHIuYW5jaG9yIC0gc2l6ZSwgci5oZWFkIC0gc2l6ZSkpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGlmICghY2hhbmdlcy5sZW5ndGgpXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICBkaXNwYXRjaChzdGF0ZS51cGRhdGUoe1xuICAgICAgICBjaGFuZ2VzLFxuICAgICAgICBzY3JvbGxJbnRvVmlldzogdHJ1ZSxcbiAgICAgICAgc2VsZWN0aW9uOiBFZGl0b3JTZWxlY3Rpb24uY3JlYXRlKHJhbmdlcywgc3RhdGUuc2VsZWN0aW9uLm1haW5JbmRleCksXG4gICAgICAgIHVzZXJFdmVudDogXCJtb3ZlLmxpbmVcIlxuICAgIH0pKTtcbiAgICByZXR1cm4gdHJ1ZTtcbn1cbi8qKlxuTW92ZSB0aGUgc2VsZWN0ZWQgbGluZXMgdXAgb25lIGxpbmUuXG4qL1xuY29uc3QgbW92ZUxpbmVVcCA9ICh7IHN0YXRlLCBkaXNwYXRjaCB9KSA9PiBtb3ZlTGluZShzdGF0ZSwgZGlzcGF0Y2gsIGZhbHNlKTtcbi8qKlxuTW92ZSB0aGUgc2VsZWN0ZWQgbGluZXMgZG93biBvbmUgbGluZS5cbiovXG5jb25zdCBtb3ZlTGluZURvd24gPSAoeyBzdGF0ZSwgZGlzcGF0Y2ggfSkgPT4gbW92ZUxpbmUoc3RhdGUsIGRpc3BhdGNoLCB0cnVlKTtcbmZ1bmN0aW9uIGNvcHlMaW5lKHN0YXRlLCBkaXNwYXRjaCwgZm9yd2FyZCkge1xuICAgIGlmIChzdGF0ZS5yZWFkT25seSlcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIGxldCBjaGFuZ2VzID0gW107XG4gICAgZm9yIChsZXQgYmxvY2sgb2Ygc2VsZWN0ZWRMaW5lQmxvY2tzKHN0YXRlKSkge1xuICAgICAgICBpZiAoZm9yd2FyZClcbiAgICAgICAgICAgIGNoYW5nZXMucHVzaCh7IGZyb206IGJsb2NrLmZyb20sIGluc2VydDogc3RhdGUuZG9jLnNsaWNlKGJsb2NrLmZyb20sIGJsb2NrLnRvKSArIHN0YXRlLmxpbmVCcmVhayB9KTtcbiAgICAgICAgZWxzZVxuICAgICAgICAgICAgY2hhbmdlcy5wdXNoKHsgZnJvbTogYmxvY2sudG8sIGluc2VydDogc3RhdGUubGluZUJyZWFrICsgc3RhdGUuZG9jLnNsaWNlKGJsb2NrLmZyb20sIGJsb2NrLnRvKSB9KTtcbiAgICB9XG4gICAgbGV0IGNoYW5nZVNldCA9IHN0YXRlLmNoYW5nZXMoY2hhbmdlcyk7XG4gICAgZGlzcGF0Y2goc3RhdGUudXBkYXRlKHtcbiAgICAgICAgY2hhbmdlczogY2hhbmdlU2V0LFxuICAgICAgICBzZWxlY3Rpb246IHN0YXRlLnNlbGVjdGlvbi5tYXAoY2hhbmdlU2V0LCBmb3J3YXJkID8gMSA6IC0xKSxcbiAgICAgICAgc2Nyb2xsSW50b1ZpZXc6IHRydWUsXG4gICAgICAgIHVzZXJFdmVudDogXCJpbnB1dC5jb3B5bGluZVwiXG4gICAgfSkpO1xuICAgIHJldHVybiB0cnVlO1xufVxuLyoqXG5DcmVhdGUgYSBjb3B5IG9mIHRoZSBzZWxlY3RlZCBsaW5lcy4gS2VlcCB0aGUgc2VsZWN0aW9uIGluIHRoZSB0b3AgY29weS5cbiovXG5jb25zdCBjb3B5TGluZVVwID0gKHsgc3RhdGUsIGRpc3BhdGNoIH0pID0+IGNvcHlMaW5lKHN0YXRlLCBkaXNwYXRjaCwgZmFsc2UpO1xuLyoqXG5DcmVhdGUgYSBjb3B5IG9mIHRoZSBzZWxlY3RlZCBsaW5lcy4gS2VlcCB0aGUgc2VsZWN0aW9uIGluIHRoZSBib3R0b20gY29weS5cbiovXG5jb25zdCBjb3B5TGluZURvd24gPSAoeyBzdGF0ZSwgZGlzcGF0Y2ggfSkgPT4gY29weUxpbmUoc3RhdGUsIGRpc3BhdGNoLCB0cnVlKTtcbi8qKlxuRGVsZXRlIHNlbGVjdGVkIGxpbmVzLlxuKi9cbmNvbnN0IGRlbGV0ZUxpbmUgPSB2aWV3ID0+IHtcbiAgICBpZiAodmlldy5zdGF0ZS5yZWFkT25seSlcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIGxldCB7IHN0YXRlIH0gPSB2aWV3LCBjaGFuZ2VzID0gc3RhdGUuY2hhbmdlcyhzZWxlY3RlZExpbmVCbG9ja3Moc3RhdGUpLm1hcCgoeyBmcm9tLCB0byB9KSA9PiB7XG4gICAgICAgIGlmIChmcm9tID4gMClcbiAgICAgICAgICAgIGZyb20tLTtcbiAgICAgICAgZWxzZSBpZiAodG8gPCBzdGF0ZS5kb2MubGVuZ3RoKVxuICAgICAgICAgICAgdG8rKztcbiAgICAgICAgcmV0dXJuIHsgZnJvbSwgdG8gfTtcbiAgICB9KSk7XG4gICAgbGV0IHNlbGVjdGlvbiA9IHVwZGF0ZVNlbChzdGF0ZS5zZWxlY3Rpb24sIHJhbmdlID0+IHtcbiAgICAgICAgbGV0IGRpc3QgPSB1bmRlZmluZWQ7XG4gICAgICAgIGlmICh2aWV3LmxpbmVXcmFwcGluZykge1xuICAgICAgICAgICAgbGV0IGJsb2NrID0gdmlldy5saW5lQmxvY2tBdChyYW5nZS5oZWFkKSwgcG9zID0gdmlldy5jb29yZHNBdFBvcyhyYW5nZS5oZWFkLCByYW5nZS5hc3NvYyB8fCAxKTtcbiAgICAgICAgICAgIGlmIChwb3MpXG4gICAgICAgICAgICAgICAgZGlzdCA9IChibG9jay5ib3R0b20gKyB2aWV3LmRvY3VtZW50VG9wKSAtIHBvcy5ib3R0b20gKyB2aWV3LmRlZmF1bHRMaW5lSGVpZ2h0IC8gMjtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdmlldy5tb3ZlVmVydGljYWxseShyYW5nZSwgdHJ1ZSwgZGlzdCk7XG4gICAgfSkubWFwKGNoYW5nZXMpO1xuICAgIHZpZXcuZGlzcGF0Y2goeyBjaGFuZ2VzLCBzZWxlY3Rpb24sIHNjcm9sbEludG9WaWV3OiB0cnVlLCB1c2VyRXZlbnQ6IFwiZGVsZXRlLmxpbmVcIiB9KTtcbiAgICByZXR1cm4gdHJ1ZTtcbn07XG4vKipcblJlcGxhY2UgdGhlIHNlbGVjdGlvbiB3aXRoIGEgbmV3bGluZS5cbiovXG5jb25zdCBpbnNlcnROZXdsaW5lID0gKHsgc3RhdGUsIGRpc3BhdGNoIH0pID0+IHtcbiAgICBkaXNwYXRjaChzdGF0ZS51cGRhdGUoc3RhdGUucmVwbGFjZVNlbGVjdGlvbihzdGF0ZS5saW5lQnJlYWspLCB7IHNjcm9sbEludG9WaWV3OiB0cnVlLCB1c2VyRXZlbnQ6IFwiaW5wdXRcIiB9KSk7XG4gICAgcmV0dXJuIHRydWU7XG59O1xuLyoqXG5SZXBsYWNlIHRoZSBzZWxlY3Rpb24gd2l0aCBhIG5ld2xpbmUgYW5kIHRoZSBzYW1lIGFtb3VudCBvZlxuaW5kZW50YXRpb24gYXMgdGhlIGxpbmUgYWJvdmUuXG4qL1xuY29uc3QgaW5zZXJ0TmV3bGluZUtlZXBJbmRlbnQgPSAoeyBzdGF0ZSwgZGlzcGF0Y2ggfSkgPT4ge1xuICAgIGRpc3BhdGNoKHN0YXRlLnVwZGF0ZShzdGF0ZS5jaGFuZ2VCeVJhbmdlKHJhbmdlID0+IHtcbiAgICAgICAgbGV0IGluZGVudCA9IC9eXFxzKi8uZXhlYyhzdGF0ZS5kb2MubGluZUF0KHJhbmdlLmZyb20pLnRleHQpWzBdO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgY2hhbmdlczogeyBmcm9tOiByYW5nZS5mcm9tLCB0bzogcmFuZ2UudG8sIGluc2VydDogc3RhdGUubGluZUJyZWFrICsgaW5kZW50IH0sXG4gICAgICAgICAgICByYW5nZTogRWRpdG9yU2VsZWN0aW9uLmN1cnNvcihyYW5nZS5mcm9tICsgaW5kZW50Lmxlbmd0aCArIDEpXG4gICAgICAgIH07XG4gICAgfSksIHsgc2Nyb2xsSW50b1ZpZXc6IHRydWUsIHVzZXJFdmVudDogXCJpbnB1dFwiIH0pKTtcbiAgICByZXR1cm4gdHJ1ZTtcbn07XG5mdW5jdGlvbiBpc0JldHdlZW5CcmFja2V0cyhzdGF0ZSwgcG9zKSB7XG4gICAgaWYgKC9cXChcXCl8XFxbXFxdfFxce1xcfS8udGVzdChzdGF0ZS5zbGljZURvYyhwb3MgLSAxLCBwb3MgKyAxKSkpXG4gICAgICAgIHJldHVybiB7IGZyb206IHBvcywgdG86IHBvcyB9O1xuICAgIGxldCBjb250ZXh0ID0gc3ludGF4VHJlZShzdGF0ZSkucmVzb2x2ZUlubmVyKHBvcyk7XG4gICAgbGV0IGJlZm9yZSA9IGNvbnRleHQuY2hpbGRCZWZvcmUocG9zKSwgYWZ0ZXIgPSBjb250ZXh0LmNoaWxkQWZ0ZXIocG9zKSwgY2xvc2VkQnk7XG4gICAgaWYgKGJlZm9yZSAmJiBhZnRlciAmJiBiZWZvcmUudG8gPD0gcG9zICYmIGFmdGVyLmZyb20gPj0gcG9zICYmXG4gICAgICAgIChjbG9zZWRCeSA9IGJlZm9yZS50eXBlLnByb3AoTm9kZVByb3AuY2xvc2VkQnkpKSAmJiBjbG9zZWRCeS5pbmRleE9mKGFmdGVyLm5hbWUpID4gLTEgJiZcbiAgICAgICAgc3RhdGUuZG9jLmxpbmVBdChiZWZvcmUudG8pLmZyb20gPT0gc3RhdGUuZG9jLmxpbmVBdChhZnRlci5mcm9tKS5mcm9tICYmXG4gICAgICAgICEvXFxTLy50ZXN0KHN0YXRlLnNsaWNlRG9jKGJlZm9yZS50bywgYWZ0ZXIuZnJvbSkpKVxuICAgICAgICByZXR1cm4geyBmcm9tOiBiZWZvcmUudG8sIHRvOiBhZnRlci5mcm9tIH07XG4gICAgcmV0dXJuIG51bGw7XG59XG4vKipcblJlcGxhY2UgdGhlIHNlbGVjdGlvbiB3aXRoIGEgbmV3bGluZSBhbmQgaW5kZW50IHRoZSBuZXdseSBjcmVhdGVkXG5saW5lKHMpLiBJZiB0aGUgY3VycmVudCBsaW5lIGNvbnNpc3RzIG9ubHkgb2Ygd2hpdGVzcGFjZSwgdGhpc1xud2lsbCBhbHNvIGRlbGV0ZSB0aGF0IHdoaXRlc3BhY2UuIFdoZW4gdGhlIGN1cnNvciBpcyBiZXR3ZWVuXG5tYXRjaGluZyBicmFja2V0cywgYW4gYWRkaXRpb25hbCBuZXdsaW5lIHdpbGwgYmUgaW5zZXJ0ZWQgYWZ0ZXJcbnRoZSBjdXJzb3IuXG4qL1xuY29uc3QgaW5zZXJ0TmV3bGluZUFuZEluZGVudCA9IC8qQF9fUFVSRV9fKi9uZXdsaW5lQW5kSW5kZW50KGZhbHNlKTtcbi8qKlxuQ3JlYXRlIGEgYmxhbmssIGluZGVudGVkIGxpbmUgYmVsb3cgdGhlIGN1cnJlbnQgbGluZS5cbiovXG5jb25zdCBpbnNlcnRCbGFua0xpbmUgPSAvKkBfX1BVUkVfXyovbmV3bGluZUFuZEluZGVudCh0cnVlKTtcbmZ1bmN0aW9uIG5ld2xpbmVBbmRJbmRlbnQoYXRFb2YpIHtcbiAgICByZXR1cm4gKHsgc3RhdGUsIGRpc3BhdGNoIH0pID0+IHtcbiAgICAgICAgaWYgKHN0YXRlLnJlYWRPbmx5KVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICBsZXQgY2hhbmdlcyA9IHN0YXRlLmNoYW5nZUJ5UmFuZ2UocmFuZ2UgPT4ge1xuICAgICAgICAgICAgbGV0IHsgZnJvbSwgdG8gfSA9IHJhbmdlLCBsaW5lID0gc3RhdGUuZG9jLmxpbmVBdChmcm9tKTtcbiAgICAgICAgICAgIGxldCBleHBsb2RlID0gIWF0RW9mICYmIGZyb20gPT0gdG8gJiYgaXNCZXR3ZWVuQnJhY2tldHMoc3RhdGUsIGZyb20pO1xuICAgICAgICAgICAgaWYgKGF0RW9mKVxuICAgICAgICAgICAgICAgIGZyb20gPSB0byA9ICh0byA8PSBsaW5lLnRvID8gbGluZSA6IHN0YXRlLmRvYy5saW5lQXQodG8pKS50bztcbiAgICAgICAgICAgIGxldCBjeCA9IG5ldyBJbmRlbnRDb250ZXh0KHN0YXRlLCB7IHNpbXVsYXRlQnJlYWs6IGZyb20sIHNpbXVsYXRlRG91YmxlQnJlYWs6ICEhZXhwbG9kZSB9KTtcbiAgICAgICAgICAgIGxldCBpbmRlbnQgPSBnZXRJbmRlbnRhdGlvbihjeCwgZnJvbSk7XG4gICAgICAgICAgICBpZiAoaW5kZW50ID09IG51bGwpXG4gICAgICAgICAgICAgICAgaW5kZW50ID0gY291bnRDb2x1bW4oL15cXHMqLy5leGVjKHN0YXRlLmRvYy5saW5lQXQoZnJvbSkudGV4dClbMF0sIHN0YXRlLnRhYlNpemUpO1xuICAgICAgICAgICAgd2hpbGUgKHRvIDwgbGluZS50byAmJiAvXFxzLy50ZXN0KGxpbmUudGV4dFt0byAtIGxpbmUuZnJvbV0pKVxuICAgICAgICAgICAgICAgIHRvKys7XG4gICAgICAgICAgICBpZiAoZXhwbG9kZSlcbiAgICAgICAgICAgICAgICAoeyBmcm9tLCB0byB9ID0gZXhwbG9kZSk7XG4gICAgICAgICAgICBlbHNlIGlmIChmcm9tID4gbGluZS5mcm9tICYmIGZyb20gPCBsaW5lLmZyb20gKyAxMDAgJiYgIS9cXFMvLnRlc3QobGluZS50ZXh0LnNsaWNlKDAsIGZyb20pKSlcbiAgICAgICAgICAgICAgICBmcm9tID0gbGluZS5mcm9tO1xuICAgICAgICAgICAgbGV0IGluc2VydCA9IFtcIlwiLCBpbmRlbnRTdHJpbmcoc3RhdGUsIGluZGVudCldO1xuICAgICAgICAgICAgaWYgKGV4cGxvZGUpXG4gICAgICAgICAgICAgICAgaW5zZXJ0LnB1c2goaW5kZW50U3RyaW5nKHN0YXRlLCBjeC5saW5lSW5kZW50KGxpbmUuZnJvbSwgLTEpKSk7XG4gICAgICAgICAgICByZXR1cm4geyBjaGFuZ2VzOiB7IGZyb20sIHRvLCBpbnNlcnQ6IFRleHQub2YoaW5zZXJ0KSB9LFxuICAgICAgICAgICAgICAgIHJhbmdlOiBFZGl0b3JTZWxlY3Rpb24uY3Vyc29yKGZyb20gKyAxICsgaW5zZXJ0WzFdLmxlbmd0aCkgfTtcbiAgICAgICAgfSk7XG4gICAgICAgIGRpc3BhdGNoKHN0YXRlLnVwZGF0ZShjaGFuZ2VzLCB7IHNjcm9sbEludG9WaWV3OiB0cnVlLCB1c2VyRXZlbnQ6IFwiaW5wdXRcIiB9KSk7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH07XG59XG5mdW5jdGlvbiBjaGFuZ2VCeVNlbGVjdGVkTGluZShzdGF0ZSwgZikge1xuICAgIGxldCBhdExpbmUgPSAtMTtcbiAgICByZXR1cm4gc3RhdGUuY2hhbmdlQnlSYW5nZShyYW5nZSA9PiB7XG4gICAgICAgIGxldCBjaGFuZ2VzID0gW107XG4gICAgICAgIGZvciAobGV0IHBvcyA9IHJhbmdlLmZyb207IHBvcyA8PSByYW5nZS50bzspIHtcbiAgICAgICAgICAgIGxldCBsaW5lID0gc3RhdGUuZG9jLmxpbmVBdChwb3MpO1xuICAgICAgICAgICAgaWYgKGxpbmUubnVtYmVyID4gYXRMaW5lICYmIChyYW5nZS5lbXB0eSB8fCByYW5nZS50byA+IGxpbmUuZnJvbSkpIHtcbiAgICAgICAgICAgICAgICBmKGxpbmUsIGNoYW5nZXMsIHJhbmdlKTtcbiAgICAgICAgICAgICAgICBhdExpbmUgPSBsaW5lLm51bWJlcjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHBvcyA9IGxpbmUudG8gKyAxO1xuICAgICAgICB9XG4gICAgICAgIGxldCBjaGFuZ2VTZXQgPSBzdGF0ZS5jaGFuZ2VzKGNoYW5nZXMpO1xuICAgICAgICByZXR1cm4geyBjaGFuZ2VzLFxuICAgICAgICAgICAgcmFuZ2U6IEVkaXRvclNlbGVjdGlvbi5yYW5nZShjaGFuZ2VTZXQubWFwUG9zKHJhbmdlLmFuY2hvciwgMSksIGNoYW5nZVNldC5tYXBQb3MocmFuZ2UuaGVhZCwgMSkpIH07XG4gICAgfSk7XG59XG4vKipcbkF1dG8taW5kZW50IHRoZSBzZWxlY3RlZCBsaW5lcy4gVGhpcyB1c2VzIHRoZSBbaW5kZW50YXRpb24gc2VydmljZVxuZmFjZXRdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jbGFuZ3VhZ2UuaW5kZW50U2VydmljZSkgYXMgc291cmNlIGZvciBhdXRvLWluZGVudFxuaW5mb3JtYXRpb24uXG4qL1xuY29uc3QgaW5kZW50U2VsZWN0aW9uID0gKHsgc3RhdGUsIGRpc3BhdGNoIH0pID0+IHtcbiAgICBpZiAoc3RhdGUucmVhZE9ubHkpXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICBsZXQgdXBkYXRlZCA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gICAgbGV0IGNvbnRleHQgPSBuZXcgSW5kZW50Q29udGV4dChzdGF0ZSwgeyBvdmVycmlkZUluZGVudGF0aW9uOiBzdGFydCA9PiB7XG4gICAgICAgICAgICBsZXQgZm91bmQgPSB1cGRhdGVkW3N0YXJ0XTtcbiAgICAgICAgICAgIHJldHVybiBmb3VuZCA9PSBudWxsID8gLTEgOiBmb3VuZDtcbiAgICAgICAgfSB9KTtcbiAgICBsZXQgY2hhbmdlcyA9IGNoYW5nZUJ5U2VsZWN0ZWRMaW5lKHN0YXRlLCAobGluZSwgY2hhbmdlcywgcmFuZ2UpID0+IHtcbiAgICAgICAgbGV0IGluZGVudCA9IGdldEluZGVudGF0aW9uKGNvbnRleHQsIGxpbmUuZnJvbSk7XG4gICAgICAgIGlmIChpbmRlbnQgPT0gbnVsbClcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgaWYgKCEvXFxTLy50ZXN0KGxpbmUudGV4dCkpXG4gICAgICAgICAgICBpbmRlbnQgPSAwO1xuICAgICAgICBsZXQgY3VyID0gL15cXHMqLy5leGVjKGxpbmUudGV4dClbMF07XG4gICAgICAgIGxldCBub3JtID0gaW5kZW50U3RyaW5nKHN0YXRlLCBpbmRlbnQpO1xuICAgICAgICBpZiAoY3VyICE9IG5vcm0gfHwgcmFuZ2UuZnJvbSA8IGxpbmUuZnJvbSArIGN1ci5sZW5ndGgpIHtcbiAgICAgICAgICAgIHVwZGF0ZWRbbGluZS5mcm9tXSA9IGluZGVudDtcbiAgICAgICAgICAgIGNoYW5nZXMucHVzaCh7IGZyb206IGxpbmUuZnJvbSwgdG86IGxpbmUuZnJvbSArIGN1ci5sZW5ndGgsIGluc2VydDogbm9ybSB9KTtcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIGlmICghY2hhbmdlcy5jaGFuZ2VzLmVtcHR5KVxuICAgICAgICBkaXNwYXRjaChzdGF0ZS51cGRhdGUoY2hhbmdlcywgeyB1c2VyRXZlbnQ6IFwiaW5kZW50XCIgfSkpO1xuICAgIHJldHVybiB0cnVlO1xufTtcbi8qKlxuQWRkIGEgW3VuaXRdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jbGFuZ3VhZ2UuaW5kZW50VW5pdCkgb2YgaW5kZW50YXRpb24gdG8gYWxsIHNlbGVjdGVkXG5saW5lcy5cbiovXG5jb25zdCBpbmRlbnRNb3JlID0gKHsgc3RhdGUsIGRpc3BhdGNoIH0pID0+IHtcbiAgICBpZiAoc3RhdGUucmVhZE9ubHkpXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICBkaXNwYXRjaChzdGF0ZS51cGRhdGUoY2hhbmdlQnlTZWxlY3RlZExpbmUoc3RhdGUsIChsaW5lLCBjaGFuZ2VzKSA9PiB7XG4gICAgICAgIGNoYW5nZXMucHVzaCh7IGZyb206IGxpbmUuZnJvbSwgaW5zZXJ0OiBzdGF0ZS5mYWNldChpbmRlbnRVbml0KSB9KTtcbiAgICB9KSwgeyB1c2VyRXZlbnQ6IFwiaW5wdXQuaW5kZW50XCIgfSkpO1xuICAgIHJldHVybiB0cnVlO1xufTtcbi8qKlxuUmVtb3ZlIGEgW3VuaXRdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jbGFuZ3VhZ2UuaW5kZW50VW5pdCkgb2YgaW5kZW50YXRpb24gZnJvbSBhbGxcbnNlbGVjdGVkIGxpbmVzLlxuKi9cbmNvbnN0IGluZGVudExlc3MgPSAoeyBzdGF0ZSwgZGlzcGF0Y2ggfSkgPT4ge1xuICAgIGlmIChzdGF0ZS5yZWFkT25seSlcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIGRpc3BhdGNoKHN0YXRlLnVwZGF0ZShjaGFuZ2VCeVNlbGVjdGVkTGluZShzdGF0ZSwgKGxpbmUsIGNoYW5nZXMpID0+IHtcbiAgICAgICAgbGV0IHNwYWNlID0gL15cXHMqLy5leGVjKGxpbmUudGV4dClbMF07XG4gICAgICAgIGlmICghc3BhY2UpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIGxldCBjb2wgPSBjb3VudENvbHVtbihzcGFjZSwgc3RhdGUudGFiU2l6ZSksIGtlZXAgPSAwO1xuICAgICAgICBsZXQgaW5zZXJ0ID0gaW5kZW50U3RyaW5nKHN0YXRlLCBNYXRoLm1heCgwLCBjb2wgLSBnZXRJbmRlbnRVbml0KHN0YXRlKSkpO1xuICAgICAgICB3aGlsZSAoa2VlcCA8IHNwYWNlLmxlbmd0aCAmJiBrZWVwIDwgaW5zZXJ0Lmxlbmd0aCAmJiBzcGFjZS5jaGFyQ29kZUF0KGtlZXApID09IGluc2VydC5jaGFyQ29kZUF0KGtlZXApKVxuICAgICAgICAgICAga2VlcCsrO1xuICAgICAgICBjaGFuZ2VzLnB1c2goeyBmcm9tOiBsaW5lLmZyb20gKyBrZWVwLCB0bzogbGluZS5mcm9tICsgc3BhY2UubGVuZ3RoLCBpbnNlcnQ6IGluc2VydC5zbGljZShrZWVwKSB9KTtcbiAgICB9KSwgeyB1c2VyRXZlbnQ6IFwiZGVsZXRlLmRlZGVudFwiIH0pKTtcbiAgICByZXR1cm4gdHJ1ZTtcbn07XG4vKipcbkVuYWJsZXMgb3IgZGlzYWJsZXNcblt0YWItZm9jdXMgbW9kZV0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyN2aWV3LkVkaXRvclZpZXcuc2V0VGFiRm9jdXNNb2RlKS4gV2hpbGUgb24sIHRoaXNcbnByZXZlbnRzIHRoZSBlZGl0b3IncyBrZXkgYmluZGluZ3MgZnJvbSBjYXB0dXJpbmcgVGFiIG9yXG5TaGlmdC1UYWIsIG1ha2luZyBpdCBwb3NzaWJsZSBmb3IgdGhlIHVzZXIgdG8gbW92ZSBmb2N1cyBvdXQgb2ZcbnRoZSBlZGl0b3Igd2l0aCB0aGUga2V5Ym9hcmQuXG4qL1xuY29uc3QgdG9nZ2xlVGFiRm9jdXNNb2RlID0gdmlldyA9PiB7XG4gICAgdmlldy5zZXRUYWJGb2N1c01vZGUoKTtcbiAgICByZXR1cm4gdHJ1ZTtcbn07XG4vKipcblRlbXBvcmFyaWx5IGVuYWJsZXMgW3RhYi1mb2N1c1xubW9kZV0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyN2aWV3LkVkaXRvclZpZXcuc2V0VGFiRm9jdXNNb2RlKSBmb3IgdHdvIHNlY29uZHMgb3IgdW50aWxcbmFub3RoZXIga2V5IGlzIHByZXNzZWQuXG4qL1xuY29uc3QgdGVtcG9yYXJpbHlTZXRUYWJGb2N1c01vZGUgPSB2aWV3ID0+IHtcbiAgICB2aWV3LnNldFRhYkZvY3VzTW9kZSgyMDAwKTtcbiAgICByZXR1cm4gdHJ1ZTtcbn07XG4vKipcbkluc2VydCBhIHRhYiBjaGFyYWN0ZXIgYXQgdGhlIGN1cnNvciBvciwgaWYgc29tZXRoaW5nIGlzIHNlbGVjdGVkLFxudXNlIFtgaW5kZW50TW9yZWBdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jY29tbWFuZHMuaW5kZW50TW9yZSkgdG8gaW5kZW50IHRoZSBlbnRpcmVcbnNlbGVjdGlvbi5cbiovXG5jb25zdCBpbnNlcnRUYWIgPSAoeyBzdGF0ZSwgZGlzcGF0Y2ggfSkgPT4ge1xuICAgIGlmIChzdGF0ZS5zZWxlY3Rpb24ucmFuZ2VzLnNvbWUociA9PiAhci5lbXB0eSkpXG4gICAgICAgIHJldHVybiBpbmRlbnRNb3JlKHsgc3RhdGUsIGRpc3BhdGNoIH0pO1xuICAgIGRpc3BhdGNoKHN0YXRlLnVwZGF0ZShzdGF0ZS5yZXBsYWNlU2VsZWN0aW9uKFwiXFx0XCIpLCB7IHNjcm9sbEludG9WaWV3OiB0cnVlLCB1c2VyRXZlbnQ6IFwiaW5wdXRcIiB9KSk7XG4gICAgcmV0dXJuIHRydWU7XG59O1xuLyoqXG5BcnJheSBvZiBrZXkgYmluZGluZ3MgY29udGFpbmluZyB0aGUgRW1hY3Mtc3R5bGUgYmluZGluZ3MgdGhhdCBhcmVcbmF2YWlsYWJsZSBvbiBtYWNPUyBieSBkZWZhdWx0LlxuXG4gLSBDdHJsLWI6IFtgY3Vyc29yQ2hhckxlZnRgXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI2NvbW1hbmRzLmN1cnNvckNoYXJMZWZ0KSAoW2BzZWxlY3RDaGFyTGVmdGBdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jY29tbWFuZHMuc2VsZWN0Q2hhckxlZnQpIHdpdGggU2hpZnQpXG4gLSBDdHJsLWY6IFtgY3Vyc29yQ2hhclJpZ2h0YF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNjb21tYW5kcy5jdXJzb3JDaGFyUmlnaHQpIChbYHNlbGVjdENoYXJSaWdodGBdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jY29tbWFuZHMuc2VsZWN0Q2hhclJpZ2h0KSB3aXRoIFNoaWZ0KVxuIC0gQ3RybC1wOiBbYGN1cnNvckxpbmVVcGBdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jY29tbWFuZHMuY3Vyc29yTGluZVVwKSAoW2BzZWxlY3RMaW5lVXBgXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI2NvbW1hbmRzLnNlbGVjdExpbmVVcCkgd2l0aCBTaGlmdClcbiAtIEN0cmwtbjogW2BjdXJzb3JMaW5lRG93bmBdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jY29tbWFuZHMuY3Vyc29yTGluZURvd24pIChbYHNlbGVjdExpbmVEb3duYF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNjb21tYW5kcy5zZWxlY3RMaW5lRG93bikgd2l0aCBTaGlmdClcbiAtIEN0cmwtYTogW2BjdXJzb3JMaW5lU3RhcnRgXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI2NvbW1hbmRzLmN1cnNvckxpbmVTdGFydCkgKFtgc2VsZWN0TGluZVN0YXJ0YF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNjb21tYW5kcy5zZWxlY3RMaW5lU3RhcnQpIHdpdGggU2hpZnQpXG4gLSBDdHJsLWU6IFtgY3Vyc29yTGluZUVuZGBdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jY29tbWFuZHMuY3Vyc29yTGluZUVuZCkgKFtgc2VsZWN0TGluZUVuZGBdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jY29tbWFuZHMuc2VsZWN0TGluZUVuZCkgd2l0aCBTaGlmdClcbiAtIEN0cmwtZDogW2BkZWxldGVDaGFyRm9yd2FyZGBdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jY29tbWFuZHMuZGVsZXRlQ2hhckZvcndhcmQpXG4gLSBDdHJsLWg6IFtgZGVsZXRlQ2hhckJhY2t3YXJkYF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNjb21tYW5kcy5kZWxldGVDaGFyQmFja3dhcmQpXG4gLSBDdHJsLWs6IFtgZGVsZXRlVG9MaW5lRW5kYF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNjb21tYW5kcy5kZWxldGVUb0xpbmVFbmQpXG4gLSBDdHJsLUFsdC1oOiBbYGRlbGV0ZUdyb3VwQmFja3dhcmRgXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI2NvbW1hbmRzLmRlbGV0ZUdyb3VwQmFja3dhcmQpXG4gLSBDdHJsLW86IFtgc3BsaXRMaW5lYF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNjb21tYW5kcy5zcGxpdExpbmUpXG4gLSBDdHJsLXQ6IFtgdHJhbnNwb3NlQ2hhcnNgXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI2NvbW1hbmRzLnRyYW5zcG9zZUNoYXJzKVxuIC0gQ3RybC12OiBbYGN1cnNvclBhZ2VEb3duYF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNjb21tYW5kcy5jdXJzb3JQYWdlRG93bilcbiAtIEFsdC12OiBbYGN1cnNvclBhZ2VVcGBdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jY29tbWFuZHMuY3Vyc29yUGFnZVVwKVxuKi9cbmNvbnN0IGVtYWNzU3R5bGVLZXltYXAgPSBbXG4gICAgeyBrZXk6IFwiQ3RybC1iXCIsIHJ1bjogY3Vyc29yQ2hhckxlZnQsIHNoaWZ0OiBzZWxlY3RDaGFyTGVmdCwgcHJldmVudERlZmF1bHQ6IHRydWUgfSxcbiAgICB7IGtleTogXCJDdHJsLWZcIiwgcnVuOiBjdXJzb3JDaGFyUmlnaHQsIHNoaWZ0OiBzZWxlY3RDaGFyUmlnaHQgfSxcbiAgICB7IGtleTogXCJDdHJsLXBcIiwgcnVuOiBjdXJzb3JMaW5lVXAsIHNoaWZ0OiBzZWxlY3RMaW5lVXAgfSxcbiAgICB7IGtleTogXCJDdHJsLW5cIiwgcnVuOiBjdXJzb3JMaW5lRG93biwgc2hpZnQ6IHNlbGVjdExpbmVEb3duIH0sXG4gICAgeyBrZXk6IFwiQ3RybC1hXCIsIHJ1bjogY3Vyc29yTGluZVN0YXJ0LCBzaGlmdDogc2VsZWN0TGluZVN0YXJ0IH0sXG4gICAgeyBrZXk6IFwiQ3RybC1lXCIsIHJ1bjogY3Vyc29yTGluZUVuZCwgc2hpZnQ6IHNlbGVjdExpbmVFbmQgfSxcbiAgICB7IGtleTogXCJDdHJsLWRcIiwgcnVuOiBkZWxldGVDaGFyRm9yd2FyZCB9LFxuICAgIHsga2V5OiBcIkN0cmwtaFwiLCBydW46IGRlbGV0ZUNoYXJCYWNrd2FyZCB9LFxuICAgIHsga2V5OiBcIkN0cmwta1wiLCBydW46IGRlbGV0ZVRvTGluZUVuZCB9LFxuICAgIHsga2V5OiBcIkN0cmwtQWx0LWhcIiwgcnVuOiBkZWxldGVHcm91cEJhY2t3YXJkIH0sXG4gICAgeyBrZXk6IFwiQ3RybC1vXCIsIHJ1bjogc3BsaXRMaW5lIH0sXG4gICAgeyBrZXk6IFwiQ3RybC10XCIsIHJ1bjogdHJhbnNwb3NlQ2hhcnMgfSxcbiAgICB7IGtleTogXCJDdHJsLXZcIiwgcnVuOiBjdXJzb3JQYWdlRG93biB9LFxuXTtcbi8qKlxuQW4gYXJyYXkgb2Yga2V5IGJpbmRpbmdzIGNsb3NlbHkgc3RpY2tpbmcgdG8gcGxhdGZvcm0tc3RhbmRhcmQgb3JcbndpZGVseSB1c2VkIGJpbmRpbmdzLiAoVGhpcyBpbmNsdWRlcyB0aGUgYmluZGluZ3MgZnJvbVxuW2BlbWFjc1N0eWxlS2V5bWFwYF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNjb21tYW5kcy5lbWFjc1N0eWxlS2V5bWFwKSwgd2l0aCB0aGVpciBga2V5YFxucHJvcGVydHkgY2hhbmdlZCB0byBgbWFjYC4pXG5cbiAtIEFycm93TGVmdDogW2BjdXJzb3JDaGFyTGVmdGBdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jY29tbWFuZHMuY3Vyc29yQ2hhckxlZnQpIChbYHNlbGVjdENoYXJMZWZ0YF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNjb21tYW5kcy5zZWxlY3RDaGFyTGVmdCkgd2l0aCBTaGlmdClcbiAtIEFycm93UmlnaHQ6IFtgY3Vyc29yQ2hhclJpZ2h0YF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNjb21tYW5kcy5jdXJzb3JDaGFyUmlnaHQpIChbYHNlbGVjdENoYXJSaWdodGBdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jY29tbWFuZHMuc2VsZWN0Q2hhclJpZ2h0KSB3aXRoIFNoaWZ0KVxuIC0gQ3RybC1BcnJvd0xlZnQgKEFsdC1BcnJvd0xlZnQgb24gbWFjT1MpOiBbYGN1cnNvckdyb3VwTGVmdGBdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jY29tbWFuZHMuY3Vyc29yR3JvdXBMZWZ0KSAoW2BzZWxlY3RHcm91cExlZnRgXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI2NvbW1hbmRzLnNlbGVjdEdyb3VwTGVmdCkgd2l0aCBTaGlmdClcbiAtIEN0cmwtQXJyb3dSaWdodCAoQWx0LUFycm93UmlnaHQgb24gbWFjT1MpOiBbYGN1cnNvckdyb3VwUmlnaHRgXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI2NvbW1hbmRzLmN1cnNvckdyb3VwUmlnaHQpIChbYHNlbGVjdEdyb3VwUmlnaHRgXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI2NvbW1hbmRzLnNlbGVjdEdyb3VwUmlnaHQpIHdpdGggU2hpZnQpXG4gLSBDbWQtQXJyb3dMZWZ0IChvbiBtYWNPUyk6IFtgY3Vyc29yTGluZVN0YXJ0YF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNjb21tYW5kcy5jdXJzb3JMaW5lU3RhcnQpIChbYHNlbGVjdExpbmVTdGFydGBdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jY29tbWFuZHMuc2VsZWN0TGluZVN0YXJ0KSB3aXRoIFNoaWZ0KVxuIC0gQ21kLUFycm93UmlnaHQgKG9uIG1hY09TKTogW2BjdXJzb3JMaW5lRW5kYF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNjb21tYW5kcy5jdXJzb3JMaW5lRW5kKSAoW2BzZWxlY3RMaW5lRW5kYF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNjb21tYW5kcy5zZWxlY3RMaW5lRW5kKSB3aXRoIFNoaWZ0KVxuIC0gQXJyb3dVcDogW2BjdXJzb3JMaW5lVXBgXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI2NvbW1hbmRzLmN1cnNvckxpbmVVcCkgKFtgc2VsZWN0TGluZVVwYF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNjb21tYW5kcy5zZWxlY3RMaW5lVXApIHdpdGggU2hpZnQpXG4gLSBBcnJvd0Rvd246IFtgY3Vyc29yTGluZURvd25gXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI2NvbW1hbmRzLmN1cnNvckxpbmVEb3duKSAoW2BzZWxlY3RMaW5lRG93bmBdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jY29tbWFuZHMuc2VsZWN0TGluZURvd24pIHdpdGggU2hpZnQpXG4gLSBDbWQtQXJyb3dVcCAob24gbWFjT1MpOiBbYGN1cnNvckRvY1N0YXJ0YF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNjb21tYW5kcy5jdXJzb3JEb2NTdGFydCkgKFtgc2VsZWN0RG9jU3RhcnRgXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI2NvbW1hbmRzLnNlbGVjdERvY1N0YXJ0KSB3aXRoIFNoaWZ0KVxuIC0gQ21kLUFycm93RG93biAob24gbWFjT1MpOiBbYGN1cnNvckRvY0VuZGBdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jY29tbWFuZHMuY3Vyc29yRG9jRW5kKSAoW2BzZWxlY3REb2NFbmRgXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI2NvbW1hbmRzLnNlbGVjdERvY0VuZCkgd2l0aCBTaGlmdClcbiAtIEN0cmwtQXJyb3dVcCAob24gbWFjT1MpOiBbYGN1cnNvclBhZ2VVcGBdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jY29tbWFuZHMuY3Vyc29yUGFnZVVwKSAoW2BzZWxlY3RQYWdlVXBgXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI2NvbW1hbmRzLnNlbGVjdFBhZ2VVcCkgd2l0aCBTaGlmdClcbiAtIEN0cmwtQXJyb3dEb3duIChvbiBtYWNPUyk6IFtgY3Vyc29yUGFnZURvd25gXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI2NvbW1hbmRzLmN1cnNvclBhZ2VEb3duKSAoW2BzZWxlY3RQYWdlRG93bmBdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jY29tbWFuZHMuc2VsZWN0UGFnZURvd24pIHdpdGggU2hpZnQpXG4gLSBQYWdlVXA6IFtgY3Vyc29yUGFnZVVwYF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNjb21tYW5kcy5jdXJzb3JQYWdlVXApIChbYHNlbGVjdFBhZ2VVcGBdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jY29tbWFuZHMuc2VsZWN0UGFnZVVwKSB3aXRoIFNoaWZ0KVxuIC0gUGFnZURvd246IFtgY3Vyc29yUGFnZURvd25gXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI2NvbW1hbmRzLmN1cnNvclBhZ2VEb3duKSAoW2BzZWxlY3RQYWdlRG93bmBdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jY29tbWFuZHMuc2VsZWN0UGFnZURvd24pIHdpdGggU2hpZnQpXG4gLSBIb21lOiBbYGN1cnNvckxpbmVCb3VuZGFyeUJhY2t3YXJkYF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNjb21tYW5kcy5jdXJzb3JMaW5lQm91bmRhcnlCYWNrd2FyZCkgKFtgc2VsZWN0TGluZUJvdW5kYXJ5QmFja3dhcmRgXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI2NvbW1hbmRzLnNlbGVjdExpbmVCb3VuZGFyeUJhY2t3YXJkKSB3aXRoIFNoaWZ0KVxuIC0gRW5kOiBbYGN1cnNvckxpbmVCb3VuZGFyeUZvcndhcmRgXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI2NvbW1hbmRzLmN1cnNvckxpbmVCb3VuZGFyeUZvcndhcmQpIChbYHNlbGVjdExpbmVCb3VuZGFyeUZvcndhcmRgXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI2NvbW1hbmRzLnNlbGVjdExpbmVCb3VuZGFyeUZvcndhcmQpIHdpdGggU2hpZnQpXG4gLSBDdHJsLUhvbWUgKENtZC1Ib21lIG9uIG1hY09TKTogW2BjdXJzb3JEb2NTdGFydGBdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jY29tbWFuZHMuY3Vyc29yRG9jU3RhcnQpIChbYHNlbGVjdERvY1N0YXJ0YF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNjb21tYW5kcy5zZWxlY3REb2NTdGFydCkgd2l0aCBTaGlmdClcbiAtIEN0cmwtRW5kIChDbWQtSG9tZSBvbiBtYWNPUyk6IFtgY3Vyc29yRG9jRW5kYF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNjb21tYW5kcy5jdXJzb3JEb2NFbmQpIChbYHNlbGVjdERvY0VuZGBdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jY29tbWFuZHMuc2VsZWN0RG9jRW5kKSB3aXRoIFNoaWZ0KVxuIC0gRW50ZXIgYW5kIFNoaWZ0LUVudGVyOiBbYGluc2VydE5ld2xpbmVBbmRJbmRlbnRgXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI2NvbW1hbmRzLmluc2VydE5ld2xpbmVBbmRJbmRlbnQpXG4gLSBDdHJsLWEgKENtZC1hIG9uIG1hY09TKTogW2BzZWxlY3RBbGxgXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI2NvbW1hbmRzLnNlbGVjdEFsbClcbiAtIEJhY2tzcGFjZTogW2BkZWxldGVDaGFyQmFja3dhcmRgXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI2NvbW1hbmRzLmRlbGV0ZUNoYXJCYWNrd2FyZClcbiAtIERlbGV0ZTogW2BkZWxldGVDaGFyRm9yd2FyZGBdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jY29tbWFuZHMuZGVsZXRlQ2hhckZvcndhcmQpXG4gLSBDdHJsLUJhY2tzcGFjZSAoQWx0LUJhY2tzcGFjZSBvbiBtYWNPUyk6IFtgZGVsZXRlR3JvdXBCYWNrd2FyZGBdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jY29tbWFuZHMuZGVsZXRlR3JvdXBCYWNrd2FyZClcbiAtIEN0cmwtRGVsZXRlIChBbHQtRGVsZXRlIG9uIG1hY09TKTogW2BkZWxldGVHcm91cEZvcndhcmRgXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI2NvbW1hbmRzLmRlbGV0ZUdyb3VwRm9yd2FyZClcbiAtIENtZC1CYWNrc3BhY2UgKG1hY09TKTogW2BkZWxldGVMaW5lQm91bmRhcnlCYWNrd2FyZGBdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jY29tbWFuZHMuZGVsZXRlTGluZUJvdW5kYXJ5QmFja3dhcmQpLlxuIC0gQ21kLURlbGV0ZSAobWFjT1MpOiBbYGRlbGV0ZUxpbmVCb3VuZGFyeUZvcndhcmRgXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI2NvbW1hbmRzLmRlbGV0ZUxpbmVCb3VuZGFyeUZvcndhcmQpLlxuKi9cbmNvbnN0IHN0YW5kYXJkS2V5bWFwID0gLypAX19QVVJFX18qL1tcbiAgICB7IGtleTogXCJBcnJvd0xlZnRcIiwgcnVuOiBjdXJzb3JDaGFyTGVmdCwgc2hpZnQ6IHNlbGVjdENoYXJMZWZ0LCBwcmV2ZW50RGVmYXVsdDogdHJ1ZSB9LFxuICAgIHsga2V5OiBcIk1vZC1BcnJvd0xlZnRcIiwgbWFjOiBcIkFsdC1BcnJvd0xlZnRcIiwgcnVuOiBjdXJzb3JHcm91cExlZnQsIHNoaWZ0OiBzZWxlY3RHcm91cExlZnQsIHByZXZlbnREZWZhdWx0OiB0cnVlIH0sXG4gICAgeyBtYWM6IFwiQ21kLUFycm93TGVmdFwiLCBydW46IGN1cnNvckxpbmVCb3VuZGFyeUxlZnQsIHNoaWZ0OiBzZWxlY3RMaW5lQm91bmRhcnlMZWZ0LCBwcmV2ZW50RGVmYXVsdDogdHJ1ZSB9LFxuICAgIHsga2V5OiBcIkFycm93UmlnaHRcIiwgcnVuOiBjdXJzb3JDaGFyUmlnaHQsIHNoaWZ0OiBzZWxlY3RDaGFyUmlnaHQsIHByZXZlbnREZWZhdWx0OiB0cnVlIH0sXG4gICAgeyBrZXk6IFwiTW9kLUFycm93UmlnaHRcIiwgbWFjOiBcIkFsdC1BcnJvd1JpZ2h0XCIsIHJ1bjogY3Vyc29yR3JvdXBSaWdodCwgc2hpZnQ6IHNlbGVjdEdyb3VwUmlnaHQsIHByZXZlbnREZWZhdWx0OiB0cnVlIH0sXG4gICAgeyBtYWM6IFwiQ21kLUFycm93UmlnaHRcIiwgcnVuOiBjdXJzb3JMaW5lQm91bmRhcnlSaWdodCwgc2hpZnQ6IHNlbGVjdExpbmVCb3VuZGFyeVJpZ2h0LCBwcmV2ZW50RGVmYXVsdDogdHJ1ZSB9LFxuICAgIHsga2V5OiBcIkFycm93VXBcIiwgcnVuOiBjdXJzb3JMaW5lVXAsIHNoaWZ0OiBzZWxlY3RMaW5lVXAsIHByZXZlbnREZWZhdWx0OiB0cnVlIH0sXG4gICAgeyBtYWM6IFwiQ21kLUFycm93VXBcIiwgcnVuOiBjdXJzb3JEb2NTdGFydCwgc2hpZnQ6IHNlbGVjdERvY1N0YXJ0IH0sXG4gICAgeyBtYWM6IFwiQ3RybC1BcnJvd1VwXCIsIHJ1bjogY3Vyc29yUGFnZVVwLCBzaGlmdDogc2VsZWN0UGFnZVVwIH0sXG4gICAgeyBrZXk6IFwiQXJyb3dEb3duXCIsIHJ1bjogY3Vyc29yTGluZURvd24sIHNoaWZ0OiBzZWxlY3RMaW5lRG93biwgcHJldmVudERlZmF1bHQ6IHRydWUgfSxcbiAgICB7IG1hYzogXCJDbWQtQXJyb3dEb3duXCIsIHJ1bjogY3Vyc29yRG9jRW5kLCBzaGlmdDogc2VsZWN0RG9jRW5kIH0sXG4gICAgeyBtYWM6IFwiQ3RybC1BcnJvd0Rvd25cIiwgcnVuOiBjdXJzb3JQYWdlRG93biwgc2hpZnQ6IHNlbGVjdFBhZ2VEb3duIH0sXG4gICAgeyBrZXk6IFwiUGFnZVVwXCIsIHJ1bjogY3Vyc29yUGFnZVVwLCBzaGlmdDogc2VsZWN0UGFnZVVwIH0sXG4gICAgeyBrZXk6IFwiUGFnZURvd25cIiwgcnVuOiBjdXJzb3JQYWdlRG93biwgc2hpZnQ6IHNlbGVjdFBhZ2VEb3duIH0sXG4gICAgeyBrZXk6IFwiSG9tZVwiLCBydW46IGN1cnNvckxpbmVCb3VuZGFyeUJhY2t3YXJkLCBzaGlmdDogc2VsZWN0TGluZUJvdW5kYXJ5QmFja3dhcmQsIHByZXZlbnREZWZhdWx0OiB0cnVlIH0sXG4gICAgeyBrZXk6IFwiTW9kLUhvbWVcIiwgcnVuOiBjdXJzb3JEb2NTdGFydCwgc2hpZnQ6IHNlbGVjdERvY1N0YXJ0IH0sXG4gICAgeyBrZXk6IFwiRW5kXCIsIHJ1bjogY3Vyc29yTGluZUJvdW5kYXJ5Rm9yd2FyZCwgc2hpZnQ6IHNlbGVjdExpbmVCb3VuZGFyeUZvcndhcmQsIHByZXZlbnREZWZhdWx0OiB0cnVlIH0sXG4gICAgeyBrZXk6IFwiTW9kLUVuZFwiLCBydW46IGN1cnNvckRvY0VuZCwgc2hpZnQ6IHNlbGVjdERvY0VuZCB9LFxuICAgIHsga2V5OiBcIkVudGVyXCIsIHJ1bjogaW5zZXJ0TmV3bGluZUFuZEluZGVudCwgc2hpZnQ6IGluc2VydE5ld2xpbmVBbmRJbmRlbnQgfSxcbiAgICB7IGtleTogXCJNb2QtYVwiLCBydW46IHNlbGVjdEFsbCB9LFxuICAgIHsga2V5OiBcIkJhY2tzcGFjZVwiLCBydW46IGRlbGV0ZUNoYXJCYWNrd2FyZCwgc2hpZnQ6IGRlbGV0ZUNoYXJCYWNrd2FyZCwgcHJldmVudERlZmF1bHQ6IHRydWUgfSxcbiAgICB7IGtleTogXCJEZWxldGVcIiwgcnVuOiBkZWxldGVDaGFyRm9yd2FyZCwgcHJldmVudERlZmF1bHQ6IHRydWUgfSxcbiAgICB7IGtleTogXCJNb2QtQmFja3NwYWNlXCIsIG1hYzogXCJBbHQtQmFja3NwYWNlXCIsIHJ1bjogZGVsZXRlR3JvdXBCYWNrd2FyZCwgcHJldmVudERlZmF1bHQ6IHRydWUgfSxcbiAgICB7IGtleTogXCJNb2QtRGVsZXRlXCIsIG1hYzogXCJBbHQtRGVsZXRlXCIsIHJ1bjogZGVsZXRlR3JvdXBGb3J3YXJkLCBwcmV2ZW50RGVmYXVsdDogdHJ1ZSB9LFxuICAgIHsgbWFjOiBcIk1vZC1CYWNrc3BhY2VcIiwgcnVuOiBkZWxldGVMaW5lQm91bmRhcnlCYWNrd2FyZCwgcHJldmVudERlZmF1bHQ6IHRydWUgfSxcbiAgICB7IG1hYzogXCJNb2QtRGVsZXRlXCIsIHJ1bjogZGVsZXRlTGluZUJvdW5kYXJ5Rm9yd2FyZCwgcHJldmVudERlZmF1bHQ6IHRydWUgfVxuXS5jb25jYXQoLypAX19QVVJFX18qL2VtYWNzU3R5bGVLZXltYXAubWFwKGIgPT4gKHsgbWFjOiBiLmtleSwgcnVuOiBiLnJ1biwgc2hpZnQ6IGIuc2hpZnQgfSkpKTtcbi8qKlxuVGhlIGRlZmF1bHQga2V5bWFwLiBJbmNsdWRlcyBhbGwgYmluZGluZ3MgZnJvbVxuW2BzdGFuZGFyZEtleW1hcGBdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jY29tbWFuZHMuc3RhbmRhcmRLZXltYXApIHBsdXMgdGhlIGZvbGxvd2luZzpcblxuLSBBbHQtQXJyb3dMZWZ0IChDdHJsLUFycm93TGVmdCBvbiBtYWNPUyk6IFtgY3Vyc29yU3ludGF4TGVmdGBdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jY29tbWFuZHMuY3Vyc29yU3ludGF4TGVmdCkgKFtgc2VsZWN0U3ludGF4TGVmdGBdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jY29tbWFuZHMuc2VsZWN0U3ludGF4TGVmdCkgd2l0aCBTaGlmdClcbi0gQWx0LUFycm93UmlnaHQgKEN0cmwtQXJyb3dSaWdodCBvbiBtYWNPUyk6IFtgY3Vyc29yU3ludGF4UmlnaHRgXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI2NvbW1hbmRzLmN1cnNvclN5bnRheFJpZ2h0KSAoW2BzZWxlY3RTeW50YXhSaWdodGBdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jY29tbWFuZHMuc2VsZWN0U3ludGF4UmlnaHQpIHdpdGggU2hpZnQpXG4tIEFsdC1BcnJvd1VwOiBbYG1vdmVMaW5lVXBgXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI2NvbW1hbmRzLm1vdmVMaW5lVXApXG4tIEFsdC1BcnJvd0Rvd246IFtgbW92ZUxpbmVEb3duYF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNjb21tYW5kcy5tb3ZlTGluZURvd24pXG4tIFNoaWZ0LUFsdC1BcnJvd1VwOiBbYGNvcHlMaW5lVXBgXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI2NvbW1hbmRzLmNvcHlMaW5lVXApXG4tIFNoaWZ0LUFsdC1BcnJvd0Rvd246IFtgY29weUxpbmVEb3duYF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNjb21tYW5kcy5jb3B5TGluZURvd24pXG4tIEN0cmwtQWx0LUFycm93VXAgKENtZC1BbHQtQXJyb3dVcCBvbiBtYWNPUyk6IFtgYWRkQ3Vyc29yQWJvdmVgXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI2NvbW1hbmRzLmFkZEN1cnNvckFib3ZlKS5cbi0gQ3RybC1BbHQtQXJyb3dEb3duIChDbWQtQWx0LUFycm93RG93biBvbiBtYWNPUyk6IFtgYWRkQ3Vyc29yQmVsb3dgXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI2NvbW1hbmRzLmFkZEN1cnNvckJlbG93KS5cbi0gRXNjYXBlOiBbYHNpbXBsaWZ5U2VsZWN0aW9uYF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNjb21tYW5kcy5zaW1wbGlmeVNlbGVjdGlvbilcbi0gQ3RybC1FbnRlciAoQ21kLUVudGVyIG9uIG1hY09TKTogW2BpbnNlcnRCbGFua0xpbmVgXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI2NvbW1hbmRzLmluc2VydEJsYW5rTGluZSlcbi0gQWx0LWwgKEN0cmwtbCBvbiBtYWNPUyk6IFtgc2VsZWN0TGluZWBdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jY29tbWFuZHMuc2VsZWN0TGluZSlcbi0gQ3RybC1pIChDbWQtaSBvbiBtYWNPUyk6IFtgc2VsZWN0UGFyZW50U3ludGF4YF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNjb21tYW5kcy5zZWxlY3RQYXJlbnRTeW50YXgpXG4tIEN0cmwtWyAoQ21kLVsgb24gbWFjT1MpOiBbYGluZGVudExlc3NgXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI2NvbW1hbmRzLmluZGVudExlc3MpXG4tIEN0cmwtXSAoQ21kLV0gb24gbWFjT1MpOiBbYGluZGVudE1vcmVgXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI2NvbW1hbmRzLmluZGVudE1vcmUpXG4tIEN0cmwtQWx0LVxcXFwgKENtZC1BbHQtXFxcXCBvbiBtYWNPUyk6IFtgaW5kZW50U2VsZWN0aW9uYF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNjb21tYW5kcy5pbmRlbnRTZWxlY3Rpb24pXG4tIFNoaWZ0LUN0cmwtayAoU2hpZnQtQ21kLWsgb24gbWFjT1MpOiBbYGRlbGV0ZUxpbmVgXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI2NvbW1hbmRzLmRlbGV0ZUxpbmUpXG4tIFNoaWZ0LUN0cmwtXFxcXCAoU2hpZnQtQ21kLVxcXFwgb24gbWFjT1MpOiBbYGN1cnNvck1hdGNoaW5nQnJhY2tldGBdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jY29tbWFuZHMuY3Vyc29yTWF0Y2hpbmdCcmFja2V0KVxuLSBDdHJsLS8gKENtZC0vIG9uIG1hY09TKTogW2B0b2dnbGVDb21tZW50YF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNjb21tYW5kcy50b2dnbGVDb21tZW50KS5cbi0gU2hpZnQtQWx0LWE6IFtgdG9nZ2xlQmxvY2tDb21tZW50YF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNjb21tYW5kcy50b2dnbGVCbG9ja0NvbW1lbnQpLlxuLSBDdHJsLW0gKEFsdC1TaGlmdC1tIG9uIG1hY09TKTogW2B0b2dnbGVUYWJGb2N1c01vZGVgXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI2NvbW1hbmRzLnRvZ2dsZVRhYkZvY3VzTW9kZSkuXG4qL1xuY29uc3QgZGVmYXVsdEtleW1hcCA9IC8qQF9fUFVSRV9fKi9bXG4gICAgeyBrZXk6IFwiQWx0LUFycm93TGVmdFwiLCBtYWM6IFwiQ3RybC1BcnJvd0xlZnRcIiwgcnVuOiBjdXJzb3JTeW50YXhMZWZ0LCBzaGlmdDogc2VsZWN0U3ludGF4TGVmdCB9LFxuICAgIHsga2V5OiBcIkFsdC1BcnJvd1JpZ2h0XCIsIG1hYzogXCJDdHJsLUFycm93UmlnaHRcIiwgcnVuOiBjdXJzb3JTeW50YXhSaWdodCwgc2hpZnQ6IHNlbGVjdFN5bnRheFJpZ2h0IH0sXG4gICAgeyBrZXk6IFwiQWx0LUFycm93VXBcIiwgcnVuOiBtb3ZlTGluZVVwIH0sXG4gICAgeyBrZXk6IFwiU2hpZnQtQWx0LUFycm93VXBcIiwgcnVuOiBjb3B5TGluZVVwIH0sXG4gICAgeyBrZXk6IFwiQWx0LUFycm93RG93blwiLCBydW46IG1vdmVMaW5lRG93biB9LFxuICAgIHsga2V5OiBcIlNoaWZ0LUFsdC1BcnJvd0Rvd25cIiwgcnVuOiBjb3B5TGluZURvd24gfSxcbiAgICB7IGtleTogXCJNb2QtQWx0LUFycm93VXBcIiwgcnVuOiBhZGRDdXJzb3JBYm92ZSB9LFxuICAgIHsga2V5OiBcIk1vZC1BbHQtQXJyb3dEb3duXCIsIHJ1bjogYWRkQ3Vyc29yQmVsb3cgfSxcbiAgICB7IGtleTogXCJFc2NhcGVcIiwgcnVuOiBzaW1wbGlmeVNlbGVjdGlvbiB9LFxuICAgIHsga2V5OiBcIk1vZC1FbnRlclwiLCBydW46IGluc2VydEJsYW5rTGluZSB9LFxuICAgIHsga2V5OiBcIkFsdC1sXCIsIG1hYzogXCJDdHJsLWxcIiwgcnVuOiBzZWxlY3RMaW5lIH0sXG4gICAgeyBrZXk6IFwiTW9kLWlcIiwgcnVuOiBzZWxlY3RQYXJlbnRTeW50YXgsIHByZXZlbnREZWZhdWx0OiB0cnVlIH0sXG4gICAgeyBrZXk6IFwiTW9kLVtcIiwgcnVuOiBpbmRlbnRMZXNzIH0sXG4gICAgeyBrZXk6IFwiTW9kLV1cIiwgcnVuOiBpbmRlbnRNb3JlIH0sXG4gICAgeyBrZXk6IFwiTW9kLUFsdC1cXFxcXCIsIHJ1bjogaW5kZW50U2VsZWN0aW9uIH0sXG4gICAgeyBrZXk6IFwiU2hpZnQtTW9kLWtcIiwgcnVuOiBkZWxldGVMaW5lIH0sXG4gICAgeyBrZXk6IFwiU2hpZnQtTW9kLVxcXFxcIiwgcnVuOiBjdXJzb3JNYXRjaGluZ0JyYWNrZXQgfSxcbiAgICB7IGtleTogXCJNb2QtL1wiLCBydW46IHRvZ2dsZUNvbW1lbnQgfSxcbiAgICB7IGtleTogXCJBbHQtQVwiLCBydW46IHRvZ2dsZUJsb2NrQ29tbWVudCB9LFxuICAgIHsga2V5OiBcIkN0cmwtbVwiLCBtYWM6IFwiU2hpZnQtQWx0LW1cIiwgcnVuOiB0b2dnbGVUYWJGb2N1c01vZGUgfSxcbl0uY29uY2F0KHN0YW5kYXJkS2V5bWFwKTtcbi8qKlxuQSBiaW5kaW5nIHRoYXQgYmluZHMgVGFiIHRvIFtgaW5kZW50TW9yZWBdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jY29tbWFuZHMuaW5kZW50TW9yZSkgYW5kXG5TaGlmdC1UYWIgdG8gW2BpbmRlbnRMZXNzYF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNjb21tYW5kcy5pbmRlbnRMZXNzKS5cblBsZWFzZSBzZWUgdGhlIFtUYWIgZXhhbXBsZV0oLi4vLi4vZXhhbXBsZXMvdGFiLykgYmVmb3JlIHVzaW5nXG50aGlzLlxuKi9cbmNvbnN0IGluZGVudFdpdGhUYWIgPSB7IGtleTogXCJUYWJcIiwgcnVuOiBpbmRlbnRNb3JlLCBzaGlmdDogaW5kZW50TGVzcyB9O1xuXG5leHBvcnQgeyBhZGRDdXJzb3JBYm92ZSwgYWRkQ3Vyc29yQmVsb3csIGJsb2NrQ29tbWVudCwgYmxvY2tVbmNvbW1lbnQsIGNvcHlMaW5lRG93biwgY29weUxpbmVVcCwgY3Vyc29yQ2hhckJhY2t3YXJkLCBjdXJzb3JDaGFyQmFja3dhcmRMb2dpY2FsLCBjdXJzb3JDaGFyRm9yd2FyZCwgY3Vyc29yQ2hhckZvcndhcmRMb2dpY2FsLCBjdXJzb3JDaGFyTGVmdCwgY3Vyc29yQ2hhclJpZ2h0LCBjdXJzb3JEb2NFbmQsIGN1cnNvckRvY1N0YXJ0LCBjdXJzb3JHcm91cEJhY2t3YXJkLCBjdXJzb3JHcm91cEZvcndhcmQsIGN1cnNvckdyb3VwRm9yd2FyZFdpbiwgY3Vyc29yR3JvdXBMZWZ0LCBjdXJzb3JHcm91cFJpZ2h0LCBjdXJzb3JMaW5lQm91bmRhcnlCYWNrd2FyZCwgY3Vyc29yTGluZUJvdW5kYXJ5Rm9yd2FyZCwgY3Vyc29yTGluZUJvdW5kYXJ5TGVmdCwgY3Vyc29yTGluZUJvdW5kYXJ5UmlnaHQsIGN1cnNvckxpbmVEb3duLCBjdXJzb3JMaW5lRW5kLCBjdXJzb3JMaW5lU3RhcnQsIGN1cnNvckxpbmVVcCwgY3Vyc29yTWF0Y2hpbmdCcmFja2V0LCBjdXJzb3JQYWdlRG93biwgY3Vyc29yUGFnZVVwLCBjdXJzb3JTdWJ3b3JkQmFja3dhcmQsIGN1cnNvclN1YndvcmRGb3J3YXJkLCBjdXJzb3JTeW50YXhMZWZ0LCBjdXJzb3JTeW50YXhSaWdodCwgZGVmYXVsdEtleW1hcCwgZGVsZXRlQ2hhckJhY2t3YXJkLCBkZWxldGVDaGFyQmFja3dhcmRTdHJpY3QsIGRlbGV0ZUNoYXJGb3J3YXJkLCBkZWxldGVHcm91cEJhY2t3YXJkLCBkZWxldGVHcm91cEZvcndhcmQsIGRlbGV0ZUdyb3VwRm9yd2FyZFdpbiwgZGVsZXRlTGluZSwgZGVsZXRlTGluZUJvdW5kYXJ5QmFja3dhcmQsIGRlbGV0ZUxpbmVCb3VuZGFyeUZvcndhcmQsIGRlbGV0ZVRvTGluZUVuZCwgZGVsZXRlVG9MaW5lU3RhcnQsIGRlbGV0ZVRyYWlsaW5nV2hpdGVzcGFjZSwgZW1hY3NTdHlsZUtleW1hcCwgaGlzdG9yeSwgaGlzdG9yeUZpZWxkLCBoaXN0b3J5S2V5bWFwLCBpbmRlbnRMZXNzLCBpbmRlbnRNb3JlLCBpbmRlbnRTZWxlY3Rpb24sIGluZGVudFdpdGhUYWIsIGluc2VydEJsYW5rTGluZSwgaW5zZXJ0TmV3bGluZSwgaW5zZXJ0TmV3bGluZUFuZEluZGVudCwgaW5zZXJ0TmV3bGluZUtlZXBJbmRlbnQsIGluc2VydFRhYiwgaW52ZXJ0ZWRFZmZlY3RzLCBpc29sYXRlSGlzdG9yeSwgbGluZUNvbW1lbnQsIGxpbmVVbmNvbW1lbnQsIG1vdmVMaW5lRG93biwgbW92ZUxpbmVVcCwgcmVkbywgcmVkb0RlcHRoLCByZWRvU2VsZWN0aW9uLCBzZWxlY3RBbGwsIHNlbGVjdENoYXJCYWNrd2FyZCwgc2VsZWN0Q2hhckJhY2t3YXJkTG9naWNhbCwgc2VsZWN0Q2hhckZvcndhcmQsIHNlbGVjdENoYXJGb3J3YXJkTG9naWNhbCwgc2VsZWN0Q2hhckxlZnQsIHNlbGVjdENoYXJSaWdodCwgc2VsZWN0RG9jRW5kLCBzZWxlY3REb2NTdGFydCwgc2VsZWN0R3JvdXBCYWNrd2FyZCwgc2VsZWN0R3JvdXBGb3J3YXJkLCBzZWxlY3RHcm91cEZvcndhcmRXaW4sIHNlbGVjdEdyb3VwTGVmdCwgc2VsZWN0R3JvdXBSaWdodCwgc2VsZWN0TGluZSwgc2VsZWN0TGluZUJvdW5kYXJ5QmFja3dhcmQsIHNlbGVjdExpbmVCb3VuZGFyeUZvcndhcmQsIHNlbGVjdExpbmVCb3VuZGFyeUxlZnQsIHNlbGVjdExpbmVCb3VuZGFyeVJpZ2h0LCBzZWxlY3RMaW5lRG93biwgc2VsZWN0TGluZUVuZCwgc2VsZWN0TGluZVN0YXJ0LCBzZWxlY3RMaW5lVXAsIHNlbGVjdE1hdGNoaW5nQnJhY2tldCwgc2VsZWN0UGFnZURvd24sIHNlbGVjdFBhZ2VVcCwgc2VsZWN0UGFyZW50U3ludGF4LCBzZWxlY3RTdWJ3b3JkQmFja3dhcmQsIHNlbGVjdFN1YndvcmRGb3J3YXJkLCBzZWxlY3RTeW50YXhMZWZ0LCBzZWxlY3RTeW50YXhSaWdodCwgc2ltcGxpZnlTZWxlY3Rpb24sIHNwbGl0TGluZSwgc3RhbmRhcmRLZXltYXAsIHRlbXBvcmFyaWx5U2V0VGFiRm9jdXNNb2RlLCB0b2dnbGVCbG9ja0NvbW1lbnQsIHRvZ2dsZUJsb2NrQ29tbWVudEJ5TGluZSwgdG9nZ2xlQ29tbWVudCwgdG9nZ2xlTGluZUNvbW1lbnQsIHRvZ2dsZVRhYkZvY3VzTW9kZSwgdHJhbnNwb3NlQ2hhcnMsIHVuZG8sIHVuZG9EZXB0aCwgdW5kb1NlbGVjdGlvbiB9O1xuIiwKICAgICJpbXBvcnQgeyBzaG93UGFuZWwsIEVkaXRvclZpZXcsIGdldFBhbmVsLCBEZWNvcmF0aW9uLCBWaWV3UGx1Z2luLCBydW5TY29wZUhhbmRsZXJzIH0gZnJvbSAnQGNvZGVtaXJyb3Ivdmlldyc7XG5pbXBvcnQgeyBjb2RlUG9pbnRBdCwgZnJvbUNvZGVQb2ludCwgY29kZVBvaW50U2l6ZSwgU3RhdGVFZmZlY3QsIFN0YXRlRmllbGQsIEVkaXRvclNlbGVjdGlvbiwgRmFjZXQsIGNvbWJpbmVDb25maWcsIENoYXJDYXRlZ29yeSwgUmFuZ2VTZXRCdWlsZGVyLCBQcmVjLCBFZGl0b3JTdGF0ZSwgZmluZENsdXN0ZXJCcmVhayB9IGZyb20gJ0Bjb2RlbWlycm9yL3N0YXRlJztcbmltcG9ydCBlbHQgZnJvbSAnY3JlbHQnO1xuXG5jb25zdCBiYXNpY05vcm1hbGl6ZSA9IHR5cGVvZiBTdHJpbmcucHJvdG90eXBlLm5vcm1hbGl6ZSA9PSBcImZ1bmN0aW9uXCJcbiAgICA/IHggPT4geC5ub3JtYWxpemUoXCJORktEXCIpIDogeCA9PiB4O1xuLyoqXG5BIHNlYXJjaCBjdXJzb3IgcHJvdmlkZXMgYW4gaXRlcmF0b3Igb3ZlciB0ZXh0IG1hdGNoZXMgaW4gYVxuZG9jdW1lbnQuXG4qL1xuY2xhc3MgU2VhcmNoQ3Vyc29yIHtcbiAgICAvKipcbiAgICBDcmVhdGUgYSB0ZXh0IGN1cnNvci4gVGhlIHF1ZXJ5IGlzIHRoZSBzZWFyY2ggc3RyaW5nLCBgZnJvbWAgdG9cbiAgICBgdG9gIHByb3ZpZGVzIHRoZSByZWdpb24gdG8gc2VhcmNoLlxuICAgIFxuICAgIFdoZW4gYG5vcm1hbGl6ZWAgaXMgZ2l2ZW4sIGl0IHdpbGwgYmUgY2FsbGVkLCBvbiBib3RoIHRoZSBxdWVyeVxuICAgIHN0cmluZyBhbmQgdGhlIGNvbnRlbnQgaXQgaXMgbWF0Y2hlZCBhZ2FpbnN0LCBiZWZvcmUgY29tcGFyaW5nLlxuICAgIFlvdSBjYW4sIGZvciBleGFtcGxlLCBjcmVhdGUgYSBjYXNlLWluc2Vuc2l0aXZlIHNlYXJjaCBieVxuICAgIHBhc3NpbmcgYHMgPT4gcy50b0xvd2VyQ2FzZSgpYC5cbiAgICBcbiAgICBUZXh0IGlzIGFsd2F5cyBub3JtYWxpemVkIHdpdGhcbiAgICBbYC5ub3JtYWxpemUoXCJORktEXCIpYF0oaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvSmF2YVNjcmlwdC9SZWZlcmVuY2UvR2xvYmFsX09iamVjdHMvU3RyaW5nL25vcm1hbGl6ZSlcbiAgICAod2hlbiBzdXBwb3J0ZWQpLlxuICAgICovXG4gICAgY29uc3RydWN0b3IodGV4dCwgcXVlcnksIGZyb20gPSAwLCB0byA9IHRleHQubGVuZ3RoLCBub3JtYWxpemUsIHRlc3QpIHtcbiAgICAgICAgdGhpcy50ZXN0ID0gdGVzdDtcbiAgICAgICAgLyoqXG4gICAgICAgIFRoZSBjdXJyZW50IG1hdGNoIChvbmx5IGhvbGRzIGEgbWVhbmluZ2Z1bCB2YWx1ZSBhZnRlclxuICAgICAgICBbYG5leHRgXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI3NlYXJjaC5TZWFyY2hDdXJzb3IubmV4dCkgaGFzIGJlZW4gY2FsbGVkIGFuZCB3aGVuXG4gICAgICAgIGBkb25lYCBpcyBmYWxzZSkuXG4gICAgICAgICovXG4gICAgICAgIHRoaXMudmFsdWUgPSB7IGZyb206IDAsIHRvOiAwIH07XG4gICAgICAgIC8qKlxuICAgICAgICBXaGV0aGVyIHRoZSBlbmQgb2YgdGhlIGl0ZXJhdGVkIHJlZ2lvbiBoYXMgYmVlbiByZWFjaGVkLlxuICAgICAgICAqL1xuICAgICAgICB0aGlzLmRvbmUgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5tYXRjaGVzID0gW107XG4gICAgICAgIHRoaXMuYnVmZmVyID0gXCJcIjtcbiAgICAgICAgdGhpcy5idWZmZXJQb3MgPSAwO1xuICAgICAgICB0aGlzLml0ZXIgPSB0ZXh0Lml0ZXJSYW5nZShmcm9tLCB0byk7XG4gICAgICAgIHRoaXMuYnVmZmVyU3RhcnQgPSBmcm9tO1xuICAgICAgICB0aGlzLm5vcm1hbGl6ZSA9IG5vcm1hbGl6ZSA/IHggPT4gbm9ybWFsaXplKGJhc2ljTm9ybWFsaXplKHgpKSA6IGJhc2ljTm9ybWFsaXplO1xuICAgICAgICB0aGlzLnF1ZXJ5ID0gdGhpcy5ub3JtYWxpemUocXVlcnkpO1xuICAgIH1cbiAgICBwZWVrKCkge1xuICAgICAgICBpZiAodGhpcy5idWZmZXJQb3MgPT0gdGhpcy5idWZmZXIubGVuZ3RoKSB7XG4gICAgICAgICAgICB0aGlzLmJ1ZmZlclN0YXJ0ICs9IHRoaXMuYnVmZmVyLmxlbmd0aDtcbiAgICAgICAgICAgIHRoaXMuaXRlci5uZXh0KCk7XG4gICAgICAgICAgICBpZiAodGhpcy5pdGVyLmRvbmUpXG4gICAgICAgICAgICAgICAgcmV0dXJuIC0xO1xuICAgICAgICAgICAgdGhpcy5idWZmZXJQb3MgPSAwO1xuICAgICAgICAgICAgdGhpcy5idWZmZXIgPSB0aGlzLml0ZXIudmFsdWU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGNvZGVQb2ludEF0KHRoaXMuYnVmZmVyLCB0aGlzLmJ1ZmZlclBvcyk7XG4gICAgfVxuICAgIC8qKlxuICAgIExvb2sgZm9yIHRoZSBuZXh0IG1hdGNoLiBVcGRhdGVzIHRoZSBpdGVyYXRvcidzXG4gICAgW2B2YWx1ZWBdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jc2VhcmNoLlNlYXJjaEN1cnNvci52YWx1ZSkgYW5kXG4gICAgW2Bkb25lYF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNzZWFyY2guU2VhcmNoQ3Vyc29yLmRvbmUpIHByb3BlcnRpZXMuIFNob3VsZCBiZSBjYWxsZWRcbiAgICBhdCBsZWFzdCBvbmNlIGJlZm9yZSB1c2luZyB0aGUgY3Vyc29yLlxuICAgICovXG4gICAgbmV4dCgpIHtcbiAgICAgICAgd2hpbGUgKHRoaXMubWF0Y2hlcy5sZW5ndGgpXG4gICAgICAgICAgICB0aGlzLm1hdGNoZXMucG9wKCk7XG4gICAgICAgIHJldHVybiB0aGlzLm5leHRPdmVybGFwcGluZygpO1xuICAgIH1cbiAgICAvKipcbiAgICBUaGUgYG5leHRgIG1ldGhvZCB3aWxsIGlnbm9yZSBtYXRjaGVzIHRoYXQgcGFydGlhbGx5IG92ZXJsYXAgYVxuICAgIHByZXZpb3VzIG1hdGNoLiBUaGlzIG1ldGhvZCBiZWhhdmVzIGxpa2UgYG5leHRgLCBidXQgaW5jbHVkZXNcbiAgICBzdWNoIG1hdGNoZXMuXG4gICAgKi9cbiAgICBuZXh0T3ZlcmxhcHBpbmcoKSB7XG4gICAgICAgIGZvciAoOzspIHtcbiAgICAgICAgICAgIGxldCBuZXh0ID0gdGhpcy5wZWVrKCk7XG4gICAgICAgICAgICBpZiAobmV4dCA8IDApIHtcbiAgICAgICAgICAgICAgICB0aGlzLmRvbmUgPSB0cnVlO1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbGV0IHN0ciA9IGZyb21Db2RlUG9pbnQobmV4dCksIHN0YXJ0ID0gdGhpcy5idWZmZXJTdGFydCArIHRoaXMuYnVmZmVyUG9zO1xuICAgICAgICAgICAgdGhpcy5idWZmZXJQb3MgKz0gY29kZVBvaW50U2l6ZShuZXh0KTtcbiAgICAgICAgICAgIGxldCBub3JtID0gdGhpcy5ub3JtYWxpemUoc3RyKTtcbiAgICAgICAgICAgIGlmIChub3JtLmxlbmd0aClcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMCwgcG9zID0gc3RhcnQ7OyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGNvZGUgPSBub3JtLmNoYXJDb2RlQXQoaSk7XG4gICAgICAgICAgICAgICAgICAgIGxldCBtYXRjaCA9IHRoaXMubWF0Y2goY29kZSwgcG9zLCB0aGlzLmJ1ZmZlclBvcyArIHRoaXMuYnVmZmVyU3RhcnQpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoaSA9PSBub3JtLmxlbmd0aCAtIDEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtYXRjaCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudmFsdWUgPSBtYXRjaDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChwb3MgPT0gc3RhcnQgJiYgaSA8IHN0ci5sZW5ndGggJiYgc3RyLmNoYXJDb2RlQXQoaSkgPT0gY29kZSlcbiAgICAgICAgICAgICAgICAgICAgICAgIHBvcysrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBtYXRjaChjb2RlLCBwb3MsIGVuZCkge1xuICAgICAgICBsZXQgbWF0Y2ggPSBudWxsO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMubWF0Y2hlcy5sZW5ndGg7IGkgKz0gMikge1xuICAgICAgICAgICAgbGV0IGluZGV4ID0gdGhpcy5tYXRjaGVzW2ldLCBrZWVwID0gZmFsc2U7XG4gICAgICAgICAgICBpZiAodGhpcy5xdWVyeS5jaGFyQ29kZUF0KGluZGV4KSA9PSBjb2RlKSB7XG4gICAgICAgICAgICAgICAgaWYgKGluZGV4ID09IHRoaXMucXVlcnkubGVuZ3RoIC0gMSkge1xuICAgICAgICAgICAgICAgICAgICBtYXRjaCA9IHsgZnJvbTogdGhpcy5tYXRjaGVzW2kgKyAxXSwgdG86IGVuZCB9O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5tYXRjaGVzW2ldKys7XG4gICAgICAgICAgICAgICAgICAgIGtlZXAgPSB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICgha2VlcCkge1xuICAgICAgICAgICAgICAgIHRoaXMubWF0Y2hlcy5zcGxpY2UoaSwgMik7XG4gICAgICAgICAgICAgICAgaSAtPSAyO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLnF1ZXJ5LmNoYXJDb2RlQXQoMCkgPT0gY29kZSkge1xuICAgICAgICAgICAgaWYgKHRoaXMucXVlcnkubGVuZ3RoID09IDEpXG4gICAgICAgICAgICAgICAgbWF0Y2ggPSB7IGZyb206IHBvcywgdG86IGVuZCB9O1xuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgIHRoaXMubWF0Y2hlcy5wdXNoKDEsIHBvcyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1hdGNoICYmIHRoaXMudGVzdCAmJiAhdGhpcy50ZXN0KG1hdGNoLmZyb20sIG1hdGNoLnRvLCB0aGlzLmJ1ZmZlciwgdGhpcy5idWZmZXJTdGFydCkpXG4gICAgICAgICAgICBtYXRjaCA9IG51bGw7XG4gICAgICAgIHJldHVybiBtYXRjaDtcbiAgICB9XG59XG5pZiAodHlwZW9mIFN5bWJvbCAhPSBcInVuZGVmaW5lZFwiKVxuICAgIFNlYXJjaEN1cnNvci5wcm90b3R5cGVbU3ltYm9sLml0ZXJhdG9yXSA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXM7IH07XG5cbmNvbnN0IGVtcHR5ID0geyBmcm9tOiAtMSwgdG86IC0xLCBtYXRjaDogLypAX19QVVJFX18qLy8uKi8uZXhlYyhcIlwiKSB9O1xuY29uc3QgYmFzZUZsYWdzID0gXCJnbVwiICsgKC94Ly51bmljb2RlID09IG51bGwgPyBcIlwiIDogXCJ1XCIpO1xuLyoqXG5UaGlzIGNsYXNzIGlzIHNpbWlsYXIgdG8gW2BTZWFyY2hDdXJzb3JgXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI3NlYXJjaC5TZWFyY2hDdXJzb3IpXG5idXQgc2VhcmNoZXMgZm9yIGEgcmVndWxhciBleHByZXNzaW9uIHBhdHRlcm4gaW5zdGVhZCBvZiBhIHBsYWluXG5zdHJpbmcuXG4qL1xuY2xhc3MgUmVnRXhwQ3Vyc29yIHtcbiAgICAvKipcbiAgICBDcmVhdGUgYSBjdXJzb3IgdGhhdCB3aWxsIHNlYXJjaCB0aGUgZ2l2ZW4gcmFuZ2UgaW4gdGhlIGdpdmVuXG4gICAgZG9jdW1lbnQuIGBxdWVyeWAgc2hvdWxkIGJlIHRoZSByYXcgcGF0dGVybiAoYXMgeW91J2QgcGFzcyBpdCB0b1xuICAgIGBuZXcgUmVnRXhwYCkuXG4gICAgKi9cbiAgICBjb25zdHJ1Y3Rvcih0ZXh0LCBxdWVyeSwgb3B0aW9ucywgZnJvbSA9IDAsIHRvID0gdGV4dC5sZW5ndGgpIHtcbiAgICAgICAgdGhpcy50ZXh0ID0gdGV4dDtcbiAgICAgICAgdGhpcy50byA9IHRvO1xuICAgICAgICB0aGlzLmN1ckxpbmUgPSBcIlwiO1xuICAgICAgICAvKipcbiAgICAgICAgU2V0IHRvIGB0cnVlYCB3aGVuIHRoZSBjdXJzb3IgaGFzIHJlYWNoZWQgdGhlIGVuZCBvZiB0aGUgc2VhcmNoXG4gICAgICAgIHJhbmdlLlxuICAgICAgICAqL1xuICAgICAgICB0aGlzLmRvbmUgPSBmYWxzZTtcbiAgICAgICAgLyoqXG4gICAgICAgIFdpbGwgY29udGFpbiBhbiBvYmplY3Qgd2l0aCB0aGUgZXh0ZW50IG9mIHRoZSBtYXRjaCBhbmQgdGhlXG4gICAgICAgIG1hdGNoIG9iamVjdCB3aGVuIFtgbmV4dGBdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jc2VhcmNoLlJlZ0V4cEN1cnNvci5uZXh0KVxuICAgICAgICBzdWNlc3NmdWxseSBmaW5kcyBhIG1hdGNoLlxuICAgICAgICAqL1xuICAgICAgICB0aGlzLnZhbHVlID0gZW1wdHk7XG4gICAgICAgIGlmICgvXFxcXFtzV0Rucl18XFxufFxccnxcXFtcXF4vLnRlc3QocXVlcnkpKVxuICAgICAgICAgICAgcmV0dXJuIG5ldyBNdWx0aWxpbmVSZWdFeHBDdXJzb3IodGV4dCwgcXVlcnksIG9wdGlvbnMsIGZyb20sIHRvKTtcbiAgICAgICAgdGhpcy5yZSA9IG5ldyBSZWdFeHAocXVlcnksIGJhc2VGbGFncyArICgob3B0aW9ucyA9PT0gbnVsbCB8fCBvcHRpb25zID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvcHRpb25zLmlnbm9yZUNhc2UpID8gXCJpXCIgOiBcIlwiKSk7XG4gICAgICAgIHRoaXMudGVzdCA9IG9wdGlvbnMgPT09IG51bGwgfHwgb3B0aW9ucyA9PT0gdm9pZCAwID8gdm9pZCAwIDogb3B0aW9ucy50ZXN0O1xuICAgICAgICB0aGlzLml0ZXIgPSB0ZXh0Lml0ZXIoKTtcbiAgICAgICAgbGV0IHN0YXJ0TGluZSA9IHRleHQubGluZUF0KGZyb20pO1xuICAgICAgICB0aGlzLmN1ckxpbmVTdGFydCA9IHN0YXJ0TGluZS5mcm9tO1xuICAgICAgICB0aGlzLm1hdGNoUG9zID0gdG9DaGFyRW5kKHRleHQsIGZyb20pO1xuICAgICAgICB0aGlzLmdldExpbmUodGhpcy5jdXJMaW5lU3RhcnQpO1xuICAgIH1cbiAgICBnZXRMaW5lKHNraXApIHtcbiAgICAgICAgdGhpcy5pdGVyLm5leHQoc2tpcCk7XG4gICAgICAgIGlmICh0aGlzLml0ZXIubGluZUJyZWFrKSB7XG4gICAgICAgICAgICB0aGlzLmN1ckxpbmUgPSBcIlwiO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5jdXJMaW5lID0gdGhpcy5pdGVyLnZhbHVlO1xuICAgICAgICAgICAgaWYgKHRoaXMuY3VyTGluZVN0YXJ0ICsgdGhpcy5jdXJMaW5lLmxlbmd0aCA+IHRoaXMudG8pXG4gICAgICAgICAgICAgICAgdGhpcy5jdXJMaW5lID0gdGhpcy5jdXJMaW5lLnNsaWNlKDAsIHRoaXMudG8gLSB0aGlzLmN1ckxpbmVTdGFydCk7XG4gICAgICAgICAgICB0aGlzLml0ZXIubmV4dCgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIG5leHRMaW5lKCkge1xuICAgICAgICB0aGlzLmN1ckxpbmVTdGFydCA9IHRoaXMuY3VyTGluZVN0YXJ0ICsgdGhpcy5jdXJMaW5lLmxlbmd0aCArIDE7XG4gICAgICAgIGlmICh0aGlzLmN1ckxpbmVTdGFydCA+IHRoaXMudG8pXG4gICAgICAgICAgICB0aGlzLmN1ckxpbmUgPSBcIlwiO1xuICAgICAgICBlbHNlXG4gICAgICAgICAgICB0aGlzLmdldExpbmUoMCk7XG4gICAgfVxuICAgIC8qKlxuICAgIE1vdmUgdG8gdGhlIG5leHQgbWF0Y2gsIGlmIHRoZXJlIGlzIG9uZS5cbiAgICAqL1xuICAgIG5leHQoKSB7XG4gICAgICAgIGZvciAobGV0IG9mZiA9IHRoaXMubWF0Y2hQb3MgLSB0aGlzLmN1ckxpbmVTdGFydDs7KSB7XG4gICAgICAgICAgICB0aGlzLnJlLmxhc3RJbmRleCA9IG9mZjtcbiAgICAgICAgICAgIGxldCBtYXRjaCA9IHRoaXMubWF0Y2hQb3MgPD0gdGhpcy50byAmJiB0aGlzLnJlLmV4ZWModGhpcy5jdXJMaW5lKTtcbiAgICAgICAgICAgIGlmIChtYXRjaCkge1xuICAgICAgICAgICAgICAgIGxldCBmcm9tID0gdGhpcy5jdXJMaW5lU3RhcnQgKyBtYXRjaC5pbmRleCwgdG8gPSBmcm9tICsgbWF0Y2hbMF0ubGVuZ3RoO1xuICAgICAgICAgICAgICAgIHRoaXMubWF0Y2hQb3MgPSB0b0NoYXJFbmQodGhpcy50ZXh0LCB0byArIChmcm9tID09IHRvID8gMSA6IDApKTtcbiAgICAgICAgICAgICAgICBpZiAoZnJvbSA9PSB0aGlzLmN1ckxpbmVTdGFydCArIHRoaXMuY3VyTGluZS5sZW5ndGgpXG4gICAgICAgICAgICAgICAgICAgIHRoaXMubmV4dExpbmUoKTtcbiAgICAgICAgICAgICAgICBpZiAoKGZyb20gPCB0byB8fCBmcm9tID4gdGhpcy52YWx1ZS50bykgJiYgKCF0aGlzLnRlc3QgfHwgdGhpcy50ZXN0KGZyb20sIHRvLCBtYXRjaCkpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudmFsdWUgPSB7IGZyb20sIHRvLCBtYXRjaCB9O1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgb2ZmID0gdGhpcy5tYXRjaFBvcyAtIHRoaXMuY3VyTGluZVN0YXJ0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAodGhpcy5jdXJMaW5lU3RhcnQgKyB0aGlzLmN1ckxpbmUubGVuZ3RoIDwgdGhpcy50bykge1xuICAgICAgICAgICAgICAgIHRoaXMubmV4dExpbmUoKTtcbiAgICAgICAgICAgICAgICBvZmYgPSAwO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5kb25lID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbn1cbmNvbnN0IGZsYXR0ZW5lZCA9IC8qQF9fUFVSRV9fKi9uZXcgV2Vha01hcCgpO1xuLy8gUmV1c2FibGUgKHBhcnRpYWxseSkgZmxhdHRlbmVkIGRvY3VtZW50IHN0cmluZ3NcbmNsYXNzIEZsYXR0ZW5lZERvYyB7XG4gICAgY29uc3RydWN0b3IoZnJvbSwgdGV4dCkge1xuICAgICAgICB0aGlzLmZyb20gPSBmcm9tO1xuICAgICAgICB0aGlzLnRleHQgPSB0ZXh0O1xuICAgIH1cbiAgICBnZXQgdG8oKSB7IHJldHVybiB0aGlzLmZyb20gKyB0aGlzLnRleHQubGVuZ3RoOyB9XG4gICAgc3RhdGljIGdldChkb2MsIGZyb20sIHRvKSB7XG4gICAgICAgIGxldCBjYWNoZWQgPSBmbGF0dGVuZWQuZ2V0KGRvYyk7XG4gICAgICAgIGlmICghY2FjaGVkIHx8IGNhY2hlZC5mcm9tID49IHRvIHx8IGNhY2hlZC50byA8PSBmcm9tKSB7XG4gICAgICAgICAgICBsZXQgZmxhdCA9IG5ldyBGbGF0dGVuZWREb2MoZnJvbSwgZG9jLnNsaWNlU3RyaW5nKGZyb20sIHRvKSk7XG4gICAgICAgICAgICBmbGF0dGVuZWQuc2V0KGRvYywgZmxhdCk7XG4gICAgICAgICAgICByZXR1cm4gZmxhdDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoY2FjaGVkLmZyb20gPT0gZnJvbSAmJiBjYWNoZWQudG8gPT0gdG8pXG4gICAgICAgICAgICByZXR1cm4gY2FjaGVkO1xuICAgICAgICBsZXQgeyB0ZXh0LCBmcm9tOiBjYWNoZWRGcm9tIH0gPSBjYWNoZWQ7XG4gICAgICAgIGlmIChjYWNoZWRGcm9tID4gZnJvbSkge1xuICAgICAgICAgICAgdGV4dCA9IGRvYy5zbGljZVN0cmluZyhmcm9tLCBjYWNoZWRGcm9tKSArIHRleHQ7XG4gICAgICAgICAgICBjYWNoZWRGcm9tID0gZnJvbTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoY2FjaGVkLnRvIDwgdG8pXG4gICAgICAgICAgICB0ZXh0ICs9IGRvYy5zbGljZVN0cmluZyhjYWNoZWQudG8sIHRvKTtcbiAgICAgICAgZmxhdHRlbmVkLnNldChkb2MsIG5ldyBGbGF0dGVuZWREb2MoY2FjaGVkRnJvbSwgdGV4dCkpO1xuICAgICAgICByZXR1cm4gbmV3IEZsYXR0ZW5lZERvYyhmcm9tLCB0ZXh0LnNsaWNlKGZyb20gLSBjYWNoZWRGcm9tLCB0byAtIGNhY2hlZEZyb20pKTtcbiAgICB9XG59XG5jbGFzcyBNdWx0aWxpbmVSZWdFeHBDdXJzb3Ige1xuICAgIGNvbnN0cnVjdG9yKHRleHQsIHF1ZXJ5LCBvcHRpb25zLCBmcm9tLCB0bykge1xuICAgICAgICB0aGlzLnRleHQgPSB0ZXh0O1xuICAgICAgICB0aGlzLnRvID0gdG87XG4gICAgICAgIHRoaXMuZG9uZSA9IGZhbHNlO1xuICAgICAgICB0aGlzLnZhbHVlID0gZW1wdHk7XG4gICAgICAgIHRoaXMubWF0Y2hQb3MgPSB0b0NoYXJFbmQodGV4dCwgZnJvbSk7XG4gICAgICAgIHRoaXMucmUgPSBuZXcgUmVnRXhwKHF1ZXJ5LCBiYXNlRmxhZ3MgKyAoKG9wdGlvbnMgPT09IG51bGwgfHwgb3B0aW9ucyA9PT0gdm9pZCAwID8gdm9pZCAwIDogb3B0aW9ucy5pZ25vcmVDYXNlKSA/IFwiaVwiIDogXCJcIikpO1xuICAgICAgICB0aGlzLnRlc3QgPSBvcHRpb25zID09PSBudWxsIHx8IG9wdGlvbnMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9wdGlvbnMudGVzdDtcbiAgICAgICAgdGhpcy5mbGF0ID0gRmxhdHRlbmVkRG9jLmdldCh0ZXh0LCBmcm9tLCB0aGlzLmNodW5rRW5kKGZyb20gKyA1MDAwIC8qIENodW5rLkJhc2UgKi8pKTtcbiAgICB9XG4gICAgY2h1bmtFbmQocG9zKSB7XG4gICAgICAgIHJldHVybiBwb3MgPj0gdGhpcy50byA/IHRoaXMudG8gOiB0aGlzLnRleHQubGluZUF0KHBvcykudG87XG4gICAgfVxuICAgIG5leHQoKSB7XG4gICAgICAgIGZvciAoOzspIHtcbiAgICAgICAgICAgIGxldCBvZmYgPSB0aGlzLnJlLmxhc3RJbmRleCA9IHRoaXMubWF0Y2hQb3MgLSB0aGlzLmZsYXQuZnJvbTtcbiAgICAgICAgICAgIGxldCBtYXRjaCA9IHRoaXMucmUuZXhlYyh0aGlzLmZsYXQudGV4dCk7XG4gICAgICAgICAgICAvLyBTa2lwIGVtcHR5IG1hdGNoZXMgZGlyZWN0bHkgYWZ0ZXIgdGhlIGxhc3QgbWF0Y2hcbiAgICAgICAgICAgIGlmIChtYXRjaCAmJiAhbWF0Y2hbMF0gJiYgbWF0Y2guaW5kZXggPT0gb2ZmKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5yZS5sYXN0SW5kZXggPSBvZmYgKyAxO1xuICAgICAgICAgICAgICAgIG1hdGNoID0gdGhpcy5yZS5leGVjKHRoaXMuZmxhdC50ZXh0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChtYXRjaCkge1xuICAgICAgICAgICAgICAgIGxldCBmcm9tID0gdGhpcy5mbGF0LmZyb20gKyBtYXRjaC5pbmRleCwgdG8gPSBmcm9tICsgbWF0Y2hbMF0ubGVuZ3RoO1xuICAgICAgICAgICAgICAgIC8vIElmIGEgbWF0Y2ggZ29lcyBhbG1vc3QgdG8gdGhlIGVuZCBvZiBhIG5vbmNvbXBsZXRlIGNodW5rLCB0cnlcbiAgICAgICAgICAgICAgICAvLyBhZ2Fpbiwgc2luY2UgaXQnbGwgbGlrZWx5IGJlIGFibGUgdG8gbWF0Y2ggbW9yZVxuICAgICAgICAgICAgICAgIGlmICgodGhpcy5mbGF0LnRvID49IHRoaXMudG8gfHwgbWF0Y2guaW5kZXggKyBtYXRjaFswXS5sZW5ndGggPD0gdGhpcy5mbGF0LnRleHQubGVuZ3RoIC0gMTApICYmXG4gICAgICAgICAgICAgICAgICAgICghdGhpcy50ZXN0IHx8IHRoaXMudGVzdChmcm9tLCB0bywgbWF0Y2gpKSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnZhbHVlID0geyBmcm9tLCB0bywgbWF0Y2ggfTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5tYXRjaFBvcyA9IHRvQ2hhckVuZCh0aGlzLnRleHQsIHRvICsgKGZyb20gPT0gdG8gPyAxIDogMCkpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5mbGF0LnRvID09IHRoaXMudG8pIHtcbiAgICAgICAgICAgICAgICB0aGlzLmRvbmUgPSB0cnVlO1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gR3JvdyB0aGUgZmxhdHRlbmVkIGRvY1xuICAgICAgICAgICAgdGhpcy5mbGF0ID0gRmxhdHRlbmVkRG9jLmdldCh0aGlzLnRleHQsIHRoaXMuZmxhdC5mcm9tLCB0aGlzLmNodW5rRW5kKHRoaXMuZmxhdC5mcm9tICsgdGhpcy5mbGF0LnRleHQubGVuZ3RoICogMikpO1xuICAgICAgICB9XG4gICAgfVxufVxuaWYgKHR5cGVvZiBTeW1ib2wgIT0gXCJ1bmRlZmluZWRcIikge1xuICAgIFJlZ0V4cEN1cnNvci5wcm90b3R5cGVbU3ltYm9sLml0ZXJhdG9yXSA9IE11bHRpbGluZVJlZ0V4cEN1cnNvci5wcm90b3R5cGVbU3ltYm9sLml0ZXJhdG9yXSA9XG4gICAgICAgIGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXM7IH07XG59XG5mdW5jdGlvbiB2YWxpZFJlZ0V4cChzb3VyY2UpIHtcbiAgICB0cnkge1xuICAgICAgICBuZXcgUmVnRXhwKHNvdXJjZSwgYmFzZUZsYWdzKTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIGNhdGNoIChfYSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxufVxuZnVuY3Rpb24gdG9DaGFyRW5kKHRleHQsIHBvcykge1xuICAgIGlmIChwb3MgPj0gdGV4dC5sZW5ndGgpXG4gICAgICAgIHJldHVybiBwb3M7XG4gICAgbGV0IGxpbmUgPSB0ZXh0LmxpbmVBdChwb3MpLCBuZXh0O1xuICAgIHdoaWxlIChwb3MgPCBsaW5lLnRvICYmIChuZXh0ID0gbGluZS50ZXh0LmNoYXJDb2RlQXQocG9zIC0gbGluZS5mcm9tKSkgPj0gMHhEQzAwICYmIG5leHQgPCAweEUwMDApXG4gICAgICAgIHBvcysrO1xuICAgIHJldHVybiBwb3M7XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZUxpbmVEaWFsb2codmlldykge1xuICAgIGxldCBsaW5lID0gU3RyaW5nKHZpZXcuc3RhdGUuZG9jLmxpbmVBdCh2aWV3LnN0YXRlLnNlbGVjdGlvbi5tYWluLmhlYWQpLm51bWJlcik7XG4gICAgbGV0IGlucHV0ID0gZWx0KFwiaW5wdXRcIiwgeyBjbGFzczogXCJjbS10ZXh0ZmllbGRcIiwgbmFtZTogXCJsaW5lXCIsIHZhbHVlOiBsaW5lIH0pO1xuICAgIGxldCBkb20gPSBlbHQoXCJmb3JtXCIsIHtcbiAgICAgICAgY2xhc3M6IFwiY20tZ290b0xpbmVcIixcbiAgICAgICAgb25rZXlkb3duOiAoZXZlbnQpID0+IHtcbiAgICAgICAgICAgIGlmIChldmVudC5rZXlDb2RlID09IDI3KSB7IC8vIEVzY2FwZVxuICAgICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgdmlldy5kaXNwYXRjaCh7IGVmZmVjdHM6IGRpYWxvZ0VmZmVjdC5vZihmYWxzZSkgfSk7XG4gICAgICAgICAgICAgICAgdmlldy5mb2N1cygpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoZXZlbnQua2V5Q29kZSA9PSAxMykgeyAvLyBFbnRlclxuICAgICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgZ28oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgb25zdWJtaXQ6IChldmVudCkgPT4ge1xuICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIGdvKCk7XG4gICAgICAgIH1cbiAgICB9LCBlbHQoXCJsYWJlbFwiLCB2aWV3LnN0YXRlLnBocmFzZShcIkdvIHRvIGxpbmVcIiksIFwiOiBcIiwgaW5wdXQpLCBcIiBcIiwgZWx0KFwiYnV0dG9uXCIsIHsgY2xhc3M6IFwiY20tYnV0dG9uXCIsIHR5cGU6IFwic3VibWl0XCIgfSwgdmlldy5zdGF0ZS5waHJhc2UoXCJnb1wiKSksIGVsdChcImJ1dHRvblwiLCB7XG4gICAgICAgIG5hbWU6IFwiY2xvc2VcIixcbiAgICAgICAgb25jbGljazogKCkgPT4ge1xuICAgICAgICAgICAgdmlldy5kaXNwYXRjaCh7IGVmZmVjdHM6IGRpYWxvZ0VmZmVjdC5vZihmYWxzZSkgfSk7XG4gICAgICAgICAgICB2aWV3LmZvY3VzKCk7XG4gICAgICAgIH0sXG4gICAgICAgIFwiYXJpYS1sYWJlbFwiOiB2aWV3LnN0YXRlLnBocmFzZShcImNsb3NlXCIpLFxuICAgICAgICB0eXBlOiBcImJ1dHRvblwiXG4gICAgfSwgW1wiw5dcIl0pKTtcbiAgICBmdW5jdGlvbiBnbygpIHtcbiAgICAgICAgbGV0IG1hdGNoID0gL14oWystXSk/KFxcZCspPyg6XFxkKyk/KCUpPyQvLmV4ZWMoaW5wdXQudmFsdWUpO1xuICAgICAgICBpZiAoIW1hdGNoKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICBsZXQgeyBzdGF0ZSB9ID0gdmlldywgc3RhcnRMaW5lID0gc3RhdGUuZG9jLmxpbmVBdChzdGF0ZS5zZWxlY3Rpb24ubWFpbi5oZWFkKTtcbiAgICAgICAgbGV0IFssIHNpZ24sIGxuLCBjbCwgcGVyY2VudF0gPSBtYXRjaDtcbiAgICAgICAgbGV0IGNvbCA9IGNsID8gK2NsLnNsaWNlKDEpIDogMDtcbiAgICAgICAgbGV0IGxpbmUgPSBsbiA/ICtsbiA6IHN0YXJ0TGluZS5udW1iZXI7XG4gICAgICAgIGlmIChsbiAmJiBwZXJjZW50KSB7XG4gICAgICAgICAgICBsZXQgcGMgPSBsaW5lIC8gMTAwO1xuICAgICAgICAgICAgaWYgKHNpZ24pXG4gICAgICAgICAgICAgICAgcGMgPSBwYyAqIChzaWduID09IFwiLVwiID8gLTEgOiAxKSArIChzdGFydExpbmUubnVtYmVyIC8gc3RhdGUuZG9jLmxpbmVzKTtcbiAgICAgICAgICAgIGxpbmUgPSBNYXRoLnJvdW5kKHN0YXRlLmRvYy5saW5lcyAqIHBjKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChsbiAmJiBzaWduKSB7XG4gICAgICAgICAgICBsaW5lID0gbGluZSAqIChzaWduID09IFwiLVwiID8gLTEgOiAxKSArIHN0YXJ0TGluZS5udW1iZXI7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IGRvY0xpbmUgPSBzdGF0ZS5kb2MubGluZShNYXRoLm1heCgxLCBNYXRoLm1pbihzdGF0ZS5kb2MubGluZXMsIGxpbmUpKSk7XG4gICAgICAgIGxldCBzZWxlY3Rpb24gPSBFZGl0b3JTZWxlY3Rpb24uY3Vyc29yKGRvY0xpbmUuZnJvbSArIE1hdGgubWF4KDAsIE1hdGgubWluKGNvbCwgZG9jTGluZS5sZW5ndGgpKSk7XG4gICAgICAgIHZpZXcuZGlzcGF0Y2goe1xuICAgICAgICAgICAgZWZmZWN0czogW2RpYWxvZ0VmZmVjdC5vZihmYWxzZSksIEVkaXRvclZpZXcuc2Nyb2xsSW50b1ZpZXcoc2VsZWN0aW9uLmZyb20sIHsgeTogJ2NlbnRlcicgfSldLFxuICAgICAgICAgICAgc2VsZWN0aW9uLFxuICAgICAgICB9KTtcbiAgICAgICAgdmlldy5mb2N1cygpO1xuICAgIH1cbiAgICByZXR1cm4geyBkb20gfTtcbn1cbmNvbnN0IGRpYWxvZ0VmZmVjdCA9IC8qQF9fUFVSRV9fKi9TdGF0ZUVmZmVjdC5kZWZpbmUoKTtcbmNvbnN0IGRpYWxvZ0ZpZWxkID0gLypAX19QVVJFX18qL1N0YXRlRmllbGQuZGVmaW5lKHtcbiAgICBjcmVhdGUoKSB7IHJldHVybiB0cnVlOyB9LFxuICAgIHVwZGF0ZSh2YWx1ZSwgdHIpIHtcbiAgICAgICAgZm9yIChsZXQgZSBvZiB0ci5lZmZlY3RzKVxuICAgICAgICAgICAgaWYgKGUuaXMoZGlhbG9nRWZmZWN0KSlcbiAgICAgICAgICAgICAgICB2YWx1ZSA9IGUudmFsdWU7XG4gICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9LFxuICAgIHByb3ZpZGU6IGYgPT4gc2hvd1BhbmVsLmZyb20oZiwgdmFsID0+IHZhbCA/IGNyZWF0ZUxpbmVEaWFsb2cgOiBudWxsKVxufSk7XG4vKipcbkNvbW1hbmQgdGhhdCBzaG93cyBhIGRpYWxvZyBhc2tpbmcgdGhlIHVzZXIgZm9yIGEgbGluZSBudW1iZXIsIGFuZFxud2hlbiBhIHZhbGlkIHBvc2l0aW9uIGlzIHByb3ZpZGVkLCBtb3ZlcyB0aGUgY3Vyc29yIHRvIHRoYXQgbGluZS5cblxuU3VwcG9ydHMgbGluZSBudW1iZXJzLCByZWxhdGl2ZSBsaW5lIG9mZnNldHMgcHJlZml4ZWQgd2l0aCBgK2Agb3JcbmAtYCwgZG9jdW1lbnQgcGVyY2VudGFnZXMgc3VmZml4ZWQgd2l0aCBgJWAsIGFuZCBhbiBvcHRpb25hbFxuY29sdW1uIHBvc2l0aW9uIGJ5IGFkZGluZyBgOmAgYW5kIGEgc2Vjb25kIG51bWJlciBhZnRlciB0aGUgbGluZVxubnVtYmVyLlxuKi9cbmNvbnN0IGdvdG9MaW5lID0gdmlldyA9PiB7XG4gICAgbGV0IHBhbmVsID0gZ2V0UGFuZWwodmlldywgY3JlYXRlTGluZURpYWxvZyk7XG4gICAgaWYgKCFwYW5lbCkge1xuICAgICAgICBsZXQgZWZmZWN0cyA9IFtkaWFsb2dFZmZlY3Qub2YodHJ1ZSldO1xuICAgICAgICBpZiAodmlldy5zdGF0ZS5maWVsZChkaWFsb2dGaWVsZCwgZmFsc2UpID09IG51bGwpXG4gICAgICAgICAgICBlZmZlY3RzLnB1c2goU3RhdGVFZmZlY3QuYXBwZW5kQ29uZmlnLm9mKFtkaWFsb2dGaWVsZCwgYmFzZVRoZW1lJDFdKSk7XG4gICAgICAgIHZpZXcuZGlzcGF0Y2goeyBlZmZlY3RzIH0pO1xuICAgICAgICBwYW5lbCA9IGdldFBhbmVsKHZpZXcsIGNyZWF0ZUxpbmVEaWFsb2cpO1xuICAgIH1cbiAgICBpZiAocGFuZWwpXG4gICAgICAgIHBhbmVsLmRvbS5xdWVyeVNlbGVjdG9yKFwiaW5wdXRcIikuc2VsZWN0KCk7XG4gICAgcmV0dXJuIHRydWU7XG59O1xuY29uc3QgYmFzZVRoZW1lJDEgPSAvKkBfX1BVUkVfXyovRWRpdG9yVmlldy5iYXNlVGhlbWUoe1xuICAgIFwiLmNtLXBhbmVsLmNtLWdvdG9MaW5lXCI6IHtcbiAgICAgICAgcGFkZGluZzogXCIycHggNnB4IDRweFwiLFxuICAgICAgICBwb3NpdGlvbjogXCJyZWxhdGl2ZVwiLFxuICAgICAgICBcIiYgbGFiZWxcIjogeyBmb250U2l6ZTogXCI4MCVcIiB9LFxuICAgICAgICBcIiYgW25hbWU9Y2xvc2VdXCI6IHtcbiAgICAgICAgICAgIHBvc2l0aW9uOiBcImFic29sdXRlXCIsXG4gICAgICAgICAgICB0b3A6IFwiMFwiLCBib3R0b206IFwiMFwiLFxuICAgICAgICAgICAgcmlnaHQ6IFwiNHB4XCIsXG4gICAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6IFwiaW5oZXJpdFwiLFxuICAgICAgICAgICAgYm9yZGVyOiBcIm5vbmVcIixcbiAgICAgICAgICAgIGZvbnQ6IFwiaW5oZXJpdFwiLFxuICAgICAgICAgICAgcGFkZGluZzogXCIwXCJcbiAgICAgICAgfVxuICAgIH1cbn0pO1xuXG5jb25zdCBkZWZhdWx0SGlnaGxpZ2h0T3B0aW9ucyA9IHtcbiAgICBoaWdobGlnaHRXb3JkQXJvdW5kQ3Vyc29yOiBmYWxzZSxcbiAgICBtaW5TZWxlY3Rpb25MZW5ndGg6IDEsXG4gICAgbWF4TWF0Y2hlczogMTAwLFxuICAgIHdob2xlV29yZHM6IGZhbHNlXG59O1xuY29uc3QgaGlnaGxpZ2h0Q29uZmlnID0gLypAX19QVVJFX18qL0ZhY2V0LmRlZmluZSh7XG4gICAgY29tYmluZShvcHRpb25zKSB7XG4gICAgICAgIHJldHVybiBjb21iaW5lQ29uZmlnKG9wdGlvbnMsIGRlZmF1bHRIaWdobGlnaHRPcHRpb25zLCB7XG4gICAgICAgICAgICBoaWdobGlnaHRXb3JkQXJvdW5kQ3Vyc29yOiAoYSwgYikgPT4gYSB8fCBiLFxuICAgICAgICAgICAgbWluU2VsZWN0aW9uTGVuZ3RoOiBNYXRoLm1pbixcbiAgICAgICAgICAgIG1heE1hdGNoZXM6IE1hdGgubWluXG4gICAgICAgIH0pO1xuICAgIH1cbn0pO1xuLyoqXG5UaGlzIGV4dGVuc2lvbiBoaWdobGlnaHRzIHRleHQgdGhhdCBtYXRjaGVzIHRoZSBzZWxlY3Rpb24uIEl0IHVzZXNcbnRoZSBgXCJjbS1zZWxlY3Rpb25NYXRjaFwiYCBjbGFzcyBmb3IgdGhlIGhpZ2hsaWdodGluZy4gV2hlblxuYGhpZ2hsaWdodFdvcmRBcm91bmRDdXJzb3JgIGlzIGVuYWJsZWQsIHRoZSB3b3JkIGF0IHRoZSBjdXJzb3Jcbml0c2VsZiB3aWxsIGJlIGhpZ2hsaWdodGVkIHdpdGggYFwiY20tc2VsZWN0aW9uTWF0Y2gtbWFpblwiYC5cbiovXG5mdW5jdGlvbiBoaWdobGlnaHRTZWxlY3Rpb25NYXRjaGVzKG9wdGlvbnMpIHtcbiAgICBsZXQgZXh0ID0gW2RlZmF1bHRUaGVtZSwgbWF0Y2hIaWdobGlnaHRlcl07XG4gICAgaWYgKG9wdGlvbnMpXG4gICAgICAgIGV4dC5wdXNoKGhpZ2hsaWdodENvbmZpZy5vZihvcHRpb25zKSk7XG4gICAgcmV0dXJuIGV4dDtcbn1cbmNvbnN0IG1hdGNoRGVjbyA9IC8qQF9fUFVSRV9fKi9EZWNvcmF0aW9uLm1hcmsoeyBjbGFzczogXCJjbS1zZWxlY3Rpb25NYXRjaFwiIH0pO1xuY29uc3QgbWFpbk1hdGNoRGVjbyA9IC8qQF9fUFVSRV9fKi9EZWNvcmF0aW9uLm1hcmsoeyBjbGFzczogXCJjbS1zZWxlY3Rpb25NYXRjaCBjbS1zZWxlY3Rpb25NYXRjaC1tYWluXCIgfSk7XG4vLyBXaGV0aGVyIHRoZSBjaGFyYWN0ZXJzIGRpcmVjdGx5IG91dHNpZGUgdGhlIGdpdmVuIHBvc2l0aW9ucyBhcmUgbm9uLXdvcmQgY2hhcmFjdGVyc1xuZnVuY3Rpb24gaW5zaWRlV29yZEJvdW5kYXJpZXMoY2hlY2ssIHN0YXRlLCBmcm9tLCB0bykge1xuICAgIHJldHVybiAoZnJvbSA9PSAwIHx8IGNoZWNrKHN0YXRlLnNsaWNlRG9jKGZyb20gLSAxLCBmcm9tKSkgIT0gQ2hhckNhdGVnb3J5LldvcmQpICYmXG4gICAgICAgICh0byA9PSBzdGF0ZS5kb2MubGVuZ3RoIHx8IGNoZWNrKHN0YXRlLnNsaWNlRG9jKHRvLCB0byArIDEpKSAhPSBDaGFyQ2F0ZWdvcnkuV29yZCk7XG59XG4vLyBXaGV0aGVyIHRoZSBjaGFyYWN0ZXJzIGRpcmVjdGx5IGF0IHRoZSBnaXZlbiBwb3NpdGlvbnMgYXJlIHdvcmQgY2hhcmFjdGVyc1xuZnVuY3Rpb24gaW5zaWRlV29yZChjaGVjaywgc3RhdGUsIGZyb20sIHRvKSB7XG4gICAgcmV0dXJuIGNoZWNrKHN0YXRlLnNsaWNlRG9jKGZyb20sIGZyb20gKyAxKSkgPT0gQ2hhckNhdGVnb3J5LldvcmRcbiAgICAgICAgJiYgY2hlY2soc3RhdGUuc2xpY2VEb2ModG8gLSAxLCB0bykpID09IENoYXJDYXRlZ29yeS5Xb3JkO1xufVxuY29uc3QgbWF0Y2hIaWdobGlnaHRlciA9IC8qQF9fUFVSRV9fKi9WaWV3UGx1Z2luLmZyb21DbGFzcyhjbGFzcyB7XG4gICAgY29uc3RydWN0b3Iodmlldykge1xuICAgICAgICB0aGlzLmRlY29yYXRpb25zID0gdGhpcy5nZXREZWNvKHZpZXcpO1xuICAgIH1cbiAgICB1cGRhdGUodXBkYXRlKSB7XG4gICAgICAgIGlmICh1cGRhdGUuc2VsZWN0aW9uU2V0IHx8IHVwZGF0ZS5kb2NDaGFuZ2VkIHx8IHVwZGF0ZS52aWV3cG9ydENoYW5nZWQpXG4gICAgICAgICAgICB0aGlzLmRlY29yYXRpb25zID0gdGhpcy5nZXREZWNvKHVwZGF0ZS52aWV3KTtcbiAgICB9XG4gICAgZ2V0RGVjbyh2aWV3KSB7XG4gICAgICAgIGxldCBjb25mID0gdmlldy5zdGF0ZS5mYWNldChoaWdobGlnaHRDb25maWcpO1xuICAgICAgICBsZXQgeyBzdGF0ZSB9ID0gdmlldywgc2VsID0gc3RhdGUuc2VsZWN0aW9uO1xuICAgICAgICBpZiAoc2VsLnJhbmdlcy5sZW5ndGggPiAxKVxuICAgICAgICAgICAgcmV0dXJuIERlY29yYXRpb24ubm9uZTtcbiAgICAgICAgbGV0IHJhbmdlID0gc2VsLm1haW4sIHF1ZXJ5LCBjaGVjayA9IG51bGw7XG4gICAgICAgIGlmIChyYW5nZS5lbXB0eSkge1xuICAgICAgICAgICAgaWYgKCFjb25mLmhpZ2hsaWdodFdvcmRBcm91bmRDdXJzb3IpXG4gICAgICAgICAgICAgICAgcmV0dXJuIERlY29yYXRpb24ubm9uZTtcbiAgICAgICAgICAgIGxldCB3b3JkID0gc3RhdGUud29yZEF0KHJhbmdlLmhlYWQpO1xuICAgICAgICAgICAgaWYgKCF3b3JkKVxuICAgICAgICAgICAgICAgIHJldHVybiBEZWNvcmF0aW9uLm5vbmU7XG4gICAgICAgICAgICBjaGVjayA9IHN0YXRlLmNoYXJDYXRlZ29yaXplcihyYW5nZS5oZWFkKTtcbiAgICAgICAgICAgIHF1ZXJ5ID0gc3RhdGUuc2xpY2VEb2Mod29yZC5mcm9tLCB3b3JkLnRvKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGxldCBsZW4gPSByYW5nZS50byAtIHJhbmdlLmZyb207XG4gICAgICAgICAgICBpZiAobGVuIDwgY29uZi5taW5TZWxlY3Rpb25MZW5ndGggfHwgbGVuID4gMjAwKVxuICAgICAgICAgICAgICAgIHJldHVybiBEZWNvcmF0aW9uLm5vbmU7XG4gICAgICAgICAgICBpZiAoY29uZi53aG9sZVdvcmRzKSB7XG4gICAgICAgICAgICAgICAgcXVlcnkgPSBzdGF0ZS5zbGljZURvYyhyYW5nZS5mcm9tLCByYW5nZS50byk7IC8vIFRPRE86IGFsbG93IGFuZCBpbmNsdWRlIGxlYWRpbmcvdHJhaWxpbmcgc3BhY2U/XG4gICAgICAgICAgICAgICAgY2hlY2sgPSBzdGF0ZS5jaGFyQ2F0ZWdvcml6ZXIocmFuZ2UuaGVhZCk7XG4gICAgICAgICAgICAgICAgaWYgKCEoaW5zaWRlV29yZEJvdW5kYXJpZXMoY2hlY2ssIHN0YXRlLCByYW5nZS5mcm9tLCByYW5nZS50bykgJiZcbiAgICAgICAgICAgICAgICAgICAgaW5zaWRlV29yZChjaGVjaywgc3RhdGUsIHJhbmdlLmZyb20sIHJhbmdlLnRvKSkpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBEZWNvcmF0aW9uLm5vbmU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBxdWVyeSA9IHN0YXRlLnNsaWNlRG9jKHJhbmdlLmZyb20sIHJhbmdlLnRvKTtcbiAgICAgICAgICAgICAgICBpZiAoIXF1ZXJ5KVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gRGVjb3JhdGlvbi5ub25lO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGxldCBkZWNvID0gW107XG4gICAgICAgIGZvciAobGV0IHBhcnQgb2Ygdmlldy52aXNpYmxlUmFuZ2VzKSB7XG4gICAgICAgICAgICBsZXQgY3Vyc29yID0gbmV3IFNlYXJjaEN1cnNvcihzdGF0ZS5kb2MsIHF1ZXJ5LCBwYXJ0LmZyb20sIHBhcnQudG8pO1xuICAgICAgICAgICAgd2hpbGUgKCFjdXJzb3IubmV4dCgpLmRvbmUpIHtcbiAgICAgICAgICAgICAgICBsZXQgeyBmcm9tLCB0byB9ID0gY3Vyc29yLnZhbHVlO1xuICAgICAgICAgICAgICAgIGlmICghY2hlY2sgfHwgaW5zaWRlV29yZEJvdW5kYXJpZXMoY2hlY2ssIHN0YXRlLCBmcm9tLCB0bykpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJhbmdlLmVtcHR5ICYmIGZyb20gPD0gcmFuZ2UuZnJvbSAmJiB0byA+PSByYW5nZS50bylcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlY28ucHVzaChtYWluTWF0Y2hEZWNvLnJhbmdlKGZyb20sIHRvKSk7XG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGZyb20gPj0gcmFuZ2UudG8gfHwgdG8gPD0gcmFuZ2UuZnJvbSlcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlY28ucHVzaChtYXRjaERlY28ucmFuZ2UoZnJvbSwgdG8pKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGRlY28ubGVuZ3RoID4gY29uZi5tYXhNYXRjaGVzKVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIERlY29yYXRpb24ubm9uZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIERlY29yYXRpb24uc2V0KGRlY28pO1xuICAgIH1cbn0sIHtcbiAgICBkZWNvcmF0aW9uczogdiA9PiB2LmRlY29yYXRpb25zXG59KTtcbmNvbnN0IGRlZmF1bHRUaGVtZSA9IC8qQF9fUFVSRV9fKi9FZGl0b3JWaWV3LmJhc2VUaGVtZSh7XG4gICAgXCIuY20tc2VsZWN0aW9uTWF0Y2hcIjogeyBiYWNrZ3JvdW5kQ29sb3I6IFwiIzk5ZmY3NzgwXCIgfSxcbiAgICBcIi5jbS1zZWFyY2hNYXRjaCAuY20tc2VsZWN0aW9uTWF0Y2hcIjogeyBiYWNrZ3JvdW5kQ29sb3I6IFwidHJhbnNwYXJlbnRcIiB9XG59KTtcbi8vIFNlbGVjdCB0aGUgd29yZHMgYXJvdW5kIHRoZSBjdXJzb3JzLlxuY29uc3Qgc2VsZWN0V29yZCA9ICh7IHN0YXRlLCBkaXNwYXRjaCB9KSA9PiB7XG4gICAgbGV0IHsgc2VsZWN0aW9uIH0gPSBzdGF0ZTtcbiAgICBsZXQgbmV3U2VsID0gRWRpdG9yU2VsZWN0aW9uLmNyZWF0ZShzZWxlY3Rpb24ucmFuZ2VzLm1hcChyYW5nZSA9PiBzdGF0ZS53b3JkQXQocmFuZ2UuaGVhZCkgfHwgRWRpdG9yU2VsZWN0aW9uLmN1cnNvcihyYW5nZS5oZWFkKSksIHNlbGVjdGlvbi5tYWluSW5kZXgpO1xuICAgIGlmIChuZXdTZWwuZXEoc2VsZWN0aW9uKSlcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIGRpc3BhdGNoKHN0YXRlLnVwZGF0ZSh7IHNlbGVjdGlvbjogbmV3U2VsIH0pKTtcbiAgICByZXR1cm4gdHJ1ZTtcbn07XG4vLyBGaW5kIG5leHQgb2NjdXJyZW5jZSBvZiBxdWVyeSByZWxhdGl2ZSB0byBsYXN0IGN1cnNvci4gV3JhcCBhcm91bmRcbi8vIHRoZSBkb2N1bWVudCBpZiB0aGVyZSBhcmUgbm8gbW9yZSBtYXRjaGVzLlxuZnVuY3Rpb24gZmluZE5leHRPY2N1cnJlbmNlKHN0YXRlLCBxdWVyeSkge1xuICAgIGxldCB7IG1haW4sIHJhbmdlcyB9ID0gc3RhdGUuc2VsZWN0aW9uO1xuICAgIGxldCB3b3JkID0gc3RhdGUud29yZEF0KG1haW4uaGVhZCksIGZ1bGxXb3JkID0gd29yZCAmJiB3b3JkLmZyb20gPT0gbWFpbi5mcm9tICYmIHdvcmQudG8gPT0gbWFpbi50bztcbiAgICBmb3IgKGxldCBjeWNsZWQgPSBmYWxzZSwgY3Vyc29yID0gbmV3IFNlYXJjaEN1cnNvcihzdGF0ZS5kb2MsIHF1ZXJ5LCByYW5nZXNbcmFuZ2VzLmxlbmd0aCAtIDFdLnRvKTs7KSB7XG4gICAgICAgIGN1cnNvci5uZXh0KCk7XG4gICAgICAgIGlmIChjdXJzb3IuZG9uZSkge1xuICAgICAgICAgICAgaWYgKGN5Y2xlZClcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgIGN1cnNvciA9IG5ldyBTZWFyY2hDdXJzb3Ioc3RhdGUuZG9jLCBxdWVyeSwgMCwgTWF0aC5tYXgoMCwgcmFuZ2VzW3Jhbmdlcy5sZW5ndGggLSAxXS5mcm9tIC0gMSkpO1xuICAgICAgICAgICAgY3ljbGVkID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGlmIChjeWNsZWQgJiYgcmFuZ2VzLnNvbWUociA9PiByLmZyb20gPT0gY3Vyc29yLnZhbHVlLmZyb20pKVxuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgaWYgKGZ1bGxXb3JkKSB7XG4gICAgICAgICAgICAgICAgbGV0IHdvcmQgPSBzdGF0ZS53b3JkQXQoY3Vyc29yLnZhbHVlLmZyb20pO1xuICAgICAgICAgICAgICAgIGlmICghd29yZCB8fCB3b3JkLmZyb20gIT0gY3Vyc29yLnZhbHVlLmZyb20gfHwgd29yZC50byAhPSBjdXJzb3IudmFsdWUudG8pXG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGN1cnNvci52YWx1ZTtcbiAgICAgICAgfVxuICAgIH1cbn1cbi8qKlxuU2VsZWN0IG5leHQgb2NjdXJyZW5jZSBvZiB0aGUgY3VycmVudCBzZWxlY3Rpb24uIEV4cGFuZCBzZWxlY3Rpb25cbnRvIHRoZSBzdXJyb3VuZGluZyB3b3JkIHdoZW4gdGhlIHNlbGVjdGlvbiBpcyBlbXB0eS5cbiovXG5jb25zdCBzZWxlY3ROZXh0T2NjdXJyZW5jZSA9ICh7IHN0YXRlLCBkaXNwYXRjaCB9KSA9PiB7XG4gICAgbGV0IHsgcmFuZ2VzIH0gPSBzdGF0ZS5zZWxlY3Rpb247XG4gICAgaWYgKHJhbmdlcy5zb21lKHNlbCA9PiBzZWwuZnJvbSA9PT0gc2VsLnRvKSlcbiAgICAgICAgcmV0dXJuIHNlbGVjdFdvcmQoeyBzdGF0ZSwgZGlzcGF0Y2ggfSk7XG4gICAgbGV0IHNlYXJjaGVkVGV4dCA9IHN0YXRlLnNsaWNlRG9jKHJhbmdlc1swXS5mcm9tLCByYW5nZXNbMF0udG8pO1xuICAgIGlmIChzdGF0ZS5zZWxlY3Rpb24ucmFuZ2VzLnNvbWUociA9PiBzdGF0ZS5zbGljZURvYyhyLmZyb20sIHIudG8pICE9IHNlYXJjaGVkVGV4dCkpXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICBsZXQgcmFuZ2UgPSBmaW5kTmV4dE9jY3VycmVuY2Uoc3RhdGUsIHNlYXJjaGVkVGV4dCk7XG4gICAgaWYgKCFyYW5nZSlcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIGRpc3BhdGNoKHN0YXRlLnVwZGF0ZSh7XG4gICAgICAgIHNlbGVjdGlvbjogc3RhdGUuc2VsZWN0aW9uLmFkZFJhbmdlKEVkaXRvclNlbGVjdGlvbi5yYW5nZShyYW5nZS5mcm9tLCByYW5nZS50byksIGZhbHNlKSxcbiAgICAgICAgZWZmZWN0czogRWRpdG9yVmlldy5zY3JvbGxJbnRvVmlldyhyYW5nZS50bylcbiAgICB9KSk7XG4gICAgcmV0dXJuIHRydWU7XG59O1xuXG5jb25zdCBzZWFyY2hDb25maWdGYWNldCA9IC8qQF9fUFVSRV9fKi9GYWNldC5kZWZpbmUoe1xuICAgIGNvbWJpbmUoY29uZmlncykge1xuICAgICAgICByZXR1cm4gY29tYmluZUNvbmZpZyhjb25maWdzLCB7XG4gICAgICAgICAgICB0b3A6IGZhbHNlLFxuICAgICAgICAgICAgY2FzZVNlbnNpdGl2ZTogZmFsc2UsXG4gICAgICAgICAgICBsaXRlcmFsOiBmYWxzZSxcbiAgICAgICAgICAgIHJlZ2V4cDogZmFsc2UsXG4gICAgICAgICAgICB3aG9sZVdvcmQ6IGZhbHNlLFxuICAgICAgICAgICAgY3JlYXRlUGFuZWw6IHZpZXcgPT4gbmV3IFNlYXJjaFBhbmVsKHZpZXcpLFxuICAgICAgICAgICAgc2Nyb2xsVG9NYXRjaDogcmFuZ2UgPT4gRWRpdG9yVmlldy5zY3JvbGxJbnRvVmlldyhyYW5nZSlcbiAgICAgICAgfSk7XG4gICAgfVxufSk7XG4vKipcbkFkZCBzZWFyY2ggc3RhdGUgdG8gdGhlIGVkaXRvciBjb25maWd1cmF0aW9uLCBhbmQgb3B0aW9uYWxseVxuY29uZmlndXJlIHRoZSBzZWFyY2ggZXh0ZW5zaW9uLlxuKFtgb3BlblNlYXJjaFBhbmVsYF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNzZWFyY2gub3BlblNlYXJjaFBhbmVsKSB3aWxsIGF1dG9tYXRpY2FsbHlcbmVuYWJsZSB0aGlzIGlmIGl0IGlzbid0IGFscmVhZHkgb24pLlxuKi9cbmZ1bmN0aW9uIHNlYXJjaChjb25maWcpIHtcbiAgICByZXR1cm4gY29uZmlnID8gW3NlYXJjaENvbmZpZ0ZhY2V0Lm9mKGNvbmZpZyksIHNlYXJjaEV4dGVuc2lvbnNdIDogc2VhcmNoRXh0ZW5zaW9ucztcbn1cbi8qKlxuQSBzZWFyY2ggcXVlcnkuIFBhcnQgb2YgdGhlIGVkaXRvcidzIHNlYXJjaCBzdGF0ZS5cbiovXG5jbGFzcyBTZWFyY2hRdWVyeSB7XG4gICAgLyoqXG4gICAgQ3JlYXRlIGEgcXVlcnkgb2JqZWN0LlxuICAgICovXG4gICAgY29uc3RydWN0b3IoY29uZmlnKSB7XG4gICAgICAgIHRoaXMuc2VhcmNoID0gY29uZmlnLnNlYXJjaDtcbiAgICAgICAgdGhpcy5jYXNlU2Vuc2l0aXZlID0gISFjb25maWcuY2FzZVNlbnNpdGl2ZTtcbiAgICAgICAgdGhpcy5saXRlcmFsID0gISFjb25maWcubGl0ZXJhbDtcbiAgICAgICAgdGhpcy5yZWdleHAgPSAhIWNvbmZpZy5yZWdleHA7XG4gICAgICAgIHRoaXMucmVwbGFjZSA9IGNvbmZpZy5yZXBsYWNlIHx8IFwiXCI7XG4gICAgICAgIHRoaXMudmFsaWQgPSAhIXRoaXMuc2VhcmNoICYmICghdGhpcy5yZWdleHAgfHwgdmFsaWRSZWdFeHAodGhpcy5zZWFyY2gpKTtcbiAgICAgICAgdGhpcy51bnF1b3RlZCA9IHRoaXMudW5xdW90ZSh0aGlzLnNlYXJjaCk7XG4gICAgICAgIHRoaXMud2hvbGVXb3JkID0gISFjb25maWcud2hvbGVXb3JkO1xuICAgIH1cbiAgICAvKipcbiAgICBAaW50ZXJuYWxcbiAgICAqL1xuICAgIHVucXVvdGUodGV4dCkge1xuICAgICAgICByZXR1cm4gdGhpcy5saXRlcmFsID8gdGV4dCA6XG4gICAgICAgICAgICB0ZXh0LnJlcGxhY2UoL1xcXFwoW25ydFxcXFxdKS9nLCAoXywgY2gpID0+IGNoID09IFwiblwiID8gXCJcXG5cIiA6IGNoID09IFwiclwiID8gXCJcXHJcIiA6IGNoID09IFwidFwiID8gXCJcXHRcIiA6IFwiXFxcXFwiKTtcbiAgICB9XG4gICAgLyoqXG4gICAgQ29tcGFyZSB0aGlzIHF1ZXJ5IHRvIGFub3RoZXIgcXVlcnkuXG4gICAgKi9cbiAgICBlcShvdGhlcikge1xuICAgICAgICByZXR1cm4gdGhpcy5zZWFyY2ggPT0gb3RoZXIuc2VhcmNoICYmIHRoaXMucmVwbGFjZSA9PSBvdGhlci5yZXBsYWNlICYmXG4gICAgICAgICAgICB0aGlzLmNhc2VTZW5zaXRpdmUgPT0gb3RoZXIuY2FzZVNlbnNpdGl2ZSAmJiB0aGlzLnJlZ2V4cCA9PSBvdGhlci5yZWdleHAgJiZcbiAgICAgICAgICAgIHRoaXMud2hvbGVXb3JkID09IG90aGVyLndob2xlV29yZDtcbiAgICB9XG4gICAgLyoqXG4gICAgQGludGVybmFsXG4gICAgKi9cbiAgICBjcmVhdGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJlZ2V4cCA/IG5ldyBSZWdFeHBRdWVyeSh0aGlzKSA6IG5ldyBTdHJpbmdRdWVyeSh0aGlzKTtcbiAgICB9XG4gICAgLyoqXG4gICAgR2V0IGEgc2VhcmNoIGN1cnNvciBmb3IgdGhpcyBxdWVyeSwgc2VhcmNoaW5nIHRocm91Z2ggdGhlIGdpdmVuXG4gICAgcmFuZ2UgaW4gdGhlIGdpdmVuIHN0YXRlLlxuICAgICovXG4gICAgZ2V0Q3Vyc29yKHN0YXRlLCBmcm9tID0gMCwgdG8pIHtcbiAgICAgICAgbGV0IHN0ID0gc3RhdGUuZG9jID8gc3RhdGUgOiBFZGl0b3JTdGF0ZS5jcmVhdGUoeyBkb2M6IHN0YXRlIH0pO1xuICAgICAgICBpZiAodG8gPT0gbnVsbClcbiAgICAgICAgICAgIHRvID0gc3QuZG9jLmxlbmd0aDtcbiAgICAgICAgcmV0dXJuIHRoaXMucmVnZXhwID8gcmVnZXhwQ3Vyc29yKHRoaXMsIHN0LCBmcm9tLCB0bykgOiBzdHJpbmdDdXJzb3IodGhpcywgc3QsIGZyb20sIHRvKTtcbiAgICB9XG59XG5jbGFzcyBRdWVyeVR5cGUge1xuICAgIGNvbnN0cnVjdG9yKHNwZWMpIHtcbiAgICAgICAgdGhpcy5zcGVjID0gc3BlYztcbiAgICB9XG59XG5mdW5jdGlvbiBzdHJpbmdDdXJzb3Ioc3BlYywgc3RhdGUsIGZyb20sIHRvKSB7XG4gICAgcmV0dXJuIG5ldyBTZWFyY2hDdXJzb3Ioc3RhdGUuZG9jLCBzcGVjLnVucXVvdGVkLCBmcm9tLCB0bywgc3BlYy5jYXNlU2Vuc2l0aXZlID8gdW5kZWZpbmVkIDogeCA9PiB4LnRvTG93ZXJDYXNlKCksIHNwZWMud2hvbGVXb3JkID8gc3RyaW5nV29yZFRlc3Qoc3RhdGUuZG9jLCBzdGF0ZS5jaGFyQ2F0ZWdvcml6ZXIoc3RhdGUuc2VsZWN0aW9uLm1haW4uaGVhZCkpIDogdW5kZWZpbmVkKTtcbn1cbmZ1bmN0aW9uIHN0cmluZ1dvcmRUZXN0KGRvYywgY2F0ZWdvcml6ZXIpIHtcbiAgICByZXR1cm4gKGZyb20sIHRvLCBidWYsIGJ1ZlBvcykgPT4ge1xuICAgICAgICBpZiAoYnVmUG9zID4gZnJvbSB8fCBidWZQb3MgKyBidWYubGVuZ3RoIDwgdG8pIHtcbiAgICAgICAgICAgIGJ1ZlBvcyA9IE1hdGgubWF4KDAsIGZyb20gLSAyKTtcbiAgICAgICAgICAgIGJ1ZiA9IGRvYy5zbGljZVN0cmluZyhidWZQb3MsIE1hdGgubWluKGRvYy5sZW5ndGgsIHRvICsgMikpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAoY2F0ZWdvcml6ZXIoY2hhckJlZm9yZShidWYsIGZyb20gLSBidWZQb3MpKSAhPSBDaGFyQ2F0ZWdvcnkuV29yZCB8fFxuICAgICAgICAgICAgY2F0ZWdvcml6ZXIoY2hhckFmdGVyKGJ1ZiwgZnJvbSAtIGJ1ZlBvcykpICE9IENoYXJDYXRlZ29yeS5Xb3JkKSAmJlxuICAgICAgICAgICAgKGNhdGVnb3JpemVyKGNoYXJBZnRlcihidWYsIHRvIC0gYnVmUG9zKSkgIT0gQ2hhckNhdGVnb3J5LldvcmQgfHxcbiAgICAgICAgICAgICAgICBjYXRlZ29yaXplcihjaGFyQmVmb3JlKGJ1ZiwgdG8gLSBidWZQb3MpKSAhPSBDaGFyQ2F0ZWdvcnkuV29yZCk7XG4gICAgfTtcbn1cbmNsYXNzIFN0cmluZ1F1ZXJ5IGV4dGVuZHMgUXVlcnlUeXBlIHtcbiAgICBjb25zdHJ1Y3RvcihzcGVjKSB7XG4gICAgICAgIHN1cGVyKHNwZWMpO1xuICAgIH1cbiAgICBuZXh0TWF0Y2goc3RhdGUsIGN1ckZyb20sIGN1clRvKSB7XG4gICAgICAgIGxldCBjdXJzb3IgPSBzdHJpbmdDdXJzb3IodGhpcy5zcGVjLCBzdGF0ZSwgY3VyVG8sIHN0YXRlLmRvYy5sZW5ndGgpLm5leHRPdmVybGFwcGluZygpO1xuICAgICAgICBpZiAoY3Vyc29yLmRvbmUpIHtcbiAgICAgICAgICAgIGxldCBlbmQgPSBNYXRoLm1pbihzdGF0ZS5kb2MubGVuZ3RoLCBjdXJGcm9tICsgdGhpcy5zcGVjLnVucXVvdGVkLmxlbmd0aCk7XG4gICAgICAgICAgICBjdXJzb3IgPSBzdHJpbmdDdXJzb3IodGhpcy5zcGVjLCBzdGF0ZSwgMCwgZW5kKS5uZXh0T3ZlcmxhcHBpbmcoKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gY3Vyc29yLmRvbmUgfHwgY3Vyc29yLnZhbHVlLmZyb20gPT0gY3VyRnJvbSAmJiBjdXJzb3IudmFsdWUudG8gPT0gY3VyVG8gPyBudWxsIDogY3Vyc29yLnZhbHVlO1xuICAgIH1cbiAgICAvLyBTZWFyY2hpbmcgaW4gcmV2ZXJzZSBpcywgcmF0aGVyIHRoYW4gaW1wbGVtZW50aW5nIGFuIGludmVydGVkIHNlYXJjaFxuICAgIC8vIGN1cnNvciwgZG9uZSBieSBzY2FubmluZyBjaHVuayBhZnRlciBjaHVuayBmb3J3YXJkLlxuICAgIHByZXZNYXRjaEluUmFuZ2Uoc3RhdGUsIGZyb20sIHRvKSB7XG4gICAgICAgIGZvciAobGV0IHBvcyA9IHRvOzspIHtcbiAgICAgICAgICAgIGxldCBzdGFydCA9IE1hdGgubWF4KGZyb20sIHBvcyAtIDEwMDAwIC8qIEZpbmRQcmV2LkNodW5rU2l6ZSAqLyAtIHRoaXMuc3BlYy51bnF1b3RlZC5sZW5ndGgpO1xuICAgICAgICAgICAgbGV0IGN1cnNvciA9IHN0cmluZ0N1cnNvcih0aGlzLnNwZWMsIHN0YXRlLCBzdGFydCwgcG9zKSwgcmFuZ2UgPSBudWxsO1xuICAgICAgICAgICAgd2hpbGUgKCFjdXJzb3IubmV4dE92ZXJsYXBwaW5nKCkuZG9uZSlcbiAgICAgICAgICAgICAgICByYW5nZSA9IGN1cnNvci52YWx1ZTtcbiAgICAgICAgICAgIGlmIChyYW5nZSlcbiAgICAgICAgICAgICAgICByZXR1cm4gcmFuZ2U7XG4gICAgICAgICAgICBpZiAoc3RhcnQgPT0gZnJvbSlcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgIHBvcyAtPSAxMDAwMCAvKiBGaW5kUHJldi5DaHVua1NpemUgKi87XG4gICAgICAgIH1cbiAgICB9XG4gICAgcHJldk1hdGNoKHN0YXRlLCBjdXJGcm9tLCBjdXJUbykge1xuICAgICAgICBsZXQgZm91bmQgPSB0aGlzLnByZXZNYXRjaEluUmFuZ2Uoc3RhdGUsIDAsIGN1ckZyb20pO1xuICAgICAgICBpZiAoIWZvdW5kKVxuICAgICAgICAgICAgZm91bmQgPSB0aGlzLnByZXZNYXRjaEluUmFuZ2Uoc3RhdGUsIE1hdGgubWF4KDAsIGN1clRvIC0gdGhpcy5zcGVjLnVucXVvdGVkLmxlbmd0aCksIHN0YXRlLmRvYy5sZW5ndGgpO1xuICAgICAgICByZXR1cm4gZm91bmQgJiYgKGZvdW5kLmZyb20gIT0gY3VyRnJvbSB8fCBmb3VuZC50byAhPSBjdXJUbykgPyBmb3VuZCA6IG51bGw7XG4gICAgfVxuICAgIGdldFJlcGxhY2VtZW50KF9yZXN1bHQpIHsgcmV0dXJuIHRoaXMuc3BlYy51bnF1b3RlKHRoaXMuc3BlYy5yZXBsYWNlKTsgfVxuICAgIG1hdGNoQWxsKHN0YXRlLCBsaW1pdCkge1xuICAgICAgICBsZXQgY3Vyc29yID0gc3RyaW5nQ3Vyc29yKHRoaXMuc3BlYywgc3RhdGUsIDAsIHN0YXRlLmRvYy5sZW5ndGgpLCByYW5nZXMgPSBbXTtcbiAgICAgICAgd2hpbGUgKCFjdXJzb3IubmV4dCgpLmRvbmUpIHtcbiAgICAgICAgICAgIGlmIChyYW5nZXMubGVuZ3RoID49IGxpbWl0KVxuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgcmFuZ2VzLnB1c2goY3Vyc29yLnZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmFuZ2VzO1xuICAgIH1cbiAgICBoaWdobGlnaHQoc3RhdGUsIGZyb20sIHRvLCBhZGQpIHtcbiAgICAgICAgbGV0IGN1cnNvciA9IHN0cmluZ0N1cnNvcih0aGlzLnNwZWMsIHN0YXRlLCBNYXRoLm1heCgwLCBmcm9tIC0gdGhpcy5zcGVjLnVucXVvdGVkLmxlbmd0aCksIE1hdGgubWluKHRvICsgdGhpcy5zcGVjLnVucXVvdGVkLmxlbmd0aCwgc3RhdGUuZG9jLmxlbmd0aCkpO1xuICAgICAgICB3aGlsZSAoIWN1cnNvci5uZXh0KCkuZG9uZSlcbiAgICAgICAgICAgIGFkZChjdXJzb3IudmFsdWUuZnJvbSwgY3Vyc29yLnZhbHVlLnRvKTtcbiAgICB9XG59XG5mdW5jdGlvbiByZWdleHBDdXJzb3Ioc3BlYywgc3RhdGUsIGZyb20sIHRvKSB7XG4gICAgcmV0dXJuIG5ldyBSZWdFeHBDdXJzb3Ioc3RhdGUuZG9jLCBzcGVjLnNlYXJjaCwge1xuICAgICAgICBpZ25vcmVDYXNlOiAhc3BlYy5jYXNlU2Vuc2l0aXZlLFxuICAgICAgICB0ZXN0OiBzcGVjLndob2xlV29yZCA/IHJlZ2V4cFdvcmRUZXN0KHN0YXRlLmNoYXJDYXRlZ29yaXplcihzdGF0ZS5zZWxlY3Rpb24ubWFpbi5oZWFkKSkgOiB1bmRlZmluZWRcbiAgICB9LCBmcm9tLCB0byk7XG59XG5mdW5jdGlvbiBjaGFyQmVmb3JlKHN0ciwgaW5kZXgpIHtcbiAgICByZXR1cm4gc3RyLnNsaWNlKGZpbmRDbHVzdGVyQnJlYWsoc3RyLCBpbmRleCwgZmFsc2UpLCBpbmRleCk7XG59XG5mdW5jdGlvbiBjaGFyQWZ0ZXIoc3RyLCBpbmRleCkge1xuICAgIHJldHVybiBzdHIuc2xpY2UoaW5kZXgsIGZpbmRDbHVzdGVyQnJlYWsoc3RyLCBpbmRleCkpO1xufVxuZnVuY3Rpb24gcmVnZXhwV29yZFRlc3QoY2F0ZWdvcml6ZXIpIHtcbiAgICByZXR1cm4gKF9mcm9tLCBfdG8sIG1hdGNoKSA9PiAhbWF0Y2hbMF0ubGVuZ3RoIHx8XG4gICAgICAgIChjYXRlZ29yaXplcihjaGFyQmVmb3JlKG1hdGNoLmlucHV0LCBtYXRjaC5pbmRleCkpICE9IENoYXJDYXRlZ29yeS5Xb3JkIHx8XG4gICAgICAgICAgICBjYXRlZ29yaXplcihjaGFyQWZ0ZXIobWF0Y2guaW5wdXQsIG1hdGNoLmluZGV4KSkgIT0gQ2hhckNhdGVnb3J5LldvcmQpICYmXG4gICAgICAgICAgICAoY2F0ZWdvcml6ZXIoY2hhckFmdGVyKG1hdGNoLmlucHV0LCBtYXRjaC5pbmRleCArIG1hdGNoWzBdLmxlbmd0aCkpICE9IENoYXJDYXRlZ29yeS5Xb3JkIHx8XG4gICAgICAgICAgICAgICAgY2F0ZWdvcml6ZXIoY2hhckJlZm9yZShtYXRjaC5pbnB1dCwgbWF0Y2guaW5kZXggKyBtYXRjaFswXS5sZW5ndGgpKSAhPSBDaGFyQ2F0ZWdvcnkuV29yZCk7XG59XG5jbGFzcyBSZWdFeHBRdWVyeSBleHRlbmRzIFF1ZXJ5VHlwZSB7XG4gICAgbmV4dE1hdGNoKHN0YXRlLCBjdXJGcm9tLCBjdXJUbykge1xuICAgICAgICBsZXQgY3Vyc29yID0gcmVnZXhwQ3Vyc29yKHRoaXMuc3BlYywgc3RhdGUsIGN1clRvLCBzdGF0ZS5kb2MubGVuZ3RoKS5uZXh0KCk7XG4gICAgICAgIGlmIChjdXJzb3IuZG9uZSlcbiAgICAgICAgICAgIGN1cnNvciA9IHJlZ2V4cEN1cnNvcih0aGlzLnNwZWMsIHN0YXRlLCAwLCBjdXJGcm9tKS5uZXh0KCk7XG4gICAgICAgIHJldHVybiBjdXJzb3IuZG9uZSA/IG51bGwgOiBjdXJzb3IudmFsdWU7XG4gICAgfVxuICAgIHByZXZNYXRjaEluUmFuZ2Uoc3RhdGUsIGZyb20sIHRvKSB7XG4gICAgICAgIGZvciAobGV0IHNpemUgPSAxOzsgc2l6ZSsrKSB7XG4gICAgICAgICAgICBsZXQgc3RhcnQgPSBNYXRoLm1heChmcm9tLCB0byAtIHNpemUgKiAxMDAwMCAvKiBGaW5kUHJldi5DaHVua1NpemUgKi8pO1xuICAgICAgICAgICAgbGV0IGN1cnNvciA9IHJlZ2V4cEN1cnNvcih0aGlzLnNwZWMsIHN0YXRlLCBzdGFydCwgdG8pLCByYW5nZSA9IG51bGw7XG4gICAgICAgICAgICB3aGlsZSAoIWN1cnNvci5uZXh0KCkuZG9uZSlcbiAgICAgICAgICAgICAgICByYW5nZSA9IGN1cnNvci52YWx1ZTtcbiAgICAgICAgICAgIGlmIChyYW5nZSAmJiAoc3RhcnQgPT0gZnJvbSB8fCByYW5nZS5mcm9tID4gc3RhcnQgKyAxMCkpXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJhbmdlO1xuICAgICAgICAgICAgaWYgKHN0YXJ0ID09IGZyb20pXG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcHJldk1hdGNoKHN0YXRlLCBjdXJGcm9tLCBjdXJUbykge1xuICAgICAgICByZXR1cm4gdGhpcy5wcmV2TWF0Y2hJblJhbmdlKHN0YXRlLCAwLCBjdXJGcm9tKSB8fFxuICAgICAgICAgICAgdGhpcy5wcmV2TWF0Y2hJblJhbmdlKHN0YXRlLCBjdXJUbywgc3RhdGUuZG9jLmxlbmd0aCk7XG4gICAgfVxuICAgIGdldFJlcGxhY2VtZW50KHJlc3VsdCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zcGVjLnVucXVvdGUodGhpcy5zcGVjLnJlcGxhY2UpLnJlcGxhY2UoL1xcJChbJCZdfFxcZCspL2csIChtLCBpKSA9PiB7XG4gICAgICAgICAgICBpZiAoaSA9PSBcIiZcIilcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0Lm1hdGNoWzBdO1xuICAgICAgICAgICAgaWYgKGkgPT0gXCIkXCIpXG4gICAgICAgICAgICAgICAgcmV0dXJuIFwiJFwiO1xuICAgICAgICAgICAgZm9yIChsZXQgbCA9IGkubGVuZ3RoOyBsID4gMDsgbC0tKSB7XG4gICAgICAgICAgICAgICAgbGV0IG4gPSAraS5zbGljZSgwLCBsKTtcbiAgICAgICAgICAgICAgICBpZiAobiA+IDAgJiYgbiA8IHJlc3VsdC5tYXRjaC5sZW5ndGgpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQubWF0Y2hbbl0gKyBpLnNsaWNlKGwpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG07XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBtYXRjaEFsbChzdGF0ZSwgbGltaXQpIHtcbiAgICAgICAgbGV0IGN1cnNvciA9IHJlZ2V4cEN1cnNvcih0aGlzLnNwZWMsIHN0YXRlLCAwLCBzdGF0ZS5kb2MubGVuZ3RoKSwgcmFuZ2VzID0gW107XG4gICAgICAgIHdoaWxlICghY3Vyc29yLm5leHQoKS5kb25lKSB7XG4gICAgICAgICAgICBpZiAocmFuZ2VzLmxlbmd0aCA+PSBsaW1pdClcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgIHJhbmdlcy5wdXNoKGN1cnNvci52YWx1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJhbmdlcztcbiAgICB9XG4gICAgaGlnaGxpZ2h0KHN0YXRlLCBmcm9tLCB0bywgYWRkKSB7XG4gICAgICAgIGxldCBjdXJzb3IgPSByZWdleHBDdXJzb3IodGhpcy5zcGVjLCBzdGF0ZSwgTWF0aC5tYXgoMCwgZnJvbSAtIDI1MCAvKiBSZWdFeHAuSGlnaGxpZ2h0TWFyZ2luICovKSwgTWF0aC5taW4odG8gKyAyNTAgLyogUmVnRXhwLkhpZ2hsaWdodE1hcmdpbiAqLywgc3RhdGUuZG9jLmxlbmd0aCkpO1xuICAgICAgICB3aGlsZSAoIWN1cnNvci5uZXh0KCkuZG9uZSlcbiAgICAgICAgICAgIGFkZChjdXJzb3IudmFsdWUuZnJvbSwgY3Vyc29yLnZhbHVlLnRvKTtcbiAgICB9XG59XG4vKipcbkEgc3RhdGUgZWZmZWN0IHRoYXQgdXBkYXRlcyB0aGUgY3VycmVudCBzZWFyY2ggcXVlcnkuIE5vdGUgdGhhdFxudGhpcyBvbmx5IGhhcyBhbiBlZmZlY3QgaWYgdGhlIHNlYXJjaCBzdGF0ZSBoYXMgYmVlbiBpbml0aWFsaXplZFxuKGJ5IGluY2x1ZGluZyBbYHNlYXJjaGBdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jc2VhcmNoLnNlYXJjaCkgaW4geW91ciBjb25maWd1cmF0aW9uIG9yXG5ieSBydW5uaW5nIFtgb3BlblNlYXJjaFBhbmVsYF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNzZWFyY2gub3BlblNlYXJjaFBhbmVsKSBhdCBsZWFzdFxub25jZSkuXG4qL1xuY29uc3Qgc2V0U2VhcmNoUXVlcnkgPSAvKkBfX1BVUkVfXyovU3RhdGVFZmZlY3QuZGVmaW5lKCk7XG5jb25zdCB0b2dnbGVQYW5lbCA9IC8qQF9fUFVSRV9fKi9TdGF0ZUVmZmVjdC5kZWZpbmUoKTtcbmNvbnN0IHNlYXJjaFN0YXRlID0gLypAX19QVVJFX18qL1N0YXRlRmllbGQuZGVmaW5lKHtcbiAgICBjcmVhdGUoc3RhdGUpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBTZWFyY2hTdGF0ZShkZWZhdWx0UXVlcnkoc3RhdGUpLmNyZWF0ZSgpLCBudWxsKTtcbiAgICB9LFxuICAgIHVwZGF0ZSh2YWx1ZSwgdHIpIHtcbiAgICAgICAgZm9yIChsZXQgZWZmZWN0IG9mIHRyLmVmZmVjdHMpIHtcbiAgICAgICAgICAgIGlmIChlZmZlY3QuaXMoc2V0U2VhcmNoUXVlcnkpKVxuICAgICAgICAgICAgICAgIHZhbHVlID0gbmV3IFNlYXJjaFN0YXRlKGVmZmVjdC52YWx1ZS5jcmVhdGUoKSwgdmFsdWUucGFuZWwpO1xuICAgICAgICAgICAgZWxzZSBpZiAoZWZmZWN0LmlzKHRvZ2dsZVBhbmVsKSlcbiAgICAgICAgICAgICAgICB2YWx1ZSA9IG5ldyBTZWFyY2hTdGF0ZSh2YWx1ZS5xdWVyeSwgZWZmZWN0LnZhbHVlID8gY3JlYXRlU2VhcmNoUGFuZWwgOiBudWxsKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgfSxcbiAgICBwcm92aWRlOiBmID0+IHNob3dQYW5lbC5mcm9tKGYsIHZhbCA9PiB2YWwucGFuZWwpXG59KTtcbi8qKlxuR2V0IHRoZSBjdXJyZW50IHNlYXJjaCBxdWVyeSBmcm9tIGFuIGVkaXRvciBzdGF0ZS5cbiovXG5mdW5jdGlvbiBnZXRTZWFyY2hRdWVyeShzdGF0ZSkge1xuICAgIGxldCBjdXJTdGF0ZSA9IHN0YXRlLmZpZWxkKHNlYXJjaFN0YXRlLCBmYWxzZSk7XG4gICAgcmV0dXJuIGN1clN0YXRlID8gY3VyU3RhdGUucXVlcnkuc3BlYyA6IGRlZmF1bHRRdWVyeShzdGF0ZSk7XG59XG4vKipcblF1ZXJ5IHdoZXRoZXIgdGhlIHNlYXJjaCBwYW5lbCBpcyBvcGVuIGluIHRoZSBnaXZlbiBlZGl0b3Igc3RhdGUuXG4qL1xuZnVuY3Rpb24gc2VhcmNoUGFuZWxPcGVuKHN0YXRlKSB7XG4gICAgdmFyIF9hO1xuICAgIHJldHVybiAoKF9hID0gc3RhdGUuZmllbGQoc2VhcmNoU3RhdGUsIGZhbHNlKSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLnBhbmVsKSAhPSBudWxsO1xufVxuY2xhc3MgU2VhcmNoU3RhdGUge1xuICAgIGNvbnN0cnVjdG9yKHF1ZXJ5LCBwYW5lbCkge1xuICAgICAgICB0aGlzLnF1ZXJ5ID0gcXVlcnk7XG4gICAgICAgIHRoaXMucGFuZWwgPSBwYW5lbDtcbiAgICB9XG59XG5jb25zdCBtYXRjaE1hcmsgPSAvKkBfX1BVUkVfXyovRGVjb3JhdGlvbi5tYXJrKHsgY2xhc3M6IFwiY20tc2VhcmNoTWF0Y2hcIiB9KSwgc2VsZWN0ZWRNYXRjaE1hcmsgPSAvKkBfX1BVUkVfXyovRGVjb3JhdGlvbi5tYXJrKHsgY2xhc3M6IFwiY20tc2VhcmNoTWF0Y2ggY20tc2VhcmNoTWF0Y2gtc2VsZWN0ZWRcIiB9KTtcbmNvbnN0IHNlYXJjaEhpZ2hsaWdodGVyID0gLypAX19QVVJFX18qL1ZpZXdQbHVnaW4uZnJvbUNsYXNzKGNsYXNzIHtcbiAgICBjb25zdHJ1Y3Rvcih2aWV3KSB7XG4gICAgICAgIHRoaXMudmlldyA9IHZpZXc7XG4gICAgICAgIHRoaXMuZGVjb3JhdGlvbnMgPSB0aGlzLmhpZ2hsaWdodCh2aWV3LnN0YXRlLmZpZWxkKHNlYXJjaFN0YXRlKSk7XG4gICAgfVxuICAgIHVwZGF0ZSh1cGRhdGUpIHtcbiAgICAgICAgbGV0IHN0YXRlID0gdXBkYXRlLnN0YXRlLmZpZWxkKHNlYXJjaFN0YXRlKTtcbiAgICAgICAgaWYgKHN0YXRlICE9IHVwZGF0ZS5zdGFydFN0YXRlLmZpZWxkKHNlYXJjaFN0YXRlKSB8fCB1cGRhdGUuZG9jQ2hhbmdlZCB8fCB1cGRhdGUuc2VsZWN0aW9uU2V0IHx8IHVwZGF0ZS52aWV3cG9ydENoYW5nZWQpXG4gICAgICAgICAgICB0aGlzLmRlY29yYXRpb25zID0gdGhpcy5oaWdobGlnaHQoc3RhdGUpO1xuICAgIH1cbiAgICBoaWdobGlnaHQoeyBxdWVyeSwgcGFuZWwgfSkge1xuICAgICAgICBpZiAoIXBhbmVsIHx8ICFxdWVyeS5zcGVjLnZhbGlkKVxuICAgICAgICAgICAgcmV0dXJuIERlY29yYXRpb24ubm9uZTtcbiAgICAgICAgbGV0IHsgdmlldyB9ID0gdGhpcztcbiAgICAgICAgbGV0IGJ1aWxkZXIgPSBuZXcgUmFuZ2VTZXRCdWlsZGVyKCk7XG4gICAgICAgIGZvciAobGV0IGkgPSAwLCByYW5nZXMgPSB2aWV3LnZpc2libGVSYW5nZXMsIGwgPSByYW5nZXMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICAgICAgICBsZXQgeyBmcm9tLCB0byB9ID0gcmFuZ2VzW2ldO1xuICAgICAgICAgICAgd2hpbGUgKGkgPCBsIC0gMSAmJiB0byA+IHJhbmdlc1tpICsgMV0uZnJvbSAtIDIgKiAyNTAgLyogUmVnRXhwLkhpZ2hsaWdodE1hcmdpbiAqLylcbiAgICAgICAgICAgICAgICB0byA9IHJhbmdlc1srK2ldLnRvO1xuICAgICAgICAgICAgcXVlcnkuaGlnaGxpZ2h0KHZpZXcuc3RhdGUsIGZyb20sIHRvLCAoZnJvbSwgdG8pID0+IHtcbiAgICAgICAgICAgICAgICBsZXQgc2VsZWN0ZWQgPSB2aWV3LnN0YXRlLnNlbGVjdGlvbi5yYW5nZXMuc29tZShyID0+IHIuZnJvbSA9PSBmcm9tICYmIHIudG8gPT0gdG8pO1xuICAgICAgICAgICAgICAgIGJ1aWxkZXIuYWRkKGZyb20sIHRvLCBzZWxlY3RlZCA/IHNlbGVjdGVkTWF0Y2hNYXJrIDogbWF0Y2hNYXJrKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBidWlsZGVyLmZpbmlzaCgpO1xuICAgIH1cbn0sIHtcbiAgICBkZWNvcmF0aW9uczogdiA9PiB2LmRlY29yYXRpb25zXG59KTtcbmZ1bmN0aW9uIHNlYXJjaENvbW1hbmQoZikge1xuICAgIHJldHVybiB2aWV3ID0+IHtcbiAgICAgICAgbGV0IHN0YXRlID0gdmlldy5zdGF0ZS5maWVsZChzZWFyY2hTdGF0ZSwgZmFsc2UpO1xuICAgICAgICByZXR1cm4gc3RhdGUgJiYgc3RhdGUucXVlcnkuc3BlYy52YWxpZCA/IGYodmlldywgc3RhdGUpIDogb3BlblNlYXJjaFBhbmVsKHZpZXcpO1xuICAgIH07XG59XG4vKipcbk9wZW4gdGhlIHNlYXJjaCBwYW5lbCBpZiBpdCBpc24ndCBhbHJlYWR5IG9wZW4sIGFuZCBtb3ZlIHRoZVxuc2VsZWN0aW9uIHRvIHRoZSBmaXJzdCBtYXRjaCBhZnRlciB0aGUgY3VycmVudCBtYWluIHNlbGVjdGlvbi5cbldpbGwgd3JhcCBhcm91bmQgdG8gdGhlIHN0YXJ0IG9mIHRoZSBkb2N1bWVudCB3aGVuIGl0IHJlYWNoZXMgdGhlXG5lbmQuXG4qL1xuY29uc3QgZmluZE5leHQgPSAvKkBfX1BVUkVfXyovc2VhcmNoQ29tbWFuZCgodmlldywgeyBxdWVyeSB9KSA9PiB7XG4gICAgbGV0IHsgdG8gfSA9IHZpZXcuc3RhdGUuc2VsZWN0aW9uLm1haW47XG4gICAgbGV0IG5leHQgPSBxdWVyeS5uZXh0TWF0Y2godmlldy5zdGF0ZSwgdG8sIHRvKTtcbiAgICBpZiAoIW5leHQpXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICBsZXQgc2VsZWN0aW9uID0gRWRpdG9yU2VsZWN0aW9uLnNpbmdsZShuZXh0LmZyb20sIG5leHQudG8pO1xuICAgIGxldCBjb25maWcgPSB2aWV3LnN0YXRlLmZhY2V0KHNlYXJjaENvbmZpZ0ZhY2V0KTtcbiAgICB2aWV3LmRpc3BhdGNoKHtcbiAgICAgICAgc2VsZWN0aW9uLFxuICAgICAgICBlZmZlY3RzOiBbYW5ub3VuY2VNYXRjaCh2aWV3LCBuZXh0KSwgY29uZmlnLnNjcm9sbFRvTWF0Y2goc2VsZWN0aW9uLm1haW4sIHZpZXcpXSxcbiAgICAgICAgdXNlckV2ZW50OiBcInNlbGVjdC5zZWFyY2hcIlxuICAgIH0pO1xuICAgIHNlbGVjdFNlYXJjaElucHV0KHZpZXcpO1xuICAgIHJldHVybiB0cnVlO1xufSk7XG4vKipcbk1vdmUgdGhlIHNlbGVjdGlvbiB0byB0aGUgcHJldmlvdXMgaW5zdGFuY2Ugb2YgdGhlIHNlYXJjaCBxdWVyeSxcbmJlZm9yZSB0aGUgY3VycmVudCBtYWluIHNlbGVjdGlvbi4gV2lsbCB3cmFwIHBhc3QgdGhlIHN0YXJ0XG5vZiB0aGUgZG9jdW1lbnQgdG8gc3RhcnQgc2VhcmNoaW5nIGF0IHRoZSBlbmQgYWdhaW4uXG4qL1xuY29uc3QgZmluZFByZXZpb3VzID0gLypAX19QVVJFX18qL3NlYXJjaENvbW1hbmQoKHZpZXcsIHsgcXVlcnkgfSkgPT4ge1xuICAgIGxldCB7IHN0YXRlIH0gPSB2aWV3LCB7IGZyb20gfSA9IHN0YXRlLnNlbGVjdGlvbi5tYWluO1xuICAgIGxldCBwcmV2ID0gcXVlcnkucHJldk1hdGNoKHN0YXRlLCBmcm9tLCBmcm9tKTtcbiAgICBpZiAoIXByZXYpXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICBsZXQgc2VsZWN0aW9uID0gRWRpdG9yU2VsZWN0aW9uLnNpbmdsZShwcmV2LmZyb20sIHByZXYudG8pO1xuICAgIGxldCBjb25maWcgPSB2aWV3LnN0YXRlLmZhY2V0KHNlYXJjaENvbmZpZ0ZhY2V0KTtcbiAgICB2aWV3LmRpc3BhdGNoKHtcbiAgICAgICAgc2VsZWN0aW9uLFxuICAgICAgICBlZmZlY3RzOiBbYW5ub3VuY2VNYXRjaCh2aWV3LCBwcmV2KSwgY29uZmlnLnNjcm9sbFRvTWF0Y2goc2VsZWN0aW9uLm1haW4sIHZpZXcpXSxcbiAgICAgICAgdXNlckV2ZW50OiBcInNlbGVjdC5zZWFyY2hcIlxuICAgIH0pO1xuICAgIHNlbGVjdFNlYXJjaElucHV0KHZpZXcpO1xuICAgIHJldHVybiB0cnVlO1xufSk7XG4vKipcblNlbGVjdCBhbGwgaW5zdGFuY2VzIG9mIHRoZSBzZWFyY2ggcXVlcnkuXG4qL1xuY29uc3Qgc2VsZWN0TWF0Y2hlcyA9IC8qQF9fUFVSRV9fKi9zZWFyY2hDb21tYW5kKCh2aWV3LCB7IHF1ZXJ5IH0pID0+IHtcbiAgICBsZXQgcmFuZ2VzID0gcXVlcnkubWF0Y2hBbGwodmlldy5zdGF0ZSwgMTAwMCk7XG4gICAgaWYgKCFyYW5nZXMgfHwgIXJhbmdlcy5sZW5ndGgpXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB2aWV3LmRpc3BhdGNoKHtcbiAgICAgICAgc2VsZWN0aW9uOiBFZGl0b3JTZWxlY3Rpb24uY3JlYXRlKHJhbmdlcy5tYXAociA9PiBFZGl0b3JTZWxlY3Rpb24ucmFuZ2Uoci5mcm9tLCByLnRvKSkpLFxuICAgICAgICB1c2VyRXZlbnQ6IFwic2VsZWN0LnNlYXJjaC5tYXRjaGVzXCJcbiAgICB9KTtcbiAgICByZXR1cm4gdHJ1ZTtcbn0pO1xuLyoqXG5TZWxlY3QgYWxsIGluc3RhbmNlcyBvZiB0aGUgY3VycmVudGx5IHNlbGVjdGVkIHRleHQuXG4qL1xuY29uc3Qgc2VsZWN0U2VsZWN0aW9uTWF0Y2hlcyA9ICh7IHN0YXRlLCBkaXNwYXRjaCB9KSA9PiB7XG4gICAgbGV0IHNlbCA9IHN0YXRlLnNlbGVjdGlvbjtcbiAgICBpZiAoc2VsLnJhbmdlcy5sZW5ndGggPiAxIHx8IHNlbC5tYWluLmVtcHR5KVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgbGV0IHsgZnJvbSwgdG8gfSA9IHNlbC5tYWluO1xuICAgIGxldCByYW5nZXMgPSBbXSwgbWFpbiA9IDA7XG4gICAgZm9yIChsZXQgY3VyID0gbmV3IFNlYXJjaEN1cnNvcihzdGF0ZS5kb2MsIHN0YXRlLnNsaWNlRG9jKGZyb20sIHRvKSk7ICFjdXIubmV4dCgpLmRvbmU7KSB7XG4gICAgICAgIGlmIChyYW5nZXMubGVuZ3RoID4gMTAwMClcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgaWYgKGN1ci52YWx1ZS5mcm9tID09IGZyb20pXG4gICAgICAgICAgICBtYWluID0gcmFuZ2VzLmxlbmd0aDtcbiAgICAgICAgcmFuZ2VzLnB1c2goRWRpdG9yU2VsZWN0aW9uLnJhbmdlKGN1ci52YWx1ZS5mcm9tLCBjdXIudmFsdWUudG8pKTtcbiAgICB9XG4gICAgZGlzcGF0Y2goc3RhdGUudXBkYXRlKHtcbiAgICAgICAgc2VsZWN0aW9uOiBFZGl0b3JTZWxlY3Rpb24uY3JlYXRlKHJhbmdlcywgbWFpbiksXG4gICAgICAgIHVzZXJFdmVudDogXCJzZWxlY3Quc2VhcmNoLm1hdGNoZXNcIlxuICAgIH0pKTtcbiAgICByZXR1cm4gdHJ1ZTtcbn07XG4vKipcblJlcGxhY2UgdGhlIGN1cnJlbnQgbWF0Y2ggb2YgdGhlIHNlYXJjaCBxdWVyeS5cbiovXG5jb25zdCByZXBsYWNlTmV4dCA9IC8qQF9fUFVSRV9fKi9zZWFyY2hDb21tYW5kKCh2aWV3LCB7IHF1ZXJ5IH0pID0+IHtcbiAgICBsZXQgeyBzdGF0ZSB9ID0gdmlldywgeyBmcm9tLCB0byB9ID0gc3RhdGUuc2VsZWN0aW9uLm1haW47XG4gICAgaWYgKHN0YXRlLnJlYWRPbmx5KVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgbGV0IG1hdGNoID0gcXVlcnkubmV4dE1hdGNoKHN0YXRlLCBmcm9tLCBmcm9tKTtcbiAgICBpZiAoIW1hdGNoKVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgbGV0IG5leHQgPSBtYXRjaDtcbiAgICBsZXQgY2hhbmdlcyA9IFtdLCBzZWxlY3Rpb24sIHJlcGxhY2VtZW50O1xuICAgIGxldCBlZmZlY3RzID0gW107XG4gICAgaWYgKG5leHQuZnJvbSA9PSBmcm9tICYmIG5leHQudG8gPT0gdG8pIHtcbiAgICAgICAgcmVwbGFjZW1lbnQgPSBzdGF0ZS50b1RleHQocXVlcnkuZ2V0UmVwbGFjZW1lbnQobmV4dCkpO1xuICAgICAgICBjaGFuZ2VzLnB1c2goeyBmcm9tOiBuZXh0LmZyb20sIHRvOiBuZXh0LnRvLCBpbnNlcnQ6IHJlcGxhY2VtZW50IH0pO1xuICAgICAgICBuZXh0ID0gcXVlcnkubmV4dE1hdGNoKHN0YXRlLCBuZXh0LmZyb20sIG5leHQudG8pO1xuICAgICAgICBlZmZlY3RzLnB1c2goRWRpdG9yVmlldy5hbm5vdW5jZS5vZihzdGF0ZS5waHJhc2UoXCJyZXBsYWNlZCBtYXRjaCBvbiBsaW5lICRcIiwgc3RhdGUuZG9jLmxpbmVBdChmcm9tKS5udW1iZXIpICsgXCIuXCIpKTtcbiAgICB9XG4gICAgbGV0IGNoYW5nZVNldCA9IHZpZXcuc3RhdGUuY2hhbmdlcyhjaGFuZ2VzKTtcbiAgICBpZiAobmV4dCkge1xuICAgICAgICBzZWxlY3Rpb24gPSBFZGl0b3JTZWxlY3Rpb24uc2luZ2xlKG5leHQuZnJvbSwgbmV4dC50bykubWFwKGNoYW5nZVNldCk7XG4gICAgICAgIGVmZmVjdHMucHVzaChhbm5vdW5jZU1hdGNoKHZpZXcsIG5leHQpKTtcbiAgICAgICAgZWZmZWN0cy5wdXNoKHN0YXRlLmZhY2V0KHNlYXJjaENvbmZpZ0ZhY2V0KS5zY3JvbGxUb01hdGNoKHNlbGVjdGlvbi5tYWluLCB2aWV3KSk7XG4gICAgfVxuICAgIHZpZXcuZGlzcGF0Y2goe1xuICAgICAgICBjaGFuZ2VzOiBjaGFuZ2VTZXQsXG4gICAgICAgIHNlbGVjdGlvbixcbiAgICAgICAgZWZmZWN0cyxcbiAgICAgICAgdXNlckV2ZW50OiBcImlucHV0LnJlcGxhY2VcIlxuICAgIH0pO1xuICAgIHJldHVybiB0cnVlO1xufSk7XG4vKipcblJlcGxhY2UgYWxsIGluc3RhbmNlcyBvZiB0aGUgc2VhcmNoIHF1ZXJ5IHdpdGggdGhlIGdpdmVuXG5yZXBsYWNlbWVudC5cbiovXG5jb25zdCByZXBsYWNlQWxsID0gLypAX19QVVJFX18qL3NlYXJjaENvbW1hbmQoKHZpZXcsIHsgcXVlcnkgfSkgPT4ge1xuICAgIGlmICh2aWV3LnN0YXRlLnJlYWRPbmx5KVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgbGV0IGNoYW5nZXMgPSBxdWVyeS5tYXRjaEFsbCh2aWV3LnN0YXRlLCAxZTkpLm1hcChtYXRjaCA9PiB7XG4gICAgICAgIGxldCB7IGZyb20sIHRvIH0gPSBtYXRjaDtcbiAgICAgICAgcmV0dXJuIHsgZnJvbSwgdG8sIGluc2VydDogcXVlcnkuZ2V0UmVwbGFjZW1lbnQobWF0Y2gpIH07XG4gICAgfSk7XG4gICAgaWYgKCFjaGFuZ2VzLmxlbmd0aClcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIGxldCBhbm5vdW5jZVRleHQgPSB2aWV3LnN0YXRlLnBocmFzZShcInJlcGxhY2VkICQgbWF0Y2hlc1wiLCBjaGFuZ2VzLmxlbmd0aCkgKyBcIi5cIjtcbiAgICB2aWV3LmRpc3BhdGNoKHtcbiAgICAgICAgY2hhbmdlcyxcbiAgICAgICAgZWZmZWN0czogRWRpdG9yVmlldy5hbm5vdW5jZS5vZihhbm5vdW5jZVRleHQpLFxuICAgICAgICB1c2VyRXZlbnQ6IFwiaW5wdXQucmVwbGFjZS5hbGxcIlxuICAgIH0pO1xuICAgIHJldHVybiB0cnVlO1xufSk7XG5mdW5jdGlvbiBjcmVhdGVTZWFyY2hQYW5lbCh2aWV3KSB7XG4gICAgcmV0dXJuIHZpZXcuc3RhdGUuZmFjZXQoc2VhcmNoQ29uZmlnRmFjZXQpLmNyZWF0ZVBhbmVsKHZpZXcpO1xufVxuZnVuY3Rpb24gZGVmYXVsdFF1ZXJ5KHN0YXRlLCBmYWxsYmFjaykge1xuICAgIHZhciBfYSwgX2IsIF9jLCBfZCwgX2U7XG4gICAgbGV0IHNlbCA9IHN0YXRlLnNlbGVjdGlvbi5tYWluO1xuICAgIGxldCBzZWxUZXh0ID0gc2VsLmVtcHR5IHx8IHNlbC50byA+IHNlbC5mcm9tICsgMTAwID8gXCJcIiA6IHN0YXRlLnNsaWNlRG9jKHNlbC5mcm9tLCBzZWwudG8pO1xuICAgIGlmIChmYWxsYmFjayAmJiAhc2VsVGV4dClcbiAgICAgICAgcmV0dXJuIGZhbGxiYWNrO1xuICAgIGxldCBjb25maWcgPSBzdGF0ZS5mYWNldChzZWFyY2hDb25maWdGYWNldCk7XG4gICAgcmV0dXJuIG5ldyBTZWFyY2hRdWVyeSh7XG4gICAgICAgIHNlYXJjaDogKChfYSA9IGZhbGxiYWNrID09PSBudWxsIHx8IGZhbGxiYWNrID09PSB2b2lkIDAgPyB2b2lkIDAgOiBmYWxsYmFjay5saXRlcmFsKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiBjb25maWcubGl0ZXJhbCkgPyBzZWxUZXh0IDogc2VsVGV4dC5yZXBsYWNlKC9cXG4vZywgXCJcXFxcblwiKSxcbiAgICAgICAgY2FzZVNlbnNpdGl2ZTogKF9iID0gZmFsbGJhY2sgPT09IG51bGwgfHwgZmFsbGJhY2sgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGZhbGxiYWNrLmNhc2VTZW5zaXRpdmUpICE9PSBudWxsICYmIF9iICE9PSB2b2lkIDAgPyBfYiA6IGNvbmZpZy5jYXNlU2Vuc2l0aXZlLFxuICAgICAgICBsaXRlcmFsOiAoX2MgPSBmYWxsYmFjayA9PT0gbnVsbCB8fCBmYWxsYmFjayA9PT0gdm9pZCAwID8gdm9pZCAwIDogZmFsbGJhY2subGl0ZXJhbCkgIT09IG51bGwgJiYgX2MgIT09IHZvaWQgMCA/IF9jIDogY29uZmlnLmxpdGVyYWwsXG4gICAgICAgIHJlZ2V4cDogKF9kID0gZmFsbGJhY2sgPT09IG51bGwgfHwgZmFsbGJhY2sgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGZhbGxiYWNrLnJlZ2V4cCkgIT09IG51bGwgJiYgX2QgIT09IHZvaWQgMCA/IF9kIDogY29uZmlnLnJlZ2V4cCxcbiAgICAgICAgd2hvbGVXb3JkOiAoX2UgPSBmYWxsYmFjayA9PT0gbnVsbCB8fCBmYWxsYmFjayA9PT0gdm9pZCAwID8gdm9pZCAwIDogZmFsbGJhY2sud2hvbGVXb3JkKSAhPT0gbnVsbCAmJiBfZSAhPT0gdm9pZCAwID8gX2UgOiBjb25maWcud2hvbGVXb3JkXG4gICAgfSk7XG59XG5mdW5jdGlvbiBnZXRTZWFyY2hJbnB1dCh2aWV3KSB7XG4gICAgbGV0IHBhbmVsID0gZ2V0UGFuZWwodmlldywgY3JlYXRlU2VhcmNoUGFuZWwpO1xuICAgIHJldHVybiBwYW5lbCAmJiBwYW5lbC5kb20ucXVlcnlTZWxlY3RvcihcIlttYWluLWZpZWxkXVwiKTtcbn1cbmZ1bmN0aW9uIHNlbGVjdFNlYXJjaElucHV0KHZpZXcpIHtcbiAgICBsZXQgaW5wdXQgPSBnZXRTZWFyY2hJbnB1dCh2aWV3KTtcbiAgICBpZiAoaW5wdXQgJiYgaW5wdXQgPT0gdmlldy5yb290LmFjdGl2ZUVsZW1lbnQpXG4gICAgICAgIGlucHV0LnNlbGVjdCgpO1xufVxuLyoqXG5NYWtlIHN1cmUgdGhlIHNlYXJjaCBwYW5lbCBpcyBvcGVuIGFuZCBmb2N1c2VkLlxuKi9cbmNvbnN0IG9wZW5TZWFyY2hQYW5lbCA9IHZpZXcgPT4ge1xuICAgIGxldCBzdGF0ZSA9IHZpZXcuc3RhdGUuZmllbGQoc2VhcmNoU3RhdGUsIGZhbHNlKTtcbiAgICBpZiAoc3RhdGUgJiYgc3RhdGUucGFuZWwpIHtcbiAgICAgICAgbGV0IHNlYXJjaElucHV0ID0gZ2V0U2VhcmNoSW5wdXQodmlldyk7XG4gICAgICAgIGlmIChzZWFyY2hJbnB1dCAmJiBzZWFyY2hJbnB1dCAhPSB2aWV3LnJvb3QuYWN0aXZlRWxlbWVudCkge1xuICAgICAgICAgICAgbGV0IHF1ZXJ5ID0gZGVmYXVsdFF1ZXJ5KHZpZXcuc3RhdGUsIHN0YXRlLnF1ZXJ5LnNwZWMpO1xuICAgICAgICAgICAgaWYgKHF1ZXJ5LnZhbGlkKVxuICAgICAgICAgICAgICAgIHZpZXcuZGlzcGF0Y2goeyBlZmZlY3RzOiBzZXRTZWFyY2hRdWVyeS5vZihxdWVyeSkgfSk7XG4gICAgICAgICAgICBzZWFyY2hJbnB1dC5mb2N1cygpO1xuICAgICAgICAgICAgc2VhcmNoSW5wdXQuc2VsZWN0KCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHZpZXcuZGlzcGF0Y2goeyBlZmZlY3RzOiBbXG4gICAgICAgICAgICAgICAgdG9nZ2xlUGFuZWwub2YodHJ1ZSksXG4gICAgICAgICAgICAgICAgc3RhdGUgPyBzZXRTZWFyY2hRdWVyeS5vZihkZWZhdWx0UXVlcnkodmlldy5zdGF0ZSwgc3RhdGUucXVlcnkuc3BlYykpIDogU3RhdGVFZmZlY3QuYXBwZW5kQ29uZmlnLm9mKHNlYXJjaEV4dGVuc2lvbnMpXG4gICAgICAgICAgICBdIH0pO1xuICAgIH1cbiAgICByZXR1cm4gdHJ1ZTtcbn07XG4vKipcbkNsb3NlIHRoZSBzZWFyY2ggcGFuZWwuXG4qL1xuY29uc3QgY2xvc2VTZWFyY2hQYW5lbCA9IHZpZXcgPT4ge1xuICAgIGxldCBzdGF0ZSA9IHZpZXcuc3RhdGUuZmllbGQoc2VhcmNoU3RhdGUsIGZhbHNlKTtcbiAgICBpZiAoIXN0YXRlIHx8ICFzdGF0ZS5wYW5lbClcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIGxldCBwYW5lbCA9IGdldFBhbmVsKHZpZXcsIGNyZWF0ZVNlYXJjaFBhbmVsKTtcbiAgICBpZiAocGFuZWwgJiYgcGFuZWwuZG9tLmNvbnRhaW5zKHZpZXcucm9vdC5hY3RpdmVFbGVtZW50KSlcbiAgICAgICAgdmlldy5mb2N1cygpO1xuICAgIHZpZXcuZGlzcGF0Y2goeyBlZmZlY3RzOiB0b2dnbGVQYW5lbC5vZihmYWxzZSkgfSk7XG4gICAgcmV0dXJuIHRydWU7XG59O1xuLyoqXG5EZWZhdWx0IHNlYXJjaC1yZWxhdGVkIGtleSBiaW5kaW5ncy5cblxuIC0gTW9kLWY6IFtgb3BlblNlYXJjaFBhbmVsYF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNzZWFyY2gub3BlblNlYXJjaFBhbmVsKVxuIC0gRjMsIE1vZC1nOiBbYGZpbmROZXh0YF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNzZWFyY2guZmluZE5leHQpXG4gLSBTaGlmdC1GMywgU2hpZnQtTW9kLWc6IFtgZmluZFByZXZpb3VzYF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNzZWFyY2guZmluZFByZXZpb3VzKVxuIC0gTW9kLUFsdC1nOiBbYGdvdG9MaW5lYF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNzZWFyY2guZ290b0xpbmUpXG4gLSBNb2QtZDogW2BzZWxlY3ROZXh0T2NjdXJyZW5jZWBdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jc2VhcmNoLnNlbGVjdE5leHRPY2N1cnJlbmNlKVxuKi9cbmNvbnN0IHNlYXJjaEtleW1hcCA9IFtcbiAgICB7IGtleTogXCJNb2QtZlwiLCBydW46IG9wZW5TZWFyY2hQYW5lbCwgc2NvcGU6IFwiZWRpdG9yIHNlYXJjaC1wYW5lbFwiIH0sXG4gICAgeyBrZXk6IFwiRjNcIiwgcnVuOiBmaW5kTmV4dCwgc2hpZnQ6IGZpbmRQcmV2aW91cywgc2NvcGU6IFwiZWRpdG9yIHNlYXJjaC1wYW5lbFwiLCBwcmV2ZW50RGVmYXVsdDogdHJ1ZSB9LFxuICAgIHsga2V5OiBcIk1vZC1nXCIsIHJ1bjogZmluZE5leHQsIHNoaWZ0OiBmaW5kUHJldmlvdXMsIHNjb3BlOiBcImVkaXRvciBzZWFyY2gtcGFuZWxcIiwgcHJldmVudERlZmF1bHQ6IHRydWUgfSxcbiAgICB7IGtleTogXCJFc2NhcGVcIiwgcnVuOiBjbG9zZVNlYXJjaFBhbmVsLCBzY29wZTogXCJlZGl0b3Igc2VhcmNoLXBhbmVsXCIgfSxcbiAgICB7IGtleTogXCJNb2QtU2hpZnQtbFwiLCBydW46IHNlbGVjdFNlbGVjdGlvbk1hdGNoZXMgfSxcbiAgICB7IGtleTogXCJNb2QtQWx0LWdcIiwgcnVuOiBnb3RvTGluZSB9LFxuICAgIHsga2V5OiBcIk1vZC1kXCIsIHJ1bjogc2VsZWN0TmV4dE9jY3VycmVuY2UsIHByZXZlbnREZWZhdWx0OiB0cnVlIH0sXG5dO1xuY2xhc3MgU2VhcmNoUGFuZWwge1xuICAgIGNvbnN0cnVjdG9yKHZpZXcpIHtcbiAgICAgICAgdGhpcy52aWV3ID0gdmlldztcbiAgICAgICAgbGV0IHF1ZXJ5ID0gdGhpcy5xdWVyeSA9IHZpZXcuc3RhdGUuZmllbGQoc2VhcmNoU3RhdGUpLnF1ZXJ5LnNwZWM7XG4gICAgICAgIHRoaXMuY29tbWl0ID0gdGhpcy5jb21taXQuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5zZWFyY2hGaWVsZCA9IGVsdChcImlucHV0XCIsIHtcbiAgICAgICAgICAgIHZhbHVlOiBxdWVyeS5zZWFyY2gsXG4gICAgICAgICAgICBwbGFjZWhvbGRlcjogcGhyYXNlKHZpZXcsIFwiRmluZFwiKSxcbiAgICAgICAgICAgIFwiYXJpYS1sYWJlbFwiOiBwaHJhc2UodmlldywgXCJGaW5kXCIpLFxuICAgICAgICAgICAgY2xhc3M6IFwiY20tdGV4dGZpZWxkXCIsXG4gICAgICAgICAgICBuYW1lOiBcInNlYXJjaFwiLFxuICAgICAgICAgICAgZm9ybTogXCJcIixcbiAgICAgICAgICAgIFwibWFpbi1maWVsZFwiOiBcInRydWVcIixcbiAgICAgICAgICAgIG9uY2hhbmdlOiB0aGlzLmNvbW1pdCxcbiAgICAgICAgICAgIG9ua2V5dXA6IHRoaXMuY29tbWl0XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLnJlcGxhY2VGaWVsZCA9IGVsdChcImlucHV0XCIsIHtcbiAgICAgICAgICAgIHZhbHVlOiBxdWVyeS5yZXBsYWNlLFxuICAgICAgICAgICAgcGxhY2Vob2xkZXI6IHBocmFzZSh2aWV3LCBcIlJlcGxhY2VcIiksXG4gICAgICAgICAgICBcImFyaWEtbGFiZWxcIjogcGhyYXNlKHZpZXcsIFwiUmVwbGFjZVwiKSxcbiAgICAgICAgICAgIGNsYXNzOiBcImNtLXRleHRmaWVsZFwiLFxuICAgICAgICAgICAgbmFtZTogXCJyZXBsYWNlXCIsXG4gICAgICAgICAgICBmb3JtOiBcIlwiLFxuICAgICAgICAgICAgb25jaGFuZ2U6IHRoaXMuY29tbWl0LFxuICAgICAgICAgICAgb25rZXl1cDogdGhpcy5jb21taXRcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuY2FzZUZpZWxkID0gZWx0KFwiaW5wdXRcIiwge1xuICAgICAgICAgICAgdHlwZTogXCJjaGVja2JveFwiLFxuICAgICAgICAgICAgbmFtZTogXCJjYXNlXCIsXG4gICAgICAgICAgICBmb3JtOiBcIlwiLFxuICAgICAgICAgICAgY2hlY2tlZDogcXVlcnkuY2FzZVNlbnNpdGl2ZSxcbiAgICAgICAgICAgIG9uY2hhbmdlOiB0aGlzLmNvbW1pdFxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5yZUZpZWxkID0gZWx0KFwiaW5wdXRcIiwge1xuICAgICAgICAgICAgdHlwZTogXCJjaGVja2JveFwiLFxuICAgICAgICAgICAgbmFtZTogXCJyZVwiLFxuICAgICAgICAgICAgZm9ybTogXCJcIixcbiAgICAgICAgICAgIGNoZWNrZWQ6IHF1ZXJ5LnJlZ2V4cCxcbiAgICAgICAgICAgIG9uY2hhbmdlOiB0aGlzLmNvbW1pdFxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy53b3JkRmllbGQgPSBlbHQoXCJpbnB1dFwiLCB7XG4gICAgICAgICAgICB0eXBlOiBcImNoZWNrYm94XCIsXG4gICAgICAgICAgICBuYW1lOiBcIndvcmRcIixcbiAgICAgICAgICAgIGZvcm06IFwiXCIsXG4gICAgICAgICAgICBjaGVja2VkOiBxdWVyeS53aG9sZVdvcmQsXG4gICAgICAgICAgICBvbmNoYW5nZTogdGhpcy5jb21taXRcbiAgICAgICAgfSk7XG4gICAgICAgIGZ1bmN0aW9uIGJ1dHRvbihuYW1lLCBvbmNsaWNrLCBjb250ZW50KSB7XG4gICAgICAgICAgICByZXR1cm4gZWx0KFwiYnV0dG9uXCIsIHsgY2xhc3M6IFwiY20tYnV0dG9uXCIsIG5hbWUsIG9uY2xpY2ssIHR5cGU6IFwiYnV0dG9uXCIgfSwgY29udGVudCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5kb20gPSBlbHQoXCJkaXZcIiwgeyBvbmtleWRvd246IChlKSA9PiB0aGlzLmtleWRvd24oZSksIGNsYXNzOiBcImNtLXNlYXJjaFwiIH0sIFtcbiAgICAgICAgICAgIHRoaXMuc2VhcmNoRmllbGQsXG4gICAgICAgICAgICBidXR0b24oXCJuZXh0XCIsICgpID0+IGZpbmROZXh0KHZpZXcpLCBbcGhyYXNlKHZpZXcsIFwibmV4dFwiKV0pLFxuICAgICAgICAgICAgYnV0dG9uKFwicHJldlwiLCAoKSA9PiBmaW5kUHJldmlvdXModmlldyksIFtwaHJhc2UodmlldywgXCJwcmV2aW91c1wiKV0pLFxuICAgICAgICAgICAgYnV0dG9uKFwic2VsZWN0XCIsICgpID0+IHNlbGVjdE1hdGNoZXModmlldyksIFtwaHJhc2UodmlldywgXCJhbGxcIildKSxcbiAgICAgICAgICAgIGVsdChcImxhYmVsXCIsIG51bGwsIFt0aGlzLmNhc2VGaWVsZCwgcGhyYXNlKHZpZXcsIFwibWF0Y2ggY2FzZVwiKV0pLFxuICAgICAgICAgICAgZWx0KFwibGFiZWxcIiwgbnVsbCwgW3RoaXMucmVGaWVsZCwgcGhyYXNlKHZpZXcsIFwicmVnZXhwXCIpXSksXG4gICAgICAgICAgICBlbHQoXCJsYWJlbFwiLCBudWxsLCBbdGhpcy53b3JkRmllbGQsIHBocmFzZSh2aWV3LCBcImJ5IHdvcmRcIildKSxcbiAgICAgICAgICAgIC4uLnZpZXcuc3RhdGUucmVhZE9ubHkgPyBbXSA6IFtcbiAgICAgICAgICAgICAgICBlbHQoXCJiclwiKSxcbiAgICAgICAgICAgICAgICB0aGlzLnJlcGxhY2VGaWVsZCxcbiAgICAgICAgICAgICAgICBidXR0b24oXCJyZXBsYWNlXCIsICgpID0+IHJlcGxhY2VOZXh0KHZpZXcpLCBbcGhyYXNlKHZpZXcsIFwicmVwbGFjZVwiKV0pLFxuICAgICAgICAgICAgICAgIGJ1dHRvbihcInJlcGxhY2VBbGxcIiwgKCkgPT4gcmVwbGFjZUFsbCh2aWV3KSwgW3BocmFzZSh2aWV3LCBcInJlcGxhY2UgYWxsXCIpXSlcbiAgICAgICAgICAgIF0sXG4gICAgICAgICAgICBlbHQoXCJidXR0b25cIiwge1xuICAgICAgICAgICAgICAgIG5hbWU6IFwiY2xvc2VcIixcbiAgICAgICAgICAgICAgICBvbmNsaWNrOiAoKSA9PiBjbG9zZVNlYXJjaFBhbmVsKHZpZXcpLFxuICAgICAgICAgICAgICAgIFwiYXJpYS1sYWJlbFwiOiBwaHJhc2UodmlldywgXCJjbG9zZVwiKSxcbiAgICAgICAgICAgICAgICB0eXBlOiBcImJ1dHRvblwiXG4gICAgICAgICAgICB9LCBbXCLDl1wiXSlcbiAgICAgICAgXSk7XG4gICAgfVxuICAgIGNvbW1pdCgpIHtcbiAgICAgICAgbGV0IHF1ZXJ5ID0gbmV3IFNlYXJjaFF1ZXJ5KHtcbiAgICAgICAgICAgIHNlYXJjaDogdGhpcy5zZWFyY2hGaWVsZC52YWx1ZSxcbiAgICAgICAgICAgIGNhc2VTZW5zaXRpdmU6IHRoaXMuY2FzZUZpZWxkLmNoZWNrZWQsXG4gICAgICAgICAgICByZWdleHA6IHRoaXMucmVGaWVsZC5jaGVja2VkLFxuICAgICAgICAgICAgd2hvbGVXb3JkOiB0aGlzLndvcmRGaWVsZC5jaGVja2VkLFxuICAgICAgICAgICAgcmVwbGFjZTogdGhpcy5yZXBsYWNlRmllbGQudmFsdWUsXG4gICAgICAgIH0pO1xuICAgICAgICBpZiAoIXF1ZXJ5LmVxKHRoaXMucXVlcnkpKSB7XG4gICAgICAgICAgICB0aGlzLnF1ZXJ5ID0gcXVlcnk7XG4gICAgICAgICAgICB0aGlzLnZpZXcuZGlzcGF0Y2goeyBlZmZlY3RzOiBzZXRTZWFyY2hRdWVyeS5vZihxdWVyeSkgfSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAga2V5ZG93bihlKSB7XG4gICAgICAgIGlmIChydW5TY29wZUhhbmRsZXJzKHRoaXMudmlldywgZSwgXCJzZWFyY2gtcGFuZWxcIikpIHtcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChlLmtleUNvZGUgPT0gMTMgJiYgZS50YXJnZXQgPT0gdGhpcy5zZWFyY2hGaWVsZCkge1xuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgKGUuc2hpZnRLZXkgPyBmaW5kUHJldmlvdXMgOiBmaW5kTmV4dCkodGhpcy52aWV3KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChlLmtleUNvZGUgPT0gMTMgJiYgZS50YXJnZXQgPT0gdGhpcy5yZXBsYWNlRmllbGQpIHtcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIHJlcGxhY2VOZXh0KHRoaXMudmlldyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgdXBkYXRlKHVwZGF0ZSkge1xuICAgICAgICBmb3IgKGxldCB0ciBvZiB1cGRhdGUudHJhbnNhY3Rpb25zKVxuICAgICAgICAgICAgZm9yIChsZXQgZWZmZWN0IG9mIHRyLmVmZmVjdHMpIHtcbiAgICAgICAgICAgICAgICBpZiAoZWZmZWN0LmlzKHNldFNlYXJjaFF1ZXJ5KSAmJiAhZWZmZWN0LnZhbHVlLmVxKHRoaXMucXVlcnkpKVxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNldFF1ZXJ5KGVmZmVjdC52YWx1ZSk7XG4gICAgICAgICAgICB9XG4gICAgfVxuICAgIHNldFF1ZXJ5KHF1ZXJ5KSB7XG4gICAgICAgIHRoaXMucXVlcnkgPSBxdWVyeTtcbiAgICAgICAgdGhpcy5zZWFyY2hGaWVsZC52YWx1ZSA9IHF1ZXJ5LnNlYXJjaDtcbiAgICAgICAgdGhpcy5yZXBsYWNlRmllbGQudmFsdWUgPSBxdWVyeS5yZXBsYWNlO1xuICAgICAgICB0aGlzLmNhc2VGaWVsZC5jaGVja2VkID0gcXVlcnkuY2FzZVNlbnNpdGl2ZTtcbiAgICAgICAgdGhpcy5yZUZpZWxkLmNoZWNrZWQgPSBxdWVyeS5yZWdleHA7XG4gICAgICAgIHRoaXMud29yZEZpZWxkLmNoZWNrZWQgPSBxdWVyeS53aG9sZVdvcmQ7XG4gICAgfVxuICAgIG1vdW50KCkge1xuICAgICAgICB0aGlzLnNlYXJjaEZpZWxkLnNlbGVjdCgpO1xuICAgIH1cbiAgICBnZXQgcG9zKCkgeyByZXR1cm4gODA7IH1cbiAgICBnZXQgdG9wKCkgeyByZXR1cm4gdGhpcy52aWV3LnN0YXRlLmZhY2V0KHNlYXJjaENvbmZpZ0ZhY2V0KS50b3A7IH1cbn1cbmZ1bmN0aW9uIHBocmFzZSh2aWV3LCBwaHJhc2UpIHsgcmV0dXJuIHZpZXcuc3RhdGUucGhyYXNlKHBocmFzZSk7IH1cbmNvbnN0IEFubm91bmNlTWFyZ2luID0gMzA7XG5jb25zdCBCcmVhayA9IC9bXFxzXFwuLDo7PyFdLztcbmZ1bmN0aW9uIGFubm91bmNlTWF0Y2godmlldywgeyBmcm9tLCB0byB9KSB7XG4gICAgbGV0IGxpbmUgPSB2aWV3LnN0YXRlLmRvYy5saW5lQXQoZnJvbSksIGxpbmVFbmQgPSB2aWV3LnN0YXRlLmRvYy5saW5lQXQodG8pLnRvO1xuICAgIGxldCBzdGFydCA9IE1hdGgubWF4KGxpbmUuZnJvbSwgZnJvbSAtIEFubm91bmNlTWFyZ2luKSwgZW5kID0gTWF0aC5taW4obGluZUVuZCwgdG8gKyBBbm5vdW5jZU1hcmdpbik7XG4gICAgbGV0IHRleHQgPSB2aWV3LnN0YXRlLnNsaWNlRG9jKHN0YXJ0LCBlbmQpO1xuICAgIGlmIChzdGFydCAhPSBsaW5lLmZyb20pIHtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBBbm5vdW5jZU1hcmdpbjsgaSsrKVxuICAgICAgICAgICAgaWYgKCFCcmVhay50ZXN0KHRleHRbaSArIDFdKSAmJiBCcmVhay50ZXN0KHRleHRbaV0pKSB7XG4gICAgICAgICAgICAgICAgdGV4dCA9IHRleHQuc2xpY2UoaSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgfVxuICAgIGlmIChlbmQgIT0gbGluZUVuZCkge1xuICAgICAgICBmb3IgKGxldCBpID0gdGV4dC5sZW5ndGggLSAxOyBpID4gdGV4dC5sZW5ndGggLSBBbm5vdW5jZU1hcmdpbjsgaS0tKVxuICAgICAgICAgICAgaWYgKCFCcmVhay50ZXN0KHRleHRbaSAtIDFdKSAmJiBCcmVhay50ZXN0KHRleHRbaV0pKSB7XG4gICAgICAgICAgICAgICAgdGV4dCA9IHRleHQuc2xpY2UoMCwgaSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBFZGl0b3JWaWV3LmFubm91bmNlLm9mKGAke3ZpZXcuc3RhdGUucGhyYXNlKFwiY3VycmVudCBtYXRjaFwiKX0uICR7dGV4dH0gJHt2aWV3LnN0YXRlLnBocmFzZShcIm9uIGxpbmVcIil9ICR7bGluZS5udW1iZXJ9LmApO1xufVxuY29uc3QgYmFzZVRoZW1lID0gLypAX19QVVJFX18qL0VkaXRvclZpZXcuYmFzZVRoZW1lKHtcbiAgICBcIi5jbS1wYW5lbC5jbS1zZWFyY2hcIjoge1xuICAgICAgICBwYWRkaW5nOiBcIjJweCA2cHggNHB4XCIsXG4gICAgICAgIHBvc2l0aW9uOiBcInJlbGF0aXZlXCIsXG4gICAgICAgIFwiJiBbbmFtZT1jbG9zZV1cIjoge1xuICAgICAgICAgICAgcG9zaXRpb246IFwiYWJzb2x1dGVcIixcbiAgICAgICAgICAgIHRvcDogXCIwXCIsXG4gICAgICAgICAgICByaWdodDogXCI0cHhcIixcbiAgICAgICAgICAgIGJhY2tncm91bmRDb2xvcjogXCJpbmhlcml0XCIsXG4gICAgICAgICAgICBib3JkZXI6IFwibm9uZVwiLFxuICAgICAgICAgICAgZm9udDogXCJpbmhlcml0XCIsXG4gICAgICAgICAgICBwYWRkaW5nOiAwLFxuICAgICAgICAgICAgbWFyZ2luOiAwXG4gICAgICAgIH0sXG4gICAgICAgIFwiJiBpbnB1dCwgJiBidXR0b24sICYgbGFiZWxcIjoge1xuICAgICAgICAgICAgbWFyZ2luOiBcIi4yZW0gLjZlbSAuMmVtIDBcIlxuICAgICAgICB9LFxuICAgICAgICBcIiYgaW5wdXRbdHlwZT1jaGVja2JveF1cIjoge1xuICAgICAgICAgICAgbWFyZ2luUmlnaHQ6IFwiLjJlbVwiXG4gICAgICAgIH0sXG4gICAgICAgIFwiJiBsYWJlbFwiOiB7XG4gICAgICAgICAgICBmb250U2l6ZTogXCI4MCVcIixcbiAgICAgICAgICAgIHdoaXRlU3BhY2U6IFwicHJlXCJcbiAgICAgICAgfVxuICAgIH0sXG4gICAgXCImbGlnaHQgLmNtLXNlYXJjaE1hdGNoXCI6IHsgYmFja2dyb3VuZENvbG9yOiBcIiNmZmZmMDA1NFwiIH0sXG4gICAgXCImZGFyayAuY20tc2VhcmNoTWF0Y2hcIjogeyBiYWNrZ3JvdW5kQ29sb3I6IFwiIzAwZmZmZjhhXCIgfSxcbiAgICBcIiZsaWdodCAuY20tc2VhcmNoTWF0Y2gtc2VsZWN0ZWRcIjogeyBiYWNrZ3JvdW5kQ29sb3I6IFwiI2ZmNmEwMDU0XCIgfSxcbiAgICBcIiZkYXJrIC5jbS1zZWFyY2hNYXRjaC1zZWxlY3RlZFwiOiB7IGJhY2tncm91bmRDb2xvcjogXCIjZmYwMGZmOGFcIiB9XG59KTtcbmNvbnN0IHNlYXJjaEV4dGVuc2lvbnMgPSBbXG4gICAgc2VhcmNoU3RhdGUsXG4gICAgLypAX19QVVJFX18qL1ByZWMubG93KHNlYXJjaEhpZ2hsaWdodGVyKSxcbiAgICBiYXNlVGhlbWVcbl07XG5cbmV4cG9ydCB7IFJlZ0V4cEN1cnNvciwgU2VhcmNoQ3Vyc29yLCBTZWFyY2hRdWVyeSwgY2xvc2VTZWFyY2hQYW5lbCwgZmluZE5leHQsIGZpbmRQcmV2aW91cywgZ2V0U2VhcmNoUXVlcnksIGdvdG9MaW5lLCBoaWdobGlnaHRTZWxlY3Rpb25NYXRjaGVzLCBvcGVuU2VhcmNoUGFuZWwsIHJlcGxhY2VBbGwsIHJlcGxhY2VOZXh0LCBzZWFyY2gsIHNlYXJjaEtleW1hcCwgc2VhcmNoUGFuZWxPcGVuLCBzZWxlY3RNYXRjaGVzLCBzZWxlY3ROZXh0T2NjdXJyZW5jZSwgc2VsZWN0U2VsZWN0aW9uTWF0Y2hlcywgc2V0U2VhcmNoUXVlcnkgfTtcbiIsCiAgICAiaW1wb3J0IHsgQW5ub3RhdGlvbiwgU3RhdGVFZmZlY3QsIEVkaXRvclNlbGVjdGlvbiwgY29kZVBvaW50QXQsIGNvZGVQb2ludFNpemUsIGZyb21Db2RlUG9pbnQsIEZhY2V0LCBjb21iaW5lQ29uZmlnLCBTdGF0ZUZpZWxkLCBQcmVjLCBUZXh0LCBUcmFuc2FjdGlvbiwgTWFwTW9kZSwgUmFuZ2VWYWx1ZSwgUmFuZ2VTZXQsIENoYXJDYXRlZ29yeSB9IGZyb20gJ0Bjb2RlbWlycm9yL3N0YXRlJztcbmltcG9ydCB7IERpcmVjdGlvbiwgbG9nRXhjZXB0aW9uLCBzaG93VG9vbHRpcCwgRWRpdG9yVmlldywgVmlld1BsdWdpbiwgZ2V0VG9vbHRpcCwgRGVjb3JhdGlvbiwgV2lkZ2V0VHlwZSwga2V5bWFwIH0gZnJvbSAnQGNvZGVtaXJyb3Ivdmlldyc7XG5pbXBvcnQgeyBzeW50YXhUcmVlLCBpbmRlbnRVbml0IH0gZnJvbSAnQGNvZGVtaXJyb3IvbGFuZ3VhZ2UnO1xuXG4vKipcbkFuIGluc3RhbmNlIG9mIHRoaXMgaXMgcGFzc2VkIHRvIGNvbXBsZXRpb24gc291cmNlIGZ1bmN0aW9ucy5cbiovXG5jbGFzcyBDb21wbGV0aW9uQ29udGV4dCB7XG4gICAgLyoqXG4gICAgQ3JlYXRlIGEgbmV3IGNvbXBsZXRpb24gY29udGV4dC4gKE1vc3RseSB1c2VmdWwgZm9yIHRlc3RpbmdcbiAgICBjb21wbGV0aW9uIHNvdXJjZXPigJRpbiB0aGUgZWRpdG9yLCB0aGUgZXh0ZW5zaW9uIHdpbGwgY3JlYXRlXG4gICAgdGhlc2UgZm9yIHlvdS4pXG4gICAgKi9cbiAgICBjb25zdHJ1Y3RvcihcbiAgICAvKipcbiAgICBUaGUgZWRpdG9yIHN0YXRlIHRoYXQgdGhlIGNvbXBsZXRpb24gaGFwcGVucyBpbi5cbiAgICAqL1xuICAgIHN0YXRlLCBcbiAgICAvKipcbiAgICBUaGUgcG9zaXRpb24gYXQgd2hpY2ggdGhlIGNvbXBsZXRpb24gaXMgaGFwcGVuaW5nLlxuICAgICovXG4gICAgcG9zLCBcbiAgICAvKipcbiAgICBJbmRpY2F0ZXMgd2hldGhlciBjb21wbGV0aW9uIHdhcyBhY3RpdmF0ZWQgZXhwbGljaXRseSwgb3JcbiAgICBpbXBsaWNpdGx5IGJ5IHR5cGluZy4gVGhlIHVzdWFsIHdheSB0byByZXNwb25kIHRvIHRoaXMgaXMgdG9cbiAgICBvbmx5IHJldHVybiBjb21wbGV0aW9ucyB3aGVuIGVpdGhlciB0aGVyZSBpcyBwYXJ0IG9mIGFcbiAgICBjb21wbGV0YWJsZSBlbnRpdHkgYmVmb3JlIHRoZSBjdXJzb3IsIG9yIGBleHBsaWNpdGAgaXMgdHJ1ZS5cbiAgICAqL1xuICAgIGV4cGxpY2l0LCBcbiAgICAvKipcbiAgICBUaGUgZWRpdG9yIHZpZXcuIE1heSBiZSB1bmRlZmluZWQgaWYgdGhlIGNvbnRleHQgd2FzIGNyZWF0ZWRcbiAgICBpbiBhIHNpdHVhdGlvbiB3aGVyZSB0aGVyZSBpcyBubyBzdWNoIHZpZXcgYXZhaWxhYmxlLCBzdWNoIGFzXG4gICAgaW4gc3luY2hyb25vdXMgdXBkYXRlcyB2aWFcbiAgICBbYENvbXBsZXRpb25SZXN1bHQudXBkYXRlYF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNhdXRvY29tcGxldGUuQ29tcGxldGlvblJlc3VsdC51cGRhdGUpXG4gICAgb3Igd2hlbiBjYWxsZWQgYnkgdGVzdCBjb2RlLlxuICAgICovXG4gICAgdmlldykge1xuICAgICAgICB0aGlzLnN0YXRlID0gc3RhdGU7XG4gICAgICAgIHRoaXMucG9zID0gcG9zO1xuICAgICAgICB0aGlzLmV4cGxpY2l0ID0gZXhwbGljaXQ7XG4gICAgICAgIHRoaXMudmlldyA9IHZpZXc7XG4gICAgICAgIC8qKlxuICAgICAgICBAaW50ZXJuYWxcbiAgICAgICAgKi9cbiAgICAgICAgdGhpcy5hYm9ydExpc3RlbmVycyA9IFtdO1xuICAgICAgICAvKipcbiAgICAgICAgQGludGVybmFsXG4gICAgICAgICovXG4gICAgICAgIHRoaXMuYWJvcnRPbkRvY0NoYW5nZSA9IGZhbHNlO1xuICAgIH1cbiAgICAvKipcbiAgICBHZXQgdGhlIGV4dGVudCwgY29udGVudCwgYW5kIChpZiB0aGVyZSBpcyBhIHRva2VuKSB0eXBlIG9mIHRoZVxuICAgIHRva2VuIGJlZm9yZSBgdGhpcy5wb3NgLlxuICAgICovXG4gICAgdG9rZW5CZWZvcmUodHlwZXMpIHtcbiAgICAgICAgbGV0IHRva2VuID0gc3ludGF4VHJlZSh0aGlzLnN0YXRlKS5yZXNvbHZlSW5uZXIodGhpcy5wb3MsIC0xKTtcbiAgICAgICAgd2hpbGUgKHRva2VuICYmIHR5cGVzLmluZGV4T2YodG9rZW4ubmFtZSkgPCAwKVxuICAgICAgICAgICAgdG9rZW4gPSB0b2tlbi5wYXJlbnQ7XG4gICAgICAgIHJldHVybiB0b2tlbiA/IHsgZnJvbTogdG9rZW4uZnJvbSwgdG86IHRoaXMucG9zLFxuICAgICAgICAgICAgdGV4dDogdGhpcy5zdGF0ZS5zbGljZURvYyh0b2tlbi5mcm9tLCB0aGlzLnBvcyksXG4gICAgICAgICAgICB0eXBlOiB0b2tlbi50eXBlIH0gOiBudWxsO1xuICAgIH1cbiAgICAvKipcbiAgICBHZXQgdGhlIG1hdGNoIG9mIHRoZSBnaXZlbiBleHByZXNzaW9uIGRpcmVjdGx5IGJlZm9yZSB0aGVcbiAgICBjdXJzb3IuXG4gICAgKi9cbiAgICBtYXRjaEJlZm9yZShleHByKSB7XG4gICAgICAgIGxldCBsaW5lID0gdGhpcy5zdGF0ZS5kb2MubGluZUF0KHRoaXMucG9zKTtcbiAgICAgICAgbGV0IHN0YXJ0ID0gTWF0aC5tYXgobGluZS5mcm9tLCB0aGlzLnBvcyAtIDI1MCk7XG4gICAgICAgIGxldCBzdHIgPSBsaW5lLnRleHQuc2xpY2Uoc3RhcnQgLSBsaW5lLmZyb20sIHRoaXMucG9zIC0gbGluZS5mcm9tKTtcbiAgICAgICAgbGV0IGZvdW5kID0gc3RyLnNlYXJjaChlbnN1cmVBbmNob3IoZXhwciwgZmFsc2UpKTtcbiAgICAgICAgcmV0dXJuIGZvdW5kIDwgMCA/IG51bGwgOiB7IGZyb206IHN0YXJ0ICsgZm91bmQsIHRvOiB0aGlzLnBvcywgdGV4dDogc3RyLnNsaWNlKGZvdW5kKSB9O1xuICAgIH1cbiAgICAvKipcbiAgICBZaWVsZHMgdHJ1ZSB3aGVuIHRoZSBxdWVyeSBoYXMgYmVlbiBhYm9ydGVkLiBDYW4gYmUgdXNlZnVsIGluXG4gICAgYXN5bmNocm9ub3VzIHF1ZXJpZXMgdG8gYXZvaWQgZG9pbmcgd29yayB0aGF0IHdpbGwgYmUgaWdub3JlZC5cbiAgICAqL1xuICAgIGdldCBhYm9ydGVkKCkgeyByZXR1cm4gdGhpcy5hYm9ydExpc3RlbmVycyA9PSBudWxsOyB9XG4gICAgLyoqXG4gICAgQWxsb3dzIHlvdSB0byByZWdpc3RlciBhYm9ydCBoYW5kbGVycywgd2hpY2ggd2lsbCBiZSBjYWxsZWQgd2hlblxuICAgIHRoZSBxdWVyeSBpc1xuICAgIFthYm9ydGVkXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI2F1dG9jb21wbGV0ZS5Db21wbGV0aW9uQ29udGV4dC5hYm9ydGVkKS5cbiAgICBcbiAgICBCeSBkZWZhdWx0LCBydW5uaW5nIHF1ZXJpZXMgd2lsbCBub3QgYmUgYWJvcnRlZCBmb3IgcmVndWxhclxuICAgIHR5cGluZyBvciBiYWNrc3BhY2luZywgb24gdGhlIGFzc3VtcHRpb24gdGhhdCB0aGV5IGFyZSBsaWtlbHkgdG9cbiAgICByZXR1cm4gYSByZXN1bHQgd2l0aCBhXG4gICAgW2B2YWxpZEZvcmBdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jYXV0b2NvbXBsZXRlLkNvbXBsZXRpb25SZXN1bHQudmFsaWRGb3IpIGZpZWxkIHRoYXRcbiAgICBhbGxvd3MgdGhlIHJlc3VsdCB0byBiZSB1c2VkIGFmdGVyIGFsbC4gUGFzc2luZyBgb25Eb2NDaGFuZ2U6XG4gICAgdHJ1ZWAgd2lsbCBjYXVzZSB0aGlzIHF1ZXJ5IHRvIGJlIGFib3J0ZWQgZm9yIGFueSBkb2N1bWVudFxuICAgIGNoYW5nZS5cbiAgICAqL1xuICAgIGFkZEV2ZW50TGlzdGVuZXIodHlwZSwgbGlzdGVuZXIsIG9wdGlvbnMpIHtcbiAgICAgICAgaWYgKHR5cGUgPT0gXCJhYm9ydFwiICYmIHRoaXMuYWJvcnRMaXN0ZW5lcnMpIHtcbiAgICAgICAgICAgIHRoaXMuYWJvcnRMaXN0ZW5lcnMucHVzaChsaXN0ZW5lcik7XG4gICAgICAgICAgICBpZiAob3B0aW9ucyAmJiBvcHRpb25zLm9uRG9jQ2hhbmdlKVxuICAgICAgICAgICAgICAgIHRoaXMuYWJvcnRPbkRvY0NoYW5nZSA9IHRydWU7XG4gICAgICAgIH1cbiAgICB9XG59XG5mdW5jdGlvbiB0b1NldChjaGFycykge1xuICAgIGxldCBmbGF0ID0gT2JqZWN0LmtleXMoY2hhcnMpLmpvaW4oXCJcIik7XG4gICAgbGV0IHdvcmRzID0gL1xcdy8udGVzdChmbGF0KTtcbiAgICBpZiAod29yZHMpXG4gICAgICAgIGZsYXQgPSBmbGF0LnJlcGxhY2UoL1xcdy9nLCBcIlwiKTtcbiAgICByZXR1cm4gYFske3dvcmRzID8gXCJcXFxcd1wiIDogXCJcIn0ke2ZsYXQucmVwbGFjZSgvW15cXHdcXHNdL2csIFwiXFxcXCQmXCIpfV1gO1xufVxuZnVuY3Rpb24gcHJlZml4TWF0Y2gob3B0aW9ucykge1xuICAgIGxldCBmaXJzdCA9IE9iamVjdC5jcmVhdGUobnVsbCksIHJlc3QgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICAgIGZvciAobGV0IHsgbGFiZWwgfSBvZiBvcHRpb25zKSB7XG4gICAgICAgIGZpcnN0W2xhYmVsWzBdXSA9IHRydWU7XG4gICAgICAgIGZvciAobGV0IGkgPSAxOyBpIDwgbGFiZWwubGVuZ3RoOyBpKyspXG4gICAgICAgICAgICByZXN0W2xhYmVsW2ldXSA9IHRydWU7XG4gICAgfVxuICAgIGxldCBzb3VyY2UgPSB0b1NldChmaXJzdCkgKyB0b1NldChyZXN0KSArIFwiKiRcIjtcbiAgICByZXR1cm4gW25ldyBSZWdFeHAoXCJeXCIgKyBzb3VyY2UpLCBuZXcgUmVnRXhwKHNvdXJjZSldO1xufVxuLyoqXG5HaXZlbiBhIGEgZml4ZWQgYXJyYXkgb2Ygb3B0aW9ucywgcmV0dXJuIGFuIGF1dG9jb21wbGV0ZXIgdGhhdFxuY29tcGxldGVzIHRoZW0uXG4qL1xuZnVuY3Rpb24gY29tcGxldGVGcm9tTGlzdChsaXN0KSB7XG4gICAgbGV0IG9wdGlvbnMgPSBsaXN0Lm1hcChvID0+IHR5cGVvZiBvID09IFwic3RyaW5nXCIgPyB7IGxhYmVsOiBvIH0gOiBvKTtcbiAgICBsZXQgW3ZhbGlkRm9yLCBtYXRjaF0gPSBvcHRpb25zLmV2ZXJ5KG8gPT4gL15cXHcrJC8udGVzdChvLmxhYmVsKSkgPyBbL1xcdyokLywgL1xcdyskL10gOiBwcmVmaXhNYXRjaChvcHRpb25zKTtcbiAgICByZXR1cm4gKGNvbnRleHQpID0+IHtcbiAgICAgICAgbGV0IHRva2VuID0gY29udGV4dC5tYXRjaEJlZm9yZShtYXRjaCk7XG4gICAgICAgIHJldHVybiB0b2tlbiB8fCBjb250ZXh0LmV4cGxpY2l0ID8geyBmcm9tOiB0b2tlbiA/IHRva2VuLmZyb20gOiBjb250ZXh0LnBvcywgb3B0aW9ucywgdmFsaWRGb3IgfSA6IG51bGw7XG4gICAgfTtcbn1cbi8qKlxuV3JhcCB0aGUgZ2l2ZW4gY29tcGxldGlvbiBzb3VyY2Ugc28gdGhhdCBpdCB3aWxsIG9ubHkgZmlyZSB3aGVuIHRoZVxuY3Vyc29yIGlzIGluIGEgc3ludGF4IG5vZGUgd2l0aCBvbmUgb2YgdGhlIGdpdmVuIG5hbWVzLlxuKi9cbmZ1bmN0aW9uIGlmSW4obm9kZXMsIHNvdXJjZSkge1xuICAgIHJldHVybiAoY29udGV4dCkgPT4ge1xuICAgICAgICBmb3IgKGxldCBwb3MgPSBzeW50YXhUcmVlKGNvbnRleHQuc3RhdGUpLnJlc29sdmVJbm5lcihjb250ZXh0LnBvcywgLTEpOyBwb3M7IHBvcyA9IHBvcy5wYXJlbnQpIHtcbiAgICAgICAgICAgIGlmIChub2Rlcy5pbmRleE9mKHBvcy5uYW1lKSA+IC0xKVxuICAgICAgICAgICAgICAgIHJldHVybiBzb3VyY2UoY29udGV4dCk7XG4gICAgICAgICAgICBpZiAocG9zLnR5cGUuaXNUb3ApXG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfTtcbn1cbi8qKlxuV3JhcCB0aGUgZ2l2ZW4gY29tcGxldGlvbiBzb3VyY2Ugc28gdGhhdCBpdCB3aWxsIG5vdCBmaXJlIHdoZW4gdGhlXG5jdXJzb3IgaXMgaW4gYSBzeW50YXggbm9kZSB3aXRoIG9uZSBvZiB0aGUgZ2l2ZW4gbmFtZXMuXG4qL1xuZnVuY3Rpb24gaWZOb3RJbihub2Rlcywgc291cmNlKSB7XG4gICAgcmV0dXJuIChjb250ZXh0KSA9PiB7XG4gICAgICAgIGZvciAobGV0IHBvcyA9IHN5bnRheFRyZWUoY29udGV4dC5zdGF0ZSkucmVzb2x2ZUlubmVyKGNvbnRleHQucG9zLCAtMSk7IHBvczsgcG9zID0gcG9zLnBhcmVudCkge1xuICAgICAgICAgICAgaWYgKG5vZGVzLmluZGV4T2YocG9zLm5hbWUpID4gLTEpXG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICBpZiAocG9zLnR5cGUuaXNUb3ApXG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHNvdXJjZShjb250ZXh0KTtcbiAgICB9O1xufVxuY2xhc3MgT3B0aW9uIHtcbiAgICBjb25zdHJ1Y3Rvcihjb21wbGV0aW9uLCBzb3VyY2UsIG1hdGNoLCBzY29yZSkge1xuICAgICAgICB0aGlzLmNvbXBsZXRpb24gPSBjb21wbGV0aW9uO1xuICAgICAgICB0aGlzLnNvdXJjZSA9IHNvdXJjZTtcbiAgICAgICAgdGhpcy5tYXRjaCA9IG1hdGNoO1xuICAgICAgICB0aGlzLnNjb3JlID0gc2NvcmU7XG4gICAgfVxufVxuZnVuY3Rpb24gY3VyKHN0YXRlKSB7IHJldHVybiBzdGF0ZS5zZWxlY3Rpb24ubWFpbi5mcm9tOyB9XG4vLyBNYWtlIHN1cmUgdGhlIGdpdmVuIHJlZ2V4cCBoYXMgYSAkIGF0IGl0cyBlbmQgYW5kLCBpZiBgc3RhcnRgIGlzXG4vLyB0cnVlLCBhIF4gYXQgaXRzIHN0YXJ0LlxuZnVuY3Rpb24gZW5zdXJlQW5jaG9yKGV4cHIsIHN0YXJ0KSB7XG4gICAgdmFyIF9hO1xuICAgIGxldCB7IHNvdXJjZSB9ID0gZXhwcjtcbiAgICBsZXQgYWRkU3RhcnQgPSBzdGFydCAmJiBzb3VyY2VbMF0gIT0gXCJeXCIsIGFkZEVuZCA9IHNvdXJjZVtzb3VyY2UubGVuZ3RoIC0gMV0gIT0gXCIkXCI7XG4gICAgaWYgKCFhZGRTdGFydCAmJiAhYWRkRW5kKVxuICAgICAgICByZXR1cm4gZXhwcjtcbiAgICByZXR1cm4gbmV3IFJlZ0V4cChgJHthZGRTdGFydCA/IFwiXlwiIDogXCJcIn0oPzoke3NvdXJjZX0pJHthZGRFbmQgPyBcIiRcIiA6IFwiXCJ9YCwgKF9hID0gZXhwci5mbGFncykgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogKGV4cHIuaWdub3JlQ2FzZSA/IFwiaVwiIDogXCJcIikpO1xufVxuLyoqXG5UaGlzIGFubm90YXRpb24gaXMgYWRkZWQgdG8gdHJhbnNhY3Rpb25zIHRoYXQgYXJlIHByb2R1Y2VkIGJ5XG5waWNraW5nIGEgY29tcGxldGlvbi5cbiovXG5jb25zdCBwaWNrZWRDb21wbGV0aW9uID0gLypAX19QVVJFX18qL0Fubm90YXRpb24uZGVmaW5lKCk7XG4vKipcbkhlbHBlciBmdW5jdGlvbiB0aGF0IHJldHVybnMgYSB0cmFuc2FjdGlvbiBzcGVjIHdoaWNoIGluc2VydHMgYVxuY29tcGxldGlvbidzIHRleHQgaW4gdGhlIG1haW4gc2VsZWN0aW9uIHJhbmdlLCBhbmQgYW55IG90aGVyXG5zZWxlY3Rpb24gcmFuZ2UgdGhhdCBoYXMgdGhlIHNhbWUgdGV4dCBpbiBmcm9udCBvZiBpdC5cbiovXG5mdW5jdGlvbiBpbnNlcnRDb21wbGV0aW9uVGV4dChzdGF0ZSwgdGV4dCwgZnJvbSwgdG8pIHtcbiAgICBsZXQgeyBtYWluIH0gPSBzdGF0ZS5zZWxlY3Rpb24sIGZyb21PZmYgPSBmcm9tIC0gbWFpbi5mcm9tLCB0b09mZiA9IHRvIC0gbWFpbi5mcm9tO1xuICAgIHJldHVybiB7XG4gICAgICAgIC4uLnN0YXRlLmNoYW5nZUJ5UmFuZ2UocmFuZ2UgPT4ge1xuICAgICAgICAgICAgaWYgKHJhbmdlICE9IG1haW4gJiYgZnJvbSAhPSB0byAmJlxuICAgICAgICAgICAgICAgIHN0YXRlLnNsaWNlRG9jKHJhbmdlLmZyb20gKyBmcm9tT2ZmLCByYW5nZS5mcm9tICsgdG9PZmYpICE9IHN0YXRlLnNsaWNlRG9jKGZyb20sIHRvKSlcbiAgICAgICAgICAgICAgICByZXR1cm4geyByYW5nZSB9O1xuICAgICAgICAgICAgbGV0IGxpbmVzID0gc3RhdGUudG9UZXh0KHRleHQpO1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBjaGFuZ2VzOiB7IGZyb206IHJhbmdlLmZyb20gKyBmcm9tT2ZmLCB0bzogdG8gPT0gbWFpbi5mcm9tID8gcmFuZ2UudG8gOiByYW5nZS5mcm9tICsgdG9PZmYsIGluc2VydDogbGluZXMgfSxcbiAgICAgICAgICAgICAgICByYW5nZTogRWRpdG9yU2VsZWN0aW9uLmN1cnNvcihyYW5nZS5mcm9tICsgZnJvbU9mZiArIGxpbmVzLmxlbmd0aClcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0pLFxuICAgICAgICBzY3JvbGxJbnRvVmlldzogdHJ1ZSxcbiAgICAgICAgdXNlckV2ZW50OiBcImlucHV0LmNvbXBsZXRlXCJcbiAgICB9O1xufVxuY29uc3QgU291cmNlQ2FjaGUgPSAvKkBfX1BVUkVfXyovbmV3IFdlYWtNYXAoKTtcbmZ1bmN0aW9uIGFzU291cmNlKHNvdXJjZSkge1xuICAgIGlmICghQXJyYXkuaXNBcnJheShzb3VyY2UpKVxuICAgICAgICByZXR1cm4gc291cmNlO1xuICAgIGxldCBrbm93biA9IFNvdXJjZUNhY2hlLmdldChzb3VyY2UpO1xuICAgIGlmICgha25vd24pXG4gICAgICAgIFNvdXJjZUNhY2hlLnNldChzb3VyY2UsIGtub3duID0gY29tcGxldGVGcm9tTGlzdChzb3VyY2UpKTtcbiAgICByZXR1cm4ga25vd247XG59XG5jb25zdCBzdGFydENvbXBsZXRpb25FZmZlY3QgPSAvKkBfX1BVUkVfXyovU3RhdGVFZmZlY3QuZGVmaW5lKCk7XG5jb25zdCBjbG9zZUNvbXBsZXRpb25FZmZlY3QgPSAvKkBfX1BVUkVfXyovU3RhdGVFZmZlY3QuZGVmaW5lKCk7XG5cbi8vIEEgcGF0dGVybiBtYXRjaGVyIGZvciBmdXp6eSBjb21wbGV0aW9uIG1hdGNoaW5nLiBDcmVhdGUgYW4gaW5zdGFuY2Vcbi8vIG9uY2UgZm9yIGEgcGF0dGVybiwgYW5kIHRoZW4gdXNlIHRoYXQgdG8gbWF0Y2ggYW55IG51bWJlciBvZlxuLy8gY29tcGxldGlvbnMuXG5jbGFzcyBGdXp6eU1hdGNoZXIge1xuICAgIGNvbnN0cnVjdG9yKHBhdHRlcm4pIHtcbiAgICAgICAgdGhpcy5wYXR0ZXJuID0gcGF0dGVybjtcbiAgICAgICAgdGhpcy5jaGFycyA9IFtdO1xuICAgICAgICB0aGlzLmZvbGRlZCA9IFtdO1xuICAgICAgICAvLyBCdWZmZXJzIHJldXNlZCBieSBjYWxscyB0byBgbWF0Y2hgIHRvIHRyYWNrIG1hdGNoZWQgY2hhcmFjdGVyXG4gICAgICAgIC8vIHBvc2l0aW9ucy5cbiAgICAgICAgdGhpcy5hbnkgPSBbXTtcbiAgICAgICAgdGhpcy5wcmVjaXNlID0gW107XG4gICAgICAgIHRoaXMuYnlXb3JkID0gW107XG4gICAgICAgIHRoaXMuc2NvcmUgPSAwO1xuICAgICAgICB0aGlzLm1hdGNoZWQgPSBbXTtcbiAgICAgICAgZm9yIChsZXQgcCA9IDA7IHAgPCBwYXR0ZXJuLmxlbmd0aDspIHtcbiAgICAgICAgICAgIGxldCBjaGFyID0gY29kZVBvaW50QXQocGF0dGVybiwgcCksIHNpemUgPSBjb2RlUG9pbnRTaXplKGNoYXIpO1xuICAgICAgICAgICAgdGhpcy5jaGFycy5wdXNoKGNoYXIpO1xuICAgICAgICAgICAgbGV0IHBhcnQgPSBwYXR0ZXJuLnNsaWNlKHAsIHAgKyBzaXplKSwgdXBwZXIgPSBwYXJ0LnRvVXBwZXJDYXNlKCk7XG4gICAgICAgICAgICB0aGlzLmZvbGRlZC5wdXNoKGNvZGVQb2ludEF0KHVwcGVyID09IHBhcnQgPyBwYXJ0LnRvTG93ZXJDYXNlKCkgOiB1cHBlciwgMCkpO1xuICAgICAgICAgICAgcCArPSBzaXplO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuYXN0cmFsID0gcGF0dGVybi5sZW5ndGggIT0gdGhpcy5jaGFycy5sZW5ndGg7XG4gICAgfVxuICAgIHJldChzY29yZSwgbWF0Y2hlZCkge1xuICAgICAgICB0aGlzLnNjb3JlID0gc2NvcmU7XG4gICAgICAgIHRoaXMubWF0Y2hlZCA9IG1hdGNoZWQ7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICAvLyBNYXRjaGVzIGEgZ2l2ZW4gd29yZCAoY29tcGxldGlvbikgYWdhaW5zdCB0aGUgcGF0dGVybiAoaW5wdXQpLlxuICAgIC8vIFdpbGwgcmV0dXJuIGEgYm9vbGVhbiBpbmRpY2F0aW5nIHdoZXRoZXIgdGhlcmUgd2FzIGEgbWF0Y2ggYW5kLFxuICAgIC8vIG9uIHN1Y2Nlc3MsIHNldCBgdGhpcy5zY29yZWAgdG8gdGhlIHNjb3JlLCBgdGhpcy5tYXRjaGVkYCB0byBhblxuICAgIC8vIGFycmF5IG9mIGBmcm9tLCB0b2AgcGFpcnMgaW5kaWNhdGluZyB0aGUgbWF0Y2hlZCBwYXJ0cyBvZiBgd29yZGAuXG4gICAgLy9cbiAgICAvLyBUaGUgc2NvcmUgaXMgYSBudW1iZXIgdGhhdCBpcyBtb3JlIG5lZ2F0aXZlIHRoZSB3b3JzZSB0aGUgbWF0Y2hcbiAgICAvLyBpcy4gU2VlIGBQZW5hbHR5YCBhYm92ZS5cbiAgICBtYXRjaCh3b3JkKSB7XG4gICAgICAgIGlmICh0aGlzLnBhdHRlcm4ubGVuZ3RoID09IDApXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5yZXQoLTEwMCAvKiBQZW5hbHR5Lk5vdEZ1bGwgKi8sIFtdKTtcbiAgICAgICAgaWYgKHdvcmQubGVuZ3RoIDwgdGhpcy5wYXR0ZXJuLmxlbmd0aClcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICBsZXQgeyBjaGFycywgZm9sZGVkLCBhbnksIHByZWNpc2UsIGJ5V29yZCB9ID0gdGhpcztcbiAgICAgICAgLy8gRm9yIHNpbmdsZS1jaGFyYWN0ZXIgcXVlcmllcywgb25seSBtYXRjaCB3aGVuIHRoZXkgb2NjdXIgcmlnaHRcbiAgICAgICAgLy8gYXQgdGhlIHN0YXJ0XG4gICAgICAgIGlmIChjaGFycy5sZW5ndGggPT0gMSkge1xuICAgICAgICAgICAgbGV0IGZpcnN0ID0gY29kZVBvaW50QXQod29yZCwgMCksIGZpcnN0U2l6ZSA9IGNvZGVQb2ludFNpemUoZmlyc3QpO1xuICAgICAgICAgICAgbGV0IHNjb3JlID0gZmlyc3RTaXplID09IHdvcmQubGVuZ3RoID8gMCA6IC0xMDAgLyogUGVuYWx0eS5Ob3RGdWxsICovO1xuICAgICAgICAgICAgaWYgKGZpcnN0ID09IGNoYXJzWzBdKSA7XG4gICAgICAgICAgICBlbHNlIGlmIChmaXJzdCA9PSBmb2xkZWRbMF0pXG4gICAgICAgICAgICAgICAgc2NvcmUgKz0gLTIwMCAvKiBQZW5hbHR5LkNhc2VGb2xkICovO1xuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucmV0KHNjb3JlLCBbMCwgZmlyc3RTaXplXSk7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IGRpcmVjdCA9IHdvcmQuaW5kZXhPZih0aGlzLnBhdHRlcm4pO1xuICAgICAgICBpZiAoZGlyZWN0ID09IDApXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5yZXQod29yZC5sZW5ndGggPT0gdGhpcy5wYXR0ZXJuLmxlbmd0aCA/IDAgOiAtMTAwIC8qIFBlbmFsdHkuTm90RnVsbCAqLywgWzAsIHRoaXMucGF0dGVybi5sZW5ndGhdKTtcbiAgICAgICAgbGV0IGxlbiA9IGNoYXJzLmxlbmd0aCwgYW55VG8gPSAwO1xuICAgICAgICBpZiAoZGlyZWN0IDwgMCkge1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDAsIGUgPSBNYXRoLm1pbih3b3JkLmxlbmd0aCwgMjAwKTsgaSA8IGUgJiYgYW55VG8gPCBsZW47KSB7XG4gICAgICAgICAgICAgICAgbGV0IG5leHQgPSBjb2RlUG9pbnRBdCh3b3JkLCBpKTtcbiAgICAgICAgICAgICAgICBpZiAobmV4dCA9PSBjaGFyc1thbnlUb10gfHwgbmV4dCA9PSBmb2xkZWRbYW55VG9dKVxuICAgICAgICAgICAgICAgICAgICBhbnlbYW55VG8rK10gPSBpO1xuICAgICAgICAgICAgICAgIGkgKz0gY29kZVBvaW50U2l6ZShuZXh0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIE5vIG1hdGNoLCBleGl0IGltbWVkaWF0ZWx5XG4gICAgICAgICAgICBpZiAoYW55VG8gPCBsZW4pXG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgLy8gVGhpcyB0cmFja3MgdGhlIGV4dGVudCBvZiB0aGUgcHJlY2lzZSAobm9uLWZvbGRlZCwgbm90XG4gICAgICAgIC8vIG5lY2Vzc2FyaWx5IGFkamFjZW50KSBtYXRjaFxuICAgICAgICBsZXQgcHJlY2lzZVRvID0gMDtcbiAgICAgICAgLy8gVHJhY2tzIHdoZXRoZXIgdGhlcmUgaXMgYSBtYXRjaCB0aGF0IGhpdHMgb25seSBjaGFyYWN0ZXJzIHRoYXRcbiAgICAgICAgLy8gYXBwZWFyIHRvIGJlIHN0YXJ0aW5nIHdvcmRzLiBgYnlXb3JkRm9sZGVkYCBpcyBzZXQgdG8gdHJ1ZSB3aGVuXG4gICAgICAgIC8vIGEgY2FzZSBmb2xkZWQgY2hhcmFjdGVyIGlzIGVuY291bnRlcmVkIGluIHN1Y2ggYSBtYXRjaFxuICAgICAgICBsZXQgYnlXb3JkVG8gPSAwLCBieVdvcmRGb2xkZWQgPSBmYWxzZTtcbiAgICAgICAgLy8gSWYgd2UndmUgZm91bmQgYSBwYXJ0aWFsIGFkamFjZW50IG1hdGNoLCB0aGVzZSB0cmFjayBpdHMgc3RhdGVcbiAgICAgICAgbGV0IGFkamFjZW50VG8gPSAwLCBhZGphY2VudFN0YXJ0ID0gLTEsIGFkamFjZW50RW5kID0gLTE7XG4gICAgICAgIGxldCBoYXNMb3dlciA9IC9bYS16XS8udGVzdCh3b3JkKSwgd29yZEFkamFjZW50ID0gdHJ1ZTtcbiAgICAgICAgLy8gR28gb3ZlciB0aGUgb3B0aW9uJ3MgdGV4dCwgc2Nhbm5pbmcgZm9yIHRoZSB2YXJpb3VzIGtpbmRzIG9mIG1hdGNoZXNcbiAgICAgICAgZm9yIChsZXQgaSA9IDAsIGUgPSBNYXRoLm1pbih3b3JkLmxlbmd0aCwgMjAwKSwgcHJldlR5cGUgPSAwIC8qIFRwLk5vbldvcmQgKi87IGkgPCBlICYmIGJ5V29yZFRvIDwgbGVuOykge1xuICAgICAgICAgICAgbGV0IG5leHQgPSBjb2RlUG9pbnRBdCh3b3JkLCBpKTtcbiAgICAgICAgICAgIGlmIChkaXJlY3QgPCAwKSB7XG4gICAgICAgICAgICAgICAgaWYgKHByZWNpc2VUbyA8IGxlbiAmJiBuZXh0ID09IGNoYXJzW3ByZWNpc2VUb10pXG4gICAgICAgICAgICAgICAgICAgIHByZWNpc2VbcHJlY2lzZVRvKytdID0gaTtcbiAgICAgICAgICAgICAgICBpZiAoYWRqYWNlbnRUbyA8IGxlbikge1xuICAgICAgICAgICAgICAgICAgICBpZiAobmV4dCA9PSBjaGFyc1thZGphY2VudFRvXSB8fCBuZXh0ID09IGZvbGRlZFthZGphY2VudFRvXSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGFkamFjZW50VG8gPT0gMClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhZGphY2VudFN0YXJ0ID0gaTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFkamFjZW50RW5kID0gaSArIDE7XG4gICAgICAgICAgICAgICAgICAgICAgICBhZGphY2VudFRvKys7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhZGphY2VudFRvID0gMDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxldCBjaCwgdHlwZSA9IG5leHQgPCAweGZmXG4gICAgICAgICAgICAgICAgPyAobmV4dCA+PSA0OCAmJiBuZXh0IDw9IDU3IHx8IG5leHQgPj0gOTcgJiYgbmV4dCA8PSAxMjIgPyAyIC8qIFRwLkxvd2VyICovIDogbmV4dCA+PSA2NSAmJiBuZXh0IDw9IDkwID8gMSAvKiBUcC5VcHBlciAqLyA6IDAgLyogVHAuTm9uV29yZCAqLylcbiAgICAgICAgICAgICAgICA6ICgoY2ggPSBmcm9tQ29kZVBvaW50KG5leHQpKSAhPSBjaC50b0xvd2VyQ2FzZSgpID8gMSAvKiBUcC5VcHBlciAqLyA6IGNoICE9IGNoLnRvVXBwZXJDYXNlKCkgPyAyIC8qIFRwLkxvd2VyICovIDogMCAvKiBUcC5Ob25Xb3JkICovKTtcbiAgICAgICAgICAgIGlmICghaSB8fCB0eXBlID09IDEgLyogVHAuVXBwZXIgKi8gJiYgaGFzTG93ZXIgfHwgcHJldlR5cGUgPT0gMCAvKiBUcC5Ob25Xb3JkICovICYmIHR5cGUgIT0gMCAvKiBUcC5Ob25Xb3JkICovKSB7XG4gICAgICAgICAgICAgICAgaWYgKGNoYXJzW2J5V29yZFRvXSA9PSBuZXh0IHx8IChmb2xkZWRbYnlXb3JkVG9dID09IG5leHQgJiYgKGJ5V29yZEZvbGRlZCA9IHRydWUpKSlcbiAgICAgICAgICAgICAgICAgICAgYnlXb3JkW2J5V29yZFRvKytdID0gaTtcbiAgICAgICAgICAgICAgICBlbHNlIGlmIChieVdvcmQubGVuZ3RoKVxuICAgICAgICAgICAgICAgICAgICB3b3JkQWRqYWNlbnQgPSBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHByZXZUeXBlID0gdHlwZTtcbiAgICAgICAgICAgIGkgKz0gY29kZVBvaW50U2l6ZShuZXh0KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoYnlXb3JkVG8gPT0gbGVuICYmIGJ5V29yZFswXSA9PSAwICYmIHdvcmRBZGphY2VudClcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnJlc3VsdCgtMTAwIC8qIFBlbmFsdHkuQnlXb3JkICovICsgKGJ5V29yZEZvbGRlZCA/IC0yMDAgLyogUGVuYWx0eS5DYXNlRm9sZCAqLyA6IDApLCBieVdvcmQsIHdvcmQpO1xuICAgICAgICBpZiAoYWRqYWNlbnRUbyA9PSBsZW4gJiYgYWRqYWNlbnRTdGFydCA9PSAwKVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMucmV0KC0yMDAgLyogUGVuYWx0eS5DYXNlRm9sZCAqLyAtIHdvcmQubGVuZ3RoICsgKGFkamFjZW50RW5kID09IHdvcmQubGVuZ3RoID8gMCA6IC0xMDAgLyogUGVuYWx0eS5Ob3RGdWxsICovKSwgWzAsIGFkamFjZW50RW5kXSk7XG4gICAgICAgIGlmIChkaXJlY3QgPiAtMSlcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnJldCgtNzAwIC8qIFBlbmFsdHkuTm90U3RhcnQgKi8gLSB3b3JkLmxlbmd0aCwgW2RpcmVjdCwgZGlyZWN0ICsgdGhpcy5wYXR0ZXJuLmxlbmd0aF0pO1xuICAgICAgICBpZiAoYWRqYWNlbnRUbyA9PSBsZW4pXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5yZXQoLTIwMCAvKiBQZW5hbHR5LkNhc2VGb2xkICovICsgLTcwMCAvKiBQZW5hbHR5Lk5vdFN0YXJ0ICovIC0gd29yZC5sZW5ndGgsIFthZGphY2VudFN0YXJ0LCBhZGphY2VudEVuZF0pO1xuICAgICAgICBpZiAoYnlXb3JkVG8gPT0gbGVuKVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMucmVzdWx0KC0xMDAgLyogUGVuYWx0eS5CeVdvcmQgKi8gKyAoYnlXb3JkRm9sZGVkID8gLTIwMCAvKiBQZW5hbHR5LkNhc2VGb2xkICovIDogMCkgKyAtNzAwIC8qIFBlbmFsdHkuTm90U3RhcnQgKi8gK1xuICAgICAgICAgICAgICAgICh3b3JkQWRqYWNlbnQgPyAwIDogLTExMDAgLyogUGVuYWx0eS5HYXAgKi8pLCBieVdvcmQsIHdvcmQpO1xuICAgICAgICByZXR1cm4gY2hhcnMubGVuZ3RoID09IDIgPyBudWxsXG4gICAgICAgICAgICA6IHRoaXMucmVzdWx0KChhbnlbMF0gPyAtNzAwIC8qIFBlbmFsdHkuTm90U3RhcnQgKi8gOiAwKSArIC0yMDAgLyogUGVuYWx0eS5DYXNlRm9sZCAqLyArIC0xMTAwIC8qIFBlbmFsdHkuR2FwICovLCBhbnksIHdvcmQpO1xuICAgIH1cbiAgICByZXN1bHQoc2NvcmUsIHBvc2l0aW9ucywgd29yZCkge1xuICAgICAgICBsZXQgcmVzdWx0ID0gW10sIGkgPSAwO1xuICAgICAgICBmb3IgKGxldCBwb3Mgb2YgcG9zaXRpb25zKSB7XG4gICAgICAgICAgICBsZXQgdG8gPSBwb3MgKyAodGhpcy5hc3RyYWwgPyBjb2RlUG9pbnRTaXplKGNvZGVQb2ludEF0KHdvcmQsIHBvcykpIDogMSk7XG4gICAgICAgICAgICBpZiAoaSAmJiByZXN1bHRbaSAtIDFdID09IHBvcylcbiAgICAgICAgICAgICAgICByZXN1bHRbaSAtIDFdID0gdG87XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXN1bHRbaSsrXSA9IHBvcztcbiAgICAgICAgICAgICAgICByZXN1bHRbaSsrXSA9IHRvO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLnJldChzY29yZSAtIHdvcmQubGVuZ3RoLCByZXN1bHQpO1xuICAgIH1cbn1cbmNsYXNzIFN0cmljdE1hdGNoZXIge1xuICAgIGNvbnN0cnVjdG9yKHBhdHRlcm4pIHtcbiAgICAgICAgdGhpcy5wYXR0ZXJuID0gcGF0dGVybjtcbiAgICAgICAgdGhpcy5tYXRjaGVkID0gW107XG4gICAgICAgIHRoaXMuc2NvcmUgPSAwO1xuICAgICAgICB0aGlzLmZvbGRlZCA9IHBhdHRlcm4udG9Mb3dlckNhc2UoKTtcbiAgICB9XG4gICAgbWF0Y2god29yZCkge1xuICAgICAgICBpZiAod29yZC5sZW5ndGggPCB0aGlzLnBhdHRlcm4ubGVuZ3RoKVxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIGxldCBzdGFydCA9IHdvcmQuc2xpY2UoMCwgdGhpcy5wYXR0ZXJuLmxlbmd0aCk7XG4gICAgICAgIGxldCBtYXRjaCA9IHN0YXJ0ID09IHRoaXMucGF0dGVybiA/IDAgOiBzdGFydC50b0xvd2VyQ2FzZSgpID09IHRoaXMuZm9sZGVkID8gLTIwMCAvKiBQZW5hbHR5LkNhc2VGb2xkICovIDogbnVsbDtcbiAgICAgICAgaWYgKG1hdGNoID09IG51bGwpXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgdGhpcy5tYXRjaGVkID0gWzAsIHN0YXJ0Lmxlbmd0aF07XG4gICAgICAgIHRoaXMuc2NvcmUgPSBtYXRjaCArICh3b3JkLmxlbmd0aCA9PSB0aGlzLnBhdHRlcm4ubGVuZ3RoID8gMCA6IC0xMDAgLyogUGVuYWx0eS5Ob3RGdWxsICovKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxufVxuXG5jb25zdCBjb21wbGV0aW9uQ29uZmlnID0gLypAX19QVVJFX18qL0ZhY2V0LmRlZmluZSh7XG4gICAgY29tYmluZShjb25maWdzKSB7XG4gICAgICAgIHJldHVybiBjb21iaW5lQ29uZmlnKGNvbmZpZ3MsIHtcbiAgICAgICAgICAgIGFjdGl2YXRlT25UeXBpbmc6IHRydWUsXG4gICAgICAgICAgICBhY3RpdmF0ZU9uQ29tcGxldGlvbjogKCkgPT4gZmFsc2UsXG4gICAgICAgICAgICBhY3RpdmF0ZU9uVHlwaW5nRGVsYXk6IDEwMCxcbiAgICAgICAgICAgIHNlbGVjdE9uT3BlbjogdHJ1ZSxcbiAgICAgICAgICAgIG92ZXJyaWRlOiBudWxsLFxuICAgICAgICAgICAgY2xvc2VPbkJsdXI6IHRydWUsXG4gICAgICAgICAgICBtYXhSZW5kZXJlZE9wdGlvbnM6IDEwMCxcbiAgICAgICAgICAgIGRlZmF1bHRLZXltYXA6IHRydWUsXG4gICAgICAgICAgICB0b29sdGlwQ2xhc3M6ICgpID0+IFwiXCIsXG4gICAgICAgICAgICBvcHRpb25DbGFzczogKCkgPT4gXCJcIixcbiAgICAgICAgICAgIGFib3ZlQ3Vyc29yOiBmYWxzZSxcbiAgICAgICAgICAgIGljb25zOiB0cnVlLFxuICAgICAgICAgICAgYWRkVG9PcHRpb25zOiBbXSxcbiAgICAgICAgICAgIHBvc2l0aW9uSW5mbzogZGVmYXVsdFBvc2l0aW9uSW5mbyxcbiAgICAgICAgICAgIGZpbHRlclN0cmljdDogZmFsc2UsXG4gICAgICAgICAgICBjb21wYXJlQ29tcGxldGlvbnM6IChhLCBiKSA9PiAoYS5zb3J0VGV4dCB8fCBhLmxhYmVsKS5sb2NhbGVDb21wYXJlKGIuc29ydFRleHQgfHwgYi5sYWJlbCksXG4gICAgICAgICAgICBpbnRlcmFjdGlvbkRlbGF5OiA3NSxcbiAgICAgICAgICAgIHVwZGF0ZVN5bmNUaW1lOiAxMDBcbiAgICAgICAgfSwge1xuICAgICAgICAgICAgZGVmYXVsdEtleW1hcDogKGEsIGIpID0+IGEgJiYgYixcbiAgICAgICAgICAgIGNsb3NlT25CbHVyOiAoYSwgYikgPT4gYSAmJiBiLFxuICAgICAgICAgICAgaWNvbnM6IChhLCBiKSA9PiBhICYmIGIsXG4gICAgICAgICAgICB0b29sdGlwQ2xhc3M6IChhLCBiKSA9PiBjID0+IGpvaW5DbGFzcyhhKGMpLCBiKGMpKSxcbiAgICAgICAgICAgIG9wdGlvbkNsYXNzOiAoYSwgYikgPT4gYyA9PiBqb2luQ2xhc3MoYShjKSwgYihjKSksXG4gICAgICAgICAgICBhZGRUb09wdGlvbnM6IChhLCBiKSA9PiBhLmNvbmNhdChiKSxcbiAgICAgICAgICAgIGZpbHRlclN0cmljdDogKGEsIGIpID0+IGEgfHwgYixcbiAgICAgICAgfSk7XG4gICAgfVxufSk7XG5mdW5jdGlvbiBqb2luQ2xhc3MoYSwgYikge1xuICAgIHJldHVybiBhID8gYiA/IGEgKyBcIiBcIiArIGIgOiBhIDogYjtcbn1cbmZ1bmN0aW9uIGRlZmF1bHRQb3NpdGlvbkluZm8odmlldywgbGlzdCwgb3B0aW9uLCBpbmZvLCBzcGFjZSwgdG9vbHRpcCkge1xuICAgIGxldCBydGwgPSB2aWV3LnRleHREaXJlY3Rpb24gPT0gRGlyZWN0aW9uLlJUTCwgbGVmdCA9IHJ0bCwgbmFycm93ID0gZmFsc2U7XG4gICAgbGV0IHNpZGUgPSBcInRvcFwiLCBvZmZzZXQsIG1heFdpZHRoO1xuICAgIGxldCBzcGFjZUxlZnQgPSBsaXN0LmxlZnQgLSBzcGFjZS5sZWZ0LCBzcGFjZVJpZ2h0ID0gc3BhY2UucmlnaHQgLSBsaXN0LnJpZ2h0O1xuICAgIGxldCBpbmZvV2lkdGggPSBpbmZvLnJpZ2h0IC0gaW5mby5sZWZ0LCBpbmZvSGVpZ2h0ID0gaW5mby5ib3R0b20gLSBpbmZvLnRvcDtcbiAgICBpZiAobGVmdCAmJiBzcGFjZUxlZnQgPCBNYXRoLm1pbihpbmZvV2lkdGgsIHNwYWNlUmlnaHQpKVxuICAgICAgICBsZWZ0ID0gZmFsc2U7XG4gICAgZWxzZSBpZiAoIWxlZnQgJiYgc3BhY2VSaWdodCA8IE1hdGgubWluKGluZm9XaWR0aCwgc3BhY2VMZWZ0KSlcbiAgICAgICAgbGVmdCA9IHRydWU7XG4gICAgaWYgKGluZm9XaWR0aCA8PSAobGVmdCA/IHNwYWNlTGVmdCA6IHNwYWNlUmlnaHQpKSB7XG4gICAgICAgIG9mZnNldCA9IE1hdGgubWF4KHNwYWNlLnRvcCwgTWF0aC5taW4ob3B0aW9uLnRvcCwgc3BhY2UuYm90dG9tIC0gaW5mb0hlaWdodCkpIC0gbGlzdC50b3A7XG4gICAgICAgIG1heFdpZHRoID0gTWF0aC5taW4oNDAwIC8qIEluZm8uV2lkdGggKi8sIGxlZnQgPyBzcGFjZUxlZnQgOiBzcGFjZVJpZ2h0KTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIG5hcnJvdyA9IHRydWU7XG4gICAgICAgIG1heFdpZHRoID0gTWF0aC5taW4oNDAwIC8qIEluZm8uV2lkdGggKi8sIChydGwgPyBsaXN0LnJpZ2h0IDogc3BhY2UucmlnaHQgLSBsaXN0LmxlZnQpIC0gMzAgLyogSW5mby5NYXJnaW4gKi8pO1xuICAgICAgICBsZXQgc3BhY2VCZWxvdyA9IHNwYWNlLmJvdHRvbSAtIGxpc3QuYm90dG9tO1xuICAgICAgICBpZiAoc3BhY2VCZWxvdyA+PSBpbmZvSGVpZ2h0IHx8IHNwYWNlQmVsb3cgPiBsaXN0LnRvcCkgeyAvLyBCZWxvdyB0aGUgY29tcGxldGlvblxuICAgICAgICAgICAgb2Zmc2V0ID0gb3B0aW9uLmJvdHRvbSAtIGxpc3QudG9wO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgeyAvLyBBYm92ZSBpdFxuICAgICAgICAgICAgc2lkZSA9IFwiYm90dG9tXCI7XG4gICAgICAgICAgICBvZmZzZXQgPSBsaXN0LmJvdHRvbSAtIG9wdGlvbi50b3A7XG4gICAgICAgIH1cbiAgICB9XG4gICAgbGV0IHNjYWxlWSA9IChsaXN0LmJvdHRvbSAtIGxpc3QudG9wKSAvIHRvb2x0aXAub2Zmc2V0SGVpZ2h0O1xuICAgIGxldCBzY2FsZVggPSAobGlzdC5yaWdodCAtIGxpc3QubGVmdCkgLyB0b29sdGlwLm9mZnNldFdpZHRoO1xuICAgIHJldHVybiB7XG4gICAgICAgIHN0eWxlOiBgJHtzaWRlfTogJHtvZmZzZXQgLyBzY2FsZVl9cHg7IG1heC13aWR0aDogJHttYXhXaWR0aCAvIHNjYWxlWH1weGAsXG4gICAgICAgIGNsYXNzOiBcImNtLWNvbXBsZXRpb25JbmZvLVwiICsgKG5hcnJvdyA/IChydGwgPyBcImxlZnQtbmFycm93XCIgOiBcInJpZ2h0LW5hcnJvd1wiKSA6IGxlZnQgPyBcImxlZnRcIiA6IFwicmlnaHRcIilcbiAgICB9O1xufVxuXG5mdW5jdGlvbiBvcHRpb25Db250ZW50KGNvbmZpZykge1xuICAgIGxldCBjb250ZW50ID0gY29uZmlnLmFkZFRvT3B0aW9ucy5zbGljZSgpO1xuICAgIGlmIChjb25maWcuaWNvbnMpXG4gICAgICAgIGNvbnRlbnQucHVzaCh7XG4gICAgICAgICAgICByZW5kZXIoY29tcGxldGlvbikge1xuICAgICAgICAgICAgICAgIGxldCBpY29uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgICAgICAgICBpY29uLmNsYXNzTGlzdC5hZGQoXCJjbS1jb21wbGV0aW9uSWNvblwiKTtcbiAgICAgICAgICAgICAgICBpZiAoY29tcGxldGlvbi50eXBlKVxuICAgICAgICAgICAgICAgICAgICBpY29uLmNsYXNzTGlzdC5hZGQoLi4uY29tcGxldGlvbi50eXBlLnNwbGl0KC9cXHMrL2cpLm1hcChjbHMgPT4gXCJjbS1jb21wbGV0aW9uSWNvbi1cIiArIGNscykpO1xuICAgICAgICAgICAgICAgIGljb24uc2V0QXR0cmlidXRlKFwiYXJpYS1oaWRkZW5cIiwgXCJ0cnVlXCIpO1xuICAgICAgICAgICAgICAgIHJldHVybiBpY29uO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHBvc2l0aW9uOiAyMFxuICAgICAgICB9KTtcbiAgICBjb250ZW50LnB1c2goe1xuICAgICAgICByZW5kZXIoY29tcGxldGlvbiwgX3MsIF92LCBtYXRjaCkge1xuICAgICAgICAgICAgbGV0IGxhYmVsRWx0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNwYW5cIik7XG4gICAgICAgICAgICBsYWJlbEVsdC5jbGFzc05hbWUgPSBcImNtLWNvbXBsZXRpb25MYWJlbFwiO1xuICAgICAgICAgICAgbGV0IGxhYmVsID0gY29tcGxldGlvbi5kaXNwbGF5TGFiZWwgfHwgY29tcGxldGlvbi5sYWJlbCwgb2ZmID0gMDtcbiAgICAgICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgbWF0Y2gubGVuZ3RoOykge1xuICAgICAgICAgICAgICAgIGxldCBmcm9tID0gbWF0Y2hbaisrXSwgdG8gPSBtYXRjaFtqKytdO1xuICAgICAgICAgICAgICAgIGlmIChmcm9tID4gb2ZmKVxuICAgICAgICAgICAgICAgICAgICBsYWJlbEVsdC5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShsYWJlbC5zbGljZShvZmYsIGZyb20pKSk7XG4gICAgICAgICAgICAgICAgbGV0IHNwYW4gPSBsYWJlbEVsdC5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3BhblwiKSk7XG4gICAgICAgICAgICAgICAgc3Bhbi5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShsYWJlbC5zbGljZShmcm9tLCB0bykpKTtcbiAgICAgICAgICAgICAgICBzcGFuLmNsYXNzTmFtZSA9IFwiY20tY29tcGxldGlvbk1hdGNoZWRUZXh0XCI7XG4gICAgICAgICAgICAgICAgb2ZmID0gdG87XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAob2ZmIDwgbGFiZWwubGVuZ3RoKVxuICAgICAgICAgICAgICAgIGxhYmVsRWx0LmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKGxhYmVsLnNsaWNlKG9mZikpKTtcbiAgICAgICAgICAgIHJldHVybiBsYWJlbEVsdDtcbiAgICAgICAgfSxcbiAgICAgICAgcG9zaXRpb246IDUwXG4gICAgfSwge1xuICAgICAgICByZW5kZXIoY29tcGxldGlvbikge1xuICAgICAgICAgICAgaWYgKCFjb21wbGV0aW9uLmRldGFpbClcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgIGxldCBkZXRhaWxFbHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3BhblwiKTtcbiAgICAgICAgICAgIGRldGFpbEVsdC5jbGFzc05hbWUgPSBcImNtLWNvbXBsZXRpb25EZXRhaWxcIjtcbiAgICAgICAgICAgIGRldGFpbEVsdC50ZXh0Q29udGVudCA9IGNvbXBsZXRpb24uZGV0YWlsO1xuICAgICAgICAgICAgcmV0dXJuIGRldGFpbEVsdDtcbiAgICAgICAgfSxcbiAgICAgICAgcG9zaXRpb246IDgwXG4gICAgfSk7XG4gICAgcmV0dXJuIGNvbnRlbnQuc29ydCgoYSwgYikgPT4gYS5wb3NpdGlvbiAtIGIucG9zaXRpb24pLm1hcChhID0+IGEucmVuZGVyKTtcbn1cbmZ1bmN0aW9uIHJhbmdlQXJvdW5kU2VsZWN0ZWQodG90YWwsIHNlbGVjdGVkLCBtYXgpIHtcbiAgICBpZiAodG90YWwgPD0gbWF4KVxuICAgICAgICByZXR1cm4geyBmcm9tOiAwLCB0bzogdG90YWwgfTtcbiAgICBpZiAoc2VsZWN0ZWQgPCAwKVxuICAgICAgICBzZWxlY3RlZCA9IDA7XG4gICAgaWYgKHNlbGVjdGVkIDw9ICh0b3RhbCA+PiAxKSkge1xuICAgICAgICBsZXQgb2ZmID0gTWF0aC5mbG9vcihzZWxlY3RlZCAvIG1heCk7XG4gICAgICAgIHJldHVybiB7IGZyb206IG9mZiAqIG1heCwgdG86IChvZmYgKyAxKSAqIG1heCB9O1xuICAgIH1cbiAgICBsZXQgb2ZmID0gTWF0aC5mbG9vcigodG90YWwgLSBzZWxlY3RlZCkgLyBtYXgpO1xuICAgIHJldHVybiB7IGZyb206IHRvdGFsIC0gKG9mZiArIDEpICogbWF4LCB0bzogdG90YWwgLSBvZmYgKiBtYXggfTtcbn1cbmNsYXNzIENvbXBsZXRpb25Ub29sdGlwIHtcbiAgICBjb25zdHJ1Y3Rvcih2aWV3LCBzdGF0ZUZpZWxkLCBhcHBseUNvbXBsZXRpb24pIHtcbiAgICAgICAgdGhpcy52aWV3ID0gdmlldztcbiAgICAgICAgdGhpcy5zdGF0ZUZpZWxkID0gc3RhdGVGaWVsZDtcbiAgICAgICAgdGhpcy5hcHBseUNvbXBsZXRpb24gPSBhcHBseUNvbXBsZXRpb247XG4gICAgICAgIHRoaXMuaW5mbyA9IG51bGw7XG4gICAgICAgIHRoaXMuaW5mb0Rlc3Ryb3kgPSBudWxsO1xuICAgICAgICB0aGlzLnBsYWNlSW5mb1JlcSA9IHtcbiAgICAgICAgICAgIHJlYWQ6ICgpID0+IHRoaXMubWVhc3VyZUluZm8oKSxcbiAgICAgICAgICAgIHdyaXRlOiAocG9zKSA9PiB0aGlzLnBsYWNlSW5mbyhwb3MpLFxuICAgICAgICAgICAga2V5OiB0aGlzXG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuc3BhY2UgPSBudWxsO1xuICAgICAgICB0aGlzLmN1cnJlbnRDbGFzcyA9IFwiXCI7XG4gICAgICAgIGxldCBjU3RhdGUgPSB2aWV3LnN0YXRlLmZpZWxkKHN0YXRlRmllbGQpO1xuICAgICAgICBsZXQgeyBvcHRpb25zLCBzZWxlY3RlZCB9ID0gY1N0YXRlLm9wZW47XG4gICAgICAgIGxldCBjb25maWcgPSB2aWV3LnN0YXRlLmZhY2V0KGNvbXBsZXRpb25Db25maWcpO1xuICAgICAgICB0aGlzLm9wdGlvbkNvbnRlbnQgPSBvcHRpb25Db250ZW50KGNvbmZpZyk7XG4gICAgICAgIHRoaXMub3B0aW9uQ2xhc3MgPSBjb25maWcub3B0aW9uQ2xhc3M7XG4gICAgICAgIHRoaXMudG9vbHRpcENsYXNzID0gY29uZmlnLnRvb2x0aXBDbGFzcztcbiAgICAgICAgdGhpcy5yYW5nZSA9IHJhbmdlQXJvdW5kU2VsZWN0ZWQob3B0aW9ucy5sZW5ndGgsIHNlbGVjdGVkLCBjb25maWcubWF4UmVuZGVyZWRPcHRpb25zKTtcbiAgICAgICAgdGhpcy5kb20gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICB0aGlzLmRvbS5jbGFzc05hbWUgPSBcImNtLXRvb2x0aXAtYXV0b2NvbXBsZXRlXCI7XG4gICAgICAgIHRoaXMudXBkYXRlVG9vbHRpcENsYXNzKHZpZXcuc3RhdGUpO1xuICAgICAgICB0aGlzLmRvbS5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsIChlKSA9PiB7XG4gICAgICAgICAgICBsZXQgeyBvcHRpb25zIH0gPSB2aWV3LnN0YXRlLmZpZWxkKHN0YXRlRmllbGQpLm9wZW47XG4gICAgICAgICAgICBmb3IgKGxldCBkb20gPSBlLnRhcmdldCwgbWF0Y2g7IGRvbSAmJiBkb20gIT0gdGhpcy5kb207IGRvbSA9IGRvbS5wYXJlbnROb2RlKSB7XG4gICAgICAgICAgICAgICAgaWYgKGRvbS5ub2RlTmFtZSA9PSBcIkxJXCIgJiYgKG1hdGNoID0gLy0oXFxkKykkLy5leGVjKGRvbS5pZCkpICYmICttYXRjaFsxXSA8IG9wdGlvbnMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYXBwbHlDb21wbGV0aW9uKHZpZXcsIG9wdGlvbnNbK21hdGNoWzFdXSk7XG4gICAgICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuZG9tLmFkZEV2ZW50TGlzdGVuZXIoXCJmb2N1c291dFwiLCAoZSkgPT4ge1xuICAgICAgICAgICAgbGV0IHN0YXRlID0gdmlldy5zdGF0ZS5maWVsZCh0aGlzLnN0YXRlRmllbGQsIGZhbHNlKTtcbiAgICAgICAgICAgIGlmIChzdGF0ZSAmJiBzdGF0ZS50b29sdGlwICYmIHZpZXcuc3RhdGUuZmFjZXQoY29tcGxldGlvbkNvbmZpZykuY2xvc2VPbkJsdXIgJiZcbiAgICAgICAgICAgICAgICBlLnJlbGF0ZWRUYXJnZXQgIT0gdmlldy5jb250ZW50RE9NKVxuICAgICAgICAgICAgICAgIHZpZXcuZGlzcGF0Y2goeyBlZmZlY3RzOiBjbG9zZUNvbXBsZXRpb25FZmZlY3Qub2YobnVsbCkgfSk7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLnNob3dPcHRpb25zKG9wdGlvbnMsIGNTdGF0ZS5pZCk7XG4gICAgfVxuICAgIG1vdW50KCkgeyB0aGlzLnVwZGF0ZVNlbCgpOyB9XG4gICAgc2hvd09wdGlvbnMob3B0aW9ucywgaWQpIHtcbiAgICAgICAgaWYgKHRoaXMubGlzdClcbiAgICAgICAgICAgIHRoaXMubGlzdC5yZW1vdmUoKTtcbiAgICAgICAgdGhpcy5saXN0ID0gdGhpcy5kb20uYXBwZW5kQ2hpbGQodGhpcy5jcmVhdGVMaXN0Qm94KG9wdGlvbnMsIGlkLCB0aGlzLnJhbmdlKSk7XG4gICAgICAgIHRoaXMubGlzdC5hZGRFdmVudExpc3RlbmVyKFwic2Nyb2xsXCIsICgpID0+IHtcbiAgICAgICAgICAgIGlmICh0aGlzLmluZm8pXG4gICAgICAgICAgICAgICAgdGhpcy52aWV3LnJlcXVlc3RNZWFzdXJlKHRoaXMucGxhY2VJbmZvUmVxKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHVwZGF0ZSh1cGRhdGUpIHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICBsZXQgY1N0YXRlID0gdXBkYXRlLnN0YXRlLmZpZWxkKHRoaXMuc3RhdGVGaWVsZCk7XG4gICAgICAgIGxldCBwcmV2U3RhdGUgPSB1cGRhdGUuc3RhcnRTdGF0ZS5maWVsZCh0aGlzLnN0YXRlRmllbGQpO1xuICAgICAgICB0aGlzLnVwZGF0ZVRvb2x0aXBDbGFzcyh1cGRhdGUuc3RhdGUpO1xuICAgICAgICBpZiAoY1N0YXRlICE9IHByZXZTdGF0ZSkge1xuICAgICAgICAgICAgbGV0IHsgb3B0aW9ucywgc2VsZWN0ZWQsIGRpc2FibGVkIH0gPSBjU3RhdGUub3BlbjtcbiAgICAgICAgICAgIGlmICghcHJldlN0YXRlLm9wZW4gfHwgcHJldlN0YXRlLm9wZW4ub3B0aW9ucyAhPSBvcHRpb25zKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5yYW5nZSA9IHJhbmdlQXJvdW5kU2VsZWN0ZWQob3B0aW9ucy5sZW5ndGgsIHNlbGVjdGVkLCB1cGRhdGUuc3RhdGUuZmFjZXQoY29tcGxldGlvbkNvbmZpZykubWF4UmVuZGVyZWRPcHRpb25zKTtcbiAgICAgICAgICAgICAgICB0aGlzLnNob3dPcHRpb25zKG9wdGlvbnMsIGNTdGF0ZS5pZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZVNlbCgpO1xuICAgICAgICAgICAgaWYgKGRpc2FibGVkICE9ICgoX2EgPSBwcmV2U3RhdGUub3BlbikgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmRpc2FibGVkKSlcbiAgICAgICAgICAgICAgICB0aGlzLmRvbS5jbGFzc0xpc3QudG9nZ2xlKFwiY20tdG9vbHRpcC1hdXRvY29tcGxldGUtZGlzYWJsZWRcIiwgISFkaXNhYmxlZCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgdXBkYXRlVG9vbHRpcENsYXNzKHN0YXRlKSB7XG4gICAgICAgIGxldCBjbHMgPSB0aGlzLnRvb2x0aXBDbGFzcyhzdGF0ZSk7XG4gICAgICAgIGlmIChjbHMgIT0gdGhpcy5jdXJyZW50Q2xhc3MpIHtcbiAgICAgICAgICAgIGZvciAobGV0IGMgb2YgdGhpcy5jdXJyZW50Q2xhc3Muc3BsaXQoXCIgXCIpKVxuICAgICAgICAgICAgICAgIGlmIChjKVxuICAgICAgICAgICAgICAgICAgICB0aGlzLmRvbS5jbGFzc0xpc3QucmVtb3ZlKGMpO1xuICAgICAgICAgICAgZm9yIChsZXQgYyBvZiBjbHMuc3BsaXQoXCIgXCIpKVxuICAgICAgICAgICAgICAgIGlmIChjKVxuICAgICAgICAgICAgICAgICAgICB0aGlzLmRvbS5jbGFzc0xpc3QuYWRkKGMpO1xuICAgICAgICAgICAgdGhpcy5jdXJyZW50Q2xhc3MgPSBjbHM7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcG9zaXRpb25lZChzcGFjZSkge1xuICAgICAgICB0aGlzLnNwYWNlID0gc3BhY2U7XG4gICAgICAgIGlmICh0aGlzLmluZm8pXG4gICAgICAgICAgICB0aGlzLnZpZXcucmVxdWVzdE1lYXN1cmUodGhpcy5wbGFjZUluZm9SZXEpO1xuICAgIH1cbiAgICB1cGRhdGVTZWwoKSB7XG4gICAgICAgIGxldCBjU3RhdGUgPSB0aGlzLnZpZXcuc3RhdGUuZmllbGQodGhpcy5zdGF0ZUZpZWxkKSwgb3BlbiA9IGNTdGF0ZS5vcGVuO1xuICAgICAgICBpZiAob3Blbi5zZWxlY3RlZCA+IC0xICYmIG9wZW4uc2VsZWN0ZWQgPCB0aGlzLnJhbmdlLmZyb20gfHwgb3Blbi5zZWxlY3RlZCA+PSB0aGlzLnJhbmdlLnRvKSB7XG4gICAgICAgICAgICB0aGlzLnJhbmdlID0gcmFuZ2VBcm91bmRTZWxlY3RlZChvcGVuLm9wdGlvbnMubGVuZ3RoLCBvcGVuLnNlbGVjdGVkLCB0aGlzLnZpZXcuc3RhdGUuZmFjZXQoY29tcGxldGlvbkNvbmZpZykubWF4UmVuZGVyZWRPcHRpb25zKTtcbiAgICAgICAgICAgIHRoaXMuc2hvd09wdGlvbnMob3Blbi5vcHRpb25zLCBjU3RhdGUuaWQpO1xuICAgICAgICB9XG4gICAgICAgIGxldCBuZXdTZWwgPSB0aGlzLnVwZGF0ZVNlbGVjdGVkT3B0aW9uKG9wZW4uc2VsZWN0ZWQpO1xuICAgICAgICBpZiAobmV3U2VsKSB7XG4gICAgICAgICAgICB0aGlzLmRlc3Ryb3lJbmZvKCk7XG4gICAgICAgICAgICBsZXQgeyBjb21wbGV0aW9uIH0gPSBvcGVuLm9wdGlvbnNbb3Blbi5zZWxlY3RlZF07XG4gICAgICAgICAgICBsZXQgeyBpbmZvIH0gPSBjb21wbGV0aW9uO1xuICAgICAgICAgICAgaWYgKCFpbmZvKVxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIGxldCBpbmZvUmVzdWx0ID0gdHlwZW9mIGluZm8gPT09IFwic3RyaW5nXCIgPyBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShpbmZvKSA6IGluZm8oY29tcGxldGlvbik7XG4gICAgICAgICAgICBpZiAoIWluZm9SZXN1bHQpXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgaWYgKFwidGhlblwiIGluIGluZm9SZXN1bHQpIHtcbiAgICAgICAgICAgICAgICBpbmZvUmVzdWx0LnRoZW4ob2JqID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9iaiAmJiB0aGlzLnZpZXcuc3RhdGUuZmllbGQodGhpcy5zdGF0ZUZpZWxkLCBmYWxzZSkgPT0gY1N0YXRlKVxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hZGRJbmZvUGFuZShvYmosIGNvbXBsZXRpb24pO1xuICAgICAgICAgICAgICAgIH0pLmNhdGNoKGUgPT4gbG9nRXhjZXB0aW9uKHRoaXMudmlldy5zdGF0ZSwgZSwgXCJjb21wbGV0aW9uIGluZm9cIikpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5hZGRJbmZvUGFuZShpbmZvUmVzdWx0LCBjb21wbGV0aW9uKTtcbiAgICAgICAgICAgICAgICBuZXdTZWwuc2V0QXR0cmlidXRlKFwiYXJpYS1kZXNjcmliZWRieVwiLCB0aGlzLmluZm8uaWQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGFkZEluZm9QYW5lKGNvbnRlbnQsIGNvbXBsZXRpb24pIHtcbiAgICAgICAgdGhpcy5kZXN0cm95SW5mbygpO1xuICAgICAgICBsZXQgd3JhcCA9IHRoaXMuaW5mbyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgIHdyYXAuY2xhc3NOYW1lID0gXCJjbS10b29sdGlwIGNtLWNvbXBsZXRpb25JbmZvXCI7XG4gICAgICAgIHdyYXAuaWQgPSBcImNtLWNvbXBsZXRpb25JbmZvLVwiICsgTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMHhmZmZmKS50b1N0cmluZygxNik7XG4gICAgICAgIGlmIChjb250ZW50Lm5vZGVUeXBlICE9IG51bGwpIHtcbiAgICAgICAgICAgIHdyYXAuYXBwZW5kQ2hpbGQoY29udGVudCk7XG4gICAgICAgICAgICB0aGlzLmluZm9EZXN0cm95ID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGxldCB7IGRvbSwgZGVzdHJveSB9ID0gY29udGVudDtcbiAgICAgICAgICAgIHdyYXAuYXBwZW5kQ2hpbGQoZG9tKTtcbiAgICAgICAgICAgIHRoaXMuaW5mb0Rlc3Ryb3kgPSBkZXN0cm95IHx8IG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5kb20uYXBwZW5kQ2hpbGQod3JhcCk7XG4gICAgICAgIHRoaXMudmlldy5yZXF1ZXN0TWVhc3VyZSh0aGlzLnBsYWNlSW5mb1JlcSk7XG4gICAgfVxuICAgIHVwZGF0ZVNlbGVjdGVkT3B0aW9uKHNlbGVjdGVkKSB7XG4gICAgICAgIGxldCBzZXQgPSBudWxsO1xuICAgICAgICBmb3IgKGxldCBvcHQgPSB0aGlzLmxpc3QuZmlyc3RDaGlsZCwgaSA9IHRoaXMucmFuZ2UuZnJvbTsgb3B0OyBvcHQgPSBvcHQubmV4dFNpYmxpbmcsIGkrKykge1xuICAgICAgICAgICAgaWYgKG9wdC5ub2RlTmFtZSAhPSBcIkxJXCIgfHwgIW9wdC5pZCkge1xuICAgICAgICAgICAgICAgIGktLTsgLy8gQSBzZWN0aW9uIGhlYWRlclxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoaSA9PSBzZWxlY3RlZCkge1xuICAgICAgICAgICAgICAgIGlmICghb3B0Lmhhc0F0dHJpYnV0ZShcImFyaWEtc2VsZWN0ZWRcIikpIHtcbiAgICAgICAgICAgICAgICAgICAgb3B0LnNldEF0dHJpYnV0ZShcImFyaWEtc2VsZWN0ZWRcIiwgXCJ0cnVlXCIpO1xuICAgICAgICAgICAgICAgICAgICBzZXQgPSBvcHQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYgKG9wdC5oYXNBdHRyaWJ1dGUoXCJhcmlhLXNlbGVjdGVkXCIpKSB7XG4gICAgICAgICAgICAgICAgICAgIG9wdC5yZW1vdmVBdHRyaWJ1dGUoXCJhcmlhLXNlbGVjdGVkXCIpO1xuICAgICAgICAgICAgICAgICAgICBvcHQucmVtb3ZlQXR0cmlidXRlKFwiYXJpYS1kZXNjcmliZWRieVwiKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHNldClcbiAgICAgICAgICAgIHNjcm9sbEludG9WaWV3KHRoaXMubGlzdCwgc2V0KTtcbiAgICAgICAgcmV0dXJuIHNldDtcbiAgICB9XG4gICAgbWVhc3VyZUluZm8oKSB7XG4gICAgICAgIGxldCBzZWwgPSB0aGlzLmRvbS5xdWVyeVNlbGVjdG9yKFwiW2FyaWEtc2VsZWN0ZWRdXCIpO1xuICAgICAgICBpZiAoIXNlbCB8fCAhdGhpcy5pbmZvKVxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIGxldCBsaXN0UmVjdCA9IHRoaXMuZG9tLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgICBsZXQgaW5mb1JlY3QgPSB0aGlzLmluZm8uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICAgIGxldCBzZWxSZWN0ID0gc2VsLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgICBsZXQgc3BhY2UgPSB0aGlzLnNwYWNlO1xuICAgICAgICBpZiAoIXNwYWNlKSB7XG4gICAgICAgICAgICBsZXQgZG9jRWx0ID0gdGhpcy5kb20ub3duZXJEb2N1bWVudC5kb2N1bWVudEVsZW1lbnQ7XG4gICAgICAgICAgICBzcGFjZSA9IHsgbGVmdDogMCwgdG9wOiAwLCByaWdodDogZG9jRWx0LmNsaWVudFdpZHRoLCBib3R0b206IGRvY0VsdC5jbGllbnRIZWlnaHQgfTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoc2VsUmVjdC50b3AgPiBNYXRoLm1pbihzcGFjZS5ib3R0b20sIGxpc3RSZWN0LmJvdHRvbSkgLSAxMCB8fFxuICAgICAgICAgICAgc2VsUmVjdC5ib3R0b20gPCBNYXRoLm1heChzcGFjZS50b3AsIGxpc3RSZWN0LnRvcCkgKyAxMClcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICByZXR1cm4gdGhpcy52aWV3LnN0YXRlLmZhY2V0KGNvbXBsZXRpb25Db25maWcpLnBvc2l0aW9uSW5mbyh0aGlzLnZpZXcsIGxpc3RSZWN0LCBzZWxSZWN0LCBpbmZvUmVjdCwgc3BhY2UsIHRoaXMuZG9tKTtcbiAgICB9XG4gICAgcGxhY2VJbmZvKHBvcykge1xuICAgICAgICBpZiAodGhpcy5pbmZvKSB7XG4gICAgICAgICAgICBpZiAocG9zKSB7XG4gICAgICAgICAgICAgICAgaWYgKHBvcy5zdHlsZSlcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pbmZvLnN0eWxlLmNzc1RleHQgPSBwb3Muc3R5bGU7XG4gICAgICAgICAgICAgICAgdGhpcy5pbmZvLmNsYXNzTmFtZSA9IFwiY20tdG9vbHRpcCBjbS1jb21wbGV0aW9uSW5mbyBcIiArIChwb3MuY2xhc3MgfHwgXCJcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLmluZm8uc3R5bGUuY3NzVGV4dCA9IFwidG9wOiAtMWU2cHhcIjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBjcmVhdGVMaXN0Qm94KG9wdGlvbnMsIGlkLCByYW5nZSkge1xuICAgICAgICBjb25zdCB1bCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJ1bFwiKTtcbiAgICAgICAgdWwuaWQgPSBpZDtcbiAgICAgICAgdWwuc2V0QXR0cmlidXRlKFwicm9sZVwiLCBcImxpc3Rib3hcIik7XG4gICAgICAgIHVsLnNldEF0dHJpYnV0ZShcImFyaWEtZXhwYW5kZWRcIiwgXCJ0cnVlXCIpO1xuICAgICAgICB1bC5zZXRBdHRyaWJ1dGUoXCJhcmlhLWxhYmVsXCIsIHRoaXMudmlldy5zdGF0ZS5waHJhc2UoXCJDb21wbGV0aW9uc1wiKSk7XG4gICAgICAgIHVsLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIiwgZSA9PiB7XG4gICAgICAgICAgICAvLyBQcmV2ZW50IGZvY3VzIGNoYW5nZSB3aGVuIGNsaWNraW5nIHRoZSBzY3JvbGxiYXJcbiAgICAgICAgICAgIGlmIChlLnRhcmdldCA9PSB1bClcbiAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIH0pO1xuICAgICAgICBsZXQgY3VyU2VjdGlvbiA9IG51bGw7XG4gICAgICAgIGZvciAobGV0IGkgPSByYW5nZS5mcm9tOyBpIDwgcmFuZ2UudG87IGkrKykge1xuICAgICAgICAgICAgbGV0IHsgY29tcGxldGlvbiwgbWF0Y2ggfSA9IG9wdGlvbnNbaV0sIHsgc2VjdGlvbiB9ID0gY29tcGxldGlvbjtcbiAgICAgICAgICAgIGlmIChzZWN0aW9uKSB7XG4gICAgICAgICAgICAgICAgbGV0IG5hbWUgPSB0eXBlb2Ygc2VjdGlvbiA9PSBcInN0cmluZ1wiID8gc2VjdGlvbiA6IHNlY3Rpb24ubmFtZTtcbiAgICAgICAgICAgICAgICBpZiAobmFtZSAhPSBjdXJTZWN0aW9uICYmIChpID4gcmFuZ2UuZnJvbSB8fCByYW5nZS5mcm9tID09IDApKSB7XG4gICAgICAgICAgICAgICAgICAgIGN1clNlY3Rpb24gPSBuYW1lO1xuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHNlY3Rpb24gIT0gXCJzdHJpbmdcIiAmJiBzZWN0aW9uLmhlYWRlcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgdWwuYXBwZW5kQ2hpbGQoc2VjdGlvbi5oZWFkZXIoc2VjdGlvbikpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGhlYWRlciA9IHVsLmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJjb21wbGV0aW9uLXNlY3Rpb25cIikpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyLnRleHRDb250ZW50ID0gbmFtZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGxpID0gdWwuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImxpXCIpKTtcbiAgICAgICAgICAgIGxpLmlkID0gaWQgKyBcIi1cIiArIGk7XG4gICAgICAgICAgICBsaS5zZXRBdHRyaWJ1dGUoXCJyb2xlXCIsIFwib3B0aW9uXCIpO1xuICAgICAgICAgICAgbGV0IGNscyA9IHRoaXMub3B0aW9uQ2xhc3MoY29tcGxldGlvbik7XG4gICAgICAgICAgICBpZiAoY2xzKVxuICAgICAgICAgICAgICAgIGxpLmNsYXNzTmFtZSA9IGNscztcbiAgICAgICAgICAgIGZvciAobGV0IHNvdXJjZSBvZiB0aGlzLm9wdGlvbkNvbnRlbnQpIHtcbiAgICAgICAgICAgICAgICBsZXQgbm9kZSA9IHNvdXJjZShjb21wbGV0aW9uLCB0aGlzLnZpZXcuc3RhdGUsIHRoaXMudmlldywgbWF0Y2gpO1xuICAgICAgICAgICAgICAgIGlmIChub2RlKVxuICAgICAgICAgICAgICAgICAgICBsaS5hcHBlbmRDaGlsZChub2RlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAocmFuZ2UuZnJvbSlcbiAgICAgICAgICAgIHVsLmNsYXNzTGlzdC5hZGQoXCJjbS1jb21wbGV0aW9uTGlzdEluY29tcGxldGVUb3BcIik7XG4gICAgICAgIGlmIChyYW5nZS50byA8IG9wdGlvbnMubGVuZ3RoKVxuICAgICAgICAgICAgdWwuY2xhc3NMaXN0LmFkZChcImNtLWNvbXBsZXRpb25MaXN0SW5jb21wbGV0ZUJvdHRvbVwiKTtcbiAgICAgICAgcmV0dXJuIHVsO1xuICAgIH1cbiAgICBkZXN0cm95SW5mbygpIHtcbiAgICAgICAgaWYgKHRoaXMuaW5mbykge1xuICAgICAgICAgICAgaWYgKHRoaXMuaW5mb0Rlc3Ryb3kpXG4gICAgICAgICAgICAgICAgdGhpcy5pbmZvRGVzdHJveSgpO1xuICAgICAgICAgICAgdGhpcy5pbmZvLnJlbW92ZSgpO1xuICAgICAgICAgICAgdGhpcy5pbmZvID0gbnVsbDtcbiAgICAgICAgfVxuICAgIH1cbiAgICBkZXN0cm95KCkge1xuICAgICAgICB0aGlzLmRlc3Ryb3lJbmZvKCk7XG4gICAgfVxufVxuZnVuY3Rpb24gY29tcGxldGlvblRvb2x0aXAoc3RhdGVGaWVsZCwgYXBwbHlDb21wbGV0aW9uKSB7XG4gICAgcmV0dXJuICh2aWV3KSA9PiBuZXcgQ29tcGxldGlvblRvb2x0aXAodmlldywgc3RhdGVGaWVsZCwgYXBwbHlDb21wbGV0aW9uKTtcbn1cbmZ1bmN0aW9uIHNjcm9sbEludG9WaWV3KGNvbnRhaW5lciwgZWxlbWVudCkge1xuICAgIGxldCBwYXJlbnQgPSBjb250YWluZXIuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgbGV0IHNlbGYgPSBlbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgIGxldCBzY2FsZVkgPSBwYXJlbnQuaGVpZ2h0IC8gY29udGFpbmVyLm9mZnNldEhlaWdodDtcbiAgICBpZiAoc2VsZi50b3AgPCBwYXJlbnQudG9wKVxuICAgICAgICBjb250YWluZXIuc2Nyb2xsVG9wIC09IChwYXJlbnQudG9wIC0gc2VsZi50b3ApIC8gc2NhbGVZO1xuICAgIGVsc2UgaWYgKHNlbGYuYm90dG9tID4gcGFyZW50LmJvdHRvbSlcbiAgICAgICAgY29udGFpbmVyLnNjcm9sbFRvcCArPSAoc2VsZi5ib3R0b20gLSBwYXJlbnQuYm90dG9tKSAvIHNjYWxlWTtcbn1cblxuLy8gVXNlZCB0byBwaWNrIGEgcHJlZmVycmVkIG9wdGlvbiB3aGVuIHR3byBvcHRpb25zIHdpdGggdGhlIHNhbWVcbi8vIGxhYmVsIG9jY3VyIGluIHRoZSByZXN1bHQuXG5mdW5jdGlvbiBzY29yZShvcHRpb24pIHtcbiAgICByZXR1cm4gKG9wdGlvbi5ib29zdCB8fCAwKSAqIDEwMCArIChvcHRpb24uYXBwbHkgPyAxMCA6IDApICsgKG9wdGlvbi5pbmZvID8gNSA6IDApICtcbiAgICAgICAgKG9wdGlvbi50eXBlID8gMSA6IDApO1xufVxuZnVuY3Rpb24gc29ydE9wdGlvbnMoYWN0aXZlLCBzdGF0ZSkge1xuICAgIGxldCBvcHRpb25zID0gW107XG4gICAgbGV0IHNlY3Rpb25zID0gbnVsbCwgZHluYW1pY1NlY3Rpb25TY29yZSA9IG51bGw7XG4gICAgbGV0IGFkZE9wdGlvbiA9IChvcHRpb24pID0+IHtcbiAgICAgICAgb3B0aW9ucy5wdXNoKG9wdGlvbik7XG4gICAgICAgIGxldCB7IHNlY3Rpb24gfSA9IG9wdGlvbi5jb21wbGV0aW9uO1xuICAgICAgICBpZiAoc2VjdGlvbikge1xuICAgICAgICAgICAgaWYgKCFzZWN0aW9ucylcbiAgICAgICAgICAgICAgICBzZWN0aW9ucyA9IFtdO1xuICAgICAgICAgICAgbGV0IG5hbWUgPSB0eXBlb2Ygc2VjdGlvbiA9PSBcInN0cmluZ1wiID8gc2VjdGlvbiA6IHNlY3Rpb24ubmFtZTtcbiAgICAgICAgICAgIGlmICghc2VjdGlvbnMuc29tZShzID0+IHMubmFtZSA9PSBuYW1lKSlcbiAgICAgICAgICAgICAgICBzZWN0aW9ucy5wdXNoKHR5cGVvZiBzZWN0aW9uID09IFwic3RyaW5nXCIgPyB7IG5hbWUgfSA6IHNlY3Rpb24pO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBsZXQgY29uZiA9IHN0YXRlLmZhY2V0KGNvbXBsZXRpb25Db25maWcpO1xuICAgIGZvciAobGV0IGEgb2YgYWN0aXZlKVxuICAgICAgICBpZiAoYS5oYXNSZXN1bHQoKSkge1xuICAgICAgICAgICAgbGV0IGdldE1hdGNoID0gYS5yZXN1bHQuZ2V0TWF0Y2g7XG4gICAgICAgICAgICBpZiAoYS5yZXN1bHQuZmlsdGVyID09PSBmYWxzZSkge1xuICAgICAgICAgICAgICAgIGZvciAobGV0IG9wdGlvbiBvZiBhLnJlc3VsdC5vcHRpb25zKSB7XG4gICAgICAgICAgICAgICAgICAgIGFkZE9wdGlvbihuZXcgT3B0aW9uKG9wdGlvbiwgYS5zb3VyY2UsIGdldE1hdGNoID8gZ2V0TWF0Y2gob3B0aW9uKSA6IFtdLCAxZTkgLSBvcHRpb25zLmxlbmd0aCkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGxldCBwYXR0ZXJuID0gc3RhdGUuc2xpY2VEb2MoYS5mcm9tLCBhLnRvKSwgbWF0Y2g7XG4gICAgICAgICAgICAgICAgbGV0IG1hdGNoZXIgPSBjb25mLmZpbHRlclN0cmljdCA/IG5ldyBTdHJpY3RNYXRjaGVyKHBhdHRlcm4pIDogbmV3IEZ1enp5TWF0Y2hlcihwYXR0ZXJuKTtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBvcHRpb24gb2YgYS5yZXN1bHQub3B0aW9ucylcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1hdGNoID0gbWF0Y2hlci5tYXRjaChvcHRpb24ubGFiZWwpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgbWF0Y2hlZCA9ICFvcHRpb24uZGlzcGxheUxhYmVsID8gbWF0Y2gubWF0Y2hlZCA6IGdldE1hdGNoID8gZ2V0TWF0Y2gob3B0aW9uLCBtYXRjaC5tYXRjaGVkKSA6IFtdO1xuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHNjb3JlID0gbWF0Y2guc2NvcmUgKyAob3B0aW9uLmJvb3N0IHx8IDApO1xuICAgICAgICAgICAgICAgICAgICAgICAgYWRkT3B0aW9uKG5ldyBPcHRpb24ob3B0aW9uLCBhLnNvdXJjZSwgbWF0Y2hlZCwgc2NvcmUpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2Ygb3B0aW9uLnNlY3Rpb24gPT0gXCJvYmplY3RcIiAmJiBvcHRpb24uc2VjdGlvbi5yYW5rID09PSBcImR5bmFtaWNcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCB7IG5hbWUgfSA9IG9wdGlvbi5zZWN0aW9uO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghZHluYW1pY1NlY3Rpb25TY29yZSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZHluYW1pY1NlY3Rpb25TY29yZSA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZHluYW1pY1NlY3Rpb25TY29yZVtuYW1lXSA9IE1hdGgubWF4KHNjb3JlLCBkeW5hbWljU2VjdGlvblNjb3JlW25hbWVdIHx8IC0xZTkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICBpZiAoc2VjdGlvbnMpIHtcbiAgICAgICAgbGV0IHNlY3Rpb25PcmRlciA9IE9iamVjdC5jcmVhdGUobnVsbCksIHBvcyA9IDA7XG4gICAgICAgIGxldCBjbXAgPSAoYSwgYikgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIChhLnJhbmsgPT09IFwiZHluYW1pY1wiICYmIGIucmFuayA9PT0gXCJkeW5hbWljXCIgPyBkeW5hbWljU2VjdGlvblNjb3JlW2IubmFtZV0gLSBkeW5hbWljU2VjdGlvblNjb3JlW2EubmFtZV0gOiAwKSB8fFxuICAgICAgICAgICAgICAgICh0eXBlb2YgYS5yYW5rID09IFwibnVtYmVyXCIgPyBhLnJhbmsgOiAxZTkpIC0gKHR5cGVvZiBiLnJhbmsgPT0gXCJudW1iZXJcIiA/IGIucmFuayA6IDFlOSkgfHxcbiAgICAgICAgICAgICAgICAoYS5uYW1lIDwgYi5uYW1lID8gLTEgOiAxKTtcbiAgICAgICAgfTtcbiAgICAgICAgZm9yIChsZXQgcyBvZiBzZWN0aW9ucy5zb3J0KGNtcCkpIHtcbiAgICAgICAgICAgIHBvcyAtPSAxZTU7XG4gICAgICAgICAgICBzZWN0aW9uT3JkZXJbcy5uYW1lXSA9IHBvcztcbiAgICAgICAgfVxuICAgICAgICBmb3IgKGxldCBvcHRpb24gb2Ygb3B0aW9ucykge1xuICAgICAgICAgICAgbGV0IHsgc2VjdGlvbiB9ID0gb3B0aW9uLmNvbXBsZXRpb247XG4gICAgICAgICAgICBpZiAoc2VjdGlvbilcbiAgICAgICAgICAgICAgICBvcHRpb24uc2NvcmUgKz0gc2VjdGlvbk9yZGVyW3R5cGVvZiBzZWN0aW9uID09IFwic3RyaW5nXCIgPyBzZWN0aW9uIDogc2VjdGlvbi5uYW1lXTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBsZXQgcmVzdWx0ID0gW10sIHByZXYgPSBudWxsO1xuICAgIGxldCBjb21wYXJlID0gY29uZi5jb21wYXJlQ29tcGxldGlvbnM7XG4gICAgZm9yIChsZXQgb3B0IG9mIG9wdGlvbnMuc29ydCgoYSwgYikgPT4gKGIuc2NvcmUgLSBhLnNjb3JlKSB8fCBjb21wYXJlKGEuY29tcGxldGlvbiwgYi5jb21wbGV0aW9uKSkpIHtcbiAgICAgICAgbGV0IGN1ciA9IG9wdC5jb21wbGV0aW9uO1xuICAgICAgICBpZiAoIXByZXYgfHwgcHJldi5sYWJlbCAhPSBjdXIubGFiZWwgfHwgcHJldi5kZXRhaWwgIT0gY3VyLmRldGFpbCB8fFxuICAgICAgICAgICAgKHByZXYudHlwZSAhPSBudWxsICYmIGN1ci50eXBlICE9IG51bGwgJiYgcHJldi50eXBlICE9IGN1ci50eXBlKSB8fFxuICAgICAgICAgICAgcHJldi5hcHBseSAhPSBjdXIuYXBwbHkgfHwgcHJldi5ib29zdCAhPSBjdXIuYm9vc3QpXG4gICAgICAgICAgICByZXN1bHQucHVzaChvcHQpO1xuICAgICAgICBlbHNlIGlmIChzY29yZShvcHQuY29tcGxldGlvbikgPiBzY29yZShwcmV2KSlcbiAgICAgICAgICAgIHJlc3VsdFtyZXN1bHQubGVuZ3RoIC0gMV0gPSBvcHQ7XG4gICAgICAgIHByZXYgPSBvcHQuY29tcGxldGlvbjtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbn1cbmNsYXNzIENvbXBsZXRpb25EaWFsb2cge1xuICAgIGNvbnN0cnVjdG9yKG9wdGlvbnMsIGF0dHJzLCB0b29sdGlwLCB0aW1lc3RhbXAsIHNlbGVjdGVkLCBkaXNhYmxlZCkge1xuICAgICAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xuICAgICAgICB0aGlzLmF0dHJzID0gYXR0cnM7XG4gICAgICAgIHRoaXMudG9vbHRpcCA9IHRvb2x0aXA7XG4gICAgICAgIHRoaXMudGltZXN0YW1wID0gdGltZXN0YW1wO1xuICAgICAgICB0aGlzLnNlbGVjdGVkID0gc2VsZWN0ZWQ7XG4gICAgICAgIHRoaXMuZGlzYWJsZWQgPSBkaXNhYmxlZDtcbiAgICB9XG4gICAgc2V0U2VsZWN0ZWQoc2VsZWN0ZWQsIGlkKSB7XG4gICAgICAgIHJldHVybiBzZWxlY3RlZCA9PSB0aGlzLnNlbGVjdGVkIHx8IHNlbGVjdGVkID49IHRoaXMub3B0aW9ucy5sZW5ndGggPyB0aGlzXG4gICAgICAgICAgICA6IG5ldyBDb21wbGV0aW9uRGlhbG9nKHRoaXMub3B0aW9ucywgbWFrZUF0dHJzKGlkLCBzZWxlY3RlZCksIHRoaXMudG9vbHRpcCwgdGhpcy50aW1lc3RhbXAsIHNlbGVjdGVkLCB0aGlzLmRpc2FibGVkKTtcbiAgICB9XG4gICAgc3RhdGljIGJ1aWxkKGFjdGl2ZSwgc3RhdGUsIGlkLCBwcmV2LCBjb25mLCBkaWRTZXRBY3RpdmUpIHtcbiAgICAgICAgaWYgKHByZXYgJiYgIWRpZFNldEFjdGl2ZSAmJiBhY3RpdmUuc29tZShzID0+IHMuaXNQZW5kaW5nKSlcbiAgICAgICAgICAgIHJldHVybiBwcmV2LnNldERpc2FibGVkKCk7XG4gICAgICAgIGxldCBvcHRpb25zID0gc29ydE9wdGlvbnMoYWN0aXZlLCBzdGF0ZSk7XG4gICAgICAgIGlmICghb3B0aW9ucy5sZW5ndGgpXG4gICAgICAgICAgICByZXR1cm4gcHJldiAmJiBhY3RpdmUuc29tZShhID0+IGEuaXNQZW5kaW5nKSA/IHByZXYuc2V0RGlzYWJsZWQoKSA6IG51bGw7XG4gICAgICAgIGxldCBzZWxlY3RlZCA9IHN0YXRlLmZhY2V0KGNvbXBsZXRpb25Db25maWcpLnNlbGVjdE9uT3BlbiA/IDAgOiAtMTtcbiAgICAgICAgaWYgKHByZXYgJiYgcHJldi5zZWxlY3RlZCAhPSBzZWxlY3RlZCAmJiBwcmV2LnNlbGVjdGVkICE9IC0xKSB7XG4gICAgICAgICAgICBsZXQgc2VsZWN0ZWRWYWx1ZSA9IHByZXYub3B0aW9uc1twcmV2LnNlbGVjdGVkXS5jb21wbGV0aW9uO1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBvcHRpb25zLmxlbmd0aDsgaSsrKVxuICAgICAgICAgICAgICAgIGlmIChvcHRpb25zW2ldLmNvbXBsZXRpb24gPT0gc2VsZWN0ZWRWYWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZCA9IGk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbmV3IENvbXBsZXRpb25EaWFsb2cob3B0aW9ucywgbWFrZUF0dHJzKGlkLCBzZWxlY3RlZCksIHtcbiAgICAgICAgICAgIHBvczogYWN0aXZlLnJlZHVjZSgoYSwgYikgPT4gYi5oYXNSZXN1bHQoKSA/IE1hdGgubWluKGEsIGIuZnJvbSkgOiBhLCAxZTgpLFxuICAgICAgICAgICAgY3JlYXRlOiBjcmVhdGVUb29sdGlwLFxuICAgICAgICAgICAgYWJvdmU6IGNvbmYuYWJvdmVDdXJzb3IsXG4gICAgICAgIH0sIHByZXYgPyBwcmV2LnRpbWVzdGFtcCA6IERhdGUubm93KCksIHNlbGVjdGVkLCBmYWxzZSk7XG4gICAgfVxuICAgIG1hcChjaGFuZ2VzKSB7XG4gICAgICAgIHJldHVybiBuZXcgQ29tcGxldGlvbkRpYWxvZyh0aGlzLm9wdGlvbnMsIHRoaXMuYXR0cnMsIHsgLi4udGhpcy50b29sdGlwLCBwb3M6IGNoYW5nZXMubWFwUG9zKHRoaXMudG9vbHRpcC5wb3MpIH0sIHRoaXMudGltZXN0YW1wLCB0aGlzLnNlbGVjdGVkLCB0aGlzLmRpc2FibGVkKTtcbiAgICB9XG4gICAgc2V0RGlzYWJsZWQoKSB7XG4gICAgICAgIHJldHVybiBuZXcgQ29tcGxldGlvbkRpYWxvZyh0aGlzLm9wdGlvbnMsIHRoaXMuYXR0cnMsIHRoaXMudG9vbHRpcCwgdGhpcy50aW1lc3RhbXAsIHRoaXMuc2VsZWN0ZWQsIHRydWUpO1xuICAgIH1cbn1cbmNsYXNzIENvbXBsZXRpb25TdGF0ZSB7XG4gICAgY29uc3RydWN0b3IoYWN0aXZlLCBpZCwgb3Blbikge1xuICAgICAgICB0aGlzLmFjdGl2ZSA9IGFjdGl2ZTtcbiAgICAgICAgdGhpcy5pZCA9IGlkO1xuICAgICAgICB0aGlzLm9wZW4gPSBvcGVuO1xuICAgIH1cbiAgICBzdGF0aWMgc3RhcnQoKSB7XG4gICAgICAgIHJldHVybiBuZXcgQ29tcGxldGlvblN0YXRlKG5vbmUsIFwiY20tYWMtXCIgKyBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAyZTYpLnRvU3RyaW5nKDM2KSwgbnVsbCk7XG4gICAgfVxuICAgIHVwZGF0ZSh0cikge1xuICAgICAgICBsZXQgeyBzdGF0ZSB9ID0gdHIsIGNvbmYgPSBzdGF0ZS5mYWNldChjb21wbGV0aW9uQ29uZmlnKTtcbiAgICAgICAgbGV0IHNvdXJjZXMgPSBjb25mLm92ZXJyaWRlIHx8XG4gICAgICAgICAgICBzdGF0ZS5sYW5ndWFnZURhdGFBdChcImF1dG9jb21wbGV0ZVwiLCBjdXIoc3RhdGUpKS5tYXAoYXNTb3VyY2UpO1xuICAgICAgICBsZXQgYWN0aXZlID0gc291cmNlcy5tYXAoc291cmNlID0+IHtcbiAgICAgICAgICAgIGxldCB2YWx1ZSA9IHRoaXMuYWN0aXZlLmZpbmQocyA9PiBzLnNvdXJjZSA9PSBzb3VyY2UpIHx8XG4gICAgICAgICAgICAgICAgbmV3IEFjdGl2ZVNvdXJjZShzb3VyY2UsIHRoaXMuYWN0aXZlLnNvbWUoYSA9PiBhLnN0YXRlICE9IDAgLyogU3RhdGUuSW5hY3RpdmUgKi8pID8gMSAvKiBTdGF0ZS5QZW5kaW5nICovIDogMCAvKiBTdGF0ZS5JbmFjdGl2ZSAqLyk7XG4gICAgICAgICAgICByZXR1cm4gdmFsdWUudXBkYXRlKHRyLCBjb25mKTtcbiAgICAgICAgfSk7XG4gICAgICAgIGlmIChhY3RpdmUubGVuZ3RoID09IHRoaXMuYWN0aXZlLmxlbmd0aCAmJiBhY3RpdmUuZXZlcnkoKGEsIGkpID0+IGEgPT0gdGhpcy5hY3RpdmVbaV0pKVxuICAgICAgICAgICAgYWN0aXZlID0gdGhpcy5hY3RpdmU7XG4gICAgICAgIGxldCBvcGVuID0gdGhpcy5vcGVuLCBkaWRTZXQgPSB0ci5lZmZlY3RzLnNvbWUoZSA9PiBlLmlzKHNldEFjdGl2ZUVmZmVjdCkpO1xuICAgICAgICBpZiAob3BlbiAmJiB0ci5kb2NDaGFuZ2VkKVxuICAgICAgICAgICAgb3BlbiA9IG9wZW4ubWFwKHRyLmNoYW5nZXMpO1xuICAgICAgICBpZiAodHIuc2VsZWN0aW9uIHx8IGFjdGl2ZS5zb21lKGEgPT4gYS5oYXNSZXN1bHQoKSAmJiB0ci5jaGFuZ2VzLnRvdWNoZXNSYW5nZShhLmZyb20sIGEudG8pKSB8fFxuICAgICAgICAgICAgIXNhbWVSZXN1bHRzKGFjdGl2ZSwgdGhpcy5hY3RpdmUpIHx8IGRpZFNldClcbiAgICAgICAgICAgIG9wZW4gPSBDb21wbGV0aW9uRGlhbG9nLmJ1aWxkKGFjdGl2ZSwgc3RhdGUsIHRoaXMuaWQsIG9wZW4sIGNvbmYsIGRpZFNldCk7XG4gICAgICAgIGVsc2UgaWYgKG9wZW4gJiYgb3Blbi5kaXNhYmxlZCAmJiAhYWN0aXZlLnNvbWUoYSA9PiBhLmlzUGVuZGluZykpXG4gICAgICAgICAgICBvcGVuID0gbnVsbDtcbiAgICAgICAgaWYgKCFvcGVuICYmIGFjdGl2ZS5ldmVyeShhID0+ICFhLmlzUGVuZGluZykgJiYgYWN0aXZlLnNvbWUoYSA9PiBhLmhhc1Jlc3VsdCgpKSlcbiAgICAgICAgICAgIGFjdGl2ZSA9IGFjdGl2ZS5tYXAoYSA9PiBhLmhhc1Jlc3VsdCgpID8gbmV3IEFjdGl2ZVNvdXJjZShhLnNvdXJjZSwgMCAvKiBTdGF0ZS5JbmFjdGl2ZSAqLykgOiBhKTtcbiAgICAgICAgZm9yIChsZXQgZWZmZWN0IG9mIHRyLmVmZmVjdHMpXG4gICAgICAgICAgICBpZiAoZWZmZWN0LmlzKHNldFNlbGVjdGVkRWZmZWN0KSlcbiAgICAgICAgICAgICAgICBvcGVuID0gb3BlbiAmJiBvcGVuLnNldFNlbGVjdGVkKGVmZmVjdC52YWx1ZSwgdGhpcy5pZCk7XG4gICAgICAgIHJldHVybiBhY3RpdmUgPT0gdGhpcy5hY3RpdmUgJiYgb3BlbiA9PSB0aGlzLm9wZW4gPyB0aGlzIDogbmV3IENvbXBsZXRpb25TdGF0ZShhY3RpdmUsIHRoaXMuaWQsIG9wZW4pO1xuICAgIH1cbiAgICBnZXQgdG9vbHRpcCgpIHsgcmV0dXJuIHRoaXMub3BlbiA/IHRoaXMub3Blbi50b29sdGlwIDogbnVsbDsgfVxuICAgIGdldCBhdHRycygpIHsgcmV0dXJuIHRoaXMub3BlbiA/IHRoaXMub3Blbi5hdHRycyA6IHRoaXMuYWN0aXZlLmxlbmd0aCA/IGJhc2VBdHRycyA6IG5vQXR0cnM7IH1cbn1cbmZ1bmN0aW9uIHNhbWVSZXN1bHRzKGEsIGIpIHtcbiAgICBpZiAoYSA9PSBiKVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICBmb3IgKGxldCBpQSA9IDAsIGlCID0gMDs7KSB7XG4gICAgICAgIHdoaWxlIChpQSA8IGEubGVuZ3RoICYmICFhW2lBXS5oYXNSZXN1bHQoKSlcbiAgICAgICAgICAgIGlBKys7XG4gICAgICAgIHdoaWxlIChpQiA8IGIubGVuZ3RoICYmICFiW2lCXS5oYXNSZXN1bHQoKSlcbiAgICAgICAgICAgIGlCKys7XG4gICAgICAgIGxldCBlbmRBID0gaUEgPT0gYS5sZW5ndGgsIGVuZEIgPSBpQiA9PSBiLmxlbmd0aDtcbiAgICAgICAgaWYgKGVuZEEgfHwgZW5kQilcbiAgICAgICAgICAgIHJldHVybiBlbmRBID09IGVuZEI7XG4gICAgICAgIGlmIChhW2lBKytdLnJlc3VsdCAhPSBiW2lCKytdLnJlc3VsdClcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG59XG5jb25zdCBiYXNlQXR0cnMgPSB7XG4gICAgXCJhcmlhLWF1dG9jb21wbGV0ZVwiOiBcImxpc3RcIlxufTtcbmNvbnN0IG5vQXR0cnMgPSB7fTtcbmZ1bmN0aW9uIG1ha2VBdHRycyhpZCwgc2VsZWN0ZWQpIHtcbiAgICBsZXQgcmVzdWx0ID0ge1xuICAgICAgICBcImFyaWEtYXV0b2NvbXBsZXRlXCI6IFwibGlzdFwiLFxuICAgICAgICBcImFyaWEtaGFzcG9wdXBcIjogXCJsaXN0Ym94XCIsXG4gICAgICAgIFwiYXJpYS1jb250cm9sc1wiOiBpZFxuICAgIH07XG4gICAgaWYgKHNlbGVjdGVkID4gLTEpXG4gICAgICAgIHJlc3VsdFtcImFyaWEtYWN0aXZlZGVzY2VuZGFudFwiXSA9IGlkICsgXCItXCIgKyBzZWxlY3RlZDtcbiAgICByZXR1cm4gcmVzdWx0O1xufVxuY29uc3Qgbm9uZSA9IFtdO1xuZnVuY3Rpb24gZ2V0VXBkYXRlVHlwZSh0ciwgY29uZikge1xuICAgIGlmICh0ci5pc1VzZXJFdmVudChcImlucHV0LmNvbXBsZXRlXCIpKSB7XG4gICAgICAgIGxldCBjb21wbGV0aW9uID0gdHIuYW5ub3RhdGlvbihwaWNrZWRDb21wbGV0aW9uKTtcbiAgICAgICAgaWYgKGNvbXBsZXRpb24gJiYgY29uZi5hY3RpdmF0ZU9uQ29tcGxldGlvbihjb21wbGV0aW9uKSlcbiAgICAgICAgICAgIHJldHVybiA0IC8qIFVwZGF0ZVR5cGUuQWN0aXZhdGUgKi8gfCA4IC8qIFVwZGF0ZVR5cGUuUmVzZXQgKi87XG4gICAgfVxuICAgIGxldCB0eXBpbmcgPSB0ci5pc1VzZXJFdmVudChcImlucHV0LnR5cGVcIik7XG4gICAgcmV0dXJuIHR5cGluZyAmJiBjb25mLmFjdGl2YXRlT25UeXBpbmcgPyA0IC8qIFVwZGF0ZVR5cGUuQWN0aXZhdGUgKi8gfCAxIC8qIFVwZGF0ZVR5cGUuVHlwaW5nICovXG4gICAgICAgIDogdHlwaW5nID8gMSAvKiBVcGRhdGVUeXBlLlR5cGluZyAqL1xuICAgICAgICAgICAgOiB0ci5pc1VzZXJFdmVudChcImRlbGV0ZS5iYWNrd2FyZFwiKSA/IDIgLyogVXBkYXRlVHlwZS5CYWNrc3BhY2luZyAqL1xuICAgICAgICAgICAgICAgIDogdHIuc2VsZWN0aW9uID8gOCAvKiBVcGRhdGVUeXBlLlJlc2V0ICovXG4gICAgICAgICAgICAgICAgICAgIDogdHIuZG9jQ2hhbmdlZCA/IDE2IC8qIFVwZGF0ZVR5cGUuUmVzZXRJZlRvdWNoaW5nICovIDogMCAvKiBVcGRhdGVUeXBlLk5vbmUgKi87XG59XG5jbGFzcyBBY3RpdmVTb3VyY2Uge1xuICAgIGNvbnN0cnVjdG9yKHNvdXJjZSwgc3RhdGUsIGV4cGxpY2l0ID0gZmFsc2UpIHtcbiAgICAgICAgdGhpcy5zb3VyY2UgPSBzb3VyY2U7XG4gICAgICAgIHRoaXMuc3RhdGUgPSBzdGF0ZTtcbiAgICAgICAgdGhpcy5leHBsaWNpdCA9IGV4cGxpY2l0O1xuICAgIH1cbiAgICBoYXNSZXN1bHQoKSB7IHJldHVybiBmYWxzZTsgfVxuICAgIGdldCBpc1BlbmRpbmcoKSB7IHJldHVybiB0aGlzLnN0YXRlID09IDEgLyogU3RhdGUuUGVuZGluZyAqLzsgfVxuICAgIHVwZGF0ZSh0ciwgY29uZikge1xuICAgICAgICBsZXQgdHlwZSA9IGdldFVwZGF0ZVR5cGUodHIsIGNvbmYpLCB2YWx1ZSA9IHRoaXM7XG4gICAgICAgIGlmICgodHlwZSAmIDggLyogVXBkYXRlVHlwZS5SZXNldCAqLykgfHwgKHR5cGUgJiAxNiAvKiBVcGRhdGVUeXBlLlJlc2V0SWZUb3VjaGluZyAqLykgJiYgdGhpcy50b3VjaGVzKHRyKSlcbiAgICAgICAgICAgIHZhbHVlID0gbmV3IEFjdGl2ZVNvdXJjZSh2YWx1ZS5zb3VyY2UsIDAgLyogU3RhdGUuSW5hY3RpdmUgKi8pO1xuICAgICAgICBpZiAoKHR5cGUgJiA0IC8qIFVwZGF0ZVR5cGUuQWN0aXZhdGUgKi8pICYmIHZhbHVlLnN0YXRlID09IDAgLyogU3RhdGUuSW5hY3RpdmUgKi8pXG4gICAgICAgICAgICB2YWx1ZSA9IG5ldyBBY3RpdmVTb3VyY2UodGhpcy5zb3VyY2UsIDEgLyogU3RhdGUuUGVuZGluZyAqLyk7XG4gICAgICAgIHZhbHVlID0gdmFsdWUudXBkYXRlRm9yKHRyLCB0eXBlKTtcbiAgICAgICAgZm9yIChsZXQgZWZmZWN0IG9mIHRyLmVmZmVjdHMpIHtcbiAgICAgICAgICAgIGlmIChlZmZlY3QuaXMoc3RhcnRDb21wbGV0aW9uRWZmZWN0KSlcbiAgICAgICAgICAgICAgICB2YWx1ZSA9IG5ldyBBY3RpdmVTb3VyY2UodmFsdWUuc291cmNlLCAxIC8qIFN0YXRlLlBlbmRpbmcgKi8sIGVmZmVjdC52YWx1ZSk7XG4gICAgICAgICAgICBlbHNlIGlmIChlZmZlY3QuaXMoY2xvc2VDb21wbGV0aW9uRWZmZWN0KSlcbiAgICAgICAgICAgICAgICB2YWx1ZSA9IG5ldyBBY3RpdmVTb3VyY2UodmFsdWUuc291cmNlLCAwIC8qIFN0YXRlLkluYWN0aXZlICovKTtcbiAgICAgICAgICAgIGVsc2UgaWYgKGVmZmVjdC5pcyhzZXRBY3RpdmVFZmZlY3QpKVxuICAgICAgICAgICAgICAgIGZvciAobGV0IGFjdGl2ZSBvZiBlZmZlY3QudmFsdWUpXG4gICAgICAgICAgICAgICAgICAgIGlmIChhY3RpdmUuc291cmNlID09IHZhbHVlLnNvdXJjZSlcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlID0gYWN0aXZlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9XG4gICAgdXBkYXRlRm9yKHRyLCB0eXBlKSB7IHJldHVybiB0aGlzLm1hcCh0ci5jaGFuZ2VzKTsgfVxuICAgIG1hcChjaGFuZ2VzKSB7IHJldHVybiB0aGlzOyB9XG4gICAgdG91Y2hlcyh0cikge1xuICAgICAgICByZXR1cm4gdHIuY2hhbmdlcy50b3VjaGVzUmFuZ2UoY3VyKHRyLnN0YXRlKSk7XG4gICAgfVxufVxuY2xhc3MgQWN0aXZlUmVzdWx0IGV4dGVuZHMgQWN0aXZlU291cmNlIHtcbiAgICBjb25zdHJ1Y3Rvcihzb3VyY2UsIGV4cGxpY2l0LCBsaW1pdCwgcmVzdWx0LCBmcm9tLCB0bykge1xuICAgICAgICBzdXBlcihzb3VyY2UsIDMgLyogU3RhdGUuUmVzdWx0ICovLCBleHBsaWNpdCk7XG4gICAgICAgIHRoaXMubGltaXQgPSBsaW1pdDtcbiAgICAgICAgdGhpcy5yZXN1bHQgPSByZXN1bHQ7XG4gICAgICAgIHRoaXMuZnJvbSA9IGZyb207XG4gICAgICAgIHRoaXMudG8gPSB0bztcbiAgICB9XG4gICAgaGFzUmVzdWx0KCkgeyByZXR1cm4gdHJ1ZTsgfVxuICAgIHVwZGF0ZUZvcih0ciwgdHlwZSkge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIGlmICghKHR5cGUgJiAzIC8qIFVwZGF0ZVR5cGUuU2ltcGxlSW50ZXJhY3Rpb24gKi8pKVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMubWFwKHRyLmNoYW5nZXMpO1xuICAgICAgICBsZXQgcmVzdWx0ID0gdGhpcy5yZXN1bHQ7XG4gICAgICAgIGlmIChyZXN1bHQubWFwICYmICF0ci5jaGFuZ2VzLmVtcHR5KVxuICAgICAgICAgICAgcmVzdWx0ID0gcmVzdWx0Lm1hcChyZXN1bHQsIHRyLmNoYW5nZXMpO1xuICAgICAgICBsZXQgZnJvbSA9IHRyLmNoYW5nZXMubWFwUG9zKHRoaXMuZnJvbSksIHRvID0gdHIuY2hhbmdlcy5tYXBQb3ModGhpcy50bywgMSk7XG4gICAgICAgIGxldCBwb3MgPSBjdXIodHIuc3RhdGUpO1xuICAgICAgICBpZiAocG9zID4gdG8gfHwgIXJlc3VsdCB8fFxuICAgICAgICAgICAgKHR5cGUgJiAyIC8qIFVwZGF0ZVR5cGUuQmFja3NwYWNpbmcgKi8pICYmIChjdXIodHIuc3RhcnRTdGF0ZSkgPT0gdGhpcy5mcm9tIHx8IHBvcyA8IHRoaXMubGltaXQpKVxuICAgICAgICAgICAgcmV0dXJuIG5ldyBBY3RpdmVTb3VyY2UodGhpcy5zb3VyY2UsIHR5cGUgJiA0IC8qIFVwZGF0ZVR5cGUuQWN0aXZhdGUgKi8gPyAxIC8qIFN0YXRlLlBlbmRpbmcgKi8gOiAwIC8qIFN0YXRlLkluYWN0aXZlICovKTtcbiAgICAgICAgbGV0IGxpbWl0ID0gdHIuY2hhbmdlcy5tYXBQb3ModGhpcy5saW1pdCk7XG4gICAgICAgIGlmIChjaGVja1ZhbGlkKHJlc3VsdC52YWxpZEZvciwgdHIuc3RhdGUsIGZyb20sIHRvKSlcbiAgICAgICAgICAgIHJldHVybiBuZXcgQWN0aXZlUmVzdWx0KHRoaXMuc291cmNlLCB0aGlzLmV4cGxpY2l0LCBsaW1pdCwgcmVzdWx0LCBmcm9tLCB0byk7XG4gICAgICAgIGlmIChyZXN1bHQudXBkYXRlICYmXG4gICAgICAgICAgICAocmVzdWx0ID0gcmVzdWx0LnVwZGF0ZShyZXN1bHQsIGZyb20sIHRvLCBuZXcgQ29tcGxldGlvbkNvbnRleHQodHIuc3RhdGUsIHBvcywgZmFsc2UpKSkpXG4gICAgICAgICAgICByZXR1cm4gbmV3IEFjdGl2ZVJlc3VsdCh0aGlzLnNvdXJjZSwgdGhpcy5leHBsaWNpdCwgbGltaXQsIHJlc3VsdCwgcmVzdWx0LmZyb20sIChfYSA9IHJlc3VsdC50bykgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogY3VyKHRyLnN0YXRlKSk7XG4gICAgICAgIHJldHVybiBuZXcgQWN0aXZlU291cmNlKHRoaXMuc291cmNlLCAxIC8qIFN0YXRlLlBlbmRpbmcgKi8sIHRoaXMuZXhwbGljaXQpO1xuICAgIH1cbiAgICBtYXAobWFwcGluZykge1xuICAgICAgICBpZiAobWFwcGluZy5lbXB0eSlcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICBsZXQgcmVzdWx0ID0gdGhpcy5yZXN1bHQubWFwID8gdGhpcy5yZXN1bHQubWFwKHRoaXMucmVzdWx0LCBtYXBwaW5nKSA6IHRoaXMucmVzdWx0O1xuICAgICAgICBpZiAoIXJlc3VsdClcbiAgICAgICAgICAgIHJldHVybiBuZXcgQWN0aXZlU291cmNlKHRoaXMuc291cmNlLCAwIC8qIFN0YXRlLkluYWN0aXZlICovKTtcbiAgICAgICAgcmV0dXJuIG5ldyBBY3RpdmVSZXN1bHQodGhpcy5zb3VyY2UsIHRoaXMuZXhwbGljaXQsIG1hcHBpbmcubWFwUG9zKHRoaXMubGltaXQpLCB0aGlzLnJlc3VsdCwgbWFwcGluZy5tYXBQb3ModGhpcy5mcm9tKSwgbWFwcGluZy5tYXBQb3ModGhpcy50bywgMSkpO1xuICAgIH1cbiAgICB0b3VjaGVzKHRyKSB7XG4gICAgICAgIHJldHVybiB0ci5jaGFuZ2VzLnRvdWNoZXNSYW5nZSh0aGlzLmZyb20sIHRoaXMudG8pO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGNoZWNrVmFsaWQodmFsaWRGb3IsIHN0YXRlLCBmcm9tLCB0bykge1xuICAgIGlmICghdmFsaWRGb3IpXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICBsZXQgdGV4dCA9IHN0YXRlLnNsaWNlRG9jKGZyb20sIHRvKTtcbiAgICByZXR1cm4gdHlwZW9mIHZhbGlkRm9yID09IFwiZnVuY3Rpb25cIiA/IHZhbGlkRm9yKHRleHQsIGZyb20sIHRvLCBzdGF0ZSkgOiBlbnN1cmVBbmNob3IodmFsaWRGb3IsIHRydWUpLnRlc3QodGV4dCk7XG59XG5jb25zdCBzZXRBY3RpdmVFZmZlY3QgPSAvKkBfX1BVUkVfXyovU3RhdGVFZmZlY3QuZGVmaW5lKHtcbiAgICBtYXAoc291cmNlcywgbWFwcGluZykgeyByZXR1cm4gc291cmNlcy5tYXAocyA9PiBzLm1hcChtYXBwaW5nKSk7IH1cbn0pO1xuY29uc3Qgc2V0U2VsZWN0ZWRFZmZlY3QgPSAvKkBfX1BVUkVfXyovU3RhdGVFZmZlY3QuZGVmaW5lKCk7XG5jb25zdCBjb21wbGV0aW9uU3RhdGUgPSAvKkBfX1BVUkVfXyovU3RhdGVGaWVsZC5kZWZpbmUoe1xuICAgIGNyZWF0ZSgpIHsgcmV0dXJuIENvbXBsZXRpb25TdGF0ZS5zdGFydCgpOyB9LFxuICAgIHVwZGF0ZSh2YWx1ZSwgdHIpIHsgcmV0dXJuIHZhbHVlLnVwZGF0ZSh0cik7IH0sXG4gICAgcHJvdmlkZTogZiA9PiBbXG4gICAgICAgIHNob3dUb29sdGlwLmZyb20oZiwgdmFsID0+IHZhbC50b29sdGlwKSxcbiAgICAgICAgRWRpdG9yVmlldy5jb250ZW50QXR0cmlidXRlcy5mcm9tKGYsIHN0YXRlID0+IHN0YXRlLmF0dHJzKVxuICAgIF1cbn0pO1xuZnVuY3Rpb24gYXBwbHlDb21wbGV0aW9uKHZpZXcsIG9wdGlvbikge1xuICAgIGNvbnN0IGFwcGx5ID0gb3B0aW9uLmNvbXBsZXRpb24uYXBwbHkgfHwgb3B0aW9uLmNvbXBsZXRpb24ubGFiZWw7XG4gICAgbGV0IHJlc3VsdCA9IHZpZXcuc3RhdGUuZmllbGQoY29tcGxldGlvblN0YXRlKS5hY3RpdmUuZmluZChhID0+IGEuc291cmNlID09IG9wdGlvbi5zb3VyY2UpO1xuICAgIGlmICghKHJlc3VsdCBpbnN0YW5jZW9mIEFjdGl2ZVJlc3VsdCkpXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICBpZiAodHlwZW9mIGFwcGx5ID09IFwic3RyaW5nXCIpXG4gICAgICAgIHZpZXcuZGlzcGF0Y2goe1xuICAgICAgICAgICAgLi4uaW5zZXJ0Q29tcGxldGlvblRleHQodmlldy5zdGF0ZSwgYXBwbHksIHJlc3VsdC5mcm9tLCByZXN1bHQudG8pLFxuICAgICAgICAgICAgYW5ub3RhdGlvbnM6IHBpY2tlZENvbXBsZXRpb24ub2Yob3B0aW9uLmNvbXBsZXRpb24pXG4gICAgICAgIH0pO1xuICAgIGVsc2VcbiAgICAgICAgYXBwbHkodmlldywgb3B0aW9uLmNvbXBsZXRpb24sIHJlc3VsdC5mcm9tLCByZXN1bHQudG8pO1xuICAgIHJldHVybiB0cnVlO1xufVxuY29uc3QgY3JlYXRlVG9vbHRpcCA9IC8qQF9fUFVSRV9fKi9jb21wbGV0aW9uVG9vbHRpcChjb21wbGV0aW9uU3RhdGUsIGFwcGx5Q29tcGxldGlvbik7XG5cbi8qKlxuUmV0dXJucyBhIGNvbW1hbmQgdGhhdCBtb3ZlcyB0aGUgY29tcGxldGlvbiBzZWxlY3Rpb24gZm9yd2FyZCBvclxuYmFja3dhcmQgYnkgdGhlIGdpdmVuIGFtb3VudC5cbiovXG5mdW5jdGlvbiBtb3ZlQ29tcGxldGlvblNlbGVjdGlvbihmb3J3YXJkLCBieSA9IFwib3B0aW9uXCIpIHtcbiAgICByZXR1cm4gKHZpZXcpID0+IHtcbiAgICAgICAgbGV0IGNTdGF0ZSA9IHZpZXcuc3RhdGUuZmllbGQoY29tcGxldGlvblN0YXRlLCBmYWxzZSk7XG4gICAgICAgIGlmICghY1N0YXRlIHx8ICFjU3RhdGUub3BlbiB8fCBjU3RhdGUub3Blbi5kaXNhYmxlZCB8fFxuICAgICAgICAgICAgRGF0ZS5ub3coKSAtIGNTdGF0ZS5vcGVuLnRpbWVzdGFtcCA8IHZpZXcuc3RhdGUuZmFjZXQoY29tcGxldGlvbkNvbmZpZykuaW50ZXJhY3Rpb25EZWxheSlcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgbGV0IHN0ZXAgPSAxLCB0b29sdGlwO1xuICAgICAgICBpZiAoYnkgPT0gXCJwYWdlXCIgJiYgKHRvb2x0aXAgPSBnZXRUb29sdGlwKHZpZXcsIGNTdGF0ZS5vcGVuLnRvb2x0aXApKSlcbiAgICAgICAgICAgIHN0ZXAgPSBNYXRoLm1heCgyLCBNYXRoLmZsb29yKHRvb2x0aXAuZG9tLm9mZnNldEhlaWdodCAvXG4gICAgICAgICAgICAgICAgdG9vbHRpcC5kb20ucXVlcnlTZWxlY3RvcihcImxpXCIpLm9mZnNldEhlaWdodCkgLSAxKTtcbiAgICAgICAgbGV0IHsgbGVuZ3RoIH0gPSBjU3RhdGUub3Blbi5vcHRpb25zO1xuICAgICAgICBsZXQgc2VsZWN0ZWQgPSBjU3RhdGUub3Blbi5zZWxlY3RlZCA+IC0xID8gY1N0YXRlLm9wZW4uc2VsZWN0ZWQgKyBzdGVwICogKGZvcndhcmQgPyAxIDogLTEpIDogZm9yd2FyZCA/IDAgOiBsZW5ndGggLSAxO1xuICAgICAgICBpZiAoc2VsZWN0ZWQgPCAwKVxuICAgICAgICAgICAgc2VsZWN0ZWQgPSBieSA9PSBcInBhZ2VcIiA/IDAgOiBsZW5ndGggLSAxO1xuICAgICAgICBlbHNlIGlmIChzZWxlY3RlZCA+PSBsZW5ndGgpXG4gICAgICAgICAgICBzZWxlY3RlZCA9IGJ5ID09IFwicGFnZVwiID8gbGVuZ3RoIC0gMSA6IDA7XG4gICAgICAgIHZpZXcuZGlzcGF0Y2goeyBlZmZlY3RzOiBzZXRTZWxlY3RlZEVmZmVjdC5vZihzZWxlY3RlZCkgfSk7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH07XG59XG4vKipcbkFjY2VwdCB0aGUgY3VycmVudCBjb21wbGV0aW9uLlxuKi9cbmNvbnN0IGFjY2VwdENvbXBsZXRpb24gPSAodmlldykgPT4ge1xuICAgIGxldCBjU3RhdGUgPSB2aWV3LnN0YXRlLmZpZWxkKGNvbXBsZXRpb25TdGF0ZSwgZmFsc2UpO1xuICAgIGlmICh2aWV3LnN0YXRlLnJlYWRPbmx5IHx8ICFjU3RhdGUgfHwgIWNTdGF0ZS5vcGVuIHx8IGNTdGF0ZS5vcGVuLnNlbGVjdGVkIDwgMCB8fCBjU3RhdGUub3Blbi5kaXNhYmxlZCB8fFxuICAgICAgICBEYXRlLm5vdygpIC0gY1N0YXRlLm9wZW4udGltZXN0YW1wIDwgdmlldy5zdGF0ZS5mYWNldChjb21wbGV0aW9uQ29uZmlnKS5pbnRlcmFjdGlvbkRlbGF5KVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgcmV0dXJuIGFwcGx5Q29tcGxldGlvbih2aWV3LCBjU3RhdGUub3Blbi5vcHRpb25zW2NTdGF0ZS5vcGVuLnNlbGVjdGVkXSk7XG59O1xuLyoqXG5FeHBsaWNpdGx5IHN0YXJ0IGF1dG9jb21wbGV0aW9uLlxuKi9cbmNvbnN0IHN0YXJ0Q29tcGxldGlvbiA9ICh2aWV3KSA9PiB7XG4gICAgbGV0IGNTdGF0ZSA9IHZpZXcuc3RhdGUuZmllbGQoY29tcGxldGlvblN0YXRlLCBmYWxzZSk7XG4gICAgaWYgKCFjU3RhdGUpXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB2aWV3LmRpc3BhdGNoKHsgZWZmZWN0czogc3RhcnRDb21wbGV0aW9uRWZmZWN0Lm9mKHRydWUpIH0pO1xuICAgIHJldHVybiB0cnVlO1xufTtcbi8qKlxuQ2xvc2UgdGhlIGN1cnJlbnRseSBhY3RpdmUgY29tcGxldGlvbi5cbiovXG5jb25zdCBjbG9zZUNvbXBsZXRpb24gPSAodmlldykgPT4ge1xuICAgIGxldCBjU3RhdGUgPSB2aWV3LnN0YXRlLmZpZWxkKGNvbXBsZXRpb25TdGF0ZSwgZmFsc2UpO1xuICAgIGlmICghY1N0YXRlIHx8ICFjU3RhdGUuYWN0aXZlLnNvbWUoYSA9PiBhLnN0YXRlICE9IDAgLyogU3RhdGUuSW5hY3RpdmUgKi8pKVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgdmlldy5kaXNwYXRjaCh7IGVmZmVjdHM6IGNsb3NlQ29tcGxldGlvbkVmZmVjdC5vZihudWxsKSB9KTtcbiAgICByZXR1cm4gdHJ1ZTtcbn07XG5jbGFzcyBSdW5uaW5nUXVlcnkge1xuICAgIGNvbnN0cnVjdG9yKGFjdGl2ZSwgY29udGV4dCkge1xuICAgICAgICB0aGlzLmFjdGl2ZSA9IGFjdGl2ZTtcbiAgICAgICAgdGhpcy5jb250ZXh0ID0gY29udGV4dDtcbiAgICAgICAgdGhpcy50aW1lID0gRGF0ZS5ub3coKTtcbiAgICAgICAgdGhpcy51cGRhdGVzID0gW107XG4gICAgICAgIC8vIE5vdGUgdGhhdCAndW5kZWZpbmVkJyBtZWFucyAnbm90IGRvbmUgeWV0Jywgd2hlcmVhcyAnbnVsbCcgbWVhbnNcbiAgICAgICAgLy8gJ3F1ZXJ5IHJldHVybmVkIG51bGwnLlxuICAgICAgICB0aGlzLmRvbmUgPSB1bmRlZmluZWQ7XG4gICAgfVxufVxuY29uc3QgTWF4VXBkYXRlQ291bnQgPSA1MCwgTWluQWJvcnRUaW1lID0gMTAwMDtcbmNvbnN0IGNvbXBsZXRpb25QbHVnaW4gPSAvKkBfX1BVUkVfXyovVmlld1BsdWdpbi5mcm9tQ2xhc3MoY2xhc3Mge1xuICAgIGNvbnN0cnVjdG9yKHZpZXcpIHtcbiAgICAgICAgdGhpcy52aWV3ID0gdmlldztcbiAgICAgICAgdGhpcy5kZWJvdW5jZVVwZGF0ZSA9IC0xO1xuICAgICAgICB0aGlzLnJ1bm5pbmcgPSBbXTtcbiAgICAgICAgdGhpcy5kZWJvdW5jZUFjY2VwdCA9IC0xO1xuICAgICAgICB0aGlzLnBlbmRpbmdTdGFydCA9IGZhbHNlO1xuICAgICAgICB0aGlzLmNvbXBvc2luZyA9IDAgLyogQ29tcG9zaXRpb25TdGF0ZS5Ob25lICovO1xuICAgICAgICBmb3IgKGxldCBhY3RpdmUgb2Ygdmlldy5zdGF0ZS5maWVsZChjb21wbGV0aW9uU3RhdGUpLmFjdGl2ZSlcbiAgICAgICAgICAgIGlmIChhY3RpdmUuaXNQZW5kaW5nKVxuICAgICAgICAgICAgICAgIHRoaXMuc3RhcnRRdWVyeShhY3RpdmUpO1xuICAgIH1cbiAgICB1cGRhdGUodXBkYXRlKSB7XG4gICAgICAgIGxldCBjU3RhdGUgPSB1cGRhdGUuc3RhdGUuZmllbGQoY29tcGxldGlvblN0YXRlKTtcbiAgICAgICAgbGV0IGNvbmYgPSB1cGRhdGUuc3RhdGUuZmFjZXQoY29tcGxldGlvbkNvbmZpZyk7XG4gICAgICAgIGlmICghdXBkYXRlLnNlbGVjdGlvblNldCAmJiAhdXBkYXRlLmRvY0NoYW5nZWQgJiYgdXBkYXRlLnN0YXJ0U3RhdGUuZmllbGQoY29tcGxldGlvblN0YXRlKSA9PSBjU3RhdGUpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIGxldCBkb2VzUmVzZXQgPSB1cGRhdGUudHJhbnNhY3Rpb25zLnNvbWUodHIgPT4ge1xuICAgICAgICAgICAgbGV0IHR5cGUgPSBnZXRVcGRhdGVUeXBlKHRyLCBjb25mKTtcbiAgICAgICAgICAgIHJldHVybiAodHlwZSAmIDggLyogVXBkYXRlVHlwZS5SZXNldCAqLykgfHwgKHRyLnNlbGVjdGlvbiB8fCB0ci5kb2NDaGFuZ2VkKSAmJiAhKHR5cGUgJiAzIC8qIFVwZGF0ZVR5cGUuU2ltcGxlSW50ZXJhY3Rpb24gKi8pO1xuICAgICAgICB9KTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLnJ1bm5pbmcubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGxldCBxdWVyeSA9IHRoaXMucnVubmluZ1tpXTtcbiAgICAgICAgICAgIGlmIChkb2VzUmVzZXQgfHxcbiAgICAgICAgICAgICAgICBxdWVyeS5jb250ZXh0LmFib3J0T25Eb2NDaGFuZ2UgJiYgdXBkYXRlLmRvY0NoYW5nZWQgfHxcbiAgICAgICAgICAgICAgICBxdWVyeS51cGRhdGVzLmxlbmd0aCArIHVwZGF0ZS50cmFuc2FjdGlvbnMubGVuZ3RoID4gTWF4VXBkYXRlQ291bnQgJiYgRGF0ZS5ub3coKSAtIHF1ZXJ5LnRpbWUgPiBNaW5BYm9ydFRpbWUpIHtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBoYW5kbGVyIG9mIHF1ZXJ5LmNvbnRleHQuYWJvcnRMaXN0ZW5lcnMpIHtcbiAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGhhbmRsZXIoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbG9nRXhjZXB0aW9uKHRoaXMudmlldy5zdGF0ZSwgZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcXVlcnkuY29udGV4dC5hYm9ydExpc3RlbmVycyA9IG51bGw7XG4gICAgICAgICAgICAgICAgdGhpcy5ydW5uaW5nLnNwbGljZShpLS0sIDEpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcXVlcnkudXBkYXRlcy5wdXNoKC4uLnVwZGF0ZS50cmFuc2FjdGlvbnMpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmRlYm91bmNlVXBkYXRlID4gLTEpXG4gICAgICAgICAgICBjbGVhclRpbWVvdXQodGhpcy5kZWJvdW5jZVVwZGF0ZSk7XG4gICAgICAgIGlmICh1cGRhdGUudHJhbnNhY3Rpb25zLnNvbWUodHIgPT4gdHIuZWZmZWN0cy5zb21lKGUgPT4gZS5pcyhzdGFydENvbXBsZXRpb25FZmZlY3QpKSkpXG4gICAgICAgICAgICB0aGlzLnBlbmRpbmdTdGFydCA9IHRydWU7XG4gICAgICAgIGxldCBkZWxheSA9IHRoaXMucGVuZGluZ1N0YXJ0ID8gNTAgOiBjb25mLmFjdGl2YXRlT25UeXBpbmdEZWxheTtcbiAgICAgICAgdGhpcy5kZWJvdW5jZVVwZGF0ZSA9IGNTdGF0ZS5hY3RpdmUuc29tZShhID0+IGEuaXNQZW5kaW5nICYmICF0aGlzLnJ1bm5pbmcuc29tZShxID0+IHEuYWN0aXZlLnNvdXJjZSA9PSBhLnNvdXJjZSkpXG4gICAgICAgICAgICA/IHNldFRpbWVvdXQoKCkgPT4gdGhpcy5zdGFydFVwZGF0ZSgpLCBkZWxheSkgOiAtMTtcbiAgICAgICAgaWYgKHRoaXMuY29tcG9zaW5nICE9IDAgLyogQ29tcG9zaXRpb25TdGF0ZS5Ob25lICovKVxuICAgICAgICAgICAgZm9yIChsZXQgdHIgb2YgdXBkYXRlLnRyYW5zYWN0aW9ucykge1xuICAgICAgICAgICAgICAgIGlmICh0ci5pc1VzZXJFdmVudChcImlucHV0LnR5cGVcIikpXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY29tcG9zaW5nID0gMiAvKiBDb21wb3NpdGlvblN0YXRlLkNoYW5nZWQgKi87XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAodGhpcy5jb21wb3NpbmcgPT0gMiAvKiBDb21wb3NpdGlvblN0YXRlLkNoYW5nZWQgKi8gJiYgdHIuc2VsZWN0aW9uKVxuICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbXBvc2luZyA9IDMgLyogQ29tcG9zaXRpb25TdGF0ZS5DaGFuZ2VkQW5kTW92ZWQgKi87XG4gICAgICAgICAgICB9XG4gICAgfVxuICAgIHN0YXJ0VXBkYXRlKCkge1xuICAgICAgICB0aGlzLmRlYm91bmNlVXBkYXRlID0gLTE7XG4gICAgICAgIHRoaXMucGVuZGluZ1N0YXJ0ID0gZmFsc2U7XG4gICAgICAgIGxldCB7IHN0YXRlIH0gPSB0aGlzLnZpZXcsIGNTdGF0ZSA9IHN0YXRlLmZpZWxkKGNvbXBsZXRpb25TdGF0ZSk7XG4gICAgICAgIGZvciAobGV0IGFjdGl2ZSBvZiBjU3RhdGUuYWN0aXZlKSB7XG4gICAgICAgICAgICBpZiAoYWN0aXZlLmlzUGVuZGluZyAmJiAhdGhpcy5ydW5uaW5nLnNvbWUociA9PiByLmFjdGl2ZS5zb3VyY2UgPT0gYWN0aXZlLnNvdXJjZSkpXG4gICAgICAgICAgICAgICAgdGhpcy5zdGFydFF1ZXJ5KGFjdGl2ZSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMucnVubmluZy5sZW5ndGggJiYgY1N0YXRlLm9wZW4gJiYgY1N0YXRlLm9wZW4uZGlzYWJsZWQpXG4gICAgICAgICAgICB0aGlzLmRlYm91bmNlQWNjZXB0ID0gc2V0VGltZW91dCgoKSA9PiB0aGlzLmFjY2VwdCgpLCB0aGlzLnZpZXcuc3RhdGUuZmFjZXQoY29tcGxldGlvbkNvbmZpZykudXBkYXRlU3luY1RpbWUpO1xuICAgIH1cbiAgICBzdGFydFF1ZXJ5KGFjdGl2ZSkge1xuICAgICAgICBsZXQgeyBzdGF0ZSB9ID0gdGhpcy52aWV3LCBwb3MgPSBjdXIoc3RhdGUpO1xuICAgICAgICBsZXQgY29udGV4dCA9IG5ldyBDb21wbGV0aW9uQ29udGV4dChzdGF0ZSwgcG9zLCBhY3RpdmUuZXhwbGljaXQsIHRoaXMudmlldyk7XG4gICAgICAgIGxldCBwZW5kaW5nID0gbmV3IFJ1bm5pbmdRdWVyeShhY3RpdmUsIGNvbnRleHQpO1xuICAgICAgICB0aGlzLnJ1bm5pbmcucHVzaChwZW5kaW5nKTtcbiAgICAgICAgUHJvbWlzZS5yZXNvbHZlKGFjdGl2ZS5zb3VyY2UoY29udGV4dCkpLnRoZW4ocmVzdWx0ID0+IHtcbiAgICAgICAgICAgIGlmICghcGVuZGluZy5jb250ZXh0LmFib3J0ZWQpIHtcbiAgICAgICAgICAgICAgICBwZW5kaW5nLmRvbmUgPSByZXN1bHQgfHwgbnVsbDtcbiAgICAgICAgICAgICAgICB0aGlzLnNjaGVkdWxlQWNjZXB0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sIGVyciA9PiB7XG4gICAgICAgICAgICB0aGlzLnZpZXcuZGlzcGF0Y2goeyBlZmZlY3RzOiBjbG9zZUNvbXBsZXRpb25FZmZlY3Qub2YobnVsbCkgfSk7XG4gICAgICAgICAgICBsb2dFeGNlcHRpb24odGhpcy52aWV3LnN0YXRlLCBlcnIpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgc2NoZWR1bGVBY2NlcHQoKSB7XG4gICAgICAgIGlmICh0aGlzLnJ1bm5pbmcuZXZlcnkocSA9PiBxLmRvbmUgIT09IHVuZGVmaW5lZCkpXG4gICAgICAgICAgICB0aGlzLmFjY2VwdCgpO1xuICAgICAgICBlbHNlIGlmICh0aGlzLmRlYm91bmNlQWNjZXB0IDwgMClcbiAgICAgICAgICAgIHRoaXMuZGVib3VuY2VBY2NlcHQgPSBzZXRUaW1lb3V0KCgpID0+IHRoaXMuYWNjZXB0KCksIHRoaXMudmlldy5zdGF0ZS5mYWNldChjb21wbGV0aW9uQ29uZmlnKS51cGRhdGVTeW5jVGltZSk7XG4gICAgfVxuICAgIC8vIEZvciBlYWNoIGZpbmlzaGVkIHF1ZXJ5IGluIHRoaXMucnVubmluZywgdHJ5IHRvIGNyZWF0ZSBhIHJlc3VsdFxuICAgIC8vIG9yLCBpZiBhcHByb3ByaWF0ZSwgcmVzdGFydCB0aGUgcXVlcnkuXG4gICAgYWNjZXB0KCkge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIGlmICh0aGlzLmRlYm91bmNlQWNjZXB0ID4gLTEpXG4gICAgICAgICAgICBjbGVhclRpbWVvdXQodGhpcy5kZWJvdW5jZUFjY2VwdCk7XG4gICAgICAgIHRoaXMuZGVib3VuY2VBY2NlcHQgPSAtMTtcbiAgICAgICAgbGV0IHVwZGF0ZWQgPSBbXTtcbiAgICAgICAgbGV0IGNvbmYgPSB0aGlzLnZpZXcuc3RhdGUuZmFjZXQoY29tcGxldGlvbkNvbmZpZyksIGNTdGF0ZSA9IHRoaXMudmlldy5zdGF0ZS5maWVsZChjb21wbGV0aW9uU3RhdGUpO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMucnVubmluZy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgbGV0IHF1ZXJ5ID0gdGhpcy5ydW5uaW5nW2ldO1xuICAgICAgICAgICAgaWYgKHF1ZXJ5LmRvbmUgPT09IHVuZGVmaW5lZClcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIHRoaXMucnVubmluZy5zcGxpY2UoaS0tLCAxKTtcbiAgICAgICAgICAgIGlmIChxdWVyeS5kb25lKSB7XG4gICAgICAgICAgICAgICAgbGV0IHBvcyA9IGN1cihxdWVyeS51cGRhdGVzLmxlbmd0aCA/IHF1ZXJ5LnVwZGF0ZXNbMF0uc3RhcnRTdGF0ZSA6IHRoaXMudmlldy5zdGF0ZSk7XG4gICAgICAgICAgICAgICAgbGV0IGxpbWl0ID0gTWF0aC5taW4ocG9zLCBxdWVyeS5kb25lLmZyb20gKyAocXVlcnkuYWN0aXZlLmV4cGxpY2l0ID8gMCA6IDEpKTtcbiAgICAgICAgICAgICAgICBsZXQgYWN0aXZlID0gbmV3IEFjdGl2ZVJlc3VsdChxdWVyeS5hY3RpdmUuc291cmNlLCBxdWVyeS5hY3RpdmUuZXhwbGljaXQsIGxpbWl0LCBxdWVyeS5kb25lLCBxdWVyeS5kb25lLmZyb20sIChfYSA9IHF1ZXJ5LmRvbmUudG8pICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IHBvcyk7XG4gICAgICAgICAgICAgICAgLy8gUmVwbGF5IHRoZSB0cmFuc2FjdGlvbnMgdGhhdCBoYXBwZW5lZCBzaW5jZSB0aGUgc3RhcnQgb2ZcbiAgICAgICAgICAgICAgICAvLyB0aGUgcmVxdWVzdCBhbmQgc2VlIGlmIHRoYXQgcHJlc2VydmVzIHRoZSByZXN1bHRcbiAgICAgICAgICAgICAgICBmb3IgKGxldCB0ciBvZiBxdWVyeS51cGRhdGVzKVxuICAgICAgICAgICAgICAgICAgICBhY3RpdmUgPSBhY3RpdmUudXBkYXRlKHRyLCBjb25mKTtcbiAgICAgICAgICAgICAgICBpZiAoYWN0aXZlLmhhc1Jlc3VsdCgpKSB7XG4gICAgICAgICAgICAgICAgICAgIHVwZGF0ZWQucHVzaChhY3RpdmUpO1xuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsZXQgY3VycmVudCA9IGNTdGF0ZS5hY3RpdmUuZmluZChhID0+IGEuc291cmNlID09IHF1ZXJ5LmFjdGl2ZS5zb3VyY2UpO1xuICAgICAgICAgICAgaWYgKGN1cnJlbnQgJiYgY3VycmVudC5pc1BlbmRpbmcpIHtcbiAgICAgICAgICAgICAgICBpZiAocXVlcnkuZG9uZSA9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIEV4cGxpY2l0bHkgZmFpbGVkLiBTaG91bGQgY2xlYXIgdGhlIHBlbmRpbmcgc3RhdHVzIGlmIGl0XG4gICAgICAgICAgICAgICAgICAgIC8vIGhhc24ndCBiZWVuIHJlLXNldCBpbiB0aGUgbWVhbnRpbWUuXG4gICAgICAgICAgICAgICAgICAgIGxldCBhY3RpdmUgPSBuZXcgQWN0aXZlU291cmNlKHF1ZXJ5LmFjdGl2ZS5zb3VyY2UsIDAgLyogU3RhdGUuSW5hY3RpdmUgKi8pO1xuICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCB0ciBvZiBxdWVyeS51cGRhdGVzKVxuICAgICAgICAgICAgICAgICAgICAgICAgYWN0aXZlID0gYWN0aXZlLnVwZGF0ZSh0ciwgY29uZik7XG4gICAgICAgICAgICAgICAgICAgIGlmICghYWN0aXZlLmlzUGVuZGluZylcbiAgICAgICAgICAgICAgICAgICAgICAgIHVwZGF0ZWQucHVzaChhY3RpdmUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gQ2xlYXJlZCBieSBzdWJzZXF1ZW50IHRyYW5zYWN0aW9ucy4gUmVzdGFydC5cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGFydFF1ZXJ5KGN1cnJlbnQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAodXBkYXRlZC5sZW5ndGggfHwgY1N0YXRlLm9wZW4gJiYgY1N0YXRlLm9wZW4uZGlzYWJsZWQpXG4gICAgICAgICAgICB0aGlzLnZpZXcuZGlzcGF0Y2goeyBlZmZlY3RzOiBzZXRBY3RpdmVFZmZlY3Qub2YodXBkYXRlZCkgfSk7XG4gICAgfVxufSwge1xuICAgIGV2ZW50SGFuZGxlcnM6IHtcbiAgICAgICAgYmx1cihldmVudCkge1xuICAgICAgICAgICAgbGV0IHN0YXRlID0gdGhpcy52aWV3LnN0YXRlLmZpZWxkKGNvbXBsZXRpb25TdGF0ZSwgZmFsc2UpO1xuICAgICAgICAgICAgaWYgKHN0YXRlICYmIHN0YXRlLnRvb2x0aXAgJiYgdGhpcy52aWV3LnN0YXRlLmZhY2V0KGNvbXBsZXRpb25Db25maWcpLmNsb3NlT25CbHVyKSB7XG4gICAgICAgICAgICAgICAgbGV0IGRpYWxvZyA9IHN0YXRlLm9wZW4gJiYgZ2V0VG9vbHRpcCh0aGlzLnZpZXcsIHN0YXRlLm9wZW4udG9vbHRpcCk7XG4gICAgICAgICAgICAgICAgaWYgKCFkaWFsb2cgfHwgIWRpYWxvZy5kb20uY29udGFpbnMoZXZlbnQucmVsYXRlZFRhcmdldCkpXG4gICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gdGhpcy52aWV3LmRpc3BhdGNoKHsgZWZmZWN0czogY2xvc2VDb21wbGV0aW9uRWZmZWN0Lm9mKG51bGwpIH0pLCAxMCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIGNvbXBvc2l0aW9uc3RhcnQoKSB7XG4gICAgICAgICAgICB0aGlzLmNvbXBvc2luZyA9IDEgLyogQ29tcG9zaXRpb25TdGF0ZS5TdGFydGVkICovO1xuICAgICAgICB9LFxuICAgICAgICBjb21wb3NpdGlvbmVuZCgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmNvbXBvc2luZyA9PSAzIC8qIENvbXBvc2l0aW9uU3RhdGUuQ2hhbmdlZEFuZE1vdmVkICovKSB7XG4gICAgICAgICAgICAgICAgLy8gU2FmYXJpIGZpcmVzIGNvbXBvc2l0aW9uZW5kIGV2ZW50cyBzeW5jaHJvbm91c2x5LCBwb3NzaWJseVxuICAgICAgICAgICAgICAgIC8vIGZyb20gaW5zaWRlIGFuIHVwZGF0ZSwgc28gZGlzcGF0Y2ggYXN5bmNocm9ub3VzbHkgdG8gYXZvaWQgcmVlbnRyYW5jeVxuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gdGhpcy52aWV3LmRpc3BhdGNoKHsgZWZmZWN0czogc3RhcnRDb21wbGV0aW9uRWZmZWN0Lm9mKGZhbHNlKSB9KSwgMjApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5jb21wb3NpbmcgPSAwIC8qIENvbXBvc2l0aW9uU3RhdGUuTm9uZSAqLztcbiAgICAgICAgfVxuICAgIH1cbn0pO1xuY29uc3Qgd2luZG93cyA9IHR5cGVvZiBuYXZpZ2F0b3IgPT0gXCJvYmplY3RcIiAmJiAvKkBfX1BVUkVfXyovL1dpbi8udGVzdChuYXZpZ2F0b3IucGxhdGZvcm0pO1xuY29uc3QgY29tbWl0Q2hhcmFjdGVycyA9IC8qQF9fUFVSRV9fKi9QcmVjLmhpZ2hlc3QoLypAX19QVVJFX18qL0VkaXRvclZpZXcuZG9tRXZlbnRIYW5kbGVycyh7XG4gICAga2V5ZG93bihldmVudCwgdmlldykge1xuICAgICAgICBsZXQgZmllbGQgPSB2aWV3LnN0YXRlLmZpZWxkKGNvbXBsZXRpb25TdGF0ZSwgZmFsc2UpO1xuICAgICAgICBpZiAoIWZpZWxkIHx8ICFmaWVsZC5vcGVuIHx8IGZpZWxkLm9wZW4uZGlzYWJsZWQgfHwgZmllbGQub3Blbi5zZWxlY3RlZCA8IDAgfHxcbiAgICAgICAgICAgIGV2ZW50LmtleS5sZW5ndGggPiAxIHx8IGV2ZW50LmN0cmxLZXkgJiYgISh3aW5kb3dzICYmIGV2ZW50LmFsdEtleSkgfHwgZXZlbnQubWV0YUtleSlcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgbGV0IG9wdGlvbiA9IGZpZWxkLm9wZW4ub3B0aW9uc1tmaWVsZC5vcGVuLnNlbGVjdGVkXTtcbiAgICAgICAgbGV0IHJlc3VsdCA9IGZpZWxkLmFjdGl2ZS5maW5kKGEgPT4gYS5zb3VyY2UgPT0gb3B0aW9uLnNvdXJjZSk7XG4gICAgICAgIGxldCBjb21taXRDaGFycyA9IG9wdGlvbi5jb21wbGV0aW9uLmNvbW1pdENoYXJhY3RlcnMgfHwgcmVzdWx0LnJlc3VsdC5jb21taXRDaGFyYWN0ZXJzO1xuICAgICAgICBpZiAoY29tbWl0Q2hhcnMgJiYgY29tbWl0Q2hhcnMuaW5kZXhPZihldmVudC5rZXkpID4gLTEpXG4gICAgICAgICAgICBhcHBseUNvbXBsZXRpb24odmlldywgb3B0aW9uKTtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbn0pKTtcblxuY29uc3QgYmFzZVRoZW1lID0gLypAX19QVVJFX18qL0VkaXRvclZpZXcuYmFzZVRoZW1lKHtcbiAgICBcIi5jbS10b29sdGlwLmNtLXRvb2x0aXAtYXV0b2NvbXBsZXRlXCI6IHtcbiAgICAgICAgXCImID4gdWxcIjoge1xuICAgICAgICAgICAgZm9udEZhbWlseTogXCJtb25vc3BhY2VcIixcbiAgICAgICAgICAgIHdoaXRlU3BhY2U6IFwibm93cmFwXCIsXG4gICAgICAgICAgICBvdmVyZmxvdzogXCJoaWRkZW4gYXV0b1wiLFxuICAgICAgICAgICAgbWF4V2lkdGhfZmFsbGJhY2s6IFwiNzAwcHhcIixcbiAgICAgICAgICAgIG1heFdpZHRoOiBcIm1pbig3MDBweCwgOTV2dylcIixcbiAgICAgICAgICAgIG1pbldpZHRoOiBcIjI1MHB4XCIsXG4gICAgICAgICAgICBtYXhIZWlnaHQ6IFwiMTBlbVwiLFxuICAgICAgICAgICAgaGVpZ2h0OiBcIjEwMCVcIixcbiAgICAgICAgICAgIGxpc3RTdHlsZTogXCJub25lXCIsXG4gICAgICAgICAgICBtYXJnaW46IDAsXG4gICAgICAgICAgICBwYWRkaW5nOiAwLFxuICAgICAgICAgICAgXCImID4gbGksICYgPiBjb21wbGV0aW9uLXNlY3Rpb25cIjoge1xuICAgICAgICAgICAgICAgIHBhZGRpbmc6IFwiMXB4IDNweFwiLFxuICAgICAgICAgICAgICAgIGxpbmVIZWlnaHQ6IDEuMlxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIFwiJiA+IGxpXCI6IHtcbiAgICAgICAgICAgICAgICBvdmVyZmxvd1g6IFwiaGlkZGVuXCIsXG4gICAgICAgICAgICAgICAgdGV4dE92ZXJmbG93OiBcImVsbGlwc2lzXCIsXG4gICAgICAgICAgICAgICAgY3Vyc29yOiBcInBvaW50ZXJcIlxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIFwiJiA+IGNvbXBsZXRpb24tc2VjdGlvblwiOiB7XG4gICAgICAgICAgICAgICAgZGlzcGxheTogXCJsaXN0LWl0ZW1cIixcbiAgICAgICAgICAgICAgICBib3JkZXJCb3R0b206IFwiMXB4IHNvbGlkIHNpbHZlclwiLFxuICAgICAgICAgICAgICAgIHBhZGRpbmdMZWZ0OiBcIjAuNWVtXCIsXG4gICAgICAgICAgICAgICAgb3BhY2l0eTogMC43XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9LFxuICAgIFwiJmxpZ2h0IC5jbS10b29sdGlwLWF1dG9jb21wbGV0ZSB1bCBsaVthcmlhLXNlbGVjdGVkXVwiOiB7XG4gICAgICAgIGJhY2tncm91bmQ6IFwiIzE3Y1wiLFxuICAgICAgICBjb2xvcjogXCJ3aGl0ZVwiLFxuICAgIH0sXG4gICAgXCImbGlnaHQgLmNtLXRvb2x0aXAtYXV0b2NvbXBsZXRlLWRpc2FibGVkIHVsIGxpW2FyaWEtc2VsZWN0ZWRdXCI6IHtcbiAgICAgICAgYmFja2dyb3VuZDogXCIjNzc3XCIsXG4gICAgfSxcbiAgICBcIiZkYXJrIC5jbS10b29sdGlwLWF1dG9jb21wbGV0ZSB1bCBsaVthcmlhLXNlbGVjdGVkXVwiOiB7XG4gICAgICAgIGJhY2tncm91bmQ6IFwiIzM0N1wiLFxuICAgICAgICBjb2xvcjogXCJ3aGl0ZVwiLFxuICAgIH0sXG4gICAgXCImZGFyayAuY20tdG9vbHRpcC1hdXRvY29tcGxldGUtZGlzYWJsZWQgdWwgbGlbYXJpYS1zZWxlY3RlZF1cIjoge1xuICAgICAgICBiYWNrZ3JvdW5kOiBcIiM0NDRcIixcbiAgICB9LFxuICAgIFwiLmNtLWNvbXBsZXRpb25MaXN0SW5jb21wbGV0ZVRvcDpiZWZvcmUsIC5jbS1jb21wbGV0aW9uTGlzdEluY29tcGxldGVCb3R0b206YWZ0ZXJcIjoge1xuICAgICAgICBjb250ZW50OiAnXCLCt8K3wrdcIicsXG4gICAgICAgIG9wYWNpdHk6IDAuNSxcbiAgICAgICAgZGlzcGxheTogXCJibG9ja1wiLFxuICAgICAgICB0ZXh0QWxpZ246IFwiY2VudGVyXCJcbiAgICB9LFxuICAgIFwiLmNtLXRvb2x0aXAuY20tY29tcGxldGlvbkluZm9cIjoge1xuICAgICAgICBwb3NpdGlvbjogXCJhYnNvbHV0ZVwiLFxuICAgICAgICBwYWRkaW5nOiBcIjNweCA5cHhcIixcbiAgICAgICAgd2lkdGg6IFwibWF4LWNvbnRlbnRcIixcbiAgICAgICAgbWF4V2lkdGg6IGAkezQwMCAvKiBJbmZvLldpZHRoICovfXB4YCxcbiAgICAgICAgYm94U2l6aW5nOiBcImJvcmRlci1ib3hcIixcbiAgICAgICAgd2hpdGVTcGFjZTogXCJwcmUtbGluZVwiXG4gICAgfSxcbiAgICBcIi5jbS1jb21wbGV0aW9uSW5mby5jbS1jb21wbGV0aW9uSW5mby1sZWZ0XCI6IHsgcmlnaHQ6IFwiMTAwJVwiIH0sXG4gICAgXCIuY20tY29tcGxldGlvbkluZm8uY20tY29tcGxldGlvbkluZm8tcmlnaHRcIjogeyBsZWZ0OiBcIjEwMCVcIiB9LFxuICAgIFwiLmNtLWNvbXBsZXRpb25JbmZvLmNtLWNvbXBsZXRpb25JbmZvLWxlZnQtbmFycm93XCI6IHsgcmlnaHQ6IGAkezMwIC8qIEluZm8uTWFyZ2luICovfXB4YCB9LFxuICAgIFwiLmNtLWNvbXBsZXRpb25JbmZvLmNtLWNvbXBsZXRpb25JbmZvLXJpZ2h0LW5hcnJvd1wiOiB7IGxlZnQ6IGAkezMwIC8qIEluZm8uTWFyZ2luICovfXB4YCB9LFxuICAgIFwiJmxpZ2h0IC5jbS1zbmlwcGV0RmllbGRcIjogeyBiYWNrZ3JvdW5kQ29sb3I6IFwiIzAwMDAwMDIyXCIgfSxcbiAgICBcIiZkYXJrIC5jbS1zbmlwcGV0RmllbGRcIjogeyBiYWNrZ3JvdW5kQ29sb3I6IFwiI2ZmZmZmZjIyXCIgfSxcbiAgICBcIi5jbS1zbmlwcGV0RmllbGRQb3NpdGlvblwiOiB7XG4gICAgICAgIHZlcnRpY2FsQWxpZ246IFwidGV4dC10b3BcIixcbiAgICAgICAgd2lkdGg6IDAsXG4gICAgICAgIGhlaWdodDogXCIxLjE1ZW1cIixcbiAgICAgICAgZGlzcGxheTogXCJpbmxpbmUtYmxvY2tcIixcbiAgICAgICAgbWFyZ2luOiBcIjAgLTAuN3B4IC0uN2VtXCIsXG4gICAgICAgIGJvcmRlckxlZnQ6IFwiMS40cHggZG90dGVkICM4ODhcIlxuICAgIH0sXG4gICAgXCIuY20tY29tcGxldGlvbk1hdGNoZWRUZXh0XCI6IHtcbiAgICAgICAgdGV4dERlY29yYXRpb246IFwidW5kZXJsaW5lXCJcbiAgICB9LFxuICAgIFwiLmNtLWNvbXBsZXRpb25EZXRhaWxcIjoge1xuICAgICAgICBtYXJnaW5MZWZ0OiBcIjAuNWVtXCIsXG4gICAgICAgIGZvbnRTdHlsZTogXCJpdGFsaWNcIlxuICAgIH0sXG4gICAgXCIuY20tY29tcGxldGlvbkljb25cIjoge1xuICAgICAgICBmb250U2l6ZTogXCI5MCVcIixcbiAgICAgICAgd2lkdGg6IFwiLjhlbVwiLFxuICAgICAgICBkaXNwbGF5OiBcImlubGluZS1ibG9ja1wiLFxuICAgICAgICB0ZXh0QWxpZ246IFwiY2VudGVyXCIsXG4gICAgICAgIHBhZGRpbmdSaWdodDogXCIuNmVtXCIsXG4gICAgICAgIG9wYWNpdHk6IFwiMC42XCIsXG4gICAgICAgIGJveFNpemluZzogXCJjb250ZW50LWJveFwiXG4gICAgfSxcbiAgICBcIi5jbS1jb21wbGV0aW9uSWNvbi1mdW5jdGlvbiwgLmNtLWNvbXBsZXRpb25JY29uLW1ldGhvZFwiOiB7XG4gICAgICAgIFwiJjphZnRlclwiOiB7IGNvbnRlbnQ6IFwiJ8aSJ1wiIH1cbiAgICB9LFxuICAgIFwiLmNtLWNvbXBsZXRpb25JY29uLWNsYXNzXCI6IHtcbiAgICAgICAgXCImOmFmdGVyXCI6IHsgY29udGVudDogXCIn4peLJ1wiIH1cbiAgICB9LFxuICAgIFwiLmNtLWNvbXBsZXRpb25JY29uLWludGVyZmFjZVwiOiB7XG4gICAgICAgIFwiJjphZnRlclwiOiB7IGNvbnRlbnQ6IFwiJ+KXjCdcIiB9XG4gICAgfSxcbiAgICBcIi5jbS1jb21wbGV0aW9uSWNvbi12YXJpYWJsZVwiOiB7XG4gICAgICAgIFwiJjphZnRlclwiOiB7IGNvbnRlbnQ6IFwiJ/CdkaUnXCIgfVxuICAgIH0sXG4gICAgXCIuY20tY29tcGxldGlvbkljb24tY29uc3RhbnRcIjoge1xuICAgICAgICBcIiY6YWZ0ZXJcIjogeyBjb250ZW50OiBcIifwnZC2J1wiIH1cbiAgICB9LFxuICAgIFwiLmNtLWNvbXBsZXRpb25JY29uLXR5cGVcIjoge1xuICAgICAgICBcIiY6YWZ0ZXJcIjogeyBjb250ZW50OiBcIifwnZGhJ1wiIH1cbiAgICB9LFxuICAgIFwiLmNtLWNvbXBsZXRpb25JY29uLWVudW1cIjoge1xuICAgICAgICBcIiY6YWZ0ZXJcIjogeyBjb250ZW50OiBcIifiiKonXCIgfVxuICAgIH0sXG4gICAgXCIuY20tY29tcGxldGlvbkljb24tcHJvcGVydHlcIjoge1xuICAgICAgICBcIiY6YWZ0ZXJcIjogeyBjb250ZW50OiBcIifilqEnXCIgfVxuICAgIH0sXG4gICAgXCIuY20tY29tcGxldGlvbkljb24ta2V5d29yZFwiOiB7XG4gICAgICAgIFwiJjphZnRlclwiOiB7IGNvbnRlbnQ6IFwiJ/CflJFcXHVGRTBFJ1wiIH0gLy8gRGlzYWJsZSBlbW9qaSByZW5kZXJpbmdcbiAgICB9LFxuICAgIFwiLmNtLWNvbXBsZXRpb25JY29uLW5hbWVzcGFjZVwiOiB7XG4gICAgICAgIFwiJjphZnRlclwiOiB7IGNvbnRlbnQ6IFwiJ+KWoidcIiB9XG4gICAgfSxcbiAgICBcIi5jbS1jb21wbGV0aW9uSWNvbi10ZXh0XCI6IHtcbiAgICAgICAgXCImOmFmdGVyXCI6IHsgY29udGVudDogXCInYWJjJ1wiLCBmb250U2l6ZTogXCI1MCVcIiwgdmVydGljYWxBbGlnbjogXCJtaWRkbGVcIiB9XG4gICAgfVxufSk7XG5cbmNsYXNzIEZpZWxkUG9zIHtcbiAgICBjb25zdHJ1Y3RvcihmaWVsZCwgbGluZSwgZnJvbSwgdG8pIHtcbiAgICAgICAgdGhpcy5maWVsZCA9IGZpZWxkO1xuICAgICAgICB0aGlzLmxpbmUgPSBsaW5lO1xuICAgICAgICB0aGlzLmZyb20gPSBmcm9tO1xuICAgICAgICB0aGlzLnRvID0gdG87XG4gICAgfVxufVxuY2xhc3MgRmllbGRSYW5nZSB7XG4gICAgY29uc3RydWN0b3IoZmllbGQsIGZyb20sIHRvKSB7XG4gICAgICAgIHRoaXMuZmllbGQgPSBmaWVsZDtcbiAgICAgICAgdGhpcy5mcm9tID0gZnJvbTtcbiAgICAgICAgdGhpcy50byA9IHRvO1xuICAgIH1cbiAgICBtYXAoY2hhbmdlcykge1xuICAgICAgICBsZXQgZnJvbSA9IGNoYW5nZXMubWFwUG9zKHRoaXMuZnJvbSwgLTEsIE1hcE1vZGUuVHJhY2tEZWwpO1xuICAgICAgICBsZXQgdG8gPSBjaGFuZ2VzLm1hcFBvcyh0aGlzLnRvLCAxLCBNYXBNb2RlLlRyYWNrRGVsKTtcbiAgICAgICAgcmV0dXJuIGZyb20gPT0gbnVsbCB8fCB0byA9PSBudWxsID8gbnVsbCA6IG5ldyBGaWVsZFJhbmdlKHRoaXMuZmllbGQsIGZyb20sIHRvKTtcbiAgICB9XG59XG5jbGFzcyBTbmlwcGV0IHtcbiAgICBjb25zdHJ1Y3RvcihsaW5lcywgZmllbGRQb3NpdGlvbnMpIHtcbiAgICAgICAgdGhpcy5saW5lcyA9IGxpbmVzO1xuICAgICAgICB0aGlzLmZpZWxkUG9zaXRpb25zID0gZmllbGRQb3NpdGlvbnM7XG4gICAgfVxuICAgIGluc3RhbnRpYXRlKHN0YXRlLCBwb3MpIHtcbiAgICAgICAgbGV0IHRleHQgPSBbXSwgbGluZVN0YXJ0ID0gW3Bvc107XG4gICAgICAgIGxldCBsaW5lT2JqID0gc3RhdGUuZG9jLmxpbmVBdChwb3MpLCBiYXNlSW5kZW50ID0gL15cXHMqLy5leGVjKGxpbmVPYmoudGV4dClbMF07XG4gICAgICAgIGZvciAobGV0IGxpbmUgb2YgdGhpcy5saW5lcykge1xuICAgICAgICAgICAgaWYgKHRleHQubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgbGV0IGluZGVudCA9IGJhc2VJbmRlbnQsIHRhYnMgPSAvXlxcdCovLmV4ZWMobGluZSlbMF0ubGVuZ3RoO1xuICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGFiczsgaSsrKVxuICAgICAgICAgICAgICAgICAgICBpbmRlbnQgKz0gc3RhdGUuZmFjZXQoaW5kZW50VW5pdCk7XG4gICAgICAgICAgICAgICAgbGluZVN0YXJ0LnB1c2gocG9zICsgaW5kZW50Lmxlbmd0aCAtIHRhYnMpO1xuICAgICAgICAgICAgICAgIGxpbmUgPSBpbmRlbnQgKyBsaW5lLnNsaWNlKHRhYnMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGV4dC5wdXNoKGxpbmUpO1xuICAgICAgICAgICAgcG9zICs9IGxpbmUubGVuZ3RoICsgMTtcbiAgICAgICAgfVxuICAgICAgICBsZXQgcmFuZ2VzID0gdGhpcy5maWVsZFBvc2l0aW9ucy5tYXAocG9zID0+IG5ldyBGaWVsZFJhbmdlKHBvcy5maWVsZCwgbGluZVN0YXJ0W3Bvcy5saW5lXSArIHBvcy5mcm9tLCBsaW5lU3RhcnRbcG9zLmxpbmVdICsgcG9zLnRvKSk7XG4gICAgICAgIHJldHVybiB7IHRleHQsIHJhbmdlcyB9O1xuICAgIH1cbiAgICBzdGF0aWMgcGFyc2UodGVtcGxhdGUpIHtcbiAgICAgICAgbGV0IGZpZWxkcyA9IFtdO1xuICAgICAgICBsZXQgbGluZXMgPSBbXSwgcG9zaXRpb25zID0gW10sIG07XG4gICAgICAgIGZvciAobGV0IGxpbmUgb2YgdGVtcGxhdGUuc3BsaXQoL1xcclxcbj98XFxuLykpIHtcbiAgICAgICAgICAgIHdoaWxlIChtID0gL1sjJF1cXHsoPzooXFxkKykoPzo6KFtee31dKikpP3woKD86XFxcXFt7fV18W157fV0pKikpXFx9Ly5leGVjKGxpbmUpKSB7XG4gICAgICAgICAgICAgICAgbGV0IHNlcSA9IG1bMV0gPyArbVsxXSA6IG51bGwsIHJhd05hbWUgPSBtWzJdIHx8IG1bM10gfHwgXCJcIiwgZm91bmQgPSAtMTtcbiAgICAgICAgICAgICAgICBsZXQgbmFtZSA9IHJhd05hbWUucmVwbGFjZSgvXFxcXFt7fV0vZywgbSA9PiBtWzFdKTtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGZpZWxkcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICBpZiAoc2VxICE9IG51bGwgPyBmaWVsZHNbaV0uc2VxID09IHNlcSA6IG5hbWUgPyBmaWVsZHNbaV0ubmFtZSA9PSBuYW1lIDogZmFsc2UpXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3VuZCA9IGk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChmb3VuZCA8IDApIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGkgPSAwO1xuICAgICAgICAgICAgICAgICAgICB3aGlsZSAoaSA8IGZpZWxkcy5sZW5ndGggJiYgKHNlcSA9PSBudWxsIHx8IChmaWVsZHNbaV0uc2VxICE9IG51bGwgJiYgZmllbGRzW2ldLnNlcSA8IHNlcSkpKVxuICAgICAgICAgICAgICAgICAgICAgICAgaSsrO1xuICAgICAgICAgICAgICAgICAgICBmaWVsZHMuc3BsaWNlKGksIDAsIHsgc2VxLCBuYW1lIH0pO1xuICAgICAgICAgICAgICAgICAgICBmb3VuZCA9IGk7XG4gICAgICAgICAgICAgICAgICAgIGZvciAobGV0IHBvcyBvZiBwb3NpdGlvbnMpXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocG9zLmZpZWxkID49IGZvdW5kKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvcy5maWVsZCsrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBmb3IgKGxldCBwb3Mgb2YgcG9zaXRpb25zKVxuICAgICAgICAgICAgICAgICAgICBpZiAocG9zLmxpbmUgPT0gbGluZXMubGVuZ3RoICYmIHBvcy5mcm9tID4gbS5pbmRleCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHNuaXAgPSBtWzJdID8gMyArIChtWzFdIHx8IFwiXCIpLmxlbmd0aCA6IDI7XG4gICAgICAgICAgICAgICAgICAgICAgICBwb3MuZnJvbSAtPSBzbmlwO1xuICAgICAgICAgICAgICAgICAgICAgICAgcG9zLnRvIC09IHNuaXA7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBwb3NpdGlvbnMucHVzaChuZXcgRmllbGRQb3MoZm91bmQsIGxpbmVzLmxlbmd0aCwgbS5pbmRleCwgbS5pbmRleCArIG5hbWUubGVuZ3RoKSk7XG4gICAgICAgICAgICAgICAgbGluZSA9IGxpbmUuc2xpY2UoMCwgbS5pbmRleCkgKyByYXdOYW1lICsgbGluZS5zbGljZShtLmluZGV4ICsgbVswXS5sZW5ndGgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbGluZSA9IGxpbmUucmVwbGFjZSgvXFxcXChbe31dKS9nLCAoXywgYnJhY2UsIGluZGV4KSA9PiB7XG4gICAgICAgICAgICAgICAgZm9yIChsZXQgcG9zIG9mIHBvc2l0aW9ucylcbiAgICAgICAgICAgICAgICAgICAgaWYgKHBvcy5saW5lID09IGxpbmVzLmxlbmd0aCAmJiBwb3MuZnJvbSA+IGluZGV4KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwb3MuZnJvbS0tO1xuICAgICAgICAgICAgICAgICAgICAgICAgcG9zLnRvLS07XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gYnJhY2U7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGxpbmVzLnB1c2gobGluZSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBTbmlwcGV0KGxpbmVzLCBwb3NpdGlvbnMpO1xuICAgIH1cbn1cbmxldCBmaWVsZE1hcmtlciA9IC8qQF9fUFVSRV9fKi9EZWNvcmF0aW9uLndpZGdldCh7IHdpZGdldDogLypAX19QVVJFX18qL25ldyBjbGFzcyBleHRlbmRzIFdpZGdldFR5cGUge1xuICAgICAgICB0b0RPTSgpIHtcbiAgICAgICAgICAgIGxldCBzcGFuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNwYW5cIik7XG4gICAgICAgICAgICBzcGFuLmNsYXNzTmFtZSA9IFwiY20tc25pcHBldEZpZWxkUG9zaXRpb25cIjtcbiAgICAgICAgICAgIHJldHVybiBzcGFuO1xuICAgICAgICB9XG4gICAgICAgIGlnbm9yZUV2ZW50KCkgeyByZXR1cm4gZmFsc2U7IH1cbiAgICB9IH0pO1xubGV0IGZpZWxkUmFuZ2UgPSAvKkBfX1BVUkVfXyovRGVjb3JhdGlvbi5tYXJrKHsgY2xhc3M6IFwiY20tc25pcHBldEZpZWxkXCIgfSk7XG5jbGFzcyBBY3RpdmVTbmlwcGV0IHtcbiAgICBjb25zdHJ1Y3RvcihyYW5nZXMsIGFjdGl2ZSkge1xuICAgICAgICB0aGlzLnJhbmdlcyA9IHJhbmdlcztcbiAgICAgICAgdGhpcy5hY3RpdmUgPSBhY3RpdmU7XG4gICAgICAgIHRoaXMuZGVjbyA9IERlY29yYXRpb24uc2V0KHJhbmdlcy5tYXAociA9PiAoci5mcm9tID09IHIudG8gPyBmaWVsZE1hcmtlciA6IGZpZWxkUmFuZ2UpLnJhbmdlKHIuZnJvbSwgci50bykpLCB0cnVlKTtcbiAgICB9XG4gICAgbWFwKGNoYW5nZXMpIHtcbiAgICAgICAgbGV0IHJhbmdlcyA9IFtdO1xuICAgICAgICBmb3IgKGxldCByIG9mIHRoaXMucmFuZ2VzKSB7XG4gICAgICAgICAgICBsZXQgbWFwcGVkID0gci5tYXAoY2hhbmdlcyk7XG4gICAgICAgICAgICBpZiAoIW1hcHBlZClcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgIHJhbmdlcy5wdXNoKG1hcHBlZCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBBY3RpdmVTbmlwcGV0KHJhbmdlcywgdGhpcy5hY3RpdmUpO1xuICAgIH1cbiAgICBzZWxlY3Rpb25JbnNpZGVGaWVsZChzZWwpIHtcbiAgICAgICAgcmV0dXJuIHNlbC5yYW5nZXMuZXZlcnkocmFuZ2UgPT4gdGhpcy5yYW5nZXMuc29tZShyID0+IHIuZmllbGQgPT0gdGhpcy5hY3RpdmUgJiYgci5mcm9tIDw9IHJhbmdlLmZyb20gJiYgci50byA+PSByYW5nZS50bykpO1xuICAgIH1cbn1cbmNvbnN0IHNldEFjdGl2ZSA9IC8qQF9fUFVSRV9fKi9TdGF0ZUVmZmVjdC5kZWZpbmUoe1xuICAgIG1hcCh2YWx1ZSwgY2hhbmdlcykgeyByZXR1cm4gdmFsdWUgJiYgdmFsdWUubWFwKGNoYW5nZXMpOyB9XG59KTtcbmNvbnN0IG1vdmVUb0ZpZWxkID0gLypAX19QVVJFX18qL1N0YXRlRWZmZWN0LmRlZmluZSgpO1xuY29uc3Qgc25pcHBldFN0YXRlID0gLypAX19QVVJFX18qL1N0YXRlRmllbGQuZGVmaW5lKHtcbiAgICBjcmVhdGUoKSB7IHJldHVybiBudWxsOyB9LFxuICAgIHVwZGF0ZSh2YWx1ZSwgdHIpIHtcbiAgICAgICAgZm9yIChsZXQgZWZmZWN0IG9mIHRyLmVmZmVjdHMpIHtcbiAgICAgICAgICAgIGlmIChlZmZlY3QuaXMoc2V0QWN0aXZlKSlcbiAgICAgICAgICAgICAgICByZXR1cm4gZWZmZWN0LnZhbHVlO1xuICAgICAgICAgICAgaWYgKGVmZmVjdC5pcyhtb3ZlVG9GaWVsZCkgJiYgdmFsdWUpXG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBBY3RpdmVTbmlwcGV0KHZhbHVlLnJhbmdlcywgZWZmZWN0LnZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodmFsdWUgJiYgdHIuZG9jQ2hhbmdlZClcbiAgICAgICAgICAgIHZhbHVlID0gdmFsdWUubWFwKHRyLmNoYW5nZXMpO1xuICAgICAgICBpZiAodmFsdWUgJiYgdHIuc2VsZWN0aW9uICYmICF2YWx1ZS5zZWxlY3Rpb25JbnNpZGVGaWVsZCh0ci5zZWxlY3Rpb24pKVxuICAgICAgICAgICAgdmFsdWUgPSBudWxsO1xuICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgfSxcbiAgICBwcm92aWRlOiBmID0+IEVkaXRvclZpZXcuZGVjb3JhdGlvbnMuZnJvbShmLCB2YWwgPT4gdmFsID8gdmFsLmRlY28gOiBEZWNvcmF0aW9uLm5vbmUpXG59KTtcbmZ1bmN0aW9uIGZpZWxkU2VsZWN0aW9uKHJhbmdlcywgZmllbGQpIHtcbiAgICByZXR1cm4gRWRpdG9yU2VsZWN0aW9uLmNyZWF0ZShyYW5nZXMuZmlsdGVyKHIgPT4gci5maWVsZCA9PSBmaWVsZCkubWFwKHIgPT4gRWRpdG9yU2VsZWN0aW9uLnJhbmdlKHIuZnJvbSwgci50bykpKTtcbn1cbi8qKlxuQ29udmVydCBhIHNuaXBwZXQgdGVtcGxhdGUgdG8gYSBmdW5jdGlvbiB0aGF0IGNhblxuW2FwcGx5XShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI2F1dG9jb21wbGV0ZS5Db21wbGV0aW9uLmFwcGx5KSBpdC4gU25pcHBldHMgYXJlIHdyaXR0ZW5cbnVzaW5nIHN5bnRheCBsaWtlIHRoaXM6XG5cbiAgICBcImZvciAobGV0ICR7aW5kZXh9ID0gMDsgJHtpbmRleH0gPCAke2VuZH07ICR7aW5kZXh9KyspIHtcXG5cXHQke31cXG59XCJcblxuRWFjaCBgJHt9YCBwbGFjZWhvbGRlciAoeW91IG1heSBhbHNvIHVzZSBgI3t9YCkgaW5kaWNhdGVzIGEgZmllbGRcbnRoYXQgdGhlIHVzZXIgY2FuIGZpbGwgaW4uIEl0cyBuYW1lLCBpZiBhbnksIHdpbGwgYmUgdGhlIGRlZmF1bHRcbmNvbnRlbnQgZm9yIHRoZSBmaWVsZC5cblxuV2hlbiB0aGUgc25pcHBldCBpcyBhY3RpdmF0ZWQgYnkgY2FsbGluZyB0aGUgcmV0dXJuZWQgZnVuY3Rpb24sXG50aGUgY29kZSBpcyBpbnNlcnRlZCBhdCB0aGUgZ2l2ZW4gcG9zaXRpb24uIE5ld2xpbmVzIGluIHRoZVxudGVtcGxhdGUgYXJlIGluZGVudGVkIGJ5IHRoZSBpbmRlbnRhdGlvbiBvZiB0aGUgc3RhcnQgbGluZSwgcGx1c1xub25lIFtpbmRlbnQgdW5pdF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNsYW5ndWFnZS5pbmRlbnRVbml0KSBwZXIgdGFiIGNoYXJhY3RlciBhZnRlclxudGhlIG5ld2xpbmUuXG5cbk9uIGFjdGl2YXRpb24sIChhbGwgaW5zdGFuY2VzIG9mKSB0aGUgZmlyc3QgZmllbGQgYXJlIHNlbGVjdGVkLlxuVGhlIHVzZXIgY2FuIG1vdmUgYmV0d2VlbiBmaWVsZHMgd2l0aCBUYWIgYW5kIFNoaWZ0LVRhYiBhcyBsb25nIGFzXG50aGUgZmllbGRzIGFyZSBhY3RpdmUuIE1vdmluZyB0byB0aGUgbGFzdCBmaWVsZCBvciBtb3ZpbmcgdGhlXG5jdXJzb3Igb3V0IG9mIHRoZSBjdXJyZW50IGZpZWxkIGRlYWN0aXZhdGVzIHRoZSBmaWVsZHMuXG5cblRoZSBvcmRlciBvZiBmaWVsZHMgZGVmYXVsdHMgdG8gdGV4dHVhbCBvcmRlciwgYnV0IHlvdSBjYW4gYWRkXG5udW1iZXJzIHRvIHBsYWNlaG9sZGVycyAoYCR7MX1gIG9yIGAkezE6ZGVmYXVsdFRleHR9YCkgdG8gcHJvdmlkZVxuYSBjdXN0b20gb3JkZXIuXG5cblRvIGluY2x1ZGUgYSBsaXRlcmFsIGB7YCBvciBgfWAgaW4geW91ciB0ZW1wbGF0ZSwgcHV0IGEgYmFja3NsYXNoXG5pbiBmcm9udCBvZiBpdC4gVGhpcyB3aWxsIGJlIHJlbW92ZWQgYW5kIHRoZSBicmFjZSB3aWxsIG5vdCBiZVxuaW50ZXJwcmV0ZWQgYXMgaW5kaWNhdGluZyBhIHBsYWNlaG9sZGVyLlxuKi9cbmZ1bmN0aW9uIHNuaXBwZXQodGVtcGxhdGUpIHtcbiAgICBsZXQgc25pcHBldCA9IFNuaXBwZXQucGFyc2UodGVtcGxhdGUpO1xuICAgIHJldHVybiAoZWRpdG9yLCBjb21wbGV0aW9uLCBmcm9tLCB0bykgPT4ge1xuICAgICAgICBsZXQgeyB0ZXh0LCByYW5nZXMgfSA9IHNuaXBwZXQuaW5zdGFudGlhdGUoZWRpdG9yLnN0YXRlLCBmcm9tKTtcbiAgICAgICAgbGV0IHsgbWFpbiB9ID0gZWRpdG9yLnN0YXRlLnNlbGVjdGlvbjtcbiAgICAgICAgbGV0IHNwZWMgPSB7XG4gICAgICAgICAgICBjaGFuZ2VzOiB7IGZyb20sIHRvOiB0byA9PSBtYWluLmZyb20gPyBtYWluLnRvIDogdG8sIGluc2VydDogVGV4dC5vZih0ZXh0KSB9LFxuICAgICAgICAgICAgc2Nyb2xsSW50b1ZpZXc6IHRydWUsXG4gICAgICAgICAgICBhbm5vdGF0aW9uczogY29tcGxldGlvbiA/IFtwaWNrZWRDb21wbGV0aW9uLm9mKGNvbXBsZXRpb24pLCBUcmFuc2FjdGlvbi51c2VyRXZlbnQub2YoXCJpbnB1dC5jb21wbGV0ZVwiKV0gOiB1bmRlZmluZWRcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKHJhbmdlcy5sZW5ndGgpXG4gICAgICAgICAgICBzcGVjLnNlbGVjdGlvbiA9IGZpZWxkU2VsZWN0aW9uKHJhbmdlcywgMCk7XG4gICAgICAgIGlmIChyYW5nZXMuc29tZShyID0+IHIuZmllbGQgPiAwKSkge1xuICAgICAgICAgICAgbGV0IGFjdGl2ZSA9IG5ldyBBY3RpdmVTbmlwcGV0KHJhbmdlcywgMCk7XG4gICAgICAgICAgICBsZXQgZWZmZWN0cyA9IHNwZWMuZWZmZWN0cyA9IFtzZXRBY3RpdmUub2YoYWN0aXZlKV07XG4gICAgICAgICAgICBpZiAoZWRpdG9yLnN0YXRlLmZpZWxkKHNuaXBwZXRTdGF0ZSwgZmFsc2UpID09PSB1bmRlZmluZWQpXG4gICAgICAgICAgICAgICAgZWZmZWN0cy5wdXNoKFN0YXRlRWZmZWN0LmFwcGVuZENvbmZpZy5vZihbc25pcHBldFN0YXRlLCBhZGRTbmlwcGV0S2V5bWFwLCBzbmlwcGV0UG9pbnRlckhhbmRsZXIsIGJhc2VUaGVtZV0pKTtcbiAgICAgICAgfVxuICAgICAgICBlZGl0b3IuZGlzcGF0Y2goZWRpdG9yLnN0YXRlLnVwZGF0ZShzcGVjKSk7XG4gICAgfTtcbn1cbmZ1bmN0aW9uIG1vdmVGaWVsZChkaXIpIHtcbiAgICByZXR1cm4gKHsgc3RhdGUsIGRpc3BhdGNoIH0pID0+IHtcbiAgICAgICAgbGV0IGFjdGl2ZSA9IHN0YXRlLmZpZWxkKHNuaXBwZXRTdGF0ZSwgZmFsc2UpO1xuICAgICAgICBpZiAoIWFjdGl2ZSB8fCBkaXIgPCAwICYmIGFjdGl2ZS5hY3RpdmUgPT0gMClcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgbGV0IG5leHQgPSBhY3RpdmUuYWN0aXZlICsgZGlyLCBsYXN0ID0gZGlyID4gMCAmJiAhYWN0aXZlLnJhbmdlcy5zb21lKHIgPT4gci5maWVsZCA9PSBuZXh0ICsgZGlyKTtcbiAgICAgICAgZGlzcGF0Y2goc3RhdGUudXBkYXRlKHtcbiAgICAgICAgICAgIHNlbGVjdGlvbjogZmllbGRTZWxlY3Rpb24oYWN0aXZlLnJhbmdlcywgbmV4dCksXG4gICAgICAgICAgICBlZmZlY3RzOiBzZXRBY3RpdmUub2YobGFzdCA/IG51bGwgOiBuZXcgQWN0aXZlU25pcHBldChhY3RpdmUucmFuZ2VzLCBuZXh0KSksXG4gICAgICAgICAgICBzY3JvbGxJbnRvVmlldzogdHJ1ZVxuICAgICAgICB9KSk7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH07XG59XG4vKipcbkEgY29tbWFuZCB0aGF0IGNsZWFycyB0aGUgYWN0aXZlIHNuaXBwZXQsIGlmIGFueS5cbiovXG5jb25zdCBjbGVhclNuaXBwZXQgPSAoeyBzdGF0ZSwgZGlzcGF0Y2ggfSkgPT4ge1xuICAgIGxldCBhY3RpdmUgPSBzdGF0ZS5maWVsZChzbmlwcGV0U3RhdGUsIGZhbHNlKTtcbiAgICBpZiAoIWFjdGl2ZSlcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIGRpc3BhdGNoKHN0YXRlLnVwZGF0ZSh7IGVmZmVjdHM6IHNldEFjdGl2ZS5vZihudWxsKSB9KSk7XG4gICAgcmV0dXJuIHRydWU7XG59O1xuLyoqXG5Nb3ZlIHRvIHRoZSBuZXh0IHNuaXBwZXQgZmllbGQsIGlmIGF2YWlsYWJsZS5cbiovXG5jb25zdCBuZXh0U25pcHBldEZpZWxkID0gLypAX19QVVJFX18qL21vdmVGaWVsZCgxKTtcbi8qKlxuTW92ZSB0byB0aGUgcHJldmlvdXMgc25pcHBldCBmaWVsZCwgaWYgYXZhaWxhYmxlLlxuKi9cbmNvbnN0IHByZXZTbmlwcGV0RmllbGQgPSAvKkBfX1BVUkVfXyovbW92ZUZpZWxkKC0xKTtcbi8qKlxuQ2hlY2sgaWYgdGhlcmUgaXMgYW4gYWN0aXZlIHNuaXBwZXQgd2l0aCBhIG5leHQgZmllbGQgZm9yXG5gbmV4dFNuaXBwZXRGaWVsZGAgdG8gbW92ZSB0by5cbiovXG5mdW5jdGlvbiBoYXNOZXh0U25pcHBldEZpZWxkKHN0YXRlKSB7XG4gICAgbGV0IGFjdGl2ZSA9IHN0YXRlLmZpZWxkKHNuaXBwZXRTdGF0ZSwgZmFsc2UpO1xuICAgIHJldHVybiAhIShhY3RpdmUgJiYgYWN0aXZlLnJhbmdlcy5zb21lKHIgPT4gci5maWVsZCA9PSBhY3RpdmUuYWN0aXZlICsgMSkpO1xufVxuLyoqXG5SZXR1cm5zIHRydWUgaWYgdGhlcmUgaXMgYW4gYWN0aXZlIHNuaXBwZXQgYW5kIGEgcHJldmlvdXMgZmllbGRcbmZvciBgcHJldlNuaXBwZXRGaWVsZGAgdG8gbW92ZSB0by5cbiovXG5mdW5jdGlvbiBoYXNQcmV2U25pcHBldEZpZWxkKHN0YXRlKSB7XG4gICAgbGV0IGFjdGl2ZSA9IHN0YXRlLmZpZWxkKHNuaXBwZXRTdGF0ZSwgZmFsc2UpO1xuICAgIHJldHVybiAhIShhY3RpdmUgJiYgYWN0aXZlLmFjdGl2ZSA+IDApO1xufVxuY29uc3QgZGVmYXVsdFNuaXBwZXRLZXltYXAgPSBbXG4gICAgeyBrZXk6IFwiVGFiXCIsIHJ1bjogbmV4dFNuaXBwZXRGaWVsZCwgc2hpZnQ6IHByZXZTbmlwcGV0RmllbGQgfSxcbiAgICB7IGtleTogXCJFc2NhcGVcIiwgcnVuOiBjbGVhclNuaXBwZXQgfVxuXTtcbi8qKlxuQSBmYWNldCB0aGF0IGNhbiBiZSB1c2VkIHRvIGNvbmZpZ3VyZSB0aGUga2V5IGJpbmRpbmdzIHVzZWQgYnlcbnNuaXBwZXRzLiBUaGUgZGVmYXVsdCBiaW5kcyBUYWIgdG9cbltgbmV4dFNuaXBwZXRGaWVsZGBdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jYXV0b2NvbXBsZXRlLm5leHRTbmlwcGV0RmllbGQpLCBTaGlmdC1UYWIgdG9cbltgcHJldlNuaXBwZXRGaWVsZGBdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jYXV0b2NvbXBsZXRlLnByZXZTbmlwcGV0RmllbGQpLCBhbmQgRXNjYXBlXG50byBbYGNsZWFyU25pcHBldGBdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jYXV0b2NvbXBsZXRlLmNsZWFyU25pcHBldCkuXG4qL1xuY29uc3Qgc25pcHBldEtleW1hcCA9IC8qQF9fUFVSRV9fKi9GYWNldC5kZWZpbmUoe1xuICAgIGNvbWJpbmUobWFwcykgeyByZXR1cm4gbWFwcy5sZW5ndGggPyBtYXBzWzBdIDogZGVmYXVsdFNuaXBwZXRLZXltYXA7IH1cbn0pO1xuY29uc3QgYWRkU25pcHBldEtleW1hcCA9IC8qQF9fUFVSRV9fKi9QcmVjLmhpZ2hlc3QoLypAX19QVVJFX18qL2tleW1hcC5jb21wdXRlKFtzbmlwcGV0S2V5bWFwXSwgc3RhdGUgPT4gc3RhdGUuZmFjZXQoc25pcHBldEtleW1hcCkpKTtcbi8qKlxuQ3JlYXRlIGEgY29tcGxldGlvbiBmcm9tIGEgc25pcHBldC4gUmV0dXJucyBhbiBvYmplY3Qgd2l0aCB0aGVcbnByb3BlcnRpZXMgZnJvbSBgY29tcGxldGlvbmAsIHBsdXMgYW4gYGFwcGx5YCBmdW5jdGlvbiB0aGF0XG5hcHBsaWVzIHRoZSBzbmlwcGV0LlxuKi9cbmZ1bmN0aW9uIHNuaXBwZXRDb21wbGV0aW9uKHRlbXBsYXRlLCBjb21wbGV0aW9uKSB7XG4gICAgcmV0dXJuIHsgLi4uY29tcGxldGlvbiwgYXBwbHk6IHNuaXBwZXQodGVtcGxhdGUpIH07XG59XG5jb25zdCBzbmlwcGV0UG9pbnRlckhhbmRsZXIgPSAvKkBfX1BVUkVfXyovRWRpdG9yVmlldy5kb21FdmVudEhhbmRsZXJzKHtcbiAgICBtb3VzZWRvd24oZXZlbnQsIHZpZXcpIHtcbiAgICAgICAgbGV0IGFjdGl2ZSA9IHZpZXcuc3RhdGUuZmllbGQoc25pcHBldFN0YXRlLCBmYWxzZSksIHBvcztcbiAgICAgICAgaWYgKCFhY3RpdmUgfHwgKHBvcyA9IHZpZXcucG9zQXRDb29yZHMoeyB4OiBldmVudC5jbGllbnRYLCB5OiBldmVudC5jbGllbnRZIH0pKSA9PSBudWxsKVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICBsZXQgbWF0Y2ggPSBhY3RpdmUucmFuZ2VzLmZpbmQociA9PiByLmZyb20gPD0gcG9zICYmIHIudG8gPj0gcG9zKTtcbiAgICAgICAgaWYgKCFtYXRjaCB8fCBtYXRjaC5maWVsZCA9PSBhY3RpdmUuYWN0aXZlKVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB2aWV3LmRpc3BhdGNoKHtcbiAgICAgICAgICAgIHNlbGVjdGlvbjogZmllbGRTZWxlY3Rpb24oYWN0aXZlLnJhbmdlcywgbWF0Y2guZmllbGQpLFxuICAgICAgICAgICAgZWZmZWN0czogc2V0QWN0aXZlLm9mKGFjdGl2ZS5yYW5nZXMuc29tZShyID0+IHIuZmllbGQgPiBtYXRjaC5maWVsZClcbiAgICAgICAgICAgICAgICA/IG5ldyBBY3RpdmVTbmlwcGV0KGFjdGl2ZS5yYW5nZXMsIG1hdGNoLmZpZWxkKSA6IG51bGwpLFxuICAgICAgICAgICAgc2Nyb2xsSW50b1ZpZXc6IHRydWVcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbn0pO1xuXG5mdW5jdGlvbiB3b3JkUkUod29yZENoYXJzKSB7XG4gICAgbGV0IGVzY2FwZWQgPSB3b3JkQ2hhcnMucmVwbGFjZSgvW1xcXVxcLVxcXFxdL2csIFwiXFxcXCQmXCIpO1xuICAgIHRyeSB7XG4gICAgICAgIHJldHVybiBuZXcgUmVnRXhwKGBbXFxcXHB7QWxwaGFiZXRpY31cXFxccHtOdW1iZXJ9XyR7ZXNjYXBlZH1dK2AsIFwidWdcIik7XG4gICAgfVxuICAgIGNhdGNoIChfYSkge1xuICAgICAgICByZXR1cm4gbmV3IFJlZ0V4cChgW1xcdyR7ZXNjYXBlZH1dYCwgXCJnXCIpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIG1hcFJFKHJlLCBmKSB7XG4gICAgcmV0dXJuIG5ldyBSZWdFeHAoZihyZS5zb3VyY2UpLCByZS51bmljb2RlID8gXCJ1XCIgOiBcIlwiKTtcbn1cbmNvbnN0IHdvcmRDYWNoZXMgPSAvKkBfX1BVUkVfXyovT2JqZWN0LmNyZWF0ZShudWxsKTtcbmZ1bmN0aW9uIHdvcmRDYWNoZSh3b3JkQ2hhcnMpIHtcbiAgICByZXR1cm4gd29yZENhY2hlc1t3b3JkQ2hhcnNdIHx8ICh3b3JkQ2FjaGVzW3dvcmRDaGFyc10gPSBuZXcgV2Vha01hcCk7XG59XG5mdW5jdGlvbiBzdG9yZVdvcmRzKGRvYywgd29yZFJFLCByZXN1bHQsIHNlZW4sIGlnbm9yZUF0KSB7XG4gICAgZm9yIChsZXQgbGluZXMgPSBkb2MuaXRlckxpbmVzKCksIHBvcyA9IDA7ICFsaW5lcy5uZXh0KCkuZG9uZTspIHtcbiAgICAgICAgbGV0IHsgdmFsdWUgfSA9IGxpbmVzLCBtO1xuICAgICAgICB3b3JkUkUubGFzdEluZGV4ID0gMDtcbiAgICAgICAgd2hpbGUgKG0gPSB3b3JkUkUuZXhlYyh2YWx1ZSkpIHtcbiAgICAgICAgICAgIGlmICghc2VlblttWzBdXSAmJiBwb3MgKyBtLmluZGV4ICE9IGlnbm9yZUF0KSB7XG4gICAgICAgICAgICAgICAgcmVzdWx0LnB1c2goeyB0eXBlOiBcInRleHRcIiwgbGFiZWw6IG1bMF0gfSk7XG4gICAgICAgICAgICAgICAgc2VlblttWzBdXSA9IHRydWU7XG4gICAgICAgICAgICAgICAgaWYgKHJlc3VsdC5sZW5ndGggPj0gMjAwMCAvKiBDLk1heExpc3QgKi8pXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBwb3MgKz0gdmFsdWUubGVuZ3RoICsgMTtcbiAgICB9XG59XG5mdW5jdGlvbiBjb2xsZWN0V29yZHMoZG9jLCBjYWNoZSwgd29yZFJFLCB0bywgaWdub3JlQXQpIHtcbiAgICBsZXQgYmlnID0gZG9jLmxlbmd0aCA+PSAxMDAwIC8qIEMuTWluQ2FjaGVMZW4gKi87XG4gICAgbGV0IGNhY2hlZCA9IGJpZyAmJiBjYWNoZS5nZXQoZG9jKTtcbiAgICBpZiAoY2FjaGVkKVxuICAgICAgICByZXR1cm4gY2FjaGVkO1xuICAgIGxldCByZXN1bHQgPSBbXSwgc2VlbiA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gICAgaWYgKGRvYy5jaGlsZHJlbikge1xuICAgICAgICBsZXQgcG9zID0gMDtcbiAgICAgICAgZm9yIChsZXQgY2ggb2YgZG9jLmNoaWxkcmVuKSB7XG4gICAgICAgICAgICBpZiAoY2gubGVuZ3RoID49IDEwMDAgLyogQy5NaW5DYWNoZUxlbiAqLykge1xuICAgICAgICAgICAgICAgIGZvciAobGV0IGMgb2YgY29sbGVjdFdvcmRzKGNoLCBjYWNoZSwgd29yZFJFLCB0byAtIHBvcywgaWdub3JlQXQgLSBwb3MpKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghc2VlbltjLmxhYmVsXSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2VlbltjLmxhYmVsXSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQucHVzaChjKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHN0b3JlV29yZHMoY2gsIHdvcmRSRSwgcmVzdWx0LCBzZWVuLCBpZ25vcmVBdCAtIHBvcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBwb3MgKz0gY2gubGVuZ3RoICsgMTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgc3RvcmVXb3Jkcyhkb2MsIHdvcmRSRSwgcmVzdWx0LCBzZWVuLCBpZ25vcmVBdCk7XG4gICAgfVxuICAgIGlmIChiaWcgJiYgcmVzdWx0Lmxlbmd0aCA8IDIwMDAgLyogQy5NYXhMaXN0ICovKVxuICAgICAgICBjYWNoZS5zZXQoZG9jLCByZXN1bHQpO1xuICAgIHJldHVybiByZXN1bHQ7XG59XG4vKipcbkEgY29tcGxldGlvbiBzb3VyY2UgdGhhdCB3aWxsIHNjYW4gdGhlIGRvY3VtZW50IGZvciB3b3JkcyAodXNpbmcgYVxuW2NoYXJhY3RlciBjYXRlZ29yaXplcl0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNzdGF0ZS5FZGl0b3JTdGF0ZS5jaGFyQ2F0ZWdvcml6ZXIpKSwgYW5kXG5yZXR1cm4gdGhvc2UgYXMgY29tcGxldGlvbnMuXG4qL1xuY29uc3QgY29tcGxldGVBbnlXb3JkID0gY29udGV4dCA9PiB7XG4gICAgbGV0IHdvcmRDaGFycyA9IGNvbnRleHQuc3RhdGUubGFuZ3VhZ2VEYXRhQXQoXCJ3b3JkQ2hhcnNcIiwgY29udGV4dC5wb3MpLmpvaW4oXCJcIik7XG4gICAgbGV0IHJlID0gd29yZFJFKHdvcmRDaGFycyk7XG4gICAgbGV0IHRva2VuID0gY29udGV4dC5tYXRjaEJlZm9yZShtYXBSRShyZSwgcyA9PiBzICsgXCIkXCIpKTtcbiAgICBpZiAoIXRva2VuICYmICFjb250ZXh0LmV4cGxpY2l0KVxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICBsZXQgZnJvbSA9IHRva2VuID8gdG9rZW4uZnJvbSA6IGNvbnRleHQucG9zO1xuICAgIGxldCBvcHRpb25zID0gY29sbGVjdFdvcmRzKGNvbnRleHQuc3RhdGUuZG9jLCB3b3JkQ2FjaGUod29yZENoYXJzKSwgcmUsIDUwMDAwIC8qIEMuUmFuZ2UgKi8sIGZyb20pO1xuICAgIHJldHVybiB7IGZyb20sIG9wdGlvbnMsIHZhbGlkRm9yOiBtYXBSRShyZSwgcyA9PiBcIl5cIiArIHMpIH07XG59O1xuXG5jb25zdCBkZWZhdWx0cyA9IHtcbiAgICBicmFja2V0czogW1wiKFwiLCBcIltcIiwgXCJ7XCIsIFwiJ1wiLCAnXCInXSxcbiAgICBiZWZvcmU6IFwiKV19Ojs+XCIsXG4gICAgc3RyaW5nUHJlZml4ZXM6IFtdXG59O1xuY29uc3QgY2xvc2VCcmFja2V0RWZmZWN0ID0gLypAX19QVVJFX18qL1N0YXRlRWZmZWN0LmRlZmluZSh7XG4gICAgbWFwKHZhbHVlLCBtYXBwaW5nKSB7XG4gICAgICAgIGxldCBtYXBwZWQgPSBtYXBwaW5nLm1hcFBvcyh2YWx1ZSwgLTEsIE1hcE1vZGUuVHJhY2tBZnRlcik7XG4gICAgICAgIHJldHVybiBtYXBwZWQgPT0gbnVsbCA/IHVuZGVmaW5lZCA6IG1hcHBlZDtcbiAgICB9XG59KTtcbmNvbnN0IGNsb3NlZEJyYWNrZXQgPSAvKkBfX1BVUkVfXyovbmV3IGNsYXNzIGV4dGVuZHMgUmFuZ2VWYWx1ZSB7XG59O1xuY2xvc2VkQnJhY2tldC5zdGFydFNpZGUgPSAxO1xuY2xvc2VkQnJhY2tldC5lbmRTaWRlID0gLTE7XG5jb25zdCBicmFja2V0U3RhdGUgPSAvKkBfX1BVUkVfXyovU3RhdGVGaWVsZC5kZWZpbmUoe1xuICAgIGNyZWF0ZSgpIHsgcmV0dXJuIFJhbmdlU2V0LmVtcHR5OyB9LFxuICAgIHVwZGF0ZSh2YWx1ZSwgdHIpIHtcbiAgICAgICAgdmFsdWUgPSB2YWx1ZS5tYXAodHIuY2hhbmdlcyk7XG4gICAgICAgIGlmICh0ci5zZWxlY3Rpb24pIHtcbiAgICAgICAgICAgIGxldCBsaW5lID0gdHIuc3RhdGUuZG9jLmxpbmVBdCh0ci5zZWxlY3Rpb24ubWFpbi5oZWFkKTtcbiAgICAgICAgICAgIHZhbHVlID0gdmFsdWUudXBkYXRlKHsgZmlsdGVyOiBmcm9tID0+IGZyb20gPj0gbGluZS5mcm9tICYmIGZyb20gPD0gbGluZS50byB9KTtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKGxldCBlZmZlY3Qgb2YgdHIuZWZmZWN0cylcbiAgICAgICAgICAgIGlmIChlZmZlY3QuaXMoY2xvc2VCcmFja2V0RWZmZWN0KSlcbiAgICAgICAgICAgICAgICB2YWx1ZSA9IHZhbHVlLnVwZGF0ZSh7IGFkZDogW2Nsb3NlZEJyYWNrZXQucmFuZ2UoZWZmZWN0LnZhbHVlLCBlZmZlY3QudmFsdWUgKyAxKV0gfSk7XG4gICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9XG59KTtcbi8qKlxuRXh0ZW5zaW9uIHRvIGVuYWJsZSBicmFja2V0LWNsb3NpbmcgYmVoYXZpb3IuIFdoZW4gYSBjbG9zZWFibGVcbmJyYWNrZXQgaXMgdHlwZWQsIGl0cyBjbG9zaW5nIGJyYWNrZXQgaXMgaW1tZWRpYXRlbHkgaW5zZXJ0ZWRcbmFmdGVyIHRoZSBjdXJzb3IuIFdoZW4gY2xvc2luZyBhIGJyYWNrZXQgZGlyZWN0bHkgaW4gZnJvbnQgb2YgYVxuY2xvc2luZyBicmFja2V0IGluc2VydGVkIGJ5IHRoZSBleHRlbnNpb24sIHRoZSBjdXJzb3IgbW92ZXMgb3ZlclxudGhhdCBicmFja2V0LlxuKi9cbmZ1bmN0aW9uIGNsb3NlQnJhY2tldHMoKSB7XG4gICAgcmV0dXJuIFtpbnB1dEhhbmRsZXIsIGJyYWNrZXRTdGF0ZV07XG59XG5jb25zdCBkZWZpbmVkQ2xvc2luZyA9IFwiKClbXXt9PD7Cq8K7wrvCq++8u++8ve+9m++9nVwiO1xuZnVuY3Rpb24gY2xvc2luZyhjaCkge1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZGVmaW5lZENsb3NpbmcubGVuZ3RoOyBpICs9IDIpXG4gICAgICAgIGlmIChkZWZpbmVkQ2xvc2luZy5jaGFyQ29kZUF0KGkpID09IGNoKVxuICAgICAgICAgICAgcmV0dXJuIGRlZmluZWRDbG9zaW5nLmNoYXJBdChpICsgMSk7XG4gICAgcmV0dXJuIGZyb21Db2RlUG9pbnQoY2ggPCAxMjggPyBjaCA6IGNoICsgMSk7XG59XG5mdW5jdGlvbiBjb25maWcoc3RhdGUsIHBvcykge1xuICAgIHJldHVybiBzdGF0ZS5sYW5ndWFnZURhdGFBdChcImNsb3NlQnJhY2tldHNcIiwgcG9zKVswXSB8fCBkZWZhdWx0cztcbn1cbmNvbnN0IGFuZHJvaWQgPSB0eXBlb2YgbmF2aWdhdG9yID09IFwib2JqZWN0XCIgJiYgLypAX19QVVJFX18qLy9BbmRyb2lkXFxiLy50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpO1xuY29uc3QgaW5wdXRIYW5kbGVyID0gLypAX19QVVJFX18qL0VkaXRvclZpZXcuaW5wdXRIYW5kbGVyLm9mKCh2aWV3LCBmcm9tLCB0bywgaW5zZXJ0KSA9PiB7XG4gICAgaWYgKChhbmRyb2lkID8gdmlldy5jb21wb3NpbmcgOiB2aWV3LmNvbXBvc2l0aW9uU3RhcnRlZCkgfHwgdmlldy5zdGF0ZS5yZWFkT25seSlcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIGxldCBzZWwgPSB2aWV3LnN0YXRlLnNlbGVjdGlvbi5tYWluO1xuICAgIGlmIChpbnNlcnQubGVuZ3RoID4gMiB8fCBpbnNlcnQubGVuZ3RoID09IDIgJiYgY29kZVBvaW50U2l6ZShjb2RlUG9pbnRBdChpbnNlcnQsIDApKSA9PSAxIHx8XG4gICAgICAgIGZyb20gIT0gc2VsLmZyb20gfHwgdG8gIT0gc2VsLnRvKVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgbGV0IHRyID0gaW5zZXJ0QnJhY2tldCh2aWV3LnN0YXRlLCBpbnNlcnQpO1xuICAgIGlmICghdHIpXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB2aWV3LmRpc3BhdGNoKHRyKTtcbiAgICByZXR1cm4gdHJ1ZTtcbn0pO1xuLyoqXG5Db21tYW5kIHRoYXQgaW1wbGVtZW50cyBkZWxldGluZyBhIHBhaXIgb2YgbWF0Y2hpbmcgYnJhY2tldHMgd2hlblxudGhlIGN1cnNvciBpcyBiZXR3ZWVuIHRoZW0uXG4qL1xuY29uc3QgZGVsZXRlQnJhY2tldFBhaXIgPSAoeyBzdGF0ZSwgZGlzcGF0Y2ggfSkgPT4ge1xuICAgIGlmIChzdGF0ZS5yZWFkT25seSlcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIGxldCBjb25mID0gY29uZmlnKHN0YXRlLCBzdGF0ZS5zZWxlY3Rpb24ubWFpbi5oZWFkKTtcbiAgICBsZXQgdG9rZW5zID0gY29uZi5icmFja2V0cyB8fCBkZWZhdWx0cy5icmFja2V0cztcbiAgICBsZXQgZG9udCA9IG51bGwsIGNoYW5nZXMgPSBzdGF0ZS5jaGFuZ2VCeVJhbmdlKHJhbmdlID0+IHtcbiAgICAgICAgaWYgKHJhbmdlLmVtcHR5KSB7XG4gICAgICAgICAgICBsZXQgYmVmb3JlID0gcHJldkNoYXIoc3RhdGUuZG9jLCByYW5nZS5oZWFkKTtcbiAgICAgICAgICAgIGZvciAobGV0IHRva2VuIG9mIHRva2Vucykge1xuICAgICAgICAgICAgICAgIGlmICh0b2tlbiA9PSBiZWZvcmUgJiYgbmV4dENoYXIoc3RhdGUuZG9jLCByYW5nZS5oZWFkKSA9PSBjbG9zaW5nKGNvZGVQb2ludEF0KHRva2VuLCAwKSkpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB7IGNoYW5nZXM6IHsgZnJvbTogcmFuZ2UuaGVhZCAtIHRva2VuLmxlbmd0aCwgdG86IHJhbmdlLmhlYWQgKyB0b2tlbi5sZW5ndGggfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHJhbmdlOiBFZGl0b3JTZWxlY3Rpb24uY3Vyc29yKHJhbmdlLmhlYWQgLSB0b2tlbi5sZW5ndGgpIH07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHsgcmFuZ2U6IGRvbnQgPSByYW5nZSB9O1xuICAgIH0pO1xuICAgIGlmICghZG9udClcbiAgICAgICAgZGlzcGF0Y2goc3RhdGUudXBkYXRlKGNoYW5nZXMsIHsgc2Nyb2xsSW50b1ZpZXc6IHRydWUsIHVzZXJFdmVudDogXCJkZWxldGUuYmFja3dhcmRcIiB9KSk7XG4gICAgcmV0dXJuICFkb250O1xufTtcbi8qKlxuQ2xvc2UtYnJhY2tldHMgcmVsYXRlZCBrZXkgYmluZGluZ3MuIEJpbmRzIEJhY2tzcGFjZSB0b1xuW2BkZWxldGVCcmFja2V0UGFpcmBdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jYXV0b2NvbXBsZXRlLmRlbGV0ZUJyYWNrZXRQYWlyKS5cbiovXG5jb25zdCBjbG9zZUJyYWNrZXRzS2V5bWFwID0gW1xuICAgIHsga2V5OiBcIkJhY2tzcGFjZVwiLCBydW46IGRlbGV0ZUJyYWNrZXRQYWlyIH1cbl07XG4vKipcbkltcGxlbWVudHMgdGhlIGV4dGVuc2lvbidzIGJlaGF2aW9yIG9uIHRleHQgaW5zZXJ0aW9uLiBJZiB0aGVcbmdpdmVuIHN0cmluZyBjb3VudHMgYXMgYSBicmFja2V0IGluIHRoZSBsYW5ndWFnZSBhcm91bmQgdGhlXG5zZWxlY3Rpb24sIGFuZCByZXBsYWNpbmcgdGhlIHNlbGVjdGlvbiB3aXRoIGl0IHJlcXVpcmVzIGN1c3RvbVxuYmVoYXZpb3IgKGluc2VydGluZyBhIGNsb3NpbmcgdmVyc2lvbiBvciBza2lwcGluZyBwYXN0IGFcbnByZXZpb3VzbHktY2xvc2VkIGJyYWNrZXQpLCB0aGlzIGZ1bmN0aW9uIHJldHVybnMgYSB0cmFuc2FjdGlvblxucmVwcmVzZW50aW5nIHRoYXQgY3VzdG9tIGJlaGF2aW9yLiAoWW91IG9ubHkgbmVlZCB0aGlzIGlmIHlvdSB3YW50XG50byBwcm9ncmFtbWF0aWNhbGx5IGluc2VydCBicmFja2V0c+KAlHRoZVxuW2BjbG9zZUJyYWNrZXRzYF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNhdXRvY29tcGxldGUuY2xvc2VCcmFja2V0cykgZXh0ZW5zaW9uIHdpbGxcbnRha2UgY2FyZSBvZiBydW5uaW5nIHRoaXMgZm9yIHVzZXIgaW5wdXQuKVxuKi9cbmZ1bmN0aW9uIGluc2VydEJyYWNrZXQoc3RhdGUsIGJyYWNrZXQpIHtcbiAgICBsZXQgY29uZiA9IGNvbmZpZyhzdGF0ZSwgc3RhdGUuc2VsZWN0aW9uLm1haW4uaGVhZCk7XG4gICAgbGV0IHRva2VucyA9IGNvbmYuYnJhY2tldHMgfHwgZGVmYXVsdHMuYnJhY2tldHM7XG4gICAgZm9yIChsZXQgdG9rIG9mIHRva2Vucykge1xuICAgICAgICBsZXQgY2xvc2VkID0gY2xvc2luZyhjb2RlUG9pbnRBdCh0b2ssIDApKTtcbiAgICAgICAgaWYgKGJyYWNrZXQgPT0gdG9rKVxuICAgICAgICAgICAgcmV0dXJuIGNsb3NlZCA9PSB0b2sgPyBoYW5kbGVTYW1lKHN0YXRlLCB0b2ssIHRva2Vucy5pbmRleE9mKHRvayArIHRvayArIHRvaykgPiAtMSwgY29uZilcbiAgICAgICAgICAgICAgICA6IGhhbmRsZU9wZW4oc3RhdGUsIHRvaywgY2xvc2VkLCBjb25mLmJlZm9yZSB8fCBkZWZhdWx0cy5iZWZvcmUpO1xuICAgICAgICBpZiAoYnJhY2tldCA9PSBjbG9zZWQgJiYgY2xvc2VkQnJhY2tldEF0KHN0YXRlLCBzdGF0ZS5zZWxlY3Rpb24ubWFpbi5mcm9tKSlcbiAgICAgICAgICAgIHJldHVybiBoYW5kbGVDbG9zZShzdGF0ZSwgdG9rLCBjbG9zZWQpO1xuICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbn1cbmZ1bmN0aW9uIGNsb3NlZEJyYWNrZXRBdChzdGF0ZSwgcG9zKSB7XG4gICAgbGV0IGZvdW5kID0gZmFsc2U7XG4gICAgc3RhdGUuZmllbGQoYnJhY2tldFN0YXRlKS5iZXR3ZWVuKDAsIHN0YXRlLmRvYy5sZW5ndGgsIGZyb20gPT4ge1xuICAgICAgICBpZiAoZnJvbSA9PSBwb3MpXG4gICAgICAgICAgICBmb3VuZCA9IHRydWU7XG4gICAgfSk7XG4gICAgcmV0dXJuIGZvdW5kO1xufVxuZnVuY3Rpb24gbmV4dENoYXIoZG9jLCBwb3MpIHtcbiAgICBsZXQgbmV4dCA9IGRvYy5zbGljZVN0cmluZyhwb3MsIHBvcyArIDIpO1xuICAgIHJldHVybiBuZXh0LnNsaWNlKDAsIGNvZGVQb2ludFNpemUoY29kZVBvaW50QXQobmV4dCwgMCkpKTtcbn1cbmZ1bmN0aW9uIHByZXZDaGFyKGRvYywgcG9zKSB7XG4gICAgbGV0IHByZXYgPSBkb2Muc2xpY2VTdHJpbmcocG9zIC0gMiwgcG9zKTtcbiAgICByZXR1cm4gY29kZVBvaW50U2l6ZShjb2RlUG9pbnRBdChwcmV2LCAwKSkgPT0gcHJldi5sZW5ndGggPyBwcmV2IDogcHJldi5zbGljZSgxKTtcbn1cbmZ1bmN0aW9uIGhhbmRsZU9wZW4oc3RhdGUsIG9wZW4sIGNsb3NlLCBjbG9zZUJlZm9yZSkge1xuICAgIGxldCBkb250ID0gbnVsbCwgY2hhbmdlcyA9IHN0YXRlLmNoYW5nZUJ5UmFuZ2UocmFuZ2UgPT4ge1xuICAgICAgICBpZiAoIXJhbmdlLmVtcHR5KVxuICAgICAgICAgICAgcmV0dXJuIHsgY2hhbmdlczogW3sgaW5zZXJ0OiBvcGVuLCBmcm9tOiByYW5nZS5mcm9tIH0sIHsgaW5zZXJ0OiBjbG9zZSwgZnJvbTogcmFuZ2UudG8gfV0sXG4gICAgICAgICAgICAgICAgZWZmZWN0czogY2xvc2VCcmFja2V0RWZmZWN0Lm9mKHJhbmdlLnRvICsgb3Blbi5sZW5ndGgpLFxuICAgICAgICAgICAgICAgIHJhbmdlOiBFZGl0b3JTZWxlY3Rpb24ucmFuZ2UocmFuZ2UuYW5jaG9yICsgb3Blbi5sZW5ndGgsIHJhbmdlLmhlYWQgKyBvcGVuLmxlbmd0aCkgfTtcbiAgICAgICAgbGV0IG5leHQgPSBuZXh0Q2hhcihzdGF0ZS5kb2MsIHJhbmdlLmhlYWQpO1xuICAgICAgICBpZiAoIW5leHQgfHwgL1xccy8udGVzdChuZXh0KSB8fCBjbG9zZUJlZm9yZS5pbmRleE9mKG5leHQpID4gLTEpXG4gICAgICAgICAgICByZXR1cm4geyBjaGFuZ2VzOiB7IGluc2VydDogb3BlbiArIGNsb3NlLCBmcm9tOiByYW5nZS5oZWFkIH0sXG4gICAgICAgICAgICAgICAgZWZmZWN0czogY2xvc2VCcmFja2V0RWZmZWN0Lm9mKHJhbmdlLmhlYWQgKyBvcGVuLmxlbmd0aCksXG4gICAgICAgICAgICAgICAgcmFuZ2U6IEVkaXRvclNlbGVjdGlvbi5jdXJzb3IocmFuZ2UuaGVhZCArIG9wZW4ubGVuZ3RoKSB9O1xuICAgICAgICByZXR1cm4geyByYW5nZTogZG9udCA9IHJhbmdlIH07XG4gICAgfSk7XG4gICAgcmV0dXJuIGRvbnQgPyBudWxsIDogc3RhdGUudXBkYXRlKGNoYW5nZXMsIHtcbiAgICAgICAgc2Nyb2xsSW50b1ZpZXc6IHRydWUsXG4gICAgICAgIHVzZXJFdmVudDogXCJpbnB1dC50eXBlXCJcbiAgICB9KTtcbn1cbmZ1bmN0aW9uIGhhbmRsZUNsb3NlKHN0YXRlLCBfb3BlbiwgY2xvc2UpIHtcbiAgICBsZXQgZG9udCA9IG51bGwsIGNoYW5nZXMgPSBzdGF0ZS5jaGFuZ2VCeVJhbmdlKHJhbmdlID0+IHtcbiAgICAgICAgaWYgKHJhbmdlLmVtcHR5ICYmIG5leHRDaGFyKHN0YXRlLmRvYywgcmFuZ2UuaGVhZCkgPT0gY2xvc2UpXG4gICAgICAgICAgICByZXR1cm4geyBjaGFuZ2VzOiB7IGZyb206IHJhbmdlLmhlYWQsIHRvOiByYW5nZS5oZWFkICsgY2xvc2UubGVuZ3RoLCBpbnNlcnQ6IGNsb3NlIH0sXG4gICAgICAgICAgICAgICAgcmFuZ2U6IEVkaXRvclNlbGVjdGlvbi5jdXJzb3IocmFuZ2UuaGVhZCArIGNsb3NlLmxlbmd0aCkgfTtcbiAgICAgICAgcmV0dXJuIGRvbnQgPSB7IHJhbmdlIH07XG4gICAgfSk7XG4gICAgcmV0dXJuIGRvbnQgPyBudWxsIDogc3RhdGUudXBkYXRlKGNoYW5nZXMsIHtcbiAgICAgICAgc2Nyb2xsSW50b1ZpZXc6IHRydWUsXG4gICAgICAgIHVzZXJFdmVudDogXCJpbnB1dC50eXBlXCJcbiAgICB9KTtcbn1cbi8vIEhhbmRsZXMgY2FzZXMgd2hlcmUgdGhlIG9wZW4gYW5kIGNsb3NlIHRva2VuIGFyZSB0aGUgc2FtZSwgYW5kXG4vLyBwb3NzaWJseSB0cmlwbGUgcXVvdGVzIChhcyBpbiBgXCJcIlwiYWJjXCJcIlwiYC1zdHlsZSBxdW90aW5nKS5cbmZ1bmN0aW9uIGhhbmRsZVNhbWUoc3RhdGUsIHRva2VuLCBhbGxvd1RyaXBsZSwgY29uZmlnKSB7XG4gICAgbGV0IHN0cmluZ1ByZWZpeGVzID0gY29uZmlnLnN0cmluZ1ByZWZpeGVzIHx8IGRlZmF1bHRzLnN0cmluZ1ByZWZpeGVzO1xuICAgIGxldCBkb250ID0gbnVsbCwgY2hhbmdlcyA9IHN0YXRlLmNoYW5nZUJ5UmFuZ2UocmFuZ2UgPT4ge1xuICAgICAgICBpZiAoIXJhbmdlLmVtcHR5KVxuICAgICAgICAgICAgcmV0dXJuIHsgY2hhbmdlczogW3sgaW5zZXJ0OiB0b2tlbiwgZnJvbTogcmFuZ2UuZnJvbSB9LCB7IGluc2VydDogdG9rZW4sIGZyb206IHJhbmdlLnRvIH1dLFxuICAgICAgICAgICAgICAgIGVmZmVjdHM6IGNsb3NlQnJhY2tldEVmZmVjdC5vZihyYW5nZS50byArIHRva2VuLmxlbmd0aCksXG4gICAgICAgICAgICAgICAgcmFuZ2U6IEVkaXRvclNlbGVjdGlvbi5yYW5nZShyYW5nZS5hbmNob3IgKyB0b2tlbi5sZW5ndGgsIHJhbmdlLmhlYWQgKyB0b2tlbi5sZW5ndGgpIH07XG4gICAgICAgIGxldCBwb3MgPSByYW5nZS5oZWFkLCBuZXh0ID0gbmV4dENoYXIoc3RhdGUuZG9jLCBwb3MpLCBzdGFydDtcbiAgICAgICAgaWYgKG5leHQgPT0gdG9rZW4pIHtcbiAgICAgICAgICAgIGlmIChub2RlU3RhcnQoc3RhdGUsIHBvcykpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4geyBjaGFuZ2VzOiB7IGluc2VydDogdG9rZW4gKyB0b2tlbiwgZnJvbTogcG9zIH0sXG4gICAgICAgICAgICAgICAgICAgIGVmZmVjdHM6IGNsb3NlQnJhY2tldEVmZmVjdC5vZihwb3MgKyB0b2tlbi5sZW5ndGgpLFxuICAgICAgICAgICAgICAgICAgICByYW5nZTogRWRpdG9yU2VsZWN0aW9uLmN1cnNvcihwb3MgKyB0b2tlbi5sZW5ndGgpIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjbG9zZWRCcmFja2V0QXQoc3RhdGUsIHBvcykpIHtcbiAgICAgICAgICAgICAgICBsZXQgaXNUcmlwbGUgPSBhbGxvd1RyaXBsZSAmJiBzdGF0ZS5zbGljZURvYyhwb3MsIHBvcyArIHRva2VuLmxlbmd0aCAqIDMpID09IHRva2VuICsgdG9rZW4gKyB0b2tlbjtcbiAgICAgICAgICAgICAgICBsZXQgY29udGVudCA9IGlzVHJpcGxlID8gdG9rZW4gKyB0b2tlbiArIHRva2VuIDogdG9rZW47XG4gICAgICAgICAgICAgICAgcmV0dXJuIHsgY2hhbmdlczogeyBmcm9tOiBwb3MsIHRvOiBwb3MgKyBjb250ZW50Lmxlbmd0aCwgaW5zZXJ0OiBjb250ZW50IH0sXG4gICAgICAgICAgICAgICAgICAgIHJhbmdlOiBFZGl0b3JTZWxlY3Rpb24uY3Vyc29yKHBvcyArIGNvbnRlbnQubGVuZ3RoKSB9O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGFsbG93VHJpcGxlICYmIHN0YXRlLnNsaWNlRG9jKHBvcyAtIDIgKiB0b2tlbi5sZW5ndGgsIHBvcykgPT0gdG9rZW4gKyB0b2tlbiAmJlxuICAgICAgICAgICAgKHN0YXJ0ID0gY2FuU3RhcnRTdHJpbmdBdChzdGF0ZSwgcG9zIC0gMiAqIHRva2VuLmxlbmd0aCwgc3RyaW5nUHJlZml4ZXMpKSA+IC0xICYmXG4gICAgICAgICAgICBub2RlU3RhcnQoc3RhdGUsIHN0YXJ0KSkge1xuICAgICAgICAgICAgcmV0dXJuIHsgY2hhbmdlczogeyBpbnNlcnQ6IHRva2VuICsgdG9rZW4gKyB0b2tlbiArIHRva2VuLCBmcm9tOiBwb3MgfSxcbiAgICAgICAgICAgICAgICBlZmZlY3RzOiBjbG9zZUJyYWNrZXRFZmZlY3Qub2YocG9zICsgdG9rZW4ubGVuZ3RoKSxcbiAgICAgICAgICAgICAgICByYW5nZTogRWRpdG9yU2VsZWN0aW9uLmN1cnNvcihwb3MgKyB0b2tlbi5sZW5ndGgpIH07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoc3RhdGUuY2hhckNhdGVnb3JpemVyKHBvcykobmV4dCkgIT0gQ2hhckNhdGVnb3J5LldvcmQpIHtcbiAgICAgICAgICAgIGlmIChjYW5TdGFydFN0cmluZ0F0KHN0YXRlLCBwb3MsIHN0cmluZ1ByZWZpeGVzKSA+IC0xICYmICFwcm9iYWJseUluU3RyaW5nKHN0YXRlLCBwb3MsIHRva2VuLCBzdHJpbmdQcmVmaXhlcykpXG4gICAgICAgICAgICAgICAgcmV0dXJuIHsgY2hhbmdlczogeyBpbnNlcnQ6IHRva2VuICsgdG9rZW4sIGZyb206IHBvcyB9LFxuICAgICAgICAgICAgICAgICAgICBlZmZlY3RzOiBjbG9zZUJyYWNrZXRFZmZlY3Qub2YocG9zICsgdG9rZW4ubGVuZ3RoKSxcbiAgICAgICAgICAgICAgICAgICAgcmFuZ2U6IEVkaXRvclNlbGVjdGlvbi5jdXJzb3IocG9zICsgdG9rZW4ubGVuZ3RoKSB9O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7IHJhbmdlOiBkb250ID0gcmFuZ2UgfTtcbiAgICB9KTtcbiAgICByZXR1cm4gZG9udCA/IG51bGwgOiBzdGF0ZS51cGRhdGUoY2hhbmdlcywge1xuICAgICAgICBzY3JvbGxJbnRvVmlldzogdHJ1ZSxcbiAgICAgICAgdXNlckV2ZW50OiBcImlucHV0LnR5cGVcIlxuICAgIH0pO1xufVxuZnVuY3Rpb24gbm9kZVN0YXJ0KHN0YXRlLCBwb3MpIHtcbiAgICBsZXQgdHJlZSA9IHN5bnRheFRyZWUoc3RhdGUpLnJlc29sdmVJbm5lcihwb3MgKyAxKTtcbiAgICByZXR1cm4gdHJlZS5wYXJlbnQgJiYgdHJlZS5mcm9tID09IHBvcztcbn1cbmZ1bmN0aW9uIHByb2JhYmx5SW5TdHJpbmcoc3RhdGUsIHBvcywgcXVvdGVUb2tlbiwgcHJlZml4ZXMpIHtcbiAgICBsZXQgbm9kZSA9IHN5bnRheFRyZWUoc3RhdGUpLnJlc29sdmVJbm5lcihwb3MsIC0xKTtcbiAgICBsZXQgbWF4UHJlZml4ID0gcHJlZml4ZXMucmVkdWNlKChtLCBwKSA9PiBNYXRoLm1heChtLCBwLmxlbmd0aCksIDApO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgNTsgaSsrKSB7XG4gICAgICAgIGxldCBzdGFydCA9IHN0YXRlLnNsaWNlRG9jKG5vZGUuZnJvbSwgTWF0aC5taW4obm9kZS50bywgbm9kZS5mcm9tICsgcXVvdGVUb2tlbi5sZW5ndGggKyBtYXhQcmVmaXgpKTtcbiAgICAgICAgbGV0IHF1b3RlUG9zID0gc3RhcnQuaW5kZXhPZihxdW90ZVRva2VuKTtcbiAgICAgICAgaWYgKCFxdW90ZVBvcyB8fCBxdW90ZVBvcyA+IC0xICYmIHByZWZpeGVzLmluZGV4T2Yoc3RhcnQuc2xpY2UoMCwgcXVvdGVQb3MpKSA+IC0xKSB7XG4gICAgICAgICAgICBsZXQgZmlyc3QgPSBub2RlLmZpcnN0Q2hpbGQ7XG4gICAgICAgICAgICB3aGlsZSAoZmlyc3QgJiYgZmlyc3QuZnJvbSA9PSBub2RlLmZyb20gJiYgZmlyc3QudG8gLSBmaXJzdC5mcm9tID4gcXVvdGVUb2tlbi5sZW5ndGggKyBxdW90ZVBvcykge1xuICAgICAgICAgICAgICAgIGlmIChzdGF0ZS5zbGljZURvYyhmaXJzdC50byAtIHF1b3RlVG9rZW4ubGVuZ3RoLCBmaXJzdC50bykgPT0gcXVvdGVUb2tlbilcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgIGZpcnN0ID0gZmlyc3QuZmlyc3RDaGlsZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGxldCBwYXJlbnQgPSBub2RlLnRvID09IHBvcyAmJiBub2RlLnBhcmVudDtcbiAgICAgICAgaWYgKCFwYXJlbnQpXG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgbm9kZSA9IHBhcmVudDtcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xufVxuZnVuY3Rpb24gY2FuU3RhcnRTdHJpbmdBdChzdGF0ZSwgcG9zLCBwcmVmaXhlcykge1xuICAgIGxldCBjaGFyQ2F0ID0gc3RhdGUuY2hhckNhdGVnb3JpemVyKHBvcyk7XG4gICAgaWYgKGNoYXJDYXQoc3RhdGUuc2xpY2VEb2MocG9zIC0gMSwgcG9zKSkgIT0gQ2hhckNhdGVnb3J5LldvcmQpXG4gICAgICAgIHJldHVybiBwb3M7XG4gICAgZm9yIChsZXQgcHJlZml4IG9mIHByZWZpeGVzKSB7XG4gICAgICAgIGxldCBzdGFydCA9IHBvcyAtIHByZWZpeC5sZW5ndGg7XG4gICAgICAgIGlmIChzdGF0ZS5zbGljZURvYyhzdGFydCwgcG9zKSA9PSBwcmVmaXggJiYgY2hhckNhdChzdGF0ZS5zbGljZURvYyhzdGFydCAtIDEsIHN0YXJ0KSkgIT0gQ2hhckNhdGVnb3J5LldvcmQpXG4gICAgICAgICAgICByZXR1cm4gc3RhcnQ7XG4gICAgfVxuICAgIHJldHVybiAtMTtcbn1cblxuLyoqXG5SZXR1cm5zIGFuIGV4dGVuc2lvbiB0aGF0IGVuYWJsZXMgYXV0b2NvbXBsZXRpb24uXG4qL1xuZnVuY3Rpb24gYXV0b2NvbXBsZXRpb24oY29uZmlnID0ge30pIHtcbiAgICByZXR1cm4gW1xuICAgICAgICBjb21taXRDaGFyYWN0ZXJzLFxuICAgICAgICBjb21wbGV0aW9uU3RhdGUsXG4gICAgICAgIGNvbXBsZXRpb25Db25maWcub2YoY29uZmlnKSxcbiAgICAgICAgY29tcGxldGlvblBsdWdpbixcbiAgICAgICAgY29tcGxldGlvbktleW1hcEV4dCxcbiAgICAgICAgYmFzZVRoZW1lXG4gICAgXTtcbn1cbi8qKlxuQmFzaWMga2V5YmluZGluZ3MgZm9yIGF1dG9jb21wbGV0aW9uLlxuXG4gLSBDdHJsLVNwYWNlIChhbmQgQWx0LVxcYCBvciBBbHQtaSBvbiBtYWNPUyk6IFtgc3RhcnRDb21wbGV0aW9uYF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNhdXRvY29tcGxldGUuc3RhcnRDb21wbGV0aW9uKVxuIC0gRXNjYXBlOiBbYGNsb3NlQ29tcGxldGlvbmBdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jYXV0b2NvbXBsZXRlLmNsb3NlQ29tcGxldGlvbilcbiAtIEFycm93RG93bjogW2Btb3ZlQ29tcGxldGlvblNlbGVjdGlvbmBdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jYXV0b2NvbXBsZXRlLm1vdmVDb21wbGV0aW9uU2VsZWN0aW9uKWAodHJ1ZSlgXG4gLSBBcnJvd1VwOiBbYG1vdmVDb21wbGV0aW9uU2VsZWN0aW9uYF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNhdXRvY29tcGxldGUubW92ZUNvbXBsZXRpb25TZWxlY3Rpb24pYChmYWxzZSlgXG4gLSBQYWdlRG93bjogW2Btb3ZlQ29tcGxldGlvblNlbGVjdGlvbmBdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jYXV0b2NvbXBsZXRlLm1vdmVDb21wbGV0aW9uU2VsZWN0aW9uKWAodHJ1ZSwgXCJwYWdlXCIpYFxuIC0gUGFnZVVwOiBbYG1vdmVDb21wbGV0aW9uU2VsZWN0aW9uYF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNhdXRvY29tcGxldGUubW92ZUNvbXBsZXRpb25TZWxlY3Rpb24pYChmYWxzZSwgXCJwYWdlXCIpYFxuIC0gRW50ZXI6IFtgYWNjZXB0Q29tcGxldGlvbmBdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jYXV0b2NvbXBsZXRlLmFjY2VwdENvbXBsZXRpb24pXG4qL1xuY29uc3QgY29tcGxldGlvbktleW1hcCA9IFtcbiAgICB7IGtleTogXCJDdHJsLVNwYWNlXCIsIHJ1bjogc3RhcnRDb21wbGV0aW9uIH0sXG4gICAgeyBtYWM6IFwiQWx0LWBcIiwgcnVuOiBzdGFydENvbXBsZXRpb24gfSxcbiAgICB7IG1hYzogXCJBbHQtaVwiLCBydW46IHN0YXJ0Q29tcGxldGlvbiB9LFxuICAgIHsga2V5OiBcIkVzY2FwZVwiLCBydW46IGNsb3NlQ29tcGxldGlvbiB9LFxuICAgIHsga2V5OiBcIkFycm93RG93blwiLCBydW46IC8qQF9fUFVSRV9fKi9tb3ZlQ29tcGxldGlvblNlbGVjdGlvbih0cnVlKSB9LFxuICAgIHsga2V5OiBcIkFycm93VXBcIiwgcnVuOiAvKkBfX1BVUkVfXyovbW92ZUNvbXBsZXRpb25TZWxlY3Rpb24oZmFsc2UpIH0sXG4gICAgeyBrZXk6IFwiUGFnZURvd25cIiwgcnVuOiAvKkBfX1BVUkVfXyovbW92ZUNvbXBsZXRpb25TZWxlY3Rpb24odHJ1ZSwgXCJwYWdlXCIpIH0sXG4gICAgeyBrZXk6IFwiUGFnZVVwXCIsIHJ1bjogLypAX19QVVJFX18qL21vdmVDb21wbGV0aW9uU2VsZWN0aW9uKGZhbHNlLCBcInBhZ2VcIikgfSxcbiAgICB7IGtleTogXCJFbnRlclwiLCBydW46IGFjY2VwdENvbXBsZXRpb24gfVxuXTtcbmNvbnN0IGNvbXBsZXRpb25LZXltYXBFeHQgPSAvKkBfX1BVUkVfXyovUHJlYy5oaWdoZXN0KC8qQF9fUFVSRV9fKi9rZXltYXAuY29tcHV0ZU4oW2NvbXBsZXRpb25Db25maWddLCBzdGF0ZSA9PiBzdGF0ZS5mYWNldChjb21wbGV0aW9uQ29uZmlnKS5kZWZhdWx0S2V5bWFwID8gW2NvbXBsZXRpb25LZXltYXBdIDogW10pKTtcbi8qKlxuR2V0IHRoZSBjdXJyZW50IGNvbXBsZXRpb24gc3RhdHVzLiBXaGVuIGNvbXBsZXRpb25zIGFyZSBhdmFpbGFibGUsXG50aGlzIHdpbGwgcmV0dXJuIGBcImFjdGl2ZVwiYC4gV2hlbiBjb21wbGV0aW9ucyBhcmUgcGVuZGluZyAoaW4gdGhlXG5wcm9jZXNzIG9mIGJlaW5nIHF1ZXJpZWQpLCB0aGlzIHJldHVybnMgYFwicGVuZGluZ1wiYC4gT3RoZXJ3aXNlLCBpdFxucmV0dXJucyBgbnVsbGAuXG4qL1xuZnVuY3Rpb24gY29tcGxldGlvblN0YXR1cyhzdGF0ZSkge1xuICAgIGxldCBjU3RhdGUgPSBzdGF0ZS5maWVsZChjb21wbGV0aW9uU3RhdGUsIGZhbHNlKTtcbiAgICByZXR1cm4gY1N0YXRlICYmIGNTdGF0ZS5hY3RpdmUuc29tZShhID0+IGEuaXNQZW5kaW5nKSA/IFwicGVuZGluZ1wiXG4gICAgICAgIDogY1N0YXRlICYmIGNTdGF0ZS5hY3RpdmUuc29tZShhID0+IGEuc3RhdGUgIT0gMCAvKiBTdGF0ZS5JbmFjdGl2ZSAqLykgPyBcImFjdGl2ZVwiIDogbnVsbDtcbn1cbmNvbnN0IGNvbXBsZXRpb25BcnJheUNhY2hlID0gLypAX19QVVJFX18qL25ldyBXZWFrTWFwO1xuLyoqXG5SZXR1cm5zIHRoZSBhdmFpbGFibGUgY29tcGxldGlvbnMgYXMgYW4gYXJyYXkuXG4qL1xuZnVuY3Rpb24gY3VycmVudENvbXBsZXRpb25zKHN0YXRlKSB7XG4gICAgdmFyIF9hO1xuICAgIGxldCBvcGVuID0gKF9hID0gc3RhdGUuZmllbGQoY29tcGxldGlvblN0YXRlLCBmYWxzZSkpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5vcGVuO1xuICAgIGlmICghb3BlbiB8fCBvcGVuLmRpc2FibGVkKVxuICAgICAgICByZXR1cm4gW107XG4gICAgbGV0IGNvbXBsZXRpb25zID0gY29tcGxldGlvbkFycmF5Q2FjaGUuZ2V0KG9wZW4ub3B0aW9ucyk7XG4gICAgaWYgKCFjb21wbGV0aW9ucylcbiAgICAgICAgY29tcGxldGlvbkFycmF5Q2FjaGUuc2V0KG9wZW4ub3B0aW9ucywgY29tcGxldGlvbnMgPSBvcGVuLm9wdGlvbnMubWFwKG8gPT4gby5jb21wbGV0aW9uKSk7XG4gICAgcmV0dXJuIGNvbXBsZXRpb25zO1xufVxuLyoqXG5SZXR1cm4gdGhlIGN1cnJlbnRseSBzZWxlY3RlZCBjb21wbGV0aW9uLCBpZiBhbnkuXG4qL1xuZnVuY3Rpb24gc2VsZWN0ZWRDb21wbGV0aW9uKHN0YXRlKSB7XG4gICAgdmFyIF9hO1xuICAgIGxldCBvcGVuID0gKF9hID0gc3RhdGUuZmllbGQoY29tcGxldGlvblN0YXRlLCBmYWxzZSkpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5vcGVuO1xuICAgIHJldHVybiBvcGVuICYmICFvcGVuLmRpc2FibGVkICYmIG9wZW4uc2VsZWN0ZWQgPj0gMCA/IG9wZW4ub3B0aW9uc1tvcGVuLnNlbGVjdGVkXS5jb21wbGV0aW9uIDogbnVsbDtcbn1cbi8qKlxuUmV0dXJucyB0aGUgY3VycmVudGx5IHNlbGVjdGVkIHBvc2l0aW9uIGluIHRoZSBhY3RpdmUgY29tcGxldGlvblxubGlzdCwgb3IgbnVsbCBpZiBubyBjb21wbGV0aW9ucyBhcmUgYWN0aXZlLlxuKi9cbmZ1bmN0aW9uIHNlbGVjdGVkQ29tcGxldGlvbkluZGV4KHN0YXRlKSB7XG4gICAgdmFyIF9hO1xuICAgIGxldCBvcGVuID0gKF9hID0gc3RhdGUuZmllbGQoY29tcGxldGlvblN0YXRlLCBmYWxzZSkpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5vcGVuO1xuICAgIHJldHVybiBvcGVuICYmICFvcGVuLmRpc2FibGVkICYmIG9wZW4uc2VsZWN0ZWQgPj0gMCA/IG9wZW4uc2VsZWN0ZWQgOiBudWxsO1xufVxuLyoqXG5DcmVhdGUgYW4gZWZmZWN0IHRoYXQgY2FuIGJlIGF0dGFjaGVkIHRvIGEgdHJhbnNhY3Rpb24gdG8gY2hhbmdlXG50aGUgY3VycmVudGx5IHNlbGVjdGVkIGNvbXBsZXRpb24uXG4qL1xuZnVuY3Rpb24gc2V0U2VsZWN0ZWRDb21wbGV0aW9uKGluZGV4KSB7XG4gICAgcmV0dXJuIHNldFNlbGVjdGVkRWZmZWN0Lm9mKGluZGV4KTtcbn1cblxuZXhwb3J0IHsgQ29tcGxldGlvbkNvbnRleHQsIGFjY2VwdENvbXBsZXRpb24sIGF1dG9jb21wbGV0aW9uLCBjbGVhclNuaXBwZXQsIGNsb3NlQnJhY2tldHMsIGNsb3NlQnJhY2tldHNLZXltYXAsIGNsb3NlQ29tcGxldGlvbiwgY29tcGxldGVBbnlXb3JkLCBjb21wbGV0ZUZyb21MaXN0LCBjb21wbGV0aW9uS2V5bWFwLCBjb21wbGV0aW9uU3RhdHVzLCBjdXJyZW50Q29tcGxldGlvbnMsIGRlbGV0ZUJyYWNrZXRQYWlyLCBoYXNOZXh0U25pcHBldEZpZWxkLCBoYXNQcmV2U25pcHBldEZpZWxkLCBpZkluLCBpZk5vdEluLCBpbnNlcnRCcmFja2V0LCBpbnNlcnRDb21wbGV0aW9uVGV4dCwgbW92ZUNvbXBsZXRpb25TZWxlY3Rpb24sIG5leHRTbmlwcGV0RmllbGQsIHBpY2tlZENvbXBsZXRpb24sIHByZXZTbmlwcGV0RmllbGQsIHNlbGVjdGVkQ29tcGxldGlvbiwgc2VsZWN0ZWRDb21wbGV0aW9uSW5kZXgsIHNldFNlbGVjdGVkQ29tcGxldGlvbiwgc25pcHBldCwgc25pcHBldENvbXBsZXRpb24sIHNuaXBwZXRLZXltYXAsIHN0YXJ0Q29tcGxldGlvbiB9O1xuIiwKICAgICJpbXBvcnQgeyBEZWNvcmF0aW9uLCBzaG93UGFuZWwsIEVkaXRvclZpZXcsIFZpZXdQbHVnaW4sIGd1dHRlciwgc2hvd1Rvb2x0aXAsIGhvdmVyVG9vbHRpcCwgZ2V0UGFuZWwsIGxvZ0V4Y2VwdGlvbiwgV2lkZ2V0VHlwZSwgR3V0dGVyTWFya2VyIH0gZnJvbSAnQGNvZGVtaXJyb3Ivdmlldyc7XG5pbXBvcnQgeyBTdGF0ZUVmZmVjdCwgU3RhdGVGaWVsZCwgRmFjZXQsIGNvbWJpbmVDb25maWcsIFJhbmdlU2V0LCBSYW5nZVNldEJ1aWxkZXIgfSBmcm9tICdAY29kZW1pcnJvci9zdGF0ZSc7XG5pbXBvcnQgZWx0IGZyb20gJ2NyZWx0JztcblxuY2xhc3MgU2VsZWN0ZWREaWFnbm9zdGljIHtcbiAgICBjb25zdHJ1Y3Rvcihmcm9tLCB0bywgZGlhZ25vc3RpYykge1xuICAgICAgICB0aGlzLmZyb20gPSBmcm9tO1xuICAgICAgICB0aGlzLnRvID0gdG87XG4gICAgICAgIHRoaXMuZGlhZ25vc3RpYyA9IGRpYWdub3N0aWM7XG4gICAgfVxufVxuY2xhc3MgTGludFN0YXRlIHtcbiAgICBjb25zdHJ1Y3RvcihkaWFnbm9zdGljcywgcGFuZWwsIHNlbGVjdGVkKSB7XG4gICAgICAgIHRoaXMuZGlhZ25vc3RpY3MgPSBkaWFnbm9zdGljcztcbiAgICAgICAgdGhpcy5wYW5lbCA9IHBhbmVsO1xuICAgICAgICB0aGlzLnNlbGVjdGVkID0gc2VsZWN0ZWQ7XG4gICAgfVxuICAgIHN0YXRpYyBpbml0KGRpYWdub3N0aWNzLCBwYW5lbCwgc3RhdGUpIHtcbiAgICAgICAgLy8gRmlsdGVyIHRoZSBsaXN0IG9mIGRpYWdub3N0aWNzIGZvciB3aGljaCB0byBjcmVhdGUgbWFya2Vyc1xuICAgICAgICBsZXQgZGlhZ25vc3RpY0ZpbHRlciA9IHN0YXRlLmZhY2V0KGxpbnRDb25maWcpLm1hcmtlckZpbHRlcjtcbiAgICAgICAgaWYgKGRpYWdub3N0aWNGaWx0ZXIpXG4gICAgICAgICAgICBkaWFnbm9zdGljcyA9IGRpYWdub3N0aWNGaWx0ZXIoZGlhZ25vc3RpY3MsIHN0YXRlKTtcbiAgICAgICAgbGV0IHNvcnRlZCA9IGRpYWdub3N0aWNzLnNsaWNlKCkuc29ydCgoYSwgYikgPT4gYS5mcm9tIC0gYi5mcm9tIHx8IGEudG8gLSBiLnRvKTtcbiAgICAgICAgbGV0IGRlY28gPSBuZXcgUmFuZ2VTZXRCdWlsZGVyKCksIGFjdGl2ZSA9IFtdLCBwb3MgPSAwO1xuICAgICAgICBsZXQgc2NhbiA9IHN0YXRlLmRvYy5pdGVyKCksIHNjYW5Qb3MgPSAwLCBkb2NMZW4gPSBzdGF0ZS5kb2MubGVuZ3RoO1xuICAgICAgICBmb3IgKGxldCBpID0gMDs7KSB7XG4gICAgICAgICAgICBsZXQgbmV4dCA9IGkgPT0gc29ydGVkLmxlbmd0aCA/IG51bGwgOiBzb3J0ZWRbaV07XG4gICAgICAgICAgICBpZiAoIW5leHQgJiYgIWFjdGl2ZS5sZW5ndGgpXG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBsZXQgZnJvbSwgdG87XG4gICAgICAgICAgICBpZiAoYWN0aXZlLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIGZyb20gPSBwb3M7XG4gICAgICAgICAgICAgICAgdG8gPSBhY3RpdmUucmVkdWNlKChwLCBkKSA9PiBNYXRoLm1pbihwLCBkLnRvKSwgbmV4dCAmJiBuZXh0LmZyb20gPiBmcm9tID8gbmV4dC5mcm9tIDogMWU4KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGZyb20gPSBuZXh0LmZyb207XG4gICAgICAgICAgICAgICAgaWYgKGZyb20gPiBkb2NMZW4pXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIHRvID0gbmV4dC50bztcbiAgICAgICAgICAgICAgICBhY3RpdmUucHVzaChuZXh0KTtcbiAgICAgICAgICAgICAgICBpKys7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB3aGlsZSAoaSA8IHNvcnRlZC5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICBsZXQgbmV4dCA9IHNvcnRlZFtpXTtcbiAgICAgICAgICAgICAgICBpZiAobmV4dC5mcm9tID09IGZyb20gJiYgKG5leHQudG8gPiBuZXh0LmZyb20gfHwgbmV4dC50byA9PSBmcm9tKSkge1xuICAgICAgICAgICAgICAgICAgICBhY3RpdmUucHVzaChuZXh0KTtcbiAgICAgICAgICAgICAgICAgICAgaSsrO1xuICAgICAgICAgICAgICAgICAgICB0byA9IE1hdGgubWluKG5leHQudG8sIHRvKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRvID0gTWF0aC5taW4obmV4dC5mcm9tLCB0byk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRvID0gTWF0aC5taW4odG8sIGRvY0xlbik7XG4gICAgICAgICAgICBsZXQgd2lkZ2V0ID0gZmFsc2U7XG4gICAgICAgICAgICBpZiAoYWN0aXZlLnNvbWUoZCA9PiBkLmZyb20gPT0gZnJvbSAmJiAoZC50byA9PSB0byB8fCB0byA9PSBkb2NMZW4pKSkge1xuICAgICAgICAgICAgICAgIHdpZGdldCA9IGZyb20gPT0gdG87XG4gICAgICAgICAgICAgICAgaWYgKCF3aWRnZXQgJiYgdG8gLSBmcm9tIDwgMTApIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGJlaGluZCA9IGZyb20gLSAoc2NhblBvcyArIHNjYW4udmFsdWUubGVuZ3RoKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGJlaGluZCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNjYW4ubmV4dChiZWhpbmQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgc2NhblBvcyA9IGZyb207XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgY2hlY2sgPSBmcm9tOzspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjaGVjayA+PSB0bykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpZGdldCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXNjYW4ubGluZUJyZWFrICYmIHNjYW5Qb3MgKyBzY2FuLnZhbHVlLmxlbmd0aCA+IGNoZWNrKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2hlY2sgPSBzY2FuUG9zICsgc2Nhbi52YWx1ZS5sZW5ndGg7XG4gICAgICAgICAgICAgICAgICAgICAgICBzY2FuUG9zICs9IHNjYW4udmFsdWUubGVuZ3RoO1xuICAgICAgICAgICAgICAgICAgICAgICAgc2Nhbi5uZXh0KCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsZXQgc2V2ID0gbWF4U2V2ZXJpdHkoYWN0aXZlKTtcbiAgICAgICAgICAgIGlmICh3aWRnZXQpIHtcbiAgICAgICAgICAgICAgICBkZWNvLmFkZChmcm9tLCBmcm9tLCBEZWNvcmF0aW9uLndpZGdldCh7XG4gICAgICAgICAgICAgICAgICAgIHdpZGdldDogbmV3IERpYWdub3N0aWNXaWRnZXQoc2V2KSxcbiAgICAgICAgICAgICAgICAgICAgZGlhZ25vc3RpY3M6IGFjdGl2ZS5zbGljZSgpXG4gICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgbGV0IG1hcmtDbGFzcyA9IGFjdGl2ZS5yZWR1Y2UoKGMsIGQpID0+IGQubWFya0NsYXNzID8gYyArIFwiIFwiICsgZC5tYXJrQ2xhc3MgOiBjLCBcIlwiKTtcbiAgICAgICAgICAgICAgICBkZWNvLmFkZChmcm9tLCB0bywgRGVjb3JhdGlvbi5tYXJrKHtcbiAgICAgICAgICAgICAgICAgICAgY2xhc3M6IFwiY20tbGludFJhbmdlIGNtLWxpbnRSYW5nZS1cIiArIHNldiArIG1hcmtDbGFzcyxcbiAgICAgICAgICAgICAgICAgICAgZGlhZ25vc3RpY3M6IGFjdGl2ZS5zbGljZSgpLFxuICAgICAgICAgICAgICAgICAgICBpbmNsdXNpdmVFbmQ6IGFjdGl2ZS5zb21lKGEgPT4gYS50byA+IHRvKVxuICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHBvcyA9IHRvO1xuICAgICAgICAgICAgaWYgKHBvcyA9PSBkb2NMZW4pXG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGFjdGl2ZS5sZW5ndGg7IGkrKylcbiAgICAgICAgICAgICAgICBpZiAoYWN0aXZlW2ldLnRvIDw9IHBvcylcbiAgICAgICAgICAgICAgICAgICAgYWN0aXZlLnNwbGljZShpLS0sIDEpO1xuICAgICAgICB9XG4gICAgICAgIGxldCBzZXQgPSBkZWNvLmZpbmlzaCgpO1xuICAgICAgICByZXR1cm4gbmV3IExpbnRTdGF0ZShzZXQsIHBhbmVsLCBmaW5kRGlhZ25vc3RpYyhzZXQpKTtcbiAgICB9XG59XG5mdW5jdGlvbiBmaW5kRGlhZ25vc3RpYyhkaWFnbm9zdGljcywgZGlhZ25vc3RpYyA9IG51bGwsIGFmdGVyID0gMCkge1xuICAgIGxldCBmb3VuZCA9IG51bGw7XG4gICAgZGlhZ25vc3RpY3MuYmV0d2VlbihhZnRlciwgMWU5LCAoZnJvbSwgdG8sIHsgc3BlYyB9KSA9PiB7XG4gICAgICAgIGlmIChkaWFnbm9zdGljICYmIHNwZWMuZGlhZ25vc3RpY3MuaW5kZXhPZihkaWFnbm9zdGljKSA8IDApXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIGlmICghZm91bmQpXG4gICAgICAgICAgICBmb3VuZCA9IG5ldyBTZWxlY3RlZERpYWdub3N0aWMoZnJvbSwgdG8sIGRpYWdub3N0aWMgfHwgc3BlYy5kaWFnbm9zdGljc1swXSk7XG4gICAgICAgIGVsc2UgaWYgKHNwZWMuZGlhZ25vc3RpY3MuaW5kZXhPZihmb3VuZC5kaWFnbm9zdGljKSA8IDApXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIGVsc2VcbiAgICAgICAgICAgIGZvdW5kID0gbmV3IFNlbGVjdGVkRGlhZ25vc3RpYyhmb3VuZC5mcm9tLCB0bywgZm91bmQuZGlhZ25vc3RpYyk7XG4gICAgfSk7XG4gICAgcmV0dXJuIGZvdW5kO1xufVxuZnVuY3Rpb24gaGlkZVRvb2x0aXAodHIsIHRvb2x0aXApIHtcbiAgICBsZXQgZnJvbSA9IHRvb2x0aXAucG9zLCB0byA9IHRvb2x0aXAuZW5kIHx8IGZyb207XG4gICAgbGV0IHJlc3VsdCA9IHRyLnN0YXRlLmZhY2V0KGxpbnRDb25maWcpLmhpZGVPbih0ciwgZnJvbSwgdG8pO1xuICAgIGlmIChyZXN1bHQgIT0gbnVsbClcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICBsZXQgbGluZSA9IHRyLnN0YXJ0U3RhdGUuZG9jLmxpbmVBdCh0b29sdGlwLnBvcyk7XG4gICAgcmV0dXJuICEhKHRyLmVmZmVjdHMuc29tZShlID0+IGUuaXMoc2V0RGlhZ25vc3RpY3NFZmZlY3QpKSB8fCB0ci5jaGFuZ2VzLnRvdWNoZXNSYW5nZShsaW5lLmZyb20sIE1hdGgubWF4KGxpbmUudG8sIHRvKSkpO1xufVxuZnVuY3Rpb24gbWF5YmVFbmFibGVMaW50KHN0YXRlLCBlZmZlY3RzKSB7XG4gICAgcmV0dXJuIHN0YXRlLmZpZWxkKGxpbnRTdGF0ZSwgZmFsc2UpID8gZWZmZWN0cyA6IGVmZmVjdHMuY29uY2F0KFN0YXRlRWZmZWN0LmFwcGVuZENvbmZpZy5vZihsaW50RXh0ZW5zaW9ucykpO1xufVxuLyoqXG5SZXR1cm5zIGEgdHJhbnNhY3Rpb24gc3BlYyB3aGljaCB1cGRhdGVzIHRoZSBjdXJyZW50IHNldCBvZlxuZGlhZ25vc3RpY3MsIGFuZCBlbmFibGVzIHRoZSBsaW50IGV4dGVuc2lvbiBpZiBpZiB3YXNuJ3QgYWxyZWFkeVxuYWN0aXZlLlxuKi9cbmZ1bmN0aW9uIHNldERpYWdub3N0aWNzKHN0YXRlLCBkaWFnbm9zdGljcykge1xuICAgIHJldHVybiB7XG4gICAgICAgIGVmZmVjdHM6IG1heWJlRW5hYmxlTGludChzdGF0ZSwgW3NldERpYWdub3N0aWNzRWZmZWN0Lm9mKGRpYWdub3N0aWNzKV0pXG4gICAgfTtcbn1cbi8qKlxuVGhlIHN0YXRlIGVmZmVjdCB0aGF0IHVwZGF0ZXMgdGhlIHNldCBvZiBhY3RpdmUgZGlhZ25vc3RpY3MuIENhblxuYmUgdXNlZnVsIHdoZW4gd3JpdGluZyBhbiBleHRlbnNpb24gdGhhdCBuZWVkcyB0byB0cmFjayB0aGVzZS5cbiovXG5jb25zdCBzZXREaWFnbm9zdGljc0VmZmVjdCA9IC8qQF9fUFVSRV9fKi9TdGF0ZUVmZmVjdC5kZWZpbmUoKTtcbmNvbnN0IHRvZ2dsZVBhbmVsID0gLypAX19QVVJFX18qL1N0YXRlRWZmZWN0LmRlZmluZSgpO1xuY29uc3QgbW92ZVBhbmVsU2VsZWN0aW9uID0gLypAX19QVVJFX18qL1N0YXRlRWZmZWN0LmRlZmluZSgpO1xuY29uc3QgbGludFN0YXRlID0gLypAX19QVVJFX18qL1N0YXRlRmllbGQuZGVmaW5lKHtcbiAgICBjcmVhdGUoKSB7XG4gICAgICAgIHJldHVybiBuZXcgTGludFN0YXRlKERlY29yYXRpb24ubm9uZSwgbnVsbCwgbnVsbCk7XG4gICAgfSxcbiAgICB1cGRhdGUodmFsdWUsIHRyKSB7XG4gICAgICAgIGlmICh0ci5kb2NDaGFuZ2VkICYmIHZhbHVlLmRpYWdub3N0aWNzLnNpemUpIHtcbiAgICAgICAgICAgIGxldCBtYXBwZWQgPSB2YWx1ZS5kaWFnbm9zdGljcy5tYXAodHIuY2hhbmdlcyksIHNlbGVjdGVkID0gbnVsbCwgcGFuZWwgPSB2YWx1ZS5wYW5lbDtcbiAgICAgICAgICAgIGlmICh2YWx1ZS5zZWxlY3RlZCkge1xuICAgICAgICAgICAgICAgIGxldCBzZWxQb3MgPSB0ci5jaGFuZ2VzLm1hcFBvcyh2YWx1ZS5zZWxlY3RlZC5mcm9tLCAxKTtcbiAgICAgICAgICAgICAgICBzZWxlY3RlZCA9IGZpbmREaWFnbm9zdGljKG1hcHBlZCwgdmFsdWUuc2VsZWN0ZWQuZGlhZ25vc3RpYywgc2VsUG9zKSB8fCBmaW5kRGlhZ25vc3RpYyhtYXBwZWQsIG51bGwsIHNlbFBvcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIW1hcHBlZC5zaXplICYmIHBhbmVsICYmIHRyLnN0YXRlLmZhY2V0KGxpbnRDb25maWcpLmF1dG9QYW5lbClcbiAgICAgICAgICAgICAgICBwYW5lbCA9IG51bGw7XG4gICAgICAgICAgICB2YWx1ZSA9IG5ldyBMaW50U3RhdGUobWFwcGVkLCBwYW5lbCwgc2VsZWN0ZWQpO1xuICAgICAgICB9XG4gICAgICAgIGZvciAobGV0IGVmZmVjdCBvZiB0ci5lZmZlY3RzKSB7XG4gICAgICAgICAgICBpZiAoZWZmZWN0LmlzKHNldERpYWdub3N0aWNzRWZmZWN0KSkge1xuICAgICAgICAgICAgICAgIGxldCBwYW5lbCA9ICF0ci5zdGF0ZS5mYWNldChsaW50Q29uZmlnKS5hdXRvUGFuZWwgPyB2YWx1ZS5wYW5lbCA6IGVmZmVjdC52YWx1ZS5sZW5ndGggPyBMaW50UGFuZWwub3BlbiA6IG51bGw7XG4gICAgICAgICAgICAgICAgdmFsdWUgPSBMaW50U3RhdGUuaW5pdChlZmZlY3QudmFsdWUsIHBhbmVsLCB0ci5zdGF0ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChlZmZlY3QuaXModG9nZ2xlUGFuZWwpKSB7XG4gICAgICAgICAgICAgICAgdmFsdWUgPSBuZXcgTGludFN0YXRlKHZhbHVlLmRpYWdub3N0aWNzLCBlZmZlY3QudmFsdWUgPyBMaW50UGFuZWwub3BlbiA6IG51bGwsIHZhbHVlLnNlbGVjdGVkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGVmZmVjdC5pcyhtb3ZlUGFuZWxTZWxlY3Rpb24pKSB7XG4gICAgICAgICAgICAgICAgdmFsdWUgPSBuZXcgTGludFN0YXRlKHZhbHVlLmRpYWdub3N0aWNzLCB2YWx1ZS5wYW5lbCwgZWZmZWN0LnZhbHVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgfSxcbiAgICBwcm92aWRlOiBmID0+IFtzaG93UGFuZWwuZnJvbShmLCB2YWwgPT4gdmFsLnBhbmVsKSxcbiAgICAgICAgRWRpdG9yVmlldy5kZWNvcmF0aW9ucy5mcm9tKGYsIHMgPT4gcy5kaWFnbm9zdGljcyldXG59KTtcbi8qKlxuUmV0dXJucyB0aGUgbnVtYmVyIG9mIGFjdGl2ZSBsaW50IGRpYWdub3N0aWNzIGluIHRoZSBnaXZlbiBzdGF0ZS5cbiovXG5mdW5jdGlvbiBkaWFnbm9zdGljQ291bnQoc3RhdGUpIHtcbiAgICBsZXQgbGludCA9IHN0YXRlLmZpZWxkKGxpbnRTdGF0ZSwgZmFsc2UpO1xuICAgIHJldHVybiBsaW50ID8gbGludC5kaWFnbm9zdGljcy5zaXplIDogMDtcbn1cbmNvbnN0IGFjdGl2ZU1hcmsgPSAvKkBfX1BVUkVfXyovRGVjb3JhdGlvbi5tYXJrKHsgY2xhc3M6IFwiY20tbGludFJhbmdlIGNtLWxpbnRSYW5nZS1hY3RpdmVcIiB9KTtcbmZ1bmN0aW9uIGxpbnRUb29sdGlwKHZpZXcsIHBvcywgc2lkZSkge1xuICAgIGxldCB7IGRpYWdub3N0aWNzIH0gPSB2aWV3LnN0YXRlLmZpZWxkKGxpbnRTdGF0ZSk7XG4gICAgbGV0IGZvdW5kLCBzdGFydCA9IC0xLCBlbmQgPSAtMTtcbiAgICBkaWFnbm9zdGljcy5iZXR3ZWVuKHBvcyAtIChzaWRlIDwgMCA/IDEgOiAwKSwgcG9zICsgKHNpZGUgPiAwID8gMSA6IDApLCAoZnJvbSwgdG8sIHsgc3BlYyB9KSA9PiB7XG4gICAgICAgIGlmIChwb3MgPj0gZnJvbSAmJiBwb3MgPD0gdG8gJiZcbiAgICAgICAgICAgIChmcm9tID09IHRvIHx8ICgocG9zID4gZnJvbSB8fCBzaWRlID4gMCkgJiYgKHBvcyA8IHRvIHx8IHNpZGUgPCAwKSkpKSB7XG4gICAgICAgICAgICBmb3VuZCA9IHNwZWMuZGlhZ25vc3RpY3M7XG4gICAgICAgICAgICBzdGFydCA9IGZyb207XG4gICAgICAgICAgICBlbmQgPSB0bztcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIGxldCBkaWFnbm9zdGljRmlsdGVyID0gdmlldy5zdGF0ZS5mYWNldChsaW50Q29uZmlnKS50b29sdGlwRmlsdGVyO1xuICAgIGlmIChmb3VuZCAmJiBkaWFnbm9zdGljRmlsdGVyKVxuICAgICAgICBmb3VuZCA9IGRpYWdub3N0aWNGaWx0ZXIoZm91bmQsIHZpZXcuc3RhdGUpO1xuICAgIGlmICghZm91bmQpXG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIHJldHVybiB7XG4gICAgICAgIHBvczogc3RhcnQsXG4gICAgICAgIGVuZDogZW5kLFxuICAgICAgICBhYm92ZTogdmlldy5zdGF0ZS5kb2MubGluZUF0KHN0YXJ0KS50byA8IGVuZCxcbiAgICAgICAgY3JlYXRlKCkge1xuICAgICAgICAgICAgcmV0dXJuIHsgZG9tOiBkaWFnbm9zdGljc1Rvb2x0aXAodmlldywgZm91bmQpIH07XG4gICAgICAgIH1cbiAgICB9O1xufVxuZnVuY3Rpb24gZGlhZ25vc3RpY3NUb29sdGlwKHZpZXcsIGRpYWdub3N0aWNzKSB7XG4gICAgcmV0dXJuIGVsdChcInVsXCIsIHsgY2xhc3M6IFwiY20tdG9vbHRpcC1saW50XCIgfSwgZGlhZ25vc3RpY3MubWFwKGQgPT4gcmVuZGVyRGlhZ25vc3RpYyh2aWV3LCBkLCBmYWxzZSkpKTtcbn1cbi8qKlxuQ29tbWFuZCB0byBvcGVuIGFuZCBmb2N1cyB0aGUgbGludCBwYW5lbC5cbiovXG5jb25zdCBvcGVuTGludFBhbmVsID0gKHZpZXcpID0+IHtcbiAgICBsZXQgZmllbGQgPSB2aWV3LnN0YXRlLmZpZWxkKGxpbnRTdGF0ZSwgZmFsc2UpO1xuICAgIGlmICghZmllbGQgfHwgIWZpZWxkLnBhbmVsKVxuICAgICAgICB2aWV3LmRpc3BhdGNoKHsgZWZmZWN0czogbWF5YmVFbmFibGVMaW50KHZpZXcuc3RhdGUsIFt0b2dnbGVQYW5lbC5vZih0cnVlKV0pIH0pO1xuICAgIGxldCBwYW5lbCA9IGdldFBhbmVsKHZpZXcsIExpbnRQYW5lbC5vcGVuKTtcbiAgICBpZiAocGFuZWwpXG4gICAgICAgIHBhbmVsLmRvbS5xdWVyeVNlbGVjdG9yKFwiLmNtLXBhbmVsLWxpbnQgdWxcIikuZm9jdXMoKTtcbiAgICByZXR1cm4gdHJ1ZTtcbn07XG4vKipcbkNvbW1hbmQgdG8gY2xvc2UgdGhlIGxpbnQgcGFuZWwsIHdoZW4gb3Blbi5cbiovXG5jb25zdCBjbG9zZUxpbnRQYW5lbCA9ICh2aWV3KSA9PiB7XG4gICAgbGV0IGZpZWxkID0gdmlldy5zdGF0ZS5maWVsZChsaW50U3RhdGUsIGZhbHNlKTtcbiAgICBpZiAoIWZpZWxkIHx8ICFmaWVsZC5wYW5lbClcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIHZpZXcuZGlzcGF0Y2goeyBlZmZlY3RzOiB0b2dnbGVQYW5lbC5vZihmYWxzZSkgfSk7XG4gICAgcmV0dXJuIHRydWU7XG59O1xuLyoqXG5Nb3ZlIHRoZSBzZWxlY3Rpb24gdG8gdGhlIG5leHQgZGlhZ25vc3RpYy5cbiovXG5jb25zdCBuZXh0RGlhZ25vc3RpYyA9ICh2aWV3KSA9PiB7XG4gICAgbGV0IGZpZWxkID0gdmlldy5zdGF0ZS5maWVsZChsaW50U3RhdGUsIGZhbHNlKTtcbiAgICBpZiAoIWZpZWxkKVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgbGV0IHNlbCA9IHZpZXcuc3RhdGUuc2VsZWN0aW9uLm1haW4sIG5leHQgPSBmaWVsZC5kaWFnbm9zdGljcy5pdGVyKHNlbC50byArIDEpO1xuICAgIGlmICghbmV4dC52YWx1ZSkge1xuICAgICAgICBuZXh0ID0gZmllbGQuZGlhZ25vc3RpY3MuaXRlcigwKTtcbiAgICAgICAgaWYgKCFuZXh0LnZhbHVlIHx8IG5leHQuZnJvbSA9PSBzZWwuZnJvbSAmJiBuZXh0LnRvID09IHNlbC50bylcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgdmlldy5kaXNwYXRjaCh7IHNlbGVjdGlvbjogeyBhbmNob3I6IG5leHQuZnJvbSwgaGVhZDogbmV4dC50byB9LCBzY3JvbGxJbnRvVmlldzogdHJ1ZSB9KTtcbiAgICByZXR1cm4gdHJ1ZTtcbn07XG4vKipcbk1vdmUgdGhlIHNlbGVjdGlvbiB0byB0aGUgcHJldmlvdXMgZGlhZ25vc3RpYy5cbiovXG5jb25zdCBwcmV2aW91c0RpYWdub3N0aWMgPSAodmlldykgPT4ge1xuICAgIGxldCB7IHN0YXRlIH0gPSB2aWV3LCBmaWVsZCA9IHN0YXRlLmZpZWxkKGxpbnRTdGF0ZSwgZmFsc2UpO1xuICAgIGlmICghZmllbGQpXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICBsZXQgc2VsID0gc3RhdGUuc2VsZWN0aW9uLm1haW47XG4gICAgbGV0IHByZXZGcm9tLCBwcmV2VG8sIGxhc3RGcm9tLCBsYXN0VG87XG4gICAgZmllbGQuZGlhZ25vc3RpY3MuYmV0d2VlbigwLCBzdGF0ZS5kb2MubGVuZ3RoLCAoZnJvbSwgdG8pID0+IHtcbiAgICAgICAgaWYgKHRvIDwgc2VsLnRvICYmIChwcmV2RnJvbSA9PSBudWxsIHx8IHByZXZGcm9tIDwgZnJvbSkpIHtcbiAgICAgICAgICAgIHByZXZGcm9tID0gZnJvbTtcbiAgICAgICAgICAgIHByZXZUbyA9IHRvO1xuICAgICAgICB9XG4gICAgICAgIGlmIChsYXN0RnJvbSA9PSBudWxsIHx8IGZyb20gPiBsYXN0RnJvbSkge1xuICAgICAgICAgICAgbGFzdEZyb20gPSBmcm9tO1xuICAgICAgICAgICAgbGFzdFRvID0gdG87XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICBpZiAobGFzdEZyb20gPT0gbnVsbCB8fCBwcmV2RnJvbSA9PSBudWxsICYmIGxhc3RGcm9tID09IHNlbC5mcm9tKVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgdmlldy5kaXNwYXRjaCh7IHNlbGVjdGlvbjogeyBhbmNob3I6IHByZXZGcm9tICE9PSBudWxsICYmIHByZXZGcm9tICE9PSB2b2lkIDAgPyBwcmV2RnJvbSA6IGxhc3RGcm9tLCBoZWFkOiBwcmV2VG8gIT09IG51bGwgJiYgcHJldlRvICE9PSB2b2lkIDAgPyBwcmV2VG8gOiBsYXN0VG8gfSwgc2Nyb2xsSW50b1ZpZXc6IHRydWUgfSk7XG4gICAgcmV0dXJuIHRydWU7XG59O1xuLyoqXG5BIHNldCBvZiBkZWZhdWx0IGtleSBiaW5kaW5ncyBmb3IgdGhlIGxpbnQgZnVuY3Rpb25hbGl0eS5cblxuLSBDdHJsLVNoaWZ0LW0gKENtZC1TaGlmdC1tIG9uIG1hY09TKTogW2BvcGVuTGludFBhbmVsYF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNsaW50Lm9wZW5MaW50UGFuZWwpXG4tIEY4OiBbYG5leHREaWFnbm9zdGljYF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNsaW50Lm5leHREaWFnbm9zdGljKVxuKi9cbmNvbnN0IGxpbnRLZXltYXAgPSBbXG4gICAgeyBrZXk6IFwiTW9kLVNoaWZ0LW1cIiwgcnVuOiBvcGVuTGludFBhbmVsLCBwcmV2ZW50RGVmYXVsdDogdHJ1ZSB9LFxuICAgIHsga2V5OiBcIkY4XCIsIHJ1bjogbmV4dERpYWdub3N0aWMgfVxuXTtcbmNvbnN0IGxpbnRQbHVnaW4gPSAvKkBfX1BVUkVfXyovVmlld1BsdWdpbi5mcm9tQ2xhc3MoY2xhc3Mge1xuICAgIGNvbnN0cnVjdG9yKHZpZXcpIHtcbiAgICAgICAgdGhpcy52aWV3ID0gdmlldztcbiAgICAgICAgdGhpcy50aW1lb3V0ID0gLTE7XG4gICAgICAgIHRoaXMuc2V0ID0gdHJ1ZTtcbiAgICAgICAgbGV0IHsgZGVsYXkgfSA9IHZpZXcuc3RhdGUuZmFjZXQobGludENvbmZpZyk7XG4gICAgICAgIHRoaXMubGludFRpbWUgPSBEYXRlLm5vdygpICsgZGVsYXk7XG4gICAgICAgIHRoaXMucnVuID0gdGhpcy5ydW4uYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy50aW1lb3V0ID0gc2V0VGltZW91dCh0aGlzLnJ1biwgZGVsYXkpO1xuICAgIH1cbiAgICBydW4oKSB7XG4gICAgICAgIGNsZWFyVGltZW91dCh0aGlzLnRpbWVvdXQpO1xuICAgICAgICBsZXQgbm93ID0gRGF0ZS5ub3coKTtcbiAgICAgICAgaWYgKG5vdyA8IHRoaXMubGludFRpbWUgLSAxMCkge1xuICAgICAgICAgICAgdGhpcy50aW1lb3V0ID0gc2V0VGltZW91dCh0aGlzLnJ1biwgdGhpcy5saW50VGltZSAtIG5vdyk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnNldCA9IGZhbHNlO1xuICAgICAgICAgICAgbGV0IHsgc3RhdGUgfSA9IHRoaXMudmlldywgeyBzb3VyY2VzIH0gPSBzdGF0ZS5mYWNldChsaW50Q29uZmlnKTtcbiAgICAgICAgICAgIGlmIChzb3VyY2VzLmxlbmd0aClcbiAgICAgICAgICAgICAgICBiYXRjaFJlc3VsdHMoc291cmNlcy5tYXAocyA9PiBQcm9taXNlLnJlc29sdmUocyh0aGlzLnZpZXcpKSksIGFubm90YXRpb25zID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMudmlldy5zdGF0ZS5kb2MgPT0gc3RhdGUuZG9jKVxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy52aWV3LmRpc3BhdGNoKHNldERpYWdub3N0aWNzKHRoaXMudmlldy5zdGF0ZSwgYW5ub3RhdGlvbnMucmVkdWNlKChhLCBiKSA9PiBhLmNvbmNhdChiKSkpKTtcbiAgICAgICAgICAgICAgICB9LCBlcnJvciA9PiB7IGxvZ0V4Y2VwdGlvbih0aGlzLnZpZXcuc3RhdGUsIGVycm9yKTsgfSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgdXBkYXRlKHVwZGF0ZSkge1xuICAgICAgICBsZXQgY29uZmlnID0gdXBkYXRlLnN0YXRlLmZhY2V0KGxpbnRDb25maWcpO1xuICAgICAgICBpZiAodXBkYXRlLmRvY0NoYW5nZWQgfHwgY29uZmlnICE9IHVwZGF0ZS5zdGFydFN0YXRlLmZhY2V0KGxpbnRDb25maWcpIHx8XG4gICAgICAgICAgICBjb25maWcubmVlZHNSZWZyZXNoICYmIGNvbmZpZy5uZWVkc1JlZnJlc2godXBkYXRlKSkge1xuICAgICAgICAgICAgdGhpcy5saW50VGltZSA9IERhdGUubm93KCkgKyBjb25maWcuZGVsYXk7XG4gICAgICAgICAgICBpZiAoIXRoaXMuc2V0KSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIHRoaXMudGltZW91dCA9IHNldFRpbWVvdXQodGhpcy5ydW4sIGNvbmZpZy5kZWxheSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgZm9yY2UoKSB7XG4gICAgICAgIGlmICh0aGlzLnNldCkge1xuICAgICAgICAgICAgdGhpcy5saW50VGltZSA9IERhdGUubm93KCk7XG4gICAgICAgICAgICB0aGlzLnJ1bigpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGRlc3Ryb3koKSB7XG4gICAgICAgIGNsZWFyVGltZW91dCh0aGlzLnRpbWVvdXQpO1xuICAgIH1cbn0pO1xuZnVuY3Rpb24gYmF0Y2hSZXN1bHRzKHByb21pc2VzLCBzaW5rLCBlcnJvcikge1xuICAgIGxldCBjb2xsZWN0ZWQgPSBbXSwgdGltZW91dCA9IC0xO1xuICAgIGZvciAobGV0IHAgb2YgcHJvbWlzZXMpXG4gICAgICAgIHAudGhlbih2YWx1ZSA9PiB7XG4gICAgICAgICAgICBjb2xsZWN0ZWQucHVzaCh2YWx1ZSk7XG4gICAgICAgICAgICBjbGVhclRpbWVvdXQodGltZW91dCk7XG4gICAgICAgICAgICBpZiAoY29sbGVjdGVkLmxlbmd0aCA9PSBwcm9taXNlcy5sZW5ndGgpXG4gICAgICAgICAgICAgICAgc2luayhjb2xsZWN0ZWQpO1xuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgIHRpbWVvdXQgPSBzZXRUaW1lb3V0KCgpID0+IHNpbmsoY29sbGVjdGVkKSwgMjAwKTtcbiAgICAgICAgfSwgZXJyb3IpO1xufVxuY29uc3QgbGludENvbmZpZyA9IC8qQF9fUFVSRV9fKi9GYWNldC5kZWZpbmUoe1xuICAgIGNvbWJpbmUoaW5wdXQpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHNvdXJjZXM6IGlucHV0Lm1hcChpID0+IGkuc291cmNlKS5maWx0ZXIoeCA9PiB4ICE9IG51bGwpLFxuICAgICAgICAgICAgLi4uY29tYmluZUNvbmZpZyhpbnB1dC5tYXAoaSA9PiBpLmNvbmZpZyksIHtcbiAgICAgICAgICAgICAgICBkZWxheTogNzUwLFxuICAgICAgICAgICAgICAgIG1hcmtlckZpbHRlcjogbnVsbCxcbiAgICAgICAgICAgICAgICB0b29sdGlwRmlsdGVyOiBudWxsLFxuICAgICAgICAgICAgICAgIG5lZWRzUmVmcmVzaDogbnVsbCxcbiAgICAgICAgICAgICAgICBoaWRlT246ICgpID0+IG51bGwsXG4gICAgICAgICAgICB9LCB7XG4gICAgICAgICAgICAgICAgZGVsYXk6IE1hdGgubWF4LFxuICAgICAgICAgICAgICAgIG1hcmtlckZpbHRlcjogY29tYmluZUZpbHRlcixcbiAgICAgICAgICAgICAgICB0b29sdGlwRmlsdGVyOiBjb21iaW5lRmlsdGVyLFxuICAgICAgICAgICAgICAgIG5lZWRzUmVmcmVzaDogKGEsIGIpID0+ICFhID8gYiA6ICFiID8gYSA6IHUgPT4gYSh1KSB8fCBiKHUpLFxuICAgICAgICAgICAgICAgIGhpZGVPbjogKGEsIGIpID0+ICFhID8gYiA6ICFiID8gYSA6ICh0LCB4LCB5KSA9PiBhKHQsIHgsIHkpIHx8IGIodCwgeCwgeSksXG4gICAgICAgICAgICAgICAgYXV0b1BhbmVsOiAoYSwgYikgPT4gYSB8fCBiXG4gICAgICAgICAgICB9KVxuICAgICAgICB9O1xuICAgIH1cbn0pO1xuZnVuY3Rpb24gY29tYmluZUZpbHRlcihhLCBiKSB7XG4gICAgcmV0dXJuICFhID8gYiA6ICFiID8gYSA6IChkLCBzKSA9PiBiKGEoZCwgcyksIHMpO1xufVxuLyoqXG5HaXZlbiBhIGRpYWdub3N0aWMgc291cmNlLCB0aGlzIGZ1bmN0aW9uIHJldHVybnMgYW4gZXh0ZW5zaW9uIHRoYXRcbmVuYWJsZXMgbGludGluZyB3aXRoIHRoYXQgc291cmNlLiBJdCB3aWxsIGJlIGNhbGxlZCB3aGVuZXZlciB0aGVcbmVkaXRvciBpcyBpZGxlIChhZnRlciBpdHMgY29udGVudCBjaGFuZ2VkKS5cblxuTm90ZSB0aGF0IHNldHRpbmdzIGdpdmVuIGhlcmUgd2lsbCBhcHBseSB0byBhbGwgbGludGVycyBhY3RpdmUgaW5cbnRoZSBlZGl0b3IuIElmIGBudWxsYCBpcyBnaXZlbiBhcyBzb3VyY2UsIHRoaXMgb25seSBjb25maWd1cmVzIHRoZVxubGludCBleHRlbnNpb24uXG4qL1xuZnVuY3Rpb24gbGludGVyKHNvdXJjZSwgY29uZmlnID0ge30pIHtcbiAgICByZXR1cm4gW1xuICAgICAgICBsaW50Q29uZmlnLm9mKHsgc291cmNlLCBjb25maWcgfSksXG4gICAgICAgIGxpbnRQbHVnaW4sXG4gICAgICAgIGxpbnRFeHRlbnNpb25zXG4gICAgXTtcbn1cbi8qKlxuRm9yY2VzIGFueSBsaW50ZXJzIFtjb25maWd1cmVkXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI2xpbnQubGludGVyKSB0byBydW4gd2hlbiB0aGVcbmVkaXRvciBpcyBpZGxlIHRvIHJ1biByaWdodCBhd2F5LlxuKi9cbmZ1bmN0aW9uIGZvcmNlTGludGluZyh2aWV3KSB7XG4gICAgbGV0IHBsdWdpbiA9IHZpZXcucGx1Z2luKGxpbnRQbHVnaW4pO1xuICAgIGlmIChwbHVnaW4pXG4gICAgICAgIHBsdWdpbi5mb3JjZSgpO1xufVxuZnVuY3Rpb24gYXNzaWduS2V5cyhhY3Rpb25zKSB7XG4gICAgbGV0IGFzc2lnbmVkID0gW107XG4gICAgaWYgKGFjdGlvbnMpXG4gICAgICAgIGFjdGlvbnM6IGZvciAobGV0IHsgbmFtZSB9IG9mIGFjdGlvbnMpIHtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbmFtZS5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIGxldCBjaCA9IG5hbWVbaV07XG4gICAgICAgICAgICAgICAgaWYgKC9bYS16QS1aXS8udGVzdChjaCkgJiYgIWFzc2lnbmVkLnNvbWUoYyA9PiBjLnRvTG93ZXJDYXNlKCkgPT0gY2gudG9Mb3dlckNhc2UoKSkpIHtcbiAgICAgICAgICAgICAgICAgICAgYXNzaWduZWQucHVzaChjaCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlIGFjdGlvbnM7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYXNzaWduZWQucHVzaChcIlwiKTtcbiAgICAgICAgfVxuICAgIHJldHVybiBhc3NpZ25lZDtcbn1cbmZ1bmN0aW9uIHJlbmRlckRpYWdub3N0aWModmlldywgZGlhZ25vc3RpYywgaW5QYW5lbCkge1xuICAgIHZhciBfYTtcbiAgICBsZXQga2V5cyA9IGluUGFuZWwgPyBhc3NpZ25LZXlzKGRpYWdub3N0aWMuYWN0aW9ucykgOiBbXTtcbiAgICByZXR1cm4gZWx0KFwibGlcIiwgeyBjbGFzczogXCJjbS1kaWFnbm9zdGljIGNtLWRpYWdub3N0aWMtXCIgKyBkaWFnbm9zdGljLnNldmVyaXR5IH0sIGVsdChcInNwYW5cIiwgeyBjbGFzczogXCJjbS1kaWFnbm9zdGljVGV4dFwiIH0sIGRpYWdub3N0aWMucmVuZGVyTWVzc2FnZSA/IGRpYWdub3N0aWMucmVuZGVyTWVzc2FnZSh2aWV3KSA6IGRpYWdub3N0aWMubWVzc2FnZSksIChfYSA9IGRpYWdub3N0aWMuYWN0aW9ucykgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLm1hcCgoYWN0aW9uLCBpKSA9PiB7XG4gICAgICAgIGxldCBmaXJlZCA9IGZhbHNlLCBjbGljayA9IChlKSA9PiB7XG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICBpZiAoZmlyZWQpXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgZmlyZWQgPSB0cnVlO1xuICAgICAgICAgICAgbGV0IGZvdW5kID0gZmluZERpYWdub3N0aWModmlldy5zdGF0ZS5maWVsZChsaW50U3RhdGUpLmRpYWdub3N0aWNzLCBkaWFnbm9zdGljKTtcbiAgICAgICAgICAgIGlmIChmb3VuZClcbiAgICAgICAgICAgICAgICBhY3Rpb24uYXBwbHkodmlldywgZm91bmQuZnJvbSwgZm91bmQudG8pO1xuICAgICAgICB9O1xuICAgICAgICBsZXQgeyBuYW1lIH0gPSBhY3Rpb24sIGtleUluZGV4ID0ga2V5c1tpXSA/IG5hbWUuaW5kZXhPZihrZXlzW2ldKSA6IC0xO1xuICAgICAgICBsZXQgbmFtZUVsdCA9IGtleUluZGV4IDwgMCA/IG5hbWUgOiBbbmFtZS5zbGljZSgwLCBrZXlJbmRleCksXG4gICAgICAgICAgICBlbHQoXCJ1XCIsIG5hbWUuc2xpY2Uoa2V5SW5kZXgsIGtleUluZGV4ICsgMSkpLFxuICAgICAgICAgICAgbmFtZS5zbGljZShrZXlJbmRleCArIDEpXTtcbiAgICAgICAgbGV0IG1hcmtDbGFzcyA9IGFjdGlvbi5tYXJrQ2xhc3MgPyBcIiBcIiArIGFjdGlvbi5tYXJrQ2xhc3MgOiBcIlwiO1xuICAgICAgICByZXR1cm4gZWx0KFwiYnV0dG9uXCIsIHtcbiAgICAgICAgICAgIHR5cGU6IFwiYnV0dG9uXCIsXG4gICAgICAgICAgICBjbGFzczogXCJjbS1kaWFnbm9zdGljQWN0aW9uXCIgKyBtYXJrQ2xhc3MsXG4gICAgICAgICAgICBvbmNsaWNrOiBjbGljayxcbiAgICAgICAgICAgIG9ubW91c2Vkb3duOiBjbGljayxcbiAgICAgICAgICAgIFwiYXJpYS1sYWJlbFwiOiBgIEFjdGlvbjogJHtuYW1lfSR7a2V5SW5kZXggPCAwID8gXCJcIiA6IGAgKGFjY2VzcyBrZXkgXCIke2tleXNbaV19KVwiYH0uYFxuICAgICAgICB9LCBuYW1lRWx0KTtcbiAgICB9KSwgZGlhZ25vc3RpYy5zb3VyY2UgJiYgZWx0KFwiZGl2XCIsIHsgY2xhc3M6IFwiY20tZGlhZ25vc3RpY1NvdXJjZVwiIH0sIGRpYWdub3N0aWMuc291cmNlKSk7XG59XG5jbGFzcyBEaWFnbm9zdGljV2lkZ2V0IGV4dGVuZHMgV2lkZ2V0VHlwZSB7XG4gICAgY29uc3RydWN0b3Ioc2V2KSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIHRoaXMuc2V2ID0gc2V2O1xuICAgIH1cbiAgICBlcShvdGhlcikgeyByZXR1cm4gb3RoZXIuc2V2ID09IHRoaXMuc2V2OyB9XG4gICAgdG9ET00oKSB7XG4gICAgICAgIHJldHVybiBlbHQoXCJzcGFuXCIsIHsgY2xhc3M6IFwiY20tbGludFBvaW50IGNtLWxpbnRQb2ludC1cIiArIHRoaXMuc2V2IH0pO1xuICAgIH1cbn1cbmNsYXNzIFBhbmVsSXRlbSB7XG4gICAgY29uc3RydWN0b3IodmlldywgZGlhZ25vc3RpYykge1xuICAgICAgICB0aGlzLmRpYWdub3N0aWMgPSBkaWFnbm9zdGljO1xuICAgICAgICB0aGlzLmlkID0gXCJpdGVtX1wiICsgTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMHhmZmZmZmZmZikudG9TdHJpbmcoMTYpO1xuICAgICAgICB0aGlzLmRvbSA9IHJlbmRlckRpYWdub3N0aWModmlldywgZGlhZ25vc3RpYywgdHJ1ZSk7XG4gICAgICAgIHRoaXMuZG9tLmlkID0gdGhpcy5pZDtcbiAgICAgICAgdGhpcy5kb20uc2V0QXR0cmlidXRlKFwicm9sZVwiLCBcIm9wdGlvblwiKTtcbiAgICB9XG59XG5jbGFzcyBMaW50UGFuZWwge1xuICAgIGNvbnN0cnVjdG9yKHZpZXcpIHtcbiAgICAgICAgdGhpcy52aWV3ID0gdmlldztcbiAgICAgICAgdGhpcy5pdGVtcyA9IFtdO1xuICAgICAgICBsZXQgb25rZXlkb3duID0gKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICBpZiAoZXZlbnQua2V5Q29kZSA9PSAyNykgeyAvLyBFc2NhcGVcbiAgICAgICAgICAgICAgICBjbG9zZUxpbnRQYW5lbCh0aGlzLnZpZXcpO1xuICAgICAgICAgICAgICAgIHRoaXMudmlldy5mb2N1cygpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoZXZlbnQua2V5Q29kZSA9PSAzOCB8fCBldmVudC5rZXlDb2RlID09IDMzKSB7IC8vIEFycm93VXAsIFBhZ2VVcFxuICAgICAgICAgICAgICAgIHRoaXMubW92ZVNlbGVjdGlvbigodGhpcy5zZWxlY3RlZEluZGV4IC0gMSArIHRoaXMuaXRlbXMubGVuZ3RoKSAlIHRoaXMuaXRlbXMubGVuZ3RoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGV2ZW50LmtleUNvZGUgPT0gNDAgfHwgZXZlbnQua2V5Q29kZSA9PSAzNCkgeyAvLyBBcnJvd0Rvd24sIFBhZ2VEb3duXG4gICAgICAgICAgICAgICAgdGhpcy5tb3ZlU2VsZWN0aW9uKCh0aGlzLnNlbGVjdGVkSW5kZXggKyAxKSAlIHRoaXMuaXRlbXMubGVuZ3RoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGV2ZW50LmtleUNvZGUgPT0gMzYpIHsgLy8gSG9tZVxuICAgICAgICAgICAgICAgIHRoaXMubW92ZVNlbGVjdGlvbigwKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGV2ZW50LmtleUNvZGUgPT0gMzUpIHsgLy8gRW5kXG4gICAgICAgICAgICAgICAgdGhpcy5tb3ZlU2VsZWN0aW9uKHRoaXMuaXRlbXMubGVuZ3RoIC0gMSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChldmVudC5rZXlDb2RlID09IDEzKSB7IC8vIEVudGVyXG4gICAgICAgICAgICAgICAgdGhpcy52aWV3LmZvY3VzKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChldmVudC5rZXlDb2RlID49IDY1ICYmIGV2ZW50LmtleUNvZGUgPD0gOTAgJiYgdGhpcy5zZWxlY3RlZEluZGV4ID49IDApIHsgLy8gQS1aXG4gICAgICAgICAgICAgICAgbGV0IHsgZGlhZ25vc3RpYyB9ID0gdGhpcy5pdGVtc1t0aGlzLnNlbGVjdGVkSW5kZXhdLCBrZXlzID0gYXNzaWduS2V5cyhkaWFnbm9zdGljLmFjdGlvbnMpO1xuICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwga2V5cy5sZW5ndGg7IGkrKylcbiAgICAgICAgICAgICAgICAgICAgaWYgKGtleXNbaV0udG9VcHBlckNhc2UoKS5jaGFyQ29kZUF0KDApID09IGV2ZW50LmtleUNvZGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBmb3VuZCA9IGZpbmREaWFnbm9zdGljKHRoaXMudmlldy5zdGF0ZS5maWVsZChsaW50U3RhdGUpLmRpYWdub3N0aWNzLCBkaWFnbm9zdGljKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChmb3VuZClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaWFnbm9zdGljLmFjdGlvbnNbaV0uYXBwbHkodmlldywgZm91bmQuZnJvbSwgZm91bmQudG8pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICB9O1xuICAgICAgICBsZXQgb25jbGljayA9IChldmVudCkgPT4ge1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLml0ZW1zLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuaXRlbXNbaV0uZG9tLmNvbnRhaW5zKGV2ZW50LnRhcmdldCkpXG4gICAgICAgICAgICAgICAgICAgIHRoaXMubW92ZVNlbGVjdGlvbihpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5saXN0ID0gZWx0KFwidWxcIiwge1xuICAgICAgICAgICAgdGFiSW5kZXg6IDAsXG4gICAgICAgICAgICByb2xlOiBcImxpc3Rib3hcIixcbiAgICAgICAgICAgIFwiYXJpYS1sYWJlbFwiOiB0aGlzLnZpZXcuc3RhdGUucGhyYXNlKFwiRGlhZ25vc3RpY3NcIiksXG4gICAgICAgICAgICBvbmtleWRvd24sXG4gICAgICAgICAgICBvbmNsaWNrXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmRvbSA9IGVsdChcImRpdlwiLCB7IGNsYXNzOiBcImNtLXBhbmVsLWxpbnRcIiB9LCB0aGlzLmxpc3QsIGVsdChcImJ1dHRvblwiLCB7XG4gICAgICAgICAgICB0eXBlOiBcImJ1dHRvblwiLFxuICAgICAgICAgICAgbmFtZTogXCJjbG9zZVwiLFxuICAgICAgICAgICAgXCJhcmlhLWxhYmVsXCI6IHRoaXMudmlldy5zdGF0ZS5waHJhc2UoXCJjbG9zZVwiKSxcbiAgICAgICAgICAgIG9uY2xpY2s6ICgpID0+IGNsb3NlTGludFBhbmVsKHRoaXMudmlldylcbiAgICAgICAgfSwgXCLDl1wiKSk7XG4gICAgICAgIHRoaXMudXBkYXRlKCk7XG4gICAgfVxuICAgIGdldCBzZWxlY3RlZEluZGV4KCkge1xuICAgICAgICBsZXQgc2VsZWN0ZWQgPSB0aGlzLnZpZXcuc3RhdGUuZmllbGQobGludFN0YXRlKS5zZWxlY3RlZDtcbiAgICAgICAgaWYgKCFzZWxlY3RlZClcbiAgICAgICAgICAgIHJldHVybiAtMTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLml0ZW1zLmxlbmd0aDsgaSsrKVxuICAgICAgICAgICAgaWYgKHRoaXMuaXRlbXNbaV0uZGlhZ25vc3RpYyA9PSBzZWxlY3RlZC5kaWFnbm9zdGljKVxuICAgICAgICAgICAgICAgIHJldHVybiBpO1xuICAgICAgICByZXR1cm4gLTE7XG4gICAgfVxuICAgIHVwZGF0ZSgpIHtcbiAgICAgICAgbGV0IHsgZGlhZ25vc3RpY3MsIHNlbGVjdGVkIH0gPSB0aGlzLnZpZXcuc3RhdGUuZmllbGQobGludFN0YXRlKTtcbiAgICAgICAgbGV0IGkgPSAwLCBuZWVkc1N5bmMgPSBmYWxzZSwgbmV3U2VsZWN0ZWRJdGVtID0gbnVsbDtcbiAgICAgICAgbGV0IHNlZW4gPSBuZXcgU2V0KCk7XG4gICAgICAgIGRpYWdub3N0aWNzLmJldHdlZW4oMCwgdGhpcy52aWV3LnN0YXRlLmRvYy5sZW5ndGgsIChfc3RhcnQsIF9lbmQsIHsgc3BlYyB9KSA9PiB7XG4gICAgICAgICAgICBmb3IgKGxldCBkaWFnbm9zdGljIG9mIHNwZWMuZGlhZ25vc3RpY3MpIHtcbiAgICAgICAgICAgICAgICBpZiAoc2Vlbi5oYXMoZGlhZ25vc3RpYykpXG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIHNlZW4uYWRkKGRpYWdub3N0aWMpO1xuICAgICAgICAgICAgICAgIGxldCBmb3VuZCA9IC0xLCBpdGVtO1xuICAgICAgICAgICAgICAgIGZvciAobGV0IGogPSBpOyBqIDwgdGhpcy5pdGVtcy5sZW5ndGg7IGorKylcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuaXRlbXNbal0uZGlhZ25vc3RpYyA9PSBkaWFnbm9zdGljKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmb3VuZCA9IGo7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChmb3VuZCA8IDApIHtcbiAgICAgICAgICAgICAgICAgICAgaXRlbSA9IG5ldyBQYW5lbEl0ZW0odGhpcy52aWV3LCBkaWFnbm9zdGljKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pdGVtcy5zcGxpY2UoaSwgMCwgaXRlbSk7XG4gICAgICAgICAgICAgICAgICAgIG5lZWRzU3luYyA9IHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBpdGVtID0gdGhpcy5pdGVtc1tmb3VuZF07XG4gICAgICAgICAgICAgICAgICAgIGlmIChmb3VuZCA+IGkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaXRlbXMuc3BsaWNlKGksIGZvdW5kIC0gaSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBuZWVkc1N5bmMgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChzZWxlY3RlZCAmJiBpdGVtLmRpYWdub3N0aWMgPT0gc2VsZWN0ZWQuZGlhZ25vc3RpYykge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWl0ZW0uZG9tLmhhc0F0dHJpYnV0ZShcImFyaWEtc2VsZWN0ZWRcIikpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW0uZG9tLnNldEF0dHJpYnV0ZShcImFyaWEtc2VsZWN0ZWRcIiwgXCJ0cnVlXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgbmV3U2VsZWN0ZWRJdGVtID0gaXRlbTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChpdGVtLmRvbS5oYXNBdHRyaWJ1dGUoXCJhcmlhLXNlbGVjdGVkXCIpKSB7XG4gICAgICAgICAgICAgICAgICAgIGl0ZW0uZG9tLnJlbW92ZUF0dHJpYnV0ZShcImFyaWEtc2VsZWN0ZWRcIik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGkrKztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHdoaWxlIChpIDwgdGhpcy5pdGVtcy5sZW5ndGggJiYgISh0aGlzLml0ZW1zLmxlbmd0aCA9PSAxICYmIHRoaXMuaXRlbXNbMF0uZGlhZ25vc3RpYy5mcm9tIDwgMCkpIHtcbiAgICAgICAgICAgIG5lZWRzU3luYyA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLml0ZW1zLnBvcCgpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLml0ZW1zLmxlbmd0aCA9PSAwKSB7XG4gICAgICAgICAgICB0aGlzLml0ZW1zLnB1c2gobmV3IFBhbmVsSXRlbSh0aGlzLnZpZXcsIHtcbiAgICAgICAgICAgICAgICBmcm9tOiAtMSwgdG86IC0xLFxuICAgICAgICAgICAgICAgIHNldmVyaXR5OiBcImluZm9cIixcbiAgICAgICAgICAgICAgICBtZXNzYWdlOiB0aGlzLnZpZXcuc3RhdGUucGhyYXNlKFwiTm8gZGlhZ25vc3RpY3NcIilcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIG5lZWRzU3luYyA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG5ld1NlbGVjdGVkSXRlbSkge1xuICAgICAgICAgICAgdGhpcy5saXN0LnNldEF0dHJpYnV0ZShcImFyaWEtYWN0aXZlZGVzY2VuZGFudFwiLCBuZXdTZWxlY3RlZEl0ZW0uaWQpO1xuICAgICAgICAgICAgdGhpcy52aWV3LnJlcXVlc3RNZWFzdXJlKHtcbiAgICAgICAgICAgICAgICBrZXk6IHRoaXMsXG4gICAgICAgICAgICAgICAgcmVhZDogKCkgPT4gKHsgc2VsOiBuZXdTZWxlY3RlZEl0ZW0uZG9tLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLCBwYW5lbDogdGhpcy5saXN0LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpIH0pLFxuICAgICAgICAgICAgICAgIHdyaXRlOiAoeyBzZWwsIHBhbmVsIH0pID0+IHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IHNjYWxlWSA9IHBhbmVsLmhlaWdodCAvIHRoaXMubGlzdC5vZmZzZXRIZWlnaHQ7XG4gICAgICAgICAgICAgICAgICAgIGlmIChzZWwudG9wIDwgcGFuZWwudG9wKVxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5saXN0LnNjcm9sbFRvcCAtPSAocGFuZWwudG9wIC0gc2VsLnRvcCkgLyBzY2FsZVk7XG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKHNlbC5ib3R0b20gPiBwYW5lbC5ib3R0b20pXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmxpc3Quc2Nyb2xsVG9wICs9IChzZWwuYm90dG9tIC0gcGFuZWwuYm90dG9tKSAvIHNjYWxlWTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0aGlzLnNlbGVjdGVkSW5kZXggPCAwKSB7XG4gICAgICAgICAgICB0aGlzLmxpc3QucmVtb3ZlQXR0cmlidXRlKFwiYXJpYS1hY3RpdmVkZXNjZW5kYW50XCIpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChuZWVkc1N5bmMpXG4gICAgICAgICAgICB0aGlzLnN5bmMoKTtcbiAgICB9XG4gICAgc3luYygpIHtcbiAgICAgICAgbGV0IGRvbVBvcyA9IHRoaXMubGlzdC5maXJzdENoaWxkO1xuICAgICAgICBmdW5jdGlvbiBybSgpIHtcbiAgICAgICAgICAgIGxldCBwcmV2ID0gZG9tUG9zO1xuICAgICAgICAgICAgZG9tUG9zID0gcHJldi5uZXh0U2libGluZztcbiAgICAgICAgICAgIHByZXYucmVtb3ZlKCk7XG4gICAgICAgIH1cbiAgICAgICAgZm9yIChsZXQgaXRlbSBvZiB0aGlzLml0ZW1zKSB7XG4gICAgICAgICAgICBpZiAoaXRlbS5kb20ucGFyZW50Tm9kZSA9PSB0aGlzLmxpc3QpIHtcbiAgICAgICAgICAgICAgICB3aGlsZSAoZG9tUG9zICE9IGl0ZW0uZG9tKVxuICAgICAgICAgICAgICAgICAgICBybSgpO1xuICAgICAgICAgICAgICAgIGRvbVBvcyA9IGl0ZW0uZG9tLm5leHRTaWJsaW5nO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5saXN0Lmluc2VydEJlZm9yZShpdGVtLmRvbSwgZG9tUG9zKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB3aGlsZSAoZG9tUG9zKVxuICAgICAgICAgICAgcm0oKTtcbiAgICB9XG4gICAgbW92ZVNlbGVjdGlvbihzZWxlY3RlZEluZGV4KSB7XG4gICAgICAgIGlmICh0aGlzLnNlbGVjdGVkSW5kZXggPCAwKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICBsZXQgZmllbGQgPSB0aGlzLnZpZXcuc3RhdGUuZmllbGQobGludFN0YXRlKTtcbiAgICAgICAgbGV0IHNlbGVjdGlvbiA9IGZpbmREaWFnbm9zdGljKGZpZWxkLmRpYWdub3N0aWNzLCB0aGlzLml0ZW1zW3NlbGVjdGVkSW5kZXhdLmRpYWdub3N0aWMpO1xuICAgICAgICBpZiAoIXNlbGVjdGlvbilcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgdGhpcy52aWV3LmRpc3BhdGNoKHtcbiAgICAgICAgICAgIHNlbGVjdGlvbjogeyBhbmNob3I6IHNlbGVjdGlvbi5mcm9tLCBoZWFkOiBzZWxlY3Rpb24udG8gfSxcbiAgICAgICAgICAgIHNjcm9sbEludG9WaWV3OiB0cnVlLFxuICAgICAgICAgICAgZWZmZWN0czogbW92ZVBhbmVsU2VsZWN0aW9uLm9mKHNlbGVjdGlvbilcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHN0YXRpYyBvcGVuKHZpZXcpIHsgcmV0dXJuIG5ldyBMaW50UGFuZWwodmlldyk7IH1cbn1cbmZ1bmN0aW9uIHN2Zyhjb250ZW50LCBhdHRycyA9IGB2aWV3Qm94PVwiMCAwIDQwIDQwXCJgKSB7XG4gICAgcmV0dXJuIGB1cmwoJ2RhdGE6aW1hZ2Uvc3ZnK3htbCw8c3ZnIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiAke2F0dHJzfT4ke2VuY29kZVVSSUNvbXBvbmVudChjb250ZW50KX08L3N2Zz4nKWA7XG59XG5mdW5jdGlvbiB1bmRlcmxpbmUoY29sb3IpIHtcbiAgICByZXR1cm4gc3ZnKGA8cGF0aCBkPVwibTAgMi41IGwyIC0xLjUgbDEgMCBsMiAxLjUgbDEgMFwiIHN0cm9rZT1cIiR7Y29sb3J9XCIgZmlsbD1cIm5vbmVcIiBzdHJva2Utd2lkdGg9XCIuN1wiLz5gLCBgd2lkdGg9XCI2XCIgaGVpZ2h0PVwiM1wiYCk7XG59XG5jb25zdCBiYXNlVGhlbWUgPSAvKkBfX1BVUkVfXyovRWRpdG9yVmlldy5iYXNlVGhlbWUoe1xuICAgIFwiLmNtLWRpYWdub3N0aWNcIjoge1xuICAgICAgICBwYWRkaW5nOiBcIjNweCA2cHggM3B4IDhweFwiLFxuICAgICAgICBtYXJnaW5MZWZ0OiBcIi0xcHhcIixcbiAgICAgICAgZGlzcGxheTogXCJibG9ja1wiLFxuICAgICAgICB3aGl0ZVNwYWNlOiBcInByZS13cmFwXCJcbiAgICB9LFxuICAgIFwiLmNtLWRpYWdub3N0aWMtZXJyb3JcIjogeyBib3JkZXJMZWZ0OiBcIjVweCBzb2xpZCAjZDExXCIgfSxcbiAgICBcIi5jbS1kaWFnbm9zdGljLXdhcm5pbmdcIjogeyBib3JkZXJMZWZ0OiBcIjVweCBzb2xpZCBvcmFuZ2VcIiB9LFxuICAgIFwiLmNtLWRpYWdub3N0aWMtaW5mb1wiOiB7IGJvcmRlckxlZnQ6IFwiNXB4IHNvbGlkICM5OTlcIiB9LFxuICAgIFwiLmNtLWRpYWdub3N0aWMtaGludFwiOiB7IGJvcmRlckxlZnQ6IFwiNXB4IHNvbGlkICM2NmRcIiB9LFxuICAgIFwiLmNtLWRpYWdub3N0aWNBY3Rpb25cIjoge1xuICAgICAgICBmb250OiBcImluaGVyaXRcIixcbiAgICAgICAgYm9yZGVyOiBcIm5vbmVcIixcbiAgICAgICAgcGFkZGluZzogXCIycHggNHB4XCIsXG4gICAgICAgIGJhY2tncm91bmRDb2xvcjogXCIjNDQ0XCIsXG4gICAgICAgIGNvbG9yOiBcIndoaXRlXCIsXG4gICAgICAgIGJvcmRlclJhZGl1czogXCIzcHhcIixcbiAgICAgICAgbWFyZ2luTGVmdDogXCI4cHhcIixcbiAgICAgICAgY3Vyc29yOiBcInBvaW50ZXJcIlxuICAgIH0sXG4gICAgXCIuY20tZGlhZ25vc3RpY1NvdXJjZVwiOiB7XG4gICAgICAgIGZvbnRTaXplOiBcIjcwJVwiLFxuICAgICAgICBvcGFjaXR5OiAuN1xuICAgIH0sXG4gICAgXCIuY20tbGludFJhbmdlXCI6IHtcbiAgICAgICAgYmFja2dyb3VuZFBvc2l0aW9uOiBcImxlZnQgYm90dG9tXCIsXG4gICAgICAgIGJhY2tncm91bmRSZXBlYXQ6IFwicmVwZWF0LXhcIixcbiAgICAgICAgcGFkZGluZ0JvdHRvbTogXCIwLjdweFwiLFxuICAgIH0sXG4gICAgXCIuY20tbGludFJhbmdlLWVycm9yXCI6IHsgYmFja2dyb3VuZEltYWdlOiAvKkBfX1BVUkVfXyovdW5kZXJsaW5lKFwiI2QxMVwiKSB9LFxuICAgIFwiLmNtLWxpbnRSYW5nZS13YXJuaW5nXCI6IHsgYmFja2dyb3VuZEltYWdlOiAvKkBfX1BVUkVfXyovdW5kZXJsaW5lKFwib3JhbmdlXCIpIH0sXG4gICAgXCIuY20tbGludFJhbmdlLWluZm9cIjogeyBiYWNrZ3JvdW5kSW1hZ2U6IC8qQF9fUFVSRV9fKi91bmRlcmxpbmUoXCIjOTk5XCIpIH0sXG4gICAgXCIuY20tbGludFJhbmdlLWhpbnRcIjogeyBiYWNrZ3JvdW5kSW1hZ2U6IC8qQF9fUFVSRV9fKi91bmRlcmxpbmUoXCIjNjZkXCIpIH0sXG4gICAgXCIuY20tbGludFJhbmdlLWFjdGl2ZVwiOiB7IGJhY2tncm91bmRDb2xvcjogXCIjZmZkZDk5ODBcIiB9LFxuICAgIFwiLmNtLXRvb2x0aXAtbGludFwiOiB7XG4gICAgICAgIHBhZGRpbmc6IDAsXG4gICAgICAgIG1hcmdpbjogMFxuICAgIH0sXG4gICAgXCIuY20tbGludFBvaW50XCI6IHtcbiAgICAgICAgcG9zaXRpb246IFwicmVsYXRpdmVcIixcbiAgICAgICAgXCImOmFmdGVyXCI6IHtcbiAgICAgICAgICAgIGNvbnRlbnQ6ICdcIlwiJyxcbiAgICAgICAgICAgIHBvc2l0aW9uOiBcImFic29sdXRlXCIsXG4gICAgICAgICAgICBib3R0b206IDAsXG4gICAgICAgICAgICBsZWZ0OiBcIi0ycHhcIixcbiAgICAgICAgICAgIGJvcmRlckxlZnQ6IFwiM3B4IHNvbGlkIHRyYW5zcGFyZW50XCIsXG4gICAgICAgICAgICBib3JkZXJSaWdodDogXCIzcHggc29saWQgdHJhbnNwYXJlbnRcIixcbiAgICAgICAgICAgIGJvcmRlckJvdHRvbTogXCI0cHggc29saWQgI2QxMVwiXG4gICAgICAgIH1cbiAgICB9LFxuICAgIFwiLmNtLWxpbnRQb2ludC13YXJuaW5nXCI6IHtcbiAgICAgICAgXCImOmFmdGVyXCI6IHsgYm9yZGVyQm90dG9tQ29sb3I6IFwib3JhbmdlXCIgfVxuICAgIH0sXG4gICAgXCIuY20tbGludFBvaW50LWluZm9cIjoge1xuICAgICAgICBcIiY6YWZ0ZXJcIjogeyBib3JkZXJCb3R0b21Db2xvcjogXCIjOTk5XCIgfVxuICAgIH0sXG4gICAgXCIuY20tbGludFBvaW50LWhpbnRcIjoge1xuICAgICAgICBcIiY6YWZ0ZXJcIjogeyBib3JkZXJCb3R0b21Db2xvcjogXCIjNjZkXCIgfVxuICAgIH0sXG4gICAgXCIuY20tcGFuZWwuY20tcGFuZWwtbGludFwiOiB7XG4gICAgICAgIHBvc2l0aW9uOiBcInJlbGF0aXZlXCIsXG4gICAgICAgIFwiJiB1bFwiOiB7XG4gICAgICAgICAgICBtYXhIZWlnaHQ6IFwiMTAwcHhcIixcbiAgICAgICAgICAgIG92ZXJmbG93WTogXCJhdXRvXCIsXG4gICAgICAgICAgICBcIiYgW2FyaWEtc2VsZWN0ZWRdXCI6IHtcbiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6IFwiI2RkZFwiLFxuICAgICAgICAgICAgICAgIFwiJiB1XCI6IHsgdGV4dERlY29yYXRpb246IFwidW5kZXJsaW5lXCIgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIFwiJjpmb2N1cyBbYXJpYS1zZWxlY3RlZF1cIjoge1xuICAgICAgICAgICAgICAgIGJhY2tncm91bmRfZmFsbGJhY2s6IFwiI2JkZlwiLFxuICAgICAgICAgICAgICAgIGJhY2tncm91bmRDb2xvcjogXCJIaWdobGlnaHRcIixcbiAgICAgICAgICAgICAgICBjb2xvcl9mYWxsYmFjazogXCJ3aGl0ZVwiLFxuICAgICAgICAgICAgICAgIGNvbG9yOiBcIkhpZ2hsaWdodFRleHRcIlxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIFwiJiB1XCI6IHsgdGV4dERlY29yYXRpb246IFwibm9uZVwiIH0sXG4gICAgICAgICAgICBwYWRkaW5nOiAwLFxuICAgICAgICAgICAgbWFyZ2luOiAwXG4gICAgICAgIH0sXG4gICAgICAgIFwiJiBbbmFtZT1jbG9zZV1cIjoge1xuICAgICAgICAgICAgcG9zaXRpb246IFwiYWJzb2x1dGVcIixcbiAgICAgICAgICAgIHRvcDogXCIwXCIsXG4gICAgICAgICAgICByaWdodDogXCIycHhcIixcbiAgICAgICAgICAgIGJhY2tncm91bmQ6IFwiaW5oZXJpdFwiLFxuICAgICAgICAgICAgYm9yZGVyOiBcIm5vbmVcIixcbiAgICAgICAgICAgIGZvbnQ6IFwiaW5oZXJpdFwiLFxuICAgICAgICAgICAgcGFkZGluZzogMCxcbiAgICAgICAgICAgIG1hcmdpbjogMFxuICAgICAgICB9XG4gICAgfVxufSk7XG5mdW5jdGlvbiBzZXZlcml0eVdlaWdodChzZXYpIHtcbiAgICByZXR1cm4gc2V2ID09IFwiZXJyb3JcIiA/IDQgOiBzZXYgPT0gXCJ3YXJuaW5nXCIgPyAzIDogc2V2ID09IFwiaW5mb1wiID8gMiA6IDE7XG59XG5mdW5jdGlvbiBtYXhTZXZlcml0eShkaWFnbm9zdGljcykge1xuICAgIGxldCBzZXYgPSBcImhpbnRcIiwgd2VpZ2h0ID0gMTtcbiAgICBmb3IgKGxldCBkIG9mIGRpYWdub3N0aWNzKSB7XG4gICAgICAgIGxldCB3ID0gc2V2ZXJpdHlXZWlnaHQoZC5zZXZlcml0eSk7XG4gICAgICAgIGlmICh3ID4gd2VpZ2h0KSB7XG4gICAgICAgICAgICB3ZWlnaHQgPSB3O1xuICAgICAgICAgICAgc2V2ID0gZC5zZXZlcml0eTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gc2V2O1xufVxuY2xhc3MgTGludEd1dHRlck1hcmtlciBleHRlbmRzIEd1dHRlck1hcmtlciB7XG4gICAgY29uc3RydWN0b3IoZGlhZ25vc3RpY3MpIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy5kaWFnbm9zdGljcyA9IGRpYWdub3N0aWNzO1xuICAgICAgICB0aGlzLnNldmVyaXR5ID0gbWF4U2V2ZXJpdHkoZGlhZ25vc3RpY3MpO1xuICAgIH1cbiAgICB0b0RPTSh2aWV3KSB7XG4gICAgICAgIGxldCBlbHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICBlbHQuY2xhc3NOYW1lID0gXCJjbS1saW50LW1hcmtlciBjbS1saW50LW1hcmtlci1cIiArIHRoaXMuc2V2ZXJpdHk7XG4gICAgICAgIGxldCBkaWFnbm9zdGljcyA9IHRoaXMuZGlhZ25vc3RpY3M7XG4gICAgICAgIGxldCBkaWFnbm9zdGljc0ZpbHRlciA9IHZpZXcuc3RhdGUuZmFjZXQobGludEd1dHRlckNvbmZpZykudG9vbHRpcEZpbHRlcjtcbiAgICAgICAgaWYgKGRpYWdub3N0aWNzRmlsdGVyKVxuICAgICAgICAgICAgZGlhZ25vc3RpY3MgPSBkaWFnbm9zdGljc0ZpbHRlcihkaWFnbm9zdGljcywgdmlldy5zdGF0ZSk7XG4gICAgICAgIGlmIChkaWFnbm9zdGljcy5sZW5ndGgpXG4gICAgICAgICAgICBlbHQub25tb3VzZW92ZXIgPSAoKSA9PiBndXR0ZXJNYXJrZXJNb3VzZU92ZXIodmlldywgZWx0LCBkaWFnbm9zdGljcyk7XG4gICAgICAgIHJldHVybiBlbHQ7XG4gICAgfVxufVxuZnVuY3Rpb24gdHJhY2tIb3Zlck9uKHZpZXcsIG1hcmtlcikge1xuICAgIGxldCBtb3VzZW1vdmUgPSAoZXZlbnQpID0+IHtcbiAgICAgICAgbGV0IHJlY3QgPSBtYXJrZXIuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICAgIGlmIChldmVudC5jbGllbnRYID4gcmVjdC5sZWZ0IC0gMTAgLyogSG92ZXIuTWFyZ2luICovICYmIGV2ZW50LmNsaWVudFggPCByZWN0LnJpZ2h0ICsgMTAgLyogSG92ZXIuTWFyZ2luICovICYmXG4gICAgICAgICAgICBldmVudC5jbGllbnRZID4gcmVjdC50b3AgLSAxMCAvKiBIb3Zlci5NYXJnaW4gKi8gJiYgZXZlbnQuY2xpZW50WSA8IHJlY3QuYm90dG9tICsgMTAgLyogSG92ZXIuTWFyZ2luICovKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICBmb3IgKGxldCB0YXJnZXQgPSBldmVudC50YXJnZXQ7IHRhcmdldDsgdGFyZ2V0ID0gdGFyZ2V0LnBhcmVudE5vZGUpIHtcbiAgICAgICAgICAgIGlmICh0YXJnZXQubm9kZVR5cGUgPT0gMSAmJiB0YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwiY20tdG9vbHRpcC1saW50XCIpKVxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1vdXNlbW92ZVwiLCBtb3VzZW1vdmUpO1xuICAgICAgICBpZiAodmlldy5zdGF0ZS5maWVsZChsaW50R3V0dGVyVG9vbHRpcCkpXG4gICAgICAgICAgICB2aWV3LmRpc3BhdGNoKHsgZWZmZWN0czogc2V0TGludEd1dHRlclRvb2x0aXAub2YobnVsbCkgfSk7XG4gICAgfTtcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlbW92ZVwiLCBtb3VzZW1vdmUpO1xufVxuZnVuY3Rpb24gZ3V0dGVyTWFya2VyTW91c2VPdmVyKHZpZXcsIG1hcmtlciwgZGlhZ25vc3RpY3MpIHtcbiAgICBmdW5jdGlvbiBob3ZlcmVkKCkge1xuICAgICAgICBsZXQgbGluZSA9IHZpZXcuZWxlbWVudEF0SGVpZ2h0KG1hcmtlci5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS50b3AgKyA1IC0gdmlldy5kb2N1bWVudFRvcCk7XG4gICAgICAgIGNvbnN0IGxpbmVQb3MgPSB2aWV3LmNvb3Jkc0F0UG9zKGxpbmUuZnJvbSk7XG4gICAgICAgIGlmIChsaW5lUG9zKSB7XG4gICAgICAgICAgICB2aWV3LmRpc3BhdGNoKHsgZWZmZWN0czogc2V0TGludEd1dHRlclRvb2x0aXAub2Yoe1xuICAgICAgICAgICAgICAgICAgICBwb3M6IGxpbmUuZnJvbSxcbiAgICAgICAgICAgICAgICAgICAgYWJvdmU6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBjbGlwOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgY3JlYXRlKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb206IGRpYWdub3N0aWNzVG9vbHRpcCh2aWV3LCBkaWFnbm9zdGljcyksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2V0Q29vcmRzOiAoKSA9PiBtYXJrZXIuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KClcbiAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KSB9KTtcbiAgICAgICAgfVxuICAgICAgICBtYXJrZXIub25tb3VzZW91dCA9IG1hcmtlci5vbm1vdXNlbW92ZSA9IG51bGw7XG4gICAgICAgIHRyYWNrSG92ZXJPbih2aWV3LCBtYXJrZXIpO1xuICAgIH1cbiAgICBsZXQgeyBob3ZlclRpbWUgfSA9IHZpZXcuc3RhdGUuZmFjZXQobGludEd1dHRlckNvbmZpZyk7XG4gICAgbGV0IGhvdmVyVGltZW91dCA9IHNldFRpbWVvdXQoaG92ZXJlZCwgaG92ZXJUaW1lKTtcbiAgICBtYXJrZXIub25tb3VzZW91dCA9ICgpID0+IHtcbiAgICAgICAgY2xlYXJUaW1lb3V0KGhvdmVyVGltZW91dCk7XG4gICAgICAgIG1hcmtlci5vbm1vdXNlb3V0ID0gbWFya2VyLm9ubW91c2Vtb3ZlID0gbnVsbDtcbiAgICB9O1xuICAgIG1hcmtlci5vbm1vdXNlbW92ZSA9ICgpID0+IHtcbiAgICAgICAgY2xlYXJUaW1lb3V0KGhvdmVyVGltZW91dCk7XG4gICAgICAgIGhvdmVyVGltZW91dCA9IHNldFRpbWVvdXQoaG92ZXJlZCwgaG92ZXJUaW1lKTtcbiAgICB9O1xufVxuZnVuY3Rpb24gbWFya2Vyc0ZvckRpYWdub3N0aWNzKGRvYywgZGlhZ25vc3RpY3MpIHtcbiAgICBsZXQgYnlMaW5lID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgICBmb3IgKGxldCBkaWFnbm9zdGljIG9mIGRpYWdub3N0aWNzKSB7XG4gICAgICAgIGxldCBsaW5lID0gZG9jLmxpbmVBdChkaWFnbm9zdGljLmZyb20pO1xuICAgICAgICAoYnlMaW5lW2xpbmUuZnJvbV0gfHwgKGJ5TGluZVtsaW5lLmZyb21dID0gW10pKS5wdXNoKGRpYWdub3N0aWMpO1xuICAgIH1cbiAgICBsZXQgbWFya2VycyA9IFtdO1xuICAgIGZvciAobGV0IGxpbmUgaW4gYnlMaW5lKSB7XG4gICAgICAgIG1hcmtlcnMucHVzaChuZXcgTGludEd1dHRlck1hcmtlcihieUxpbmVbbGluZV0pLnJhbmdlKCtsaW5lKSk7XG4gICAgfVxuICAgIHJldHVybiBSYW5nZVNldC5vZihtYXJrZXJzLCB0cnVlKTtcbn1cbmNvbnN0IGxpbnRHdXR0ZXJFeHRlbnNpb24gPSAvKkBfX1BVUkVfXyovZ3V0dGVyKHtcbiAgICBjbGFzczogXCJjbS1ndXR0ZXItbGludFwiLFxuICAgIG1hcmtlcnM6IHZpZXcgPT4gdmlldy5zdGF0ZS5maWVsZChsaW50R3V0dGVyTWFya2VycyksXG4gICAgd2lkZ2V0TWFya2VyOiAodmlldywgd2lkZ2V0LCBibG9jaykgPT4ge1xuICAgICAgICBsZXQgZGlhZ25vc3RpY3MgPSBbXTtcbiAgICAgICAgdmlldy5zdGF0ZS5maWVsZChsaW50R3V0dGVyTWFya2VycykuYmV0d2VlbihibG9jay5mcm9tLCBibG9jay50bywgKGZyb20sIHRvLCB2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgaWYgKGZyb20gPiBibG9jay5mcm9tICYmIGZyb20gPCBibG9jay50bylcbiAgICAgICAgICAgICAgICBkaWFnbm9zdGljcy5wdXNoKC4uLnZhbHVlLmRpYWdub3N0aWNzKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBkaWFnbm9zdGljcy5sZW5ndGggPyBuZXcgTGludEd1dHRlck1hcmtlcihkaWFnbm9zdGljcykgOiBudWxsO1xuICAgIH1cbn0pO1xuY29uc3QgbGludEd1dHRlck1hcmtlcnMgPSAvKkBfX1BVUkVfXyovU3RhdGVGaWVsZC5kZWZpbmUoe1xuICAgIGNyZWF0ZSgpIHtcbiAgICAgICAgcmV0dXJuIFJhbmdlU2V0LmVtcHR5O1xuICAgIH0sXG4gICAgdXBkYXRlKG1hcmtlcnMsIHRyKSB7XG4gICAgICAgIG1hcmtlcnMgPSBtYXJrZXJzLm1hcCh0ci5jaGFuZ2VzKTtcbiAgICAgICAgbGV0IGRpYWdub3N0aWNGaWx0ZXIgPSB0ci5zdGF0ZS5mYWNldChsaW50R3V0dGVyQ29uZmlnKS5tYXJrZXJGaWx0ZXI7XG4gICAgICAgIGZvciAobGV0IGVmZmVjdCBvZiB0ci5lZmZlY3RzKSB7XG4gICAgICAgICAgICBpZiAoZWZmZWN0LmlzKHNldERpYWdub3N0aWNzRWZmZWN0KSkge1xuICAgICAgICAgICAgICAgIGxldCBkaWFnbm9zdGljcyA9IGVmZmVjdC52YWx1ZTtcbiAgICAgICAgICAgICAgICBpZiAoZGlhZ25vc3RpY0ZpbHRlcilcbiAgICAgICAgICAgICAgICAgICAgZGlhZ25vc3RpY3MgPSBkaWFnbm9zdGljRmlsdGVyKGRpYWdub3N0aWNzIHx8IFtdLCB0ci5zdGF0ZSk7XG4gICAgICAgICAgICAgICAgbWFya2VycyA9IG1hcmtlcnNGb3JEaWFnbm9zdGljcyh0ci5zdGF0ZS5kb2MsIGRpYWdub3N0aWNzLnNsaWNlKDApKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbWFya2VycztcbiAgICB9XG59KTtcbmNvbnN0IHNldExpbnRHdXR0ZXJUb29sdGlwID0gLypAX19QVVJFX18qL1N0YXRlRWZmZWN0LmRlZmluZSgpO1xuY29uc3QgbGludEd1dHRlclRvb2x0aXAgPSAvKkBfX1BVUkVfXyovU3RhdGVGaWVsZC5kZWZpbmUoe1xuICAgIGNyZWF0ZSgpIHsgcmV0dXJuIG51bGw7IH0sXG4gICAgdXBkYXRlKHRvb2x0aXAsIHRyKSB7XG4gICAgICAgIGlmICh0b29sdGlwICYmIHRyLmRvY0NoYW5nZWQpXG4gICAgICAgICAgICB0b29sdGlwID0gaGlkZVRvb2x0aXAodHIsIHRvb2x0aXApID8gbnVsbCA6IHsgLi4udG9vbHRpcCwgcG9zOiB0ci5jaGFuZ2VzLm1hcFBvcyh0b29sdGlwLnBvcykgfTtcbiAgICAgICAgcmV0dXJuIHRyLmVmZmVjdHMucmVkdWNlKCh0LCBlKSA9PiBlLmlzKHNldExpbnRHdXR0ZXJUb29sdGlwKSA/IGUudmFsdWUgOiB0LCB0b29sdGlwKTtcbiAgICB9LFxuICAgIHByb3ZpZGU6IGZpZWxkID0+IHNob3dUb29sdGlwLmZyb20oZmllbGQpXG59KTtcbmNvbnN0IGxpbnRHdXR0ZXJUaGVtZSA9IC8qQF9fUFVSRV9fKi9FZGl0b3JWaWV3LmJhc2VUaGVtZSh7XG4gICAgXCIuY20tZ3V0dGVyLWxpbnRcIjoge1xuICAgICAgICB3aWR0aDogXCIxLjRlbVwiLFxuICAgICAgICBcIiYgLmNtLWd1dHRlckVsZW1lbnRcIjoge1xuICAgICAgICAgICAgcGFkZGluZzogXCIuMmVtXCJcbiAgICAgICAgfVxuICAgIH0sXG4gICAgXCIuY20tbGludC1tYXJrZXJcIjoge1xuICAgICAgICB3aWR0aDogXCIxZW1cIixcbiAgICAgICAgaGVpZ2h0OiBcIjFlbVwiXG4gICAgfSxcbiAgICBcIi5jbS1saW50LW1hcmtlci1pbmZvXCI6IHtcbiAgICAgICAgY29udGVudDogLypAX19QVVJFX18qL3N2ZyhgPHBhdGggZmlsbD1cIiNhYWZcIiBzdHJva2U9XCIjNzdlXCIgc3Ryb2tlLXdpZHRoPVwiNlwiIHN0cm9rZS1saW5lam9pbj1cInJvdW5kXCIgZD1cIk01IDVMMzUgNUwzNSAzNUw1IDM1WlwiLz5gKVxuICAgIH0sXG4gICAgXCIuY20tbGludC1tYXJrZXItd2FybmluZ1wiOiB7XG4gICAgICAgIGNvbnRlbnQ6IC8qQF9fUFVSRV9fKi9zdmcoYDxwYXRoIGZpbGw9XCIjZmU4XCIgc3Ryb2tlPVwiI2ZkN1wiIHN0cm9rZS13aWR0aD1cIjZcIiBzdHJva2UtbGluZWpvaW49XCJyb3VuZFwiIGQ9XCJNMjAgNkwzNyAzNUwzIDM1WlwiLz5gKSxcbiAgICB9LFxuICAgIFwiLmNtLWxpbnQtbWFya2VyLWVycm9yXCI6IHtcbiAgICAgICAgY29udGVudDogLypAX19QVVJFX18qL3N2ZyhgPGNpcmNsZSBjeD1cIjIwXCIgY3k9XCIyMFwiIHI9XCIxNVwiIGZpbGw9XCIjZjg3XCIgc3Ryb2tlPVwiI2Y0M1wiIHN0cm9rZS13aWR0aD1cIjZcIi8+YClcbiAgICB9LFxufSk7XG5jb25zdCBsaW50RXh0ZW5zaW9ucyA9IFtcbiAgICBsaW50U3RhdGUsXG4gICAgLypAX19QVVJFX18qL0VkaXRvclZpZXcuZGVjb3JhdGlvbnMuY29tcHV0ZShbbGludFN0YXRlXSwgc3RhdGUgPT4ge1xuICAgICAgICBsZXQgeyBzZWxlY3RlZCwgcGFuZWwgfSA9IHN0YXRlLmZpZWxkKGxpbnRTdGF0ZSk7XG4gICAgICAgIHJldHVybiAhc2VsZWN0ZWQgfHwgIXBhbmVsIHx8IHNlbGVjdGVkLmZyb20gPT0gc2VsZWN0ZWQudG8gPyBEZWNvcmF0aW9uLm5vbmUgOiBEZWNvcmF0aW9uLnNldChbXG4gICAgICAgICAgICBhY3RpdmVNYXJrLnJhbmdlKHNlbGVjdGVkLmZyb20sIHNlbGVjdGVkLnRvKVxuICAgICAgICBdKTtcbiAgICB9KSxcbiAgICAvKkBfX1BVUkVfXyovaG92ZXJUb29sdGlwKGxpbnRUb29sdGlwLCB7IGhpZGVPbjogaGlkZVRvb2x0aXAgfSksXG4gICAgYmFzZVRoZW1lXG5dO1xuY29uc3QgbGludEd1dHRlckNvbmZpZyA9IC8qQF9fUFVSRV9fKi9GYWNldC5kZWZpbmUoe1xuICAgIGNvbWJpbmUoY29uZmlncykge1xuICAgICAgICByZXR1cm4gY29tYmluZUNvbmZpZyhjb25maWdzLCB7XG4gICAgICAgICAgICBob3ZlclRpbWU6IDMwMCAvKiBIb3Zlci5UaW1lICovLFxuICAgICAgICAgICAgbWFya2VyRmlsdGVyOiBudWxsLFxuICAgICAgICAgICAgdG9vbHRpcEZpbHRlcjogbnVsbFxuICAgICAgICB9KTtcbiAgICB9XG59KTtcbi8qKlxuUmV0dXJucyBhbiBleHRlbnNpb24gdGhhdCBpbnN0YWxscyBhIGd1dHRlciBzaG93aW5nIG1hcmtlcnMgZm9yXG5lYWNoIGxpbmUgdGhhdCBoYXMgZGlhZ25vc3RpY3MsIHdoaWNoIGNhbiBiZSBob3ZlcmVkIG92ZXIgdG8gc2VlXG50aGUgZGlhZ25vc3RpY3MuXG4qL1xuZnVuY3Rpb24gbGludEd1dHRlcihjb25maWcgPSB7fSkge1xuICAgIHJldHVybiBbbGludEd1dHRlckNvbmZpZy5vZihjb25maWcpLCBsaW50R3V0dGVyTWFya2VycywgbGludEd1dHRlckV4dGVuc2lvbiwgbGludEd1dHRlclRoZW1lLCBsaW50R3V0dGVyVG9vbHRpcF07XG59XG4vKipcbkl0ZXJhdGUgb3ZlciB0aGUgbWFya2VkIGRpYWdub3N0aWNzIGZvciB0aGUgZ2l2ZW4gZWRpdG9yIHN0YXRlLFxuY2FsbGluZyBgZmAgZm9yIGVhY2ggb2YgdGhlbS4gTm90ZSB0aGF0LCBpZiB0aGUgZG9jdW1lbnQgY2hhbmdlZFxuc2luY2UgdGhlIGRpYWdub3N0aWNzIHdlcmUgY3JlYXRlZCwgdGhlIGBEaWFnbm9zdGljYCBvYmplY3Qgd2lsbFxuaG9sZCB0aGUgb3JpZ2luYWwgb3V0ZGF0ZWQgcG9zaXRpb24sIHdoZXJlYXMgdGhlIGB0b2AgYW5kIGBmcm9tYFxuYXJndW1lbnRzIGhvbGQgdGhlIGRpYWdub3N0aWMncyBjdXJyZW50IHBvc2l0aW9uLlxuKi9cbmZ1bmN0aW9uIGZvckVhY2hEaWFnbm9zdGljKHN0YXRlLCBmKSB7XG4gICAgbGV0IGxTdGF0ZSA9IHN0YXRlLmZpZWxkKGxpbnRTdGF0ZSwgZmFsc2UpO1xuICAgIGlmIChsU3RhdGUgJiYgbFN0YXRlLmRpYWdub3N0aWNzLnNpemUpIHtcbiAgICAgICAgbGV0IHBlbmRpbmcgPSBbXSwgcGVuZGluZ1N0YXJ0ID0gW10sIGxhc3RFbmQgPSAtMTtcbiAgICAgICAgZm9yIChsZXQgaXRlciA9IFJhbmdlU2V0Lml0ZXIoW2xTdGF0ZS5kaWFnbm9zdGljc10pOzsgaXRlci5uZXh0KCkpIHtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcGVuZGluZy5sZW5ndGg7IGkrKylcbiAgICAgICAgICAgICAgICBpZiAoIWl0ZXIudmFsdWUgfHwgaXRlci52YWx1ZS5zcGVjLmRpYWdub3N0aWNzLmluZGV4T2YocGVuZGluZ1tpXSkgPCAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGYocGVuZGluZ1tpXSwgcGVuZGluZ1N0YXJ0W2ldLCBsYXN0RW5kKTtcbiAgICAgICAgICAgICAgICAgICAgcGVuZGluZy5zcGxpY2UoaSwgMSk7XG4gICAgICAgICAgICAgICAgICAgIHBlbmRpbmdTdGFydC5zcGxpY2UoaS0tLCAxKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIWl0ZXIudmFsdWUpXG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBmb3IgKGxldCBkIG9mIGl0ZXIudmFsdWUuc3BlYy5kaWFnbm9zdGljcylcbiAgICAgICAgICAgICAgICBpZiAocGVuZGluZy5pbmRleE9mKGQpIDwgMCkge1xuICAgICAgICAgICAgICAgICAgICBwZW5kaW5nLnB1c2goZCk7XG4gICAgICAgICAgICAgICAgICAgIHBlbmRpbmdTdGFydC5wdXNoKGl0ZXIuZnJvbSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgbGFzdEVuZCA9IGl0ZXIudG87XG4gICAgICAgIH1cbiAgICB9XG59XG5cbmV4cG9ydCB7IGNsb3NlTGludFBhbmVsLCBkaWFnbm9zdGljQ291bnQsIGZvckVhY2hEaWFnbm9zdGljLCBmb3JjZUxpbnRpbmcsIGxpbnRHdXR0ZXIsIGxpbnRLZXltYXAsIGxpbnRlciwgbmV4dERpYWdub3N0aWMsIG9wZW5MaW50UGFuZWwsIHByZXZpb3VzRGlhZ25vc3RpYywgc2V0RGlhZ25vc3RpY3MsIHNldERpYWdub3N0aWNzRWZmZWN0IH07XG4iLAogICAgImltcG9ydCB7IGxpbmVOdW1iZXJzLCBoaWdobGlnaHRBY3RpdmVMaW5lR3V0dGVyLCBoaWdobGlnaHRTcGVjaWFsQ2hhcnMsIGRyYXdTZWxlY3Rpb24sIGRyb3BDdXJzb3IsIHJlY3Rhbmd1bGFyU2VsZWN0aW9uLCBjcm9zc2hhaXJDdXJzb3IsIGhpZ2hsaWdodEFjdGl2ZUxpbmUsIGtleW1hcCB9IGZyb20gJ0Bjb2RlbWlycm9yL3ZpZXcnO1xuZXhwb3J0IHsgRWRpdG9yVmlldyB9IGZyb20gJ0Bjb2RlbWlycm9yL3ZpZXcnO1xuaW1wb3J0IHsgRWRpdG9yU3RhdGUgfSBmcm9tICdAY29kZW1pcnJvci9zdGF0ZSc7XG5pbXBvcnQgeyBmb2xkR3V0dGVyLCBpbmRlbnRPbklucHV0LCBzeW50YXhIaWdobGlnaHRpbmcsIGRlZmF1bHRIaWdobGlnaHRTdHlsZSwgYnJhY2tldE1hdGNoaW5nLCBmb2xkS2V5bWFwIH0gZnJvbSAnQGNvZGVtaXJyb3IvbGFuZ3VhZ2UnO1xuaW1wb3J0IHsgaGlzdG9yeSwgZGVmYXVsdEtleW1hcCwgaGlzdG9yeUtleW1hcCB9IGZyb20gJ0Bjb2RlbWlycm9yL2NvbW1hbmRzJztcbmltcG9ydCB7IGhpZ2hsaWdodFNlbGVjdGlvbk1hdGNoZXMsIHNlYXJjaEtleW1hcCB9IGZyb20gJ0Bjb2RlbWlycm9yL3NlYXJjaCc7XG5pbXBvcnQgeyBjbG9zZUJyYWNrZXRzLCBhdXRvY29tcGxldGlvbiwgY2xvc2VCcmFja2V0c0tleW1hcCwgY29tcGxldGlvbktleW1hcCB9IGZyb20gJ0Bjb2RlbWlycm9yL2F1dG9jb21wbGV0ZSc7XG5pbXBvcnQgeyBsaW50S2V5bWFwIH0gZnJvbSAnQGNvZGVtaXJyb3IvbGludCc7XG5cbi8vIChUaGUgc3VwZXJmbHVvdXMgZnVuY3Rpb24gY2FsbHMgYXJvdW5kIHRoZSBsaXN0IG9mIGV4dGVuc2lvbnMgd29ya1xuLy8gYXJvdW5kIGN1cnJlbnQgbGltaXRhdGlvbnMgaW4gdHJlZS1zaGFraW5nIHNvZnR3YXJlLilcbi8qKlxuVGhpcyBpcyBhbiBleHRlbnNpb24gdmFsdWUgdGhhdCBqdXN0IHB1bGxzIHRvZ2V0aGVyIGEgbnVtYmVyIG9mXG5leHRlbnNpb25zIHRoYXQgeW91IG1pZ2h0IHdhbnQgaW4gYSBiYXNpYyBlZGl0b3IuIEl0IGlzIG1lYW50IGFzIGFcbmNvbnZlbmllbnQgaGVscGVyIHRvIHF1aWNrbHkgc2V0IHVwIENvZGVNaXJyb3Igd2l0aG91dCBpbnN0YWxsaW5nXG5hbmQgaW1wb3J0aW5nIGEgbG90IG9mIHNlcGFyYXRlIHBhY2thZ2VzLlxuXG5TcGVjaWZpY2FsbHksIGl0IGluY2x1ZGVzLi4uXG5cbiAtIFt0aGUgZGVmYXVsdCBjb21tYW5kIGJpbmRpbmdzXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI2NvbW1hbmRzLmRlZmF1bHRLZXltYXApXG4gLSBbbGluZSBudW1iZXJzXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI3ZpZXcubGluZU51bWJlcnMpXG4gLSBbc3BlY2lhbCBjaGFyYWN0ZXIgaGlnaGxpZ2h0aW5nXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI3ZpZXcuaGlnaGxpZ2h0U3BlY2lhbENoYXJzKVxuIC0gW3RoZSB1bmRvIGhpc3RvcnldKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jY29tbWFuZHMuaGlzdG9yeSlcbiAtIFthIGZvbGQgZ3V0dGVyXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI2xhbmd1YWdlLmZvbGRHdXR0ZXIpXG4gLSBbY3VzdG9tIHNlbGVjdGlvbiBkcmF3aW5nXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI3ZpZXcuZHJhd1NlbGVjdGlvbilcbiAtIFtkcm9wIGN1cnNvcl0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyN2aWV3LmRyb3BDdXJzb3IpXG4gLSBbbXVsdGlwbGUgc2VsZWN0aW9uc10oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNzdGF0ZS5FZGl0b3JTdGF0ZV5hbGxvd011bHRpcGxlU2VsZWN0aW9ucylcbiAtIFtyZWluZGVudGF0aW9uIG9uIGlucHV0XShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI2xhbmd1YWdlLmluZGVudE9uSW5wdXQpXG4gLSBbdGhlIGRlZmF1bHQgaGlnaGxpZ2h0IHN0eWxlXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI2xhbmd1YWdlLmRlZmF1bHRIaWdobGlnaHRTdHlsZSkgKGFzIGZhbGxiYWNrKVxuIC0gW2JyYWNrZXQgbWF0Y2hpbmddKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jbGFuZ3VhZ2UuYnJhY2tldE1hdGNoaW5nKVxuIC0gW2JyYWNrZXQgY2xvc2luZ10oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNhdXRvY29tcGxldGUuY2xvc2VCcmFja2V0cylcbiAtIFthdXRvY29tcGxldGlvbl0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNhdXRvY29tcGxldGUuYXV0b2NvbXBsZXRpb24pXG4gLSBbcmVjdGFuZ3VsYXIgc2VsZWN0aW9uXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI3ZpZXcucmVjdGFuZ3VsYXJTZWxlY3Rpb24pIGFuZCBbY3Jvc3NoYWlyIGN1cnNvcl0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyN2aWV3LmNyb3NzaGFpckN1cnNvcilcbiAtIFthY3RpdmUgbGluZSBoaWdobGlnaHRpbmddKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jdmlldy5oaWdobGlnaHRBY3RpdmVMaW5lKVxuIC0gW2FjdGl2ZSBsaW5lIGd1dHRlciBoaWdobGlnaHRpbmddKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jdmlldy5oaWdobGlnaHRBY3RpdmVMaW5lR3V0dGVyKVxuIC0gW3NlbGVjdGlvbiBtYXRjaCBoaWdobGlnaHRpbmddKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jc2VhcmNoLmhpZ2hsaWdodFNlbGVjdGlvbk1hdGNoZXMpXG4gLSBbc2VhcmNoXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI3NlYXJjaC5zZWFyY2hLZXltYXApXG4gLSBbbGludGluZ10oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNsaW50LmxpbnRLZXltYXApXG5cbihZb3UnbGwgcHJvYmFibHkgd2FudCB0byBhZGQgc29tZSBsYW5ndWFnZSBwYWNrYWdlIHRvIHlvdXIgc2V0dXBcbnRvby4pXG5cblRoaXMgZXh0ZW5zaW9uIGRvZXMgbm90IGFsbG93IGN1c3RvbWl6YXRpb24uIFRoZSBpZGVhIGlzIHRoYXQsXG5vbmNlIHlvdSBkZWNpZGUgeW91IHdhbnQgdG8gY29uZmlndXJlIHlvdXIgZWRpdG9yIG1vcmUgcHJlY2lzZWx5LFxueW91IHRha2UgdGhpcyBwYWNrYWdlJ3Mgc291cmNlICh3aGljaCBpcyBqdXN0IGEgYnVuY2ggb2YgaW1wb3J0c1xuYW5kIGFuIGFycmF5IGxpdGVyYWwpLCBjb3B5IGl0IGludG8geW91ciBvd24gY29kZSwgYW5kIGFkanVzdCBpdFxuYXMgZGVzaXJlZC5cbiovXG5jb25zdCBiYXNpY1NldHVwID0gLypAX19QVVJFX18qLygoKSA9PiBbXG4gICAgbGluZU51bWJlcnMoKSxcbiAgICBoaWdobGlnaHRBY3RpdmVMaW5lR3V0dGVyKCksXG4gICAgaGlnaGxpZ2h0U3BlY2lhbENoYXJzKCksXG4gICAgaGlzdG9yeSgpLFxuICAgIGZvbGRHdXR0ZXIoKSxcbiAgICBkcmF3U2VsZWN0aW9uKCksXG4gICAgZHJvcEN1cnNvcigpLFxuICAgIEVkaXRvclN0YXRlLmFsbG93TXVsdGlwbGVTZWxlY3Rpb25zLm9mKHRydWUpLFxuICAgIGluZGVudE9uSW5wdXQoKSxcbiAgICBzeW50YXhIaWdobGlnaHRpbmcoZGVmYXVsdEhpZ2hsaWdodFN0eWxlLCB7IGZhbGxiYWNrOiB0cnVlIH0pLFxuICAgIGJyYWNrZXRNYXRjaGluZygpLFxuICAgIGNsb3NlQnJhY2tldHMoKSxcbiAgICBhdXRvY29tcGxldGlvbigpLFxuICAgIHJlY3Rhbmd1bGFyU2VsZWN0aW9uKCksXG4gICAgY3Jvc3NoYWlyQ3Vyc29yKCksXG4gICAgaGlnaGxpZ2h0QWN0aXZlTGluZSgpLFxuICAgIGhpZ2hsaWdodFNlbGVjdGlvbk1hdGNoZXMoKSxcbiAgICBrZXltYXAub2YoW1xuICAgICAgICAuLi5jbG9zZUJyYWNrZXRzS2V5bWFwLFxuICAgICAgICAuLi5kZWZhdWx0S2V5bWFwLFxuICAgICAgICAuLi5zZWFyY2hLZXltYXAsXG4gICAgICAgIC4uLmhpc3RvcnlLZXltYXAsXG4gICAgICAgIC4uLmZvbGRLZXltYXAsXG4gICAgICAgIC4uLmNvbXBsZXRpb25LZXltYXAsXG4gICAgICAgIC4uLmxpbnRLZXltYXBcbiAgICBdKVxuXSkoKTtcbi8qKlxuQSBtaW5pbWFsIHNldCBvZiBleHRlbnNpb25zIHRvIGNyZWF0ZSBhIGZ1bmN0aW9uYWwgZWRpdG9yLiBPbmx5XG5pbmNsdWRlcyBbdGhlIGRlZmF1bHQga2V5bWFwXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI2NvbW1hbmRzLmRlZmF1bHRLZXltYXApLCBbdW5kb1xuaGlzdG9yeV0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNjb21tYW5kcy5oaXN0b3J5KSwgW3NwZWNpYWwgY2hhcmFjdGVyXG5oaWdobGlnaHRpbmddKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jdmlldy5oaWdobGlnaHRTcGVjaWFsQ2hhcnMpLCBbY3VzdG9tIHNlbGVjdGlvblxuZHJhd2luZ10oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyN2aWV3LmRyYXdTZWxlY3Rpb24pLCBhbmQgW2RlZmF1bHQgaGlnaGxpZ2h0XG5zdHlsZV0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNsYW5ndWFnZS5kZWZhdWx0SGlnaGxpZ2h0U3R5bGUpLlxuKi9cbmNvbnN0IG1pbmltYWxTZXR1cCA9IC8qQF9fUFVSRV9fKi8oKCkgPT4gW1xuICAgIGhpZ2hsaWdodFNwZWNpYWxDaGFycygpLFxuICAgIGhpc3RvcnkoKSxcbiAgICBkcmF3U2VsZWN0aW9uKCksXG4gICAgc3ludGF4SGlnaGxpZ2h0aW5nKGRlZmF1bHRIaWdobGlnaHRTdHlsZSwgeyBmYWxsYmFjazogdHJ1ZSB9KSxcbiAgICBrZXltYXAub2YoW1xuICAgICAgICAuLi5kZWZhdWx0S2V5bWFwLFxuICAgICAgICAuLi5oaXN0b3J5S2V5bWFwLFxuICAgIF0pXG5dKSgpO1xuXG5leHBvcnQgeyBiYXNpY1NldHVwLCBtaW5pbWFsU2V0dXAgfTtcbiIsCiAgICAiaW1wb3J0IHsgUGFyc2VyLCBOb2RlUHJvcCwgTm9kZVNldCwgTm9kZVR5cGUsIERlZmF1bHRCdWZmZXJMZW5ndGgsIFRyZWUsIEl0ZXJNb2RlIH0gZnJvbSAnQGxlemVyL2NvbW1vbic7XG5cbi8qKlxuQSBwYXJzZSBzdGFjay4gVGhlc2UgYXJlIHVzZWQgaW50ZXJuYWxseSBieSB0aGUgcGFyc2VyIHRvIHRyYWNrXG5wYXJzaW5nIHByb2dyZXNzLiBUaGV5IGFsc28gcHJvdmlkZSBzb21lIHByb3BlcnRpZXMgYW5kIG1ldGhvZHNcbnRoYXQgZXh0ZXJuYWwgY29kZSBzdWNoIGFzIGEgdG9rZW5pemVyIGNhbiB1c2UgdG8gZ2V0IGluZm9ybWF0aW9uXG5hYm91dCB0aGUgcGFyc2Ugc3RhdGUuXG4qL1xuY2xhc3MgU3RhY2sge1xuICAgIC8qKlxuICAgIEBpbnRlcm5hbFxuICAgICovXG4gICAgY29uc3RydWN0b3IoXG4gICAgLyoqXG4gICAgVGhlIHBhcnNlIHRoYXQgdGhpcyBzdGFjayBpcyBwYXJ0IG9mIEBpbnRlcm5hbFxuICAgICovXG4gICAgcCwgXG4gICAgLyoqXG4gICAgSG9sZHMgc3RhdGUsIGlucHV0IHBvcywgYnVmZmVyIGluZGV4IHRyaXBsZXRzIGZvciBhbGwgYnV0IHRoZVxuICAgIHRvcCBzdGF0ZSBAaW50ZXJuYWxcbiAgICAqL1xuICAgIHN0YWNrLCBcbiAgICAvKipcbiAgICBUaGUgY3VycmVudCBwYXJzZSBzdGF0ZSBAaW50ZXJuYWxcbiAgICAqL1xuICAgIHN0YXRlLCBcbiAgICAvLyBUaGUgcG9zaXRpb24gYXQgd2hpY2ggdGhlIG5leHQgcmVkdWNlIHNob3VsZCB0YWtlIHBsYWNlLiBUaGlzXG4gICAgLy8gY2FuIGJlIGxlc3MgdGhhbiBgdGhpcy5wb3NgIHdoZW4gc2tpcHBlZCBleHByZXNzaW9ucyBoYXZlIGJlZW5cbiAgICAvLyBhZGRlZCB0byB0aGUgc3RhY2sgKHdoaWNoIHNob3VsZCBiZSBtb3ZlZCBvdXRzaWRlIG9mIHRoZSBuZXh0XG4gICAgLy8gcmVkdWN0aW9uKVxuICAgIC8qKlxuICAgIEBpbnRlcm5hbFxuICAgICovXG4gICAgcmVkdWNlUG9zLCBcbiAgICAvKipcbiAgICBUaGUgaW5wdXQgcG9zaXRpb24gdXAgdG8gd2hpY2ggdGhpcyBzdGFjayBoYXMgcGFyc2VkLlxuICAgICovXG4gICAgcG9zLCBcbiAgICAvKipcbiAgICBUaGUgZHluYW1pYyBzY29yZSBvZiB0aGUgc3RhY2ssIGluY2x1ZGluZyBkeW5hbWljIHByZWNlZGVuY2VcbiAgICBhbmQgZXJyb3ItcmVjb3ZlcnkgcGVuYWx0aWVzXG4gICAgQGludGVybmFsXG4gICAgKi9cbiAgICBzY29yZSwgXG4gICAgLy8gVGhlIG91dHB1dCBidWZmZXIuIEhvbGRzICh0eXBlLCBzdGFydCwgZW5kLCBzaXplKSBxdWFkc1xuICAgIC8vIHJlcHJlc2VudGluZyBub2RlcyBjcmVhdGVkIGJ5IHRoZSBwYXJzZXIsIHdoZXJlIGBzaXplYCBpc1xuICAgIC8vIGFtb3VudCBvZiBidWZmZXIgYXJyYXkgZW50cmllcyBjb3ZlcmVkIGJ5IHRoaXMgbm9kZS5cbiAgICAvKipcbiAgICBAaW50ZXJuYWxcbiAgICAqL1xuICAgIGJ1ZmZlciwgXG4gICAgLy8gVGhlIGJhc2Ugb2Zmc2V0IG9mIHRoZSBidWZmZXIuIFdoZW4gc3RhY2tzIGFyZSBzcGxpdCwgdGhlIHNwbGl0XG4gICAgLy8gaW5zdGFuY2Ugc2hhcmVkIHRoZSBidWZmZXIgaGlzdG9yeSB3aXRoIGl0cyBwYXJlbnQgdXAgdG9cbiAgICAvLyBgYnVmZmVyQmFzZWAsIHdoaWNoIGlzIHRoZSBhYnNvbHV0ZSBvZmZzZXQgKGluY2x1ZGluZyB0aGVcbiAgICAvLyBvZmZzZXQgb2YgcHJldmlvdXMgc3BsaXRzKSBpbnRvIHRoZSBidWZmZXIgYXQgd2hpY2ggdGhpcyBzdGFja1xuICAgIC8vIHN0YXJ0cyB3cml0aW5nLlxuICAgIC8qKlxuICAgIEBpbnRlcm5hbFxuICAgICovXG4gICAgYnVmZmVyQmFzZSwgXG4gICAgLyoqXG4gICAgQGludGVybmFsXG4gICAgKi9cbiAgICBjdXJDb250ZXh0LCBcbiAgICAvKipcbiAgICBAaW50ZXJuYWxcbiAgICAqL1xuICAgIGxvb2tBaGVhZCA9IDAsIFxuICAgIC8vIEEgcGFyZW50IHN0YWNrIGZyb20gd2hpY2ggdGhpcyB3YXMgc3BsaXQgb2ZmLCBpZiBhbnkuIFRoaXMgaXNcbiAgICAvLyBzZXQgdXAgc28gdGhhdCBpdCBhbHdheXMgcG9pbnRzIHRvIGEgc3RhY2sgdGhhdCBoYXMgc29tZVxuICAgIC8vIGFkZGl0aW9uYWwgYnVmZmVyIGNvbnRlbnQsIG5ldmVyIHRvIGEgc3RhY2sgd2l0aCBhbiBlcXVhbFxuICAgIC8vIGBidWZmZXJCYXNlYC5cbiAgICAvKipcbiAgICBAaW50ZXJuYWxcbiAgICAqL1xuICAgIHBhcmVudCkge1xuICAgICAgICB0aGlzLnAgPSBwO1xuICAgICAgICB0aGlzLnN0YWNrID0gc3RhY2s7XG4gICAgICAgIHRoaXMuc3RhdGUgPSBzdGF0ZTtcbiAgICAgICAgdGhpcy5yZWR1Y2VQb3MgPSByZWR1Y2VQb3M7XG4gICAgICAgIHRoaXMucG9zID0gcG9zO1xuICAgICAgICB0aGlzLnNjb3JlID0gc2NvcmU7XG4gICAgICAgIHRoaXMuYnVmZmVyID0gYnVmZmVyO1xuICAgICAgICB0aGlzLmJ1ZmZlckJhc2UgPSBidWZmZXJCYXNlO1xuICAgICAgICB0aGlzLmN1ckNvbnRleHQgPSBjdXJDb250ZXh0O1xuICAgICAgICB0aGlzLmxvb2tBaGVhZCA9IGxvb2tBaGVhZDtcbiAgICAgICAgdGhpcy5wYXJlbnQgPSBwYXJlbnQ7XG4gICAgfVxuICAgIC8qKlxuICAgIEBpbnRlcm5hbFxuICAgICovXG4gICAgdG9TdHJpbmcoKSB7XG4gICAgICAgIHJldHVybiBgWyR7dGhpcy5zdGFjay5maWx0ZXIoKF8sIGkpID0+IGkgJSAzID09IDApLmNvbmNhdCh0aGlzLnN0YXRlKX1dQCR7dGhpcy5wb3N9JHt0aGlzLnNjb3JlID8gXCIhXCIgKyB0aGlzLnNjb3JlIDogXCJcIn1gO1xuICAgIH1cbiAgICAvLyBTdGFydCBhbiBlbXB0eSBzdGFja1xuICAgIC8qKlxuICAgIEBpbnRlcm5hbFxuICAgICovXG4gICAgc3RhdGljIHN0YXJ0KHAsIHN0YXRlLCBwb3MgPSAwKSB7XG4gICAgICAgIGxldCBjeCA9IHAucGFyc2VyLmNvbnRleHQ7XG4gICAgICAgIHJldHVybiBuZXcgU3RhY2socCwgW10sIHN0YXRlLCBwb3MsIHBvcywgMCwgW10sIDAsIGN4ID8gbmV3IFN0YWNrQ29udGV4dChjeCwgY3guc3RhcnQpIDogbnVsbCwgMCwgbnVsbCk7XG4gICAgfVxuICAgIC8qKlxuICAgIFRoZSBzdGFjaydzIGN1cnJlbnQgW2NvbnRleHRdKCNsci5Db250ZXh0VHJhY2tlcikgdmFsdWUsIGlmXG4gICAgYW55LiBJdHMgdHlwZSB3aWxsIGRlcGVuZCBvbiB0aGUgY29udGV4dCB0cmFja2VyJ3MgdHlwZVxuICAgIHBhcmFtZXRlciwgb3IgaXQgd2lsbCBiZSBgbnVsbGAgaWYgdGhlcmUgaXMgbm8gY29udGV4dFxuICAgIHRyYWNrZXIuXG4gICAgKi9cbiAgICBnZXQgY29udGV4dCgpIHsgcmV0dXJuIHRoaXMuY3VyQ29udGV4dCA/IHRoaXMuY3VyQ29udGV4dC5jb250ZXh0IDogbnVsbDsgfVxuICAgIC8vIFB1c2ggYSBzdGF0ZSBvbnRvIHRoZSBzdGFjaywgdHJhY2tpbmcgaXRzIHN0YXJ0IHBvc2l0aW9uIGFzIHdlbGxcbiAgICAvLyBhcyB0aGUgYnVmZmVyIGJhc2UgYXQgdGhhdCBwb2ludC5cbiAgICAvKipcbiAgICBAaW50ZXJuYWxcbiAgICAqL1xuICAgIHB1c2hTdGF0ZShzdGF0ZSwgc3RhcnQpIHtcbiAgICAgICAgdGhpcy5zdGFjay5wdXNoKHRoaXMuc3RhdGUsIHN0YXJ0LCB0aGlzLmJ1ZmZlckJhc2UgKyB0aGlzLmJ1ZmZlci5sZW5ndGgpO1xuICAgICAgICB0aGlzLnN0YXRlID0gc3RhdGU7XG4gICAgfVxuICAgIC8vIEFwcGx5IGEgcmVkdWNlIGFjdGlvblxuICAgIC8qKlxuICAgIEBpbnRlcm5hbFxuICAgICovXG4gICAgcmVkdWNlKGFjdGlvbikge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIGxldCBkZXB0aCA9IGFjdGlvbiA+PiAxOSAvKiBBY3Rpb24uUmVkdWNlRGVwdGhTaGlmdCAqLywgdHlwZSA9IGFjdGlvbiAmIDY1NTM1IC8qIEFjdGlvbi5WYWx1ZU1hc2sgKi87XG4gICAgICAgIGxldCB7IHBhcnNlciB9ID0gdGhpcy5wO1xuICAgICAgICBsZXQgbG9va2FoZWFkUmVjb3JkID0gdGhpcy5yZWR1Y2VQb3MgPCB0aGlzLnBvcyAtIDI1IC8qIExvb2thaGVhZC5NYXJnaW4gKi8gJiYgdGhpcy5zZXRMb29rQWhlYWQodGhpcy5wb3MpO1xuICAgICAgICBsZXQgZFByZWMgPSBwYXJzZXIuZHluYW1pY1ByZWNlZGVuY2UodHlwZSk7XG4gICAgICAgIGlmIChkUHJlYylcbiAgICAgICAgICAgIHRoaXMuc2NvcmUgKz0gZFByZWM7XG4gICAgICAgIGlmIChkZXB0aCA9PSAwKSB7XG4gICAgICAgICAgICB0aGlzLnB1c2hTdGF0ZShwYXJzZXIuZ2V0R290byh0aGlzLnN0YXRlLCB0eXBlLCB0cnVlKSwgdGhpcy5yZWR1Y2VQb3MpO1xuICAgICAgICAgICAgLy8gWmVyby1kZXB0aCByZWR1Y3Rpb25zIGFyZSBhIHNwZWNpYWwgY2FzZeKAlHRoZXkgYWRkIHN0dWZmIHRvXG4gICAgICAgICAgICAvLyB0aGUgc3RhY2sgd2l0aG91dCBwb3BwaW5nIGFueXRoaW5nIG9mZi5cbiAgICAgICAgICAgIGlmICh0eXBlIDwgcGFyc2VyLm1pblJlcGVhdFRlcm0pXG4gICAgICAgICAgICAgICAgdGhpcy5zdG9yZU5vZGUodHlwZSwgdGhpcy5yZWR1Y2VQb3MsIHRoaXMucmVkdWNlUG9zLCBsb29rYWhlYWRSZWNvcmQgPyA4IDogNCwgdHJ1ZSk7XG4gICAgICAgICAgICB0aGlzLnJlZHVjZUNvbnRleHQodHlwZSwgdGhpcy5yZWR1Y2VQb3MpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIC8vIEZpbmQgdGhlIGJhc2UgaW5kZXggaW50byBgdGhpcy5zdGFja2AsIGNvbnRlbnQgYWZ0ZXIgd2hpY2ggd2lsbFxuICAgICAgICAvLyBiZSBkcm9wcGVkLiBOb3RlIHRoYXQgd2l0aCBgU3RheUZsYWdgIHJlZHVjdGlvbnMgd2UgbmVlZCB0b1xuICAgICAgICAvLyBjb25zdW1lIHR3byBleHRyYSBmcmFtZXMgKHRoZSBkdW1teSBwYXJlbnQgbm9kZSBmb3IgdGhlIHNraXBwZWRcbiAgICAgICAgLy8gZXhwcmVzc2lvbiBhbmQgdGhlIHN0YXRlIHRoYXQgd2UnbGwgYmUgc3RheWluZyBpbiwgd2hpY2ggc2hvdWxkXG4gICAgICAgIC8vIGJlIG1vdmVkIHRvIGB0aGlzLnN0YXRlYCkuXG4gICAgICAgIGxldCBiYXNlID0gdGhpcy5zdGFjay5sZW5ndGggLSAoKGRlcHRoIC0gMSkgKiAzKSAtIChhY3Rpb24gJiAyNjIxNDQgLyogQWN0aW9uLlN0YXlGbGFnICovID8gNiA6IDApO1xuICAgICAgICBsZXQgc3RhcnQgPSBiYXNlID8gdGhpcy5zdGFja1tiYXNlIC0gMl0gOiB0aGlzLnAucmFuZ2VzWzBdLmZyb20sIHNpemUgPSB0aGlzLnJlZHVjZVBvcyAtIHN0YXJ0O1xuICAgICAgICAvLyBUaGlzIGlzIGEga2x1ZGdlIHRvIHRyeSBhbmQgZGV0ZWN0IG92ZXJseSBkZWVwIGxlZnQtYXNzb2NpYXRpdmVcbiAgICAgICAgLy8gdHJlZXMsIHdoaWNoIHdpbGwgbm90IGluY3JlYXNlIHRoZSBwYXJzZSBzdGFjayBkZXB0aCBhbmQgdGh1c1xuICAgICAgICAvLyB3b24ndCBiZSBjYXVnaHQgYnkgdGhlIHJlZ3VsYXIgc3RhY2stZGVwdGggbGltaXQgY2hlY2suXG4gICAgICAgIGlmIChzaXplID49IDIwMDAgLyogUmVjb3Zlci5NaW5CaWdSZWR1Y3Rpb24gKi8gJiYgISgoX2EgPSB0aGlzLnAucGFyc2VyLm5vZGVTZXQudHlwZXNbdHlwZV0pID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5pc0Fub255bW91cykpIHtcbiAgICAgICAgICAgIGlmIChzdGFydCA9PSB0aGlzLnAubGFzdEJpZ1JlZHVjdGlvblN0YXJ0KSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wLmJpZ1JlZHVjdGlvbkNvdW50Kys7XG4gICAgICAgICAgICAgICAgdGhpcy5wLmxhc3RCaWdSZWR1Y3Rpb25TaXplID0gc2l6ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHRoaXMucC5sYXN0QmlnUmVkdWN0aW9uU2l6ZSA8IHNpemUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnAuYmlnUmVkdWN0aW9uQ291bnQgPSAxO1xuICAgICAgICAgICAgICAgIHRoaXMucC5sYXN0QmlnUmVkdWN0aW9uU3RhcnQgPSBzdGFydDtcbiAgICAgICAgICAgICAgICB0aGlzLnAubGFzdEJpZ1JlZHVjdGlvblNpemUgPSBzaXplO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGxldCBidWZmZXJCYXNlID0gYmFzZSA/IHRoaXMuc3RhY2tbYmFzZSAtIDFdIDogMCwgY291bnQgPSB0aGlzLmJ1ZmZlckJhc2UgKyB0aGlzLmJ1ZmZlci5sZW5ndGggLSBidWZmZXJCYXNlO1xuICAgICAgICAvLyBTdG9yZSBub3JtYWwgdGVybXMgb3IgYFIgLT4gUiBSYCByZXBlYXQgcmVkdWN0aW9uc1xuICAgICAgICBpZiAodHlwZSA8IHBhcnNlci5taW5SZXBlYXRUZXJtIHx8IChhY3Rpb24gJiAxMzEwNzIgLyogQWN0aW9uLlJlcGVhdEZsYWcgKi8pKSB7XG4gICAgICAgICAgICBsZXQgcG9zID0gcGFyc2VyLnN0YXRlRmxhZyh0aGlzLnN0YXRlLCAxIC8qIFN0YXRlRmxhZy5Ta2lwcGVkICovKSA/IHRoaXMucG9zIDogdGhpcy5yZWR1Y2VQb3M7XG4gICAgICAgICAgICB0aGlzLnN0b3JlTm9kZSh0eXBlLCBzdGFydCwgcG9zLCBjb3VudCArIDQsIHRydWUpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChhY3Rpb24gJiAyNjIxNDQgLyogQWN0aW9uLlN0YXlGbGFnICovKSB7XG4gICAgICAgICAgICB0aGlzLnN0YXRlID0gdGhpcy5zdGFja1tiYXNlXTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGxldCBiYXNlU3RhdGVJRCA9IHRoaXMuc3RhY2tbYmFzZSAtIDNdO1xuICAgICAgICAgICAgdGhpcy5zdGF0ZSA9IHBhcnNlci5nZXRHb3RvKGJhc2VTdGF0ZUlELCB0eXBlLCB0cnVlKTtcbiAgICAgICAgfVxuICAgICAgICB3aGlsZSAodGhpcy5zdGFjay5sZW5ndGggPiBiYXNlKVxuICAgICAgICAgICAgdGhpcy5zdGFjay5wb3AoKTtcbiAgICAgICAgdGhpcy5yZWR1Y2VDb250ZXh0KHR5cGUsIHN0YXJ0KTtcbiAgICB9XG4gICAgLy8gU2hpZnQgYSB2YWx1ZSBpbnRvIHRoZSBidWZmZXJcbiAgICAvKipcbiAgICBAaW50ZXJuYWxcbiAgICAqL1xuICAgIHN0b3JlTm9kZSh0ZXJtLCBzdGFydCwgZW5kLCBzaXplID0gNCwgbXVzdFNpbmsgPSBmYWxzZSkge1xuICAgICAgICBpZiAodGVybSA9PSAwIC8qIFRlcm0uRXJyICovICYmXG4gICAgICAgICAgICAoIXRoaXMuc3RhY2subGVuZ3RoIHx8IHRoaXMuc3RhY2tbdGhpcy5zdGFjay5sZW5ndGggLSAxXSA8IHRoaXMuYnVmZmVyLmxlbmd0aCArIHRoaXMuYnVmZmVyQmFzZSkpIHtcbiAgICAgICAgICAgIC8vIFRyeSB0byBvbWl0L21lcmdlIGFkamFjZW50IGVycm9yIG5vZGVzXG4gICAgICAgICAgICBsZXQgY3VyID0gdGhpcywgdG9wID0gdGhpcy5idWZmZXIubGVuZ3RoO1xuICAgICAgICAgICAgaWYgKHRvcCA9PSAwICYmIGN1ci5wYXJlbnQpIHtcbiAgICAgICAgICAgICAgICB0b3AgPSBjdXIuYnVmZmVyQmFzZSAtIGN1ci5wYXJlbnQuYnVmZmVyQmFzZTtcbiAgICAgICAgICAgICAgICBjdXIgPSBjdXIucGFyZW50O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRvcCA+IDAgJiYgY3VyLmJ1ZmZlclt0b3AgLSA0XSA9PSAwIC8qIFRlcm0uRXJyICovICYmIGN1ci5idWZmZXJbdG9wIC0gMV0gPiAtMSkge1xuICAgICAgICAgICAgICAgIGlmIChzdGFydCA9PSBlbmQpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICBpZiAoY3VyLmJ1ZmZlclt0b3AgLSAyXSA+PSBzdGFydCkge1xuICAgICAgICAgICAgICAgICAgICBjdXIuYnVmZmVyW3RvcCAtIDJdID0gZW5kO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmICghbXVzdFNpbmsgfHwgdGhpcy5wb3MgPT0gZW5kKSB7IC8vIFNpbXBsZSBjYXNlLCBqdXN0IGFwcGVuZFxuICAgICAgICAgICAgdGhpcy5idWZmZXIucHVzaCh0ZXJtLCBzdGFydCwgZW5kLCBzaXplKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHsgLy8gVGhlcmUgbWF5IGJlIHNraXBwZWQgbm9kZXMgdGhhdCBoYXZlIHRvIGJlIG1vdmVkIGZvcndhcmRcbiAgICAgICAgICAgIGxldCBpbmRleCA9IHRoaXMuYnVmZmVyLmxlbmd0aDtcbiAgICAgICAgICAgIGlmIChpbmRleCA+IDAgJiYgKHRoaXMuYnVmZmVyW2luZGV4IC0gNF0gIT0gMCAvKiBUZXJtLkVyciAqLyB8fCB0aGlzLmJ1ZmZlcltpbmRleCAtIDFdIDwgMCkpIHtcbiAgICAgICAgICAgICAgICBsZXQgbXVzdE1vdmUgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBzY2FuID0gaW5kZXg7IHNjYW4gPiAwICYmIHRoaXMuYnVmZmVyW3NjYW4gLSAyXSA+IGVuZDsgc2NhbiAtPSA0KSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmJ1ZmZlcltzY2FuIC0gMV0gPj0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbXVzdE1vdmUgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKG11c3RNb3ZlKVxuICAgICAgICAgICAgICAgICAgICB3aGlsZSAoaW5kZXggPiAwICYmIHRoaXMuYnVmZmVyW2luZGV4IC0gMl0gPiBlbmQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIE1vdmUgdGhpcyByZWNvcmQgZm9yd2FyZFxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5idWZmZXJbaW5kZXhdID0gdGhpcy5idWZmZXJbaW5kZXggLSA0XTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYnVmZmVyW2luZGV4ICsgMV0gPSB0aGlzLmJ1ZmZlcltpbmRleCAtIDNdO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5idWZmZXJbaW5kZXggKyAyXSA9IHRoaXMuYnVmZmVyW2luZGV4IC0gMl07XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmJ1ZmZlcltpbmRleCArIDNdID0gdGhpcy5idWZmZXJbaW5kZXggLSAxXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGluZGV4IC09IDQ7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2l6ZSA+IDQpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2l6ZSAtPSA0O1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmJ1ZmZlcltpbmRleF0gPSB0ZXJtO1xuICAgICAgICAgICAgdGhpcy5idWZmZXJbaW5kZXggKyAxXSA9IHN0YXJ0O1xuICAgICAgICAgICAgdGhpcy5idWZmZXJbaW5kZXggKyAyXSA9IGVuZDtcbiAgICAgICAgICAgIHRoaXMuYnVmZmVyW2luZGV4ICsgM10gPSBzaXplO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8vIEFwcGx5IGEgc2hpZnQgYWN0aW9uXG4gICAgLyoqXG4gICAgQGludGVybmFsXG4gICAgKi9cbiAgICBzaGlmdChhY3Rpb24sIHR5cGUsIHN0YXJ0LCBlbmQpIHtcbiAgICAgICAgaWYgKGFjdGlvbiAmIDEzMTA3MiAvKiBBY3Rpb24uR290b0ZsYWcgKi8pIHtcbiAgICAgICAgICAgIHRoaXMucHVzaFN0YXRlKGFjdGlvbiAmIDY1NTM1IC8qIEFjdGlvbi5WYWx1ZU1hc2sgKi8sIHRoaXMucG9zKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICgoYWN0aW9uICYgMjYyMTQ0IC8qIEFjdGlvbi5TdGF5RmxhZyAqLykgPT0gMCkgeyAvLyBSZWd1bGFyIHNoaWZ0XG4gICAgICAgICAgICBsZXQgbmV4dFN0YXRlID0gYWN0aW9uLCB7IHBhcnNlciB9ID0gdGhpcy5wO1xuICAgICAgICAgICAgaWYgKGVuZCA+IHRoaXMucG9zIHx8IHR5cGUgPD0gcGFyc2VyLm1heE5vZGUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnBvcyA9IGVuZDtcbiAgICAgICAgICAgICAgICBpZiAoIXBhcnNlci5zdGF0ZUZsYWcobmV4dFN0YXRlLCAxIC8qIFN0YXRlRmxhZy5Ta2lwcGVkICovKSlcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZWR1Y2VQb3MgPSBlbmQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnB1c2hTdGF0ZShuZXh0U3RhdGUsIHN0YXJ0KTtcbiAgICAgICAgICAgIHRoaXMuc2hpZnRDb250ZXh0KHR5cGUsIHN0YXJ0KTtcbiAgICAgICAgICAgIGlmICh0eXBlIDw9IHBhcnNlci5tYXhOb2RlKVxuICAgICAgICAgICAgICAgIHRoaXMuYnVmZmVyLnB1c2godHlwZSwgc3RhcnQsIGVuZCwgNCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7IC8vIFNoaWZ0LWFuZC1zdGF5LCB3aGljaCBtZWFucyB0aGlzIGlzIGEgc2tpcHBlZCB0b2tlblxuICAgICAgICAgICAgdGhpcy5wb3MgPSBlbmQ7XG4gICAgICAgICAgICB0aGlzLnNoaWZ0Q29udGV4dCh0eXBlLCBzdGFydCk7XG4gICAgICAgICAgICBpZiAodHlwZSA8PSB0aGlzLnAucGFyc2VyLm1heE5vZGUpXG4gICAgICAgICAgICAgICAgdGhpcy5idWZmZXIucHVzaCh0eXBlLCBzdGFydCwgZW5kLCA0KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvLyBBcHBseSBhbiBhY3Rpb25cbiAgICAvKipcbiAgICBAaW50ZXJuYWxcbiAgICAqL1xuICAgIGFwcGx5KGFjdGlvbiwgbmV4dCwgbmV4dFN0YXJ0LCBuZXh0RW5kKSB7XG4gICAgICAgIGlmIChhY3Rpb24gJiA2NTUzNiAvKiBBY3Rpb24uUmVkdWNlRmxhZyAqLylcbiAgICAgICAgICAgIHRoaXMucmVkdWNlKGFjdGlvbik7XG4gICAgICAgIGVsc2VcbiAgICAgICAgICAgIHRoaXMuc2hpZnQoYWN0aW9uLCBuZXh0LCBuZXh0U3RhcnQsIG5leHRFbmQpO1xuICAgIH1cbiAgICAvLyBBZGQgYSBwcmVidWlsdCAocmV1c2VkKSBub2RlIGludG8gdGhlIGJ1ZmZlci5cbiAgICAvKipcbiAgICBAaW50ZXJuYWxcbiAgICAqL1xuICAgIHVzZU5vZGUodmFsdWUsIG5leHQpIHtcbiAgICAgICAgbGV0IGluZGV4ID0gdGhpcy5wLnJldXNlZC5sZW5ndGggLSAxO1xuICAgICAgICBpZiAoaW5kZXggPCAwIHx8IHRoaXMucC5yZXVzZWRbaW5kZXhdICE9IHZhbHVlKSB7XG4gICAgICAgICAgICB0aGlzLnAucmV1c2VkLnB1c2godmFsdWUpO1xuICAgICAgICAgICAgaW5kZXgrKztcbiAgICAgICAgfVxuICAgICAgICBsZXQgc3RhcnQgPSB0aGlzLnBvcztcbiAgICAgICAgdGhpcy5yZWR1Y2VQb3MgPSB0aGlzLnBvcyA9IHN0YXJ0ICsgdmFsdWUubGVuZ3RoO1xuICAgICAgICB0aGlzLnB1c2hTdGF0ZShuZXh0LCBzdGFydCk7XG4gICAgICAgIHRoaXMuYnVmZmVyLnB1c2goaW5kZXgsIHN0YXJ0LCB0aGlzLnJlZHVjZVBvcywgLTEgLyogc2l6ZSA9PSAtMSBtZWFucyB0aGlzIGlzIGEgcmV1c2VkIHZhbHVlICovKTtcbiAgICAgICAgaWYgKHRoaXMuY3VyQ29udGV4dClcbiAgICAgICAgICAgIHRoaXMudXBkYXRlQ29udGV4dCh0aGlzLmN1ckNvbnRleHQudHJhY2tlci5yZXVzZSh0aGlzLmN1ckNvbnRleHQuY29udGV4dCwgdmFsdWUsIHRoaXMsIHRoaXMucC5zdHJlYW0ucmVzZXQodGhpcy5wb3MgLSB2YWx1ZS5sZW5ndGgpKSk7XG4gICAgfVxuICAgIC8vIFNwbGl0IHRoZSBzdGFjay4gRHVlIHRvIHRoZSBidWZmZXIgc2hhcmluZyBhbmQgdGhlIGZhY3RcbiAgICAvLyB0aGF0IGB0aGlzLnN0YWNrYCB0ZW5kcyB0byBzdGF5IHF1aXRlIHNoYWxsb3csIHRoaXMgaXNuJ3QgdmVyeVxuICAgIC8vIGV4cGVuc2l2ZS5cbiAgICAvKipcbiAgICBAaW50ZXJuYWxcbiAgICAqL1xuICAgIHNwbGl0KCkge1xuICAgICAgICBsZXQgcGFyZW50ID0gdGhpcztcbiAgICAgICAgbGV0IG9mZiA9IHBhcmVudC5idWZmZXIubGVuZ3RoO1xuICAgICAgICAvLyBCZWNhdXNlIHRoZSB0b3Agb2YgdGhlIGJ1ZmZlciAoYWZ0ZXIgdGhpcy5wb3MpIG1heSBiZSBtdXRhdGVkXG4gICAgICAgIC8vIHRvIHJlb3JkZXIgcmVkdWN0aW9ucyBhbmQgc2tpcHBlZCB0b2tlbnMsIGFuZCBzaGFyZWQgYnVmZmVyc1xuICAgICAgICAvLyBzaG91bGQgYmUgaW1tdXRhYmxlLCB0aGlzIGNvcGllcyBhbnkgb3V0c3RhbmRpbmcgc2tpcHBlZCB0b2tlbnNcbiAgICAgICAgLy8gdG8gdGhlIG5ldyBidWZmZXIsIGFuZCBwdXRzIHRoZSBiYXNlIHBvaW50ZXIgYmVmb3JlIHRoZW0uXG4gICAgICAgIHdoaWxlIChvZmYgPiAwICYmIHBhcmVudC5idWZmZXJbb2ZmIC0gMl0gPiBwYXJlbnQucmVkdWNlUG9zKVxuICAgICAgICAgICAgb2ZmIC09IDQ7XG4gICAgICAgIGxldCBidWZmZXIgPSBwYXJlbnQuYnVmZmVyLnNsaWNlKG9mZiksIGJhc2UgPSBwYXJlbnQuYnVmZmVyQmFzZSArIG9mZjtcbiAgICAgICAgLy8gTWFrZSBzdXJlIHBhcmVudCBwb2ludHMgdG8gYW4gYWN0dWFsIHBhcmVudCB3aXRoIGNvbnRlbnQsIGlmIHRoZXJlIGlzIHN1Y2ggYSBwYXJlbnQuXG4gICAgICAgIHdoaWxlIChwYXJlbnQgJiYgYmFzZSA9PSBwYXJlbnQuYnVmZmVyQmFzZSlcbiAgICAgICAgICAgIHBhcmVudCA9IHBhcmVudC5wYXJlbnQ7XG4gICAgICAgIHJldHVybiBuZXcgU3RhY2sodGhpcy5wLCB0aGlzLnN0YWNrLnNsaWNlKCksIHRoaXMuc3RhdGUsIHRoaXMucmVkdWNlUG9zLCB0aGlzLnBvcywgdGhpcy5zY29yZSwgYnVmZmVyLCBiYXNlLCB0aGlzLmN1ckNvbnRleHQsIHRoaXMubG9va0FoZWFkLCBwYXJlbnQpO1xuICAgIH1cbiAgICAvLyBUcnkgdG8gcmVjb3ZlciBmcm9tIGFuIGVycm9yIGJ5ICdkZWxldGluZycgKGlnbm9yaW5nKSBvbmUgdG9rZW4uXG4gICAgLyoqXG4gICAgQGludGVybmFsXG4gICAgKi9cbiAgICByZWNvdmVyQnlEZWxldGUobmV4dCwgbmV4dEVuZCkge1xuICAgICAgICBsZXQgaXNOb2RlID0gbmV4dCA8PSB0aGlzLnAucGFyc2VyLm1heE5vZGU7XG4gICAgICAgIGlmIChpc05vZGUpXG4gICAgICAgICAgICB0aGlzLnN0b3JlTm9kZShuZXh0LCB0aGlzLnBvcywgbmV4dEVuZCwgNCk7XG4gICAgICAgIHRoaXMuc3RvcmVOb2RlKDAgLyogVGVybS5FcnIgKi8sIHRoaXMucG9zLCBuZXh0RW5kLCBpc05vZGUgPyA4IDogNCk7XG4gICAgICAgIHRoaXMucG9zID0gdGhpcy5yZWR1Y2VQb3MgPSBuZXh0RW5kO1xuICAgICAgICB0aGlzLnNjb3JlIC09IDE5MCAvKiBSZWNvdmVyLkRlbGV0ZSAqLztcbiAgICB9XG4gICAgLyoqXG4gICAgQ2hlY2sgaWYgdGhlIGdpdmVuIHRlcm0gd291bGQgYmUgYWJsZSB0byBiZSBzaGlmdGVkIChvcHRpb25hbGx5XG4gICAgYWZ0ZXIgc29tZSByZWR1Y3Rpb25zKSBvbiB0aGlzIHN0YWNrLiBUaGlzIGNhbiBiZSB1c2VmdWwgZm9yXG4gICAgZXh0ZXJuYWwgdG9rZW5pemVycyB0aGF0IHdhbnQgdG8gbWFrZSBzdXJlIHRoZXkgb25seSBwcm92aWRlIGFcbiAgICBnaXZlbiB0b2tlbiB3aGVuIGl0IGFwcGxpZXMuXG4gICAgKi9cbiAgICBjYW5TaGlmdCh0ZXJtKSB7XG4gICAgICAgIGZvciAobGV0IHNpbSA9IG5ldyBTaW11bGF0ZWRTdGFjayh0aGlzKTs7KSB7XG4gICAgICAgICAgICBsZXQgYWN0aW9uID0gdGhpcy5wLnBhcnNlci5zdGF0ZVNsb3Qoc2ltLnN0YXRlLCA0IC8qIFBhcnNlU3RhdGUuRGVmYXVsdFJlZHVjZSAqLykgfHwgdGhpcy5wLnBhcnNlci5oYXNBY3Rpb24oc2ltLnN0YXRlLCB0ZXJtKTtcbiAgICAgICAgICAgIGlmIChhY3Rpb24gPT0gMClcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICBpZiAoKGFjdGlvbiAmIDY1NTM2IC8qIEFjdGlvbi5SZWR1Y2VGbGFnICovKSA9PSAwKVxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgc2ltLnJlZHVjZShhY3Rpb24pO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8vIEFwcGx5IHVwIHRvIFJlY292ZXIuTWF4TmV4dCByZWNvdmVyeSBhY3Rpb25zIHRoYXQgY29uY2VwdHVhbGx5XG4gICAgLy8gaW5zZXJ0cyBzb21lIG1pc3NpbmcgdG9rZW4gb3IgcnVsZS5cbiAgICAvKipcbiAgICBAaW50ZXJuYWxcbiAgICAqL1xuICAgIHJlY292ZXJCeUluc2VydChuZXh0KSB7XG4gICAgICAgIGlmICh0aGlzLnN0YWNrLmxlbmd0aCA+PSAzMDAgLyogUmVjb3Zlci5NYXhJbnNlcnRTdGFja0RlcHRoICovKVxuICAgICAgICAgICAgcmV0dXJuIFtdO1xuICAgICAgICBsZXQgbmV4dFN0YXRlcyA9IHRoaXMucC5wYXJzZXIubmV4dFN0YXRlcyh0aGlzLnN0YXRlKTtcbiAgICAgICAgaWYgKG5leHRTdGF0ZXMubGVuZ3RoID4gNCAvKiBSZWNvdmVyLk1heE5leHQgKi8gPDwgMSB8fCB0aGlzLnN0YWNrLmxlbmd0aCA+PSAxMjAgLyogUmVjb3Zlci5EYW1wZW5JbnNlcnRTdGFja0RlcHRoICovKSB7XG4gICAgICAgICAgICBsZXQgYmVzdCA9IFtdO1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDAsIHM7IGkgPCBuZXh0U3RhdGVzLmxlbmd0aDsgaSArPSAyKSB7XG4gICAgICAgICAgICAgICAgaWYgKChzID0gbmV4dFN0YXRlc1tpICsgMV0pICE9IHRoaXMuc3RhdGUgJiYgdGhpcy5wLnBhcnNlci5oYXNBY3Rpb24ocywgbmV4dCkpXG4gICAgICAgICAgICAgICAgICAgIGJlc3QucHVzaChuZXh0U3RhdGVzW2ldLCBzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLnN0YWNrLmxlbmd0aCA8IDEyMCAvKiBSZWNvdmVyLkRhbXBlbkluc2VydFN0YWNrRGVwdGggKi8pXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGJlc3QubGVuZ3RoIDwgNCAvKiBSZWNvdmVyLk1heE5leHQgKi8gPDwgMSAmJiBpIDwgbmV4dFN0YXRlcy5sZW5ndGg7IGkgKz0gMikge1xuICAgICAgICAgICAgICAgICAgICBsZXQgcyA9IG5leHRTdGF0ZXNbaSArIDFdO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWJlc3Quc29tZSgodiwgaSkgPT4gKGkgJiAxKSAmJiB2ID09IHMpKVxuICAgICAgICAgICAgICAgICAgICAgICAgYmVzdC5wdXNoKG5leHRTdGF0ZXNbaV0sIHMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG5leHRTdGF0ZXMgPSBiZXN0O1xuICAgICAgICB9XG4gICAgICAgIGxldCByZXN1bHQgPSBbXTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBuZXh0U3RhdGVzLmxlbmd0aCAmJiByZXN1bHQubGVuZ3RoIDwgNCAvKiBSZWNvdmVyLk1heE5leHQgKi87IGkgKz0gMikge1xuICAgICAgICAgICAgbGV0IHMgPSBuZXh0U3RhdGVzW2kgKyAxXTtcbiAgICAgICAgICAgIGlmIChzID09IHRoaXMuc3RhdGUpXG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICBsZXQgc3RhY2sgPSB0aGlzLnNwbGl0KCk7XG4gICAgICAgICAgICBzdGFjay5wdXNoU3RhdGUocywgdGhpcy5wb3MpO1xuICAgICAgICAgICAgc3RhY2suc3RvcmVOb2RlKDAgLyogVGVybS5FcnIgKi8sIHN0YWNrLnBvcywgc3RhY2sucG9zLCA0LCB0cnVlKTtcbiAgICAgICAgICAgIHN0YWNrLnNoaWZ0Q29udGV4dChuZXh0U3RhdGVzW2ldLCB0aGlzLnBvcyk7XG4gICAgICAgICAgICBzdGFjay5yZWR1Y2VQb3MgPSB0aGlzLnBvcztcbiAgICAgICAgICAgIHN0YWNrLnNjb3JlIC09IDIwMCAvKiBSZWNvdmVyLkluc2VydCAqLztcbiAgICAgICAgICAgIHJlc3VsdC5wdXNoKHN0YWNrKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cbiAgICAvLyBGb3JjZSBhIHJlZHVjZSwgaWYgcG9zc2libGUuIFJldHVybiBmYWxzZSBpZiB0aGF0IGNhbid0XG4gICAgLy8gYmUgZG9uZS5cbiAgICAvKipcbiAgICBAaW50ZXJuYWxcbiAgICAqL1xuICAgIGZvcmNlUmVkdWNlKCkge1xuICAgICAgICBsZXQgeyBwYXJzZXIgfSA9IHRoaXMucDtcbiAgICAgICAgbGV0IHJlZHVjZSA9IHBhcnNlci5zdGF0ZVNsb3QodGhpcy5zdGF0ZSwgNSAvKiBQYXJzZVN0YXRlLkZvcmNlZFJlZHVjZSAqLyk7XG4gICAgICAgIGlmICgocmVkdWNlICYgNjU1MzYgLyogQWN0aW9uLlJlZHVjZUZsYWcgKi8pID09IDApXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIGlmICghcGFyc2VyLnZhbGlkQWN0aW9uKHRoaXMuc3RhdGUsIHJlZHVjZSkpIHtcbiAgICAgICAgICAgIGxldCBkZXB0aCA9IHJlZHVjZSA+PiAxOSAvKiBBY3Rpb24uUmVkdWNlRGVwdGhTaGlmdCAqLywgdGVybSA9IHJlZHVjZSAmIDY1NTM1IC8qIEFjdGlvbi5WYWx1ZU1hc2sgKi87XG4gICAgICAgICAgICBsZXQgdGFyZ2V0ID0gdGhpcy5zdGFjay5sZW5ndGggLSBkZXB0aCAqIDM7XG4gICAgICAgICAgICBpZiAodGFyZ2V0IDwgMCB8fCBwYXJzZXIuZ2V0R290byh0aGlzLnN0YWNrW3RhcmdldF0sIHRlcm0sIGZhbHNlKSA8IDApIHtcbiAgICAgICAgICAgICAgICBsZXQgYmFja3VwID0gdGhpcy5maW5kRm9yY2VkUmVkdWN0aW9uKCk7XG4gICAgICAgICAgICAgICAgaWYgKGJhY2t1cCA9PSBudWxsKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgcmVkdWNlID0gYmFja3VwO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5zdG9yZU5vZGUoMCAvKiBUZXJtLkVyciAqLywgdGhpcy5wb3MsIHRoaXMucG9zLCA0LCB0cnVlKTtcbiAgICAgICAgICAgIHRoaXMuc2NvcmUgLT0gMTAwIC8qIFJlY292ZXIuUmVkdWNlICovO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMucmVkdWNlUG9zID0gdGhpcy5wb3M7XG4gICAgICAgIHRoaXMucmVkdWNlKHJlZHVjZSk7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICAvKipcbiAgICBUcnkgdG8gc2NhbiB0aHJvdWdoIHRoZSBhdXRvbWF0b24gdG8gZmluZCBzb21lIGtpbmQgb2YgcmVkdWN0aW9uXG4gICAgdGhhdCBjYW4gYmUgYXBwbGllZC4gVXNlZCB3aGVuIHRoZSByZWd1bGFyIEZvcmNlZFJlZHVjZSBmaWVsZFxuICAgIGlzbid0IGEgdmFsaWQgYWN0aW9uLiBAaW50ZXJuYWxcbiAgICAqL1xuICAgIGZpbmRGb3JjZWRSZWR1Y3Rpb24oKSB7XG4gICAgICAgIGxldCB7IHBhcnNlciB9ID0gdGhpcy5wLCBzZWVuID0gW107XG4gICAgICAgIGxldCBleHBsb3JlID0gKHN0YXRlLCBkZXB0aCkgPT4ge1xuICAgICAgICAgICAgaWYgKHNlZW4uaW5jbHVkZXMoc3RhdGUpKVxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIHNlZW4ucHVzaChzdGF0ZSk7XG4gICAgICAgICAgICByZXR1cm4gcGFyc2VyLmFsbEFjdGlvbnMoc3RhdGUsIChhY3Rpb24pID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoYWN0aW9uICYgKDI2MjE0NCAvKiBBY3Rpb24uU3RheUZsYWcgKi8gfCAxMzEwNzIgLyogQWN0aW9uLkdvdG9GbGFnICovKSkgO1xuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGFjdGlvbiAmIDY1NTM2IC8qIEFjdGlvbi5SZWR1Y2VGbGFnICovKSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCByRGVwdGggPSAoYWN0aW9uID4+IDE5IC8qIEFjdGlvbi5SZWR1Y2VEZXB0aFNoaWZ0ICovKSAtIGRlcHRoO1xuICAgICAgICAgICAgICAgICAgICBpZiAockRlcHRoID4gMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHRlcm0gPSBhY3Rpb24gJiA2NTUzNSAvKiBBY3Rpb24uVmFsdWVNYXNrICovLCB0YXJnZXQgPSB0aGlzLnN0YWNrLmxlbmd0aCAtIHJEZXB0aCAqIDM7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGFyZ2V0ID49IDAgJiYgcGFyc2VyLmdldEdvdG8odGhpcy5zdGFja1t0YXJnZXRdLCB0ZXJtLCBmYWxzZSkgPj0gMClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKHJEZXB0aCA8PCAxOSAvKiBBY3Rpb24uUmVkdWNlRGVwdGhTaGlmdCAqLykgfCA2NTUzNiAvKiBBY3Rpb24uUmVkdWNlRmxhZyAqLyB8IHRlcm07XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBmb3VuZCA9IGV4cGxvcmUoYWN0aW9uLCBkZXB0aCArIDEpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoZm91bmQgIT0gbnVsbClcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmb3VuZDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIGV4cGxvcmUodGhpcy5zdGF0ZSwgMCk7XG4gICAgfVxuICAgIC8qKlxuICAgIEBpbnRlcm5hbFxuICAgICovXG4gICAgZm9yY2VBbGwoKSB7XG4gICAgICAgIHdoaWxlICghdGhpcy5wLnBhcnNlci5zdGF0ZUZsYWcodGhpcy5zdGF0ZSwgMiAvKiBTdGF0ZUZsYWcuQWNjZXB0aW5nICovKSkge1xuICAgICAgICAgICAgaWYgKCF0aGlzLmZvcmNlUmVkdWNlKCkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnN0b3JlTm9kZSgwIC8qIFRlcm0uRXJyICovLCB0aGlzLnBvcywgdGhpcy5wb3MsIDQsIHRydWUpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICBDaGVjayB3aGV0aGVyIHRoaXMgc3RhdGUgaGFzIG5vIGZ1cnRoZXIgYWN0aW9ucyAoYXNzdW1lZCB0byBiZSBhIGRpcmVjdCBkZXNjZW5kYW50IG9mIHRoZVxuICAgIHRvcCBzdGF0ZSwgc2luY2UgYW55IG90aGVyIHN0YXRlcyBtdXN0IGJlIGFibGUgdG8gY29udGludWVcbiAgICBzb21laG93KS4gQGludGVybmFsXG4gICAgKi9cbiAgICBnZXQgZGVhZEVuZCgpIHtcbiAgICAgICAgaWYgKHRoaXMuc3RhY2subGVuZ3RoICE9IDMpXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIGxldCB7IHBhcnNlciB9ID0gdGhpcy5wO1xuICAgICAgICByZXR1cm4gcGFyc2VyLmRhdGFbcGFyc2VyLnN0YXRlU2xvdCh0aGlzLnN0YXRlLCAxIC8qIFBhcnNlU3RhdGUuQWN0aW9ucyAqLyldID09IDY1NTM1IC8qIFNlcS5FbmQgKi8gJiZcbiAgICAgICAgICAgICFwYXJzZXIuc3RhdGVTbG90KHRoaXMuc3RhdGUsIDQgLyogUGFyc2VTdGF0ZS5EZWZhdWx0UmVkdWNlICovKTtcbiAgICB9XG4gICAgLyoqXG4gICAgUmVzdGFydCB0aGUgc3RhY2sgKHB1dCBpdCBiYWNrIGluIGl0cyBzdGFydCBzdGF0ZSkuIE9ubHkgc2FmZVxuICAgIHdoZW4gdGhpcy5zdGFjay5sZW5ndGggPT0gMyAoc3RhdGUgaXMgZGlyZWN0bHkgYmVsb3cgdGhlIHRvcFxuICAgIHN0YXRlKS4gQGludGVybmFsXG4gICAgKi9cbiAgICByZXN0YXJ0KCkge1xuICAgICAgICB0aGlzLnN0b3JlTm9kZSgwIC8qIFRlcm0uRXJyICovLCB0aGlzLnBvcywgdGhpcy5wb3MsIDQsIHRydWUpO1xuICAgICAgICB0aGlzLnN0YXRlID0gdGhpcy5zdGFja1swXTtcbiAgICAgICAgdGhpcy5zdGFjay5sZW5ndGggPSAwO1xuICAgIH1cbiAgICAvKipcbiAgICBAaW50ZXJuYWxcbiAgICAqL1xuICAgIHNhbWVTdGF0ZShvdGhlcikge1xuICAgICAgICBpZiAodGhpcy5zdGF0ZSAhPSBvdGhlci5zdGF0ZSB8fCB0aGlzLnN0YWNrLmxlbmd0aCAhPSBvdGhlci5zdGFjay5sZW5ndGgpXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5zdGFjay5sZW5ndGg7IGkgKz0gMylcbiAgICAgICAgICAgIGlmICh0aGlzLnN0YWNrW2ldICE9IG90aGVyLnN0YWNrW2ldKVxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIC8qKlxuICAgIEdldCB0aGUgcGFyc2VyIHVzZWQgYnkgdGhpcyBzdGFjay5cbiAgICAqL1xuICAgIGdldCBwYXJzZXIoKSB7IHJldHVybiB0aGlzLnAucGFyc2VyOyB9XG4gICAgLyoqXG4gICAgVGVzdCB3aGV0aGVyIGEgZ2l2ZW4gZGlhbGVjdCAoYnkgbnVtZXJpYyBJRCwgYXMgZXhwb3J0ZWQgZnJvbVxuICAgIHRoZSB0ZXJtcyBmaWxlKSBpcyBlbmFibGVkLlxuICAgICovXG4gICAgZGlhbGVjdEVuYWJsZWQoZGlhbGVjdElEKSB7IHJldHVybiB0aGlzLnAucGFyc2VyLmRpYWxlY3QuZmxhZ3NbZGlhbGVjdElEXTsgfVxuICAgIHNoaWZ0Q29udGV4dCh0ZXJtLCBzdGFydCkge1xuICAgICAgICBpZiAodGhpcy5jdXJDb250ZXh0KVxuICAgICAgICAgICAgdGhpcy51cGRhdGVDb250ZXh0KHRoaXMuY3VyQ29udGV4dC50cmFja2VyLnNoaWZ0KHRoaXMuY3VyQ29udGV4dC5jb250ZXh0LCB0ZXJtLCB0aGlzLCB0aGlzLnAuc3RyZWFtLnJlc2V0KHN0YXJ0KSkpO1xuICAgIH1cbiAgICByZWR1Y2VDb250ZXh0KHRlcm0sIHN0YXJ0KSB7XG4gICAgICAgIGlmICh0aGlzLmN1ckNvbnRleHQpXG4gICAgICAgICAgICB0aGlzLnVwZGF0ZUNvbnRleHQodGhpcy5jdXJDb250ZXh0LnRyYWNrZXIucmVkdWNlKHRoaXMuY3VyQ29udGV4dC5jb250ZXh0LCB0ZXJtLCB0aGlzLCB0aGlzLnAuc3RyZWFtLnJlc2V0KHN0YXJ0KSkpO1xuICAgIH1cbiAgICAvKipcbiAgICBAaW50ZXJuYWxcbiAgICAqL1xuICAgIGVtaXRDb250ZXh0KCkge1xuICAgICAgICBsZXQgbGFzdCA9IHRoaXMuYnVmZmVyLmxlbmd0aCAtIDE7XG4gICAgICAgIGlmIChsYXN0IDwgMCB8fCB0aGlzLmJ1ZmZlcltsYXN0XSAhPSAtMylcbiAgICAgICAgICAgIHRoaXMuYnVmZmVyLnB1c2godGhpcy5jdXJDb250ZXh0Lmhhc2gsIHRoaXMucG9zLCB0aGlzLnBvcywgLTMpO1xuICAgIH1cbiAgICAvKipcbiAgICBAaW50ZXJuYWxcbiAgICAqL1xuICAgIGVtaXRMb29rQWhlYWQoKSB7XG4gICAgICAgIGxldCBsYXN0ID0gdGhpcy5idWZmZXIubGVuZ3RoIC0gMTtcbiAgICAgICAgaWYgKGxhc3QgPCAwIHx8IHRoaXMuYnVmZmVyW2xhc3RdICE9IC00KVxuICAgICAgICAgICAgdGhpcy5idWZmZXIucHVzaCh0aGlzLmxvb2tBaGVhZCwgdGhpcy5wb3MsIHRoaXMucG9zLCAtNCk7XG4gICAgfVxuICAgIHVwZGF0ZUNvbnRleHQoY29udGV4dCkge1xuICAgICAgICBpZiAoY29udGV4dCAhPSB0aGlzLmN1ckNvbnRleHQuY29udGV4dCkge1xuICAgICAgICAgICAgbGV0IG5ld0N4ID0gbmV3IFN0YWNrQ29udGV4dCh0aGlzLmN1ckNvbnRleHQudHJhY2tlciwgY29udGV4dCk7XG4gICAgICAgICAgICBpZiAobmV3Q3guaGFzaCAhPSB0aGlzLmN1ckNvbnRleHQuaGFzaClcbiAgICAgICAgICAgICAgICB0aGlzLmVtaXRDb250ZXh0KCk7XG4gICAgICAgICAgICB0aGlzLmN1ckNvbnRleHQgPSBuZXdDeDtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICBAaW50ZXJuYWxcbiAgICAqL1xuICAgIHNldExvb2tBaGVhZChsb29rQWhlYWQpIHtcbiAgICAgICAgaWYgKGxvb2tBaGVhZCA8PSB0aGlzLmxvb2tBaGVhZClcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgdGhpcy5lbWl0TG9va0FoZWFkKCk7XG4gICAgICAgIHRoaXMubG9va0FoZWFkID0gbG9va0FoZWFkO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgLyoqXG4gICAgQGludGVybmFsXG4gICAgKi9cbiAgICBjbG9zZSgpIHtcbiAgICAgICAgaWYgKHRoaXMuY3VyQ29udGV4dCAmJiB0aGlzLmN1ckNvbnRleHQudHJhY2tlci5zdHJpY3QpXG4gICAgICAgICAgICB0aGlzLmVtaXRDb250ZXh0KCk7XG4gICAgICAgIGlmICh0aGlzLmxvb2tBaGVhZCA+IDApXG4gICAgICAgICAgICB0aGlzLmVtaXRMb29rQWhlYWQoKTtcbiAgICB9XG59XG5jbGFzcyBTdGFja0NvbnRleHQge1xuICAgIGNvbnN0cnVjdG9yKHRyYWNrZXIsIGNvbnRleHQpIHtcbiAgICAgICAgdGhpcy50cmFja2VyID0gdHJhY2tlcjtcbiAgICAgICAgdGhpcy5jb250ZXh0ID0gY29udGV4dDtcbiAgICAgICAgdGhpcy5oYXNoID0gdHJhY2tlci5zdHJpY3QgPyB0cmFja2VyLmhhc2goY29udGV4dCkgOiAwO1xuICAgIH1cbn1cbi8vIFVzZWQgdG8gY2hlYXBseSBydW4gc29tZSByZWR1Y3Rpb25zIHRvIHNjYW4gYWhlYWQgd2l0aG91dCBtdXRhdGluZ1xuLy8gYW4gZW50aXJlIHN0YWNrXG5jbGFzcyBTaW11bGF0ZWRTdGFjayB7XG4gICAgY29uc3RydWN0b3Ioc3RhcnQpIHtcbiAgICAgICAgdGhpcy5zdGFydCA9IHN0YXJ0O1xuICAgICAgICB0aGlzLnN0YXRlID0gc3RhcnQuc3RhdGU7XG4gICAgICAgIHRoaXMuc3RhY2sgPSBzdGFydC5zdGFjaztcbiAgICAgICAgdGhpcy5iYXNlID0gdGhpcy5zdGFjay5sZW5ndGg7XG4gICAgfVxuICAgIHJlZHVjZShhY3Rpb24pIHtcbiAgICAgICAgbGV0IHRlcm0gPSBhY3Rpb24gJiA2NTUzNSAvKiBBY3Rpb24uVmFsdWVNYXNrICovLCBkZXB0aCA9IGFjdGlvbiA+PiAxOSAvKiBBY3Rpb24uUmVkdWNlRGVwdGhTaGlmdCAqLztcbiAgICAgICAgaWYgKGRlcHRoID09IDApIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnN0YWNrID09IHRoaXMuc3RhcnQuc3RhY2spXG4gICAgICAgICAgICAgICAgdGhpcy5zdGFjayA9IHRoaXMuc3RhY2suc2xpY2UoKTtcbiAgICAgICAgICAgIHRoaXMuc3RhY2sucHVzaCh0aGlzLnN0YXRlLCAwLCAwKTtcbiAgICAgICAgICAgIHRoaXMuYmFzZSArPSAzO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5iYXNlIC09IChkZXB0aCAtIDEpICogMztcbiAgICAgICAgfVxuICAgICAgICBsZXQgZ290byA9IHRoaXMuc3RhcnQucC5wYXJzZXIuZ2V0R290byh0aGlzLnN0YWNrW3RoaXMuYmFzZSAtIDNdLCB0ZXJtLCB0cnVlKTtcbiAgICAgICAgdGhpcy5zdGF0ZSA9IGdvdG87XG4gICAgfVxufVxuLy8gVGhpcyBpcyBnaXZlbiB0byBgVHJlZS5idWlsZGAgdG8gYnVpbGQgYSBidWZmZXIsIGFuZCBlbmNhcHN1bGF0ZXNcbi8vIHRoZSBwYXJlbnQtc3RhY2std2Fsa2luZyBuZWNlc3NhcnkgdG8gcmVhZCB0aGUgbm9kZXMuXG5jbGFzcyBTdGFja0J1ZmZlckN1cnNvciB7XG4gICAgY29uc3RydWN0b3Ioc3RhY2ssIHBvcywgaW5kZXgpIHtcbiAgICAgICAgdGhpcy5zdGFjayA9IHN0YWNrO1xuICAgICAgICB0aGlzLnBvcyA9IHBvcztcbiAgICAgICAgdGhpcy5pbmRleCA9IGluZGV4O1xuICAgICAgICB0aGlzLmJ1ZmZlciA9IHN0YWNrLmJ1ZmZlcjtcbiAgICAgICAgaWYgKHRoaXMuaW5kZXggPT0gMClcbiAgICAgICAgICAgIHRoaXMubWF5YmVOZXh0KCk7XG4gICAgfVxuICAgIHN0YXRpYyBjcmVhdGUoc3RhY2ssIHBvcyA9IHN0YWNrLmJ1ZmZlckJhc2UgKyBzdGFjay5idWZmZXIubGVuZ3RoKSB7XG4gICAgICAgIHJldHVybiBuZXcgU3RhY2tCdWZmZXJDdXJzb3Ioc3RhY2ssIHBvcywgcG9zIC0gc3RhY2suYnVmZmVyQmFzZSk7XG4gICAgfVxuICAgIG1heWJlTmV4dCgpIHtcbiAgICAgICAgbGV0IG5leHQgPSB0aGlzLnN0YWNrLnBhcmVudDtcbiAgICAgICAgaWYgKG5leHQgIT0gbnVsbCkge1xuICAgICAgICAgICAgdGhpcy5pbmRleCA9IHRoaXMuc3RhY2suYnVmZmVyQmFzZSAtIG5leHQuYnVmZmVyQmFzZTtcbiAgICAgICAgICAgIHRoaXMuc3RhY2sgPSBuZXh0O1xuICAgICAgICAgICAgdGhpcy5idWZmZXIgPSBuZXh0LmJ1ZmZlcjtcbiAgICAgICAgfVxuICAgIH1cbiAgICBnZXQgaWQoKSB7IHJldHVybiB0aGlzLmJ1ZmZlclt0aGlzLmluZGV4IC0gNF07IH1cbiAgICBnZXQgc3RhcnQoKSB7IHJldHVybiB0aGlzLmJ1ZmZlclt0aGlzLmluZGV4IC0gM107IH1cbiAgICBnZXQgZW5kKCkgeyByZXR1cm4gdGhpcy5idWZmZXJbdGhpcy5pbmRleCAtIDJdOyB9XG4gICAgZ2V0IHNpemUoKSB7IHJldHVybiB0aGlzLmJ1ZmZlclt0aGlzLmluZGV4IC0gMV07IH1cbiAgICBuZXh0KCkge1xuICAgICAgICB0aGlzLmluZGV4IC09IDQ7XG4gICAgICAgIHRoaXMucG9zIC09IDQ7XG4gICAgICAgIGlmICh0aGlzLmluZGV4ID09IDApXG4gICAgICAgICAgICB0aGlzLm1heWJlTmV4dCgpO1xuICAgIH1cbiAgICBmb3JrKCkge1xuICAgICAgICByZXR1cm4gbmV3IFN0YWNrQnVmZmVyQ3Vyc29yKHRoaXMuc3RhY2ssIHRoaXMucG9zLCB0aGlzLmluZGV4KTtcbiAgICB9XG59XG5cbi8vIFNlZSBsZXplci1nZW5lcmF0b3Ivc3JjL2VuY29kZS50cyBmb3IgY29tbWVudHMgYWJvdXQgdGhlIGVuY29kaW5nXG4vLyB1c2VkIGhlcmVcbmZ1bmN0aW9uIGRlY29kZUFycmF5KGlucHV0LCBUeXBlID0gVWludDE2QXJyYXkpIHtcbiAgICBpZiAodHlwZW9mIGlucHV0ICE9IFwic3RyaW5nXCIpXG4gICAgICAgIHJldHVybiBpbnB1dDtcbiAgICBsZXQgYXJyYXkgPSBudWxsO1xuICAgIGZvciAobGV0IHBvcyA9IDAsIG91dCA9IDA7IHBvcyA8IGlucHV0Lmxlbmd0aDspIHtcbiAgICAgICAgbGV0IHZhbHVlID0gMDtcbiAgICAgICAgZm9yICg7Oykge1xuICAgICAgICAgICAgbGV0IG5leHQgPSBpbnB1dC5jaGFyQ29kZUF0KHBvcysrKSwgc3RvcCA9IGZhbHNlO1xuICAgICAgICAgICAgaWYgKG5leHQgPT0gMTI2IC8qIEVuY29kZS5CaWdWYWxDb2RlICovKSB7XG4gICAgICAgICAgICAgICAgdmFsdWUgPSA2NTUzNSAvKiBFbmNvZGUuQmlnVmFsICovO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKG5leHQgPj0gOTIgLyogRW5jb2RlLkdhcDIgKi8pXG4gICAgICAgICAgICAgICAgbmV4dC0tO1xuICAgICAgICAgICAgaWYgKG5leHQgPj0gMzQgLyogRW5jb2RlLkdhcDEgKi8pXG4gICAgICAgICAgICAgICAgbmV4dC0tO1xuICAgICAgICAgICAgbGV0IGRpZ2l0ID0gbmV4dCAtIDMyIC8qIEVuY29kZS5TdGFydCAqLztcbiAgICAgICAgICAgIGlmIChkaWdpdCA+PSA0NiAvKiBFbmNvZGUuQmFzZSAqLykge1xuICAgICAgICAgICAgICAgIGRpZ2l0IC09IDQ2IC8qIEVuY29kZS5CYXNlICovO1xuICAgICAgICAgICAgICAgIHN0b3AgPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFsdWUgKz0gZGlnaXQ7XG4gICAgICAgICAgICBpZiAoc3RvcClcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIHZhbHVlICo9IDQ2IC8qIEVuY29kZS5CYXNlICovO1xuICAgICAgICB9XG4gICAgICAgIGlmIChhcnJheSlcbiAgICAgICAgICAgIGFycmF5W291dCsrXSA9IHZhbHVlO1xuICAgICAgICBlbHNlXG4gICAgICAgICAgICBhcnJheSA9IG5ldyBUeXBlKHZhbHVlKTtcbiAgICB9XG4gICAgcmV0dXJuIGFycmF5O1xufVxuXG5jbGFzcyBDYWNoZWRUb2tlbiB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMuc3RhcnQgPSAtMTtcbiAgICAgICAgdGhpcy52YWx1ZSA9IC0xO1xuICAgICAgICB0aGlzLmVuZCA9IC0xO1xuICAgICAgICB0aGlzLmV4dGVuZGVkID0gLTE7XG4gICAgICAgIHRoaXMubG9va0FoZWFkID0gMDtcbiAgICAgICAgdGhpcy5tYXNrID0gMDtcbiAgICAgICAgdGhpcy5jb250ZXh0ID0gMDtcbiAgICB9XG59XG5jb25zdCBudWxsVG9rZW4gPSBuZXcgQ2FjaGVkVG9rZW47XG4vKipcbltUb2tlbml6ZXJzXSgjbHIuRXh0ZXJuYWxUb2tlbml6ZXIpIGludGVyYWN0IHdpdGggdGhlIGlucHV0XG50aHJvdWdoIHRoaXMgaW50ZXJmYWNlLiBJdCBwcmVzZW50cyB0aGUgaW5wdXQgYXMgYSBzdHJlYW0gb2ZcbmNoYXJhY3RlcnMsIHRyYWNraW5nIGxvb2thaGVhZCBhbmQgaGlkaW5nIHRoZSBjb21wbGV4aXR5IG9mXG5bcmFuZ2VzXSgjY29tbW9uLlBhcnNlci5wYXJzZV5yYW5nZXMpIGZyb20gdG9rZW5pemVyIGNvZGUuXG4qL1xuY2xhc3MgSW5wdXRTdHJlYW0ge1xuICAgIC8qKlxuICAgIEBpbnRlcm5hbFxuICAgICovXG4gICAgY29uc3RydWN0b3IoXG4gICAgLyoqXG4gICAgQGludGVybmFsXG4gICAgKi9cbiAgICBpbnB1dCwgXG4gICAgLyoqXG4gICAgQGludGVybmFsXG4gICAgKi9cbiAgICByYW5nZXMpIHtcbiAgICAgICAgdGhpcy5pbnB1dCA9IGlucHV0O1xuICAgICAgICB0aGlzLnJhbmdlcyA9IHJhbmdlcztcbiAgICAgICAgLyoqXG4gICAgICAgIEBpbnRlcm5hbFxuICAgICAgICAqL1xuICAgICAgICB0aGlzLmNodW5rID0gXCJcIjtcbiAgICAgICAgLyoqXG4gICAgICAgIEBpbnRlcm5hbFxuICAgICAgICAqL1xuICAgICAgICB0aGlzLmNodW5rT2ZmID0gMDtcbiAgICAgICAgLyoqXG4gICAgICAgIEJhY2t1cCBjaHVua1xuICAgICAgICAqL1xuICAgICAgICB0aGlzLmNodW5rMiA9IFwiXCI7XG4gICAgICAgIHRoaXMuY2h1bmsyUG9zID0gMDtcbiAgICAgICAgLyoqXG4gICAgICAgIFRoZSBjaGFyYWN0ZXIgY29kZSBvZiB0aGUgbmV4dCBjb2RlIHVuaXQgaW4gdGhlIGlucHV0LCBvciAtMVxuICAgICAgICB3aGVuIHRoZSBzdHJlYW0gaXMgYXQgdGhlIGVuZCBvZiB0aGUgaW5wdXQuXG4gICAgICAgICovXG4gICAgICAgIHRoaXMubmV4dCA9IC0xO1xuICAgICAgICAvKipcbiAgICAgICAgQGludGVybmFsXG4gICAgICAgICovXG4gICAgICAgIHRoaXMudG9rZW4gPSBudWxsVG9rZW47XG4gICAgICAgIHRoaXMucmFuZ2VJbmRleCA9IDA7XG4gICAgICAgIHRoaXMucG9zID0gdGhpcy5jaHVua1BvcyA9IHJhbmdlc1swXS5mcm9tO1xuICAgICAgICB0aGlzLnJhbmdlID0gcmFuZ2VzWzBdO1xuICAgICAgICB0aGlzLmVuZCA9IHJhbmdlc1tyYW5nZXMubGVuZ3RoIC0gMV0udG87XG4gICAgICAgIHRoaXMucmVhZE5leHQoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgQGludGVybmFsXG4gICAgKi9cbiAgICByZXNvbHZlT2Zmc2V0KG9mZnNldCwgYXNzb2MpIHtcbiAgICAgICAgbGV0IHJhbmdlID0gdGhpcy5yYW5nZSwgaW5kZXggPSB0aGlzLnJhbmdlSW5kZXg7XG4gICAgICAgIGxldCBwb3MgPSB0aGlzLnBvcyArIG9mZnNldDtcbiAgICAgICAgd2hpbGUgKHBvcyA8IHJhbmdlLmZyb20pIHtcbiAgICAgICAgICAgIGlmICghaW5kZXgpXG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICBsZXQgbmV4dCA9IHRoaXMucmFuZ2VzWy0taW5kZXhdO1xuICAgICAgICAgICAgcG9zIC09IHJhbmdlLmZyb20gLSBuZXh0LnRvO1xuICAgICAgICAgICAgcmFuZ2UgPSBuZXh0O1xuICAgICAgICB9XG4gICAgICAgIHdoaWxlIChhc3NvYyA8IDAgPyBwb3MgPiByYW5nZS50byA6IHBvcyA+PSByYW5nZS50bykge1xuICAgICAgICAgICAgaWYgKGluZGV4ID09IHRoaXMucmFuZ2VzLmxlbmd0aCAtIDEpXG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICBsZXQgbmV4dCA9IHRoaXMucmFuZ2VzWysraW5kZXhdO1xuICAgICAgICAgICAgcG9zICs9IG5leHQuZnJvbSAtIHJhbmdlLnRvO1xuICAgICAgICAgICAgcmFuZ2UgPSBuZXh0O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBwb3M7XG4gICAgfVxuICAgIC8qKlxuICAgIEBpbnRlcm5hbFxuICAgICovXG4gICAgY2xpcFBvcyhwb3MpIHtcbiAgICAgICAgaWYgKHBvcyA+PSB0aGlzLnJhbmdlLmZyb20gJiYgcG9zIDwgdGhpcy5yYW5nZS50bylcbiAgICAgICAgICAgIHJldHVybiBwb3M7XG4gICAgICAgIGZvciAobGV0IHJhbmdlIG9mIHRoaXMucmFuZ2VzKVxuICAgICAgICAgICAgaWYgKHJhbmdlLnRvID4gcG9zKVxuICAgICAgICAgICAgICAgIHJldHVybiBNYXRoLm1heChwb3MsIHJhbmdlLmZyb20pO1xuICAgICAgICByZXR1cm4gdGhpcy5lbmQ7XG4gICAgfVxuICAgIC8qKlxuICAgIExvb2sgYXQgYSBjb2RlIHVuaXQgbmVhciB0aGUgc3RyZWFtIHBvc2l0aW9uLiBgLnBlZWsoMClgIGVxdWFsc1xuICAgIGAubmV4dGAsIGAucGVlaygtMSlgIGdpdmVzIHlvdSB0aGUgcHJldmlvdXMgY2hhcmFjdGVyLCBhbmQgc29cbiAgICBvbi5cbiAgICBcbiAgICBOb3RlIHRoYXQgbG9va2luZyBhcm91bmQgZHVyaW5nIHRva2VuaXppbmcgY3JlYXRlcyBkZXBlbmRlbmNpZXNcbiAgICBvbiBwb3RlbnRpYWxseSBmYXItYXdheSBjb250ZW50LCB3aGljaCBtYXkgcmVkdWNlIHRoZVxuICAgIGVmZmVjdGl2ZW5lc3MgaW5jcmVtZW50YWwgcGFyc2luZ+KAlHdoZW4gbG9va2luZyBmb3J3YXJk4oCUb3IgZXZlblxuICAgIGNhdXNlIGludmFsaWQgcmVwYXJzZXMgd2hlbiBsb29raW5nIGJhY2t3YXJkIG1vcmUgdGhhbiAyNSBjb2RlXG4gICAgdW5pdHMsIHNpbmNlIHRoZSBsaWJyYXJ5IGRvZXMgbm90IHRyYWNrIGxvb2tiZWhpbmQuXG4gICAgKi9cbiAgICBwZWVrKG9mZnNldCkge1xuICAgICAgICBsZXQgaWR4ID0gdGhpcy5jaHVua09mZiArIG9mZnNldCwgcG9zLCByZXN1bHQ7XG4gICAgICAgIGlmIChpZHggPj0gMCAmJiBpZHggPCB0aGlzLmNodW5rLmxlbmd0aCkge1xuICAgICAgICAgICAgcG9zID0gdGhpcy5wb3MgKyBvZmZzZXQ7XG4gICAgICAgICAgICByZXN1bHQgPSB0aGlzLmNodW5rLmNoYXJDb2RlQXQoaWR4KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGxldCByZXNvbHZlZCA9IHRoaXMucmVzb2x2ZU9mZnNldChvZmZzZXQsIDEpO1xuICAgICAgICAgICAgaWYgKHJlc29sdmVkID09IG51bGwpXG4gICAgICAgICAgICAgICAgcmV0dXJuIC0xO1xuICAgICAgICAgICAgcG9zID0gcmVzb2x2ZWQ7XG4gICAgICAgICAgICBpZiAocG9zID49IHRoaXMuY2h1bmsyUG9zICYmIHBvcyA8IHRoaXMuY2h1bmsyUG9zICsgdGhpcy5jaHVuazIubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgcmVzdWx0ID0gdGhpcy5jaHVuazIuY2hhckNvZGVBdChwb3MgLSB0aGlzLmNodW5rMlBvcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBsZXQgaSA9IHRoaXMucmFuZ2VJbmRleCwgcmFuZ2UgPSB0aGlzLnJhbmdlO1xuICAgICAgICAgICAgICAgIHdoaWxlIChyYW5nZS50byA8PSBwb3MpXG4gICAgICAgICAgICAgICAgICAgIHJhbmdlID0gdGhpcy5yYW5nZXNbKytpXTtcbiAgICAgICAgICAgICAgICB0aGlzLmNodW5rMiA9IHRoaXMuaW5wdXQuY2h1bmsodGhpcy5jaHVuazJQb3MgPSBwb3MpO1xuICAgICAgICAgICAgICAgIGlmIChwb3MgKyB0aGlzLmNodW5rMi5sZW5ndGggPiByYW5nZS50bylcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jaHVuazIgPSB0aGlzLmNodW5rMi5zbGljZSgwLCByYW5nZS50byAtIHBvcyk7XG4gICAgICAgICAgICAgICAgcmVzdWx0ID0gdGhpcy5jaHVuazIuY2hhckNvZGVBdCgwKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAocG9zID49IHRoaXMudG9rZW4ubG9va0FoZWFkKVxuICAgICAgICAgICAgdGhpcy50b2tlbi5sb29rQWhlYWQgPSBwb3MgKyAxO1xuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cbiAgICAvKipcbiAgICBBY2NlcHQgYSB0b2tlbi4gQnkgZGVmYXVsdCwgdGhlIGVuZCBvZiB0aGUgdG9rZW4gaXMgc2V0IHRvIHRoZVxuICAgIGN1cnJlbnQgc3RyZWFtIHBvc2l0aW9uLCBidXQgeW91IGNhbiBwYXNzIGFuIG9mZnNldCAocmVsYXRpdmUgdG9cbiAgICB0aGUgc3RyZWFtIHBvc2l0aW9uKSB0byBjaGFuZ2UgdGhhdC5cbiAgICAqL1xuICAgIGFjY2VwdFRva2VuKHRva2VuLCBlbmRPZmZzZXQgPSAwKSB7XG4gICAgICAgIGxldCBlbmQgPSBlbmRPZmZzZXQgPyB0aGlzLnJlc29sdmVPZmZzZXQoZW5kT2Zmc2V0LCAtMSkgOiB0aGlzLnBvcztcbiAgICAgICAgaWYgKGVuZCA9PSBudWxsIHx8IGVuZCA8IHRoaXMudG9rZW4uc3RhcnQpXG4gICAgICAgICAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcihcIlRva2VuIGVuZCBvdXQgb2YgYm91bmRzXCIpO1xuICAgICAgICB0aGlzLnRva2VuLnZhbHVlID0gdG9rZW47XG4gICAgICAgIHRoaXMudG9rZW4uZW5kID0gZW5kO1xuICAgIH1cbiAgICAvKipcbiAgICBBY2NlcHQgYSB0b2tlbiBlbmRpbmcgYXQgYSBzcGVjaWZpYyBnaXZlbiBwb3NpdGlvbi5cbiAgICAqL1xuICAgIGFjY2VwdFRva2VuVG8odG9rZW4sIGVuZFBvcykge1xuICAgICAgICB0aGlzLnRva2VuLnZhbHVlID0gdG9rZW47XG4gICAgICAgIHRoaXMudG9rZW4uZW5kID0gZW5kUG9zO1xuICAgIH1cbiAgICBnZXRDaHVuaygpIHtcbiAgICAgICAgaWYgKHRoaXMucG9zID49IHRoaXMuY2h1bmsyUG9zICYmIHRoaXMucG9zIDwgdGhpcy5jaHVuazJQb3MgKyB0aGlzLmNodW5rMi5sZW5ndGgpIHtcbiAgICAgICAgICAgIGxldCB7IGNodW5rLCBjaHVua1BvcyB9ID0gdGhpcztcbiAgICAgICAgICAgIHRoaXMuY2h1bmsgPSB0aGlzLmNodW5rMjtcbiAgICAgICAgICAgIHRoaXMuY2h1bmtQb3MgPSB0aGlzLmNodW5rMlBvcztcbiAgICAgICAgICAgIHRoaXMuY2h1bmsyID0gY2h1bms7XG4gICAgICAgICAgICB0aGlzLmNodW5rMlBvcyA9IGNodW5rUG9zO1xuICAgICAgICAgICAgdGhpcy5jaHVua09mZiA9IHRoaXMucG9zIC0gdGhpcy5jaHVua1BvcztcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuY2h1bmsyID0gdGhpcy5jaHVuaztcbiAgICAgICAgICAgIHRoaXMuY2h1bmsyUG9zID0gdGhpcy5jaHVua1BvcztcbiAgICAgICAgICAgIGxldCBuZXh0Q2h1bmsgPSB0aGlzLmlucHV0LmNodW5rKHRoaXMucG9zKTtcbiAgICAgICAgICAgIGxldCBlbmQgPSB0aGlzLnBvcyArIG5leHRDaHVuay5sZW5ndGg7XG4gICAgICAgICAgICB0aGlzLmNodW5rID0gZW5kID4gdGhpcy5yYW5nZS50byA/IG5leHRDaHVuay5zbGljZSgwLCB0aGlzLnJhbmdlLnRvIC0gdGhpcy5wb3MpIDogbmV4dENodW5rO1xuICAgICAgICAgICAgdGhpcy5jaHVua1BvcyA9IHRoaXMucG9zO1xuICAgICAgICAgICAgdGhpcy5jaHVua09mZiA9IDA7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmVhZE5leHQoKSB7XG4gICAgICAgIGlmICh0aGlzLmNodW5rT2ZmID49IHRoaXMuY2h1bmsubGVuZ3RoKSB7XG4gICAgICAgICAgICB0aGlzLmdldENodW5rKCk7XG4gICAgICAgICAgICBpZiAodGhpcy5jaHVua09mZiA9PSB0aGlzLmNodW5rLmxlbmd0aClcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5uZXh0ID0gLTE7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMubmV4dCA9IHRoaXMuY2h1bmsuY2hhckNvZGVBdCh0aGlzLmNodW5rT2ZmKTtcbiAgICB9XG4gICAgLyoqXG4gICAgTW92ZSB0aGUgc3RyZWFtIGZvcndhcmQgTiAoZGVmYXVsdHMgdG8gMSkgY29kZSB1bml0cy4gUmV0dXJuc1xuICAgIHRoZSBuZXcgdmFsdWUgb2YgW2BuZXh0YF0oI2xyLklucHV0U3RyZWFtLm5leHQpLlxuICAgICovXG4gICAgYWR2YW5jZShuID0gMSkge1xuICAgICAgICB0aGlzLmNodW5rT2ZmICs9IG47XG4gICAgICAgIHdoaWxlICh0aGlzLnBvcyArIG4gPj0gdGhpcy5yYW5nZS50bykge1xuICAgICAgICAgICAgaWYgKHRoaXMucmFuZ2VJbmRleCA9PSB0aGlzLnJhbmdlcy5sZW5ndGggLSAxKVxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnNldERvbmUoKTtcbiAgICAgICAgICAgIG4gLT0gdGhpcy5yYW5nZS50byAtIHRoaXMucG9zO1xuICAgICAgICAgICAgdGhpcy5yYW5nZSA9IHRoaXMucmFuZ2VzWysrdGhpcy5yYW5nZUluZGV4XTtcbiAgICAgICAgICAgIHRoaXMucG9zID0gdGhpcy5yYW5nZS5mcm9tO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMucG9zICs9IG47XG4gICAgICAgIGlmICh0aGlzLnBvcyA+PSB0aGlzLnRva2VuLmxvb2tBaGVhZClcbiAgICAgICAgICAgIHRoaXMudG9rZW4ubG9va0FoZWFkID0gdGhpcy5wb3MgKyAxO1xuICAgICAgICByZXR1cm4gdGhpcy5yZWFkTmV4dCgpO1xuICAgIH1cbiAgICBzZXREb25lKCkge1xuICAgICAgICB0aGlzLnBvcyA9IHRoaXMuY2h1bmtQb3MgPSB0aGlzLmVuZDtcbiAgICAgICAgdGhpcy5yYW5nZSA9IHRoaXMucmFuZ2VzW3RoaXMucmFuZ2VJbmRleCA9IHRoaXMucmFuZ2VzLmxlbmd0aCAtIDFdO1xuICAgICAgICB0aGlzLmNodW5rID0gXCJcIjtcbiAgICAgICAgcmV0dXJuIHRoaXMubmV4dCA9IC0xO1xuICAgIH1cbiAgICAvKipcbiAgICBAaW50ZXJuYWxcbiAgICAqL1xuICAgIHJlc2V0KHBvcywgdG9rZW4pIHtcbiAgICAgICAgaWYgKHRva2VuKSB7XG4gICAgICAgICAgICB0aGlzLnRva2VuID0gdG9rZW47XG4gICAgICAgICAgICB0b2tlbi5zdGFydCA9IHBvcztcbiAgICAgICAgICAgIHRva2VuLmxvb2tBaGVhZCA9IHBvcyArIDE7XG4gICAgICAgICAgICB0b2tlbi52YWx1ZSA9IHRva2VuLmV4dGVuZGVkID0gLTE7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnRva2VuID0gbnVsbFRva2VuO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLnBvcyAhPSBwb3MpIHtcbiAgICAgICAgICAgIHRoaXMucG9zID0gcG9zO1xuICAgICAgICAgICAgaWYgKHBvcyA9PSB0aGlzLmVuZCkge1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0RG9uZSgpO1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgd2hpbGUgKHBvcyA8IHRoaXMucmFuZ2UuZnJvbSlcbiAgICAgICAgICAgICAgICB0aGlzLnJhbmdlID0gdGhpcy5yYW5nZXNbLS10aGlzLnJhbmdlSW5kZXhdO1xuICAgICAgICAgICAgd2hpbGUgKHBvcyA+PSB0aGlzLnJhbmdlLnRvKVxuICAgICAgICAgICAgICAgIHRoaXMucmFuZ2UgPSB0aGlzLnJhbmdlc1srK3RoaXMucmFuZ2VJbmRleF07XG4gICAgICAgICAgICBpZiAocG9zID49IHRoaXMuY2h1bmtQb3MgJiYgcG9zIDwgdGhpcy5jaHVua1BvcyArIHRoaXMuY2h1bmsubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jaHVua09mZiA9IHBvcyAtIHRoaXMuY2h1bmtQb3M7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNodW5rID0gXCJcIjtcbiAgICAgICAgICAgICAgICB0aGlzLmNodW5rT2ZmID0gMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucmVhZE5leHQoKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgQGludGVybmFsXG4gICAgKi9cbiAgICByZWFkKGZyb20sIHRvKSB7XG4gICAgICAgIGlmIChmcm9tID49IHRoaXMuY2h1bmtQb3MgJiYgdG8gPD0gdGhpcy5jaHVua1BvcyArIHRoaXMuY2h1bmsubGVuZ3RoKVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY2h1bmsuc2xpY2UoZnJvbSAtIHRoaXMuY2h1bmtQb3MsIHRvIC0gdGhpcy5jaHVua1Bvcyk7XG4gICAgICAgIGlmIChmcm9tID49IHRoaXMuY2h1bmsyUG9zICYmIHRvIDw9IHRoaXMuY2h1bmsyUG9zICsgdGhpcy5jaHVuazIubGVuZ3RoKVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY2h1bmsyLnNsaWNlKGZyb20gLSB0aGlzLmNodW5rMlBvcywgdG8gLSB0aGlzLmNodW5rMlBvcyk7XG4gICAgICAgIGlmIChmcm9tID49IHRoaXMucmFuZ2UuZnJvbSAmJiB0byA8PSB0aGlzLnJhbmdlLnRvKVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuaW5wdXQucmVhZChmcm9tLCB0byk7XG4gICAgICAgIGxldCByZXN1bHQgPSBcIlwiO1xuICAgICAgICBmb3IgKGxldCByIG9mIHRoaXMucmFuZ2VzKSB7XG4gICAgICAgICAgICBpZiAoci5mcm9tID49IHRvKVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgaWYgKHIudG8gPiBmcm9tKVxuICAgICAgICAgICAgICAgIHJlc3VsdCArPSB0aGlzLmlucHV0LnJlYWQoTWF0aC5tYXgoci5mcm9tLCBmcm9tKSwgTWF0aC5taW4oci50bywgdG8pKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cbn1cbi8qKlxuQGludGVybmFsXG4qL1xuY2xhc3MgVG9rZW5Hcm91cCB7XG4gICAgY29uc3RydWN0b3IoZGF0YSwgaWQpIHtcbiAgICAgICAgdGhpcy5kYXRhID0gZGF0YTtcbiAgICAgICAgdGhpcy5pZCA9IGlkO1xuICAgIH1cbiAgICB0b2tlbihpbnB1dCwgc3RhY2spIHtcbiAgICAgICAgbGV0IHsgcGFyc2VyIH0gPSBzdGFjay5wO1xuICAgICAgICByZWFkVG9rZW4odGhpcy5kYXRhLCBpbnB1dCwgc3RhY2ssIHRoaXMuaWQsIHBhcnNlci5kYXRhLCBwYXJzZXIudG9rZW5QcmVjVGFibGUpO1xuICAgIH1cbn1cblRva2VuR3JvdXAucHJvdG90eXBlLmNvbnRleHR1YWwgPSBUb2tlbkdyb3VwLnByb3RvdHlwZS5mYWxsYmFjayA9IFRva2VuR3JvdXAucHJvdG90eXBlLmV4dGVuZCA9IGZhbHNlO1xuLyoqXG5AaGlkZVxuKi9cbmNsYXNzIExvY2FsVG9rZW5Hcm91cCB7XG4gICAgY29uc3RydWN0b3IoZGF0YSwgcHJlY1RhYmxlLCBlbHNlVG9rZW4pIHtcbiAgICAgICAgdGhpcy5wcmVjVGFibGUgPSBwcmVjVGFibGU7XG4gICAgICAgIHRoaXMuZWxzZVRva2VuID0gZWxzZVRva2VuO1xuICAgICAgICB0aGlzLmRhdGEgPSB0eXBlb2YgZGF0YSA9PSBcInN0cmluZ1wiID8gZGVjb2RlQXJyYXkoZGF0YSkgOiBkYXRhO1xuICAgIH1cbiAgICB0b2tlbihpbnB1dCwgc3RhY2spIHtcbiAgICAgICAgbGV0IHN0YXJ0ID0gaW5wdXQucG9zLCBza2lwcGVkID0gMDtcbiAgICAgICAgZm9yICg7Oykge1xuICAgICAgICAgICAgbGV0IGF0RW9mID0gaW5wdXQubmV4dCA8IDAsIG5leHRQb3MgPSBpbnB1dC5yZXNvbHZlT2Zmc2V0KDEsIDEpO1xuICAgICAgICAgICAgcmVhZFRva2VuKHRoaXMuZGF0YSwgaW5wdXQsIHN0YWNrLCAwLCB0aGlzLmRhdGEsIHRoaXMucHJlY1RhYmxlKTtcbiAgICAgICAgICAgIGlmIChpbnB1dC50b2tlbi52YWx1ZSA+IC0xKVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgaWYgKHRoaXMuZWxzZVRva2VuID09IG51bGwpXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgaWYgKCFhdEVvZilcbiAgICAgICAgICAgICAgICBza2lwcGVkKys7XG4gICAgICAgICAgICBpZiAobmV4dFBvcyA9PSBudWxsKVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgaW5wdXQucmVzZXQobmV4dFBvcywgaW5wdXQudG9rZW4pO1xuICAgICAgICB9XG4gICAgICAgIGlmIChza2lwcGVkKSB7XG4gICAgICAgICAgICBpbnB1dC5yZXNldChzdGFydCwgaW5wdXQudG9rZW4pO1xuICAgICAgICAgICAgaW5wdXQuYWNjZXB0VG9rZW4odGhpcy5lbHNlVG9rZW4sIHNraXBwZWQpO1xuICAgICAgICB9XG4gICAgfVxufVxuTG9jYWxUb2tlbkdyb3VwLnByb3RvdHlwZS5jb250ZXh0dWFsID0gVG9rZW5Hcm91cC5wcm90b3R5cGUuZmFsbGJhY2sgPSBUb2tlbkdyb3VwLnByb3RvdHlwZS5leHRlbmQgPSBmYWxzZTtcbi8qKlxuYEBleHRlcm5hbCB0b2tlbnNgIGRlY2xhcmF0aW9ucyBpbiB0aGUgZ3JhbW1hciBzaG91bGQgcmVzb2x2ZSB0b1xuYW4gaW5zdGFuY2Ugb2YgdGhpcyBjbGFzcy5cbiovXG5jbGFzcyBFeHRlcm5hbFRva2VuaXplciB7XG4gICAgLyoqXG4gICAgQ3JlYXRlIGEgdG9rZW5pemVyLiBUaGUgZmlyc3QgYXJndW1lbnQgaXMgdGhlIGZ1bmN0aW9uIHRoYXQsXG4gICAgZ2l2ZW4gYW4gaW5wdXQgc3RyZWFtLCBzY2FucyBmb3IgdGhlIHR5cGVzIG9mIHRva2VucyBpdFxuICAgIHJlY29nbml6ZXMgYXQgdGhlIHN0cmVhbSdzIHBvc2l0aW9uLCBhbmQgY2FsbHNcbiAgICBbYGFjY2VwdFRva2VuYF0oI2xyLklucHV0U3RyZWFtLmFjY2VwdFRva2VuKSB3aGVuIGl0IGZpbmRzXG4gICAgb25lLlxuICAgICovXG4gICAgY29uc3RydWN0b3IoXG4gICAgLyoqXG4gICAgQGludGVybmFsXG4gICAgKi9cbiAgICB0b2tlbiwgb3B0aW9ucyA9IHt9KSB7XG4gICAgICAgIHRoaXMudG9rZW4gPSB0b2tlbjtcbiAgICAgICAgdGhpcy5jb250ZXh0dWFsID0gISFvcHRpb25zLmNvbnRleHR1YWw7XG4gICAgICAgIHRoaXMuZmFsbGJhY2sgPSAhIW9wdGlvbnMuZmFsbGJhY2s7XG4gICAgICAgIHRoaXMuZXh0ZW5kID0gISFvcHRpb25zLmV4dGVuZDtcbiAgICB9XG59XG4vLyBUb2tlbml6ZXIgZGF0YSBpcyBzdG9yZWQgYSBiaWcgdWludDE2IGFycmF5IGNvbnRhaW5pbmcsIGZvciBlYWNoXG4vLyBzdGF0ZTpcbi8vXG4vLyAgLSBBIGdyb3VwIGJpdG1hc2ssIGluZGljYXRpbmcgd2hhdCB0b2tlbiBncm91cHMgYXJlIHJlYWNoYWJsZSBmcm9tXG4vLyAgICB0aGlzIHN0YXRlLCBzbyB0aGF0IHBhdGhzIHRoYXQgY2FuIG9ubHkgbGVhZCB0byB0b2tlbnMgbm90IGluXG4vLyAgICBhbnkgb2YgdGhlIGN1cnJlbnQgZ3JvdXBzIGNhbiBiZSBjdXQgb2ZmIGVhcmx5LlxuLy9cbi8vICAtIFRoZSBwb3NpdGlvbiBvZiB0aGUgZW5kIG9mIHRoZSBzdGF0ZSdzIHNlcXVlbmNlIG9mIGFjY2VwdGluZ1xuLy8gICAgdG9rZW5zXG4vL1xuLy8gIC0gVGhlIG51bWJlciBvZiBvdXRnb2luZyBlZGdlcyBmb3IgdGhlIHN0YXRlXG4vL1xuLy8gIC0gVGhlIGFjY2VwdGluZyB0b2tlbnMsIGFzICh0b2tlbiBpZCwgZ3JvdXAgbWFzaykgcGFpcnNcbi8vXG4vLyAgLSBUaGUgb3V0Z29pbmcgZWRnZXMsIGFzIChzdGFydCBjaGFyYWN0ZXIsIGVuZCBjaGFyYWN0ZXIsIHN0YXRlXG4vLyAgICBpbmRleCkgdHJpcGxlcywgd2l0aCBlbmQgY2hhcmFjdGVyIGJlaW5nIGV4Y2x1c2l2ZVxuLy9cbi8vIFRoaXMgZnVuY3Rpb24gaW50ZXJwcmV0cyB0aGF0IGRhdGEsIHJ1bm5pbmcgdGhyb3VnaCBhIHN0cmVhbSBhc1xuLy8gbG9uZyBhcyBuZXcgc3RhdGVzIHdpdGggdGhlIGEgbWF0Y2hpbmcgZ3JvdXAgbWFzayBjYW4gYmUgcmVhY2hlZCxcbi8vIGFuZCB1cGRhdGluZyBgaW5wdXQudG9rZW5gIHdoZW4gaXQgbWF0Y2hlcyBhIHRva2VuLlxuZnVuY3Rpb24gcmVhZFRva2VuKGRhdGEsIGlucHV0LCBzdGFjaywgZ3JvdXAsIHByZWNUYWJsZSwgcHJlY09mZnNldCkge1xuICAgIGxldCBzdGF0ZSA9IDAsIGdyb3VwTWFzayA9IDEgPDwgZ3JvdXAsIHsgZGlhbGVjdCB9ID0gc3RhY2sucC5wYXJzZXI7XG4gICAgc2NhbjogZm9yICg7Oykge1xuICAgICAgICBpZiAoKGdyb3VwTWFzayAmIGRhdGFbc3RhdGVdKSA9PSAwKVxuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGxldCBhY2NFbmQgPSBkYXRhW3N0YXRlICsgMV07XG4gICAgICAgIC8vIENoZWNrIHdoZXRoZXIgdGhpcyBzdGF0ZSBjYW4gbGVhZCB0byBhIHRva2VuIGluIHRoZSBjdXJyZW50IGdyb3VwXG4gICAgICAgIC8vIEFjY2VwdCB0b2tlbnMgaW4gdGhpcyBzdGF0ZSwgcG9zc2libHkgb3ZlcndyaXRpbmdcbiAgICAgICAgLy8gbG93ZXItcHJlY2VkZW5jZSAvIHNob3J0ZXIgdG9rZW5zXG4gICAgICAgIGZvciAobGV0IGkgPSBzdGF0ZSArIDM7IGkgPCBhY2NFbmQ7IGkgKz0gMilcbiAgICAgICAgICAgIGlmICgoZGF0YVtpICsgMV0gJiBncm91cE1hc2spID4gMCkge1xuICAgICAgICAgICAgICAgIGxldCB0ZXJtID0gZGF0YVtpXTtcbiAgICAgICAgICAgICAgICBpZiAoZGlhbGVjdC5hbGxvd3ModGVybSkgJiZcbiAgICAgICAgICAgICAgICAgICAgKGlucHV0LnRva2VuLnZhbHVlID09IC0xIHx8IGlucHV0LnRva2VuLnZhbHVlID09IHRlcm0gfHxcbiAgICAgICAgICAgICAgICAgICAgICAgIG92ZXJyaWRlcyh0ZXJtLCBpbnB1dC50b2tlbi52YWx1ZSwgcHJlY1RhYmxlLCBwcmVjT2Zmc2V0KSkpIHtcbiAgICAgICAgICAgICAgICAgICAgaW5wdXQuYWNjZXB0VG9rZW4odGVybSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgbGV0IG5leHQgPSBpbnB1dC5uZXh0LCBsb3cgPSAwLCBoaWdoID0gZGF0YVtzdGF0ZSArIDJdO1xuICAgICAgICAvLyBTcGVjaWFsIGNhc2UgZm9yIEVPRlxuICAgICAgICBpZiAoaW5wdXQubmV4dCA8IDAgJiYgaGlnaCA+IGxvdyAmJiBkYXRhW2FjY0VuZCArIGhpZ2ggKiAzIC0gM10gPT0gNjU1MzUgLyogU2VxLkVuZCAqLykge1xuICAgICAgICAgICAgc3RhdGUgPSBkYXRhW2FjY0VuZCArIGhpZ2ggKiAzIC0gMV07XG4gICAgICAgICAgICBjb250aW51ZSBzY2FuO1xuICAgICAgICB9XG4gICAgICAgIC8vIERvIGEgYmluYXJ5IHNlYXJjaCBvbiB0aGUgc3RhdGUncyBlZGdlc1xuICAgICAgICBmb3IgKDsgbG93IDwgaGlnaDspIHtcbiAgICAgICAgICAgIGxldCBtaWQgPSAobG93ICsgaGlnaCkgPj4gMTtcbiAgICAgICAgICAgIGxldCBpbmRleCA9IGFjY0VuZCArIG1pZCArIChtaWQgPDwgMSk7XG4gICAgICAgICAgICBsZXQgZnJvbSA9IGRhdGFbaW5kZXhdLCB0byA9IGRhdGFbaW5kZXggKyAxXSB8fCAweDEwMDAwO1xuICAgICAgICAgICAgaWYgKG5leHQgPCBmcm9tKVxuICAgICAgICAgICAgICAgIGhpZ2ggPSBtaWQ7XG4gICAgICAgICAgICBlbHNlIGlmIChuZXh0ID49IHRvKVxuICAgICAgICAgICAgICAgIGxvdyA9IG1pZCArIDE7XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBzdGF0ZSA9IGRhdGFbaW5kZXggKyAyXTtcbiAgICAgICAgICAgICAgICBpbnB1dC5hZHZhbmNlKCk7XG4gICAgICAgICAgICAgICAgY29udGludWUgc2NhbjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBicmVhaztcbiAgICB9XG59XG5mdW5jdGlvbiBmaW5kT2Zmc2V0KGRhdGEsIHN0YXJ0LCB0ZXJtKSB7XG4gICAgZm9yIChsZXQgaSA9IHN0YXJ0LCBuZXh0OyAobmV4dCA9IGRhdGFbaV0pICE9IDY1NTM1IC8qIFNlcS5FbmQgKi87IGkrKylcbiAgICAgICAgaWYgKG5leHQgPT0gdGVybSlcbiAgICAgICAgICAgIHJldHVybiBpIC0gc3RhcnQ7XG4gICAgcmV0dXJuIC0xO1xufVxuZnVuY3Rpb24gb3ZlcnJpZGVzKHRva2VuLCBwcmV2LCB0YWJsZURhdGEsIHRhYmxlT2Zmc2V0KSB7XG4gICAgbGV0IGlQcmV2ID0gZmluZE9mZnNldCh0YWJsZURhdGEsIHRhYmxlT2Zmc2V0LCBwcmV2KTtcbiAgICByZXR1cm4gaVByZXYgPCAwIHx8IGZpbmRPZmZzZXQodGFibGVEYXRhLCB0YWJsZU9mZnNldCwgdG9rZW4pIDwgaVByZXY7XG59XG5cbi8vIEVudmlyb25tZW50IHZhcmlhYmxlIHVzZWQgdG8gY29udHJvbCBjb25zb2xlIG91dHB1dFxuY29uc3QgdmVyYm9zZSA9IHR5cGVvZiBwcm9jZXNzICE9IFwidW5kZWZpbmVkXCIgJiYgcHJvY2Vzcy5lbnYgJiYgL1xcYnBhcnNlXFxiLy50ZXN0KHByb2Nlc3MuZW52LkxPRyk7XG5sZXQgc3RhY2tJRHMgPSBudWxsO1xuZnVuY3Rpb24gY3V0QXQodHJlZSwgcG9zLCBzaWRlKSB7XG4gICAgbGV0IGN1cnNvciA9IHRyZWUuY3Vyc29yKEl0ZXJNb2RlLkluY2x1ZGVBbm9ueW1vdXMpO1xuICAgIGN1cnNvci5tb3ZlVG8ocG9zKTtcbiAgICBmb3IgKDs7KSB7XG4gICAgICAgIGlmICghKHNpZGUgPCAwID8gY3Vyc29yLmNoaWxkQmVmb3JlKHBvcykgOiBjdXJzb3IuY2hpbGRBZnRlcihwb3MpKSlcbiAgICAgICAgICAgIGZvciAoOzspIHtcbiAgICAgICAgICAgICAgICBpZiAoKHNpZGUgPCAwID8gY3Vyc29yLnRvIDwgcG9zIDogY3Vyc29yLmZyb20gPiBwb3MpICYmICFjdXJzb3IudHlwZS5pc0Vycm9yKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gc2lkZSA8IDAgPyBNYXRoLm1heCgwLCBNYXRoLm1pbihjdXJzb3IudG8gLSAxLCBwb3MgLSAyNSAvKiBMb29rYWhlYWQuTWFyZ2luICovKSlcbiAgICAgICAgICAgICAgICAgICAgICAgIDogTWF0aC5taW4odHJlZS5sZW5ndGgsIE1hdGgubWF4KGN1cnNvci5mcm9tICsgMSwgcG9zICsgMjUgLyogTG9va2FoZWFkLk1hcmdpbiAqLykpO1xuICAgICAgICAgICAgICAgIGlmIChzaWRlIDwgMCA/IGN1cnNvci5wcmV2U2libGluZygpIDogY3Vyc29yLm5leHRTaWJsaW5nKCkpXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGlmICghY3Vyc29yLnBhcmVudCgpKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gc2lkZSA8IDAgPyAwIDogdHJlZS5sZW5ndGg7XG4gICAgICAgICAgICB9XG4gICAgfVxufVxuY2xhc3MgRnJhZ21lbnRDdXJzb3Ige1xuICAgIGNvbnN0cnVjdG9yKGZyYWdtZW50cywgbm9kZVNldCkge1xuICAgICAgICB0aGlzLmZyYWdtZW50cyA9IGZyYWdtZW50cztcbiAgICAgICAgdGhpcy5ub2RlU2V0ID0gbm9kZVNldDtcbiAgICAgICAgdGhpcy5pID0gMDtcbiAgICAgICAgdGhpcy5mcmFnbWVudCA9IG51bGw7XG4gICAgICAgIHRoaXMuc2FmZUZyb20gPSAtMTtcbiAgICAgICAgdGhpcy5zYWZlVG8gPSAtMTtcbiAgICAgICAgdGhpcy50cmVlcyA9IFtdO1xuICAgICAgICB0aGlzLnN0YXJ0ID0gW107XG4gICAgICAgIHRoaXMuaW5kZXggPSBbXTtcbiAgICAgICAgdGhpcy5uZXh0RnJhZ21lbnQoKTtcbiAgICB9XG4gICAgbmV4dEZyYWdtZW50KCkge1xuICAgICAgICBsZXQgZnIgPSB0aGlzLmZyYWdtZW50ID0gdGhpcy5pID09IHRoaXMuZnJhZ21lbnRzLmxlbmd0aCA/IG51bGwgOiB0aGlzLmZyYWdtZW50c1t0aGlzLmkrK107XG4gICAgICAgIGlmIChmcikge1xuICAgICAgICAgICAgdGhpcy5zYWZlRnJvbSA9IGZyLm9wZW5TdGFydCA/IGN1dEF0KGZyLnRyZWUsIGZyLmZyb20gKyBmci5vZmZzZXQsIDEpIC0gZnIub2Zmc2V0IDogZnIuZnJvbTtcbiAgICAgICAgICAgIHRoaXMuc2FmZVRvID0gZnIub3BlbkVuZCA/IGN1dEF0KGZyLnRyZWUsIGZyLnRvICsgZnIub2Zmc2V0LCAtMSkgLSBmci5vZmZzZXQgOiBmci50bztcbiAgICAgICAgICAgIHdoaWxlICh0aGlzLnRyZWVzLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIHRoaXMudHJlZXMucG9wKCk7XG4gICAgICAgICAgICAgICAgdGhpcy5zdGFydC5wb3AoKTtcbiAgICAgICAgICAgICAgICB0aGlzLmluZGV4LnBvcCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy50cmVlcy5wdXNoKGZyLnRyZWUpO1xuICAgICAgICAgICAgdGhpcy5zdGFydC5wdXNoKC1mci5vZmZzZXQpO1xuICAgICAgICAgICAgdGhpcy5pbmRleC5wdXNoKDApO1xuICAgICAgICAgICAgdGhpcy5uZXh0U3RhcnQgPSB0aGlzLnNhZmVGcm9tO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5uZXh0U3RhcnQgPSAxZTk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLy8gYHBvc2AgbXVzdCBiZSA+PSBhbnkgcHJldmlvdXNseSBnaXZlbiBgcG9zYCBmb3IgdGhpcyBjdXJzb3JcbiAgICBub2RlQXQocG9zKSB7XG4gICAgICAgIGlmIChwb3MgPCB0aGlzLm5leHRTdGFydClcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB3aGlsZSAodGhpcy5mcmFnbWVudCAmJiB0aGlzLnNhZmVUbyA8PSBwb3MpXG4gICAgICAgICAgICB0aGlzLm5leHRGcmFnbWVudCgpO1xuICAgICAgICBpZiAoIXRoaXMuZnJhZ21lbnQpXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgZm9yICg7Oykge1xuICAgICAgICAgICAgbGV0IGxhc3QgPSB0aGlzLnRyZWVzLmxlbmd0aCAtIDE7XG4gICAgICAgICAgICBpZiAobGFzdCA8IDApIHsgLy8gRW5kIG9mIHRyZWVcbiAgICAgICAgICAgICAgICB0aGlzLm5leHRGcmFnbWVudCgpO1xuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbGV0IHRvcCA9IHRoaXMudHJlZXNbbGFzdF0sIGluZGV4ID0gdGhpcy5pbmRleFtsYXN0XTtcbiAgICAgICAgICAgIGlmIChpbmRleCA9PSB0b3AuY2hpbGRyZW4ubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgdGhpcy50cmVlcy5wb3AoKTtcbiAgICAgICAgICAgICAgICB0aGlzLnN0YXJ0LnBvcCgpO1xuICAgICAgICAgICAgICAgIHRoaXMuaW5kZXgucG9wKCk7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsZXQgbmV4dCA9IHRvcC5jaGlsZHJlbltpbmRleF07XG4gICAgICAgICAgICBsZXQgc3RhcnQgPSB0aGlzLnN0YXJ0W2xhc3RdICsgdG9wLnBvc2l0aW9uc1tpbmRleF07XG4gICAgICAgICAgICBpZiAoc3RhcnQgPiBwb3MpIHtcbiAgICAgICAgICAgICAgICB0aGlzLm5leHRTdGFydCA9IHN0YXJ0O1xuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKG5leHQgaW5zdGFuY2VvZiBUcmVlKSB7XG4gICAgICAgICAgICAgICAgaWYgKHN0YXJ0ID09IHBvcykge1xuICAgICAgICAgICAgICAgICAgICBpZiAoc3RhcnQgPCB0aGlzLnNhZmVGcm9tKVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICAgICAgICAgIGxldCBlbmQgPSBzdGFydCArIG5leHQubGVuZ3RoO1xuICAgICAgICAgICAgICAgICAgICBpZiAoZW5kIDw9IHRoaXMuc2FmZVRvKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgbG9va0FoZWFkID0gbmV4dC5wcm9wKE5vZGVQcm9wLmxvb2tBaGVhZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWxvb2tBaGVhZCB8fCBlbmQgKyBsb29rQWhlYWQgPCB0aGlzLmZyYWdtZW50LnRvKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXh0O1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMuaW5kZXhbbGFzdF0rKztcbiAgICAgICAgICAgICAgICBpZiAoc3RhcnQgKyBuZXh0Lmxlbmd0aCA+PSBNYXRoLm1heCh0aGlzLnNhZmVGcm9tLCBwb3MpKSB7IC8vIEVudGVyIHRoaXMgbm9kZVxuICAgICAgICAgICAgICAgICAgICB0aGlzLnRyZWVzLnB1c2gobmV4dCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhcnQucHVzaChzdGFydCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaW5kZXgucHVzaCgwKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLmluZGV4W2xhc3RdKys7XG4gICAgICAgICAgICAgICAgdGhpcy5uZXh0U3RhcnQgPSBzdGFydCArIG5leHQubGVuZ3RoO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufVxuY2xhc3MgVG9rZW5DYWNoZSB7XG4gICAgY29uc3RydWN0b3IocGFyc2VyLCBzdHJlYW0pIHtcbiAgICAgICAgdGhpcy5zdHJlYW0gPSBzdHJlYW07XG4gICAgICAgIHRoaXMudG9rZW5zID0gW107XG4gICAgICAgIHRoaXMubWFpblRva2VuID0gbnVsbDtcbiAgICAgICAgdGhpcy5hY3Rpb25zID0gW107XG4gICAgICAgIHRoaXMudG9rZW5zID0gcGFyc2VyLnRva2VuaXplcnMubWFwKF8gPT4gbmV3IENhY2hlZFRva2VuKTtcbiAgICB9XG4gICAgZ2V0QWN0aW9ucyhzdGFjaykge1xuICAgICAgICBsZXQgYWN0aW9uSW5kZXggPSAwO1xuICAgICAgICBsZXQgbWFpbiA9IG51bGw7XG4gICAgICAgIGxldCB7IHBhcnNlciB9ID0gc3RhY2sucCwgeyB0b2tlbml6ZXJzIH0gPSBwYXJzZXI7XG4gICAgICAgIGxldCBtYXNrID0gcGFyc2VyLnN0YXRlU2xvdChzdGFjay5zdGF0ZSwgMyAvKiBQYXJzZVN0YXRlLlRva2VuaXplck1hc2sgKi8pO1xuICAgICAgICBsZXQgY29udGV4dCA9IHN0YWNrLmN1ckNvbnRleHQgPyBzdGFjay5jdXJDb250ZXh0Lmhhc2ggOiAwO1xuICAgICAgICBsZXQgbG9va0FoZWFkID0gMDtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0b2tlbml6ZXJzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBpZiAoKCgxIDw8IGkpICYgbWFzaykgPT0gMClcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIGxldCB0b2tlbml6ZXIgPSB0b2tlbml6ZXJzW2ldLCB0b2tlbiA9IHRoaXMudG9rZW5zW2ldO1xuICAgICAgICAgICAgaWYgKG1haW4gJiYgIXRva2VuaXplci5mYWxsYmFjaylcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIGlmICh0b2tlbml6ZXIuY29udGV4dHVhbCB8fCB0b2tlbi5zdGFydCAhPSBzdGFjay5wb3MgfHwgdG9rZW4ubWFzayAhPSBtYXNrIHx8IHRva2VuLmNvbnRleHQgIT0gY29udGV4dCkge1xuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlQ2FjaGVkVG9rZW4odG9rZW4sIHRva2VuaXplciwgc3RhY2spO1xuICAgICAgICAgICAgICAgIHRva2VuLm1hc2sgPSBtYXNrO1xuICAgICAgICAgICAgICAgIHRva2VuLmNvbnRleHQgPSBjb250ZXh0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRva2VuLmxvb2tBaGVhZCA+IHRva2VuLmVuZCArIDI1IC8qIExvb2thaGVhZC5NYXJnaW4gKi8pXG4gICAgICAgICAgICAgICAgbG9va0FoZWFkID0gTWF0aC5tYXgodG9rZW4ubG9va0FoZWFkLCBsb29rQWhlYWQpO1xuICAgICAgICAgICAgaWYgKHRva2VuLnZhbHVlICE9IDAgLyogVGVybS5FcnIgKi8pIHtcbiAgICAgICAgICAgICAgICBsZXQgc3RhcnRJbmRleCA9IGFjdGlvbkluZGV4O1xuICAgICAgICAgICAgICAgIGlmICh0b2tlbi5leHRlbmRlZCA+IC0xKVxuICAgICAgICAgICAgICAgICAgICBhY3Rpb25JbmRleCA9IHRoaXMuYWRkQWN0aW9ucyhzdGFjaywgdG9rZW4uZXh0ZW5kZWQsIHRva2VuLmVuZCwgYWN0aW9uSW5kZXgpO1xuICAgICAgICAgICAgICAgIGFjdGlvbkluZGV4ID0gdGhpcy5hZGRBY3Rpb25zKHN0YWNrLCB0b2tlbi52YWx1ZSwgdG9rZW4uZW5kLCBhY3Rpb25JbmRleCk7XG4gICAgICAgICAgICAgICAgaWYgKCF0b2tlbml6ZXIuZXh0ZW5kKSB7XG4gICAgICAgICAgICAgICAgICAgIG1haW4gPSB0b2tlbjtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGFjdGlvbkluZGV4ID4gc3RhcnRJbmRleClcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB3aGlsZSAodGhpcy5hY3Rpb25zLmxlbmd0aCA+IGFjdGlvbkluZGV4KVxuICAgICAgICAgICAgdGhpcy5hY3Rpb25zLnBvcCgpO1xuICAgICAgICBpZiAobG9va0FoZWFkKVxuICAgICAgICAgICAgc3RhY2suc2V0TG9va0FoZWFkKGxvb2tBaGVhZCk7XG4gICAgICAgIGlmICghbWFpbiAmJiBzdGFjay5wb3MgPT0gdGhpcy5zdHJlYW0uZW5kKSB7XG4gICAgICAgICAgICBtYWluID0gbmV3IENhY2hlZFRva2VuO1xuICAgICAgICAgICAgbWFpbi52YWx1ZSA9IHN0YWNrLnAucGFyc2VyLmVvZlRlcm07XG4gICAgICAgICAgICBtYWluLnN0YXJ0ID0gbWFpbi5lbmQgPSBzdGFjay5wb3M7XG4gICAgICAgICAgICBhY3Rpb25JbmRleCA9IHRoaXMuYWRkQWN0aW9ucyhzdGFjaywgbWFpbi52YWx1ZSwgbWFpbi5lbmQsIGFjdGlvbkluZGV4KTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLm1haW5Ub2tlbiA9IG1haW47XG4gICAgICAgIHJldHVybiB0aGlzLmFjdGlvbnM7XG4gICAgfVxuICAgIGdldE1haW5Ub2tlbihzdGFjaykge1xuICAgICAgICBpZiAodGhpcy5tYWluVG9rZW4pXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5tYWluVG9rZW47XG4gICAgICAgIGxldCBtYWluID0gbmV3IENhY2hlZFRva2VuLCB7IHBvcywgcCB9ID0gc3RhY2s7XG4gICAgICAgIG1haW4uc3RhcnQgPSBwb3M7XG4gICAgICAgIG1haW4uZW5kID0gTWF0aC5taW4ocG9zICsgMSwgcC5zdHJlYW0uZW5kKTtcbiAgICAgICAgbWFpbi52YWx1ZSA9IHBvcyA9PSBwLnN0cmVhbS5lbmQgPyBwLnBhcnNlci5lb2ZUZXJtIDogMCAvKiBUZXJtLkVyciAqLztcbiAgICAgICAgcmV0dXJuIG1haW47XG4gICAgfVxuICAgIHVwZGF0ZUNhY2hlZFRva2VuKHRva2VuLCB0b2tlbml6ZXIsIHN0YWNrKSB7XG4gICAgICAgIGxldCBzdGFydCA9IHRoaXMuc3RyZWFtLmNsaXBQb3Moc3RhY2sucG9zKTtcbiAgICAgICAgdG9rZW5pemVyLnRva2VuKHRoaXMuc3RyZWFtLnJlc2V0KHN0YXJ0LCB0b2tlbiksIHN0YWNrKTtcbiAgICAgICAgaWYgKHRva2VuLnZhbHVlID4gLTEpIHtcbiAgICAgICAgICAgIGxldCB7IHBhcnNlciB9ID0gc3RhY2sucDtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcGFyc2VyLnNwZWNpYWxpemVkLmxlbmd0aDsgaSsrKVxuICAgICAgICAgICAgICAgIGlmIChwYXJzZXIuc3BlY2lhbGl6ZWRbaV0gPT0gdG9rZW4udmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IHJlc3VsdCA9IHBhcnNlci5zcGVjaWFsaXplcnNbaV0odGhpcy5zdHJlYW0ucmVhZCh0b2tlbi5zdGFydCwgdG9rZW4uZW5kKSwgc3RhY2spO1xuICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0ID49IDAgJiYgc3RhY2sucC5wYXJzZXIuZGlhbGVjdC5hbGxvd3MocmVzdWx0ID4+IDEpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoKHJlc3VsdCAmIDEpID09IDAgLyogU3BlY2lhbGl6ZS5TcGVjaWFsaXplICovKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRva2VuLnZhbHVlID0gcmVzdWx0ID4+IDE7XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9rZW4uZXh0ZW5kZWQgPSByZXN1bHQgPj4gMTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdG9rZW4udmFsdWUgPSAwIC8qIFRlcm0uRXJyICovO1xuICAgICAgICAgICAgdG9rZW4uZW5kID0gdGhpcy5zdHJlYW0uY2xpcFBvcyhzdGFydCArIDEpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHB1dEFjdGlvbihhY3Rpb24sIHRva2VuLCBlbmQsIGluZGV4KSB7XG4gICAgICAgIC8vIERvbid0IGFkZCBkdXBsaWNhdGUgYWN0aW9uc1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGluZGV4OyBpICs9IDMpXG4gICAgICAgICAgICBpZiAodGhpcy5hY3Rpb25zW2ldID09IGFjdGlvbilcbiAgICAgICAgICAgICAgICByZXR1cm4gaW5kZXg7XG4gICAgICAgIHRoaXMuYWN0aW9uc1tpbmRleCsrXSA9IGFjdGlvbjtcbiAgICAgICAgdGhpcy5hY3Rpb25zW2luZGV4KytdID0gdG9rZW47XG4gICAgICAgIHRoaXMuYWN0aW9uc1tpbmRleCsrXSA9IGVuZDtcbiAgICAgICAgcmV0dXJuIGluZGV4O1xuICAgIH1cbiAgICBhZGRBY3Rpb25zKHN0YWNrLCB0b2tlbiwgZW5kLCBpbmRleCkge1xuICAgICAgICBsZXQgeyBzdGF0ZSB9ID0gc3RhY2ssIHsgcGFyc2VyIH0gPSBzdGFjay5wLCB7IGRhdGEgfSA9IHBhcnNlcjtcbiAgICAgICAgZm9yIChsZXQgc2V0ID0gMDsgc2V0IDwgMjsgc2V0KyspIHtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSBwYXJzZXIuc3RhdGVTbG90KHN0YXRlLCBzZXQgPyAyIC8qIFBhcnNlU3RhdGUuU2tpcCAqLyA6IDEgLyogUGFyc2VTdGF0ZS5BY3Rpb25zICovKTs7IGkgKz0gMykge1xuICAgICAgICAgICAgICAgIGlmIChkYXRhW2ldID09IDY1NTM1IC8qIFNlcS5FbmQgKi8pIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGRhdGFbaSArIDFdID09IDEgLyogU2VxLk5leHQgKi8pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGkgPSBwYWlyKGRhdGEsIGkgKyAyKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpbmRleCA9PSAwICYmIGRhdGFbaSArIDFdID09IDIgLyogU2VxLk90aGVyICovKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluZGV4ID0gdGhpcy5wdXRBY3Rpb24ocGFpcihkYXRhLCBpICsgMiksIHRva2VuLCBlbmQsIGluZGV4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChkYXRhW2ldID09IHRva2VuKVxuICAgICAgICAgICAgICAgICAgICBpbmRleCA9IHRoaXMucHV0QWN0aW9uKHBhaXIoZGF0YSwgaSArIDEpLCB0b2tlbiwgZW5kLCBpbmRleCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGluZGV4O1xuICAgIH1cbn1cbmNsYXNzIFBhcnNlIHtcbiAgICBjb25zdHJ1Y3RvcihwYXJzZXIsIGlucHV0LCBmcmFnbWVudHMsIHJhbmdlcykge1xuICAgICAgICB0aGlzLnBhcnNlciA9IHBhcnNlcjtcbiAgICAgICAgdGhpcy5pbnB1dCA9IGlucHV0O1xuICAgICAgICB0aGlzLnJhbmdlcyA9IHJhbmdlcztcbiAgICAgICAgdGhpcy5yZWNvdmVyaW5nID0gMDtcbiAgICAgICAgdGhpcy5uZXh0U3RhY2tJRCA9IDB4MjY1NDsgLy8g4pmULCDimZUsIOKZliwg4pmXLCDimZgsIOKZmSwg4pmgLCDimaEsIOKZoiwg4pmjLCDimaQsIOKZpSwg4pmmLCDimadcbiAgICAgICAgdGhpcy5taW5TdGFja1BvcyA9IDA7XG4gICAgICAgIHRoaXMucmV1c2VkID0gW107XG4gICAgICAgIHRoaXMuc3RvcHBlZEF0ID0gbnVsbDtcbiAgICAgICAgdGhpcy5sYXN0QmlnUmVkdWN0aW9uU3RhcnQgPSAtMTtcbiAgICAgICAgdGhpcy5sYXN0QmlnUmVkdWN0aW9uU2l6ZSA9IDA7XG4gICAgICAgIHRoaXMuYmlnUmVkdWN0aW9uQ291bnQgPSAwO1xuICAgICAgICB0aGlzLnN0cmVhbSA9IG5ldyBJbnB1dFN0cmVhbShpbnB1dCwgcmFuZ2VzKTtcbiAgICAgICAgdGhpcy50b2tlbnMgPSBuZXcgVG9rZW5DYWNoZShwYXJzZXIsIHRoaXMuc3RyZWFtKTtcbiAgICAgICAgdGhpcy50b3BUZXJtID0gcGFyc2VyLnRvcFsxXTtcbiAgICAgICAgbGV0IHsgZnJvbSB9ID0gcmFuZ2VzWzBdO1xuICAgICAgICB0aGlzLnN0YWNrcyA9IFtTdGFjay5zdGFydCh0aGlzLCBwYXJzZXIudG9wWzBdLCBmcm9tKV07XG4gICAgICAgIHRoaXMuZnJhZ21lbnRzID0gZnJhZ21lbnRzLmxlbmd0aCAmJiB0aGlzLnN0cmVhbS5lbmQgLSBmcm9tID4gcGFyc2VyLmJ1ZmZlckxlbmd0aCAqIDRcbiAgICAgICAgICAgID8gbmV3IEZyYWdtZW50Q3Vyc29yKGZyYWdtZW50cywgcGFyc2VyLm5vZGVTZXQpIDogbnVsbDtcbiAgICB9XG4gICAgZ2V0IHBhcnNlZFBvcygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubWluU3RhY2tQb3M7XG4gICAgfVxuICAgIC8vIE1vdmUgdGhlIHBhcnNlciBmb3J3YXJkLiBUaGlzIHdpbGwgcHJvY2VzcyBhbGwgcGFyc2Ugc3RhY2tzIGF0XG4gICAgLy8gYHRoaXMucG9zYCBhbmQgdHJ5IHRvIGFkdmFuY2UgdGhlbSB0byBhIGZ1cnRoZXIgcG9zaXRpb24uIElmIG5vXG4gICAgLy8gc3RhY2sgZm9yIHN1Y2ggYSBwb3NpdGlvbiBpcyBmb3VuZCwgaXQnbGwgc3RhcnQgZXJyb3ItcmVjb3ZlcnkuXG4gICAgLy9cbiAgICAvLyBXaGVuIHRoZSBwYXJzZSBpcyBmaW5pc2hlZCwgdGhpcyB3aWxsIHJldHVybiBhIHN5bnRheCB0cmVlLiBXaGVuXG4gICAgLy8gbm90LCBpdCByZXR1cm5zIGBudWxsYC5cbiAgICBhZHZhbmNlKCkge1xuICAgICAgICBsZXQgc3RhY2tzID0gdGhpcy5zdGFja3MsIHBvcyA9IHRoaXMubWluU3RhY2tQb3M7XG4gICAgICAgIC8vIFRoaXMgd2lsbCBob2xkIHN0YWNrcyBiZXlvbmQgYHBvc2AuXG4gICAgICAgIGxldCBuZXdTdGFja3MgPSB0aGlzLnN0YWNrcyA9IFtdO1xuICAgICAgICBsZXQgc3RvcHBlZCwgc3RvcHBlZFRva2VucztcbiAgICAgICAgLy8gSWYgYSBsYXJnZSBhbW91bnQgb2YgcmVkdWN0aW9ucyBoYXBwZW5lZCB3aXRoIHRoZSBzYW1lIHN0YXJ0XG4gICAgICAgIC8vIHBvc2l0aW9uLCBmb3JjZSB0aGUgc3RhY2sgb3V0IG9mIHRoYXQgcHJvZHVjdGlvbiBpbiBvcmRlciB0b1xuICAgICAgICAvLyBhdm9pZCBjcmVhdGluZyBhIHRyZWUgdG9vIGRlZXAgdG8gcmVjdXJzZSB0aHJvdWdoLlxuICAgICAgICAvLyAoVGhpcyBpcyBhbiB1Z2x5IGtsdWRnZSwgYmVjYXVzZSB1bmZvcnR1bmF0ZWx5IHRoZXJlIGlzIG5vXG4gICAgICAgIC8vIHN0cmFpZ2h0Zm9yd2FyZCwgY2hlYXAgd2F5IHRvIGNoZWNrIGZvciB0aGlzIGhhcHBlbmluZywgZHVlIHRvXG4gICAgICAgIC8vIHRoZSBoaXN0b3J5IG9mIHJlZHVjdGlvbnMgb25seSBiZWluZyBhdmFpbGFibGUgaW4gYW5cbiAgICAgICAgLy8gZXhwZW5zaXZlLXRvLWFjY2VzcyBmb3JtYXQgaW4gdGhlIHN0YWNrIGJ1ZmZlcnMuKVxuICAgICAgICBpZiAodGhpcy5iaWdSZWR1Y3Rpb25Db3VudCA+IDMwMCAvKiBSZWMuTWF4TGVmdEFzc29jaWF0aXZlUmVkdWN0aW9uQ291bnQgKi8gJiYgc3RhY2tzLmxlbmd0aCA9PSAxKSB7XG4gICAgICAgICAgICBsZXQgW3NdID0gc3RhY2tzO1xuICAgICAgICAgICAgd2hpbGUgKHMuZm9yY2VSZWR1Y2UoKSAmJiBzLnN0YWNrLmxlbmd0aCAmJiBzLnN0YWNrW3Muc3RhY2subGVuZ3RoIC0gMl0gPj0gdGhpcy5sYXN0QmlnUmVkdWN0aW9uU3RhcnQpIHsgfVxuICAgICAgICAgICAgdGhpcy5iaWdSZWR1Y3Rpb25Db3VudCA9IHRoaXMubGFzdEJpZ1JlZHVjdGlvblNpemUgPSAwO1xuICAgICAgICB9XG4gICAgICAgIC8vIEtlZXAgYWR2YW5jaW5nIGFueSBzdGFja3MgYXQgYHBvc2AgdW50aWwgdGhleSBlaXRoZXIgbW92ZVxuICAgICAgICAvLyBmb3J3YXJkIG9yIGNhbid0IGJlIGFkdmFuY2VkLiBHYXRoZXIgc3RhY2tzIHRoYXQgY2FuJ3QgYmVcbiAgICAgICAgLy8gYWR2YW5jZWQgZnVydGhlciBpbiBgc3RvcHBlZGAuXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc3RhY2tzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBsZXQgc3RhY2sgPSBzdGFja3NbaV07XG4gICAgICAgICAgICBmb3IgKDs7KSB7XG4gICAgICAgICAgICAgICAgdGhpcy50b2tlbnMubWFpblRva2VuID0gbnVsbDtcbiAgICAgICAgICAgICAgICBpZiAoc3RhY2sucG9zID4gcG9zKSB7XG4gICAgICAgICAgICAgICAgICAgIG5ld1N0YWNrcy5wdXNoKHN0YWNrKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAodGhpcy5hZHZhbmNlU3RhY2soc3RhY2ssIG5ld1N0YWNrcywgc3RhY2tzKSkge1xuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghc3RvcHBlZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgc3RvcHBlZCA9IFtdO1xuICAgICAgICAgICAgICAgICAgICAgICAgc3RvcHBlZFRva2VucyA9IFtdO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHN0b3BwZWQucHVzaChzdGFjayk7XG4gICAgICAgICAgICAgICAgICAgIGxldCB0b2sgPSB0aGlzLnRva2Vucy5nZXRNYWluVG9rZW4oc3RhY2spO1xuICAgICAgICAgICAgICAgICAgICBzdG9wcGVkVG9rZW5zLnB1c2godG9rLnZhbHVlLCB0b2suZW5kKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFuZXdTdGFja3MubGVuZ3RoKSB7XG4gICAgICAgICAgICBsZXQgZmluaXNoZWQgPSBzdG9wcGVkICYmIGZpbmRGaW5pc2hlZChzdG9wcGVkKTtcbiAgICAgICAgICAgIGlmIChmaW5pc2hlZCkge1xuICAgICAgICAgICAgICAgIGlmICh2ZXJib3NlKVxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIkZpbmlzaCB3aXRoIFwiICsgdGhpcy5zdGFja0lEKGZpbmlzaGVkKSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuc3RhY2tUb1RyZWUoZmluaXNoZWQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMucGFyc2VyLnN0cmljdCkge1xuICAgICAgICAgICAgICAgIGlmICh2ZXJib3NlICYmIHN0b3BwZWQpXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiU3R1Y2sgd2l0aCB0b2tlbiBcIiArICh0aGlzLnRva2Vucy5tYWluVG9rZW4gPyB0aGlzLnBhcnNlci5nZXROYW1lKHRoaXMudG9rZW5zLm1haW5Ub2tlbi52YWx1ZSkgOiBcIm5vbmVcIikpO1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBTeW50YXhFcnJvcihcIk5vIHBhcnNlIGF0IFwiICsgcG9zKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghdGhpcy5yZWNvdmVyaW5nKVxuICAgICAgICAgICAgICAgIHRoaXMucmVjb3ZlcmluZyA9IDUgLyogUmVjLkRpc3RhbmNlICovO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLnJlY292ZXJpbmcgJiYgc3RvcHBlZCkge1xuICAgICAgICAgICAgbGV0IGZpbmlzaGVkID0gdGhpcy5zdG9wcGVkQXQgIT0gbnVsbCAmJiBzdG9wcGVkWzBdLnBvcyA+IHRoaXMuc3RvcHBlZEF0ID8gc3RvcHBlZFswXVxuICAgICAgICAgICAgICAgIDogdGhpcy5ydW5SZWNvdmVyeShzdG9wcGVkLCBzdG9wcGVkVG9rZW5zLCBuZXdTdGFja3MpO1xuICAgICAgICAgICAgaWYgKGZpbmlzaGVkKSB7XG4gICAgICAgICAgICAgICAgaWYgKHZlcmJvc2UpXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiRm9yY2UtZmluaXNoIFwiICsgdGhpcy5zdGFja0lEKGZpbmlzaGVkKSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuc3RhY2tUb1RyZWUoZmluaXNoZWQuZm9yY2VBbGwoKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMucmVjb3ZlcmluZykge1xuICAgICAgICAgICAgbGV0IG1heFJlbWFpbmluZyA9IHRoaXMucmVjb3ZlcmluZyA9PSAxID8gMSA6IHRoaXMucmVjb3ZlcmluZyAqIDMgLyogUmVjLk1heFJlbWFpbmluZ1BlclN0ZXAgKi87XG4gICAgICAgICAgICBpZiAobmV3U3RhY2tzLmxlbmd0aCA+IG1heFJlbWFpbmluZykge1xuICAgICAgICAgICAgICAgIG5ld1N0YWNrcy5zb3J0KChhLCBiKSA9PiBiLnNjb3JlIC0gYS5zY29yZSk7XG4gICAgICAgICAgICAgICAgd2hpbGUgKG5ld1N0YWNrcy5sZW5ndGggPiBtYXhSZW1haW5pbmcpXG4gICAgICAgICAgICAgICAgICAgIG5ld1N0YWNrcy5wb3AoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChuZXdTdGFja3Muc29tZShzID0+IHMucmVkdWNlUG9zID4gcG9zKSlcbiAgICAgICAgICAgICAgICB0aGlzLnJlY292ZXJpbmctLTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChuZXdTdGFja3MubGVuZ3RoID4gMSkge1xuICAgICAgICAgICAgLy8gUHJ1bmUgc3RhY2tzIHRoYXQgYXJlIGluIHRoZSBzYW1lIHN0YXRlLCBvciB0aGF0IGhhdmUgYmVlblxuICAgICAgICAgICAgLy8gcnVubmluZyB3aXRob3V0IHNwbGl0dGluZyBmb3IgYSB3aGlsZSwgdG8gYXZvaWQgZ2V0dGluZyBzdHVja1xuICAgICAgICAgICAgLy8gd2l0aCBtdWx0aXBsZSBzdWNjZXNzZnVsIHN0YWNrcyBydW5uaW5nIGVuZGxlc3NseSBvbi5cbiAgICAgICAgICAgIG91dGVyOiBmb3IgKGxldCBpID0gMDsgaSA8IG5ld1N0YWNrcy5sZW5ndGggLSAxOyBpKyspIHtcbiAgICAgICAgICAgICAgICBsZXQgc3RhY2sgPSBuZXdTdGFja3NbaV07XG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaiA9IGkgKyAxOyBqIDwgbmV3U3RhY2tzLmxlbmd0aDsgaisrKSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBvdGhlciA9IG5ld1N0YWNrc1tqXTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHN0YWNrLnNhbWVTdGF0ZShvdGhlcikgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YWNrLmJ1ZmZlci5sZW5ndGggPiA1MDAgLyogUmVjLk1pbkJ1ZmZlckxlbmd0aFBydW5lICovICYmIG90aGVyLmJ1ZmZlci5sZW5ndGggPiA1MDAgLyogUmVjLk1pbkJ1ZmZlckxlbmd0aFBydW5lICovKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoKChzdGFjay5zY29yZSAtIG90aGVyLnNjb3JlKSB8fCAoc3RhY2suYnVmZmVyLmxlbmd0aCAtIG90aGVyLmJ1ZmZlci5sZW5ndGgpKSA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdTdGFja3Muc3BsaWNlKGotLSwgMSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdTdGFja3Muc3BsaWNlKGktLSwgMSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWUgb3V0ZXI7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAobmV3U3RhY2tzLmxlbmd0aCA+IDEyIC8qIFJlYy5NYXhTdGFja0NvdW50ICovKSB7XG4gICAgICAgICAgICAgICAgbmV3U3RhY2tzLnNvcnQoKGEsIGIpID0+IGIuc2NvcmUgLSBhLnNjb3JlKTtcbiAgICAgICAgICAgICAgICBuZXdTdGFja3Muc3BsaWNlKDEyIC8qIFJlYy5NYXhTdGFja0NvdW50ICovLCBuZXdTdGFja3MubGVuZ3RoIC0gMTIgLyogUmVjLk1heFN0YWNrQ291bnQgKi8pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHRoaXMubWluU3RhY2tQb3MgPSBuZXdTdGFja3NbMF0ucG9zO1xuICAgICAgICBmb3IgKGxldCBpID0gMTsgaSA8IG5ld1N0YWNrcy5sZW5ndGg7IGkrKylcbiAgICAgICAgICAgIGlmIChuZXdTdGFja3NbaV0ucG9zIDwgdGhpcy5taW5TdGFja1BvcylcbiAgICAgICAgICAgICAgICB0aGlzLm1pblN0YWNrUG9zID0gbmV3U3RhY2tzW2ldLnBvcztcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIHN0b3BBdChwb3MpIHtcbiAgICAgICAgaWYgKHRoaXMuc3RvcHBlZEF0ICE9IG51bGwgJiYgdGhpcy5zdG9wcGVkQXQgPCBwb3MpXG4gICAgICAgICAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcihcIkNhbid0IG1vdmUgc3RvcHBlZEF0IGZvcndhcmRcIik7XG4gICAgICAgIHRoaXMuc3RvcHBlZEF0ID0gcG9zO1xuICAgIH1cbiAgICAvLyBSZXR1cm5zIGFuIHVwZGF0ZWQgdmVyc2lvbiBvZiB0aGUgZ2l2ZW4gc3RhY2ssIG9yIG51bGwgaWYgdGhlXG4gICAgLy8gc3RhY2sgY2FuJ3QgYWR2YW5jZSBub3JtYWxseS4gV2hlbiBgc3BsaXRgIGFuZCBgc3RhY2tzYCBhcmVcbiAgICAvLyBnaXZlbiwgc3RhY2tzIHNwbGl0IG9mZiBieSBhbWJpZ3VvdXMgb3BlcmF0aW9ucyB3aWxsIGJlIHB1c2hlZCB0b1xuICAgIC8vIGBzcGxpdGAsIG9yIGFkZGVkIHRvIGBzdGFja3NgIGlmIHRoZXkgbW92ZSBgcG9zYCBmb3J3YXJkLlxuICAgIGFkdmFuY2VTdGFjayhzdGFjaywgc3RhY2tzLCBzcGxpdCkge1xuICAgICAgICBsZXQgc3RhcnQgPSBzdGFjay5wb3MsIHsgcGFyc2VyIH0gPSB0aGlzO1xuICAgICAgICBsZXQgYmFzZSA9IHZlcmJvc2UgPyB0aGlzLnN0YWNrSUQoc3RhY2spICsgXCIgLT4gXCIgOiBcIlwiO1xuICAgICAgICBpZiAodGhpcy5zdG9wcGVkQXQgIT0gbnVsbCAmJiBzdGFydCA+IHRoaXMuc3RvcHBlZEF0KVxuICAgICAgICAgICAgcmV0dXJuIHN0YWNrLmZvcmNlUmVkdWNlKCkgPyBzdGFjayA6IG51bGw7XG4gICAgICAgIGlmICh0aGlzLmZyYWdtZW50cykge1xuICAgICAgICAgICAgbGV0IHN0cmljdEN4ID0gc3RhY2suY3VyQ29udGV4dCAmJiBzdGFjay5jdXJDb250ZXh0LnRyYWNrZXIuc3RyaWN0LCBjeEhhc2ggPSBzdHJpY3RDeCA/IHN0YWNrLmN1ckNvbnRleHQuaGFzaCA6IDA7XG4gICAgICAgICAgICBmb3IgKGxldCBjYWNoZWQgPSB0aGlzLmZyYWdtZW50cy5ub2RlQXQoc3RhcnQpOyBjYWNoZWQ7KSB7XG4gICAgICAgICAgICAgICAgbGV0IG1hdGNoID0gdGhpcy5wYXJzZXIubm9kZVNldC50eXBlc1tjYWNoZWQudHlwZS5pZF0gPT0gY2FjaGVkLnR5cGUgPyBwYXJzZXIuZ2V0R290byhzdGFjay5zdGF0ZSwgY2FjaGVkLnR5cGUuaWQpIDogLTE7XG4gICAgICAgICAgICAgICAgaWYgKG1hdGNoID4gLTEgJiYgY2FjaGVkLmxlbmd0aCAmJiAoIXN0cmljdEN4IHx8IChjYWNoZWQucHJvcChOb2RlUHJvcC5jb250ZXh0SGFzaCkgfHwgMCkgPT0gY3hIYXNoKSkge1xuICAgICAgICAgICAgICAgICAgICBzdGFjay51c2VOb2RlKGNhY2hlZCwgbWF0Y2gpO1xuICAgICAgICAgICAgICAgICAgICBpZiAodmVyYm9zZSlcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGJhc2UgKyB0aGlzLnN0YWNrSUQoc3RhY2spICsgYCAodmlhIHJldXNlIG9mICR7cGFyc2VyLmdldE5hbWUoY2FjaGVkLnR5cGUuaWQpfSlgKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICghKGNhY2hlZCBpbnN0YW5jZW9mIFRyZWUpIHx8IGNhY2hlZC5jaGlsZHJlbi5sZW5ndGggPT0gMCB8fCBjYWNoZWQucG9zaXRpb25zWzBdID4gMClcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgbGV0IGlubmVyID0gY2FjaGVkLmNoaWxkcmVuWzBdO1xuICAgICAgICAgICAgICAgIGlmIChpbm5lciBpbnN0YW5jZW9mIFRyZWUgJiYgY2FjaGVkLnBvc2l0aW9uc1swXSA9PSAwKVxuICAgICAgICAgICAgICAgICAgICBjYWNoZWQgPSBpbm5lcjtcbiAgICAgICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGxldCBkZWZhdWx0UmVkdWNlID0gcGFyc2VyLnN0YXRlU2xvdChzdGFjay5zdGF0ZSwgNCAvKiBQYXJzZVN0YXRlLkRlZmF1bHRSZWR1Y2UgKi8pO1xuICAgICAgICBpZiAoZGVmYXVsdFJlZHVjZSA+IDApIHtcbiAgICAgICAgICAgIHN0YWNrLnJlZHVjZShkZWZhdWx0UmVkdWNlKTtcbiAgICAgICAgICAgIGlmICh2ZXJib3NlKVxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGJhc2UgKyB0aGlzLnN0YWNrSUQoc3RhY2spICsgYCAodmlhIGFsd2F5cy1yZWR1Y2UgJHtwYXJzZXIuZ2V0TmFtZShkZWZhdWx0UmVkdWNlICYgNjU1MzUgLyogQWN0aW9uLlZhbHVlTWFzayAqLyl9KWApO1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHN0YWNrLnN0YWNrLmxlbmd0aCA+PSA4NDAwIC8qIFJlYy5DdXREZXB0aCAqLykge1xuICAgICAgICAgICAgd2hpbGUgKHN0YWNrLnN0YWNrLmxlbmd0aCA+IDYwMDAgLyogUmVjLkN1dFRvICovICYmIHN0YWNrLmZvcmNlUmVkdWNlKCkpIHsgfVxuICAgICAgICB9XG4gICAgICAgIGxldCBhY3Rpb25zID0gdGhpcy50b2tlbnMuZ2V0QWN0aW9ucyhzdGFjayk7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYWN0aW9ucy5sZW5ndGg7KSB7XG4gICAgICAgICAgICBsZXQgYWN0aW9uID0gYWN0aW9uc1tpKytdLCB0ZXJtID0gYWN0aW9uc1tpKytdLCBlbmQgPSBhY3Rpb25zW2krK107XG4gICAgICAgICAgICBsZXQgbGFzdCA9IGkgPT0gYWN0aW9ucy5sZW5ndGggfHwgIXNwbGl0O1xuICAgICAgICAgICAgbGV0IGxvY2FsU3RhY2sgPSBsYXN0ID8gc3RhY2sgOiBzdGFjay5zcGxpdCgpO1xuICAgICAgICAgICAgbGV0IG1haW4gPSB0aGlzLnRva2Vucy5tYWluVG9rZW47XG4gICAgICAgICAgICBsb2NhbFN0YWNrLmFwcGx5KGFjdGlvbiwgdGVybSwgbWFpbiA/IG1haW4uc3RhcnQgOiBsb2NhbFN0YWNrLnBvcywgZW5kKTtcbiAgICAgICAgICAgIGlmICh2ZXJib3NlKVxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGJhc2UgKyB0aGlzLnN0YWNrSUQobG9jYWxTdGFjaykgKyBgICh2aWEgJHsoYWN0aW9uICYgNjU1MzYgLyogQWN0aW9uLlJlZHVjZUZsYWcgKi8pID09IDAgPyBcInNoaWZ0XCJcbiAgICAgICAgICAgICAgICAgICAgOiBgcmVkdWNlIG9mICR7cGFyc2VyLmdldE5hbWUoYWN0aW9uICYgNjU1MzUgLyogQWN0aW9uLlZhbHVlTWFzayAqLyl9YH0gZm9yICR7cGFyc2VyLmdldE5hbWUodGVybSl9IEAgJHtzdGFydH0ke2xvY2FsU3RhY2sgPT0gc3RhY2sgPyBcIlwiIDogXCIsIHNwbGl0XCJ9KWApO1xuICAgICAgICAgICAgaWYgKGxhc3QpXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICBlbHNlIGlmIChsb2NhbFN0YWNrLnBvcyA+IHN0YXJ0KVxuICAgICAgICAgICAgICAgIHN0YWNrcy5wdXNoKGxvY2FsU3RhY2spO1xuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgIHNwbGl0LnB1c2gobG9jYWxTdGFjayk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICAvLyBBZHZhbmNlIGEgZ2l2ZW4gc3RhY2sgZm9yd2FyZCBhcyBmYXIgYXMgaXQgd2lsbCBnby4gUmV0dXJucyB0aGVcbiAgICAvLyAocG9zc2libHkgdXBkYXRlZCkgc3RhY2sgaWYgaXQgZ290IHN0dWNrLCBvciBudWxsIGlmIGl0IG1vdmVkXG4gICAgLy8gZm9yd2FyZCBhbmQgd2FzIGdpdmVuIHRvIGBwdXNoU3RhY2tEZWR1cGAuXG4gICAgYWR2YW5jZUZ1bGx5KHN0YWNrLCBuZXdTdGFja3MpIHtcbiAgICAgICAgbGV0IHBvcyA9IHN0YWNrLnBvcztcbiAgICAgICAgZm9yICg7Oykge1xuICAgICAgICAgICAgaWYgKCF0aGlzLmFkdmFuY2VTdGFjayhzdGFjaywgbnVsbCwgbnVsbCkpXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgaWYgKHN0YWNrLnBvcyA+IHBvcykge1xuICAgICAgICAgICAgICAgIHB1c2hTdGFja0RlZHVwKHN0YWNrLCBuZXdTdGFja3MpO1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIHJ1blJlY292ZXJ5KHN0YWNrcywgdG9rZW5zLCBuZXdTdGFja3MpIHtcbiAgICAgICAgbGV0IGZpbmlzaGVkID0gbnVsbCwgcmVzdGFydGVkID0gZmFsc2U7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc3RhY2tzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBsZXQgc3RhY2sgPSBzdGFja3NbaV0sIHRva2VuID0gdG9rZW5zW2kgPDwgMV0sIHRva2VuRW5kID0gdG9rZW5zWyhpIDw8IDEpICsgMV07XG4gICAgICAgICAgICBsZXQgYmFzZSA9IHZlcmJvc2UgPyB0aGlzLnN0YWNrSUQoc3RhY2spICsgXCIgLT4gXCIgOiBcIlwiO1xuICAgICAgICAgICAgaWYgKHN0YWNrLmRlYWRFbmQpIHtcbiAgICAgICAgICAgICAgICBpZiAocmVzdGFydGVkKVxuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICByZXN0YXJ0ZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIHN0YWNrLnJlc3RhcnQoKTtcbiAgICAgICAgICAgICAgICBpZiAodmVyYm9zZSlcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coYmFzZSArIHRoaXMuc3RhY2tJRChzdGFjaykgKyBcIiAocmVzdGFydGVkKVwiKTtcbiAgICAgICAgICAgICAgICBsZXQgZG9uZSA9IHRoaXMuYWR2YW5jZUZ1bGx5KHN0YWNrLCBuZXdTdGFja3MpO1xuICAgICAgICAgICAgICAgIGlmIChkb25lKVxuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxldCBmb3JjZSA9IHN0YWNrLnNwbGl0KCksIGZvcmNlQmFzZSA9IGJhc2U7XG4gICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IDEwIC8qIFJlYy5Gb3JjZVJlZHVjZUxpbWl0ICovICYmIGZvcmNlLmZvcmNlUmVkdWNlKCk7IGorKykge1xuICAgICAgICAgICAgICAgIGlmICh2ZXJib3NlKVxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhmb3JjZUJhc2UgKyB0aGlzLnN0YWNrSUQoZm9yY2UpICsgXCIgKHZpYSBmb3JjZS1yZWR1Y2UpXCIpO1xuICAgICAgICAgICAgICAgIGxldCBkb25lID0gdGhpcy5hZHZhbmNlRnVsbHkoZm9yY2UsIG5ld1N0YWNrcyk7XG4gICAgICAgICAgICAgICAgaWYgKGRvbmUpXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGlmICh2ZXJib3NlKVxuICAgICAgICAgICAgICAgICAgICBmb3JjZUJhc2UgPSB0aGlzLnN0YWNrSUQoZm9yY2UpICsgXCIgLT4gXCI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmb3IgKGxldCBpbnNlcnQgb2Ygc3RhY2sucmVjb3ZlckJ5SW5zZXJ0KHRva2VuKSkge1xuICAgICAgICAgICAgICAgIGlmICh2ZXJib3NlKVxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhiYXNlICsgdGhpcy5zdGFja0lEKGluc2VydCkgKyBcIiAodmlhIHJlY292ZXItaW5zZXJ0KVwiKTtcbiAgICAgICAgICAgICAgICB0aGlzLmFkdmFuY2VGdWxseShpbnNlcnQsIG5ld1N0YWNrcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5zdHJlYW0uZW5kID4gc3RhY2sucG9zKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRva2VuRW5kID09IHN0YWNrLnBvcykge1xuICAgICAgICAgICAgICAgICAgICB0b2tlbkVuZCsrO1xuICAgICAgICAgICAgICAgICAgICB0b2tlbiA9IDAgLyogVGVybS5FcnIgKi87XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHN0YWNrLnJlY292ZXJCeURlbGV0ZSh0b2tlbiwgdG9rZW5FbmQpO1xuICAgICAgICAgICAgICAgIGlmICh2ZXJib3NlKVxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhiYXNlICsgdGhpcy5zdGFja0lEKHN0YWNrKSArIGAgKHZpYSByZWNvdmVyLWRlbGV0ZSAke3RoaXMucGFyc2VyLmdldE5hbWUodG9rZW4pfSlgKTtcbiAgICAgICAgICAgICAgICBwdXNoU3RhY2tEZWR1cChzdGFjaywgbmV3U3RhY2tzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKCFmaW5pc2hlZCB8fCBmaW5pc2hlZC5zY29yZSA8IHN0YWNrLnNjb3JlKSB7XG4gICAgICAgICAgICAgICAgZmluaXNoZWQgPSBzdGFjaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmluaXNoZWQ7XG4gICAgfVxuICAgIC8vIENvbnZlcnQgdGhlIHN0YWNrJ3MgYnVmZmVyIHRvIGEgc3ludGF4IHRyZWUuXG4gICAgc3RhY2tUb1RyZWUoc3RhY2spIHtcbiAgICAgICAgc3RhY2suY2xvc2UoKTtcbiAgICAgICAgcmV0dXJuIFRyZWUuYnVpbGQoeyBidWZmZXI6IFN0YWNrQnVmZmVyQ3Vyc29yLmNyZWF0ZShzdGFjayksXG4gICAgICAgICAgICBub2RlU2V0OiB0aGlzLnBhcnNlci5ub2RlU2V0LFxuICAgICAgICAgICAgdG9wSUQ6IHRoaXMudG9wVGVybSxcbiAgICAgICAgICAgIG1heEJ1ZmZlckxlbmd0aDogdGhpcy5wYXJzZXIuYnVmZmVyTGVuZ3RoLFxuICAgICAgICAgICAgcmV1c2VkOiB0aGlzLnJldXNlZCxcbiAgICAgICAgICAgIHN0YXJ0OiB0aGlzLnJhbmdlc1swXS5mcm9tLFxuICAgICAgICAgICAgbGVuZ3RoOiBzdGFjay5wb3MgLSB0aGlzLnJhbmdlc1swXS5mcm9tLFxuICAgICAgICAgICAgbWluUmVwZWF0VHlwZTogdGhpcy5wYXJzZXIubWluUmVwZWF0VGVybSB9KTtcbiAgICB9XG4gICAgc3RhY2tJRChzdGFjaykge1xuICAgICAgICBsZXQgaWQgPSAoc3RhY2tJRHMgfHwgKHN0YWNrSURzID0gbmV3IFdlYWtNYXApKS5nZXQoc3RhY2spO1xuICAgICAgICBpZiAoIWlkKVxuICAgICAgICAgICAgc3RhY2tJRHMuc2V0KHN0YWNrLCBpZCA9IFN0cmluZy5mcm9tQ29kZVBvaW50KHRoaXMubmV4dFN0YWNrSUQrKykpO1xuICAgICAgICByZXR1cm4gaWQgKyBzdGFjaztcbiAgICB9XG59XG5mdW5jdGlvbiBwdXNoU3RhY2tEZWR1cChzdGFjaywgbmV3U3RhY2tzKSB7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBuZXdTdGFja3MubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgbGV0IG90aGVyID0gbmV3U3RhY2tzW2ldO1xuICAgICAgICBpZiAob3RoZXIucG9zID09IHN0YWNrLnBvcyAmJiBvdGhlci5zYW1lU3RhdGUoc3RhY2spKSB7XG4gICAgICAgICAgICBpZiAobmV3U3RhY2tzW2ldLnNjb3JlIDwgc3RhY2suc2NvcmUpXG4gICAgICAgICAgICAgICAgbmV3U3RhY2tzW2ldID0gc3RhY2s7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICB9XG4gICAgbmV3U3RhY2tzLnB1c2goc3RhY2spO1xufVxuY2xhc3MgRGlhbGVjdCB7XG4gICAgY29uc3RydWN0b3Ioc291cmNlLCBmbGFncywgZGlzYWJsZWQpIHtcbiAgICAgICAgdGhpcy5zb3VyY2UgPSBzb3VyY2U7XG4gICAgICAgIHRoaXMuZmxhZ3MgPSBmbGFncztcbiAgICAgICAgdGhpcy5kaXNhYmxlZCA9IGRpc2FibGVkO1xuICAgIH1cbiAgICBhbGxvd3ModGVybSkgeyByZXR1cm4gIXRoaXMuZGlzYWJsZWQgfHwgdGhpcy5kaXNhYmxlZFt0ZXJtXSA9PSAwOyB9XG59XG5jb25zdCBpZCA9IHggPT4geDtcbi8qKlxuQ29udGV4dCB0cmFja2VycyBhcmUgdXNlZCB0byB0cmFjayBzdGF0ZWZ1bCBjb250ZXh0IChzdWNoIGFzXG5pbmRlbnRhdGlvbiBpbiB0aGUgUHl0aG9uIGdyYW1tYXIsIG9yIHBhcmVudCBlbGVtZW50cyBpbiB0aGUgWE1MXG5ncmFtbWFyKSBuZWVkZWQgYnkgZXh0ZXJuYWwgdG9rZW5pemVycy4gWW91IGRlY2xhcmUgdGhlbSBpbiBhXG5ncmFtbWFyIGZpbGUgYXMgYEBjb250ZXh0IGV4cG9ydE5hbWUgZnJvbSBcIm1vZHVsZVwiYC5cblxuQ29udGV4dCB2YWx1ZXMgc2hvdWxkIGJlIGltbXV0YWJsZSwgYW5kIGNhbiBiZSB1cGRhdGVkIChyZXBsYWNlZClcbm9uIHNoaWZ0IG9yIHJlZHVjZSBhY3Rpb25zLlxuXG5UaGUgZXhwb3J0IHVzZWQgaW4gYSBgQGNvbnRleHRgIGRlY2xhcmF0aW9uIHNob3VsZCBiZSBvZiB0aGlzXG50eXBlLlxuKi9cbmNsYXNzIENvbnRleHRUcmFja2VyIHtcbiAgICAvKipcbiAgICBEZWZpbmUgYSBjb250ZXh0IHRyYWNrZXIuXG4gICAgKi9cbiAgICBjb25zdHJ1Y3RvcihzcGVjKSB7XG4gICAgICAgIHRoaXMuc3RhcnQgPSBzcGVjLnN0YXJ0O1xuICAgICAgICB0aGlzLnNoaWZ0ID0gc3BlYy5zaGlmdCB8fCBpZDtcbiAgICAgICAgdGhpcy5yZWR1Y2UgPSBzcGVjLnJlZHVjZSB8fCBpZDtcbiAgICAgICAgdGhpcy5yZXVzZSA9IHNwZWMucmV1c2UgfHwgaWQ7XG4gICAgICAgIHRoaXMuaGFzaCA9IHNwZWMuaGFzaCB8fCAoKCkgPT4gMCk7XG4gICAgICAgIHRoaXMuc3RyaWN0ID0gc3BlYy5zdHJpY3QgIT09IGZhbHNlO1xuICAgIH1cbn1cbi8qKlxuSG9sZHMgdGhlIHBhcnNlIHRhYmxlcyBmb3IgYSBnaXZlbiBncmFtbWFyLCBhcyBnZW5lcmF0ZWQgYnlcbmBsZXplci1nZW5lcmF0b3JgLCBhbmQgcHJvdmlkZXMgW21ldGhvZHNdKCNjb21tb24uUGFyc2VyKSB0byBwYXJzZVxuY29udGVudCB3aXRoLlxuKi9cbmNsYXNzIExSUGFyc2VyIGV4dGVuZHMgUGFyc2VyIHtcbiAgICAvKipcbiAgICBAaW50ZXJuYWxcbiAgICAqL1xuICAgIGNvbnN0cnVjdG9yKHNwZWMpIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgLyoqXG4gICAgICAgIEBpbnRlcm5hbFxuICAgICAgICAqL1xuICAgICAgICB0aGlzLndyYXBwZXJzID0gW107XG4gICAgICAgIGlmIChzcGVjLnZlcnNpb24gIT0gMTQgLyogRmlsZS5WZXJzaW9uICovKVxuICAgICAgICAgICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoYFBhcnNlciB2ZXJzaW9uICgke3NwZWMudmVyc2lvbn0pIGRvZXNuJ3QgbWF0Y2ggcnVudGltZSB2ZXJzaW9uICgkezE0IC8qIEZpbGUuVmVyc2lvbiAqL30pYCk7XG4gICAgICAgIGxldCBub2RlTmFtZXMgPSBzcGVjLm5vZGVOYW1lcy5zcGxpdChcIiBcIik7XG4gICAgICAgIHRoaXMubWluUmVwZWF0VGVybSA9IG5vZGVOYW1lcy5sZW5ndGg7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc3BlYy5yZXBlYXROb2RlQ291bnQ7IGkrKylcbiAgICAgICAgICAgIG5vZGVOYW1lcy5wdXNoKFwiXCIpO1xuICAgICAgICBsZXQgdG9wVGVybXMgPSBPYmplY3Qua2V5cyhzcGVjLnRvcFJ1bGVzKS5tYXAociA9PiBzcGVjLnRvcFJ1bGVzW3JdWzFdKTtcbiAgICAgICAgbGV0IG5vZGVQcm9wcyA9IFtdO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG5vZGVOYW1lcy5sZW5ndGg7IGkrKylcbiAgICAgICAgICAgIG5vZGVQcm9wcy5wdXNoKFtdKTtcbiAgICAgICAgZnVuY3Rpb24gc2V0UHJvcChub2RlSUQsIHByb3AsIHZhbHVlKSB7XG4gICAgICAgICAgICBub2RlUHJvcHNbbm9kZUlEXS5wdXNoKFtwcm9wLCBwcm9wLmRlc2VyaWFsaXplKFN0cmluZyh2YWx1ZSkpXSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHNwZWMubm9kZVByb3BzKVxuICAgICAgICAgICAgZm9yIChsZXQgcHJvcFNwZWMgb2Ygc3BlYy5ub2RlUHJvcHMpIHtcbiAgICAgICAgICAgICAgICBsZXQgcHJvcCA9IHByb3BTcGVjWzBdO1xuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgcHJvcCA9PSBcInN0cmluZ1wiKVxuICAgICAgICAgICAgICAgICAgICBwcm9wID0gTm9kZVByb3BbcHJvcF07XG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDE7IGkgPCBwcm9wU3BlYy5sZW5ndGg7KSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBuZXh0ID0gcHJvcFNwZWNbaSsrXTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG5leHQgPj0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2V0UHJvcChuZXh0LCBwcm9wLCBwcm9wU3BlY1tpKytdKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCB2YWx1ZSA9IHByb3BTcGVjW2kgKyAtbmV4dF07XG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBqID0gLW5leHQ7IGogPiAwOyBqLS0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0UHJvcChwcm9wU3BlY1tpKytdLCBwcm9wLCB2YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpKys7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIHRoaXMubm9kZVNldCA9IG5ldyBOb2RlU2V0KG5vZGVOYW1lcy5tYXAoKG5hbWUsIGkpID0+IE5vZGVUeXBlLmRlZmluZSh7XG4gICAgICAgICAgICBuYW1lOiBpID49IHRoaXMubWluUmVwZWF0VGVybSA/IHVuZGVmaW5lZCA6IG5hbWUsXG4gICAgICAgICAgICBpZDogaSxcbiAgICAgICAgICAgIHByb3BzOiBub2RlUHJvcHNbaV0sXG4gICAgICAgICAgICB0b3A6IHRvcFRlcm1zLmluZGV4T2YoaSkgPiAtMSxcbiAgICAgICAgICAgIGVycm9yOiBpID09IDAsXG4gICAgICAgICAgICBza2lwcGVkOiBzcGVjLnNraXBwZWROb2RlcyAmJiBzcGVjLnNraXBwZWROb2Rlcy5pbmRleE9mKGkpID4gLTFcbiAgICAgICAgfSkpKTtcbiAgICAgICAgaWYgKHNwZWMucHJvcFNvdXJjZXMpXG4gICAgICAgICAgICB0aGlzLm5vZGVTZXQgPSB0aGlzLm5vZGVTZXQuZXh0ZW5kKC4uLnNwZWMucHJvcFNvdXJjZXMpO1xuICAgICAgICB0aGlzLnN0cmljdCA9IGZhbHNlO1xuICAgICAgICB0aGlzLmJ1ZmZlckxlbmd0aCA9IERlZmF1bHRCdWZmZXJMZW5ndGg7XG4gICAgICAgIGxldCB0b2tlbkFycmF5ID0gZGVjb2RlQXJyYXkoc3BlYy50b2tlbkRhdGEpO1xuICAgICAgICB0aGlzLmNvbnRleHQgPSBzcGVjLmNvbnRleHQ7XG4gICAgICAgIHRoaXMuc3BlY2lhbGl6ZXJTcGVjcyA9IHNwZWMuc3BlY2lhbGl6ZWQgfHwgW107XG4gICAgICAgIHRoaXMuc3BlY2lhbGl6ZWQgPSBuZXcgVWludDE2QXJyYXkodGhpcy5zcGVjaWFsaXplclNwZWNzLmxlbmd0aCk7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5zcGVjaWFsaXplclNwZWNzLmxlbmd0aDsgaSsrKVxuICAgICAgICAgICAgdGhpcy5zcGVjaWFsaXplZFtpXSA9IHRoaXMuc3BlY2lhbGl6ZXJTcGVjc1tpXS50ZXJtO1xuICAgICAgICB0aGlzLnNwZWNpYWxpemVycyA9IHRoaXMuc3BlY2lhbGl6ZXJTcGVjcy5tYXAoZ2V0U3BlY2lhbGl6ZXIpO1xuICAgICAgICB0aGlzLnN0YXRlcyA9IGRlY29kZUFycmF5KHNwZWMuc3RhdGVzLCBVaW50MzJBcnJheSk7XG4gICAgICAgIHRoaXMuZGF0YSA9IGRlY29kZUFycmF5KHNwZWMuc3RhdGVEYXRhKTtcbiAgICAgICAgdGhpcy5nb3RvID0gZGVjb2RlQXJyYXkoc3BlYy5nb3RvKTtcbiAgICAgICAgdGhpcy5tYXhUZXJtID0gc3BlYy5tYXhUZXJtO1xuICAgICAgICB0aGlzLnRva2VuaXplcnMgPSBzcGVjLnRva2VuaXplcnMubWFwKHZhbHVlID0+IHR5cGVvZiB2YWx1ZSA9PSBcIm51bWJlclwiID8gbmV3IFRva2VuR3JvdXAodG9rZW5BcnJheSwgdmFsdWUpIDogdmFsdWUpO1xuICAgICAgICB0aGlzLnRvcFJ1bGVzID0gc3BlYy50b3BSdWxlcztcbiAgICAgICAgdGhpcy5kaWFsZWN0cyA9IHNwZWMuZGlhbGVjdHMgfHwge307XG4gICAgICAgIHRoaXMuZHluYW1pY1ByZWNlZGVuY2VzID0gc3BlYy5keW5hbWljUHJlY2VkZW5jZXMgfHwgbnVsbDtcbiAgICAgICAgdGhpcy50b2tlblByZWNUYWJsZSA9IHNwZWMudG9rZW5QcmVjO1xuICAgICAgICB0aGlzLnRlcm1OYW1lcyA9IHNwZWMudGVybU5hbWVzIHx8IG51bGw7XG4gICAgICAgIHRoaXMubWF4Tm9kZSA9IHRoaXMubm9kZVNldC50eXBlcy5sZW5ndGggLSAxO1xuICAgICAgICB0aGlzLmRpYWxlY3QgPSB0aGlzLnBhcnNlRGlhbGVjdCgpO1xuICAgICAgICB0aGlzLnRvcCA9IHRoaXMudG9wUnVsZXNbT2JqZWN0LmtleXModGhpcy50b3BSdWxlcylbMF1dO1xuICAgIH1cbiAgICBjcmVhdGVQYXJzZShpbnB1dCwgZnJhZ21lbnRzLCByYW5nZXMpIHtcbiAgICAgICAgbGV0IHBhcnNlID0gbmV3IFBhcnNlKHRoaXMsIGlucHV0LCBmcmFnbWVudHMsIHJhbmdlcyk7XG4gICAgICAgIGZvciAobGV0IHcgb2YgdGhpcy53cmFwcGVycylcbiAgICAgICAgICAgIHBhcnNlID0gdyhwYXJzZSwgaW5wdXQsIGZyYWdtZW50cywgcmFuZ2VzKTtcbiAgICAgICAgcmV0dXJuIHBhcnNlO1xuICAgIH1cbiAgICAvKipcbiAgICBHZXQgYSBnb3RvIHRhYmxlIGVudHJ5IEBpbnRlcm5hbFxuICAgICovXG4gICAgZ2V0R290byhzdGF0ZSwgdGVybSwgbG9vc2UgPSBmYWxzZSkge1xuICAgICAgICBsZXQgdGFibGUgPSB0aGlzLmdvdG87XG4gICAgICAgIGlmICh0ZXJtID49IHRhYmxlWzBdKVxuICAgICAgICAgICAgcmV0dXJuIC0xO1xuICAgICAgICBmb3IgKGxldCBwb3MgPSB0YWJsZVt0ZXJtICsgMV07Oykge1xuICAgICAgICAgICAgbGV0IGdyb3VwVGFnID0gdGFibGVbcG9zKytdLCBsYXN0ID0gZ3JvdXBUYWcgJiAxO1xuICAgICAgICAgICAgbGV0IHRhcmdldCA9IHRhYmxlW3BvcysrXTtcbiAgICAgICAgICAgIGlmIChsYXN0ICYmIGxvb3NlKVxuICAgICAgICAgICAgICAgIHJldHVybiB0YXJnZXQ7XG4gICAgICAgICAgICBmb3IgKGxldCBlbmQgPSBwb3MgKyAoZ3JvdXBUYWcgPj4gMSk7IHBvcyA8IGVuZDsgcG9zKyspXG4gICAgICAgICAgICAgICAgaWYgKHRhYmxlW3Bvc10gPT0gc3RhdGUpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0YXJnZXQ7XG4gICAgICAgICAgICBpZiAobGFzdClcbiAgICAgICAgICAgICAgICByZXR1cm4gLTE7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgQ2hlY2sgaWYgdGhpcyBzdGF0ZSBoYXMgYW4gYWN0aW9uIGZvciBhIGdpdmVuIHRlcm1pbmFsIEBpbnRlcm5hbFxuICAgICovXG4gICAgaGFzQWN0aW9uKHN0YXRlLCB0ZXJtaW5hbCkge1xuICAgICAgICBsZXQgZGF0YSA9IHRoaXMuZGF0YTtcbiAgICAgICAgZm9yIChsZXQgc2V0ID0gMDsgc2V0IDwgMjsgc2V0KyspIHtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSB0aGlzLnN0YXRlU2xvdChzdGF0ZSwgc2V0ID8gMiAvKiBQYXJzZVN0YXRlLlNraXAgKi8gOiAxIC8qIFBhcnNlU3RhdGUuQWN0aW9ucyAqLyksIG5leHQ7OyBpICs9IDMpIHtcbiAgICAgICAgICAgICAgICBpZiAoKG5leHQgPSBkYXRhW2ldKSA9PSA2NTUzNSAvKiBTZXEuRW5kICovKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChkYXRhW2kgKyAxXSA9PSAxIC8qIFNlcS5OZXh0ICovKVxuICAgICAgICAgICAgICAgICAgICAgICAgbmV4dCA9IGRhdGFbaSA9IHBhaXIoZGF0YSwgaSArIDIpXTtcbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoZGF0YVtpICsgMV0gPT0gMiAvKiBTZXEuT3RoZXIgKi8pXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcGFpcihkYXRhLCBpICsgMik7XG4gICAgICAgICAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAobmV4dCA9PSB0ZXJtaW5hbCB8fCBuZXh0ID09IDAgLyogVGVybS5FcnIgKi8pXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBwYWlyKGRhdGEsIGkgKyAxKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gMDtcbiAgICB9XG4gICAgLyoqXG4gICAgQGludGVybmFsXG4gICAgKi9cbiAgICBzdGF0ZVNsb3Qoc3RhdGUsIHNsb3QpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc3RhdGVzWyhzdGF0ZSAqIDYgLyogUGFyc2VTdGF0ZS5TaXplICovKSArIHNsb3RdO1xuICAgIH1cbiAgICAvKipcbiAgICBAaW50ZXJuYWxcbiAgICAqL1xuICAgIHN0YXRlRmxhZyhzdGF0ZSwgZmxhZykge1xuICAgICAgICByZXR1cm4gKHRoaXMuc3RhdGVTbG90KHN0YXRlLCAwIC8qIFBhcnNlU3RhdGUuRmxhZ3MgKi8pICYgZmxhZykgPiAwO1xuICAgIH1cbiAgICAvKipcbiAgICBAaW50ZXJuYWxcbiAgICAqL1xuICAgIHZhbGlkQWN0aW9uKHN0YXRlLCBhY3Rpb24pIHtcbiAgICAgICAgcmV0dXJuICEhdGhpcy5hbGxBY3Rpb25zKHN0YXRlLCBhID0+IGEgPT0gYWN0aW9uID8gdHJ1ZSA6IG51bGwpO1xuICAgIH1cbiAgICAvKipcbiAgICBAaW50ZXJuYWxcbiAgICAqL1xuICAgIGFsbEFjdGlvbnMoc3RhdGUsIGFjdGlvbikge1xuICAgICAgICBsZXQgZGVmbHQgPSB0aGlzLnN0YXRlU2xvdChzdGF0ZSwgNCAvKiBQYXJzZVN0YXRlLkRlZmF1bHRSZWR1Y2UgKi8pO1xuICAgICAgICBsZXQgcmVzdWx0ID0gZGVmbHQgPyBhY3Rpb24oZGVmbHQpIDogdW5kZWZpbmVkO1xuICAgICAgICBmb3IgKGxldCBpID0gdGhpcy5zdGF0ZVNsb3Qoc3RhdGUsIDEgLyogUGFyc2VTdGF0ZS5BY3Rpb25zICovKTsgcmVzdWx0ID09IG51bGw7IGkgKz0gMykge1xuICAgICAgICAgICAgaWYgKHRoaXMuZGF0YVtpXSA9PSA2NTUzNSAvKiBTZXEuRW5kICovKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuZGF0YVtpICsgMV0gPT0gMSAvKiBTZXEuTmV4dCAqLylcbiAgICAgICAgICAgICAgICAgICAgaSA9IHBhaXIodGhpcy5kYXRhLCBpICsgMik7XG4gICAgICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJlc3VsdCA9IGFjdGlvbihwYWlyKHRoaXMuZGF0YSwgaSArIDEpKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cbiAgICAvKipcbiAgICBHZXQgdGhlIHN0YXRlcyB0aGF0IGNhbiBmb2xsb3cgdGhpcyBvbmUgdGhyb3VnaCBzaGlmdCBhY3Rpb25zIG9yXG4gICAgZ290byBqdW1wcy4gQGludGVybmFsXG4gICAgKi9cbiAgICBuZXh0U3RhdGVzKHN0YXRlKSB7XG4gICAgICAgIGxldCByZXN1bHQgPSBbXTtcbiAgICAgICAgZm9yIChsZXQgaSA9IHRoaXMuc3RhdGVTbG90KHN0YXRlLCAxIC8qIFBhcnNlU3RhdGUuQWN0aW9ucyAqLyk7OyBpICs9IDMpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmRhdGFbaV0gPT0gNjU1MzUgLyogU2VxLkVuZCAqLykge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLmRhdGFbaSArIDFdID09IDEgLyogU2VxLk5leHQgKi8pXG4gICAgICAgICAgICAgICAgICAgIGkgPSBwYWlyKHRoaXMuZGF0YSwgaSArIDIpO1xuICAgICAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoKHRoaXMuZGF0YVtpICsgMl0gJiAoNjU1MzYgLyogQWN0aW9uLlJlZHVjZUZsYWcgKi8gPj4gMTYpKSA9PSAwKSB7XG4gICAgICAgICAgICAgICAgbGV0IHZhbHVlID0gdGhpcy5kYXRhW2kgKyAxXTtcbiAgICAgICAgICAgICAgICBpZiAoIXJlc3VsdC5zb21lKCh2LCBpKSA9PiAoaSAmIDEpICYmIHYgPT0gdmFsdWUpKVxuICAgICAgICAgICAgICAgICAgICByZXN1bHQucHVzaCh0aGlzLmRhdGFbaV0sIHZhbHVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cbiAgICAvKipcbiAgICBDb25maWd1cmUgdGhlIHBhcnNlci4gUmV0dXJucyBhIG5ldyBwYXJzZXIgaW5zdGFuY2UgdGhhdCBoYXMgdGhlXG4gICAgZ2l2ZW4gc2V0dGluZ3MgbW9kaWZpZWQuIFNldHRpbmdzIG5vdCBwcm92aWRlZCBpbiBgY29uZmlnYCBhcmVcbiAgICBrZXB0IGZyb20gdGhlIG9yaWdpbmFsIHBhcnNlci5cbiAgICAqL1xuICAgIGNvbmZpZ3VyZShjb25maWcpIHtcbiAgICAgICAgLy8gSGlkZW91cyByZWZsZWN0aW9uLWJhc2VkIGtsdWRnZSB0byBtYWtlIGl0IGVhc3kgdG8gY3JlYXRlIGFcbiAgICAgICAgLy8gc2xpZ2h0bHkgbW9kaWZpZWQgY29weSBvZiBhIHBhcnNlci5cbiAgICAgICAgbGV0IGNvcHkgPSBPYmplY3QuYXNzaWduKE9iamVjdC5jcmVhdGUoTFJQYXJzZXIucHJvdG90eXBlKSwgdGhpcyk7XG4gICAgICAgIGlmIChjb25maWcucHJvcHMpXG4gICAgICAgICAgICBjb3B5Lm5vZGVTZXQgPSB0aGlzLm5vZGVTZXQuZXh0ZW5kKC4uLmNvbmZpZy5wcm9wcyk7XG4gICAgICAgIGlmIChjb25maWcudG9wKSB7XG4gICAgICAgICAgICBsZXQgaW5mbyA9IHRoaXMudG9wUnVsZXNbY29uZmlnLnRvcF07XG4gICAgICAgICAgICBpZiAoIWluZm8pXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoYEludmFsaWQgdG9wIHJ1bGUgbmFtZSAke2NvbmZpZy50b3B9YCk7XG4gICAgICAgICAgICBjb3B5LnRvcCA9IGluZm87XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGNvbmZpZy50b2tlbml6ZXJzKVxuICAgICAgICAgICAgY29weS50b2tlbml6ZXJzID0gdGhpcy50b2tlbml6ZXJzLm1hcCh0ID0+IHtcbiAgICAgICAgICAgICAgICBsZXQgZm91bmQgPSBjb25maWcudG9rZW5pemVycy5maW5kKHIgPT4gci5mcm9tID09IHQpO1xuICAgICAgICAgICAgICAgIHJldHVybiBmb3VuZCA/IGZvdW5kLnRvIDogdDtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICBpZiAoY29uZmlnLnNwZWNpYWxpemVycykge1xuICAgICAgICAgICAgY29weS5zcGVjaWFsaXplcnMgPSB0aGlzLnNwZWNpYWxpemVycy5zbGljZSgpO1xuICAgICAgICAgICAgY29weS5zcGVjaWFsaXplclNwZWNzID0gdGhpcy5zcGVjaWFsaXplclNwZWNzLm1hcCgocywgaSkgPT4ge1xuICAgICAgICAgICAgICAgIGxldCBmb3VuZCA9IGNvbmZpZy5zcGVjaWFsaXplcnMuZmluZChyID0+IHIuZnJvbSA9PSBzLmV4dGVybmFsKTtcbiAgICAgICAgICAgICAgICBpZiAoIWZvdW5kKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcztcbiAgICAgICAgICAgICAgICBsZXQgc3BlYyA9IE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgcyksIHsgZXh0ZXJuYWw6IGZvdW5kLnRvIH0pO1xuICAgICAgICAgICAgICAgIGNvcHkuc3BlY2lhbGl6ZXJzW2ldID0gZ2V0U3BlY2lhbGl6ZXIoc3BlYyk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHNwZWM7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoY29uZmlnLmNvbnRleHRUcmFja2VyKVxuICAgICAgICAgICAgY29weS5jb250ZXh0ID0gY29uZmlnLmNvbnRleHRUcmFja2VyO1xuICAgICAgICBpZiAoY29uZmlnLmRpYWxlY3QpXG4gICAgICAgICAgICBjb3B5LmRpYWxlY3QgPSB0aGlzLnBhcnNlRGlhbGVjdChjb25maWcuZGlhbGVjdCk7XG4gICAgICAgIGlmIChjb25maWcuc3RyaWN0ICE9IG51bGwpXG4gICAgICAgICAgICBjb3B5LnN0cmljdCA9IGNvbmZpZy5zdHJpY3Q7XG4gICAgICAgIGlmIChjb25maWcud3JhcClcbiAgICAgICAgICAgIGNvcHkud3JhcHBlcnMgPSBjb3B5LndyYXBwZXJzLmNvbmNhdChjb25maWcud3JhcCk7XG4gICAgICAgIGlmIChjb25maWcuYnVmZmVyTGVuZ3RoICE9IG51bGwpXG4gICAgICAgICAgICBjb3B5LmJ1ZmZlckxlbmd0aCA9IGNvbmZpZy5idWZmZXJMZW5ndGg7XG4gICAgICAgIHJldHVybiBjb3B5O1xuICAgIH1cbiAgICAvKipcbiAgICBUZWxscyB5b3Ugd2hldGhlciBhbnkgW3BhcnNlIHdyYXBwZXJzXSgjbHIuUGFyc2VyQ29uZmlnLndyYXApXG4gICAgYXJlIHJlZ2lzdGVyZWQgZm9yIHRoaXMgcGFyc2VyLlxuICAgICovXG4gICAgaGFzV3JhcHBlcnMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLndyYXBwZXJzLmxlbmd0aCA+IDA7XG4gICAgfVxuICAgIC8qKlxuICAgIFJldHVybnMgdGhlIG5hbWUgYXNzb2NpYXRlZCB3aXRoIGEgZ2l2ZW4gdGVybS4gVGhpcyB3aWxsIG9ubHlcbiAgICB3b3JrIGZvciBhbGwgdGVybXMgd2hlbiB0aGUgcGFyc2VyIHdhcyBnZW5lcmF0ZWQgd2l0aCB0aGVcbiAgICBgLS1uYW1lc2Agb3B0aW9uLiBCeSBkZWZhdWx0LCBvbmx5IHRoZSBuYW1lcyBvZiB0YWdnZWQgdGVybXMgYXJlXG4gICAgc3RvcmVkLlxuICAgICovXG4gICAgZ2V0TmFtZSh0ZXJtKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnRlcm1OYW1lcyA/IHRoaXMudGVybU5hbWVzW3Rlcm1dIDogU3RyaW5nKHRlcm0gPD0gdGhpcy5tYXhOb2RlICYmIHRoaXMubm9kZVNldC50eXBlc1t0ZXJtXS5uYW1lIHx8IHRlcm0pO1xuICAgIH1cbiAgICAvKipcbiAgICBUaGUgZW9mIHRlcm0gaWQgaXMgYWx3YXlzIGFsbG9jYXRlZCBkaXJlY3RseSBhZnRlciB0aGUgbm9kZVxuICAgIHR5cGVzLiBAaW50ZXJuYWxcbiAgICAqL1xuICAgIGdldCBlb2ZUZXJtKCkgeyByZXR1cm4gdGhpcy5tYXhOb2RlICsgMTsgfVxuICAgIC8qKlxuICAgIFRoZSB0eXBlIG9mIHRvcCBub2RlIHByb2R1Y2VkIGJ5IHRoZSBwYXJzZXIuXG4gICAgKi9cbiAgICBnZXQgdG9wTm9kZSgpIHsgcmV0dXJuIHRoaXMubm9kZVNldC50eXBlc1t0aGlzLnRvcFsxXV07IH1cbiAgICAvKipcbiAgICBAaW50ZXJuYWxcbiAgICAqL1xuICAgIGR5bmFtaWNQcmVjZWRlbmNlKHRlcm0pIHtcbiAgICAgICAgbGV0IHByZWMgPSB0aGlzLmR5bmFtaWNQcmVjZWRlbmNlcztcbiAgICAgICAgcmV0dXJuIHByZWMgPT0gbnVsbCA/IDAgOiBwcmVjW3Rlcm1dIHx8IDA7XG4gICAgfVxuICAgIC8qKlxuICAgIEBpbnRlcm5hbFxuICAgICovXG4gICAgcGFyc2VEaWFsZWN0KGRpYWxlY3QpIHtcbiAgICAgICAgbGV0IHZhbHVlcyA9IE9iamVjdC5rZXlzKHRoaXMuZGlhbGVjdHMpLCBmbGFncyA9IHZhbHVlcy5tYXAoKCkgPT4gZmFsc2UpO1xuICAgICAgICBpZiAoZGlhbGVjdClcbiAgICAgICAgICAgIGZvciAobGV0IHBhcnQgb2YgZGlhbGVjdC5zcGxpdChcIiBcIikpIHtcbiAgICAgICAgICAgICAgICBsZXQgaWQgPSB2YWx1ZXMuaW5kZXhPZihwYXJ0KTtcbiAgICAgICAgICAgICAgICBpZiAoaWQgPj0gMClcbiAgICAgICAgICAgICAgICAgICAgZmxhZ3NbaWRdID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgbGV0IGRpc2FibGVkID0gbnVsbDtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB2YWx1ZXMubGVuZ3RoOyBpKyspXG4gICAgICAgICAgICBpZiAoIWZsYWdzW2ldKSB7XG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaiA9IHRoaXMuZGlhbGVjdHNbdmFsdWVzW2ldXSwgaWQ7IChpZCA9IHRoaXMuZGF0YVtqKytdKSAhPSA2NTUzNSAvKiBTZXEuRW5kICovOylcbiAgICAgICAgICAgICAgICAgICAgKGRpc2FibGVkIHx8IChkaXNhYmxlZCA9IG5ldyBVaW50OEFycmF5KHRoaXMubWF4VGVybSArIDEpKSlbaWRdID0gMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBEaWFsZWN0KGRpYWxlY3QsIGZsYWdzLCBkaXNhYmxlZCk7XG4gICAgfVxuICAgIC8qKlxuICAgIFVzZWQgYnkgdGhlIG91dHB1dCBvZiB0aGUgcGFyc2VyIGdlbmVyYXRvci4gTm90IGF2YWlsYWJsZSB0b1xuICAgIHVzZXIgY29kZS4gQGhpZGVcbiAgICAqL1xuICAgIHN0YXRpYyBkZXNlcmlhbGl6ZShzcGVjKSB7XG4gICAgICAgIHJldHVybiBuZXcgTFJQYXJzZXIoc3BlYyk7XG4gICAgfVxufVxuZnVuY3Rpb24gcGFpcihkYXRhLCBvZmYpIHsgcmV0dXJuIGRhdGFbb2ZmXSB8IChkYXRhW29mZiArIDFdIDw8IDE2KTsgfVxuZnVuY3Rpb24gZmluZEZpbmlzaGVkKHN0YWNrcykge1xuICAgIGxldCBiZXN0ID0gbnVsbDtcbiAgICBmb3IgKGxldCBzdGFjayBvZiBzdGFja3MpIHtcbiAgICAgICAgbGV0IHN0b3BwZWQgPSBzdGFjay5wLnN0b3BwZWRBdDtcbiAgICAgICAgaWYgKChzdGFjay5wb3MgPT0gc3RhY2sucC5zdHJlYW0uZW5kIHx8IHN0b3BwZWQgIT0gbnVsbCAmJiBzdGFjay5wb3MgPiBzdG9wcGVkKSAmJlxuICAgICAgICAgICAgc3RhY2sucC5wYXJzZXIuc3RhdGVGbGFnKHN0YWNrLnN0YXRlLCAyIC8qIFN0YXRlRmxhZy5BY2NlcHRpbmcgKi8pICYmXG4gICAgICAgICAgICAoIWJlc3QgfHwgYmVzdC5zY29yZSA8IHN0YWNrLnNjb3JlKSlcbiAgICAgICAgICAgIGJlc3QgPSBzdGFjaztcbiAgICB9XG4gICAgcmV0dXJuIGJlc3Q7XG59XG5mdW5jdGlvbiBnZXRTcGVjaWFsaXplcihzcGVjKSB7XG4gICAgaWYgKHNwZWMuZXh0ZXJuYWwpIHtcbiAgICAgICAgbGV0IG1hc2sgPSBzcGVjLmV4dGVuZCA/IDEgLyogU3BlY2lhbGl6ZS5FeHRlbmQgKi8gOiAwIC8qIFNwZWNpYWxpemUuU3BlY2lhbGl6ZSAqLztcbiAgICAgICAgcmV0dXJuICh2YWx1ZSwgc3RhY2spID0+IChzcGVjLmV4dGVybmFsKHZhbHVlLCBzdGFjaykgPDwgMSkgfCBtYXNrO1xuICAgIH1cbiAgICByZXR1cm4gc3BlYy5nZXQ7XG59XG5cbmV4cG9ydCB7IENvbnRleHRUcmFja2VyLCBFeHRlcm5hbFRva2VuaXplciwgSW5wdXRTdHJlYW0sIExSUGFyc2VyLCBMb2NhbFRva2VuR3JvdXAsIFN0YWNrIH07XG4iLAogICAgImltcG9ydCB7IENvbnRleHRUcmFja2VyLCBFeHRlcm5hbFRva2VuaXplciwgTFJQYXJzZXIsIExvY2FsVG9rZW5Hcm91cCB9IGZyb20gJ0BsZXplci9scic7XG5pbXBvcnQgeyBzdHlsZVRhZ3MsIHRhZ3MgfSBmcm9tICdAbGV6ZXIvaGlnaGxpZ2h0JztcblxuLy8gVGhpcyBmaWxlIHdhcyBnZW5lcmF0ZWQgYnkgbGV6ZXItZ2VuZXJhdG9yLiBZb3UgcHJvYmFibHkgc2hvdWxkbid0IGVkaXQgaXQuXG5jb25zdCBub1NlbWkgPSAzMTYsXG4gIG5vU2VtaVR5cGUgPSAzMTcsXG4gIGluY2RlYyA9IDEsXG4gIGluY2RlY1ByZWZpeCA9IDIsXG4gIHF1ZXN0aW9uRG90ID0gMyxcbiAgSlNYU3RhcnRUYWcgPSA0LFxuICBpbnNlcnRTZW1pID0gMzE4LFxuICBzcGFjZXMgPSAzMjAsXG4gIG5ld2xpbmUgPSAzMjEsXG4gIExpbmVDb21tZW50ID0gNSxcbiAgQmxvY2tDb21tZW50ID0gNixcbiAgRGlhbGVjdF9qc3ggPSAwO1xuXG4vKiBIYW5kLXdyaXR0ZW4gdG9rZW5pemVycyBmb3IgSmF2YVNjcmlwdCB0b2tlbnMgdGhhdCBjYW4ndCBiZVxuICAgZXhwcmVzc2VkIGJ5IGxlemVyJ3MgYnVpbHQtaW4gdG9rZW5pemVyLiAqL1xuXG5jb25zdCBzcGFjZSA9IFs5LCAxMCwgMTEsIDEyLCAxMywgMzIsIDEzMywgMTYwLCA1NzYwLCA4MTkyLCA4MTkzLCA4MTk0LCA4MTk1LCA4MTk2LCA4MTk3LCA4MTk4LCA4MTk5LCA4MjAwLFxuICAgICAgICAgICAgICAgODIwMSwgODIwMiwgODIzMiwgODIzMywgODIzOSwgODI4NywgMTIyODhdO1xuXG5jb25zdCBicmFjZVIgPSAxMjUsIHNlbWljb2xvbiA9IDU5LCBzbGFzaCA9IDQ3LCBzdGFyID0gNDIsIHBsdXMgPSA0MywgbWludXMgPSA0NSwgbHQgPSA2MCwgY29tbWEgPSA0NCxcbiAgICAgIHF1ZXN0aW9uID0gNjMsIGRvdCA9IDQ2LCBicmFja2V0TCA9IDkxO1xuXG5jb25zdCB0cmFja05ld2xpbmUgPSBuZXcgQ29udGV4dFRyYWNrZXIoe1xuICBzdGFydDogZmFsc2UsXG4gIHNoaWZ0KGNvbnRleHQsIHRlcm0pIHtcbiAgICByZXR1cm4gdGVybSA9PSBMaW5lQ29tbWVudCB8fCB0ZXJtID09IEJsb2NrQ29tbWVudCB8fCB0ZXJtID09IHNwYWNlcyA/IGNvbnRleHQgOiB0ZXJtID09IG5ld2xpbmVcbiAgfSxcbiAgc3RyaWN0OiBmYWxzZVxufSk7XG5cbmNvbnN0IGluc2VydFNlbWljb2xvbiA9IG5ldyBFeHRlcm5hbFRva2VuaXplcigoaW5wdXQsIHN0YWNrKSA9PiB7XG4gIGxldCB7bmV4dH0gPSBpbnB1dDtcbiAgaWYgKG5leHQgPT0gYnJhY2VSIHx8IG5leHQgPT0gLTEgfHwgc3RhY2suY29udGV4dClcbiAgICBpbnB1dC5hY2NlcHRUb2tlbihpbnNlcnRTZW1pKTtcbn0sIHtjb250ZXh0dWFsOiB0cnVlLCBmYWxsYmFjazogdHJ1ZX0pO1xuXG5jb25zdCBub1NlbWljb2xvbiA9IG5ldyBFeHRlcm5hbFRva2VuaXplcigoaW5wdXQsIHN0YWNrKSA9PiB7XG4gIGxldCB7bmV4dH0gPSBpbnB1dCwgYWZ0ZXI7XG4gIGlmIChzcGFjZS5pbmRleE9mKG5leHQpID4gLTEpIHJldHVyblxuICBpZiAobmV4dCA9PSBzbGFzaCAmJiAoKGFmdGVyID0gaW5wdXQucGVlaygxKSkgPT0gc2xhc2ggfHwgYWZ0ZXIgPT0gc3RhcikpIHJldHVyblxuICBpZiAobmV4dCAhPSBicmFjZVIgJiYgbmV4dCAhPSBzZW1pY29sb24gJiYgbmV4dCAhPSAtMSAmJiAhc3RhY2suY29udGV4dClcbiAgICBpbnB1dC5hY2NlcHRUb2tlbihub1NlbWkpO1xufSwge2NvbnRleHR1YWw6IHRydWV9KTtcblxuY29uc3Qgbm9TZW1pY29sb25UeXBlID0gbmV3IEV4dGVybmFsVG9rZW5pemVyKChpbnB1dCwgc3RhY2spID0+IHtcbiAgaWYgKGlucHV0Lm5leHQgPT0gYnJhY2tldEwgJiYgIXN0YWNrLmNvbnRleHQpIGlucHV0LmFjY2VwdFRva2VuKG5vU2VtaVR5cGUpO1xufSwge2NvbnRleHR1YWw6IHRydWV9KTtcblxuY29uc3Qgb3BlcmF0b3JUb2tlbiA9IG5ldyBFeHRlcm5hbFRva2VuaXplcigoaW5wdXQsIHN0YWNrKSA9PiB7XG4gIGxldCB7bmV4dH0gPSBpbnB1dDtcbiAgaWYgKG5leHQgPT0gcGx1cyB8fCBuZXh0ID09IG1pbnVzKSB7XG4gICAgaW5wdXQuYWR2YW5jZSgpO1xuICAgIGlmIChuZXh0ID09IGlucHV0Lm5leHQpIHtcbiAgICAgIGlucHV0LmFkdmFuY2UoKTtcbiAgICAgIGxldCBtYXlQb3N0Zml4ID0gIXN0YWNrLmNvbnRleHQgJiYgc3RhY2suY2FuU2hpZnQoaW5jZGVjKTtcbiAgICAgIGlucHV0LmFjY2VwdFRva2VuKG1heVBvc3RmaXggPyBpbmNkZWMgOiBpbmNkZWNQcmVmaXgpO1xuICAgIH1cbiAgfSBlbHNlIGlmIChuZXh0ID09IHF1ZXN0aW9uICYmIGlucHV0LnBlZWsoMSkgPT0gZG90KSB7XG4gICAgaW5wdXQuYWR2YW5jZSgpOyBpbnB1dC5hZHZhbmNlKCk7XG4gICAgaWYgKGlucHV0Lm5leHQgPCA0OCB8fCBpbnB1dC5uZXh0ID4gNTcpIC8vIE5vIGRpZ2l0IGFmdGVyXG4gICAgICBpbnB1dC5hY2NlcHRUb2tlbihxdWVzdGlvbkRvdCk7XG4gIH1cbn0sIHtjb250ZXh0dWFsOiB0cnVlfSk7XG5cbmZ1bmN0aW9uIGlkZW50aWZpZXJDaGFyKGNoLCBzdGFydCkge1xuICByZXR1cm4gY2ggPj0gNjUgJiYgY2ggPD0gOTAgfHwgY2ggPj0gOTcgJiYgY2ggPD0gMTIyIHx8IGNoID09IDk1IHx8IGNoID49IDE5MiB8fFxuICAgICFzdGFydCAmJiBjaCA+PSA0OCAmJiBjaCA8PSA1N1xufVxuXG5jb25zdCBqc3ggPSBuZXcgRXh0ZXJuYWxUb2tlbml6ZXIoKGlucHV0LCBzdGFjaykgPT4ge1xuICBpZiAoaW5wdXQubmV4dCAhPSBsdCB8fCAhc3RhY2suZGlhbGVjdEVuYWJsZWQoRGlhbGVjdF9qc3gpKSByZXR1cm5cbiAgaW5wdXQuYWR2YW5jZSgpO1xuICBpZiAoaW5wdXQubmV4dCA9PSBzbGFzaCkgcmV0dXJuXG4gIC8vIFNjYW4gZm9yIGFuIGlkZW50aWZpZXIgZm9sbG93ZWQgYnkgYSBjb21tYSBvciAnZXh0ZW5kcycsIGRvbid0XG4gIC8vIHRyZWF0IHRoaXMgYXMgYSBzdGFydCB0YWcgaWYgcHJlc2VudC5cbiAgbGV0IGJhY2sgPSAwO1xuICB3aGlsZSAoc3BhY2UuaW5kZXhPZihpbnB1dC5uZXh0KSA+IC0xKSB7IGlucHV0LmFkdmFuY2UoKTsgYmFjaysrOyB9XG4gIGlmIChpZGVudGlmaWVyQ2hhcihpbnB1dC5uZXh0LCB0cnVlKSkge1xuICAgIGlucHV0LmFkdmFuY2UoKTtcbiAgICBiYWNrKys7XG4gICAgd2hpbGUgKGlkZW50aWZpZXJDaGFyKGlucHV0Lm5leHQsIGZhbHNlKSkgeyBpbnB1dC5hZHZhbmNlKCk7IGJhY2srKzsgfVxuICAgIHdoaWxlIChzcGFjZS5pbmRleE9mKGlucHV0Lm5leHQpID4gLTEpIHsgaW5wdXQuYWR2YW5jZSgpOyBiYWNrKys7IH1cbiAgICBpZiAoaW5wdXQubmV4dCA9PSBjb21tYSkgcmV0dXJuXG4gICAgZm9yIChsZXQgaSA9IDA7OyBpKyspIHtcbiAgICAgIGlmIChpID09IDcpIHtcbiAgICAgICAgaWYgKCFpZGVudGlmaWVyQ2hhcihpbnB1dC5uZXh0LCB0cnVlKSkgcmV0dXJuXG4gICAgICAgIGJyZWFrXG4gICAgICB9XG4gICAgICBpZiAoaW5wdXQubmV4dCAhPSBcImV4dGVuZHNcIi5jaGFyQ29kZUF0KGkpKSBicmVha1xuICAgICAgaW5wdXQuYWR2YW5jZSgpO1xuICAgICAgYmFjaysrO1xuICAgIH1cbiAgfVxuICBpbnB1dC5hY2NlcHRUb2tlbihKU1hTdGFydFRhZywgLWJhY2spO1xufSk7XG5cbmNvbnN0IGpzSGlnaGxpZ2h0ID0gc3R5bGVUYWdzKHtcbiAgXCJnZXQgc2V0IGFzeW5jIHN0YXRpY1wiOiB0YWdzLm1vZGlmaWVyLFxuICBcImZvciB3aGlsZSBkbyBpZiBlbHNlIHN3aXRjaCB0cnkgY2F0Y2ggZmluYWxseSByZXR1cm4gdGhyb3cgYnJlYWsgY29udGludWUgZGVmYXVsdCBjYXNlIGRlZmVyXCI6IHRhZ3MuY29udHJvbEtleXdvcmQsXG4gIFwiaW4gb2YgYXdhaXQgeWllbGQgdm9pZCB0eXBlb2YgZGVsZXRlIGluc3RhbmNlb2YgYXMgc2F0aXNmaWVzXCI6IHRhZ3Mub3BlcmF0b3JLZXl3b3JkLFxuICBcImxldCB2YXIgY29uc3QgdXNpbmcgZnVuY3Rpb24gY2xhc3MgZXh0ZW5kc1wiOiB0YWdzLmRlZmluaXRpb25LZXl3b3JkLFxuICBcImltcG9ydCBleHBvcnQgZnJvbVwiOiB0YWdzLm1vZHVsZUtleXdvcmQsXG4gIFwid2l0aCBkZWJ1Z2dlciBuZXdcIjogdGFncy5rZXl3b3JkLFxuICBUZW1wbGF0ZVN0cmluZzogdGFncy5zcGVjaWFsKHRhZ3Muc3RyaW5nKSxcbiAgc3VwZXI6IHRhZ3MuYXRvbSxcbiAgQm9vbGVhbkxpdGVyYWw6IHRhZ3MuYm9vbCxcbiAgdGhpczogdGFncy5zZWxmLFxuICBudWxsOiB0YWdzLm51bGwsXG4gIFN0YXI6IHRhZ3MubW9kaWZpZXIsXG4gIFZhcmlhYmxlTmFtZTogdGFncy52YXJpYWJsZU5hbWUsXG4gIFwiQ2FsbEV4cHJlc3Npb24vVmFyaWFibGVOYW1lIFRhZ2dlZFRlbXBsYXRlRXhwcmVzc2lvbi9WYXJpYWJsZU5hbWVcIjogdGFncy5mdW5jdGlvbih0YWdzLnZhcmlhYmxlTmFtZSksXG4gIFZhcmlhYmxlRGVmaW5pdGlvbjogdGFncy5kZWZpbml0aW9uKHRhZ3MudmFyaWFibGVOYW1lKSxcbiAgTGFiZWw6IHRhZ3MubGFiZWxOYW1lLFxuICBQcm9wZXJ0eU5hbWU6IHRhZ3MucHJvcGVydHlOYW1lLFxuICBQcml2YXRlUHJvcGVydHlOYW1lOiB0YWdzLnNwZWNpYWwodGFncy5wcm9wZXJ0eU5hbWUpLFxuICBcIkNhbGxFeHByZXNzaW9uL01lbWJlckV4cHJlc3Npb24vUHJvcGVydHlOYW1lXCI6IHRhZ3MuZnVuY3Rpb24odGFncy5wcm9wZXJ0eU5hbWUpLFxuICBcIkZ1bmN0aW9uRGVjbGFyYXRpb24vVmFyaWFibGVEZWZpbml0aW9uXCI6IHRhZ3MuZnVuY3Rpb24odGFncy5kZWZpbml0aW9uKHRhZ3MudmFyaWFibGVOYW1lKSksXG4gIFwiQ2xhc3NEZWNsYXJhdGlvbi9WYXJpYWJsZURlZmluaXRpb25cIjogdGFncy5kZWZpbml0aW9uKHRhZ3MuY2xhc3NOYW1lKSxcbiAgXCJOZXdFeHByZXNzaW9uL1ZhcmlhYmxlTmFtZVwiOiB0YWdzLmNsYXNzTmFtZSxcbiAgUHJvcGVydHlEZWZpbml0aW9uOiB0YWdzLmRlZmluaXRpb24odGFncy5wcm9wZXJ0eU5hbWUpLFxuICBQcml2YXRlUHJvcGVydHlEZWZpbml0aW9uOiB0YWdzLmRlZmluaXRpb24odGFncy5zcGVjaWFsKHRhZ3MucHJvcGVydHlOYW1lKSksXG4gIFVwZGF0ZU9wOiB0YWdzLnVwZGF0ZU9wZXJhdG9yLFxuICBcIkxpbmVDb21tZW50IEhhc2hiYW5nXCI6IHRhZ3MubGluZUNvbW1lbnQsXG4gIEJsb2NrQ29tbWVudDogdGFncy5ibG9ja0NvbW1lbnQsXG4gIE51bWJlcjogdGFncy5udW1iZXIsXG4gIFN0cmluZzogdGFncy5zdHJpbmcsXG4gIEVzY2FwZTogdGFncy5lc2NhcGUsXG4gIEFyaXRoT3A6IHRhZ3MuYXJpdGhtZXRpY09wZXJhdG9yLFxuICBMb2dpY09wOiB0YWdzLmxvZ2ljT3BlcmF0b3IsXG4gIEJpdE9wOiB0YWdzLmJpdHdpc2VPcGVyYXRvcixcbiAgQ29tcGFyZU9wOiB0YWdzLmNvbXBhcmVPcGVyYXRvcixcbiAgUmVnRXhwOiB0YWdzLnJlZ2V4cCxcbiAgRXF1YWxzOiB0YWdzLmRlZmluaXRpb25PcGVyYXRvcixcbiAgQXJyb3c6IHRhZ3MuZnVuY3Rpb24odGFncy5wdW5jdHVhdGlvbiksXG4gIFwiOiBTcHJlYWRcIjogdGFncy5wdW5jdHVhdGlvbixcbiAgXCIoIClcIjogdGFncy5wYXJlbixcbiAgXCJbIF1cIjogdGFncy5zcXVhcmVCcmFja2V0LFxuICBcInsgfVwiOiB0YWdzLmJyYWNlLFxuICBcIkludGVycG9sYXRpb25TdGFydCBJbnRlcnBvbGF0aW9uRW5kXCI6IHRhZ3Muc3BlY2lhbCh0YWdzLmJyYWNlKSxcbiAgXCIuXCI6IHRhZ3MuZGVyZWZPcGVyYXRvcixcbiAgXCIsIDtcIjogdGFncy5zZXBhcmF0b3IsXG4gIFwiQFwiOiB0YWdzLm1ldGEsXG5cbiAgVHlwZU5hbWU6IHRhZ3MudHlwZU5hbWUsXG4gIFR5cGVEZWZpbml0aW9uOiB0YWdzLmRlZmluaXRpb24odGFncy50eXBlTmFtZSksXG4gIFwidHlwZSBlbnVtIGludGVyZmFjZSBpbXBsZW1lbnRzIG5hbWVzcGFjZSBtb2R1bGUgZGVjbGFyZVwiOiB0YWdzLmRlZmluaXRpb25LZXl3b3JkLFxuICBcImFic3RyYWN0IGdsb2JhbCBQcml2YWN5IHJlYWRvbmx5IG92ZXJyaWRlXCI6IHRhZ3MubW9kaWZpZXIsXG4gIFwiaXMga2V5b2YgdW5pcXVlIGluZmVyIGFzc2VydHNcIjogdGFncy5vcGVyYXRvcktleXdvcmQsXG5cbiAgSlNYQXR0cmlidXRlVmFsdWU6IHRhZ3MuYXR0cmlidXRlVmFsdWUsXG4gIEpTWFRleHQ6IHRhZ3MuY29udGVudCxcbiAgXCJKU1hTdGFydFRhZyBKU1hTdGFydENsb3NlVGFnIEpTWFNlbGZDbG9zZUVuZFRhZyBKU1hFbmRUYWdcIjogdGFncy5hbmdsZUJyYWNrZXQsXG4gIFwiSlNYSWRlbnRpZmllciBKU1hOYW1lU3BhY2VkTmFtZVwiOiB0YWdzLnRhZ05hbWUsXG4gIFwiSlNYQXR0cmlidXRlL0pTWElkZW50aWZpZXIgSlNYQXR0cmlidXRlL0pTWE5hbWVTcGFjZWROYW1lXCI6IHRhZ3MuYXR0cmlidXRlTmFtZSxcbiAgXCJKU1hCdWlsdGluL0pTWElkZW50aWZpZXJcIjogdGFncy5zdGFuZGFyZCh0YWdzLnRhZ05hbWUpXG59KTtcblxuLy8gVGhpcyBmaWxlIHdhcyBnZW5lcmF0ZWQgYnkgbGV6ZXItZ2VuZXJhdG9yLiBZb3UgcHJvYmFibHkgc2hvdWxkbid0IGVkaXQgaXQuXG5jb25zdCBzcGVjX2lkZW50aWZpZXIgPSB7X19wcm90b19fOm51bGwsZXhwb3J0OjIwLCBhczoyNSwgZnJvbTozMywgZGVmYXVsdDozNiwgYXN5bmM6NDEsIGZ1bmN0aW9uOjQyLCBpbjo1Miwgb3V0OjU1LCBjb25zdDo1NiwgZXh0ZW5kczo2MCwgdGhpczo2NCwgdHJ1ZTo3MiwgZmFsc2U6NzIsIG51bGw6ODQsIHZvaWQ6ODgsIHR5cGVvZjo5Miwgc3VwZXI6MTA4LCBuZXc6MTQyLCBkZWxldGU6MTU0LCB5aWVsZDoxNjMsIGF3YWl0OjE2NywgY2xhc3M6MTcyLCBwdWJsaWM6MjM1LCBwcml2YXRlOjIzNSwgcHJvdGVjdGVkOjIzNSwgcmVhZG9ubHk6MjM3LCBpbnN0YW5jZW9mOjI1Niwgc2F0aXNmaWVzOjI1OSwgaW1wb3J0OjI5Miwga2V5b2Y6MzQ5LCB1bmlxdWU6MzUzLCBpbmZlcjozNTksIGFzc2VydHM6Mzk1LCBpczozOTcsIGFic3RyYWN0OjQxNywgaW1wbGVtZW50czo0MTksIHR5cGU6NDIxLCBsZXQ6NDI0LCB2YXI6NDI2LCB1c2luZzo0MjksIGludGVyZmFjZTo0MzUsIGVudW06NDM5LCBuYW1lc3BhY2U6NDQ1LCBtb2R1bGU6NDQ3LCBkZWNsYXJlOjQ1MSwgZ2xvYmFsOjQ1NSwgZGVmZXI6NDcxLCBmb3I6NDc2LCBvZjo0ODUsIHdoaWxlOjQ4OCwgd2l0aDo0OTIsIGRvOjQ5NiwgaWY6NTAwLCBlbHNlOjUwMiwgc3dpdGNoOjUwNiwgY2FzZTo1MTIsIHRyeTo1MTgsIGNhdGNoOjUyMiwgZmluYWxseTo1MjYsIHJldHVybjo1MzAsIHRocm93OjUzNCwgYnJlYWs6NTM4LCBjb250aW51ZTo1NDIsIGRlYnVnZ2VyOjU0Nn07XG5jb25zdCBzcGVjX3dvcmQgPSB7X19wcm90b19fOm51bGwsYXN5bmM6MTI5LCBnZXQ6MTMxLCBzZXQ6MTMzLCBkZWNsYXJlOjE5NSwgcHVibGljOjE5NywgcHJpdmF0ZToxOTcsIHByb3RlY3RlZDoxOTcsIHN0YXRpYzoxOTksIGFic3RyYWN0OjIwMSwgb3ZlcnJpZGU6MjAzLCByZWFkb25seToyMDksIGFjY2Vzc29yOjIxMSwgbmV3OjQwMX07XG5jb25zdCBzcGVjX0xlc3NUaGFuID0ge19fcHJvdG9fXzpudWxsLFwiPFwiOjE5M307XG5jb25zdCBwYXJzZXIgPSBMUlBhcnNlci5kZXNlcmlhbGl6ZSh7XG4gIHZlcnNpb246IDE0LFxuICBzdGF0ZXM6IFwiJEZ8USVUUWxPT08lW1FsT09PJ19RcE9PUChsT2BPT08qelEhME14TycjQ2lPK1JPI3RPJyNDak8rYU8mak8nI0NqTytvTyNASXRPJyNEYU8uUVFsTycjRGdPLmJRbE8nI0RyTyVbUWxPJyNEek8wZlFsTycjRVNPT1EhMExmJyNFWycjRVtPMVBRYE8nI0VYT09RTycjRXAnI0VwT09RTycjSWwnI0lsTzFYUWBPJyNHc08xZFFgTycjRW9PMWlRYE8nI0VvTzNoUSEwTXhPJyNKck82W1EhME14TycjSnNPNnVRYE8nI0ZdTzZ6USxVTycjRnRPT1EhMExmJyNGZicjRmZPN1ZPN2RPJyNGZk85WFFNaE8nI0Z8TzlgUWBPJyNGe09PUSEwTGYnI0pzJyNKc09PUSEwTGInI0pyJyNKck85ZVFgTycjR3dPT1FbJyNLXycjS19POXBRYE8nI0lZTzl1USEwTHJPJyNJWk9PUVsnI0pgJyNKYE9PUVsnI0lfJyNJX1FgUWxPT1FgUWxPT085fVEhTF5PJyNEdk86VVFsTycjRU9POl1RbE8nI0VRTzlrUWBPJyNHc086ZFFNaE8nI0NvTzpyUWBPJyNFbk86fVFgTycjRXlPO2hRTWhPJyNGZU87eFFgTycjR3NPT1FPJyNLYCcjS2BPO31RYE8nI0tgTzxdUWBPJyNHe088XVFgTycjR3xPPF1RYE8nI0hPTzlrUWBPJyNIUk89U1FgTycjSFVPPmtRYE8nI0NlTz57UWBPJyNIY08/VFFgTycjSGlPP1RRYE8nI0hrT2BRbE8nI0htTz9UUWBPJyNIb08/VFFgTycjSHJPP1lRYE8nI0h4Tz9fUSEwTHNPJyNJT08lW1FsTycjSVFPP2pRITBMc08nI0lTTz91USEwTHNPJyNJVU85dVEhMExyTycjSVdPQFFRITBNeE8nI0NpT0FTUXBPJyNEbFFPUWBPT08lW1FsTycjRVFPQWpRYE8nI0VUTzpkUU1oTycjRW5PQXVRYE8nI0VuT0JRUSFiTycjRmVPT1FbJyNDZycjQ2dPT1EhMExiJyNEcScjRHFPT1EhMExiJyNKdicjSnZPJVtRbE8nI0p2T09RTycjSnknI0p5T09RTycjSWgnI0loT0NRUXBPJyNFZ09PUSEwTGInI0VmJyNFZk9PUSEwTGInI0p9JyNKfU9DfFEhME1TTycjRWdPRFdRcE8nI0VXT09RTycjSngnI0p4T0RsUXBPJyNKeU9FeVFwTycjRVdPRFdRcE8nI0VnUEZXTyYyRGpPJyNDYlBPT08pQ0R9KUNEfU9PT08nI0lgJyNJYE9GY08jdE8sNTlVT09RITBMaCw1OVUsNTlVT09PTycjSWEnI0lhT0ZxTyZqTyw1OVVPR1BRIUxeTycjRGNPT09PJyNJYycjSWNPR1dPI0BJdE8sNTl7T09RITBMZiw1OXssNTl7T0dmUWxPJyNJZE9HeVFgTycjSnRPSXhRIWZPJyNKdE8rfVFsTycjSnRPSlBRYE8sNTpST0pnUWBPJyNFcE9KdFFgTycjS1RPS1BRYE8nI0tTT0tQUWBPJyNLU09LWFFgTyw1O15PS15RYE8nI0tST09RITBMbiw1Ol4sNTpeT0tlUWxPLDU6Xk9NY1EhME14Tyw1OmZPTlNRYE8sNTpuT05tUSEwTHJPJyNLUU9OdFFgTycjS1BPOWVRYE8nI0tQTyEgWVFgTycjS1BPISBiUWBPLDU7XU8hIGdRYE8nI0tQTyEjbFEhZk8nI0pzT09RITBMaCcjQ2knI0NpTyVbUWxPJyNFU08hJFtRIWZPLDU6c09PUVMnI0p6JyNKek9PUU8tRTxqLUU8ak85a1FgTyw1PV9PISRyUWBPLDU9X08hJHdRbE8sNTtaTyEmelFNaE8nI0VrTyEoZVFgTyw1O1pPIShqUWxPJyNEeU8hKHRRcE8sNTtkTyEofFFwTyw1O2RPJVtRbE8sNTtkT09RWycjRlQnI0ZUT09RWycjRlYnI0ZWTyVbUWxPLDU7ZU8lW1FsTyw1O2VPJVtRbE8sNTtlTyVbUWxPLDU7ZU8lW1FsTyw1O2VPJVtRbE8sNTtlTyVbUWxPLDU7ZU8lW1FsTyw1O2VPJVtRbE8sNTtlTyVbUWxPLDU7ZU9PUVsnI0ZaJyNGWk8hKVtRbE8sNTt0T09RITBMZiw1O3ksNTt5T09RITBMZiw1O3osNTt6T09RITBMZiw1O3wsNTt8TyVbUWxPJyNJcE8hK19RITBMck8sNTxpTyVbUWxPLDU7ZU8hJnpRTWhPLDU7ZU8hK3xRTWhPLDU7ZU8hLW5RTWhPJyNFXk8lW1FsTyw1O3dPT1EhMExmLDU7eyw1O3tPIS11USxVTycjRmpPIS5yUSxVTycjS1hPIS5eUSxVTycjS1hPIS55USxVTycjS1hPT1FPJyNLWCcjS1hPIS9fUSxVTyw1PFNPT09XLDU8YCw1PGBPIS9wUWxPJyNGdk9PT1cnI0lvJyNJb083Vk83ZE8sNTxRTyEvd1EsVU8nI0Z4T09RITBMZiw1PFEsNTxRTyEwaFEkSVVPJyNDeU9PUSEwTGgnI0N9JyNDfU8hMHtPI0BJdE8nI0RSTyExaVFNak8sNTxlTyExcFFgTyw1PGhPITNZUShDV08nI0dYTyEzalFgTycjR1lPITNvUWBPJyNHWU8hNV9RKENXTycjR15PITZkUXBPJyNHYk9PUU8nI0duJyNHbk8hLFRRTWhPJyNHbU9PUU8nI0dwJyNHcE8hLFRRTWhPJyNHb08hN1ZRJElVTycjSmxPT1EhMExoJyNKbCcjSmxPITdhUWBPJyNKa08hN29RYE8nI0pqTyE3d1FgTycjQ3VPT1EhMExoJyNDeycjQ3tPIThZUWBPJyNDfU9PUSEwTGgnI0RWJyNEVk9PUSEwTGgnI0RYJyNEWE8hOF9RYE8sNTxlTzFTUWBPJyNEWk8hLFRRTWhPJyNHUE8hLFRRTWhPJyNHUk8hOGdRYE8nI0dUTyE4bFFgTycjR1VPITNvUWBPJyNHW08hLFRRTWhPJyNHYU88XVFgTycjSmtPIThxUWBPJyNFcU8hOWBRYE8sNTxnT09RITBMYicjQ3InI0NyTyE5aFFgTycjRXJPITpiUXBPJyNFc09PUSEwTGInI0tSJyNLUk8hOmlRITBMck8nI0thTzl1USEwTHJPLDU9Y09gUWxPLDU+dE9PUVsnI0poJyNKaE9PUVssNT51LDU+dU9PUVstRTxdLUU8XU8hPGhRITBNeE8sNTpiTyE6XVFwTyw1OmBPIT9SUSEwTXhPLDU6ak8lW1FsTyw1OmpPIUFpUSEwTXhPLDU6bE9PUU8sNUB6LDVAek8hQllRTWhPLDU9X08hQmhRITBMck8nI0ppTzlgUWBPJyNKaU8hQnlRITBMck8sNTlaTyFDVVFwTyw1OVpPIUNeUU1oTyw1OVpPOmRRTWhPLDU5Wk8hQ2lRYE8sNTtaTyFDcVFgTycjSGJPIURWUWBPJyNLZE8lW1FsTyw1O31PITpdUXBPLDU8UE8hRF9RYE8sNT16TyFEZFFgTyw1PXpPIURpUWBPLDU9ek8hRHdRYE8sNT16Tzl1USEwTHJPLDU9ek88XVFgTyw1PWpPT1FPJyNDeScjQ3lPIUVPUXBPLDU9Z08hRVdRTWhPLDU9aE8hRWNRYE8sNT1qTyFFaFEhYk8sNT1tTyFFcFFgTycjS2BPP1lRYE8nI0hXTzlrUWBPJyNIWU8hRXVRYE8nI0hZTzpkUU1oTycjSFtPIUV6UWBPJyNIW09PUVssNT1wLDU9cE8hRlBRYE8nI0hdTyFGYlFgTycjQ29PIUZnUWBPLDU5UE8hRnFRYE8sNTlQTyFIdlFsTyw1OVBPT1FbLDU5UCw1OVBPIUlXUSEwTHJPLDU5UE8lW1FsTyw1OVBPIUtjUWxPJyNIZU9PUVsnI0hmJyNIZk9PUVsnI0hnJyNIZ09gUWxPLDU9fU8hS3lRYE8sNT19T2BRbE8sNT5UT2BRbE8sNT5WTyFMT1FgTyw1PlhPYFFsTyw1PlpPIUxUUWBPLDU+Xk8hTFlRbE8sNT5kT09RWyw1PmosNT5qTyVbUWxPLDU+ak85dVEhMExyTyw1PmxPT1FbLDU+biw1Pm5PIyFkUWBPLDU+bk9PUVssNT5wLDU+cE8jIWRRYE8sNT5wT09RWyw1PnIsNT5yTyMjUVFwTycjRF9PJVtRbE8nI0p2TyMjc1FwTycjSnZPIyN9UXBPJyNEbU8jJGBRcE8nI0RtTyMmcVFsTycjRG1PIyZ4UWBPJyNKdU8jJ1FRYE8sNTpXTyMnVlFgTycjRXRPIydlUWBPJyNLVU8jJ21RYE8sNTtfTyMnclFwTycjRG1PIyhQUXBPJyNFVk9PUSEwTGYsNTpvLDU6b08lW1FsTyw1Om9PIyhXUWBPLDU6b08/WVFgTyw1O1lPIUNVUXBPLDU7WU8hQ15RTWhPLDU7WU86ZFFNaE8sNTtZTyMoYFFgTyw1QGJPIyhlUTA3ZE8sNTpzT09RTy1FPGYtRTxmTyMpa1EhME1TTyw1O1JPRFdRcE8sNTpyTyMpdVFwTyw1OnJPRFdRcE8sNTtSTyFCeVEhMExyTyw1OnJPT1EhMExiJyNFaicjRWpPT1FPLDU7Uiw1O1JPJVtRbE8sNTtSTyMqU1EhMExyTyw1O1JPIypfUSEwTHJPLDU7Uk8hQ1VRcE8sNTpyT09RTyw1O1gsNTtYTyMqbVEhMExyTyw1O1JQT09PJyNJXicjSV5QIytSTyYyRGpPLDU4fFBPT08sNTh8LDU4fE9PT08tRTxeLUU8Xk9PUSEwTGgxRy5wMUcucE9PT08tRTxfLUU8X09PT08sNTl9LDU5fU8jK15RIWJPLDU5fU9PT08tRTxhLUU8YU9PUSEwTGYxRy9nMUcvZ08jK2NRIWZPLDU/T08rfVFsTyw1P09PT1FPLDU/VSw1P1VPIyttUWxPJyNJZE9PUU8tRTxiLUU8Yk8jK3pRYE8sNUBgTyMsU1EhZk8sNUBgTyMsWlFgTyw1QG5PT1EhMExmMUcvbTFHL21PJVtRbE8sNUBvTyMsY1FgTycjSWpPT1FPLUU8aC1FPGhPIyxaUWBPLDVAbk9PUSEwTGIxRzB4MUcweE9PUSEwTG4xRy94MUcveE9PUSEwTG4xRzBZMUcwWU8lW1FsTyw1QGxPIyx3USEwTHJPLDVAbE8jLVlRITBMck8sNUBsTyMtYVFgTyw1QGtPOWVRYE8sNUBrTyMtaVFgTyw1QGtPIy13UWBPJyNJbU8jLWFRYE8sNUBrT09RITBMYjFHMHcxRzB3TyEodFFwTyw1OnVPISlQUXBPLDU6dU9PUVMsNTp3LDU6d08jLmlRZE8sNTp3TyMucVFNaE8xRzJ5TzlrUWBPMUcyeU9PUSEwTGYxRzB1MUcwdU8jL1BRITBNeE8xRzB1TyMwVVEhME12Tyw1O1ZPT1EhMExoJyNHVycjR1dPIzByUSEwTXpPJyNKbE8hJHdRbE8xRzB1TyMyfVEhZk8nI0p3TyVbUWxPJyNKd08jM1hRYE8sNTplT09RITBMaCcjRF8nI0RfT09RITBMZjFHMU8xRzFPTyVbUWxPMUcxT09PUSEwTGYxRzFmMUcxZk8jM15RYE8xRzFPTyM1clEhME14TzFHMVBPIzV5USEwTXhPMUcxUE8jOGFRITBNeE8xRzFQTyM4aFEhME14TzFHMVBPIztPUSEwTXhPMUcxUE8jPWZRITBNeE8xRzFQTyM9bVEhME14TzFHMVBPIz10USEwTXhPMUcxUE8jQFtRITBNeE8xRzFQTyNAY1EhME14TzFHMVBPI0JwUT9NdE8nI0NpTyNEa1E/TXRPMUcxYE8jRHJRP010TycjSnNPI0VWUSEwTXhPLDU/W09PUSEwTGItRTxuLUU8bk8jR2RRITBNeE8xRzFQTyNIYVEhME16TzFHMVBPT1EhMExmMUcxUDFHMVBPI0lkUU1qTycjSnxPI0luUWBPLDU6eE8jSXNRITBNeE8xRzFjTyNKZ1EsVU8sNTxXTyNKb1EsVU8sNTxYTyNKd1EsVU8nI0ZvTyNLYFFgTycjRm5PT1FPJyNLWScjS1lPT1FPJyNJbicjSW5PI0tlUSxVTzFHMW5PT1EhMExmMUcxbjFHMW5PT09XMUcxeTFHMXlPI0t2UT9NdE8nI0pyTyNMUVFgTyw1PGJPISlbUWxPLDU8Yk9PT1ctRTxtLUU8bU9PUSEwTGYxRzFsMUcxbE8jTFZRcE8nI0tYT09RITBMZiw1PGQsNTxkTyNMX1FwTyw1PGRPI0xkUU1oTycjRFRPT09PJyNJYicjSWJPI0xrTyNASXRPLDU5bU9PUSEwTGgsNTltLDU5bU8lW1FsTzFHMlBPIThsUWBPJyNJck8jTHZRYE8sNTx6T09RITBMaCw1PHcsNTx3TyEsVFFNaE8nI0l1TyNNZFFNak8sNT1YTyEsVFFNaE8nI0l3TyNOVlFNak8sNT1aTyEmelFNaE8sNT1dT09RTzFHMlMxRzJTTyNOYVEhZE8nI0NyTyNOdFEoQ1dPJyNFck8kIHxRcE8nI0diTyQhZFEhZE8sNTxzTyQha1FgTycjS1tPOWVRYE8nI0tbTyQheVFgTyw1PHVPJCNhUSFkTycjQ3tPISxUUU1oTyw1PHRPJCNrUWBPJyNHWk8kJFBRYE8sNTx0TyQkVVEhZE8nI0dXTyQkY1EhZE8nI0tdTyQkbVFgTycjS11PISZ6UU1oTycjS11PJCRyUWBPLDU8eE8kJHdRbE8nI0p2TyQlUlFwTycjR2NPIyRgUXBPJyNHY08kJWRRYE8nI0dnTyEzb1FgTycjR2tPJCVpUSEwTHJPJyNJdE8kJXRRcE8sNTx8T09RITBMcCw1PHwsNTx8TyQle1FwTycjR2NPJCZZUXBPJyNHZE8kJmtRcE8nI0dkTyQmcFFNak8sNT1YTyQnUVFNak8sNT1aT09RITBMaCw1PV4sNT1eTyEsVFFNaE8sNUBWTyEsVFFNaE8sNUBWTyQnYlFgTycjSXlPJCd2UWBPLDVAVU8kKE9RYE8sNTlhT09RITBMaCw1OWksNTlpTyQoVFFgTyw1QFZPJClUUSRJWU8sNTl1T09RITBMaCcjSnAnI0pwTyQpdlFNak8sNTxrTyQqaVFNak8sNTxtT0B6UWBPLDU8b09PUSEwTGgsNTxwLDU8cE8kKnNRYE8sNTx2TyQqeFFNak8sNTx7TyQrWVFgTycjS1BPISR3UWxPMUcyUk8kK19RYE8xRzJSTzllUWBPJyNLU085ZVFgTycjRXRPJVtRbE8nI0V0TzllUWBPJyNJe08kK2RRITBMck8sNUB7T09RWzFHMn0xRzJ9T09RWzFHNGAxRzRgT09RITBMZjFHL3wxRy98T09RITBMZjFHL3oxRy96TyQtZlEhME14TzFHMFVPT1FbMUcyeTFHMnlPISZ6UU1oTzFHMnlPJVtRbE8xRzJ5TyMudFFgTzFHMnlPJC9qUU1oTycjRWtPT1EhMExiLDVAVCw1QFRPJC93USEwTHJPLDVAVE9PUVsxRy51MUcudU8hQnlRITBMck8xRy51TyFDVVFwTzFHLnVPIUNeUU1oTzFHLnVPJDBZUWBPMUcwdU8kMF9RYE8nI0NpTyQwalFgTycjS2VPJDByUWBPLDU9fE8kMHdRYE8nI0tlTyQwfFFgTycjS2VPJDFbUWBPJyNKUk8kMWpRYE8sNUFPTyQxclEhZk8xRzFpT09RITBMZjFHMWsxRzFrTzlrUWBPMUczZk9AelFgTzFHM2ZPJDF5UWBPMUczZk8kMk9RYE8xRzNmTyFEaVFgTzFHM2ZPOXVRITBMck8xRzNmT09RWzFHM2YxRzNmTyFFY1FgTzFHM1VPISZ6UU1oTzFHM1JPJDJUUWBPMUczUk9PUVsxRzNTMUczU08hJnpRTWhPMUczU08kMllRYE8xRzNTTyQyYlFwTycjSFFPT1FbMUczVTFHM1VPITZfUXBPJyNJfU8hRWhRIWJPMUczWE9PUVsxRzNYMUczWE9PUVssNT1yLDU9ck8kMmpRTWhPLDU9dE85a1FgTyw1PXRPJCVkUWBPLDU9dk85YFFgTyw1PXZPIUNVUXBPLDU9dk8hQ15RTWhPLDU9dk86ZFFNaE8sNT12TyQyeFFgTycjS2NPJDNUUWBPLDU9d09PUVsxRy5rMUcua08kM1lRITBMck8xRy5rT0B6UWBPMUcua08kM2VRYE8xRy5rTzl1USEwTHJPMUcua08kNW1RIWZPLDVBUU8kNXpRYE8sNUFRTzllUWBPLDVBUU8kNlZRbE8sNT5QTyQ2XlFgTyw1PlBPT1FbMUczaTFHM2lPYFFsTzFHM2lPT1FbMUczbzFHM29PT1FbMUczcTFHM3FPP1RRYE8xRzNzTyQ2Y1FsTzFHM3VPJDpnUWxPJyNIdE9PUVsxRzN4MUczeE8kOnRRYE8nI0h6Tz9ZUWBPJyNIfE9PUVsxRzRPMUc0T08kOnxRbE8xRzRPTzl1USEwTHJPMUc0VU9PUVsxRzRXMUc0V09PUSEwTGInI0dfJyNHX085dVEhMExyTzFHNFlPOXVRITBMck8xRzRbTyQ/VFFgTyw1QGJPISlbUWxPLDU7YE85ZVFgTyw1O2BPP1lRYE8sNTpYTyEpW1FsTyw1OlhPIUNVUXBPLDU6WE8kP1lRP010Tyw1OlhPT1FPLDU7YCw1O2BPJD9kUXBPJyNJZU8kP3pRYE8sNUBhT09RITBMZjFHL3IxRy9yTyRAU1FwTycjSWtPJEBeUWBPLDVAcE9PUSEwTGIxRzB5MUcweU8jJGBRcE8sNTpYT09RTycjSWcnI0lnTyRAZlFwTyw1OnFPT1EhMExuLDU6cSw1OnFPIyhaUWBPMUcwWk9PUSEwTGYxRzBaMUcwWk8lW1FsTzFHMFpPT1EhMExmMUcwdDFHMHRPP1lRYE8xRzB0TyFDVVFwTzFHMHRPIUNeUU1oTzFHMHRPT1EhMExiMUc1fDFHNXxPIUJ5USEwTHJPMUcwXk9PUU8xRzBtMUcwbU8lW1FsTzFHMG1PJEBtUSEwTHJPMUcwbU8kQHhRITBMck8xRzBtTyFDVVFwTzFHMF5PRFdRcE8xRzBeTyRBV1EhMExyTzFHMG1PT1FPMUcwXjFHMF5PJEFsUSEwTXhPMUcwbVBPT08tRTxbLUU8W1BPT08xRy5oMUcuaE9PT08xRy9pMUcvaU8kQXZRIWJPLDU8aU8kQk9RIWZPMUc0ak9PUU8xRzRwMUc0cE8lW1FsTyw1P09PJEJZUWBPMUc1ek8kQmJRYE8xRzZZTyRCalEhZk8xRzZaTzllUWBPLDU/VU8kQnRRITBNeE8xRzZXTyVbUWxPMUc2V08kQ1VRITBMck8xRzZXTyRDZ1FgTzFHNlZPJENnUWBPMUc2Vk85ZVFgTzFHNlZPJENvUWBPLDU/WE85ZVFgTyw1P1hPT1FPLDU/WCw1P1hPJERUUWBPLDU/WE8kK1lRYE8sNT9YT09RTy1FPGstRTxrT09RUzFHMGExRzBhT09RUzFHMGMxRzBjTyMubFFgTzFHMGNPT1FbNysoZTcrKGVPISZ6UU1oTzcrKGVPJVtRbE83KyhlTyREY1FgTzcrKGVPJERuUU1oTzcrKGVPJER8USEwTXpPLDU9WE8kR1hRITBNek8sNT1aTyRJZFEhME16Tyw1PVhPJEt1USEwTXpPLDU9Wk8kTldRITBNek8sNTl1TyUhXVEhME16Tyw1PGtPJSRoUSEwTXpPLDU8bU8lJnNRITBNek8sNTx7T09RITBMZjcrJmE3KyZhTyUpVVEhME14TzcrJmFPJSl4UWxPJyNJZk8lKlZRYE8sNUBjTyUqX1EhZk8sNUBjT09RITBMZjFHMFAxRzBQTyUqaVFgTzcrJmpPT1EhMExmNysmajcrJmpPJSpuUT9NdE8sNTpmTyVbUWxPNysmek8lKnhRP010Tyw1OmJPJStWUT9NdE8sNTpqTyUrYVE/TXRPLDU6bE8lK2tRTWhPJyNJaU8lK3VRYE8sNUBoT09RITBMaDFHMGQxRzBkT09RTzFHMXIxRzFyT09RTzFHMXMxRzFzTyUrfVEhak8sNTxaTyEpW1FsTyw1PFlPT1FPLUU8bC1FPGxPT1EhMExmNysnWTcrJ1lPT09XNysnZTcrJ2VPT09XMUcxfDFHMXxPJSxZUWBPMUcxfE9PUSEwTGYxRzJPMUcyT09PT08sNTlvLDU5b08lLF9RIWRPLDU5b09PT08tRTxgLUU8YE9PUSEwTGgxRy9YMUcvWE8lLGZRITBNeE83KydrT09RITBMaCw1P14sNT9eTyUtWVFNaE8xRzJmUCUtYVFgTycjSXJQT1EhMExoLUU8cC1FPHBPJS19UU1qTyw1P2FPT1EhMExoLUU8cy1FPHNPJS5wUU1qTyw1P2NPT1EhMExoLUU8dS1FPHVPJS56USFkTzFHMndPJS9SUSFkTycjQ3JPJS9pUU1oTycjS1NPJCR3UWxPJyNKdk9PUSEwTGgxRzJfMUcyX08lL3NRYE8nI0lxTyUwW1FgTyw1QHZPJTBbUWBPLDVAdk8lMGRRYE8sNUB2TyUwb1FgTyw1QHZPT1FPMUcyYTFHMmFPJTB9UU1qTzFHMmBPJCtZUWBPJyNLW08hLFRRTWhPMUcyYE8lMV9RKENXTycjSXNPJTFsUWBPLDVAd08hJnpRTWhPLDVAd08lMXRRIWRPLDVAd09PUSEwTGgxRzJkMUcyZE8lNFVRIWZPJyNDaU8lNGBRYE8sNT1QT09RITBMYiw1PH0sNTx9TyU0aFFwTyw1PH1PT1EhMExiLDU9Tyw1PU9PQ3dRYE8sNTx9TyU0c1FwTyw1PH1PT1EhMExiLDU9Uiw1PVJPJCtZUWBPLDU9Vk9PUU8sNT9gLDU/YE9PUU8tRTxyLUU8ck9PUSEwTHAxRzJoMUcyaE8jJGBRcE8sNTx9TyQkd1FsTyw1PVBPJTVSUWBPLDU9T08lNV5RcE8sNT1PTyEsVFFNaE8nI0l1TyU2V1FNak8xRzJzTyEsVFFNaE8nI0l3TyU2eVFNak8xRzJ1TyU3VFFNak8xRzVxTyU3X1FNak8xRzVxT09RTyw1P2UsNT9lT09RTy1FPHctRTx3T09RTzFHLnsxRy57TyEsVFFNaE8xRzVxTyEsVFFNaE8xRzVxTyE6XVFwTyw1OXdPJVtRbE8sNTl3T09RITBMaCw1PGosNTxqTyU3bFFgTzFHMlpPISxUUU1oTzFHMmJPJTdxUSEwTXhPNysnbU9PUSEwTGY3KydtNysnbU8hJHdRbE83KydtTyU4ZVFgTyw1O2BPT1EhMExiLDU/Zyw1P2dPT1EhMExiLUU8eS1FPHlPJThqUSFkTycjS15PIyhaUWBPNysoZU80VVEhZk83KyhlTyREZlFgTzcrKGVPJTh0USEwTXZPJyNDaU8lOVhRITBNdk8sNT1TTyU5bFFgTyw1PVNPJTl0UWBPLDU9U09PUSEwTGIxRzVvMUc1b09PUVs3KyRhNyskYU8hQnlRITBMck83KyRhTyFDVVFwTzcrJGFPISR3UWxPNysmYU8lOXlRYE8nI0pRTyU6YlFgTyw1QVBPT1FPMUczaDFHM2hPOWtRYE8sNUFQTyU6YlFgTyw1QVBPJTpqUWBPLDVBUE9PUU8sNT9tLDU/bU9PUU8tRT1QLUU9UE9PUSEwTGY3KydUNysnVE8lOm9RYE83KylRTzl1USEwTHJPNyspUU85a1FgTzcrKVFPQHpRYE83KylRTyU6dFFgTzcrKVFPT1FbNyspUTcrKVFPT1FbNysocDcrKHBPJTp5USEwTXZPNysobU8hJnpRTWhPNysobU8hRV5RYE83KyhuT09RWzcrKG43KyhuTyEmelFNaE83KyhuTyU7VFFgTycjS2JPJTtgUWBPLDU9bE9PUU8sNT9pLDU/aU9PUU8tRTx7LUU8e09PUVs3KyhzNysoc08lPHJRcE8nI0haT09RWzFHM2AxRzNgTyEmelFNaE8xRzNgTyVbUWxPMUczYE8lPHlRYE8xRzNgTyU9VVFNaE8xRzNgTzl1USEwTHJPMUczYk8kJWRRYE8xRzNiTzlgUWBPMUczYk8hQ1VRcE8xRzNiTyFDXlFNaE8xRzNiTyU9ZFFgTycjSlBPJT14UWBPLDVAfU8lPlFRcE8sNUB9T09RITBMYjFHM2MxRzNjT09RWzcrJFY3KyRWT0B6UWBPNyskVk85dVEhMExyTzcrJFZPJT5dUWBPNyskVk8lW1FsTzFHNmxPJVtRbE8xRzZtTyU+YlEhMExyTzFHNmxPJT5sUWxPMUcza08lPnNRYE8xRzNrTyU+eFFsTzFHM2tPT1FbNyspVDcrKVRPOXVRITBMck83KylfT2BRbE83KylhT09RWycjS2gnI0toT09RWycjSlMnI0pTTyU/UFFsTyw1PmBPT1FbLDU+YCw1PmBPJVtRbE8nI0h1TyU/XlFgTycjSHdPT1FbLDU+Ziw1PmZPOWVRYE8sNT5mT09RWyw1PmgsNT5oT09RWzcrKWo3KylqT09RWzcrKXA3KylwT09RWzcrKXQ3Kyl0T09RWzcrKXY3Kyl2TyU/Y1FwTzFHNXxPJT99UT9NdE8xRzB6TyVAWFFgTzFHMHpPT1FPMUcvczFHL3NPJUBkUT9NdE8xRy9zTz9ZUWBPMUcvc08hKVtRbE8nI0RtT09RTyw1P1AsNT9QT09RTy1FPGMtRTxjT09RTyw1P1YsNT9WT09RTy1FPGktRTxpTyFDVVFwTzFHL3NPT1FPLUU8ZS1FPGVPT1EhMExuMUcwXTFHMF1PT1EhMExmNysldTcrJXVPIyhaUWBPNysldU9PUSEwTGY3KyZgNysmYE8/WVFgTzcrJmBPIUNVUXBPNysmYE9PUU83KyV4NysleE8kQWxRITBNeE83KyZYT09RTzcrJlg3KyZYTyVbUWxPNysmWE8lQG5RITBMck83KyZYTyFCeVEhMExyTzcrJXhPIUNVUXBPNysleE8lQHlRITBMck83KyZYTyVBWFEhME14TzcrK3JPJVtRbE83KytyTyVBaVFgTzcrK3FPJUFpUWBPNysrcU9PUU8xRzRzMUc0c085ZVFgTzFHNHNPJUFxUWBPMUc0c09PUVM3KyV9NyslfU8jKFpRYE88PExQTzRVUSFmTzw8TFBPJUJQUWBPPDxMUE9PUVs8PExQPDxMUE8hJnpRTWhPPDxMUE8lW1FsTzw8TFBPJUJYUWBPPDxMUE8lQmRRITBNek8sNT9hTyVEb1EhME16Tyw1P2NPJUZ6USEwTXpPMUcyYE8lSV1RITBNek8xRzJzTyVLaFEhME16TzFHMnVPJU1zUSFmTyw1P1FPJVtRbE8sNT9RT09RTy1FPGQtRTxkTyVNfVFgTzFHNX1PT1EhMExmPDxKVTw8SlVPJU5WUT9NdE8xRzB1TyYhXlE/TXRPMUcxUE8mIWVRP010TzFHMVBPJiRmUT9NdE8xRzFQTyYkbVE/TXRPMUcxUE8mJm5RP010TzFHMVBPJihvUT9NdE8xRzFQTyYodlE/TXRPMUcxUE8mKH1RP010TzFHMVBPJitPUT9NdE8xRzFQTyYrVlE/TXRPMUcxUE8mK15RITBNeE88PEpmTyYtVVE/TXRPMUcxUE8mLlJRP012TzFHMVBPJi9VUT9Ndk8nI0psTyYxW1E/TXRPMUcxY08mMWlRP010TzFHMFVPJjFzUU1qTyw1P1RPT1FPLUU8Zy1FPGdPISlbUWxPJyNGcU9PUU8nI0taJyNLWk9PUU8xRzF1MUcxdU8mMX1RYE8xRzF0TyYyU1E/TXRPLDU/W09PT1c3KydoNysnaE9PT08xRy9aMUcvWk8mMl5RIWRPMUc0eE9PUSEwTGg3KyhRNysoUVAhJnpRTWhPLDU/Xk8hLFRRTWhPNysoY08mMmVRYE8sNT9dTzllUWBPLDU/XU8kK1lRYE8sNT9dT09RTy1FPG8tRTxvTyYyc1FgTzFHNmJPJjJzUWBPMUc2Yk8mMntRYE8xRzZiTyYzV1FNak83Kyd6TyYzaFEhZE8sNT9fTyYzclFgTyw1P19PISZ6UU1oTyw1P19PT1FPLUU8cS1FPHFPJjN3USFkTzFHNmNPJjRSUWBPMUc2Y08mNFpRYE8xRzJrTyEmelFNaE8xRzJrT09RITBMYjFHMmkxRzJpT09RITBMYjFHMmoxRzJqTyU0aFFwTzFHMmlPIUNVUXBPMUcyaU9Dd1FgTzFHMmlPT1EhMExiMUcycTFHMnFPJjRgUXBPMUcyaU8mNG5RYE8xRzJrTyQrWVFgTzFHMmpPQ3dRYE8xRzJqTyQkd1FsTzFHMmtPJjR2UWBPMUcyak8mNWpRTWpPLDU/YU9PUSEwTGgtRTx0LUU8dE8mNl1RTWpPLDU/Y09PUSEwTGgtRTx2LUU8dk8hLFRRTWhPNysrXU8mNmdRTWpPNysrXU8mNnFRTWpPNysrXU9PUSEwTGgxRy9jMUcvY08mN09RYE8xRy9jT09RITBMaDcrJ3U3Kyd1TyY3VFFNak83Kyd8TyY3ZVEhME14Tzw8S1hPT1EhMExmPDxLWDw8S1hPJjhYUWBPMUcwek8hJnpRTWhPJyNJek8mOF5RYE8sNUB4TyY6YFEhZk88PExQTyEmelFNaE8xRzJuTyY6Z1EhMExyTzFHMm5PT1FbPDxHezw8R3tPIUJ5USEwTHJPPDxHe08mOnhRITBNeE88PEl7T09RITBMZjw8SXs8PEl7T09RTyw1P2wsNT9sTyY7bFFgTyw1P2xPJjtxUWBPLDU/bE9PUU8tRT1PLUU9T08mPFBRYE8xRzZrTyY8UFFgTzFHNmtPOWtRYE8xRzZrT0B6UWBPPDxMbE9PUVs8PExsPDxMbE8mPFhRYE88PExsTzl1USEwTHJPPDxMbE85a1FgTzw8TGxPT1FbPDxMWDw8TFhPJTp5USEwTXZPPDxMWE9PUVs8PExZPDxMWU8hRV5RYE88PExZTyY8XlFwTycjSXxPJjxpUWBPLDVAfE8hKVtRbE8sNUB8T09RWzFHM1cxRzNXT09RTycjSk8nI0pPTzl1USEwTHJPJyNKT08mPHFRcE8sNT11T09RWyw1PXUsNT11TyY8eFFwTycjRWdPJj1QUXBPJyNHZU8mPVVRYE83Kyh6TyY9WlFgTzcrKHpPT1FbNysoejcrKHpPISZ6UU1oTzcrKHpPJVtRbE83Kyh6TyY9Y1FgTzcrKHpPT1FbNysofDcrKHxPOXVRITBMck83Kyh8TyQlZFFgTzcrKHxPOWBRYE83Kyh8TyFDVVFwTzcrKHxPJj1uUWBPLDU/a09PUU8tRTx9LUU8fU9PUU8nI0heJyNIXk8mPXlRYE8xRzZpTzl1USEwTHJPPDxHcU9PUVs8PEdxPDxHcU9AelFgTzw8R3FPJj5SUWBPNyssV08mPldRYE83KyxYTyVbUWxPNyssV08lW1FsTzcrLFhPT1FbNyspVjcrKVZPJj5dUWBPNyspVk8mPmJRbE83KylWTyY+aVFgTzcrKVZPT1FbPDxMeTw8THlPT1FbPDxMezw8THtPT1FbLUU9US1FPVFPT1FbMUczejFHM3pPJj5uUWBPLDU+YU9PUVssNT5jLDU+Y08mPnNRYE8xRzRRTzllUWBPNysmZk8hKVtRbE83KyZmT09RTzcrJV83KyVfTyY+eFE/TXRPMUc2Wk8/WVFgTzcrJV9PT1EhMExmPDxJYTw8SWFPT1EhMExmPDxJejw8SXpPP1lRYE88PEl6T09RTzw8SXM8PElzTyRBbFEhME14Tzw8SXNPJVtRbE88PElzT09RTzw8SWQ8PElkTyFCeVEhMExyTzw8SWRPJj9TUSEwTHJPPDxJc08mP19RITBNeE88PSBeTyY/b1FgTzw9IF1PT1FPNysqXzcrKl9POWVRYE83KypfT09RW0FOQWtBTkFrTyY/d1EhZk9BTkFrTyEmelFNaE9BTkFrTyMoWlFgT0FOQWtPNFVRIWZPQU5Ba08mQE9RYE9BTkFrTyVbUWxPQU5Ba08mQFdRITBNek83Kyd6TyZCaVEhME16Tyw1P2FPJkR0USEwTXpPLDU/Y08mR1BRITBNek83Kyd8TyZJYlEhZk8xRzRsTyZJbFE/TXRPNysmYU8mS3BRP012Tyw1PVhPJk13UT9Ndk8sNT1aTyZOWFE/TXZPLDU9WE8mTmlRP012Tyw1PVpPJk55UT9Ndk8sNTl1TycjUFE/TXZPLDU8a08nJVNRP012Tyw1PG1PJydoUT9Ndk8sNTx7TycpXlE/TXRPNysna08nKWtRP010TzcrJ21PJyl4UWBPLDU8XU9PUU83KydgNysnYE9PUSEwTGg3KypkNysqZE8nKX1RTWpPPDxLfU9PUU8xRzR3MUc0d08nKlVRYE8xRzR3TycqYVFgTzFHNHdPJypvUWBPNysrfE8nKm9RYE83Kyt8TyEmelFNaE8xRzR5Tycqd1EhZE8xRzR5TycrUlFgTzcrK31PJytaUWBPNysoVk8nK2ZRIWRPNysoVk9PUSEwTGI3KyhUNysoVE9PUSEwTGI3KyhVNysoVU8hQ1VRcE83KyhUT0N3UWBPNysoVE8nK3BRYE83KyhWTyEmelFNaE83KyhWTyQrWVFgTzcrKFVPJyt1UWBPNysoVk9Dd1FgTzcrKFVPJyt9UU1qTzw8TndPISxUUU1oTzw8TndPT1EhMExoNyskfTcrJH1PJyxYUSFkTyw1P2ZPT1FPLUU8eC1FPHhPJyxjUSEwTXZPNysoWU8hJnpRTWhPNysoWU9PUVtBTj1nQU49Z085a1FgTzFHNVdPT1FPMUc1VzFHNVdPJyxzUWBPMUc1V08nLHhRYE83KyxWTycseFFgTzcrLFZPOXVRITBMck9BTkJXT0B6UWBPQU5CV09PUVtBTkJXQU5CV08nLVFRYE9BTkJXT09RW0FOQXNBTkFzT09RW0FOQXRBTkF0TyctVlFgTyw1P2hPT1FPLUU8ei1FPHpPJy1iUT9NdE8xRzZoT09RTyw1P2osNT9qT09RTy1FPHwtRTx8T09RWzFHM2ExRzNhTyctbFFgTyw1PVBPT1FbPDxMZjw8TGZPISZ6UU1oTzw8TGZPJj1VUWBPPDxMZk8nLXFRYE88PExmTyVbUWxPPDxMZk9PUVs8PExoPDxMaE85dVEhMExyTzw8TGhPJCVkUWBPPDxMaE85YFFgTzw8TGhPJy15UXBPMUc1Vk8nLlVRYE83KyxUT09RW0FOPV1BTj1dTzl1USEwTHJPQU49XU9PUVs8PSByPD0gck9PUVs8PSBzPD0gc08nLl5RYE88PSByTycuY1FgTzw9IHNPT1FbPDxMcTw8THFPJy5oUWBPPDxMcU8nLm1RbE88PExxT09RWzFHM3sxRzN7Tz9ZUWBPNyspbE8nLnRRYE88PEpRTycvUFE/TXRPPDxKUU9PUU88PEh5PDxIeU9PUSEwTGZBTj9mQU4/Zk9PUU9BTj9fQU4/X08kQWxRITBNeE9BTj9fT09RT0FOP09BTj9PTyVbUWxPQU4/X09PUU88PE15PDxNeU9PUVtHMjdWRzI3Vk8hJnpRTWhPRzI3Vk8jKFpRYE9HMjdWTycvWlEhZk9HMjdWTzRVUSFmT0cyN1ZPJy9iUWBPRzI3Vk8nL2pRP010Tzw8SmZPJy93UT9Ndk8xRzJgTycxbVE/TXZPLDU/YU8nM3BRP012Tyw1P2NPJzVzUT9Ndk8xRzJzTyc3dlE/TXZPMUcydU8nOXlRP010Tzw8S1hPJzpXUT9NdE88PEl7T09RTzFHMXcxRzF3TyEsVFFNaE9BTkFpT09RTzcrKmM3KypjTyc6ZVFgTzcrKmNPJzpwUWBPPD0gaE8nOnhRIWRPNysqZU9PUSEwTGI8PEtxPDxLcU8kK1lRYE88PEtxT0N3UWBPPDxLcU8nO1NRYE88PEtxTyEmelFNaE88PEtxT09RITBMYjw8S288PEtvTyFDVVFwTzw8S29PJztfUSFkTzw8S3FPT1EhMExiPDxLcDw8S3BPJztpUWBPPDxLcU8hJnpRTWhPPDxLcU8kK1lRYE88PEtwTyc7blFNak9BTkRjTyc7eFEhME12Tzw8S3RPT1FPNysqcjcrKnJPOWtRYE83KypyTyc8WVFgTzw9IHFPT1FbRzI3ckcyN3JPOXVRITBMck9HMjdyT0B6UWBPRzI3ck8hKVtRbE8xRzVTTyc8YlFgTzcrLFNPJzxqUWBPMUcya08mPVVRYE9BTkJRT09RW0FOQlFBTkJRTyEmelFNaE9BTkJRTyc8b1FgT0FOQlFPT1FbQU5CU0FOQlNPOXVRITBMck9BTkJTTyQlZFFgT0FOQlNPT1FPJyNIXycjSF9PT1FPNysqcTcrKnFPT1FbRzIyd0cyMndPT1FbQU5FXkFORV5PT1FbQU5FX0FORV9PT1FbQU5CXUFOQl1PJzx3UWBPQU5CXU9PUVs8PE1XPDxNV08hKVtRbE9BTj9sT09RT0cyNHlHMjR5TyRBbFEhME14T0cyNHlPIyhaUWBPTEQscU9PUVtMRCxxTEQscU8hJnpRTWhPTEQscU8nPHxRIWZPTEQscU8nPVRRP012TzcrJ3pPJz55UT9Ndk8sNT9hTydAfFE/TXZPLDU/Y08nQ1BRP012TzcrJ3xPJ0R1UU1qT0cyN1RPT1FPPDxNfTw8TX1PT1EhMExiQU5BXUFOQV1PJCtZUWBPQU5BXU9Dd1FgT0FOQV1PJ0VWUSFkT0FOQV1PT1EhMExiQU5BWkFOQVpPJ0VeUWBPQU5BXU8hJnpRTWhPQU5BXU8nRWlRIWRPQU5BXU9PUSEwTGJBTkFbQU5BW09PUU88PE5ePDxOXk9PUVtMRC1eTEQtXk85dVEhMExyT0xELV5PJ0VzUT9NdE83KypuT09RTycjR2YnI0dmT09RW0cyN2xHMjdsTyY9VVFgT0cyN2xPISZ6UU1oT0cyN2xPT1FbRzI3bkcyN25POXVRITBMck9HMjduT09RW0cyN3dHMjd3TydFfVE/TXRPRzI1V09PUU9MRCplTEQqZU9PUVshJCghXSEkKCFdTyMoWlFgTyEkKCFdTyEmelFNaE8hJCghXU8nRlhRITBNek9HMjdUT09RITBMYkcyNndHMjZ3TyQrWVFgT0cyNndPJ0hqUWBPRzI2d09Dd1FgT0cyNndPJ0h1USFkT0cyNndPISZ6UU1oT0cyNndPT1FbISQoIXghJCgheE9PUVtMRC1XTEQtV08mPVVRYE9MRC1XT09RW0xELVlMRC1ZT09RWyEpOUV3ISk5RXdPIyhaUWBPISk5RXdPT1EhMExiTEQsY0xELGNPJCtZUWBPTEQsY09Dd1FgT0xELGNPJ0h8UWBPTEQsY08nSVhRIWRPTEQsY09PUVshJCghciEkKCFyT09RWyEuSztjIS5LO2NPJ0lgUT9Ndk9HMjdUT09RITBMYiEkKCB9ISQoIH1PJCtZUWBPISQoIH1PQ3dRYE8hJCggfU8nS1VRYE8hJCggfU9PUSEwTGIhKTlFaSEpOUVpTyQrWVFgTyEpOUVpT0N3UWBPISk5RWlPT1EhMExiIS5LO1QhLks7VE8kK1lRYE8hLks7VE9PUSEwTGIhNC8wbyE0LzBvTyEpW1FsTycjRHpPMVBRYE8nI0VYTydLYVEhZk8nI0pyTydLaFEhTF5PJyNEdk8nS29RbE8nI0VPTydLdlEhZk8nI0NpTydOXlEhZk8nI0NpTyEpW1FsTycjRVFPJ05uUWxPLDU7Wk8hKVtRbE8sNTtlTyEpW1FsTyw1O2VPISlbUWxPLDU7ZU8hKVtRbE8sNTtlTyEpW1FsTyw1O2VPISlbUWxPLDU7ZU8hKVtRbE8sNTtlTyEpW1FsTyw1O2VPISlbUWxPLDU7ZU8hKVtRbE8sNTtlTyEpW1FsTycjSXBPKCFxUWBPLDU8aU8hKVtRbE8sNTtlTygheVFNaE8sNTtlTygkZFFNaE8sNTtlTyEpW1FsTyw1O3dPISZ6UU1oTycjR21PKCF5UU1oTycjR21PISZ6UU1oTycjR29PKCF5UU1oTycjR29PMVNRYE8nI0RaTzFTUWBPJyNEWk8hJnpRTWhPJyNHUE8oIXlRTWhPJyNHUE8hJnpRTWhPJyNHUk8oIXlRTWhPJyNHUk8hJnpRTWhPJyNHYU8oIXlRTWhPJyNHYU8hKVtRbE8sNTpqTygka1FwTycjRF9PKCR1UXBPJyNKdk8hKVtRbE8sNUBvTydOblFsTzFHMHVPKCVQUT9NdE8nI0NpTyEpW1FsTzFHMlBPISZ6UU1oTycjSXVPKCF5UU1oTycjSXVPISZ6UU1oTycjSXdPKCF5UU1oTycjSXdPKCVaUSFkTycjQ3JPISZ6UU1oTyw1PHRPKCF5UU1oTyw1PHRPJ05uUWxPMUcyUk8hKVtRbE83KyZ6TyEmelFNaE8xRzJgTygheVFNaE8xRzJgTyEmelFNaE8nI0l1TygheVFNaE8nI0l1TyEmelFNaE8nI0l3TygheVFNaE8nI0l3TyEmelFNaE8xRzJiTygheVFNaE8xRzJiTydOblFsTzcrJ21PJ05uUWxPNysmYU8hJnpRTWhPQU5BaU8oIXlRTWhPQU5BaU8oJW5RYE8nI0VvTyglc1FgTycjRW9PKCV7UWBPJyNGXU8oJlFRYE8nI0V5TygmVlFgTycjS1RPKCZiUWBPJyNLUk8oJm1RYE8sNTtaTygmclFNak8sNTxlTygmeVFgTycjR1lPKCdPUWBPJyNHWU8oJ1RRYE8sNTxlTygnXVFgTyw1PGdPKCdlUWBPLDU7Wk8oJ21RP010TzFHMWBPKCd0UWBPLDU8dE8oJ3lRYE8sNTx0TygoT1FgTyw1PHZPKChUUWBPLDU8dk8oKFlRYE8xRzJSTygoX1FgTzFHMHVPKChkUU1qTzw8S31PKChrUU1qTzw8S31PKChyUU1oTycjRnxPOWBRYE8nI0Z7T0F1UWBPJyNFbk8hKVtRbE8sNTt0TyEzb1FgTycjR1lPITNvUWBPJyNHWU8hM29RYE8nI0dbTyEzb1FgTycjR1tPISxUUU1oTzcrKGNPISxUUU1oTzcrKGNPJS56USFkTzFHMndPJS56USFkTzFHMndPISZ6UU1oTyw1PV1PISZ6UU1oTyw1PV1cIixcbiAgc3RhdGVEYXRhOiBcIigpeH5PJ3xPUyd9T1NUT1MoT1JRfk9QWU9RWU9TZk9ZIVZPYXFPZHpPZXlPbCFQT3BrT3JZT3NrT3RrT3prT3xZTyFPWU8hU1dPIVdrTyFYa08hX1hPIWl1TyFsWk8hb1lPIXBZTyFxWU8hc3ZPIXV3TyF4eE8hfF1PJFd8TyRuaU8laH1PJWohUU8lbCFPTyVtIU9PJW4hT08lcSFSTyVzIVNPJXYhVE8ldyFUTyV5IVVPJlchV08mXiFYTyZgIVlPJmIhWk8mZCFbTyZnIV1PJm0hXk8mcyFfTyZ1IWBPJnchYU8meSFiTyZ7IWNPKFRTTyhWVE8oWVVPKGFWTyhvW09+T1d0T35QYE9QWU9RWU9TZk9kIWpPZSFpT3BrT3JZT3NrT3RrT3prT3xZTyFPWU8hU1dPIVdrTyFYa08hXyFlTyFpdU8hbFpPIW9ZTyFwWU8hcVlPIXN2TyF1IWdPIXghaE8kVyFrTyRuaU8oVCFkTyhWVE8oWVVPKGFWTyhvW09+T2Ehd09zIW5PIVMhb08hYiF5TyFjIXZPIWQhdk8hfDxWTyNUIXBPI1UhcE8jViF4TyNXIXBPI1ghcE8jWyF6TyNdIXpPKFUhbE8oVlRPKFlVTyhlIW1PKG8hc09+TyhPIXtPfk9QXVhSXVhbXVhhXVhqXVhyXVghUV1YIVNdWCFdXVghbF1YIXBdWCNSXVgjU11YI2BdWCNrZlgjbl1YI29dWCNwXVgjcV1YI3JdWCNzXVgjdF1YI3VdWCN2XVgjeF1YI3pdWCN7XVgkUV1YJ3pdWChhXVgocl1YKHldWCh6XVh+TyFnJVJYflAocU9fIX1PKFYjUE8oVyF9TyhYI1BPfk9fI1FPKFgjUE8oWSNQTyhaI1FPfk94I1NPIVUjVE8oYiNUTyhjI1ZPfk9QWU9RWU9TZk9kIWpPZSFpT3BrT3JZT3NrT3RrT3prT3xZTyFPWU8hU1dPIVdrTyFYa08hXyFlTyFpdU8hbFpPIW9ZTyFwWU8hcVlPIXN2TyF1IWdPIXghaE8kVyFrTyRuaU8oVDxaTyhWVE8oWVVPKGFWTyhvW09+TyFbI1pPIV0jV08hWShoUCFZKHZQflArfU8hXiNjT35QYE9QWU9RWU9TZk9kIWpPZSFpT3JZT3NrT3RrT3prT3xZTyFPWU8hU1dPIVdrTyFYa08hXyFlTyFpdU8hbFpPIW9ZTyFwWU8hcVlPIXN2TyF1IWdPIXghaE8kVyFrTyRuaU8oVlRPKFlVTyhhVk8ob1tPfk9wI21PIVsjaU8hfF1PI2kjbE8jaiNpTyhUPFtPIWsoc1B+UC5pTyFsI29PKFQjbk9+TyF4I3NPIXxdTyVoI3RPfk8jayN1T35PIWcjdk8jayN1T35PUCRbT1Ijek9bJGNPaiRST3IkYU8hUSN5TyFTI3tPIV0kX08hbCN4TyFwJFtPI1IkUk8jbiRPTyNvJFBPI3AkUE8jcSRQTyNyJFFPI3MkUk8jdCRSTyN1JGJPI3YkU08jeCRVTyN6JFdPI3skWE8oYVZPKHIkWU8oeSN8Tyh6I31Pfk9hKGZYJ3ooZlgndyhmWCFrKGZYIVkoZlghXyhmWCVpKGZYIWcoZlh+UDFxTyNTJGRPI2AkZU8kUSRlT1AoZ1hSKGdYWyhnWGooZ1hyKGdYIVEoZ1ghUyhnWCFdKGdYIWwoZ1ghcChnWCNSKGdYI24oZ1gjbyhnWCNwKGdYI3EoZ1gjcihnWCNzKGdYI3QoZ1gjdShnWCN2KGdYI3goZ1gjeihnWCN7KGdYKGEoZ1gocihnWCh5KGdYKHooZ1ghXyhnWCVpKGdYfk9hKGdYJ3ooZ1gndyhnWCFZKGdYIWsoZ1h2KGdYIWcoZ1h+UDRVTyNgJGVPfk8kXSRoTyRfJGdPJGYkbU9+T1NmTyFfJG5PJGkkb08kayRxT35PaCVWT2olZE9rJWRPcCVXT3IlWE9zJHRPdCR0T3olWU98JVpPIU8lXU8hUyR7TyFfJHxPIWklYk8hbCR4TyNqJWNPJFclYE8kdCVeTyR2JV9PJHklYU8oVCRzTyhWVE8oWVVPKGEkdU8oeSR9Tyh6JVBPZyheUH5PbCVbT35QN2VPIWwlZU9+TyFTJWhPIV8laU8oVCVnT35PIWclbU9+T2Elbk8neiVuT35PIVElck9+UCVbTyhVIWxPflAlW08lbiV2T35QJVtPaCVWTyFsJWVPKFQlZ08oVSFsT35PZSV9TyFsJWVPKFQlZ09+T2okUk9+TyFfJlBPKFQlZ08oVSFsTyhWVE8oWVVPYClXUH5PIVEmU08hbCZSTyVqJlZPJlQmV09+UDtTTyF4I3NPfk8lcyZZTyFTKVNYIV8pU1goVClTWH5PKFQmWk9+T2whUE8hdSZgTyVqIVFPJWwhT08lbSFPTyVuIU9PJXEhUk8lcyFTTyV2IVRPJXchVE9+T2QmZU9lJmRPIXgmYk8laCZjTyV7JmFPflA8Yk9kJmhPZXlPbCFQTyFfJmdPIXUmYE8heHhPIXxdTyVofU8lbCFPTyVtIU9PJW4hT08lcSFSTyVzIVNPJXYhVE8ldyFUTyV5IVVPfk9iJmtPI2Ambk8laiZpTyhVIWxPflA9Z08hbCZvTyF1JnNPfk8hbCNvT35PIV9YT35PYSVuTyd4JntPJ3olbk9+T2Elbk8neCdPTyd6JW5Pfk9hJW5PJ3gnUU8neiVuT35PJ3ddWCFZXVh2XVgha11YJltdWCFfXVglaV1YIWddWH5QKHFPIWInX08hYydXTyFkJ1dPKFUhbE8oVlRPKFlVT35PcydVTyFTJ1RPIVsnWE8oZSdTTyFeKGlQIV4oeFB+UEBuT24nYk8hXydgTyhUJWdPfk9lJ2dPIWwlZU8oVCVnT35PIVEmU08hbCZST35PcyFuTyFTIW9PIXw8Vk8jVCFwTyNVIXBPI1chcE8jWCFwTyhVIWxPKFZUTyhZVU8oZSFtTyhvIXNPfk8hYidtTyFjJ2xPIWQnbE8jViFwTyNbJ25PI10nbk9+UEJZT2Elbk9oJVZPIWcjdk8hbCVlTyd6JW5PKHIncE9+TyFwJ3RPI2Anck9+UENoT3Mhbk8hUyFvTyhWVE8oWVVPKGUhbU8obyFzT35PIV9YT3MobVghUyhtWCFiKG1YIWMobVghZChtWCF8KG1YI1QobVgjVShtWCNWKG1YI1cobVgjWChtWCNbKG1YI10obVgoVShtWChWKG1YKFkobVgoZShtWChvKG1Yfk8hYydsTyFkJ2xPKFUhbE9+UERXTyhQJ3hPKFEneE8oUid6T35PXyF9TyhWJ3xPKFchfU8oWCd8T35PXyNRTyhYJ3xPKFknfE8oWiNRT35PdihPT35QJVtPeCNTTyFVI1RPKGIjVE8oYyhST35PIVsoVE8hWSdXWCFZJ15YIV0nV1ghXSdeWH5QK31PIV0oVk8hWShoWH5PUCRbT1Ijek9bJGNPaiRST3IkYU8hUSN5TyFTI3tPIV0oVk8hbCN4TyFwJFtPI1IkUk8jbiRPTyNvJFBPI3AkUE8jcSRQTyNyJFFPI3MkUk8jdCRSTyN1JGJPI3YkU08jeCRVTyN6JFdPI3skWE8oYVZPKHIkWU8oeSN8Tyh6I31Pfk8hWShoWH5QSFJPIVkoW09+TyFZKHVYIV0odVghZyh1WCFrKHVYKHIodVh+TyNgKHVYI2sjZFghXih1WH5QSlVPI2AoXU8hWSh3WCFdKHdYfk8hXSheTyFZKHZYfk8hWShhT35PI2AkZU9+UEpVTyFeKGJPflBgT1Ijek8hUSN5TyFTI3tPIWwjeE8oYVZPUCFuYVshbmFqIW5hciFuYSFdIW5hIXAhbmEjUiFuYSNuIW5hI28hbmEjcCFuYSNxIW5hI3IhbmEjcyFuYSN0IW5hI3UhbmEjdiFuYSN4IW5hI3ohbmEjeyFuYShyIW5hKHkhbmEoeiFuYX5PYSFuYSd6IW5hJ3chbmEhWSFuYSFrIW5hdiFuYSFfIW5hJWkhbmEhZyFuYX5QS2xPIWsoY09+TyFnI3ZPI2AoZE8ocidwTyFdKHRYYSh0WCd6KHRYfk8hayh0WH5QTlhPIVMlaE8hXyVpTyF8XU8jaShpTyNqKGhPKFQlZ09+TyFdKGpPIWsoc1h+TyFrKGxPfk8hUyVoTyFfJWlPI2ooaE8oVCVnT35PUChnWFIoZ1hbKGdYaihnWHIoZ1ghUShnWCFTKGdYIV0oZ1ghbChnWCFwKGdYI1IoZ1gjbihnWCNvKGdYI3AoZ1gjcShnWCNyKGdYI3MoZ1gjdChnWCN1KGdYI3YoZ1gjeChnWCN6KGdYI3soZ1goYShnWChyKGdYKHkoZ1goeihnWH5PIWcjdk8hayhnWH5QISB1T1Iobk8hUShtTyFsI3hPI1MkZE8hfCF7YSFTIXthfk8heCF7YSVoIXthIV8he2EjaSF7YSNqIXthKFQhe2F+UCEjdk8heChyT35PUFlPUVlPU2ZPZCFqT2UhaU9wa09yWU9za090a096a098WU8hT1lPIVNXTyFXa08hWGtPIV9YTyFpdU8hbFpPIW9ZTyFwWU8hcVlPIXN2TyF1IWdPIXghaE8kVyFrTyRuaU8oVCFkTyhWVE8oWVVPKGFWTyhvW09+T2glVk9wJVdPciVYT3MkdE90JHRPeiVZT3wlWk8hTzxzTyFTJHtPIV8kfE8haT5WTyFsJHhPI2o8eU8kVyVgTyR0PHVPJHY8d08keSVhTyhUKHZPKFZUTyhZVU8oYSR1Tyh5JH1PKHolUE9+TyNrKHhPfk8hWyh6TyFrKGtQflAlW08oZSh8TyhvW09+TyFTKU9PIWwjeE8oZSh8TyhvW09+T1A8VU9RPFVPU2ZPZD5ST2UhaU9wa09yPFVPc2tPdGtPemtPfDxVTyFPPFVPIVNXTyFXa08hWGtPIV8hZU8haTxYTyFsWk8hbzxVTyFwPFVPIXE8VU8hczxZTyF1PF1PIXghaE8kVyFrTyRuPlBPKFQpXU8oVlRPKFlVTyhhVk8ob1tPfk8hXSRfT2EkcWEneiRxYSd3JHFhIWskcWEhWSRxYSFfJHFhJWkkcWEhZyRxYX5PbClkT35QISZ6T2glVk9wJVdPciVYT3MkdE90JHRPeiVZT3wlWk8hTyVdTyFTJHtPIV8kfE8haSViTyFsJHhPI2olY08kVyVgTyR0JV5PJHYlX08keSVhTyhUKHZPKFZUTyhZVU8oYSR1Tyh5JH1PKHolUE9+T2cocFB+UCEsVE8hUSlpTyFnKWhPIV8kXlgkWiReWCRdJF5YJF8kXlgkZiReWH5PIWcpaE8hXyh7WCRaKHtYJF0oe1gkXyh7WCRmKHtYfk8hUSlpT35QIS5eTyFRKWlPIV8oe1gkWih7WCRdKHtYJF8oe1gkZih7WH5PIV8pa08kWilvTyRdKWpPJF8pak8kZilwT35PIVspc09+UCEpW08kXSRoTyRfJGdPJGYpd09+T24kelghUSR6WCNTJHpYJ3kkelgoeSR6WCh6JHpYfk9nbVhnJHpYbm1YIV1tWCNgbVh+UCEwU094KXlPKGIpek8oYyl8T35PbipWTyFRKk9PJ3kqUE8oeSR9Tyh6JVBPfk9nKX1PflAhMVdPZypXT35PaCVWT3IlWE9zJHRPdCR0T3olWU98JVpPIU88c08hUypZTyFfKlpPIWk+Vk8hbCR4TyNqPHlPJFclYE8kdDx1TyR2PHdPJHklYU8oVlRPKFlVTyhhJHVPKHkkfU8oeiVQT35PcCpgTyFbKl5PKFQqWE8haylPUH5QITF1TyNrKmFPfk8hbCpiT35PaCVWT3AlV09yJVhPcyR0T3QkdE96JVlPfCVaTyFPPHNPIVMke08hXyR8TyFpPlZPIWwkeE8jajx5TyRXJWBPJHQ8dU8kdjx3TyR5JWFPKFQqZE8oVlRPKFlVTyhhJHVPKHkkfU8oeiVQT35PIVsqZ08hWSlQUH5QITN0T3Iqc09zIW5PIVMqaU8hYipxTyFjKmtPIWQqa08hbCpiTyNbKnJPJWAqbU8oVSFsTyhWVE8oWVVPKGUhbU9+TyFeKnBPflAhNWlPI1MkZE9uKGBYIVEoYFgneShgWCh5KGBYKHooYFghXShgWCNgKGBYfk9nKGBYJE8oYFh+UCE2a09uKnhPI2Aqd09nKF9YIV0oX1h+TyFdKnlPZyheWH5PaiVkT2slZE9sJWRPKFQmWk9nKF5Qfk9zKnxPfk9nKX1PKFQmWk9+TyFsK1NPfk8oVCh2T35PcCtXTyFTJWhPIVsjaU8hXyVpTyF8XU8jaSNsTyNqI2lPKFQlZ08hayhzUH5PIWcjdk8jaytYT35PIVMlaE8hWytaTyFdKF5PIV8laU8oVCVnTyFZKHZQfk9zJ1tPIVMrXU8hWytbTyhWVE8oWVVPKGUofE9+TyFeKHhQflAhOXxPIV0rXk9hKVRYJ3opVFh+T1AkW09SI3pPWyRjT2okUk9yJGFPIVEjeU8hUyN7TyFsI3hPIXAkW08jUiRSTyNuJE9PI28kUE8jcCRQTyNxJFBPI3IkUU8jcyRSTyN0JFJPI3UkYk8jdiRTTyN4JFVPI3okV08jeyRYTyhhVk8ociRZTyh5I3xPKHojfU9+T2EhamEhXSFqYSd6IWphJ3chamEhWSFqYSFrIWphdiFqYSFfIWphJWkhamEhZyFqYX5QITp0T1Ijek8hUSN5TyFTI3tPIWwjeE8oYVZPUCFyYVshcmFqIXJhciFyYSFdIXJhIXAhcmEjUiFyYSNuIXJhI28hcmEjcCFyYSNxIXJhI3IhcmEjcyFyYSN0IXJhI3UhcmEjdiFyYSN4IXJhI3ohcmEjeyFyYShyIXJhKHkhcmEoeiFyYX5PYSFyYSd6IXJhJ3chcmEhWSFyYSFrIXJhdiFyYSFfIXJhJWkhcmEhZyFyYX5QIT1bT1Ijek8hUSN5TyFTI3tPIWwjeE8oYVZPUCF0YVshdGFqIXRhciF0YSFdIXRhIXAhdGEjUiF0YSNuIXRhI28hdGEjcCF0YSNxIXRhI3IhdGEjcyF0YSN0IXRhI3UhdGEjdiF0YSN4IXRhI3ohdGEjeyF0YShyIXRhKHkhdGEoeiF0YX5PYSF0YSd6IXRhJ3chdGEhWSF0YSFrIXRhdiF0YSFfIXRhJWkhdGEhZyF0YX5QIT9yT2glVk9uK2dPIV8nYE8laStmT35PIWcraU9hKF1YIV8oXVgneihdWCFdKF1Yfk9hJW5PIV9YTyd6JW5Pfk9oJVZPIWwlZU9+T2glVk8hbCVlTyhUJWdPfk8hZyN2TyNrKHhPfk9iK3RPJWordU8oVCtxTyhWVE8oWVVPIV4pWFB+TyFdK3ZPYClXWH5PWyt6T35PYCt7T35PIV8mUE8oVCVnTyhVIWxPYClXUH5PJWosT09+UDtTT2glVk8jYCxTT35PaCVWT24sVk8hXyR8T35PIV8sWE9+TyFRLFpPIV9YT35PJW4ldk9+TyF4LGBPfk9lLGVPfk9iLGZPKFQjbk8oVlRPKFlVTyFeKVZQfk9lJX1Pfk8laiFRTyhUJlpPflA9Z09bLGtPYCxqT35PUFlPUVlPU2ZPZHpPZXlPcGtPcllPc2tPdGtPemtPfFlPIU9ZTyFTV08hV2tPIVhrTyFpdU8hbFpPIW9ZTyFwWU8hcVlPIXN2TyF4eE8hfF1PJG5pTyVofU8oVlRPKFlVTyhhVk8ob1tPfk8hXyFlTyF1IWdPJFcha08oVCFkT35QIUZ5T2Asak9hJW5PJ3olbk9+T1BZT1FZT1NmT2Qhak9lIWlPcGtPcllPc2tPdGtPemtPfFlPIU9ZTyFTV08hV2tPIVhrTyFfIWVPIWl1TyFsWk8hb1lPIXBZTyFxWU8hc3ZPIXghaE8kVyFrTyRuaU8oVCFkTyhWVE8oWVVPKGFWTyhvW09+T2EscE9sIU9PIXV3TyVsIU9PJW0hT08lbiFPT35QIUljTyFsJm9Pfk8mXix2T35PIV8seE9+TyZvLHpPJnEse09QJmxhUSZsYVMmbGFZJmxhYSZsYWQmbGFlJmxhbCZsYXAmbGFyJmxhcyZsYXQmbGF6JmxhfCZsYSFPJmxhIVMmbGEhVyZsYSFYJmxhIV8mbGEhaSZsYSFsJmxhIW8mbGEhcCZsYSFxJmxhIXMmbGEhdSZsYSF4JmxhIXwmbGEkVyZsYSRuJmxhJWgmbGElaiZsYSVsJmxhJW0mbGElbiZsYSVxJmxhJXMmbGEldiZsYSV3JmxhJXkmbGEmVyZsYSZeJmxhJmAmbGEmYiZsYSZkJmxhJmcmbGEmbSZsYSZzJmxhJnUmbGEmdyZsYSZ5JmxhJnsmbGEndyZsYShUJmxhKFYmbGEoWSZsYShhJmxhKG8mbGEhXiZsYSZlJmxhYiZsYSZqJmxhfk8oVC1RT35PaCFlWCFdIVJYIV4hUlghZyFSWCFnIWVYIWwhZVgjYCFSWH5PIV0hZVghXiFlWH5QIyFpTyFnLVZPI2AtVU9oKGpYIV0jaFghXiNoWCFnKGpYIWwoalh+TyFdKGpYIV4oalh+UCMjW09oJVZPIWctWE8hbCVlTyFdIWFYIV4hYVh+T3Mhbk8hUyFvTyhWVE8oWVVPKGUhbU9+T1A8VU9RPFVPU2ZPZD5ST2UhaU9wa09yPFVPc2tPdGtPemtPfDxVTyFPPFVPIVNXTyFXa08hWGtPIV8hZU8haTxYTyFsWk8hbzxVTyFwPFVPIXE8VU8hczxZTyF1PF1PIXghaE8kVyFrTyRuPlBPKFZUTyhZVU8oYVZPKG9bT35PKFQ9UU9+UCMkcU8hXS1dTyFeKGlYfk8hXi1fT35PIWctVk8jYC1VTyFdI2hYIV4jaFh+TyFdLWBPIV4oeFh+TyFeLWJPfk8hYy1jTyFkLWNPKFUhbE9+UCMkYE8hXi1mT35QJ19Pbi1pTyFfJ2BPfk8hWS1uT35PcyF7YSFiIXthIWMhe2EhZCF7YSNUIXthI1Uhe2EjViF7YSNXIXthI1ghe2EjWyF7YSNdIXthKFUhe2EoViF7YShZIXthKGUhe2EobyF7YX5QISN2TyFwLXNPI2AtcU9+UENoTyFjLXVPIWQtdU8oVSFsT35QRFdPYSVuTyNgLXFPJ3olbk9+T2Elbk8hZyN2TyNgLXFPJ3olbk9+T2Elbk8hZyN2TyFwLXNPI2AtcU8neiVuTyhyJ3BPfk8oUCd4TyhRJ3hPKFItek9+T3Yte09+TyFZJ1dhIV0nV2F+UCE6dE8hWy5QTyFZJ1dYIV0nV1h+UCVbTyFdKFZPIVkoaGF+TyFZKGhhflBIUk8hXSheTyFZKHZhfk8hUyVoTyFbLlRPIV8laU8oVCVnTyFZJ15YIV0nXlh+TyNgLlZPIV0odGEhayh0YWEodGEneih0YX5PIWcjdk9+UCMsd08hXShqTyFrKHNhfk8hUyVoTyFfJWlPI2ouWk8oVCVnT35PcC5gTyFTJWhPIVsuXU8hXyVpTyF8XU8jaS5fTyNqLl1PKFQlZ08hXSdhWCFrJ2FYfk9SLmRPIWwjeE9+T2glVk9uLmdPIV8nYE8laS5mT35PYSNjaSFdI2NpJ3ojY2kndyNjaSFZI2NpIWsjY2l2I2NpIV8jY2klaSNjaSFnI2NpflAhOnRPbj5dTyFRKk9PJ3kqUE8oeSR9Tyh6JVBPfk8jayNfYWEjX2EjYCNfYSd6I19hIV0jX2EhayNfYSFfI19hIVkjX2F+UCMvc08jayhgWFAoYFhSKGBYWyhgWGEoYFhqKGBYcihgWCFTKGBYIWwoYFghcChgWCNSKGBYI24oYFgjbyhgWCNwKGBYI3EoYFgjcihgWCNzKGBYI3QoYFgjdShgWCN2KGBYI3goYFgjeihgWCN7KGBYJ3ooYFgoYShgWChyKGBYIWsoYFghWShgWCd3KGBYdihgWCFfKGBYJWkoYFghZyhgWH5QITZrTyFdLnRPIWsoa1h+UCE6dE8hay53T35PIVkueU9+T1AkW09SI3pPIVEjeU8hUyN7TyFsI3hPIXAkW08oYVZPWyNtaWEjbWlqI21pciNtaSFdI21pI1IjbWkjbyNtaSNwI21pI3EjbWkjciNtaSNzI21pI3QjbWkjdSNtaSN2I21pI3gjbWkjeiNtaSN7I21pJ3ojbWkociNtaSh5I21pKHojbWkndyNtaSFZI21pIWsjbWl2I21pIV8jbWklaSNtaSFnI21pfk8jbiNtaX5QIzNjTyNuJE9PflAjM2NPUCRbT1Ijek9yJGFPIVEjeU8hUyN7TyFsI3hPIXAkW08jbiRPTyNvJFBPI3AkUE8jcSRQTyhhVk9bI21pYSNtaWojbWkhXSNtaSNSI21pI3MjbWkjdCNtaSN1I21pI3YjbWkjeCNtaSN6I21pI3sjbWkneiNtaShyI21pKHkjbWkoeiNtaSd3I21pIVkjbWkhayNtaXYjbWkhXyNtaSVpI21pIWcjbWl+TyNyI21pflAjNlFPI3IkUU9+UCM2UU9QJFtPUiN6T1skY09qJFJPciRhTyFRI3lPIVMje08hbCN4TyFwJFtPI1IkUk8jbiRPTyNvJFBPI3AkUE8jcSRQTyNyJFFPI3MkUk8jdCRSTyN1JGJPKGFWT2EjbWkhXSNtaSN4I21pI3ojbWkjeyNtaSd6I21pKHIjbWkoeSNtaSh6I21pJ3cjbWkhWSNtaSFrI21pdiNtaSFfI21pJWkjbWkhZyNtaX5PI3YjbWl+UCM4b09QJFtPUiN6T1skY09qJFJPciRhTyFRI3lPIVMje08hbCN4TyFwJFtPI1IkUk8jbiRPTyNvJFBPI3AkUE8jcSRQTyNyJFFPI3MkUk8jdCRSTyN1JGJPI3YkU08oYVZPKHojfU9hI21pIV0jbWkjeiNtaSN7I21pJ3ojbWkociNtaSh5I21pJ3cjbWkhWSNtaSFrI21pdiNtaSFfI21pJWkjbWkhZyNtaX5PI3gkVU9+UCM7Vk8jeCNtaX5QIztWTyN2JFNPflAjOG9PUCRbT1Ijek9bJGNPaiRST3IkYU8hUSN5TyFTI3tPIWwjeE8hcCRbTyNSJFJPI24kT08jbyRQTyNwJFBPI3EkUE8jciRRTyNzJFJPI3QkUk8jdSRiTyN2JFNPI3gkVU8oYVZPKHkjfE8oeiN9T2EjbWkhXSNtaSN7I21pJ3ojbWkociNtaSd3I21pIVkjbWkhayNtaXYjbWkhXyNtaSVpI21pIWcjbWl+TyN6I21pflAjPXtPI3okV09+UCM9e09QXVhSXVhbXVhqXVhyXVghUV1YIVNdWCFsXVghcF1YI1JdWCNTXVgjYF1YI2tmWCNuXVgjb11YI3BdWCNxXVgjcl1YI3NdWCN0XVgjdV1YI3ZdWCN4XVgjel1YI3tdWCRRXVgoYV1YKHJdWCh5XVgoel1YIV1dWCFeXVh+TyRPXVh+UCNAak9QJFtPUiN6T1s8bU9qPGJPcjxrTyFRI3lPIVMje08hbCN4TyFwJFtPI1I8Yk8jbjxfTyNvPGBPI3A8YE8jcTxgTyNyPGFPI3M8Yk8jdDxiTyN1PGxPI3Y8Y08jeDxlTyN6PGdPI3s8aE8oYVZPKHIkWU8oeSN8Tyh6I31Pfk8kTy57T35QI0J3TyNTJGRPI2A8bk8kUTxuTyRPKGdYIV4oZ1h+UCEgdU9hJ2RhIV0nZGEneidkYSd3J2RhIWsnZGEhWSdkYXYnZGEhXydkYSVpJ2RhIWcnZGF+UCE6dE9bI21pYSNtaWojbWlyI21pIV0jbWkjUiNtaSNyI21pI3MjbWkjdCNtaSN1I21pI3YjbWkjeCNtaSN6I21pI3sjbWkneiNtaShyI21pJ3cjbWkhWSNtaSFrI21pdiNtaSFfI21pJWkjbWkhZyNtaX5PUCRbT1Ijek8hUSN5TyFTI3tPIWwjeE8hcCRbTyNuJE9PI28kUE8jcCRQTyNxJFBPKGFWTyh5I21pKHojbWl+UCNFeU9uPl1PIVEqT08neSpQTyh5JH1PKHolUE9QI21pUiNtaSFTI21pIWwjbWkhcCNtaSNuI21pI28jbWkjcCNtaSNxI21pKGEjbWl+UCNFeU8hXS9QT2cocFh+UCExV09nL1JPfk9hJFBpIV0kUGkneiRQaSd3JFBpIVkkUGkhayRQaXYkUGkhXyRQaSVpJFBpIWckUGl+UCE6dE8kXS9TTyRfL1NPfk8kXS9UTyRfL1RPfk8hZyloTyNgL1VPIV8kY1gkWiRjWCRdJGNYJF8kY1gkZiRjWH5PIVsvVk9+TyFfKWtPJFovWE8kXSlqTyRfKWpPJGYvWU9+TyFdPGlPIV4oZlh+UCNCd08hXi9aT35PIWcpaE8kZih7WH5PJGYvXU9+T3YvXk9+UCEmek94KXlPKGIpek8oYy9hT35PIVMvZE9+Tyh5JH1PbiVhYSFRJWFhJ3klYWEoeiVhYSFdJWFhI2AlYWF+T2clYWEkTyVhYX5QI0x7Tyh6JVBPbiVjYSFRJWNhJ3klY2EoeSVjYSFdJWNhI2AlY2F+T2clY2EkTyVjYX5QI01uTyFdZlghZ2ZYIWtmWCFrJHpYKHJmWH5QITBTT3AlV08hWy9tTyFdKF5PKFQvbE8hWSh2UCFZKVBQflAhMXVPcipzTyFiKnFPIWMqa08hZCprTyFsKmJPI1sqck8lYCptTyhVIWxPKFZUTyhZVU9+T3M8fU8hUy9uTyFbK1tPIV4qcE8oZTx8TyFeKHhQflAkIFtPIWsvb09+UCMvc08hXS9wTyFnI3ZPKHIncE8haylPWH5PIWsvdU9+T25vWCFRb1gneW9YKHlvWCh6b1h+TyFnI3ZPIWtvWH5QJCNPT3Avd08hUyVoTyFbKl5PIV8laU8oVCVnTyFrKU9Qfk8jay94T35PIVkkelghXSR6WCFnJVJYflAhMFNPIV0veU8hWSlQWH5QIy9zTyFnL3tPfk8hWS99T35PcGtPKFQwT09+UC5pT2glVk9yMFRPIWcjdk8hbCVlTyhyJ3BPfk8hZytpT35PYSVuTyFdMFhPJ3olbk9+TyFeMFpPflAhNWlPIWMwW08hZDBbTyhVIWxPflAjJGBPcyFuTyFTMF1PKFZUTyhZVU8oZSFtT35PI1swX09+T2clYWEhXSVhYSNgJWFhJE8lYWF+UCExV09nJWNhIV0lY2EjYCVjYSRPJWNhflAhMVdPaiVkT2slZE9sJWRPKFQmWk9nJ21YIV0nbVh+TyFdKnlPZyheYX5PZzBoT35PbjBqTyNgMGlPZyhfYSFdKF9hfk9SMGtPIVEwa08hUzBsTyNTJGRPbn1hJ3l9YSh5fWEoen1hIV19YSNgfWF+T2d9YSRPfWF+UCQoY08hUSpPTyd5KlBPbiRzYSh5JHNhKHokc2EhXSRzYSNgJHNhfk9nJHNhJE8kc2F+UCQpX08hUSpPTyd5KlBPbiR1YSh5JHVhKHokdWEhXSR1YSNgJHVhfk9nJHVhJE8kdWF+UCQqUU8jazBvT35PZyVUYSFdJVRhI2AlVGEkTyVUYX5QITFXTyFnI3ZPfk8jazByT35PIV0rXk9hKVRhJ3opVGF+T1Ijek8hUSN5TyFTI3tPIWwjeE8oYVZPUCFyaVshcmlqIXJpciFyaSFdIXJpIXAhcmkjUiFyaSNuIXJpI28hcmkjcCFyaSNxIXJpI3IhcmkjcyFyaSN0IXJpI3UhcmkjdiFyaSN4IXJpI3ohcmkjeyFyaShyIXJpKHkhcmkoeiFyaX5PYSFyaSd6IXJpJ3chcmkhWSFyaSFrIXJpdiFyaSFfIXJpJWkhcmkhZyFyaX5QJCtvT2glVk9yJVhPcyR0T3QkdE96JVlPfCVaTyFPPHNPIVMke08hXyR8TyFpPlZPIWwkeE8jajx5TyRXJWBPJHQ8dU8kdjx3TyR5JWFPKFZUTyhZVU8oYSR1Tyh5JH1PKHolUE9+T3Awe08lXTB8TyhUMHpPflAkLlZPIWcraU9hKF1hIV8oXWEneihdYSFdKF1hfk8jazFTT35PW11YIV1mWCFeZlh+TyFdMVRPIV4pWFh+TyFeMVZPfk9bMVdPfk9iMVlPKFQrcU8oVlRPKFlVT35PIV8mUE8oVCVnT2AndVghXSd1WH5PIV0rdk9gKVdhfk8hazFdT35QITp0T1sxYE9+T2AxYU9+TyNgMWZPfk9uMWlPIV8kfE9+TyhlKHxPIV4pVVB+T2glVk9uMXJPIV8xb08laTFxT35PWzF8TyFdMXpPIV4pVlh+TyFeMX1Pfk9gMlBPYSVuTyd6JW5Pfk8oVCNuTyhWVE8oWVVPfk8jUyRkTyNgJGVPJFEkZU9QKGdYUihnWFsoZ1hyKGdYIVEoZ1ghUyhnWCFdKGdYIWwoZ1ghcChnWCNSKGdYI24oZ1gjbyhnWCNwKGdYI3EoZ1gjcihnWCNzKGdYI3QoZ1gjdShnWCN2KGdYI3goZ1gjeihnWCN7KGdYKGEoZ1gocihnWCh5KGdYKHooZ1h+T2oyU08mWzJUT2EoZ1h+UCQzcE9qMlNPI2AkZU8mWzJUT35PYTJWT35QJVtPYTJYT35PJmUyW09QJmNpUSZjaVMmY2lZJmNpYSZjaWQmY2llJmNpbCZjaXAmY2lyJmNpcyZjaXQmY2l6JmNpfCZjaSFPJmNpIVMmY2khVyZjaSFYJmNpIV8mY2khaSZjaSFsJmNpIW8mY2khcCZjaSFxJmNpIXMmY2khdSZjaSF4JmNpIXwmY2kkVyZjaSRuJmNpJWgmY2klaiZjaSVsJmNpJW0mY2klbiZjaSVxJmNpJXMmY2kldiZjaSV3JmNpJXkmY2kmVyZjaSZeJmNpJmAmY2kmYiZjaSZkJmNpJmcmY2kmbSZjaSZzJmNpJnUmY2kmdyZjaSZ5JmNpJnsmY2kndyZjaShUJmNpKFYmY2koWSZjaShhJmNpKG8mY2khXiZjaWImY2kmaiZjaX5PYjJiTyFeMmBPJmoyYU9+UGBPIV9YTyFsMmRPfk8mcSx7T1AmbGlRJmxpUyZsaVkmbGlhJmxpZCZsaWUmbGlsJmxpcCZsaXImbGlzJmxpdCZsaXombGl8JmxpIU8mbGkhUyZsaSFXJmxpIVgmbGkhXyZsaSFpJmxpIWwmbGkhbyZsaSFwJmxpIXEmbGkhcyZsaSF1JmxpIXgmbGkhfCZsaSRXJmxpJG4mbGklaCZsaSVqJmxpJWwmbGklbSZsaSVuJmxpJXEmbGklcyZsaSV2JmxpJXcmbGkleSZsaSZXJmxpJl4mbGkmYCZsaSZiJmxpJmQmbGkmZyZsaSZtJmxpJnMmbGkmdSZsaSZ3JmxpJnkmbGkmeyZsaSd3JmxpKFQmbGkoViZsaShZJmxpKGEmbGkobyZsaSFeJmxpJmUmbGliJmxpJmombGl+TyFZMmpPfk8hXSFhYSFeIWFhflAjQndPcyFuTyFTIW9PIVsycE8oZSFtTyFdJ1hYIV4nWFh+UEBuTyFdLV1PIV4oaWF+TyFdJ19YIV4nX1h+UCE5fE8hXS1gTyFeKHhhfk8hXjJ3T35QJ19PYSVuTyNgM1FPJ3olbk9+T2Elbk8hZyN2TyNgM1FPJ3olbk9+T2Elbk8hZyN2TyFwM1VPI2AzUU8neiVuTyhyJ3BPfk9hJW5PJ3olbk9+UCE6dE8hXSRfT3YkcWF+TyFZJ1dpIV0nV2l+UCE6dE8hXShWTyFZKGhpfk8hXSheTyFZKHZpfk8hWSh3aSFdKHdpflAhOnRPIV0odGkhayh0aWEodGkneih0aX5QITp0TyNgM1dPIV0odGkhayh0aWEodGkneih0aX5PIV0oak8hayhzaX5PIVMlaE8hXyVpTyF8XU8jaTNdTyNqM1tPKFQlZ09+TyFTJWhPIV8laU8jajNbTyhUJWdPfk9uM2RPIV8nYE8laTNjT35PaCVWT24zZE8hXydgTyVpM2NPfk8jayVhYVAlYWFSJWFhWyVhYWElYWFqJWFhciVhYSFTJWFhIWwlYWEhcCVhYSNSJWFhI24lYWEjbyVhYSNwJWFhI3ElYWEjciVhYSNzJWFhI3QlYWEjdSVhYSN2JWFhI3glYWEjeiVhYSN7JWFhJ3olYWEoYSVhYShyJWFhIWslYWEhWSVhYSd3JWFhdiVhYSFfJWFhJWklYWEhZyVhYX5QI0x7TyNrJWNhUCVjYVIlY2FbJWNhYSVjYWolY2FyJWNhIVMlY2EhbCVjYSFwJWNhI1IlY2EjbiVjYSNvJWNhI3AlY2EjcSVjYSNyJWNhI3MlY2EjdCVjYSN1JWNhI3YlY2EjeCVjYSN6JWNhI3slY2EneiVjYShhJWNhKHIlY2EhayVjYSFZJWNhJ3clY2F2JWNhIV8lY2ElaSVjYSFnJWNhflAjTW5PI2slYWFQJWFhUiVhYVslYWFhJWFhaiVhYXIlYWEhUyVhYSFdJWFhIWwlYWEhcCVhYSNSJWFhI24lYWEjbyVhYSNwJWFhI3ElYWEjciVhYSNzJWFhI3QlYWEjdSVhYSN2JWFhI3glYWEjeiVhYSN7JWFhJ3olYWEoYSVhYShyJWFhIWslYWEhWSVhYSd3JWFhI2AlYWF2JWFhIV8lYWElaSVhYSFnJWFhflAjL3NPI2slY2FQJWNhUiVjYVslY2FhJWNhaiVjYXIlY2EhUyVjYSFdJWNhIWwlY2EhcCVjYSNSJWNhI24lY2EjbyVjYSNwJWNhI3ElY2EjciVjYSNzJWNhI3QlY2EjdSVjYSN2JWNhI3glY2EjeiVjYSN7JWNhJ3olY2EoYSVjYShyJWNhIWslY2EhWSVjYSd3JWNhI2AlY2F2JWNhIV8lY2ElaSVjYSFnJWNhflAjL3NPI2t9YVB9YVt9YWF9YWp9YXJ9YSFsfWEhcH1hI1J9YSNufWEjb31hI3B9YSNxfWEjcn1hI3N9YSN0fWEjdX1hI3Z9YSN4fWEjen1hI3t9YSd6fWEoYX1hKHJ9YSFrfWEhWX1hJ3d9YXZ9YSFffWElaX1hIWd9YX5QJChjTyNrJHNhUCRzYVIkc2FbJHNhYSRzYWokc2FyJHNhIVMkc2EhbCRzYSFwJHNhI1Ikc2EjbiRzYSNvJHNhI3Akc2EjcSRzYSNyJHNhI3Mkc2EjdCRzYSN1JHNhI3Ykc2EjeCRzYSN6JHNhI3skc2EneiRzYShhJHNhKHIkc2EhayRzYSFZJHNhJ3ckc2F2JHNhIV8kc2ElaSRzYSFnJHNhflAkKV9PI2skdWFQJHVhUiR1YVskdWFhJHVhaiR1YXIkdWEhUyR1YSFsJHVhIXAkdWEjUiR1YSNuJHVhI28kdWEjcCR1YSNxJHVhI3IkdWEjcyR1YSN0JHVhI3UkdWEjdiR1YSN4JHVhI3okdWEjeyR1YSd6JHVhKGEkdWEociR1YSFrJHVhIVkkdWEndyR1YXYkdWEhXyR1YSVpJHVhIWckdWF+UCQqUU8jayVUYVAlVGFSJVRhWyVUYWElVGFqJVRhciVUYSFTJVRhIV0lVGEhbCVUYSFwJVRhI1IlVGEjbiVUYSNvJVRhI3AlVGEjcSVUYSNyJVRhI3MlVGEjdCVUYSN1JVRhI3YlVGEjeCVUYSN6JVRhI3slVGEneiVUYShhJVRhKHIlVGEhayVUYSFZJVRhJ3clVGEjYCVUYXYlVGEhXyVUYSVpJVRhIWclVGF+UCMvc09hI2NxIV0jY3EneiNjcSd3I2NxIVkjY3EhayNjcXYjY3EhXyNjcSVpI2NxIWcjY3F+UCE6dE8hWzNsTyFdJ1lYIWsnWVh+UCVbTyFdLnRPIWsoa2F+TyFdLnRPIWsoa2F+UCE6dE8hWTNvT35PJE8hbmEhXiFuYX5QS2xPJE8hamEhXSFqYSFeIWphflAjQndPJE8hcmEhXiFyYX5QIT1bTyRPIXRhIV4hdGF+UCE/ck9nJ11YIV0nXVh+UCEsVE8hXS9QT2cocGF+T1NmTyFfNFRPJGQ0VU9+TyFeNFlPfk92NFpPflAjL3NPYSRtcSFdJG1xJ3okbXEndyRtcSFZJG1xIWskbXF2JG1xIV8kbXElaSRtcSFnJG1xflAhOnRPIVk0XU9+UCEmek8hUzReT35PIVEqT08neSpQTyh6JVBPbidpYSh5J2lhIV0naWEjYCdpYX5PZydpYSRPJ2lhflAlLWZPIVEqT08neSpQT24na2EoeSdrYSh6J2thIV0na2EjYCdrYX5PZydrYSRPJ2thflAlLlhPKHIkWU9+UCMvc08hWWZYIVkkelghXWZYIV0kelghZyVSWCNgZlh+UCEwU09wJVdPKFQ9V09+UCExdU9wNGJPIVMlaE8hWzRhTyFfJWlPKFQlZ08hXSdlWCFrJ2VYfk8hXS9wTyFrKU9hfk8hXS9wTyFnI3ZPIWspT2F+TyFdL3BPIWcjdk8ocidwTyFrKU9hfk9nJHxpIV0kfGkjYCR8aSRPJHxpflAhMVdPIVs0ak8hWSdnWCFdJ2dYflAhM3RPIV0veU8hWSlQYX5PIV0veU8hWSlQYX5QIy9zT1BdWFJdWFtdWGpdWHJdWCFRXVghU11YIVldWCFdXVghbF1YIXBdWCNSXVgjU11YI2BdWCNrZlgjbl1YI29dWCNwXVgjcV1YI3JdWCNzXVgjdF1YI3VdWCN2XVgjeF1YI3pdWCN7XVgkUV1YKGFdWChyXVgoeV1YKHpdWH5PaiVZWCFnJVlYflAlMk9PajRvTyFnI3ZPfk9oJVZPIWcjdk8hbCVlT35PaCVWT3I0dE8hbCVlTyhyJ3BPfk9yNHlPIWcjdk8ocidwT35PcyFuTyFTNHpPKFZUTyhZVU8oZSFtT35PKHkkfU9uJWFpIVElYWkneSVhaSh6JWFpIV0lYWkjYCVhaX5PZyVhaSRPJWFpflAlNW9PKHolUE9uJWNpIVElY2kneSVjaSh5JWNpIV0lY2kjYCVjaX5PZyVjaSRPJWNpflAlNmJPZyhfaSFdKF9pflAhMVdPI2A1UU9nKF9pIV0oX2l+UCExV08hazVWT35PYSRvcSFdJG9xJ3okb3EndyRvcSFZJG9xIWskb3F2JG9xIV8kb3ElaSRvcSFnJG9xflAhOnRPIVk1Wk9+TyFdNVtPIV8pUVh+UCMvc09hJHpYIV8kelglXl1YJ3okelghXSR6WH5QITBTTyVeNV9PYW9YIV9vWCd6b1ghXW9YflAkI09PcDVgTyhUI25Pfk8lXjVfT35PYjVmTyVqNWdPKFQrcU8oVlRPKFlVTyFdJ3RYIV4ndFh+TyFdMVRPIV4pWGF+T1s1a09+T2A1bE9+T1s1cE9+T2Elbk8neiVuT35QIy9zTyFdNXVPI2A1d08hXilVWH5PIV41eE9+T3I2T09zIW5PIVMqaU8hYiF5TyFjIXZPIWQhdk8hfDxWTyNUIXBPI1UhcE8jViFwTyNXIXBPI1ghcE8jWzV9TyNdIXpPKFUhbE8oVlRPKFlVTyhlIW1PKG8hc09+TyFeNXxPflAlO2VPbjZUTyFfMW9PJWk2U09+T2glVk9uNlRPIV8xb08laTZTT35PYjZbTyhUI25PKFZUTyhZVU8hXSdzWCFeJ3NYfk8hXTF6TyFeKVZhfk8oVlRPKFlVTyhlNl5Pfk9gNmJPfk9qNmVPJls2Zk9+UE5YTyFrNmdPflAlW09hNmlPfk9hNmlPflAlW09iMmJPIV42bk8majJhT35QYE8hZzZwT35PIWc2ck9oKGppIV0oamkhXihqaSFnKGppIWwoamlyKGppKHIoaml+TyFdI2hpIV4jaGl+UCNCd08jYDZzTyFdI2hpIV4jaGl+TyFdIWFpIV4hYWl+UCNCd09hJW5PI2A2fE8neiVuT35PYSVuTyFnI3ZPI2A2fE8neiVuT35PIV0odHEhayh0cWEodHEneih0cX5QITp0TyFdKGpPIWsoc3F+TyFTJWhPIV8laU8jajdUTyhUJWdPfk8hXydgTyVpN1dPfk9uN1tPIV8nYE8laTdXT35PI2snaWFQJ2lhUidpYVsnaWFhJ2lhaidpYXInaWEhUydpYSFsJ2lhIXAnaWEjUidpYSNuJ2lhI28naWEjcCdpYSNxJ2lhI3InaWEjcydpYSN0J2lhI3UnaWEjdidpYSN4J2lhI3onaWEjeydpYSd6J2lhKGEnaWEocidpYSFrJ2lhIVknaWEndydpYXYnaWEhXydpYSVpJ2lhIWcnaWF+UCUtZk8jaydrYVAna2FSJ2thWydrYWEna2FqJ2thcidrYSFTJ2thIWwna2EhcCdrYSNSJ2thI24na2EjbydrYSNwJ2thI3Ena2EjcidrYSNzJ2thI3Qna2EjdSdrYSN2J2thI3gna2EjeidrYSN7J2thJ3ona2EoYSdrYShyJ2thIWsna2EhWSdrYSd3J2thdidrYSFfJ2thJWkna2EhZydrYX5QJS5YTyNrJHxpUCR8aVIkfGlbJHxpYSR8aWokfGlyJHxpIVMkfGkhXSR8aSFsJHxpIXAkfGkjUiR8aSNuJHxpI28kfGkjcCR8aSNxJHxpI3IkfGkjcyR8aSN0JHxpI3UkfGkjdiR8aSN4JHxpI3okfGkjeyR8aSd6JHxpKGEkfGkociR8aSFrJHxpIVkkfGkndyR8aSNgJHxpdiR8aSFfJHxpJWkkfGkhZyR8aX5QIy9zTyNrJWFpUCVhaVIlYWlbJWFpYSVhaWolYWlyJWFpIVMlYWkhbCVhaSFwJWFpI1IlYWkjbiVhaSNvJWFpI3AlYWkjcSVhaSNyJWFpI3MlYWkjdCVhaSN1JWFpI3YlYWkjeCVhaSN6JWFpI3slYWkneiVhaShhJWFpKHIlYWkhayVhaSFZJWFpJ3clYWl2JWFpIV8lYWklaSVhaSFnJWFpflAlNW9PI2slY2lQJWNpUiVjaVslY2lhJWNpaiVjaXIlY2khUyVjaSFsJWNpIXAlY2kjUiVjaSNuJWNpI28lY2kjcCVjaSNxJWNpI3IlY2kjcyVjaSN0JWNpI3UlY2kjdiVjaSN4JWNpI3olY2kjeyVjaSd6JWNpKGElY2kociVjaSFrJWNpIVklY2kndyVjaXYlY2khXyVjaSVpJWNpIWclY2l+UCU2Yk8hXSdZYSFrJ1lhflAhOnRPIV0udE8hayhraX5PJE8jY2khXSNjaSFeI2NpflAjQndPUCRbT1Ijek8hUSN5TyFTI3tPIWwjeE8hcCRbTyhhVk9bI21paiNtaXIjbWkjUiNtaSNvI21pI3AjbWkjcSNtaSNyI21pI3MjbWkjdCNtaSN1I21pI3YjbWkjeCNtaSN6I21pI3sjbWkkTyNtaShyI21pKHkjbWkoeiNtaSFdI21pIV4jbWl+TyNuI21pflAlTmRPI248X09+UCVOZE9QJFtPUiN6T3I8a08hUSN5TyFTI3tPIWwjeE8hcCRbTyNuPF9PI288YE8jcDxgTyNxPGBPKGFWT1sjbWlqI21pI1IjbWkjcyNtaSN0I21pI3UjbWkjdiNtaSN4I21pI3ojbWkjeyNtaSRPI21pKHIjbWkoeSNtaSh6I21pIV0jbWkhXiNtaX5PI3IjbWl+UCYhbE8jcjxhT35QJiFsT1AkW09SI3pPWzxtT2o8Yk9yPGtPIVEjeU8hUyN7TyFsI3hPIXAkW08jUjxiTyNuPF9PI288YE8jcDxgTyNxPGBPI3I8YU8jczxiTyN0PGJPI3U8bE8oYVZPI3gjbWkjeiNtaSN7I21pJE8jbWkociNtaSh5I21pKHojbWkhXSNtaSFeI21pfk8jdiNtaX5QJiR0T1AkW09SI3pPWzxtT2o8Yk9yPGtPIVEjeU8hUyN7TyFsI3hPIXAkW08jUjxiTyNuPF9PI288YE8jcDxgTyNxPGBPI3I8YU8jczxiTyN0PGJPI3U8bE8jdjxjTyhhVk8oeiN9TyN6I21pI3sjbWkkTyNtaShyI21pKHkjbWkhXSNtaSFeI21pfk8jeDxlT35QJiZ1TyN4I21pflAmJnVPI3Y8Y09+UCYkdE9QJFtPUiN6T1s8bU9qPGJPcjxrTyFRI3lPIVMje08hbCN4TyFwJFtPI1I8Yk8jbjxfTyNvPGBPI3A8YE8jcTxgTyNyPGFPI3M8Yk8jdDxiTyN1PGxPI3Y8Y08jeDxlTyhhVk8oeSN8Tyh6I31PI3sjbWkkTyNtaShyI21pIV0jbWkhXiNtaX5PI3ojbWl+UCYpVU8jejxnT35QJilVT2EjfHkhXSN8eSd6I3x5J3cjfHkhWSN8eSFrI3x5diN8eSFfI3x5JWkjfHkhZyN8eX5QITp0T1sjbWlqI21pciNtaSNSI21pI3IjbWkjcyNtaSN0I21pI3UjbWkjdiNtaSN4I21pI3ojbWkjeyNtaSRPI21pKHIjbWkhXSNtaSFeI21pfk9QJFtPUiN6TyFRI3lPIVMje08hbCN4TyFwJFtPI248X08jbzxgTyNwPGBPI3E8YE8oYVZPKHkjbWkoeiNtaX5QJixRT24+Xk8hUSpPTyd5KlBPKHkkfU8oeiVQT1AjbWlSI21pIVMjbWkhbCNtaSFwI21pI24jbWkjbyNtaSNwI21pI3EjbWkoYSNtaX5QJixRTyNTJGRPUChgWFIoYFhbKGBYaihgWG4oYFhyKGBYIVEoYFghUyhgWCFsKGBYIXAoYFgjUihgWCNuKGBYI28oYFgjcChgWCNxKGBYI3IoYFgjcyhgWCN0KGBYI3UoYFgjdihgWCN4KGBYI3ooYFgjeyhgWCRPKGBYJ3koYFgoYShgWChyKGBYKHkoYFgoeihgWCFdKGBYIV4oYFh+TyRPJFBpIV0kUGkhXiRQaX5QI0J3TyRPIXJpIV4hcml+UCQrb09nJ11hIV0nXWF+UCExV08hXjduT35PIV0nZGEhXidkYX5QI0J3TyFZN29PflAjL3NPIWcjdk8ocidwTyFdJ2VhIWsnZWF+TyFdL3BPIWspT2l+TyFdL3BPIWcjdk8haylPaX5PZyR8cSFdJHxxI2AkfHEkTyR8cX5QITFXTyFZJ2dhIV0nZ2F+UCMvc08hZzd2T35PIV0veU8hWSlQaX5QIy9zTyFdL3lPIVkpUGl+TyFZN3lPfk9oJVZPcjhPTyFsJWVPKHIncE9+T2o4UU8hZyN2T35PcjhUTyFnI3ZPKHIncE9+TyFRKk9PJ3kqUE8oeiVQT24namEoeSdqYSFdJ2phI2AnamF+T2cnamEkTydqYX5QJjVSTyFRKk9PJ3kqUE9uJ2xhKHknbGEoeidsYSFdJ2xhI2AnbGF+T2cnbGEkTydsYX5QJjV0T2coX3EhXShfcX5QITFXTyNgOFZPZyhfcSFdKF9xflAhMVdPIVk4V09+T2clT3EhXSVPcSNgJU9xJE8lT3F+UCExV09hJG95IV0kb3kneiRveSd3JG95IVkkb3khayRveXYkb3khXyRveSVpJG95IWckb3l+UCE6dE8hZzZyT35PIV01W08hXylRYX5PIV8nYE9QJFRhUiRUYVskVGFqJFRhciRUYSFRJFRhIVMkVGEhXSRUYSFsJFRhIXAkVGEjUiRUYSNuJFRhI28kVGEjcCRUYSNxJFRhI3IkVGEjcyRUYSN0JFRhI3UkVGEjdiRUYSN4JFRhI3okVGEjeyRUYShhJFRhKHIkVGEoeSRUYSh6JFRhfk8laTdXT35QJjhmTyVeOFtPYSVbaSFfJVtpJ3olW2khXSVbaX5PYSNjeSFdI2N5J3ojY3kndyNjeSFZI2N5IWsjY3l2I2N5IV8jY3klaSNjeSFnI2N5flAhOnRPWzheT35PYjhgTyhUK3FPKFZUTyhZVU9+TyFdMVRPIV4pWGl+T2A4ZE9+TyhlKHxPIV0ncFghXidwWH5PIV01dU8hXilVYX5PIV44bk9+UCU7ZU8obyFzT35QJCZZTyNbOG9Pfk8hXzFvT35PIV8xb08laThxT35Pbjh0TyFfMW9PJWk4cU9+T1s4eU8hXSdzYSFeJ3Nhfk8hXTF6TyFeKVZpfk8hazh9T35PIWs5T09+TyFrOVJPfk8hazlST35QJVtPYTlUT35PIWc5VU9+TyFrOVZPfk8hXSh3aSFeKHdpflAjQndPYSVuTyNgOV9PJ3olbk9+TyFdKHR5IWsodHlhKHR5J3oodHl+UCE6dE8hXShqTyFrKHN5fk8laTliT35QJjhmTyFfJ2BPJWk5Yk9+TyNrJHxxUCR8cVIkfHFbJHxxYSR8cWokfHFyJHxxIVMkfHEhXSR8cSFsJHxxIXAkfHEjUiR8cSNuJHxxI28kfHEjcCR8cSNxJHxxI3IkfHEjcyR8cSN0JHxxI3UkfHEjdiR8cSN4JHxxI3okfHEjeyR8cSd6JHxxKGEkfHEociR8cSFrJHxxIVkkfHEndyR8cSNgJHxxdiR8cSFfJHxxJWkkfHEhZyR8cX5QIy9zTyNrJ2phUCdqYVInamFbJ2phYSdqYWonamFyJ2phIVMnamEhbCdqYSFwJ2phI1InamEjbidqYSNvJ2phI3AnamEjcSdqYSNyJ2phI3MnamEjdCdqYSN1J2phI3YnamEjeCdqYSN6J2phI3snamEneidqYShhJ2phKHInamEhaydqYSFZJ2phJ3cnamF2J2phIV8namElaSdqYSFnJ2phflAmNVJPI2snbGFQJ2xhUidsYVsnbGFhJ2xhaidsYXInbGEhUydsYSFsJ2xhIXAnbGEjUidsYSNuJ2xhI28nbGEjcCdsYSNxJ2xhI3InbGEjcydsYSN0J2xhI3UnbGEjdidsYSN4J2xhI3onbGEjeydsYSd6J2xhKGEnbGEocidsYSFrJ2xhIVknbGEndydsYXYnbGEhXydsYSVpJ2xhIWcnbGF+UCY1dE8jayVPcVAlT3FSJU9xWyVPcWElT3FqJU9xciVPcSFTJU9xIV0lT3EhbCVPcSFwJU9xI1IlT3EjbiVPcSNvJU9xI3AlT3EjcSVPcSNyJU9xI3MlT3EjdCVPcSN1JU9xI3YlT3EjeCVPcSN6JU9xI3slT3EneiVPcShhJU9xKHIlT3EhayVPcSFZJU9xJ3clT3EjYCVPcXYlT3EhXyVPcSVpJU9xIWclT3F+UCMvc08hXSdZaSFrJ1lpflAhOnRPJE8jY3EhXSNjcSFeI2NxflAjQndPKHkkfU9QJWFhUiVhYVslYWFqJWFhciVhYSFTJWFhIWwlYWEhcCVhYSNSJWFhI24lYWEjbyVhYSNwJWFhI3ElYWEjciVhYSNzJWFhI3QlYWEjdSVhYSN2JWFhI3glYWEjeiVhYSN7JWFhJE8lYWEoYSVhYShyJWFhIV0lYWEhXiVhYX5PbiVhYSFRJWFhJ3klYWEoeiVhYX5QJkl5Tyh6JVBPUCVjYVIlY2FbJWNhaiVjYXIlY2EhUyVjYSFsJWNhIXAlY2EjUiVjYSNuJWNhI28lY2EjcCVjYSNxJWNhI3IlY2EjcyVjYSN0JWNhI3UlY2EjdiVjYSN4JWNhI3olY2EjeyVjYSRPJWNhKGElY2EociVjYSFdJWNhIV4lY2F+T24lY2EhUSVjYSd5JWNhKHklY2F+UCZMUU9uPl5PIVEqT08neSpQTyh6JVBPflAmSXlPbj5eTyFRKk9PJ3kqUE8oeSR9T35QJkxRT1Iwa08hUTBrTyFTMGxPI1MkZE9QfWFbfWFqfWFufWFyfWEhbH1hIXB9YSNSfWEjbn1hI299YSNwfWEjcX1hI3J9YSNzfWEjdH1hI3V9YSN2fWEjeH1hI3p9YSN7fWEkT31hJ3l9YShhfWEocn1hKHl9YSh6fWEhXX1hIV59YX5PIVEqT08neSpQT1Akc2FSJHNhWyRzYWokc2FuJHNhciRzYSFTJHNhIWwkc2EhcCRzYSNSJHNhI24kc2EjbyRzYSNwJHNhI3Ekc2EjciRzYSNzJHNhI3Qkc2EjdSRzYSN2JHNhI3gkc2EjeiRzYSN7JHNhJE8kc2EoYSRzYShyJHNhKHkkc2EoeiRzYSFdJHNhIV4kc2F+TyFRKk9PJ3kqUE9QJHVhUiR1YVskdWFqJHVhbiR1YXIkdWEhUyR1YSFsJHVhIXAkdWEjUiR1YSNuJHVhI28kdWEjcCR1YSNxJHVhI3IkdWEjcyR1YSN0JHVhI3UkdWEjdiR1YSN4JHVhI3okdWEjeyR1YSRPJHVhKGEkdWEociR1YSh5JHVhKHokdWEhXSR1YSFeJHVhfk9uPl5PIVEqT08neSpQTyh5JH1PKHolUE9+T1AlVGFSJVRhWyVUYWolVGFyJVRhIVMlVGEhbCVUYSFwJVRhI1IlVGEjbiVUYSNvJVRhI3AlVGEjcSVUYSNyJVRhI3MlVGEjdCVUYSN1JVRhI3YlVGEjeCVUYSN6JVRhI3slVGEkTyVUYShhJVRhKHIlVGEhXSVUYSFeJVRhflAnJ1ZPJE8kbXEhXSRtcSFeJG1xflAjQndPJE8kb3EhXSRvcSFeJG9xflAjQndPIV45b09+TyRPOXBPflAhMVdPIWcjdk8hXSdlaSFrJ2Vpfk8hZyN2TyhyJ3BPIV0nZWkhaydlaX5PIV0vcE8haylPcX5PIVknZ2khXSdnaX5QIy9zTyFdL3lPIVkpUHF+T3I5d08hZyN2TyhyJ3BPfk9bOXlPIVk5eE9+UCMvc08hWTl4T35PajpQTyFnI3ZPfk9nKF95IV0oX3l+UCExV08hXSduYSFfJ25hflAjL3NPYSVbcSFfJVtxJ3olW3EhXSVbcX5QIy9zT1s6VU9+TyFdMVRPIV4pWHF+T2A6WU9+TyNgOlpPIV0ncGEhXidwYX5PIV01dU8hXilVaX5QI0J3TyFTOl1Pfk8hXzFvTyVpOmBPfk8oVlRPKFlVTyhlOmVPfk8hXTF6TyFeKVZxfk8hazpoT35PIWs6aU9+TyFrOmpPfk8hazpqT35QJVtPI2A6bU8hXSNoeSFeI2h5fk8hXSNoeSFeI2h5flAjQndPJWk6ck9+UCY4Zk8hXydgTyVpOnJPfk8kTyN8eSFdI3x5IV4jfHl+UCNCd09QJHxpUiR8aVskfGlqJHxpciR8aSFTJHxpIWwkfGkhcCR8aSNSJHxpI24kfGkjbyR8aSNwJHxpI3EkfGkjciR8aSNzJHxpI3QkfGkjdSR8aSN2JHxpI3gkfGkjeiR8aSN7JHxpJE8kfGkoYSR8aShyJHxpIV0kfGkhXiR8aX5QJydWTyFRKk9PJ3kqUE8oeiVQT1AnaWFSJ2lhWydpYWonaWFuJ2lhcidpYSFTJ2lhIWwnaWEhcCdpYSNSJ2lhI24naWEjbydpYSNwJ2lhI3EnaWEjcidpYSNzJ2lhI3QnaWEjdSdpYSN2J2lhI3gnaWEjeidpYSN7J2lhJE8naWEoYSdpYShyJ2lhKHknaWEhXSdpYSFeJ2lhfk8hUSpPTyd5KlBPUCdrYVIna2FbJ2thaidrYW4na2FyJ2thIVMna2EhbCdrYSFwJ2thI1Ina2EjbidrYSNvJ2thI3Ana2EjcSdrYSNyJ2thI3Mna2EjdCdrYSN1J2thI3Yna2EjeCdrYSN6J2thI3sna2EkTydrYShhJ2thKHIna2EoeSdrYSh6J2thIV0na2EhXidrYX5PKHkkfU9QJWFpUiVhaVslYWlqJWFpbiVhaXIlYWkhUSVhaSFTJWFpIWwlYWkhcCVhaSNSJWFpI24lYWkjbyVhaSNwJWFpI3ElYWkjciVhaSNzJWFpI3QlYWkjdSVhaSN2JWFpI3glYWkjeiVhaSN7JWFpJE8lYWkneSVhaShhJWFpKHIlYWkoeiVhaSFdJWFpIV4lYWl+Tyh6JVBPUCVjaVIlY2lbJWNpaiVjaW4lY2lyJWNpIVElY2khUyVjaSFsJWNpIXAlY2kjUiVjaSNuJWNpI28lY2kjcCVjaSNxJWNpI3IlY2kjcyVjaSN0JWNpI3UlY2kjdiVjaSN4JWNpI3olY2kjeyVjaSRPJWNpJ3klY2koYSVjaShyJWNpKHklY2khXSVjaSFeJWNpfk8kTyRveSFdJG95IV4kb3l+UCNCd08kTyNjeSFdI2N5IV4jY3l+UCNCd08hZyN2TyFdJ2VxIWsnZXF+TyFdL3BPIWspT3l+TyFZJ2dxIV0nZ3F+UCMvc09yOnxPIWcjdk8ocidwT35PWztRTyFZO1BPflAjL3NPIVk7UE9+T2coXyFSIV0oXyFSflAhMVdPYSVbeSFfJVt5J3olW3khXSVbeX5QIy9zTyFdMVRPIV4pWHl+TyFdNXVPIV4pVXF+TyhUO1hPfk8hXzFvTyVpO1tPfk8haztfT35PJWk7ZE9+UCY4Zk9QJHxxUiR8cVskfHFqJHxxciR8cSFTJHxxIWwkfHEhcCR8cSNSJHxxI24kfHEjbyR8cSNwJHxxI3EkfHEjciR8cSNzJHxxI3QkfHEjdSR8cSN2JHxxI3gkfHEjeiR8cSN7JHxxJE8kfHEoYSR8cShyJHxxIV0kfHEhXiR8cX5QJydWTyFRKk9PJ3kqUE8oeiVQT1AnamFSJ2phWydqYWonamFuJ2phcidqYSFTJ2phIWwnamEhcCdqYSNSJ2phI24namEjbydqYSNwJ2phI3EnamEjcidqYSNzJ2phI3QnamEjdSdqYSN2J2phI3gnamEjeidqYSN7J2phJE8namEoYSdqYShyJ2phKHknamEhXSdqYSFeJ2phfk8hUSpPTyd5KlBPUCdsYVInbGFbJ2xhaidsYW4nbGFyJ2xhIVMnbGEhbCdsYSFwJ2xhI1InbGEjbidsYSNvJ2xhI3AnbGEjcSdsYSNyJ2xhI3MnbGEjdCdsYSN1J2xhI3YnbGEjeCdsYSN6J2xhI3snbGEkTydsYShhJ2xhKHInbGEoeSdsYSh6J2xhIV0nbGEhXidsYX5PUCVPcVIlT3FbJU9xaiVPcXIlT3EhUyVPcSFsJU9xIXAlT3EjUiVPcSNuJU9xI28lT3EjcCVPcSNxJU9xI3IlT3EjcyVPcSN0JU9xI3UlT3EjdiVPcSN4JU9xI3olT3EjeyVPcSRPJU9xKGElT3EociVPcSFdJU9xIV4lT3F+UCcnVk9nJWUhWiFdJWUhWiNgJWUhWiRPJWUhWn5QITFXTyFZO2hPflAjL3NPcjtpTyFnI3ZPKHIncE9+T1s7a08hWTtoT35QIy9zTyFdJ3BxIV4ncHF+UCNCd08hXSNoIVohXiNoIVp+UCNCd08jayVlIVpQJWUhWlIlZSFaWyVlIVphJWUhWmolZSFaciVlIVohUyVlIVohXSVlIVohbCVlIVohcCVlIVojUiVlIVojbiVlIVojbyVlIVojcCVlIVojcSVlIVojciVlIVojcyVlIVojdCVlIVojdSVlIVojdiVlIVojeCVlIVojeiVlIVojeyVlIVoneiVlIVooYSVlIVoociVlIVohayVlIVohWSVlIVondyVlIVojYCVlIVp2JWUhWiFfJWUhWiVpJWUhWiFnJWUhWn5QIy9zT3I7dE8hZyN2TyhyJ3BPfk8hWTt1T35QIy9zT3I7fE8hZyN2TyhyJ3BPfk8hWTt9T35QIy9zT1AlZSFaUiVlIVpbJWUhWmolZSFaciVlIVohUyVlIVohbCVlIVohcCVlIVojUiVlIVojbiVlIVojbyVlIVojcCVlIVojcSVlIVojciVlIVojcyVlIVojdCVlIVojdSVlIVojdiVlIVojeCVlIVojeiVlIVojeyVlIVokTyVlIVooYSVlIVoociVlIVohXSVlIVohXiVlIVp+UCcnVk9yPFFPIWcjdk8ocidwT35PdihmWH5QMXFPIVElck9+UCEpW08oVSFsT35QISlbTyFZZlghXWZYI2BmWH5QJTJPT1BdWFJdWFtdWGpdWHJdWCFRXVghU11YIV1dWCFdZlghbF1YIXBdWCNSXVgjU11YI2BdWCNgZlgja2ZYI25dWCNvXVgjcF1YI3FdWCNyXVgjc11YI3RdWCN1XVgjdl1YI3hdWCN6XVgje11YJFFdWChhXVgocl1YKHldWCh6XVh+TyFnZlgha11YIWtmWChyZlh+UCdMVE9QPFVPUTxVT1NmT2Q+Uk9lIWlPcGtPcjxVT3NrT3RrT3prT3w8VU8hTzxVTyFTV08hV2tPIVhrTyFfWE8haTxYTyFsWk8hbzxVTyFwPFVPIXE8VU8hczxZTyF1PF1PIXghaE8kVyFrTyRuPlBPKFQpXU8oVlRPKFlVTyhhVk8ob1tPfk8hXTxpTyFeJHFhfk9oJVZPcCVXT3IlWE9zJHRPdCR0T3olWU98JVpPIU88dE8hUyR7TyFfJHxPIWk+V08hbCR4TyNqPHpPJFclYE8kdDx2TyR2PHhPJHklYU8oVCh2TyhWVE8oWVVPKGEkdU8oeSR9Tyh6JVBPfk9sKWRPflAoIXlPciFlWChyIWVYflAjIWlPcihqWChyKGpYflAjI1tPIV5dWCFeZlh+UCdMVE8hWWZYIVkkelghXWZYIV0kelgjYGZYflAhMFNPI2s8Xk9+TyFnI3ZPI2s8Xk9+TyNgPG5Pfk9qPGJPfk8jYD1PTyFdKHdYIV4od1h+TyNgPG5PIV0odVghXih1WH5PI2s9UE9+T2c9Uk9+UCExV08jaz1YT35PI2s9WU9+T2c9Uk8oVCZaT35PIWcjdk8jaz1aT35PIWcjdk8jaz1QT35PJE89W09+UCNCd08jaz1dT35PI2s9Xk9+TyNrPWNPfk8jaz1kT35PI2s9ZU9+TyNrPWZPfk8kTz1nT35QITFXTyRPPWhPflAhMVdPbD1zT35QN2VPayNTI1QjVSNXI1gjWyNpI2ojdSRuJHQkdiR5JV0lXiVoJWklaiVxJXMldiV3JXkle34oT1QjbyFYJ3woVSNwcyNuI3FyIVEnfSRdJ30oVCRfKGV+XCIsXG4gIGdvdG86IFwiJDlZKV1QUFBQUFApXlBQKWFQKXJQK1cvXVBQUFA2bVBQN1RQUD1RUFBQQHRQQV5QQV5QUFBBXlBDZlBBXlBBXlBBXlBDalBDb1BEXlBJV1BQUElbUFBQUElbTF9QUFBMZU1WUElbUElbUFAhIGVJW1BQUElbUElbUCEjbElbUCEnUyEoWCEoYlAhKVUhKVkhKVUhLGdQUFBQUFBQIS1XIShYUFAhLWghL1lQITJpSVtJWyEybiE1eiE6aCE6aCE+Z1BQUCE+b0lbUFBQUFBQUFBQIUJPUCFDXVBQSVshRG5QSVtQSVtJW0lbSVtJW1BJWyFGUVAhSVtQIUxiUCFMZiFMcCFMdCFMdFAhSVhQIUx4IUx4UCMhT1AjIVNJW1BJWyMhWSMlX0NqQV5QQV5QQV5BXlAjJmxBXkFeIylPQV4jK3ZBXiMuU0FeQV4jLnIjMVcjMVcjMV0jMWYjMVcjMXFQUCMxV1BBXiMyWkFeIzZZQV5BXjZtUFBQIzpfUFBQIzp4Izp4UCM6eFAjO2AjOnhQUCM7ZlAjO11QIztdIzt5IztdIzxlIzxrIzxuKWFQIzxxKWFQIzx6Izx6Izx6UClhUClhUClhUClhUFApYVAjPVEjPVRQIz1UKWFQIz1YUCM9W1ApYVApYVApYVApYVApYVApYSlhUFAjPWIjPWgjPXMjPXkjPlAjPlYjPl0jPmsjPnEjPnsjP1IjP10jP2MjP3MjP3kjQGsjQH0jQVQjQVojQWkjQk8jQ3MjRFIjRFkjRXQjRlMjR3QjSFMjSFkjSGAjSGYjSHAjSHYjSHwjSVcjSWojSXBQUFBQUFBQUFBQUCNJdlBQUFBQUFAjSmsjTXgkIGIkIGkkIHFQUFAkJ11QJCdmJCpfJDB4JDB7JDFPJDF9JDJRJDJYJDJhUCQyZyQyalAkM1ckM1skNFMkNWIkNWckNX1QUCQ2UyQ2WSQ2XiQ2YSQ2ZSQ2aSQ3ZSQ3fCQ4ZSQ4aSQ4bCQ4byQ4eSQ4fCQ5USQ5VVIhfFJvcU9Yc3QhWiNkJW0mciZ0JnUmdyxzLHgyWzJfWSF2USdgLWUxbzV7USV0dlElfHlRJlR8USZqIVZTJ1chZS1dUSdmIWlTJ2whciF5VSprJHwqWipvUStvJX1TK3wmViZXUSxkJmRRLWMnX1EtbSdnUS11J21RMFsqcVExYixPUTF5LGVSPHs8WSVTZE9QV1hZWnN0dXZ3IVohYCFnIW8jUyNXI1ojZCNvI3UjeCN7JE8kUCRRJFIkUyRUJFUkViRXJFgkXyRhJGUlbSV0JlImayZuJnImdCZ1JncmeydUJ2IncihUKFYoXShkKHgoeilPKX0qaStYK10scCxzLHgtaS1xLlAuVi50LnsvbjBdMGwwcjFTMXIyUzJUMlYyWDJbMl8yYTNRM1czbDR6NlQ2ZTZmNmk2fDh0OVQ5X1MjcV08ViFyKV8kWiRuJ1gpcy1VLVgvVjJwNFQ1dzZzOlo6bTxVPFg8WTxdPF48XzxgPGE8YjxjPGQ8ZTxmPGc8aDxpPGs8bjx7PU89UD1SPVo9Wz1lPWY+U1UrUCVdPHM8dFErdCZQUSxmJmdRLG0mb1EweCtnUTB9K2lRMVkrdVEyUixrUTNgLmdRNWAwfFE1ZjFUUTZbMXpRN1kzZFE4YDVnUjllN1snUWtPUFdYWVpzdHV2dyFaIWAhZyFvI1MjVyNaI2QjbyN1I3gjeyRPJFAkUSRSJFMkVCRVJFYkVyRYJFokXyRhJGUkbiVtJXQmUiZrJm4mbyZyJnQmdSZ3JnsnVCdYJ2IncihUKFYoXShkKHgoeilPKXMpfSppK1grXStnLHAscyx4LVUtWC1pLXEuUC5WLmcudC57L1YvbjBdMGwwcjFTMXIyUzJUMlYyWDJbMl8yYTJwM1EzVzNkM2w0VDR6NXc2VDZlNmY2aTZzNnw3Wzh0OVQ5XzpaOm08VTxYPFk8XTxePF88YDxhPGI8YzxkPGU8ZjxnPGg8aTxrPG48ez1PPVA9Uj1aPVs9ZT1mPlMhUyFuUSFyIXYheSF6JHwnVydfJ2AnbCdtJ24qaypvKnEqci1dLWMtZS11MFswXzFvNXs1fSVbJHRpI3YkYiRjJGQkeCR7JU8lUSVeJV8lYyl5KlIqVCpWKlkqYSpnKncqeCtmK2ksUyxWLmYvUC9kL20veC95L3swYDBiMGkwajBvMWYxaTFxM2M0XjRfNGo0bzVRNVs1XzZTN1c3djhROFY4WzhxOWI5cDl5OlA6YDpyO1E7WztkO2s8bDxtPG88cDxxPHI8dTx2PHc8eDx5PHo9Uz1UPVU9Vj1YPVk9XT1ePV89YD1hPWI9Yz1kPWc9aD5QPlg+WT5dPl5RJlh8USdVIWVTJ1slaS1gUSt0JlBRLFAmV1EsZiZnUTBuK1NRMVkrdVExXyt7UTJRLGpRMlIsa1E1ZjFUUTVvMWFRNlsxelE2XzF8UTZgMlBROGA1Z1E4YzVsUTh8NmJROlg4ZFE6Zjh5UTtWOllSPH0qWnJuT1hzdCFWIVojZCVtJmkmciZ0JnUmdyxzLHgyWzJfUixoJmsmel5PUFhZc3R1dnd6IVohYCFnIWohbyNTI2QjbyN1I3gjeyRPJFAkUSRSJFMkVCRVJFYkVyRYJFokXyRhJGUkbiVtJXQmUiZrJm4mbyZyJnQmdSZ3JnsnVCdiJ3IoVihdKGQoeCh6KU8pcyl9KmkrWCtdK2cscCxzLHgtVS1YLWktcS5QLlYuZy50LnsvVi9uMF0wbDByMVMxcjJTMlQyVjJYMlsyXzJhMnAzUTNXM2QzbDRUNHo1dzZUNmU2ZjZpNnM2fDdbOHQ5VDlfOlo6bTxVPFg8WTxdPF48XzxgPGE8YjxjPGQ8ZTxmPGc8aDxpPGs8bjx7PU89UD1SPVo9Wz1lPWY+Uj5TWyNdV1ojVyNaJ1goVCFiJWptI2gjaSNsJHglZSVoKF4oaChpKGoqWSpeKmIrWitbK14sby1WLlQuWi5bLl0uXy9tL3AyZDNbM100YTZyN1RRJXd4USV7eVcmUXwmViZXLE9RJl8hVFEnYyFoUSdlIWlRKHEjc1MrbiV8JX1RK3ImUFEsXyZiUSxjJmRTLWwnZidnUS5pKHJRMVIrb1ExWCt1UTFaK3ZRMV4relExdCxgUzF4LGQsZVEyfC1tUTVlMVRRNWkxV1E1bjFgUTZaMXlROF81Z1E4YjVrUThmNXBROlQ4XlI7VDpVIVUkemkkZCVPJVElXiVfJWMqUipUKmEqdyp4L1AveDBgMGIwaTBqMG80XzVROFY5cD5QPlg+WSFeJXl5IWkhdSV7JXwlfSdWJ2UnZidnJ2sndSpqK24rby1ZLWwtbS10MFIwVTFSMnUyfDNUNHI0czR2N305e1EraCV3USxUJltRLFcmXVEsYiZkUS5oKHFRMXMsX1UxdyxjLGQsZVEzZS5pUTZVMXRTNlkxeDF5UTh4NlojZj5UI3YkYiRjJHgkeyl5KlYqWSpnK2YraSxTLFYuZi9kL20veS97MWYxaTFxM2M0XjRqNG81WzVfNlM3Vzd2OFE4WzhxOWI5eTpQOmA6cjtRO1s7ZDtrPG88cTx1PHc8eT1TPVU9WD1dPV89YT1jPWc+XT5ebz5VPGw8bTxwPHI8djx4PHo9VD1WPVk9Xj1gPWI9ZD1oVyVUaSVWKnk+UFMmWyFRJmlRJl0hUlEmXiFTVSp9JVslZD1zUixSJlklXSVTaSN2JGIkYyRkJHgkeyVPJVElXiVfJWMpeSpSKlQqVipZKmEqZyp3KngrZitpLFMsVi5mL1AvZC9tL3gveS97MGAwYjBpMGowbzFmMWkxcTNjNF40XzRqNG81UTVbNV82UzdXN3Y4UThWOFs4cTliOXA5eTpQOmA6cjtRO1s7ZDtrPGw8bTxvPHA8cTxyPHU8djx3PHg8eTx6PVM9VD1VPVY9WD1ZPV09Xj1fPWA9YT1iPWM9ZD1nPWg+UD5YPlk+XT5eVCl6JHUpe1YrUCVdPHM8dFcnWyFlJWkqWi1gUyh9I3kjelErYyVyUSt5JlNTLmIobShuUTFqLFhRNVQwa1I4aTV1J1FrT1BXWFlac3R1dnchWiFgIWchbyNTI1cjWiNkI28jdSN4I3skTyRQJFEkUiRTJFQkVSRWJFckWCRaJF8kYSRlJG4lbSV0JlImayZuJm8mciZ0JnUmdyZ7J1QnWCdiJ3IoVChWKF0oZCh4KHopTylzKX0qaStYK10rZyxwLHMseC1VLVgtaS1xLlAuVi5nLnQuey9WL24wXTBsMHIxUzFyMlMyVDJWMlgyWzJfMmEycDNRM1czZDNsNFQ0ejV3NlQ2ZTZmNmk2czZ8N1s4dDlUOV86WjptPFU8WDxZPF08XjxfPGA8YTxiPGM8ZDxlPGY8ZzxoPGk8azxuPHs9Tz1QPVI9Wj1bPWU9Zj5TJGkkXmMjWSNlJXElcyV1KFMoWSh0KHkpUilTKVQpVSlWKVcpWClZKVopWyleKWApYilnKXErZCt4LVoteC19LlMuVS5zLnYuei58Ln0vTy9iMHAyazJuM08zVjNrM3AzcTNyM3MzdDN1M3YzdzN4M3kzejN7M3w0UDRRNFg1WDVjNnU2ezdRN2E3YjdrN2w4azlYOV05ZzltOW46bztXO2A8Vz12VCNUViNVJ1JrT1BXWFlac3R1dnchWiFgIWchbyNTI1cjWiNkI28jdSN4I3skTyRQJFEkUiRTJFQkVSRWJFckWCRaJF8kYSRlJG4lbSV0JlImayZuJm8mciZ0JnUmdyZ7J1QnWCdiJ3IoVChWKF0oZCh4KHopTylzKX0qaStYK10rZyxwLHMseC1VLVgtaS1xLlAuVi5nLnQuey9WL24wXTBsMHIxUzFyMlMyVDJWMlgyWzJfMmEycDNRM1czZDNsNFQ0ejV3NlQ2ZTZmNmk2czZ8N1s4dDlUOV86WjptPFU8WDxZPF08XjxfPGA8YTxiPGM8ZDxlPGY8ZzxoPGk8azxuPHs9Tz1QPVI9Wj1bPWU9Zj5TUSdZIWVSMnEtXSFXIW5RIWUhciF2IXkheiR8J1cnXydgJ2wnbSduKloqaypvKnEqci1dLWMtZS11MFswXzFvNXs1fVIxbCxabnFPWHN0IVojZCVtJnImdCZ1Jncscyx4MlsyX1EmeSFeUSd2IXhTKHMjdTxeUStsJXpRLF0mX1EsXiZhUS1qJ2RRLXcnb1Mucih4PVBTMHErWD1aUTFQK21RMW4sW1EyYyx6UTJlLHtRMm0tV1Eyei1rUTJ9LW9TNVkwcj1lUTVhMVFTNWQxUz1mUTZ0Mm9RNngye1E2fTNTUThdNWJROVk2dlE5WjZ5UTleN09SOmw5ViRkJF1jI1kjZSVzJXUoUyhZKHQoeSlSKVMpVClVKVYpVylYKVkpWilbKV4pYCliKWcpcStkK3gtWi14LX0uUy5VLnMudi56Ln0vTy9iMHAyazJuM08zVjNrM3AzcTNyM3MzdDN1M3YzdzN4M3kzejN7M3w0UDRRNFg1WDVjNnU2ezdRN2E3YjdrN2w4azlYOV05ZzltOW46bztXO2A8Vz12UyhvI3AnaVEpUCN6UytiJXEufFMuYyhuKHBSM14uZCdRa09QV1hZWnN0dXZ3IVohYCFnIW8jUyNXI1ojZCNvI3UjeCN7JE8kUCRRJFIkUyRUJFUkViRXJFgkWiRfJGEkZSRuJW0ldCZSJmsmbiZvJnImdCZ1JncmeydUJ1gnYidyKFQoVihdKGQoeCh6KU8pcyl9KmkrWCtdK2cscCxzLHgtVS1YLWktcS5QLlYuZy50LnsvVi9uMF0wbDByMVMxcjJTMlQyVjJYMlsyXzJhMnAzUTNXM2QzbDRUNHo1dzZUNmU2ZjZpNnM2fDdbOHQ5VDlfOlo6bTxVPFg8WTxdPF48XzxgPGE8YjxjPGQ8ZTxmPGc8aDxpPGs8bjx7PU89UD1SPVo9Wz1lPWY+U1MjcV08VlEmdCFYUSZ1IVlRJnchW1EmeCFdUjJaLHZRJ2EhaFErZSV3US1oJ2NTLmUocStoUTJ4LWdXM2IuaC5pMHcweVE2dzJ5VzdVM18zYTNlNV5VOWE3VjdYN1pVOnE5YzlkOWZTO2I6cDpzUTtwO2NSO3g7cVUhd1EnYC1lVDV5MW81eyFRX09YWmBzdCFWIVojZCNoJWUlbSZpJmsmciZ0JnUmdyhqLHMseC5bMlsyX10hcFEhcidgLWUxbzV7VCNxXTxWJV57T1BXWFlac3R1dnchWiFgIWchbyNTI1cjWiNkI28jdSN4I3skTyRQJFEkUiRTJFQkVSRWJFckWCRfJGEkZSVtJXQmUiZrJm4mbyZyJnQmdSZ3JnsnVCdiJ3IoVChWKF0oZCh4KHopTyl9KmkrWCtdK2cscCxzLHgtaS1xLlAuVi5nLnQuey9uMF0wbDByMVMxcjJTMlQyVjJYMlsyXzJhM1EzVzNkM2w0ejZUNmU2ZjZpNnw3Wzh0OVQ5X1MofSN5I3pTLmIobShuIXM9bCRaJG4nWClzLVUtWC9WMnA0VDV3NnM6WjptPFU8WDxZPF08XjxfPGA8YTxiPGM8ZDxlPGY8ZzxoPGk8azxuPHs9Tz1QPVI9Wj1bPWU9Zj5TVSRmZClfLG1TKHAjcCdpVSp2JVIodzRPVTBtK08ubjdnUTVeMHhRN1YzYFE5ZDdZUjpzOWVtIXRRIXIhdiF5IXonYCdsJ20nbi1lLXUxbzV7NX1RJ3QhdVMoZiNnMlVTLXMnayd3US9zKl1RMFIqalEzVS12UTRmL3RRNHIwVFE0czBVUTR4MF5RN3I0YFM3fTR0NHZTOFI0eTR7UTlyN3NROXY3eVE5ezhPUTpROFRTOns5dzl4UztnOnw7UFM7cztoO2lTO3s7dDt1UzxQO3w7fVI8UzxRUSN3YlEncyF1UyhlI2cyVVMoZyNtK1dRK1klZlEraiV4UStwJk9VLXInayd0J3dRLlcoZlUvcipdKmAvd1EwUypqUTBWKmxRMU8ra1ExdSxhUzNSLXMtdlEzWi5gUzRlL3MvdFE0bjBQUzRxMFIwXlE0dTBXUTZXMXZRN1AzVVM3cTRgNGJRN3U0ZlU3fDRyNHg0e1E4UDR3UTh2NlhTOXE3cjdzUTl1N3lROX04UlE6TzhTUTpjOHdROnk5clM6ejl2OXhRO1M6UVE7XjpkUztmOns7UFM7cjtnO2hTO3o7czt1UzxPO3s7fVE8UjxQUTxUPFNRPW89alE9ez10Uj18PXVWIXdRJ2AtZSVeYU9QV1hZWnN0dXZ3IVohYCFnIW8jUyNXI1ojZCNvI3UjeCN7JE8kUCRRJFIkUyRUJFUkViRXJFgkXyRhJGUlbSV0JlImayZuJm8mciZ0JnUmdyZ7J1QnYidyKFQoVihdKGQoeCh6KU8pfSppK1grXStnLHAscyx4LWktcS5QLlYuZy50LnsvbjBdMGwwcjFTMXIyUzJUMlYyWDJbMl8yYTNRM1czZDNsNHo2VDZlNmY2aTZ8N1s4dDlUOV9TI3d6IWohcj1pJFokbidYKXMtVS1YL1YycDRUNXc2czpaOm08VTxYPFk8XTxePF88YDxhPGI8YzxkPGU8ZjxnPGg8aTxrPG48ez1PPVA9Uj1aPVs9ZT1mPlNSPW8+UiVeYk9QV1hZWnN0dXZ3IVohYCFnIW8jUyNXI1ojZCNvI3UjeCN7JE8kUCRRJFIkUyRUJFUkViRXJFgkXyRhJGUlbSV0JlImayZuJm8mciZ0JnUmdyZ7J1QnYidyKFQoVihdKGQoeCh6KU8pfSppK1grXStnLHAscyx4LWktcS5QLlYuZy50LnsvbjBdMGwwcjFTMXIyUzJUMlYyWDJbMl8yYTNRM1czZDNsNHo2VDZlNmY2aTZ8N1s4dDlUOV9RJWZqIV4leHkhaSF1JXslfCV9J1YnZSdmJ2cnayd1KmorbitvLVktbC1tLXQwUjBVMVIydTJ8M1Q0cjRzNHY3fTl7UyZPeiFqUStrJXlRLGEmZFcxdixiLGMsZCxlVTZYMXcxeDF5Uzh3Nlk2WlE6ZDh4IXI9aiRaJG4nWClzLVUtWC9WMnA0VDV3NnM6WjptPFU8WDxZPF08XjxfPGA8YTxiPGM8ZDxlPGY8ZzxoPGk8azxuPHs9Tz1QPVI9Wj1bPWU9Zj5TUT10PlFSPXU+UiVRZU9QWFlzdHV2dyFaIWAhZyFvI1MjZCNvI3UjeCN7JE8kUCRRJFIkUyRUJFUkViRXJFgkXyRhJGUlbSV0JlImayZuJnImdCZ1JncmeydUJ2IncihWKF0oZCh4KHopTyl9KmkrWCtdK2cscCxzLHgtaS1xLlAuVi5nLnQuey9uMF0wbDByMVMxcjJTMlQyVjJYMlsyXzJhM1EzVzNkM2w0ejZUNmU2ZjZpNnw3Wzh0OVQ5X1kjYldaI1cjWihUIWIlam0jaCNpI2wkeCVlJWgoXihoKGkoaipZKl4qYitaK1srXixvLVYuVC5aLlsuXS5fL20vcDJkM1szXTRhNnI3VFEsbiZvIXA9ayRaJG4pcy1VLVgvVjJwNFQ1dzZzOlo6bTxVPFg8WTxdPF48XzxgPGE8YjxjPGQ8ZTxmPGc8aDxpPGs8bjx7PU89UD1SPVo9Wz1lPWY+U1I9bidYVSddIWUlaSpaUjJzLWAlU2RPUFdYWVpzdHV2dyFaIWAhZyFvI1MjVyNaI2QjbyN1I3gjeyRPJFAkUSRSJFMkVCRVJFYkVyRYJF8kYSRlJW0ldCZSJmsmbiZyJnQmdSZ3JnsnVCdiJ3IoVChWKF0oZCh4KHopTyl9KmkrWCtdLHAscyx4LWktcS5QLlYudC57L24wXTBsMHIxUzFyMlMyVDJWMlgyWzJfMmEzUTNXM2w0ejZUNmU2ZjZpNnw4dDlUOV8hcilfJFokbidYKXMtVS1YL1YycDRUNXc2czpaOm08VTxYPFk8XTxePF88YDxhPGI8YzxkPGU8ZjxnPGg8aTxrPG48ez1PPVA9Uj1aPVs9ZT1mPlNRLG0mb1EweCtnUTNgLmdRN1kzZFI5ZTdbIWIkVGMjWSVxKFMoWSh0KHkpWilbKWApZyt4LXgtfS5TLlUucy52L2IwcDNPM1YzazN7NVg1YzZ7N1E3YTldOm88VyFQPGQpXilxLVoufDJrMm4zcDN5M3o0UDRYNnU3YjdrN2w4azlYOWc5bTluO1c7YD12IWYkVmMjWSVxKFMoWSh0KHkpVylYKVopWylgKWcreC14LX0uUy5VLnMudi9iMHAzTzNWM2szezVYNWM2ezdRN2E5XTpvPFchVDxmKV4pcS1aLnwyazJuM3AzdjN3M3kzejRQNFg2dTdiN2s3bDhrOVg5ZzltOW47VztgPXYhXiRaYyNZJXEoUyhZKHQoeSlgKWcreC14LX0uUy5VLnMudi9iMHAzTzNWM2szezVYNWM2ezdRN2E5XTpvPFdRNF8va3o+UyleKXEtWi58MmsybjNwNFA0WDZ1N2I3azdsOGs5WDlnOW05bjtXO2A9dlE+WD5aUj5ZPlsnUWtPUFdYWVpzdHV2dyFaIWAhZyFvI1MjVyNaI2QjbyN1I3gjeyRPJFAkUSRSJFMkVCRVJFYkVyRYJFokXyRhJGUkbiVtJXQmUiZrJm4mbyZyJnQmdSZ3JnsnVCdYJ2IncihUKFYoXShkKHgoeilPKXMpfSppK1grXStnLHAscyx4LVUtWC1pLXEuUC5WLmcudC57L1YvbjBdMGwwcjFTMXIyUzJUMlYyWDJbMl8yYTJwM1EzVzNkM2w0VDR6NXc2VDZlNmY2aTZzNnw3Wzh0OVQ5XzpaOm08VTxYPFk8XTxePF88YDxhPGI8YzxkPGU8ZjxnPGg8aTxrPG48ez1PPVA9Uj1aPVs9ZT1mPlNTJG9oJHBSNFUvVSdYZ09QV1hZWmhzdHV2dyFaIWAhZyFvI1MjVyNaI2QjbyN1I3gjeyRPJFAkUSRSJFMkVCRVJFYkVyRYJFokXyRhJGUkbiRwJW0ldCZSJmsmbiZvJnImdCZ1JncmeydUJ1gnYidyKFQoVihdKGQoeCh6KU8pcyl9KmkrWCtdK2cscCxzLHgtVS1YLWktcS5QLlYuZy50LnsvVS9WL24wXTBsMHIxUzFyMlMyVDJWMlgyWzJfMmEycDNRM1czZDNsNFQ0ejV3NlQ2ZTZmNmk2czZ8N1s4dDlUOV86WjptPFU8WDxZPF08XjxfPGA8YTxiPGM8ZDxlPGY8ZzxoPGk8azxuPHs9Tz1QPVI9Wj1bPWU9Zj5TVCRrZiRxUSRpZlMpaiRsKW5SKXYkcVQkamYkcVQpbCRsKW4nWGhPUFdYWVpoc3R1dnchWiFgIWchbyNTI1cjWiNkI28jdSN4I3skTyRQJFEkUiRTJFQkVSRWJFckWCRaJF8kYSRlJG4kcCVtJXQmUiZrJm4mbyZyJnQmdSZ3JnsnVCdYJ2IncihUKFYoXShkKHgoeilPKXMpfSppK1grXStnLHAscyx4LVUtWC1pLXEuUC5WLmcudC57L1UvVi9uMF0wbDByMVMxcjJTMlQyVjJYMlsyXzJhMnAzUTNXM2QzbDRUNHo1dzZUNmU2ZjZpNnM2fDdbOHQ5VDlfOlo6bTxVPFg8WTxdPF48XzxgPGE8YjxjPGQ8ZTxmPGc8aDxpPGs8bjx7PU89UD1SPVo9Wz1lPWY+U1Qkb2gkcFEkcmhSKXUkcCVeak9QV1hZWnN0dXZ3IVohYCFnIW8jUyNXI1ojZCNvI3UjeCN7JE8kUCRRJFIkUyRUJFUkViRXJFgkXyRhJGUlbSV0JlImayZuJm8mciZ0JnUmdyZ7J1QnYidyKFQoVihdKGQoeCh6KU8pfSppK1grXStnLHAscyx4LWktcS5QLlYuZy50LnsvbjBdMGwwcjFTMXIyUzJUMlYyWDJbMl8yYTNRM1czZDNsNHo2VDZlNmY2aTZ8N1s4dDlUOV8hcz5RJFokbidYKXMtVS1YL1YycDRUNXc2czpaOm08VTxYPFk8XTxePF88YDxhPGI8YzxkPGU8ZjxnPGg8aTxrPG48ez1PPVA9Uj1aPVs9ZT1mPlMjZ2xPUFhac3QhWiFgIW8jUyNkI28jeyRuJW0mayZuJm8mciZ0JnUmdyZ7J1QnYilPKXMqaStdK2cscCxzLHgtaS5nL1YvbjBdMGwxcjJTMlQyVjJYMlsyXzJhM2Q0VDR6NlQ2ZTZmNmk3Wzh0OVQhVSVSaSRkJU8lUSVeJV8lYypSKlQqYSp3KngvUC94MGAwYjBpMGowbzRfNVE4VjlwPlA+WD5ZI2YodyN2JGIkYyR4JHspeSpWKlkqZytmK2ksUyxWLmYvZC9tL3kvezFmMWkxcTNjNF40ajRvNVs1XzZTN1c3djhROFs4cTliOXk6UDpgOnI7UTtbO2Q7azxvPHE8dTx3PHk9Uz1VPVg9XT1fPWE9Yz1nPl0+XlErVCVhUS9jKk9vNE88bDxtPHA8cjx2PHg8ej1UPVY9WT1ePWA9Yj1kPWghVSR5aSRkJU8lUSVeJV8lYypSKlQqYSp3KngvUC94MGAwYjBpMGowbzRfNVE4VjlwPlA+WD5ZUSpjJHpVKmwkfCpaKm9RK1UlYlEwVyptI2Y9cSN2JGIkYyR4JHspeSpWKlkqZytmK2ksUyxWLmYvZC9tL3kvezFmMWkxcTNjNF40ajRvNVs1XzZTN1c3djhROFs4cTliOXk6UDpgOnI7UTtbO2Q7azxvPHE8dTx3PHk9Uz1VPVg9XT1fPWE9Yz1nPl0+Xm49cjxsPG08cDxyPHY8eDx6PVQ9Vj1ZPV49YD1iPWQ9aFE9dz5UUT14PlVRPXk+VlI9ej5XIVUlUmkkZCVPJVElXiVfJWMqUipUKmEqdyp4L1AveDBgMGIwaTBqMG80XzVROFY5cD5QPlg+WSNmKHcjdiRiJGMkeCR7KXkqVipZKmcrZitpLFMsVi5mL2QvbS95L3sxZjFpMXEzYzReNGo0bzVbNV82UzdXN3Y4UThbOHE5Yjl5OlA6YDpyO1E7WztkO2s8bzxxPHU8dzx5PVM9VT1YPV09Xz1hPWM9Zz5dPl5vNE88bDxtPHA8cjx2PHg8ej1UPVY9WT1ePWA9Yj1kPWhub09Yc3QhWiNkJW0mciZ0JnUmdyxzLHgyWzJfUypmJHsqWVEtUidPUS1TJ1FSNGkveSVbJVNpI3YkYiRjJGQkeCR7JU8lUSVeJV8lYyl5KlIqVCpWKlkqYSpnKncqeCtmK2ksUyxWLmYvUC9kL20veC95L3swYDBiMGkwajBvMWYxaTFxM2M0XjRfNGo0bzVRNVs1XzZTN1c3djhROFY4WzhxOWI5cDl5OlA6YDpyO1E7WztkO2s8bDxtPG88cDxxPHI8dTx2PHc8eDx5PHo9Uz1UPVU9Vj1YPVk9XT1ePV89YD1hPWI9Yz1kPWc9aD5QPlg+WT5dPl5RLFUmXVExaCxXUTVzMWdSOGg1dFYqbiR8Kloqb1UqbiR8Kloqb1Q1ejFvNXtTMFAqaS9uUTR3MF1UOFM0ejpdUStqJXhRMFYqbFExTytrUTF1LGFRNlcxdlE4djZYUTpjOHdSO146ZCFVJU9pJGQlTyVRJV4lXyVjKlIqVCphKncqeC9QL3gwYDBiMGkwajBvNF81UThWOXA+UD5YPll4KlIkdillKlMqdStWL3YwZDBlNFI0ZzVSNVM1VzdwOFU6Ujp4PXA9fT5PUzBgKnQwYSNmPG8jdiRiJGMkeCR7KXkqVipZKmcrZitpLFMsVi5mL2QvbS95L3sxZjFpMXEzYzReNGo0bzVbNV82UzdXN3Y4UThbOHE5Yjl5OlA6YDpyO1E7WztkO2s8bzxxPHU8dzx5PVM9VT1YPV09Xz1hPWM9Zz5dPl5uPHA8bDxtPHA8cjx2PHg8ej1UPVY9WT1ePWA9Yj1kPWghZD1TKHUpYypbKmUuai5tLnEvXy9rL3wwdjFlM2g0WzRoNGw1cjddN2A3dzd6OFg4Wjl0OXw6Uzp9O1I7ZTtqO3Y+Wj5bYD1UM303YzdmN2o5aDp0Onc7eVM9Xy5sM2lUPWA3ZTlrIVUlUWkkZCVPJVElXiVfJWMqUipUKmEqdyp4L1AveDBgMGIwaTBqMG80XzVROFY5cD5QPlg+WXwqVCR2KWUqVSp0K1YvZy92MGQwZTRSNGc0fDVSNVM1VzdwOFU6Ujp4PXA9fT5PUzBiKnUwYyNmPHEjdiRiJGMkeCR7KXkqVipZKmcrZitpLFMsVi5mL2QvbS95L3sxZjFpMXEzYzReNGo0bzVbNV82UzdXN3Y4UThbOHE5Yjl5OlA6YDpyO1E7WztkO2s8bzxxPHU8dzx5PVM9VT1YPV09Xz1hPWM9Zz5dPl5uPHI8bDxtPHA8cjx2PHg8ej1UPVY9WT1ePWA9Yj1kPWghaD1VKHUpYypbKmUuay5sLnEvXy9rL3wwdjFlM2YzaDRbNGg0bDVyN103XjdgN3c3ejhYOFo5dDl8OlM6fTtSO2U7ajt2Plo+W2Q9VjN9N2Q3ZTdqOWg5aTp0OnU6dzt5Uz1hLm0zalQ9YjdmOWxybk9Yc3QhViFaI2QlbSZpJnImdCZ1Jncscyx4MlsyX1EmZiFVUixwJm9ybk9Yc3QhViFaI2QlbSZpJnImdCZ1Jncscyx4MlsyX1ImZiFVUSxZJl5SMWQsUnNuT1hzdCFWIVojZCVtJmkmciZ0JnUmdyxzLHgyWzJfUTFwLF9TNlIxczF0VThwNlA2UTZVUzpfOHI4c1M7WTpeOmFRO207WlI7dztuUSZtIVZSLGkmaVI2XzF8UjpmOHlXJlF8JlYmVyxPUjFaK3ZRJnIhV1IscyZzUix5JnhUMl0seDJfUix9JnlRLHwmeVIyZix9USd5IXtSLXkneVNzT3RRI2RYVCVwcyNkUSNPVFIneyNPUSNSVVInfSNSUSl7JHVSL2Ape1EjVVZSKFEjVVEjWFdVKFcjWChYLlFRKFgjWVIuUShZUS1eJ1lSMnItXlEudSh5UzNtLnUzblIzbi52US1lJ2BSMnYtZVkhclEnYC1lMW81e1InaiFyUS9RKWVSNFMvUVUjX1claCpZVShfI18oYC5SUShgI2BSLlIoWlEtYSddUjJ0LWF0YE9Yc3QhViFaI2QlbSZpJmsmciZ0JnUmdyxzLHgyWzJfUyNoWiVlVSNyYCNoLltSLlsoalEoayNqUS5YKGdXLmEoay5YM1g3UlEzWC5ZUjdSM1lRKW4kbFIvVyluUSRwaFIpdCRwUSRgY1UpYSRgLXw8alEtfDxXUjxqKXFRL3EqXVc0Yy9xNGQ3dDlzVTRkL3Ivcy90Uzd0NGU0ZlI5czd1JGUqUSR2KHUpYyllKlsqZSp0KnUrUStSK1YubC5tLm8ucC5xL18vZy9pL2svdi98MGQwZTB2MWUzZjNnM2gzfTRSNFs0ZzRoNGw0fDVPNVI1UzVXNXI3XTdeN183YDdlN2Y3aDdpN2o3cDd3N3o4VThYOFo5aDlpOWo5dDl8OlI6Uzp0OnU6djp3Ong6fTtSO2U7ajt2O3k9cD19Pk8+Wj5bUS96KmVVNGsvejRtN3hRNG0vfFI3eDRsUypvJHwqWlIwWSpveCpTJHYpZSp0KnUrVi92MGQwZTRSNGc1UjVTNVc3cDhVOlI6eD1wPX0+TyFkLmoodSljKlsqZS5sLm0ucS9fL2svfDB2MWUzaDRbNGg0bDVyN103YDd3N3o4WDhaOXQ5fDpTOn07UjtlO2o7dj5aPltVL2gqUy5qN2NhN2MzfTdlN2Y3ajloOnQ6dzt5UTBhKnRRM2kubFU0fTBhM2k5a1I5azdlfCpVJHYpZSp0KnUrVi9nL3YwZDBlNFI0ZzR8NVI1UzVXN3A4VTpSOng9cD19Pk8haC5rKHUpYypbKmUubC5tLnEvXy9rL3wwdjFlM2YzaDRbNGg0bDVyN103XjdgN3c3ejhYOFo5dDl8OlM6fTtSO2U7ajt2Plo+W1UvaipVLms3ZGU3ZDN9N2U3ZjdqOWg5aTp0OnU6dzt5UTBjKnVRM2oubVU1UDBjM2o5bFI5bDdmUSp6JVVSMGcqelE1XTB2UjhZNV1RK18la1IwdStfUTV2MWpTOGo1djpbUjpbOGtRLFsmX1IxbSxbUTV7MW9SOG01e1ExeyxmUzZdMXs4elI4ejZfUTFVK3JXNWgxVTVqOGE6VlE1ajFYUThhNWlSOlY4YlErdyZRUjFbK3dRMl8seFI2bTJfWXJPWHN0I2RRJnYhWlErYSVtUSxyJnJRLHQmdFEsdSZ1USx3JndRMlksc1MyXSx4Ml9SNmwyW1Elb3BRJnohX1EmfSFhUSdQIWJRJ1IhY1EncSF1UStgJWxRK2wlelEsUSZYUSxoJm1RLVAmfFctcCdrJ3MndCd3US13J29RMFgqblExUCttUTFjLFBTMk8saSxsUTJnLU9RMmgtUlEyaS1TUTJ9LW9XM1Atci1zLXYteFE1YTFRUTVtMV9RNXExZVE2VjF1UTZhMlFRNmsyWlU2ejNPM1IzVVE2fTNTUThdNWJROGU1b1E4ZzVyUThsNXpROHU2V1E4ezZgUzlbNns3UFE5XjdPUTpXOGNROmI4dlE6Zzh8UTpuOV1RO1U6WFE7XTpjUTthOm9RO2w7VlI7bzteUSV6eVEnZCFpUSdvIXVVK20leyV8JX1RLVcnVlUtaydlJ2YnZ1MtbydrJ3VRMFEqalMxUStuK29RMm8tWVMyey1sLW1RM1MtdFM0cDBSMFVRNWIxUlE2djJ1UTZ5MnxRN08zVFU3ezRyNHM0dlE5ejd9UjtPOXtTJHdpPlBSKnslVlUlVWklVj5QUjBmKnlRJHZpUyh1I3YraVMpYyRiJGNRKWUkZFEqWyR4UyplJHsqWVEqdCVPUSp1JVFRK1ElXlErUiVfUStWJWNRLmw8b1EubTxxUS5vPHVRLnA8d1EucTx5US9fKXlRL2cqUlEvaSpUUS9rKlZRL3YqYVMvfCpnL21RMGQqd1EwZSp4bDB2K2YsVi5mMWkxcTNjNlM3VzhxOWI6YDpyO1s7ZFExZSxTUTNmPVNRM2c9VVEzaD1YUzN9PGw8bVE0Ui9QUzRbL2Q0XlE0Zy94UTRoL3lRNGwve1E0fDBgUTVPMGJRNVIwaVE1UzBqUTVXMG9RNXIxZlE3XT1dUTdePV9RN189YVE3YD1jUTdlPHBRN2Y8clE3aDx2UTdpPHhRN2o8elE3cDRfUTd3NGpRN3o0b1E4VTVRUThYNVtROFo1X1E5aD1ZUTlpPVRROWo9VlE5dDd2UTl8OFFROlI4VlE6UzhbUTp0PV5ROnU9YFE6dj1iUTp3PWRROng5cFE6fTl5UTtSOlBRO2U9Z1E7ajtRUTt2O2tRO3k9aFE9cD5QUT19PlhRPk8+WVE+Wj5dUj5bPl5RK08lXVEubjxzUjdnPHRucE9Yc3QhWiNkJW0mciZ0JnUmdyxzLHgyWzJfUSFmUFMjZlojb1EmfCFgVydoIW8qaTBdNHpRKFAjU1EpUSN7USlyJG5TLGwmayZuUSxxJm9RLU8me1MtVCdUL25RLWcnYlEueClPUS9bKXNRMHMrXVEweStnUTJXLHBRMnktaVEzYS5nUTRXL1ZRNVUwbFE2UTFyUTZjMlNRNmQyVFE2aDJWUTZqMlhRNm8yYVE3WjNkUTdtNFRROHM2VFE5UDZlUTlRNmZROVM2aVE5ZjdbUTphOHRSOms5VCNbY09QWFpzdCFaIWAhbyNkI28jeyVtJmsmbiZvJnImdCZ1JncmeydUJ2IpTyppK10rZyxwLHMseC1pLmcvbjBdMGwxcjJTMlQyVjJYMlsyXzJhM2Q0ejZUNmU2ZjZpN1s4dDlUUSNZV1EjZVlRJXF1USVzdlMldXchZ1MoUyNXKFZRKFkjWlEodCN1USh5I3hRKVIkT1EpUyRQUSlUJFFRKVUkUlEpViRTUSlXJFRRKVgkVVEpWSRWUSlaJFdRKVskWFEpXiRaUSlgJF9RKWIkYVEpZyRlVylxJG4pcy9WNFRRK2QldFEreCZSUy1aJ1gycFEteCdyUy19KFQuUFEuUyhdUS5VKGRRLnMoeFEudih6US56PFVRLnw8WFEufTxZUS9PPF1RL2IpfVEwcCtYUTJrLVVRMm4tWFEzTy1xUTNWLlZRM2sudFEzcDxeUTNxPF9RM3I8YFEzczxhUTN0PGJRM3U8Y1EzdjxkUTN3PGVRM3g8ZlEzeTxnUTN6PGhRM3sue1EzfDxrUTRQPG5RNFE8e1E0WDxpUTVYMHJRNWMxU1E2dT1PUTZ7M1FRN1EzV1E3YTNsUTdiPVBRN2s9UlE3bD1aUThrNXdROVg2c1E5XTZ8UTlnPVtROW09ZVE5bj1mUTpvOV9RO1c6WlE7YDptUTxXI1NSPXY+U1IjW1dSJ1ohZWwhdFEhciF2IXkheidgJ2wnbSduLWUtdTFvNXs1fVMnViFlLV1VKmokfCpaKm9TLVknVydfUzBVKmsqcVEwXipyUTJ1LWNRNHYwW1I0ezBfUih7I3hRIWZRVC1kJ2AtZV0hcVEhcidgLWUxbzV7USNwXVInaTxWUilmJGRZIXVRJ2AtZTFvNXtRJ2shclMndSF2IXlTJ3chejV9Uy10J2wnbVEtdiduUjNULXVUI2taJWVTI2paJWVTJWttLG9VKGcjaCNpI2xTLlkoaChpUS5eKGpRMHQrXlEzWS5aVTNaLlsuXS5fUzdTM1szXVI5YDdUZCNeVyNXI1olaChUKF4qWStaLlQvbXIjZ1ptI2gjaSNsJWUoaChpKGorXi5aLlsuXS5fM1szXTdUUypdJHgqYlEvdCpeUTJVLG9RMmwtVlE0YC9wUTZxMmRRN3M0YVE5VzZyVD1tJ1grW1YjYVclaCpZVSNgVyVoKllTKFUjVyheVShaI1orWi9tUy1bJ1grW1QuTyhULlRWJ14hZSVpKlpRJGxmUil4JHFUKW0kbCluUjRWL1VUKl8keCpiVCpoJHsqWVEwdytmUTFnLFZRM18uZlE1dDFpUTZQMXFRN1gzY1E4cjZTUTljN1dROl44cVE6cDliUTtaOmBRO2M6clE7bjtbUjtxO2RucU9Yc3QhWiNkJW0mciZ0JnUmdyxzLHgyWzJfUSZsIVZSLGgmaXRtT1hzdCFVIVYhWiNkJW0maSZyJnQmdSZ3LHMseDJbMl9SLG8mb1QlbG0sb1IxayxYUixnJmdRJlV8Uyt9JlYmV1IxXixPUitzJlBUJnAhVyZzVCZxIVcmc1QyXix4Ml9cIixcbiAgbm9kZU5hbWVzOiBcIuKaoCBBcml0aE9wIEFyaXRoT3AgPy4gSlNYU3RhcnRUYWcgTGluZUNvbW1lbnQgQmxvY2tDb21tZW50IFNjcmlwdCBIYXNoYmFuZyBFeHBvcnREZWNsYXJhdGlvbiBleHBvcnQgU3RhciBhcyBWYXJpYWJsZU5hbWUgU3RyaW5nIEVzY2FwZSBmcm9tIDsgZGVmYXVsdCBGdW5jdGlvbkRlY2xhcmF0aW9uIGFzeW5jIGZ1bmN0aW9uIFZhcmlhYmxlRGVmaW5pdGlvbiA+IDwgVHlwZVBhcmFtTGlzdCBpbiBvdXQgY29uc3QgVHlwZURlZmluaXRpb24gZXh0ZW5kcyBUaGlzVHlwZSB0aGlzIExpdGVyYWxUeXBlIEFyaXRoT3AgTnVtYmVyIEJvb2xlYW5MaXRlcmFsIFRlbXBsYXRlVHlwZSBJbnRlcnBvbGF0aW9uRW5kIEludGVycG9sYXRpb24gSW50ZXJwb2xhdGlvblN0YXJ0IE51bGxUeXBlIG51bGwgVm9pZFR5cGUgdm9pZCBUeXBlb2ZUeXBlIHR5cGVvZiBNZW1iZXJFeHByZXNzaW9uIC4gUHJvcGVydHlOYW1lIFsgVGVtcGxhdGVTdHJpbmcgRXNjYXBlIEludGVycG9sYXRpb24gc3VwZXIgUmVnRXhwIF0gQXJyYXlFeHByZXNzaW9uIFNwcmVhZCAsIH0geyBPYmplY3RFeHByZXNzaW9uIFByb3BlcnR5IGFzeW5jIGdldCBzZXQgUHJvcGVydHlEZWZpbml0aW9uIEJsb2NrIDogTmV3VGFyZ2V0IG5ldyBOZXdFeHByZXNzaW9uICkgKCBBcmdMaXN0IFVuYXJ5RXhwcmVzc2lvbiBkZWxldGUgTG9naWNPcCBCaXRPcCBZaWVsZEV4cHJlc3Npb24geWllbGQgQXdhaXRFeHByZXNzaW9uIGF3YWl0IFBhcmVudGhlc2l6ZWRFeHByZXNzaW9uIENsYXNzRXhwcmVzc2lvbiBjbGFzcyBDbGFzc0JvZHkgTWV0aG9kRGVjbGFyYXRpb24gRGVjb3JhdG9yIEAgTWVtYmVyRXhwcmVzc2lvbiBQcml2YXRlUHJvcGVydHlOYW1lIENhbGxFeHByZXNzaW9uIFR5cGVBcmdMaXN0IENvbXBhcmVPcCA8IGRlY2xhcmUgUHJpdmFjeSBzdGF0aWMgYWJzdHJhY3Qgb3ZlcnJpZGUgUHJpdmF0ZVByb3BlcnR5RGVmaW5pdGlvbiBQcm9wZXJ0eURlY2xhcmF0aW9uIHJlYWRvbmx5IGFjY2Vzc29yIE9wdGlvbmFsIFR5cGVBbm5vdGF0aW9uIEVxdWFscyBTdGF0aWNCbG9jayBGdW5jdGlvbkV4cHJlc3Npb24gQXJyb3dGdW5jdGlvbiBQYXJhbUxpc3QgUGFyYW1MaXN0IEFycmF5UGF0dGVybiBPYmplY3RQYXR0ZXJuIFBhdHRlcm5Qcm9wZXJ0eSBQcml2YWN5IHJlYWRvbmx5IEFycm93IE1lbWJlckV4cHJlc3Npb24gQmluYXJ5RXhwcmVzc2lvbiBBcml0aE9wIEFyaXRoT3AgQXJpdGhPcCBBcml0aE9wIEJpdE9wIENvbXBhcmVPcCBpbnN0YW5jZW9mIHNhdGlzZmllcyBDb21wYXJlT3AgQml0T3AgQml0T3AgQml0T3AgTG9naWNPcCBMb2dpY09wIENvbmRpdGlvbmFsRXhwcmVzc2lvbiBMb2dpY09wIExvZ2ljT3AgQXNzaWdubWVudEV4cHJlc3Npb24gVXBkYXRlT3AgUG9zdGZpeEV4cHJlc3Npb24gQ2FsbEV4cHJlc3Npb24gSW5zdGFudGlhdGlvbkV4cHJlc3Npb24gVGFnZ2VkVGVtcGxhdGVFeHByZXNzaW9uIER5bmFtaWNJbXBvcnQgaW1wb3J0IEltcG9ydE1ldGEgSlNYRWxlbWVudCBKU1hTZWxmQ2xvc2VFbmRUYWcgSlNYU2VsZkNsb3NpbmdUYWcgSlNYSWRlbnRpZmllciBKU1hCdWlsdGluIEpTWElkZW50aWZpZXIgSlNYTmFtZXNwYWNlZE5hbWUgSlNYTWVtYmVyRXhwcmVzc2lvbiBKU1hTcHJlYWRBdHRyaWJ1dGUgSlNYQXR0cmlidXRlIEpTWEF0dHJpYnV0ZVZhbHVlIEpTWEVzY2FwZSBKU1hFbmRUYWcgSlNYT3BlblRhZyBKU1hGcmFnbWVudFRhZyBKU1hUZXh0IEpTWEVzY2FwZSBKU1hTdGFydENsb3NlVGFnIEpTWENsb3NlVGFnIFByZWZpeENhc3QgPCBBcnJvd0Z1bmN0aW9uIFR5cGVQYXJhbUxpc3QgU2VxdWVuY2VFeHByZXNzaW9uIEluc3RhbnRpYXRpb25FeHByZXNzaW9uIEtleW9mVHlwZSBrZXlvZiBVbmlxdWVUeXBlIHVuaXF1ZSBJbXBvcnRUeXBlIEluZmVycmVkVHlwZSBpbmZlciBUeXBlTmFtZSBQYXJlbnRoZXNpemVkVHlwZSBGdW5jdGlvblNpZ25hdHVyZSBQYXJhbUxpc3QgTmV3U2lnbmF0dXJlIEluZGV4ZWRUeXBlIFR1cGxlVHlwZSBMYWJlbCBBcnJheVR5cGUgUmVhZG9ubHlUeXBlIE9iamVjdFR5cGUgTWV0aG9kVHlwZSBQcm9wZXJ0eVR5cGUgSW5kZXhTaWduYXR1cmUgUHJvcGVydHlEZWZpbml0aW9uIENhbGxTaWduYXR1cmUgVHlwZVByZWRpY2F0ZSBhc3NlcnRzIGlzIE5ld1NpZ25hdHVyZSBuZXcgVW5pb25UeXBlIExvZ2ljT3AgSW50ZXJzZWN0aW9uVHlwZSBMb2dpY09wIENvbmRpdGlvbmFsVHlwZSBQYXJhbWV0ZXJpemVkVHlwZSBDbGFzc0RlY2xhcmF0aW9uIGFic3RyYWN0IGltcGxlbWVudHMgdHlwZSBWYXJpYWJsZURlY2xhcmF0aW9uIGxldCB2YXIgdXNpbmcgVHlwZUFsaWFzRGVjbGFyYXRpb24gSW50ZXJmYWNlRGVjbGFyYXRpb24gaW50ZXJmYWNlIEVudW1EZWNsYXJhdGlvbiBlbnVtIEVudW1Cb2R5IE5hbWVzcGFjZURlY2xhcmF0aW9uIG5hbWVzcGFjZSBtb2R1bGUgQW1iaWVudERlY2xhcmF0aW9uIGRlY2xhcmUgR2xvYmFsRGVjbGFyYXRpb24gZ2xvYmFsIENsYXNzRGVjbGFyYXRpb24gQ2xhc3NCb2R5IEFtYmllbnRGdW5jdGlvbkRlY2xhcmF0aW9uIEV4cG9ydEdyb3VwIFZhcmlhYmxlTmFtZSBWYXJpYWJsZU5hbWUgSW1wb3J0RGVjbGFyYXRpb24gZGVmZXIgSW1wb3J0R3JvdXAgRm9yU3RhdGVtZW50IGZvciBGb3JTcGVjIEZvckluU3BlYyBGb3JPZlNwZWMgb2YgV2hpbGVTdGF0ZW1lbnQgd2hpbGUgV2l0aFN0YXRlbWVudCB3aXRoIERvU3RhdGVtZW50IGRvIElmU3RhdGVtZW50IGlmIGVsc2UgU3dpdGNoU3RhdGVtZW50IHN3aXRjaCBTd2l0Y2hCb2R5IENhc2VMYWJlbCBjYXNlIERlZmF1bHRMYWJlbCBUcnlTdGF0ZW1lbnQgdHJ5IENhdGNoQ2xhdXNlIGNhdGNoIEZpbmFsbHlDbGF1c2UgZmluYWxseSBSZXR1cm5TdGF0ZW1lbnQgcmV0dXJuIFRocm93U3RhdGVtZW50IHRocm93IEJyZWFrU3RhdGVtZW50IGJyZWFrIENvbnRpbnVlU3RhdGVtZW50IGNvbnRpbnVlIERlYnVnZ2VyU3RhdGVtZW50IGRlYnVnZ2VyIExhYmVsZWRTdGF0ZW1lbnQgRXhwcmVzc2lvblN0YXRlbWVudCBTaW5nbGVFeHByZXNzaW9uIFNpbmdsZUNsYXNzSXRlbVwiLFxuICBtYXhUZXJtOiAzODAsXG4gIGNvbnRleHQ6IHRyYWNrTmV3bGluZSxcbiAgbm9kZVByb3BzOiBbXG4gICAgW1wiaXNvbGF0ZVwiLCAtOCw1LDYsMTQsMzcsMzksNTEsNTMsNTUsXCJcIl0sXG4gICAgW1wiZ3JvdXBcIiwgLTI2LDksMTcsMTksNjgsMjA3LDIxMSwyMTUsMjE2LDIxOCwyMjEsMjI0LDIzNCwyMzcsMjQzLDI0NSwyNDcsMjQ5LDI1MiwyNTgsMjY0LDI2NiwyNjgsMjcwLDI3MiwyNzQsMjc1LFwiU3RhdGVtZW50XCIsLTM0LDEzLDE0LDMyLDM1LDM2LDQyLDUxLDU0LDU1LDU3LDYyLDcwLDcyLDc2LDgwLDgyLDg0LDg1LDExMCwxMTEsMTIwLDEyMSwxMzYsMTM5LDE0MSwxNDIsMTQzLDE0NCwxNDUsMTQ3LDE0OCwxNjcsMTY5LDE3MSxcIkV4cHJlc3Npb25cIiwtMjMsMzEsMzMsMzcsNDEsNDMsNDUsMTczLDE3NSwxNzcsMTc4LDE4MCwxODEsMTgyLDE4NCwxODUsMTg2LDE4OCwxODksMTkwLDIwMSwyMDMsMjA1LDIwNixcIlR5cGVcIiwtMyw4OCwxMDMsMTA5LFwiQ2xhc3NJdGVtXCJdLFxuICAgIFtcIm9wZW5lZEJ5XCIsIDIzLFwiPFwiLDM4LFwiSW50ZXJwb2xhdGlvblN0YXJ0XCIsNTYsXCJbXCIsNjAsXCJ7XCIsNzMsXCIoXCIsMTYwLFwiSlNYU3RhcnRDbG9zZVRhZ1wiXSxcbiAgICBbXCJjbG9zZWRCeVwiLCAtMiwyNCwxNjgsXCI+XCIsNDAsXCJJbnRlcnBvbGF0aW9uRW5kXCIsNTAsXCJdXCIsNjEsXCJ9XCIsNzQsXCIpXCIsMTY1LFwiSlNYRW5kVGFnXCJdXG4gIF0sXG4gIHByb3BTb3VyY2VzOiBbanNIaWdobGlnaHRdLFxuICBza2lwcGVkTm9kZXM6IFswLDUsNiwyNzhdLFxuICByZXBlYXROb2RlQ291bnQ6IDM3LFxuICB0b2tlbkRhdGE6IFwiJEZxMDdbUiFiT1glWlhZK2dZWi15WlsrZ1tdJVpdXi5jXnAlWnBxK2dxci9tcnMzY3N0Ol90dUVydXZKU3Z3TGt3eCEgWXh5ISdpeXohKHN6eyEpfXt8ISxxfH0hLk99IU8hLHEhTyFQIS9ZIVAhUSE5aiFRIVIjOk8hUiFbIzxfIVshXSNJXyFdIV4jSmshXiFfI0t1IV8hYCQhWyFgIWEkJHYhYSFiJCpUIWIhYyQsciFjIX1FciF9I08kLXwjTyNQJC9XI1AjUSQ0byNRI1IkNXkjUiNTRXIjUyNUJDdXI1QjbyQ4YiNvI3AkPHIjcCNxJD1oI3EjciQ+eCNyI3MkQFUjcyRmJVokZiRnK2ckZyNCWUVyI0JZI0JaJEFgI0JaJElTRXIkSVMkSV8kQWAkSV8kSXxFciRJfCRJfSREayRJfSRKTyREayRKTyRKVEVyJEpUJEpVJEFgJEpVJEtWRXIkS1YkS1ckQWAkS1cmRlVFciZGVSZGViRBYCZGVjsnU0VyOydTOz1gSXw8JWw/SFRFcj9IVD9IVSRBYD9IVU9FcihuJWRfJGkmaihXcChaIWJPWSVaWVomY1pyJVpycyZ9c3clWnd4KHJ4IV4lWiFeIV8qZyFfI08lWiNPI1AmYyNQI28lWiNvI3AqZyNwOydTJVo7J1M7PWArYTwlbE8lWiZqJmhUJGkmak8hXiZjIV8jbyZjI3A7J1MmYzsnUzs9YCZ3PCVsTyZjJmomelA7PWA8JWwmYyd8J1VdJGkmaihaIWJPWSZ9WVomY1p3Jn13eCZjeCFeJn0hXiFfJ30hXyNPJn0jTyNQJmMjUCNvJn0jbyNwJ30jcDsnUyZ9OydTOz1gKGw8JWxPJn0hYihTVShaIWJPWSd9WncnfXgjTyd9I1A7J1MnfTsnUzs9YChmPCVsTyd9IWIoaVA7PWA8JWwnfSd8KG9QOz1gPCVsJn0nWyh5XSRpJmooV3BPWShyWVomY1pyKHJycyZjcyFeKHIhXiFfKXIhXyNPKHIjTyNQJmMjUCNvKHIjbyNwKXIjcDsnUyhyOydTOz1gKmE8JWxPKHJwKXdVKFdwT1kpclpyKXJzI08pciNQOydTKXI7J1M7PWAqWjwlbE8pcnAqXlA7PWA8JWwpcidbKmRQOz1gPCVsKHIjUypuWChXcChaIWJPWSpnWnIqZ3JzJ31zdypnd3gpcngjTypnI1A7J1MqZzsnUzs9YCtaPCVsTypnI1MrXlA7PWA8JWwqZyhuK2RQOz1gPCVsJVowN1srcnEkaSZqKFdwKFohYid8MC9sT1glWlhZK2dZWiZjWlsrZ1twJVpwcStncXIlWnJzJn1zdyVad3gocnghXiVaIV4hXypnIV8jTyVaI08jUCZjI1AjbyVaI28jcCpnI3AkZiVaJGYkZytnJGcjQlklWiNCWSNCWitnI0JaJElTJVokSVMkSV8rZyRJXyRKVCVaJEpUJEpVK2ckSlUkS1YlWiRLViRLVytnJEtXJkZVJVomRlUmRlYrZyZGVjsnUyVaOydTOz1gK2E8JWw/SFQlWj9IVD9IVStnP0hVTyVaMDdbLlNUKFgjUyRpJmonfTAvbE8hXiZjIV8jbyZjI3A7J1MmYzsnUzs9YCZ3PCVsTyZjMDdbLm5fJGkmaihXcChaIWInfTAvbE9ZJVpZWiZjWnIlWnJzJn1zdyVad3gocnghXiVaIV4hXypnIV8jTyVaI08jUCZjI1AjbyVaI28jcCpnI3A7J1MlWjsnUzs9YCthPCVsTyVaKTNwL3hgJGkmaiFwKSxRKFdwKFohYk9ZJVpZWiZjWnIlWnJzJn1zdyVad3gocnghXiVaIV4hXypnIV8hYDB6IWAjTyVaI08jUCZjI1AjbyVaI28jcCpnI3A7J1MlWjsnUzs9YCthPCVsTyVaKEtXMVZgI3YoQ2gkaSZqKFdwKFohYk9ZJVpZWiZjWnIlWnJzJn1zdyVad3gocnghXiVaIV4hXypnIV8hYDJYIWAjTyVaI08jUCZjI1AjbyVaI28jcCpnI3A7J1MlWjsnUzs9YCthPCVsTyVaKEtXMmRfI3YoQ2gkaSZqKFdwKFohYk9ZJVpZWiZjWnIlWnJzJn1zdyVad3gocnghXiVaIV4hXypnIV8jTyVaI08jUCZjI1AjbyVaI28jcCpnI3A7J1MlWjsnUzs9YCthPCVsTyVaJ0F0M2xfKFYnOmYkaSZqKFohYk9ZNGtZWjVxWnI0a3JzN25zdzRrd3g1cXghXjRrIV4hXzhwIV8jTzRrI08jUDVxI1AjbzRrI28jcDhwI3A7J1M0azsnUzs9YDpYPCVsTzRrKF40cl8kaSZqKFohYk9ZNGtZWjVxWnI0a3JzN25zdzRrd3g1cXghXjRrIV4hXzhwIV8jTzRrI08jUDVxI1AjbzRrI28jcDhwI3A7J1M0azsnUzs9YDpYPCVsTzRrJno1dlgkaSZqT3I1cXJzNmNzIV41cSFeIV82eSFfI281cSNvI3A2eSNwOydTNXE7J1M7PWA3aDwlbE81cSZ6NmpUJGRgJGkmak8hXiZjIV8jbyZjI3A7J1MmYzsnUzs9YCZ3PCVsTyZjYDZ8VE9yNnlyczddczsnUzZ5OydTOz1gN2I8JWxPNnlgN2JPJGRgYDdlUDs9YDwlbDZ5Jno3a1A7PWA8JWw1cSheN3ddJGRgJGkmaihaIWJPWSZ9WVomY1p3Jn13eCZjeCFeJn0hXiFfJ30hXyNPJn0jTyNQJmMjUCNvJn0jbyNwJ30jcDsnUyZ9OydTOz1gKGw8JWxPJn0hcjh1WihaIWJPWThwWVo2eVpyOHByczloc3c4cHd4Nnl4I084cCNPI1A2eSNQOydTOHA7J1M7PWA6UjwlbE84cCFyOW9VJGRgKFohYk9ZJ31adyd9eCNPJ30jUDsnUyd9OydTOz1gKGY8JWxPJ30hcjpVUDs9YDwlbDhwKF46W1A7PWA8JWw0ayU5WzpoaCRpJmooV3AoWiFiT1klWllaJmNacSVacXI8U3JzJn1zdCVadHVDcnV3JVp3eChyeCFeJVohXiFfKmchXyFjJVohYyF9Q3IhfSNPJVojTyNQJmMjUCNSJVojUiNTQ3IjUyNUJVojVCNvQ3IjbyNwKmcjcCRnJVokZzsnU0NyOydTOz1gRWw8JWxPQ3IocjxfX1dTJGkmaihXcChaIWJPWTxTWVomY1pyPFNycz1ec3c8U3d4QG54IV48UyFeIV9CbSFfI088UyNPI1A+YCNQI288UyNvI3BCbSNwOydTPFM7J1M7PWBDbDwlbE88UyhRPWddV1MkaSZqKFohYk9ZPV5ZWiZjWnc9Xnd4PmB4IV49XiFeIV8/cSFfI089XiNPI1A+YCNQI289XiNvI3A/cSNwOydTPV47J1M7PWBAaDwlbE89XiZuPmdYV1MkaSZqT1k+YFlaJmNaIV4+YCFeIV8/UyFfI28+YCNvI3A/UyNwOydTPmA7J1M7PWA/azwlbE8+YFM/WFNXU09ZP1NaOydTP1M7J1M7PWA/ZTwlbE8/U1M/aFA7PWA8JWw/UyZuP25QOz1gPCVsPmAhZj94V1dTKFohYk9ZP3Fadz9xd3g/U3gjTz9xI08jUD9TI1A7J1M/cTsnUzs9YEBiPCVsTz9xIWZAZVA7PWA8JWw/cShRQGtQOz1gPCVsPV4nYEB3XVdTJGkmaihXcE9ZQG5ZWiZjWnJAbnJzPmBzIV5AbiFeIV9BcCFfI09AbiNPI1A+YCNQI29AbiNvI3BBcCNwOydTQG47J1M7PWBCZzwlbE9AbnRBd1dXUyhXcE9ZQXBackFwcnM/U3MjT0FwI08jUD9TI1A7J1NBcDsnUzs9YEJhPCVsT0FwdEJkUDs9YDwlbEFwJ2BCalA7PWA8JWxAbiNXQnZZV1MoV3AoWiFiT1lCbVpyQm1ycz9xc3dCbXd4QXB4I09CbSNPI1A/UyNQOydTQm07J1M7PWBDZjwlbE9CbSNXQ2lQOz1gPCVsQm0ockNvUDs9YDwlbDxTJTlbQ31pJGkmaihvJTFsKFdwKFohYk9ZJVpZWiZjWnIlWnJzJn1zdCVadHVDcnV3JVp3eChyeCFRJVohUSFbQ3IhWyFeJVohXiFfKmchXyFjJVohYyF9Q3IhfSNPJVojTyNQJmMjUCNSJVojUiNTQ3IjUyNUJVojVCNvQ3IjbyNwKmcjcCRnJVokZzsnU0NyOydTOz1gRWw8JWxPQ3IlOVtFb1A7PWA8JWxDcjA3W0ZSayRpJmooV3AoWiFiJF0jdChULDJqKGUkSVtPWSVaWVomY1pyJVpycyZ9c3QlWnR1RXJ1dyVad3gocnh9JVp9IU9HdiFPIVElWiFRIVtFciFbIV4lWiFeIV8qZyFfIWMlWiFjIX1FciF9I08lWiNPI1AmYyNQI1IlWiNSI1NFciNTI1QlWiNUI29FciNvI3AqZyNwJGclWiRnOydTRXI7J1M7PWBJfDwlbE9FcitkSFJrJGkmaihXcChaIWIkXSN0T1klWllaJmNaciVacnMmfXN0JVp0dUd2dXclWnd4KHJ4fSVafSFPR3YhTyFRJVohUSFbR3YhWyFeJVohXiFfKmchXyFjJVohYyF9R3YhfSNPJVojTyNQJmMjUCNSJVojUiNTR3YjUyNUJVojVCNvR3YjbyNwKmcjcCRnJVokZzsnU0d2OydTOz1gSXY8JWxPR3YrZEl5UDs9YDwlbEd2MDdbSlBQOz1gPCVsRXIoS1dKX2AkaSZqKFdwKFohYiNwKENoT1klWllaJmNaciVacnMmfXN3JVp3eChyeCFeJVohXiFfKmchXyFgS2EhYCNPJVojTyNQJmMjUCNvJVojbyNwKmcjcDsnUyVaOydTOz1gK2E8JWxPJVooS1dLbF8kaSZqJFEoQ2goV3AoWiFiT1klWllaJmNaciVacnMmfXN3JVp3eChyeCFeJVohXiFfKmchXyNPJVojTyNQJmMjUCNvJVojbyNwKmcjcDsnUyVaOydTOz1gK2E8JWxPJVosI3hMdmEoeitKWSRpJmooV3AoWiFiT1klWllaJmNaciVacnMmfXN2JVp2d017d3gocnghXiVaIV4hXypnIV8hYEthIWAjTyVaI08jUCZjI1AjbyVaI28jcCpnI3A7J1MlWjsnUzs9YCthPCVsTyVaKEtXTldgJGkmaiN6KENoKFdwKFohYk9ZJVpZWiZjWnIlWnJzJn1zdyVad3gocnghXiVaIV4hXypnIV8hYEthIWAjTyVaI08jUCZjI1AjbyVaI28jcCpnI3A7J1MlWjsnUzs9YCthPCVsTyVaJ0F0ISBjXyhZJztXJGkmaihXcE9ZISFiWVohI2haciEhYnJzISNoc3chIWJ3eCEkeHghXiEhYiFeIV8hJXohXyNPISFiI08jUCEjaCNQI28hIWIjbyNwISV6I3A7J1MhIWI7J1M7PWAhJ2M8JWxPISFiJ2whIWlfJGkmaihXcE9ZISFiWVohI2haciEhYnJzISNoc3chIWJ3eCEkeHghXiEhYiFeIV8hJXohXyNPISFiI08jUCEjaCNQI28hIWIjbyNwISV6I3A7J1MhIWI7J1M7PWAhJ2M8JWxPISFiJnohI21YJGkmak93ISNod3g2Y3ghXiEjaCFeIV8hJFkhXyNvISNoI28jcCEkWSNwOydTISNoOydTOz1gISRyPCVsTyEjaGAhJF1UT3chJFl3eDddeDsnUyEkWTsnUzs9YCEkbDwlbE8hJFlgISRvUDs9YDwlbCEkWSZ6ISR1UDs9YDwlbCEjaCdsISVSXSRkYCRpJmooV3BPWShyWVomY1pyKHJycyZjcyFeKHIhXiFfKXIhXyNPKHIjTyNQJmMjUCNvKHIjbyNwKXIjcDsnUyhyOydTOz1gKmE8JWxPKHIhUSEmUFooV3BPWSElellaISRZWnIhJXpycyEkWXN3ISV6d3ghJnJ4I08hJXojTyNQISRZI1A7J1MhJXo7J1M7PWAhJ108JWxPISV6IVEhJnlVJGRgKFdwT1kpclpyKXJzI08pciNQOydTKXI7J1M7PWAqWjwlbE8pciFRISdgUDs9YDwlbCEleidsISdmUDs9YDwlbCEhYi81fCEndF8hbC8uXiRpJmooV3AoWiFiT1klWllaJmNaciVacnMmfXN3JVp3eChyeCFeJVohXiFfKmchXyNPJVojTyNQJmMjUCNvJVojbyNwKmcjcDsnUyVaOydTOz1gK2E8JWxPJVojJlUhKU9fIWshTGYkaSZqKFdwKFohYk9ZJVpZWiZjWnIlWnJzJn1zdyVad3gocnghXiVaIV4hXypnIV8jTyVaI08jUCZjI1AjbyVaI28jcCpnI3A7J1MlWjsnUzs9YCthPCVsTyVaLSFuISpbYiRpJmooV3AoWiFiKFUlJmYjcShDaE9ZJVpZWiZjWnIlWnJzJn1zdyVad3gocnh6JVp6eyErZHshXiVaIV4hXypnIV8hYEthIWAjTyVaI08jUCZjI1AjbyVaI28jcCpnI3A7J1MlWjsnUzs9YCthPCVsTyVaKEtXIStvYCRpJmooV3AoWiFiI24oQ2hPWSVaWVomY1pyJVpycyZ9c3clWnd4KHJ4IV4lWiFeIV8qZyFfIWBLYSFgI08lWiNPI1AmYyNQI28lWiNvI3AqZyNwOydTJVo7J1M7PWArYTwlbE8lWis7eCEsfGAkaSZqKFdwKFohYnIrNFlPWSVaWVomY1pyJVpycyZ9c3clWnd4KHJ4IV4lWiFeIV8qZyFfIWBLYSFgI08lWiNPI1AmYyNQI28lWiNvI3AqZyNwOydTJVo7J1M7PWArYTwlbE8lWiwkVSEuWl8hXStKZiRpJmooV3AoWiFiT1klWllaJmNaciVacnMmfXN3JVp3eChyeCFeJVohXiFfKmchXyNPJVojTyNQJmMjUCNvJVojbyNwKmcjcDsnUyVaOydTOz1gK2E8JWxPJVowN1shL2VjJGkmaihXcChaIWIhUS4yXk9ZJVpZWiZjWnIlWnJzJn1zdyVad3gocnghTyVaIU8hUCEwcCFQIVElWiFRIVshM1khWyFeJVohXiFfKmchXyNPJVojTyNQJmMjUCNvJVojbyNwKmcjcDsnUyVaOydTOz1gK2E8JWxPJVojJXwhMHlhJGkmaihXcChaIWJPWSVaWVomY1pyJVpycyZ9c3clWnd4KHJ4IU8lWiFPIVAhMk8hUCFeJVohXiFfKmchXyNPJVojTyNQJmMjUCNvJVojbyNwKmcjcDsnUyVaOydTOz1gK2E8JWxPJVojJXwhMlpfIVshTF4kaSZqKFdwKFohYk9ZJVpZWiZjWnIlWnJzJn1zdyVad3gocnghXiVaIV4hXypnIV8jTyVaI08jUCZjI1AjbyVaI28jcCpnI3A7J1MlWjsnUzs9YCthPCVsTyVaJ0FkITNlZyRpJmooV3AoWiFicyc5dE9ZJVpZWiZjWnIlWnJzJn1zdyVad3gocnghUSVaIVEhWyEzWSFbIV4lWiFeIV8qZyFfIWclWiFnIWghNHwhaCNPJVojTyNQJmMjUCNSJVojUiNTITNZI1MjWCVaI1gjWSE0fCNZI28lWiNvI3AqZyNwOydTJVo7J1M7PWArYTwlbE8lWidBZCE1VmckaSZqKFdwKFohYk9ZJVpZWiZjWnIlWnJzJn1zdyVad3gocnh7JVp7fCE2bnx9JVp9IU8hNm4hTyFRJVohUSFbIThTIVshXiVaIV4hXypnIV8jTyVaI08jUCZjI1AjUiVaI1IjUyE4UyNTI28lWiNvI3AqZyNwOydTJVo7J1M7PWArYTwlbE8lWidBZCE2d2MkaSZqKFdwKFohYk9ZJVpZWiZjWnIlWnJzJn1zdyVad3gocnghUSVaIVEhWyE4UyFbIV4lWiFeIV8qZyFfI08lWiNPI1AmYyNQI1IlWiNSI1MhOFMjUyNvJVojbyNwKmcjcDsnUyVaOydTOz1gK2E8JWxPJVonQWQhOF9jJGkmaihXcChaIWJzJzl0T1klWllaJmNaciVacnMmfXN3JVp3eChyeCFRJVohUSFbIThTIVshXiVaIV4hXypnIV8jTyVaI08jUCZjI1AjUiVaI1IjUyE4UyNTI28lWiNvI3AqZyNwOydTJVo7J1M7PWArYTwlbE8lWjA3WyE5dWYkaSZqKFdwKFohYiNvKENoT1khO1pZWiZjWnIhO1pycyE8bnN3ITtad3ghTGN4eiE7Wnp7Iy19eyFQITtaIVAhUSMvZCFRIV4hO1ohXiFfIyhpIV8hYCM3UyFgIWEjOGkhYSF9ITtaIX0jTyMsZiNPI1AhRHkjUCNvITtaI28jcCMoaSNwOydTITtaOydTOz1gIy13PCVsTyE7Wj9PITtmYiRpJmooV3AoWiFiIVg3YE9ZITtaWVomY1pyITtacnMhPG5zdyE7Wnd4IUxjeCFQITtaIVAhUSMmYCFRIV4hO1ohXiFfIyhpIV8hfSE7WiF9I08jLGYjTyNQIUR5I1AjbyE7WiNvI3AjKGkjcDsnUyE7WjsnUzs9YCMtdzwlbE8hO1o+XiE8d2AkaSZqKFohYiFYN2BPWSE8bllaJmNadyE8bnd4IT15eCFQITxuIVAhUSFFcSFRIV4hPG4hXiFfIUdyIV8hfSE8biF9I08hS1MjTyNQIUR5I1AjbyE8biNvI3AhR3IjcDsnUyE8bjsnUzs9YCFMXTwlbE8hPG48eiE+UV4kaSZqIVg3YE9ZIT15WVomY1ohUCE9eSFQIVEhPnwhUSFeIT15IV4hXyFAYyFfIX0hPXkhfSNPIUNXI08jUCFEeSNQI28hPXkjbyNwIUBjI3A7J1MhPXk7J1M7PWAhRWs8JWxPIT15PHohP1RkJGkmaiFYN2BPIV4mYyFfI1cmYyNXI1ghPnwjWCNaJmMjWiNbIT58I1sjXSZjI10jXiE+fCNeI2EmYyNhI2IhPnwjYiNnJmMjZyNoIT58I2gjaSZjI2kjaiE+fCNqI2shPnwjayNtJmMjbSNuIT58I24jbyZjI3A7J1MmYzsnUzs9YCZ3PCVsTyZjN2AhQGhYIVg3YE9ZIUBjWiFQIUBjIVAhUSFBVCFRIX0hQGMhfSNPIUFyI08jUCFCcSNQOydTIUBjOydTOz1gIUNRPCVsTyFAYzdgIUFZVyFYN2AjVyNYIUFUI1ojWyFBVCNdI14hQVQjYSNiIUFUI2cjaCFBVCNpI2ohQVQjaiNrIUFUI20jbiFBVDdgIUF1Vk9ZIUFyWiNPIUFyI08jUCFCWyNQI1EhQGMjUTsnUyFBcjsnUzs9YCFCazwlbE8hQXI3YCFCX1NPWSFBclo7J1MhQXI7J1M7PWAhQms8JWxPIUFyN2AhQm5QOz1gPCVsIUFyN2AhQnRTT1khQGNaOydTIUBjOydTOz1gIUNRPCVsTyFAYzdgIUNUUDs9YDwlbCFAYzx6IUNdWyRpJmpPWSFDV1laJmNaIV4hQ1chXiFfIUFyIV8jTyFDVyNPI1AhRFIjUCNRIT15I1EjbyFDVyNvI3AhQXIjcDsnUyFDVzsnUzs9YCFEczwlbE8hQ1c8eiFEV1gkaSZqT1khQ1dZWiZjWiFeIUNXIV4hXyFBciFfI28hQ1cjbyNwIUFyI3A7J1MhQ1c7J1M7PWAhRHM8JWxPIUNXPHohRHZQOz1gPCVsIUNXPHohRU9YJGkmak9ZIT15WVomY1ohXiE9eSFeIV8hQGMhXyNvIT15I28jcCFAYyNwOydTIT15OydTOz1gIUVrPCVsTyE9eTx6IUVuUDs9YDwlbCE9eT5eIUV6bCRpJmooWiFiIVg3YE9ZJn1ZWiZjWncmfXd4JmN4IV4mfSFeIV8nfSFfI08mfSNPI1AmYyNQI1cmfSNXI1ghRXEjWCNaJn0jWiNbIUVxI1sjXSZ9I10jXiFFcSNeI2EmfSNhI2IhRXEjYiNnJn0jZyNoIUVxI2gjaSZ9I2kjaiFFcSNqI2shRXEjayNtJn0jbSNuIUVxI24jbyZ9I28jcCd9I3A7J1MmfTsnUzs9YChsPCVsTyZ9OHIhR3laKFohYiFYN2BPWSFHclp3IUdyd3ghQGN4IVAhR3IhUCFRIUhsIVEhfSFHciF9I08hSlUjTyNQIUJxI1A7J1MhR3I7J1M7PWAhSnw8JWxPIUdyOHIhSHNlKFohYiFYN2BPWSd9WncnfXgjTyd9I1AjVyd9I1cjWCFIbCNYI1onfSNaI1shSGwjWyNdJ30jXSNeIUhsI14jYSd9I2EjYiFIbCNiI2cnfSNnI2ghSGwjaCNpJ30jaSNqIUhsI2ojayFIbCNrI20nfSNtI24hSGwjbjsnUyd9OydTOz1gKGY8JWxPJ304ciFKWlgoWiFiT1khSlVadyFKVXd4IUFyeCNPIUpVI08jUCFCWyNQI1EhR3IjUTsnUyFKVTsnUzs9YCFKdjwlbE8hSlU4ciFKeVA7PWA8JWwhSlU4ciFLUFA7PWA8JWwhR3I+XiFLWl4kaSZqKFohYk9ZIUtTWVomY1p3IUtTd3ghQ1d4IV4hS1MhXiFfIUpVIV8jTyFLUyNPI1AhRFIjUCNRITxuI1EjbyFLUyNvI3AhSlUjcDsnUyFLUzsnUzs9YCFMVjwlbE8hS1M+XiFMWVA7PWA8JWwhS1M+XiFMYFA7PWA8JWwhPG49bCFMbGAkaSZqKFdwIVg3YE9ZIUxjWVomY1pyIUxjcnMhPXlzIVAhTGMhUCFRIU1uIVEhXiFMYyFeIV8jIG8hXyF9IUxjIX0jTyMlUCNPI1AhRHkjUCNvIUxjI28jcCMgbyNwOydTIUxjOydTOz1gIyZZPCVsTyFMYz1sIU13bCRpJmooV3AhWDdgT1kocllaJmNacihycnMmY3MhXihyIV4hXylyIV8jTyhyI08jUCZjI1AjVyhyI1cjWCFNbiNYI1oociNaI1shTW4jWyNdKHIjXSNeIU1uI14jYShyI2EjYiFNbiNiI2cociNnI2ghTW4jaCNpKHIjaSNqIU1uI2ojayFNbiNrI20ociNtI24hTW4jbiNvKHIjbyNwKXIjcDsnUyhyOydTOz1gKmE8JWxPKHI4USMgdlooV3AhWDdgT1kjIG9aciMgb3JzIUBjcyFQIyBvIVAhUSMhaSFRIX0jIG8hfSNPIyRSI08jUCFCcSNQOydTIyBvOydTOz1gIyR5PCVsTyMgbzhRIyFwZShXcCFYN2BPWSlyWnIpcnMjTylyI1AjVylyI1cjWCMhaSNYI1opciNaI1sjIWkjWyNdKXIjXSNeIyFpI14jYSlyI2EjYiMhaSNiI2cpciNnI2gjIWkjaCNpKXIjaSNqIyFpI2ojayMhaSNrI20pciNtI24jIWkjbjsnUylyOydTOz1gKlo8JWxPKXI4USMkV1goV3BPWSMkUlpyIyRScnMhQXJzI08jJFIjTyNQIUJbI1AjUSMgbyNROydTIyRSOydTOz1gIyRzPCVsTyMkUjhRIyR2UDs9YDwlbCMkUjhRIyR8UDs9YDwlbCMgbz1sIyVXXiRpJmooV3BPWSMlUFlaJmNaciMlUHJzIUNXcyFeIyVQIV4hXyMkUiFfI08jJVAjTyNQIURSI1AjUSFMYyNRI28jJVAjbyNwIyRSI3A7J1MjJVA7J1M7PWAjJlM8JWxPIyVQPWwjJlZQOz1gPCVsIyVQPWwjJl1QOz1gPCVsIUxjP08jJmtuJGkmaihXcChaIWIhWDdgT1klWllaJmNaciVacnMmfXN3JVp3eChyeCFeJVohXiFfKmchXyNPJVojTyNQJmMjUCNXJVojVyNYIyZgI1gjWiVaI1ojWyMmYCNbI10lWiNdI14jJmAjXiNhJVojYSNiIyZgI2IjZyVaI2cjaCMmYCNoI2klWiNpI2ojJmAjaiNrIyZgI2sjbSVaI20jbiMmYCNuI28lWiNvI3AqZyNwOydTJVo7J1M7PWArYTwlbE8lWjlkIyhyXShXcChaIWIhWDdgT1kjKGlaciMoaXJzIUdyc3cjKGl3eCMgb3ghUCMoaSFQIVEjKWshUSF9IyhpIX0jTyMrYCNPI1AhQnEjUDsnUyMoaTsnUzs9YCMsYDwlbE8jKGk5ZCMpdGgoV3AoWiFiIVg3YE9ZKmdacipncnMnfXN3Kmd3eClyeCNPKmcjUCNXKmcjVyNYIylrI1gjWipnI1ojWyMpayNbI10qZyNdI14jKWsjXiNhKmcjYSNiIylrI2IjZypnI2cjaCMpayNoI2kqZyNpI2ojKWsjaiNrIylrI2sjbSpnI20jbiMpayNuOydTKmc7J1M7PWArWjwlbE8qZzlkIytnWihXcChaIWJPWSMrYFpyIytgcnMhSlVzdyMrYHd4IyRSeCNPIytgI08jUCFCWyNQI1EjKGkjUTsnUyMrYDsnUzs9YCMsWTwlbE8jK2A5ZCMsXVA7PWA8JWwjK2A5ZCMsY1A7PWA8JWwjKGk/TyMsb2AkaSZqKFdwKFohYk9ZIyxmWVomY1pyIyxmcnMhS1NzdyMsZnd4IyVQeCFeIyxmIV4hXyMrYCFfI08jLGYjTyNQIURSI1AjUSE7WiNRI28jLGYjbyNwIytgI3A7J1MjLGY7J1M7PWAjLXE8JWxPIyxmP08jLXRQOz1gPCVsIyxmP08jLXpQOz1gPCVsITtaMDdbIy5bYiRpJmooV3AoWiFiKE8wL2whWDdgT1khO1pZWiZjWnIhO1pycyE8bnN3ITtad3ghTGN4IVAhO1ohUCFRIyZgIVEhXiE7WiFeIV8jKGkhXyF9ITtaIX0jTyMsZiNPI1AhRHkjUCNvITtaI28jcCMoaSNwOydTITtaOydTOz1gIy13PCVsTyE7WjA3WyMvb18kaSZqKFdwKFohYlQwL2xPWSMvZFlaJmNaciMvZHJzIzBuc3cjL2R3eCM0T3ghXiMvZCFeIV8jNX0hXyNPIy9kI08jUCMxcCNQI28jL2QjbyNwIzV9I3A7J1MjL2Q7J1M7PWAjNnw8JWxPIy9kMDZqIzB3XSRpJmooWiFiVDAvbE9ZIzBuWVomY1p3IzBud3gjMXB4IV4jMG4hXiFfIzNSIV8jTyMwbiNPI1AjMXAjUCNvIzBuI28jcCMzUiNwOydTIzBuOydTOz1gIzN4PCVsTyMwbjA1VyMxd1gkaSZqVDAvbE9ZIzFwWVomY1ohXiMxcCFeIV8jMmQhXyNvIzFwI28jcCMyZCNwOydTIzFwOydTOz1gIzJ7PCVsTyMxcDAvbCMyaVNUMC9sT1kjMmRaOydTIzJkOydTOz1gIzJ1PCVsTyMyZDAvbCMyeFA7PWA8JWwjMmQwNVcjM09QOz1gPCVsIzFwMDFPIzNZVyhaIWJUMC9sT1kjM1JadyMzUnd4IzJkeCNPIzNSI08jUCMyZCNQOydTIzNSOydTOz1gIzNyPCVsTyMzUjAxTyMzdVA7PWA8JWwjM1IwNmojM3tQOz1gPCVsIzBuMDV4IzRYXSRpJmooV3BUMC9sT1kjNE9ZWiZjWnIjNE9ycyMxcHMhXiM0TyFeIV8jNVEhXyNPIzRPI08jUCMxcCNQI28jNE8jbyNwIzVRI3A7J1MjNE87J1M7PWAjNXc8JWxPIzRPMDBeIzVYVyhXcFQwL2xPWSM1UVpyIzVRcnMjMmRzI08jNVEjTyNQIzJkI1A7J1MjNVE7J1M7PWAjNXE8JWxPIzVRMDBeIzV0UDs9YDwlbCM1UTA1eCM1elA7PWA8JWwjNE8wMXAjNldZKFdwKFohYlQwL2xPWSM1fVpyIzV9cnMjM1JzdyM1fXd4IzVReCNPIzV9I08jUCMyZCNQOydTIzV9OydTOz1gIzZ2PCVsTyM1fTAxcCM2eVA7PWA8JWwjNX0wN1sjN1BQOz1gPCVsIy9kKTNoIzdhYiRpJmokUShDaChXcChaIWIhWDdgT1khO1pZWiZjWnIhO1pycyE8bnN3ITtad3ghTGN4IVAhO1ohUCFRIyZgIVEhXiE7WiFeIV8jKGkhXyF9ITtaIX0jTyMsZiNPI1AhRHkjUCNvITtaI28jcCMoaSNwOydTITtaOydTOz1gIy13PCVsTyE7WkF0Izh2YiRaI3QkaSZqKFdwKFohYiFYN2BPWSE7WllaJmNaciE7WnJzITxuc3chO1p3eCFMY3ghUCE7WiFQIVEjJmAhUSFeITtaIV4hXyMoaSFfIX0hO1ohfSNPIyxmI08jUCFEeSNQI28hO1ojbyNwIyhpI3A7J1MhO1o7J1M7PWAjLXc8JWxPITtaJ0FkIzpacCRpJmooV3AoWiFicyc5dE9ZJVpZWiZjWnIlWnJzJn1zdyVad3gocnghTyVaIU8hUCEzWSFQIVElWiFRIVsjPF8hWyFeJVohXiFfKmchXyFnJVohZyFoITR8IWgjTyVaI08jUCZjI1AjUiVaI1IjUyM8XyNTI1UlWiNVI1YjP2kjViNYJVojWCNZITR8I1kjYiVaI2IjYyM+XyNjI2QjQnEjZCNsJVojbCNtI0VzI20jbyVaI28jcCpnI3A7J1MlWjsnUzs9YCthPCVsTyVaJ0FkIzxqayRpJmooV3AoWiFicyc5dE9ZJVpZWiZjWnIlWnJzJn1zdyVad3gocnghTyVaIU8hUCEzWSFQIVElWiFRIVsjPF8hWyFeJVohXiFfKmchXyFnJVohZyFoITR8IWgjTyVaI08jUCZjI1AjUiVaI1IjUyM8XyNTI1glWiNYI1khNHwjWSNiJVojYiNjIz5fI2MjbyVaI28jcCpnI3A7J1MlWjsnUzs9YCthPCVsTyVaJ0FkIz5qXyRpJmooV3AoWiFicyc5dE9ZJVpZWiZjWnIlWnJzJn1zdyVad3gocnghXiVaIV4hXypnIV8jTyVaI08jUCZjI1AjbyVaI28jcCpnI3A7J1MlWjsnUzs9YCthPCVsTyVaJ0FkIz9yZCRpJmooV3AoWiFiT1klWllaJmNaciVacnMmfXN3JVp3eChyeCFRJVohUSFSI0FRIVIhUyNBUSFTIV4lWiFeIV8qZyFfI08lWiNPI1AmYyNQI1IlWiNSI1MjQVEjUyNvJVojbyNwKmcjcDsnUyVaOydTOz1gK2E8JWxPJVonQWQjQV1mJGkmaihXcChaIWJzJzl0T1klWllaJmNaciVacnMmfXN3JVp3eChyeCFRJVohUSFSI0FRIVIhUyNBUSFTIV4lWiFeIV8qZyFfI08lWiNPI1AmYyNQI1IlWiNSI1MjQVEjUyNiJVojYiNjIz5fI2MjbyVaI28jcCpnI3A7J1MlWjsnUzs9YCthPCVsTyVaJ0FkI0J6YyRpJmooV3AoWiFiT1klWllaJmNaciVacnMmfXN3JVp3eChyeCFRJVohUSFZI0RWIVkhXiVaIV4hXypnIV8jTyVaI08jUCZjI1AjUiVaI1IjUyNEViNTI28lWiNvI3AqZyNwOydTJVo7J1M7PWArYTwlbE8lWidBZCNEYmUkaSZqKFdwKFohYnMnOXRPWSVaWVomY1pyJVpycyZ9c3clWnd4KHJ4IVElWiFRIVkjRFYhWSFeJVohXiFfKmchXyNPJVojTyNQJmMjUCNSJVojUiNTI0RWI1MjYiVaI2IjYyM+XyNjI28lWiNvI3AqZyNwOydTJVo7J1M7PWArYTwlbE8lWidBZCNFfGckaSZqKFdwKFohYk9ZJVpZWiZjWnIlWnJzJn1zdyVad3gocnghUSVaIVEhWyNHZSFbIV4lWiFeIV8qZyFfIWMlWiFjIWkjR2UhaSNPJVojTyNQJmMjUCNSJVojUiNTI0dlI1MjVCVaI1QjWiNHZSNaI28lWiNvI3AqZyNwOydTJVo7J1M7PWArYTwlbE8lWidBZCNHcGkkaSZqKFdwKFohYnMnOXRPWSVaWVomY1pyJVpycyZ9c3clWnd4KHJ4IVElWiFRIVsjR2UhWyFeJVohXiFfKmchXyFjJVohYyFpI0dlIWkjTyVaI08jUCZjI1AjUiVaI1IjUyNHZSNTI1QlWiNUI1ojR2UjWiNiJVojYiNjIz5fI2MjbyVaI28jcCpnI3A7J1MlWjsnUzs9YCthPCVsTyVaKil4I0lsXyFnJGIkaSZqJE8pTHYoV3AoWiFiT1klWllaJmNaciVacnMmfXN3JVp3eChyeCFeJVohXiFfKmchXyNPJVojTyNQJmMjUCNvJVojbyNwKmcjcDsnUyVaOydTOz1gK2E8JWxPJVopWyNKdl9hbCRpJmooV3AoWiFiT1klWllaJmNaciVacnMmfXN3JVp3eChyeCFeJVohXiFfKmchXyNPJVojTyNQJmMjUCNvJVojbyNwKmcjcDsnUyVaOydTOz1gK2E8JWxPJVowNGYjTFNeaCMpYCNSLTxVKFdwKFohYiRuN2BPWSpnWnIqZ3JzJ31zdypnd3gpcnghUCpnIVAhUSNNTyFRIV4qZyFeIV8jTXQhXyFgJCBmIWAjTypnI1A7J1MqZzsnUzs9YCtaPCVsTypnKG4jTVhYJGsmaihXcChaIWJPWSpnWnIqZ3JzJ31zdypnd3gpcngjTypnI1A7J1MqZzsnUzs9YCtaPCVsTypnKEVsI019WiNyKENoKFdwKFohYk9ZKmdacipncnMnfXN3Kmd3eClyeCFfKmchXyFgI05wIWAjTypnI1A7J1MqZzsnUzs9YCtaPCVsTypnKEVsI055WCRRKENoKFdwKFohYk9ZKmdacipncnMnfXN3Kmd3eClyeCNPKmcjUDsnUypnOydTOz1gK1o8JWxPKmcoRWwkIG9YI3MoQ2goV3AoWiFiT1kqZ1pyKmdycyd9c3cqZ3d4KXJ4I08qZyNQOydTKmc7J1M7PWArWjwlbE8qZyopeCQhZ2EjYCohWSRpJmooV3AoWiFiT1klWllaJmNaciVacnMmfXN3JVp3eChyeCFeJVohXiFfKmchXyFgMHohYCFhJCNsIWEjTyVaI08jUCZjI1AjbyVaI28jcCpnI3A7J1MlWjsnUzs9YCthPCVsTyVaKEtbJCN3XyNrKENsJGkmaihXcChaIWJPWSVaWVomY1pyJVpycyZ9c3clWnd4KHJ4IV4lWiFeIV8qZyFfI08lWiNPI1AmYyNQI28lWiNvI3AqZyNwOydTJVo7J1M7PWArYTwlbE8lWiopeCQlVmFnISpyI3MoQ2gkZiN8JGkmaihXcChaIWJPWSVaWVomY1pyJVpycyZ9c3clWnd4KHJ4IV4lWiFeIV8qZyFfIWAkJlshYCFhJCdmIWEjTyVaI08jUCZjI1AjbyVaI28jcCpnI3A7J1MlWjsnUzs9YCthPCVsTyVaKEtXJCZnXyNzKENoJGkmaihXcChaIWJPWSVaWVomY1pyJVpycyZ9c3clWnd4KHJ4IV4lWiFeIV8qZyFfI08lWiNPI1AmYyNQI28lWiNvI3AqZyNwOydTJVo7J1M7PWArYTwlbE8lWihLVyQncWEjcihDaCRpJmooV3AoWiFiT1klWllaJmNaciVacnMmfXN3JVp3eChyeCFeJVohXiFfKmchXyFgS2EhYCFhJCh2IWEjTyVaI08jUCZjI1AjbyVaI28jcCpnI3A7J1MlWjsnUzs9YCthPCVsTyVaKEtXJClSYCNyKENoJGkmaihXcChaIWJPWSVaWVomY1pyJVpycyZ9c3clWnd4KHJ4IV4lWiFeIV8qZyFfIWBLYSFgI08lWiNPI1AmYyNQI28lWiNvI3AqZyNwOydTJVo7J1M7PWArYTwlbE8lWihLZCQqYGEocihDdCRpJmooV3AoWiFiT1klWllaJmNaciVacnMmfXN3JVp3eChyeCFeJVohXiFfKmchXyFhJVohYSFiJCtlIWIjTyVaI08jUCZjI1AjbyVaI28jcCpnI3A7J1MlWjsnUzs9YCthPCVsTyVaKEtXJCtwYCRpJmojeyhDaChXcChaIWJPWSVaWVomY1pyJVpycyZ9c3clWnd4KHJ4IV4lWiFeIV8qZyFfIWBLYSFgI08lWiNPI1AmYyNQI28lWiNvI3AqZyNwOydTJVo7J1M7PWArYTwlbE8lWiUjYCQsfV8hfCRJcCRpJmooV3AoWiFiT1klWllaJmNaciVacnMmfXN3JVp3eChyeCFeJVohXiFfKmchXyNPJVojTyNQJmMjUCNvJVojbyNwKmcjcDsnUyVaOydTOz1gK2E8JWxPJVowNGYkLlhfIVMwLHYkaSZqKFdwKFohYk9ZJVpZWiZjWnIlWnJzJn1zdyVad3gocnghXiVaIV4hXypnIV8jTyVaI08jUCZjI1AjbyVaI28jcCpnI3A7J1MlWjsnUzs9YCthPCVsTyVaKG4kL11aJGkmak8hXiQwTyFeIV8kMGYhXyNpJDBPI2kjaiQwayNqI2wkME8jbCNtJDJeI20jbyQwTyNvI3AkMGYjcDsnUyQwTzsnUzs9YCQ0aTwlbE8kME8obiQwVlRfI1MkaSZqTyFeJmMhXyNvJmMjcDsnUyZjOydTOz1gJnc8JWxPJmMjUyQwa09fI1MobiQwcFskaSZqTyFRJmMhUSFbJDFmIVshXiZjIV8hYyZjIWMhaSQxZiFpI1QmYyNUI1okMWYjWiNvJmMjbyNwJDN8I3A7J1MmYzsnUzs9YCZ3PCVsTyZjKG4kMWtaJGkmak8hUSZjIVEhWyQyXiFbIV4mYyFfIWMmYyFjIWkkMl4haSNUJmMjVCNaJDJeI1ojbyZjI3A7J1MmYzsnUzs9YCZ3PCVsTyZjKG4kMmNaJGkmak8hUSZjIVEhWyQzVSFbIV4mYyFfIWMmYyFjIWkkM1UhaSNUJmMjVCNaJDNVI1ojbyZjI3A7J1MmYzsnUzs9YCZ3PCVsTyZjKG4kM1paJGkmak8hUSZjIVEhWyQwTyFbIV4mYyFfIWMmYyFjIWkkME8haSNUJmMjVCNaJDBPI1ojbyZjI3A7J1MmYzsnUzs9YCZ3PCVsTyZjI1MkNFBSIVEhWyQ0WSFjIWkkNFkjVCNaJDRZI1MkNF1TIVEhWyQ0WSFjIWkkNFkjVCNaJDRZI3EjciQwZihuJDRsUDs9YDwlbCQwTyMxWyQ0el8hWSMpbCRpJmooV3AoWiFiT1klWllaJmNaciVacnMmfXN3JVp3eChyeCFeJVohXiFfKmchXyNPJVojTyNQJmMjUCNvJVojbyNwKmcjcDsnUyVaOydTOz1gK2E8JWxPJVooS1ckNlVgI3goQ2gkaSZqKFdwKFohYk9ZJVpZWiZjWnIlWnJzJn1zdyVad3gocnghXiVaIV4hXypnIV8hYEthIWAjTyVaI08jUCZjI1AjbyVaI28jcCpnI3A7J1MlWjsnUzs9YCthPCVsTyVaKztwJDdjXyRpJmooV3AoWiFiKGErNFFPWSVaWVomY1pyJVpycyZ9c3clWnd4KHJ4IV4lWiFeIV8qZyFfI08lWiNPI1AmYyNQI28lWiNvI3AqZyNwOydTJVo7J1M7PWArYTwlbE8lWjA3WyQ4cWskaSZqKFdwKFohYihULDJqJF8jdChlJElbT1klWllaJmNaciVacnMmfXN0JVp0dSQ4YnV3JVp3eChyeH0lWn0hTyQ6ZiFPIVElWiFRIVskOGIhWyFeJVohXiFfKmchXyFjJVohYyF9JDhiIX0jTyVaI08jUCZjI1AjUiVaI1IjUyQ4YiNTI1QlWiNUI28kOGIjbyNwKmcjcCRnJVokZzsnUyQ4YjsnUzs9YCQ8bDwlbE8kOGIrZCQ6cWskaSZqKFdwKFohYiRfI3RPWSVaWVomY1pyJVpycyZ9c3QlWnR1JDpmdXclWnd4KHJ4fSVafSFPJDpmIU8hUSVaIVEhWyQ6ZiFbIV4lWiFeIV8qZyFfIWMlWiFjIX0kOmYhfSNPJVojTyNQJmMjUCNSJVojUiNTJDpmI1MjVCVaI1QjbyQ6ZiNvI3AqZyNwJGclWiRnOydTJDpmOydTOz1gJDxmPCVsTyQ6ZitkJDxpUDs9YDwlbCQ6ZjA3WyQ8b1A7PWA8JWwkOGIjSmYkPHtYIV8jSGIoV3AoWiFiT1kqZ1pyKmdycyd9c3cqZ3d4KXJ4I08qZyNQOydTKmc7J1M7PWArWjwlbE8qZywjeCQ9c2EoeStKWSRpJmooV3AoWiFiT1klWllaJmNaciVacnMmfXN3JVp3eChyeCFeJVohXiFfKmchXyFgS2EhYCNPJVojTyNQJmMjUCNvJVojbyNwKmcjcCNxJCtlI3E7J1MlWjsnUzs9YCthPCVsTyVaKT52JD9WXyFeKENkdkJyJGkmaihXcChaIWJPWSVaWVomY1pyJVpycyZ9c3clWnd4KHJ4IV4lWiFeIV8qZyFfI08lWiNPI1AmYyNQI28lWiNvI3AqZyNwOydTJVo7J1M7PWArYTwlbE8lWj9PJEBhXyFxN2AkaSZqKFdwKFohYk9ZJVpZWiZjWnIlWnJzJn1zdyVad3gocnghXiVaIV4hXypnIV8jTyVaI08jUCZjI1AjbyVaI28jcCpnI3A7J1MlWjsnUzs9YCthPCVsTyVaMDdbJEFxfCRpJmooV3AoWiFiJ3wwL2wkXSN0KFQsMmooZSRJW09YJVpYWStnWVomY1pbK2dbcCVacHErZ3FyJVpycyZ9c3QlWnR1RXJ1dyVad3gocnh9JVp9IU9HdiFPIVElWiFRIVtFciFbIV4lWiFeIV8qZyFfIWMlWiFjIX1FciF9I08lWiNPI1AmYyNQI1IlWiNSI1NFciNTI1QlWiNUI29FciNvI3AqZyNwJGYlWiRmJGcrZyRnI0JZRXIjQlkjQlokQWAjQlokSVNFciRJUyRJXyRBYCRJXyRKVEVyJEpUJEpVJEFgJEpVJEtWRXIkS1YkS1ckQWAkS1cmRlVFciZGVSZGViRBYCZGVjsnU0VyOydTOz1gSXw8JWw/SFRFcj9IVD9IVSRBYD9IVU9FcjA3WyREfGskaSZqKFdwKFohYid9MC9sJF0jdChULDJqKGUkSVtPWSVaWVomY1pyJVpycyZ9c3QlWnR1RXJ1dyVad3gocnh9JVp9IU9HdiFPIVElWiFRIVtFciFbIV4lWiFeIV8qZyFfIWMlWiFjIX1FciF9I08lWiNPI1AmYyNQI1IlWiNSI1NFciNTI1QlWiNUI29FciNvI3AqZyNwJGclWiRnOydTRXI7J1M7PWBJfDwlbE9FclwiLFxuICB0b2tlbml6ZXJzOiBbbm9TZW1pY29sb24sIG5vU2VtaWNvbG9uVHlwZSwgb3BlcmF0b3JUb2tlbiwganN4LCAyLCAzLCA0LCA1LCA2LCA3LCA4LCA5LCAxMCwgMTEsIDEyLCAxMywgMTQsIGluc2VydFNlbWljb2xvbiwgbmV3IExvY2FsVG9rZW5Hcm91cChcIiRTflJSdHVbI08jUGcjUyNUI3x+X1AjbyNwYn5nT3h+fmpWTyNpIVAjaSNqIVUjaiNsIVAjbCNtIXEjbTsnUyFQOydTOz1gI3Y8JWxPIVB+IVVPIVV+fiFYUyFRIVshZSFjIWkhZSNUI1ohZSNvI3AjWn4haFIhUSFbIXEhYyFpIXEjVCNaIXF+IXRSIVEhWyF9IWMhaSF9I1QjWiF9fiNRUiFRIVshUCFjIWkhUCNUI1ohUH4jXlIhUSFbI2chYyFpI2cjVCNaI2d+I2pTIVEhWyNnIWMhaSNnI1QjWiNnI3EjciFQfiN5UDs9YDwlbCFQfiRSTyhjfn5cIiwgMTQxLCAzNDApLCBuZXcgTG9jYWxUb2tlbkdyb3VwKFwian5SUVlaWHp7Xn5eTyhRfn5hUCFQIVFkfmlPKFJ+flwiLCAyNSwgMzIzKV0sXG4gIHRvcFJ1bGVzOiB7XCJTY3JpcHRcIjpbMCw3XSxcIlNpbmdsZUV4cHJlc3Npb25cIjpbMSwyNzZdLFwiU2luZ2xlQ2xhc3NJdGVtXCI6WzIsMjc3XX0sXG4gIGRpYWxlY3RzOiB7anN4OiAwLCB0czogMTUxNzV9LFxuICBkeW5hbWljUHJlY2VkZW5jZXM6IHtcIjgwXCI6MSxcIjgyXCI6MSxcIjk0XCI6MSxcIjE2OVwiOjEsXCIxOTlcIjoxfSxcbiAgc3BlY2lhbGl6ZWQ6IFt7dGVybTogMzI3LCBnZXQ6ICh2YWx1ZSkgPT4gc3BlY19pZGVudGlmaWVyW3ZhbHVlXSB8fCAtMX0se3Rlcm06IDM0MywgZ2V0OiAodmFsdWUpID0+IHNwZWNfd29yZFt2YWx1ZV0gfHwgLTF9LHt0ZXJtOiA5NSwgZ2V0OiAodmFsdWUpID0+IHNwZWNfTGVzc1RoYW5bdmFsdWVdIHx8IC0xfV0sXG4gIHRva2VuUHJlYzogMTUyMDFcbn0pO1xuXG5leHBvcnQgeyBwYXJzZXIgfTtcbiIsCiAgICAiaW1wb3J0IHsgcGFyc2VyIH0gZnJvbSAnQGxlemVyL2phdmFzY3JpcHQnO1xuaW1wb3J0IHsgc3ludGF4VHJlZSwgTFJMYW5ndWFnZSwgaW5kZW50Tm9kZVByb3AsIGNvbnRpbnVlZEluZGVudCwgZmxhdEluZGVudCwgZGVsaW1pdGVkSW5kZW50LCBmb2xkTm9kZVByb3AsIGZvbGRJbnNpZGUsIGRlZmluZUxhbmd1YWdlRmFjZXQsIHN1Ymxhbmd1YWdlUHJvcCwgTGFuZ3VhZ2VTdXBwb3J0IH0gZnJvbSAnQGNvZGVtaXJyb3IvbGFuZ3VhZ2UnO1xuaW1wb3J0IHsgRWRpdG9yU2VsZWN0aW9uIH0gZnJvbSAnQGNvZGVtaXJyb3Ivc3RhdGUnO1xuaW1wb3J0IHsgRWRpdG9yVmlldyB9IGZyb20gJ0Bjb2RlbWlycm9yL3ZpZXcnO1xuaW1wb3J0IHsgc25pcHBldENvbXBsZXRpb24sIGlmTm90SW4sIGNvbXBsZXRlRnJvbUxpc3QgfSBmcm9tICdAY29kZW1pcnJvci9hdXRvY29tcGxldGUnO1xuaW1wb3J0IHsgTm9kZVdlYWtNYXAsIEl0ZXJNb2RlIH0gZnJvbSAnQGxlemVyL2NvbW1vbic7XG5cbi8qKlxuQSBjb2xsZWN0aW9uIG9mIEphdmFTY3JpcHQtcmVsYXRlZFxuW3NuaXBwZXRzXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI2F1dG9jb21wbGV0ZS5zbmlwcGV0KS5cbiovXG5jb25zdCBzbmlwcGV0cyA9IFtcbiAgICAvKkBfX1BVUkVfXyovc25pcHBldENvbXBsZXRpb24oXCJmdW5jdGlvbiAke25hbWV9KCR7cGFyYW1zfSkge1xcblxcdCR7fVxcbn1cIiwge1xuICAgICAgICBsYWJlbDogXCJmdW5jdGlvblwiLFxuICAgICAgICBkZXRhaWw6IFwiZGVmaW5pdGlvblwiLFxuICAgICAgICB0eXBlOiBcImtleXdvcmRcIlxuICAgIH0pLFxuICAgIC8qQF9fUFVSRV9fKi9zbmlwcGV0Q29tcGxldGlvbihcImZvciAobGV0ICR7aW5kZXh9ID0gMDsgJHtpbmRleH0gPCAke2JvdW5kfTsgJHtpbmRleH0rKykge1xcblxcdCR7fVxcbn1cIiwge1xuICAgICAgICBsYWJlbDogXCJmb3JcIixcbiAgICAgICAgZGV0YWlsOiBcImxvb3BcIixcbiAgICAgICAgdHlwZTogXCJrZXl3b3JkXCJcbiAgICB9KSxcbiAgICAvKkBfX1BVUkVfXyovc25pcHBldENvbXBsZXRpb24oXCJmb3IgKGxldCAke25hbWV9IG9mICR7Y29sbGVjdGlvbn0pIHtcXG5cXHQke31cXG59XCIsIHtcbiAgICAgICAgbGFiZWw6IFwiZm9yXCIsXG4gICAgICAgIGRldGFpbDogXCJvZiBsb29wXCIsXG4gICAgICAgIHR5cGU6IFwia2V5d29yZFwiXG4gICAgfSksXG4gICAgLypAX19QVVJFX18qL3NuaXBwZXRDb21wbGV0aW9uKFwiZG8ge1xcblxcdCR7fVxcbn0gd2hpbGUgKCR7fSlcIiwge1xuICAgICAgICBsYWJlbDogXCJkb1wiLFxuICAgICAgICBkZXRhaWw6IFwibG9vcFwiLFxuICAgICAgICB0eXBlOiBcImtleXdvcmRcIlxuICAgIH0pLFxuICAgIC8qQF9fUFVSRV9fKi9zbmlwcGV0Q29tcGxldGlvbihcIndoaWxlICgke30pIHtcXG5cXHQke31cXG59XCIsIHtcbiAgICAgICAgbGFiZWw6IFwid2hpbGVcIixcbiAgICAgICAgZGV0YWlsOiBcImxvb3BcIixcbiAgICAgICAgdHlwZTogXCJrZXl3b3JkXCJcbiAgICB9KSxcbiAgICAvKkBfX1BVUkVfXyovc25pcHBldENvbXBsZXRpb24oXCJ0cnkge1xcblxcdCR7fVxcbn0gY2F0Y2ggKCR7ZXJyb3J9KSB7XFxuXFx0JHt9XFxufVwiLCB7XG4gICAgICAgIGxhYmVsOiBcInRyeVwiLFxuICAgICAgICBkZXRhaWw6IFwiLyBjYXRjaCBibG9ja1wiLFxuICAgICAgICB0eXBlOiBcImtleXdvcmRcIlxuICAgIH0pLFxuICAgIC8qQF9fUFVSRV9fKi9zbmlwcGV0Q29tcGxldGlvbihcImlmICgke30pIHtcXG5cXHQke31cXG59XCIsIHtcbiAgICAgICAgbGFiZWw6IFwiaWZcIixcbiAgICAgICAgZGV0YWlsOiBcImJsb2NrXCIsXG4gICAgICAgIHR5cGU6IFwia2V5d29yZFwiXG4gICAgfSksXG4gICAgLypAX19QVVJFX18qL3NuaXBwZXRDb21wbGV0aW9uKFwiaWYgKCR7fSkge1xcblxcdCR7fVxcbn0gZWxzZSB7XFxuXFx0JHt9XFxufVwiLCB7XG4gICAgICAgIGxhYmVsOiBcImlmXCIsXG4gICAgICAgIGRldGFpbDogXCIvIGVsc2UgYmxvY2tcIixcbiAgICAgICAgdHlwZTogXCJrZXl3b3JkXCJcbiAgICB9KSxcbiAgICAvKkBfX1BVUkVfXyovc25pcHBldENvbXBsZXRpb24oXCJjbGFzcyAke25hbWV9IHtcXG5cXHRjb25zdHJ1Y3Rvcigke3BhcmFtc30pIHtcXG5cXHRcXHQke31cXG5cXHR9XFxufVwiLCB7XG4gICAgICAgIGxhYmVsOiBcImNsYXNzXCIsXG4gICAgICAgIGRldGFpbDogXCJkZWZpbml0aW9uXCIsXG4gICAgICAgIHR5cGU6IFwia2V5d29yZFwiXG4gICAgfSksXG4gICAgLypAX19QVVJFX18qL3NuaXBwZXRDb21wbGV0aW9uKFwiaW1wb3J0IHske25hbWVzfX0gZnJvbSBcXFwiJHttb2R1bGV9XFxcIlxcbiR7fVwiLCB7XG4gICAgICAgIGxhYmVsOiBcImltcG9ydFwiLFxuICAgICAgICBkZXRhaWw6IFwibmFtZWRcIixcbiAgICAgICAgdHlwZTogXCJrZXl3b3JkXCJcbiAgICB9KSxcbiAgICAvKkBfX1BVUkVfXyovc25pcHBldENvbXBsZXRpb24oXCJpbXBvcnQgJHtuYW1lfSBmcm9tIFxcXCIke21vZHVsZX1cXFwiXFxuJHt9XCIsIHtcbiAgICAgICAgbGFiZWw6IFwiaW1wb3J0XCIsXG4gICAgICAgIGRldGFpbDogXCJkZWZhdWx0XCIsXG4gICAgICAgIHR5cGU6IFwia2V5d29yZFwiXG4gICAgfSlcbl07XG4vKipcbkEgY29sbGVjdGlvbiBvZiBzbmlwcGV0IGNvbXBsZXRpb25zIGZvciBUeXBlU2NyaXB0LiBJbmNsdWRlcyB0aGVcbkphdmFTY3JpcHQgW3NuaXBwZXRzXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI2xhbmctamF2YXNjcmlwdC5zbmlwcGV0cykuXG4qL1xuY29uc3QgdHlwZXNjcmlwdFNuaXBwZXRzID0gLypAX19QVVJFX18qL3NuaXBwZXRzLmNvbmNhdChbXG4gICAgLypAX19QVVJFX18qL3NuaXBwZXRDb21wbGV0aW9uKFwiaW50ZXJmYWNlICR7bmFtZX0ge1xcblxcdCR7fVxcbn1cIiwge1xuICAgICAgICBsYWJlbDogXCJpbnRlcmZhY2VcIixcbiAgICAgICAgZGV0YWlsOiBcImRlZmluaXRpb25cIixcbiAgICAgICAgdHlwZTogXCJrZXl3b3JkXCJcbiAgICB9KSxcbiAgICAvKkBfX1BVUkVfXyovc25pcHBldENvbXBsZXRpb24oXCJ0eXBlICR7bmFtZX0gPSAke3R5cGV9XCIsIHtcbiAgICAgICAgbGFiZWw6IFwidHlwZVwiLFxuICAgICAgICBkZXRhaWw6IFwiZGVmaW5pdGlvblwiLFxuICAgICAgICB0eXBlOiBcImtleXdvcmRcIlxuICAgIH0pLFxuICAgIC8qQF9fUFVSRV9fKi9zbmlwcGV0Q29tcGxldGlvbihcImVudW0gJHtuYW1lfSB7XFxuXFx0JHt9XFxufVwiLCB7XG4gICAgICAgIGxhYmVsOiBcImVudW1cIixcbiAgICAgICAgZGV0YWlsOiBcImRlZmluaXRpb25cIixcbiAgICAgICAgdHlwZTogXCJrZXl3b3JkXCJcbiAgICB9KVxuXSk7XG5cbmNvbnN0IGNhY2hlID0gLypAX19QVVJFX18qL25ldyBOb2RlV2Vha01hcCgpO1xuY29uc3QgU2NvcGVOb2RlcyA9IC8qQF9fUFVSRV9fKi9uZXcgU2V0KFtcbiAgICBcIlNjcmlwdFwiLCBcIkJsb2NrXCIsXG4gICAgXCJGdW5jdGlvbkV4cHJlc3Npb25cIiwgXCJGdW5jdGlvbkRlY2xhcmF0aW9uXCIsIFwiQXJyb3dGdW5jdGlvblwiLCBcIk1ldGhvZERlY2xhcmF0aW9uXCIsXG4gICAgXCJGb3JTdGF0ZW1lbnRcIlxuXSk7XG5mdW5jdGlvbiBkZWZJRCh0eXBlKSB7XG4gICAgcmV0dXJuIChub2RlLCBkZWYpID0+IHtcbiAgICAgICAgbGV0IGlkID0gbm9kZS5ub2RlLmdldENoaWxkKFwiVmFyaWFibGVEZWZpbml0aW9uXCIpO1xuICAgICAgICBpZiAoaWQpXG4gICAgICAgICAgICBkZWYoaWQsIHR5cGUpO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9O1xufVxuY29uc3QgZnVuY3Rpb25Db250ZXh0ID0gW1wiRnVuY3Rpb25EZWNsYXJhdGlvblwiXTtcbmNvbnN0IGdhdGhlckNvbXBsZXRpb25zID0ge1xuICAgIEZ1bmN0aW9uRGVjbGFyYXRpb246IC8qQF9fUFVSRV9fKi9kZWZJRChcImZ1bmN0aW9uXCIpLFxuICAgIENsYXNzRGVjbGFyYXRpb246IC8qQF9fUFVSRV9fKi9kZWZJRChcImNsYXNzXCIpLFxuICAgIENsYXNzRXhwcmVzc2lvbjogKCkgPT4gdHJ1ZSxcbiAgICBFbnVtRGVjbGFyYXRpb246IC8qQF9fUFVSRV9fKi9kZWZJRChcImNvbnN0YW50XCIpLFxuICAgIFR5cGVBbGlhc0RlY2xhcmF0aW9uOiAvKkBfX1BVUkVfXyovZGVmSUQoXCJ0eXBlXCIpLFxuICAgIE5hbWVzcGFjZURlY2xhcmF0aW9uOiAvKkBfX1BVUkVfXyovZGVmSUQoXCJuYW1lc3BhY2VcIiksXG4gICAgVmFyaWFibGVEZWZpbml0aW9uKG5vZGUsIGRlZikgeyBpZiAoIW5vZGUubWF0Y2hDb250ZXh0KGZ1bmN0aW9uQ29udGV4dCkpXG4gICAgICAgIGRlZihub2RlLCBcInZhcmlhYmxlXCIpOyB9LFxuICAgIFR5cGVEZWZpbml0aW9uKG5vZGUsIGRlZikgeyBkZWYobm9kZSwgXCJ0eXBlXCIpOyB9LFxuICAgIF9fcHJvdG9fXzogbnVsbFxufTtcbmZ1bmN0aW9uIGdldFNjb3BlKGRvYywgbm9kZSkge1xuICAgIGxldCBjYWNoZWQgPSBjYWNoZS5nZXQobm9kZSk7XG4gICAgaWYgKGNhY2hlZClcbiAgICAgICAgcmV0dXJuIGNhY2hlZDtcbiAgICBsZXQgY29tcGxldGlvbnMgPSBbXSwgdG9wID0gdHJ1ZTtcbiAgICBmdW5jdGlvbiBkZWYobm9kZSwgdHlwZSkge1xuICAgICAgICBsZXQgbmFtZSA9IGRvYy5zbGljZVN0cmluZyhub2RlLmZyb20sIG5vZGUudG8pO1xuICAgICAgICBjb21wbGV0aW9ucy5wdXNoKHsgbGFiZWw6IG5hbWUsIHR5cGUgfSk7XG4gICAgfVxuICAgIG5vZGUuY3Vyc29yKEl0ZXJNb2RlLkluY2x1ZGVBbm9ueW1vdXMpLml0ZXJhdGUobm9kZSA9PiB7XG4gICAgICAgIGlmICh0b3ApIHtcbiAgICAgICAgICAgIHRvcCA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKG5vZGUubmFtZSkge1xuICAgICAgICAgICAgbGV0IGdhdGhlciA9IGdhdGhlckNvbXBsZXRpb25zW25vZGUubmFtZV07XG4gICAgICAgICAgICBpZiAoZ2F0aGVyICYmIGdhdGhlcihub2RlLCBkZWYpIHx8IFNjb3BlTm9kZXMuaGFzKG5vZGUubmFtZSkpXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKG5vZGUudG8gLSBub2RlLmZyb20gPiA4MTkyKSB7XG4gICAgICAgICAgICAvLyBBbGxvdyBjYWNoaW5nIGZvciBiaWdnZXIgaW50ZXJuYWwgbm9kZXNcbiAgICAgICAgICAgIGZvciAobGV0IGMgb2YgZ2V0U2NvcGUoZG9jLCBub2RlLm5vZGUpKVxuICAgICAgICAgICAgICAgIGNvbXBsZXRpb25zLnB1c2goYyk7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICBjYWNoZS5zZXQobm9kZSwgY29tcGxldGlvbnMpO1xuICAgIHJldHVybiBjb21wbGV0aW9ucztcbn1cbmNvbnN0IElkZW50aWZpZXIgPSAvXltcXHckXFx4YTEtXFx1ZmZmZl1bXFx3JFxcZFxceGExLVxcdWZmZmZdKiQvO1xuY29uc3QgZG9udENvbXBsZXRlID0gW1xuICAgIFwiVGVtcGxhdGVTdHJpbmdcIiwgXCJTdHJpbmdcIiwgXCJSZWdFeHBcIixcbiAgICBcIkxpbmVDb21tZW50XCIsIFwiQmxvY2tDb21tZW50XCIsXG4gICAgXCJWYXJpYWJsZURlZmluaXRpb25cIiwgXCJUeXBlRGVmaW5pdGlvblwiLCBcIkxhYmVsXCIsXG4gICAgXCJQcm9wZXJ0eURlZmluaXRpb25cIiwgXCJQcm9wZXJ0eU5hbWVcIixcbiAgICBcIlByaXZhdGVQcm9wZXJ0eURlZmluaXRpb25cIiwgXCJQcml2YXRlUHJvcGVydHlOYW1lXCIsXG4gICAgXCJKU1hUZXh0XCIsIFwiSlNYQXR0cmlidXRlVmFsdWVcIiwgXCJKU1hPcGVuVGFnXCIsIFwiSlNYQ2xvc2VUYWdcIiwgXCJKU1hTZWxmQ2xvc2luZ1RhZ1wiLFxuICAgIFwiLlwiLCBcIj8uXCJcbl07XG4vKipcbkNvbXBsZXRpb24gc291cmNlIHRoYXQgbG9va3MgdXAgbG9jYWxseSBkZWZpbmVkIG5hbWVzIGluXG5KYXZhU2NyaXB0IGNvZGUuXG4qL1xuZnVuY3Rpb24gbG9jYWxDb21wbGV0aW9uU291cmNlKGNvbnRleHQpIHtcbiAgICBsZXQgaW5uZXIgPSBzeW50YXhUcmVlKGNvbnRleHQuc3RhdGUpLnJlc29sdmVJbm5lcihjb250ZXh0LnBvcywgLTEpO1xuICAgIGlmIChkb250Q29tcGxldGUuaW5kZXhPZihpbm5lci5uYW1lKSA+IC0xKVxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICBsZXQgaXNXb3JkID0gaW5uZXIubmFtZSA9PSBcIlZhcmlhYmxlTmFtZVwiIHx8XG4gICAgICAgIGlubmVyLnRvIC0gaW5uZXIuZnJvbSA8IDIwICYmIElkZW50aWZpZXIudGVzdChjb250ZXh0LnN0YXRlLnNsaWNlRG9jKGlubmVyLmZyb20sIGlubmVyLnRvKSk7XG4gICAgaWYgKCFpc1dvcmQgJiYgIWNvbnRleHQuZXhwbGljaXQpXG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIGxldCBvcHRpb25zID0gW107XG4gICAgZm9yIChsZXQgcG9zID0gaW5uZXI7IHBvczsgcG9zID0gcG9zLnBhcmVudCkge1xuICAgICAgICBpZiAoU2NvcGVOb2Rlcy5oYXMocG9zLm5hbWUpKVxuICAgICAgICAgICAgb3B0aW9ucyA9IG9wdGlvbnMuY29uY2F0KGdldFNjb3BlKGNvbnRleHQuc3RhdGUuZG9jLCBwb3MpKTtcbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgICAgb3B0aW9ucyxcbiAgICAgICAgZnJvbTogaXNXb3JkID8gaW5uZXIuZnJvbSA6IGNvbnRleHQucG9zLFxuICAgICAgICB2YWxpZEZvcjogSWRlbnRpZmllclxuICAgIH07XG59XG5mdW5jdGlvbiBwYXRoRm9yKHJlYWQsIG1lbWJlciwgbmFtZSkge1xuICAgIHZhciBfYTtcbiAgICBsZXQgcGF0aCA9IFtdO1xuICAgIGZvciAoOzspIHtcbiAgICAgICAgbGV0IG9iaiA9IG1lbWJlci5maXJzdENoaWxkLCBwcm9wO1xuICAgICAgICBpZiAoKG9iaiA9PT0gbnVsbCB8fCBvYmogPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9iai5uYW1lKSA9PSBcIlZhcmlhYmxlTmFtZVwiKSB7XG4gICAgICAgICAgICBwYXRoLnB1c2gocmVhZChvYmopKTtcbiAgICAgICAgICAgIHJldHVybiB7IHBhdGg6IHBhdGgucmV2ZXJzZSgpLCBuYW1lIH07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoKG9iaiA9PT0gbnVsbCB8fCBvYmogPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9iai5uYW1lKSA9PSBcIk1lbWJlckV4cHJlc3Npb25cIiAmJiAoKF9hID0gKHByb3AgPSBvYmoubGFzdENoaWxkKSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLm5hbWUpID09IFwiUHJvcGVydHlOYW1lXCIpIHtcbiAgICAgICAgICAgIHBhdGgucHVzaChyZWFkKHByb3ApKTtcbiAgICAgICAgICAgIG1lbWJlciA9IG9iajtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgfVxufVxuLyoqXG5IZWxwZXIgZnVuY3Rpb24gZm9yIGRlZmluaW5nIEphdmFTY3JpcHQgY29tcGxldGlvbiBzb3VyY2VzLiBJdFxucmV0dXJucyB0aGUgY29tcGxldGFibGUgbmFtZSBhbmQgb2JqZWN0IHBhdGggZm9yIGEgY29tcGxldGlvblxuY29udGV4dCwgb3IgbnVsbCBpZiBubyBuYW1lL3Byb3BlcnR5IGNvbXBsZXRpb24gc2hvdWxkIGhhcHBlbiBhdFxudGhhdCBwb3NpdGlvbi4gRm9yIGV4YW1wbGUsIHdoZW4gY29tcGxldGluZyBhZnRlciBgYS5iLmNgIGl0IHdpbGxcbnJldHVybiBge3BhdGg6IFtcImFcIiwgXCJiXCJdLCBuYW1lOiBcImNcIn1gLiBXaGVuIGNvbXBsZXRpbmcgYWZ0ZXIgYHhgXG5pdCB3aWxsIHJldHVybiBge3BhdGg6IFtdLCBuYW1lOiBcInhcIn1gLiBXaGVuIG5vdCBpbiBhIHByb3BlcnR5IG9yXG5uYW1lLCBpdCB3aWxsIHJldHVybiBudWxsIGlmIGBjb250ZXh0LmV4cGxpY2l0YCBpcyBmYWxzZSwgYW5kXG5ge3BhdGg6IFtdLCBuYW1lOiBcIlwifWAgb3RoZXJ3aXNlLlxuKi9cbmZ1bmN0aW9uIGNvbXBsZXRpb25QYXRoKGNvbnRleHQpIHtcbiAgICBsZXQgcmVhZCA9IChub2RlKSA9PiBjb250ZXh0LnN0YXRlLmRvYy5zbGljZVN0cmluZyhub2RlLmZyb20sIG5vZGUudG8pO1xuICAgIGxldCBpbm5lciA9IHN5bnRheFRyZWUoY29udGV4dC5zdGF0ZSkucmVzb2x2ZUlubmVyKGNvbnRleHQucG9zLCAtMSk7XG4gICAgaWYgKGlubmVyLm5hbWUgPT0gXCJQcm9wZXJ0eU5hbWVcIikge1xuICAgICAgICByZXR1cm4gcGF0aEZvcihyZWFkLCBpbm5lci5wYXJlbnQsIHJlYWQoaW5uZXIpKTtcbiAgICB9XG4gICAgZWxzZSBpZiAoKGlubmVyLm5hbWUgPT0gXCIuXCIgfHwgaW5uZXIubmFtZSA9PSBcIj8uXCIpICYmIGlubmVyLnBhcmVudC5uYW1lID09IFwiTWVtYmVyRXhwcmVzc2lvblwiKSB7XG4gICAgICAgIHJldHVybiBwYXRoRm9yKHJlYWQsIGlubmVyLnBhcmVudCwgXCJcIik7XG4gICAgfVxuICAgIGVsc2UgaWYgKGRvbnRDb21wbGV0ZS5pbmRleE9mKGlubmVyLm5hbWUpID4gLTEpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIGVsc2UgaWYgKGlubmVyLm5hbWUgPT0gXCJWYXJpYWJsZU5hbWVcIiB8fCBpbm5lci50byAtIGlubmVyLmZyb20gPCAyMCAmJiBJZGVudGlmaWVyLnRlc3QocmVhZChpbm5lcikpKSB7XG4gICAgICAgIHJldHVybiB7IHBhdGg6IFtdLCBuYW1lOiByZWFkKGlubmVyKSB9O1xuICAgIH1cbiAgICBlbHNlIGlmIChpbm5lci5uYW1lID09IFwiTWVtYmVyRXhwcmVzc2lvblwiKSB7XG4gICAgICAgIHJldHVybiBwYXRoRm9yKHJlYWQsIGlubmVyLCBcIlwiKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHJldHVybiBjb250ZXh0LmV4cGxpY2l0ID8geyBwYXRoOiBbXSwgbmFtZTogXCJcIiB9IDogbnVsbDtcbiAgICB9XG59XG5mdW5jdGlvbiBlbnVtZXJhdGVQcm9wZXJ0eUNvbXBsZXRpb25zKG9iaiwgdG9wKSB7XG4gICAgbGV0IG9wdGlvbnMgPSBbXSwgc2VlbiA9IG5ldyBTZXQ7XG4gICAgZm9yIChsZXQgZGVwdGggPSAwOzsgZGVwdGgrKykge1xuICAgICAgICBmb3IgKGxldCBuYW1lIG9mIChPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyB8fCBPYmplY3Qua2V5cykob2JqKSkge1xuICAgICAgICAgICAgaWYgKCEvXlthLXpBLVpfJFxceGFhLVxcdWZmZGNdW1xcdyRcXHhhYS1cXHVmZmRjXSokLy50ZXN0KG5hbWUpIHx8IHNlZW4uaGFzKG5hbWUpKVxuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgc2Vlbi5hZGQobmFtZSk7XG4gICAgICAgICAgICBsZXQgdmFsdWU7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHZhbHVlID0gb2JqW25hbWVdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKF8pIHtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG9wdGlvbnMucHVzaCh7XG4gICAgICAgICAgICAgICAgbGFiZWw6IG5hbWUsXG4gICAgICAgICAgICAgICAgdHlwZTogdHlwZW9mIHZhbHVlID09IFwiZnVuY3Rpb25cIiA/ICgvXltBLVpdLy50ZXN0KG5hbWUpID8gXCJjbGFzc1wiIDogdG9wID8gXCJmdW5jdGlvblwiIDogXCJtZXRob2RcIilcbiAgICAgICAgICAgICAgICAgICAgOiB0b3AgPyBcInZhcmlhYmxlXCIgOiBcInByb3BlcnR5XCIsXG4gICAgICAgICAgICAgICAgYm9vc3Q6IC1kZXB0aFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IG5leHQgPSBPYmplY3QuZ2V0UHJvdG90eXBlT2Yob2JqKTtcbiAgICAgICAgaWYgKCFuZXh0KVxuICAgICAgICAgICAgcmV0dXJuIG9wdGlvbnM7XG4gICAgICAgIG9iaiA9IG5leHQ7XG4gICAgfVxufVxuLyoqXG5EZWZpbmVzIGEgW2NvbXBsZXRpb24gc291cmNlXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI2F1dG9jb21wbGV0ZS5Db21wbGV0aW9uU291cmNlKSB0aGF0XG5jb21wbGV0ZXMgZnJvbSB0aGUgZ2l2ZW4gc2NvcGUgb2JqZWN0IChmb3IgZXhhbXBsZSBgZ2xvYmFsVGhpc2ApLlxuV2lsbCBlbnRlciBwcm9wZXJ0aWVzIG9mIHRoZSBvYmplY3Qgd2hlbiBjb21wbGV0aW5nIHByb3BlcnRpZXMgb25cbmEgZGlyZWN0bHktbmFtZWQgcGF0aC5cbiovXG5mdW5jdGlvbiBzY29wZUNvbXBsZXRpb25Tb3VyY2Uoc2NvcGUpIHtcbiAgICBsZXQgY2FjaGUgPSBuZXcgTWFwO1xuICAgIHJldHVybiAoY29udGV4dCkgPT4ge1xuICAgICAgICBsZXQgcGF0aCA9IGNvbXBsZXRpb25QYXRoKGNvbnRleHQpO1xuICAgICAgICBpZiAoIXBhdGgpXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgbGV0IHRhcmdldCA9IHNjb3BlO1xuICAgICAgICBmb3IgKGxldCBzdGVwIG9mIHBhdGgucGF0aCkge1xuICAgICAgICAgICAgdGFyZ2V0ID0gdGFyZ2V0W3N0ZXBdO1xuICAgICAgICAgICAgaWYgKCF0YXJnZXQpXG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IG9wdGlvbnMgPSBjYWNoZS5nZXQodGFyZ2V0KTtcbiAgICAgICAgaWYgKCFvcHRpb25zKVxuICAgICAgICAgICAgY2FjaGUuc2V0KHRhcmdldCwgb3B0aW9ucyA9IGVudW1lcmF0ZVByb3BlcnR5Q29tcGxldGlvbnModGFyZ2V0LCAhcGF0aC5wYXRoLmxlbmd0aCkpO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgZnJvbTogY29udGV4dC5wb3MgLSBwYXRoLm5hbWUubGVuZ3RoLFxuICAgICAgICAgICAgb3B0aW9ucyxcbiAgICAgICAgICAgIHZhbGlkRm9yOiBJZGVudGlmaWVyXG4gICAgICAgIH07XG4gICAgfTtcbn1cblxuLyoqXG5BIGxhbmd1YWdlIHByb3ZpZGVyIGJhc2VkIG9uIHRoZSBbTGV6ZXIgSmF2YVNjcmlwdFxucGFyc2VyXShodHRwczovL2dpdGh1Yi5jb20vbGV6ZXItcGFyc2VyL2phdmFzY3JpcHQpLCBleHRlbmRlZCB3aXRoXG5oaWdobGlnaHRpbmcgYW5kIGluZGVudGF0aW9uIGluZm9ybWF0aW9uLlxuKi9cbmNvbnN0IGphdmFzY3JpcHRMYW5ndWFnZSA9IC8qQF9fUFVSRV9fKi9MUkxhbmd1YWdlLmRlZmluZSh7XG4gICAgbmFtZTogXCJqYXZhc2NyaXB0XCIsXG4gICAgcGFyc2VyOiAvKkBfX1BVUkVfXyovcGFyc2VyLmNvbmZpZ3VyZSh7XG4gICAgICAgIHByb3BzOiBbXG4gICAgICAgICAgICAvKkBfX1BVUkVfXyovaW5kZW50Tm9kZVByb3AuYWRkKHtcbiAgICAgICAgICAgICAgICBJZlN0YXRlbWVudDogLypAX19QVVJFX18qL2NvbnRpbnVlZEluZGVudCh7IGV4Y2VwdDogL15cXHMqKHt8ZWxzZVxcYikvIH0pLFxuICAgICAgICAgICAgICAgIFRyeVN0YXRlbWVudDogLypAX19QVVJFX18qL2NvbnRpbnVlZEluZGVudCh7IGV4Y2VwdDogL15cXHMqKHt8Y2F0Y2hcXGJ8ZmluYWxseVxcYikvIH0pLFxuICAgICAgICAgICAgICAgIExhYmVsZWRTdGF0ZW1lbnQ6IGZsYXRJbmRlbnQsXG4gICAgICAgICAgICAgICAgU3dpdGNoQm9keTogY29udGV4dCA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBhZnRlciA9IGNvbnRleHQudGV4dEFmdGVyLCBjbG9zZWQgPSAvXlxccypcXH0vLnRlc3QoYWZ0ZXIpLCBpc0Nhc2UgPSAvXlxccyooY2FzZXxkZWZhdWx0KVxcYi8udGVzdChhZnRlcik7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBjb250ZXh0LmJhc2VJbmRlbnQgKyAoY2xvc2VkID8gMCA6IGlzQ2FzZSA/IDEgOiAyKSAqIGNvbnRleHQudW5pdDtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIEJsb2NrOiAvKkBfX1BVUkVfXyovZGVsaW1pdGVkSW5kZW50KHsgY2xvc2luZzogXCJ9XCIgfSksXG4gICAgICAgICAgICAgICAgQXJyb3dGdW5jdGlvbjogY3ggPT4gY3guYmFzZUluZGVudCArIGN4LnVuaXQsXG4gICAgICAgICAgICAgICAgXCJUZW1wbGF0ZVN0cmluZyBCbG9ja0NvbW1lbnRcIjogKCkgPT4gbnVsbCxcbiAgICAgICAgICAgICAgICBcIlN0YXRlbWVudCBQcm9wZXJ0eVwiOiAvKkBfX1BVUkVfXyovY29udGludWVkSW5kZW50KHsgZXhjZXB0OiAvXlxccyp7LyB9KSxcbiAgICAgICAgICAgICAgICBKU1hFbGVtZW50KGNvbnRleHQpIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGNsb3NlZCA9IC9eXFxzKjxcXC8vLnRlc3QoY29udGV4dC50ZXh0QWZ0ZXIpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gY29udGV4dC5saW5lSW5kZW50KGNvbnRleHQubm9kZS5mcm9tKSArIChjbG9zZWQgPyAwIDogY29udGV4dC51bml0KTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIEpTWEVzY2FwZShjb250ZXh0KSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBjbG9zZWQgPSAvXFxzKlxcfS8udGVzdChjb250ZXh0LnRleHRBZnRlcik7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBjb250ZXh0LmxpbmVJbmRlbnQoY29udGV4dC5ub2RlLmZyb20pICsgKGNsb3NlZCA/IDAgOiBjb250ZXh0LnVuaXQpO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgXCJKU1hPcGVuVGFnIEpTWFNlbGZDbG9zaW5nVGFnXCIoY29udGV4dCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gY29udGV4dC5jb2x1bW4oY29udGV4dC5ub2RlLmZyb20pICsgY29udGV4dC51bml0O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgLypAX19QVVJFX18qL2ZvbGROb2RlUHJvcC5hZGQoe1xuICAgICAgICAgICAgICAgIFwiQmxvY2sgQ2xhc3NCb2R5IFN3aXRjaEJvZHkgRW51bUJvZHkgT2JqZWN0RXhwcmVzc2lvbiBBcnJheUV4cHJlc3Npb24gT2JqZWN0VHlwZVwiOiBmb2xkSW5zaWRlLFxuICAgICAgICAgICAgICAgIEJsb2NrQ29tbWVudCh0cmVlKSB7IHJldHVybiB7IGZyb206IHRyZWUuZnJvbSArIDIsIHRvOiB0cmVlLnRvIC0gMiB9OyB9XG4gICAgICAgICAgICB9KVxuICAgICAgICBdXG4gICAgfSksXG4gICAgbGFuZ3VhZ2VEYXRhOiB7XG4gICAgICAgIGNsb3NlQnJhY2tldHM6IHsgYnJhY2tldHM6IFtcIihcIiwgXCJbXCIsIFwie1wiLCBcIidcIiwgJ1wiJywgXCJgXCJdIH0sXG4gICAgICAgIGNvbW1lbnRUb2tlbnM6IHsgbGluZTogXCIvL1wiLCBibG9jazogeyBvcGVuOiBcIi8qXCIsIGNsb3NlOiBcIiovXCIgfSB9LFxuICAgICAgICBpbmRlbnRPbklucHV0OiAvXlxccyooPzpjYXNlIHxkZWZhdWx0OnxcXHt8XFx9fDxcXC8pJC8sXG4gICAgICAgIHdvcmRDaGFyczogXCIkXCJcbiAgICB9XG59KTtcbmNvbnN0IGpzeFN1Ymxhbmd1YWdlID0ge1xuICAgIHRlc3Q6IG5vZGUgPT4gL15KU1gvLnRlc3Qobm9kZS5uYW1lKSxcbiAgICBmYWNldDogLypAX19QVVJFX18qL2RlZmluZUxhbmd1YWdlRmFjZXQoeyBjb21tZW50VG9rZW5zOiB7IGJsb2NrOiB7IG9wZW46IFwiey8qXCIsIGNsb3NlOiBcIiovfVwiIH0gfSB9KVxufTtcbi8qKlxuQSBsYW5ndWFnZSBwcm92aWRlciBmb3IgVHlwZVNjcmlwdC5cbiovXG5jb25zdCB0eXBlc2NyaXB0TGFuZ3VhZ2UgPSAvKkBfX1BVUkVfXyovamF2YXNjcmlwdExhbmd1YWdlLmNvbmZpZ3VyZSh7IGRpYWxlY3Q6IFwidHNcIiB9LCBcInR5cGVzY3JpcHRcIik7XG4vKipcbkxhbmd1YWdlIHByb3ZpZGVyIGZvciBKU1guXG4qL1xuY29uc3QganN4TGFuZ3VhZ2UgPSAvKkBfX1BVUkVfXyovamF2YXNjcmlwdExhbmd1YWdlLmNvbmZpZ3VyZSh7XG4gICAgZGlhbGVjdDogXCJqc3hcIixcbiAgICBwcm9wczogWy8qQF9fUFVSRV9fKi9zdWJsYW5ndWFnZVByb3AuYWRkKG4gPT4gbi5pc1RvcCA/IFtqc3hTdWJsYW5ndWFnZV0gOiB1bmRlZmluZWQpXVxufSk7XG4vKipcbkxhbmd1YWdlIHByb3ZpZGVyIGZvciBKU1ggKyBUeXBlU2NyaXB0LlxuKi9cbmNvbnN0IHRzeExhbmd1YWdlID0gLypAX19QVVJFX18qL2phdmFzY3JpcHRMYW5ndWFnZS5jb25maWd1cmUoe1xuICAgIGRpYWxlY3Q6IFwianN4IHRzXCIsXG4gICAgcHJvcHM6IFsvKkBfX1BVUkVfXyovc3VibGFuZ3VhZ2VQcm9wLmFkZChuID0+IG4uaXNUb3AgPyBbanN4U3VibGFuZ3VhZ2VdIDogdW5kZWZpbmVkKV1cbn0sIFwidHlwZXNjcmlwdFwiKTtcbmxldCBrd0NvbXBsZXRpb24gPSAobmFtZSkgPT4gKHsgbGFiZWw6IG5hbWUsIHR5cGU6IFwia2V5d29yZFwiIH0pO1xuY29uc3Qga2V5d29yZHMgPSAvKkBfX1BVUkVfXyovXCJicmVhayBjYXNlIGNvbnN0IGNvbnRpbnVlIGRlZmF1bHQgZGVsZXRlIGV4cG9ydCBleHRlbmRzIGZhbHNlIGZpbmFsbHkgaW4gaW5zdGFuY2VvZiBsZXQgbmV3IHJldHVybiBzdGF0aWMgc3VwZXIgc3dpdGNoIHRoaXMgdGhyb3cgdHJ1ZSB0eXBlb2YgdmFyIHlpZWxkXCIuc3BsaXQoXCIgXCIpLm1hcChrd0NvbXBsZXRpb24pO1xuY29uc3QgdHlwZXNjcmlwdEtleXdvcmRzID0gLypAX19QVVJFX18qL2tleXdvcmRzLmNvbmNhdCgvKkBfX1BVUkVfXyovW1wiZGVjbGFyZVwiLCBcImltcGxlbWVudHNcIiwgXCJwcml2YXRlXCIsIFwicHJvdGVjdGVkXCIsIFwicHVibGljXCJdLm1hcChrd0NvbXBsZXRpb24pKTtcbi8qKlxuSmF2YVNjcmlwdCBzdXBwb3J0LiBJbmNsdWRlcyBbc25pcHBldF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNsYW5nLWphdmFzY3JpcHQuc25pcHBldHMpXG5hbmQgbG9jYWwgdmFyaWFibGUgY29tcGxldGlvbi5cbiovXG5mdW5jdGlvbiBqYXZhc2NyaXB0KGNvbmZpZyA9IHt9KSB7XG4gICAgbGV0IGxhbmcgPSBjb25maWcuanN4ID8gKGNvbmZpZy50eXBlc2NyaXB0ID8gdHN4TGFuZ3VhZ2UgOiBqc3hMYW5ndWFnZSlcbiAgICAgICAgOiBjb25maWcudHlwZXNjcmlwdCA/IHR5cGVzY3JpcHRMYW5ndWFnZSA6IGphdmFzY3JpcHRMYW5ndWFnZTtcbiAgICBsZXQgY29tcGxldGlvbnMgPSBjb25maWcudHlwZXNjcmlwdCA/IHR5cGVzY3JpcHRTbmlwcGV0cy5jb25jYXQodHlwZXNjcmlwdEtleXdvcmRzKSA6IHNuaXBwZXRzLmNvbmNhdChrZXl3b3Jkcyk7XG4gICAgcmV0dXJuIG5ldyBMYW5ndWFnZVN1cHBvcnQobGFuZywgW1xuICAgICAgICBqYXZhc2NyaXB0TGFuZ3VhZ2UuZGF0YS5vZih7XG4gICAgICAgICAgICBhdXRvY29tcGxldGU6IGlmTm90SW4oZG9udENvbXBsZXRlLCBjb21wbGV0ZUZyb21MaXN0KGNvbXBsZXRpb25zKSlcbiAgICAgICAgfSksXG4gICAgICAgIGphdmFzY3JpcHRMYW5ndWFnZS5kYXRhLm9mKHtcbiAgICAgICAgICAgIGF1dG9jb21wbGV0ZTogbG9jYWxDb21wbGV0aW9uU291cmNlXG4gICAgICAgIH0pLFxuICAgICAgICBjb25maWcuanN4ID8gYXV0b0Nsb3NlVGFncyA6IFtdLFxuICAgIF0pO1xufVxuZnVuY3Rpb24gZmluZE9wZW5UYWcobm9kZSkge1xuICAgIGZvciAoOzspIHtcbiAgICAgICAgaWYgKG5vZGUubmFtZSA9PSBcIkpTWE9wZW5UYWdcIiB8fCBub2RlLm5hbWUgPT0gXCJKU1hTZWxmQ2xvc2luZ1RhZ1wiIHx8IG5vZGUubmFtZSA9PSBcIkpTWEZyYWdtZW50VGFnXCIpXG4gICAgICAgICAgICByZXR1cm4gbm9kZTtcbiAgICAgICAgaWYgKG5vZGUubmFtZSA9PSBcIkpTWEVzY2FwZVwiIHx8ICFub2RlLnBhcmVudClcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICBub2RlID0gbm9kZS5wYXJlbnQ7XG4gICAgfVxufVxuZnVuY3Rpb24gZWxlbWVudE5hbWUoZG9jLCB0cmVlLCBtYXggPSBkb2MubGVuZ3RoKSB7XG4gICAgZm9yIChsZXQgY2ggPSB0cmVlID09PSBudWxsIHx8IHRyZWUgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHRyZWUuZmlyc3RDaGlsZDsgY2g7IGNoID0gY2gubmV4dFNpYmxpbmcpIHtcbiAgICAgICAgaWYgKGNoLm5hbWUgPT0gXCJKU1hJZGVudGlmaWVyXCIgfHwgY2gubmFtZSA9PSBcIkpTWEJ1aWx0aW5cIiB8fCBjaC5uYW1lID09IFwiSlNYTmFtZXNwYWNlZE5hbWVcIiB8fFxuICAgICAgICAgICAgY2gubmFtZSA9PSBcIkpTWE1lbWJlckV4cHJlc3Npb25cIilcbiAgICAgICAgICAgIHJldHVybiBkb2Muc2xpY2VTdHJpbmcoY2guZnJvbSwgTWF0aC5taW4oY2gudG8sIG1heCkpO1xuICAgIH1cbiAgICByZXR1cm4gXCJcIjtcbn1cbmNvbnN0IGFuZHJvaWQgPSB0eXBlb2YgbmF2aWdhdG9yID09IFwib2JqZWN0XCIgJiYgLypAX19QVVJFX18qLy9BbmRyb2lkXFxiLy50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpO1xuLyoqXG5FeHRlbnNpb24gdGhhdCB3aWxsIGF1dG9tYXRpY2FsbHkgaW5zZXJ0IEpTWCBjbG9zZSB0YWdzIHdoZW4gYSBgPmAgb3JcbmAvYCBpcyB0eXBlZC5cbiovXG5jb25zdCBhdXRvQ2xvc2VUYWdzID0gLypAX19QVVJFX18qL0VkaXRvclZpZXcuaW5wdXRIYW5kbGVyLm9mKCh2aWV3LCBmcm9tLCB0bywgdGV4dCwgZGVmYXVsdEluc2VydCkgPT4ge1xuICAgIGlmICgoYW5kcm9pZCA/IHZpZXcuY29tcG9zaW5nIDogdmlldy5jb21wb3NpdGlvblN0YXJ0ZWQpIHx8IHZpZXcuc3RhdGUucmVhZE9ubHkgfHxcbiAgICAgICAgZnJvbSAhPSB0byB8fCAodGV4dCAhPSBcIj5cIiAmJiB0ZXh0ICE9IFwiL1wiKSB8fFxuICAgICAgICAhamF2YXNjcmlwdExhbmd1YWdlLmlzQWN0aXZlQXQodmlldy5zdGF0ZSwgZnJvbSwgLTEpKVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgbGV0IGJhc2UgPSBkZWZhdWx0SW5zZXJ0KCksIHsgc3RhdGUgfSA9IGJhc2U7XG4gICAgbGV0IGNsb3NlVGFncyA9IHN0YXRlLmNoYW5nZUJ5UmFuZ2UocmFuZ2UgPT4ge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIGxldCB7IGhlYWQgfSA9IHJhbmdlLCBhcm91bmQgPSBzeW50YXhUcmVlKHN0YXRlKS5yZXNvbHZlSW5uZXIoaGVhZCAtIDEsIC0xKSwgbmFtZTtcbiAgICAgICAgaWYgKGFyb3VuZC5uYW1lID09IFwiSlNYU3RhcnRUYWdcIilcbiAgICAgICAgICAgIGFyb3VuZCA9IGFyb3VuZC5wYXJlbnQ7XG4gICAgICAgIGlmIChzdGF0ZS5kb2Muc2xpY2VTdHJpbmcoaGVhZCAtIDEsIGhlYWQpICE9IHRleHQgfHwgYXJvdW5kLm5hbWUgPT0gXCJKU1hBdHRyaWJ1dGVWYWx1ZVwiICYmIGFyb3VuZC50byA+IGhlYWQpIDtcbiAgICAgICAgZWxzZSBpZiAodGV4dCA9PSBcIj5cIiAmJiBhcm91bmQubmFtZSA9PSBcIkpTWEZyYWdtZW50VGFnXCIpIHtcbiAgICAgICAgICAgIHJldHVybiB7IHJhbmdlLCBjaGFuZ2VzOiB7IGZyb206IGhlYWQsIGluc2VydDogYDwvPmAgfSB9O1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHRleHQgPT0gXCIvXCIgJiYgYXJvdW5kLm5hbWUgPT0gXCJKU1hTdGFydENsb3NlVGFnXCIpIHtcbiAgICAgICAgICAgIGxldCBlbXB0eSA9IGFyb3VuZC5wYXJlbnQsIGJhc2UgPSBlbXB0eS5wYXJlbnQ7XG4gICAgICAgICAgICBpZiAoYmFzZSAmJiBlbXB0eS5mcm9tID09IGhlYWQgLSAyICYmXG4gICAgICAgICAgICAgICAgKChuYW1lID0gZWxlbWVudE5hbWUoc3RhdGUuZG9jLCBiYXNlLmZpcnN0Q2hpbGQsIGhlYWQpKSB8fCAoKF9hID0gYmFzZS5maXJzdENoaWxkKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EubmFtZSkgPT0gXCJKU1hGcmFnbWVudFRhZ1wiKSkge1xuICAgICAgICAgICAgICAgIGxldCBpbnNlcnQgPSBgJHtuYW1lfT5gO1xuICAgICAgICAgICAgICAgIHJldHVybiB7IHJhbmdlOiBFZGl0b3JTZWxlY3Rpb24uY3Vyc29yKGhlYWQgKyBpbnNlcnQubGVuZ3RoLCAtMSksIGNoYW5nZXM6IHsgZnJvbTogaGVhZCwgaW5zZXJ0IH0gfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0ZXh0ID09IFwiPlwiKSB7XG4gICAgICAgICAgICBsZXQgb3BlblRhZyA9IGZpbmRPcGVuVGFnKGFyb3VuZCk7XG4gICAgICAgICAgICBpZiAob3BlblRhZyAmJiBvcGVuVGFnLm5hbWUgPT0gXCJKU1hPcGVuVGFnXCIgJiZcbiAgICAgICAgICAgICAgICAhL15cXC8/PnxePFxcLy8udGVzdChzdGF0ZS5kb2Muc2xpY2VTdHJpbmcoaGVhZCwgaGVhZCArIDIpKSAmJlxuICAgICAgICAgICAgICAgIChuYW1lID0gZWxlbWVudE5hbWUoc3RhdGUuZG9jLCBvcGVuVGFnLCBoZWFkKSkpXG4gICAgICAgICAgICAgICAgcmV0dXJuIHsgcmFuZ2UsIGNoYW5nZXM6IHsgZnJvbTogaGVhZCwgaW5zZXJ0OiBgPC8ke25hbWV9PmAgfSB9O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7IHJhbmdlIH07XG4gICAgfSk7XG4gICAgaWYgKGNsb3NlVGFncy5jaGFuZ2VzLmVtcHR5KVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgdmlldy5kaXNwYXRjaChbXG4gICAgICAgIGJhc2UsXG4gICAgICAgIHN0YXRlLnVwZGF0ZShjbG9zZVRhZ3MsIHsgdXNlckV2ZW50OiBcImlucHV0LmNvbXBsZXRlXCIsIHNjcm9sbEludG9WaWV3OiB0cnVlIH0pXG4gICAgXSk7XG4gICAgcmV0dXJuIHRydWU7XG59KTtcblxuLyoqXG5Db25uZWN0cyBhbiBbRVNMaW50XShodHRwczovL2VzbGludC5vcmcvKSBsaW50ZXIgdG8gQ29kZU1pcnJvcidzXG5bbGludF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNsaW50KSBpbnRlZ3JhdGlvbi4gYGVzbGludGAgc2hvdWxkIGJlIGFuIGluc3RhbmNlIG9mIHRoZVxuW2BMaW50ZXJgXShodHRwczovL2VzbGludC5vcmcvZG9jcy9kZXZlbG9wZXItZ3VpZGUvbm9kZWpzLWFwaSNsaW50ZXIpXG5jbGFzcywgYW5kIGBjb25maWdgIGFuIG9wdGlvbmFsIEVTTGludCBjb25maWd1cmF0aW9uLiBUaGUgcmV0dXJuXG52YWx1ZSBvZiB0aGlzIGZ1bmN0aW9uIGNhbiBiZSBwYXNzZWQgdG8gW2BsaW50ZXJgXShodHRwczovL2NvZGVtaXJyb3IubmV0LzYvZG9jcy9yZWYvI2xpbnQubGludGVyKVxudG8gY3JlYXRlIGEgSmF2YVNjcmlwdCBsaW50aW5nIGV4dGVuc2lvbi5cblxuTm90ZSB0aGF0IEVTTGludCB0YXJnZXRzIG5vZGUsIGFuZCBpcyB0cmlja3kgdG8gcnVuIGluIHRoZVxuYnJvd3Nlci4gVGhlXG5bZXNsaW50LWxpbnRlci1icm93c2VyaWZ5XShodHRwczovL2dpdGh1Yi5jb20vVXppVGVjaC9lc2xpbnQtbGludGVyLWJyb3dzZXJpZnkpXG5wYWNrYWdlIG1heSBoZWxwIHdpdGggdGhhdCAoc2VlXG5bZXhhbXBsZV0oaHR0cHM6Ly9naXRodWIuY29tL1V6aVRlY2gvZXNsaW50LWxpbnRlci1icm93c2VyaWZ5L2Jsb2IvbWFzdGVyL2V4YW1wbGUvc2NyaXB0LmpzKSkuXG4qL1xuZnVuY3Rpb24gZXNMaW50KGVzbGludCwgY29uZmlnKSB7XG4gICAgaWYgKCFjb25maWcpIHtcbiAgICAgICAgY29uZmlnID0ge1xuICAgICAgICAgICAgcGFyc2VyT3B0aW9uczogeyBlY21hVmVyc2lvbjogMjAxOSwgc291cmNlVHlwZTogXCJtb2R1bGVcIiB9LFxuICAgICAgICAgICAgZW52OiB7IGJyb3dzZXI6IHRydWUsIG5vZGU6IHRydWUsIGVzNjogdHJ1ZSwgZXMyMDE1OiB0cnVlLCBlczIwMTc6IHRydWUsIGVzMjAyMDogdHJ1ZSB9LFxuICAgICAgICAgICAgcnVsZXM6IHt9XG4gICAgICAgIH07XG4gICAgICAgIGVzbGludC5nZXRSdWxlcygpLmZvckVhY2goKGRlc2MsIG5hbWUpID0+IHtcbiAgICAgICAgICAgIHZhciBfYTtcbiAgICAgICAgICAgIGlmICgoX2EgPSBkZXNjLm1ldGEuZG9jcykgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLnJlY29tbWVuZGVkKVxuICAgICAgICAgICAgICAgIGNvbmZpZy5ydWxlc1tuYW1lXSA9IDI7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICByZXR1cm4gKHZpZXcpID0+IHtcbiAgICAgICAgbGV0IHsgc3RhdGUgfSA9IHZpZXcsIGZvdW5kID0gW107XG4gICAgICAgIGZvciAobGV0IHsgZnJvbSwgdG8gfSBvZiBqYXZhc2NyaXB0TGFuZ3VhZ2UuZmluZFJlZ2lvbnMoc3RhdGUpKSB7XG4gICAgICAgICAgICBsZXQgZnJvbUxpbmUgPSBzdGF0ZS5kb2MubGluZUF0KGZyb20pLCBvZmZzZXQgPSB7IGxpbmU6IGZyb21MaW5lLm51bWJlciAtIDEsIGNvbDogZnJvbSAtIGZyb21MaW5lLmZyb20sIHBvczogZnJvbSB9O1xuICAgICAgICAgICAgZm9yIChsZXQgZCBvZiBlc2xpbnQudmVyaWZ5KHN0YXRlLnNsaWNlRG9jKGZyb20sIHRvKSwgY29uZmlnKSlcbiAgICAgICAgICAgICAgICBmb3VuZC5wdXNoKHRyYW5zbGF0ZURpYWdub3N0aWMoZCwgc3RhdGUuZG9jLCBvZmZzZXQpKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZm91bmQ7XG4gICAgfTtcbn1cbmZ1bmN0aW9uIG1hcFBvcyhsaW5lLCBjb2wsIGRvYywgb2Zmc2V0KSB7XG4gICAgcmV0dXJuIGRvYy5saW5lKGxpbmUgKyBvZmZzZXQubGluZSkuZnJvbSArIGNvbCArIChsaW5lID09IDEgPyBvZmZzZXQuY29sIC0gMSA6IC0xKTtcbn1cbmZ1bmN0aW9uIHRyYW5zbGF0ZURpYWdub3N0aWMoaW5wdXQsIGRvYywgb2Zmc2V0KSB7XG4gICAgbGV0IHN0YXJ0ID0gbWFwUG9zKGlucHV0LmxpbmUsIGlucHV0LmNvbHVtbiwgZG9jLCBvZmZzZXQpO1xuICAgIGxldCByZXN1bHQgPSB7XG4gICAgICAgIGZyb206IHN0YXJ0LFxuICAgICAgICB0bzogaW5wdXQuZW5kTGluZSAhPSBudWxsICYmIGlucHV0LmVuZENvbHVtbiAhPSAxID8gbWFwUG9zKGlucHV0LmVuZExpbmUsIGlucHV0LmVuZENvbHVtbiwgZG9jLCBvZmZzZXQpIDogc3RhcnQsXG4gICAgICAgIG1lc3NhZ2U6IGlucHV0Lm1lc3NhZ2UsXG4gICAgICAgIHNvdXJjZTogaW5wdXQucnVsZUlkID8gXCJlc2xpbnQ6XCIgKyBpbnB1dC5ydWxlSWQgOiBcImVzbGludFwiLFxuICAgICAgICBzZXZlcml0eTogaW5wdXQuc2V2ZXJpdHkgPT0gMSA/IFwid2FybmluZ1wiIDogXCJlcnJvclwiLFxuICAgIH07XG4gICAgaWYgKGlucHV0LmZpeCkge1xuICAgICAgICBsZXQgeyByYW5nZSwgdGV4dCB9ID0gaW5wdXQuZml4LCBmcm9tID0gcmFuZ2VbMF0gKyBvZmZzZXQucG9zIC0gc3RhcnQsIHRvID0gcmFuZ2VbMV0gKyBvZmZzZXQucG9zIC0gc3RhcnQ7XG4gICAgICAgIHJlc3VsdC5hY3Rpb25zID0gW3tcbiAgICAgICAgICAgICAgICBuYW1lOiBcImZpeFwiLFxuICAgICAgICAgICAgICAgIGFwcGx5KHZpZXcsIHN0YXJ0KSB7XG4gICAgICAgICAgICAgICAgICAgIHZpZXcuZGlzcGF0Y2goeyBjaGFuZ2VzOiB7IGZyb206IHN0YXJ0ICsgZnJvbSwgdG86IHN0YXJ0ICsgdG8sIGluc2VydDogdGV4dCB9LCBzY3JvbGxJbnRvVmlldzogdHJ1ZSB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XTtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbn1cblxuZXhwb3J0IHsgYXV0b0Nsb3NlVGFncywgY29tcGxldGlvblBhdGgsIGVzTGludCwgamF2YXNjcmlwdCwgamF2YXNjcmlwdExhbmd1YWdlLCBqc3hMYW5ndWFnZSwgbG9jYWxDb21wbGV0aW9uU291cmNlLCBzY29wZUNvbXBsZXRpb25Tb3VyY2UsIHNuaXBwZXRzLCB0c3hMYW5ndWFnZSwgdHlwZXNjcmlwdExhbmd1YWdlLCB0eXBlc2NyaXB0U25pcHBldHMgfTtcbiIsCiAgICAiaW1wb3J0IHsgRXh0ZXJuYWxUb2tlbml6ZXIsIExSUGFyc2VyLCBMb2NhbFRva2VuR3JvdXAgfSBmcm9tICdAbGV6ZXIvbHInO1xuaW1wb3J0IHsgc3R5bGVUYWdzLCB0YWdzIH0gZnJvbSAnQGxlemVyL2hpZ2hsaWdodCc7XG5cbi8vIFRoaXMgZmlsZSB3YXMgZ2VuZXJhdGVkIGJ5IGxlemVyLWdlbmVyYXRvci4gWW91IHByb2JhYmx5IHNob3VsZG4ndCBlZGl0IGl0LlxuY29uc3QgZGVzY2VuZGFudE9wID0gMTIyLFxuICBVbml0ID0gMSxcbiAgaWRlbnRpZmllciA9IDEyMyxcbiAgY2FsbGVlID0gMTI0LFxuICBWYXJpYWJsZU5hbWUgPSAyLFxuICBxdWVyeUlkZW50aWZpZXIgPSAxMjUsXG4gIHF1ZXJ5VmFyaWFibGVOYW1lID0gMyxcbiAgUXVlcnlDYWxsZWUgPSA0O1xuXG4vKiBIYW5kLXdyaXR0ZW4gdG9rZW5pemVycyBmb3IgQ1NTIHRva2VucyB0aGF0IGNhbid0IGJlXG4gICBleHByZXNzZWQgYnkgTGV6ZXIncyBidWlsdC1pbiB0b2tlbml6ZXIuICovXG5cbmNvbnN0IHNwYWNlID0gWzksIDEwLCAxMSwgMTIsIDEzLCAzMiwgMTMzLCAxNjAsIDU3NjAsIDgxOTIsIDgxOTMsIDgxOTQsIDgxOTUsIDgxOTYsIDgxOTcsXG4gICAgICAgICAgICAgICA4MTk4LCA4MTk5LCA4MjAwLCA4MjAxLCA4MjAyLCA4MjMyLCA4MjMzLCA4MjM5LCA4Mjg3LCAxMjI4OF07XG5jb25zdCBjb2xvbiA9IDU4LCBwYXJlbkwgPSA0MCwgdW5kZXJzY29yZSA9IDk1LCBicmFja2V0TCA9IDkxLCBkYXNoID0gNDUsIHBlcmlvZCA9IDQ2LFxuICAgICAgaGFzaCA9IDM1LCBwZXJjZW50ID0gMzcsIGFtcGVyc2FuZCA9IDM4LCBiYWNrc2xhc2ggPSA5MiwgbmV3bGluZSA9IDEwLCBhc3RlcmlzayA9IDQyO1xuXG5mdW5jdGlvbiBpc0FscGhhKGNoKSB7IHJldHVybiBjaCA+PSA2NSAmJiBjaCA8PSA5MCB8fCBjaCA+PSA5NyAmJiBjaCA8PSAxMjIgfHwgY2ggPj0gMTYxIH1cblxuZnVuY3Rpb24gaXNEaWdpdChjaCkgeyByZXR1cm4gY2ggPj0gNDggJiYgY2ggPD0gNTcgfVxuXG5mdW5jdGlvbiBpc0hleChjaCkgeyByZXR1cm4gaXNEaWdpdChjaCkgfHwgY2ggPj0gOTcgJiYgY2ggPD0gMTAyIHx8IGNoID49IDY1ICYmIGNoIDw9IDcwIH1cblxuY29uc3QgaWRlbnRpZmllclRva2VucyA9IChpZCwgdmFyTmFtZSwgY2FsbGVlKSA9PiAoaW5wdXQsIHN0YWNrKSA9PiB7XG4gIGZvciAobGV0IGluc2lkZSA9IGZhbHNlLCBkYXNoZXMgPSAwLCBpID0gMDs7IGkrKykge1xuICAgIGxldCB7bmV4dH0gPSBpbnB1dDtcbiAgICBpZiAoaXNBbHBoYShuZXh0KSB8fCBuZXh0ID09IGRhc2ggfHwgbmV4dCA9PSB1bmRlcnNjb3JlIHx8IChpbnNpZGUgJiYgaXNEaWdpdChuZXh0KSkpIHtcbiAgICAgIGlmICghaW5zaWRlICYmIChuZXh0ICE9IGRhc2ggfHwgaSA+IDApKSBpbnNpZGUgPSB0cnVlO1xuICAgICAgaWYgKGRhc2hlcyA9PT0gaSAmJiBuZXh0ID09IGRhc2gpIGRhc2hlcysrO1xuICAgICAgaW5wdXQuYWR2YW5jZSgpO1xuICAgIH0gZWxzZSBpZiAobmV4dCA9PSBiYWNrc2xhc2ggJiYgaW5wdXQucGVlaygxKSAhPSBuZXdsaW5lKSB7XG4gICAgICBpbnB1dC5hZHZhbmNlKCk7XG4gICAgICBpZiAoaXNIZXgoaW5wdXQubmV4dCkpIHtcbiAgICAgICAgZG8geyBpbnB1dC5hZHZhbmNlKCk7IH0gd2hpbGUgKGlzSGV4KGlucHV0Lm5leHQpKVxuICAgICAgICBpZiAoaW5wdXQubmV4dCA9PSAzMikgaW5wdXQuYWR2YW5jZSgpO1xuICAgICAgfSBlbHNlIGlmIChpbnB1dC5uZXh0ID4gLTEpIHtcbiAgICAgICAgaW5wdXQuYWR2YW5jZSgpO1xuICAgICAgfVxuICAgICAgaW5zaWRlID0gdHJ1ZTtcbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKGluc2lkZSkgaW5wdXQuYWNjZXB0VG9rZW4oXG4gICAgICAgIGRhc2hlcyA9PSAyICYmIHN0YWNrLmNhblNoaWZ0KFZhcmlhYmxlTmFtZSkgPyB2YXJOYW1lIDogbmV4dCA9PSBwYXJlbkwgPyBjYWxsZWUgOiBpZFxuICAgICAgKTtcbiAgICAgIGJyZWFrXG4gICAgfVxuICB9XG59O1xuXG5jb25zdCBpZGVudGlmaWVycyA9IG5ldyBFeHRlcm5hbFRva2VuaXplcihcbiAgaWRlbnRpZmllclRva2VucyhpZGVudGlmaWVyLCBWYXJpYWJsZU5hbWUsIGNhbGxlZSlcbik7XG5jb25zdCBxdWVyeUlkZW50aWZpZXJzID0gbmV3IEV4dGVybmFsVG9rZW5pemVyKFxuICBpZGVudGlmaWVyVG9rZW5zKHF1ZXJ5SWRlbnRpZmllciwgcXVlcnlWYXJpYWJsZU5hbWUsIFF1ZXJ5Q2FsbGVlKVxuKTtcblxuY29uc3QgZGVzY2VuZGFudCA9IG5ldyBFeHRlcm5hbFRva2VuaXplcihpbnB1dCA9PiB7XG4gIGlmIChzcGFjZS5pbmNsdWRlcyhpbnB1dC5wZWVrKC0xKSkpIHtcbiAgICBsZXQge25leHR9ID0gaW5wdXQ7XG4gICAgaWYgKGlzQWxwaGEobmV4dCkgfHwgbmV4dCA9PSB1bmRlcnNjb3JlIHx8IG5leHQgPT0gaGFzaCB8fCBuZXh0ID09IHBlcmlvZCB8fFxuICAgICAgICBuZXh0ID09IGFzdGVyaXNrIHx8IG5leHQgPT0gYnJhY2tldEwgfHwgbmV4dCA9PSBjb2xvbiAmJiBpc0FscGhhKGlucHV0LnBlZWsoMSkpIHx8XG4gICAgICAgIG5leHQgPT0gZGFzaCB8fCBuZXh0ID09IGFtcGVyc2FuZClcbiAgICAgIGlucHV0LmFjY2VwdFRva2VuKGRlc2NlbmRhbnRPcCk7XG4gIH1cbn0pO1xuXG5jb25zdCB1bml0VG9rZW4gPSBuZXcgRXh0ZXJuYWxUb2tlbml6ZXIoaW5wdXQgPT4ge1xuICBpZiAoIXNwYWNlLmluY2x1ZGVzKGlucHV0LnBlZWsoLTEpKSkge1xuICAgIGxldCB7bmV4dH0gPSBpbnB1dDtcbiAgICBpZiAobmV4dCA9PSBwZXJjZW50KSB7IGlucHV0LmFkdmFuY2UoKTsgaW5wdXQuYWNjZXB0VG9rZW4oVW5pdCk7IH1cbiAgICBpZiAoaXNBbHBoYShuZXh0KSkge1xuICAgICAgZG8geyBpbnB1dC5hZHZhbmNlKCk7IH0gd2hpbGUgKGlzQWxwaGEoaW5wdXQubmV4dCkgfHwgaXNEaWdpdChpbnB1dC5uZXh0KSlcbiAgICAgIGlucHV0LmFjY2VwdFRva2VuKFVuaXQpO1xuICAgIH1cbiAgfVxufSk7XG5cbmNvbnN0IGNzc0hpZ2hsaWdodGluZyA9IHN0eWxlVGFncyh7XG4gIFwiQXRLZXl3b3JkIGltcG9ydCBjaGFyc2V0IG5hbWVzcGFjZSBrZXlmcmFtZXMgbWVkaWEgc3VwcG9ydHNcIjogdGFncy5kZWZpbml0aW9uS2V5d29yZCxcbiAgXCJmcm9tIHRvIHNlbGVjdG9yXCI6IHRhZ3Mua2V5d29yZCxcbiAgTmFtZXNwYWNlTmFtZTogdGFncy5uYW1lc3BhY2UsXG4gIEtleWZyYW1lTmFtZTogdGFncy5sYWJlbE5hbWUsXG4gIEtleWZyYW1lUmFuZ2VOYW1lOiB0YWdzLm9wZXJhdG9yS2V5d29yZCxcbiAgVGFnTmFtZTogdGFncy50YWdOYW1lLFxuICBDbGFzc05hbWU6IHRhZ3MuY2xhc3NOYW1lLFxuICBQc2V1ZG9DbGFzc05hbWU6IHRhZ3MuY29uc3RhbnQodGFncy5jbGFzc05hbWUpLFxuICBJZE5hbWU6IHRhZ3MubGFiZWxOYW1lLFxuICBcIkZlYXR1cmVOYW1lIFByb3BlcnR5TmFtZVwiOiB0YWdzLnByb3BlcnR5TmFtZSxcbiAgQXR0cmlidXRlTmFtZTogdGFncy5hdHRyaWJ1dGVOYW1lLFxuICBOdW1iZXJMaXRlcmFsOiB0YWdzLm51bWJlcixcbiAgS2V5d29yZFF1ZXJ5OiB0YWdzLmtleXdvcmQsXG4gIFVuYXJ5UXVlcnlPcDogdGFncy5vcGVyYXRvcktleXdvcmQsXG4gIFwiQ2FsbFRhZyBWYWx1ZU5hbWVcIjogdGFncy5hdG9tLFxuICBWYXJpYWJsZU5hbWU6IHRhZ3MudmFyaWFibGVOYW1lLFxuICBDYWxsZWU6IHRhZ3Mub3BlcmF0b3JLZXl3b3JkLFxuICBVbml0OiB0YWdzLnVuaXQsXG4gIFwiVW5pdmVyc2FsU2VsZWN0b3IgTmVzdGluZ1NlbGVjdG9yXCI6IHRhZ3MuZGVmaW5pdGlvbk9wZXJhdG9yLFxuICBcIk1hdGNoT3AgQ29tcGFyZU9wXCI6IHRhZ3MuY29tcGFyZU9wZXJhdG9yLFxuICBcIkNoaWxkT3AgU2libGluZ09wLCBMb2dpY09wXCI6IHRhZ3MubG9naWNPcGVyYXRvcixcbiAgQmluT3A6IHRhZ3MuYXJpdGhtZXRpY09wZXJhdG9yLFxuICBJbXBvcnRhbnQ6IHRhZ3MubW9kaWZpZXIsXG4gIENvbW1lbnQ6IHRhZ3MuYmxvY2tDb21tZW50LFxuICBDb2xvckxpdGVyYWw6IHRhZ3MuY29sb3IsXG4gIFwiUGFyZW50aGVzaXplZENvbnRlbnQgU3RyaW5nTGl0ZXJhbFwiOiB0YWdzLnN0cmluZyxcbiAgXCI6XCI6IHRhZ3MucHVuY3R1YXRpb24sXG4gIFwiUHNldWRvT3AgI1wiOiB0YWdzLmRlcmVmT3BlcmF0b3IsXG4gIFwiOyAsXCI6IHRhZ3Muc2VwYXJhdG9yLFxuICBcIiggKVwiOiB0YWdzLnBhcmVuLFxuICBcIlsgXVwiOiB0YWdzLnNxdWFyZUJyYWNrZXQsXG4gIFwieyB9XCI6IHRhZ3MuYnJhY2Vcbn0pO1xuXG4vLyBUaGlzIGZpbGUgd2FzIGdlbmVyYXRlZCBieSBsZXplci1nZW5lcmF0b3IuIFlvdSBwcm9iYWJseSBzaG91bGRuJ3QgZWRpdCBpdC5cbmNvbnN0IHNwZWNfY2FsbGVlID0ge19fcHJvdG9fXzpudWxsLGxhbmc6MzgsIFwibnRoLWNoaWxkXCI6MzgsIFwibnRoLWxhc3QtY2hpbGRcIjozOCwgXCJudGgtb2YtdHlwZVwiOjM4LCBcIm50aC1sYXN0LW9mLXR5cGVcIjozOCwgZGlyOjM4LCBcImhvc3QtY29udGV4dFwiOjM4LCBpZjo4NCwgdXJsOjEyNCwgXCJ1cmwtcHJlZml4XCI6MTI0LCBkb21haW46MTI0LCByZWdleHA6MTI0fTtcbmNvbnN0IHNwZWNfcXVlcnlJZGVudGlmaWVyID0ge19fcHJvdG9fXzpudWxsLG9yOjk4LCBhbmQ6OTgsIG5vdDoxMDYsIG9ubHk6MTA2LCBsYXllcjoxNzB9O1xuY29uc3Qgc3BlY19RdWVyeUNhbGxlZSA9IHtfX3Byb3RvX186bnVsbCxzZWxlY3RvcjoxMTIsIGxheWVyOjE2Nn07XG5jb25zdCBzcGVjX0F0S2V5d29yZCA9IHtfX3Byb3RvX186bnVsbCxcIkBpbXBvcnRcIjoxNjIsIFwiQG1lZGlhXCI6MTc0LCBcIkBjaGFyc2V0XCI6MTc4LCBcIkBuYW1lc3BhY2VcIjoxODIsIFwiQGtleWZyYW1lc1wiOjE4OCwgXCJAc3VwcG9ydHNcIjoyMDAsIFwiQHNjb3BlXCI6MjA0fTtcbmNvbnN0IHNwZWNfaWRlbnRpZmllciA9IHtfX3Byb3RvX186bnVsbCx0bzoyMDd9O1xuY29uc3QgcGFyc2VyID0gTFJQYXJzZXIuZGVzZXJpYWxpemUoe1xuICB2ZXJzaW9uOiAxNCxcbiAgc3RhdGVzOiBcIkViUVlRZE9PTyNxUWRPT1AjeE9gT09PT1FQJyNDZicjQ2ZPT1FQJyNDZScjQ2VPI31RZE8nI0NoTyRuUWFPJyNDY08keFFkTycjQ2tPJVRRZE8nI0RwTyVZUWRPJyNEck8lX1FkTycjRHVPJV9RZE8nI0R4T09RUCcjRlYnI0ZWTyZlUWhPJyNFaE9PUVMnI0ZVJyNGVU9PUVMnI0VrJyNFa1FZUWRPT08mbFFkTycjRU9PJlBRaE8nI0VVTyZsUWRPJyNFV08nYVFkTycjRVlPJ2xRZE8nI0VdTyd0UWhPJyNFY08oVlFkTycjRWVPKGJRYU8nI0NmTylWUWBPJyNEe08pW1FgTycjRmBPKWdRZE8nI0ZgUU9RYE9PUClxTyZqTycjQ2FQT09PKUNAdClDQHRPT1FQJyNDaicjQ2pPT1FQLDU5Uyw1OVNPI31RZE8sNTlTTyl8UWRPLDU5Vk8lVFFkTyw1OltPJVlRZE8sNTpeTyVfUWRPLDU6YU8lX1FkTyw1OmNPJV9RZE8sNTpkTyVfUWRPJyNFck8qWFFgTyw1OH1PKmFRZE8nI0R6T09RUyw1OH0sNTh9T09RUCcjQ24nI0NuT09RTycjRG4nI0RuT09RUCw1OVYsNTlWTypoUWBPLDU5Vk8qbVFgTyw1OVZPT1FQJyNEcScjRHFPT1FQLDU6Wyw1OltPT1FPJyNEcycjRHNPKnJRcE8sNTpeTytdUWFPLDU6YU8rc1FhTyw1OmRPT1FXJyNEWicjRFpPLFpRaE8nI0RkTyx4UWhPJyNGYU8ndFFoTycjRGJPLVdRYE8nI0RoT09RVycjRlsnI0ZbTy1dUWBPLDU7U08tZVFgTycjRGVPT1FTLUU4aS1FOGlPT1FbJyNDcycjQ3NPLWpRZE8nI0N0Ty5RUWRPJyNDek8uaFFkTycjQ31PL09RIXBPJyNEUE8xUlEhak8sNTpqT09RTycjRFUnI0RVTyptUWBPJyNEVE8xY1Ehbk8nI0ZYTzNgUWBPJyNEVk8zZVFgTycjRGtPT1FbJyNGWCcjRlhPLWBRYE8sNTpwTzNqUSFiTyw1OnJPT1FTJyNFWycjRVtPM3JRYE8sNTp0TzN3UWRPLDU6dE9PUU8nI0VfJyNFX080UFFgTyw1OndPNFVRaE8sNTp9TyVfUWRPJyNEZ09PUVMsNTtQLDU7UE8tZVFgTyw1O1BPNF5RZE8sNTtQTzRmUWRPLDU6Z080dlFkTycjRXRPNVRRYE8sNTt6TzVUUWBPLDU7elBPT08nI0VqJyNFalA1YE8mak8sNTh7UE9PTyw1OHssNTh7T09RUDFHLm4xRy5uT09RUDFHLnExRy5xTypoUWBPMUcucU8qbVFgTzFHLnFPT1FQMUcvdjFHL3ZPNWtRcE8xRy94TzVzUWFPMUcve082WlFhTzFHL31PNnFRYU8xRzBPTzdYUWFPLDU7Xk9PUU8tRThwLUU4cE9PUVMxRy5pMUcuaU83Y1FgTyw1OmZPN2hRZE8nI0RvTzdvUWRPJyNDck9PUVAxRy94MUcveE8mbFFkTzFHL3hPN3ZRIWpPJyNEWk84VVEhYk8sNTl2TzheUWhPLDU6T09PUU8nI0ZdJyNGXU84WFEhYk8sNTl6Tyd0UWhPLDU5eE84ZlFoTycjRXZPOHNRYE8sNTt7TzlPUWhPLDU5fE85dVFoTycjRGlPT1FXLDU6Uyw1OlNPT1FTMUcwbjFHMG5PT1FXLDU6UCw1OlBPOXxRIWZPJyNGWU9PUVMnI0ZZJyNGWU9PUVMnI0VtJyNFbU87XlFkTyw1OWBPT1FbLDU5YCw1OWBPO3RRZE8sNTlmT09RWyw1OWYsNTlmTzxbUWRPLDU5aU9PUVssNTlpLDU5aU9PUVssNTlrLDU5a08mbFFkTyw1OW1PPHJRaE8nI0VRT09RVycjRVEnI0VRTz1XUWBPMUcwVU8xW1FoTzFHMFVPT1FbLDU5byw1OW9PJ3RRaE8nI0RYT09RWyw1OXEsNTlxTz1dUSN0Tyw1OlZPT1FTMUcwWzFHMFtPT1FTMUcwXjFHMF5PT1FTMUcwYDFHMGBPPWhRYE8xRzBgTz1tUWRPJyNFYE9PUVMxRzBjMUcwY09PUVMxRzBpMUcwaU89eFFhTyw1OlJPLWBRYE8xRzBrT09RUzFHMGsxRzBrTy1lUWBPMUcwa08+UFEhZk8xRzBST09RTzFHMFIxRzBST09RTyw1O2AsNTtgTz5nUWRPLDU7YE9PUU8tRThyLUU4ck8+dFFgTzFHMWZQT09PLUU4aC1FOGhQT09PMUcuZzFHLmdPT1FQNyskXTcrJF1PT1FQNyslZDcrJWRPJmxRZE83KyVkT09RUzFHMFExRzBRTz9QUWFPJyNGX08/WlFgTyw1OlpPP2BRIWZPJyNFbE9AXlFkTycjRldPQGhRYE8sNTleT0BtUSFiTzcrJWRPJmxRZE8xRy9iT0B1UWhPMUcvZk9PUVcxRy9qMUcvak9PUVcxRy9kMUcvZE9BV1FoTyw1O2JPT1FPLUU4dC1FOHRPQWZRaE8nI0RaT0F0UWhPJyNGXk9CUFFgTycjRl5PQlVRYE8sNTpUT09RUy1FOGstRThrT09RWzFHLnoxRy56T09RWzFHL1ExRy9RT09RWzFHL1QxRy9UT09RWzFHL1gxRy9YT0JaUWRPLDU6bE9PUVM3KyVwNyslcE9CYFFgTzcrJXBPQmVRaE8nI0RZT0JtUWBPLDU5c08ndFFoTyw1OXNPT1FbMUcvcTFHL3FPQnVRYE8xRy9xT09RUzcrJXo3KyV6T0J6UWJPJyNEUE9PUU8nI0ViJyNFYk9DWVFgTycjRWFPT1FPJyNFYScjRWFPQ2VRYE8nI0V3T0NtUWRPLDU6ek9PUVMsNTp6LDU6ek9PUVsxRy9tMUcvbU9PUVM3KyZWNysmVk8tYFFgTzcrJlZPQ3hRIWZPJyNFc08mbFFkTycjRXNPRVBRZE83KyVtT09RTzcrJW03KyVtT09RTzFHMHoxRzB6T0VkUSFiTzw8SU9PRWxRZE8nI0VxT0V2UWBPLDU7eU9PUVAxRy91MUcvdU9PUVMtRThqLUU4ak9GT1FkTycjRXBPRllRYE8sNTtyT09RXTFHLngxRy54T09RUDw8SU88PElPT0ZiUWRPNyskfE9PUU8nI0RdJyNEXU9GaVEhYk83KyVRT0ZxUWhPJyNFb09Ge1FgTyw1O3hPJmxRZE8sNTt4T09RVzFHL28xRy9vT09RTycjRVMnI0VTT0dUUWBPMUcwV09PUVM8PElbPDxJW08mbFFkTyw1OXRPR25RaE8xRy9fT09RWzFHL18xRy9fT0d1UWBPMUcvX09PUVctRThsLUU4bE9PUVs3KyVdNyslXU9PUU8sNTp7LDU6e089cFFkTycjRXhPQ2VRYE8sNTtjT09RUyw1O2MsNTtjT09RUy1FOHUtRTh1T09RUzFHMGYxRzBmT09RUzw8SXE8PElxT0d9USFmTyw1O19PT1FTLUU4cS1FOHFPT1FPPDxJWDw8SVhPT1FQQU4+akFOPmpPSVVRYU8sNTtdT09RTy1FOG8tRThvT0lgUWRPLDU7W09PUU8tRThuLUU4bk9PUVc8PEhoPDxIaE9PUVc8PEhsPDxIbE9JalFoTzw8SGxPSXtRaE8sNTtaT0pXUWBPLDU7Wk9PUU8tRThtLUU4bU9KXVFkTzFHMWRPQlpRZE8nI0V1T0pnUWBPNyslck9PUVc3KyVyNyslck9Kb1EhYk8xRy9gT09RWzcrJHk3KyR5T0p6UWhPNyskeVBLUlFgTycjRW5PT1FPLDU7ZCw1O2RPT1FPLUU4di1FOHZPT1FTMUcwfTFHMH1PS1dRYE9BTj5XTyZsUWRPMUcwdU9LXVFgTzcrJ09PT1FPLDU7YSw1O2FPT1FPLUU4cy1FOHNPT1FXPDxJXjw8SV5PT1FbPDxIZTw8SGVQT1FXLDU7WSw1O1lPT1FXRzIzckcyM3JPS2VRZE83KyZhXCIsXG4gIHN0YXRlRGF0YTogXCJLeH5PI3NPUyN0UVF+T1dbT1pbT11UT2BWT2FWT2ldT2pXT21YTyFqWU8hbVpPIXNhTyF5Yk8he2NPIX1kTyNRZU8jV2ZPI1lnTyNvUk9+T1FpT1dbT1pbT11UT2BWT2FWT2ldT2pXT21YTyFqWU8hbVpPIXNhTyF5Yk8he2NPIX1kTyNRZU8jV2ZPI1lnTyNvaE9+TyNtJFNQflAhZE8jdG1Pfk8jb29Pfk9dcU9gck9hck9qc09tdE8hanVPIW13TyNudk9+T3B6TyFeeE9+UCRTT2MhUU8jb3xPI3B9T35PI28hUk9+TyNvIVRPfk9XW09aW09dVE9gVk9hVk9qV09tWE8hallPIW1aTyNvUk9+T1MhXU9lIVlPIVYhW08hWSFgTyNxIVhPcCRUUH5PayRUUH5QJlBPUSFqT2UhY09tIWRPcCFlT3IhbU90IW1PeiFrTyFgIWxPI28hYk8jcCFoTyN9IWZPfk90IXFPIWAhbE8jbyFwT35PdCFzTyNvIXNPfk9TIV1PZSFZTyFWIVtPIVkhYE8jcSFYT35PZSF2T3B6TyNaIXhPfk9dWVhgWVhgIXBYYVlYallYbVlYcFlYIV5ZWCFqWVghbVlYI25ZWH5PYCF6T35PayF7TyNtJFNYbyRTWH5PI20kU1hvJFNYflAhZE8jdSNPTyN2I09PI3cjUU9+T2MjVU8jb3xPI3B9T35PcHpPIV54T35PbyRTUH5QIWRPZSNgT35PZSNhT35PbCNiTyFoI2NPfk9dcU9gck9hck9qc09tdE9+T3AhaWEhXiFpYSFqIWlhIW0haWEjbiFpYWQhaWF+UCp6T3AhbGEhXiFsYSFqIWxhIW0hbGEjbiFsYWQhbGF+UCp6T1IjZ09TIV1PZSFZT3IjZ090I2dPIVYhW08hWSFgTyNxI2RPI30hZk9+TyFSI2lPIV4jak9rJFRYcCRUWH5PZSNtT35PayNvT3B6T35PZSF2T35PXSNyT2Ajck9kI3VPaSNyT2ojck9rI3JPflAmbE9dI3JPYCNyT2kjck9qI3JPayNyT2wjd09+UCZsT10jck9gI3JPaSNyT2ojck9rI3JPbyN5T35QJmxPUCN6T1NzWGVzWGtzWHZzWCFWc1ghWXNYIXVzWCF3c1gjcXNYIVRzWFFzWF1zWGBzWGRzWGlzWGpzWG1zWHBzWHJzWHRzWHpzWCFgc1gjb3NYI3BzWCN9c1hsc1hvc1ghXnNYIXFzWCNtc1h+T3Yje08hdSN8TyF3I31PayRUUH5QJ3RPZSNhT1Mje1hrI3tYdiN7WCFWI3tYIVkje1ghdSN7WCF3I3tYI3Eje1hRI3tYXSN7WGAje1hkI3tYaSN7WGoje1htI3tYcCN7WHIje1h0I3tYeiN7WCFgI3tYI28je1gjcCN7WCN9I3tYbCN7WG8je1ghXiN7WCFxI3tYI20je1h+T2UkUk9+T2UkVE9+T2skVk92I3tPfk9rJFdPfk90JFhPIWAhbE9+T3AkWU9+T3B6TyFSI2lPfk9wek8jWiRgT35PIXEkYk9rIW9hI20hb2FvIW9hflAmbE9rI2hYI20jaFhvI2hYflAhZE9rIXtPI20kU2FvJFNhfk8jdSNPTyN2I09PI3ckaE9+T2wkak8haCRrT35PcCFpaSFeIWlpIWohaWkhbSFpaSNuIWlpZCFpaX5QKnpPcCFraSFeIWtpIWoha2khbSFraSNuIWtpZCFraX5QKnpPcCFsaSFeIWxpIWohbGkhbSFsaSNuIWxpZCFsaX5QKnpPcCNmYSFeI2ZhflAkU09vJGxPfk9kJFJQflAlX09kI3pQflAmbE9gIVBYZH1YIVJ9WCFUIVBYfk9gJHNPIVQkdE9+T2QkdU8hUiNpT35PayNqWHAjalghXiNqWH5QJ3RPIV4jak9rJFRhcCRUYX5PIVIjaU9rIVVhcCFVYSFeIVVhZCFVYWAhVWF+T1MhXU9lIVlPIVYhW08hWSFgTyNxJHlPfk9kJFFQflA5ZE92I3tPUSN8WF0jfFhgI3xYZCN8WGUjfFhpI3xYaiN8WGsjfFhtI3xYcCN8WHIjfFh0I3xYeiN8WCFgI3xYI28jfFgjcCN8WCN9I3xYbCN8WG8jfFh+T10jck9gI3JPZCVPT2kjck9qI3JPayNyT35QJmxPXSNyT2Ajck9pI3JPaiNyT2sjck9sJVBPflAmbE9dI3JPYCNyT2kjck9qI3JPayNyT28lUU9+UCZsT2UlU09TIXRYayF0WCFWIXRYIVkhdFgjcSF0WH5PayVUT35PZCVZT3QlWk8hYSVaT35PayVbT35PbyVjTyNvJV5PI30lXU9+T2QlZE9+UCRTT3Yje08hXiVoTyFxJWpPayFvaSNtIW9pbyFvaX5QJmxPayNoYSNtI2hhbyNoYX5QIWRPayF7TyNtJFNpbyRTaX5PIV4lbU9kJFJYflAkU09kJW9Pfk92I3tPUSNgWGQjYFhlI2BYbSNgWHAjYFhyI2BYdCNgWHojYFghXiNgWCFgI2BYI28jYFgjcCNgWCN9I2BYfk8hXiVxT2Qjelh+UCZsT2Qlc09+T2wldE92I3tPfk9SI2dPciNnT3QjZ08jcSV2TyN9IWZPfk8hUiNpT2sjamFwI2phIV4jamF+T2AhUFhkfVghUn1YIV59WH5PIVIjaU8hXiV4T2QkUVh+T2Alek9+T2Qle09+TyNvJXxPfk9rJk9Pfk9gJlBPIVIjaU9+T2QmUk9rJlFPfk9kJlVPfk9QI3pPcHNYIV5zWGRzWH5PI30lXU9wI1RYIV4jVFh+T3B6TyFeJldPfk9vJltPI28lXk8jfSVdT35PdiN7T1EjZ1hlI2dYayNnWG0jZ1hwI2dYciNnWHQjZ1h6I2dYIV4jZ1ghYCNnWCFxI2dYI20jZ1gjbyNnWCNwI2dYI30jZ1hvI2dYfk8hXiVoTyFxJmBPayFvcSNtIW9xbyFvcX5QJmxPbCZhT3Yje09+T2QjZVghXiNlWH5QJV9PIV4lbU9kJFJhfk9kI2RYIV4jZFh+UCZsTyFeJXFPZCN6YX5PZCZmT35QJmxPZCZnTyFUJmhPfk9kI2NYIV4jY1h+UDlkTyFeJXhPZCRRYX5PXSZtT2Qmb09+T1MjYmFlI2JhIVYjYmEhWSNiYSNxI2Jhfk9kJnFPflBHXU9kJnFPayZyT35PdiN7T1EjZ2FlI2dhayNnYW0jZ2FwI2dhciNnYXQjZ2F6I2dhIV4jZ2EhYCNnYSFxI2dhI20jZ2EjbyNnYSNwI2dhI30jZ2FvI2dhfk9kI2VhIV4jZWF+UCRTT2QjZGEhXiNkYX5QJmxPUiNnT3IjZ090I2dPI3Eldk8jfSVdT35PIVIjaU9kI2NhIV4jY2F+T2AmeE9+TyFeJXhPZCRRaX5QJmxPXSZtT2QmfE9+T3Yje09kfGlrfGl+T2QmfU9+UEddT2snT09+T2QnUE9+TyFeJXhPZCRRcX5PZCNjcSFeI2NxflAmbE8jcyFhI3QjfV0jfXYhbX5cIixcbiAgZ290bzogXCIyaCRVUFBQUFAkVlAkWVAkYyR1UCRjUCVYJGNQUCVfUFBQJWUlbyVvUFBQUFAlb1BQJW9QJl1QJW9QJW8nVyVvUCd0J3cnfSd9KF4nfVAnfVAnfVAnfSd9UChtJ30oeVAofFBQKXApdiRjKXwkYypTUCRjUCRjJGNQKlkqeytZUCRZUCthUCtkUCRZUCRZUCRZUCtqJFlQK20rcCtzK3okWVAkWVBQJFlQLFAsVixmLHwtWy1iLWwtci14Lk8uVS5gLmYubC5yUFBQUFBQUFBQUFAueC9SL3cvejB8UDFVMXUyTzJSMlUyW1JuUV9eT1Bga3oheyRkcVtPUFlaYGt1dnd4eiF2IXsjYCRkJW1xU09QWVpga3V2d3h6IXYheyNgJGQlbVFwVFIjUnFRIU9WUiNTclEjUyFRUyRRIWkhalIkaSNVIVYhbWFjIWMhZCFlIXojYSNjI3QjdiN4I3skYSRrJHAkcyVoJWklcSV1JXomUCZkJmwmeCdRIVUhbWFjIWMhZCFlIXojYSNjI3QjdiN4I3skYSRrJHAkcyVoJWklcSV1JXomUCZkJmwmeCdRVSNnIVkkdCZoVSVgJFklYiZXUiZWJV8hViFpYWMhYyFkIWUheiNhI2MjdCN2I3gjeyRhJGskcCRzJWglaSVxJXUleiZQJmQmbCZ4J1FSJFMha1ElVyRSUiZTJVhrIV5dYmYhWSFbIWcjaSNqI20kUCRSJVgleFEjZSFZUSR7I21RJXckdFEmaiV4UiZ3JmhRIXlnUSNwIWBRJF4heFIlZiRgUiNuIV0hVSFtYWMhYyFkIWUheiNhI2MjdCN2I3gjeyRhJGskcCRzJWglaSVxJXUleiZQJmQmbCZ4J1FRIXFkUiRYIXJRIVBWUiNUclEjUyFQUiRpI1RRIVNXUiNWc1EhVVhSI1d0UXtVUSF3Z1EjXnlRI28hX1EkVSFuUSRbIXVRJF8heVElZSReUSZZJWFRJl0lZlImdiZYU2pQelEhfWtRJGMhe1IlayRkWmlQa3oheyRkUiRQIWdRJX0lU1ImeiZtUiFyZFIhdGVSJFohdFMlYSRZJWJSJnQmV1YlXyRZJWImV1EjUG1SJGcjUFFgT1NrUHpVIWFgayRkUiRkIXtRJHAjYVklcCRwJXUmZCZsJ1FRJXUkc1EmZCVxUSZsJXpSJ1EmeFEjdCFjUSN2IWRRI3ghZVYkfSN0I3YjeFElWCRSUiZUJVhRJXkkelMmayV5JnlSJnkmbFElciRwUiZlJXJRJW4kbVImYyVuUXlVUiNdeVElaSRhUiZfJWlRIXxqUyRlIXwkZlIkZiF9USZuJX1SJnsmblEjayFaUiR4I2tRJWIkWVImWiViUSZYJWFSJnUmWF9fT1Bga3oheyRkXlVPUGBreiF7JGRRIVZZUSFXWlEjWHVRI1l2USNad1EjW3hRJF0hdlEkbSNgUiZiJW1SJHEjYVEhZ2FRIW9jWyNxIWMhZCFlI3QjdiN4USRhIXpkJG8jYSRwJHMlcSV1JXomZCZsJngnUVEkciNjUSVSI3tTJWckYSVpUSVsJGtRJl4laFImcCZQXSNzIWMhZCFlI3QjdiN4VyFaXWIhZyRQUSF1ZlEjZiFZUSNsIVtRJHYjaVEkdyNqUSR6I21TJVYkUiVYUiZpJXhRI2ghWVEldyR0UiZ3JmhSJHwjbVIkbiNgUWxQUiNfelEhX11RIW5iUSRPIWdSJVUkUFwiLFxuICBub2RlTmFtZXM6IFwi4pqgIFVuaXQgVmFyaWFibGVOYW1lIFZhcmlhYmxlTmFtZSBRdWVyeUNhbGxlZSBDb21tZW50IFN0eWxlU2hlZXQgUnVsZVNldCBVbml2ZXJzYWxTZWxlY3RvciBUYWdTZWxlY3RvciBUYWdOYW1lIE5lc3RpbmdTZWxlY3RvciBDbGFzc1NlbGVjdG9yIC4gQ2xhc3NOYW1lIFBzZXVkb0NsYXNzU2VsZWN0b3IgOiA6OiBQc2V1ZG9DbGFzc05hbWUgUHNldWRvQ2xhc3NOYW1lICkgKCBBcmdMaXN0IFZhbHVlTmFtZSBQYXJlbnRoZXNpemVkVmFsdWUgQXRLZXl3b3JkICMgOyBdIFsgQnJhY2tldGVkVmFsdWUgfSB7IEJyYWNlZFZhbHVlIENvbG9yTGl0ZXJhbCBOdW1iZXJMaXRlcmFsIFN0cmluZ0xpdGVyYWwgQmluYXJ5RXhwcmVzc2lvbiBCaW5PcCBDYWxsRXhwcmVzc2lvbiBDYWxsZWUgSWZFeHByZXNzaW9uIGlmIEFyZ0xpc3QgSWZCcmFuY2ggS2V5d29yZFF1ZXJ5IEZlYXR1cmVRdWVyeSBGZWF0dXJlTmFtZSBCaW5hcnlRdWVyeSBMb2dpY09wIENvbXBhcmlzb25RdWVyeSBDb21wYXJlT3AgVW5hcnlRdWVyeSBVbmFyeVF1ZXJ5T3AgUGFyZW50aGVzaXplZFF1ZXJ5IFNlbGVjdG9yUXVlcnkgc2VsZWN0b3IgUGFyZW50aGVzaXplZFNlbGVjdG9yIENhbGxRdWVyeSBBcmdMaXN0ICwgQ2FsbExpdGVyYWwgQ2FsbFRhZyBQYXJlbnRoZXNpemVkQ29udGVudCBQc2V1ZG9DbGFzc05hbWUgQXJnTGlzdCBJZFNlbGVjdG9yIElkTmFtZSBBdHRyaWJ1dGVTZWxlY3RvciBBdHRyaWJ1dGVOYW1lIE1hdGNoT3AgQ2hpbGRTZWxlY3RvciBDaGlsZE9wIERlc2NlbmRhbnRTZWxlY3RvciBTaWJsaW5nU2VsZWN0b3IgU2libGluZ09wIEJsb2NrIERlY2xhcmF0aW9uIFByb3BlcnR5TmFtZSBJbXBvcnRhbnQgSW1wb3J0U3RhdGVtZW50IGltcG9ydCBMYXllciBsYXllciBMYXllck5hbWUgbGF5ZXIgTWVkaWFTdGF0ZW1lbnQgbWVkaWEgQ2hhcnNldFN0YXRlbWVudCBjaGFyc2V0IE5hbWVzcGFjZVN0YXRlbWVudCBuYW1lc3BhY2UgTmFtZXNwYWNlTmFtZSBLZXlmcmFtZXNTdGF0ZW1lbnQga2V5ZnJhbWVzIEtleWZyYW1lTmFtZSBLZXlmcmFtZUxpc3QgS2V5ZnJhbWVTZWxlY3RvciBLZXlmcmFtZVJhbmdlTmFtZSBTdXBwb3J0c1N0YXRlbWVudCBzdXBwb3J0cyBTY29wZVN0YXRlbWVudCBzY29wZSB0byBBdFJ1bGUgU3R5bGVzXCIsXG4gIG1heFRlcm06IDE0MyxcbiAgbm9kZVByb3BzOiBbXG4gICAgW1wiaXNvbGF0ZVwiLCAtMiw1LDM2LFwiXCJdLFxuICAgIFtcIm9wZW5lZEJ5XCIsIDIwLFwiKFwiLDI4LFwiW1wiLDMxLFwie1wiXSxcbiAgICBbXCJjbG9zZWRCeVwiLCAyMSxcIilcIiwyOSxcIl1cIiwzMixcIn1cIl1cbiAgXSxcbiAgcHJvcFNvdXJjZXM6IFtjc3NIaWdobGlnaHRpbmddLFxuICBza2lwcGVkTm9kZXM6IFswLDUsMTA2XSxcbiAgcmVwZWF0Tm9kZUNvdW50OiAxNSxcbiAgdG9rZW5EYXRhOiBcIkpRflIhWU9YJHFYXiVpXnAkcXBxJWlxcih7cnMtdXN0L2l0dTZXdXYkcXZ3N1F3eDdjeHk5UXl6OWN6ezloe3w6Unx9PnR9IU8/ViFPIVA/dCFQIVFAXSFRIVtBVSFbIV1CUCFdIV5CeyFeIV9DXiFfIWBEWSFgIWFEbSFhIWIkcSFiIWNFbiFjIX0kcSF9I09HeyNPI1AkcSNQI1FIXiNRI1I2VyNSI28kcSNvI3BIbyNwI3E2VyNxI3JJUSNyI3NJYyNzI3kkcSN5I3olaSN6JGYkcSRmJGclaSRnI0JZJHEjQlkjQlolaSNCWiRJUyRxJElTJElfJWkkSV8kSXwkcSRJfCRKTyVpJEpPJEpUJHEkSlQkSlUlaSRKVSRLViRxJEtWJEtXJWkkS1cmRlUkcSZGVSZGViVpJkZWOydTJHE7J1M7PWBJejwlbE8kcWAkdFNPeSVRejsnUyVROydTOz1gJWM8JWxPJVFgJVZTIWFgT3klUXo7J1MlUTsnUzs9YCVjPCVsTyVRYCVmUDs9YDwlbCVRfiVuaCNzfk9YJVFYXidZXnAlUXBxJ1lxeSVReiN5JVEjeSN6J1kjeiRmJVEkZiRnJ1kkZyNCWSVRI0JZI0JaJ1kjQlokSVMlUSRJUyRJXydZJElfJEl8JVEkSXwkSk8nWSRKTyRKVCVRJEpUJEpVJ1kkSlUkS1YlUSRLViRLVydZJEtXJkZVJVEmRlUmRlYnWSZGVjsnUyVROydTOz1gJWM8JWxPJVF+J2FoI3N+IWFgT1glUVheJ1lecCVRcHEnWXF5JVF6I3klUSN5I3onWSN6JGYlUSRmJGcnWSRnI0JZJVEjQlkjQlonWSNCWiRJUyVRJElTJElfJ1kkSV8kSXwlUSRJfCRKTydZJEpPJEpUJVEkSlQkSlUnWSRKVSRLViVRJEtWJEtXJ1kkS1cmRlUlUSZGVSZGVidZJkZWOydTJVE7J1M7PWAlYzwlbE8lUWopT1VPeSVReiNdJVEjXSNeKWIjXjsnUyVROydTOz1gJWM8JWxPJVFqKWdVIWFgT3klUXojYSVRI2EjYil5I2I7J1MlUTsnUzs9YCVjPCVsTyVRaipPVSFhYE95JVF6I2QlUSNkI2UqYiNlOydTJVE7J1M7PWAlYzwlbE8lUWoqZ1UhYWBPeSVReiNjJVEjYyNkKnkjZDsnUyVROydTOz1gJWM8JWxPJVFqK09VIWFgT3klUXojZiVRI2YjZytiI2c7J1MlUTsnUzs9YCVjPCVsTyVRaitnVSFhYE95JVF6I2glUSNoI2kreSNpOydTJVE7J1M7PWAlYzwlbE8lUWosT1UhYWBPeSVReiNUJVEjVCNVLGIjVTsnUyVROydTOz1gJWM8JWxPJVFqLGdVIWFgT3klUXojYiVRI2IjYyx5I2M7J1MlUTsnUzs9YCVjPCVsTyVRai1PVSFhYE95JVF6I2glUSNoI2ktYiNpOydTJVE7J1M7PWAlYzwlbE8lUWotaVMhcVkhYWBPeSVRejsnUyVROydTOz1gJWM8JWxPJVF+LXhXT1ktdVpyLXVycy5icyNPLXUjTyNQLmcjUDsnUy11OydTOz1gL2M8JWxPLXV+LmdPdH5+LmpSTzsnUy11OydTOz1gLnM7PWBPLXV+LnZYT1ktdVpyLXVycy5icyNPLXUjTyNQLmcjUDsnUy11OydTOz1gL2M7PWA8JWwtdTwlbE8tdX4vZlA7PWA8JWwtdWovbllqWU95JVF6IVElUSFRIVswXiFbIWMlUSFjIWkwXiFpI1QlUSNUI1owXiNaOydTJVE7J1M7PWAlYzwlbE8lUWowY1khYWBPeSVReiFRJVEhUSFbMVIhWyFjJVEhYyFpMVIhaSNUJVEjVCNaMVIjWjsnUyVROydTOz1gJWM8JWxPJVFqMVdZIWFgT3klUXohUSVRIVEhWzF2IVshYyVRIWMhaTF2IWkjVCVRI1QjWjF2I1o7J1MlUTsnUzs9YCVjPCVsTyVRajF9WXJZIWFgT3klUXohUSVRIVEhWzJtIVshYyVRIWMhaTJtIWkjVCVRI1QjWjJtI1o7J1MlUTsnUzs9YCVjPCVsTyVRajJ0WXJZIWFgT3klUXohUSVRIVEhWzNkIVshYyVRIWMhaTNkIWkjVCVRI1QjWjNkI1o7J1MlUTsnUzs9YCVjPCVsTyVRajNpWSFhYE95JVF6IVElUSFRIVs0WCFbIWMlUSFjIWk0WCFpI1QlUSNUI1o0WCNaOydTJVE7J1M7PWAlYzwlbE8lUWo0YFlyWSFhYE95JVF6IVElUSFRIVs1TyFbIWMlUSFjIWk1TyFpI1QlUSNUI1o1TyNaOydTJVE7J1M7PWAlYzwlbE8lUWo1VFkhYWBPeSVReiFRJVEhUSFbNXMhWyFjJVEhYyFpNXMhaSNUJVEjVCNaNXMjWjsnUyVROydTOz1gJWM8JWxPJVFqNXpTclkhYWBPeSVRejsnUyVROydTOz1gJWM8JWxPJVFkNlpVT3klUXohXyVRIV8hYDZtIWA7J1MlUTsnUzs9YCVjPCVsTyVRZDZ0UyFoUyFhYE95JVF6OydTJVE7J1M7PWAlYzwlbE8lUWI3VlNaUU95JVF6OydTJVE7J1M7PWAlYzwlbE8lUX43ZldPWTdjWnc3Y3d4LmJ4I083YyNPI1A4TyNQOydTN2M7J1M7PWA4ejwlbE83Y344UlJPOydTN2M7J1M7PWA4Wzs9YE83Y344X1hPWTdjWnc3Y3d4LmJ4I083YyNPI1A4TyNQOydTN2M7J1M7PWA4ejs9YDwlbDdjPCVsTzdjfjh9UDs9YDwlbDdjajlWU2VZT3klUXo7J1MlUTsnUzs9YCVjPCVsTyVRfjloT2R+bjlvVVdRdldPeSVReiFfJVEhXyFgNm0hYDsnUyVROydTOz1gJWM8JWxPJVFqOllXdlchbVFPeSVReiFPJVEhTyFQOnIhUCFRJVEhUSFbPXchWzsnUyVROydTOz1gJWM8JWxPJVFqOndVIWFgT3klUXohUSVRIVEhWztaIVs7J1MlUTsnUzs9YCVjPCVsTyVRajtiWSFhYCN9WU95JVF6IVElUSFRIVs7WiFbIWclUSFnIWg8USFoI1glUSNYI1k8USNZOydTJVE7J1M7PWAlYzwlbE8lUWo8VlkhYWBPeSVRenslUXt8PHV8fSVRfSFPPHUhTyFRJVEhUSFbPV4hWzsnUyVROydTOz1gJWM8JWxPJVFqPHpVIWFgT3klUXohUSVRIVEhWz1eIVs7J1MlUTsnUzs9YCVjPCVsTyVRaj1lVSFhYCN9WU95JVF6IVElUSFRIVs9XiFbOydTJVE7J1M7PWAlYzwlbE8lUWo+T1shYWAjfVlPeSVReiFPJVEhTyFQO1ohUCFRJVEhUSFbPXchWyFnJVEhZyFoPFEhaCNYJVEjWCNZPFEjWTsnUyVROydTOz1gJWM8JWxPJVFqPnlTIV5ZT3klUXo7J1MlUTsnUzs9YCVjPCVsTyVRaj9bV3ZXT3klUXohTyVRIU8hUDpyIVAhUSVRIVEhWz13IVs7J1MlUTsnUzs9YCVjPCVsTyVRaj95VV1ZT3klUXohUSVRIVEhWztaIVs7J1MlUTsnUzs9YCVjPCVsTyVRfkBiVHZXT3klUXp7QHF7OydTJVE7J1M7PWAlYzwlbE8lUX5AeFMhYWAjdH5PeSVRejsnUyVROydTOz1gJWM8JWxPJVFqQVpbI31ZT3klUXohTyVRIU8hUDtaIVAhUSVRIVEhWz13IVshZyVRIWchaDxRIWgjWCVRI1gjWTxRI1k7J1MlUTsnUzs9YCVjPCVsTyVRakJVVWBZT3klUXohWyVRIVshXUJoIV07J1MlUTsnUzs9YCVjPCVsTyVRYkJvU2FRIWFgT3klUXo7J1MlUTsnUzs9YCVjPCVsTyVRakNRU2tZT3klUXo7J1MlUTsnUzs9YCVjPCVsTyVRaENjVSFUV095JVF6IV8lUSFfIWBDdSFgOydTJVE7J1M7PWAlYzwlbE8lUWhDfFMhVFchYWBPeSVRejsnUyVROydTOz1gJWM8JWxPJVFsRGFTIVRXIWhTT3klUXo7J1MlUTsnUzs9YCVjPCVsTyVRakR0ViFqUSFUV095JVF6IV8lUSFfIWBDdSFgIWFFWiFhOydTJVE7J1M7PWAlYzwlbE8lUWJFYlMhalEhYWBPeSVRejsnUyVROydTOz1gJWM8JWxPJVFqRXFZT3klUXp9JVF9IU9GYSFPIWMlUSFjIX1HTyF9I1QlUSNUI29HTyNvOydTJVE7J1M7PWAlYzwlbE8lUWpGZlchYWBPeSVReiFjJVEhYyF9R08hfSNUJVEjVCNvR08jbzsnUyVROydTOz1gJWM8JWxPJVFqR1ZbaVkhYWBPeSVRen0lUX0hT0dPIU8hUSVRIVEhW0dPIVshYyVRIWMhfUdPIX0jVCVRI1Qjb0dPI287J1MlUTsnUzs9YCVjPCVsTyVRakhRU21ZT3klUXo7J1MlUTsnUzs9YCVjPCVsTyVRbkhjU2xeT3klUXo7J1MlUTsnUzs9YCVjPCVsTyVRakh0U3BZT3klUXo7J1MlUTsnUzs9YCVjPCVsTyVRaklWU29ZT3klUXo7J1MlUTsnUzs9YCVjPCVsTyVRZkloVSFtUU95JVF6IV8lUSFfIWA2bSFgOydTJVE7J1M7PWAlYzwlbE8lUWBJfVA7PWA8JWwkcVwiLFxuICB0b2tlbml6ZXJzOiBbZGVzY2VuZGFudCwgdW5pdFRva2VuLCBpZGVudGlmaWVycywgcXVlcnlJZGVudGlmaWVycywgMSwgMiwgMywgNCwgbmV3IExvY2FsVG9rZW5Hcm91cChcIm1+UlJZWlt6e2F+fmd+YU8jdn5+ZFAhUCFRZ35sTyN3fn5cIiwgMjgsIDEyOSldLFxuICB0b3BSdWxlczoge1wiU3R5bGVTaGVldFwiOlswLDZdLFwiU3R5bGVzXCI6WzEsMTA1XX0sXG4gIHNwZWNpYWxpemVkOiBbe3Rlcm06IDEyNCwgZ2V0OiAodmFsdWUpID0+IHNwZWNfY2FsbGVlW3ZhbHVlXSB8fCAtMX0se3Rlcm06IDEyNSwgZ2V0OiAodmFsdWUpID0+IHNwZWNfcXVlcnlJZGVudGlmaWVyW3ZhbHVlXSB8fCAtMX0se3Rlcm06IDQsIGdldDogKHZhbHVlKSA9PiBzcGVjX1F1ZXJ5Q2FsbGVlW3ZhbHVlXSB8fCAtMX0se3Rlcm06IDI1LCBnZXQ6ICh2YWx1ZSkgPT4gc3BlY19BdEtleXdvcmRbdmFsdWVdIHx8IC0xfSx7dGVybTogMTIzLCBnZXQ6ICh2YWx1ZSkgPT4gc3BlY19pZGVudGlmaWVyW3ZhbHVlXSB8fCAtMX1dLFxuICB0b2tlblByZWM6IDE5NjNcbn0pO1xuXG5leHBvcnQgeyBwYXJzZXIgfTtcbiIsCiAgICAiaW1wb3J0IHsgcGFyc2VyIH0gZnJvbSAnQGxlemVyL2Nzcyc7XG5pbXBvcnQgeyBzeW50YXhUcmVlLCBMUkxhbmd1YWdlLCBpbmRlbnROb2RlUHJvcCwgY29udGludWVkSW5kZW50LCBmb2xkTm9kZVByb3AsIGZvbGRJbnNpZGUsIExhbmd1YWdlU3VwcG9ydCB9IGZyb20gJ0Bjb2RlbWlycm9yL2xhbmd1YWdlJztcbmltcG9ydCB7IE5vZGVXZWFrTWFwLCBJdGVyTW9kZSB9IGZyb20gJ0BsZXplci9jb21tb24nO1xuXG5sZXQgX3Byb3BlcnRpZXMgPSBudWxsO1xuZnVuY3Rpb24gcHJvcGVydGllcygpIHtcbiAgICBpZiAoIV9wcm9wZXJ0aWVzICYmIHR5cGVvZiBkb2N1bWVudCA9PSBcIm9iamVjdFwiICYmIGRvY3VtZW50LmJvZHkpIHtcbiAgICAgICAgbGV0IHsgc3R5bGUgfSA9IGRvY3VtZW50LmJvZHksIG5hbWVzID0gW10sIHNlZW4gPSBuZXcgU2V0O1xuICAgICAgICBmb3IgKGxldCBwcm9wIGluIHN0eWxlKVxuICAgICAgICAgICAgaWYgKHByb3AgIT0gXCJjc3NUZXh0XCIgJiYgcHJvcCAhPSBcImNzc0Zsb2F0XCIpIHtcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHN0eWxlW3Byb3BdID09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKC9bQS1aXS8udGVzdChwcm9wKSlcbiAgICAgICAgICAgICAgICAgICAgICAgIHByb3AgPSBwcm9wLnJlcGxhY2UoL1tBLVpdL2csIGNoID0+IFwiLVwiICsgY2gudG9Mb3dlckNhc2UoKSk7XG4gICAgICAgICAgICAgICAgICAgIGlmICghc2Vlbi5oYXMocHJvcCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWVzLnB1c2gocHJvcCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZWVuLmFkZChwcm9wKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgX3Byb3BlcnRpZXMgPSBuYW1lcy5zb3J0KCkubWFwKG5hbWUgPT4gKHsgdHlwZTogXCJwcm9wZXJ0eVwiLCBsYWJlbDogbmFtZSwgYXBwbHk6IG5hbWUgKyBcIjogXCIgfSkpO1xuICAgIH1cbiAgICByZXR1cm4gX3Byb3BlcnRpZXMgfHwgW107XG59XG5jb25zdCBwc2V1ZG9DbGFzc2VzID0gLypAX19QVVJFX18qL1tcbiAgICBcImFjdGl2ZVwiLCBcImFmdGVyXCIsIFwiYW55LWxpbmtcIiwgXCJhdXRvZmlsbFwiLCBcImJhY2tkcm9wXCIsIFwiYmVmb3JlXCIsXG4gICAgXCJjaGVja2VkXCIsIFwiY3VlXCIsIFwiZGVmYXVsdFwiLCBcImRlZmluZWRcIiwgXCJkaXNhYmxlZFwiLCBcImVtcHR5XCIsXG4gICAgXCJlbmFibGVkXCIsIFwiZmlsZS1zZWxlY3Rvci1idXR0b25cIiwgXCJmaXJzdFwiLCBcImZpcnN0LWNoaWxkXCIsXG4gICAgXCJmaXJzdC1sZXR0ZXJcIiwgXCJmaXJzdC1saW5lXCIsIFwiZmlyc3Qtb2YtdHlwZVwiLCBcImZvY3VzXCIsXG4gICAgXCJmb2N1cy12aXNpYmxlXCIsIFwiZm9jdXMtd2l0aGluXCIsIFwiZnVsbHNjcmVlblwiLCBcImhhc1wiLCBcImhvc3RcIixcbiAgICBcImhvc3QtY29udGV4dFwiLCBcImhvdmVyXCIsIFwiaW4tcmFuZ2VcIiwgXCJpbmRldGVybWluYXRlXCIsIFwiaW52YWxpZFwiLFxuICAgIFwiaXNcIiwgXCJsYW5nXCIsIFwibGFzdC1jaGlsZFwiLCBcImxhc3Qtb2YtdHlwZVwiLCBcImxlZnRcIiwgXCJsaW5rXCIsIFwibWFya2VyXCIsXG4gICAgXCJtb2RhbFwiLCBcIm5vdFwiLCBcIm50aC1jaGlsZFwiLCBcIm50aC1sYXN0LWNoaWxkXCIsIFwibnRoLWxhc3Qtb2YtdHlwZVwiLFxuICAgIFwibnRoLW9mLXR5cGVcIiwgXCJvbmx5LWNoaWxkXCIsIFwib25seS1vZi10eXBlXCIsIFwib3B0aW9uYWxcIiwgXCJvdXQtb2YtcmFuZ2VcIixcbiAgICBcInBhcnRcIiwgXCJwbGFjZWhvbGRlclwiLCBcInBsYWNlaG9sZGVyLXNob3duXCIsIFwicmVhZC1vbmx5XCIsIFwicmVhZC13cml0ZVwiLFxuICAgIFwicmVxdWlyZWRcIiwgXCJyaWdodFwiLCBcInJvb3RcIiwgXCJzY29wZVwiLCBcInNlbGVjdGlvblwiLCBcInNsb3R0ZWRcIiwgXCJ0YXJnZXRcIixcbiAgICBcInRhcmdldC10ZXh0XCIsIFwidmFsaWRcIiwgXCJ2aXNpdGVkXCIsIFwid2hlcmVcIlxuXS5tYXAobmFtZSA9PiAoeyB0eXBlOiBcImNsYXNzXCIsIGxhYmVsOiBuYW1lIH0pKTtcbmNvbnN0IHZhbHVlcyA9IC8qQF9fUFVSRV9fKi9bXG4gICAgXCJhYm92ZVwiLCBcImFic29sdXRlXCIsIFwiYWN0aXZlYm9yZGVyXCIsIFwiYWRkaXRpdmVcIiwgXCJhY3RpdmVjYXB0aW9uXCIsIFwiYWZ0ZXItd2hpdGUtc3BhY2VcIixcbiAgICBcImFoZWFkXCIsIFwiYWxpYXNcIiwgXCJhbGxcIiwgXCJhbGwtc2Nyb2xsXCIsIFwiYWxwaGFiZXRpY1wiLCBcImFsdGVybmF0ZVwiLCBcImFsd2F5c1wiLFxuICAgIFwiYW50aWFsaWFzZWRcIiwgXCJhcHB3b3Jrc3BhY2VcIiwgXCJhc3Rlcmlza3NcIiwgXCJhdHRyXCIsIFwiYXV0b1wiLCBcImF1dG8tZmxvd1wiLCBcImF2b2lkXCIsIFwiYXZvaWQtY29sdW1uXCIsXG4gICAgXCJhdm9pZC1wYWdlXCIsIFwiYXZvaWQtcmVnaW9uXCIsIFwiYXhpcy1wYW5cIiwgXCJiYWNrZ3JvdW5kXCIsIFwiYmFja3dhcmRzXCIsIFwiYmFzZWxpbmVcIiwgXCJiZWxvd1wiLFxuICAgIFwiYmlkaS1vdmVycmlkZVwiLCBcImJsaW5rXCIsIFwiYmxvY2tcIiwgXCJibG9jay1heGlzXCIsIFwiYm9sZFwiLCBcImJvbGRlclwiLCBcImJvcmRlclwiLCBcImJvcmRlci1ib3hcIixcbiAgICBcImJvdGhcIiwgXCJib3R0b21cIiwgXCJicmVha1wiLCBcImJyZWFrLWFsbFwiLCBcImJyZWFrLXdvcmRcIiwgXCJidWxsZXRzXCIsIFwiYnV0dG9uXCIsIFwiYnV0dG9uLWJldmVsXCIsXG4gICAgXCJidXR0b25mYWNlXCIsIFwiYnV0dG9uaGlnaGxpZ2h0XCIsIFwiYnV0dG9uc2hhZG93XCIsIFwiYnV0dG9udGV4dFwiLCBcImNhbGNcIiwgXCJjYXBpdGFsaXplXCIsXG4gICAgXCJjYXBzLWxvY2staW5kaWNhdG9yXCIsIFwiY2FwdGlvblwiLCBcImNhcHRpb250ZXh0XCIsIFwiY2FyZXRcIiwgXCJjZWxsXCIsIFwiY2VudGVyXCIsIFwiY2hlY2tib3hcIiwgXCJjaXJjbGVcIixcbiAgICBcImNqay1kZWNpbWFsXCIsIFwiY2xlYXJcIiwgXCJjbGlwXCIsIFwiY2xvc2UtcXVvdGVcIiwgXCJjb2wtcmVzaXplXCIsIFwiY29sbGFwc2VcIiwgXCJjb2xvclwiLCBcImNvbG9yLWJ1cm5cIixcbiAgICBcImNvbG9yLWRvZGdlXCIsIFwiY29sdW1uXCIsIFwiY29sdW1uLXJldmVyc2VcIiwgXCJjb21wYWN0XCIsIFwiY29uZGVuc2VkXCIsIFwiY29udGFpblwiLCBcImNvbnRlbnRcIixcbiAgICBcImNvbnRlbnRzXCIsIFwiY29udGVudC1ib3hcIiwgXCJjb250ZXh0LW1lbnVcIiwgXCJjb250aW51b3VzXCIsIFwiY29weVwiLCBcImNvdW50ZXJcIiwgXCJjb3VudGVyc1wiLCBcImNvdmVyXCIsXG4gICAgXCJjcm9wXCIsIFwiY3Jvc3NcIiwgXCJjcm9zc2hhaXJcIiwgXCJjdXJyZW50Y29sb3JcIiwgXCJjdXJzaXZlXCIsIFwiY3ljbGljXCIsIFwiZGFya2VuXCIsIFwiZGFzaGVkXCIsIFwiZGVjaW1hbFwiLFxuICAgIFwiZGVjaW1hbC1sZWFkaW5nLXplcm9cIiwgXCJkZWZhdWx0XCIsIFwiZGVmYXVsdC1idXR0b25cIiwgXCJkZW5zZVwiLCBcImRlc3RpbmF0aW9uLWF0b3BcIiwgXCJkZXN0aW5hdGlvbi1pblwiLFxuICAgIFwiZGVzdGluYXRpb24tb3V0XCIsIFwiZGVzdGluYXRpb24tb3ZlclwiLCBcImRpZmZlcmVuY2VcIiwgXCJkaXNjXCIsIFwiZGlzY2FyZFwiLCBcImRpc2Nsb3N1cmUtY2xvc2VkXCIsXG4gICAgXCJkaXNjbG9zdXJlLW9wZW5cIiwgXCJkb2N1bWVudFwiLCBcImRvdC1kYXNoXCIsIFwiZG90LWRvdC1kYXNoXCIsIFwiZG90dGVkXCIsIFwiZG91YmxlXCIsIFwiZG93blwiLCBcImUtcmVzaXplXCIsXG4gICAgXCJlYXNlXCIsIFwiZWFzZS1pblwiLCBcImVhc2UtaW4tb3V0XCIsIFwiZWFzZS1vdXRcIiwgXCJlbGVtZW50XCIsIFwiZWxsaXBzZVwiLCBcImVsbGlwc2lzXCIsIFwiZW1iZWRcIiwgXCJlbmRcIixcbiAgICBcImV0aGlvcGljLWFiZWdlZGUtZ2V6XCIsIFwiZXRoaW9waWMtaGFsZWhhbWUtYWEtZXJcIiwgXCJldGhpb3BpYy1oYWxlaGFtZS1nZXpcIiwgXCJldy1yZXNpemVcIiwgXCJleGNsdXNpb25cIixcbiAgICBcImV4cGFuZGVkXCIsIFwiZXh0ZW5kc1wiLCBcImV4dHJhLWNvbmRlbnNlZFwiLCBcImV4dHJhLWV4cGFuZGVkXCIsIFwiZmFudGFzeVwiLCBcImZhc3RcIiwgXCJmaWxsXCIsIFwiZmlsbC1ib3hcIixcbiAgICBcImZpeGVkXCIsIFwiZmxhdFwiLCBcImZsZXhcIiwgXCJmbGV4LWVuZFwiLCBcImZsZXgtc3RhcnRcIiwgXCJmb290bm90ZXNcIiwgXCJmb3J3YXJkc1wiLCBcImZyb21cIixcbiAgICBcImdlb21ldHJpY1ByZWNpc2lvblwiLCBcImdyYXl0ZXh0XCIsIFwiZ3JpZFwiLCBcImdyb292ZVwiLCBcImhhbmRcIiwgXCJoYXJkLWxpZ2h0XCIsIFwiaGVscFwiLCBcImhpZGRlblwiLCBcImhpZGVcIixcbiAgICBcImhpZ2hlclwiLCBcImhpZ2hsaWdodFwiLCBcImhpZ2hsaWdodHRleHRcIiwgXCJob3Jpem9udGFsXCIsIFwiaHNsXCIsIFwiaHNsYVwiLCBcImh1ZVwiLCBcImljb25cIiwgXCJpZ25vcmVcIixcbiAgICBcImluYWN0aXZlYm9yZGVyXCIsIFwiaW5hY3RpdmVjYXB0aW9uXCIsIFwiaW5hY3RpdmVjYXB0aW9udGV4dFwiLCBcImluZmluaXRlXCIsIFwiaW5mb2JhY2tncm91bmRcIiwgXCJpbmZvdGV4dFwiLFxuICAgIFwiaW5oZXJpdFwiLCBcImluaXRpYWxcIiwgXCJpbmxpbmVcIiwgXCJpbmxpbmUtYXhpc1wiLCBcImlubGluZS1ibG9ja1wiLCBcImlubGluZS1mbGV4XCIsIFwiaW5saW5lLWdyaWRcIixcbiAgICBcImlubGluZS10YWJsZVwiLCBcImluc2V0XCIsIFwiaW5zaWRlXCIsIFwiaW50cmluc2ljXCIsIFwiaW52ZXJ0XCIsIFwiaXRhbGljXCIsIFwianVzdGlmeVwiLCBcImtlZXAtYWxsXCIsXG4gICAgXCJsYW5kc2NhcGVcIiwgXCJsYXJnZVwiLCBcImxhcmdlclwiLCBcImxlZnRcIiwgXCJsZXZlbFwiLCBcImxpZ2h0ZXJcIiwgXCJsaWdodGVuXCIsIFwibGluZS10aHJvdWdoXCIsIFwibGluZWFyXCIsXG4gICAgXCJsaW5lYXItZ3JhZGllbnRcIiwgXCJsaW5lc1wiLCBcImxpc3QtaXRlbVwiLCBcImxpc3Rib3hcIiwgXCJsaXN0aXRlbVwiLCBcImxvY2FsXCIsIFwibG9naWNhbFwiLCBcImxvdWRcIiwgXCJsb3dlclwiLFxuICAgIFwibG93ZXItaGV4YWRlY2ltYWxcIiwgXCJsb3dlci1sYXRpblwiLCBcImxvd2VyLW5vcndlZ2lhblwiLCBcImxvd2VyY2FzZVwiLCBcImx0clwiLCBcImx1bWlub3NpdHlcIiwgXCJtYW5pcHVsYXRpb25cIixcbiAgICBcIm1hdGNoXCIsIFwibWF0cml4XCIsIFwibWF0cml4M2RcIiwgXCJtZWRpdW1cIiwgXCJtZW51XCIsIFwibWVudXRleHRcIiwgXCJtZXNzYWdlLWJveFwiLCBcIm1pZGRsZVwiLCBcIm1pbi1pbnRyaW5zaWNcIixcbiAgICBcIm1peFwiLCBcIm1vbm9zcGFjZVwiLCBcIm1vdmVcIiwgXCJtdWx0aXBsZVwiLCBcIm11bHRpcGxlX21hc2tfaW1hZ2VzXCIsIFwibXVsdGlwbHlcIiwgXCJuLXJlc2l6ZVwiLCBcIm5hcnJvd2VyXCIsXG4gICAgXCJuZS1yZXNpemVcIiwgXCJuZXN3LXJlc2l6ZVwiLCBcIm5vLWNsb3NlLXF1b3RlXCIsIFwibm8tZHJvcFwiLCBcIm5vLW9wZW4tcXVvdGVcIiwgXCJuby1yZXBlYXRcIiwgXCJub25lXCIsXG4gICAgXCJub3JtYWxcIiwgXCJub3QtYWxsb3dlZFwiLCBcIm5vd3JhcFwiLCBcIm5zLXJlc2l6ZVwiLCBcIm51bWJlcnNcIiwgXCJudW1lcmljXCIsIFwibnctcmVzaXplXCIsIFwibndzZS1yZXNpemVcIixcbiAgICBcIm9ibGlxdWVcIiwgXCJvcGFjaXR5XCIsIFwib3Blbi1xdW90ZVwiLCBcIm9wdGltaXplTGVnaWJpbGl0eVwiLCBcIm9wdGltaXplU3BlZWRcIiwgXCJvdXRzZXRcIiwgXCJvdXRzaWRlXCIsXG4gICAgXCJvdXRzaWRlLXNoYXBlXCIsIFwib3ZlcmxheVwiLCBcIm92ZXJsaW5lXCIsIFwicGFkZGluZ1wiLCBcInBhZGRpbmctYm94XCIsIFwicGFpbnRlZFwiLCBcInBhZ2VcIiwgXCJwYXVzZWRcIixcbiAgICBcInBlcnNwZWN0aXZlXCIsIFwicGluY2gtem9vbVwiLCBcInBsdXMtZGFya2VyXCIsIFwicGx1cy1saWdodGVyXCIsIFwicG9pbnRlclwiLCBcInBvbHlnb25cIiwgXCJwb3J0cmFpdFwiLFxuICAgIFwicHJlXCIsIFwicHJlLWxpbmVcIiwgXCJwcmUtd3JhcFwiLCBcInByZXNlcnZlLTNkXCIsIFwicHJvZ3Jlc3NcIiwgXCJwdXNoLWJ1dHRvblwiLCBcInJhZGlhbC1ncmFkaWVudFwiLCBcInJhZGlvXCIsXG4gICAgXCJyZWFkLW9ubHlcIiwgXCJyZWFkLXdyaXRlXCIsIFwicmVhZC13cml0ZS1wbGFpbnRleHQtb25seVwiLCBcInJlY3RhbmdsZVwiLCBcInJlZ2lvblwiLCBcInJlbGF0aXZlXCIsIFwicmVwZWF0XCIsXG4gICAgXCJyZXBlYXRpbmctbGluZWFyLWdyYWRpZW50XCIsIFwicmVwZWF0aW5nLXJhZGlhbC1ncmFkaWVudFwiLCBcInJlcGVhdC14XCIsIFwicmVwZWF0LXlcIiwgXCJyZXNldFwiLCBcInJldmVyc2VcIixcbiAgICBcInJnYlwiLCBcInJnYmFcIiwgXCJyaWRnZVwiLCBcInJpZ2h0XCIsIFwicm90YXRlXCIsIFwicm90YXRlM2RcIiwgXCJyb3RhdGVYXCIsIFwicm90YXRlWVwiLCBcInJvdGF0ZVpcIiwgXCJyb3VuZFwiLFxuICAgIFwicm93XCIsIFwicm93LXJlc2l6ZVwiLCBcInJvdy1yZXZlcnNlXCIsIFwicnRsXCIsIFwicnVuLWluXCIsIFwicnVubmluZ1wiLCBcInMtcmVzaXplXCIsIFwic2Fucy1zZXJpZlwiLCBcInNhdHVyYXRpb25cIixcbiAgICBcInNjYWxlXCIsIFwic2NhbGUzZFwiLCBcInNjYWxlWFwiLCBcInNjYWxlWVwiLCBcInNjYWxlWlwiLCBcInNjcmVlblwiLCBcInNjcm9sbFwiLCBcInNjcm9sbGJhclwiLCBcInNjcm9sbC1wb3NpdGlvblwiLFxuICAgIFwic2UtcmVzaXplXCIsIFwic2VsZi1zdGFydFwiLCBcInNlbGYtZW5kXCIsIFwic2VtaS1jb25kZW5zZWRcIiwgXCJzZW1pLWV4cGFuZGVkXCIsIFwic2VwYXJhdGVcIiwgXCJzZXJpZlwiLCBcInNob3dcIixcbiAgICBcInNpbmdsZVwiLCBcInNrZXdcIiwgXCJza2V3WFwiLCBcInNrZXdZXCIsIFwic2tpcC13aGl0ZS1zcGFjZVwiLCBcInNsaWRlXCIsIFwic2xpZGVyLWhvcml6b250YWxcIixcbiAgICBcInNsaWRlci12ZXJ0aWNhbFwiLCBcInNsaWRlcnRodW1iLWhvcml6b250YWxcIiwgXCJzbGlkZXJ0aHVtYi12ZXJ0aWNhbFwiLCBcInNsb3dcIiwgXCJzbWFsbFwiLCBcInNtYWxsLWNhcHNcIixcbiAgICBcInNtYWxsLWNhcHRpb25cIiwgXCJzbWFsbGVyXCIsIFwic29mdC1saWdodFwiLCBcInNvbGlkXCIsIFwic291cmNlLWF0b3BcIiwgXCJzb3VyY2UtaW5cIiwgXCJzb3VyY2Utb3V0XCIsXG4gICAgXCJzb3VyY2Utb3ZlclwiLCBcInNwYWNlXCIsIFwic3BhY2UtYXJvdW5kXCIsIFwic3BhY2UtYmV0d2VlblwiLCBcInNwYWNlLWV2ZW5seVwiLCBcInNwZWxsLW91dFwiLCBcInNxdWFyZVwiLCBcInN0YXJ0XCIsXG4gICAgXCJzdGF0aWNcIiwgXCJzdGF0dXMtYmFyXCIsIFwic3RyZXRjaFwiLCBcInN0cm9rZVwiLCBcInN0cm9rZS1ib3hcIiwgXCJzdWJcIiwgXCJzdWJwaXhlbC1hbnRpYWxpYXNlZFwiLCBcInN2Z19tYXNrc1wiLFxuICAgIFwic3VwZXJcIiwgXCJzdy1yZXNpemVcIiwgXCJzeW1ib2xpY1wiLCBcInN5bWJvbHNcIiwgXCJzeXN0ZW0tdWlcIiwgXCJ0YWJsZVwiLCBcInRhYmxlLWNhcHRpb25cIiwgXCJ0YWJsZS1jZWxsXCIsXG4gICAgXCJ0YWJsZS1jb2x1bW5cIiwgXCJ0YWJsZS1jb2x1bW4tZ3JvdXBcIiwgXCJ0YWJsZS1mb290ZXItZ3JvdXBcIiwgXCJ0YWJsZS1oZWFkZXItZ3JvdXBcIiwgXCJ0YWJsZS1yb3dcIixcbiAgICBcInRhYmxlLXJvdy1ncm91cFwiLCBcInRleHRcIiwgXCJ0ZXh0LWJvdHRvbVwiLCBcInRleHQtdG9wXCIsIFwidGV4dGFyZWFcIiwgXCJ0ZXh0ZmllbGRcIiwgXCJ0aGlja1wiLCBcInRoaW5cIixcbiAgICBcInRocmVlZGRhcmtzaGFkb3dcIiwgXCJ0aHJlZWRmYWNlXCIsIFwidGhyZWVkaGlnaGxpZ2h0XCIsIFwidGhyZWVkbGlnaHRzaGFkb3dcIiwgXCJ0aHJlZWRzaGFkb3dcIiwgXCJ0b1wiLCBcInRvcFwiLFxuICAgIFwidHJhbnNmb3JtXCIsIFwidHJhbnNsYXRlXCIsIFwidHJhbnNsYXRlM2RcIiwgXCJ0cmFuc2xhdGVYXCIsIFwidHJhbnNsYXRlWVwiLCBcInRyYW5zbGF0ZVpcIiwgXCJ0cmFuc3BhcmVudFwiLFxuICAgIFwidWx0cmEtY29uZGVuc2VkXCIsIFwidWx0cmEtZXhwYW5kZWRcIiwgXCJ1bmRlcmxpbmVcIiwgXCJ1bmlkaXJlY3Rpb25hbC1wYW5cIiwgXCJ1bnNldFwiLCBcInVwXCIsIFwidXBwZXItbGF0aW5cIixcbiAgICBcInVwcGVyY2FzZVwiLCBcInVybFwiLCBcInZhclwiLCBcInZlcnRpY2FsXCIsIFwidmVydGljYWwtdGV4dFwiLCBcInZpZXctYm94XCIsIFwidmlzaWJsZVwiLCBcInZpc2libGVGaWxsXCIsXG4gICAgXCJ2aXNpYmxlUGFpbnRlZFwiLCBcInZpc2libGVTdHJva2VcIiwgXCJ2aXN1YWxcIiwgXCJ3LXJlc2l6ZVwiLCBcIndhaXRcIiwgXCJ3YXZlXCIsIFwid2lkZXJcIiwgXCJ3aW5kb3dcIiwgXCJ3aW5kb3dmcmFtZVwiLFxuICAgIFwid2luZG93dGV4dFwiLCBcIndvcmRzXCIsIFwid3JhcFwiLCBcIndyYXAtcmV2ZXJzZVwiLCBcIngtbGFyZ2VcIiwgXCJ4LXNtYWxsXCIsIFwieG9yXCIsIFwieHgtbGFyZ2VcIiwgXCJ4eC1zbWFsbFwiXG5dLm1hcChuYW1lID0+ICh7IHR5cGU6IFwia2V5d29yZFwiLCBsYWJlbDogbmFtZSB9KSkuY29uY2F0KC8qQF9fUFVSRV9fKi9bXG4gICAgXCJhbGljZWJsdWVcIiwgXCJhbnRpcXVld2hpdGVcIiwgXCJhcXVhXCIsIFwiYXF1YW1hcmluZVwiLCBcImF6dXJlXCIsIFwiYmVpZ2VcIixcbiAgICBcImJpc3F1ZVwiLCBcImJsYWNrXCIsIFwiYmxhbmNoZWRhbG1vbmRcIiwgXCJibHVlXCIsIFwiYmx1ZXZpb2xldFwiLCBcImJyb3duXCIsXG4gICAgXCJidXJseXdvb2RcIiwgXCJjYWRldGJsdWVcIiwgXCJjaGFydHJldXNlXCIsIFwiY2hvY29sYXRlXCIsIFwiY29yYWxcIiwgXCJjb3JuZmxvd2VyYmx1ZVwiLFxuICAgIFwiY29ybnNpbGtcIiwgXCJjcmltc29uXCIsIFwiY3lhblwiLCBcImRhcmtibHVlXCIsIFwiZGFya2N5YW5cIiwgXCJkYXJrZ29sZGVucm9kXCIsXG4gICAgXCJkYXJrZ3JheVwiLCBcImRhcmtncmVlblwiLCBcImRhcmtraGFraVwiLCBcImRhcmttYWdlbnRhXCIsIFwiZGFya29saXZlZ3JlZW5cIixcbiAgICBcImRhcmtvcmFuZ2VcIiwgXCJkYXJrb3JjaGlkXCIsIFwiZGFya3JlZFwiLCBcImRhcmtzYWxtb25cIiwgXCJkYXJrc2VhZ3JlZW5cIixcbiAgICBcImRhcmtzbGF0ZWJsdWVcIiwgXCJkYXJrc2xhdGVncmF5XCIsIFwiZGFya3R1cnF1b2lzZVwiLCBcImRhcmt2aW9sZXRcIixcbiAgICBcImRlZXBwaW5rXCIsIFwiZGVlcHNreWJsdWVcIiwgXCJkaW1ncmF5XCIsIFwiZG9kZ2VyYmx1ZVwiLCBcImZpcmVicmlja1wiLFxuICAgIFwiZmxvcmFsd2hpdGVcIiwgXCJmb3Jlc3RncmVlblwiLCBcImZ1Y2hzaWFcIiwgXCJnYWluc2Jvcm9cIiwgXCJnaG9zdHdoaXRlXCIsXG4gICAgXCJnb2xkXCIsIFwiZ29sZGVucm9kXCIsIFwiZ3JheVwiLCBcImdyZXlcIiwgXCJncmVlblwiLCBcImdyZWVueWVsbG93XCIsIFwiaG9uZXlkZXdcIixcbiAgICBcImhvdHBpbmtcIiwgXCJpbmRpYW5yZWRcIiwgXCJpbmRpZ29cIiwgXCJpdm9yeVwiLCBcImtoYWtpXCIsIFwibGF2ZW5kZXJcIixcbiAgICBcImxhdmVuZGVyYmx1c2hcIiwgXCJsYXduZ3JlZW5cIiwgXCJsZW1vbmNoaWZmb25cIiwgXCJsaWdodGJsdWVcIiwgXCJsaWdodGNvcmFsXCIsXG4gICAgXCJsaWdodGN5YW5cIiwgXCJsaWdodGdvbGRlbnJvZHllbGxvd1wiLCBcImxpZ2h0Z3JheVwiLCBcImxpZ2h0Z3JlZW5cIiwgXCJsaWdodHBpbmtcIixcbiAgICBcImxpZ2h0c2FsbW9uXCIsIFwibGlnaHRzZWFncmVlblwiLCBcImxpZ2h0c2t5Ymx1ZVwiLCBcImxpZ2h0c2xhdGVncmF5XCIsXG4gICAgXCJsaWdodHN0ZWVsYmx1ZVwiLCBcImxpZ2h0eWVsbG93XCIsIFwibGltZVwiLCBcImxpbWVncmVlblwiLCBcImxpbmVuXCIsIFwibWFnZW50YVwiLFxuICAgIFwibWFyb29uXCIsIFwibWVkaXVtYXF1YW1hcmluZVwiLCBcIm1lZGl1bWJsdWVcIiwgXCJtZWRpdW1vcmNoaWRcIiwgXCJtZWRpdW1wdXJwbGVcIixcbiAgICBcIm1lZGl1bXNlYWdyZWVuXCIsIFwibWVkaXVtc2xhdGVibHVlXCIsIFwibWVkaXVtc3ByaW5nZ3JlZW5cIiwgXCJtZWRpdW10dXJxdW9pc2VcIixcbiAgICBcIm1lZGl1bXZpb2xldHJlZFwiLCBcIm1pZG5pZ2h0Ymx1ZVwiLCBcIm1pbnRjcmVhbVwiLCBcIm1pc3R5cm9zZVwiLCBcIm1vY2Nhc2luXCIsXG4gICAgXCJuYXZham93aGl0ZVwiLCBcIm5hdnlcIiwgXCJvbGRsYWNlXCIsIFwib2xpdmVcIiwgXCJvbGl2ZWRyYWJcIiwgXCJvcmFuZ2VcIiwgXCJvcmFuZ2VyZWRcIixcbiAgICBcIm9yY2hpZFwiLCBcInBhbGVnb2xkZW5yb2RcIiwgXCJwYWxlZ3JlZW5cIiwgXCJwYWxldHVycXVvaXNlXCIsIFwicGFsZXZpb2xldHJlZFwiLFxuICAgIFwicGFwYXlhd2hpcFwiLCBcInBlYWNocHVmZlwiLCBcInBlcnVcIiwgXCJwaW5rXCIsIFwicGx1bVwiLCBcInBvd2RlcmJsdWVcIixcbiAgICBcInB1cnBsZVwiLCBcInJlYmVjY2FwdXJwbGVcIiwgXCJyZWRcIiwgXCJyb3N5YnJvd25cIiwgXCJyb3lhbGJsdWVcIiwgXCJzYWRkbGVicm93blwiLFxuICAgIFwic2FsbW9uXCIsIFwic2FuZHlicm93blwiLCBcInNlYWdyZWVuXCIsIFwic2Vhc2hlbGxcIiwgXCJzaWVubmFcIiwgXCJzaWx2ZXJcIiwgXCJza3libHVlXCIsXG4gICAgXCJzbGF0ZWJsdWVcIiwgXCJzbGF0ZWdyYXlcIiwgXCJzbm93XCIsIFwic3ByaW5nZ3JlZW5cIiwgXCJzdGVlbGJsdWVcIiwgXCJ0YW5cIixcbiAgICBcInRlYWxcIiwgXCJ0aGlzdGxlXCIsIFwidG9tYXRvXCIsIFwidHVycXVvaXNlXCIsIFwidmlvbGV0XCIsIFwid2hlYXRcIiwgXCJ3aGl0ZVwiLFxuICAgIFwid2hpdGVzbW9rZVwiLCBcInllbGxvd1wiLCBcInllbGxvd2dyZWVuXCJcbl0ubWFwKG5hbWUgPT4gKHsgdHlwZTogXCJjb25zdGFudFwiLCBsYWJlbDogbmFtZSB9KSkpO1xuY29uc3QgdGFncyA9IC8qQF9fUFVSRV9fKi9bXG4gICAgXCJhXCIsIFwiYWJiclwiLCBcImFkZHJlc3NcIiwgXCJhcnRpY2xlXCIsIFwiYXNpZGVcIiwgXCJiXCIsIFwiYmRpXCIsIFwiYmRvXCIsIFwiYmxvY2txdW90ZVwiLCBcImJvZHlcIixcbiAgICBcImJyXCIsIFwiYnV0dG9uXCIsIFwiY2FudmFzXCIsIFwiY2FwdGlvblwiLCBcImNpdGVcIiwgXCJjb2RlXCIsIFwiY29sXCIsIFwiY29sZ3JvdXBcIiwgXCJkZFwiLCBcImRlbFwiLFxuICAgIFwiZGV0YWlsc1wiLCBcImRmblwiLCBcImRpYWxvZ1wiLCBcImRpdlwiLCBcImRsXCIsIFwiZHRcIiwgXCJlbVwiLCBcImZpZ2NhcHRpb25cIiwgXCJmaWd1cmVcIiwgXCJmb290ZXJcIixcbiAgICBcImZvcm1cIiwgXCJoZWFkZXJcIiwgXCJoZ3JvdXBcIiwgXCJoMVwiLCBcImgyXCIsIFwiaDNcIiwgXCJoNFwiLCBcImg1XCIsIFwiaDZcIiwgXCJoclwiLCBcImh0bWxcIiwgXCJpXCIsIFwiaWZyYW1lXCIsXG4gICAgXCJpbWdcIiwgXCJpbnB1dFwiLCBcImluc1wiLCBcImtiZFwiLCBcImxhYmVsXCIsIFwibGVnZW5kXCIsIFwibGlcIiwgXCJtYWluXCIsIFwibWV0ZXJcIiwgXCJuYXZcIiwgXCJvbFwiLCBcIm91dHB1dFwiLFxuICAgIFwicFwiLCBcInByZVwiLCBcInJ1YnlcIiwgXCJzZWN0aW9uXCIsIFwic2VsZWN0XCIsIFwic21hbGxcIiwgXCJzb3VyY2VcIiwgXCJzcGFuXCIsIFwic3Ryb25nXCIsIFwic3ViXCIsIFwic3VtbWFyeVwiLFxuICAgIFwic3VwXCIsIFwidGFibGVcIiwgXCJ0Ym9keVwiLCBcInRkXCIsIFwidGVtcGxhdGVcIiwgXCJ0ZXh0YXJlYVwiLCBcInRmb290XCIsIFwidGhcIiwgXCJ0aGVhZFwiLCBcInRyXCIsIFwidVwiLCBcInVsXCJcbl0ubWFwKG5hbWUgPT4gKHsgdHlwZTogXCJ0eXBlXCIsIGxhYmVsOiBuYW1lIH0pKTtcbmNvbnN0IGF0UnVsZXMgPSAvKkBfX1BVUkVfXyovW1xuICAgIFwiQGNoYXJzZXRcIiwgXCJAY29sb3ItcHJvZmlsZVwiLCBcIkBjb250YWluZXJcIiwgXCJAY291bnRlci1zdHlsZVwiLCBcIkBmb250LWZhY2VcIiwgXCJAZm9udC1mZWF0dXJlLXZhbHVlc1wiLFxuICAgIFwiQGZvbnQtcGFsZXR0ZS12YWx1ZXNcIiwgXCJAaW1wb3J0XCIsIFwiQGtleWZyYW1lc1wiLCBcIkBsYXllclwiLCBcIkBtZWRpYVwiLCBcIkBuYW1lc3BhY2VcIiwgXCJAcGFnZVwiLFxuICAgIFwiQHBvc2l0aW9uLXRyeVwiLCBcIkBwcm9wZXJ0eVwiLCBcIkBzY29wZVwiLCBcIkBzdGFydGluZy1zdHlsZVwiLCBcIkBzdXBwb3J0c1wiLCBcIkB2aWV3LXRyYW5zaXRpb25cIlxuXS5tYXAobGFiZWwgPT4gKHsgdHlwZTogXCJrZXl3b3JkXCIsIGxhYmVsIH0pKTtcbmNvbnN0IGlkZW50aWZpZXIgPSAvXihcXHdbXFx3LV0qfC1cXHdbXFx3LV0qfCkkLywgdmFyaWFibGUgPSAvXi0oLVtcXHctXSopPyQvO1xuZnVuY3Rpb24gaXNWYXJBcmcobm9kZSwgZG9jKSB7XG4gICAgdmFyIF9hO1xuICAgIGlmIChub2RlLm5hbWUgPT0gXCIoXCIgfHwgbm9kZS50eXBlLmlzRXJyb3IpXG4gICAgICAgIG5vZGUgPSBub2RlLnBhcmVudCB8fCBub2RlO1xuICAgIGlmIChub2RlLm5hbWUgIT0gXCJBcmdMaXN0XCIpXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICBsZXQgY2FsbGVlID0gKF9hID0gbm9kZS5wYXJlbnQpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5maXJzdENoaWxkO1xuICAgIGlmICgoY2FsbGVlID09PSBudWxsIHx8IGNhbGxlZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogY2FsbGVlLm5hbWUpICE9IFwiQ2FsbGVlXCIpXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICByZXR1cm4gZG9jLnNsaWNlU3RyaW5nKGNhbGxlZS5mcm9tLCBjYWxsZWUudG8pID09IFwidmFyXCI7XG59XG5jb25zdCBWYXJpYWJsZXNCeU5vZGUgPSAvKkBfX1BVUkVfXyovbmV3IE5vZGVXZWFrTWFwKCk7XG5jb25zdCBkZWNsU2VsZWN0b3IgPSBbXCJEZWNsYXJhdGlvblwiXTtcbmZ1bmN0aW9uIGFzdFRvcChub2RlKSB7XG4gICAgZm9yIChsZXQgY3VyID0gbm9kZTs7KSB7XG4gICAgICAgIGlmIChjdXIudHlwZS5pc1RvcClcbiAgICAgICAgICAgIHJldHVybiBjdXI7XG4gICAgICAgIGlmICghKGN1ciA9IGN1ci5wYXJlbnQpKVxuICAgICAgICAgICAgcmV0dXJuIG5vZGU7XG4gICAgfVxufVxuZnVuY3Rpb24gdmFyaWFibGVOYW1lcyhkb2MsIG5vZGUsIGlzVmFyaWFibGUpIHtcbiAgICBpZiAobm9kZS50byAtIG5vZGUuZnJvbSA+IDQwOTYpIHtcbiAgICAgICAgbGV0IGtub3duID0gVmFyaWFibGVzQnlOb2RlLmdldChub2RlKTtcbiAgICAgICAgaWYgKGtub3duKVxuICAgICAgICAgICAgcmV0dXJuIGtub3duO1xuICAgICAgICBsZXQgcmVzdWx0ID0gW10sIHNlZW4gPSBuZXcgU2V0LCBjdXJzb3IgPSBub2RlLmN1cnNvcihJdGVyTW9kZS5JbmNsdWRlQW5vbnltb3VzKTtcbiAgICAgICAgaWYgKGN1cnNvci5maXJzdENoaWxkKCkpXG4gICAgICAgICAgICBkbyB7XG4gICAgICAgICAgICAgICAgZm9yIChsZXQgb3B0aW9uIG9mIHZhcmlhYmxlTmFtZXMoZG9jLCBjdXJzb3Iubm9kZSwgaXNWYXJpYWJsZSkpXG4gICAgICAgICAgICAgICAgICAgIGlmICghc2Vlbi5oYXMob3B0aW9uLmxhYmVsKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2Vlbi5hZGQob3B0aW9uLmxhYmVsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdC5wdXNoKG9wdGlvbik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gd2hpbGUgKGN1cnNvci5uZXh0U2libGluZygpKTtcbiAgICAgICAgVmFyaWFibGVzQnlOb2RlLnNldChub2RlLCByZXN1bHQpO1xuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgbGV0IHJlc3VsdCA9IFtdLCBzZWVuID0gbmV3IFNldDtcbiAgICAgICAgbm9kZS5jdXJzb3IoKS5pdGVyYXRlKG5vZGUgPT4ge1xuICAgICAgICAgICAgdmFyIF9hO1xuICAgICAgICAgICAgaWYgKGlzVmFyaWFibGUobm9kZSkgJiYgbm9kZS5tYXRjaENvbnRleHQoZGVjbFNlbGVjdG9yKSAmJiAoKF9hID0gbm9kZS5ub2RlLm5leHRTaWJsaW5nKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EubmFtZSkgPT0gXCI6XCIpIHtcbiAgICAgICAgICAgICAgICBsZXQgbmFtZSA9IGRvYy5zbGljZVN0cmluZyhub2RlLmZyb20sIG5vZGUudG8pO1xuICAgICAgICAgICAgICAgIGlmICghc2Vlbi5oYXMobmFtZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgc2Vlbi5hZGQobmFtZSk7XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdC5wdXNoKHsgbGFiZWw6IG5hbWUsIHR5cGU6IFwidmFyaWFibGVcIiB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cbn1cbi8qKlxuQ3JlYXRlIGEgY29tcGxldGlvbiBzb3VyY2UgZm9yIGEgQ1NTIGRpYWxlY3QsIHByb3ZpZGluZyBhXG5wcmVkaWNhdGUgZm9yIGRldGVybWluaW5nIHdoYXQga2luZCBvZiBzeW50YXggbm9kZSBjYW4gYWN0IGFzIGFcbmNvbXBsZXRhYmxlIHZhcmlhYmxlLiBUaGlzIGlzIHVzZWQgYnkgbGFuZ3VhZ2UgbW9kZXMgbGlrZSBTYXNzIGFuZFxuTGVzcyB0byByZXVzZSB0aGlzIHBhY2thZ2UncyBjb21wbGV0aW9uIGxvZ2ljLlxuKi9cbmNvbnN0IGRlZmluZUNTU0NvbXBsZXRpb25Tb3VyY2UgPSAoaXNWYXJpYWJsZSkgPT4gY29udGV4dCA9PiB7XG4gICAgbGV0IHsgc3RhdGUsIHBvcyB9ID0gY29udGV4dCwgbm9kZSA9IHN5bnRheFRyZWUoc3RhdGUpLnJlc29sdmVJbm5lcihwb3MsIC0xKTtcbiAgICBsZXQgaXNEYXNoID0gbm9kZS50eXBlLmlzRXJyb3IgJiYgbm9kZS5mcm9tID09IG5vZGUudG8gLSAxICYmIHN0YXRlLmRvYy5zbGljZVN0cmluZyhub2RlLmZyb20sIG5vZGUudG8pID09IFwiLVwiO1xuICAgIGlmIChub2RlLm5hbWUgPT0gXCJQcm9wZXJ0eU5hbWVcIiB8fFxuICAgICAgICAoaXNEYXNoIHx8IG5vZGUubmFtZSA9PSBcIlRhZ05hbWVcIikgJiYgL14oQmxvY2t8U3R5bGVzKSQvLnRlc3Qobm9kZS5yZXNvbHZlKG5vZGUudG8pLm5hbWUpKVxuICAgICAgICByZXR1cm4geyBmcm9tOiBub2RlLmZyb20sIG9wdGlvbnM6IHByb3BlcnRpZXMoKSwgdmFsaWRGb3I6IGlkZW50aWZpZXIgfTtcbiAgICBpZiAobm9kZS5uYW1lID09IFwiVmFsdWVOYW1lXCIpXG4gICAgICAgIHJldHVybiB7IGZyb206IG5vZGUuZnJvbSwgb3B0aW9uczogdmFsdWVzLCB2YWxpZEZvcjogaWRlbnRpZmllciB9O1xuICAgIGlmIChub2RlLm5hbWUgPT0gXCJQc2V1ZG9DbGFzc05hbWVcIilcbiAgICAgICAgcmV0dXJuIHsgZnJvbTogbm9kZS5mcm9tLCBvcHRpb25zOiBwc2V1ZG9DbGFzc2VzLCB2YWxpZEZvcjogaWRlbnRpZmllciB9O1xuICAgIGlmIChpc1ZhcmlhYmxlKG5vZGUpIHx8IChjb250ZXh0LmV4cGxpY2l0IHx8IGlzRGFzaCkgJiYgaXNWYXJBcmcobm9kZSwgc3RhdGUuZG9jKSlcbiAgICAgICAgcmV0dXJuIHsgZnJvbTogaXNWYXJpYWJsZShub2RlKSB8fCBpc0Rhc2ggPyBub2RlLmZyb20gOiBwb3MsXG4gICAgICAgICAgICBvcHRpb25zOiB2YXJpYWJsZU5hbWVzKHN0YXRlLmRvYywgYXN0VG9wKG5vZGUpLCBpc1ZhcmlhYmxlKSxcbiAgICAgICAgICAgIHZhbGlkRm9yOiB2YXJpYWJsZSB9O1xuICAgIGlmIChub2RlLm5hbWUgPT0gXCJUYWdOYW1lXCIpIHtcbiAgICAgICAgZm9yIChsZXQgeyBwYXJlbnQgfSA9IG5vZGU7IHBhcmVudDsgcGFyZW50ID0gcGFyZW50LnBhcmVudClcbiAgICAgICAgICAgIGlmIChwYXJlbnQubmFtZSA9PSBcIkJsb2NrXCIpXG4gICAgICAgICAgICAgICAgcmV0dXJuIHsgZnJvbTogbm9kZS5mcm9tLCBvcHRpb25zOiBwcm9wZXJ0aWVzKCksIHZhbGlkRm9yOiBpZGVudGlmaWVyIH07XG4gICAgICAgIHJldHVybiB7IGZyb206IG5vZGUuZnJvbSwgb3B0aW9uczogdGFncywgdmFsaWRGb3I6IGlkZW50aWZpZXIgfTtcbiAgICB9XG4gICAgaWYgKG5vZGUubmFtZSA9PSBcIkF0S2V5d29yZFwiKVxuICAgICAgICByZXR1cm4geyBmcm9tOiBub2RlLmZyb20sIG9wdGlvbnM6IGF0UnVsZXMsIHZhbGlkRm9yOiBpZGVudGlmaWVyIH07XG4gICAgaWYgKCFjb250ZXh0LmV4cGxpY2l0KVxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICBsZXQgYWJvdmUgPSBub2RlLnJlc29sdmUocG9zKSwgYmVmb3JlID0gYWJvdmUuY2hpbGRCZWZvcmUocG9zKTtcbiAgICBpZiAoYmVmb3JlICYmIGJlZm9yZS5uYW1lID09IFwiOlwiICYmIGFib3ZlLm5hbWUgPT0gXCJQc2V1ZG9DbGFzc1NlbGVjdG9yXCIpXG4gICAgICAgIHJldHVybiB7IGZyb206IHBvcywgb3B0aW9uczogcHNldWRvQ2xhc3NlcywgdmFsaWRGb3I6IGlkZW50aWZpZXIgfTtcbiAgICBpZiAoYmVmb3JlICYmIGJlZm9yZS5uYW1lID09IFwiOlwiICYmIGFib3ZlLm5hbWUgPT0gXCJEZWNsYXJhdGlvblwiIHx8IGFib3ZlLm5hbWUgPT0gXCJBcmdMaXN0XCIpXG4gICAgICAgIHJldHVybiB7IGZyb206IHBvcywgb3B0aW9uczogdmFsdWVzLCB2YWxpZEZvcjogaWRlbnRpZmllciB9O1xuICAgIGlmIChhYm92ZS5uYW1lID09IFwiQmxvY2tcIiB8fCBhYm92ZS5uYW1lID09IFwiU3R5bGVzXCIpXG4gICAgICAgIHJldHVybiB7IGZyb206IHBvcywgb3B0aW9uczogcHJvcGVydGllcygpLCB2YWxpZEZvcjogaWRlbnRpZmllciB9O1xuICAgIHJldHVybiBudWxsO1xufTtcbi8qKlxuQ1NTIHByb3BlcnR5LCB2YXJpYWJsZSwgYW5kIHZhbHVlIGtleXdvcmQgY29tcGxldGlvbiBzb3VyY2UuXG4qL1xuY29uc3QgY3NzQ29tcGxldGlvblNvdXJjZSA9IC8qQF9fUFVSRV9fKi9kZWZpbmVDU1NDb21wbGV0aW9uU291cmNlKG4gPT4gbi5uYW1lID09IFwiVmFyaWFibGVOYW1lXCIpO1xuXG4vKipcbkEgbGFuZ3VhZ2UgcHJvdmlkZXIgYmFzZWQgb24gdGhlIFtMZXplciBDU1NcbnBhcnNlcl0oaHR0cHM6Ly9naXRodWIuY29tL2xlemVyLXBhcnNlci9jc3MpLCBleHRlbmRlZCB3aXRoXG5oaWdobGlnaHRpbmcgYW5kIGluZGVudGF0aW9uIGluZm9ybWF0aW9uLlxuKi9cbmNvbnN0IGNzc0xhbmd1YWdlID0gLypAX19QVVJFX18qL0xSTGFuZ3VhZ2UuZGVmaW5lKHtcbiAgICBuYW1lOiBcImNzc1wiLFxuICAgIHBhcnNlcjogLypAX19QVVJFX18qL3BhcnNlci5jb25maWd1cmUoe1xuICAgICAgICBwcm9wczogW1xuICAgICAgICAgICAgLypAX19QVVJFX18qL2luZGVudE5vZGVQcm9wLmFkZCh7XG4gICAgICAgICAgICAgICAgRGVjbGFyYXRpb246IC8qQF9fUFVSRV9fKi9jb250aW51ZWRJbmRlbnQoKVxuICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAvKkBfX1BVUkVfXyovZm9sZE5vZGVQcm9wLmFkZCh7XG4gICAgICAgICAgICAgICAgXCJCbG9jayBLZXlmcmFtZUxpc3RcIjogZm9sZEluc2lkZVxuICAgICAgICAgICAgfSlcbiAgICAgICAgXVxuICAgIH0pLFxuICAgIGxhbmd1YWdlRGF0YToge1xuICAgICAgICBjb21tZW50VG9rZW5zOiB7IGJsb2NrOiB7IG9wZW46IFwiLypcIiwgY2xvc2U6IFwiKi9cIiB9IH0sXG4gICAgICAgIGluZGVudE9uSW5wdXQ6IC9eXFxzKlxcfSQvLFxuICAgICAgICB3b3JkQ2hhcnM6IFwiLVwiXG4gICAgfVxufSk7XG4vKipcbkxhbmd1YWdlIHN1cHBvcnQgZm9yIENTUy5cbiovXG5mdW5jdGlvbiBjc3MoKSB7XG4gICAgcmV0dXJuIG5ldyBMYW5ndWFnZVN1cHBvcnQoY3NzTGFuZ3VhZ2UsIGNzc0xhbmd1YWdlLmRhdGEub2YoeyBhdXRvY29tcGxldGU6IGNzc0NvbXBsZXRpb25Tb3VyY2UgfSkpO1xufVxuXG5leHBvcnQgeyBjc3MsIGNzc0NvbXBsZXRpb25Tb3VyY2UsIGNzc0xhbmd1YWdlLCBkZWZpbmVDU1NDb21wbGV0aW9uU291cmNlIH07XG4iLAogICAgImltcG9ydCB7IENvbnRleHRUcmFja2VyLCBFeHRlcm5hbFRva2VuaXplciwgTFJQYXJzZXIgfSBmcm9tICdAbGV6ZXIvbHInO1xuaW1wb3J0IHsgc3R5bGVUYWdzLCB0YWdzIH0gZnJvbSAnQGxlemVyL2hpZ2hsaWdodCc7XG5pbXBvcnQgeyBwYXJzZU1peGVkIH0gZnJvbSAnQGxlemVyL2NvbW1vbic7XG5cbi8vIFRoaXMgZmlsZSB3YXMgZ2VuZXJhdGVkIGJ5IGxlemVyLWdlbmVyYXRvci4gWW91IHByb2JhYmx5IHNob3VsZG4ndCBlZGl0IGl0LlxuY29uc3Qgc2NyaXB0VGV4dCA9IDU1LFxuICBTdGFydENsb3NlU2NyaXB0VGFnID0gMSxcbiAgc3R5bGVUZXh0ID0gNTYsXG4gIFN0YXJ0Q2xvc2VTdHlsZVRhZyA9IDIsXG4gIHRleHRhcmVhVGV4dCA9IDU3LFxuICBTdGFydENsb3NlVGV4dGFyZWFUYWcgPSAzLFxuICBFbmRUYWcgPSA0LFxuICBTZWxmQ2xvc2luZ0VuZFRhZyA9IDUsXG4gIFN0YXJ0VGFnID0gNixcbiAgU3RhcnRTY3JpcHRUYWcgPSA3LFxuICBTdGFydFN0eWxlVGFnID0gOCxcbiAgU3RhcnRUZXh0YXJlYVRhZyA9IDksXG4gIFN0YXJ0U2VsZkNsb3NpbmdUYWcgPSAxMCxcbiAgU3RhcnRDbG9zZVRhZyA9IDExLFxuICBOb01hdGNoU3RhcnRDbG9zZVRhZyA9IDEyLFxuICBNaXNtYXRjaGVkU3RhcnRDbG9zZVRhZyA9IDEzLFxuICBtaXNzaW5nQ2xvc2VUYWcgPSA1OCxcbiAgSW5jb21wbGV0ZVRhZyA9IDE0LFxuICBJbmNvbXBsZXRlQ2xvc2VUYWcgPSAxNSxcbiAgY29tbWVudENvbnRlbnQkMSA9IDU5LFxuICBFbGVtZW50ID0gMjEsXG4gIFRhZ05hbWUgPSAyMyxcbiAgQXR0cmlidXRlID0gMjQsXG4gIEF0dHJpYnV0ZU5hbWUgPSAyNSxcbiAgQXR0cmlidXRlVmFsdWUgPSAyNyxcbiAgVW5xdW90ZWRBdHRyaWJ1dGVWYWx1ZSA9IDI4LFxuICBTY3JpcHRUZXh0ID0gMjksXG4gIFN0eWxlVGV4dCA9IDMyLFxuICBUZXh0YXJlYVRleHQgPSAzNSxcbiAgT3BlblRhZyA9IDM3LFxuICBDbG9zZVRhZyA9IDM4LFxuICBEaWFsZWN0X25vTWF0Y2ggPSAwLFxuICBEaWFsZWN0X3NlbGZDbG9zaW5nID0gMTtcblxuLyogSGFuZC13cml0dGVuIHRva2VuaXplcnMgZm9yIEhUTUwuICovXG5cbmNvbnN0IHNlbGZDbG9zZXJzID0ge1xuICBhcmVhOiB0cnVlLCBiYXNlOiB0cnVlLCBicjogdHJ1ZSwgY29sOiB0cnVlLCBjb21tYW5kOiB0cnVlLFxuICBlbWJlZDogdHJ1ZSwgZnJhbWU6IHRydWUsIGhyOiB0cnVlLCBpbWc6IHRydWUsIGlucHV0OiB0cnVlLFxuICBrZXlnZW46IHRydWUsIGxpbms6IHRydWUsIG1ldGE6IHRydWUsIHBhcmFtOiB0cnVlLCBzb3VyY2U6IHRydWUsXG4gIHRyYWNrOiB0cnVlLCB3YnI6IHRydWUsIG1lbnVpdGVtOiB0cnVlXG59O1xuXG5jb25zdCBpbXBsaWNpdGx5Q2xvc2VkID0ge1xuICBkZDogdHJ1ZSwgbGk6IHRydWUsIG9wdGdyb3VwOiB0cnVlLCBvcHRpb246IHRydWUsIHA6IHRydWUsXG4gIHJwOiB0cnVlLCBydDogdHJ1ZSwgdGJvZHk6IHRydWUsIHRkOiB0cnVlLCB0Zm9vdDogdHJ1ZSxcbiAgdGg6IHRydWUsIHRyOiB0cnVlXG59O1xuXG5jb25zdCBjbG9zZU9uT3BlbiA9IHtcbiAgZGQ6IHtkZDogdHJ1ZSwgZHQ6IHRydWV9LFxuICBkdDoge2RkOiB0cnVlLCBkdDogdHJ1ZX0sXG4gIGxpOiB7bGk6IHRydWV9LFxuICBvcHRpb246IHtvcHRpb246IHRydWUsIG9wdGdyb3VwOiB0cnVlfSxcbiAgb3B0Z3JvdXA6IHtvcHRncm91cDogdHJ1ZX0sXG4gIHA6IHtcbiAgICBhZGRyZXNzOiB0cnVlLCBhcnRpY2xlOiB0cnVlLCBhc2lkZTogdHJ1ZSwgYmxvY2txdW90ZTogdHJ1ZSwgZGlyOiB0cnVlLFxuICAgIGRpdjogdHJ1ZSwgZGw6IHRydWUsIGZpZWxkc2V0OiB0cnVlLCBmb290ZXI6IHRydWUsIGZvcm06IHRydWUsXG4gICAgaDE6IHRydWUsIGgyOiB0cnVlLCBoMzogdHJ1ZSwgaDQ6IHRydWUsIGg1OiB0cnVlLCBoNjogdHJ1ZSxcbiAgICBoZWFkZXI6IHRydWUsIGhncm91cDogdHJ1ZSwgaHI6IHRydWUsIG1lbnU6IHRydWUsIG5hdjogdHJ1ZSwgb2w6IHRydWUsXG4gICAgcDogdHJ1ZSwgcHJlOiB0cnVlLCBzZWN0aW9uOiB0cnVlLCB0YWJsZTogdHJ1ZSwgdWw6IHRydWVcbiAgfSxcbiAgcnA6IHtycDogdHJ1ZSwgcnQ6IHRydWV9LFxuICBydDoge3JwOiB0cnVlLCBydDogdHJ1ZX0sXG4gIHRib2R5OiB7dGJvZHk6IHRydWUsIHRmb290OiB0cnVlfSxcbiAgdGQ6IHt0ZDogdHJ1ZSwgdGg6IHRydWV9LFxuICB0Zm9vdDoge3Rib2R5OiB0cnVlfSxcbiAgdGg6IHt0ZDogdHJ1ZSwgdGg6IHRydWV9LFxuICB0aGVhZDoge3Rib2R5OiB0cnVlLCB0Zm9vdDogdHJ1ZX0sXG4gIHRyOiB7dHI6IHRydWV9XG59O1xuXG5mdW5jdGlvbiBuYW1lQ2hhcihjaCkge1xuICByZXR1cm4gY2ggPT0gNDUgfHwgY2ggPT0gNDYgfHwgY2ggPT0gNTggfHwgY2ggPj0gNjUgJiYgY2ggPD0gOTAgfHwgY2ggPT0gOTUgfHwgY2ggPj0gOTcgJiYgY2ggPD0gMTIyIHx8IGNoID49IDE2MVxufVxuXG5sZXQgY2FjaGVkTmFtZSA9IG51bGwsIGNhY2hlZElucHV0ID0gbnVsbCwgY2FjaGVkUG9zID0gMDtcbmZ1bmN0aW9uIHRhZ05hbWVBZnRlcihpbnB1dCwgb2Zmc2V0KSB7XG4gIGxldCBwb3MgPSBpbnB1dC5wb3MgKyBvZmZzZXQ7XG4gIGlmIChjYWNoZWRQb3MgPT0gcG9zICYmIGNhY2hlZElucHV0ID09IGlucHV0KSByZXR1cm4gY2FjaGVkTmFtZVxuICBsZXQgbmV4dCA9IGlucHV0LnBlZWsob2Zmc2V0KSwgbmFtZSA9IFwiXCI7XG4gIGZvciAoOzspIHtcbiAgICBpZiAoIW5hbWVDaGFyKG5leHQpKSBicmVha1xuICAgIG5hbWUgKz0gU3RyaW5nLmZyb21DaGFyQ29kZShuZXh0KTtcbiAgICBuZXh0ID0gaW5wdXQucGVlaygrK29mZnNldCk7XG4gIH1cbiAgLy8gVW5kZWZpbmVkIHRvIHNpZ25hbCB0aGVyZSdzIGEgPD8gb3IgPCEsIG51bGwgZm9yIGp1c3QgbWlzc2luZ1xuICBjYWNoZWRJbnB1dCA9IGlucHV0OyBjYWNoZWRQb3MgPSBwb3M7XG4gIHJldHVybiBjYWNoZWROYW1lID0gbmFtZSA/IG5hbWUudG9Mb3dlckNhc2UoKSA6IG5leHQgPT0gcXVlc3Rpb24gfHwgbmV4dCA9PSBiYW5nID8gdW5kZWZpbmVkIDogbnVsbFxufVxuXG5jb25zdCBsZXNzVGhhbiA9IDYwLCBncmVhdGVyVGhhbiA9IDYyLCBzbGFzaCA9IDQ3LCBxdWVzdGlvbiA9IDYzLCBiYW5nID0gMzMsIGRhc2ggPSA0NTtcblxuZnVuY3Rpb24gRWxlbWVudENvbnRleHQobmFtZSwgcGFyZW50KSB7XG4gIHRoaXMubmFtZSA9IG5hbWU7XG4gIHRoaXMucGFyZW50ID0gcGFyZW50O1xufVxuXG5jb25zdCBzdGFydFRhZ1Rlcm1zID0gW1N0YXJ0VGFnLCBTdGFydFNlbGZDbG9zaW5nVGFnLCBTdGFydFNjcmlwdFRhZywgU3RhcnRTdHlsZVRhZywgU3RhcnRUZXh0YXJlYVRhZ107XG5cbmNvbnN0IGVsZW1lbnRDb250ZXh0ID0gbmV3IENvbnRleHRUcmFja2VyKHtcbiAgc3RhcnQ6IG51bGwsXG4gIHNoaWZ0KGNvbnRleHQsIHRlcm0sIHN0YWNrLCBpbnB1dCkge1xuICAgIHJldHVybiBzdGFydFRhZ1Rlcm1zLmluZGV4T2YodGVybSkgPiAtMSA/IG5ldyBFbGVtZW50Q29udGV4dCh0YWdOYW1lQWZ0ZXIoaW5wdXQsIDEpIHx8IFwiXCIsIGNvbnRleHQpIDogY29udGV4dFxuICB9LFxuICByZWR1Y2UoY29udGV4dCwgdGVybSkge1xuICAgIHJldHVybiB0ZXJtID09IEVsZW1lbnQgJiYgY29udGV4dCA/IGNvbnRleHQucGFyZW50IDogY29udGV4dFxuICB9LFxuICByZXVzZShjb250ZXh0LCBub2RlLCBzdGFjaywgaW5wdXQpIHtcbiAgICBsZXQgdHlwZSA9IG5vZGUudHlwZS5pZDtcbiAgICByZXR1cm4gdHlwZSA9PSBTdGFydFRhZyB8fCB0eXBlID09IE9wZW5UYWdcbiAgICAgID8gbmV3IEVsZW1lbnRDb250ZXh0KHRhZ05hbWVBZnRlcihpbnB1dCwgMSkgfHwgXCJcIiwgY29udGV4dCkgOiBjb250ZXh0XG4gIH0sXG4gIHN0cmljdDogZmFsc2Vcbn0pO1xuXG5jb25zdCB0YWdTdGFydCA9IG5ldyBFeHRlcm5hbFRva2VuaXplcigoaW5wdXQsIHN0YWNrKSA9PiB7XG4gIGlmIChpbnB1dC5uZXh0ICE9IGxlc3NUaGFuKSB7XG4gICAgLy8gRW5kIG9mIGZpbGUsIGNsb3NlIGFueSBvcGVuIHRhZ3NcbiAgICBpZiAoaW5wdXQubmV4dCA8IDAgJiYgc3RhY2suY29udGV4dCkgaW5wdXQuYWNjZXB0VG9rZW4obWlzc2luZ0Nsb3NlVGFnKTtcbiAgICByZXR1cm5cbiAgfVxuICBpbnB1dC5hZHZhbmNlKCk7XG4gIGxldCBjbG9zZSA9IGlucHV0Lm5leHQgPT0gc2xhc2g7XG4gIGlmIChjbG9zZSkgaW5wdXQuYWR2YW5jZSgpO1xuICBsZXQgbmFtZSA9IHRhZ05hbWVBZnRlcihpbnB1dCwgMCk7XG4gIGlmIChuYW1lID09PSB1bmRlZmluZWQpIHJldHVyblxuICBpZiAoIW5hbWUpIHJldHVybiBpbnB1dC5hY2NlcHRUb2tlbihjbG9zZSA/IEluY29tcGxldGVDbG9zZVRhZyA6IEluY29tcGxldGVUYWcpXG5cbiAgbGV0IHBhcmVudCA9IHN0YWNrLmNvbnRleHQgPyBzdGFjay5jb250ZXh0Lm5hbWUgOiBudWxsO1xuICBpZiAoY2xvc2UpIHtcbiAgICBpZiAobmFtZSA9PSBwYXJlbnQpIHJldHVybiBpbnB1dC5hY2NlcHRUb2tlbihTdGFydENsb3NlVGFnKVxuICAgIGlmIChwYXJlbnQgJiYgaW1wbGljaXRseUNsb3NlZFtwYXJlbnRdKSByZXR1cm4gaW5wdXQuYWNjZXB0VG9rZW4obWlzc2luZ0Nsb3NlVGFnLCAtMilcbiAgICBpZiAoc3RhY2suZGlhbGVjdEVuYWJsZWQoRGlhbGVjdF9ub01hdGNoKSkgcmV0dXJuIGlucHV0LmFjY2VwdFRva2VuKE5vTWF0Y2hTdGFydENsb3NlVGFnKVxuICAgIGZvciAobGV0IGN4ID0gc3RhY2suY29udGV4dDsgY3g7IGN4ID0gY3gucGFyZW50KSBpZiAoY3gubmFtZSA9PSBuYW1lKSByZXR1cm5cbiAgICBpbnB1dC5hY2NlcHRUb2tlbihNaXNtYXRjaGVkU3RhcnRDbG9zZVRhZyk7XG4gIH0gZWxzZSB7XG4gICAgaWYgKG5hbWUgPT0gXCJzY3JpcHRcIikgcmV0dXJuIGlucHV0LmFjY2VwdFRva2VuKFN0YXJ0U2NyaXB0VGFnKVxuICAgIGlmIChuYW1lID09IFwic3R5bGVcIikgcmV0dXJuIGlucHV0LmFjY2VwdFRva2VuKFN0YXJ0U3R5bGVUYWcpXG4gICAgaWYgKG5hbWUgPT0gXCJ0ZXh0YXJlYVwiKSByZXR1cm4gaW5wdXQuYWNjZXB0VG9rZW4oU3RhcnRUZXh0YXJlYVRhZylcbiAgICBpZiAoc2VsZkNsb3NlcnMuaGFzT3duUHJvcGVydHkobmFtZSkpIHJldHVybiBpbnB1dC5hY2NlcHRUb2tlbihTdGFydFNlbGZDbG9zaW5nVGFnKVxuICAgIGlmIChwYXJlbnQgJiYgY2xvc2VPbk9wZW5bcGFyZW50XSAmJiBjbG9zZU9uT3BlbltwYXJlbnRdW25hbWVdKSBpbnB1dC5hY2NlcHRUb2tlbihtaXNzaW5nQ2xvc2VUYWcsIC0xKTtcbiAgICBlbHNlIGlucHV0LmFjY2VwdFRva2VuKFN0YXJ0VGFnKTtcbiAgfVxufSwge2NvbnRleHR1YWw6IHRydWV9KTtcblxuY29uc3QgY29tbWVudENvbnRlbnQgPSBuZXcgRXh0ZXJuYWxUb2tlbml6ZXIoaW5wdXQgPT4ge1xuICBmb3IgKGxldCBkYXNoZXMgPSAwLCBpID0gMDs7IGkrKykge1xuICAgIGlmIChpbnB1dC5uZXh0IDwgMCkge1xuICAgICAgaWYgKGkpIGlucHV0LmFjY2VwdFRva2VuKGNvbW1lbnRDb250ZW50JDEpO1xuICAgICAgYnJlYWtcbiAgICB9XG4gICAgaWYgKGlucHV0Lm5leHQgPT0gZGFzaCkge1xuICAgICAgZGFzaGVzKys7XG4gICAgfSBlbHNlIGlmIChpbnB1dC5uZXh0ID09IGdyZWF0ZXJUaGFuICYmIGRhc2hlcyA+PSAyKSB7XG4gICAgICBpZiAoaSA+PSAzKSBpbnB1dC5hY2NlcHRUb2tlbihjb21tZW50Q29udGVudCQxLCAtMik7XG4gICAgICBicmVha1xuICAgIH0gZWxzZSB7XG4gICAgICBkYXNoZXMgPSAwO1xuICAgIH1cbiAgICBpbnB1dC5hZHZhbmNlKCk7XG4gIH1cbn0pO1xuXG5mdW5jdGlvbiBpbkZvcmVpZ25FbGVtZW50KGNvbnRleHQpIHtcbiAgZm9yICg7IGNvbnRleHQ7IGNvbnRleHQgPSBjb250ZXh0LnBhcmVudClcbiAgICBpZiAoY29udGV4dC5uYW1lID09IFwic3ZnXCIgfHwgY29udGV4dC5uYW1lID09IFwibWF0aFwiKSByZXR1cm4gdHJ1ZVxuICByZXR1cm4gZmFsc2Vcbn1cblxuY29uc3QgZW5kVGFnID0gbmV3IEV4dGVybmFsVG9rZW5pemVyKChpbnB1dCwgc3RhY2spID0+IHtcbiAgaWYgKGlucHV0Lm5leHQgPT0gc2xhc2ggJiYgaW5wdXQucGVlaygxKSA9PSBncmVhdGVyVGhhbikge1xuICAgIGxldCBzZWxmQ2xvc2luZyA9IHN0YWNrLmRpYWxlY3RFbmFibGVkKERpYWxlY3Rfc2VsZkNsb3NpbmcpIHx8IGluRm9yZWlnbkVsZW1lbnQoc3RhY2suY29udGV4dCk7XG4gICAgaW5wdXQuYWNjZXB0VG9rZW4oc2VsZkNsb3NpbmcgPyBTZWxmQ2xvc2luZ0VuZFRhZyA6IEVuZFRhZywgMik7XG4gIH0gZWxzZSBpZiAoaW5wdXQubmV4dCA9PSBncmVhdGVyVGhhbikge1xuICAgIGlucHV0LmFjY2VwdFRva2VuKEVuZFRhZywgMSk7XG4gIH1cbn0pO1xuXG5mdW5jdGlvbiBjb250ZW50VG9rZW5pemVyKHRhZywgdGV4dFRva2VuLCBlbmRUb2tlbikge1xuICBsZXQgbGFzdFN0YXRlID0gMiArIHRhZy5sZW5ndGg7XG4gIHJldHVybiBuZXcgRXh0ZXJuYWxUb2tlbml6ZXIoaW5wdXQgPT4ge1xuICAgIC8vIHN0YXRlIG1lYW5zOlxuICAgIC8vIC0gMCBub3RoaW5nIG1hdGNoZWRcbiAgICAvLyAtIDEgJzwnIG1hdGNoZWRcbiAgICAvLyAtIDIgJzwvJ1xuICAgIC8vIC0gMy0oMSt0YWcubGVuZ3RoKSBwYXJ0IG9mIHRoZSB0YWcgbWF0Y2hlZFxuICAgIC8vIC0gbGFzdFN0YXRlIHdob2xlIHRhZyArIHBvc3NpYmx5IHdoaXRlc3BhY2UgbWF0Y2hlZFxuICAgIGZvciAobGV0IHN0YXRlID0gMCwgbWF0Y2hlZExlbiA9IDAsIGkgPSAwOzsgaSsrKSB7XG4gICAgICBpZiAoaW5wdXQubmV4dCA8IDApIHtcbiAgICAgICAgaWYgKGkpIGlucHV0LmFjY2VwdFRva2VuKHRleHRUb2tlbik7XG4gICAgICAgIGJyZWFrXG4gICAgICB9XG4gICAgICBpZiAoc3RhdGUgPT0gMCAmJiBpbnB1dC5uZXh0ID09IGxlc3NUaGFuIHx8XG4gICAgICAgICAgc3RhdGUgPT0gMSAmJiBpbnB1dC5uZXh0ID09IHNsYXNoIHx8XG4gICAgICAgICAgc3RhdGUgPj0gMiAmJiBzdGF0ZSA8IGxhc3RTdGF0ZSAmJiBpbnB1dC5uZXh0ID09IHRhZy5jaGFyQ29kZUF0KHN0YXRlIC0gMikpIHtcbiAgICAgICAgc3RhdGUrKztcbiAgICAgICAgbWF0Y2hlZExlbisrO1xuICAgICAgfSBlbHNlIGlmIChzdGF0ZSA9PSBsYXN0U3RhdGUgJiYgaW5wdXQubmV4dCA9PSBncmVhdGVyVGhhbikge1xuICAgICAgICBpZiAoaSA+IG1hdGNoZWRMZW4pXG4gICAgICAgICAgaW5wdXQuYWNjZXB0VG9rZW4odGV4dFRva2VuLCAtbWF0Y2hlZExlbik7XG4gICAgICAgIGVsc2VcbiAgICAgICAgICBpbnB1dC5hY2NlcHRUb2tlbihlbmRUb2tlbiwgLShtYXRjaGVkTGVuIC0gMikpO1xuICAgICAgICBicmVha1xuICAgICAgfSBlbHNlIGlmICgoaW5wdXQubmV4dCA9PSAxMCAvKiAnXFxuJyAqLyB8fCBpbnB1dC5uZXh0ID09IDEzIC8qICdcXHInICovKSAmJiBpKSB7XG4gICAgICAgIGlucHV0LmFjY2VwdFRva2VuKHRleHRUb2tlbiwgMSk7XG4gICAgICAgIGJyZWFrXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzdGF0ZSA9IG1hdGNoZWRMZW4gPSAwO1xuICAgICAgfVxuICAgICAgaW5wdXQuYWR2YW5jZSgpO1xuICAgIH1cbiAgfSlcbn1cblxuY29uc3Qgc2NyaXB0VG9rZW5zID0gY29udGVudFRva2VuaXplcihcInNjcmlwdFwiLCBzY3JpcHRUZXh0LCBTdGFydENsb3NlU2NyaXB0VGFnKTtcblxuY29uc3Qgc3R5bGVUb2tlbnMgPSBjb250ZW50VG9rZW5pemVyKFwic3R5bGVcIiwgc3R5bGVUZXh0LCBTdGFydENsb3NlU3R5bGVUYWcpO1xuXG5jb25zdCB0ZXh0YXJlYVRva2VucyA9IGNvbnRlbnRUb2tlbml6ZXIoXCJ0ZXh0YXJlYVwiLCB0ZXh0YXJlYVRleHQsIFN0YXJ0Q2xvc2VUZXh0YXJlYVRhZyk7XG5cbmNvbnN0IGh0bWxIaWdobGlnaHRpbmcgPSBzdHlsZVRhZ3Moe1xuICBcIlRleHQgUmF3VGV4dCBJbmNvbXBsZXRlVGFnIEluY29tcGxldGVDbG9zZVRhZ1wiOiB0YWdzLmNvbnRlbnQsXG4gIFwiU3RhcnRUYWcgU3RhcnRDbG9zZVRhZyBTZWxmQ2xvc2luZ0VuZFRhZyBFbmRUYWdcIjogdGFncy5hbmdsZUJyYWNrZXQsXG4gIFRhZ05hbWU6IHRhZ3MudGFnTmFtZSxcbiAgXCJNaXNtYXRjaGVkQ2xvc2VUYWcvVGFnTmFtZVwiOiBbdGFncy50YWdOYW1lLCAgdGFncy5pbnZhbGlkXSxcbiAgQXR0cmlidXRlTmFtZTogdGFncy5hdHRyaWJ1dGVOYW1lLFxuICBcIkF0dHJpYnV0ZVZhbHVlIFVucXVvdGVkQXR0cmlidXRlVmFsdWVcIjogdGFncy5hdHRyaWJ1dGVWYWx1ZSxcbiAgSXM6IHRhZ3MuZGVmaW5pdGlvbk9wZXJhdG9yLFxuICBcIkVudGl0eVJlZmVyZW5jZSBDaGFyYWN0ZXJSZWZlcmVuY2VcIjogdGFncy5jaGFyYWN0ZXIsXG4gIENvbW1lbnQ6IHRhZ3MuYmxvY2tDb21tZW50LFxuICBQcm9jZXNzaW5nSW5zdDogdGFncy5wcm9jZXNzaW5nSW5zdHJ1Y3Rpb24sXG4gIERvY3R5cGVEZWNsOiB0YWdzLmRvY3VtZW50TWV0YVxufSk7XG5cbi8vIFRoaXMgZmlsZSB3YXMgZ2VuZXJhdGVkIGJ5IGxlemVyLWdlbmVyYXRvci4gWW91IHByb2JhYmx5IHNob3VsZG4ndCBlZGl0IGl0LlxuY29uc3QgcGFyc2VyID0gTFJQYXJzZXIuZGVzZXJpYWxpemUoe1xuICB2ZXJzaW9uOiAxNCxcbiAgc3RhdGVzOiBcIix4T1ZPIXJPT08hWlEjdE8nI0NyTyFgUSN0TycjQ3tPIWVRI3RPJyNET08halEjdE8nI0RSTyFvUSN0TycjRFRPIXRPYU8nI0NxTyNQT2JPJyNDcU8jW09kTycjQ3FPJGtPIXJPJyNDcU9PT2AnI0NxJyNDcU8kck8kZk8nI0RVTyR6USN0TycjRFdPJVBRI3RPJyNEWE9PT2AnI0RsJyNEbE9PT2AnI0RaJyNEWlFWTyFyT09PJVVRJnJPLDU5Xk8lYVEmck8sNTlnTyVsUSZyTyw1OWpPJXdRJnJPLDU5bU8mU1Emck8sNTlvT09PYScjRF8nI0RfTyZfT2FPJyNDeU8mak9hTyw1OV1PT09iJyNEYCcjRGBPJnJPYk8nI0N8TyZ9T2JPLDU5XU9PT2QnI0RhJyNEYU8nVk9kTycjRFBPJ2JPZE8sNTldT09PYCcjRGInI0RiTydqTyFyTyw1OV1PJ3FRI3RPJyNEU09PT2AsNTldLDU5XU9PT3AnI0RjJyNEY08ndk8kZk8sNTlwT09PYCw1OXAsNTlwTyhPUSN8Tyw1OXJPKFRRI3xPLDU5c09PT2AtRTdYLUU3WE8oWVEmck8nI0N0T09RVycjRFsnI0RbTyhoUSZyTzFHLnhPT09hMUcueDFHLnhPT09gMUcvWjFHL1pPKHNRJnJPMUcvUk9PT2IxRy9SMUcvUk8pT1Emck8xRy9VT09PZDFHL1UxRy9VTylaUSZyTzFHL1hPT09gMUcvWDFHL1hPKWZRJnJPMUcvWk9PT2EtRTddLUU3XU8pcVEjdE8nI0N6T09PYDFHLncxRy53T09PYi1FN14tRTdeTyl2USN0TycjQ31PT09kLUU3Xy1FN19PKXtRI3RPJyNEUU9PT2AtRTdgLUU3YE8qUVEjfE8sNTluT09PcC1FN2EtRTdhT09PYDFHL1sxRy9bT09PYDFHL14xRy9eT09PYDFHL18xRy9fTypWUSxVTyw1OWBPT1FXLUU3WS1FN1lPT09hNyskZDcrJGRPT09gNyskdTcrJHVPT09iNyskbTcrJG1PT09kNyskcDcrJHBPT09gNyskczcrJHNPKmJRI3xPLDU5Zk8qZ1EjfE8sNTlpTypsUSN8Tyw1OWxPT09gMUcvWTFHL1lPKnFPN1tPJyNDd08rU09NaE8nI0N3T09RVzFHLnoxRy56T09PYDFHL1ExRy9RT09PYDFHL1QxRy9UT09PYDFHL1cxRy9XT09PTycjRF0nI0RdTytlTzdbTyw1OWNPT1FXLDU5Yyw1OWNPT09PJyNEXicjRF5PK3ZPTWhPLDU5Y09PT08tRTdaLUU3Wk9PUVcxRy59MUcufU9PT08tRTdbLUU3W1wiLFxuICBzdGF0ZURhdGE6IFwiLGN+TyFfT1N+T1VTT1ZQT1dRT1hST1lUT1tdT11bT15eT19eT2FeT2JeT2NeT2ReT3leT3xfTyFlWk9+T2dhT35PZ2JPfk9nY09+T2dkT35PZ2VPfk8hWGZPUG1QIVttUH5PIVlpT1FwUCFbcFB+TyFabE9Sc1AhW3NQfk9VU09WUE9XUU9YUk9ZVE9acU9bXU9dW09eXk9fXk9hXk9iXk9jXk9kXk95Xk8hZVpPfk8hW3JPflAjZ08hXXNPIWZ1T35PZ3ZPfk9nd09+T1N8T1R9T2l5T35PUyFQT1R9T2l5T35PUyFST1R9T2l5T35PUyFUT1R9T2l5T35PU31PVH1PaXlPfk8hWGZPUG1YIVttWH5PUCFXTyFbIVhPfk8hWWlPUXBYIVtwWH5PUSFaTyFbIVhPfk8hWmxPUnNYIVtzWH5PUiFdTyFbIVhPfk8hWyFYT35QI2dPZyFfT35PIV1zTyFmIWFPfk9TIWJPfk9TIWNPfk9qIWRPU2hYVGhYaWhYfk9TIWZPVCFnT2l5T35PUyFoT1QhZ09peU9+T1MhaU9UIWdPaXlPfk9TIWpPVCFnT2l5T35PUyFnT1QhZ09peU9+T2cha09+T2chbE9+T2chbU9+T1Mhbk9+T2whcU8hYSFvTyFjIXBPfk9TIXJPfk9TIXNPfk9TIXRPfk9iIXVPYyF1T2QhdU8hYSF3TyFiIXVPfk9iIXhPYyF4T2QheE8hYyF3TyFkIXhPfk9iIXVPYyF1T2QhdU8hYSF7TyFiIXVPfk9iIXhPYyF4T2QheE8hYyF7TyFkIXhPfk9UfmNiZCFleXwhZX5cIixcbiAgZ290bzogXCIlcSFhUFBQUFBQUFBQUFBQUFBQUFBQUFBQIWIhaFAhblBQIXpQIX0jUSNUI1ojXiNhI2cjaiNtI3MjeSFiUCFiIWJQJFAkViRtJHMkeSVQJVYlXSVjUFBQUFBQUFAlaVheT1hgcFhVT1hgcGV6YWJjZGV7IU8hUSFTIVVSIXEhZFJoVVIhWGhYVk9YYHBSa1ZSIVhrWFdPWGBwUm5XUiFYblhYT1hgcFFyWFIhWHBYWU9YYHBRYE9SeGBRe2FRIU9iUSFRY1EhU2RRIVVlWiFleyFPIVEhUyFVUSF2IW9SIXohdlEheSFwUiF8IXlRZ1VSIVZnUWpWUiFZalFtV1IhW21RcFhSIV5wUXRaUiFgdFNfT2BUb1hwXCIsXG4gIG5vZGVOYW1lczogXCLimqAgU3RhcnRDbG9zZVRhZyBTdGFydENsb3NlVGFnIFN0YXJ0Q2xvc2VUYWcgRW5kVGFnIFNlbGZDbG9zaW5nRW5kVGFnIFN0YXJ0VGFnIFN0YXJ0VGFnIFN0YXJ0VGFnIFN0YXJ0VGFnIFN0YXJ0VGFnIFN0YXJ0Q2xvc2VUYWcgU3RhcnRDbG9zZVRhZyBTdGFydENsb3NlVGFnIEluY29tcGxldGVUYWcgSW5jb21wbGV0ZUNsb3NlVGFnIERvY3VtZW50IFRleHQgRW50aXR5UmVmZXJlbmNlIENoYXJhY3RlclJlZmVyZW5jZSBJbnZhbGlkRW50aXR5IEVsZW1lbnQgT3BlblRhZyBUYWdOYW1lIEF0dHJpYnV0ZSBBdHRyaWJ1dGVOYW1lIElzIEF0dHJpYnV0ZVZhbHVlIFVucXVvdGVkQXR0cmlidXRlVmFsdWUgU2NyaXB0VGV4dCBDbG9zZVRhZyBPcGVuVGFnIFN0eWxlVGV4dCBDbG9zZVRhZyBPcGVuVGFnIFRleHRhcmVhVGV4dCBDbG9zZVRhZyBPcGVuVGFnIENsb3NlVGFnIFNlbGZDbG9zaW5nVGFnIENvbW1lbnQgUHJvY2Vzc2luZ0luc3QgTWlzbWF0Y2hlZENsb3NlVGFnIENsb3NlVGFnIERvY3R5cGVEZWNsXCIsXG4gIG1heFRlcm06IDY4LFxuICBjb250ZXh0OiBlbGVtZW50Q29udGV4dCxcbiAgbm9kZVByb3BzOiBbXG4gICAgW1wiY2xvc2VkQnlcIiwgLTEwLDEsMiwzLDcsOCw5LDEwLDExLDEyLDEzLFwiRW5kVGFnXCIsNixcIkVuZFRhZyBTZWxmQ2xvc2luZ0VuZFRhZ1wiLC00LDIyLDMxLDM0LDM3LFwiQ2xvc2VUYWdcIl0sXG4gICAgW1wib3BlbmVkQnlcIiwgNCxcIlN0YXJ0VGFnIFN0YXJ0Q2xvc2VUYWdcIiw1LFwiU3RhcnRUYWdcIiwtNCwzMCwzMywzNiwzOCxcIk9wZW5UYWdcIl0sXG4gICAgW1wiZ3JvdXBcIiwgLTEwLDE0LDE1LDE4LDE5LDIwLDIxLDQwLDQxLDQyLDQzLFwiRW50aXR5XCIsMTcsXCJFbnRpdHkgVGV4dENvbnRlbnRcIiwtMywyOSwzMiwzNSxcIlRleHRDb250ZW50IEVudGl0eVwiXSxcbiAgICBbXCJpc29sYXRlXCIsIC0xMSwyMiwzMCwzMSwzMywzNCwzNiwzNywzOCwzOSw0Miw0MyxcImx0clwiLC0zLDI3LDI4LDQwLFwiXCJdXG4gIF0sXG4gIHByb3BTb3VyY2VzOiBbaHRtbEhpZ2hsaWdodGluZ10sXG4gIHNraXBwZWROb2RlczogWzBdLFxuICByZXBlYXROb2RlQ291bnQ6IDksXG4gIHRva2VuRGF0YTogXCIhPHAhYVIhWU9YJHFYWSxRWVosUVpbJHFbXSZYXV4sUV5wJHFwcSxRcXItX3JzM19zdi1fdnczfXd4SFl4fS1ffSFPSHshTyFQLV8hUCFRJHEhUSFbLV8hWyFdTXohXSFeLV8hXiFfISRTIV8hYCE7eCFgIWEmWCFhIWMtXyFjIX1NeiF9I1ItXyNSI1NNeiNTI1QxayNUI29NeiNvI3MtXyNzJGYkcSRmJVctXyVXJW9NeiVvJXAtXyVwJmFNeiZhJmItXyZiMXBNejFwNFUtXzRVNGRNejRkNGUtXzRlJElTTXokSVMkSWAtXyRJYCRJYk16JEliJEtoLV8kS2glI3RNeiUjdCYveC1fJi94JkV0TXomRXQmRlYtXyZGVjsnU016OydTOzpqISN8OzpqOz1gM1g8JWw/JnItXz8mcj9BaE16P0FoP0JZJHE/Qlk/TW5Nej9Nbk8kcSFaJHxjYVBsVyFiYCFkcE9YJHFYWiZYWlskcVteJlhecCRxcHEmWHFyJHFycyZ9c3YkcXZ3K1B3eCh0eCFeJHEhXiFfKlYhXyFhJlghYSNTJHEjUyNUJlgjVDsnUyRxOydTOz1gK3o8JWxPJHEhUiZiWGFQIWJgIWRwT3ImWHJzJn1zdiZYd3godHghXiZYIV4hXypWIV87J1MmWDsnUzs9YCp5PCVsTyZYcSdVVmFQIWRwT3YmfXd4J2t4IV4mfSFeIV8oViFfOydTJn07J1M7PWAobjwlbE8mfVAncFRhUE92J2t3IV4nayFfOydTJ2s7J1M7PWAoUDwlbE8na1AoU1A7PWA8JWwna3AoW1MhZHBPdihWeDsnUyhWOydTOz1gKGg8JWxPKFZwKGtQOz1gPCVsKFZxKHFQOz1gPCVsJn1hKHtXYVAhYmBPcih0cnMna3N2KHR3IV4odCFeIV8pZSFfOydTKHQ7J1M7PWAqUDwlbE8odGApalQhYmBPcillc3YpZXc7J1MpZTsnUzs9YCl5PCVsTyllYCl8UDs9YDwlbCllYSpTUDs9YDwlbCh0IVEqXlYhYmAhZHBPcipWcnMoVnN2KlZ3eClleDsnUypWOydTOz1gKnM8JWxPKlYhUSp2UDs9YDwlbCpWIVIqfFA7PWA8JWwmWFcrVVlsV09YK1BaWytQXnArUHFyK1BzdytQeCFeK1AhYSNTK1AjVDsnUytQOydTOz1gK3Q8JWxPK1BXK3dQOz1gPCVsK1AhWit9UDs9YDwlbCRxIWEsXWBhUCFiYCFkcCFfXk9YJlhYWSxRWVosUVpdJlhdXixRXnAmWHBxLFFxciZYcnMmfXN2Jlh3eCh0eCFeJlghXiFfKlYhXzsnUyZYOydTOz1gKnk8JWxPJlghXy1samlTYVBsVyFiYCFkcE9YJHFYWiZYWlskcVteJlhecCRxcHEmWHFyLV9ycyZ9c3YtX3Z3L153eCh0eCFQLV8hUCFRJHEhUSFeLV8hXiFfKlYhXyFhJlghYSNTLV8jUyNUMWsjVCNzLV8jcyRmJHEkZjsnUy1fOydTOz1gM1g8JWw/QWgtXz9BaD9CWSRxP0JZP01uLV8/TW5PJHFbL2ViaVNsV09YK1BaWytQXnArUHFyL15zdy9eeCFQL14hUCFRK1AhUSFeL14hYSNTL14jUyNUMG0jVCNzL14jcyRmK1AkZjsnUy9eOydTOz1gMWU8JWw/QWgvXj9BaD9CWStQP0JZP01uL14/TW5PK1BTMHJYaVNxcjBtc3cwbXghUDBtIVEhXjBtIWEjczBtJGY7J1MwbTsnUzs9YDFfPCVsP0FoMG0/Qlk/TW4wbVMxYlA7PWA8JWwwbVsxaFA7PWA8JWwvXiFWMXZjaVNhUCFiYCFkcE9xJlhxcjFrcnMmfXN2MWt2dzBtd3godHghUDFrIVAhUSZYIVEhXjFrIV4hXypWIV8hYSZYIWEjczFrI3MkZiZYJGY7J1MxazsnUzs9YDNSPCVsP0FoMWs/QWg/QlkmWD9CWT9NbjFrP01uTyZYIVYzVVA7PWA8JWwxayFfM1tQOz1gPCVsLV8hWjNoViFhaGFQIWRwT3YmfXd4J2t4IV4mfSFeIV8oViFfOydTJn07J1M7PWAobjwlbE8mfSFfNFdpaVNsV2QhUk9YNXVYWjdTWls1dVteN1NecDV1cXI4dHJzN1NzdD5ddHc4dHd4N1N4IVA4dCFQIVE1dSFRIV04dCFdIV4vXiFeIWE3UyFhI1M4dCNTI1Q7eyNUI3M4dCNzJGY1dSRmOydTOHQ7J1M7PWA+VjwlbD9BaDh0P0FoP0JZNXU/Qlk/TW44dD9Nbk81dSFaNXpibFdPWDV1WFo3U1pbNXVbXjdTXnA1dXFyNXVyczdTc3QrUHR3NXV3eDdTeCFdNXUhXSFeN3chXiFhN1MhYSNTNXUjUyNUN1MjVDsnUzV1OydTOz1gOG48JWxPNXUhUjdWVk9wN1NxczdTdCFdN1MhXSFeN2whXjsnUzdTOydTOz1gN3E8JWxPN1MhUjdxT2IhUiFSN3RQOz1gPCVsN1MhWjhPWWxXYiFST1grUFpbK1BecCtQcXIrUHN3K1B4IV4rUCFhI1MrUCNUOydTK1A7J1M7PWArdDwlbE8rUCFaOHFQOz1gPCVsNXUhXzh7aWlTbFdPWDV1WFo3U1pbNXVbXjdTXnA1dXFyOHRyczdTc3QvXnR3OHR3eDdTeCFQOHQhUCFRNXUhUSFdOHQhXSFeOmohXiFhN1MhYSNTOHQjUyNUO3sjVCNzOHQjcyRmNXUkZjsnUzh0OydTOz1gPlY8JWw/QWg4dD9BaD9CWTV1P0JZP01uOHQ/TW5PNXUhXzpzYmlTbFdiIVJPWCtQWlsrUF5wK1Bxci9ec3cvXnghUC9eIVAhUStQIVEhXi9eIWEjUy9eI1MjVDBtI1Qjcy9eI3MkZitQJGY7J1MvXjsnUzs9YDFlPCVsP0FoL14/QWg/QlkrUD9CWT9Nbi9eP01uTytQIVY8UWNpU09wN1Nxcjt7cnM3U3N0MG10dzt7d3g3U3ghUDt7IVAhUTdTIVEhXTt7IV0hXj1dIV4hYTdTIWEjczt7I3MkZjdTJGY7J1M7ezsnUzs9YD5QPCVsP0FoO3s/QWg/Qlk3Uz9CWT9Nbjt7P01uTzdTIVY9ZFhpU2IhUnFyMG1zdzBteCFQMG0hUSFeMG0hYSNzMG0kZjsnUzBtOydTOz1gMV88JWw/QWgwbT9CWT9NbjBtIVY+U1A7PWA8JWw7eyFfPllQOz1gPCVsOHQhXz5kaGlTbFdPWEBPWFpBWVpbQE9bXkFZXnBAT3FyQndyc0FZc3dCd3d4QVl4IVBCdyFQIVFATyFRIV1CdyFdIV4vXiFeIWFBWSFhI1NCdyNTI1RFeyNUI3NCdyNzJGZATyRmOydTQnc7J1M7PWBIUzwlbD9BaEJ3P0FoP0JZQE8/Qlk/TW5Cdz9Nbk9ATyFaQFRhbFdPWEBPWFpBWVpbQE9bXkFZXnBAT3FyQE9yc0FZc3dAT3d4QVl4IV1ATyFdIV5BeiFeIWFBWSFhI1NATyNTI1RBWSNUOydTQE87J1M7PWBCcTwlbE9ATyFSQV1VT3BBWXEhXUFZIV0hXkFvIV47J1NBWTsnUzs9YEF0PCVsT0FZIVJBdE9jIVIhUkF3UDs9YDwlbEFZIVpCUllsV2MhUk9YK1BaWytQXnArUHFyK1BzdytQeCFeK1AhYSNTK1AjVDsnUytQOydTOz1gK3Q8JWxPK1AhWkJ0UDs9YDwlbEBPIV9DT2hpU2xXT1hAT1haQVlaW0BPW15BWV5wQE9xckJ3cnNBWXN3Qnd3eEFZeCFQQnchUCFRQE8hUSFdQnchXSFeRGohXiFhQVkhYSNTQncjUyNURXsjVCNzQncjcyRmQE8kZjsnU0J3OydTOz1gSFM8JWw/QWhCdz9BaD9CWUBPP0JZP01uQnc/TW5PQE8hX0RzYmlTbFdjIVJPWCtQWlsrUF5wK1Bxci9ec3cvXnghUC9eIVAhUStQIVEhXi9eIWEjUy9eI1MjVDBtI1Qjcy9eI3MkZitQJGY7J1MvXjsnUzs9YDFlPCVsP0FoL14/QWg/QlkrUD9CWT9Nbi9eP01uTytQIVZGUWJpU09wQVlxckV7cnNBWXN3RXt3eEFZeCFQRXshUCFRQVkhUSFdRXshXSFeR1khXiFhQVkhYSNzRXsjcyRmQVkkZjsnU0V7OydTOz1gR3w8JWw/QWhFez9BaD9CWUFZP0JZP01uRXs/TW5PQVkhVkdhWGlTYyFScXIwbXN3MG14IVAwbSFRIV4wbSFhI3MwbSRmOydTMG07J1M7PWAxXzwlbD9BaDBtP0JZP01uMG0hVkhQUDs9YDwlbEV7IV9IVlA7PWA8JWxCdyFaSGNXIWN4YVAhYmBPcih0cnMna3N2KHR3IV4odCFeIV8pZSFfOydTKHQ7J1M7PWAqUDwlbE8odCFhSVlsaVNhUGxXIWJgIWRwT1gkcVhaJlhaWyRxW14mWF5wJHFwcSZYcXItX3JzJn1zdi1fdncvXnd4KHR4fS1ffSFPS1EhTyFQLV8hUCFRJHEhUSFeLV8hXiFfKlYhXyFhJlghYSNTLV8jUyNUMWsjVCNzLV8jcyRmJHEkZjsnUy1fOydTOz1gM1g8JWw/QWgtXz9BaD9CWSRxP0JZP01uLV8/TW5PJHEhYUtfa2lTYVBsVyFiYCFkcE9YJHFYWiZYWlskcVteJlhecCRxcHEmWHFyLV9ycyZ9c3YtX3Z3L153eCh0eCFQLV8hUCFRJHEhUSFeLV8hXiFfKlYhXyFgJlghYCFhTVMhYSNTLV8jUyNUMWsjVCNzLV8jcyRmJHEkZjsnUy1fOydTOz1gM1g8JWw/QWgtXz9BaD9CWSRxP0JZP01uLV8/TW5PJHEhVE1fWGFQIWJgIWRwIWZRT3ImWHJzJn1zdiZYd3godHghXiZYIV4hXypWIV87J1MmWDsnUzs9YCp5PCVsTyZYIWFOWiFaaVNnUWFQbFchYmAhZHBPWCRxWFomWFpbJHFbXiZYXnAkcXBxJlhxci1fcnMmfXN2LV92dy9ed3godHh9LV99IU9NeiFPIVBNeiFQIVEkcSFRIVtNeiFbIV1NeiFdIV4tXyFeIV8qViFfIWEmWCFhIWMtXyFjIX1NeiF9I1ItXyNSI1NNeiNTI1QxayNUI29NeiNvI3MtXyNzJGYkcSRmJH0tXyR9JU9NeiVPJVctXyVXJW9NeiVvJXAtXyVwJmFNeiZhJmItXyZiMXBNejFwNFVNejRVNGRNejRkNGUtXzRlJElTTXokSVMkSWAtXyRJYCRJYk16JEliJEplLV8kSmUkSmdNeiRKZyRLaC1fJEtoJSN0TXolI3QmL3gtXyYveCZFdE16JkV0JkZWLV8mRlY7J1NNejsnUzs6aiEjfDs6ajs9YDNYPCVsPyZyLV8/JnI/QWhNej9BaD9CWSRxP0JZP01uTXo/TW5PJHEhYSEkUFA7PWA8JWxNeiFSISRaWSFiYCFkcE9xKlZxciEkeXJzKFZzdipWd3gpZXghYSpWIWEhYiE0dCFiOydTKlY7J1M7PWAqczwlbE8qViFSISVRXSFiYCFkcE9yKlZycyhWc3YqVnd4KWV4fSpWfSFPISV5IU8hZipWIWYhZyEnXSFnI1cqViNXI1ghMGAjWDsnUypWOydTOz1gKnM8JWxPKlYhUiEmUVghYmAhZHBPcipWcnMoVnN2KlZ3eClleH0qVn0hTyEmbSFPOydTKlY7J1M7PWAqczwlbE8qViFSISZ2ViFiYCFkcCFlUE9yKlZycyhWc3YqVnd4KWV4OydTKlY7J1M7PWAqczwlbE8qViFSISdkWCFiYCFkcE9yKlZycyhWc3YqVnd4KWV4IXEqViFxIXIhKFAhcjsnUypWOydTOz1gKnM8JWxPKlYhUiEoV1ghYmAhZHBPcipWcnMoVnN2KlZ3eClleCFlKlYhZSFmIShzIWY7J1MqVjsnUzs9YCpzPCVsTypWIVIhKHpYIWJgIWRwT3IqVnJzKFZzdipWd3gpZXghdipWIXYhdyEpZyF3OydTKlY7J1M7PWAqczwlbE8qViFSISluWCFiYCFkcE9yKlZycyhWc3YqVnd4KWV4IXsqViF7IXwhKlohfDsnUypWOydTOz1gKnM8JWxPKlYhUiEqYlghYmAhZHBPcipWcnMoVnN2KlZ3eClleCFyKlYhciFzISp9IXM7J1MqVjsnUzs9YCpzPCVsTypWIVIhK1VYIWJgIWRwT3IqVnJzKFZzdipWd3gpZXghZypWIWchaCErcSFoOydTKlY7J1M7PWAqczwlbE8qViFSISt4WSFiYCFkcE9yIStxcnMhLGhzdiErcXZ3IS1Td3ghLlt4IWAhK3EhYCFhIS9qIWE7J1MhK3E7J1M7PWAhMFk8JWxPIStxcSEsbVYhZHBPdiEsaHZ4IS1TeCFgISxoIWAhYSEtcSFhOydTISxoOydTOz1gIS5VPCVsTyEsaFAhLVZUTyFgIS1TIWAhYSEtZiFhOydTIS1TOydTOz1gIS1rPCVsTyEtU1AhLWtPfFBQIS1uUDs9YDwlbCEtU3EhLXhTIWRwfFBPdihWeDsnUyhWOydTOz1gKGg8JWxPKFZxIS5YUDs9YDwlbCEsaGEhLmFYIWJgT3IhLltycyEtU3N2IS5bdnchLVN3IWAhLlshYCFhIS58IWE7J1MhLls7J1M7PWAhL2Q8JWxPIS5bYSEvVFQhYmB8UE9yKWVzdilldzsnUyllOydTOz1gKXk8JWxPKWVhIS9nUDs9YDwlbCEuWyFSIS9zViFiYCFkcHxQT3IqVnJzKFZzdipWd3gpZXg7J1MqVjsnUzs9YCpzPCVsTypWIVIhMF1QOz1gPCVsIStxIVIhMGdYIWJgIWRwT3IqVnJzKFZzdipWd3gpZXgjYypWI2MjZCExUyNkOydTKlY7J1M7PWAqczwlbE8qViFSITFaWCFiYCFkcE9yKlZycyhWc3YqVnd4KWV4I1YqViNWI1chMXYjVzsnUypWOydTOz1gKnM8JWxPKlYhUiExfVghYmAhZHBPcipWcnMoVnN2KlZ3eClleCNoKlYjaCNpITJqI2k7J1MqVjsnUzs9YCpzPCVsTypWIVIhMnFYIWJgIWRwT3IqVnJzKFZzdipWd3gpZXgjbSpWI20jbiEzXiNuOydTKlY7J1M7PWAqczwlbE8qViFSITNlWCFiYCFkcE9yKlZycyhWc3YqVnd4KWV4I2QqViNkI2UhNFEjZTsnUypWOydTOz1gKnM8JWxPKlYhUiE0WFghYmAhZHBPcipWcnMoVnN2KlZ3eClleCNYKlYjWCNZIStxI1k7J1MqVjsnUzs9YCpzPCVsTypWIVIhNHtZIWJgIWRwT3IhNHRycyE1a3N2ITR0dnchNlZ3eCE4XXghYSE0dCFhIWIhOl0hYjsnUyE0dDsnUzs9YCE7cjwlbE8hNHRxITVwViFkcE92ITVrdnghNlZ4IWEhNWshYSFiITdXIWI7J1MhNWs7J1M7PWAhOFY8JWxPITVrUCE2WVRPIWEhNlYhYSFiITZpIWI7J1MhNlY7J1M7PWAhN1E8JWxPITZWUCE2bFRPIWAhNlYhYCFhITZ7IWE7J1MhNlY7J1M7PWAhN1E8JWxPITZWUCE3UU95UFAhN1RQOz1gPCVsITZWcSE3XVYhZHBPdiE1a3Z4ITZWeCFgITVrIWAhYSE3ciFhOydTITVrOydTOz1gIThWPCVsTyE1a3EhN3lTIWRweVBPdihWeDsnUyhWOydTOz1gKGg8JWxPKFZxIThZUDs9YDwlbCE1a2EhOGJYIWJgT3IhOF1ycyE2VnN2IThddnchNlZ3IWEhOF0hYSFiITh9IWI7J1MhOF07J1M7PWAhOlY8JWxPIThdYSE5U1ghYmBPciE4XXJzITZWc3YhOF12dyE2VnchYCE4XSFgIWEhOW8hYTsnUyE4XTsnUzs9YCE6VjwlbE8hOF1hITl2VCFiYHlQT3IpZXN2KWV3OydTKWU7J1M7PWApeTwlbE8pZWEhOllQOz1gPCVsIThdIVIhOmRZIWJgIWRwT3IhNHRycyE1a3N2ITR0dnchNlZ3eCE4XXghYCE0dCFgIWEhO1MhYTsnUyE0dDsnUzs9YCE7cjwlbE8hNHQhUiE7XVYhYmAhZHB5UE9yKlZycyhWc3YqVnd4KWV4OydTKlY7J1M7PWAqczwlbE8qViFSITt1UDs9YDwlbCE0dCFWITxUWGpTYVAhYmAhZHBPciZYcnMmfXN2Jlh3eCh0eCFeJlghXiFfKlYhXzsnUyZYOydTOz1gKnk8JWxPJlhcIixcbiAgdG9rZW5pemVyczogW3NjcmlwdFRva2Vucywgc3R5bGVUb2tlbnMsIHRleHRhcmVhVG9rZW5zLCBlbmRUYWcsIHRhZ1N0YXJ0LCBjb21tZW50Q29udGVudCwgMCwgMSwgMiwgMywgNCwgNV0sXG4gIHRvcFJ1bGVzOiB7XCJEb2N1bWVudFwiOlswLDE2XX0sXG4gIGRpYWxlY3RzOiB7bm9NYXRjaDogMCwgc2VsZkNsb3Npbmc6IDUxNX0sXG4gIHRva2VuUHJlYzogNTE3XG59KTtcblxuZnVuY3Rpb24gZ2V0QXR0cnMob3BlblRhZywgaW5wdXQpIHtcbiAgbGV0IGF0dHJzID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgZm9yIChsZXQgYXR0IG9mIG9wZW5UYWcuZ2V0Q2hpbGRyZW4oQXR0cmlidXRlKSkge1xuICAgIGxldCBuYW1lID0gYXR0LmdldENoaWxkKEF0dHJpYnV0ZU5hbWUpLCB2YWx1ZSA9IGF0dC5nZXRDaGlsZChBdHRyaWJ1dGVWYWx1ZSkgfHwgYXR0LmdldENoaWxkKFVucXVvdGVkQXR0cmlidXRlVmFsdWUpO1xuICAgIGlmIChuYW1lKSBhdHRyc1tpbnB1dC5yZWFkKG5hbWUuZnJvbSwgbmFtZS50byldID1cbiAgICAgICF2YWx1ZSA/IFwiXCIgOiB2YWx1ZS50eXBlLmlkID09IEF0dHJpYnV0ZVZhbHVlID8gaW5wdXQucmVhZCh2YWx1ZS5mcm9tICsgMSwgdmFsdWUudG8gLSAxKSA6IGlucHV0LnJlYWQodmFsdWUuZnJvbSwgdmFsdWUudG8pO1xuICB9XG4gIHJldHVybiBhdHRyc1xufVxuXG5mdW5jdGlvbiBmaW5kVGFnTmFtZShvcGVuVGFnLCBpbnB1dCkge1xuICBsZXQgdGFnTmFtZU5vZGUgPSBvcGVuVGFnLmdldENoaWxkKFRhZ05hbWUpO1xuICByZXR1cm4gdGFnTmFtZU5vZGUgPyBpbnB1dC5yZWFkKHRhZ05hbWVOb2RlLmZyb20sIHRhZ05hbWVOb2RlLnRvKSA6IFwiIFwiXG59XG5cbmZ1bmN0aW9uIG1heWJlTmVzdChub2RlLCBpbnB1dCwgdGFncykge1xuICBsZXQgYXR0cnM7XG4gIGZvciAobGV0IHRhZyBvZiB0YWdzKSB7XG4gICAgaWYgKCF0YWcuYXR0cnMgfHwgdGFnLmF0dHJzKGF0dHJzIHx8IChhdHRycyA9IGdldEF0dHJzKG5vZGUubm9kZS5wYXJlbnQuZmlyc3RDaGlsZCwgaW5wdXQpKSkpXG4gICAgICByZXR1cm4ge3BhcnNlcjogdGFnLnBhcnNlciwgYnJhY2tldGVkOiB0cnVlfVxuICB9XG4gIHJldHVybiBudWxsXG59XG5cbi8vIHRhZ3M/OiB7XG4vLyAgIHRhZzogc3RyaW5nLFxuLy8gICBhdHRycz86ICh7W2F0dHI6IHN0cmluZ106IHN0cmluZ30pID0+IGJvb2xlYW4sXG4vLyAgIHBhcnNlcjogUGFyc2VyXG4vLyB9W11cbi8vIGF0dHJpYnV0ZXM/OiB7XG4vLyAgIG5hbWU6IHN0cmluZyxcbi8vICAgdGFnTmFtZT86IHN0cmluZyxcbi8vICAgcGFyc2VyOiBQYXJzZXJcbi8vIH1bXVxuIFxuZnVuY3Rpb24gY29uZmlndXJlTmVzdGluZyh0YWdzID0gW10sIGF0dHJpYnV0ZXMgPSBbXSkge1xuICBsZXQgc2NyaXB0ID0gW10sIHN0eWxlID0gW10sIHRleHRhcmVhID0gW10sIG90aGVyID0gW107XG4gIGZvciAobGV0IHRhZyBvZiB0YWdzKSB7XG4gICAgbGV0IGFycmF5ID0gdGFnLnRhZyA9PSBcInNjcmlwdFwiID8gc2NyaXB0IDogdGFnLnRhZyA9PSBcInN0eWxlXCIgPyBzdHlsZSA6IHRhZy50YWcgPT0gXCJ0ZXh0YXJlYVwiID8gdGV4dGFyZWEgOiBvdGhlcjtcbiAgICBhcnJheS5wdXNoKHRhZyk7XG4gIH1cbiAgbGV0IGF0dHJzID0gYXR0cmlidXRlcy5sZW5ndGggPyBPYmplY3QuY3JlYXRlKG51bGwpIDogbnVsbDtcbiAgZm9yIChsZXQgYXR0ciBvZiBhdHRyaWJ1dGVzKSAoYXR0cnNbYXR0ci5uYW1lXSB8fCAoYXR0cnNbYXR0ci5uYW1lXSA9IFtdKSkucHVzaChhdHRyKTtcblxuICByZXR1cm4gcGFyc2VNaXhlZCgobm9kZSwgaW5wdXQpID0+IHtcbiAgICBsZXQgaWQgPSBub2RlLnR5cGUuaWQ7XG4gICAgaWYgKGlkID09IFNjcmlwdFRleHQpIHJldHVybiBtYXliZU5lc3Qobm9kZSwgaW5wdXQsIHNjcmlwdClcbiAgICBpZiAoaWQgPT0gU3R5bGVUZXh0KSByZXR1cm4gbWF5YmVOZXN0KG5vZGUsIGlucHV0LCBzdHlsZSlcbiAgICBpZiAoaWQgPT0gVGV4dGFyZWFUZXh0KSByZXR1cm4gbWF5YmVOZXN0KG5vZGUsIGlucHV0LCB0ZXh0YXJlYSlcblxuICAgIGlmIChpZCA9PSBFbGVtZW50ICYmIG90aGVyLmxlbmd0aCkge1xuICAgICAgbGV0IG4gPSBub2RlLm5vZGUsIG9wZW4gPSBuLmZpcnN0Q2hpbGQsIHRhZ05hbWUgPSBvcGVuICYmIGZpbmRUYWdOYW1lKG9wZW4sIGlucHV0KSwgYXR0cnM7XG4gICAgICBpZiAodGFnTmFtZSkgZm9yIChsZXQgdGFnIG9mIG90aGVyKSB7XG4gICAgICAgIGlmICh0YWcudGFnID09IHRhZ05hbWUgJiYgKCF0YWcuYXR0cnMgfHwgdGFnLmF0dHJzKGF0dHJzIHx8IChhdHRycyA9IGdldEF0dHJzKG9wZW4sIGlucHV0KSkpKSkge1xuICAgICAgICAgIGxldCBjbG9zZSA9IG4ubGFzdENoaWxkO1xuICAgICAgICAgIGxldCB0byA9IGNsb3NlLnR5cGUuaWQgPT0gQ2xvc2VUYWcgPyBjbG9zZS5mcm9tIDogbi50bztcbiAgICAgICAgICBpZiAodG8gPiBvcGVuLnRvKVxuICAgICAgICAgICAgcmV0dXJuIHtwYXJzZXI6IHRhZy5wYXJzZXIsIG92ZXJsYXk6IFt7ZnJvbTogb3Blbi50bywgdG99XX1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChhdHRycyAmJiBpZCA9PSBBdHRyaWJ1dGUpIHtcbiAgICAgIGxldCBuID0gbm9kZS5ub2RlLCBuYW1lTm9kZTtcbiAgICAgIGlmIChuYW1lTm9kZSA9IG4uZmlyc3RDaGlsZCkge1xuICAgICAgICBsZXQgbWF0Y2hlcyA9IGF0dHJzW2lucHV0LnJlYWQobmFtZU5vZGUuZnJvbSwgbmFtZU5vZGUudG8pXTtcbiAgICAgICAgaWYgKG1hdGNoZXMpIGZvciAobGV0IGF0dHIgb2YgbWF0Y2hlcykge1xuICAgICAgICAgIGlmIChhdHRyLnRhZ05hbWUgJiYgYXR0ci50YWdOYW1lICE9IGZpbmRUYWdOYW1lKG4ucGFyZW50LCBpbnB1dCkpIGNvbnRpbnVlXG4gICAgICAgICAgbGV0IHZhbHVlID0gbi5sYXN0Q2hpbGQ7XG4gICAgICAgICAgaWYgKHZhbHVlLnR5cGUuaWQgPT0gQXR0cmlidXRlVmFsdWUpIHtcbiAgICAgICAgICAgIGxldCBmcm9tID0gdmFsdWUuZnJvbSArIDE7XG4gICAgICAgICAgICBsZXQgbGFzdCA9IHZhbHVlLmxhc3RDaGlsZCwgdG8gPSB2YWx1ZS50byAtIChsYXN0ICYmIGxhc3QuaXNFcnJvciA/IDAgOiAxKTtcbiAgICAgICAgICAgIGlmICh0byA+IGZyb20pIHJldHVybiB7cGFyc2VyOiBhdHRyLnBhcnNlciwgb3ZlcmxheTogW3tmcm9tLCB0b31dLCBicmFja2V0ZWQ6IHRydWV9XG4gICAgICAgICAgfSBlbHNlIGlmICh2YWx1ZS50eXBlLmlkID09IFVucXVvdGVkQXR0cmlidXRlVmFsdWUpIHtcbiAgICAgICAgICAgIHJldHVybiB7cGFyc2VyOiBhdHRyLnBhcnNlciwgb3ZlcmxheTogW3tmcm9tOiB2YWx1ZS5mcm9tLCB0bzogdmFsdWUudG99XX1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG51bGxcbiAgfSlcbn1cblxuZXhwb3J0IHsgY29uZmlndXJlTmVzdGluZywgcGFyc2VyIH07XG4iLAogICAgImltcG9ydCB7IHBhcnNlciwgY29uZmlndXJlTmVzdGluZyB9IGZyb20gJ0BsZXplci9odG1sJztcbmltcG9ydCB7IGNzc0xhbmd1YWdlLCBjc3MgfSBmcm9tICdAY29kZW1pcnJvci9sYW5nLWNzcyc7XG5pbXBvcnQgeyBqYXZhc2NyaXB0TGFuZ3VhZ2UsIHR5cGVzY3JpcHRMYW5ndWFnZSwganN4TGFuZ3VhZ2UsIHRzeExhbmd1YWdlLCBqYXZhc2NyaXB0IH0gZnJvbSAnQGNvZGVtaXJyb3IvbGFuZy1qYXZhc2NyaXB0JztcbmltcG9ydCB7IEVkaXRvclZpZXcgfSBmcm9tICdAY29kZW1pcnJvci92aWV3JztcbmltcG9ydCB7IEVkaXRvclNlbGVjdGlvbiB9IGZyb20gJ0Bjb2RlbWlycm9yL3N0YXRlJztcbmltcG9ydCB7IHN5bnRheFRyZWUsIExSTGFuZ3VhZ2UsIGluZGVudE5vZGVQcm9wLCBmb2xkTm9kZVByb3AsIGJyYWNrZXRNYXRjaGluZ0hhbmRsZSwgTGFuZ3VhZ2VTdXBwb3J0IH0gZnJvbSAnQGNvZGVtaXJyb3IvbGFuZ3VhZ2UnO1xuXG5jb25zdCBUYXJnZXRzID0gW1wiX2JsYW5rXCIsIFwiX3NlbGZcIiwgXCJfdG9wXCIsIFwiX3BhcmVudFwiXTtcbmNvbnN0IENoYXJzZXRzID0gW1wiYXNjaWlcIiwgXCJ1dGYtOFwiLCBcInV0Zi0xNlwiLCBcImxhdGluMVwiLCBcImxhdGluMVwiXTtcbmNvbnN0IE1ldGhvZHMgPSBbXCJnZXRcIiwgXCJwb3N0XCIsIFwicHV0XCIsIFwiZGVsZXRlXCJdO1xuY29uc3QgRW5jcyA9IFtcImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZFwiLCBcIm11bHRpcGFydC9mb3JtLWRhdGFcIiwgXCJ0ZXh0L3BsYWluXCJdO1xuY29uc3QgQm9vbCA9IFtcInRydWVcIiwgXCJmYWxzZVwiXTtcbmNvbnN0IFMgPSB7fTsgLy8gRW1wdHkgdGFnIHNwZWNcbmNvbnN0IFRhZ3MgPSB7XG4gICAgYToge1xuICAgICAgICBhdHRyczoge1xuICAgICAgICAgICAgaHJlZjogbnVsbCwgcGluZzogbnVsbCwgdHlwZTogbnVsbCxcbiAgICAgICAgICAgIG1lZGlhOiBudWxsLFxuICAgICAgICAgICAgdGFyZ2V0OiBUYXJnZXRzLFxuICAgICAgICAgICAgaHJlZmxhbmc6IG51bGxcbiAgICAgICAgfVxuICAgIH0sXG4gICAgYWJicjogUyxcbiAgICBhZGRyZXNzOiBTLFxuICAgIGFyZWE6IHtcbiAgICAgICAgYXR0cnM6IHtcbiAgICAgICAgICAgIGFsdDogbnVsbCwgY29vcmRzOiBudWxsLCBocmVmOiBudWxsLCB0YXJnZXQ6IG51bGwsIHBpbmc6IG51bGwsXG4gICAgICAgICAgICBtZWRpYTogbnVsbCwgaHJlZmxhbmc6IG51bGwsIHR5cGU6IG51bGwsXG4gICAgICAgICAgICBzaGFwZTogW1wiZGVmYXVsdFwiLCBcInJlY3RcIiwgXCJjaXJjbGVcIiwgXCJwb2x5XCJdXG4gICAgICAgIH1cbiAgICB9LFxuICAgIGFydGljbGU6IFMsXG4gICAgYXNpZGU6IFMsXG4gICAgYXVkaW86IHtcbiAgICAgICAgYXR0cnM6IHtcbiAgICAgICAgICAgIHNyYzogbnVsbCwgbWVkaWFncm91cDogbnVsbCxcbiAgICAgICAgICAgIGNyb3Nzb3JpZ2luOiBbXCJhbm9ueW1vdXNcIiwgXCJ1c2UtY3JlZGVudGlhbHNcIl0sXG4gICAgICAgICAgICBwcmVsb2FkOiBbXCJub25lXCIsIFwibWV0YWRhdGFcIiwgXCJhdXRvXCJdLFxuICAgICAgICAgICAgYXV0b3BsYXk6IFtcImF1dG9wbGF5XCJdLFxuICAgICAgICAgICAgbG9vcDogW1wibG9vcFwiXSxcbiAgICAgICAgICAgIGNvbnRyb2xzOiBbXCJjb250cm9sc1wiXVxuICAgICAgICB9XG4gICAgfSxcbiAgICBiOiBTLFxuICAgIGJhc2U6IHsgYXR0cnM6IHsgaHJlZjogbnVsbCwgdGFyZ2V0OiBUYXJnZXRzIH0gfSxcbiAgICBiZGk6IFMsXG4gICAgYmRvOiBTLFxuICAgIGJsb2NrcXVvdGU6IHsgYXR0cnM6IHsgY2l0ZTogbnVsbCB9IH0sXG4gICAgYm9keTogUyxcbiAgICBicjogUyxcbiAgICBidXR0b246IHtcbiAgICAgICAgYXR0cnM6IHtcbiAgICAgICAgICAgIGZvcm06IG51bGwsIGZvcm1hY3Rpb246IG51bGwsIG5hbWU6IG51bGwsIHZhbHVlOiBudWxsLFxuICAgICAgICAgICAgYXV0b2ZvY3VzOiBbXCJhdXRvZm9jdXNcIl0sXG4gICAgICAgICAgICBkaXNhYmxlZDogW1wiYXV0b2ZvY3VzXCJdLFxuICAgICAgICAgICAgZm9ybWVuY3R5cGU6IEVuY3MsXG4gICAgICAgICAgICBmb3JtbWV0aG9kOiBNZXRob2RzLFxuICAgICAgICAgICAgZm9ybW5vdmFsaWRhdGU6IFtcIm5vdmFsaWRhdGVcIl0sXG4gICAgICAgICAgICBmb3JtdGFyZ2V0OiBUYXJnZXRzLFxuICAgICAgICAgICAgdHlwZTogW1wic3VibWl0XCIsIFwicmVzZXRcIiwgXCJidXR0b25cIl1cbiAgICAgICAgfVxuICAgIH0sXG4gICAgY2FudmFzOiB7IGF0dHJzOiB7IHdpZHRoOiBudWxsLCBoZWlnaHQ6IG51bGwgfSB9LFxuICAgIGNhcHRpb246IFMsXG4gICAgY2VudGVyOiBTLFxuICAgIGNpdGU6IFMsXG4gICAgY29kZTogUyxcbiAgICBjb2w6IHsgYXR0cnM6IHsgc3BhbjogbnVsbCB9IH0sXG4gICAgY29sZ3JvdXA6IHsgYXR0cnM6IHsgc3BhbjogbnVsbCB9IH0sXG4gICAgY29tbWFuZDoge1xuICAgICAgICBhdHRyczoge1xuICAgICAgICAgICAgdHlwZTogW1wiY29tbWFuZFwiLCBcImNoZWNrYm94XCIsIFwicmFkaW9cIl0sXG4gICAgICAgICAgICBsYWJlbDogbnVsbCwgaWNvbjogbnVsbCwgcmFkaW9ncm91cDogbnVsbCwgY29tbWFuZDogbnVsbCwgdGl0bGU6IG51bGwsXG4gICAgICAgICAgICBkaXNhYmxlZDogW1wiZGlzYWJsZWRcIl0sXG4gICAgICAgICAgICBjaGVja2VkOiBbXCJjaGVja2VkXCJdXG4gICAgICAgIH1cbiAgICB9LFxuICAgIGRhdGE6IHsgYXR0cnM6IHsgdmFsdWU6IG51bGwgfSB9LFxuICAgIGRhdGFncmlkOiB7IGF0dHJzOiB7IGRpc2FibGVkOiBbXCJkaXNhYmxlZFwiXSwgbXVsdGlwbGU6IFtcIm11bHRpcGxlXCJdIH0gfSxcbiAgICBkYXRhbGlzdDogeyBhdHRyczogeyBkYXRhOiBudWxsIH0gfSxcbiAgICBkZDogUyxcbiAgICBkZWw6IHsgYXR0cnM6IHsgY2l0ZTogbnVsbCwgZGF0ZXRpbWU6IG51bGwgfSB9LFxuICAgIGRldGFpbHM6IHsgYXR0cnM6IHsgb3BlbjogW1wib3BlblwiXSB9IH0sXG4gICAgZGZuOiBTLFxuICAgIGRpdjogUyxcbiAgICBkbDogUyxcbiAgICBkdDogUyxcbiAgICBlbTogUyxcbiAgICBlbWJlZDogeyBhdHRyczogeyBzcmM6IG51bGwsIHR5cGU6IG51bGwsIHdpZHRoOiBudWxsLCBoZWlnaHQ6IG51bGwgfSB9LFxuICAgIGV2ZW50c291cmNlOiB7IGF0dHJzOiB7IHNyYzogbnVsbCB9IH0sXG4gICAgZmllbGRzZXQ6IHsgYXR0cnM6IHsgZGlzYWJsZWQ6IFtcImRpc2FibGVkXCJdLCBmb3JtOiBudWxsLCBuYW1lOiBudWxsIH0gfSxcbiAgICBmaWdjYXB0aW9uOiBTLFxuICAgIGZpZ3VyZTogUyxcbiAgICBmb290ZXI6IFMsXG4gICAgZm9ybToge1xuICAgICAgICBhdHRyczoge1xuICAgICAgICAgICAgYWN0aW9uOiBudWxsLCBuYW1lOiBudWxsLFxuICAgICAgICAgICAgXCJhY2NlcHQtY2hhcnNldFwiOiBDaGFyc2V0cyxcbiAgICAgICAgICAgIGF1dG9jb21wbGV0ZTogW1wib25cIiwgXCJvZmZcIl0sXG4gICAgICAgICAgICBlbmN0eXBlOiBFbmNzLFxuICAgICAgICAgICAgbWV0aG9kOiBNZXRob2RzLFxuICAgICAgICAgICAgbm92YWxpZGF0ZTogW1wibm92YWxpZGF0ZVwiXSxcbiAgICAgICAgICAgIHRhcmdldDogVGFyZ2V0c1xuICAgICAgICB9XG4gICAgfSxcbiAgICBoMTogUywgaDI6IFMsIGgzOiBTLCBoNDogUywgaDU6IFMsIGg2OiBTLFxuICAgIGhlYWQ6IHtcbiAgICAgICAgY2hpbGRyZW46IFtcInRpdGxlXCIsIFwiYmFzZVwiLCBcImxpbmtcIiwgXCJzdHlsZVwiLCBcIm1ldGFcIiwgXCJzY3JpcHRcIiwgXCJub3NjcmlwdFwiLCBcImNvbW1hbmRcIl1cbiAgICB9LFxuICAgIGhlYWRlcjogUyxcbiAgICBoZ3JvdXA6IFMsXG4gICAgaHI6IFMsXG4gICAgaHRtbDoge1xuICAgICAgICBhdHRyczogeyBtYW5pZmVzdDogbnVsbCB9XG4gICAgfSxcbiAgICBpOiBTLFxuICAgIGlmcmFtZToge1xuICAgICAgICBhdHRyczoge1xuICAgICAgICAgICAgc3JjOiBudWxsLCBzcmNkb2M6IG51bGwsIG5hbWU6IG51bGwsIHdpZHRoOiBudWxsLCBoZWlnaHQ6IG51bGwsXG4gICAgICAgICAgICBzYW5kYm94OiBbXCJhbGxvdy10b3AtbmF2aWdhdGlvblwiLCBcImFsbG93LXNhbWUtb3JpZ2luXCIsIFwiYWxsb3ctZm9ybXNcIiwgXCJhbGxvdy1zY3JpcHRzXCJdLFxuICAgICAgICAgICAgc2VhbWxlc3M6IFtcInNlYW1sZXNzXCJdXG4gICAgICAgIH1cbiAgICB9LFxuICAgIGltZzoge1xuICAgICAgICBhdHRyczoge1xuICAgICAgICAgICAgYWx0OiBudWxsLCBzcmM6IG51bGwsIGlzbWFwOiBudWxsLCB1c2VtYXA6IG51bGwsIHdpZHRoOiBudWxsLCBoZWlnaHQ6IG51bGwsXG4gICAgICAgICAgICBjcm9zc29yaWdpbjogW1wiYW5vbnltb3VzXCIsIFwidXNlLWNyZWRlbnRpYWxzXCJdXG4gICAgICAgIH1cbiAgICB9LFxuICAgIGlucHV0OiB7XG4gICAgICAgIGF0dHJzOiB7XG4gICAgICAgICAgICBhbHQ6IG51bGwsIGRpcm5hbWU6IG51bGwsIGZvcm06IG51bGwsIGZvcm1hY3Rpb246IG51bGwsXG4gICAgICAgICAgICBoZWlnaHQ6IG51bGwsIGxpc3Q6IG51bGwsIG1heDogbnVsbCwgbWF4bGVuZ3RoOiBudWxsLCBtaW46IG51bGwsXG4gICAgICAgICAgICBuYW1lOiBudWxsLCBwYXR0ZXJuOiBudWxsLCBwbGFjZWhvbGRlcjogbnVsbCwgc2l6ZTogbnVsbCwgc3JjOiBudWxsLFxuICAgICAgICAgICAgc3RlcDogbnVsbCwgdmFsdWU6IG51bGwsIHdpZHRoOiBudWxsLFxuICAgICAgICAgICAgYWNjZXB0OiBbXCJhdWRpby8qXCIsIFwidmlkZW8vKlwiLCBcImltYWdlLypcIl0sXG4gICAgICAgICAgICBhdXRvY29tcGxldGU6IFtcIm9uXCIsIFwib2ZmXCJdLFxuICAgICAgICAgICAgYXV0b2ZvY3VzOiBbXCJhdXRvZm9jdXNcIl0sXG4gICAgICAgICAgICBjaGVja2VkOiBbXCJjaGVja2VkXCJdLFxuICAgICAgICAgICAgZGlzYWJsZWQ6IFtcImRpc2FibGVkXCJdLFxuICAgICAgICAgICAgZm9ybWVuY3R5cGU6IEVuY3MsXG4gICAgICAgICAgICBmb3JtbWV0aG9kOiBNZXRob2RzLFxuICAgICAgICAgICAgZm9ybW5vdmFsaWRhdGU6IFtcIm5vdmFsaWRhdGVcIl0sXG4gICAgICAgICAgICBmb3JtdGFyZ2V0OiBUYXJnZXRzLFxuICAgICAgICAgICAgbXVsdGlwbGU6IFtcIm11bHRpcGxlXCJdLFxuICAgICAgICAgICAgcmVhZG9ubHk6IFtcInJlYWRvbmx5XCJdLFxuICAgICAgICAgICAgcmVxdWlyZWQ6IFtcInJlcXVpcmVkXCJdLFxuICAgICAgICAgICAgdHlwZTogW1wiaGlkZGVuXCIsIFwidGV4dFwiLCBcInNlYXJjaFwiLCBcInRlbFwiLCBcInVybFwiLCBcImVtYWlsXCIsIFwicGFzc3dvcmRcIiwgXCJkYXRldGltZVwiLCBcImRhdGVcIiwgXCJtb250aFwiLFxuICAgICAgICAgICAgICAgIFwid2Vla1wiLCBcInRpbWVcIiwgXCJkYXRldGltZS1sb2NhbFwiLCBcIm51bWJlclwiLCBcInJhbmdlXCIsIFwiY29sb3JcIiwgXCJjaGVja2JveFwiLCBcInJhZGlvXCIsXG4gICAgICAgICAgICAgICAgXCJmaWxlXCIsIFwic3VibWl0XCIsIFwiaW1hZ2VcIiwgXCJyZXNldFwiLCBcImJ1dHRvblwiXVxuICAgICAgICB9XG4gICAgfSxcbiAgICBpbnM6IHsgYXR0cnM6IHsgY2l0ZTogbnVsbCwgZGF0ZXRpbWU6IG51bGwgfSB9LFxuICAgIGtiZDogUyxcbiAgICBrZXlnZW46IHtcbiAgICAgICAgYXR0cnM6IHtcbiAgICAgICAgICAgIGNoYWxsZW5nZTogbnVsbCwgZm9ybTogbnVsbCwgbmFtZTogbnVsbCxcbiAgICAgICAgICAgIGF1dG9mb2N1czogW1wiYXV0b2ZvY3VzXCJdLFxuICAgICAgICAgICAgZGlzYWJsZWQ6IFtcImRpc2FibGVkXCJdLFxuICAgICAgICAgICAga2V5dHlwZTogW1wiUlNBXCJdXG4gICAgICAgIH1cbiAgICB9LFxuICAgIGxhYmVsOiB7IGF0dHJzOiB7IGZvcjogbnVsbCwgZm9ybTogbnVsbCB9IH0sXG4gICAgbGVnZW5kOiBTLFxuICAgIGxpOiB7IGF0dHJzOiB7IHZhbHVlOiBudWxsIH0gfSxcbiAgICBsaW5rOiB7XG4gICAgICAgIGF0dHJzOiB7XG4gICAgICAgICAgICBocmVmOiBudWxsLCB0eXBlOiBudWxsLFxuICAgICAgICAgICAgaHJlZmxhbmc6IG51bGwsXG4gICAgICAgICAgICBtZWRpYTogbnVsbCxcbiAgICAgICAgICAgIHNpemVzOiBbXCJhbGxcIiwgXCIxNngxNlwiLCBcIjE2eDE2IDMyeDMyXCIsIFwiMTZ4MTYgMzJ4MzIgNjR4NjRcIl1cbiAgICAgICAgfVxuICAgIH0sXG4gICAgbWFwOiB7IGF0dHJzOiB7IG5hbWU6IG51bGwgfSB9LFxuICAgIG1hcms6IFMsXG4gICAgbWVudTogeyBhdHRyczogeyBsYWJlbDogbnVsbCwgdHlwZTogW1wibGlzdFwiLCBcImNvbnRleHRcIiwgXCJ0b29sYmFyXCJdIH0gfSxcbiAgICBtZXRhOiB7XG4gICAgICAgIGF0dHJzOiB7XG4gICAgICAgICAgICBjb250ZW50OiBudWxsLFxuICAgICAgICAgICAgY2hhcnNldDogQ2hhcnNldHMsXG4gICAgICAgICAgICBuYW1lOiBbXCJ2aWV3cG9ydFwiLCBcImFwcGxpY2F0aW9uLW5hbWVcIiwgXCJhdXRob3JcIiwgXCJkZXNjcmlwdGlvblwiLCBcImdlbmVyYXRvclwiLCBcImtleXdvcmRzXCJdLFxuICAgICAgICAgICAgXCJodHRwLWVxdWl2XCI6IFtcImNvbnRlbnQtbGFuZ3VhZ2VcIiwgXCJjb250ZW50LXR5cGVcIiwgXCJkZWZhdWx0LXN0eWxlXCIsIFwicmVmcmVzaFwiXVxuICAgICAgICB9XG4gICAgfSxcbiAgICBtZXRlcjogeyBhdHRyczogeyB2YWx1ZTogbnVsbCwgbWluOiBudWxsLCBsb3c6IG51bGwsIGhpZ2g6IG51bGwsIG1heDogbnVsbCwgb3B0aW11bTogbnVsbCB9IH0sXG4gICAgbmF2OiBTLFxuICAgIG5vc2NyaXB0OiBTLFxuICAgIG9iamVjdDoge1xuICAgICAgICBhdHRyczoge1xuICAgICAgICAgICAgZGF0YTogbnVsbCwgdHlwZTogbnVsbCwgbmFtZTogbnVsbCwgdXNlbWFwOiBudWxsLCBmb3JtOiBudWxsLCB3aWR0aDogbnVsbCwgaGVpZ2h0OiBudWxsLFxuICAgICAgICAgICAgdHlwZW11c3RtYXRjaDogW1widHlwZW11c3RtYXRjaFwiXVxuICAgICAgICB9XG4gICAgfSxcbiAgICBvbDogeyBhdHRyczogeyByZXZlcnNlZDogW1wicmV2ZXJzZWRcIl0sIHN0YXJ0OiBudWxsLCB0eXBlOiBbXCIxXCIsIFwiYVwiLCBcIkFcIiwgXCJpXCIsIFwiSVwiXSB9LFxuICAgICAgICBjaGlsZHJlbjogW1wibGlcIiwgXCJzY3JpcHRcIiwgXCJ0ZW1wbGF0ZVwiLCBcInVsXCIsIFwib2xcIl0gfSxcbiAgICBvcHRncm91cDogeyBhdHRyczogeyBkaXNhYmxlZDogW1wiZGlzYWJsZWRcIl0sIGxhYmVsOiBudWxsIH0gfSxcbiAgICBvcHRpb246IHsgYXR0cnM6IHsgZGlzYWJsZWQ6IFtcImRpc2FibGVkXCJdLCBsYWJlbDogbnVsbCwgc2VsZWN0ZWQ6IFtcInNlbGVjdGVkXCJdLCB2YWx1ZTogbnVsbCB9IH0sXG4gICAgb3V0cHV0OiB7IGF0dHJzOiB7IGZvcjogbnVsbCwgZm9ybTogbnVsbCwgbmFtZTogbnVsbCB9IH0sXG4gICAgcDogUyxcbiAgICBwYXJhbTogeyBhdHRyczogeyBuYW1lOiBudWxsLCB2YWx1ZTogbnVsbCB9IH0sXG4gICAgcHJlOiBTLFxuICAgIHByb2dyZXNzOiB7IGF0dHJzOiB7IHZhbHVlOiBudWxsLCBtYXg6IG51bGwgfSB9LFxuICAgIHE6IHsgYXR0cnM6IHsgY2l0ZTogbnVsbCB9IH0sXG4gICAgcnA6IFMsXG4gICAgcnQ6IFMsXG4gICAgcnVieTogUyxcbiAgICBzYW1wOiBTLFxuICAgIHNjcmlwdDoge1xuICAgICAgICBhdHRyczoge1xuICAgICAgICAgICAgdHlwZTogW1widGV4dC9qYXZhc2NyaXB0XCJdLFxuICAgICAgICAgICAgc3JjOiBudWxsLFxuICAgICAgICAgICAgYXN5bmM6IFtcImFzeW5jXCJdLFxuICAgICAgICAgICAgZGVmZXI6IFtcImRlZmVyXCJdLFxuICAgICAgICAgICAgY2hhcnNldDogQ2hhcnNldHNcbiAgICAgICAgfVxuICAgIH0sXG4gICAgc2VjdGlvbjogUyxcbiAgICBzZWxlY3Q6IHtcbiAgICAgICAgYXR0cnM6IHtcbiAgICAgICAgICAgIGZvcm06IG51bGwsIG5hbWU6IG51bGwsIHNpemU6IG51bGwsXG4gICAgICAgICAgICBhdXRvZm9jdXM6IFtcImF1dG9mb2N1c1wiXSxcbiAgICAgICAgICAgIGRpc2FibGVkOiBbXCJkaXNhYmxlZFwiXSxcbiAgICAgICAgICAgIG11bHRpcGxlOiBbXCJtdWx0aXBsZVwiXVxuICAgICAgICB9XG4gICAgfSxcbiAgICBzbG90OiB7IGF0dHJzOiB7IG5hbWU6IG51bGwgfSB9LFxuICAgIHNtYWxsOiBTLFxuICAgIHNvdXJjZTogeyBhdHRyczogeyBzcmM6IG51bGwsIHR5cGU6IG51bGwsIG1lZGlhOiBudWxsIH0gfSxcbiAgICBzcGFuOiBTLFxuICAgIHN0cm9uZzogUyxcbiAgICBzdHlsZToge1xuICAgICAgICBhdHRyczoge1xuICAgICAgICAgICAgdHlwZTogW1widGV4dC9jc3NcIl0sXG4gICAgICAgICAgICBtZWRpYTogbnVsbCxcbiAgICAgICAgICAgIHNjb3BlZDogbnVsbFxuICAgICAgICB9XG4gICAgfSxcbiAgICBzdWI6IFMsXG4gICAgc3VtbWFyeTogUyxcbiAgICBzdXA6IFMsXG4gICAgdGFibGU6IFMsXG4gICAgdGJvZHk6IFMsXG4gICAgdGQ6IHsgYXR0cnM6IHsgY29sc3BhbjogbnVsbCwgcm93c3BhbjogbnVsbCwgaGVhZGVyczogbnVsbCB9IH0sXG4gICAgdGVtcGxhdGU6IFMsXG4gICAgdGV4dGFyZWE6IHtcbiAgICAgICAgYXR0cnM6IHtcbiAgICAgICAgICAgIGRpcm5hbWU6IG51bGwsIGZvcm06IG51bGwsIG1heGxlbmd0aDogbnVsbCwgbmFtZTogbnVsbCwgcGxhY2Vob2xkZXI6IG51bGwsXG4gICAgICAgICAgICByb3dzOiBudWxsLCBjb2xzOiBudWxsLFxuICAgICAgICAgICAgYXV0b2ZvY3VzOiBbXCJhdXRvZm9jdXNcIl0sXG4gICAgICAgICAgICBkaXNhYmxlZDogW1wiZGlzYWJsZWRcIl0sXG4gICAgICAgICAgICByZWFkb25seTogW1wicmVhZG9ubHlcIl0sXG4gICAgICAgICAgICByZXF1aXJlZDogW1wicmVxdWlyZWRcIl0sXG4gICAgICAgICAgICB3cmFwOiBbXCJzb2Z0XCIsIFwiaGFyZFwiXVxuICAgICAgICB9XG4gICAgfSxcbiAgICB0Zm9vdDogUyxcbiAgICB0aDogeyBhdHRyczogeyBjb2xzcGFuOiBudWxsLCByb3dzcGFuOiBudWxsLCBoZWFkZXJzOiBudWxsLCBzY29wZTogW1wicm93XCIsIFwiY29sXCIsIFwicm93Z3JvdXBcIiwgXCJjb2xncm91cFwiXSB9IH0sXG4gICAgdGhlYWQ6IFMsXG4gICAgdGltZTogeyBhdHRyczogeyBkYXRldGltZTogbnVsbCB9IH0sXG4gICAgdGl0bGU6IFMsXG4gICAgdHI6IFMsXG4gICAgdHJhY2s6IHtcbiAgICAgICAgYXR0cnM6IHtcbiAgICAgICAgICAgIHNyYzogbnVsbCwgbGFiZWw6IG51bGwsIGRlZmF1bHQ6IG51bGwsXG4gICAgICAgICAgICBraW5kOiBbXCJzdWJ0aXRsZXNcIiwgXCJjYXB0aW9uc1wiLCBcImRlc2NyaXB0aW9uc1wiLCBcImNoYXB0ZXJzXCIsIFwibWV0YWRhdGFcIl0sXG4gICAgICAgICAgICBzcmNsYW5nOiBudWxsXG4gICAgICAgIH1cbiAgICB9LFxuICAgIHVsOiB7IGNoaWxkcmVuOiBbXCJsaVwiLCBcInNjcmlwdFwiLCBcInRlbXBsYXRlXCIsIFwidWxcIiwgXCJvbFwiXSB9LFxuICAgIHZhcjogUyxcbiAgICB2aWRlbzoge1xuICAgICAgICBhdHRyczoge1xuICAgICAgICAgICAgc3JjOiBudWxsLCBwb3N0ZXI6IG51bGwsIHdpZHRoOiBudWxsLCBoZWlnaHQ6IG51bGwsXG4gICAgICAgICAgICBjcm9zc29yaWdpbjogW1wiYW5vbnltb3VzXCIsIFwidXNlLWNyZWRlbnRpYWxzXCJdLFxuICAgICAgICAgICAgcHJlbG9hZDogW1wiYXV0b1wiLCBcIm1ldGFkYXRhXCIsIFwibm9uZVwiXSxcbiAgICAgICAgICAgIGF1dG9wbGF5OiBbXCJhdXRvcGxheVwiXSxcbiAgICAgICAgICAgIG1lZGlhZ3JvdXA6IFtcIm1vdmllXCJdLFxuICAgICAgICAgICAgbXV0ZWQ6IFtcIm11dGVkXCJdLFxuICAgICAgICAgICAgY29udHJvbHM6IFtcImNvbnRyb2xzXCJdXG4gICAgICAgIH1cbiAgICB9LFxuICAgIHdicjogU1xufTtcbmNvbnN0IEdsb2JhbEF0dHJzID0ge1xuICAgIGFjY2Vzc2tleTogbnVsbCxcbiAgICBjbGFzczogbnVsbCxcbiAgICBjb250ZW50ZWRpdGFibGU6IEJvb2wsXG4gICAgY29udGV4dG1lbnU6IG51bGwsXG4gICAgZGlyOiBbXCJsdHJcIiwgXCJydGxcIiwgXCJhdXRvXCJdLFxuICAgIGRyYWdnYWJsZTogW1widHJ1ZVwiLCBcImZhbHNlXCIsIFwiYXV0b1wiXSxcbiAgICBkcm9wem9uZTogW1wiY29weVwiLCBcIm1vdmVcIiwgXCJsaW5rXCIsIFwic3RyaW5nOlwiLCBcImZpbGU6XCJdLFxuICAgIGhpZGRlbjogW1wiaGlkZGVuXCJdLFxuICAgIGlkOiBudWxsLFxuICAgIGluZXJ0OiBbXCJpbmVydFwiXSxcbiAgICBpdGVtaWQ6IG51bGwsXG4gICAgaXRlbXByb3A6IG51bGwsXG4gICAgaXRlbXJlZjogbnVsbCxcbiAgICBpdGVtc2NvcGU6IFtcIml0ZW1zY29wZVwiXSxcbiAgICBpdGVtdHlwZTogbnVsbCxcbiAgICBsYW5nOiBbXCJhclwiLCBcImJuXCIsIFwiZGVcIiwgXCJlbi1HQlwiLCBcImVuLVVTXCIsIFwiZXNcIiwgXCJmclwiLCBcImhpXCIsIFwiaWRcIiwgXCJqYVwiLCBcInBhXCIsIFwicHRcIiwgXCJydVwiLCBcInRyXCIsIFwiemhcIl0sXG4gICAgc3BlbGxjaGVjazogQm9vbCxcbiAgICBhdXRvY29ycmVjdDogQm9vbCxcbiAgICBhdXRvY2FwaXRhbGl6ZTogQm9vbCxcbiAgICBzdHlsZTogbnVsbCxcbiAgICB0YWJpbmRleDogbnVsbCxcbiAgICB0aXRsZTogbnVsbCxcbiAgICB0cmFuc2xhdGU6IFtcInllc1wiLCBcIm5vXCJdLFxuICAgIHJlbDogW1wic3R5bGVzaGVldFwiLCBcImFsdGVybmF0ZVwiLCBcImF1dGhvclwiLCBcImJvb2ttYXJrXCIsIFwiaGVscFwiLCBcImxpY2Vuc2VcIiwgXCJuZXh0XCIsIFwibm9mb2xsb3dcIiwgXCJub3JlZmVycmVyXCIsIFwicHJlZmV0Y2hcIiwgXCJwcmV2XCIsIFwic2VhcmNoXCIsIFwidGFnXCJdLFxuICAgIHJvbGU6IC8qQF9fUFVSRV9fKi9cImFsZXJ0IGFwcGxpY2F0aW9uIGFydGljbGUgYmFubmVyIGJ1dHRvbiBjZWxsIGNoZWNrYm94IGNvbXBsZW1lbnRhcnkgY29udGVudGluZm8gZGlhbG9nIGRvY3VtZW50IGZlZWQgZmlndXJlIGZvcm0gZ3JpZCBncmlkY2VsbCBoZWFkaW5nIGltZyBsaXN0IGxpc3Rib3ggbGlzdGl0ZW0gbWFpbiBuYXZpZ2F0aW9uIHJlZ2lvbiByb3cgcm93Z3JvdXAgc2VhcmNoIHN3aXRjaCB0YWIgdGFibGUgdGFicGFuZWwgdGV4dGJveCB0aW1lclwiLnNwbGl0KFwiIFwiKSxcbiAgICBcImFyaWEtYWN0aXZlZGVzY2VuZGFudFwiOiBudWxsLFxuICAgIFwiYXJpYS1hdG9taWNcIjogQm9vbCxcbiAgICBcImFyaWEtYXV0b2NvbXBsZXRlXCI6IFtcImlubGluZVwiLCBcImxpc3RcIiwgXCJib3RoXCIsIFwibm9uZVwiXSxcbiAgICBcImFyaWEtYnVzeVwiOiBCb29sLFxuICAgIFwiYXJpYS1jaGVja2VkXCI6IFtcInRydWVcIiwgXCJmYWxzZVwiLCBcIm1peGVkXCIsIFwidW5kZWZpbmVkXCJdLFxuICAgIFwiYXJpYS1jb250cm9sc1wiOiBudWxsLFxuICAgIFwiYXJpYS1kZXNjcmliZWRieVwiOiBudWxsLFxuICAgIFwiYXJpYS1kaXNhYmxlZFwiOiBCb29sLFxuICAgIFwiYXJpYS1kcm9wZWZmZWN0XCI6IG51bGwsXG4gICAgXCJhcmlhLWV4cGFuZGVkXCI6IFtcInRydWVcIiwgXCJmYWxzZVwiLCBcInVuZGVmaW5lZFwiXSxcbiAgICBcImFyaWEtZmxvd3RvXCI6IG51bGwsXG4gICAgXCJhcmlhLWdyYWJiZWRcIjogW1widHJ1ZVwiLCBcImZhbHNlXCIsIFwidW5kZWZpbmVkXCJdLFxuICAgIFwiYXJpYS1oYXNwb3B1cFwiOiBCb29sLFxuICAgIFwiYXJpYS1oaWRkZW5cIjogQm9vbCxcbiAgICBcImFyaWEtaW52YWxpZFwiOiBbXCJ0cnVlXCIsIFwiZmFsc2VcIiwgXCJncmFtbWFyXCIsIFwic3BlbGxpbmdcIl0sXG4gICAgXCJhcmlhLWxhYmVsXCI6IG51bGwsXG4gICAgXCJhcmlhLWxhYmVsbGVkYnlcIjogbnVsbCxcbiAgICBcImFyaWEtbGV2ZWxcIjogbnVsbCxcbiAgICBcImFyaWEtbGl2ZVwiOiBbXCJvZmZcIiwgXCJwb2xpdGVcIiwgXCJhc3NlcnRpdmVcIl0sXG4gICAgXCJhcmlhLW11bHRpbGluZVwiOiBCb29sLFxuICAgIFwiYXJpYS1tdWx0aXNlbGVjdGFibGVcIjogQm9vbCxcbiAgICBcImFyaWEtb3duc1wiOiBudWxsLFxuICAgIFwiYXJpYS1wb3NpbnNldFwiOiBudWxsLFxuICAgIFwiYXJpYS1wcmVzc2VkXCI6IFtcInRydWVcIiwgXCJmYWxzZVwiLCBcIm1peGVkXCIsIFwidW5kZWZpbmVkXCJdLFxuICAgIFwiYXJpYS1yZWFkb25seVwiOiBCb29sLFxuICAgIFwiYXJpYS1yZWxldmFudFwiOiBudWxsLFxuICAgIFwiYXJpYS1yZXF1aXJlZFwiOiBCb29sLFxuICAgIFwiYXJpYS1zZWxlY3RlZFwiOiBbXCJ0cnVlXCIsIFwiZmFsc2VcIiwgXCJ1bmRlZmluZWRcIl0sXG4gICAgXCJhcmlhLXNldHNpemVcIjogbnVsbCxcbiAgICBcImFyaWEtc29ydFwiOiBbXCJhc2NlbmRpbmdcIiwgXCJkZXNjZW5kaW5nXCIsIFwibm9uZVwiLCBcIm90aGVyXCJdLFxuICAgIFwiYXJpYS12YWx1ZW1heFwiOiBudWxsLFxuICAgIFwiYXJpYS12YWx1ZW1pblwiOiBudWxsLFxuICAgIFwiYXJpYS12YWx1ZW5vd1wiOiBudWxsLFxuICAgIFwiYXJpYS12YWx1ZXRleHRcIjogbnVsbFxufTtcbmNvbnN0IGV2ZW50QXR0cmlidXRlcyA9IC8qQF9fUFVSRV9fKi8oXCJiZWZvcmV1bmxvYWQgY29weSBjdXQgZHJhZ3N0YXJ0IGRyYWdvdmVyIGRyYWdsZWF2ZSBkcmFnZW50ZXIgZHJhZ2VuZCBcIiArXG4gICAgXCJkcmFnIHBhc3RlIGZvY3VzIGJsdXIgY2hhbmdlIGNsaWNrIGxvYWQgbW91c2Vkb3duIG1vdXNlZW50ZXIgbW91c2VsZWF2ZSBcIiArXG4gICAgXCJtb3VzZXVwIGtleWRvd24ga2V5dXAgcmVzaXplIHNjcm9sbCB1bmxvYWRcIikuc3BsaXQoXCIgXCIpLm1hcChuID0+IFwib25cIiArIG4pO1xuZm9yIChsZXQgYSBvZiBldmVudEF0dHJpYnV0ZXMpXG4gICAgR2xvYmFsQXR0cnNbYV0gPSBudWxsO1xuY2xhc3MgU2NoZW1hIHtcbiAgICBjb25zdHJ1Y3RvcihleHRyYVRhZ3MsIGV4dHJhQXR0cnMpIHtcbiAgICAgICAgdGhpcy50YWdzID0geyAuLi5UYWdzLCAuLi5leHRyYVRhZ3MgfTtcbiAgICAgICAgdGhpcy5nbG9iYWxBdHRycyA9IHsgLi4uR2xvYmFsQXR0cnMsIC4uLmV4dHJhQXR0cnMgfTtcbiAgICAgICAgdGhpcy5hbGxUYWdzID0gT2JqZWN0LmtleXModGhpcy50YWdzKTtcbiAgICAgICAgdGhpcy5nbG9iYWxBdHRyTmFtZXMgPSBPYmplY3Qua2V5cyh0aGlzLmdsb2JhbEF0dHJzKTtcbiAgICB9XG59XG5TY2hlbWEuZGVmYXVsdCA9IC8qQF9fUFVSRV9fKi9uZXcgU2NoZW1hO1xuZnVuY3Rpb24gZWxlbWVudE5hbWUoZG9jLCB0cmVlLCBtYXggPSBkb2MubGVuZ3RoKSB7XG4gICAgaWYgKCF0cmVlKVxuICAgICAgICByZXR1cm4gXCJcIjtcbiAgICBsZXQgdGFnID0gdHJlZS5maXJzdENoaWxkO1xuICAgIGxldCBuYW1lID0gdGFnICYmIHRhZy5nZXRDaGlsZChcIlRhZ05hbWVcIik7XG4gICAgcmV0dXJuIG5hbWUgPyBkb2Muc2xpY2VTdHJpbmcobmFtZS5mcm9tLCBNYXRoLm1pbihuYW1lLnRvLCBtYXgpKSA6IFwiXCI7XG59XG5mdW5jdGlvbiBmaW5kUGFyZW50RWxlbWVudCh0cmVlLCBza2lwID0gZmFsc2UpIHtcbiAgICBmb3IgKDsgdHJlZTsgdHJlZSA9IHRyZWUucGFyZW50KVxuICAgICAgICBpZiAodHJlZS5uYW1lID09IFwiRWxlbWVudFwiKSB7XG4gICAgICAgICAgICBpZiAoc2tpcClcbiAgICAgICAgICAgICAgICBza2lwID0gZmFsc2U7XG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRyZWU7XG4gICAgICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbn1cbmZ1bmN0aW9uIGFsbG93ZWRDaGlsZHJlbihkb2MsIHRyZWUsIHNjaGVtYSkge1xuICAgIGxldCBwYXJlbnRJbmZvID0gc2NoZW1hLnRhZ3NbZWxlbWVudE5hbWUoZG9jLCBmaW5kUGFyZW50RWxlbWVudCh0cmVlKSldO1xuICAgIHJldHVybiAocGFyZW50SW5mbyA9PT0gbnVsbCB8fCBwYXJlbnRJbmZvID09PSB2b2lkIDAgPyB2b2lkIDAgOiBwYXJlbnRJbmZvLmNoaWxkcmVuKSB8fCBzY2hlbWEuYWxsVGFncztcbn1cbmZ1bmN0aW9uIG9wZW5UYWdzKGRvYywgdHJlZSkge1xuICAgIGxldCBvcGVuID0gW107XG4gICAgZm9yIChsZXQgcGFyZW50ID0gZmluZFBhcmVudEVsZW1lbnQodHJlZSk7IHBhcmVudCAmJiAhcGFyZW50LnR5cGUuaXNUb3A7IHBhcmVudCA9IGZpbmRQYXJlbnRFbGVtZW50KHBhcmVudC5wYXJlbnQpKSB7XG4gICAgICAgIGxldCB0YWdOYW1lID0gZWxlbWVudE5hbWUoZG9jLCBwYXJlbnQpO1xuICAgICAgICBpZiAodGFnTmFtZSAmJiBwYXJlbnQubGFzdENoaWxkLm5hbWUgPT0gXCJDbG9zZVRhZ1wiKVxuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGlmICh0YWdOYW1lICYmIG9wZW4uaW5kZXhPZih0YWdOYW1lKSA8IDAgJiYgKHRyZWUubmFtZSA9PSBcIkVuZFRhZ1wiIHx8IHRyZWUuZnJvbSA+PSBwYXJlbnQuZmlyc3RDaGlsZC50bykpXG4gICAgICAgICAgICBvcGVuLnB1c2godGFnTmFtZSk7XG4gICAgfVxuICAgIHJldHVybiBvcGVuO1xufVxuY29uc3QgaWRlbnRpZmllciA9IC9eWzpcXC1cXC5cXHdcXHUwMGI3LVxcdWZmZmZdKiQvO1xuZnVuY3Rpb24gY29tcGxldGVUYWcoc3RhdGUsIHNjaGVtYSwgdHJlZSwgZnJvbSwgdG8pIHtcbiAgICBsZXQgZW5kID0gL1xccyo+Ly50ZXN0KHN0YXRlLnNsaWNlRG9jKHRvLCB0byArIDUpKSA/IFwiXCIgOiBcIj5cIjtcbiAgICBsZXQgcGFyZW50ID0gZmluZFBhcmVudEVsZW1lbnQodHJlZSwgdHJlZS5uYW1lID09IFwiU3RhcnRUYWdcIiB8fCB0cmVlLm5hbWUgPT0gXCJUYWdOYW1lXCIpO1xuICAgIHJldHVybiB7IGZyb20sIHRvLFxuICAgICAgICBvcHRpb25zOiBhbGxvd2VkQ2hpbGRyZW4oc3RhdGUuZG9jLCBwYXJlbnQsIHNjaGVtYSkubWFwKHRhZ05hbWUgPT4gKHsgbGFiZWw6IHRhZ05hbWUsIHR5cGU6IFwidHlwZVwiIH0pKS5jb25jYXQob3BlblRhZ3Moc3RhdGUuZG9jLCB0cmVlKS5tYXAoKHRhZywgaSkgPT4gKHsgbGFiZWw6IFwiL1wiICsgdGFnLCBhcHBseTogXCIvXCIgKyB0YWcgKyBlbmQsXG4gICAgICAgICAgICB0eXBlOiBcInR5cGVcIiwgYm9vc3Q6IDk5IC0gaSB9KSkpLFxuICAgICAgICB2YWxpZEZvcjogL15cXC8/WzpcXC1cXC5cXHdcXHUwMGI3LVxcdWZmZmZdKiQvIH07XG59XG5mdW5jdGlvbiBjb21wbGV0ZUNsb3NlVGFnKHN0YXRlLCB0cmVlLCBmcm9tLCB0bykge1xuICAgIGxldCBlbmQgPSAvXFxzKj4vLnRlc3Qoc3RhdGUuc2xpY2VEb2ModG8sIHRvICsgNSkpID8gXCJcIiA6IFwiPlwiO1xuICAgIHJldHVybiB7IGZyb20sIHRvLFxuICAgICAgICBvcHRpb25zOiBvcGVuVGFncyhzdGF0ZS5kb2MsIHRyZWUpLm1hcCgodGFnLCBpKSA9PiAoeyBsYWJlbDogdGFnLCBhcHBseTogdGFnICsgZW5kLCB0eXBlOiBcInR5cGVcIiwgYm9vc3Q6IDk5IC0gaSB9KSksXG4gICAgICAgIHZhbGlkRm9yOiBpZGVudGlmaWVyIH07XG59XG5mdW5jdGlvbiBjb21wbGV0ZVN0YXJ0VGFnKHN0YXRlLCBzY2hlbWEsIHRyZWUsIHBvcykge1xuICAgIGxldCBvcHRpb25zID0gW10sIGxldmVsID0gMDtcbiAgICBmb3IgKGxldCB0YWdOYW1lIG9mIGFsbG93ZWRDaGlsZHJlbihzdGF0ZS5kb2MsIHRyZWUsIHNjaGVtYSkpXG4gICAgICAgIG9wdGlvbnMucHVzaCh7IGxhYmVsOiBcIjxcIiArIHRhZ05hbWUsIHR5cGU6IFwidHlwZVwiIH0pO1xuICAgIGZvciAobGV0IG9wZW4gb2Ygb3BlblRhZ3Moc3RhdGUuZG9jLCB0cmVlKSlcbiAgICAgICAgb3B0aW9ucy5wdXNoKHsgbGFiZWw6IFwiPC9cIiArIG9wZW4gKyBcIj5cIiwgdHlwZTogXCJ0eXBlXCIsIGJvb3N0OiA5OSAtIGxldmVsKysgfSk7XG4gICAgcmV0dXJuIHsgZnJvbTogcG9zLCB0bzogcG9zLCBvcHRpb25zLCB2YWxpZEZvcjogL148XFwvP1s6XFwtXFwuXFx3XFx1MDBiNy1cXHVmZmZmXSokLyB9O1xufVxuZnVuY3Rpb24gY29tcGxldGVBdHRyTmFtZShzdGF0ZSwgc2NoZW1hLCB0cmVlLCBmcm9tLCB0bykge1xuICAgIGxldCBlbHQgPSBmaW5kUGFyZW50RWxlbWVudCh0cmVlKSwgaW5mbyA9IGVsdCA/IHNjaGVtYS50YWdzW2VsZW1lbnROYW1lKHN0YXRlLmRvYywgZWx0KV0gOiBudWxsO1xuICAgIGxldCBsb2NhbEF0dHJzID0gaW5mbyAmJiBpbmZvLmF0dHJzID8gT2JqZWN0LmtleXMoaW5mby5hdHRycykgOiBbXTtcbiAgICBsZXQgbmFtZXMgPSBpbmZvICYmIGluZm8uZ2xvYmFsQXR0cnMgPT09IGZhbHNlID8gbG9jYWxBdHRyc1xuICAgICAgICA6IGxvY2FsQXR0cnMubGVuZ3RoID8gbG9jYWxBdHRycy5jb25jYXQoc2NoZW1hLmdsb2JhbEF0dHJOYW1lcykgOiBzY2hlbWEuZ2xvYmFsQXR0ck5hbWVzO1xuICAgIHJldHVybiB7IGZyb20sIHRvLFxuICAgICAgICBvcHRpb25zOiBuYW1lcy5tYXAoYXR0ck5hbWUgPT4gKHsgbGFiZWw6IGF0dHJOYW1lLCB0eXBlOiBcInByb3BlcnR5XCIgfSkpLFxuICAgICAgICB2YWxpZEZvcjogaWRlbnRpZmllciB9O1xufVxuZnVuY3Rpb24gY29tcGxldGVBdHRyVmFsdWUoc3RhdGUsIHNjaGVtYSwgdHJlZSwgZnJvbSwgdG8pIHtcbiAgICB2YXIgX2E7XG4gICAgbGV0IG5hbWVOb2RlID0gKF9hID0gdHJlZS5wYXJlbnQpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5nZXRDaGlsZChcIkF0dHJpYnV0ZU5hbWVcIik7XG4gICAgbGV0IG9wdGlvbnMgPSBbXSwgdG9rZW4gPSB1bmRlZmluZWQ7XG4gICAgaWYgKG5hbWVOb2RlKSB7XG4gICAgICAgIGxldCBhdHRyTmFtZSA9IHN0YXRlLnNsaWNlRG9jKG5hbWVOb2RlLmZyb20sIG5hbWVOb2RlLnRvKTtcbiAgICAgICAgbGV0IGF0dHJzID0gc2NoZW1hLmdsb2JhbEF0dHJzW2F0dHJOYW1lXTtcbiAgICAgICAgaWYgKCFhdHRycykge1xuICAgICAgICAgICAgbGV0IGVsdCA9IGZpbmRQYXJlbnRFbGVtZW50KHRyZWUpLCBpbmZvID0gZWx0ID8gc2NoZW1hLnRhZ3NbZWxlbWVudE5hbWUoc3RhdGUuZG9jLCBlbHQpXSA6IG51bGw7XG4gICAgICAgICAgICBhdHRycyA9IChpbmZvID09PSBudWxsIHx8IGluZm8gPT09IHZvaWQgMCA/IHZvaWQgMCA6IGluZm8uYXR0cnMpICYmIGluZm8uYXR0cnNbYXR0ck5hbWVdO1xuICAgICAgICB9XG4gICAgICAgIGlmIChhdHRycykge1xuICAgICAgICAgICAgbGV0IGJhc2UgPSBzdGF0ZS5zbGljZURvYyhmcm9tLCB0bykudG9Mb3dlckNhc2UoKSwgcXVvdGVTdGFydCA9ICdcIicsIHF1b3RlRW5kID0gJ1wiJztcbiAgICAgICAgICAgIGlmICgvXlsnXCJdLy50ZXN0KGJhc2UpKSB7XG4gICAgICAgICAgICAgICAgdG9rZW4gPSBiYXNlWzBdID09ICdcIicgPyAvXlteXCJdKiQvIDogL15bXiddKiQvO1xuICAgICAgICAgICAgICAgIHF1b3RlU3RhcnQgPSBcIlwiO1xuICAgICAgICAgICAgICAgIHF1b3RlRW5kID0gc3RhdGUuc2xpY2VEb2ModG8sIHRvICsgMSkgPT0gYmFzZVswXSA/IFwiXCIgOiBiYXNlWzBdO1xuICAgICAgICAgICAgICAgIGJhc2UgPSBiYXNlLnNsaWNlKDEpO1xuICAgICAgICAgICAgICAgIGZyb20rKztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRva2VuID0gL15bXlxcczw+PSdcIl0qJC87XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmb3IgKGxldCB2YWx1ZSBvZiBhdHRycylcbiAgICAgICAgICAgICAgICBvcHRpb25zLnB1c2goeyBsYWJlbDogdmFsdWUsIGFwcGx5OiBxdW90ZVN0YXJ0ICsgdmFsdWUgKyBxdW90ZUVuZCwgdHlwZTogXCJjb25zdGFudFwiIH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiB7IGZyb20sIHRvLCBvcHRpb25zLCB2YWxpZEZvcjogdG9rZW4gfTtcbn1cbmZ1bmN0aW9uIGh0bWxDb21wbGV0aW9uRm9yKHNjaGVtYSwgY29udGV4dCkge1xuICAgIGxldCB7IHN0YXRlLCBwb3MgfSA9IGNvbnRleHQsIHRyZWUgPSBzeW50YXhUcmVlKHN0YXRlKS5yZXNvbHZlSW5uZXIocG9zLCAtMSksIGFyb3VuZCA9IHRyZWUucmVzb2x2ZShwb3MpO1xuICAgIGZvciAobGV0IHNjYW4gPSBwb3MsIGJlZm9yZTsgYXJvdW5kID09IHRyZWUgJiYgKGJlZm9yZSA9IHRyZWUuY2hpbGRCZWZvcmUoc2NhbikpOykge1xuICAgICAgICBsZXQgbGFzdCA9IGJlZm9yZS5sYXN0Q2hpbGQ7XG4gICAgICAgIGlmICghbGFzdCB8fCAhbGFzdC50eXBlLmlzRXJyb3IgfHwgbGFzdC5mcm9tIDwgbGFzdC50bylcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBhcm91bmQgPSB0cmVlID0gYmVmb3JlO1xuICAgICAgICBzY2FuID0gbGFzdC5mcm9tO1xuICAgIH1cbiAgICBpZiAodHJlZS5uYW1lID09IFwiVGFnTmFtZVwiKSB7XG4gICAgICAgIHJldHVybiB0cmVlLnBhcmVudCAmJiAvQ2xvc2VUYWckLy50ZXN0KHRyZWUucGFyZW50Lm5hbWUpID8gY29tcGxldGVDbG9zZVRhZyhzdGF0ZSwgdHJlZSwgdHJlZS5mcm9tLCBwb3MpXG4gICAgICAgICAgICA6IGNvbXBsZXRlVGFnKHN0YXRlLCBzY2hlbWEsIHRyZWUsIHRyZWUuZnJvbSwgcG9zKTtcbiAgICB9XG4gICAgZWxzZSBpZiAodHJlZS5uYW1lID09IFwiU3RhcnRUYWdcIiB8fCB0cmVlLm5hbWUgPT0gXCJJbmNvbXBsZXRlVGFnXCIpIHtcbiAgICAgICAgcmV0dXJuIGNvbXBsZXRlVGFnKHN0YXRlLCBzY2hlbWEsIHRyZWUsIHBvcywgcG9zKTtcbiAgICB9XG4gICAgZWxzZSBpZiAodHJlZS5uYW1lID09IFwiU3RhcnRDbG9zZVRhZ1wiIHx8IHRyZWUubmFtZSA9PSBcIkluY29tcGxldGVDbG9zZVRhZ1wiKSB7XG4gICAgICAgIHJldHVybiBjb21wbGV0ZUNsb3NlVGFnKHN0YXRlLCB0cmVlLCBwb3MsIHBvcyk7XG4gICAgfVxuICAgIGVsc2UgaWYgKHRyZWUubmFtZSA9PSBcIk9wZW5UYWdcIiB8fCB0cmVlLm5hbWUgPT0gXCJTZWxmQ2xvc2luZ1RhZ1wiIHx8IHRyZWUubmFtZSA9PSBcIkF0dHJpYnV0ZU5hbWVcIikge1xuICAgICAgICByZXR1cm4gY29tcGxldGVBdHRyTmFtZShzdGF0ZSwgc2NoZW1hLCB0cmVlLCB0cmVlLm5hbWUgPT0gXCJBdHRyaWJ1dGVOYW1lXCIgPyB0cmVlLmZyb20gOiBwb3MsIHBvcyk7XG4gICAgfVxuICAgIGVsc2UgaWYgKHRyZWUubmFtZSA9PSBcIklzXCIgfHwgdHJlZS5uYW1lID09IFwiQXR0cmlidXRlVmFsdWVcIiB8fCB0cmVlLm5hbWUgPT0gXCJVbnF1b3RlZEF0dHJpYnV0ZVZhbHVlXCIpIHtcbiAgICAgICAgcmV0dXJuIGNvbXBsZXRlQXR0clZhbHVlKHN0YXRlLCBzY2hlbWEsIHRyZWUsIHRyZWUubmFtZSA9PSBcIklzXCIgPyBwb3MgOiB0cmVlLmZyb20sIHBvcyk7XG4gICAgfVxuICAgIGVsc2UgaWYgKGNvbnRleHQuZXhwbGljaXQgJiYgKGFyb3VuZC5uYW1lID09IFwiRWxlbWVudFwiIHx8IGFyb3VuZC5uYW1lID09IFwiVGV4dFwiIHx8IGFyb3VuZC5uYW1lID09IFwiRG9jdW1lbnRcIikpIHtcbiAgICAgICAgcmV0dXJuIGNvbXBsZXRlU3RhcnRUYWcoc3RhdGUsIHNjaGVtYSwgdHJlZSwgcG9zKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbn1cbi8qKlxuSFRNTCB0YWcgY29tcGxldGlvbi4gT3BlbnMgYW5kIGNsb3NlcyB0YWdzIGFuZCBhdHRyaWJ1dGVzIGluIGFcbmNvbnRleHQtYXdhcmUgd2F5LlxuKi9cbmZ1bmN0aW9uIGh0bWxDb21wbGV0aW9uU291cmNlKGNvbnRleHQpIHtcbiAgICByZXR1cm4gaHRtbENvbXBsZXRpb25Gb3IoU2NoZW1hLmRlZmF1bHQsIGNvbnRleHQpO1xufVxuLyoqXG5DcmVhdGUgYSBjb21wbGV0aW9uIHNvdXJjZSBmb3IgSFRNTCBleHRlbmRlZCB3aXRoIGFkZGl0aW9uYWwgdGFnc1xub3IgYXR0cmlidXRlcy5cbiovXG5mdW5jdGlvbiBodG1sQ29tcGxldGlvblNvdXJjZVdpdGgoY29uZmlnKSB7XG4gICAgbGV0IHsgZXh0cmFUYWdzLCBleHRyYUdsb2JhbEF0dHJpYnV0ZXM6IGV4dHJhQXR0cnMgfSA9IGNvbmZpZztcbiAgICBsZXQgc2NoZW1hID0gZXh0cmFBdHRycyB8fCBleHRyYVRhZ3MgPyBuZXcgU2NoZW1hKGV4dHJhVGFncywgZXh0cmFBdHRycykgOiBTY2hlbWEuZGVmYXVsdDtcbiAgICByZXR1cm4gKGNvbnRleHQpID0+IGh0bWxDb21wbGV0aW9uRm9yKHNjaGVtYSwgY29udGV4dCk7XG59XG5cbmNvbnN0IGpzb25QYXJzZXIgPSAvKkBfX1BVUkVfXyovamF2YXNjcmlwdExhbmd1YWdlLnBhcnNlci5jb25maWd1cmUoeyB0b3A6IFwiU2luZ2xlRXhwcmVzc2lvblwiIH0pO1xuY29uc3QgZGVmYXVsdE5lc3RpbmcgPSBbXG4gICAgeyB0YWc6IFwic2NyaXB0XCIsXG4gICAgICAgIGF0dHJzOiBhdHRycyA9PiBhdHRycy50eXBlID09IFwidGV4dC90eXBlc2NyaXB0XCIgfHwgYXR0cnMubGFuZyA9PSBcInRzXCIsXG4gICAgICAgIHBhcnNlcjogdHlwZXNjcmlwdExhbmd1YWdlLnBhcnNlciB9LFxuICAgIHsgdGFnOiBcInNjcmlwdFwiLFxuICAgICAgICBhdHRyczogYXR0cnMgPT4gYXR0cnMudHlwZSA9PSBcInRleHQvYmFiZWxcIiB8fCBhdHRycy50eXBlID09IFwidGV4dC9qc3hcIixcbiAgICAgICAgcGFyc2VyOiBqc3hMYW5ndWFnZS5wYXJzZXIgfSxcbiAgICB7IHRhZzogXCJzY3JpcHRcIixcbiAgICAgICAgYXR0cnM6IGF0dHJzID0+IGF0dHJzLnR5cGUgPT0gXCJ0ZXh0L3R5cGVzY3JpcHQtanN4XCIsXG4gICAgICAgIHBhcnNlcjogdHN4TGFuZ3VhZ2UucGFyc2VyIH0sXG4gICAgeyB0YWc6IFwic2NyaXB0XCIsXG4gICAgICAgIGF0dHJzKGF0dHJzKSB7XG4gICAgICAgICAgICByZXR1cm4gL14oaW1wb3J0bWFwfHNwZWN1bGF0aW9ucnVsZXN8YXBwbGljYXRpb25cXC8oLitcXCspP2pzb24pJC9pLnRlc3QoYXR0cnMudHlwZSk7XG4gICAgICAgIH0sXG4gICAgICAgIHBhcnNlcjoganNvblBhcnNlciB9LFxuICAgIHsgdGFnOiBcInNjcmlwdFwiLFxuICAgICAgICBhdHRycyhhdHRycykge1xuICAgICAgICAgICAgcmV0dXJuICFhdHRycy50eXBlIHx8IC9eKD86dGV4dHxhcHBsaWNhdGlvbilcXC8oPzp4LSk/KD86amF2YXxlY21hKXNjcmlwdCR8Xm1vZHVsZSR8XiQvaS50ZXN0KGF0dHJzLnR5cGUpO1xuICAgICAgICB9LFxuICAgICAgICBwYXJzZXI6IGphdmFzY3JpcHRMYW5ndWFnZS5wYXJzZXIgfSxcbiAgICB7IHRhZzogXCJzdHlsZVwiLFxuICAgICAgICBhdHRycyhhdHRycykge1xuICAgICAgICAgICAgcmV0dXJuICghYXR0cnMubGFuZyB8fCBhdHRycy5sYW5nID09IFwiY3NzXCIpICYmICghYXR0cnMudHlwZSB8fCAvXih0ZXh0XFwvKT8oeC0pPyhzdHlsZXNoZWV0fGNzcykkL2kudGVzdChhdHRycy50eXBlKSk7XG4gICAgICAgIH0sXG4gICAgICAgIHBhcnNlcjogY3NzTGFuZ3VhZ2UucGFyc2VyIH1cbl07XG5jb25zdCBkZWZhdWx0QXR0cnMgPSAvKkBfX1BVUkVfXyovW1xuICAgIHsgbmFtZTogXCJzdHlsZVwiLFxuICAgICAgICBwYXJzZXI6IC8qQF9fUFVSRV9fKi9jc3NMYW5ndWFnZS5wYXJzZXIuY29uZmlndXJlKHsgdG9wOiBcIlN0eWxlc1wiIH0pIH1cbl0uY29uY2F0KC8qQF9fUFVSRV9fKi9ldmVudEF0dHJpYnV0ZXMubWFwKG5hbWUgPT4gKHsgbmFtZSwgcGFyc2VyOiBqYXZhc2NyaXB0TGFuZ3VhZ2UucGFyc2VyIH0pKSk7XG5jb25zdCBodG1sUGxhaW4gPSAvKkBfX1BVUkVfXyovTFJMYW5ndWFnZS5kZWZpbmUoe1xuICAgIG5hbWU6IFwiaHRtbFwiLFxuICAgIHBhcnNlcjogLypAX19QVVJFX18qL3BhcnNlci5jb25maWd1cmUoe1xuICAgICAgICBwcm9wczogW1xuICAgICAgICAgICAgLypAX19QVVJFX18qL2luZGVudE5vZGVQcm9wLmFkZCh7XG4gICAgICAgICAgICAgICAgRWxlbWVudChjb250ZXh0KSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBhZnRlciA9IC9eKFxccyopKDxcXC8pPy8uZXhlYyhjb250ZXh0LnRleHRBZnRlcik7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjb250ZXh0Lm5vZGUudG8gPD0gY29udGV4dC5wb3MgKyBhZnRlclswXS5sZW5ndGgpXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gY29udGV4dC5jb250aW51ZSgpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gY29udGV4dC5saW5lSW5kZW50KGNvbnRleHQubm9kZS5mcm9tKSArIChhZnRlclsyXSA/IDAgOiBjb250ZXh0LnVuaXQpO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgXCJPcGVuVGFnIENsb3NlVGFnIFNlbGZDbG9zaW5nVGFnXCIoY29udGV4dCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gY29udGV4dC5jb2x1bW4oY29udGV4dC5ub2RlLmZyb20pICsgY29udGV4dC51bml0O1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgRG9jdW1lbnQoY29udGV4dCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoY29udGV4dC5wb3MgKyAvXFxzKi8uZXhlYyhjb250ZXh0LnRleHRBZnRlcilbMF0ubGVuZ3RoIDwgY29udGV4dC5ub2RlLnRvKVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNvbnRleHQuY29udGludWUoKTtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGVuZEVsdCA9IG51bGwsIGNsb3NlO1xuICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBjdXIgPSBjb250ZXh0Lm5vZGU7Oykge1xuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGxhc3QgPSBjdXIubGFzdENoaWxkO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFsYXN0IHx8IGxhc3QubmFtZSAhPSBcIkVsZW1lbnRcIiB8fCBsYXN0LnRvICE9IGN1ci50bylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGVuZEVsdCA9IGN1ciA9IGxhc3Q7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKGVuZEVsdCAmJiAhKChjbG9zZSA9IGVuZEVsdC5sYXN0Q2hpbGQpICYmIChjbG9zZS5uYW1lID09IFwiQ2xvc2VUYWdcIiB8fCBjbG9zZS5uYW1lID09IFwiU2VsZkNsb3NpbmdUYWdcIikpKVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNvbnRleHQubGluZUluZGVudChlbmRFbHQuZnJvbSkgKyBjb250ZXh0LnVuaXQ7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgLypAX19QVVJFX18qL2ZvbGROb2RlUHJvcC5hZGQoe1xuICAgICAgICAgICAgICAgIEVsZW1lbnQobm9kZSkge1xuICAgICAgICAgICAgICAgICAgICBsZXQgZmlyc3QgPSBub2RlLmZpcnN0Q2hpbGQsIGxhc3QgPSBub2RlLmxhc3RDaGlsZDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFmaXJzdCB8fCBmaXJzdC5uYW1lICE9IFwiT3BlblRhZ1wiKVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB7IGZyb206IGZpcnN0LnRvLCB0bzogbGFzdC5uYW1lID09IFwiQ2xvc2VUYWdcIiA/IGxhc3QuZnJvbSA6IG5vZGUudG8gfTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KSxcbiAgICAgICAgICAgIC8qQF9fUFVSRV9fKi9icmFja2V0TWF0Y2hpbmdIYW5kbGUuYWRkKHtcbiAgICAgICAgICAgICAgICBcIk9wZW5UYWcgQ2xvc2VUYWdcIjogbm9kZSA9PiBub2RlLmdldENoaWxkKFwiVGFnTmFtZVwiKVxuICAgICAgICAgICAgfSlcbiAgICAgICAgXVxuICAgIH0pLFxuICAgIGxhbmd1YWdlRGF0YToge1xuICAgICAgICBjb21tZW50VG9rZW5zOiB7IGJsb2NrOiB7IG9wZW46IFwiPCEtLVwiLCBjbG9zZTogXCItLT5cIiB9IH0sXG4gICAgICAgIGluZGVudE9uSW5wdXQ6IC9eXFxzKjxcXC9cXHcrXFxXJC8sXG4gICAgICAgIHdvcmRDaGFyczogXCItX1wiXG4gICAgfVxufSk7XG4vKipcbkEgbGFuZ3VhZ2UgcHJvdmlkZXIgYmFzZWQgb24gdGhlIFtMZXplciBIVE1MXG5wYXJzZXJdKGh0dHBzOi8vZ2l0aHViLmNvbS9sZXplci1wYXJzZXIvaHRtbCksIGV4dGVuZGVkIHdpdGggdGhlXG5KYXZhU2NyaXB0IGFuZCBDU1MgcGFyc2VycyB0byBwYXJzZSB0aGUgY29udGVudCBvZiBgPHNjcmlwdD5gIGFuZFxuYDxzdHlsZT5gIHRhZ3MuXG4qL1xuY29uc3QgaHRtbExhbmd1YWdlID0gLypAX19QVVJFX18qL2h0bWxQbGFpbi5jb25maWd1cmUoe1xuICAgIHdyYXA6IC8qQF9fUFVSRV9fKi9jb25maWd1cmVOZXN0aW5nKGRlZmF1bHROZXN0aW5nLCBkZWZhdWx0QXR0cnMpXG59KTtcbi8qKlxuTGFuZ3VhZ2Ugc3VwcG9ydCBmb3IgSFRNTCwgaW5jbHVkaW5nXG5bYGh0bWxDb21wbGV0aW9uYF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNsYW5nLWh0bWwuaHRtbENvbXBsZXRpb24pIGFuZCBKYXZhU2NyaXB0IGFuZFxuQ1NTIHN1cHBvcnQgZXh0ZW5zaW9ucy5cbiovXG5mdW5jdGlvbiBodG1sKGNvbmZpZyA9IHt9KSB7XG4gICAgbGV0IGRpYWxlY3QgPSBcIlwiLCB3cmFwO1xuICAgIGlmIChjb25maWcubWF0Y2hDbG9zaW5nVGFncyA9PT0gZmFsc2UpXG4gICAgICAgIGRpYWxlY3QgPSBcIm5vTWF0Y2hcIjtcbiAgICBpZiAoY29uZmlnLnNlbGZDbG9zaW5nVGFncyA9PT0gdHJ1ZSlcbiAgICAgICAgZGlhbGVjdCA9IChkaWFsZWN0ID8gZGlhbGVjdCArIFwiIFwiIDogXCJcIikgKyBcInNlbGZDbG9zaW5nXCI7XG4gICAgaWYgKGNvbmZpZy5uZXN0ZWRMYW5ndWFnZXMgJiYgY29uZmlnLm5lc3RlZExhbmd1YWdlcy5sZW5ndGggfHxcbiAgICAgICAgY29uZmlnLm5lc3RlZEF0dHJpYnV0ZXMgJiYgY29uZmlnLm5lc3RlZEF0dHJpYnV0ZXMubGVuZ3RoKVxuICAgICAgICB3cmFwID0gY29uZmlndXJlTmVzdGluZygoY29uZmlnLm5lc3RlZExhbmd1YWdlcyB8fCBbXSkuY29uY2F0KGRlZmF1bHROZXN0aW5nKSwgKGNvbmZpZy5uZXN0ZWRBdHRyaWJ1dGVzIHx8IFtdKS5jb25jYXQoZGVmYXVsdEF0dHJzKSk7XG4gICAgbGV0IGxhbmcgPSB3cmFwID8gaHRtbFBsYWluLmNvbmZpZ3VyZSh7IHdyYXAsIGRpYWxlY3QgfSkgOiBkaWFsZWN0ID8gaHRtbExhbmd1YWdlLmNvbmZpZ3VyZSh7IGRpYWxlY3QgfSkgOiBodG1sTGFuZ3VhZ2U7XG4gICAgcmV0dXJuIG5ldyBMYW5ndWFnZVN1cHBvcnQobGFuZywgW1xuICAgICAgICBodG1sTGFuZ3VhZ2UuZGF0YS5vZih7IGF1dG9jb21wbGV0ZTogaHRtbENvbXBsZXRpb25Tb3VyY2VXaXRoKGNvbmZpZykgfSksXG4gICAgICAgIGNvbmZpZy5hdXRvQ2xvc2VUYWdzICE9PSBmYWxzZSA/IGF1dG9DbG9zZVRhZ3MgOiBbXSxcbiAgICAgICAgamF2YXNjcmlwdCgpLnN1cHBvcnQsXG4gICAgICAgIGNzcygpLnN1cHBvcnRcbiAgICBdKTtcbn1cbmNvbnN0IHNlbGZDbG9zZXJzID0gLypAX19QVVJFX18qL25ldyBTZXQoLypAX19QVVJFX18qL1wiYXJlYSBiYXNlIGJyIGNvbCBjb21tYW5kIGVtYmVkIGZyYW1lIGhyIGltZyBpbnB1dCBrZXlnZW4gbGluayBtZXRhIHBhcmFtIHNvdXJjZSB0cmFjayB3YnIgbWVudWl0ZW1cIi5zcGxpdChcIiBcIikpO1xuLyoqXG5FeHRlbnNpb24gdGhhdCB3aWxsIGF1dG9tYXRpY2FsbHkgaW5zZXJ0IGNsb3NlIHRhZ3Mgd2hlbiBhIGA+YCBvclxuYC9gIGlzIHR5cGVkLlxuKi9cbmNvbnN0IGF1dG9DbG9zZVRhZ3MgPSAvKkBfX1BVUkVfXyovRWRpdG9yVmlldy5pbnB1dEhhbmRsZXIub2YoKHZpZXcsIGZyb20sIHRvLCB0ZXh0LCBpbnNlcnRUcmFuc2FjdGlvbikgPT4ge1xuICAgIGlmICh2aWV3LmNvbXBvc2luZyB8fCB2aWV3LnN0YXRlLnJlYWRPbmx5IHx8IGZyb20gIT0gdG8gfHwgKHRleHQgIT0gXCI+XCIgJiYgdGV4dCAhPSBcIi9cIikgfHxcbiAgICAgICAgIWh0bWxMYW5ndWFnZS5pc0FjdGl2ZUF0KHZpZXcuc3RhdGUsIGZyb20sIC0xKSlcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIGxldCBiYXNlID0gaW5zZXJ0VHJhbnNhY3Rpb24oKSwgeyBzdGF0ZSB9ID0gYmFzZTtcbiAgICBsZXQgY2xvc2VUYWdzID0gc3RhdGUuY2hhbmdlQnlSYW5nZShyYW5nZSA9PiB7XG4gICAgICAgIHZhciBfYSwgX2IsIF9jO1xuICAgICAgICBsZXQgZGlkVHlwZSA9IHN0YXRlLmRvYy5zbGljZVN0cmluZyhyYW5nZS5mcm9tIC0gMSwgcmFuZ2UudG8pID09IHRleHQ7XG4gICAgICAgIGxldCB7IGhlYWQgfSA9IHJhbmdlLCBhZnRlciA9IHN5bnRheFRyZWUoc3RhdGUpLnJlc29sdmVJbm5lcihoZWFkLCAtMSksIG5hbWU7XG4gICAgICAgIGlmIChkaWRUeXBlICYmIHRleHQgPT0gXCI+XCIgJiYgYWZ0ZXIubmFtZSA9PSBcIkVuZFRhZ1wiKSB7XG4gICAgICAgICAgICBsZXQgdGFnID0gYWZ0ZXIucGFyZW50O1xuICAgICAgICAgICAgaWYgKCgoX2IgPSAoX2EgPSB0YWcucGFyZW50KSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EubGFzdENoaWxkKSA9PT0gbnVsbCB8fCBfYiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2IubmFtZSkgIT0gXCJDbG9zZVRhZ1wiICYmXG4gICAgICAgICAgICAgICAgKG5hbWUgPSBlbGVtZW50TmFtZShzdGF0ZS5kb2MsIHRhZy5wYXJlbnQsIGhlYWQpKSAmJlxuICAgICAgICAgICAgICAgICFzZWxmQ2xvc2Vycy5oYXMobmFtZSkpIHtcbiAgICAgICAgICAgICAgICBsZXQgdG8gPSBoZWFkICsgKHN0YXRlLmRvYy5zbGljZVN0cmluZyhoZWFkLCBoZWFkICsgMSkgPT09IFwiPlwiID8gMSA6IDApO1xuICAgICAgICAgICAgICAgIGxldCBpbnNlcnQgPSBgPC8ke25hbWV9PmA7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHsgcmFuZ2UsIGNoYW5nZXM6IHsgZnJvbTogaGVhZCwgdG8sIGluc2VydCB9IH07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoZGlkVHlwZSAmJiB0ZXh0ID09IFwiL1wiICYmIGFmdGVyLm5hbWUgPT0gXCJJbmNvbXBsZXRlQ2xvc2VUYWdcIikge1xuICAgICAgICAgICAgbGV0IHRhZyA9IGFmdGVyLnBhcmVudDtcbiAgICAgICAgICAgIGlmIChhZnRlci5mcm9tID09IGhlYWQgLSAyICYmICgoX2MgPSB0YWcubGFzdENoaWxkKSA9PT0gbnVsbCB8fCBfYyA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2MubmFtZSkgIT0gXCJDbG9zZVRhZ1wiICYmXG4gICAgICAgICAgICAgICAgKG5hbWUgPSBlbGVtZW50TmFtZShzdGF0ZS5kb2MsIHRhZywgaGVhZCkpICYmICFzZWxmQ2xvc2Vycy5oYXMobmFtZSkpIHtcbiAgICAgICAgICAgICAgICBsZXQgdG8gPSBoZWFkICsgKHN0YXRlLmRvYy5zbGljZVN0cmluZyhoZWFkLCBoZWFkICsgMSkgPT09IFwiPlwiID8gMSA6IDApO1xuICAgICAgICAgICAgICAgIGxldCBpbnNlcnQgPSBgJHtuYW1lfT5gO1xuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIHJhbmdlOiBFZGl0b3JTZWxlY3Rpb24uY3Vyc29yKGhlYWQgKyBpbnNlcnQubGVuZ3RoLCAtMSksXG4gICAgICAgICAgICAgICAgICAgIGNoYW5nZXM6IHsgZnJvbTogaGVhZCwgdG8sIGluc2VydCB9XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4geyByYW5nZSB9O1xuICAgIH0pO1xuICAgIGlmIChjbG9zZVRhZ3MuY2hhbmdlcy5lbXB0eSlcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIHZpZXcuZGlzcGF0Y2goW1xuICAgICAgICBiYXNlLFxuICAgICAgICBzdGF0ZS51cGRhdGUoY2xvc2VUYWdzLCB7XG4gICAgICAgICAgICB1c2VyRXZlbnQ6IFwiaW5wdXQuY29tcGxldGVcIixcbiAgICAgICAgICAgIHNjcm9sbEludG9WaWV3OiB0cnVlXG4gICAgICAgIH0pXG4gICAgXSk7XG4gICAgcmV0dXJuIHRydWU7XG59KTtcblxuZXhwb3J0IHsgYXV0b0Nsb3NlVGFncywgaHRtbCwgaHRtbENvbXBsZXRpb25Tb3VyY2UsIGh0bWxDb21wbGV0aW9uU291cmNlV2l0aCwgaHRtbExhbmd1YWdlIH07XG4iLAogICAgImltcG9ydCB7IExSUGFyc2VyIH0gZnJvbSAnQGxlemVyL2xyJztcbmltcG9ydCB7IHN0eWxlVGFncywgdGFncyB9IGZyb20gJ0BsZXplci9oaWdobGlnaHQnO1xuXG5jb25zdCBqc29uSGlnaGxpZ2h0aW5nID0gc3R5bGVUYWdzKHtcbiAgU3RyaW5nOiB0YWdzLnN0cmluZyxcbiAgTnVtYmVyOiB0YWdzLm51bWJlcixcbiAgXCJUcnVlIEZhbHNlXCI6IHRhZ3MuYm9vbCxcbiAgUHJvcGVydHlOYW1lOiB0YWdzLnByb3BlcnR5TmFtZSxcbiAgTnVsbDogdGFncy5udWxsLFxuICBcIiwgOlwiOiB0YWdzLnNlcGFyYXRvcixcbiAgXCJbIF1cIjogdGFncy5zcXVhcmVCcmFja2V0LFxuICBcInsgfVwiOiB0YWdzLmJyYWNlXG59KTtcblxuLy8gVGhpcyBmaWxlIHdhcyBnZW5lcmF0ZWQgYnkgbGV6ZXItZ2VuZXJhdG9yLiBZb3UgcHJvYmFibHkgc2hvdWxkbid0IGVkaXQgaXQuXG5jb25zdCBwYXJzZXIgPSBMUlBhcnNlci5kZXNlcmlhbGl6ZSh7XG4gIHZlcnNpb246IDE0LFxuICBzdGF0ZXM6IFwiJGJPVlFQT09PT1FPJyNDYicjQ2JPblFQTycjQ2VPdlFQTycjQ2xPT1FPJyNDcicjQ3JRT1FQT09PT1FPJyNDZycjQ2dPfVFQTycjQ2ZPIVNRUE8nI0N0T09RTyw1OVAsNTlQTyFbUVBPLDU5UE8hYVFQTycjQ3VPT1FPLDU5Vyw1OVdPIWlRUE8sNTlXT1ZRUE8sNTlRT3FRUE8nI0NtTyFuUVBPLDU5YE9PUU8xRy5rMUcua09WUVBPJyNDbk8hdlFQTyw1OWFPT1FPMUcucjFHLnJPT1FPMUcubDFHLmxPT1FPLDU5WCw1OVhPT1FPLUU2ay1FNmtPT1FPLDU5WSw1OVlPT1FPLUU2bC1FNmxcIixcbiAgc3RhdGVEYXRhOiBcIiNPfk9lT1N+T1FTT1JTT1NTT1RTT1dRT19ST2dQT35PVlhPZ1VPfk9eW09+UFZPW15Pfk9dX09WaFh+T1ZhT35PXWJPXmlYfk9eZE9+T11fT1ZoYX5PXWJPXmlhfk9cIixcbiAgZ290bzogXCIha2pQUFBQUFBrUFBrcXdQUFBQa3shUlBQUCFYUCFlIWhYU09SXmJRV1FSZl9UVlFfUWBXUmdgUWNaUmljUVRPUVpSUWVeUmhiUllRUl1SXCIsXG4gIG5vZGVOYW1lczogXCLimqAgSnNvblRleHQgVHJ1ZSBGYWxzZSBOdWxsIE51bWJlciBTdHJpbmcgfSB7IE9iamVjdCBQcm9wZXJ0eSBQcm9wZXJ0eU5hbWUgOiAsIF0gWyBBcnJheVwiLFxuICBtYXhUZXJtOiAyNSxcbiAgbm9kZVByb3BzOiBbXG4gICAgW1wiaXNvbGF0ZVwiLCAtMiw2LDExLFwiXCJdLFxuICAgIFtcIm9wZW5lZEJ5XCIsIDcsXCJ7XCIsMTQsXCJbXCJdLFxuICAgIFtcImNsb3NlZEJ5XCIsIDgsXCJ9XCIsMTUsXCJdXCJdXG4gIF0sXG4gIHByb3BTb3VyY2VzOiBbanNvbkhpZ2hsaWdodGluZ10sXG4gIHNraXBwZWROb2RlczogWzBdLFxuICByZXBlYXROb2RlQ291bnQ6IDIsXG4gIHRva2VuRGF0YTogXCIofH5SYVhZIVdZWiFXXV4hV3BxIVdycyFdfH0kdX0hTyR6IVEhUiVUIVIhWyZjIVshXSZ0IX0jTyZ5I1AjUSdPI1kjWidUI2IjYydyI2gjaShaI28jcChyI3Ejcih3fiFdT2V+fiFgV3BxIV1xciFdcnMheHMjTyFdI08jUCF9I1A7J1MhXTsnUzs9YCRvPCVsTyFdfiF9T2d+fiNRWHJzIV0hUCFRIV0jTyNQIV0jVSNWIV0jWSNaIV0jYiNjIV0jZiNnIV0jaCNpIV0jaSNqI21+I3BSIVEhWyN5IWMhaSN5I1QjWiN5fiN8UiFRIVskViFjIWkkViNUI1okVn4kWVIhUSFbJGMhYyFpJGMjVCNaJGN+JGZSIVEhWyFdIWMhaSFdI1QjWiFdfiRyUDs9YDwlbCFdfiR6T11+fiR9USFRIVIlVCFSIVsmY34lWVJUfiFPIVAlYyFnIWgldyNYI1kld34lZlAhUSFbJWl+JW5SVH4hUSFbJWkhZyFoJXcjWCNZJXd+JXpSe3wmVH0hTyZUIVEhWyZafiZXUCFRIVsmWn4mYFBUfiFRIVsmWn4maFNUfiFPIVAlYyFRIVsmYyFnIWgldyNYI1kld34meU9bfn4nT09ffn4nVE9efn4nV1AjVCNVJ1p+J15QI2AjYSdhfidkUCNnI2gnZ34nalAjWCNZJ21+J3JPUn5+J3VQI2kjaid4fid7UCNgI2EoT34oUlAjYCNhKFV+KFpPU35+KF5QI2YjZyhhfihkUCNpI2ooZ34oalAjWCNZKG1+KHJPUX5+KHdPV35+KHxPVn5cIixcbiAgdG9rZW5pemVyczogWzBdLFxuICB0b3BSdWxlczoge1wiSnNvblRleHRcIjpbMCwxXX0sXG4gIHRva2VuUHJlYzogMFxufSk7XG5cbmV4cG9ydCB7IHBhcnNlciB9O1xuIiwKICAgICJpbXBvcnQgeyBwYXJzZXIgfSBmcm9tICdAbGV6ZXIvanNvbic7XG5pbXBvcnQgeyBMUkxhbmd1YWdlLCBpbmRlbnROb2RlUHJvcCwgY29udGludWVkSW5kZW50LCBmb2xkTm9kZVByb3AsIGZvbGRJbnNpZGUsIExhbmd1YWdlU3VwcG9ydCB9IGZyb20gJ0Bjb2RlbWlycm9yL2xhbmd1YWdlJztcblxuLyoqXG5DYWxsc1xuW2BKU09OLnBhcnNlYF0oaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvSmF2YVNjcmlwdC9SZWZlcmVuY2UvR2xvYmFsX09iamVjdHMvSlNPTi9wYXJzZSlcbm9uIHRoZSBkb2N1bWVudCBhbmQsIGlmIHRoYXQgdGhyb3dzIGFuIGVycm9yLCByZXBvcnRzIGl0IGFzIGFcbnNpbmdsZSBkaWFnbm9zdGljLlxuKi9cbmNvbnN0IGpzb25QYXJzZUxpbnRlciA9ICgpID0+ICh2aWV3KSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgICAgSlNPTi5wYXJzZSh2aWV3LnN0YXRlLmRvYy50b1N0cmluZygpKTtcbiAgICB9XG4gICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgaWYgKCEoZSBpbnN0YW5jZW9mIFN5bnRheEVycm9yKSlcbiAgICAgICAgICAgIHRocm93IGU7XG4gICAgICAgIGNvbnN0IHBvcyA9IGdldEVycm9yUG9zaXRpb24oZSwgdmlldy5zdGF0ZS5kb2MpO1xuICAgICAgICByZXR1cm4gW3tcbiAgICAgICAgICAgICAgICBmcm9tOiBwb3MsXG4gICAgICAgICAgICAgICAgbWVzc2FnZTogZS5tZXNzYWdlLFxuICAgICAgICAgICAgICAgIHNldmVyaXR5OiAnZXJyb3InLFxuICAgICAgICAgICAgICAgIHRvOiBwb3NcbiAgICAgICAgICAgIH1dO1xuICAgIH1cbiAgICByZXR1cm4gW107XG59O1xuZnVuY3Rpb24gZ2V0RXJyb3JQb3NpdGlvbihlcnJvciwgZG9jKSB7XG4gICAgbGV0IG07XG4gICAgaWYgKG0gPSBlcnJvci5tZXNzYWdlLm1hdGNoKC9hdCBwb3NpdGlvbiAoXFxkKykvKSlcbiAgICAgICAgcmV0dXJuIE1hdGgubWluKCttWzFdLCBkb2MubGVuZ3RoKTtcbiAgICBpZiAobSA9IGVycm9yLm1lc3NhZ2UubWF0Y2goL2F0IGxpbmUgKFxcZCspIGNvbHVtbiAoXFxkKykvKSlcbiAgICAgICAgcmV0dXJuIE1hdGgubWluKGRvYy5saW5lKCttWzFdKS5mcm9tICsgKCttWzJdKSAtIDEsIGRvYy5sZW5ndGgpO1xuICAgIHJldHVybiAwO1xufVxuXG4vKipcbkEgbGFuZ3VhZ2UgcHJvdmlkZXIgdGhhdCBwcm92aWRlcyBKU09OIHBhcnNpbmcuXG4qL1xuY29uc3QganNvbkxhbmd1YWdlID0gLypAX19QVVJFX18qL0xSTGFuZ3VhZ2UuZGVmaW5lKHtcbiAgICBuYW1lOiBcImpzb25cIixcbiAgICBwYXJzZXI6IC8qQF9fUFVSRV9fKi9wYXJzZXIuY29uZmlndXJlKHtcbiAgICAgICAgcHJvcHM6IFtcbiAgICAgICAgICAgIC8qQF9fUFVSRV9fKi9pbmRlbnROb2RlUHJvcC5hZGQoe1xuICAgICAgICAgICAgICAgIE9iamVjdDogLypAX19QVVJFX18qL2NvbnRpbnVlZEluZGVudCh7IGV4Y2VwdDogL15cXHMqXFx9LyB9KSxcbiAgICAgICAgICAgICAgICBBcnJheTogLypAX19QVVJFX18qL2NvbnRpbnVlZEluZGVudCh7IGV4Y2VwdDogL15cXHMqXFxdLyB9KVxuICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAvKkBfX1BVUkVfXyovZm9sZE5vZGVQcm9wLmFkZCh7XG4gICAgICAgICAgICAgICAgXCJPYmplY3QgQXJyYXlcIjogZm9sZEluc2lkZVxuICAgICAgICAgICAgfSlcbiAgICAgICAgXVxuICAgIH0pLFxuICAgIGxhbmd1YWdlRGF0YToge1xuICAgICAgICBjbG9zZUJyYWNrZXRzOiB7IGJyYWNrZXRzOiBbXCJbXCIsIFwie1wiLCAnXCInXSB9LFxuICAgICAgICBpbmRlbnRPbklucHV0OiAvXlxccypbXFx9XFxdXSQvXG4gICAgfVxufSk7XG4vKipcbkpTT04gbGFuZ3VhZ2Ugc3VwcG9ydC5cbiovXG5mdW5jdGlvbiBqc29uKCkge1xuICAgIHJldHVybiBuZXcgTGFuZ3VhZ2VTdXBwb3J0KGpzb25MYW5ndWFnZSk7XG59XG5cbmV4cG9ydCB7IGpzb24sIGpzb25MYW5ndWFnZSwganNvblBhcnNlTGludGVyIH07XG4iLAogICAgImltcG9ydCB7IE5vZGVUeXBlLCBOb2RlUHJvcCwgTm9kZVNldCwgVHJlZSwgUGFyc2VyLCBwYXJzZU1peGVkIH0gZnJvbSAnQGxlemVyL2NvbW1vbic7XG5pbXBvcnQgeyBzdHlsZVRhZ3MsIHRhZ3MsIFRhZyB9IGZyb20gJ0BsZXplci9oaWdobGlnaHQnO1xuXG5jbGFzcyBDb21wb3NpdGVCbG9jayB7XG4gICAgc3RhdGljIGNyZWF0ZSh0eXBlLCB2YWx1ZSwgZnJvbSwgcGFyZW50SGFzaCwgZW5kKSB7XG4gICAgICAgIGxldCBoYXNoID0gKHBhcmVudEhhc2ggKyAocGFyZW50SGFzaCA8PCA4KSArIHR5cGUgKyAodmFsdWUgPDwgNCkpIHwgMDtcbiAgICAgICAgcmV0dXJuIG5ldyBDb21wb3NpdGVCbG9jayh0eXBlLCB2YWx1ZSwgZnJvbSwgaGFzaCwgZW5kLCBbXSwgW10pO1xuICAgIH1cbiAgICBjb25zdHJ1Y3Rvcih0eXBlLCBcbiAgICAvLyBVc2VkIGZvciBpbmRlbnRhdGlvbiBpbiBsaXN0IGl0ZW1zLCBtYXJrdXAgY2hhcmFjdGVyIGluIGxpc3RzXG4gICAgdmFsdWUsIGZyb20sIGhhc2gsIGVuZCwgY2hpbGRyZW4sIHBvc2l0aW9ucykge1xuICAgICAgICB0aGlzLnR5cGUgPSB0eXBlO1xuICAgICAgICB0aGlzLnZhbHVlID0gdmFsdWU7XG4gICAgICAgIHRoaXMuZnJvbSA9IGZyb207XG4gICAgICAgIHRoaXMuaGFzaCA9IGhhc2g7XG4gICAgICAgIHRoaXMuZW5kID0gZW5kO1xuICAgICAgICB0aGlzLmNoaWxkcmVuID0gY2hpbGRyZW47XG4gICAgICAgIHRoaXMucG9zaXRpb25zID0gcG9zaXRpb25zO1xuICAgICAgICB0aGlzLmhhc2hQcm9wID0gW1tOb2RlUHJvcC5jb250ZXh0SGFzaCwgaGFzaF1dO1xuICAgIH1cbiAgICBhZGRDaGlsZChjaGlsZCwgcG9zKSB7XG4gICAgICAgIGlmIChjaGlsZC5wcm9wKE5vZGVQcm9wLmNvbnRleHRIYXNoKSAhPSB0aGlzLmhhc2gpXG4gICAgICAgICAgICBjaGlsZCA9IG5ldyBUcmVlKGNoaWxkLnR5cGUsIGNoaWxkLmNoaWxkcmVuLCBjaGlsZC5wb3NpdGlvbnMsIGNoaWxkLmxlbmd0aCwgdGhpcy5oYXNoUHJvcCk7XG4gICAgICAgIHRoaXMuY2hpbGRyZW4ucHVzaChjaGlsZCk7XG4gICAgICAgIHRoaXMucG9zaXRpb25zLnB1c2gocG9zKTtcbiAgICB9XG4gICAgdG9UcmVlKG5vZGVTZXQsIGVuZCA9IHRoaXMuZW5kKSB7XG4gICAgICAgIGxldCBsYXN0ID0gdGhpcy5jaGlsZHJlbi5sZW5ndGggLSAxO1xuICAgICAgICBpZiAobGFzdCA+PSAwKVxuICAgICAgICAgICAgZW5kID0gTWF0aC5tYXgoZW5kLCB0aGlzLnBvc2l0aW9uc1tsYXN0XSArIHRoaXMuY2hpbGRyZW5bbGFzdF0ubGVuZ3RoICsgdGhpcy5mcm9tKTtcbiAgICAgICAgcmV0dXJuIG5ldyBUcmVlKG5vZGVTZXQudHlwZXNbdGhpcy50eXBlXSwgdGhpcy5jaGlsZHJlbiwgdGhpcy5wb3NpdGlvbnMsIGVuZCAtIHRoaXMuZnJvbSkuYmFsYW5jZSh7XG4gICAgICAgICAgICBtYWtlVHJlZTogKGNoaWxkcmVuLCBwb3NpdGlvbnMsIGxlbmd0aCkgPT4gbmV3IFRyZWUoTm9kZVR5cGUubm9uZSwgY2hpbGRyZW4sIHBvc2l0aW9ucywgbGVuZ3RoLCB0aGlzLmhhc2hQcm9wKVxuICAgICAgICB9KTtcbiAgICB9XG59XG52YXIgVHlwZTtcbihmdW5jdGlvbiAoVHlwZSkge1xuICAgIFR5cGVbVHlwZVtcIkRvY3VtZW50XCJdID0gMV0gPSBcIkRvY3VtZW50XCI7XG4gICAgVHlwZVtUeXBlW1wiQ29kZUJsb2NrXCJdID0gMl0gPSBcIkNvZGVCbG9ja1wiO1xuICAgIFR5cGVbVHlwZVtcIkZlbmNlZENvZGVcIl0gPSAzXSA9IFwiRmVuY2VkQ29kZVwiO1xuICAgIFR5cGVbVHlwZVtcIkJsb2NrcXVvdGVcIl0gPSA0XSA9IFwiQmxvY2txdW90ZVwiO1xuICAgIFR5cGVbVHlwZVtcIkhvcml6b250YWxSdWxlXCJdID0gNV0gPSBcIkhvcml6b250YWxSdWxlXCI7XG4gICAgVHlwZVtUeXBlW1wiQnVsbGV0TGlzdFwiXSA9IDZdID0gXCJCdWxsZXRMaXN0XCI7XG4gICAgVHlwZVtUeXBlW1wiT3JkZXJlZExpc3RcIl0gPSA3XSA9IFwiT3JkZXJlZExpc3RcIjtcbiAgICBUeXBlW1R5cGVbXCJMaXN0SXRlbVwiXSA9IDhdID0gXCJMaXN0SXRlbVwiO1xuICAgIFR5cGVbVHlwZVtcIkFUWEhlYWRpbmcxXCJdID0gOV0gPSBcIkFUWEhlYWRpbmcxXCI7XG4gICAgVHlwZVtUeXBlW1wiQVRYSGVhZGluZzJcIl0gPSAxMF0gPSBcIkFUWEhlYWRpbmcyXCI7XG4gICAgVHlwZVtUeXBlW1wiQVRYSGVhZGluZzNcIl0gPSAxMV0gPSBcIkFUWEhlYWRpbmczXCI7XG4gICAgVHlwZVtUeXBlW1wiQVRYSGVhZGluZzRcIl0gPSAxMl0gPSBcIkFUWEhlYWRpbmc0XCI7XG4gICAgVHlwZVtUeXBlW1wiQVRYSGVhZGluZzVcIl0gPSAxM10gPSBcIkFUWEhlYWRpbmc1XCI7XG4gICAgVHlwZVtUeXBlW1wiQVRYSGVhZGluZzZcIl0gPSAxNF0gPSBcIkFUWEhlYWRpbmc2XCI7XG4gICAgVHlwZVtUeXBlW1wiU2V0ZXh0SGVhZGluZzFcIl0gPSAxNV0gPSBcIlNldGV4dEhlYWRpbmcxXCI7XG4gICAgVHlwZVtUeXBlW1wiU2V0ZXh0SGVhZGluZzJcIl0gPSAxNl0gPSBcIlNldGV4dEhlYWRpbmcyXCI7XG4gICAgVHlwZVtUeXBlW1wiSFRNTEJsb2NrXCJdID0gMTddID0gXCJIVE1MQmxvY2tcIjtcbiAgICBUeXBlW1R5cGVbXCJMaW5rUmVmZXJlbmNlXCJdID0gMThdID0gXCJMaW5rUmVmZXJlbmNlXCI7XG4gICAgVHlwZVtUeXBlW1wiUGFyYWdyYXBoXCJdID0gMTldID0gXCJQYXJhZ3JhcGhcIjtcbiAgICBUeXBlW1R5cGVbXCJDb21tZW50QmxvY2tcIl0gPSAyMF0gPSBcIkNvbW1lbnRCbG9ja1wiO1xuICAgIFR5cGVbVHlwZVtcIlByb2Nlc3NpbmdJbnN0cnVjdGlvbkJsb2NrXCJdID0gMjFdID0gXCJQcm9jZXNzaW5nSW5zdHJ1Y3Rpb25CbG9ja1wiO1xuICAgIC8vIElubGluZVxuICAgIFR5cGVbVHlwZVtcIkVzY2FwZVwiXSA9IDIyXSA9IFwiRXNjYXBlXCI7XG4gICAgVHlwZVtUeXBlW1wiRW50aXR5XCJdID0gMjNdID0gXCJFbnRpdHlcIjtcbiAgICBUeXBlW1R5cGVbXCJIYXJkQnJlYWtcIl0gPSAyNF0gPSBcIkhhcmRCcmVha1wiO1xuICAgIFR5cGVbVHlwZVtcIkVtcGhhc2lzXCJdID0gMjVdID0gXCJFbXBoYXNpc1wiO1xuICAgIFR5cGVbVHlwZVtcIlN0cm9uZ0VtcGhhc2lzXCJdID0gMjZdID0gXCJTdHJvbmdFbXBoYXNpc1wiO1xuICAgIFR5cGVbVHlwZVtcIkxpbmtcIl0gPSAyN10gPSBcIkxpbmtcIjtcbiAgICBUeXBlW1R5cGVbXCJJbWFnZVwiXSA9IDI4XSA9IFwiSW1hZ2VcIjtcbiAgICBUeXBlW1R5cGVbXCJJbmxpbmVDb2RlXCJdID0gMjldID0gXCJJbmxpbmVDb2RlXCI7XG4gICAgVHlwZVtUeXBlW1wiSFRNTFRhZ1wiXSA9IDMwXSA9IFwiSFRNTFRhZ1wiO1xuICAgIFR5cGVbVHlwZVtcIkNvbW1lbnRcIl0gPSAzMV0gPSBcIkNvbW1lbnRcIjtcbiAgICBUeXBlW1R5cGVbXCJQcm9jZXNzaW5nSW5zdHJ1Y3Rpb25cIl0gPSAzMl0gPSBcIlByb2Nlc3NpbmdJbnN0cnVjdGlvblwiO1xuICAgIFR5cGVbVHlwZVtcIkF1dG9saW5rXCJdID0gMzNdID0gXCJBdXRvbGlua1wiO1xuICAgIC8vIFNtYWxsZXIgdG9rZW5zXG4gICAgVHlwZVtUeXBlW1wiSGVhZGVyTWFya1wiXSA9IDM0XSA9IFwiSGVhZGVyTWFya1wiO1xuICAgIFR5cGVbVHlwZVtcIlF1b3RlTWFya1wiXSA9IDM1XSA9IFwiUXVvdGVNYXJrXCI7XG4gICAgVHlwZVtUeXBlW1wiTGlzdE1hcmtcIl0gPSAzNl0gPSBcIkxpc3RNYXJrXCI7XG4gICAgVHlwZVtUeXBlW1wiTGlua01hcmtcIl0gPSAzN10gPSBcIkxpbmtNYXJrXCI7XG4gICAgVHlwZVtUeXBlW1wiRW1waGFzaXNNYXJrXCJdID0gMzhdID0gXCJFbXBoYXNpc01hcmtcIjtcbiAgICBUeXBlW1R5cGVbXCJDb2RlTWFya1wiXSA9IDM5XSA9IFwiQ29kZU1hcmtcIjtcbiAgICBUeXBlW1R5cGVbXCJDb2RlVGV4dFwiXSA9IDQwXSA9IFwiQ29kZVRleHRcIjtcbiAgICBUeXBlW1R5cGVbXCJDb2RlSW5mb1wiXSA9IDQxXSA9IFwiQ29kZUluZm9cIjtcbiAgICBUeXBlW1R5cGVbXCJMaW5rVGl0bGVcIl0gPSA0Ml0gPSBcIkxpbmtUaXRsZVwiO1xuICAgIFR5cGVbVHlwZVtcIkxpbmtMYWJlbFwiXSA9IDQzXSA9IFwiTGlua0xhYmVsXCI7XG4gICAgVHlwZVtUeXBlW1wiVVJMXCJdID0gNDRdID0gXCJVUkxcIjtcbn0pKFR5cGUgfHwgKFR5cGUgPSB7fSkpO1xuLyoqXG5EYXRhIHN0cnVjdHVyZSB1c2VkIHRvIGFjY3VtdWxhdGUgYSBibG9jaydzIGNvbnRlbnQgZHVyaW5nIFtsZWFmXG5ibG9jayBwYXJzaW5nXSgjQmxvY2tQYXJzZXIubGVhZikuXG4qL1xuY2xhc3MgTGVhZkJsb2NrIHtcbiAgICAvKipcbiAgICBAaW50ZXJuYWxcbiAgICAqL1xuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8qKlxuICAgIFRoZSBzdGFydCBwb3NpdGlvbiBvZiB0aGUgYmxvY2suXG4gICAgKi9cbiAgICBzdGFydCwgXG4gICAgLyoqXG4gICAgVGhlIGJsb2NrJ3MgdGV4dCBjb250ZW50LlxuICAgICovXG4gICAgY29udGVudCkge1xuICAgICAgICB0aGlzLnN0YXJ0ID0gc3RhcnQ7XG4gICAgICAgIHRoaXMuY29udGVudCA9IGNvbnRlbnQ7XG4gICAgICAgIC8qKlxuICAgICAgICBAaW50ZXJuYWxcbiAgICAgICAgKi9cbiAgICAgICAgdGhpcy5tYXJrcyA9IFtdO1xuICAgICAgICAvKipcbiAgICAgICAgVGhlIGJsb2NrIHBhcnNlcnMgYWN0aXZlIGZvciB0aGlzIGJsb2NrLlxuICAgICAgICAqL1xuICAgICAgICB0aGlzLnBhcnNlcnMgPSBbXTtcbiAgICB9XG59XG4vKipcbkRhdGEgc3RydWN0dXJlIHVzZWQgZHVyaW5nIGJsb2NrLWxldmVsIHBlci1saW5lIHBhcnNpbmcuXG4qL1xuY2xhc3MgTGluZSB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIC8qKlxuICAgICAgICBUaGUgbGluZSdzIGZ1bGwgdGV4dC5cbiAgICAgICAgKi9cbiAgICAgICAgdGhpcy50ZXh0ID0gXCJcIjtcbiAgICAgICAgLyoqXG4gICAgICAgIFRoZSBiYXNlIGluZGVudCBwcm92aWRlZCBieSB0aGUgY29tcG9zaXRlIGNvbnRleHRzICh0aGF0IGhhdmVcbiAgICAgICAgYmVlbiBoYW5kbGVkIHNvIGZhcikuXG4gICAgICAgICovXG4gICAgICAgIHRoaXMuYmFzZUluZGVudCA9IDA7XG4gICAgICAgIC8qKlxuICAgICAgICBUaGUgc3RyaW5nIHBvc2l0aW9uIGNvcnJlc3BvbmRpbmcgdG8gdGhlIGJhc2UgaW5kZW50LlxuICAgICAgICAqL1xuICAgICAgICB0aGlzLmJhc2VQb3MgPSAwO1xuICAgICAgICAvKipcbiAgICAgICAgVGhlIG51bWJlciBvZiBjb250ZXh0cyBoYW5kbGVkIEBpbnRlcm5hbFxuICAgICAgICAqL1xuICAgICAgICB0aGlzLmRlcHRoID0gMDtcbiAgICAgICAgLyoqXG4gICAgICAgIEFueSBtYXJrZXJzIChpLmUuIGJsb2NrIHF1b3RlIG1hcmtlcnMpIHBhcnNlZCBmb3IgdGhlIGNvbnRleHRzLiBAaW50ZXJuYWxcbiAgICAgICAgKi9cbiAgICAgICAgdGhpcy5tYXJrZXJzID0gW107XG4gICAgICAgIC8qKlxuICAgICAgICBUaGUgcG9zaXRpb24gb2YgdGhlIG5leHQgbm9uLXdoaXRlc3BhY2UgY2hhcmFjdGVyIGJleW9uZCBhbnlcbiAgICAgICAgbGlzdCwgYmxvY2txdW90ZSwgb3Igb3RoZXIgY29tcG9zaXRlIGJsb2NrIG1hcmtlcnMuXG4gICAgICAgICovXG4gICAgICAgIHRoaXMucG9zID0gMDtcbiAgICAgICAgLyoqXG4gICAgICAgIFRoZSBjb2x1bW4gb2YgdGhlIG5leHQgbm9uLXdoaXRlc3BhY2UgY2hhcmFjdGVyLlxuICAgICAgICAqL1xuICAgICAgICB0aGlzLmluZGVudCA9IDA7XG4gICAgICAgIC8qKlxuICAgICAgICBUaGUgY2hhcmFjdGVyIGNvZGUgb2YgdGhlIGNoYXJhY3RlciBhZnRlciBgcG9zYC5cbiAgICAgICAgKi9cbiAgICAgICAgdGhpcy5uZXh0ID0gLTE7XG4gICAgfVxuICAgIC8qKlxuICAgIEBpbnRlcm5hbFxuICAgICovXG4gICAgZm9yd2FyZCgpIHtcbiAgICAgICAgaWYgKHRoaXMuYmFzZVBvcyA+IHRoaXMucG9zKVxuICAgICAgICAgICAgdGhpcy5mb3J3YXJkSW5uZXIoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgQGludGVybmFsXG4gICAgKi9cbiAgICBmb3J3YXJkSW5uZXIoKSB7XG4gICAgICAgIGxldCBuZXdQb3MgPSB0aGlzLnNraXBTcGFjZSh0aGlzLmJhc2VQb3MpO1xuICAgICAgICB0aGlzLmluZGVudCA9IHRoaXMuY291bnRJbmRlbnQobmV3UG9zLCB0aGlzLnBvcywgdGhpcy5pbmRlbnQpO1xuICAgICAgICB0aGlzLnBvcyA9IG5ld1BvcztcbiAgICAgICAgdGhpcy5uZXh0ID0gbmV3UG9zID09IHRoaXMudGV4dC5sZW5ndGggPyAtMSA6IHRoaXMudGV4dC5jaGFyQ29kZUF0KG5ld1Bvcyk7XG4gICAgfVxuICAgIC8qKlxuICAgIFNraXAgd2hpdGVzcGFjZSBhZnRlciB0aGUgZ2l2ZW4gcG9zaXRpb24sIHJldHVybiB0aGUgcG9zaXRpb24gb2ZcbiAgICB0aGUgbmV4dCBub24tc3BhY2UgY2hhcmFjdGVyIG9yIHRoZSBlbmQgb2YgdGhlIGxpbmUgaWYgdGhlcmUnc1xuICAgIG9ubHkgc3BhY2UgYWZ0ZXIgYGZyb21gLlxuICAgICovXG4gICAgc2tpcFNwYWNlKGZyb20pIHsgcmV0dXJuIHNraXBTcGFjZSh0aGlzLnRleHQsIGZyb20pOyB9XG4gICAgLyoqXG4gICAgQGludGVybmFsXG4gICAgKi9cbiAgICByZXNldCh0ZXh0KSB7XG4gICAgICAgIHRoaXMudGV4dCA9IHRleHQ7XG4gICAgICAgIHRoaXMuYmFzZUluZGVudCA9IHRoaXMuYmFzZVBvcyA9IHRoaXMucG9zID0gdGhpcy5pbmRlbnQgPSAwO1xuICAgICAgICB0aGlzLmZvcndhcmRJbm5lcigpO1xuICAgICAgICB0aGlzLmRlcHRoID0gMTtcbiAgICAgICAgd2hpbGUgKHRoaXMubWFya2Vycy5sZW5ndGgpXG4gICAgICAgICAgICB0aGlzLm1hcmtlcnMucG9wKCk7XG4gICAgfVxuICAgIC8qKlxuICAgIE1vdmUgdGhlIGxpbmUncyBiYXNlIHBvc2l0aW9uIGZvcndhcmQgdG8gdGhlIGdpdmVuIHBvc2l0aW9uLlxuICAgIFRoaXMgc2hvdWxkIG9ubHkgYmUgY2FsbGVkIGJ5IGNvbXBvc2l0ZSBbYmxvY2tcbiAgICBwYXJzZXJzXSgjQmxvY2tQYXJzZXIucGFyc2UpIG9yIFttYXJrdXAgc2tpcHBpbmdcbiAgICBmdW5jdGlvbnNdKCNOb2RlU3BlYy5jb21wb3NpdGUpLlxuICAgICovXG4gICAgbW92ZUJhc2UodG8pIHtcbiAgICAgICAgdGhpcy5iYXNlUG9zID0gdG87XG4gICAgICAgIHRoaXMuYmFzZUluZGVudCA9IHRoaXMuY291bnRJbmRlbnQodG8sIHRoaXMucG9zLCB0aGlzLmluZGVudCk7XG4gICAgfVxuICAgIC8qKlxuICAgIE1vdmUgdGhlIGxpbmUncyBiYXNlIHBvc2l0aW9uIGZvcndhcmQgdG8gdGhlIGdpdmVuIF9jb2x1bW5fLlxuICAgICovXG4gICAgbW92ZUJhc2VDb2x1bW4oaW5kZW50KSB7XG4gICAgICAgIHRoaXMuYmFzZUluZGVudCA9IGluZGVudDtcbiAgICAgICAgdGhpcy5iYXNlUG9zID0gdGhpcy5maW5kQ29sdW1uKGluZGVudCk7XG4gICAgfVxuICAgIC8qKlxuICAgIFN0b3JlIGEgY29tcG9zaXRlLWJsb2NrLWxldmVsIG1hcmtlci4gU2hvdWxkIGJlIGNhbGxlZCBmcm9tXG4gICAgW21hcmt1cCBza2lwcGluZyBmdW5jdGlvbnNdKCNOb2RlU3BlYy5jb21wb3NpdGUpIHdoZW4gdGhleVxuICAgIGNvbnN1bWUgYW55IG5vbi13aGl0ZXNwYWNlIGNoYXJhY3RlcnMuXG4gICAgKi9cbiAgICBhZGRNYXJrZXIoZWx0KSB7XG4gICAgICAgIHRoaXMubWFya2Vycy5wdXNoKGVsdCk7XG4gICAgfVxuICAgIC8qKlxuICAgIEZpbmQgdGhlIGNvbHVtbiBwb3NpdGlvbiBhdCBgdG9gLCBvcHRpb25hbGx5IHN0YXJ0aW5nIGF0IGEgZ2l2ZW5cbiAgICBwb3NpdGlvbiBhbmQgY29sdW1uLlxuICAgICovXG4gICAgY291bnRJbmRlbnQodG8sIGZyb20gPSAwLCBpbmRlbnQgPSAwKSB7XG4gICAgICAgIGZvciAobGV0IGkgPSBmcm9tOyBpIDwgdG87IGkrKylcbiAgICAgICAgICAgIGluZGVudCArPSB0aGlzLnRleHQuY2hhckNvZGVBdChpKSA9PSA5ID8gNCAtIGluZGVudCAlIDQgOiAxO1xuICAgICAgICByZXR1cm4gaW5kZW50O1xuICAgIH1cbiAgICAvKipcbiAgICBGaW5kIHRoZSBwb3NpdGlvbiBjb3JyZXNwb25kaW5nIHRvIHRoZSBnaXZlbiBjb2x1bW4uXG4gICAgKi9cbiAgICBmaW5kQ29sdW1uKGdvYWwpIHtcbiAgICAgICAgbGV0IGkgPSAwO1xuICAgICAgICBmb3IgKGxldCBpbmRlbnQgPSAwOyBpIDwgdGhpcy50ZXh0Lmxlbmd0aCAmJiBpbmRlbnQgPCBnb2FsOyBpKyspXG4gICAgICAgICAgICBpbmRlbnQgKz0gdGhpcy50ZXh0LmNoYXJDb2RlQXQoaSkgPT0gOSA/IDQgLSBpbmRlbnQgJSA0IDogMTtcbiAgICAgICAgcmV0dXJuIGk7XG4gICAgfVxuICAgIC8qKlxuICAgIEBpbnRlcm5hbFxuICAgICovXG4gICAgc2NydWIoKSB7XG4gICAgICAgIGlmICghdGhpcy5iYXNlSW5kZW50KVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMudGV4dDtcbiAgICAgICAgbGV0IHJlc3VsdCA9IFwiXCI7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5iYXNlUG9zOyBpKyspXG4gICAgICAgICAgICByZXN1bHQgKz0gXCIgXCI7XG4gICAgICAgIHJldHVybiByZXN1bHQgKyB0aGlzLnRleHQuc2xpY2UodGhpcy5iYXNlUG9zKTtcbiAgICB9XG59XG5mdW5jdGlvbiBza2lwRm9yTGlzdChibCwgY3gsIGxpbmUpIHtcbiAgICBpZiAobGluZS5wb3MgPT0gbGluZS50ZXh0Lmxlbmd0aCB8fFxuICAgICAgICAoYmwgIT0gY3guYmxvY2sgJiYgbGluZS5pbmRlbnQgPj0gY3guc3RhY2tbbGluZS5kZXB0aCArIDFdLnZhbHVlICsgbGluZS5iYXNlSW5kZW50KSlcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgaWYgKGxpbmUuaW5kZW50ID49IGxpbmUuYmFzZUluZGVudCArIDQpXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICBsZXQgc2l6ZSA9IChibC50eXBlID09IFR5cGUuT3JkZXJlZExpc3QgPyBpc09yZGVyZWRMaXN0IDogaXNCdWxsZXRMaXN0KShsaW5lLCBjeCwgZmFsc2UpO1xuICAgIHJldHVybiBzaXplID4gMCAmJlxuICAgICAgICAoYmwudHlwZSAhPSBUeXBlLkJ1bGxldExpc3QgfHwgaXNIb3Jpem9udGFsUnVsZShsaW5lLCBjeCwgZmFsc2UpIDwgMCkgJiZcbiAgICAgICAgbGluZS50ZXh0LmNoYXJDb2RlQXQobGluZS5wb3MgKyBzaXplIC0gMSkgPT0gYmwudmFsdWU7XG59XG5jb25zdCBEZWZhdWx0U2tpcE1hcmt1cCA9IHtcbiAgICBbVHlwZS5CbG9ja3F1b3RlXShibCwgY3gsIGxpbmUpIHtcbiAgICAgICAgaWYgKGxpbmUubmV4dCAhPSA2MiAvKiAnPicgKi8pXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIGxpbmUubWFya2Vycy5wdXNoKGVsdChUeXBlLlF1b3RlTWFyaywgY3gubGluZVN0YXJ0ICsgbGluZS5wb3MsIGN4LmxpbmVTdGFydCArIGxpbmUucG9zICsgMSkpO1xuICAgICAgICBsaW5lLm1vdmVCYXNlKGxpbmUucG9zICsgKHNwYWNlKGxpbmUudGV4dC5jaGFyQ29kZUF0KGxpbmUucG9zICsgMSkpID8gMiA6IDEpKTtcbiAgICAgICAgYmwuZW5kID0gY3gubGluZVN0YXJ0ICsgbGluZS50ZXh0Lmxlbmd0aDtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSxcbiAgICBbVHlwZS5MaXN0SXRlbV0oYmwsIF9jeCwgbGluZSkge1xuICAgICAgICBpZiAobGluZS5pbmRlbnQgPCBsaW5lLmJhc2VJbmRlbnQgKyBibC52YWx1ZSAmJiBsaW5lLm5leHQgPiAtMSlcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgbGluZS5tb3ZlQmFzZUNvbHVtbihsaW5lLmJhc2VJbmRlbnQgKyBibC52YWx1ZSk7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH0sXG4gICAgW1R5cGUuT3JkZXJlZExpc3RdOiBza2lwRm9yTGlzdCxcbiAgICBbVHlwZS5CdWxsZXRMaXN0XTogc2tpcEZvckxpc3QsXG4gICAgW1R5cGUuRG9jdW1lbnRdKCkgeyByZXR1cm4gdHJ1ZTsgfVxufTtcbmZ1bmN0aW9uIHNwYWNlKGNoKSB7IHJldHVybiBjaCA9PSAzMiB8fCBjaCA9PSA5IHx8IGNoID09IDEwIHx8IGNoID09IDEzOyB9XG5mdW5jdGlvbiBza2lwU3BhY2UobGluZSwgaSA9IDApIHtcbiAgICB3aGlsZSAoaSA8IGxpbmUubGVuZ3RoICYmIHNwYWNlKGxpbmUuY2hhckNvZGVBdChpKSkpXG4gICAgICAgIGkrKztcbiAgICByZXR1cm4gaTtcbn1cbmZ1bmN0aW9uIHNraXBTcGFjZUJhY2sobGluZSwgaSwgdG8pIHtcbiAgICB3aGlsZSAoaSA+IHRvICYmIHNwYWNlKGxpbmUuY2hhckNvZGVBdChpIC0gMSkpKVxuICAgICAgICBpLS07XG4gICAgcmV0dXJuIGk7XG59XG5mdW5jdGlvbiBpc0ZlbmNlZENvZGUobGluZSkge1xuICAgIGlmIChsaW5lLm5leHQgIT0gOTYgJiYgbGluZS5uZXh0ICE9IDEyNiAvKiAnYH4nICovKVxuICAgICAgICByZXR1cm4gLTE7XG4gICAgbGV0IHBvcyA9IGxpbmUucG9zICsgMTtcbiAgICB3aGlsZSAocG9zIDwgbGluZS50ZXh0Lmxlbmd0aCAmJiBsaW5lLnRleHQuY2hhckNvZGVBdChwb3MpID09IGxpbmUubmV4dClcbiAgICAgICAgcG9zKys7XG4gICAgaWYgKHBvcyA8IGxpbmUucG9zICsgMylcbiAgICAgICAgcmV0dXJuIC0xO1xuICAgIGlmIChsaW5lLm5leHQgPT0gOTYpXG4gICAgICAgIGZvciAobGV0IGkgPSBwb3M7IGkgPCBsaW5lLnRleHQubGVuZ3RoOyBpKyspXG4gICAgICAgICAgICBpZiAobGluZS50ZXh0LmNoYXJDb2RlQXQoaSkgPT0gOTYpXG4gICAgICAgICAgICAgICAgcmV0dXJuIC0xO1xuICAgIHJldHVybiBwb3M7XG59XG5mdW5jdGlvbiBpc0Jsb2NrcXVvdGUobGluZSkge1xuICAgIHJldHVybiBsaW5lLm5leHQgIT0gNjIgLyogJz4nICovID8gLTEgOiBsaW5lLnRleHQuY2hhckNvZGVBdChsaW5lLnBvcyArIDEpID09IDMyID8gMiA6IDE7XG59XG5mdW5jdGlvbiBpc0hvcml6b250YWxSdWxlKGxpbmUsIGN4LCBicmVha2luZykge1xuICAgIGlmIChsaW5lLm5leHQgIT0gNDIgJiYgbGluZS5uZXh0ICE9IDQ1ICYmIGxpbmUubmV4dCAhPSA5NSAvKiAnXy0qJyAqLylcbiAgICAgICAgcmV0dXJuIC0xO1xuICAgIGxldCBjb3VudCA9IDE7XG4gICAgZm9yIChsZXQgcG9zID0gbGluZS5wb3MgKyAxOyBwb3MgPCBsaW5lLnRleHQubGVuZ3RoOyBwb3MrKykge1xuICAgICAgICBsZXQgY2ggPSBsaW5lLnRleHQuY2hhckNvZGVBdChwb3MpO1xuICAgICAgICBpZiAoY2ggPT0gbGluZS5uZXh0KVxuICAgICAgICAgICAgY291bnQrKztcbiAgICAgICAgZWxzZSBpZiAoIXNwYWNlKGNoKSlcbiAgICAgICAgICAgIHJldHVybiAtMTtcbiAgICB9XG4gICAgLy8gU2V0ZXh0IGhlYWRlcnMgdGFrZSBwcmVjZWRlbmNlXG4gICAgaWYgKGJyZWFraW5nICYmIGxpbmUubmV4dCA9PSA0NSAmJiBpc1NldGV4dFVuZGVybGluZShsaW5lKSA+IC0xICYmIGxpbmUuZGVwdGggPT0gY3guc3RhY2subGVuZ3RoICYmXG4gICAgICAgIGN4LnBhcnNlci5sZWFmQmxvY2tQYXJzZXJzLmluZGV4T2YoRGVmYXVsdExlYWZCbG9ja3MuU2V0ZXh0SGVhZGluZykgPiAtMSlcbiAgICAgICAgcmV0dXJuIC0xO1xuICAgIHJldHVybiBjb3VudCA8IDMgPyAtMSA6IDE7XG59XG5mdW5jdGlvbiBpbkxpc3QoY3gsIHR5cGUpIHtcbiAgICBmb3IgKGxldCBpID0gY3guc3RhY2subGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pXG4gICAgICAgIGlmIChjeC5zdGFja1tpXS50eXBlID09IHR5cGUpXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICByZXR1cm4gZmFsc2U7XG59XG5mdW5jdGlvbiBpc0J1bGxldExpc3QobGluZSwgY3gsIGJyZWFraW5nKSB7XG4gICAgcmV0dXJuIChsaW5lLm5leHQgPT0gNDUgfHwgbGluZS5uZXh0ID09IDQzIHx8IGxpbmUubmV4dCA9PSA0MiAvKiAnLSsqJyAqLykgJiZcbiAgICAgICAgKGxpbmUucG9zID09IGxpbmUudGV4dC5sZW5ndGggLSAxIHx8IHNwYWNlKGxpbmUudGV4dC5jaGFyQ29kZUF0KGxpbmUucG9zICsgMSkpKSAmJlxuICAgICAgICAoIWJyZWFraW5nIHx8IGluTGlzdChjeCwgVHlwZS5CdWxsZXRMaXN0KSB8fCBsaW5lLnNraXBTcGFjZShsaW5lLnBvcyArIDIpIDwgbGluZS50ZXh0Lmxlbmd0aCkgPyAxIDogLTE7XG59XG5mdW5jdGlvbiBpc09yZGVyZWRMaXN0KGxpbmUsIGN4LCBicmVha2luZykge1xuICAgIGxldCBwb3MgPSBsaW5lLnBvcywgbmV4dCA9IGxpbmUubmV4dDtcbiAgICBmb3IgKDs7KSB7XG4gICAgICAgIGlmIChuZXh0ID49IDQ4ICYmIG5leHQgPD0gNTcgLyogJzAtOScgKi8pXG4gICAgICAgICAgICBwb3MrKztcbiAgICAgICAgZWxzZVxuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGlmIChwb3MgPT0gbGluZS50ZXh0Lmxlbmd0aClcbiAgICAgICAgICAgIHJldHVybiAtMTtcbiAgICAgICAgbmV4dCA9IGxpbmUudGV4dC5jaGFyQ29kZUF0KHBvcyk7XG4gICAgfVxuICAgIGlmIChwb3MgPT0gbGluZS5wb3MgfHwgcG9zID4gbGluZS5wb3MgKyA5IHx8XG4gICAgICAgIChuZXh0ICE9IDQ2ICYmIG5leHQgIT0gNDEgLyogJy4pJyAqLykgfHxcbiAgICAgICAgKHBvcyA8IGxpbmUudGV4dC5sZW5ndGggLSAxICYmICFzcGFjZShsaW5lLnRleHQuY2hhckNvZGVBdChwb3MgKyAxKSkpIHx8XG4gICAgICAgIGJyZWFraW5nICYmICFpbkxpc3QoY3gsIFR5cGUuT3JkZXJlZExpc3QpICYmXG4gICAgICAgICAgICAobGluZS5za2lwU3BhY2UocG9zICsgMSkgPT0gbGluZS50ZXh0Lmxlbmd0aCB8fCBwb3MgPiBsaW5lLnBvcyArIDEgfHwgbGluZS5uZXh0ICE9IDQ5IC8qICcxJyAqLykpXG4gICAgICAgIHJldHVybiAtMTtcbiAgICByZXR1cm4gcG9zICsgMSAtIGxpbmUucG9zO1xufVxuZnVuY3Rpb24gaXNBdHhIZWFkaW5nKGxpbmUpIHtcbiAgICBpZiAobGluZS5uZXh0ICE9IDM1IC8qICcjJyAqLylcbiAgICAgICAgcmV0dXJuIC0xO1xuICAgIGxldCBwb3MgPSBsaW5lLnBvcyArIDE7XG4gICAgd2hpbGUgKHBvcyA8IGxpbmUudGV4dC5sZW5ndGggJiYgbGluZS50ZXh0LmNoYXJDb2RlQXQocG9zKSA9PSAzNSlcbiAgICAgICAgcG9zKys7XG4gICAgaWYgKHBvcyA8IGxpbmUudGV4dC5sZW5ndGggJiYgbGluZS50ZXh0LmNoYXJDb2RlQXQocG9zKSAhPSAzMilcbiAgICAgICAgcmV0dXJuIC0xO1xuICAgIGxldCBzaXplID0gcG9zIC0gbGluZS5wb3M7XG4gICAgcmV0dXJuIHNpemUgPiA2ID8gLTEgOiBzaXplO1xufVxuZnVuY3Rpb24gaXNTZXRleHRVbmRlcmxpbmUobGluZSkge1xuICAgIGlmIChsaW5lLm5leHQgIT0gNDUgJiYgbGluZS5uZXh0ICE9IDYxIC8qICctPScgKi8gfHwgbGluZS5pbmRlbnQgPj0gbGluZS5iYXNlSW5kZW50ICsgNClcbiAgICAgICAgcmV0dXJuIC0xO1xuICAgIGxldCBwb3MgPSBsaW5lLnBvcyArIDE7XG4gICAgd2hpbGUgKHBvcyA8IGxpbmUudGV4dC5sZW5ndGggJiYgbGluZS50ZXh0LmNoYXJDb2RlQXQocG9zKSA9PSBsaW5lLm5leHQpXG4gICAgICAgIHBvcysrO1xuICAgIGxldCBlbmQgPSBwb3M7XG4gICAgd2hpbGUgKHBvcyA8IGxpbmUudGV4dC5sZW5ndGggJiYgc3BhY2UobGluZS50ZXh0LmNoYXJDb2RlQXQocG9zKSkpXG4gICAgICAgIHBvcysrO1xuICAgIHJldHVybiBwb3MgPT0gbGluZS50ZXh0Lmxlbmd0aCA/IGVuZCA6IC0xO1xufVxuY29uc3QgRW1wdHlMaW5lID0gL15bIFxcdF0qJC8sIENvbW1lbnRFbmQgPSAvLS0+LywgUHJvY2Vzc2luZ0VuZCA9IC9cXD8+LztcbmNvbnN0IEhUTUxCbG9ja1N0eWxlID0gW1xuICAgIFsvXjwoPzpzY3JpcHR8cHJlfHN0eWxlKSg/Olxcc3w+fCQpL2ksIC88XFwvKD86c2NyaXB0fHByZXxzdHlsZSk+L2ldLFxuICAgIFsvXlxccyo8IS0tLywgQ29tbWVudEVuZF0sXG4gICAgWy9eXFxzKjxcXD8vLCBQcm9jZXNzaW5nRW5kXSxcbiAgICBbL15cXHMqPCFbQS1aXS8sIC8+L10sXG4gICAgWy9eXFxzKjwhXFxbQ0RBVEFcXFsvLCAvXFxdXFxdPi9dLFxuICAgIFsvXlxccyo8XFwvPyg/OmFkZHJlc3N8YXJ0aWNsZXxhc2lkZXxiYXNlfGJhc2Vmb250fGJsb2NrcXVvdGV8Ym9keXxjYXB0aW9ufGNlbnRlcnxjb2x8Y29sZ3JvdXB8ZGR8ZGV0YWlsc3xkaWFsb2d8ZGlyfGRpdnxkbHxkdHxmaWVsZHNldHxmaWdjYXB0aW9ufGZpZ3VyZXxmb290ZXJ8Zm9ybXxmcmFtZXxmcmFtZXNldHxoMXxoMnxoM3xoNHxoNXxoNnxoZWFkfGhlYWRlcnxocnxodG1sfGlmcmFtZXxsZWdlbmR8bGl8bGlua3xtYWlufG1lbnV8bWVudWl0ZW18bmF2fG5vZnJhbWVzfG9sfG9wdGdyb3VwfG9wdGlvbnxwfHBhcmFtfHNlY3Rpb258c291cmNlfHN1bW1hcnl8dGFibGV8dGJvZHl8dGR8dGZvb3R8dGh8dGhlYWR8dGl0bGV8dHJ8dHJhY2t8dWwpKD86XFxzfFxcLz8+fCQpL2ksIEVtcHR5TGluZV0sXG4gICAgWy9eXFxzKig/OjxcXC9bYS16XVtcXHctXSpcXHMqPnw8W2Etel1bXFx3LV0qKFxccytbYS16Ol9dW1xcdy0uXSooPzpcXHMqPVxccyooPzpbXlxcc1wiJz08PmBdK3wnW14nXSonfFwiW15cIl0qXCIpKT8pKlxccyo+KVxccyokL2ksIEVtcHR5TGluZV1cbl07XG5mdW5jdGlvbiBpc0hUTUxCbG9jayhsaW5lLCBfY3gsIGJyZWFraW5nKSB7XG4gICAgaWYgKGxpbmUubmV4dCAhPSA2MCAvKiAnPCcgKi8pXG4gICAgICAgIHJldHVybiAtMTtcbiAgICBsZXQgcmVzdCA9IGxpbmUudGV4dC5zbGljZShsaW5lLnBvcyk7XG4gICAgZm9yIChsZXQgaSA9IDAsIGUgPSBIVE1MQmxvY2tTdHlsZS5sZW5ndGggLSAoYnJlYWtpbmcgPyAxIDogMCk7IGkgPCBlOyBpKyspXG4gICAgICAgIGlmIChIVE1MQmxvY2tTdHlsZVtpXVswXS50ZXN0KHJlc3QpKVxuICAgICAgICAgICAgcmV0dXJuIGk7XG4gICAgcmV0dXJuIC0xO1xufVxuZnVuY3Rpb24gZ2V0TGlzdEluZGVudChsaW5lLCBwb3MpIHtcbiAgICBsZXQgaW5kZW50QWZ0ZXIgPSBsaW5lLmNvdW50SW5kZW50KHBvcywgbGluZS5wb3MsIGxpbmUuaW5kZW50KTtcbiAgICBsZXQgaW5kZW50ZWQgPSBsaW5lLmNvdW50SW5kZW50KGxpbmUuc2tpcFNwYWNlKHBvcyksIHBvcywgaW5kZW50QWZ0ZXIpO1xuICAgIHJldHVybiBpbmRlbnRlZCA+PSBpbmRlbnRBZnRlciArIDUgPyBpbmRlbnRBZnRlciArIDEgOiBpbmRlbnRlZDtcbn1cbmZ1bmN0aW9uIGFkZENvZGVUZXh0KG1hcmtzLCBmcm9tLCB0bykge1xuICAgIGxldCBsYXN0ID0gbWFya3MubGVuZ3RoIC0gMTtcbiAgICBpZiAobGFzdCA+PSAwICYmIG1hcmtzW2xhc3RdLnRvID09IGZyb20gJiYgbWFya3NbbGFzdF0udHlwZSA9PSBUeXBlLkNvZGVUZXh0KVxuICAgICAgICBtYXJrc1tsYXN0XS50byA9IHRvO1xuICAgIGVsc2VcbiAgICAgICAgbWFya3MucHVzaChlbHQoVHlwZS5Db2RlVGV4dCwgZnJvbSwgdG8pKTtcbn1cbi8vIFJ1bGVzIGZvciBwYXJzaW5nIGJsb2Nrcy4gQSByZXR1cm4gdmFsdWUgb2YgZmFsc2UgbWVhbnMgdGhlIHJ1bGVcbi8vIGRvZXNuJ3QgYXBwbHkgaGVyZSwgdHJ1ZSBtZWFucyBpdCBkb2VzLiBXaGVuIHRydWUgaXMgcmV0dXJuZWQgYW5kXG4vLyBgcC5saW5lYCBoYXMgYmVlbiB1cGRhdGVkLCB0aGUgcnVsZSBpcyBhc3N1bWVkIHRvIGhhdmUgY29uc3VtZWQgYVxuLy8gbGVhZiBibG9jay4gT3RoZXJ3aXNlLCBpdCBpcyBhc3N1bWVkIHRvIGhhdmUgb3BlbmVkIGEgY29udGV4dC5cbmNvbnN0IERlZmF1bHRCbG9ja1BhcnNlcnMgPSB7XG4gICAgTGlua1JlZmVyZW5jZTogdW5kZWZpbmVkLFxuICAgIEluZGVudGVkQ29kZShjeCwgbGluZSkge1xuICAgICAgICBsZXQgYmFzZSA9IGxpbmUuYmFzZUluZGVudCArIDQ7XG4gICAgICAgIGlmIChsaW5lLmluZGVudCA8IGJhc2UpXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIGxldCBzdGFydCA9IGxpbmUuZmluZENvbHVtbihiYXNlKTtcbiAgICAgICAgbGV0IGZyb20gPSBjeC5saW5lU3RhcnQgKyBzdGFydCwgdG8gPSBjeC5saW5lU3RhcnQgKyBsaW5lLnRleHQubGVuZ3RoO1xuICAgICAgICBsZXQgbWFya3MgPSBbXSwgcGVuZGluZ01hcmtzID0gW107XG4gICAgICAgIGFkZENvZGVUZXh0KG1hcmtzLCBmcm9tLCB0byk7XG4gICAgICAgIHdoaWxlIChjeC5uZXh0TGluZSgpICYmIGxpbmUuZGVwdGggPj0gY3guc3RhY2subGVuZ3RoKSB7XG4gICAgICAgICAgICBpZiAobGluZS5wb3MgPT0gbGluZS50ZXh0Lmxlbmd0aCkgeyAvLyBFbXB0eVxuICAgICAgICAgICAgICAgIGFkZENvZGVUZXh0KHBlbmRpbmdNYXJrcywgY3gubGluZVN0YXJ0IC0gMSwgY3gubGluZVN0YXJ0KTtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBtIG9mIGxpbmUubWFya2VycylcbiAgICAgICAgICAgICAgICAgICAgcGVuZGluZ01hcmtzLnB1c2gobSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChsaW5lLmluZGVudCA8IGJhc2UpIHtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGlmIChwZW5kaW5nTWFya3MubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIGZvciAobGV0IG0gb2YgcGVuZGluZ01hcmtzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobS50eXBlID09IFR5cGUuQ29kZVRleHQpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYWRkQ29kZVRleHQobWFya3MsIG0uZnJvbSwgbS50byk7XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFya3MucHVzaChtKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBwZW5kaW5nTWFya3MgPSBbXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYWRkQ29kZVRleHQobWFya3MsIGN4LmxpbmVTdGFydCAtIDEsIGN4LmxpbmVTdGFydCk7XG4gICAgICAgICAgICAgICAgZm9yIChsZXQgbSBvZiBsaW5lLm1hcmtlcnMpXG4gICAgICAgICAgICAgICAgICAgIG1hcmtzLnB1c2gobSk7XG4gICAgICAgICAgICAgICAgdG8gPSBjeC5saW5lU3RhcnQgKyBsaW5lLnRleHQubGVuZ3RoO1xuICAgICAgICAgICAgICAgIGxldCBjb2RlU3RhcnQgPSBjeC5saW5lU3RhcnQgKyBsaW5lLmZpbmRDb2x1bW4obGluZS5iYXNlSW5kZW50ICsgNCk7XG4gICAgICAgICAgICAgICAgaWYgKGNvZGVTdGFydCA8IHRvKVxuICAgICAgICAgICAgICAgICAgICBhZGRDb2RlVGV4dChtYXJrcywgY29kZVN0YXJ0LCB0byk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHBlbmRpbmdNYXJrcy5sZW5ndGgpIHtcbiAgICAgICAgICAgIHBlbmRpbmdNYXJrcyA9IHBlbmRpbmdNYXJrcy5maWx0ZXIobSA9PiBtLnR5cGUgIT0gVHlwZS5Db2RlVGV4dCk7XG4gICAgICAgICAgICBpZiAocGVuZGluZ01hcmtzLmxlbmd0aClcbiAgICAgICAgICAgICAgICBsaW5lLm1hcmtlcnMgPSBwZW5kaW5nTWFya3MuY29uY2F0KGxpbmUubWFya2Vycyk7XG4gICAgICAgIH1cbiAgICAgICAgY3guYWRkTm9kZShjeC5idWZmZXIud3JpdGVFbGVtZW50cyhtYXJrcywgLWZyb20pLmZpbmlzaChUeXBlLkNvZGVCbG9jaywgdG8gLSBmcm9tKSwgZnJvbSk7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH0sXG4gICAgRmVuY2VkQ29kZShjeCwgbGluZSkge1xuICAgICAgICBsZXQgZmVuY2VFbmQgPSBpc0ZlbmNlZENvZGUobGluZSk7XG4gICAgICAgIGlmIChmZW5jZUVuZCA8IDApXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIGxldCBmcm9tID0gY3gubGluZVN0YXJ0ICsgbGluZS5wb3MsIGNoID0gbGluZS5uZXh0LCBsZW4gPSBmZW5jZUVuZCAtIGxpbmUucG9zO1xuICAgICAgICBsZXQgaW5mb0Zyb20gPSBsaW5lLnNraXBTcGFjZShmZW5jZUVuZCksIGluZm9UbyA9IHNraXBTcGFjZUJhY2sobGluZS50ZXh0LCBsaW5lLnRleHQubGVuZ3RoLCBpbmZvRnJvbSk7XG4gICAgICAgIGxldCBtYXJrcyA9IFtlbHQoVHlwZS5Db2RlTWFyaywgZnJvbSwgZnJvbSArIGxlbildO1xuICAgICAgICBpZiAoaW5mb0Zyb20gPCBpbmZvVG8pXG4gICAgICAgICAgICBtYXJrcy5wdXNoKGVsdChUeXBlLkNvZGVJbmZvLCBjeC5saW5lU3RhcnQgKyBpbmZvRnJvbSwgY3gubGluZVN0YXJ0ICsgaW5mb1RvKSk7XG4gICAgICAgIGZvciAobGV0IGZpcnN0ID0gdHJ1ZSwgZW1wdHkgPSB0cnVlLCBoYXNMaW5lID0gZmFsc2U7IGN4Lm5leHRMaW5lKCkgJiYgbGluZS5kZXB0aCA+PSBjeC5zdGFjay5sZW5ndGg7IGZpcnN0ID0gZmFsc2UpIHtcbiAgICAgICAgICAgIGxldCBpID0gbGluZS5wb3M7XG4gICAgICAgICAgICBpZiAobGluZS5pbmRlbnQgLSBsaW5lLmJhc2VJbmRlbnQgPCA0KVxuICAgICAgICAgICAgICAgIHdoaWxlIChpIDwgbGluZS50ZXh0Lmxlbmd0aCAmJiBsaW5lLnRleHQuY2hhckNvZGVBdChpKSA9PSBjaClcbiAgICAgICAgICAgICAgICAgICAgaSsrO1xuICAgICAgICAgICAgaWYgKGkgLSBsaW5lLnBvcyA+PSBsZW4gJiYgbGluZS5za2lwU3BhY2UoaSkgPT0gbGluZS50ZXh0Lmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIGZvciAobGV0IG0gb2YgbGluZS5tYXJrZXJzKVxuICAgICAgICAgICAgICAgICAgICBtYXJrcy5wdXNoKG0pO1xuICAgICAgICAgICAgICAgIGlmIChlbXB0eSAmJiBoYXNMaW5lKVxuICAgICAgICAgICAgICAgICAgICBhZGRDb2RlVGV4dChtYXJrcywgY3gubGluZVN0YXJ0IC0gMSwgY3gubGluZVN0YXJ0KTtcbiAgICAgICAgICAgICAgICBtYXJrcy5wdXNoKGVsdChUeXBlLkNvZGVNYXJrLCBjeC5saW5lU3RhcnQgKyBsaW5lLnBvcywgY3gubGluZVN0YXJ0ICsgaSkpO1xuICAgICAgICAgICAgICAgIGN4Lm5leHRMaW5lKCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBoYXNMaW5lID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBpZiAoIWZpcnN0KSB7XG4gICAgICAgICAgICAgICAgICAgIGFkZENvZGVUZXh0KG1hcmtzLCBjeC5saW5lU3RhcnQgLSAxLCBjeC5saW5lU3RhcnQpO1xuICAgICAgICAgICAgICAgICAgICBlbXB0eSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBmb3IgKGxldCBtIG9mIGxpbmUubWFya2VycylcbiAgICAgICAgICAgICAgICAgICAgbWFya3MucHVzaChtKTtcbiAgICAgICAgICAgICAgICBsZXQgdGV4dFN0YXJ0ID0gY3gubGluZVN0YXJ0ICsgbGluZS5iYXNlUG9zLCB0ZXh0RW5kID0gY3gubGluZVN0YXJ0ICsgbGluZS50ZXh0Lmxlbmd0aDtcbiAgICAgICAgICAgICAgICBpZiAodGV4dFN0YXJ0IDwgdGV4dEVuZCkge1xuICAgICAgICAgICAgICAgICAgICBhZGRDb2RlVGV4dChtYXJrcywgdGV4dFN0YXJ0LCB0ZXh0RW5kKTtcbiAgICAgICAgICAgICAgICAgICAgZW1wdHkgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY3guYWRkTm9kZShjeC5idWZmZXIud3JpdGVFbGVtZW50cyhtYXJrcywgLWZyb20pXG4gICAgICAgICAgICAuZmluaXNoKFR5cGUuRmVuY2VkQ29kZSwgY3gucHJldkxpbmVFbmQoKSAtIGZyb20pLCBmcm9tKTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSxcbiAgICBCbG9ja3F1b3RlKGN4LCBsaW5lKSB7XG4gICAgICAgIGxldCBzaXplID0gaXNCbG9ja3F1b3RlKGxpbmUpO1xuICAgICAgICBpZiAoc2l6ZSA8IDApXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIGN4LnN0YXJ0Q29udGV4dChUeXBlLkJsb2NrcXVvdGUsIGxpbmUucG9zKTtcbiAgICAgICAgY3guYWRkTm9kZShUeXBlLlF1b3RlTWFyaywgY3gubGluZVN0YXJ0ICsgbGluZS5wb3MsIGN4LmxpbmVTdGFydCArIGxpbmUucG9zICsgMSk7XG4gICAgICAgIGxpbmUubW92ZUJhc2UobGluZS5wb3MgKyBzaXplKTtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfSxcbiAgICBIb3Jpem9udGFsUnVsZShjeCwgbGluZSkge1xuICAgICAgICBpZiAoaXNIb3Jpem9udGFsUnVsZShsaW5lLCBjeCwgZmFsc2UpIDwgMClcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgbGV0IGZyb20gPSBjeC5saW5lU3RhcnQgKyBsaW5lLnBvcztcbiAgICAgICAgY3gubmV4dExpbmUoKTtcbiAgICAgICAgY3guYWRkTm9kZShUeXBlLkhvcml6b250YWxSdWxlLCBmcm9tKTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSxcbiAgICBCdWxsZXRMaXN0KGN4LCBsaW5lKSB7XG4gICAgICAgIGxldCBzaXplID0gaXNCdWxsZXRMaXN0KGxpbmUsIGN4LCBmYWxzZSk7XG4gICAgICAgIGlmIChzaXplIDwgMClcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgaWYgKGN4LmJsb2NrLnR5cGUgIT0gVHlwZS5CdWxsZXRMaXN0KVxuICAgICAgICAgICAgY3guc3RhcnRDb250ZXh0KFR5cGUuQnVsbGV0TGlzdCwgbGluZS5iYXNlUG9zLCBsaW5lLm5leHQpO1xuICAgICAgICBsZXQgbmV3QmFzZSA9IGdldExpc3RJbmRlbnQobGluZSwgbGluZS5wb3MgKyAxKTtcbiAgICAgICAgY3guc3RhcnRDb250ZXh0KFR5cGUuTGlzdEl0ZW0sIGxpbmUuYmFzZVBvcywgbmV3QmFzZSAtIGxpbmUuYmFzZUluZGVudCk7XG4gICAgICAgIGN4LmFkZE5vZGUoVHlwZS5MaXN0TWFyaywgY3gubGluZVN0YXJ0ICsgbGluZS5wb3MsIGN4LmxpbmVTdGFydCArIGxpbmUucG9zICsgc2l6ZSk7XG4gICAgICAgIGxpbmUubW92ZUJhc2VDb2x1bW4obmV3QmFzZSk7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH0sXG4gICAgT3JkZXJlZExpc3QoY3gsIGxpbmUpIHtcbiAgICAgICAgbGV0IHNpemUgPSBpc09yZGVyZWRMaXN0KGxpbmUsIGN4LCBmYWxzZSk7XG4gICAgICAgIGlmIChzaXplIDwgMClcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgaWYgKGN4LmJsb2NrLnR5cGUgIT0gVHlwZS5PcmRlcmVkTGlzdClcbiAgICAgICAgICAgIGN4LnN0YXJ0Q29udGV4dChUeXBlLk9yZGVyZWRMaXN0LCBsaW5lLmJhc2VQb3MsIGxpbmUudGV4dC5jaGFyQ29kZUF0KGxpbmUucG9zICsgc2l6ZSAtIDEpKTtcbiAgICAgICAgbGV0IG5ld0Jhc2UgPSBnZXRMaXN0SW5kZW50KGxpbmUsIGxpbmUucG9zICsgc2l6ZSk7XG4gICAgICAgIGN4LnN0YXJ0Q29udGV4dChUeXBlLkxpc3RJdGVtLCBsaW5lLmJhc2VQb3MsIG5ld0Jhc2UgLSBsaW5lLmJhc2VJbmRlbnQpO1xuICAgICAgICBjeC5hZGROb2RlKFR5cGUuTGlzdE1hcmssIGN4LmxpbmVTdGFydCArIGxpbmUucG9zLCBjeC5saW5lU3RhcnQgKyBsaW5lLnBvcyArIHNpemUpO1xuICAgICAgICBsaW5lLm1vdmVCYXNlQ29sdW1uKG5ld0Jhc2UpO1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9LFxuICAgIEFUWEhlYWRpbmcoY3gsIGxpbmUpIHtcbiAgICAgICAgbGV0IHNpemUgPSBpc0F0eEhlYWRpbmcobGluZSk7XG4gICAgICAgIGlmIChzaXplIDwgMClcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgbGV0IG9mZiA9IGxpbmUucG9zLCBmcm9tID0gY3gubGluZVN0YXJ0ICsgb2ZmO1xuICAgICAgICBsZXQgZW5kT2ZTcGFjZSA9IHNraXBTcGFjZUJhY2sobGluZS50ZXh0LCBsaW5lLnRleHQubGVuZ3RoLCBvZmYpLCBhZnRlciA9IGVuZE9mU3BhY2U7XG4gICAgICAgIHdoaWxlIChhZnRlciA+IG9mZiAmJiBsaW5lLnRleHQuY2hhckNvZGVBdChhZnRlciAtIDEpID09IGxpbmUubmV4dClcbiAgICAgICAgICAgIGFmdGVyLS07XG4gICAgICAgIGlmIChhZnRlciA9PSBlbmRPZlNwYWNlIHx8IGFmdGVyID09IG9mZiB8fCAhc3BhY2UobGluZS50ZXh0LmNoYXJDb2RlQXQoYWZ0ZXIgLSAxKSkpXG4gICAgICAgICAgICBhZnRlciA9IGxpbmUudGV4dC5sZW5ndGg7XG4gICAgICAgIGxldCBidWYgPSBjeC5idWZmZXJcbiAgICAgICAgICAgIC53cml0ZShUeXBlLkhlYWRlck1hcmssIDAsIHNpemUpXG4gICAgICAgICAgICAud3JpdGVFbGVtZW50cyhjeC5wYXJzZXIucGFyc2VJbmxpbmUobGluZS50ZXh0LnNsaWNlKG9mZiArIHNpemUgKyAxLCBhZnRlciksIGZyb20gKyBzaXplICsgMSksIC1mcm9tKTtcbiAgICAgICAgaWYgKGFmdGVyIDwgbGluZS50ZXh0Lmxlbmd0aClcbiAgICAgICAgICAgIGJ1Zi53cml0ZShUeXBlLkhlYWRlck1hcmssIGFmdGVyIC0gb2ZmLCBlbmRPZlNwYWNlIC0gb2ZmKTtcbiAgICAgICAgbGV0IG5vZGUgPSBidWYuZmluaXNoKFR5cGUuQVRYSGVhZGluZzEgLSAxICsgc2l6ZSwgbGluZS50ZXh0Lmxlbmd0aCAtIG9mZik7XG4gICAgICAgIGN4Lm5leHRMaW5lKCk7XG4gICAgICAgIGN4LmFkZE5vZGUobm9kZSwgZnJvbSk7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH0sXG4gICAgSFRNTEJsb2NrKGN4LCBsaW5lKSB7XG4gICAgICAgIGxldCB0eXBlID0gaXNIVE1MQmxvY2sobGluZSwgY3gsIGZhbHNlKTtcbiAgICAgICAgaWYgKHR5cGUgPCAwKVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICBsZXQgZnJvbSA9IGN4LmxpbmVTdGFydCArIGxpbmUucG9zLCBlbmQgPSBIVE1MQmxvY2tTdHlsZVt0eXBlXVsxXTtcbiAgICAgICAgbGV0IG1hcmtzID0gW10sIHRyYWlsaW5nID0gZW5kICE9IEVtcHR5TGluZTtcbiAgICAgICAgd2hpbGUgKCFlbmQudGVzdChsaW5lLnRleHQpICYmIGN4Lm5leHRMaW5lKCkpIHtcbiAgICAgICAgICAgIGlmIChsaW5lLmRlcHRoIDwgY3guc3RhY2subGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgdHJhaWxpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZvciAobGV0IG0gb2YgbGluZS5tYXJrZXJzKVxuICAgICAgICAgICAgICAgIG1hcmtzLnB1c2gobSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRyYWlsaW5nKVxuICAgICAgICAgICAgY3gubmV4dExpbmUoKTtcbiAgICAgICAgbGV0IG5vZGVUeXBlID0gZW5kID09IENvbW1lbnRFbmQgPyBUeXBlLkNvbW1lbnRCbG9jayA6IGVuZCA9PSBQcm9jZXNzaW5nRW5kID8gVHlwZS5Qcm9jZXNzaW5nSW5zdHJ1Y3Rpb25CbG9jayA6IFR5cGUuSFRNTEJsb2NrO1xuICAgICAgICBsZXQgdG8gPSBjeC5wcmV2TGluZUVuZCgpO1xuICAgICAgICBjeC5hZGROb2RlKGN4LmJ1ZmZlci53cml0ZUVsZW1lbnRzKG1hcmtzLCAtZnJvbSkuZmluaXNoKG5vZGVUeXBlLCB0byAtIGZyb20pLCBmcm9tKTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSxcbiAgICBTZXRleHRIZWFkaW5nOiB1bmRlZmluZWQgLy8gU3BlY2lmaWVzIHJlbGF0aXZlIHByZWNlZGVuY2UgZm9yIGJsb2NrLWNvbnRpbnVlIGZ1bmN0aW9uXG59O1xuLy8gVGhpcyBpbXBsZW1lbnRzIGEgc3RhdGUgbWFjaGluZSB0aGF0IGluY3JlbWVudGFsbHkgcGFyc2VzIGxpbmsgcmVmZXJlbmNlcy4gQXQgZWFjaFxuLy8gbmV4dCBsaW5lLCBpdCBsb29rcyBhaGVhZCB0byBzZWUgaWYgdGhlIGxpbmUgY29udGludWVzIHRoZSByZWZlcmVuY2Ugb3Igbm90LiBJZiBpdFxuLy8gZG9lc24ndCBhbmQgYSB2YWxpZCBsaW5rIGlzIGF2YWlsYWJsZSBlbmRpbmcgYmVmb3JlIHRoYXQgbGluZSwgaXQgZmluaXNoZXMgdGhhdC5cbi8vIFNpbWlsYXJseSwgb24gYGZpbmlzaGAgKHdoZW4gdGhlIGxlYWYgaXMgdGVybWluYXRlZCBieSBleHRlcm5hbCBjaXJjdW1zdGFuY2VzKSwgaXRcbi8vIGNyZWF0ZXMgYSBsaW5rIHJlZmVyZW5jZSBpZiB0aGVyZSdzIGEgdmFsaWQgcmVmZXJlbmNlIHVwIHRvIHRoZSBjdXJyZW50IHBvaW50LlxuY2xhc3MgTGlua1JlZmVyZW5jZVBhcnNlciB7XG4gICAgY29uc3RydWN0b3IobGVhZikge1xuICAgICAgICB0aGlzLnN0YWdlID0gMCAvKiBSZWZTdGFnZS5TdGFydCAqLztcbiAgICAgICAgdGhpcy5lbHRzID0gW107XG4gICAgICAgIHRoaXMucG9zID0gMDtcbiAgICAgICAgdGhpcy5zdGFydCA9IGxlYWYuc3RhcnQ7XG4gICAgICAgIHRoaXMuYWR2YW5jZShsZWFmLmNvbnRlbnQpO1xuICAgIH1cbiAgICBuZXh0TGluZShjeCwgbGluZSwgbGVhZikge1xuICAgICAgICBpZiAodGhpcy5zdGFnZSA9PSAtMSAvKiBSZWZTdGFnZS5GYWlsZWQgKi8pXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIGxldCBjb250ZW50ID0gbGVhZi5jb250ZW50ICsgXCJcXG5cIiArIGxpbmUuc2NydWIoKTtcbiAgICAgICAgbGV0IGZpbmlzaCA9IHRoaXMuYWR2YW5jZShjb250ZW50KTtcbiAgICAgICAgaWYgKGZpbmlzaCA+IC0xICYmIGZpbmlzaCA8IGNvbnRlbnQubGVuZ3RoKVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY29tcGxldGUoY3gsIGxlYWYsIGZpbmlzaCk7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgZmluaXNoKGN4LCBsZWFmKSB7XG4gICAgICAgIGlmICgodGhpcy5zdGFnZSA9PSAyIC8qIFJlZlN0YWdlLkxpbmsgKi8gfHwgdGhpcy5zdGFnZSA9PSAzIC8qIFJlZlN0YWdlLlRpdGxlICovKSAmJiBza2lwU3BhY2UobGVhZi5jb250ZW50LCB0aGlzLnBvcykgPT0gbGVhZi5jb250ZW50Lmxlbmd0aClcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbXBsZXRlKGN4LCBsZWFmLCBsZWFmLmNvbnRlbnQubGVuZ3RoKTtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBjb21wbGV0ZShjeCwgbGVhZiwgbGVuKSB7XG4gICAgICAgIGN4LmFkZExlYWZFbGVtZW50KGxlYWYsIGVsdChUeXBlLkxpbmtSZWZlcmVuY2UsIHRoaXMuc3RhcnQsIHRoaXMuc3RhcnQgKyBsZW4sIHRoaXMuZWx0cykpO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgbmV4dFN0YWdlKGVsdCkge1xuICAgICAgICBpZiAoZWx0KSB7XG4gICAgICAgICAgICB0aGlzLnBvcyA9IGVsdC50byAtIHRoaXMuc3RhcnQ7XG4gICAgICAgICAgICB0aGlzLmVsdHMucHVzaChlbHQpO1xuICAgICAgICAgICAgdGhpcy5zdGFnZSsrO1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGVsdCA9PT0gZmFsc2UpXG4gICAgICAgICAgICB0aGlzLnN0YWdlID0gLTEgLyogUmVmU3RhZ2UuRmFpbGVkICovO1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGFkdmFuY2UoY29udGVudCkge1xuICAgICAgICBmb3IgKDs7KSB7XG4gICAgICAgICAgICBpZiAodGhpcy5zdGFnZSA9PSAtMSAvKiBSZWZTdGFnZS5GYWlsZWQgKi8pIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gLTE7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICh0aGlzLnN0YWdlID09IDAgLyogUmVmU3RhZ2UuU3RhcnQgKi8pIHtcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMubmV4dFN0YWdlKHBhcnNlTGlua0xhYmVsKGNvbnRlbnQsIHRoaXMucG9zLCB0aGlzLnN0YXJ0LCB0cnVlKSkpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAtMTtcbiAgICAgICAgICAgICAgICBpZiAoY29udGVudC5jaGFyQ29kZUF0KHRoaXMucG9zKSAhPSA1OCAvKiAnOicgKi8pXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnN0YWdlID0gLTEgLyogUmVmU3RhZ2UuRmFpbGVkICovO1xuICAgICAgICAgICAgICAgIHRoaXMuZWx0cy5wdXNoKGVsdChUeXBlLkxpbmtNYXJrLCB0aGlzLnBvcyArIHRoaXMuc3RhcnQsIHRoaXMucG9zICsgdGhpcy5zdGFydCArIDEpKTtcbiAgICAgICAgICAgICAgICB0aGlzLnBvcysrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAodGhpcy5zdGFnZSA9PSAxIC8qIFJlZlN0YWdlLkxhYmVsICovKSB7XG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLm5leHRTdGFnZShwYXJzZVVSTChjb250ZW50LCBza2lwU3BhY2UoY29udGVudCwgdGhpcy5wb3MpLCB0aGlzLnN0YXJ0KSkpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAtMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHRoaXMuc3RhZ2UgPT0gMiAvKiBSZWZTdGFnZS5MaW5rICovKSB7XG4gICAgICAgICAgICAgICAgbGV0IHNraXAgPSBza2lwU3BhY2UoY29udGVudCwgdGhpcy5wb3MpLCBlbmQgPSAwO1xuICAgICAgICAgICAgICAgIGlmIChza2lwID4gdGhpcy5wb3MpIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IHRpdGxlID0gcGFyc2VMaW5rVGl0bGUoY29udGVudCwgc2tpcCwgdGhpcy5zdGFydCk7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aXRsZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHRpdGxlRW5kID0gbGluZUVuZChjb250ZW50LCB0aXRsZS50byAtIHRoaXMuc3RhcnQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRpdGxlRW5kID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubmV4dFN0YWdlKHRpdGxlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQgPSB0aXRsZUVuZDtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoIWVuZClcbiAgICAgICAgICAgICAgICAgICAgZW5kID0gbGluZUVuZChjb250ZW50LCB0aGlzLnBvcyk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGVuZCA+IDAgJiYgZW5kIDwgY29udGVudC5sZW5ndGggPyBlbmQgOiAtMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgeyAvLyBSZWZTdGFnZS5UaXRsZVxuICAgICAgICAgICAgICAgIHJldHVybiBsaW5lRW5kKGNvbnRlbnQsIHRoaXMucG9zKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbn1cbmZ1bmN0aW9uIGxpbmVFbmQodGV4dCwgcG9zKSB7XG4gICAgZm9yICg7IHBvcyA8IHRleHQubGVuZ3RoOyBwb3MrKykge1xuICAgICAgICBsZXQgbmV4dCA9IHRleHQuY2hhckNvZGVBdChwb3MpO1xuICAgICAgICBpZiAobmV4dCA9PSAxMClcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBpZiAoIXNwYWNlKG5leHQpKVxuICAgICAgICAgICAgcmV0dXJuIC0xO1xuICAgIH1cbiAgICByZXR1cm4gcG9zO1xufVxuY2xhc3MgU2V0ZXh0SGVhZGluZ1BhcnNlciB7XG4gICAgbmV4dExpbmUoY3gsIGxpbmUsIGxlYWYpIHtcbiAgICAgICAgbGV0IHVuZGVybGluZSA9IGxpbmUuZGVwdGggPCBjeC5zdGFjay5sZW5ndGggPyAtMSA6IGlzU2V0ZXh0VW5kZXJsaW5lKGxpbmUpO1xuICAgICAgICBsZXQgbmV4dCA9IGxpbmUubmV4dDtcbiAgICAgICAgaWYgKHVuZGVybGluZSA8IDApXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIGxldCB1bmRlcmxpbmVNYXJrID0gZWx0KFR5cGUuSGVhZGVyTWFyaywgY3gubGluZVN0YXJ0ICsgbGluZS5wb3MsIGN4LmxpbmVTdGFydCArIHVuZGVybGluZSk7XG4gICAgICAgIGN4Lm5leHRMaW5lKCk7XG4gICAgICAgIGN4LmFkZExlYWZFbGVtZW50KGxlYWYsIGVsdChuZXh0ID09IDYxID8gVHlwZS5TZXRleHRIZWFkaW5nMSA6IFR5cGUuU2V0ZXh0SGVhZGluZzIsIGxlYWYuc3RhcnQsIGN4LnByZXZMaW5lRW5kKCksIFtcbiAgICAgICAgICAgIC4uLmN4LnBhcnNlci5wYXJzZUlubGluZShsZWFmLmNvbnRlbnQsIGxlYWYuc3RhcnQpLFxuICAgICAgICAgICAgdW5kZXJsaW5lTWFya1xuICAgICAgICBdKSk7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBmaW5pc2goKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG59XG5jb25zdCBEZWZhdWx0TGVhZkJsb2NrcyA9IHtcbiAgICBMaW5rUmVmZXJlbmNlKF8sIGxlYWYpIHsgcmV0dXJuIGxlYWYuY29udGVudC5jaGFyQ29kZUF0KDApID09IDkxIC8qICdbJyAqLyA/IG5ldyBMaW5rUmVmZXJlbmNlUGFyc2VyKGxlYWYpIDogbnVsbDsgfSxcbiAgICBTZXRleHRIZWFkaW5nKCkgeyByZXR1cm4gbmV3IFNldGV4dEhlYWRpbmdQYXJzZXI7IH1cbn07XG5jb25zdCBEZWZhdWx0RW5kTGVhZiA9IFtcbiAgICAoXywgbGluZSkgPT4gaXNBdHhIZWFkaW5nKGxpbmUpID49IDAsXG4gICAgKF8sIGxpbmUpID0+IGlzRmVuY2VkQ29kZShsaW5lKSA+PSAwLFxuICAgIChfLCBsaW5lKSA9PiBpc0Jsb2NrcXVvdGUobGluZSkgPj0gMCxcbiAgICAocCwgbGluZSkgPT4gaXNCdWxsZXRMaXN0KGxpbmUsIHAsIHRydWUpID49IDAsXG4gICAgKHAsIGxpbmUpID0+IGlzT3JkZXJlZExpc3QobGluZSwgcCwgdHJ1ZSkgPj0gMCxcbiAgICAocCwgbGluZSkgPT4gaXNIb3Jpem9udGFsUnVsZShsaW5lLCBwLCB0cnVlKSA+PSAwLFxuICAgIChwLCBsaW5lKSA9PiBpc0hUTUxCbG9jayhsaW5lLCBwLCB0cnVlKSA+PSAwXG5dO1xuY29uc3Qgc2NhbkxpbmVSZXN1bHQgPSB7IHRleHQ6IFwiXCIsIGVuZDogMCB9O1xuLyoqXG5CbG9jay1sZXZlbCBwYXJzaW5nIGZ1bmN0aW9ucyBnZXQgYWNjZXNzIHRvIHRoaXMgY29udGV4dCBvYmplY3QuXG4qL1xuY2xhc3MgQmxvY2tDb250ZXh0IHtcbiAgICAvKipcbiAgICBAaW50ZXJuYWxcbiAgICAqL1xuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8qKlxuICAgIFRoZSBwYXJzZXIgY29uZmlndXJhdGlvbiB1c2VkLlxuICAgICovXG4gICAgcGFyc2VyLCBcbiAgICAvKipcbiAgICBAaW50ZXJuYWxcbiAgICAqL1xuICAgIGlucHV0LCBmcmFnbWVudHMsIFxuICAgIC8qKlxuICAgIEBpbnRlcm5hbFxuICAgICovXG4gICAgcmFuZ2VzKSB7XG4gICAgICAgIHRoaXMucGFyc2VyID0gcGFyc2VyO1xuICAgICAgICB0aGlzLmlucHV0ID0gaW5wdXQ7XG4gICAgICAgIHRoaXMucmFuZ2VzID0gcmFuZ2VzO1xuICAgICAgICB0aGlzLmxpbmUgPSBuZXcgTGluZSgpO1xuICAgICAgICB0aGlzLmF0RW5kID0gZmFsc2U7XG4gICAgICAgIC8qKlxuICAgICAgICBGb3IgcmV1c2VkIG5vZGVzIG9uIGdhcHMsIHdlIGNhbid0IGRpcmVjdGx5IHB1dCB0aGUgb3JpZ2luYWxcbiAgICAgICAgbm9kZSBpbnRvIHRoZSB0cmVlLCBzaW5jZSB0aGF0IG1heSBiZSBiaWdnZXIgdGhhbiBpdHMgcGFyZW50LlxuICAgICAgICBXaGVuIHRoaXMgaGFwcGVucywgd2UgY3JlYXRlIGEgZHVtbXkgdHJlZSB0aGF0IGlzIHJlcGxhY2VkIGJ5XG4gICAgICAgIHRoZSBwcm9wZXIgbm9kZSBpbiBgaW5qZWN0R2Fwc2AgQGludGVybmFsXG4gICAgICAgICovXG4gICAgICAgIHRoaXMucmV1c2VQbGFjZWhvbGRlcnMgPSBuZXcgTWFwO1xuICAgICAgICB0aGlzLnN0b3BwZWRBdCA9IG51bGw7XG4gICAgICAgIC8qKlxuICAgICAgICBUaGUgcmFuZ2UgaW5kZXggdGhhdCBhYnNvbHV0ZUxpbmVTdGFydCBwb2ludHMgaW50byBAaW50ZXJuYWxcbiAgICAgICAgKi9cbiAgICAgICAgdGhpcy5yYW5nZUkgPSAwO1xuICAgICAgICB0aGlzLnRvID0gcmFuZ2VzW3Jhbmdlcy5sZW5ndGggLSAxXS50bztcbiAgICAgICAgdGhpcy5saW5lU3RhcnQgPSB0aGlzLmFic29sdXRlTGluZVN0YXJ0ID0gdGhpcy5hYnNvbHV0ZUxpbmVFbmQgPSByYW5nZXNbMF0uZnJvbTtcbiAgICAgICAgdGhpcy5ibG9jayA9IENvbXBvc2l0ZUJsb2NrLmNyZWF0ZShUeXBlLkRvY3VtZW50LCAwLCB0aGlzLmxpbmVTdGFydCwgMCwgMCk7XG4gICAgICAgIHRoaXMuc3RhY2sgPSBbdGhpcy5ibG9ja107XG4gICAgICAgIHRoaXMuZnJhZ21lbnRzID0gZnJhZ21lbnRzLmxlbmd0aCA/IG5ldyBGcmFnbWVudEN1cnNvcihmcmFnbWVudHMsIGlucHV0KSA6IG51bGw7XG4gICAgICAgIHRoaXMucmVhZExpbmUoKTtcbiAgICB9XG4gICAgZ2V0IHBhcnNlZFBvcygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYWJzb2x1dGVMaW5lU3RhcnQ7XG4gICAgfVxuICAgIGFkdmFuY2UoKSB7XG4gICAgICAgIGlmICh0aGlzLnN0b3BwZWRBdCAhPSBudWxsICYmIHRoaXMuYWJzb2x1dGVMaW5lU3RhcnQgPiB0aGlzLnN0b3BwZWRBdClcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmZpbmlzaCgpO1xuICAgICAgICBsZXQgeyBsaW5lIH0gPSB0aGlzO1xuICAgICAgICBmb3IgKDs7KSB7XG4gICAgICAgICAgICBmb3IgKGxldCBtYXJrSSA9IDA7Oykge1xuICAgICAgICAgICAgICAgIGxldCBuZXh0ID0gbGluZS5kZXB0aCA8IHRoaXMuc3RhY2subGVuZ3RoID8gdGhpcy5zdGFja1t0aGlzLnN0YWNrLmxlbmd0aCAtIDFdIDogbnVsbDtcbiAgICAgICAgICAgICAgICB3aGlsZSAobWFya0kgPCBsaW5lLm1hcmtlcnMubGVuZ3RoICYmICghbmV4dCB8fCBsaW5lLm1hcmtlcnNbbWFya0ldLmZyb20gPCBuZXh0LmVuZCkpIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IG1hcmsgPSBsaW5lLm1hcmtlcnNbbWFya0krK107XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYWRkTm9kZShtYXJrLnR5cGUsIG1hcmsuZnJvbSwgbWFyay50byk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICghbmV4dClcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgdGhpcy5maW5pc2hDb250ZXh0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAobGluZS5wb3MgPCBsaW5lLnRleHQubGVuZ3RoKVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgLy8gRW1wdHkgbGluZVxuICAgICAgICAgICAgaWYgKCF0aGlzLm5leHRMaW5lKCkpXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZmluaXNoKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuZnJhZ21lbnRzICYmIHRoaXMucmV1c2VGcmFnbWVudChsaW5lLmJhc2VQb3MpKVxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIHN0YXJ0OiBmb3IgKDs7KSB7XG4gICAgICAgICAgICBmb3IgKGxldCB0eXBlIG9mIHRoaXMucGFyc2VyLmJsb2NrUGFyc2VycylcbiAgICAgICAgICAgICAgICBpZiAodHlwZSkge1xuICAgICAgICAgICAgICAgICAgICBsZXQgcmVzdWx0ID0gdHlwZSh0aGlzLCBsaW5lKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3VsdCAhPSBmYWxzZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3VsdCA9PSB0cnVlKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgICAgICAgICAgICAgbGluZS5mb3J3YXJkKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZSBzdGFydDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIGxldCBsZWFmID0gbmV3IExlYWZCbG9jayh0aGlzLmxpbmVTdGFydCArIGxpbmUucG9zLCBsaW5lLnRleHQuc2xpY2UobGluZS5wb3MpKTtcbiAgICAgICAgZm9yIChsZXQgcGFyc2Ugb2YgdGhpcy5wYXJzZXIubGVhZkJsb2NrUGFyc2VycylcbiAgICAgICAgICAgIGlmIChwYXJzZSkge1xuICAgICAgICAgICAgICAgIGxldCBwYXJzZXIgPSBwYXJzZSh0aGlzLCBsZWFmKTtcbiAgICAgICAgICAgICAgICBpZiAocGFyc2VyKVxuICAgICAgICAgICAgICAgICAgICBsZWFmLnBhcnNlcnMucHVzaChwYXJzZXIpO1xuICAgICAgICAgICAgfVxuICAgICAgICBsaW5lczogd2hpbGUgKHRoaXMubmV4dExpbmUoKSkge1xuICAgICAgICAgICAgaWYgKGxpbmUucG9zID09IGxpbmUudGV4dC5sZW5ndGgpXG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBpZiAobGluZS5pbmRlbnQgPCBsaW5lLmJhc2VJbmRlbnQgKyA0KSB7XG4gICAgICAgICAgICAgICAgZm9yIChsZXQgc3RvcCBvZiB0aGlzLnBhcnNlci5lbmRMZWFmQmxvY2spXG4gICAgICAgICAgICAgICAgICAgIGlmIChzdG9wKHRoaXMsIGxpbmUsIGxlYWYpKVxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWsgbGluZXM7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmb3IgKGxldCBwYXJzZXIgb2YgbGVhZi5wYXJzZXJzKVxuICAgICAgICAgICAgICAgIGlmIChwYXJzZXIubmV4dExpbmUodGhpcywgbGluZSwgbGVhZikpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgbGVhZi5jb250ZW50ICs9IFwiXFxuXCIgKyBsaW5lLnNjcnViKCk7XG4gICAgICAgICAgICBmb3IgKGxldCBtIG9mIGxpbmUubWFya2VycylcbiAgICAgICAgICAgICAgICBsZWFmLm1hcmtzLnB1c2gobSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5maW5pc2hMZWFmKGxlYWYpO1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgc3RvcEF0KHBvcykge1xuICAgICAgICBpZiAodGhpcy5zdG9wcGVkQXQgIT0gbnVsbCAmJiB0aGlzLnN0b3BwZWRBdCA8IHBvcylcbiAgICAgICAgICAgIHRocm93IG5ldyBSYW5nZUVycm9yKFwiQ2FuJ3QgbW92ZSBzdG9wcGVkQXQgZm9yd2FyZFwiKTtcbiAgICAgICAgdGhpcy5zdG9wcGVkQXQgPSBwb3M7XG4gICAgfVxuICAgIHJldXNlRnJhZ21lbnQoc3RhcnQpIHtcbiAgICAgICAgaWYgKCF0aGlzLmZyYWdtZW50cy5tb3ZlVG8odGhpcy5hYnNvbHV0ZUxpbmVTdGFydCArIHN0YXJ0LCB0aGlzLmFic29sdXRlTGluZVN0YXJ0KSB8fFxuICAgICAgICAgICAgIXRoaXMuZnJhZ21lbnRzLm1hdGNoZXModGhpcy5ibG9jay5oYXNoKSlcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgbGV0IHRha2VuID0gdGhpcy5mcmFnbWVudHMudGFrZU5vZGVzKHRoaXMpO1xuICAgICAgICBpZiAoIXRha2VuKVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB0aGlzLmFic29sdXRlTGluZVN0YXJ0ICs9IHRha2VuO1xuICAgICAgICB0aGlzLmxpbmVTdGFydCA9IHRvUmVsYXRpdmUodGhpcy5hYnNvbHV0ZUxpbmVTdGFydCwgdGhpcy5yYW5nZXMpO1xuICAgICAgICB0aGlzLm1vdmVSYW5nZUkoKTtcbiAgICAgICAgaWYgKHRoaXMuYWJzb2x1dGVMaW5lU3RhcnQgPCB0aGlzLnRvKSB7XG4gICAgICAgICAgICB0aGlzLmxpbmVTdGFydCsrO1xuICAgICAgICAgICAgdGhpcy5hYnNvbHV0ZUxpbmVTdGFydCsrO1xuICAgICAgICAgICAgdGhpcy5yZWFkTGluZSgpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5hdEVuZCA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLnJlYWRMaW5lKCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIC8qKlxuICAgIFRoZSBudW1iZXIgb2YgcGFyZW50IGJsb2NrcyBzdXJyb3VuZGluZyB0aGUgY3VycmVudCBibG9jay5cbiAgICAqL1xuICAgIGdldCBkZXB0aCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc3RhY2subGVuZ3RoO1xuICAgIH1cbiAgICAvKipcbiAgICBHZXQgdGhlIHR5cGUgb2YgdGhlIHBhcmVudCBibG9jayBhdCB0aGUgZ2l2ZW4gZGVwdGguIFdoZW4gbm9cbiAgICBkZXB0aCBpcyBwYXNzZWQsIHJldHVybiB0aGUgdHlwZSBvZiB0aGUgaW5uZXJtb3N0IHBhcmVudC5cbiAgICAqL1xuICAgIHBhcmVudFR5cGUoZGVwdGggPSB0aGlzLmRlcHRoIC0gMSkge1xuICAgICAgICByZXR1cm4gdGhpcy5wYXJzZXIubm9kZVNldC50eXBlc1t0aGlzLnN0YWNrW2RlcHRoXS50eXBlXTtcbiAgICB9XG4gICAgLyoqXG4gICAgTW92ZSB0byB0aGUgbmV4dCBpbnB1dCBsaW5lLiBUaGlzIHNob3VsZCBvbmx5IGJlIGNhbGxlZCBieVxuICAgIChub24tY29tcG9zaXRlKSBbYmxvY2sgcGFyc2Vyc10oI0Jsb2NrUGFyc2VyLnBhcnNlKSB0aGF0IGNvbnN1bWVcbiAgICB0aGUgbGluZSBkaXJlY3RseSwgb3IgbGVhZiBibG9jayBwYXJzZXJcbiAgICBbYG5leHRMaW5lYF0oI0xlYWZCbG9ja1BhcnNlci5uZXh0TGluZSkgbWV0aG9kcyB3aGVuIHRoZXlcbiAgICBjb25zdW1lIHRoZSBjdXJyZW50IGxpbmUgKGFuZCByZXR1cm4gdHJ1ZSkuXG4gICAgKi9cbiAgICBuZXh0TGluZSgpIHtcbiAgICAgICAgdGhpcy5saW5lU3RhcnQgKz0gdGhpcy5saW5lLnRleHQubGVuZ3RoO1xuICAgICAgICBpZiAodGhpcy5hYnNvbHV0ZUxpbmVFbmQgPj0gdGhpcy50bykge1xuICAgICAgICAgICAgdGhpcy5hYnNvbHV0ZUxpbmVTdGFydCA9IHRoaXMuYWJzb2x1dGVMaW5lRW5kO1xuICAgICAgICAgICAgdGhpcy5hdEVuZCA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLnJlYWRMaW5lKCk7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmxpbmVTdGFydCsrO1xuICAgICAgICAgICAgdGhpcy5hYnNvbHV0ZUxpbmVTdGFydCA9IHRoaXMuYWJzb2x1dGVMaW5lRW5kICsgMTtcbiAgICAgICAgICAgIHRoaXMubW92ZVJhbmdlSSgpO1xuICAgICAgICAgICAgdGhpcy5yZWFkTGluZSgpO1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgUmV0cmlldmUgdGhlIHRleHQgb2YgdGhlIGxpbmUgYWZ0ZXIgdGhlIGN1cnJlbnQgb25lLCB3aXRob3V0XG4gICAgYWN0dWFsbHkgbW92aW5nIHRoZSBjb250ZXh0J3MgY3VycmVudCBsaW5lIGZvcndhcmQuXG4gICAgKi9cbiAgICBwZWVrTGluZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2NhbkxpbmUodGhpcy5hYnNvbHV0ZUxpbmVFbmQgKyAxKS50ZXh0O1xuICAgIH1cbiAgICBtb3ZlUmFuZ2VJKCkge1xuICAgICAgICB3aGlsZSAodGhpcy5yYW5nZUkgPCB0aGlzLnJhbmdlcy5sZW5ndGggLSAxICYmIHRoaXMuYWJzb2x1dGVMaW5lU3RhcnQgPj0gdGhpcy5yYW5nZXNbdGhpcy5yYW5nZUldLnRvKSB7XG4gICAgICAgICAgICB0aGlzLnJhbmdlSSsrO1xuICAgICAgICAgICAgdGhpcy5hYnNvbHV0ZUxpbmVTdGFydCA9IE1hdGgubWF4KHRoaXMuYWJzb2x1dGVMaW5lU3RhcnQsIHRoaXMucmFuZ2VzW3RoaXMucmFuZ2VJXS5mcm9tKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICBAaW50ZXJuYWxcbiAgICBDb2xsZWN0IHRoZSB0ZXh0IGZvciB0aGUgbmV4dCBsaW5lLlxuICAgICovXG4gICAgc2NhbkxpbmUoc3RhcnQpIHtcbiAgICAgICAgbGV0IHIgPSBzY2FuTGluZVJlc3VsdDtcbiAgICAgICAgci5lbmQgPSBzdGFydDtcbiAgICAgICAgaWYgKHN0YXJ0ID49IHRoaXMudG8pIHtcbiAgICAgICAgICAgIHIudGV4dCA9IFwiXCI7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByLnRleHQgPSB0aGlzLmxpbmVDaHVua0F0KHN0YXJ0KTtcbiAgICAgICAgICAgIHIuZW5kICs9IHIudGV4dC5sZW5ndGg7XG4gICAgICAgICAgICBpZiAodGhpcy5yYW5nZXMubGVuZ3RoID4gMSkge1xuICAgICAgICAgICAgICAgIGxldCB0ZXh0T2Zmc2V0ID0gdGhpcy5hYnNvbHV0ZUxpbmVTdGFydCwgcmFuZ2VJID0gdGhpcy5yYW5nZUk7XG4gICAgICAgICAgICAgICAgd2hpbGUgKHRoaXMucmFuZ2VzW3JhbmdlSV0udG8gPCByLmVuZCkge1xuICAgICAgICAgICAgICAgICAgICByYW5nZUkrKztcbiAgICAgICAgICAgICAgICAgICAgbGV0IG5leHRGcm9tID0gdGhpcy5yYW5nZXNbcmFuZ2VJXS5mcm9tO1xuICAgICAgICAgICAgICAgICAgICBsZXQgYWZ0ZXIgPSB0aGlzLmxpbmVDaHVua0F0KG5leHRGcm9tKTtcbiAgICAgICAgICAgICAgICAgICAgci5lbmQgPSBuZXh0RnJvbSArIGFmdGVyLmxlbmd0aDtcbiAgICAgICAgICAgICAgICAgICAgci50ZXh0ID0gci50ZXh0LnNsaWNlKDAsIHRoaXMucmFuZ2VzW3JhbmdlSSAtIDFdLnRvIC0gdGV4dE9mZnNldCkgKyBhZnRlcjtcbiAgICAgICAgICAgICAgICAgICAgdGV4dE9mZnNldCA9IHIuZW5kIC0gci50ZXh0Lmxlbmd0aDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHI7XG4gICAgfVxuICAgIC8qKlxuICAgIEBpbnRlcm5hbFxuICAgIFBvcHVsYXRlIHRoaXMubGluZSB3aXRoIHRoZSBjb250ZW50IG9mIHRoZSBuZXh0IGxpbmUuIFNraXBcbiAgICBsZWFkaW5nIGNoYXJhY3RlcnMgY292ZXJlZCBieSBjb21wb3NpdGUgYmxvY2tzLlxuICAgICovXG4gICAgcmVhZExpbmUoKSB7XG4gICAgICAgIGxldCB7IGxpbmUgfSA9IHRoaXMsIHsgdGV4dCwgZW5kIH0gPSB0aGlzLnNjYW5MaW5lKHRoaXMuYWJzb2x1dGVMaW5lU3RhcnQpO1xuICAgICAgICB0aGlzLmFic29sdXRlTGluZUVuZCA9IGVuZDtcbiAgICAgICAgbGluZS5yZXNldCh0ZXh0KTtcbiAgICAgICAgZm9yICg7IGxpbmUuZGVwdGggPCB0aGlzLnN0YWNrLmxlbmd0aDsgbGluZS5kZXB0aCsrKSB7XG4gICAgICAgICAgICBsZXQgY3ggPSB0aGlzLnN0YWNrW2xpbmUuZGVwdGhdLCBoYW5kbGVyID0gdGhpcy5wYXJzZXIuc2tpcENvbnRleHRNYXJrdXBbY3gudHlwZV07XG4gICAgICAgICAgICBpZiAoIWhhbmRsZXIpXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVW5oYW5kbGVkIGJsb2NrIGNvbnRleHQgXCIgKyBUeXBlW2N4LnR5cGVdKTtcbiAgICAgICAgICAgIGxldCBtYXJrcyA9IHRoaXMubGluZS5tYXJrZXJzLmxlbmd0aDtcbiAgICAgICAgICAgIGlmICghaGFuZGxlcihjeCwgdGhpcywgbGluZSkpIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5saW5lLm1hcmtlcnMubGVuZ3RoID4gbWFya3MpXG4gICAgICAgICAgICAgICAgICAgIGN4LmVuZCA9IHRoaXMubGluZS5tYXJrZXJzW3RoaXMubGluZS5tYXJrZXJzLmxlbmd0aCAtIDFdLnRvO1xuICAgICAgICAgICAgICAgIGxpbmUuZm9yd2FyZCgpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbGluZS5mb3J3YXJkKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgbGluZUNodW5rQXQocG9zKSB7XG4gICAgICAgIGxldCBuZXh0ID0gdGhpcy5pbnB1dC5jaHVuayhwb3MpLCB0ZXh0O1xuICAgICAgICBpZiAoIXRoaXMuaW5wdXQubGluZUNodW5rcykge1xuICAgICAgICAgICAgbGV0IGVvbCA9IG5leHQuaW5kZXhPZihcIlxcblwiKTtcbiAgICAgICAgICAgIHRleHQgPSBlb2wgPCAwID8gbmV4dCA6IG5leHQuc2xpY2UoMCwgZW9sKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRleHQgPSBuZXh0ID09IFwiXFxuXCIgPyBcIlwiIDogbmV4dDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcG9zICsgdGV4dC5sZW5ndGggPiB0aGlzLnRvID8gdGV4dC5zbGljZSgwLCB0aGlzLnRvIC0gcG9zKSA6IHRleHQ7XG4gICAgfVxuICAgIC8qKlxuICAgIFRoZSBlbmQgcG9zaXRpb24gb2YgdGhlIHByZXZpb3VzIGxpbmUuXG4gICAgKi9cbiAgICBwcmV2TGluZUVuZCgpIHsgcmV0dXJuIHRoaXMuYXRFbmQgPyB0aGlzLmxpbmVTdGFydCA6IHRoaXMubGluZVN0YXJ0IC0gMTsgfVxuICAgIC8qKlxuICAgIEBpbnRlcm5hbFxuICAgICovXG4gICAgc3RhcnRDb250ZXh0KHR5cGUsIHN0YXJ0LCB2YWx1ZSA9IDApIHtcbiAgICAgICAgdGhpcy5ibG9jayA9IENvbXBvc2l0ZUJsb2NrLmNyZWF0ZSh0eXBlLCB2YWx1ZSwgdGhpcy5saW5lU3RhcnQgKyBzdGFydCwgdGhpcy5ibG9jay5oYXNoLCB0aGlzLmxpbmVTdGFydCArIHRoaXMubGluZS50ZXh0Lmxlbmd0aCk7XG4gICAgICAgIHRoaXMuc3RhY2sucHVzaCh0aGlzLmJsb2NrKTtcbiAgICB9XG4gICAgLyoqXG4gICAgU3RhcnQgYSBjb21wb3NpdGUgYmxvY2suIFNob3VsZCBvbmx5IGJlIGNhbGxlZCBmcm9tIFtibG9ja1xuICAgIHBhcnNlciBmdW5jdGlvbnNdKCNCbG9ja1BhcnNlci5wYXJzZSkgdGhhdCByZXR1cm4gbnVsbC5cbiAgICAqL1xuICAgIHN0YXJ0Q29tcG9zaXRlKHR5cGUsIHN0YXJ0LCB2YWx1ZSA9IDApIHtcbiAgICAgICAgdGhpcy5zdGFydENvbnRleHQodGhpcy5wYXJzZXIuZ2V0Tm9kZVR5cGUodHlwZSksIHN0YXJ0LCB2YWx1ZSk7XG4gICAgfVxuICAgIC8qKlxuICAgIEBpbnRlcm5hbFxuICAgICovXG4gICAgYWRkTm9kZShibG9jaywgZnJvbSwgdG8pIHtcbiAgICAgICAgaWYgKHR5cGVvZiBibG9jayA9PSBcIm51bWJlclwiKVxuICAgICAgICAgICAgYmxvY2sgPSBuZXcgVHJlZSh0aGlzLnBhcnNlci5ub2RlU2V0LnR5cGVzW2Jsb2NrXSwgbm9uZSwgbm9uZSwgKHRvICE9PSBudWxsICYmIHRvICE9PSB2b2lkIDAgPyB0byA6IHRoaXMucHJldkxpbmVFbmQoKSkgLSBmcm9tKTtcbiAgICAgICAgdGhpcy5ibG9jay5hZGRDaGlsZChibG9jaywgZnJvbSAtIHRoaXMuYmxvY2suZnJvbSk7XG4gICAgfVxuICAgIC8qKlxuICAgIEFkZCBhIGJsb2NrIGVsZW1lbnQuIENhbiBiZSBjYWxsZWQgYnkgW2Jsb2NrXG4gICAgcGFyc2Vyc10oI0Jsb2NrUGFyc2VyLnBhcnNlKS5cbiAgICAqL1xuICAgIGFkZEVsZW1lbnQoZWx0KSB7XG4gICAgICAgIHRoaXMuYmxvY2suYWRkQ2hpbGQoZWx0LnRvVHJlZSh0aGlzLnBhcnNlci5ub2RlU2V0KSwgZWx0LmZyb20gLSB0aGlzLmJsb2NrLmZyb20pO1xuICAgIH1cbiAgICAvKipcbiAgICBBZGQgYSBibG9jayBlbGVtZW50IGZyb20gYSBbbGVhZiBwYXJzZXJdKCNMZWFmQmxvY2tQYXJzZXIpLiBUaGlzXG4gICAgbWFrZXMgc3VyZSBhbnkgZXh0cmEgY29tcG9zaXRlIGJsb2NrIG1hcmt1cCAoc3VjaCBhcyBibG9ja3F1b3RlXG4gICAgbWFya2VycykgaW5zaWRlIHRoZSBibG9jayBhcmUgYWxzbyBhZGRlZCB0byB0aGUgc3ludGF4IHRyZWUuXG4gICAgKi9cbiAgICBhZGRMZWFmRWxlbWVudChsZWFmLCBlbHQpIHtcbiAgICAgICAgdGhpcy5hZGROb2RlKHRoaXMuYnVmZmVyXG4gICAgICAgICAgICAud3JpdGVFbGVtZW50cyhpbmplY3RNYXJrcyhlbHQuY2hpbGRyZW4sIGxlYWYubWFya3MpLCAtZWx0LmZyb20pXG4gICAgICAgICAgICAuZmluaXNoKGVsdC50eXBlLCBlbHQudG8gLSBlbHQuZnJvbSksIGVsdC5mcm9tKTtcbiAgICB9XG4gICAgLyoqXG4gICAgQGludGVybmFsXG4gICAgKi9cbiAgICBmaW5pc2hDb250ZXh0KCkge1xuICAgICAgICBsZXQgY3ggPSB0aGlzLnN0YWNrLnBvcCgpO1xuICAgICAgICBsZXQgdG9wID0gdGhpcy5zdGFja1t0aGlzLnN0YWNrLmxlbmd0aCAtIDFdO1xuICAgICAgICB0b3AuYWRkQ2hpbGQoY3gudG9UcmVlKHRoaXMucGFyc2VyLm5vZGVTZXQpLCBjeC5mcm9tIC0gdG9wLmZyb20pO1xuICAgICAgICB0aGlzLmJsb2NrID0gdG9wO1xuICAgIH1cbiAgICBmaW5pc2goKSB7XG4gICAgICAgIHdoaWxlICh0aGlzLnN0YWNrLmxlbmd0aCA+IDEpXG4gICAgICAgICAgICB0aGlzLmZpbmlzaENvbnRleHQoKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuYWRkR2Fwcyh0aGlzLmJsb2NrLnRvVHJlZSh0aGlzLnBhcnNlci5ub2RlU2V0LCB0aGlzLmxpbmVTdGFydCkpO1xuICAgIH1cbiAgICBhZGRHYXBzKHRyZWUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmFuZ2VzLmxlbmd0aCA+IDEgP1xuICAgICAgICAgICAgaW5qZWN0R2Fwcyh0aGlzLnJhbmdlcywgMCwgdHJlZS50b3BOb2RlLCB0aGlzLnJhbmdlc1swXS5mcm9tLCB0aGlzLnJldXNlUGxhY2Vob2xkZXJzKSA6IHRyZWU7XG4gICAgfVxuICAgIC8qKlxuICAgIEBpbnRlcm5hbFxuICAgICovXG4gICAgZmluaXNoTGVhZihsZWFmKSB7XG4gICAgICAgIGZvciAobGV0IHBhcnNlciBvZiBsZWFmLnBhcnNlcnMpXG4gICAgICAgICAgICBpZiAocGFyc2VyLmZpbmlzaCh0aGlzLCBsZWFmKSlcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgIGxldCBpbmxpbmUgPSBpbmplY3RNYXJrcyh0aGlzLnBhcnNlci5wYXJzZUlubGluZShsZWFmLmNvbnRlbnQsIGxlYWYuc3RhcnQpLCBsZWFmLm1hcmtzKTtcbiAgICAgICAgdGhpcy5hZGROb2RlKHRoaXMuYnVmZmVyXG4gICAgICAgICAgICAud3JpdGVFbGVtZW50cyhpbmxpbmUsIC1sZWFmLnN0YXJ0KVxuICAgICAgICAgICAgLmZpbmlzaChUeXBlLlBhcmFncmFwaCwgbGVhZi5jb250ZW50Lmxlbmd0aCksIGxlYWYuc3RhcnQpO1xuICAgIH1cbiAgICBlbHQodHlwZSwgZnJvbSwgdG8sIGNoaWxkcmVuKSB7XG4gICAgICAgIGlmICh0eXBlb2YgdHlwZSA9PSBcInN0cmluZ1wiKVxuICAgICAgICAgICAgcmV0dXJuIGVsdCh0aGlzLnBhcnNlci5nZXROb2RlVHlwZSh0eXBlKSwgZnJvbSwgdG8sIGNoaWxkcmVuKTtcbiAgICAgICAgcmV0dXJuIG5ldyBUcmVlRWxlbWVudCh0eXBlLCBmcm9tKTtcbiAgICB9XG4gICAgLyoqXG4gICAgQGludGVybmFsXG4gICAgKi9cbiAgICBnZXQgYnVmZmVyKCkgeyByZXR1cm4gbmV3IEJ1ZmZlcih0aGlzLnBhcnNlci5ub2RlU2V0KTsgfVxufVxuZnVuY3Rpb24gaW5qZWN0R2FwcyhyYW5nZXMsIHJhbmdlSSwgdHJlZSwgb2Zmc2V0LCBkdW1taWVzKSB7XG4gICAgbGV0IHJhbmdlRW5kID0gcmFuZ2VzW3JhbmdlSV0udG87XG4gICAgbGV0IGNoaWxkcmVuID0gW10sIHBvc2l0aW9ucyA9IFtdLCBzdGFydCA9IHRyZWUuZnJvbSArIG9mZnNldDtcbiAgICBmdW5jdGlvbiBtb3ZlUGFzdE5leHQodXB0bywgaW5jbHVzaXZlKSB7XG4gICAgICAgIHdoaWxlIChpbmNsdXNpdmUgPyB1cHRvID49IHJhbmdlRW5kIDogdXB0byA+IHJhbmdlRW5kKSB7XG4gICAgICAgICAgICBsZXQgc2l6ZSA9IHJhbmdlc1tyYW5nZUkgKyAxXS5mcm9tIC0gcmFuZ2VFbmQ7XG4gICAgICAgICAgICBvZmZzZXQgKz0gc2l6ZTtcbiAgICAgICAgICAgIHVwdG8gKz0gc2l6ZTtcbiAgICAgICAgICAgIHJhbmdlSSsrO1xuICAgICAgICAgICAgcmFuZ2VFbmQgPSByYW5nZXNbcmFuZ2VJXS50bztcbiAgICAgICAgfVxuICAgIH1cbiAgICBmb3IgKGxldCBjaCA9IHRyZWUuZmlyc3RDaGlsZDsgY2g7IGNoID0gY2gubmV4dFNpYmxpbmcpIHtcbiAgICAgICAgbW92ZVBhc3ROZXh0KGNoLmZyb20gKyBvZmZzZXQsIHRydWUpO1xuICAgICAgICBsZXQgZnJvbSA9IGNoLmZyb20gKyBvZmZzZXQsIG5vZGUsIHJldXNlID0gZHVtbWllcy5nZXQoY2gudHJlZSk7XG4gICAgICAgIGlmIChyZXVzZSkge1xuICAgICAgICAgICAgbm9kZSA9IHJldXNlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGNoLnRvICsgb2Zmc2V0ID4gcmFuZ2VFbmQpIHtcbiAgICAgICAgICAgIG5vZGUgPSBpbmplY3RHYXBzKHJhbmdlcywgcmFuZ2VJLCBjaCwgb2Zmc2V0LCBkdW1taWVzKTtcbiAgICAgICAgICAgIG1vdmVQYXN0TmV4dChjaC50byArIG9mZnNldCwgZmFsc2UpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgbm9kZSA9IGNoLnRvVHJlZSgpO1xuICAgICAgICB9XG4gICAgICAgIGNoaWxkcmVuLnB1c2gobm9kZSk7XG4gICAgICAgIHBvc2l0aW9ucy5wdXNoKGZyb20gLSBzdGFydCk7XG4gICAgfVxuICAgIG1vdmVQYXN0TmV4dCh0cmVlLnRvICsgb2Zmc2V0LCBmYWxzZSk7XG4gICAgcmV0dXJuIG5ldyBUcmVlKHRyZWUudHlwZSwgY2hpbGRyZW4sIHBvc2l0aW9ucywgdHJlZS50byArIG9mZnNldCAtIHN0YXJ0LCB0cmVlLnRyZWUgPyB0cmVlLnRyZWUucHJvcFZhbHVlcyA6IHVuZGVmaW5lZCk7XG59XG4vKipcbkEgTWFya2Rvd24gcGFyc2VyIGNvbmZpZ3VyYXRpb24uXG4qL1xuY2xhc3MgTWFya2Rvd25QYXJzZXIgZXh0ZW5kcyBQYXJzZXIge1xuICAgIC8qKlxuICAgIEBpbnRlcm5hbFxuICAgICovXG4gICAgY29uc3RydWN0b3IoXG4gICAgLyoqXG4gICAgVGhlIHBhcnNlcidzIHN5bnRheCBbbm9kZVxuICAgIHR5cGVzXShodHRwczovL2xlemVyLmNvZGVtaXJyb3IubmV0L2RvY3MvcmVmLyNjb21tb24uTm9kZVNldCkuXG4gICAgKi9cbiAgICBub2RlU2V0LCBcbiAgICAvKipcbiAgICBAaW50ZXJuYWxcbiAgICAqL1xuICAgIGJsb2NrUGFyc2VycywgXG4gICAgLyoqXG4gICAgQGludGVybmFsXG4gICAgKi9cbiAgICBsZWFmQmxvY2tQYXJzZXJzLCBcbiAgICAvKipcbiAgICBAaW50ZXJuYWxcbiAgICAqL1xuICAgIGJsb2NrTmFtZXMsIFxuICAgIC8qKlxuICAgIEBpbnRlcm5hbFxuICAgICovXG4gICAgZW5kTGVhZkJsb2NrLCBcbiAgICAvKipcbiAgICBAaW50ZXJuYWxcbiAgICAqL1xuICAgIHNraXBDb250ZXh0TWFya3VwLCBcbiAgICAvKipcbiAgICBAaW50ZXJuYWxcbiAgICAqL1xuICAgIGlubGluZVBhcnNlcnMsIFxuICAgIC8qKlxuICAgIEBpbnRlcm5hbFxuICAgICovXG4gICAgaW5saW5lTmFtZXMsIFxuICAgIC8qKlxuICAgIEBpbnRlcm5hbFxuICAgICovXG4gICAgd3JhcHBlcnMpIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy5ub2RlU2V0ID0gbm9kZVNldDtcbiAgICAgICAgdGhpcy5ibG9ja1BhcnNlcnMgPSBibG9ja1BhcnNlcnM7XG4gICAgICAgIHRoaXMubGVhZkJsb2NrUGFyc2VycyA9IGxlYWZCbG9ja1BhcnNlcnM7XG4gICAgICAgIHRoaXMuYmxvY2tOYW1lcyA9IGJsb2NrTmFtZXM7XG4gICAgICAgIHRoaXMuZW5kTGVhZkJsb2NrID0gZW5kTGVhZkJsb2NrO1xuICAgICAgICB0aGlzLnNraXBDb250ZXh0TWFya3VwID0gc2tpcENvbnRleHRNYXJrdXA7XG4gICAgICAgIHRoaXMuaW5saW5lUGFyc2VycyA9IGlubGluZVBhcnNlcnM7XG4gICAgICAgIHRoaXMuaW5saW5lTmFtZXMgPSBpbmxpbmVOYW1lcztcbiAgICAgICAgdGhpcy53cmFwcGVycyA9IHdyYXBwZXJzO1xuICAgICAgICAvKipcbiAgICAgICAgQGludGVybmFsXG4gICAgICAgICovXG4gICAgICAgIHRoaXMubm9kZVR5cGVzID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgICAgICAgZm9yIChsZXQgdCBvZiBub2RlU2V0LnR5cGVzKVxuICAgICAgICAgICAgdGhpcy5ub2RlVHlwZXNbdC5uYW1lXSA9IHQuaWQ7XG4gICAgfVxuICAgIGNyZWF0ZVBhcnNlKGlucHV0LCBmcmFnbWVudHMsIHJhbmdlcykge1xuICAgICAgICBsZXQgcGFyc2UgPSBuZXcgQmxvY2tDb250ZXh0KHRoaXMsIGlucHV0LCBmcmFnbWVudHMsIHJhbmdlcyk7XG4gICAgICAgIGZvciAobGV0IHcgb2YgdGhpcy53cmFwcGVycylcbiAgICAgICAgICAgIHBhcnNlID0gdyhwYXJzZSwgaW5wdXQsIGZyYWdtZW50cywgcmFuZ2VzKTtcbiAgICAgICAgcmV0dXJuIHBhcnNlO1xuICAgIH1cbiAgICAvKipcbiAgICBSZWNvbmZpZ3VyZSB0aGUgcGFyc2VyLlxuICAgICovXG4gICAgY29uZmlndXJlKHNwZWMpIHtcbiAgICAgICAgbGV0IGNvbmZpZyA9IHJlc29sdmVDb25maWcoc3BlYyk7XG4gICAgICAgIGlmICghY29uZmlnKVxuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIGxldCB7IG5vZGVTZXQsIHNraXBDb250ZXh0TWFya3VwIH0gPSB0aGlzO1xuICAgICAgICBsZXQgYmxvY2tQYXJzZXJzID0gdGhpcy5ibG9ja1BhcnNlcnMuc2xpY2UoKSwgbGVhZkJsb2NrUGFyc2VycyA9IHRoaXMubGVhZkJsb2NrUGFyc2Vycy5zbGljZSgpLCBibG9ja05hbWVzID0gdGhpcy5ibG9ja05hbWVzLnNsaWNlKCksIGlubGluZVBhcnNlcnMgPSB0aGlzLmlubGluZVBhcnNlcnMuc2xpY2UoKSwgaW5saW5lTmFtZXMgPSB0aGlzLmlubGluZU5hbWVzLnNsaWNlKCksIGVuZExlYWZCbG9jayA9IHRoaXMuZW5kTGVhZkJsb2NrLnNsaWNlKCksIHdyYXBwZXJzID0gdGhpcy53cmFwcGVycztcbiAgICAgICAgaWYgKG5vbkVtcHR5KGNvbmZpZy5kZWZpbmVOb2RlcykpIHtcbiAgICAgICAgICAgIHNraXBDb250ZXh0TWFya3VwID0gT2JqZWN0LmFzc2lnbih7fSwgc2tpcENvbnRleHRNYXJrdXApO1xuICAgICAgICAgICAgbGV0IG5vZGVUeXBlcyA9IG5vZGVTZXQudHlwZXMuc2xpY2UoKSwgc3R5bGVzO1xuICAgICAgICAgICAgZm9yIChsZXQgcyBvZiBjb25maWcuZGVmaW5lTm9kZXMpIHtcbiAgICAgICAgICAgICAgICBsZXQgeyBuYW1lLCBibG9jaywgY29tcG9zaXRlLCBzdHlsZSB9ID0gdHlwZW9mIHMgPT0gXCJzdHJpbmdcIiA/IHsgbmFtZTogcyB9IDogcztcbiAgICAgICAgICAgICAgICBpZiAobm9kZVR5cGVzLnNvbWUodCA9PiB0Lm5hbWUgPT0gbmFtZSkpXG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIGlmIChjb21wb3NpdGUpXG4gICAgICAgICAgICAgICAgICAgIHNraXBDb250ZXh0TWFya3VwW25vZGVUeXBlcy5sZW5ndGhdID1cbiAgICAgICAgICAgICAgICAgICAgICAgIChibCwgY3gsIGxpbmUpID0+IGNvbXBvc2l0ZShjeCwgbGluZSwgYmwudmFsdWUpO1xuICAgICAgICAgICAgICAgIGxldCBpZCA9IG5vZGVUeXBlcy5sZW5ndGg7XG4gICAgICAgICAgICAgICAgbGV0IGdyb3VwID0gY29tcG9zaXRlID8gW1wiQmxvY2tcIiwgXCJCbG9ja0NvbnRleHRcIl0gOiAhYmxvY2sgPyB1bmRlZmluZWRcbiAgICAgICAgICAgICAgICAgICAgOiBpZCA+PSBUeXBlLkFUWEhlYWRpbmcxICYmIGlkIDw9IFR5cGUuU2V0ZXh0SGVhZGluZzIgPyBbXCJCbG9ja1wiLCBcIkxlYWZCbG9ja1wiLCBcIkhlYWRpbmdcIl0gOiBbXCJCbG9ja1wiLCBcIkxlYWZCbG9ja1wiXTtcbiAgICAgICAgICAgICAgICBub2RlVHlwZXMucHVzaChOb2RlVHlwZS5kZWZpbmUoe1xuICAgICAgICAgICAgICAgICAgICBpZCxcbiAgICAgICAgICAgICAgICAgICAgbmFtZSxcbiAgICAgICAgICAgICAgICAgICAgcHJvcHM6IGdyb3VwICYmIFtbTm9kZVByb3AuZ3JvdXAsIGdyb3VwXV1cbiAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICAgICAgaWYgKHN0eWxlKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghc3R5bGVzKVxuICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGVzID0ge307XG4gICAgICAgICAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KHN0eWxlKSB8fCBzdHlsZSBpbnN0YW5jZW9mIFRhZylcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlc1tuYW1lXSA9IHN0eWxlO1xuICAgICAgICAgICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgICAgICAgICBPYmplY3QuYXNzaWduKHN0eWxlcywgc3R5bGUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG5vZGVTZXQgPSBuZXcgTm9kZVNldChub2RlVHlwZXMpO1xuICAgICAgICAgICAgaWYgKHN0eWxlcylcbiAgICAgICAgICAgICAgICBub2RlU2V0ID0gbm9kZVNldC5leHRlbmQoc3R5bGVUYWdzKHN0eWxlcykpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChub25FbXB0eShjb25maWcucHJvcHMpKVxuICAgICAgICAgICAgbm9kZVNldCA9IG5vZGVTZXQuZXh0ZW5kKC4uLmNvbmZpZy5wcm9wcyk7XG4gICAgICAgIGlmIChub25FbXB0eShjb25maWcucmVtb3ZlKSkge1xuICAgICAgICAgICAgZm9yIChsZXQgcm0gb2YgY29uZmlnLnJlbW92ZSkge1xuICAgICAgICAgICAgICAgIGxldCBibG9jayA9IHRoaXMuYmxvY2tOYW1lcy5pbmRleE9mKHJtKSwgaW5saW5lID0gdGhpcy5pbmxpbmVOYW1lcy5pbmRleE9mKHJtKTtcbiAgICAgICAgICAgICAgICBpZiAoYmxvY2sgPiAtMSlcbiAgICAgICAgICAgICAgICAgICAgYmxvY2tQYXJzZXJzW2Jsb2NrXSA9IGxlYWZCbG9ja1BhcnNlcnNbYmxvY2tdID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgIGlmIChpbmxpbmUgPiAtMSlcbiAgICAgICAgICAgICAgICAgICAgaW5saW5lUGFyc2Vyc1tpbmxpbmVdID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChub25FbXB0eShjb25maWcucGFyc2VCbG9jaykpIHtcbiAgICAgICAgICAgIGZvciAobGV0IHNwZWMgb2YgY29uZmlnLnBhcnNlQmxvY2spIHtcbiAgICAgICAgICAgICAgICBsZXQgZm91bmQgPSBibG9ja05hbWVzLmluZGV4T2Yoc3BlYy5uYW1lKTtcbiAgICAgICAgICAgICAgICBpZiAoZm91bmQgPiAtMSkge1xuICAgICAgICAgICAgICAgICAgICBibG9ja1BhcnNlcnNbZm91bmRdID0gc3BlYy5wYXJzZTtcbiAgICAgICAgICAgICAgICAgICAgbGVhZkJsb2NrUGFyc2Vyc1tmb3VuZF0gPSBzcGVjLmxlYWY7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBsZXQgcG9zID0gc3BlYy5iZWZvcmUgPyBmaW5kTmFtZShibG9ja05hbWVzLCBzcGVjLmJlZm9yZSlcbiAgICAgICAgICAgICAgICAgICAgICAgIDogc3BlYy5hZnRlciA/IGZpbmROYW1lKGJsb2NrTmFtZXMsIHNwZWMuYWZ0ZXIpICsgMSA6IGJsb2NrTmFtZXMubGVuZ3RoIC0gMTtcbiAgICAgICAgICAgICAgICAgICAgYmxvY2tQYXJzZXJzLnNwbGljZShwb3MsIDAsIHNwZWMucGFyc2UpO1xuICAgICAgICAgICAgICAgICAgICBsZWFmQmxvY2tQYXJzZXJzLnNwbGljZShwb3MsIDAsIHNwZWMubGVhZik7XG4gICAgICAgICAgICAgICAgICAgIGJsb2NrTmFtZXMuc3BsaWNlKHBvcywgMCwgc3BlYy5uYW1lKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHNwZWMuZW5kTGVhZilcbiAgICAgICAgICAgICAgICAgICAgZW5kTGVhZkJsb2NrLnB1c2goc3BlYy5lbmRMZWFmKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAobm9uRW1wdHkoY29uZmlnLnBhcnNlSW5saW5lKSkge1xuICAgICAgICAgICAgZm9yIChsZXQgc3BlYyBvZiBjb25maWcucGFyc2VJbmxpbmUpIHtcbiAgICAgICAgICAgICAgICBsZXQgZm91bmQgPSBpbmxpbmVOYW1lcy5pbmRleE9mKHNwZWMubmFtZSk7XG4gICAgICAgICAgICAgICAgaWYgKGZvdW5kID4gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgaW5saW5lUGFyc2Vyc1tmb3VuZF0gPSBzcGVjLnBhcnNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IHBvcyA9IHNwZWMuYmVmb3JlID8gZmluZE5hbWUoaW5saW5lTmFtZXMsIHNwZWMuYmVmb3JlKVxuICAgICAgICAgICAgICAgICAgICAgICAgOiBzcGVjLmFmdGVyID8gZmluZE5hbWUoaW5saW5lTmFtZXMsIHNwZWMuYWZ0ZXIpICsgMSA6IGlubGluZU5hbWVzLmxlbmd0aCAtIDE7XG4gICAgICAgICAgICAgICAgICAgIGlubGluZVBhcnNlcnMuc3BsaWNlKHBvcywgMCwgc3BlYy5wYXJzZSk7XG4gICAgICAgICAgICAgICAgICAgIGlubGluZU5hbWVzLnNwbGljZShwb3MsIDAsIHNwZWMubmFtZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChjb25maWcud3JhcClcbiAgICAgICAgICAgIHdyYXBwZXJzID0gd3JhcHBlcnMuY29uY2F0KGNvbmZpZy53cmFwKTtcbiAgICAgICAgcmV0dXJuIG5ldyBNYXJrZG93blBhcnNlcihub2RlU2V0LCBibG9ja1BhcnNlcnMsIGxlYWZCbG9ja1BhcnNlcnMsIGJsb2NrTmFtZXMsIGVuZExlYWZCbG9jaywgc2tpcENvbnRleHRNYXJrdXAsIGlubGluZVBhcnNlcnMsIGlubGluZU5hbWVzLCB3cmFwcGVycyk7XG4gICAgfVxuICAgIC8qKlxuICAgIEBpbnRlcm5hbFxuICAgICovXG4gICAgZ2V0Tm9kZVR5cGUobmFtZSkge1xuICAgICAgICBsZXQgZm91bmQgPSB0aGlzLm5vZGVUeXBlc1tuYW1lXTtcbiAgICAgICAgaWYgKGZvdW5kID09IG51bGwpXG4gICAgICAgICAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcihgVW5rbm93biBub2RlIHR5cGUgJyR7bmFtZX0nYCk7XG4gICAgICAgIHJldHVybiBmb3VuZDtcbiAgICB9XG4gICAgLyoqXG4gICAgUGFyc2UgdGhlIGdpdmVuIHBpZWNlIG9mIGlubGluZSB0ZXh0IGF0IHRoZSBnaXZlbiBvZmZzZXQsXG4gICAgcmV0dXJuaW5nIGFuIGFycmF5IG9mIFtgRWxlbWVudGBdKCNFbGVtZW50KSBvYmplY3RzIHJlcHJlc2VudGluZ1xuICAgIHRoZSBpbmxpbmUgY29udGVudC5cbiAgICAqL1xuICAgIHBhcnNlSW5saW5lKHRleHQsIG9mZnNldCkge1xuICAgICAgICBsZXQgY3ggPSBuZXcgSW5saW5lQ29udGV4dCh0aGlzLCB0ZXh0LCBvZmZzZXQpO1xuICAgICAgICBvdXRlcjogZm9yIChsZXQgcG9zID0gb2Zmc2V0OyBwb3MgPCBjeC5lbmQ7KSB7XG4gICAgICAgICAgICBsZXQgbmV4dCA9IGN4LmNoYXIocG9zKTtcbiAgICAgICAgICAgIGZvciAobGV0IHRva2VuIG9mIHRoaXMuaW5saW5lUGFyc2VycylcbiAgICAgICAgICAgICAgICBpZiAodG9rZW4pIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IHJlc3VsdCA9IHRva2VuKGN4LCBuZXh0LCBwb3MpO1xuICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0ID49IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBvcyA9IHJlc3VsdDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlIG91dGVyO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgcG9zKys7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGN4LnJlc29sdmVNYXJrZXJzKDApO1xuICAgIH1cbn1cbmZ1bmN0aW9uIG5vbkVtcHR5KGEpIHtcbiAgICByZXR1cm4gYSAhPSBudWxsICYmIGEubGVuZ3RoID4gMDtcbn1cbmZ1bmN0aW9uIHJlc29sdmVDb25maWcoc3BlYykge1xuICAgIGlmICghQXJyYXkuaXNBcnJheShzcGVjKSlcbiAgICAgICAgcmV0dXJuIHNwZWM7XG4gICAgaWYgKHNwZWMubGVuZ3RoID09IDApXG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIGxldCBjb25mID0gcmVzb2x2ZUNvbmZpZyhzcGVjWzBdKTtcbiAgICBpZiAoc3BlYy5sZW5ndGggPT0gMSlcbiAgICAgICAgcmV0dXJuIGNvbmY7XG4gICAgbGV0IHJlc3QgPSByZXNvbHZlQ29uZmlnKHNwZWMuc2xpY2UoMSkpO1xuICAgIGlmICghcmVzdCB8fCAhY29uZilcbiAgICAgICAgcmV0dXJuIGNvbmYgfHwgcmVzdDtcbiAgICBsZXQgY29uYyA9IChhLCBiKSA9PiAoYSB8fCBub25lKS5jb25jYXQoYiB8fCBub25lKTtcbiAgICBsZXQgd3JhcEEgPSBjb25mLndyYXAsIHdyYXBCID0gcmVzdC53cmFwO1xuICAgIHJldHVybiB7XG4gICAgICAgIHByb3BzOiBjb25jKGNvbmYucHJvcHMsIHJlc3QucHJvcHMpLFxuICAgICAgICBkZWZpbmVOb2RlczogY29uYyhjb25mLmRlZmluZU5vZGVzLCByZXN0LmRlZmluZU5vZGVzKSxcbiAgICAgICAgcGFyc2VCbG9jazogY29uYyhjb25mLnBhcnNlQmxvY2ssIHJlc3QucGFyc2VCbG9jayksXG4gICAgICAgIHBhcnNlSW5saW5lOiBjb25jKGNvbmYucGFyc2VJbmxpbmUsIHJlc3QucGFyc2VJbmxpbmUpLFxuICAgICAgICByZW1vdmU6IGNvbmMoY29uZi5yZW1vdmUsIHJlc3QucmVtb3ZlKSxcbiAgICAgICAgd3JhcDogIXdyYXBBID8gd3JhcEIgOiAhd3JhcEIgPyB3cmFwQSA6XG4gICAgICAgICAgICAoaW5uZXIsIGlucHV0LCBmcmFnbWVudHMsIHJhbmdlcykgPT4gd3JhcEEod3JhcEIoaW5uZXIsIGlucHV0LCBmcmFnbWVudHMsIHJhbmdlcyksIGlucHV0LCBmcmFnbWVudHMsIHJhbmdlcylcbiAgICB9O1xufVxuZnVuY3Rpb24gZmluZE5hbWUobmFtZXMsIG5hbWUpIHtcbiAgICBsZXQgZm91bmQgPSBuYW1lcy5pbmRleE9mKG5hbWUpO1xuICAgIGlmIChmb3VuZCA8IDApXG4gICAgICAgIHRocm93IG5ldyBSYW5nZUVycm9yKGBQb3NpdGlvbiBzcGVjaWZpZWQgcmVsYXRpdmUgdG8gdW5rbm93biBwYXJzZXIgJHtuYW1lfWApO1xuICAgIHJldHVybiBmb3VuZDtcbn1cbmxldCBub2RlVHlwZXMgPSBbTm9kZVR5cGUubm9uZV07XG5mb3IgKGxldCBpID0gMSwgbmFtZTsgbmFtZSA9IFR5cGVbaV07IGkrKykge1xuICAgIG5vZGVUeXBlc1tpXSA9IE5vZGVUeXBlLmRlZmluZSh7XG4gICAgICAgIGlkOiBpLFxuICAgICAgICBuYW1lLFxuICAgICAgICBwcm9wczogaSA+PSBUeXBlLkVzY2FwZSA/IFtdIDogW1tOb2RlUHJvcC5ncm91cCwgaSBpbiBEZWZhdWx0U2tpcE1hcmt1cCA/IFtcIkJsb2NrXCIsIFwiQmxvY2tDb250ZXh0XCJdIDogW1wiQmxvY2tcIiwgXCJMZWFmQmxvY2tcIl1dXSxcbiAgICAgICAgdG9wOiBuYW1lID09IFwiRG9jdW1lbnRcIlxuICAgIH0pO1xufVxuY29uc3Qgbm9uZSA9IFtdO1xuY2xhc3MgQnVmZmVyIHtcbiAgICBjb25zdHJ1Y3Rvcihub2RlU2V0KSB7XG4gICAgICAgIHRoaXMubm9kZVNldCA9IG5vZGVTZXQ7XG4gICAgICAgIHRoaXMuY29udGVudCA9IFtdO1xuICAgICAgICB0aGlzLm5vZGVzID0gW107XG4gICAgfVxuICAgIHdyaXRlKHR5cGUsIGZyb20sIHRvLCBjaGlsZHJlbiA9IDApIHtcbiAgICAgICAgdGhpcy5jb250ZW50LnB1c2godHlwZSwgZnJvbSwgdG8sIDQgKyBjaGlsZHJlbiAqIDQpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgd3JpdGVFbGVtZW50cyhlbHRzLCBvZmZzZXQgPSAwKSB7XG4gICAgICAgIGZvciAobGV0IGUgb2YgZWx0cylcbiAgICAgICAgICAgIGUud3JpdGVUbyh0aGlzLCBvZmZzZXQpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgZmluaXNoKHR5cGUsIGxlbmd0aCkge1xuICAgICAgICByZXR1cm4gVHJlZS5idWlsZCh7XG4gICAgICAgICAgICBidWZmZXI6IHRoaXMuY29udGVudCxcbiAgICAgICAgICAgIG5vZGVTZXQ6IHRoaXMubm9kZVNldCxcbiAgICAgICAgICAgIHJldXNlZDogdGhpcy5ub2RlcyxcbiAgICAgICAgICAgIHRvcElEOiB0eXBlLFxuICAgICAgICAgICAgbGVuZ3RoXG4gICAgICAgIH0pO1xuICAgIH1cbn1cbi8qKlxuRWxlbWVudHMgYXJlIHVzZWQgdG8gY29tcG9zZSBzeW50YXggbm9kZXMgZHVyaW5nIHBhcnNpbmcuXG4qL1xuY2xhc3MgRWxlbWVudCB7XG4gICAgLyoqXG4gICAgQGludGVybmFsXG4gICAgKi9cbiAgICBjb25zdHJ1Y3RvcihcbiAgICAvKipcbiAgICBUaGUgbm9kZSdzXG4gICAgW2lkXShodHRwczovL2xlemVyLmNvZGVtaXJyb3IubmV0L2RvY3MvcmVmLyNjb21tb24uTm9kZVR5cGUuaWQpLlxuICAgICovXG4gICAgdHlwZSwgXG4gICAgLyoqXG4gICAgVGhlIHN0YXJ0IG9mIHRoZSBub2RlLCBhcyBhbiBvZmZzZXQgZnJvbSB0aGUgc3RhcnQgb2YgdGhlIGRvY3VtZW50LlxuICAgICovXG4gICAgZnJvbSwgXG4gICAgLyoqXG4gICAgVGhlIGVuZCBvZiB0aGUgbm9kZS5cbiAgICAqL1xuICAgIHRvLCBcbiAgICAvKipcbiAgICBUaGUgbm9kZSdzIGNoaWxkIG5vZGVzIEBpbnRlcm5hbFxuICAgICovXG4gICAgY2hpbGRyZW4gPSBub25lKSB7XG4gICAgICAgIHRoaXMudHlwZSA9IHR5cGU7XG4gICAgICAgIHRoaXMuZnJvbSA9IGZyb207XG4gICAgICAgIHRoaXMudG8gPSB0bztcbiAgICAgICAgdGhpcy5jaGlsZHJlbiA9IGNoaWxkcmVuO1xuICAgIH1cbiAgICAvKipcbiAgICBAaW50ZXJuYWxcbiAgICAqL1xuICAgIHdyaXRlVG8oYnVmLCBvZmZzZXQpIHtcbiAgICAgICAgbGV0IHN0YXJ0T2ZmID0gYnVmLmNvbnRlbnQubGVuZ3RoO1xuICAgICAgICBidWYud3JpdGVFbGVtZW50cyh0aGlzLmNoaWxkcmVuLCBvZmZzZXQpO1xuICAgICAgICBidWYuY29udGVudC5wdXNoKHRoaXMudHlwZSwgdGhpcy5mcm9tICsgb2Zmc2V0LCB0aGlzLnRvICsgb2Zmc2V0LCBidWYuY29udGVudC5sZW5ndGggKyA0IC0gc3RhcnRPZmYpO1xuICAgIH1cbiAgICAvKipcbiAgICBAaW50ZXJuYWxcbiAgICAqL1xuICAgIHRvVHJlZShub2RlU2V0KSB7XG4gICAgICAgIHJldHVybiBuZXcgQnVmZmVyKG5vZGVTZXQpLndyaXRlRWxlbWVudHModGhpcy5jaGlsZHJlbiwgLXRoaXMuZnJvbSkuZmluaXNoKHRoaXMudHlwZSwgdGhpcy50byAtIHRoaXMuZnJvbSk7XG4gICAgfVxufVxuY2xhc3MgVHJlZUVsZW1lbnQge1xuICAgIGNvbnN0cnVjdG9yKHRyZWUsIGZyb20pIHtcbiAgICAgICAgdGhpcy50cmVlID0gdHJlZTtcbiAgICAgICAgdGhpcy5mcm9tID0gZnJvbTtcbiAgICB9XG4gICAgZ2V0IHRvKCkgeyByZXR1cm4gdGhpcy5mcm9tICsgdGhpcy50cmVlLmxlbmd0aDsgfVxuICAgIGdldCB0eXBlKCkgeyByZXR1cm4gdGhpcy50cmVlLnR5cGUuaWQ7IH1cbiAgICBnZXQgY2hpbGRyZW4oKSB7IHJldHVybiBub25lOyB9XG4gICAgd3JpdGVUbyhidWYsIG9mZnNldCkge1xuICAgICAgICBidWYubm9kZXMucHVzaCh0aGlzLnRyZWUpO1xuICAgICAgICBidWYuY29udGVudC5wdXNoKGJ1Zi5ub2Rlcy5sZW5ndGggLSAxLCB0aGlzLmZyb20gKyBvZmZzZXQsIHRoaXMudG8gKyBvZmZzZXQsIC0xKTtcbiAgICB9XG4gICAgdG9UcmVlKCkgeyByZXR1cm4gdGhpcy50cmVlOyB9XG59XG5mdW5jdGlvbiBlbHQodHlwZSwgZnJvbSwgdG8sIGNoaWxkcmVuKSB7XG4gICAgcmV0dXJuIG5ldyBFbGVtZW50KHR5cGUsIGZyb20sIHRvLCBjaGlsZHJlbik7XG59XG5jb25zdCBFbXBoYXNpc1VuZGVyc2NvcmUgPSB7IHJlc29sdmU6IFwiRW1waGFzaXNcIiwgbWFyazogXCJFbXBoYXNpc01hcmtcIiB9O1xuY29uc3QgRW1waGFzaXNBc3RlcmlzayA9IHsgcmVzb2x2ZTogXCJFbXBoYXNpc1wiLCBtYXJrOiBcIkVtcGhhc2lzTWFya1wiIH07XG5jb25zdCBMaW5rU3RhcnQgPSB7fSwgSW1hZ2VTdGFydCA9IHt9O1xuY2xhc3MgSW5saW5lRGVsaW1pdGVyIHtcbiAgICBjb25zdHJ1Y3Rvcih0eXBlLCBmcm9tLCB0bywgc2lkZSkge1xuICAgICAgICB0aGlzLnR5cGUgPSB0eXBlO1xuICAgICAgICB0aGlzLmZyb20gPSBmcm9tO1xuICAgICAgICB0aGlzLnRvID0gdG87XG4gICAgICAgIHRoaXMuc2lkZSA9IHNpZGU7XG4gICAgfVxufVxuY29uc3QgRXNjYXBhYmxlID0gXCIhXFxcIiMkJSYnKCkqKywtLi86Ozw9Pj9AW1xcXFxdXl9ge3x9flwiO1xubGV0IFB1bmN0dWF0aW9uID0gL1shXCIjJCUmJygpKissXFwtLlxcLzo7PD0+P0BcXFtcXFxcXFxdXl9ge3x9flxceEExXFx1MjAxMC1cXHUyMDI3XS87XG50cnkge1xuICAgIFB1bmN0dWF0aW9uID0gbmV3IFJlZ0V4cChcIltcXFxccHtTfXxcXFxccHtQfV1cIiwgXCJ1XCIpO1xufVxuY2F0Y2ggKF8pIHsgfVxuY29uc3QgRGVmYXVsdElubGluZSA9IHtcbiAgICBFc2NhcGUoY3gsIG5leHQsIHN0YXJ0KSB7XG4gICAgICAgIGlmIChuZXh0ICE9IDkyIC8qICdcXFxcJyAqLyB8fCBzdGFydCA9PSBjeC5lbmQgLSAxKVxuICAgICAgICAgICAgcmV0dXJuIC0xO1xuICAgICAgICBsZXQgZXNjYXBlZCA9IGN4LmNoYXIoc3RhcnQgKyAxKTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBFc2NhcGFibGUubGVuZ3RoOyBpKyspXG4gICAgICAgICAgICBpZiAoRXNjYXBhYmxlLmNoYXJDb2RlQXQoaSkgPT0gZXNjYXBlZClcbiAgICAgICAgICAgICAgICByZXR1cm4gY3guYXBwZW5kKGVsdChUeXBlLkVzY2FwZSwgc3RhcnQsIHN0YXJ0ICsgMikpO1xuICAgICAgICByZXR1cm4gLTE7XG4gICAgfSxcbiAgICBFbnRpdHkoY3gsIG5leHQsIHN0YXJ0KSB7XG4gICAgICAgIGlmIChuZXh0ICE9IDM4IC8qICcmJyAqLylcbiAgICAgICAgICAgIHJldHVybiAtMTtcbiAgICAgICAgbGV0IG0gPSAvXig/OiNcXGQrfCN4W2EtZlxcZF0rfFxcdyspOy9pLmV4ZWMoY3guc2xpY2Uoc3RhcnQgKyAxLCBzdGFydCArIDMxKSk7XG4gICAgICAgIHJldHVybiBtID8gY3guYXBwZW5kKGVsdChUeXBlLkVudGl0eSwgc3RhcnQsIHN0YXJ0ICsgMSArIG1bMF0ubGVuZ3RoKSkgOiAtMTtcbiAgICB9LFxuICAgIElubGluZUNvZGUoY3gsIG5leHQsIHN0YXJ0KSB7XG4gICAgICAgIGlmIChuZXh0ICE9IDk2IC8qICdgJyAqLyB8fCBzdGFydCAmJiBjeC5jaGFyKHN0YXJ0IC0gMSkgPT0gOTYpXG4gICAgICAgICAgICByZXR1cm4gLTE7XG4gICAgICAgIGxldCBwb3MgPSBzdGFydCArIDE7XG4gICAgICAgIHdoaWxlIChwb3MgPCBjeC5lbmQgJiYgY3guY2hhcihwb3MpID09IDk2KVxuICAgICAgICAgICAgcG9zKys7XG4gICAgICAgIGxldCBzaXplID0gcG9zIC0gc3RhcnQsIGN1clNpemUgPSAwO1xuICAgICAgICBmb3IgKDsgcG9zIDwgY3guZW5kOyBwb3MrKykge1xuICAgICAgICAgICAgaWYgKGN4LmNoYXIocG9zKSA9PSA5Nikge1xuICAgICAgICAgICAgICAgIGN1clNpemUrKztcbiAgICAgICAgICAgICAgICBpZiAoY3VyU2l6ZSA9PSBzaXplICYmIGN4LmNoYXIocG9zICsgMSkgIT0gOTYpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBjeC5hcHBlbmQoZWx0KFR5cGUuSW5saW5lQ29kZSwgc3RhcnQsIHBvcyArIDEsIFtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsdChUeXBlLkNvZGVNYXJrLCBzdGFydCwgc3RhcnQgKyBzaXplKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsdChUeXBlLkNvZGVNYXJrLCBwb3MgKyAxIC0gc2l6ZSwgcG9zICsgMSlcbiAgICAgICAgICAgICAgICAgICAgXSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgY3VyU2l6ZSA9IDA7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIC0xO1xuICAgIH0sXG4gICAgSFRNTFRhZyhjeCwgbmV4dCwgc3RhcnQpIHtcbiAgICAgICAgaWYgKG5leHQgIT0gNjAgLyogJzwnICovIHx8IHN0YXJ0ID09IGN4LmVuZCAtIDEpXG4gICAgICAgICAgICByZXR1cm4gLTE7XG4gICAgICAgIGxldCBhZnRlciA9IGN4LnNsaWNlKHN0YXJ0ICsgMSwgY3guZW5kKTtcbiAgICAgICAgbGV0IHVybCA9IC9eKD86W2Etel1bLVxcdysuXSs6W15cXHM+XSt8W2EtelxcZC4hIyQlJicqKy89P15fYHt8fX4tXStAW2EtelxcZF0oPzpbYS16XFxkLV17MCw2MX1bYS16XFxkXSk/KD86XFwuW2EtelxcZF0oPzpbYS16XFxkLV17MCw2MX1bYS16XFxkXSk/KSopPi9pLmV4ZWMoYWZ0ZXIpO1xuICAgICAgICBpZiAodXJsKSB7XG4gICAgICAgICAgICByZXR1cm4gY3guYXBwZW5kKGVsdChUeXBlLkF1dG9saW5rLCBzdGFydCwgc3RhcnQgKyAxICsgdXJsWzBdLmxlbmd0aCwgW1xuICAgICAgICAgICAgICAgIGVsdChUeXBlLkxpbmtNYXJrLCBzdGFydCwgc3RhcnQgKyAxKSxcbiAgICAgICAgICAgICAgICAvLyB1cmxbMF0gaW5jbHVkZXMgdGhlIGNsb3NpbmcgYnJhY2tldCwgc28gZXhjbHVkZSBpdCBmcm9tIHRoaXMgc2xpY2VcbiAgICAgICAgICAgICAgICBlbHQoVHlwZS5VUkwsIHN0YXJ0ICsgMSwgc3RhcnQgKyB1cmxbMF0ubGVuZ3RoKSxcbiAgICAgICAgICAgICAgICBlbHQoVHlwZS5MaW5rTWFyaywgc3RhcnQgKyB1cmxbMF0ubGVuZ3RoLCBzdGFydCArIDEgKyB1cmxbMF0ubGVuZ3RoKVxuICAgICAgICAgICAgXSkpO1xuICAgICAgICB9XG4gICAgICAgIGxldCBjb21tZW50ID0gL14hLS1bXj5dKD86LVteLV18W14tXSkqPy0tPi9pLmV4ZWMoYWZ0ZXIpO1xuICAgICAgICBpZiAoY29tbWVudClcbiAgICAgICAgICAgIHJldHVybiBjeC5hcHBlbmQoZWx0KFR5cGUuQ29tbWVudCwgc3RhcnQsIHN0YXJ0ICsgMSArIGNvbW1lbnRbMF0ubGVuZ3RoKSk7XG4gICAgICAgIGxldCBwcm9jSW5zdCA9IC9eXFw/W15dKj9cXD8+Ly5leGVjKGFmdGVyKTtcbiAgICAgICAgaWYgKHByb2NJbnN0KVxuICAgICAgICAgICAgcmV0dXJuIGN4LmFwcGVuZChlbHQoVHlwZS5Qcm9jZXNzaW5nSW5zdHJ1Y3Rpb24sIHN0YXJ0LCBzdGFydCArIDEgKyBwcm9jSW5zdFswXS5sZW5ndGgpKTtcbiAgICAgICAgbGV0IG0gPSAvXig/OiFbQS1aXVteXSo/PnwhXFxbQ0RBVEFcXFtbXl0qP1xcXVxcXT58XFwvXFxzKlthLXpBLVpdW1xcdy1dKlxccyo+fFxccypbYS16QS1aXVtcXHctXSooXFxzK1thLXpBLVo6X11bXFx3LS46XSooPzpcXHMqPVxccyooPzpbXlxcc1wiJz08PmBdK3wnW14nXSonfFwiW15cIl0qXCIpKT8pKlxccyooXFwvXFxzKik/PikvLmV4ZWMoYWZ0ZXIpO1xuICAgICAgICBpZiAoIW0pXG4gICAgICAgICAgICByZXR1cm4gLTE7XG4gICAgICAgIHJldHVybiBjeC5hcHBlbmQoZWx0KFR5cGUuSFRNTFRhZywgc3RhcnQsIHN0YXJ0ICsgMSArIG1bMF0ubGVuZ3RoKSk7XG4gICAgfSxcbiAgICBFbXBoYXNpcyhjeCwgbmV4dCwgc3RhcnQpIHtcbiAgICAgICAgaWYgKG5leHQgIT0gOTUgJiYgbmV4dCAhPSA0MilcbiAgICAgICAgICAgIHJldHVybiAtMTtcbiAgICAgICAgbGV0IHBvcyA9IHN0YXJ0ICsgMTtcbiAgICAgICAgd2hpbGUgKGN4LmNoYXIocG9zKSA9PSBuZXh0KVxuICAgICAgICAgICAgcG9zKys7XG4gICAgICAgIGxldCBiZWZvcmUgPSBjeC5zbGljZShzdGFydCAtIDEsIHN0YXJ0KSwgYWZ0ZXIgPSBjeC5zbGljZShwb3MsIHBvcyArIDEpO1xuICAgICAgICBsZXQgcEJlZm9yZSA9IFB1bmN0dWF0aW9uLnRlc3QoYmVmb3JlKSwgcEFmdGVyID0gUHVuY3R1YXRpb24udGVzdChhZnRlcik7XG4gICAgICAgIGxldCBzQmVmb3JlID0gL1xcc3xeJC8udGVzdChiZWZvcmUpLCBzQWZ0ZXIgPSAvXFxzfF4kLy50ZXN0KGFmdGVyKTtcbiAgICAgICAgbGV0IGxlZnRGbGFua2luZyA9ICFzQWZ0ZXIgJiYgKCFwQWZ0ZXIgfHwgc0JlZm9yZSB8fCBwQmVmb3JlKTtcbiAgICAgICAgbGV0IHJpZ2h0RmxhbmtpbmcgPSAhc0JlZm9yZSAmJiAoIXBCZWZvcmUgfHwgc0FmdGVyIHx8IHBBZnRlcik7XG4gICAgICAgIGxldCBjYW5PcGVuID0gbGVmdEZsYW5raW5nICYmIChuZXh0ID09IDQyIHx8ICFyaWdodEZsYW5raW5nIHx8IHBCZWZvcmUpO1xuICAgICAgICBsZXQgY2FuQ2xvc2UgPSByaWdodEZsYW5raW5nICYmIChuZXh0ID09IDQyIHx8ICFsZWZ0RmxhbmtpbmcgfHwgcEFmdGVyKTtcbiAgICAgICAgcmV0dXJuIGN4LmFwcGVuZChuZXcgSW5saW5lRGVsaW1pdGVyKG5leHQgPT0gOTUgPyBFbXBoYXNpc1VuZGVyc2NvcmUgOiBFbXBoYXNpc0FzdGVyaXNrLCBzdGFydCwgcG9zLCAoY2FuT3BlbiA/IDEgLyogTWFyay5PcGVuICovIDogMCAvKiBNYXJrLk5vbmUgKi8pIHwgKGNhbkNsb3NlID8gMiAvKiBNYXJrLkNsb3NlICovIDogMCAvKiBNYXJrLk5vbmUgKi8pKSk7XG4gICAgfSxcbiAgICBIYXJkQnJlYWsoY3gsIG5leHQsIHN0YXJ0KSB7XG4gICAgICAgIGlmIChuZXh0ID09IDkyIC8qICdcXFxcJyAqLyAmJiBjeC5jaGFyKHN0YXJ0ICsgMSkgPT0gMTAgLyogJ1xcbicgKi8pXG4gICAgICAgICAgICByZXR1cm4gY3guYXBwZW5kKGVsdChUeXBlLkhhcmRCcmVhaywgc3RhcnQsIHN0YXJ0ICsgMikpO1xuICAgICAgICBpZiAobmV4dCA9PSAzMikge1xuICAgICAgICAgICAgbGV0IHBvcyA9IHN0YXJ0ICsgMTtcbiAgICAgICAgICAgIHdoaWxlIChjeC5jaGFyKHBvcykgPT0gMzIpXG4gICAgICAgICAgICAgICAgcG9zKys7XG4gICAgICAgICAgICBpZiAoY3guY2hhcihwb3MpID09IDEwICYmIHBvcyA+PSBzdGFydCArIDIpXG4gICAgICAgICAgICAgICAgcmV0dXJuIGN4LmFwcGVuZChlbHQoVHlwZS5IYXJkQnJlYWssIHN0YXJ0LCBwb3MgKyAxKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIC0xO1xuICAgIH0sXG4gICAgTGluayhjeCwgbmV4dCwgc3RhcnQpIHtcbiAgICAgICAgcmV0dXJuIG5leHQgPT0gOTEgLyogJ1snICovID8gY3guYXBwZW5kKG5ldyBJbmxpbmVEZWxpbWl0ZXIoTGlua1N0YXJ0LCBzdGFydCwgc3RhcnQgKyAxLCAxIC8qIE1hcmsuT3BlbiAqLykpIDogLTE7XG4gICAgfSxcbiAgICBJbWFnZShjeCwgbmV4dCwgc3RhcnQpIHtcbiAgICAgICAgcmV0dXJuIG5leHQgPT0gMzMgLyogJyEnICovICYmIGN4LmNoYXIoc3RhcnQgKyAxKSA9PSA5MSAvKiAnWycgKi9cbiAgICAgICAgICAgID8gY3guYXBwZW5kKG5ldyBJbmxpbmVEZWxpbWl0ZXIoSW1hZ2VTdGFydCwgc3RhcnQsIHN0YXJ0ICsgMiwgMSAvKiBNYXJrLk9wZW4gKi8pKSA6IC0xO1xuICAgIH0sXG4gICAgTGlua0VuZChjeCwgbmV4dCwgc3RhcnQpIHtcbiAgICAgICAgaWYgKG5leHQgIT0gOTMgLyogJ10nICovKVxuICAgICAgICAgICAgcmV0dXJuIC0xO1xuICAgICAgICAvLyBTY2FubmluZyBiYWNrIHRvIHRoZSBuZXh0IGxpbmsvaW1hZ2Ugc3RhcnQgbWFya2VyXG4gICAgICAgIGZvciAobGV0IGkgPSBjeC5wYXJ0cy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuICAgICAgICAgICAgbGV0IHBhcnQgPSBjeC5wYXJ0c1tpXTtcbiAgICAgICAgICAgIGlmIChwYXJ0IGluc3RhbmNlb2YgSW5saW5lRGVsaW1pdGVyICYmIChwYXJ0LnR5cGUgPT0gTGlua1N0YXJ0IHx8IHBhcnQudHlwZSA9PSBJbWFnZVN0YXJ0KSkge1xuICAgICAgICAgICAgICAgIC8vIElmIHRoaXMgb25lIGhhcyBiZWVuIHNldCBpbnZhbGlkIChiZWNhdXNlIGl0IHdvdWxkIHByb2R1Y2VcbiAgICAgICAgICAgICAgICAvLyBhIG5lc3RlZCBsaW5rKSBvciB0aGVyZSdzIG5vIHZhbGlkIGxpbmsgaGVyZSBpZ25vcmUgYm90aC5cbiAgICAgICAgICAgICAgICBpZiAoIXBhcnQuc2lkZSB8fCBjeC5za2lwU3BhY2UocGFydC50bykgPT0gc3RhcnQgJiYgIS9bKFxcW10vLnRlc3QoY3guc2xpY2Uoc3RhcnQgKyAxLCBzdGFydCArIDIpKSkge1xuICAgICAgICAgICAgICAgICAgICBjeC5wYXJ0c1tpXSA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAtMTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gRmluaXNoIHRoZSBjb250ZW50IGFuZCByZXBsYWNlIHRoZSBlbnRpcmUgcmFuZ2UgaW5cbiAgICAgICAgICAgICAgICAvLyB0aGlzLnBhcnRzIHdpdGggdGhlIGxpbmsvaW1hZ2Ugbm9kZS5cbiAgICAgICAgICAgICAgICBsZXQgY29udGVudCA9IGN4LnRha2VDb250ZW50KGkpO1xuICAgICAgICAgICAgICAgIGxldCBsaW5rID0gY3gucGFydHNbaV0gPSBmaW5pc2hMaW5rKGN4LCBjb250ZW50LCBwYXJ0LnR5cGUgPT0gTGlua1N0YXJ0ID8gVHlwZS5MaW5rIDogVHlwZS5JbWFnZSwgcGFydC5mcm9tLCBzdGFydCArIDEpO1xuICAgICAgICAgICAgICAgIC8vIFNldCBhbnkgb3Blbi1saW5rIG1hcmtlcnMgYmVmb3JlIHRoaXMgbGluayB0byBpbnZhbGlkLlxuICAgICAgICAgICAgICAgIGlmIChwYXJ0LnR5cGUgPT0gTGlua1N0YXJ0KVxuICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IGk7IGorKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHAgPSBjeC5wYXJ0c1tqXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwIGluc3RhbmNlb2YgSW5saW5lRGVsaW1pdGVyICYmIHAudHlwZSA9PSBMaW5rU3RhcnQpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcC5zaWRlID0gMCAvKiBNYXJrLk5vbmUgKi87XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gbGluay50bztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gLTE7XG4gICAgfVxufTtcbmZ1bmN0aW9uIGZpbmlzaExpbmsoY3gsIGNvbnRlbnQsIHR5cGUsIHN0YXJ0LCBzdGFydFBvcykge1xuICAgIGxldCB7IHRleHQgfSA9IGN4LCBuZXh0ID0gY3guY2hhcihzdGFydFBvcyksIGVuZFBvcyA9IHN0YXJ0UG9zO1xuICAgIGNvbnRlbnQudW5zaGlmdChlbHQoVHlwZS5MaW5rTWFyaywgc3RhcnQsIHN0YXJ0ICsgKHR5cGUgPT0gVHlwZS5JbWFnZSA/IDIgOiAxKSkpO1xuICAgIGNvbnRlbnQucHVzaChlbHQoVHlwZS5MaW5rTWFyaywgc3RhcnRQb3MgLSAxLCBzdGFydFBvcykpO1xuICAgIGlmIChuZXh0ID09IDQwIC8qICcoJyAqLykge1xuICAgICAgICBsZXQgcG9zID0gY3guc2tpcFNwYWNlKHN0YXJ0UG9zICsgMSk7XG4gICAgICAgIGxldCBkZXN0ID0gcGFyc2VVUkwodGV4dCwgcG9zIC0gY3gub2Zmc2V0LCBjeC5vZmZzZXQpLCB0aXRsZTtcbiAgICAgICAgaWYgKGRlc3QpIHtcbiAgICAgICAgICAgIHBvcyA9IGN4LnNraXBTcGFjZShkZXN0LnRvKTtcbiAgICAgICAgICAgIC8vIFRoZSBkZXN0aW5hdGlvbiBhbmQgdGl0bGUgbXVzdCBiZSBzZXBhcmF0ZWQgYnkgd2hpdGVzcGFjZVxuICAgICAgICAgICAgaWYgKHBvcyAhPSBkZXN0LnRvKSB7XG4gICAgICAgICAgICAgICAgdGl0bGUgPSBwYXJzZUxpbmtUaXRsZSh0ZXh0LCBwb3MgLSBjeC5vZmZzZXQsIGN4Lm9mZnNldCk7XG4gICAgICAgICAgICAgICAgaWYgKHRpdGxlKVxuICAgICAgICAgICAgICAgICAgICBwb3MgPSBjeC5za2lwU3BhY2UodGl0bGUudG8pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChjeC5jaGFyKHBvcykgPT0gNDEgLyogJyknICovKSB7XG4gICAgICAgICAgICBjb250ZW50LnB1c2goZWx0KFR5cGUuTGlua01hcmssIHN0YXJ0UG9zLCBzdGFydFBvcyArIDEpKTtcbiAgICAgICAgICAgIGVuZFBvcyA9IHBvcyArIDE7XG4gICAgICAgICAgICBpZiAoZGVzdClcbiAgICAgICAgICAgICAgICBjb250ZW50LnB1c2goZGVzdCk7XG4gICAgICAgICAgICBpZiAodGl0bGUpXG4gICAgICAgICAgICAgICAgY29udGVudC5wdXNoKHRpdGxlKTtcbiAgICAgICAgICAgIGNvbnRlbnQucHVzaChlbHQoVHlwZS5MaW5rTWFyaywgcG9zLCBlbmRQb3MpKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBlbHNlIGlmIChuZXh0ID09IDkxIC8qICdbJyAqLykge1xuICAgICAgICBsZXQgbGFiZWwgPSBwYXJzZUxpbmtMYWJlbCh0ZXh0LCBzdGFydFBvcyAtIGN4Lm9mZnNldCwgY3gub2Zmc2V0LCBmYWxzZSk7XG4gICAgICAgIGlmIChsYWJlbCkge1xuICAgICAgICAgICAgY29udGVudC5wdXNoKGxhYmVsKTtcbiAgICAgICAgICAgIGVuZFBvcyA9IGxhYmVsLnRvO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBlbHQodHlwZSwgc3RhcnQsIGVuZFBvcywgY29udGVudCk7XG59XG4vLyBUaGVzZSByZXR1cm4gYG51bGxgIHdoZW4gZmFsbGluZyBvZmYgdGhlIGVuZCBvZiB0aGUgaW5wdXQsIGBmYWxzZWBcbi8vIHdoZW4gcGFyc2luZyBmYWlscyBvdGhlcndpc2UgKGZvciB1c2UgaW4gdGhlIGluY3JlbWVudGFsIGxpbmtcbi8vIHJlZmVyZW5jZSBwYXJzZXIpLlxuZnVuY3Rpb24gcGFyc2VVUkwodGV4dCwgc3RhcnQsIG9mZnNldCkge1xuICAgIGxldCBuZXh0ID0gdGV4dC5jaGFyQ29kZUF0KHN0YXJ0KTtcbiAgICBpZiAobmV4dCA9PSA2MCAvKiAnPCcgKi8pIHtcbiAgICAgICAgZm9yIChsZXQgcG9zID0gc3RhcnQgKyAxOyBwb3MgPCB0ZXh0Lmxlbmd0aDsgcG9zKyspIHtcbiAgICAgICAgICAgIGxldCBjaCA9IHRleHQuY2hhckNvZGVBdChwb3MpO1xuICAgICAgICAgICAgaWYgKGNoID09IDYyIC8qICc+JyAqLylcbiAgICAgICAgICAgICAgICByZXR1cm4gZWx0KFR5cGUuVVJMLCBzdGFydCArIG9mZnNldCwgcG9zICsgMSArIG9mZnNldCk7XG4gICAgICAgICAgICBpZiAoY2ggPT0gNjAgfHwgY2ggPT0gMTAgLyogJzxcXG4nICovKVxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGxldCBkZXB0aCA9IDAsIHBvcyA9IHN0YXJ0O1xuICAgICAgICBmb3IgKGxldCBlc2NhcGVkID0gZmFsc2U7IHBvcyA8IHRleHQubGVuZ3RoOyBwb3MrKykge1xuICAgICAgICAgICAgbGV0IGNoID0gdGV4dC5jaGFyQ29kZUF0KHBvcyk7XG4gICAgICAgICAgICBpZiAoc3BhY2UoY2gpKSB7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChlc2NhcGVkKSB7XG4gICAgICAgICAgICAgICAgZXNjYXBlZCA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2ggPT0gNDAgLyogJygnICovKSB7XG4gICAgICAgICAgICAgICAgZGVwdGgrKztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNoID09IDQxIC8qICcpJyAqLykge1xuICAgICAgICAgICAgICAgIGlmICghZGVwdGgpXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGRlcHRoLS07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaCA9PSA5MiAvKiAnXFxcXCcgKi8pIHtcbiAgICAgICAgICAgICAgICBlc2NhcGVkID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcG9zID4gc3RhcnQgPyBlbHQoVHlwZS5VUkwsIHN0YXJ0ICsgb2Zmc2V0LCBwb3MgKyBvZmZzZXQpIDogcG9zID09IHRleHQubGVuZ3RoID8gbnVsbCA6IGZhbHNlO1xuICAgIH1cbn1cbmZ1bmN0aW9uIHBhcnNlTGlua1RpdGxlKHRleHQsIHN0YXJ0LCBvZmZzZXQpIHtcbiAgICBsZXQgbmV4dCA9IHRleHQuY2hhckNvZGVBdChzdGFydCk7XG4gICAgaWYgKG5leHQgIT0gMzkgJiYgbmV4dCAhPSAzNCAmJiBuZXh0ICE9IDQwIC8qICdcIlxcJygnICovKVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgbGV0IGVuZCA9IG5leHQgPT0gNDAgPyA0MSA6IG5leHQ7XG4gICAgZm9yIChsZXQgcG9zID0gc3RhcnQgKyAxLCBlc2NhcGVkID0gZmFsc2U7IHBvcyA8IHRleHQubGVuZ3RoOyBwb3MrKykge1xuICAgICAgICBsZXQgY2ggPSB0ZXh0LmNoYXJDb2RlQXQocG9zKTtcbiAgICAgICAgaWYgKGVzY2FwZWQpXG4gICAgICAgICAgICBlc2NhcGVkID0gZmFsc2U7XG4gICAgICAgIGVsc2UgaWYgKGNoID09IGVuZClcbiAgICAgICAgICAgIHJldHVybiBlbHQoVHlwZS5MaW5rVGl0bGUsIHN0YXJ0ICsgb2Zmc2V0LCBwb3MgKyAxICsgb2Zmc2V0KTtcbiAgICAgICAgZWxzZSBpZiAoY2ggPT0gOTIgLyogJ1xcXFwnICovKVxuICAgICAgICAgICAgZXNjYXBlZCA9IHRydWU7XG4gICAgfVxuICAgIHJldHVybiBudWxsO1xufVxuZnVuY3Rpb24gcGFyc2VMaW5rTGFiZWwodGV4dCwgc3RhcnQsIG9mZnNldCwgcmVxdWlyZU5vbldTKSB7XG4gICAgZm9yIChsZXQgZXNjYXBlZCA9IGZhbHNlLCBwb3MgPSBzdGFydCArIDEsIGVuZCA9IE1hdGgubWluKHRleHQubGVuZ3RoLCBwb3MgKyA5OTkpOyBwb3MgPCBlbmQ7IHBvcysrKSB7XG4gICAgICAgIGxldCBjaCA9IHRleHQuY2hhckNvZGVBdChwb3MpO1xuICAgICAgICBpZiAoZXNjYXBlZClcbiAgICAgICAgICAgIGVzY2FwZWQgPSBmYWxzZTtcbiAgICAgICAgZWxzZSBpZiAoY2ggPT0gOTMgLyogJ10nICovKVxuICAgICAgICAgICAgcmV0dXJuIHJlcXVpcmVOb25XUyA/IGZhbHNlIDogZWx0KFR5cGUuTGlua0xhYmVsLCBzdGFydCArIG9mZnNldCwgcG9zICsgMSArIG9mZnNldCk7XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgaWYgKHJlcXVpcmVOb25XUyAmJiAhc3BhY2UoY2gpKVxuICAgICAgICAgICAgICAgIHJlcXVpcmVOb25XUyA9IGZhbHNlO1xuICAgICAgICAgICAgaWYgKGNoID09IDkxIC8qICdbJyAqLylcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICBlbHNlIGlmIChjaCA9PSA5MiAvKiAnXFxcXCcgKi8pXG4gICAgICAgICAgICAgICAgZXNjYXBlZCA9IHRydWU7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG59XG4vKipcbklubGluZSBwYXJzaW5nIGZ1bmN0aW9ucyBnZXQgYWNjZXNzIHRvIHRoaXMgY29udGV4dCwgYW5kIHVzZSBpdCB0b1xucmVhZCB0aGUgY29udGVudCBhbmQgZW1pdCBzeW50YXggbm9kZXMuXG4qL1xuY2xhc3MgSW5saW5lQ29udGV4dCB7XG4gICAgLyoqXG4gICAgQGludGVybmFsXG4gICAgKi9cbiAgICBjb25zdHJ1Y3RvcihcbiAgICAvKipcbiAgICBUaGUgcGFyc2VyIHRoYXQgaXMgYmVpbmcgdXNlZC5cbiAgICAqL1xuICAgIHBhcnNlciwgXG4gICAgLyoqXG4gICAgVGhlIHRleHQgb2YgdGhpcyBpbmxpbmUgc2VjdGlvbi5cbiAgICAqL1xuICAgIHRleHQsIFxuICAgIC8qKlxuICAgIFRoZSBzdGFydGluZyBvZmZzZXQgb2YgdGhlIHNlY3Rpb24gaW4gdGhlIGRvY3VtZW50LlxuICAgICovXG4gICAgb2Zmc2V0KSB7XG4gICAgICAgIHRoaXMucGFyc2VyID0gcGFyc2VyO1xuICAgICAgICB0aGlzLnRleHQgPSB0ZXh0O1xuICAgICAgICB0aGlzLm9mZnNldCA9IG9mZnNldDtcbiAgICAgICAgLyoqXG4gICAgICAgIEBpbnRlcm5hbFxuICAgICAgICAqL1xuICAgICAgICB0aGlzLnBhcnRzID0gW107XG4gICAgfVxuICAgIC8qKlxuICAgIEdldCB0aGUgY2hhcmFjdGVyIGNvZGUgYXQgdGhlIGdpdmVuIChkb2N1bWVudC1yZWxhdGl2ZSlcbiAgICBwb3NpdGlvbi5cbiAgICAqL1xuICAgIGNoYXIocG9zKSB7IHJldHVybiBwb3MgPj0gdGhpcy5lbmQgPyAtMSA6IHRoaXMudGV4dC5jaGFyQ29kZUF0KHBvcyAtIHRoaXMub2Zmc2V0KTsgfVxuICAgIC8qKlxuICAgIFRoZSBwb3NpdGlvbiBvZiB0aGUgZW5kIG9mIHRoaXMgaW5saW5lIHNlY3Rpb24uXG4gICAgKi9cbiAgICBnZXQgZW5kKCkgeyByZXR1cm4gdGhpcy5vZmZzZXQgKyB0aGlzLnRleHQubGVuZ3RoOyB9XG4gICAgLyoqXG4gICAgR2V0IGEgc3Vic3RyaW5nIG9mIHRoaXMgaW5saW5lIHNlY3Rpb24uIEFnYWluIHVzZXNcbiAgICBkb2N1bWVudC1yZWxhdGl2ZSBwb3NpdGlvbnMuXG4gICAgKi9cbiAgICBzbGljZShmcm9tLCB0bykgeyByZXR1cm4gdGhpcy50ZXh0LnNsaWNlKGZyb20gLSB0aGlzLm9mZnNldCwgdG8gLSB0aGlzLm9mZnNldCk7IH1cbiAgICAvKipcbiAgICBAaW50ZXJuYWxcbiAgICAqL1xuICAgIGFwcGVuZChlbHQpIHtcbiAgICAgICAgdGhpcy5wYXJ0cy5wdXNoKGVsdCk7XG4gICAgICAgIHJldHVybiBlbHQudG87XG4gICAgfVxuICAgIC8qKlxuICAgIEFkZCBhIFtkZWxpbWl0ZXJdKCNEZWxpbWl0ZXJUeXBlKSBhdCB0aGlzIGdpdmVuIHBvc2l0aW9uLiBgb3BlbmBcbiAgICBhbmQgYGNsb3NlYCBpbmRpY2F0ZSB3aGV0aGVyIHRoaXMgZGVsaW1pdGVyIGlzIG9wZW5pbmcsIGNsb3NpbmcsXG4gICAgb3IgYm90aC4gUmV0dXJucyB0aGUgZW5kIG9mIHRoZSBkZWxpbWl0ZXIsIGZvciBjb252ZW5pZW50XG4gICAgcmV0dXJuaW5nIGZyb20gW3BhcnNlIGZ1bmN0aW9uc10oI0lubGluZVBhcnNlci5wYXJzZSkuXG4gICAgKi9cbiAgICBhZGREZWxpbWl0ZXIodHlwZSwgZnJvbSwgdG8sIG9wZW4sIGNsb3NlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmFwcGVuZChuZXcgSW5saW5lRGVsaW1pdGVyKHR5cGUsIGZyb20sIHRvLCAob3BlbiA/IDEgLyogTWFyay5PcGVuICovIDogMCAvKiBNYXJrLk5vbmUgKi8pIHwgKGNsb3NlID8gMiAvKiBNYXJrLkNsb3NlICovIDogMCAvKiBNYXJrLk5vbmUgKi8pKSk7XG4gICAgfVxuICAgIC8qKlxuICAgIFJldHVybnMgdHJ1ZSB3aGVuIHRoZXJlIGlzIGFuIHVubWF0Y2hlZCBsaW5rIG9yIGltYWdlIG9wZW5pbmdcbiAgICB0b2tlbiBiZWZvcmUgdGhlIGN1cnJlbnQgcG9zaXRpb24uXG4gICAgKi9cbiAgICBnZXQgaGFzT3BlbkxpbmsoKSB7XG4gICAgICAgIGZvciAobGV0IGkgPSB0aGlzLnBhcnRzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgICAgICAgICBsZXQgcGFydCA9IHRoaXMucGFydHNbaV07XG4gICAgICAgICAgICBpZiAocGFydCBpbnN0YW5jZW9mIElubGluZURlbGltaXRlciAmJiAocGFydC50eXBlID09IExpbmtTdGFydCB8fCBwYXJ0LnR5cGUgPT0gSW1hZ2VTdGFydCkpXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICAvKipcbiAgICBBZGQgYW4gaW5saW5lIGVsZW1lbnQuIFJldHVybnMgdGhlIGVuZCBvZiB0aGUgZWxlbWVudC5cbiAgICAqL1xuICAgIGFkZEVsZW1lbnQoZWx0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmFwcGVuZChlbHQpO1xuICAgIH1cbiAgICAvKipcbiAgICBSZXNvbHZlIG1hcmtlcnMgYmV0d2VlbiB0aGlzLnBhcnRzLmxlbmd0aCBhbmQgZnJvbSwgd3JhcHBpbmcgbWF0Y2hlZCBtYXJrZXJzIGluIHRoZVxuICAgIGFwcHJvcHJpYXRlIG5vZGUgYW5kIHVwZGF0aW5nIHRoZSBjb250ZW50IG9mIHRoaXMucGFydHMuIEBpbnRlcm5hbFxuICAgICovXG4gICAgcmVzb2x2ZU1hcmtlcnMoZnJvbSkge1xuICAgICAgICAvLyBTY2FuIGZvcndhcmQsIGxvb2tpbmcgZm9yIGNsb3NpbmcgdG9rZW5zXG4gICAgICAgIGZvciAobGV0IGkgPSBmcm9tOyBpIDwgdGhpcy5wYXJ0cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgbGV0IGNsb3NlID0gdGhpcy5wYXJ0c1tpXTtcbiAgICAgICAgICAgIGlmICghKGNsb3NlIGluc3RhbmNlb2YgSW5saW5lRGVsaW1pdGVyICYmIGNsb3NlLnR5cGUucmVzb2x2ZSAmJiAoY2xvc2Uuc2lkZSAmIDIgLyogTWFyay5DbG9zZSAqLykpKVxuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgbGV0IGVtcCA9IGNsb3NlLnR5cGUgPT0gRW1waGFzaXNVbmRlcnNjb3JlIHx8IGNsb3NlLnR5cGUgPT0gRW1waGFzaXNBc3RlcmlzaztcbiAgICAgICAgICAgIGxldCBjbG9zZVNpemUgPSBjbG9zZS50byAtIGNsb3NlLmZyb207XG4gICAgICAgICAgICBsZXQgb3BlbiwgaiA9IGkgLSAxO1xuICAgICAgICAgICAgLy8gQ29udGludWUgc2Nhbm5pbmcgZm9yIGEgbWF0Y2hpbmcgb3BlbmluZyB0b2tlblxuICAgICAgICAgICAgZm9yICg7IGogPj0gZnJvbTsgai0tKSB7XG4gICAgICAgICAgICAgICAgbGV0IHBhcnQgPSB0aGlzLnBhcnRzW2pdO1xuICAgICAgICAgICAgICAgIGlmIChwYXJ0IGluc3RhbmNlb2YgSW5saW5lRGVsaW1pdGVyICYmIChwYXJ0LnNpZGUgJiAxIC8qIE1hcmsuT3BlbiAqLykgJiYgcGFydC50eXBlID09IGNsb3NlLnR5cGUgJiZcbiAgICAgICAgICAgICAgICAgICAgLy8gSWdub3JlIGVtcGhhc2lzIGRlbGltaXRlcnMgd2hlcmUgdGhlIGNoYXJhY3RlciBjb3VudCBkb2Vzbid0IG1hdGNoXG4gICAgICAgICAgICAgICAgICAgICEoZW1wICYmICgoY2xvc2Uuc2lkZSAmIDEgLyogTWFyay5PcGVuICovKSB8fCAocGFydC5zaWRlICYgMiAvKiBNYXJrLkNsb3NlICovKSkgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgIChwYXJ0LnRvIC0gcGFydC5mcm9tICsgY2xvc2VTaXplKSAlIDMgPT0gMCAmJiAoKHBhcnQudG8gLSBwYXJ0LmZyb20pICUgMyB8fCBjbG9zZVNpemUgJSAzKSkpIHtcbiAgICAgICAgICAgICAgICAgICAgb3BlbiA9IHBhcnQ7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghb3BlbilcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIGxldCB0eXBlID0gY2xvc2UudHlwZS5yZXNvbHZlLCBjb250ZW50ID0gW107XG4gICAgICAgICAgICBsZXQgc3RhcnQgPSBvcGVuLmZyb20sIGVuZCA9IGNsb3NlLnRvO1xuICAgICAgICAgICAgLy8gRW1waGFzaXMgbWFya2VyIGVmZmVjdCBkZXBlbmRzIG9uIHRoZSBjaGFyYWN0ZXIgY291bnQuIFNpemUgY29uc3VtZWQgaXMgbWluaW11bSBvZiB0aGUgdHdvXG4gICAgICAgICAgICAvLyBtYXJrZXJzLlxuICAgICAgICAgICAgaWYgKGVtcCkge1xuICAgICAgICAgICAgICAgIGxldCBzaXplID0gTWF0aC5taW4oMiwgb3Blbi50byAtIG9wZW4uZnJvbSwgY2xvc2VTaXplKTtcbiAgICAgICAgICAgICAgICBzdGFydCA9IG9wZW4udG8gLSBzaXplO1xuICAgICAgICAgICAgICAgIGVuZCA9IGNsb3NlLmZyb20gKyBzaXplO1xuICAgICAgICAgICAgICAgIHR5cGUgPSBzaXplID09IDEgPyBcIkVtcGhhc2lzXCIgOiBcIlN0cm9uZ0VtcGhhc2lzXCI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBNb3ZlIHRoZSBjb3ZlcmVkIHJlZ2lvbiBpbnRvIGNvbnRlbnQsIG9wdGlvbmFsbHkgYWRkaW5nIG1hcmtlciBub2Rlc1xuICAgICAgICAgICAgaWYgKG9wZW4udHlwZS5tYXJrKVxuICAgICAgICAgICAgICAgIGNvbnRlbnQucHVzaCh0aGlzLmVsdChvcGVuLnR5cGUubWFyaywgc3RhcnQsIG9wZW4udG8pKTtcbiAgICAgICAgICAgIGZvciAobGV0IGsgPSBqICsgMTsgayA8IGk7IGsrKykge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLnBhcnRzW2tdIGluc3RhbmNlb2YgRWxlbWVudClcbiAgICAgICAgICAgICAgICAgICAgY29udGVudC5wdXNoKHRoaXMucGFydHNba10pO1xuICAgICAgICAgICAgICAgIHRoaXMucGFydHNba10gPSBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGNsb3NlLnR5cGUubWFyaylcbiAgICAgICAgICAgICAgICBjb250ZW50LnB1c2godGhpcy5lbHQoY2xvc2UudHlwZS5tYXJrLCBjbG9zZS5mcm9tLCBlbmQpKTtcbiAgICAgICAgICAgIGxldCBlbGVtZW50ID0gdGhpcy5lbHQodHlwZSwgc3RhcnQsIGVuZCwgY29udGVudCk7XG4gICAgICAgICAgICAvLyBJZiB0aGVyZSBhcmUgbGVmdG92ZXIgZW1waGFzaXMgbWFya2VyIGNoYXJhY3RlcnMsIHNocmluayB0aGUgY2xvc2Uvb3BlbiBtYXJrZXJzLiBPdGhlcndpc2UsIGNsZWFyIHRoZW0uXG4gICAgICAgICAgICB0aGlzLnBhcnRzW2pdID0gZW1wICYmIG9wZW4uZnJvbSAhPSBzdGFydCA/IG5ldyBJbmxpbmVEZWxpbWl0ZXIob3Blbi50eXBlLCBvcGVuLmZyb20sIHN0YXJ0LCBvcGVuLnNpZGUpIDogbnVsbDtcbiAgICAgICAgICAgIGxldCBrZWVwID0gdGhpcy5wYXJ0c1tpXSA9IGVtcCAmJiBjbG9zZS50byAhPSBlbmQgPyBuZXcgSW5saW5lRGVsaW1pdGVyKGNsb3NlLnR5cGUsIGVuZCwgY2xvc2UudG8sIGNsb3NlLnNpZGUpIDogbnVsbDtcbiAgICAgICAgICAgIC8vIEluc2VydCB0aGUgbmV3IGVsZW1lbnQgaW4gdGhpcy5wYXJ0c1xuICAgICAgICAgICAgaWYgKGtlZXApXG4gICAgICAgICAgICAgICAgdGhpcy5wYXJ0cy5zcGxpY2UoaSwgMCwgZWxlbWVudCk7XG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgdGhpcy5wYXJ0c1tpXSA9IGVsZW1lbnQ7XG4gICAgICAgIH1cbiAgICAgICAgLy8gQ29sbGVjdCB0aGUgZWxlbWVudHMgcmVtYWluaW5nIGluIHRoaXMucGFydHMgaW50byBhbiBhcnJheS5cbiAgICAgICAgbGV0IHJlc3VsdCA9IFtdO1xuICAgICAgICBmb3IgKGxldCBpID0gZnJvbTsgaSA8IHRoaXMucGFydHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGxldCBwYXJ0ID0gdGhpcy5wYXJ0c1tpXTtcbiAgICAgICAgICAgIGlmIChwYXJ0IGluc3RhbmNlb2YgRWxlbWVudClcbiAgICAgICAgICAgICAgICByZXN1bHQucHVzaChwYXJ0KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cbiAgICAvKipcbiAgICBGaW5kIGFuIG9wZW5pbmcgZGVsaW1pdGVyIG9mIHRoZSBnaXZlbiB0eXBlLiBSZXR1cm5zIGBudWxsYCBpZlxuICAgIG5vIGRlbGltaXRlciBpcyBmb3VuZCwgb3IgYW4gaW5kZXggdGhhdCBjYW4gYmUgcGFzc2VkIHRvXG4gICAgW2B0YWtlQ29udGVudGBdKCNJbmxpbmVDb250ZXh0LnRha2VDb250ZW50KSBvdGhlcndpc2UuXG4gICAgKi9cbiAgICBmaW5kT3BlbmluZ0RlbGltaXRlcih0eXBlKSB7XG4gICAgICAgIGZvciAobGV0IGkgPSB0aGlzLnBhcnRzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgICAgICAgICBsZXQgcGFydCA9IHRoaXMucGFydHNbaV07XG4gICAgICAgICAgICBpZiAocGFydCBpbnN0YW5jZW9mIElubGluZURlbGltaXRlciAmJiBwYXJ0LnR5cGUgPT0gdHlwZSAmJiAocGFydC5zaWRlICYgMSAvKiBNYXJrLk9wZW4gKi8pKVxuICAgICAgICAgICAgICAgIHJldHVybiBpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICAvKipcbiAgICBSZW1vdmUgYWxsIGlubGluZSBlbGVtZW50cyBhbmQgZGVsaW1pdGVycyBzdGFydGluZyBmcm9tIHRoZVxuICAgIGdpdmVuIGluZGV4ICh3aGljaCB5b3Ugc2hvdWxkIGdldCBmcm9tXG4gICAgW2BmaW5kT3BlbmluZ0RlbGltaXRlcmBdKCNJbmxpbmVDb250ZXh0LmZpbmRPcGVuaW5nRGVsaW1pdGVyKSxcbiAgICByZXNvbHZlIGRlbGltaXRlcnMgaW5zaWRlIG9mIHRoZW0sIGFuZCByZXR1cm4gdGhlbSBhcyBhbiBhcnJheVxuICAgIG9mIGVsZW1lbnRzLlxuICAgICovXG4gICAgdGFrZUNvbnRlbnQoc3RhcnRJbmRleCkge1xuICAgICAgICBsZXQgY29udGVudCA9IHRoaXMucmVzb2x2ZU1hcmtlcnMoc3RhcnRJbmRleCk7XG4gICAgICAgIHRoaXMucGFydHMubGVuZ3RoID0gc3RhcnRJbmRleDtcbiAgICAgICAgcmV0dXJuIGNvbnRlbnQ7XG4gICAgfVxuICAgIC8qKlxuICAgIFJldHVybiB0aGUgZGVsaW1pdGVyIGF0IHRoZSBnaXZlbiBpbmRleC4gTW9zdGx5IHVzZWZ1bCB0byBnZXRcbiAgICBhZGRpdGlvbmFsIGluZm8gb3V0IG9mIGEgZGVsaW1pdGVyIGluZGV4IHJldHVybmVkIGJ5XG4gICAgW2BmaW5kT3BlbmluZ0RlbGltaXRlcmBdKCNJbmxpbmVDb250ZXh0LmZpbmRPcGVuaW5nRGVsaW1pdGVyKS5cbiAgICBSZXR1cm5zIG51bGwgaWYgdGhlcmUgaXMgbm8gZGVsaW1pdGVyIGF0IHRoaXMgaW5kZXguXG4gICAgKi9cbiAgICBnZXREZWxpbWl0ZXJBdChpbmRleCkge1xuICAgICAgICBsZXQgcGFydCA9IHRoaXMucGFydHNbaW5kZXhdO1xuICAgICAgICByZXR1cm4gcGFydCBpbnN0YW5jZW9mIElubGluZURlbGltaXRlciA/IHBhcnQgOiBudWxsO1xuICAgIH1cbiAgICAvKipcbiAgICBTa2lwIHNwYWNlIGFmdGVyIHRoZSBnaXZlbiAoZG9jdW1lbnQpIHBvc2l0aW9uLCByZXR1cm5pbmcgZWl0aGVyXG4gICAgdGhlIHBvc2l0aW9uIG9mIHRoZSBuZXh0IG5vbi1zcGFjZSBjaGFyYWN0ZXIgb3IgdGhlIGVuZCBvZiB0aGVcbiAgICBzZWN0aW9uLlxuICAgICovXG4gICAgc2tpcFNwYWNlKGZyb20pIHsgcmV0dXJuIHNraXBTcGFjZSh0aGlzLnRleHQsIGZyb20gLSB0aGlzLm9mZnNldCkgKyB0aGlzLm9mZnNldDsgfVxuICAgIGVsdCh0eXBlLCBmcm9tLCB0bywgY2hpbGRyZW4pIHtcbiAgICAgICAgaWYgKHR5cGVvZiB0eXBlID09IFwic3RyaW5nXCIpXG4gICAgICAgICAgICByZXR1cm4gZWx0KHRoaXMucGFyc2VyLmdldE5vZGVUeXBlKHR5cGUpLCBmcm9tLCB0bywgY2hpbGRyZW4pO1xuICAgICAgICByZXR1cm4gbmV3IFRyZWVFbGVtZW50KHR5cGUsIGZyb20pO1xuICAgIH1cbn1cbi8qKlxuVGhlIG9wZW5pbmcgZGVsaW1pdGVyIHR5cGUgdXNlZCBieSB0aGUgc3RhbmRhcmQgbGluayBwYXJzZXIuXG4qL1xuSW5saW5lQ29udGV4dC5saW5rU3RhcnQgPSBMaW5rU3RhcnQ7XG4vKipcbk9wZW5pbmcgZGVsaW1pdGVyIHR5cGUgdXNlZCBmb3Igc3RhbmRhcmQgaW1hZ2VzLlxuKi9cbklubGluZUNvbnRleHQuaW1hZ2VTdGFydCA9IEltYWdlU3RhcnQ7XG5mdW5jdGlvbiBpbmplY3RNYXJrcyhlbGVtZW50cywgbWFya3MpIHtcbiAgICBpZiAoIW1hcmtzLmxlbmd0aClcbiAgICAgICAgcmV0dXJuIGVsZW1lbnRzO1xuICAgIGlmICghZWxlbWVudHMubGVuZ3RoKVxuICAgICAgICByZXR1cm4gbWFya3M7XG4gICAgbGV0IGVsdHMgPSBlbGVtZW50cy5zbGljZSgpLCBlSSA9IDA7XG4gICAgZm9yIChsZXQgbWFyayBvZiBtYXJrcykge1xuICAgICAgICB3aGlsZSAoZUkgPCBlbHRzLmxlbmd0aCAmJiBlbHRzW2VJXS50byA8IG1hcmsudG8pXG4gICAgICAgICAgICBlSSsrO1xuICAgICAgICBpZiAoZUkgPCBlbHRzLmxlbmd0aCAmJiBlbHRzW2VJXS5mcm9tIDwgbWFyay5mcm9tKSB7XG4gICAgICAgICAgICBsZXQgZSA9IGVsdHNbZUldO1xuICAgICAgICAgICAgaWYgKGUgaW5zdGFuY2VvZiBFbGVtZW50KVxuICAgICAgICAgICAgICAgIGVsdHNbZUldID0gbmV3IEVsZW1lbnQoZS50eXBlLCBlLmZyb20sIGUudG8sIGluamVjdE1hcmtzKGUuY2hpbGRyZW4sIFttYXJrXSkpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgZWx0cy5zcGxpY2UoZUkrKywgMCwgbWFyayk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGVsdHM7XG59XG4vLyBUaGVzZSBhcmUgYmxvY2tzIHRoYXQgY2FuIHNwYW4gYmxhbmsgbGluZXMsIGFuZCBzaG91bGQgdGh1cyBvbmx5IGJlXG4vLyByZXVzZWQgaWYgdGhlaXIgbmV4dCBzaWJsaW5nIGlzIGFsc28gYmVpbmcgcmV1c2VkLlxuY29uc3QgTm90TGFzdCA9IFtUeXBlLkNvZGVCbG9jaywgVHlwZS5MaXN0SXRlbSwgVHlwZS5PcmRlcmVkTGlzdCwgVHlwZS5CdWxsZXRMaXN0XTtcbmNsYXNzIEZyYWdtZW50Q3Vyc29yIHtcbiAgICBjb25zdHJ1Y3RvcihmcmFnbWVudHMsIGlucHV0KSB7XG4gICAgICAgIHRoaXMuZnJhZ21lbnRzID0gZnJhZ21lbnRzO1xuICAgICAgICB0aGlzLmlucHV0ID0gaW5wdXQ7XG4gICAgICAgIC8vIEluZGV4IGludG8gZnJhZ21lbnQgYXJyYXlcbiAgICAgICAgdGhpcy5pID0gMDtcbiAgICAgICAgLy8gQWN0aXZlIGZyYWdtZW50XG4gICAgICAgIHRoaXMuZnJhZ21lbnQgPSBudWxsO1xuICAgICAgICB0aGlzLmZyYWdtZW50RW5kID0gLTE7XG4gICAgICAgIC8vIEN1cnNvciBpbnRvIHRoZSBjdXJyZW50IGZyYWdtZW50LCBpZiBhbnkuIFdoZW4gYG1vdmVUb2AgcmV0dXJuc1xuICAgICAgICAvLyB0cnVlLCB0aGlzIHBvaW50cyBhdCB0aGUgZmlyc3QgYmxvY2sgYWZ0ZXIgYHBvc2AuXG4gICAgICAgIHRoaXMuY3Vyc29yID0gbnVsbDtcbiAgICAgICAgaWYgKGZyYWdtZW50cy5sZW5ndGgpXG4gICAgICAgICAgICB0aGlzLmZyYWdtZW50ID0gZnJhZ21lbnRzW3RoaXMuaSsrXTtcbiAgICB9XG4gICAgbmV4dEZyYWdtZW50KCkge1xuICAgICAgICB0aGlzLmZyYWdtZW50ID0gdGhpcy5pIDwgdGhpcy5mcmFnbWVudHMubGVuZ3RoID8gdGhpcy5mcmFnbWVudHNbdGhpcy5pKytdIDogbnVsbDtcbiAgICAgICAgdGhpcy5jdXJzb3IgPSBudWxsO1xuICAgICAgICB0aGlzLmZyYWdtZW50RW5kID0gLTE7XG4gICAgfVxuICAgIG1vdmVUbyhwb3MsIGxpbmVTdGFydCkge1xuICAgICAgICB3aGlsZSAodGhpcy5mcmFnbWVudCAmJiB0aGlzLmZyYWdtZW50LnRvIDw9IHBvcylcbiAgICAgICAgICAgIHRoaXMubmV4dEZyYWdtZW50KCk7XG4gICAgICAgIGlmICghdGhpcy5mcmFnbWVudCB8fCB0aGlzLmZyYWdtZW50LmZyb20gPiAocG9zID8gcG9zIC0gMSA6IDApKVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICBpZiAodGhpcy5mcmFnbWVudEVuZCA8IDApIHtcbiAgICAgICAgICAgIGxldCBlbmQgPSB0aGlzLmZyYWdtZW50LnRvO1xuICAgICAgICAgICAgd2hpbGUgKGVuZCA+IDAgJiYgdGhpcy5pbnB1dC5yZWFkKGVuZCAtIDEsIGVuZCkgIT0gXCJcXG5cIilcbiAgICAgICAgICAgICAgICBlbmQtLTtcbiAgICAgICAgICAgIHRoaXMuZnJhZ21lbnRFbmQgPSBlbmQgPyBlbmQgLSAxIDogMDtcbiAgICAgICAgfVxuICAgICAgICBsZXQgYyA9IHRoaXMuY3Vyc29yO1xuICAgICAgICBpZiAoIWMpIHtcbiAgICAgICAgICAgIGMgPSB0aGlzLmN1cnNvciA9IHRoaXMuZnJhZ21lbnQudHJlZS5jdXJzb3IoKTtcbiAgICAgICAgICAgIGMuZmlyc3RDaGlsZCgpO1xuICAgICAgICB9XG4gICAgICAgIGxldCByUG9zID0gcG9zICsgdGhpcy5mcmFnbWVudC5vZmZzZXQ7XG4gICAgICAgIHdoaWxlIChjLnRvIDw9IHJQb3MpXG4gICAgICAgICAgICBpZiAoIWMucGFyZW50KCkpXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICBmb3IgKDs7KSB7XG4gICAgICAgICAgICBpZiAoYy5mcm9tID49IHJQb3MpXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZnJhZ21lbnQuZnJvbSA8PSBsaW5lU3RhcnQ7XG4gICAgICAgICAgICBpZiAoIWMuY2hpbGRBZnRlcihyUG9zKSlcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICB9XG4gICAgbWF0Y2hlcyhoYXNoKSB7XG4gICAgICAgIGxldCB0cmVlID0gdGhpcy5jdXJzb3IudHJlZTtcbiAgICAgICAgcmV0dXJuIHRyZWUgJiYgdHJlZS5wcm9wKE5vZGVQcm9wLmNvbnRleHRIYXNoKSA9PSBoYXNoO1xuICAgIH1cbiAgICB0YWtlTm9kZXMoY3gpIHtcbiAgICAgICAgbGV0IGN1ciA9IHRoaXMuY3Vyc29yLCBvZmYgPSB0aGlzLmZyYWdtZW50Lm9mZnNldCwgZnJhZ0VuZCA9IHRoaXMuZnJhZ21lbnRFbmQgLSAodGhpcy5mcmFnbWVudC5vcGVuRW5kID8gMSA6IDApO1xuICAgICAgICBsZXQgc3RhcnQgPSBjeC5hYnNvbHV0ZUxpbmVTdGFydCwgZW5kID0gc3RhcnQsIGJsb2NrSSA9IGN4LmJsb2NrLmNoaWxkcmVuLmxlbmd0aDtcbiAgICAgICAgbGV0IHByZXZFbmQgPSBlbmQsIHByZXZJID0gYmxvY2tJO1xuICAgICAgICBmb3IgKDs7KSB7XG4gICAgICAgICAgICBpZiAoY3VyLnRvIC0gb2ZmID4gZnJhZ0VuZCkge1xuICAgICAgICAgICAgICAgIGlmIChjdXIudHlwZS5pc0Fub255bW91cyAmJiBjdXIuZmlyc3RDaGlsZCgpKVxuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxldCBwb3MgPSB0b1JlbGF0aXZlKGN1ci5mcm9tIC0gb2ZmLCBjeC5yYW5nZXMpO1xuICAgICAgICAgICAgaWYgKGN1ci50byAtIG9mZiA8PSBjeC5yYW5nZXNbY3gucmFuZ2VJXS50bykgeyAvLyBGaXRzIGluIGN1cnJlbnQgcmFuZ2VcbiAgICAgICAgICAgICAgICBjeC5hZGROb2RlKGN1ci50cmVlLCBwb3MpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgbGV0IGR1bW15ID0gbmV3IFRyZWUoY3gucGFyc2VyLm5vZGVTZXQudHlwZXNbVHlwZS5QYXJhZ3JhcGhdLCBbXSwgW10sIDAsIGN4LmJsb2NrLmhhc2hQcm9wKTtcbiAgICAgICAgICAgICAgICBjeC5yZXVzZVBsYWNlaG9sZGVycy5zZXQoZHVtbXksIGN1ci50cmVlKTtcbiAgICAgICAgICAgICAgICBjeC5hZGROb2RlKGR1bW15LCBwb3MpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gVGFrZW4gY29udGVudCBtdXN0IGFsd2F5cyBlbmQgaW4gYSBibG9jaywgYmVjYXVzZSBpbmNyZW1lbnRhbFxuICAgICAgICAgICAgLy8gcGFyc2luZyBoYXBwZW5zIG9uIGJsb2NrIGJvdW5kYXJpZXMuIE5ldmVyIHN0b3AgZGlyZWN0bHlcbiAgICAgICAgICAgIC8vIGFmdGVyIGFuIGluZGVudGVkIGNvZGUgYmxvY2ssIHNpbmNlIHRob3NlIGNhbiBjb250aW51ZSBhZnRlclxuICAgICAgICAgICAgLy8gYW55IG51bWJlciBvZiBibGFuayBsaW5lcy5cbiAgICAgICAgICAgIGlmIChjdXIudHlwZS5pcyhcIkJsb2NrXCIpKSB7XG4gICAgICAgICAgICAgICAgaWYgKE5vdExhc3QuaW5kZXhPZihjdXIudHlwZS5pZCkgPCAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGVuZCA9IGN1ci50byAtIG9mZjtcbiAgICAgICAgICAgICAgICAgICAgYmxvY2tJID0gY3guYmxvY2suY2hpbGRyZW4ubGVuZ3RoO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgZW5kID0gcHJldkVuZDtcbiAgICAgICAgICAgICAgICAgICAgYmxvY2tJID0gcHJldkk7XG4gICAgICAgICAgICAgICAgICAgIHByZXZFbmQgPSBjdXIudG8gLSBvZmY7XG4gICAgICAgICAgICAgICAgICAgIHByZXZJID0gY3guYmxvY2suY2hpbGRyZW4ubGVuZ3RoO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghY3VyLm5leHRTaWJsaW5nKCkpXG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgd2hpbGUgKGN4LmJsb2NrLmNoaWxkcmVuLmxlbmd0aCA+IGJsb2NrSSkge1xuICAgICAgICAgICAgY3guYmxvY2suY2hpbGRyZW4ucG9wKCk7XG4gICAgICAgICAgICBjeC5ibG9jay5wb3NpdGlvbnMucG9wKCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGVuZCAtIHN0YXJ0O1xuICAgIH1cbn1cbi8vIENvbnZlcnQgYW4gaW5wdXQtc3RyZWFtLXJlbGF0aXZlIHBvc2l0aW9uIHRvIGFcbi8vIE1hcmtkb3duLWRvYy1yZWxhdGl2ZSBwb3NpdGlvbiBieSBzdWJ0cmFjdGluZyB0aGUgc2l6ZSBvZiBhbGwgaW5wdXRcbi8vIGdhcHMgYmVmb3JlIGBhYnNgLlxuZnVuY3Rpb24gdG9SZWxhdGl2ZShhYnMsIHJhbmdlcykge1xuICAgIGxldCBwb3MgPSBhYnM7XG4gICAgZm9yIChsZXQgaSA9IDE7IGkgPCByYW5nZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgbGV0IGdhcEZyb20gPSByYW5nZXNbaSAtIDFdLnRvLCBnYXBUbyA9IHJhbmdlc1tpXS5mcm9tO1xuICAgICAgICBpZiAoZ2FwRnJvbSA8IGFicylcbiAgICAgICAgICAgIHBvcyAtPSBnYXBUbyAtIGdhcEZyb207XG4gICAgfVxuICAgIHJldHVybiBwb3M7XG59XG5jb25zdCBtYXJrZG93bkhpZ2hsaWdodGluZyA9IHN0eWxlVGFncyh7XG4gICAgXCJCbG9ja3F1b3RlLy4uLlwiOiB0YWdzLnF1b3RlLFxuICAgIEhvcml6b250YWxSdWxlOiB0YWdzLmNvbnRlbnRTZXBhcmF0b3IsXG4gICAgXCJBVFhIZWFkaW5nMS8uLi4gU2V0ZXh0SGVhZGluZzEvLi4uXCI6IHRhZ3MuaGVhZGluZzEsXG4gICAgXCJBVFhIZWFkaW5nMi8uLi4gU2V0ZXh0SGVhZGluZzIvLi4uXCI6IHRhZ3MuaGVhZGluZzIsXG4gICAgXCJBVFhIZWFkaW5nMy8uLi5cIjogdGFncy5oZWFkaW5nMyxcbiAgICBcIkFUWEhlYWRpbmc0Ly4uLlwiOiB0YWdzLmhlYWRpbmc0LFxuICAgIFwiQVRYSGVhZGluZzUvLi4uXCI6IHRhZ3MuaGVhZGluZzUsXG4gICAgXCJBVFhIZWFkaW5nNi8uLi5cIjogdGFncy5oZWFkaW5nNixcbiAgICBcIkNvbW1lbnQgQ29tbWVudEJsb2NrXCI6IHRhZ3MuY29tbWVudCxcbiAgICBFc2NhcGU6IHRhZ3MuZXNjYXBlLFxuICAgIEVudGl0eTogdGFncy5jaGFyYWN0ZXIsXG4gICAgXCJFbXBoYXNpcy8uLi5cIjogdGFncy5lbXBoYXNpcyxcbiAgICBcIlN0cm9uZ0VtcGhhc2lzLy4uLlwiOiB0YWdzLnN0cm9uZyxcbiAgICBcIkxpbmsvLi4uIEltYWdlLy4uLlwiOiB0YWdzLmxpbmssXG4gICAgXCJPcmRlcmVkTGlzdC8uLi4gQnVsbGV0TGlzdC8uLi5cIjogdGFncy5saXN0LFxuICAgIFwiQmxvY2tRdW90ZS8uLi5cIjogdGFncy5xdW90ZSxcbiAgICBcIklubGluZUNvZGUgQ29kZVRleHRcIjogdGFncy5tb25vc3BhY2UsXG4gICAgXCJVUkwgQXV0b2xpbmtcIjogdGFncy51cmwsXG4gICAgXCJIZWFkZXJNYXJrIEhhcmRCcmVhayBRdW90ZU1hcmsgTGlzdE1hcmsgTGlua01hcmsgRW1waGFzaXNNYXJrIENvZGVNYXJrXCI6IHRhZ3MucHJvY2Vzc2luZ0luc3RydWN0aW9uLFxuICAgIFwiQ29kZUluZm8gTGlua0xhYmVsXCI6IHRhZ3MubGFiZWxOYW1lLFxuICAgIExpbmtUaXRsZTogdGFncy5zdHJpbmcsXG4gICAgUGFyYWdyYXBoOiB0YWdzLmNvbnRlbnRcbn0pO1xuLyoqXG5UaGUgZGVmYXVsdCBDb21tb25NYXJrIHBhcnNlci5cbiovXG5jb25zdCBwYXJzZXIgPSBuZXcgTWFya2Rvd25QYXJzZXIobmV3IE5vZGVTZXQobm9kZVR5cGVzKS5leHRlbmQobWFya2Rvd25IaWdobGlnaHRpbmcpLCBPYmplY3Qua2V5cyhEZWZhdWx0QmxvY2tQYXJzZXJzKS5tYXAobiA9PiBEZWZhdWx0QmxvY2tQYXJzZXJzW25dKSwgT2JqZWN0LmtleXMoRGVmYXVsdEJsb2NrUGFyc2VycykubWFwKG4gPT4gRGVmYXVsdExlYWZCbG9ja3Nbbl0pLCBPYmplY3Qua2V5cyhEZWZhdWx0QmxvY2tQYXJzZXJzKSwgRGVmYXVsdEVuZExlYWYsIERlZmF1bHRTa2lwTWFya3VwLCBPYmplY3Qua2V5cyhEZWZhdWx0SW5saW5lKS5tYXAobiA9PiBEZWZhdWx0SW5saW5lW25dKSwgT2JqZWN0LmtleXMoRGVmYXVsdElubGluZSksIFtdKTtcblxuZnVuY3Rpb24gbGVmdE92ZXJTcGFjZShub2RlLCBmcm9tLCB0bykge1xuICAgIGxldCByYW5nZXMgPSBbXTtcbiAgICBmb3IgKGxldCBuID0gbm9kZS5maXJzdENoaWxkLCBwb3MgPSBmcm9tOzsgbiA9IG4ubmV4dFNpYmxpbmcpIHtcbiAgICAgICAgbGV0IG5leHRQb3MgPSBuID8gbi5mcm9tIDogdG87XG4gICAgICAgIGlmIChuZXh0UG9zID4gcG9zKVxuICAgICAgICAgICAgcmFuZ2VzLnB1c2goeyBmcm9tOiBwb3MsIHRvOiBuZXh0UG9zIH0pO1xuICAgICAgICBpZiAoIW4pXG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgcG9zID0gbi50bztcbiAgICB9XG4gICAgcmV0dXJuIHJhbmdlcztcbn1cbi8qKlxuQ3JlYXRlIGEgTWFya2Rvd24gZXh0ZW5zaW9uIHRvIGVuYWJsZSBuZXN0ZWQgcGFyc2luZyBvbiBjb2RlXG5ibG9ja3MgYW5kL29yIGVtYmVkZGVkIEhUTUwuXG4qL1xuZnVuY3Rpb24gcGFyc2VDb2RlKGNvbmZpZykge1xuICAgIGxldCB7IGNvZGVQYXJzZXIsIGh0bWxQYXJzZXIgfSA9IGNvbmZpZztcbiAgICBsZXQgd3JhcCA9IHBhcnNlTWl4ZWQoKG5vZGUsIGlucHV0KSA9PiB7XG4gICAgICAgIGxldCBpZCA9IG5vZGUudHlwZS5pZDtcbiAgICAgICAgaWYgKGNvZGVQYXJzZXIgJiYgKGlkID09IFR5cGUuQ29kZUJsb2NrIHx8IGlkID09IFR5cGUuRmVuY2VkQ29kZSkpIHtcbiAgICAgICAgICAgIGxldCBpbmZvID0gXCJcIjtcbiAgICAgICAgICAgIGlmIChpZCA9PSBUeXBlLkZlbmNlZENvZGUpIHtcbiAgICAgICAgICAgICAgICBsZXQgaW5mb05vZGUgPSBub2RlLm5vZGUuZ2V0Q2hpbGQoVHlwZS5Db2RlSW5mbyk7XG4gICAgICAgICAgICAgICAgaWYgKGluZm9Ob2RlKVxuICAgICAgICAgICAgICAgICAgICBpbmZvID0gaW5wdXQucmVhZChpbmZvTm9kZS5mcm9tLCBpbmZvTm9kZS50byk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsZXQgcGFyc2VyID0gY29kZVBhcnNlcihpbmZvKTtcbiAgICAgICAgICAgIGlmIChwYXJzZXIpXG4gICAgICAgICAgICAgICAgcmV0dXJuIHsgcGFyc2VyLCBvdmVybGF5OiBub2RlID0+IG5vZGUudHlwZS5pZCA9PSBUeXBlLkNvZGVUZXh0LCBicmFja2V0ZWQ6IGlkID09IFR5cGUuRmVuY2VkQ29kZSB9O1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGh0bWxQYXJzZXIgJiYgKGlkID09IFR5cGUuSFRNTEJsb2NrIHx8IGlkID09IFR5cGUuSFRNTFRhZyB8fCBpZCA9PSBUeXBlLkNvbW1lbnRCbG9jaykpIHtcbiAgICAgICAgICAgIHJldHVybiB7IHBhcnNlcjogaHRtbFBhcnNlciwgb3ZlcmxheTogbGVmdE92ZXJTcGFjZShub2RlLm5vZGUsIG5vZGUuZnJvbSwgbm9kZS50bykgfTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9KTtcbiAgICByZXR1cm4geyB3cmFwIH07XG59XG5cbmNvbnN0IFN0cmlrZXRocm91Z2hEZWxpbSA9IHsgcmVzb2x2ZTogXCJTdHJpa2V0aHJvdWdoXCIsIG1hcms6IFwiU3RyaWtldGhyb3VnaE1hcmtcIiB9O1xuLyoqXG5BbiBleHRlbnNpb24gdGhhdCBpbXBsZW1lbnRzXG5bR0ZNLXN0eWxlXShodHRwczovL2dpdGh1Yi5naXRodWIuY29tL2dmbS8jc3RyaWtldGhyb3VnaC1leHRlbnNpb24tKVxuU3RyaWtldGhyb3VnaCBzeW50YXggdXNpbmcgYH5+YCBkZWxpbWl0ZXJzLlxuKi9cbmNvbnN0IFN0cmlrZXRocm91Z2ggPSB7XG4gICAgZGVmaW5lTm9kZXM6IFt7XG4gICAgICAgICAgICBuYW1lOiBcIlN0cmlrZXRocm91Z2hcIixcbiAgICAgICAgICAgIHN0eWxlOiB7IFwiU3RyaWtldGhyb3VnaC8uLi5cIjogdGFncy5zdHJpa2V0aHJvdWdoIH1cbiAgICAgICAgfSwge1xuICAgICAgICAgICAgbmFtZTogXCJTdHJpa2V0aHJvdWdoTWFya1wiLFxuICAgICAgICAgICAgc3R5bGU6IHRhZ3MucHJvY2Vzc2luZ0luc3RydWN0aW9uXG4gICAgICAgIH1dLFxuICAgIHBhcnNlSW5saW5lOiBbe1xuICAgICAgICAgICAgbmFtZTogXCJTdHJpa2V0aHJvdWdoXCIsXG4gICAgICAgICAgICBwYXJzZShjeCwgbmV4dCwgcG9zKSB7XG4gICAgICAgICAgICAgICAgaWYgKG5leHQgIT0gMTI2IC8qICd+JyAqLyB8fCBjeC5jaGFyKHBvcyArIDEpICE9IDEyNiB8fCBjeC5jaGFyKHBvcyArIDIpID09IDEyNilcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIC0xO1xuICAgICAgICAgICAgICAgIGxldCBiZWZvcmUgPSBjeC5zbGljZShwb3MgLSAxLCBwb3MpLCBhZnRlciA9IGN4LnNsaWNlKHBvcyArIDIsIHBvcyArIDMpO1xuICAgICAgICAgICAgICAgIGxldCBzQmVmb3JlID0gL1xcc3xeJC8udGVzdChiZWZvcmUpLCBzQWZ0ZXIgPSAvXFxzfF4kLy50ZXN0KGFmdGVyKTtcbiAgICAgICAgICAgICAgICBsZXQgcEJlZm9yZSA9IFB1bmN0dWF0aW9uLnRlc3QoYmVmb3JlKSwgcEFmdGVyID0gUHVuY3R1YXRpb24udGVzdChhZnRlcik7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGN4LmFkZERlbGltaXRlcihTdHJpa2V0aHJvdWdoRGVsaW0sIHBvcywgcG9zICsgMiwgIXNBZnRlciAmJiAoIXBBZnRlciB8fCBzQmVmb3JlIHx8IHBCZWZvcmUpLCAhc0JlZm9yZSAmJiAoIXBCZWZvcmUgfHwgc0FmdGVyIHx8IHBBZnRlcikpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGFmdGVyOiBcIkVtcGhhc2lzXCJcbiAgICAgICAgfV1cbn07XG4vLyBQYXJzZSBhIGxpbmUgYXMgYSB0YWJsZSByb3cgYW5kIHJldHVybiB0aGUgcm93IGNvdW50LiBXaGVuIGBlbHRzYFxuLy8gaXMgZ2l2ZW4sIHB1c2ggc3ludGF4IGVsZW1lbnRzIGZvciB0aGUgY29udGVudCBvbnRvIGl0LlxuZnVuY3Rpb24gcGFyc2VSb3coY3gsIGxpbmUsIHN0YXJ0SSA9IDAsIGVsdHMsIG9mZnNldCA9IDApIHtcbiAgICBsZXQgY291bnQgPSAwLCBmaXJzdCA9IHRydWUsIGNlbGxTdGFydCA9IC0xLCBjZWxsRW5kID0gLTEsIGVzYyA9IGZhbHNlO1xuICAgIGxldCBwYXJzZUNlbGwgPSAoKSA9PiB7XG4gICAgICAgIGVsdHMucHVzaChjeC5lbHQoXCJUYWJsZUNlbGxcIiwgb2Zmc2V0ICsgY2VsbFN0YXJ0LCBvZmZzZXQgKyBjZWxsRW5kLCBjeC5wYXJzZXIucGFyc2VJbmxpbmUobGluZS5zbGljZShjZWxsU3RhcnQsIGNlbGxFbmQpLCBvZmZzZXQgKyBjZWxsU3RhcnQpKSk7XG4gICAgfTtcbiAgICBmb3IgKGxldCBpID0gc3RhcnRJOyBpIDwgbGluZS5sZW5ndGg7IGkrKykge1xuICAgICAgICBsZXQgbmV4dCA9IGxpbmUuY2hhckNvZGVBdChpKTtcbiAgICAgICAgaWYgKG5leHQgPT0gMTI0IC8qICd8JyAqLyAmJiAhZXNjKSB7XG4gICAgICAgICAgICBpZiAoIWZpcnN0IHx8IGNlbGxTdGFydCA+IC0xKVxuICAgICAgICAgICAgICAgIGNvdW50Kys7XG4gICAgICAgICAgICBmaXJzdCA9IGZhbHNlO1xuICAgICAgICAgICAgaWYgKGVsdHMpIHtcbiAgICAgICAgICAgICAgICBpZiAoY2VsbFN0YXJ0ID4gLTEpXG4gICAgICAgICAgICAgICAgICAgIHBhcnNlQ2VsbCgpO1xuICAgICAgICAgICAgICAgIGVsdHMucHVzaChjeC5lbHQoXCJUYWJsZURlbGltaXRlclwiLCBpICsgb2Zmc2V0LCBpICsgb2Zmc2V0ICsgMSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2VsbFN0YXJ0ID0gY2VsbEVuZCA9IC0xO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGVzYyB8fCBuZXh0ICE9IDMyICYmIG5leHQgIT0gOSkge1xuICAgICAgICAgICAgaWYgKGNlbGxTdGFydCA8IDApXG4gICAgICAgICAgICAgICAgY2VsbFN0YXJ0ID0gaTtcbiAgICAgICAgICAgIGNlbGxFbmQgPSBpICsgMTtcbiAgICAgICAgfVxuICAgICAgICBlc2MgPSAhZXNjICYmIG5leHQgPT0gOTI7XG4gICAgfVxuICAgIGlmIChjZWxsU3RhcnQgPiAtMSkge1xuICAgICAgICBjb3VudCsrO1xuICAgICAgICBpZiAoZWx0cylcbiAgICAgICAgICAgIHBhcnNlQ2VsbCgpO1xuICAgIH1cbiAgICByZXR1cm4gY291bnQ7XG59XG5mdW5jdGlvbiBoYXNQaXBlKHN0ciwgc3RhcnQpIHtcbiAgICBmb3IgKGxldCBpID0gc3RhcnQ7IGkgPCBzdHIubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgbGV0IG5leHQgPSBzdHIuY2hhckNvZGVBdChpKTtcbiAgICAgICAgaWYgKG5leHQgPT0gMTI0IC8qICd8JyAqLylcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICBpZiAobmV4dCA9PSA5MiAvKiAnXFxcXCcgKi8pXG4gICAgICAgICAgICBpKys7XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbn1cbmNvbnN0IGRlbGltaXRlckxpbmUgPSAvXlxcfD8oXFxzKjo/LSs6P1xccypcXHwpKyhcXHMqOj8tKzo/XFxzKik/JC87XG5jbGFzcyBUYWJsZVBhcnNlciB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIC8vIE51bGwgbWVhbnMgd2UgaGF2ZW4ndCBzZWVuIHRoZSBzZWNvbmQgbGluZSB5ZXQsIGZhbHNlIG1lYW5zIHRoaXNcbiAgICAgICAgLy8gaXNuJ3QgYSB0YWJsZSwgYW5kIGFuIGFycmF5IG1lYW5zIHRoaXMgaXMgYSB0YWJsZSBhbmQgd2UndmVcbiAgICAgICAgLy8gcGFyc2VkIHRoZSBnaXZlbiByb3dzIHNvIGZhci5cbiAgICAgICAgdGhpcy5yb3dzID0gbnVsbDtcbiAgICB9XG4gICAgbmV4dExpbmUoY3gsIGxpbmUsIGxlYWYpIHtcbiAgICAgICAgaWYgKHRoaXMucm93cyA9PSBudWxsKSB7IC8vIFNlY29uZCBsaW5lXG4gICAgICAgICAgICB0aGlzLnJvd3MgPSBmYWxzZTtcbiAgICAgICAgICAgIGxldCBsaW5lVGV4dDtcbiAgICAgICAgICAgIGlmICgobGluZS5uZXh0ID09IDQ1IHx8IGxpbmUubmV4dCA9PSA1OCB8fCBsaW5lLm5leHQgPT0gMTI0IC8qICctOnwnICovKSAmJlxuICAgICAgICAgICAgICAgIGRlbGltaXRlckxpbmUudGVzdChsaW5lVGV4dCA9IGxpbmUudGV4dC5zbGljZShsaW5lLnBvcykpKSB7XG4gICAgICAgICAgICAgICAgbGV0IGZpcnN0Um93ID0gW10sIGZpcnN0Q291bnQgPSBwYXJzZVJvdyhjeCwgbGVhZi5jb250ZW50LCAwLCBmaXJzdFJvdywgbGVhZi5zdGFydCk7XG4gICAgICAgICAgICAgICAgaWYgKGZpcnN0Q291bnQgPT0gcGFyc2VSb3coY3gsIGxpbmVUZXh0LCBsaW5lLnBvcykpXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucm93cyA9IFtjeC5lbHQoXCJUYWJsZUhlYWRlclwiLCBsZWFmLnN0YXJ0LCBsZWFmLnN0YXJ0ICsgbGVhZi5jb250ZW50Lmxlbmd0aCwgZmlyc3RSb3cpLFxuICAgICAgICAgICAgICAgICAgICAgICAgY3guZWx0KFwiVGFibGVEZWxpbWl0ZXJcIiwgY3gubGluZVN0YXJ0ICsgbGluZS5wb3MsIGN4LmxpbmVTdGFydCArIGxpbmUudGV4dC5sZW5ndGgpXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0aGlzLnJvd3MpIHsgLy8gTGluZSBhZnRlciB0aGUgc2Vjb25kXG4gICAgICAgICAgICBsZXQgY29udGVudCA9IFtdO1xuICAgICAgICAgICAgcGFyc2VSb3coY3gsIGxpbmUudGV4dCwgbGluZS5wb3MsIGNvbnRlbnQsIGN4LmxpbmVTdGFydCk7XG4gICAgICAgICAgICB0aGlzLnJvd3MucHVzaChjeC5lbHQoXCJUYWJsZVJvd1wiLCBjeC5saW5lU3RhcnQgKyBsaW5lLnBvcywgY3gubGluZVN0YXJ0ICsgbGluZS50ZXh0Lmxlbmd0aCwgY29udGVudCkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgZmluaXNoKGN4LCBsZWFmKSB7XG4gICAgICAgIGlmICghdGhpcy5yb3dzKVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICBjeC5hZGRMZWFmRWxlbWVudChsZWFmLCBjeC5lbHQoXCJUYWJsZVwiLCBsZWFmLnN0YXJ0LCBsZWFmLnN0YXJ0ICsgbGVhZi5jb250ZW50Lmxlbmd0aCwgdGhpcy5yb3dzKSk7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbn1cbi8qKlxuVGhpcyBleHRlbnNpb24gcHJvdmlkZXNcbltHRk0tc3R5bGVdKGh0dHBzOi8vZ2l0aHViLmdpdGh1Yi5jb20vZ2ZtLyN0YWJsZXMtZXh0ZW5zaW9uLSlcbnRhYmxlcywgdXNpbmcgc3ludGF4IGxpa2UgdGhpczpcblxuYGBgXG58IGhlYWQgMSB8IGhlYWQgMiB8XG58IC0tLSAgICB8IC0tLSAgICB8XG58IGNlbGwgMSB8IGNlbGwgMiB8XG5gYGBcbiovXG5jb25zdCBUYWJsZSA9IHtcbiAgICBkZWZpbmVOb2RlczogW1xuICAgICAgICB7IG5hbWU6IFwiVGFibGVcIiwgYmxvY2s6IHRydWUgfSxcbiAgICAgICAgeyBuYW1lOiBcIlRhYmxlSGVhZGVyXCIsIHN0eWxlOiB7IFwiVGFibGVIZWFkZXIvLi4uXCI6IHRhZ3MuaGVhZGluZyB9IH0sXG4gICAgICAgIFwiVGFibGVSb3dcIixcbiAgICAgICAgeyBuYW1lOiBcIlRhYmxlQ2VsbFwiLCBzdHlsZTogdGFncy5jb250ZW50IH0sXG4gICAgICAgIHsgbmFtZTogXCJUYWJsZURlbGltaXRlclwiLCBzdHlsZTogdGFncy5wcm9jZXNzaW5nSW5zdHJ1Y3Rpb24gfSxcbiAgICBdLFxuICAgIHBhcnNlQmxvY2s6IFt7XG4gICAgICAgICAgICBuYW1lOiBcIlRhYmxlXCIsXG4gICAgICAgICAgICBsZWFmKF8sIGxlYWYpIHsgcmV0dXJuIGhhc1BpcGUobGVhZi5jb250ZW50LCAwKSA/IG5ldyBUYWJsZVBhcnNlciA6IG51bGw7IH0sXG4gICAgICAgICAgICBlbmRMZWFmKGN4LCBsaW5lLCBsZWFmKSB7XG4gICAgICAgICAgICAgICAgaWYgKGxlYWYucGFyc2Vycy5zb21lKHAgPT4gcCBpbnN0YW5jZW9mIFRhYmxlUGFyc2VyKSB8fCAhaGFzUGlwZShsaW5lLnRleHQsIGxpbmUuYmFzZVBvcykpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICBsZXQgbmV4dCA9IGN4LnBlZWtMaW5lKCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGRlbGltaXRlckxpbmUudGVzdChuZXh0KSAmJiBwYXJzZVJvdyhjeCwgbGluZS50ZXh0LCBsaW5lLmJhc2VQb3MpID09IHBhcnNlUm93KGN4LCBuZXh0LCBsaW5lLmJhc2VQb3MpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGJlZm9yZTogXCJTZXRleHRIZWFkaW5nXCJcbiAgICAgICAgfV1cbn07XG5jbGFzcyBUYXNrUGFyc2VyIHtcbiAgICBuZXh0TGluZSgpIHsgcmV0dXJuIGZhbHNlOyB9XG4gICAgZmluaXNoKGN4LCBsZWFmKSB7XG4gICAgICAgIGN4LmFkZExlYWZFbGVtZW50KGxlYWYsIGN4LmVsdChcIlRhc2tcIiwgbGVhZi5zdGFydCwgbGVhZi5zdGFydCArIGxlYWYuY29udGVudC5sZW5ndGgsIFtcbiAgICAgICAgICAgIGN4LmVsdChcIlRhc2tNYXJrZXJcIiwgbGVhZi5zdGFydCwgbGVhZi5zdGFydCArIDMpLFxuICAgICAgICAgICAgLi4uY3gucGFyc2VyLnBhcnNlSW5saW5lKGxlYWYuY29udGVudC5zbGljZSgzKSwgbGVhZi5zdGFydCArIDMpXG4gICAgICAgIF0pKTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxufVxuLyoqXG5FeHRlbnNpb24gcHJvdmlkaW5nXG5bR0ZNLXN0eWxlXShodHRwczovL2dpdGh1Yi5naXRodWIuY29tL2dmbS8jdGFzay1saXN0LWl0ZW1zLWV4dGVuc2lvbi0pXG50YXNrIGxpc3QgaXRlbXMsIHdoZXJlIGxpc3QgaXRlbXMgY2FuIGJlIHByZWZpeGVkIHdpdGggYFsgXWAgb3JcbmBbeF1gIHRvIGFkZCBhIGNoZWNrYm94LlxuKi9cbmNvbnN0IFRhc2tMaXN0ID0ge1xuICAgIGRlZmluZU5vZGVzOiBbXG4gICAgICAgIHsgbmFtZTogXCJUYXNrXCIsIGJsb2NrOiB0cnVlLCBzdHlsZTogdGFncy5saXN0IH0sXG4gICAgICAgIHsgbmFtZTogXCJUYXNrTWFya2VyXCIsIHN0eWxlOiB0YWdzLmF0b20gfVxuICAgIF0sXG4gICAgcGFyc2VCbG9jazogW3tcbiAgICAgICAgICAgIG5hbWU6IFwiVGFza0xpc3RcIixcbiAgICAgICAgICAgIGxlYWYoY3gsIGxlYWYpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gL15cXFtbIHhYXVxcXVsgXFx0XS8udGVzdChsZWFmLmNvbnRlbnQpICYmIGN4LnBhcmVudFR5cGUoKS5uYW1lID09IFwiTGlzdEl0ZW1cIiA/IG5ldyBUYXNrUGFyc2VyIDogbnVsbDtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBhZnRlcjogXCJTZXRleHRIZWFkaW5nXCJcbiAgICAgICAgfV1cbn07XG5jb25zdCBhdXRvbGlua1JFID0gLyh3d3dcXC4pfChodHRwcz86XFwvXFwvKXwoW1xcdy4rLV17MSwxMDB9QCl8KG1haWx0bzp8eG1wcDopL2d5O1xuY29uc3QgdXJsUkUgPSAvW1xcdy1dKyhcXC5bXFx3LV0rKSsoXFwvW15cXHM8XSopPy9neTtcbmNvbnN0IGxhc3RUd29Eb21haW5Xb3JkcyA9IC9bXFx3LV0rXFwuW1xcdy1dKygkfFxcLykvO1xuY29uc3QgZW1haWxSRSA9IC9bXFx3ListXStAW1xcdy1dKyhcXC5bXFx3Li1dKykrL2d5O1xuY29uc3QgeG1wcFJlc291cmNlUkUgPSAvXFwvW2EtekEtWlxcZEAuXSsvZ3k7XG5mdW5jdGlvbiBjb3VudChzdHIsIGZyb20sIHRvLCBjaCkge1xuICAgIGxldCByZXN1bHQgPSAwO1xuICAgIGZvciAobGV0IGkgPSBmcm9tOyBpIDwgdG87IGkrKylcbiAgICAgICAgaWYgKHN0cltpXSA9PSBjaClcbiAgICAgICAgICAgIHJlc3VsdCsrO1xuICAgIHJldHVybiByZXN1bHQ7XG59XG5mdW5jdGlvbiBhdXRvbGlua1VSTEVuZCh0ZXh0LCBmcm9tKSB7XG4gICAgdXJsUkUubGFzdEluZGV4ID0gZnJvbTtcbiAgICBsZXQgbSA9IHVybFJFLmV4ZWModGV4dCk7XG4gICAgaWYgKCFtIHx8IGxhc3RUd29Eb21haW5Xb3Jkcy5leGVjKG1bMF0pWzBdLmluZGV4T2YoXCJfXCIpID4gLTEpXG4gICAgICAgIHJldHVybiAtMTtcbiAgICBsZXQgZW5kID0gZnJvbSArIG1bMF0ubGVuZ3RoO1xuICAgIGZvciAoOzspIHtcbiAgICAgICAgbGV0IGxhc3QgPSB0ZXh0W2VuZCAtIDFdLCBtO1xuICAgICAgICBpZiAoL1s/IS4sOipffl0vLnRlc3QobGFzdCkgfHxcbiAgICAgICAgICAgIGxhc3QgPT0gXCIpXCIgJiYgY291bnQodGV4dCwgZnJvbSwgZW5kLCBcIilcIikgPiBjb3VudCh0ZXh0LCBmcm9tLCBlbmQsIFwiKFwiKSlcbiAgICAgICAgICAgIGVuZC0tO1xuICAgICAgICBlbHNlIGlmIChsYXN0ID09IFwiO1wiICYmIChtID0gLyYoPzojXFxkK3wjeFthLWZcXGRdK3xcXHcrKTskLy5leGVjKHRleHQuc2xpY2UoZnJvbSwgZW5kKSkpKVxuICAgICAgICAgICAgZW5kID0gZnJvbSArIG0uaW5kZXg7XG4gICAgICAgIGVsc2VcbiAgICAgICAgICAgIGJyZWFrO1xuICAgIH1cbiAgICByZXR1cm4gZW5kO1xufVxuZnVuY3Rpb24gYXV0b2xpbmtFbWFpbEVuZCh0ZXh0LCBmcm9tKSB7XG4gICAgZW1haWxSRS5sYXN0SW5kZXggPSBmcm9tO1xuICAgIGxldCBtID0gZW1haWxSRS5leGVjKHRleHQpO1xuICAgIGlmICghbSlcbiAgICAgICAgcmV0dXJuIC0xO1xuICAgIGxldCBsYXN0ID0gbVswXVttWzBdLmxlbmd0aCAtIDFdO1xuICAgIHJldHVybiBsYXN0ID09IFwiX1wiIHx8IGxhc3QgPT0gXCItXCIgPyAtMSA6IGZyb20gKyBtWzBdLmxlbmd0aCAtIChsYXN0ID09IFwiLlwiID8gMSA6IDApO1xufVxuLyoqXG5FeHRlbnNpb24gdGhhdCBpbXBsZW1lbnRzIGF1dG9saW5raW5nIGZvclxuYHd3dy5gL2BodHRwOi8vYC9gaHR0cHM6Ly9gL2BtYWlsdG86YC9geG1wcDpgIFVSTHMgYW5kIGVtYWlsXG5hZGRyZXNzZXMuXG4qL1xuY29uc3QgQXV0b2xpbmsgPSB7XG4gICAgcGFyc2VJbmxpbmU6IFt7XG4gICAgICAgICAgICBuYW1lOiBcIkF1dG9saW5rXCIsXG4gICAgICAgICAgICBwYXJzZShjeCwgbmV4dCwgYWJzUG9zKSB7XG4gICAgICAgICAgICAgICAgbGV0IHBvcyA9IGFic1BvcyAtIGN4Lm9mZnNldDtcbiAgICAgICAgICAgICAgICBpZiAocG9zICYmIC9cXHcvLnRlc3QoY3gudGV4dFtwb3MgLSAxXSkpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAtMTtcbiAgICAgICAgICAgICAgICBhdXRvbGlua1JFLmxhc3RJbmRleCA9IHBvcztcbiAgICAgICAgICAgICAgICBsZXQgbSA9IGF1dG9saW5rUkUuZXhlYyhjeC50ZXh0KSwgZW5kID0gLTE7XG4gICAgICAgICAgICAgICAgaWYgKCFtKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gLTE7XG4gICAgICAgICAgICAgICAgaWYgKG1bMV0gfHwgbVsyXSkgeyAvLyB3d3cuLCBodHRwOi8vXG4gICAgICAgICAgICAgICAgICAgIGVuZCA9IGF1dG9saW5rVVJMRW5kKGN4LnRleHQsIHBvcyArIG1bMF0ubGVuZ3RoKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGVuZCA+IC0xICYmIGN4Lmhhc09wZW5MaW5rKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgbm9CcmFja2V0ID0gLyhbXlxcW1xcXV18XFxbW15cXF1dKlxcXSkqLy5leGVjKGN4LnRleHQuc2xpY2UocG9zLCBlbmQpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVuZCA9IHBvcyArIG5vQnJhY2tldFswXS5sZW5ndGg7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAobVszXSkgeyAvLyBlbWFpbCBhZGRyZXNzXG4gICAgICAgICAgICAgICAgICAgIGVuZCA9IGF1dG9saW5rRW1haWxFbmQoY3gudGV4dCwgcG9zKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7IC8vIG1haWx0bzoveG1wcDpcbiAgICAgICAgICAgICAgICAgICAgZW5kID0gYXV0b2xpbmtFbWFpbEVuZChjeC50ZXh0LCBwb3MgKyBtWzBdLmxlbmd0aCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChlbmQgPiAtMSAmJiBtWzBdID09IFwieG1wcDpcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgeG1wcFJlc291cmNlUkUubGFzdEluZGV4ID0gZW5kO1xuICAgICAgICAgICAgICAgICAgICAgICAgbSA9IHhtcHBSZXNvdXJjZVJFLmV4ZWMoY3gudGV4dCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQgPSBtLmluZGV4ICsgbVswXS5sZW5ndGg7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGVuZCA8IDApXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAtMTtcbiAgICAgICAgICAgICAgICBjeC5hZGRFbGVtZW50KGN4LmVsdChcIlVSTFwiLCBhYnNQb3MsIGVuZCArIGN4Lm9mZnNldCkpO1xuICAgICAgICAgICAgICAgIHJldHVybiBlbmQgKyBjeC5vZmZzZXQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1dXG59O1xuLyoqXG5FeHRlbnNpb24gYnVuZGxlIGNvbnRhaW5pbmcgW2BUYWJsZWBdKCNUYWJsZSksXG5bYFRhc2tMaXN0YF0oI1Rhc2tMaXN0KSwgW2BTdHJpa2V0aHJvdWdoYF0oI1N0cmlrZXRocm91Z2gpLCBhbmRcbltgQXV0b2xpbmtgXSgjQXV0b2xpbmspLlxuKi9cbmNvbnN0IEdGTSA9IFtUYWJsZSwgVGFza0xpc3QsIFN0cmlrZXRocm91Z2gsIEF1dG9saW5rXTtcbmZ1bmN0aW9uIHBhcnNlU3ViU3VwZXIoY2gsIG5vZGUsIG1hcmspIHtcbiAgICByZXR1cm4gKGN4LCBuZXh0LCBwb3MpID0+IHtcbiAgICAgICAgaWYgKG5leHQgIT0gY2ggfHwgY3guY2hhcihwb3MgKyAxKSA9PSBjaClcbiAgICAgICAgICAgIHJldHVybiAtMTtcbiAgICAgICAgbGV0IGVsdHMgPSBbY3guZWx0KG1hcmssIHBvcywgcG9zICsgMSldO1xuICAgICAgICBmb3IgKGxldCBpID0gcG9zICsgMTsgaSA8IGN4LmVuZDsgaSsrKSB7XG4gICAgICAgICAgICBsZXQgbmV4dCA9IGN4LmNoYXIoaSk7XG4gICAgICAgICAgICBpZiAobmV4dCA9PSBjaClcbiAgICAgICAgICAgICAgICByZXR1cm4gY3guYWRkRWxlbWVudChjeC5lbHQobm9kZSwgcG9zLCBpICsgMSwgZWx0cy5jb25jYXQoY3guZWx0KG1hcmssIGksIGkgKyAxKSkpKTtcbiAgICAgICAgICAgIGlmIChuZXh0ID09IDkyIC8qICdcXFxcJyAqLylcbiAgICAgICAgICAgICAgICBlbHRzLnB1c2goY3guZWx0KFwiRXNjYXBlXCIsIGksIGkrKyArIDIpKTtcbiAgICAgICAgICAgIGlmIChzcGFjZShuZXh0KSlcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gLTE7XG4gICAgfTtcbn1cbi8qKlxuRXh0ZW5zaW9uIHByb3ZpZGluZ1xuW1BhbmRvYy1zdHlsZV0oaHR0cHM6Ly9wYW5kb2Mub3JnL01BTlVBTC5odG1sI3N1cGVyc2NyaXB0cy1hbmQtc3Vic2NyaXB0cylcbnN1cGVyc2NyaXB0IHVzaW5nIGBeYCBtYXJrZXJzLlxuKi9cbmNvbnN0IFN1cGVyc2NyaXB0ID0ge1xuICAgIGRlZmluZU5vZGVzOiBbXG4gICAgICAgIHsgbmFtZTogXCJTdXBlcnNjcmlwdFwiLCBzdHlsZTogdGFncy5zcGVjaWFsKHRhZ3MuY29udGVudCkgfSxcbiAgICAgICAgeyBuYW1lOiBcIlN1cGVyc2NyaXB0TWFya1wiLCBzdHlsZTogdGFncy5wcm9jZXNzaW5nSW5zdHJ1Y3Rpb24gfVxuICAgIF0sXG4gICAgcGFyc2VJbmxpbmU6IFt7XG4gICAgICAgICAgICBuYW1lOiBcIlN1cGVyc2NyaXB0XCIsXG4gICAgICAgICAgICBwYXJzZTogcGFyc2VTdWJTdXBlcig5NCAvKiAnXicgKi8sIFwiU3VwZXJzY3JpcHRcIiwgXCJTdXBlcnNjcmlwdE1hcmtcIilcbiAgICAgICAgfV1cbn07XG4vKipcbkV4dGVuc2lvbiBwcm92aWRpbmdcbltQYW5kb2Mtc3R5bGVdKGh0dHBzOi8vcGFuZG9jLm9yZy9NQU5VQUwuaHRtbCNzdXBlcnNjcmlwdHMtYW5kLXN1YnNjcmlwdHMpXG5zdWJzY3JpcHQgdXNpbmcgYH5gIG1hcmtlcnMuXG4qL1xuY29uc3QgU3Vic2NyaXB0ID0ge1xuICAgIGRlZmluZU5vZGVzOiBbXG4gICAgICAgIHsgbmFtZTogXCJTdWJzY3JpcHRcIiwgc3R5bGU6IHRhZ3Muc3BlY2lhbCh0YWdzLmNvbnRlbnQpIH0sXG4gICAgICAgIHsgbmFtZTogXCJTdWJzY3JpcHRNYXJrXCIsIHN0eWxlOiB0YWdzLnByb2Nlc3NpbmdJbnN0cnVjdGlvbiB9XG4gICAgXSxcbiAgICBwYXJzZUlubGluZTogW3tcbiAgICAgICAgICAgIG5hbWU6IFwiU3Vic2NyaXB0XCIsXG4gICAgICAgICAgICBwYXJzZTogcGFyc2VTdWJTdXBlcigxMjYgLyogJ34nICovLCBcIlN1YnNjcmlwdFwiLCBcIlN1YnNjcmlwdE1hcmtcIilcbiAgICAgICAgfV1cbn07XG4vKipcbkV4dGVuc2lvbiB0aGF0IHBhcnNlcyB0d28gY29sb25zIHdpdGggb25seSBsZXR0ZXJzLCB1bmRlcnNjb3JlcyxcbmFuZCBudW1iZXJzIGJldHdlZW4gdGhlbSBhcyBgRW1vamlgIG5vZGVzLlxuKi9cbmNvbnN0IEVtb2ppID0ge1xuICAgIGRlZmluZU5vZGVzOiBbeyBuYW1lOiBcIkVtb2ppXCIsIHN0eWxlOiB0YWdzLmNoYXJhY3RlciB9XSxcbiAgICBwYXJzZUlubGluZTogW3tcbiAgICAgICAgICAgIG5hbWU6IFwiRW1vamlcIixcbiAgICAgICAgICAgIHBhcnNlKGN4LCBuZXh0LCBwb3MpIHtcbiAgICAgICAgICAgICAgICBsZXQgbWF0Y2g7XG4gICAgICAgICAgICAgICAgaWYgKG5leHQgIT0gNTggLyogJzonICovIHx8ICEobWF0Y2ggPSAvXlthLXpBLVpfMC05XSs6Ly5leGVjKGN4LnNsaWNlKHBvcyArIDEsIGN4LmVuZCkpKSlcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIC0xO1xuICAgICAgICAgICAgICAgIHJldHVybiBjeC5hZGRFbGVtZW50KGN4LmVsdChcIkVtb2ppXCIsIHBvcywgcG9zICsgMSArIG1hdGNoWzBdLmxlbmd0aCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XVxufTtcblxuZXhwb3J0IHsgQXV0b2xpbmssIEJsb2NrQ29udGV4dCwgRWxlbWVudCwgRW1vamksIEdGTSwgSW5saW5lQ29udGV4dCwgTGVhZkJsb2NrLCBMaW5lLCBNYXJrZG93blBhcnNlciwgU3RyaWtldGhyb3VnaCwgU3Vic2NyaXB0LCBTdXBlcnNjcmlwdCwgVGFibGUsIFRhc2tMaXN0LCBwYXJzZUNvZGUsIHBhcnNlciB9O1xuIiwKICAgICJpbXBvcnQgeyBFZGl0b3JTZWxlY3Rpb24sIGNvdW50Q29sdW1uLCBQcmVjLCBFZGl0b3JTdGF0ZSB9IGZyb20gJ0Bjb2RlbWlycm9yL3N0YXRlJztcbmltcG9ydCB7IEVkaXRvclZpZXcsIGtleW1hcCB9IGZyb20gJ0Bjb2RlbWlycm9yL3ZpZXcnO1xuaW1wb3J0IHsgZGVmaW5lTGFuZ3VhZ2VGYWNldCwgZm9sZE5vZGVQcm9wLCBpbmRlbnROb2RlUHJvcCwgbGFuZ3VhZ2VEYXRhUHJvcCwgZm9sZFNlcnZpY2UsIHN5bnRheFRyZWUsIExhbmd1YWdlLCBMYW5ndWFnZURlc2NyaXB0aW9uLCBQYXJzZUNvbnRleHQsIGluZGVudFVuaXQsIExhbmd1YWdlU3VwcG9ydCB9IGZyb20gJ0Bjb2RlbWlycm9yL2xhbmd1YWdlJztcbmltcG9ydCB7IENvbXBsZXRpb25Db250ZXh0IH0gZnJvbSAnQGNvZGVtaXJyb3IvYXV0b2NvbXBsZXRlJztcbmltcG9ydCB7IHBhcnNlciwgR0ZNLCBTdWJzY3JpcHQsIFN1cGVyc2NyaXB0LCBFbW9qaSwgTWFya2Rvd25QYXJzZXIsIHBhcnNlQ29kZSB9IGZyb20gJ0BsZXplci9tYXJrZG93bic7XG5pbXBvcnQgeyBodG1sLCBodG1sQ29tcGxldGlvblNvdXJjZSB9IGZyb20gJ0Bjb2RlbWlycm9yL2xhbmctaHRtbCc7XG5pbXBvcnQgeyBOb2RlUHJvcCB9IGZyb20gJ0BsZXplci9jb21tb24nO1xuXG5jb25zdCBkYXRhID0gLypAX19QVVJFX18qL2RlZmluZUxhbmd1YWdlRmFjZXQoeyBjb21tZW50VG9rZW5zOiB7IGJsb2NrOiB7IG9wZW46IFwiPCEtLVwiLCBjbG9zZTogXCItLT5cIiB9IH0gfSk7XG5jb25zdCBoZWFkaW5nUHJvcCA9IC8qQF9fUFVSRV9fKi9uZXcgTm9kZVByb3AoKTtcbmNvbnN0IGNvbW1vbm1hcmsgPSAvKkBfX1BVUkVfXyovcGFyc2VyLmNvbmZpZ3VyZSh7XG4gICAgcHJvcHM6IFtcbiAgICAgICAgLypAX19QVVJFX18qL2ZvbGROb2RlUHJvcC5hZGQodHlwZSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gIXR5cGUuaXMoXCJCbG9ja1wiKSB8fCB0eXBlLmlzKFwiRG9jdW1lbnRcIikgfHwgaXNIZWFkaW5nKHR5cGUpICE9IG51bGwgfHwgaXNMaXN0KHR5cGUpID8gdW5kZWZpbmVkXG4gICAgICAgICAgICAgICAgOiAodHJlZSwgc3RhdGUpID0+ICh7IGZyb206IHN0YXRlLmRvYy5saW5lQXQodHJlZS5mcm9tKS50bywgdG86IHRyZWUudG8gfSk7XG4gICAgICAgIH0pLFxuICAgICAgICAvKkBfX1BVUkVfXyovaGVhZGluZ1Byb3AuYWRkKGlzSGVhZGluZyksXG4gICAgICAgIC8qQF9fUFVSRV9fKi9pbmRlbnROb2RlUHJvcC5hZGQoe1xuICAgICAgICAgICAgRG9jdW1lbnQ6ICgpID0+IG51bGxcbiAgICAgICAgfSksXG4gICAgICAgIC8qQF9fUFVSRV9fKi9sYW5ndWFnZURhdGFQcm9wLmFkZCh7XG4gICAgICAgICAgICBEb2N1bWVudDogZGF0YVxuICAgICAgICB9KVxuICAgIF1cbn0pO1xuZnVuY3Rpb24gaXNIZWFkaW5nKHR5cGUpIHtcbiAgICBsZXQgbWF0Y2ggPSAvXig/OkFUWHxTZXRleHQpSGVhZGluZyhcXGQpJC8uZXhlYyh0eXBlLm5hbWUpO1xuICAgIHJldHVybiBtYXRjaCA/ICttYXRjaFsxXSA6IHVuZGVmaW5lZDtcbn1cbmZ1bmN0aW9uIGlzTGlzdCh0eXBlKSB7XG4gICAgcmV0dXJuIHR5cGUubmFtZSA9PSBcIk9yZGVyZWRMaXN0XCIgfHwgdHlwZS5uYW1lID09IFwiQnVsbGV0TGlzdFwiO1xufVxuZnVuY3Rpb24gZmluZFNlY3Rpb25FbmQoaGVhZGVyTm9kZSwgbGV2ZWwpIHtcbiAgICBsZXQgbGFzdCA9IGhlYWRlck5vZGU7XG4gICAgZm9yICg7Oykge1xuICAgICAgICBsZXQgbmV4dCA9IGxhc3QubmV4dFNpYmxpbmcsIGhlYWRpbmc7XG4gICAgICAgIGlmICghbmV4dCB8fCAoaGVhZGluZyA9IGlzSGVhZGluZyhuZXh0LnR5cGUpKSAhPSBudWxsICYmIGhlYWRpbmcgPD0gbGV2ZWwpXG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgbGFzdCA9IG5leHQ7XG4gICAgfVxuICAgIHJldHVybiBsYXN0LnRvO1xufVxuY29uc3QgaGVhZGVySW5kZW50ID0gLypAX19QVVJFX18qL2ZvbGRTZXJ2aWNlLm9mKChzdGF0ZSwgc3RhcnQsIGVuZCkgPT4ge1xuICAgIGZvciAobGV0IG5vZGUgPSBzeW50YXhUcmVlKHN0YXRlKS5yZXNvbHZlSW5uZXIoZW5kLCAtMSk7IG5vZGU7IG5vZGUgPSBub2RlLnBhcmVudCkge1xuICAgICAgICBpZiAobm9kZS5mcm9tIDwgc3RhcnQpXG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgbGV0IGhlYWRpbmcgPSBub2RlLnR5cGUucHJvcChoZWFkaW5nUHJvcCk7XG4gICAgICAgIGlmIChoZWFkaW5nID09IG51bGwpXG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgbGV0IHVwdG8gPSBmaW5kU2VjdGlvbkVuZChub2RlLCBoZWFkaW5nKTtcbiAgICAgICAgaWYgKHVwdG8gPiBlbmQpXG4gICAgICAgICAgICByZXR1cm4geyBmcm9tOiBlbmQsIHRvOiB1cHRvIH07XG4gICAgfVxuICAgIHJldHVybiBudWxsO1xufSk7XG5mdW5jdGlvbiBta0xhbmcocGFyc2VyKSB7XG4gICAgcmV0dXJuIG5ldyBMYW5ndWFnZShkYXRhLCBwYXJzZXIsIFtdLCBcIm1hcmtkb3duXCIpO1xufVxuLyoqXG5MYW5ndWFnZSBzdXBwb3J0IGZvciBzdHJpY3QgQ29tbW9uTWFyay5cbiovXG5jb25zdCBjb21tb25tYXJrTGFuZ3VhZ2UgPSAvKkBfX1BVUkVfXyovbWtMYW5nKGNvbW1vbm1hcmspO1xuY29uc3QgZXh0ZW5kZWQgPSAvKkBfX1BVUkVfXyovY29tbW9ubWFyay5jb25maWd1cmUoW0dGTSwgU3Vic2NyaXB0LCBTdXBlcnNjcmlwdCwgRW1vamksIHtcbiAgICAgICAgcHJvcHM6IFtcbiAgICAgICAgICAgIC8qQF9fUFVSRV9fKi9mb2xkTm9kZVByb3AuYWRkKHtcbiAgICAgICAgICAgICAgICBUYWJsZTogKHRyZWUsIHN0YXRlKSA9PiAoeyBmcm9tOiBzdGF0ZS5kb2MubGluZUF0KHRyZWUuZnJvbSkudG8sIHRvOiB0cmVlLnRvIH0pXG4gICAgICAgICAgICB9KVxuICAgICAgICBdXG4gICAgfV0pO1xuLyoqXG5MYW5ndWFnZSBzdXBwb3J0IGZvciBbR0ZNXShodHRwczovL2dpdGh1Yi5naXRodWIuY29tL2dmbS8pIHBsdXNcbnN1YnNjcmlwdCwgc3VwZXJzY3JpcHQsIGFuZCBlbW9qaSBzeW50YXguXG4qL1xuY29uc3QgbWFya2Rvd25MYW5ndWFnZSA9IC8qQF9fUFVSRV9fKi9ta0xhbmcoZXh0ZW5kZWQpO1xuZnVuY3Rpb24gZ2V0Q29kZVBhcnNlcihsYW5ndWFnZXMsIGRlZmF1bHRMYW5ndWFnZSkge1xuICAgIHJldHVybiAoaW5mbykgPT4ge1xuICAgICAgICBpZiAoaW5mbyAmJiBsYW5ndWFnZXMpIHtcbiAgICAgICAgICAgIGxldCBmb3VuZCA9IG51bGw7XG4gICAgICAgICAgICAvLyBTdHJpcCBhbnl0aGluZyBhZnRlciB3aGl0ZXNwYWNlXG4gICAgICAgICAgICBpbmZvID0gL1xcUyovLmV4ZWMoaW5mbylbMF07XG4gICAgICAgICAgICBpZiAodHlwZW9mIGxhbmd1YWdlcyA9PSBcImZ1bmN0aW9uXCIpXG4gICAgICAgICAgICAgICAgZm91bmQgPSBsYW5ndWFnZXMoaW5mbyk7XG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgZm91bmQgPSBMYW5ndWFnZURlc2NyaXB0aW9uLm1hdGNoTGFuZ3VhZ2VOYW1lKGxhbmd1YWdlcywgaW5mbywgdHJ1ZSk7XG4gICAgICAgICAgICBpZiAoZm91bmQgaW5zdGFuY2VvZiBMYW5ndWFnZURlc2NyaXB0aW9uKVxuICAgICAgICAgICAgICAgIHJldHVybiBmb3VuZC5zdXBwb3J0ID8gZm91bmQuc3VwcG9ydC5sYW5ndWFnZS5wYXJzZXIgOiBQYXJzZUNvbnRleHQuZ2V0U2tpcHBpbmdQYXJzZXIoZm91bmQubG9hZCgpKTtcbiAgICAgICAgICAgIGVsc2UgaWYgKGZvdW5kKVxuICAgICAgICAgICAgICAgIHJldHVybiBmb3VuZC5wYXJzZXI7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGRlZmF1bHRMYW5ndWFnZSA/IGRlZmF1bHRMYW5ndWFnZS5wYXJzZXIgOiBudWxsO1xuICAgIH07XG59XG5cbmNsYXNzIENvbnRleHQge1xuICAgIGNvbnN0cnVjdG9yKG5vZGUsIGZyb20sIHRvLCBzcGFjZUJlZm9yZSwgc3BhY2VBZnRlciwgdHlwZSwgaXRlbSkge1xuICAgICAgICB0aGlzLm5vZGUgPSBub2RlO1xuICAgICAgICB0aGlzLmZyb20gPSBmcm9tO1xuICAgICAgICB0aGlzLnRvID0gdG87XG4gICAgICAgIHRoaXMuc3BhY2VCZWZvcmUgPSBzcGFjZUJlZm9yZTtcbiAgICAgICAgdGhpcy5zcGFjZUFmdGVyID0gc3BhY2VBZnRlcjtcbiAgICAgICAgdGhpcy50eXBlID0gdHlwZTtcbiAgICAgICAgdGhpcy5pdGVtID0gaXRlbTtcbiAgICB9XG4gICAgYmxhbmsobWF4V2lkdGgsIHRyYWlsaW5nID0gdHJ1ZSkge1xuICAgICAgICBsZXQgcmVzdWx0ID0gdGhpcy5zcGFjZUJlZm9yZSArICh0aGlzLm5vZGUubmFtZSA9PSBcIkJsb2NrcXVvdGVcIiA/IFwiPlwiIDogXCJcIik7XG4gICAgICAgIGlmIChtYXhXaWR0aCAhPSBudWxsKSB7XG4gICAgICAgICAgICB3aGlsZSAocmVzdWx0Lmxlbmd0aCA8IG1heFdpZHRoKVxuICAgICAgICAgICAgICAgIHJlc3VsdCArPSBcIiBcIjtcbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gdGhpcy50byAtIHRoaXMuZnJvbSAtIHJlc3VsdC5sZW5ndGggLSB0aGlzLnNwYWNlQWZ0ZXIubGVuZ3RoOyBpID4gMDsgaS0tKVxuICAgICAgICAgICAgICAgIHJlc3VsdCArPSBcIiBcIjtcbiAgICAgICAgICAgIHJldHVybiByZXN1bHQgKyAodHJhaWxpbmcgPyB0aGlzLnNwYWNlQWZ0ZXIgOiBcIlwiKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBtYXJrZXIoZG9jLCBhZGQpIHtcbiAgICAgICAgbGV0IG51bWJlciA9IHRoaXMubm9kZS5uYW1lID09IFwiT3JkZXJlZExpc3RcIiA/IFN0cmluZygoK2l0ZW1OdW1iZXIodGhpcy5pdGVtLCBkb2MpWzJdICsgYWRkKSkgOiBcIlwiO1xuICAgICAgICByZXR1cm4gdGhpcy5zcGFjZUJlZm9yZSArIG51bWJlciArIHRoaXMudHlwZSArIHRoaXMuc3BhY2VBZnRlcjtcbiAgICB9XG59XG5mdW5jdGlvbiBnZXRDb250ZXh0KG5vZGUsIGRvYykge1xuICAgIGxldCBub2RlcyA9IFtdLCBjb250ZXh0ID0gW107XG4gICAgZm9yIChsZXQgY3VyID0gbm9kZTsgY3VyOyBjdXIgPSBjdXIucGFyZW50KSB7XG4gICAgICAgIGlmIChjdXIubmFtZSA9PSBcIkZlbmNlZENvZGVcIilcbiAgICAgICAgICAgIHJldHVybiBjb250ZXh0O1xuICAgICAgICBpZiAoY3VyLm5hbWUgPT0gXCJMaXN0SXRlbVwiIHx8IGN1ci5uYW1lID09IFwiQmxvY2txdW90ZVwiKVxuICAgICAgICAgICAgbm9kZXMucHVzaChjdXIpO1xuICAgIH1cbiAgICBmb3IgKGxldCBpID0gbm9kZXMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcbiAgICAgICAgbGV0IG5vZGUgPSBub2Rlc1tpXSwgbWF0Y2g7XG4gICAgICAgIGxldCBsaW5lID0gZG9jLmxpbmVBdChub2RlLmZyb20pLCBzdGFydFBvcyA9IG5vZGUuZnJvbSAtIGxpbmUuZnJvbTtcbiAgICAgICAgaWYgKG5vZGUubmFtZSA9PSBcIkJsb2NrcXVvdGVcIiAmJiAobWF0Y2ggPSAvXiAqPiggPykvLmV4ZWMobGluZS50ZXh0LnNsaWNlKHN0YXJ0UG9zKSkpKSB7XG4gICAgICAgICAgICBjb250ZXh0LnB1c2gobmV3IENvbnRleHQobm9kZSwgc3RhcnRQb3MsIHN0YXJ0UG9zICsgbWF0Y2hbMF0ubGVuZ3RoLCBcIlwiLCBtYXRjaFsxXSwgXCI+XCIsIG51bGwpKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChub2RlLm5hbWUgPT0gXCJMaXN0SXRlbVwiICYmIG5vZGUucGFyZW50Lm5hbWUgPT0gXCJPcmRlcmVkTGlzdFwiICYmXG4gICAgICAgICAgICAobWF0Y2ggPSAvXiggKilcXGQrKFsuKV0pKCAqKS8uZXhlYyhsaW5lLnRleHQuc2xpY2Uoc3RhcnRQb3MpKSkpIHtcbiAgICAgICAgICAgIGxldCBhZnRlciA9IG1hdGNoWzNdLCBsZW4gPSBtYXRjaFswXS5sZW5ndGg7XG4gICAgICAgICAgICBpZiAoYWZ0ZXIubGVuZ3RoID49IDQpIHtcbiAgICAgICAgICAgICAgICBhZnRlciA9IGFmdGVyLnNsaWNlKDAsIGFmdGVyLmxlbmd0aCAtIDQpO1xuICAgICAgICAgICAgICAgIGxlbiAtPSA0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29udGV4dC5wdXNoKG5ldyBDb250ZXh0KG5vZGUucGFyZW50LCBzdGFydFBvcywgc3RhcnRQb3MgKyBsZW4sIG1hdGNoWzFdLCBhZnRlciwgbWF0Y2hbMl0sIG5vZGUpKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChub2RlLm5hbWUgPT0gXCJMaXN0SXRlbVwiICYmIG5vZGUucGFyZW50Lm5hbWUgPT0gXCJCdWxsZXRMaXN0XCIgJiZcbiAgICAgICAgICAgIChtYXRjaCA9IC9eKCAqKShbLSsqXSkoIHsxLDR9XFxbWyB4WF1cXF0pPyggKykvLmV4ZWMobGluZS50ZXh0LnNsaWNlKHN0YXJ0UG9zKSkpKSB7XG4gICAgICAgICAgICBsZXQgYWZ0ZXIgPSBtYXRjaFs0XSwgbGVuID0gbWF0Y2hbMF0ubGVuZ3RoO1xuICAgICAgICAgICAgaWYgKGFmdGVyLmxlbmd0aCA+IDQpIHtcbiAgICAgICAgICAgICAgICBhZnRlciA9IGFmdGVyLnNsaWNlKDAsIGFmdGVyLmxlbmd0aCAtIDQpO1xuICAgICAgICAgICAgICAgIGxlbiAtPSA0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbGV0IHR5cGUgPSBtYXRjaFsyXTtcbiAgICAgICAgICAgIGlmIChtYXRjaFszXSlcbiAgICAgICAgICAgICAgICB0eXBlICs9IG1hdGNoWzNdLnJlcGxhY2UoL1t4WF0vLCAnICcpO1xuICAgICAgICAgICAgY29udGV4dC5wdXNoKG5ldyBDb250ZXh0KG5vZGUucGFyZW50LCBzdGFydFBvcywgc3RhcnRQb3MgKyBsZW4sIG1hdGNoWzFdLCBhZnRlciwgdHlwZSwgbm9kZSkpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBjb250ZXh0O1xufVxuZnVuY3Rpb24gaXRlbU51bWJlcihpdGVtLCBkb2MpIHtcbiAgICByZXR1cm4gL14oXFxzKikoXFxkKykoPz1bLildKS8uZXhlYyhkb2Muc2xpY2VTdHJpbmcoaXRlbS5mcm9tLCBpdGVtLmZyb20gKyAxMCkpO1xufVxuZnVuY3Rpb24gcmVudW1iZXJMaXN0KGFmdGVyLCBkb2MsIGNoYW5nZXMsIG9mZnNldCA9IDApIHtcbiAgICBmb3IgKGxldCBwcmV2ID0gLTEsIG5vZGUgPSBhZnRlcjs7KSB7XG4gICAgICAgIGlmIChub2RlLm5hbWUgPT0gXCJMaXN0SXRlbVwiKSB7XG4gICAgICAgICAgICBsZXQgbSA9IGl0ZW1OdW1iZXIobm9kZSwgZG9jKTtcbiAgICAgICAgICAgIGxldCBudW1iZXIgPSArbVsyXTtcbiAgICAgICAgICAgIGlmIChwcmV2ID49IDApIHtcbiAgICAgICAgICAgICAgICBpZiAobnVtYmVyICE9IHByZXYgKyAxKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgY2hhbmdlcy5wdXNoKHsgZnJvbTogbm9kZS5mcm9tICsgbVsxXS5sZW5ndGgsIHRvOiBub2RlLmZyb20gKyBtWzBdLmxlbmd0aCwgaW5zZXJ0OiBTdHJpbmcocHJldiArIDIgKyBvZmZzZXQpIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcHJldiA9IG51bWJlcjtcbiAgICAgICAgfVxuICAgICAgICBsZXQgbmV4dCA9IG5vZGUubmV4dFNpYmxpbmc7XG4gICAgICAgIGlmICghbmV4dClcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBub2RlID0gbmV4dDtcbiAgICB9XG59XG5mdW5jdGlvbiBub3JtYWxpemVJbmRlbnQoY29udGVudCwgc3RhdGUpIHtcbiAgICBsZXQgYmxhbmsgPSAvXlsgXFx0XSovLmV4ZWMoY29udGVudClbMF0ubGVuZ3RoO1xuICAgIGlmICghYmxhbmsgfHwgc3RhdGUuZmFjZXQoaW5kZW50VW5pdCkgIT0gXCJcXHRcIilcbiAgICAgICAgcmV0dXJuIGNvbnRlbnQ7XG4gICAgbGV0IGNvbCA9IGNvdW50Q29sdW1uKGNvbnRlbnQsIDQsIGJsYW5rKTtcbiAgICBsZXQgc3BhY2UgPSBcIlwiO1xuICAgIGZvciAobGV0IGkgPSBjb2w7IGkgPiAwOykge1xuICAgICAgICBpZiAoaSA+PSA0KSB7XG4gICAgICAgICAgICBzcGFjZSArPSBcIlxcdFwiO1xuICAgICAgICAgICAgaSAtPSA0O1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgc3BhY2UgKz0gXCIgXCI7XG4gICAgICAgICAgICBpLS07XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHNwYWNlICsgY29udGVudC5zbGljZShibGFuayk7XG59XG4vKipcblJldHVybnMgYSBjb21tYW5kIGxpa2VcbltgaW5zZXJ0TmV3bGluZUNvbnRpbnVlTWFya3VwYF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNsYW5nLW1hcmtkb3duLmluc2VydE5ld2xpbmVDb250aW51ZU1hcmt1cCksXG5hbGxvd2luZyBmdXJ0aGVyIGNvbmZpZ3VyYXRpb24uXG4qL1xuY29uc3QgaW5zZXJ0TmV3bGluZUNvbnRpbnVlTWFya3VwQ29tbWFuZCA9IChjb25maWcgPSB7fSkgPT4gKHsgc3RhdGUsIGRpc3BhdGNoIH0pID0+IHtcbiAgICBsZXQgdHJlZSA9IHN5bnRheFRyZWUoc3RhdGUpLCB7IGRvYyB9ID0gc3RhdGU7XG4gICAgbGV0IGRvbnQgPSBudWxsLCBjaGFuZ2VzID0gc3RhdGUuY2hhbmdlQnlSYW5nZShyYW5nZSA9PiB7XG4gICAgICAgIGlmICghcmFuZ2UuZW1wdHkgfHwgIW1hcmtkb3duTGFuZ3VhZ2UuaXNBY3RpdmVBdChzdGF0ZSwgcmFuZ2UuZnJvbSwgLTEpICYmICFtYXJrZG93bkxhbmd1YWdlLmlzQWN0aXZlQXQoc3RhdGUsIHJhbmdlLmZyb20sIDEpKVxuICAgICAgICAgICAgcmV0dXJuIGRvbnQgPSB7IHJhbmdlIH07XG4gICAgICAgIGxldCBwb3MgPSByYW5nZS5mcm9tLCBsaW5lID0gZG9jLmxpbmVBdChwb3MpO1xuICAgICAgICBsZXQgY29udGV4dCA9IGdldENvbnRleHQodHJlZS5yZXNvbHZlSW5uZXIocG9zLCAtMSksIGRvYyk7XG4gICAgICAgIHdoaWxlIChjb250ZXh0Lmxlbmd0aCAmJiBjb250ZXh0W2NvbnRleHQubGVuZ3RoIC0gMV0uZnJvbSA+IHBvcyAtIGxpbmUuZnJvbSlcbiAgICAgICAgICAgIGNvbnRleHQucG9wKCk7XG4gICAgICAgIGlmICghY29udGV4dC5sZW5ndGgpXG4gICAgICAgICAgICByZXR1cm4gZG9udCA9IHsgcmFuZ2UgfTtcbiAgICAgICAgbGV0IGlubmVyID0gY29udGV4dFtjb250ZXh0Lmxlbmd0aCAtIDFdO1xuICAgICAgICBpZiAoaW5uZXIudG8gLSBpbm5lci5zcGFjZUFmdGVyLmxlbmd0aCA+IHBvcyAtIGxpbmUuZnJvbSlcbiAgICAgICAgICAgIHJldHVybiBkb250ID0geyByYW5nZSB9O1xuICAgICAgICBsZXQgZW1wdHlMaW5lID0gcG9zID49IChpbm5lci50byAtIGlubmVyLnNwYWNlQWZ0ZXIubGVuZ3RoKSAmJiAhL1xcUy8udGVzdChsaW5lLnRleHQuc2xpY2UoaW5uZXIudG8pKTtcbiAgICAgICAgLy8gRW1wdHkgbGluZSBpbiBsaXN0XG4gICAgICAgIGlmIChpbm5lci5pdGVtICYmIGVtcHR5TGluZSkge1xuICAgICAgICAgICAgbGV0IGZpcnN0ID0gaW5uZXIubm9kZS5maXJzdENoaWxkLCBzZWNvbmQgPSBpbm5lci5ub2RlLmdldENoaWxkKFwiTGlzdEl0ZW1cIiwgXCJMaXN0SXRlbVwiKTtcbiAgICAgICAgICAgIC8vIE5vdCBzZWNvbmQgaXRlbSBvciBibGFuayBsaW5lIGJlZm9yZTogZGVsZXRlIGEgbGV2ZWwgb2YgbWFya3VwXG4gICAgICAgICAgICBpZiAoZmlyc3QudG8gPj0gcG9zIHx8IHNlY29uZCAmJiBzZWNvbmQudG8gPCBwb3MgfHxcbiAgICAgICAgICAgICAgICBsaW5lLmZyb20gPiAwICYmICEvW15cXHM+XS8udGVzdChkb2MubGluZUF0KGxpbmUuZnJvbSAtIDEpLnRleHQpIHx8XG4gICAgICAgICAgICAgICAgY29uZmlnLm5vblRpZ2h0TGlzdHMgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgbGV0IG5leHQgPSBjb250ZXh0Lmxlbmd0aCA+IDEgPyBjb250ZXh0W2NvbnRleHQubGVuZ3RoIC0gMl0gOiBudWxsO1xuICAgICAgICAgICAgICAgIGxldCBkZWxUbywgaW5zZXJ0ID0gXCJcIjtcbiAgICAgICAgICAgICAgICBpZiAobmV4dCAmJiBuZXh0Lml0ZW0pIHsgLy8gUmUtYWRkIG1hcmtlciBmb3IgdGhlIGxpc3QgYXQgdGhlIG5leHQgbGV2ZWxcbiAgICAgICAgICAgICAgICAgICAgZGVsVG8gPSBsaW5lLmZyb20gKyBuZXh0LmZyb207XG4gICAgICAgICAgICAgICAgICAgIGluc2VydCA9IG5leHQubWFya2VyKGRvYywgMSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBkZWxUbyA9IGxpbmUuZnJvbSArIChuZXh0ID8gbmV4dC50byA6IDApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBsZXQgY2hhbmdlcyA9IFt7IGZyb206IGRlbFRvLCB0bzogcG9zLCBpbnNlcnQgfV07XG4gICAgICAgICAgICAgICAgaWYgKGlubmVyLm5vZGUubmFtZSA9PSBcIk9yZGVyZWRMaXN0XCIpXG4gICAgICAgICAgICAgICAgICAgIHJlbnVtYmVyTGlzdChpbm5lci5pdGVtLCBkb2MsIGNoYW5nZXMsIC0yKTtcbiAgICAgICAgICAgICAgICBpZiAobmV4dCAmJiBuZXh0Lm5vZGUubmFtZSA9PSBcIk9yZGVyZWRMaXN0XCIpXG4gICAgICAgICAgICAgICAgICAgIHJlbnVtYmVyTGlzdChuZXh0Lml0ZW0sIGRvYywgY2hhbmdlcyk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHsgcmFuZ2U6IEVkaXRvclNlbGVjdGlvbi5jdXJzb3IoZGVsVG8gKyBpbnNlcnQubGVuZ3RoKSwgY2hhbmdlcyB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7IC8vIE1vdmUgc2Vjb25kIGl0ZW0gZG93biwgbWFraW5nIHRpZ2h0IHR3by1pdGVtIGxpc3Qgbm9uLXRpZ2h0XG4gICAgICAgICAgICAgICAgbGV0IGluc2VydCA9IGJsYW5rTGluZShjb250ZXh0LCBzdGF0ZSwgbGluZSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHsgcmFuZ2U6IEVkaXRvclNlbGVjdGlvbi5jdXJzb3IocG9zICsgaW5zZXJ0Lmxlbmd0aCArIDEpLFxuICAgICAgICAgICAgICAgICAgICBjaGFuZ2VzOiB7IGZyb206IGxpbmUuZnJvbSwgaW5zZXJ0OiBpbnNlcnQgKyBzdGF0ZS5saW5lQnJlYWsgfSB9O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChpbm5lci5ub2RlLm5hbWUgPT0gXCJCbG9ja3F1b3RlXCIgJiYgZW1wdHlMaW5lICYmIGxpbmUuZnJvbSkge1xuICAgICAgICAgICAgbGV0IHByZXZMaW5lID0gZG9jLmxpbmVBdChsaW5lLmZyb20gLSAxKSwgcXVvdGVkID0gLz5cXHMqJC8uZXhlYyhwcmV2TGluZS50ZXh0KTtcbiAgICAgICAgICAgIC8vIFR3byBhbGlnbmVkIGVtcHR5IHF1b3RlZCBsaW5lcyBpbiBhIHJvd1xuICAgICAgICAgICAgaWYgKHF1b3RlZCAmJiBxdW90ZWQuaW5kZXggPT0gaW5uZXIuZnJvbSkge1xuICAgICAgICAgICAgICAgIGxldCBjaGFuZ2VzID0gc3RhdGUuY2hhbmdlcyhbeyBmcm9tOiBwcmV2TGluZS5mcm9tICsgcXVvdGVkLmluZGV4LCB0bzogcHJldkxpbmUudG8gfSxcbiAgICAgICAgICAgICAgICAgICAgeyBmcm9tOiBsaW5lLmZyb20gKyBpbm5lci5mcm9tLCB0bzogbGluZS50byB9XSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHsgcmFuZ2U6IHJhbmdlLm1hcChjaGFuZ2VzKSwgY2hhbmdlcyB9O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGxldCBjaGFuZ2VzID0gW107XG4gICAgICAgIGlmIChpbm5lci5ub2RlLm5hbWUgPT0gXCJPcmRlcmVkTGlzdFwiKVxuICAgICAgICAgICAgcmVudW1iZXJMaXN0KGlubmVyLml0ZW0sIGRvYywgY2hhbmdlcyk7XG4gICAgICAgIGxldCBjb250aW51ZWQgPSBpbm5lci5pdGVtICYmIGlubmVyLml0ZW0uZnJvbSA8IGxpbmUuZnJvbTtcbiAgICAgICAgbGV0IGluc2VydCA9IFwiXCI7XG4gICAgICAgIC8vIElmIG5vdCBkZWRlbnRlZFxuICAgICAgICBpZiAoIWNvbnRpbnVlZCB8fCAvXltcXHNcXGQuKVxcLSsqPl0qLy5leGVjKGxpbmUudGV4dClbMF0ubGVuZ3RoID49IGlubmVyLnRvKSB7XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMCwgZSA9IGNvbnRleHQubGVuZ3RoIC0gMTsgaSA8PSBlOyBpKyspIHtcbiAgICAgICAgICAgICAgICBpbnNlcnQgKz0gaSA9PSBlICYmICFjb250aW51ZWQgPyBjb250ZXh0W2ldLm1hcmtlcihkb2MsIDEpXG4gICAgICAgICAgICAgICAgICAgIDogY29udGV4dFtpXS5ibGFuayhpIDwgZSA/IGNvdW50Q29sdW1uKGxpbmUudGV4dCwgNCwgY29udGV4dFtpICsgMV0uZnJvbSkgLSBpbnNlcnQubGVuZ3RoIDogbnVsbCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgbGV0IGZyb20gPSBwb3M7XG4gICAgICAgIHdoaWxlIChmcm9tID4gbGluZS5mcm9tICYmIC9cXHMvLnRlc3QobGluZS50ZXh0LmNoYXJBdChmcm9tIC0gbGluZS5mcm9tIC0gMSkpKVxuICAgICAgICAgICAgZnJvbS0tO1xuICAgICAgICBpbnNlcnQgPSBub3JtYWxpemVJbmRlbnQoaW5zZXJ0LCBzdGF0ZSk7XG4gICAgICAgIGlmIChub25UaWdodExpc3QoaW5uZXIubm9kZSwgc3RhdGUuZG9jKSlcbiAgICAgICAgICAgIGluc2VydCA9IGJsYW5rTGluZShjb250ZXh0LCBzdGF0ZSwgbGluZSkgKyBzdGF0ZS5saW5lQnJlYWsgKyBpbnNlcnQ7XG4gICAgICAgIGNoYW5nZXMucHVzaCh7IGZyb20sIHRvOiBwb3MsIGluc2VydDogc3RhdGUubGluZUJyZWFrICsgaW5zZXJ0IH0pO1xuICAgICAgICByZXR1cm4geyByYW5nZTogRWRpdG9yU2VsZWN0aW9uLmN1cnNvcihmcm9tICsgaW5zZXJ0Lmxlbmd0aCArIDEpLCBjaGFuZ2VzIH07XG4gICAgfSk7XG4gICAgaWYgKGRvbnQpXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICBkaXNwYXRjaChzdGF0ZS51cGRhdGUoY2hhbmdlcywgeyBzY3JvbGxJbnRvVmlldzogdHJ1ZSwgdXNlckV2ZW50OiBcImlucHV0XCIgfSkpO1xuICAgIHJldHVybiB0cnVlO1xufTtcbi8qKlxuVGhpcyBjb21tYW5kLCB3aGVuIGludm9rZWQgaW4gTWFya2Rvd24gY29udGV4dCB3aXRoIGN1cnNvclxuc2VsZWN0aW9uKHMpLCB3aWxsIGNyZWF0ZSBhIG5ldyBsaW5lIHdpdGggdGhlIG1hcmt1cCBmb3JcbmJsb2NrcXVvdGVzIGFuZCBsaXN0cyB0aGF0IHdlcmUgYWN0aXZlIG9uIHRoZSBvbGQgbGluZS4gSWYgdGhlXG5jdXJzb3Igd2FzIGRpcmVjdGx5IGFmdGVyIHRoZSBlbmQgb2YgdGhlIG1hcmt1cCBmb3IgdGhlIG9sZCBsaW5lLFxudHJhaWxpbmcgd2hpdGVzcGFjZSBhbmQgbGlzdCBtYXJrZXJzIGFyZSByZW1vdmVkIGZyb20gdGhhdCBsaW5lLlxuXG5UaGUgY29tbWFuZCBkb2VzIG5vdGhpbmcgaW4gbm9uLU1hcmtkb3duIGNvbnRleHQsIHNvIGl0IHNob3VsZFxubm90IGJlIHVzZWQgYXMgdGhlIG9ubHkgYmluZGluZyBmb3IgRW50ZXIgKGV2ZW4gaW4gYSBNYXJrZG93blxuZG9jdW1lbnQsIEhUTUwgYW5kIGNvZGUgcmVnaW9ucyBtaWdodCB1c2UgYSBkaWZmZXJlbnQgbGFuZ3VhZ2UpLlxuKi9cbmNvbnN0IGluc2VydE5ld2xpbmVDb250aW51ZU1hcmt1cCA9IC8qQF9fUFVSRV9fKi9pbnNlcnROZXdsaW5lQ29udGludWVNYXJrdXBDb21tYW5kKCk7XG5mdW5jdGlvbiBpc01hcmsobm9kZSkge1xuICAgIHJldHVybiBub2RlLm5hbWUgPT0gXCJRdW90ZU1hcmtcIiB8fCBub2RlLm5hbWUgPT0gXCJMaXN0TWFya1wiO1xufVxuZnVuY3Rpb24gbm9uVGlnaHRMaXN0KG5vZGUsIGRvYykge1xuICAgIGlmIChub2RlLm5hbWUgIT0gXCJPcmRlcmVkTGlzdFwiICYmIG5vZGUubmFtZSAhPSBcIkJ1bGxldExpc3RcIilcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIGxldCBmaXJzdCA9IG5vZGUuZmlyc3RDaGlsZCwgc2Vjb25kID0gbm9kZS5nZXRDaGlsZChcIkxpc3RJdGVtXCIsIFwiTGlzdEl0ZW1cIik7XG4gICAgaWYgKCFzZWNvbmQpXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICBsZXQgbGluZTEgPSBkb2MubGluZUF0KGZpcnN0LnRvKSwgbGluZTIgPSBkb2MubGluZUF0KHNlY29uZC5mcm9tKTtcbiAgICBsZXQgZW1wdHkgPSAvXltcXHM+XSokLy50ZXN0KGxpbmUxLnRleHQpO1xuICAgIHJldHVybiBsaW5lMS5udW1iZXIgKyAoZW1wdHkgPyAwIDogMSkgPCBsaW5lMi5udW1iZXI7XG59XG5mdW5jdGlvbiBibGFua0xpbmUoY29udGV4dCwgc3RhdGUsIGxpbmUpIHtcbiAgICBsZXQgaW5zZXJ0ID0gXCJcIjtcbiAgICBmb3IgKGxldCBpID0gMCwgZSA9IGNvbnRleHQubGVuZ3RoIC0gMjsgaSA8PSBlOyBpKyspIHtcbiAgICAgICAgaW5zZXJ0ICs9IGNvbnRleHRbaV0uYmxhbmsoaSA8IGVcbiAgICAgICAgICAgID8gY291bnRDb2x1bW4obGluZS50ZXh0LCA0LCBjb250ZXh0W2kgKyAxXS5mcm9tKSAtIGluc2VydC5sZW5ndGhcbiAgICAgICAgICAgIDogbnVsbCwgaSA8IGUpO1xuICAgIH1cbiAgICByZXR1cm4gbm9ybWFsaXplSW5kZW50KGluc2VydCwgc3RhdGUpO1xufVxuZnVuY3Rpb24gY29udGV4dE5vZGVGb3JEZWxldGUodHJlZSwgcG9zKSB7XG4gICAgbGV0IG5vZGUgPSB0cmVlLnJlc29sdmVJbm5lcihwb3MsIC0xKSwgc2NhbiA9IHBvcztcbiAgICBpZiAoaXNNYXJrKG5vZGUpKSB7XG4gICAgICAgIHNjYW4gPSBub2RlLmZyb207XG4gICAgICAgIG5vZGUgPSBub2RlLnBhcmVudDtcbiAgICB9XG4gICAgZm9yIChsZXQgcHJldjsgcHJldiA9IG5vZGUuY2hpbGRCZWZvcmUoc2Nhbik7KSB7XG4gICAgICAgIGlmIChpc01hcmsocHJldikpIHtcbiAgICAgICAgICAgIHNjYW4gPSBwcmV2LmZyb207XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAocHJldi5uYW1lID09IFwiT3JkZXJlZExpc3RcIiB8fCBwcmV2Lm5hbWUgPT0gXCJCdWxsZXRMaXN0XCIpIHtcbiAgICAgICAgICAgIG5vZGUgPSBwcmV2Lmxhc3RDaGlsZDtcbiAgICAgICAgICAgIHNjYW4gPSBub2RlLnRvO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG5vZGU7XG59XG4vKipcblRoaXMgY29tbWFuZCB3aWxsLCB3aGVuIGludm9rZWQgaW4gYSBNYXJrZG93biBjb250ZXh0IHdpdGggdGhlXG5jdXJzb3IgZGlyZWN0bHkgYWZ0ZXIgbGlzdCBvciBibG9ja3F1b3RlIG1hcmt1cCwgZGVsZXRlIG9uZSBsZXZlbFxub2YgbWFya3VwLiBXaGVuIHRoZSBtYXJrdXAgaXMgZm9yIGEgbGlzdCwgaXQgd2lsbCBiZSByZXBsYWNlZCBieVxuc3BhY2VzIG9uIHRoZSBmaXJzdCBpbnZvY2F0aW9uIChhIGZ1cnRoZXIgaW52b2NhdGlvbiB3aWxsIGRlbGV0ZVxudGhlIHNwYWNlcyksIHRvIG1ha2UgaXQgZWFzeSB0byBjb250aW51ZSBhIGxpc3QuXG5cbldoZW4gbm90IGFmdGVyIE1hcmtkb3duIGJsb2NrIG1hcmt1cCwgdGhpcyBjb21tYW5kIHdpbGwgcmV0dXJuXG5mYWxzZSwgc28gaXQgaXMgaW50ZW5kZWQgdG8gYmUgYm91bmQgYWxvbmdzaWRlIG90aGVyIGRlbGV0aW9uXG5jb21tYW5kcywgd2l0aCBhIGhpZ2hlciBwcmVjZWRlbmNlIHRoYW4gdGhlIG1vcmUgZ2VuZXJpYyBjb21tYW5kcy5cbiovXG5jb25zdCBkZWxldGVNYXJrdXBCYWNrd2FyZCA9ICh7IHN0YXRlLCBkaXNwYXRjaCB9KSA9PiB7XG4gICAgbGV0IHRyZWUgPSBzeW50YXhUcmVlKHN0YXRlKTtcbiAgICBsZXQgZG9udCA9IG51bGwsIGNoYW5nZXMgPSBzdGF0ZS5jaGFuZ2VCeVJhbmdlKHJhbmdlID0+IHtcbiAgICAgICAgbGV0IHBvcyA9IHJhbmdlLmZyb20sIHsgZG9jIH0gPSBzdGF0ZTtcbiAgICAgICAgaWYgKHJhbmdlLmVtcHR5ICYmIG1hcmtkb3duTGFuZ3VhZ2UuaXNBY3RpdmVBdChzdGF0ZSwgcmFuZ2UuZnJvbSkpIHtcbiAgICAgICAgICAgIGxldCBsaW5lID0gZG9jLmxpbmVBdChwb3MpO1xuICAgICAgICAgICAgbGV0IGNvbnRleHQgPSBnZXRDb250ZXh0KGNvbnRleHROb2RlRm9yRGVsZXRlKHRyZWUsIHBvcyksIGRvYyk7XG4gICAgICAgICAgICBpZiAoY29udGV4dC5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICBsZXQgaW5uZXIgPSBjb250ZXh0W2NvbnRleHQubGVuZ3RoIC0gMV07XG4gICAgICAgICAgICAgICAgbGV0IHNwYWNlRW5kID0gaW5uZXIudG8gLSBpbm5lci5zcGFjZUFmdGVyLmxlbmd0aCArIChpbm5lci5zcGFjZUFmdGVyID8gMSA6IDApO1xuICAgICAgICAgICAgICAgIC8vIERlbGV0ZSBleHRyYSB0cmFpbGluZyBzcGFjZSBhZnRlciBtYXJrdXBcbiAgICAgICAgICAgICAgICBpZiAocG9zIC0gbGluZS5mcm9tID4gc3BhY2VFbmQgJiYgIS9cXFMvLnRlc3QobGluZS50ZXh0LnNsaWNlKHNwYWNlRW5kLCBwb3MgLSBsaW5lLmZyb20pKSlcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsgcmFuZ2U6IEVkaXRvclNlbGVjdGlvbi5jdXJzb3IobGluZS5mcm9tICsgc3BhY2VFbmQpLFxuICAgICAgICAgICAgICAgICAgICAgICAgY2hhbmdlczogeyBmcm9tOiBsaW5lLmZyb20gKyBzcGFjZUVuZCwgdG86IHBvcyB9IH07XG4gICAgICAgICAgICAgICAgaWYgKHBvcyAtIGxpbmUuZnJvbSA9PSBzcGFjZUVuZCAmJlxuICAgICAgICAgICAgICAgICAgICAvLyBPbmx5IGFwcGx5IHRoaXMgaWYgd2UncmUgb24gdGhlIGxpbmUgdGhhdCBoYXMgdGhlXG4gICAgICAgICAgICAgICAgICAgIC8vIGNvbnN0cnVjdCdzIHN5bnRheCwgb3IgdGhlcmUncyBvbmx5IGluZGVudGF0aW9uIGluIHRoZVxuICAgICAgICAgICAgICAgICAgICAvLyB0YXJnZXQgcmFuZ2VcbiAgICAgICAgICAgICAgICAgICAgKCFpbm5lci5pdGVtIHx8IGxpbmUuZnJvbSA8PSBpbm5lci5pdGVtLmZyb20gfHwgIS9cXFMvLnRlc3QobGluZS50ZXh0LnNsaWNlKDAsIGlubmVyLnRvKSkpKSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBzdGFydCA9IGxpbmUuZnJvbSArIGlubmVyLmZyb207XG4gICAgICAgICAgICAgICAgICAgIC8vIFJlcGxhY2UgYSBsaXN0IGl0ZW0gbWFya2VyIHdpdGggYmxhbmsgc3BhY2VcbiAgICAgICAgICAgICAgICAgICAgaWYgKGlubmVyLml0ZW0gJiYgaW5uZXIubm9kZS5mcm9tIDwgaW5uZXIuaXRlbS5mcm9tICYmIC9cXFMvLnRlc3QobGluZS50ZXh0LnNsaWNlKGlubmVyLmZyb20sIGlubmVyLnRvKSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBpbnNlcnQgPSBpbm5lci5ibGFuayhjb3VudENvbHVtbihsaW5lLnRleHQsIDQsIGlubmVyLnRvKSAtIGNvdW50Q29sdW1uKGxpbmUudGV4dCwgNCwgaW5uZXIuZnJvbSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHN0YXJ0ID09IGxpbmUuZnJvbSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnNlcnQgPSBub3JtYWxpemVJbmRlbnQoaW5zZXJ0LCBzdGF0ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4geyByYW5nZTogRWRpdG9yU2VsZWN0aW9uLmN1cnNvcihzdGFydCArIGluc2VydC5sZW5ndGgpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoYW5nZXM6IHsgZnJvbTogc3RhcnQsIHRvOiBsaW5lLmZyb20gKyBpbm5lci50bywgaW5zZXJ0IH0gfTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAvLyBEZWxldGUgb25lIGxldmVsIG9mIGluZGVudGF0aW9uXG4gICAgICAgICAgICAgICAgICAgIGlmIChzdGFydCA8IHBvcylcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7IHJhbmdlOiBFZGl0b3JTZWxlY3Rpb24uY3Vyc29yKHN0YXJ0KSwgY2hhbmdlczogeyBmcm9tOiBzdGFydCwgdG86IHBvcyB9IH07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBkb250ID0geyByYW5nZSB9O1xuICAgIH0pO1xuICAgIGlmIChkb250KVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgZGlzcGF0Y2goc3RhdGUudXBkYXRlKGNoYW5nZXMsIHsgc2Nyb2xsSW50b1ZpZXc6IHRydWUsIHVzZXJFdmVudDogXCJkZWxldGVcIiB9KSk7XG4gICAgcmV0dXJuIHRydWU7XG59O1xuXG4vKipcbkEgc21hbGwga2V5bWFwIHdpdGggTWFya2Rvd24tc3BlY2lmaWMgYmluZGluZ3MuIEJpbmRzIEVudGVyIHRvXG5bYGluc2VydE5ld2xpbmVDb250aW51ZU1hcmt1cGBdKGh0dHBzOi8vY29kZW1pcnJvci5uZXQvNi9kb2NzL3JlZi8jbGFuZy1tYXJrZG93bi5pbnNlcnROZXdsaW5lQ29udGludWVNYXJrdXApXG5hbmQgQmFja3NwYWNlIHRvXG5bYGRlbGV0ZU1hcmt1cEJhY2t3YXJkYF0oaHR0cHM6Ly9jb2RlbWlycm9yLm5ldC82L2RvY3MvcmVmLyNsYW5nLW1hcmtkb3duLmRlbGV0ZU1hcmt1cEJhY2t3YXJkKS5cbiovXG5jb25zdCBtYXJrZG93bktleW1hcCA9IFtcbiAgICB7IGtleTogXCJFbnRlclwiLCBydW46IGluc2VydE5ld2xpbmVDb250aW51ZU1hcmt1cCB9LFxuICAgIHsga2V5OiBcIkJhY2tzcGFjZVwiLCBydW46IGRlbGV0ZU1hcmt1cEJhY2t3YXJkIH1cbl07XG5jb25zdCBodG1sTm9NYXRjaCA9IC8qQF9fUFVSRV9fKi9odG1sKHsgbWF0Y2hDbG9zaW5nVGFnczogZmFsc2UgfSk7XG4vKipcbk1hcmtkb3duIGxhbmd1YWdlIHN1cHBvcnQuXG4qL1xuZnVuY3Rpb24gbWFya2Rvd24oY29uZmlnID0ge30pIHtcbiAgICBsZXQgeyBjb2RlTGFuZ3VhZ2VzLCBkZWZhdWx0Q29kZUxhbmd1YWdlLCBhZGRLZXltYXAgPSB0cnVlLCBiYXNlOiB7IHBhcnNlciB9ID0gY29tbW9ubWFya0xhbmd1YWdlLCBjb21wbGV0ZUhUTUxUYWdzID0gdHJ1ZSwgcGFzdGVVUkxBc0xpbms6IHBhc3RlVVJMID0gdHJ1ZSwgaHRtbFRhZ0xhbmd1YWdlID0gaHRtbE5vTWF0Y2ggfSA9IGNvbmZpZztcbiAgICBpZiAoIShwYXJzZXIgaW5zdGFuY2VvZiBNYXJrZG93blBhcnNlcikpXG4gICAgICAgIHRocm93IG5ldyBSYW5nZUVycm9yKFwiQmFzZSBwYXJzZXIgcHJvdmlkZWQgdG8gYG1hcmtkb3duYCBzaG91bGQgYmUgYSBNYXJrZG93biBwYXJzZXJcIik7XG4gICAgbGV0IGV4dGVuc2lvbnMgPSBjb25maWcuZXh0ZW5zaW9ucyA/IFtjb25maWcuZXh0ZW5zaW9uc10gOiBbXTtcbiAgICBsZXQgc3VwcG9ydCA9IFtodG1sVGFnTGFuZ3VhZ2Uuc3VwcG9ydCwgaGVhZGVySW5kZW50XSwgZGVmYXVsdENvZGU7XG4gICAgaWYgKHBhc3RlVVJMKVxuICAgICAgICBzdXBwb3J0LnB1c2gocGFzdGVVUkxBc0xpbmspO1xuICAgIGlmIChkZWZhdWx0Q29kZUxhbmd1YWdlIGluc3RhbmNlb2YgTGFuZ3VhZ2VTdXBwb3J0KSB7XG4gICAgICAgIHN1cHBvcnQucHVzaChkZWZhdWx0Q29kZUxhbmd1YWdlLnN1cHBvcnQpO1xuICAgICAgICBkZWZhdWx0Q29kZSA9IGRlZmF1bHRDb2RlTGFuZ3VhZ2UubGFuZ3VhZ2U7XG4gICAgfVxuICAgIGVsc2UgaWYgKGRlZmF1bHRDb2RlTGFuZ3VhZ2UpIHtcbiAgICAgICAgZGVmYXVsdENvZGUgPSBkZWZhdWx0Q29kZUxhbmd1YWdlO1xuICAgIH1cbiAgICBsZXQgY29kZVBhcnNlciA9IGNvZGVMYW5ndWFnZXMgfHwgZGVmYXVsdENvZGUgPyBnZXRDb2RlUGFyc2VyKGNvZGVMYW5ndWFnZXMsIGRlZmF1bHRDb2RlKSA6IHVuZGVmaW5lZDtcbiAgICBleHRlbnNpb25zLnB1c2gocGFyc2VDb2RlKHsgY29kZVBhcnNlciwgaHRtbFBhcnNlcjogaHRtbFRhZ0xhbmd1YWdlLmxhbmd1YWdlLnBhcnNlciB9KSk7XG4gICAgaWYgKGFkZEtleW1hcClcbiAgICAgICAgc3VwcG9ydC5wdXNoKFByZWMuaGlnaChrZXltYXAub2YobWFya2Rvd25LZXltYXApKSk7XG4gICAgbGV0IGxhbmcgPSBta0xhbmcocGFyc2VyLmNvbmZpZ3VyZShleHRlbnNpb25zKSk7XG4gICAgaWYgKGNvbXBsZXRlSFRNTFRhZ3MpXG4gICAgICAgIHN1cHBvcnQucHVzaChsYW5nLmRhdGEub2YoeyBhdXRvY29tcGxldGU6IGh0bWxUYWdDb21wbGV0aW9uIH0pKTtcbiAgICByZXR1cm4gbmV3IExhbmd1YWdlU3VwcG9ydChsYW5nLCBzdXBwb3J0KTtcbn1cbmZ1bmN0aW9uIGh0bWxUYWdDb21wbGV0aW9uKGNvbnRleHQpIHtcbiAgICBsZXQgeyBzdGF0ZSwgcG9zIH0gPSBjb250ZXh0LCBtID0gLzxbOlxcLVxcLlxcd1xcdTAwYjctXFx1ZmZmZl0qJC8uZXhlYyhzdGF0ZS5zbGljZURvYyhwb3MgLSAyNSwgcG9zKSk7XG4gICAgaWYgKCFtKVxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICBsZXQgdHJlZSA9IHN5bnRheFRyZWUoc3RhdGUpLnJlc29sdmVJbm5lcihwb3MsIC0xKTtcbiAgICB3aGlsZSAodHJlZSAmJiAhdHJlZS50eXBlLmlzVG9wKSB7XG4gICAgICAgIGlmICh0cmVlLm5hbWUgPT0gXCJDb2RlQmxvY2tcIiB8fCB0cmVlLm5hbWUgPT0gXCJGZW5jZWRDb2RlXCIgfHwgdHJlZS5uYW1lID09IFwiUHJvY2Vzc2luZ0luc3RydWN0aW9uQmxvY2tcIiB8fFxuICAgICAgICAgICAgdHJlZS5uYW1lID09IFwiQ29tbWVudEJsb2NrXCIgfHwgdHJlZS5uYW1lID09IFwiTGlua1wiIHx8IHRyZWUubmFtZSA9PSBcIkltYWdlXCIpXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgdHJlZSA9IHRyZWUucGFyZW50O1xuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgICBmcm9tOiBwb3MgLSBtWzBdLmxlbmd0aCwgdG86IHBvcyxcbiAgICAgICAgb3B0aW9uczogaHRtbFRhZ0NvbXBsZXRpb25zKCksXG4gICAgICAgIHZhbGlkRm9yOiAvXjxbOlxcLVxcLlxcd1xcdTAwYjctXFx1ZmZmZl0qJC9cbiAgICB9O1xufVxubGV0IF90YWdDb21wbGV0aW9ucyA9IG51bGw7XG5mdW5jdGlvbiBodG1sVGFnQ29tcGxldGlvbnMoKSB7XG4gICAgaWYgKF90YWdDb21wbGV0aW9ucylcbiAgICAgICAgcmV0dXJuIF90YWdDb21wbGV0aW9ucztcbiAgICBsZXQgcmVzdWx0ID0gaHRtbENvbXBsZXRpb25Tb3VyY2UobmV3IENvbXBsZXRpb25Db250ZXh0KEVkaXRvclN0YXRlLmNyZWF0ZSh7IGV4dGVuc2lvbnM6IGh0bWxOb01hdGNoIH0pLCAwLCB0cnVlKSk7XG4gICAgcmV0dXJuIF90YWdDb21wbGV0aW9ucyA9IHJlc3VsdCA/IHJlc3VsdC5vcHRpb25zIDogW107XG59XG5jb25zdCBub25QbGFpblRleHQgPSAvY29kZXxob3Jpem9udGFscnVsZXxodG1sfGxpbmt8Y29tbWVudHxwcm9jZXNzaW5nfGVzY2FwZXxlbnRpdHl8aW1hZ2V8bWFya3x1cmwvaTtcbi8qKlxuQW4gZXh0ZW5zaW9uIHRoYXQgaW50ZXJjZXB0cyBwYXN0ZXMgd2hlbiB0aGUgcGFzdGVkIGNvbnRlbnQgbG9va3Ncbmxpa2UgYSBVUkwgYW5kIHRoZSBzZWxlY3Rpb24gaXMgbm9uLWVtcHR5IGFuZCBzZWxlY3RzIHJlZ3VsYXJcbnRleHQsIG1ha2luZyB0aGUgc2VsZWN0aW9uIGEgbGluayB3aXRoIHRoZSBwYXN0ZWQgVVJMIGFzIHRhcmdldC5cbiovXG5jb25zdCBwYXN0ZVVSTEFzTGluayA9IC8qQF9fUFVSRV9fKi9FZGl0b3JWaWV3LmRvbUV2ZW50SGFuZGxlcnMoe1xuICAgIHBhc3RlOiAoZXZlbnQsIHZpZXcpID0+IHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICBsZXQgeyBtYWluIH0gPSB2aWV3LnN0YXRlLnNlbGVjdGlvbjtcbiAgICAgICAgaWYgKG1haW4uZW1wdHkpXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIGxldCBsaW5rID0gKF9hID0gZXZlbnQuY2xpcGJvYXJkRGF0YSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmdldERhdGEoXCJ0ZXh0L3BsYWluXCIpO1xuICAgICAgICBpZiAoIWxpbmsgfHwgIS9eKGh0dHBzPzpcXC9cXC98bWFpbHRvOnx4bXBwOnx3d3dcXC4pLy50ZXN0KGxpbmspKVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICBpZiAoL153d3dcXC4vLnRlc3QobGluaykpXG4gICAgICAgICAgICBsaW5rID0gXCJodHRwczovL1wiICsgbGluaztcbiAgICAgICAgaWYgKCFtYXJrZG93bkxhbmd1YWdlLmlzQWN0aXZlQXQodmlldy5zdGF0ZSwgbWFpbi5mcm9tLCAxKSlcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgbGV0IHRyZWUgPSBzeW50YXhUcmVlKHZpZXcuc3RhdGUpLCBjcm9zc2VzTm9kZSA9IGZhbHNlO1xuICAgICAgICAvLyBWZXJpZnkgdGhhdCBubyBub2RlcyBhcmUgc3RhcnRlZC9lbmRlZCBiZXR3ZWVuIHRoZSBzZWxlY3Rpb25cbiAgICAgICAgLy8gcG9pbnRzLCBhbmQgd2UncmUgbm90IGluc2lkZSBhbnkgbm9uLXBsYWluLXRleHQgY29uc3RydWN0LlxuICAgICAgICB0cmVlLml0ZXJhdGUoe1xuICAgICAgICAgICAgZnJvbTogbWFpbi5mcm9tLCB0bzogbWFpbi50byxcbiAgICAgICAgICAgIGVudGVyOiBub2RlID0+IHsgaWYgKG5vZGUuZnJvbSA+IG1haW4uZnJvbSB8fCBub25QbGFpblRleHQudGVzdChub2RlLm5hbWUpKVxuICAgICAgICAgICAgICAgIGNyb3NzZXNOb2RlID0gdHJ1ZTsgfSxcbiAgICAgICAgICAgIGxlYXZlOiBub2RlID0+IHsgaWYgKG5vZGUudG8gPCBtYWluLnRvKVxuICAgICAgICAgICAgICAgIGNyb3NzZXNOb2RlID0gdHJ1ZTsgfVxuICAgICAgICB9KTtcbiAgICAgICAgaWYgKGNyb3NzZXNOb2RlKVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB2aWV3LmRpc3BhdGNoKHtcbiAgICAgICAgICAgIGNoYW5nZXM6IFt7IGZyb206IG1haW4uZnJvbSwgaW5zZXJ0OiBcIltcIiB9LCB7IGZyb206IG1haW4udG8sIGluc2VydDogYF0oJHtsaW5rfSlgIH1dLFxuICAgICAgICAgICAgdXNlckV2ZW50OiBcImlucHV0LnBhc3RlXCIsXG4gICAgICAgICAgICBzY3JvbGxJbnRvVmlldzogdHJ1ZVxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxufSk7XG5cbmV4cG9ydCB7IGNvbW1vbm1hcmtMYW5ndWFnZSwgZGVsZXRlTWFya3VwQmFja3dhcmQsIGluc2VydE5ld2xpbmVDb250aW51ZU1hcmt1cCwgaW5zZXJ0TmV3bGluZUNvbnRpbnVlTWFya3VwQ29tbWFuZCwgbWFya2Rvd24sIG1hcmtkb3duS2V5bWFwLCBtYXJrZG93bkxhbmd1YWdlLCBwYXN0ZVVSTEFzTGluayB9O1xuIiwKICAgICJpbXBvcnQgeyBDb250ZXh0VHJhY2tlciwgRXh0ZXJuYWxUb2tlbml6ZXIsIExSUGFyc2VyIH0gZnJvbSAnQGxlemVyL2xyJztcbmltcG9ydCB7IHN0eWxlVGFncywgdGFncyB9IGZyb20gJ0BsZXplci9oaWdobGlnaHQnO1xuXG4vLyBUaGlzIGZpbGUgd2FzIGdlbmVyYXRlZCBieSBsZXplci1nZW5lcmF0b3IuIFlvdSBwcm9iYWJseSBzaG91bGRuJ3QgZWRpdCBpdC5cbmNvbnN0IFN0YXJ0VGFnID0gMSxcbiAgU3RhcnRDbG9zZVRhZyA9IDIsXG4gIE1pc3NpbmdDbG9zZVRhZyA9IDMsXG4gIG1pc21hdGNoZWRTdGFydENsb3NlVGFnID0gNCxcbiAgaW5jb21wbGV0ZVN0YXJ0Q2xvc2VUYWcgPSA1LFxuICBjb21tZW50Q29udGVudCQxID0gMzYsXG4gIHBpQ29udGVudCQxID0gMzcsXG4gIGNkYXRhQ29udGVudCQxID0gMzgsXG4gIEVsZW1lbnQgPSAxMSxcbiAgT3BlblRhZyA9IDEzO1xuXG4vKiBIYW5kLXdyaXR0ZW4gdG9rZW5pemVyIGZvciBYTUwgdGFnIG1hdGNoaW5nLiAqL1xuXG5mdW5jdGlvbiBuYW1lQ2hhcihjaCkge1xuICByZXR1cm4gY2ggPT0gNDUgfHwgY2ggPT0gNDYgfHwgY2ggPT0gNTggfHwgY2ggPj0gNjUgJiYgY2ggPD0gOTAgfHwgY2ggPT0gOTUgfHwgY2ggPj0gOTcgJiYgY2ggPD0gMTIyIHx8IGNoID49IDE2MVxufVxuXG5mdW5jdGlvbiBpc1NwYWNlKGNoKSB7XG4gIHJldHVybiBjaCA9PSA5IHx8IGNoID09IDEwIHx8IGNoID09IDEzIHx8IGNoID09IDMyXG59XG5cbmxldCBjYWNoZWROYW1lID0gbnVsbCwgY2FjaGVkSW5wdXQgPSBudWxsLCBjYWNoZWRQb3MgPSAwO1xuZnVuY3Rpb24gdGFnTmFtZUFmdGVyKGlucHV0LCBvZmZzZXQpIHtcbiAgbGV0IHBvcyA9IGlucHV0LnBvcyArIG9mZnNldDtcbiAgaWYgKGNhY2hlZElucHV0ID09IGlucHV0ICYmIGNhY2hlZFBvcyA9PSBwb3MpIHJldHVybiBjYWNoZWROYW1lXG4gIHdoaWxlIChpc1NwYWNlKGlucHV0LnBlZWsob2Zmc2V0KSkpIG9mZnNldCsrO1xuICBsZXQgbmFtZSA9IFwiXCI7XG4gIGZvciAoOzspIHtcbiAgICBsZXQgbmV4dCA9IGlucHV0LnBlZWsob2Zmc2V0KTtcbiAgICBpZiAoIW5hbWVDaGFyKG5leHQpKSBicmVha1xuICAgIG5hbWUgKz0gU3RyaW5nLmZyb21DaGFyQ29kZShuZXh0KTtcbiAgICBvZmZzZXQrKztcbiAgfVxuICBjYWNoZWRJbnB1dCA9IGlucHV0OyBjYWNoZWRQb3MgPSBwb3M7XG4gIHJldHVybiBjYWNoZWROYW1lID0gbmFtZSB8fCBudWxsXG59XG5cbmZ1bmN0aW9uIEVsZW1lbnRDb250ZXh0KG5hbWUsIHBhcmVudCkge1xuICB0aGlzLm5hbWUgPSBuYW1lO1xuICB0aGlzLnBhcmVudCA9IHBhcmVudDtcbn1cblxuY29uc3QgZWxlbWVudENvbnRleHQgPSBuZXcgQ29udGV4dFRyYWNrZXIoe1xuICBzdGFydDogbnVsbCxcbiAgc2hpZnQoY29udGV4dCwgdGVybSwgc3RhY2ssIGlucHV0KSB7XG4gICAgcmV0dXJuIHRlcm0gPT0gU3RhcnRUYWcgPyBuZXcgRWxlbWVudENvbnRleHQodGFnTmFtZUFmdGVyKGlucHV0LCAxKSB8fCBcIlwiLCBjb250ZXh0KSA6IGNvbnRleHRcbiAgfSxcbiAgcmVkdWNlKGNvbnRleHQsIHRlcm0pIHtcbiAgICByZXR1cm4gdGVybSA9PSBFbGVtZW50ICYmIGNvbnRleHQgPyBjb250ZXh0LnBhcmVudCA6IGNvbnRleHRcbiAgfSxcbiAgcmV1c2UoY29udGV4dCwgbm9kZSwgX3N0YWNrLCBpbnB1dCkge1xuICAgIGxldCB0eXBlID0gbm9kZS50eXBlLmlkO1xuICAgIHJldHVybiB0eXBlID09IFN0YXJ0VGFnIHx8IHR5cGUgPT0gT3BlblRhZ1xuICAgICAgPyBuZXcgRWxlbWVudENvbnRleHQodGFnTmFtZUFmdGVyKGlucHV0LCAxKSB8fCBcIlwiLCBjb250ZXh0KSA6IGNvbnRleHRcbiAgfSxcbiAgc3RyaWN0OiBmYWxzZVxufSk7XG5cbmNvbnN0IHN0YXJ0VGFnID0gbmV3IEV4dGVybmFsVG9rZW5pemVyKChpbnB1dCwgc3RhY2spID0+IHtcbiAgaWYgKGlucHV0Lm5leHQgIT0gNjAgLyogJzwnICovKSByZXR1cm5cbiAgaW5wdXQuYWR2YW5jZSgpO1xuICBpZiAoaW5wdXQubmV4dCA9PSA0NyAvKiAnLycgKi8pIHtcbiAgICBpbnB1dC5hZHZhbmNlKCk7XG4gICAgbGV0IG5hbWUgPSB0YWdOYW1lQWZ0ZXIoaW5wdXQsIDApO1xuICAgIGlmICghbmFtZSkgcmV0dXJuIGlucHV0LmFjY2VwdFRva2VuKGluY29tcGxldGVTdGFydENsb3NlVGFnKVxuICAgIGlmIChzdGFjay5jb250ZXh0ICYmIG5hbWUgPT0gc3RhY2suY29udGV4dC5uYW1lKSByZXR1cm4gaW5wdXQuYWNjZXB0VG9rZW4oU3RhcnRDbG9zZVRhZylcbiAgICBmb3IgKGxldCBjeCA9IHN0YWNrLmNvbnRleHQ7IGN4OyBjeCA9IGN4LnBhcmVudCkgaWYgKGN4Lm5hbWUgPT0gbmFtZSkgcmV0dXJuIGlucHV0LmFjY2VwdFRva2VuKE1pc3NpbmdDbG9zZVRhZywgLTIpXG4gICAgaW5wdXQuYWNjZXB0VG9rZW4obWlzbWF0Y2hlZFN0YXJ0Q2xvc2VUYWcpO1xuICB9IGVsc2UgaWYgKGlucHV0Lm5leHQgIT0gMzMgLyogJyEnICovICYmIGlucHV0Lm5leHQgIT0gNjMgLyogJz8nICovKSB7XG4gICAgcmV0dXJuIGlucHV0LmFjY2VwdFRva2VuKFN0YXJ0VGFnKVxuICB9XG59LCB7Y29udGV4dHVhbDogdHJ1ZX0pO1xuXG5mdW5jdGlvbiBzY2FuVG8odHlwZSwgZW5kKSB7XG4gIHJldHVybiBuZXcgRXh0ZXJuYWxUb2tlbml6ZXIoaW5wdXQgPT4ge1xuICAgIGxldCBsZW4gPSAwLCBmaXJzdCA9IGVuZC5jaGFyQ29kZUF0KDApO1xuICAgIHNjYW46IGZvciAoOzsgaW5wdXQuYWR2YW5jZSgpLCBsZW4rKykge1xuICAgICAgaWYgKGlucHV0Lm5leHQgPCAwKSBicmVha1xuICAgICAgaWYgKGlucHV0Lm5leHQgPT0gZmlyc3QpIHtcbiAgICAgICAgZm9yIChsZXQgaSA9IDE7IGkgPCBlbmQubGVuZ3RoOyBpKyspXG4gICAgICAgICAgaWYgKGlucHV0LnBlZWsoaSkgIT0gZW5kLmNoYXJDb2RlQXQoaSkpIGNvbnRpbnVlIHNjYW5cbiAgICAgICAgYnJlYWtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKGxlbikgaW5wdXQuYWNjZXB0VG9rZW4odHlwZSk7XG4gIH0pXG59XG5cbmNvbnN0IGNvbW1lbnRDb250ZW50ID0gc2NhblRvKGNvbW1lbnRDb250ZW50JDEsIFwiLS0+XCIpO1xuY29uc3QgcGlDb250ZW50ID0gc2NhblRvKHBpQ29udGVudCQxLCBcIj8+XCIpO1xuY29uc3QgY2RhdGFDb250ZW50ID0gc2NhblRvKGNkYXRhQ29udGVudCQxLCBcIl1dPlwiKTtcblxuY29uc3QgeG1sSGlnaGxpZ2h0aW5nID0gc3R5bGVUYWdzKHtcbiAgVGV4dDogdGFncy5jb250ZW50LFxuICBcIlN0YXJ0VGFnIFN0YXJ0Q2xvc2VUYWcgRW5kVGFnIFNlbGZDbG9zZUVuZFRhZ1wiOiB0YWdzLmFuZ2xlQnJhY2tldCxcbiAgVGFnTmFtZTogdGFncy50YWdOYW1lLFxuICBcIk1pc21hdGNoZWRDbG9zZVRhZy9UYWdOYW1lXCI6IFt0YWdzLnRhZ05hbWUsIHRhZ3MuaW52YWxpZF0sXG4gIEF0dHJpYnV0ZU5hbWU6IHRhZ3MuYXR0cmlidXRlTmFtZSxcbiAgQXR0cmlidXRlVmFsdWU6IHRhZ3MuYXR0cmlidXRlVmFsdWUsXG4gIElzOiB0YWdzLmRlZmluaXRpb25PcGVyYXRvcixcbiAgXCJFbnRpdHlSZWZlcmVuY2UgQ2hhcmFjdGVyUmVmZXJlbmNlXCI6IHRhZ3MuY2hhcmFjdGVyLFxuICBDb21tZW50OiB0YWdzLmJsb2NrQ29tbWVudCxcbiAgUHJvY2Vzc2luZ0luc3Q6IHRhZ3MucHJvY2Vzc2luZ0luc3RydWN0aW9uLFxuICBEb2N0eXBlRGVjbDogdGFncy5kb2N1bWVudE1ldGEsXG4gIENkYXRhOiB0YWdzLnNwZWNpYWwodGFncy5zdHJpbmcpXG59KTtcblxuLy8gVGhpcyBmaWxlIHdhcyBnZW5lcmF0ZWQgYnkgbGV6ZXItZ2VuZXJhdG9yLiBZb3UgcHJvYmFibHkgc2hvdWxkbid0IGVkaXQgaXQuXG5jb25zdCBwYXJzZXIgPSBMUlBhcnNlci5kZXNlcmlhbGl6ZSh7XG4gIHZlcnNpb246IDE0LFxuICBzdGF0ZXM6IFwiLGxPUU9hT09Pck94TycjQ2ZPek9wTycjQ2lPIXRPYU8nI0NnT09PUCcjQ2cnI0NnTyF7T3JPJyNDck8jVE90TycjQ3NPI11PcE8nI0N0T09PUCcjRFQnI0RUT09PUCcjQ3YnI0N2UVFPYU9PT09PVycjQ3cnI0N3TyNlT3hPLDU5UU9PT1AsNTlRLDU5UU9PT08nI0N4JyNDeE8jbU9wTyw1OVRPI3VPIWJPLDU5VE9PT1AnI0N8JyNDfE8kVE9hTyw1OVJPJFtPcE8nI0NvT09PUCw1OVIsNTlST09PUScjQ30nI0N9TyRkT3JPLDU5Xk9PT1AsNTleLDU5Xk9PT1MnI0RPJyNET08kbE90Tyw1OV9PT09QLDU5Xyw1OV9PJHRPcE8sNTlgTyR8T3BPLDU5YE9PT1AtRTZ0LUU2dE9PT1ctRTZ1LUU2dU9PT1AxRy5sMUcubE9PT08tRTZ2LUU2dk8lVU8hYk8xRy5vTyVVTyFiTzFHLm9PJWRPcE8nI0NrTyVsTyFiTycjQ3lPJXpPIWJPMUcub09PT1AxRy5vMUcub09PT1AxRy53MUcud09PT1AtRTZ6LUU2ek9PT1AxRy5tMUcubU8mVk9wTyw1OVpPJl9PcE8sNTlaT09PUS1FNnstRTZ7T09PUDFHLngxRy54T09PUy1FNnwtRTZ8T09PUDFHLnkxRy55TyZnT3BPMUcuek8mZ09wTzFHLnpPT09QMUcuejFHLnpPJm9PIWJPNyskWk8mfU8hYk83KyRaT09PUDcrJFo3KyRaT09PUDcrJGM3KyRjTydZT3BPLDU5Vk8nYk9wTyw1OVZPJ21PIWJPLDU5ZU9PT08tRTZ3LUU2d08ne09wTzFHLnVPJ3tPcE8xRy51T09PUDFHLnUxRy51TyhUT3BPNyskZk9PT1A3KyRmNyskZk8oXU8hYk88PEd1T09PUDw8R3U8PEd1T09PUDw8R308PEd9TydiT3BPMUcucU8nYk9wTzFHLnFPKGhPI3RPJyNDbk8odk8mak8nI0NuT09PTzFHLnExRy5xTylVT3BPNyskYU9PT1A3KyRhNyskYU9PT1A8PEhRPDxIUU9PT1BBTj1hQU49YU9PT1BBTj1pQU49aU8nYk9wTzcrJF1PT09PNyskXTcrJF1PT09PJyNDeicjQ3pPKV5PI3RPLDU5WU9PT08sNTlZLDU5WU9PT08nI0N7JyNDe08pbE8mak8sNTlZT09PUDw8R3s8PEd7T09PTzw8R3c8PEd3T09PTy1FNngtRTZ4T09PTzFHLnQxRy50T09PTy1FNnktRTZ5XCIsXG4gIHN0YXRlRGF0YTogXCIpen5PUFFPU1ZPVFdPVldPV1dPWFdPaVhPeVBPIVFUTyFTVU9+T3ZaT3hdT35PXmBPel5Pfk9QUU9RY09TVk9UV09WV09XV09YV095UE8hUVRPIVNVT35PUmRPflAhU090ZU8hUGdPfk91aE8hUmpPfk9ebE96Xk9+T3ZaT3hvT35PXnFPel5Pfk9bdk9gc09kd096Xk9+T1J5T35QIVNPXntPel5Pfk90ZU8hUH1Pfk91aE8hUiFQT35PXiFRT3peT35PWyFTT3peT35PWyFWT2BzT2QhV096Xk9+T2EhWU96Xk9+T3peT1ttWGBtWGRtWH5PWyFWT2BzT2QhV09+T14hXU96Xk9+T1shX096Xk9+T1shYU96Xk9+T1shY09gc09kIWRPel5Pfk9bIWNPYHNPZCFkT35PYSFlT3peT35Pel5PeyFnT30haE9+T3peT1ttYWBtYWRtYX5PWyFrT3peT35PWyFsT3peT35PWyFtT2BzT2Qhbk9+T1chcU9YIXFPeyFzT3whcU9+T1chdE9YIXRPfSFzTyFPIXRPfk9bIXZPel5Pfk9XIXFPWCFxT3sheU98IXFPfk9XIXRPWCF0T30heU8hTyF0T35PXCIsXG4gIGdvdG86IFwiJWN4UFBQUFBQUFBQUHl5UCFQUCFWUFAhYCFqUCFweXl5UCF2IXwjUyRbJGskcSR3JH0lVFBQUFAlWlhXT1JZYlhST1JZYl90YHFydSFUIVUhYlEhaSFZUyFwIWUhZlIhdyFvUWRSUnliWFNPUlliUVlPUm1ZUVtQUm5bUV9RUWtWanBfa3J6IVIhVCFYIVohXiFgIWYhaiFvUXJgUXpjUSFSbFEhVHFRIVhzUSFadFEhXntRIWAhUVEhZiFZUSFqIV1SIW8hZVF1YFMhVXFyVSFbdSFVIWJSIWIhVFEhciFnUiF4IXJRIXUhaFIheiF1UWJSUnhiUWZUUnxmUWlVUiFPaVNYT1lUYVJiXCIsXG4gIG5vZGVOYW1lczogXCLimqAgU3RhcnRUYWcgU3RhcnRDbG9zZVRhZyBNaXNzaW5nQ2xvc2VUYWcgU3RhcnRDbG9zZVRhZyBTdGFydENsb3NlVGFnIERvY3VtZW50IFRleHQgRW50aXR5UmVmZXJlbmNlIENoYXJhY3RlclJlZmVyZW5jZSBDZGF0YSBFbGVtZW50IEVuZFRhZyBPcGVuVGFnIFRhZ05hbWUgQXR0cmlidXRlIEF0dHJpYnV0ZU5hbWUgSXMgQXR0cmlidXRlVmFsdWUgQ2xvc2VUYWcgU2VsZkNsb3NlRW5kVGFnIFNlbGZDbG9zaW5nVGFnIENvbW1lbnQgUHJvY2Vzc2luZ0luc3QgTWlzbWF0Y2hlZENsb3NlVGFnIERvY3R5cGVEZWNsXCIsXG4gIG1heFRlcm06IDUwLFxuICBjb250ZXh0OiBlbGVtZW50Q29udGV4dCxcbiAgbm9kZVByb3BzOiBbXG4gICAgW1wiY2xvc2VkQnlcIiwgMSxcIlNlbGZDbG9zZUVuZFRhZyBFbmRUYWdcIiwxMyxcIkNsb3NlVGFnIE1pc3NpbmdDbG9zZVRhZ1wiXSxcbiAgICBbXCJvcGVuZWRCeVwiLCAxMixcIlN0YXJ0VGFnIFN0YXJ0Q2xvc2VUYWdcIiwxOSxcIk9wZW5UYWdcIiwyMCxcIlN0YXJ0VGFnXCJdLFxuICAgIFtcImlzb2xhdGVcIiwgLTYsMTMsMTgsMTksMjEsMjIsMjQsXCJcIl1cbiAgXSxcbiAgcHJvcFNvdXJjZXM6IFt4bWxIaWdobGlnaHRpbmddLFxuICBza2lwcGVkTm9kZXM6IFswXSxcbiAgcmVwZWF0Tm9kZUNvdW50OiA5LFxuICB0b2tlbkRhdGE6IFwiISl2flIhWU9YJHFYWSlpWVopaVpdJHFdXilpXnAkcXBxKWlxciRxcnMqdnN2JHF2dytmd3gvaXh9JHF9IU8wWyFPIVAkcSFQIVEyeiFRIVskcSFbIV00biFdIV4kcSFeIV84VSFfIWAhI3QhYCFhISRsIWEhYiElZCFiIWMkcSFjIX00biF9I1AkcSNQI1EhJ1cjUSNSJHEjUiNTNG4jUyNUJHEjVCNvNG4jbyVXJHElVyVvNG4lbyVwJHElcCZhNG4mYSZiJHEmYjFwNG4xcDRVJHE0VTRkNG40ZDRlJHE0ZSRJUzRuJElTJElgJHEkSWAkSWI0biRJYiRLaCRxJEtoJSN0NG4lI3QmL3gkcSYveCZFdDRuJkV0JkZWJHEmRlY7J1M0bjsnUzs6ajhPOzpqOz1gKWM8JWw/JnIkcT8mcj9BaDRuP0FoP0JZJHE/Qlk/TW40bj9Nbk8kcWkkelhWUHxXIU9gT3IkcXJzJWdzdiRxd3gnXnghXiRxIV4hXyhvIV87J1MkcTsnUzs9YCljPCVsTyRxYSVuVlZQIU9gT3YlZ3d4JlR4IV4lZyFeIV8mbyFfOydTJWc7J1M7PWAnVzwlbE8lZ1AmWVRWUE92JlR3IV4mVCFfOydTJlQ7J1M7PWAmaTwlbE8mVFAmbFA7PWA8JWwmVGAmdFMhT2BPdiZveDsnUyZvOydTOz1gJ1E8JWxPJm9gJ1RQOz1gPCVsJm9hJ1pQOz1gPCVsJWdYJ2VXVlB8V09yJ15ycyZUc3YnXnchXideIV4hXyd9IV87J1MnXjsnUzs9YChpPCVsTydeVyhTVHxXT3InfXN2J313OydTJ307J1M7PWAoYzwlbE8nfVcoZlA7PWA8JWwnfVgobFA7PWA8JWwnXmgodlZ8VyFPYE9yKG9ycyZvc3Yob3d4J314OydTKG87J1M7PWApXTwlbE8ob2gpYFA7PWA8JWwob2kpZlA7PWA8JWwkcW8pdGBWUHxXIU9gelVPWCRxWFkpaVlaKWlaXSRxXV4paV5wJHFwcSlpcXIkcXJzJWdzdiRxd3gnXnghXiRxIV4hXyhvIV87J1MkcTsnUzs9YCljPCVsTyRxaytQVntZVlAhT2BPdiVnd3gmVHghXiVnIV4hXyZvIV87J1MlZzsnUzs9YCdXPCVsTyVnfitpYXN0LG4hWyFdLXIhYyF9LXIjUiNTLXIjVCNvLXIlVyVvLXIlcCZhLXImYjFwLXI0VTRkLXI0ZSRJUy1yJElgJEliLXIkS2glI3QtciYveCZFdC1yJkZWOydTLXI7J1M7OmovYz8mcj9BaC1yP0JZP01uLXJ+LHFRIVEhWyx3I2wjbS1Wfix6USFRIVssdyFdIV4tUX4tVk9Yfn4tWVIhUSFbLWMhYyFpLWMjVCNaLWN+LWZTIVEhWy1jIV0hXi1RIWMhaS1jI1QjWi1jfi11Z30hTy1yIU8hUC1yIVEhWy1yIVshXS1yIV0hXi9eIWMhfS1yI1IjUy1yI1Qjby1yJH0lTy1yJVclby1yJXAmYS1yJmIxcC1yMXA0VS1yNFU0ZC1yNGUkSVMtciRJYCRJYi1yJEplJEpnLXIkS2glI3QtciYveCZFdC1yJkZWOydTLXI7J1M7OmovYz8mcj9BaC1yP0JZP01uLXJ+L2NPV35+L2ZQOz1gPCVsLXJrL3JXfWJWUHxXT3InXnJzJlRzdidedyFeJ14hXiFfJ30hXzsnUydeOydTOz1gKGk8JWxPJ15rMGVaVlB8VyFPYE9yJHFycyVnc3YkcXd4J154fSRxfSFPMVchTyFeJHEhXiFfKG8hXzsnUyRxOydTOz1gKWM8JWxPJHFrMWFaVlB8VyFPYE9yJHFycyVnc3YkcXd4J154IV4kcSFeIV8obyFfIWAkcSFgIWEyUyFhOydTJHE7J1M7PWApYzwlbE8kcWsyX1ghUFFWUHxXIU9gT3IkcXJzJWdzdiRxd3gnXnghXiRxIV4hXyhvIV87J1MkcTsnUzs9YCljPCVsTyRxbTNUWlZQfFchT2BPciRxcnMlZ3N2JHF3eCdeeCFeJHEhXiFfKG8hXyFgJHEhYCFhM3YhYTsnUyRxOydTOz1gKWM8JWxPJHFtNFJYZFNWUHxXIU9gT3IkcXJzJWdzdiRxd3gnXnghXiRxIV4hXyhvIV87J1MkcTsnUzs9YCljPCVsTyRxbzR7IVBgU15RVlB8VyFPYE9yJHFycyVnc3YkcXd4J154fSRxfSFPNG4hTyFQNG4hUCFRJHEhUSFbNG4hWyFdNG4hXSFeJHEhXiFfKG8hXyFjJHEhYyF9NG4hfSNSJHEjUiNTNG4jUyNUJHEjVCNvNG4jbyR9JHEkfSVPNG4lTyVXJHElVyVvNG4lbyVwJHElcCZhNG4mYSZiJHEmYjFwNG4xcDRVNG40VTRkNG40ZDRlJHE0ZSRJUzRuJElTJElgJHEkSWAkSWI0biRJYiRKZSRxJEplJEpnNG4kSmckS2gkcSRLaCUjdDRuJSN0Ji94JHEmL3gmRXQ0biZFdCZGViRxJkZWOydTNG47J1M7Omo4Tzs6ajs9YCljPCVsPyZyJHE/JnI/QWg0bj9BaD9CWSRxP0JZP01uNG4/TW5PJHFvOFJQOz1gPCVsNG5pOF1ZfFchT2BPcShvcXI4e3JzJm9zdihvd3gnfXghYShvIWEhYiEjVSFiOydTKG87J1M7PWApXTwlbE8ob2k5U198VyFPYE9yKG9ycyZvc3Yob3d4J314fShvfSFPOlIhTyFmKG8hZiFnO2UhZyF9KG8hfSNPRGgjTyNXKG8jVyNYTHAjWDsnUyhvOydTOz1gKV08JWxPKG9pOllYfFchT2BPcihvcnMmb3N2KG93eCd9eH0ob30hTzp1IU87J1MobzsnUzs9YCldPCVsTyhvaTtPViFRUHxXIU9gT3Iob3JzJm9zdihvd3gnfXg7J1MobzsnUzs9YCldPCVsTyhvaTtsWHxXIU9gT3Iob3JzJm9zdihvd3gnfXghcShvIXEhcjxYIXI7J1MobzsnUzs9YCldPCVsTyhvaTxgWHxXIU9gT3Iob3JzJm9zdihvd3gnfXghZShvIWUhZjx7IWY7J1MobzsnUzs9YCldPCVsTyhvaT1TWHxXIU9gT3Iob3JzJm9zdihvd3gnfXghdihvIXYhdz1vIXc7J1MobzsnUzs9YCldPCVsTyhvaT12WHxXIU9gT3Iob3JzJm9zdihvd3gnfXgheyhvIXshfD5jIXw7J1MobzsnUzs9YCldPCVsTyhvaT5qWHxXIU9gT3Iob3JzJm9zdihvd3gnfXghcihvIXIhcz9WIXM7J1MobzsnUzs9YCldPCVsTyhvaT9eWHxXIU9gT3Iob3JzJm9zdihvd3gnfXghZyhvIWchaD95IWg7J1MobzsnUzs9YCldPCVsTyhvaUBRWXxXIU9gT3I/eXJzQHBzdj95dndBW3d4QmR4IWA/eSFgIWFDciFhOydTP3k7J1M7PWBEYjwlbE8/eWFAdVYhT2BPdkBwdnhBW3ghYEBwIWAhYUF5IWE7J1NAcDsnUzs9YEJePCVsT0BwUEFfVE8hYEFbIWAhYUFuIWE7J1NBWzsnUzs9YEFzPCVsT0FbUEFzT2lQUEF2UDs9YDwlbEFbYUJRU2lQIU9gT3Ymb3g7J1MmbzsnUzs9YCdRPCVsTyZvYUJhUDs9YDwlbEBwWEJpWHxXT3JCZHJzQVtzdkJkdndBW3chYEJkIWAhYUNVIWE7J1NCZDsnUzs9YENsPCVsT0JkWENdVGlQfFdPcid9c3YnfXc7J1MnfTsnUzs9YChjPCVsTyd9WENvUDs9YDwlbEJkaUN7VmlQfFchT2BPcihvcnMmb3N2KG93eCd9eDsnUyhvOydTOz1gKV08JWxPKG9pRGVQOz1gPCVsP3lpRG9afFchT2BPcihvcnMmb3N2KG93eCd9eCFlKG8hZSFmRWIhZiNWKG8jViNXSXIjVzsnUyhvOydTOz1gKV08JWxPKG9pRWlYfFchT2BPcihvcnMmb3N2KG93eCd9eCFmKG8hZiFnRlUhZzsnUyhvOydTOz1gKV08JWxPKG9pRl1YfFchT2BPcihvcnMmb3N2KG93eCd9eCFjKG8hYyFkRnghZDsnUyhvOydTOz1gKV08JWxPKG9pR1BYfFchT2BPcihvcnMmb3N2KG93eCd9eCF2KG8hdiF3R2whdzsnUyhvOydTOz1gKV08JWxPKG9pR3NYfFchT2BPcihvcnMmb3N2KG93eCd9eCFjKG8hYyFkSGAhZDsnUyhvOydTOz1gKV08JWxPKG9pSGdYfFchT2BPcihvcnMmb3N2KG93eCd9eCF9KG8hfSNPSVMjTzsnUyhvOydTOz1gKV08JWxPKG9pSV1WfFchT2B5UE9yKG9ycyZvc3Yob3d4J314OydTKG87J1M7PWApXTwlbE8ob2lJeVh8VyFPYE9yKG9ycyZvc3Yob3d4J314I1cobyNXI1hKZiNYOydTKG87J1M7PWApXTwlbE8ob2lKbVh8VyFPYE9yKG9ycyZvc3Yob3d4J314I1QobyNUI1VLWSNVOydTKG87J1M7PWApXTwlbE8ob2lLYVh8VyFPYE9yKG9ycyZvc3Yob3d4J314I2gobyNoI2lLfCNpOydTKG87J1M7PWApXTwlbE8ob2lMVFh8VyFPYE9yKG9ycyZvc3Yob3d4J314I1QobyNUI1VIYCNVOydTKG87J1M7PWApXTwlbE8ob2lMd1h8VyFPYE9yKG9ycyZvc3Yob3d4J314I2MobyNjI2RNZCNkOydTKG87J1M7PWApXTwlbE8ob2lNa1h8VyFPYE9yKG9ycyZvc3Yob3d4J314I1YobyNWI1dOVyNXOydTKG87J1M7PWApXTwlbE8ob2lOX1h8VyFPYE9yKG9ycyZvc3Yob3d4J314I2gobyNoI2lOeiNpOydTKG87J1M7PWApXTwlbE8ob2khIFJYfFchT2BPcihvcnMmb3N2KG93eCd9eCNtKG8jbSNuISBuI247J1MobzsnUzs9YCldPCVsTyhvaSEgdVh8VyFPYE9yKG9ycyZvc3Yob3d4J314I2QobyNkI2UhIWIjZTsnUyhvOydTOz1gKV08JWxPKG9pISFpWHxXIU9gT3Iob3JzJm9zdihvd3gnfXgjWChvI1gjWT95I1k7J1MobzsnUzs9YCldPCVsTyhvaSEjX1YhU1B8VyFPYE9yKG9ycyZvc3Yob3d4J314OydTKG87J1M7PWApXTwlbE8ob2shJFBYYVFWUHxXIU9gT3IkcXJzJWdzdiRxd3gnXnghXiRxIV4hXyhvIV87J1MkcTsnUzs9YCljPCVsTyRxbyEkd1hbVVZQfFchT2BPciRxcnMlZ3N2JHF3eCdeeCFeJHEhXiFfKG8hXzsnUyRxOydTOz1gKWM8JWxPJHFrISVtWlZQfFchT2BPciRxcnMlZ3N2JHF3eCdeeCFeJHEhXiFfKG8hXyFgJHEhYCFhISZgIWE7J1MkcTsnUzs9YCljPCVsTyRxayEma1ghUlFWUHxXIU9gT3IkcXJzJWdzdiRxd3gnXnghXiRxIV4hXyhvIV87J1MkcTsnUzs9YCljPCVsTyRxayEnYVpWUHxXIU9gT3IkcXJzJWdzdiRxd3gnXnghXiRxIV4hXyhvIV8jUCRxI1AjUSEoUyNROydTJHE7J1M7PWApYzwlbE8kcWshKF1aVlB8VyFPYE9yJHFycyVnc3YkcXd4J154IV4kcSFeIV8obyFfIWAkcSFgIWEhKU8hYTsnUyRxOydTOz1gKWM8JWxPJHFrISlaWHhRVlB8VyFPYE9yJHFycyVnc3YkcXd4J154IV4kcSFeIV8obyFfOydTJHE7J1M7PWApYzwlbE8kcVwiLFxuICB0b2tlbml6ZXJzOiBbc3RhcnRUYWcsIGNvbW1lbnRDb250ZW50LCBwaUNvbnRlbnQsIGNkYXRhQ29udGVudCwgMCwgMSwgMiwgMywgNF0sXG4gIHRvcFJ1bGVzOiB7XCJEb2N1bWVudFwiOlswLDZdfSxcbiAgdG9rZW5QcmVjOiAwXG59KTtcblxuZXhwb3J0IHsgcGFyc2VyIH07XG4iLAogICAgImltcG9ydCB7IHBhcnNlciB9IGZyb20gJ0BsZXplci94bWwnO1xuaW1wb3J0IHsgc3ludGF4VHJlZSwgTFJMYW5ndWFnZSwgaW5kZW50Tm9kZVByb3AsIGZvbGROb2RlUHJvcCwgYnJhY2tldE1hdGNoaW5nSGFuZGxlLCBMYW5ndWFnZVN1cHBvcnQgfSBmcm9tICdAY29kZW1pcnJvci9sYW5ndWFnZSc7XG5pbXBvcnQgeyBFZGl0b3JTZWxlY3Rpb24gfSBmcm9tICdAY29kZW1pcnJvci9zdGF0ZSc7XG5pbXBvcnQgeyBFZGl0b3JWaWV3IH0gZnJvbSAnQGNvZGVtaXJyb3Ivdmlldyc7XG5cbmZ1bmN0aW9uIHRhZ05hbWUoZG9jLCB0YWcpIHtcbiAgICBsZXQgbmFtZSA9IHRhZyAmJiB0YWcuZ2V0Q2hpbGQoXCJUYWdOYW1lXCIpO1xuICAgIHJldHVybiBuYW1lID8gZG9jLnNsaWNlU3RyaW5nKG5hbWUuZnJvbSwgbmFtZS50bykgOiBcIlwiO1xufVxuZnVuY3Rpb24gZWxlbWVudE5hbWUkMShkb2MsIHRyZWUpIHtcbiAgICBsZXQgdGFnID0gdHJlZSAmJiB0cmVlLmZpcnN0Q2hpbGQ7XG4gICAgcmV0dXJuICF0YWcgfHwgdGFnLm5hbWUgIT0gXCJPcGVuVGFnXCIgPyBcIlwiIDogdGFnTmFtZShkb2MsIHRhZyk7XG59XG5mdW5jdGlvbiBhdHRyTmFtZShkb2MsIHRhZywgcG9zKSB7XG4gICAgbGV0IGF0dHIgPSB0YWcgJiYgdGFnLmdldENoaWxkcmVuKFwiQXR0cmlidXRlXCIpLmZpbmQoYSA9PiBhLmZyb20gPD0gcG9zICYmIGEudG8gPj0gcG9zKTtcbiAgICBsZXQgbmFtZSA9IGF0dHIgJiYgYXR0ci5nZXRDaGlsZChcIkF0dHJpYnV0ZU5hbWVcIik7XG4gICAgcmV0dXJuIG5hbWUgPyBkb2Muc2xpY2VTdHJpbmcobmFtZS5mcm9tLCBuYW1lLnRvKSA6IFwiXCI7XG59XG5mdW5jdGlvbiBmaW5kUGFyZW50RWxlbWVudCh0cmVlKSB7XG4gICAgZm9yIChsZXQgY3VyID0gdHJlZSAmJiB0cmVlLnBhcmVudDsgY3VyOyBjdXIgPSBjdXIucGFyZW50KVxuICAgICAgICBpZiAoY3VyLm5hbWUgPT0gXCJFbGVtZW50XCIpXG4gICAgICAgICAgICByZXR1cm4gY3VyO1xuICAgIHJldHVybiBudWxsO1xufVxuZnVuY3Rpb24gZmluZExvY2F0aW9uKHN0YXRlLCBwb3MpIHtcbiAgICB2YXIgX2E7XG4gICAgbGV0IGF0ID0gc3ludGF4VHJlZShzdGF0ZSkucmVzb2x2ZUlubmVyKHBvcywgLTEpLCBpblRhZyA9IG51bGw7XG4gICAgZm9yIChsZXQgY3VyID0gYXQ7ICFpblRhZyAmJiBjdXIucGFyZW50OyBjdXIgPSBjdXIucGFyZW50KVxuICAgICAgICBpZiAoY3VyLm5hbWUgPT0gXCJPcGVuVGFnXCIgfHwgY3VyLm5hbWUgPT0gXCJDbG9zZVRhZ1wiIHx8IGN1ci5uYW1lID09IFwiU2VsZkNsb3NpbmdUYWdcIiB8fCBjdXIubmFtZSA9PSBcIk1pc21hdGNoZWRDbG9zZVRhZ1wiKVxuICAgICAgICAgICAgaW5UYWcgPSBjdXI7XG4gICAgaWYgKGluVGFnICYmIChpblRhZy50byA+IHBvcyB8fCBpblRhZy5sYXN0Q2hpbGQudHlwZS5pc0Vycm9yKSkge1xuICAgICAgICBsZXQgZWx0ID0gaW5UYWcucGFyZW50O1xuICAgICAgICBpZiAoYXQubmFtZSA9PSBcIlRhZ05hbWVcIilcbiAgICAgICAgICAgIHJldHVybiBpblRhZy5uYW1lID09IFwiQ2xvc2VUYWdcIiB8fCBpblRhZy5uYW1lID09IFwiTWlzbWF0Y2hlZENsb3NlVGFnXCJcbiAgICAgICAgICAgICAgICA/IHsgdHlwZTogXCJjbG9zZVRhZ1wiLCBmcm9tOiBhdC5mcm9tLCBjb250ZXh0OiBlbHQgfVxuICAgICAgICAgICAgICAgIDogeyB0eXBlOiBcIm9wZW5UYWdcIiwgZnJvbTogYXQuZnJvbSwgY29udGV4dDogZmluZFBhcmVudEVsZW1lbnQoZWx0KSB9O1xuICAgICAgICBpZiAoYXQubmFtZSA9PSBcIkF0dHJpYnV0ZU5hbWVcIilcbiAgICAgICAgICAgIHJldHVybiB7IHR5cGU6IFwiYXR0ck5hbWVcIiwgZnJvbTogYXQuZnJvbSwgY29udGV4dDogaW5UYWcgfTtcbiAgICAgICAgaWYgKGF0Lm5hbWUgPT0gXCJBdHRyaWJ1dGVWYWx1ZVwiKVxuICAgICAgICAgICAgcmV0dXJuIHsgdHlwZTogXCJhdHRyVmFsdWVcIiwgZnJvbTogYXQuZnJvbSwgY29udGV4dDogaW5UYWcgfTtcbiAgICAgICAgbGV0IGJlZm9yZSA9IGF0ID09IGluVGFnIHx8IGF0Lm5hbWUgPT0gXCJBdHRyaWJ1dGVcIiA/IGF0LmNoaWxkQmVmb3JlKHBvcykgOiBhdDtcbiAgICAgICAgaWYgKChiZWZvcmUgPT09IG51bGwgfHwgYmVmb3JlID09PSB2b2lkIDAgPyB2b2lkIDAgOiBiZWZvcmUubmFtZSkgPT0gXCJTdGFydFRhZ1wiKVxuICAgICAgICAgICAgcmV0dXJuIHsgdHlwZTogXCJvcGVuVGFnXCIsIGZyb206IHBvcywgY29udGV4dDogZmluZFBhcmVudEVsZW1lbnQoZWx0KSB9O1xuICAgICAgICBpZiAoKGJlZm9yZSA9PT0gbnVsbCB8fCBiZWZvcmUgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGJlZm9yZS5uYW1lKSA9PSBcIlN0YXJ0Q2xvc2VUYWdcIiAmJiBiZWZvcmUudG8gPD0gcG9zKVxuICAgICAgICAgICAgcmV0dXJuIHsgdHlwZTogXCJjbG9zZVRhZ1wiLCBmcm9tOiBwb3MsIGNvbnRleHQ6IGVsdCB9O1xuICAgICAgICBpZiAoKGJlZm9yZSA9PT0gbnVsbCB8fCBiZWZvcmUgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGJlZm9yZS5uYW1lKSA9PSBcIklzXCIpXG4gICAgICAgICAgICByZXR1cm4geyB0eXBlOiBcImF0dHJWYWx1ZVwiLCBmcm9tOiBwb3MsIGNvbnRleHQ6IGluVGFnIH07XG4gICAgICAgIGlmIChiZWZvcmUpXG4gICAgICAgICAgICByZXR1cm4geyB0eXBlOiBcImF0dHJOYW1lXCIsIGZyb206IHBvcywgY29udGV4dDogaW5UYWcgfTtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIGVsc2UgaWYgKGF0Lm5hbWUgPT0gXCJTdGFydENsb3NlVGFnXCIpIHtcbiAgICAgICAgcmV0dXJuIHsgdHlwZTogXCJjbG9zZVRhZ1wiLCBmcm9tOiBwb3MsIGNvbnRleHQ6IGF0LnBhcmVudCB9O1xuICAgIH1cbiAgICB3aGlsZSAoYXQucGFyZW50ICYmIGF0LnRvID09IHBvcyAmJiAhKChfYSA9IGF0Lmxhc3RDaGlsZCkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLnR5cGUuaXNFcnJvcikpXG4gICAgICAgIGF0ID0gYXQucGFyZW50O1xuICAgIGlmIChhdC5uYW1lID09IFwiRWxlbWVudFwiIHx8IGF0Lm5hbWUgPT0gXCJUZXh0XCIgfHwgYXQubmFtZSA9PSBcIkRvY3VtZW50XCIpXG4gICAgICAgIHJldHVybiB7IHR5cGU6IFwidGFnXCIsIGZyb206IHBvcywgY29udGV4dDogYXQubmFtZSA9PSBcIkVsZW1lbnRcIiA/IGF0IDogZmluZFBhcmVudEVsZW1lbnQoYXQpIH07XG4gICAgcmV0dXJuIG51bGw7XG59XG5jbGFzcyBFbGVtZW50IHtcbiAgICBjb25zdHJ1Y3RvcihzcGVjLCBhdHRycywgYXR0clZhbHVlcykge1xuICAgICAgICB0aGlzLmF0dHJzID0gYXR0cnM7XG4gICAgICAgIHRoaXMuYXR0clZhbHVlcyA9IGF0dHJWYWx1ZXM7XG4gICAgICAgIHRoaXMuY2hpbGRyZW4gPSBbXTtcbiAgICAgICAgdGhpcy5uYW1lID0gc3BlYy5uYW1lO1xuICAgICAgICB0aGlzLmNvbXBsZXRpb24gPSBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oeyB0eXBlOiBcInR5cGVcIiB9LCBzcGVjLmNvbXBsZXRpb24gfHwge30pLCB7IGxhYmVsOiB0aGlzLm5hbWUgfSk7XG4gICAgICAgIHRoaXMub3BlbkNvbXBsZXRpb24gPSBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIHRoaXMuY29tcGxldGlvbiksIHsgbGFiZWw6IFwiPFwiICsgdGhpcy5uYW1lIH0pO1xuICAgICAgICB0aGlzLmNsb3NlQ29tcGxldGlvbiA9IE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgdGhpcy5jb21wbGV0aW9uKSwgeyBsYWJlbDogXCI8L1wiICsgdGhpcy5uYW1lICsgXCI+XCIsIGJvb3N0OiAyIH0pO1xuICAgICAgICB0aGlzLmNsb3NlTmFtZUNvbXBsZXRpb24gPSBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIHRoaXMuY29tcGxldGlvbiksIHsgbGFiZWw6IHRoaXMubmFtZSArIFwiPlwiIH0pO1xuICAgICAgICB0aGlzLnRleHQgPSBzcGVjLnRleHRDb250ZW50ID8gc3BlYy50ZXh0Q29udGVudC5tYXAocyA9PiAoeyBsYWJlbDogcywgdHlwZTogXCJ0ZXh0XCIgfSkpIDogW107XG4gICAgfVxufVxuY29uc3QgSWRlbnRpZmllciA9IC9eWzpcXC1cXC5cXHdcXHUwMGI3LVxcdWZmZmZdKiQvO1xuZnVuY3Rpb24gYXR0ckNvbXBsZXRpb24oc3BlYykge1xuICAgIHJldHVybiBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oeyB0eXBlOiBcInByb3BlcnR5XCIgfSwgc3BlYy5jb21wbGV0aW9uIHx8IHt9KSwgeyBsYWJlbDogc3BlYy5uYW1lIH0pO1xufVxuZnVuY3Rpb24gdmFsdWVDb21wbGV0aW9uKHNwZWMpIHtcbiAgICByZXR1cm4gdHlwZW9mIHNwZWMgPT0gXCJzdHJpbmdcIiA/IHsgbGFiZWw6IGBcIiR7c3BlY31cImAsIHR5cGU6IFwiY29uc3RhbnRcIiB9XG4gICAgICAgIDogL15cIi8udGVzdChzcGVjLmxhYmVsKSA/IHNwZWNcbiAgICAgICAgICAgIDogT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCBzcGVjKSwgeyBsYWJlbDogYFwiJHtzcGVjLmxhYmVsfVwiYCB9KTtcbn1cbi8qKlxuQ3JlYXRlIGEgY29tcGxldGlvbiBzb3VyY2UgZm9yIHRoZSBnaXZlbiBzY2hlbWEuXG4qL1xuZnVuY3Rpb24gY29tcGxldGVGcm9tU2NoZW1hKGVsdFNwZWNzLCBhdHRyU3BlY3MpIHtcbiAgICBsZXQgYWxsQXR0cnMgPSBbXSwgZ2xvYmFsQXR0cnMgPSBbXTtcbiAgICBsZXQgYXR0clZhbHVlcyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gICAgZm9yIChsZXQgcyBvZiBhdHRyU3BlY3MpIHtcbiAgICAgICAgbGV0IGNvbXBsZXRpb24gPSBhdHRyQ29tcGxldGlvbihzKTtcbiAgICAgICAgYWxsQXR0cnMucHVzaChjb21wbGV0aW9uKTtcbiAgICAgICAgaWYgKHMuZ2xvYmFsKVxuICAgICAgICAgICAgZ2xvYmFsQXR0cnMucHVzaChjb21wbGV0aW9uKTtcbiAgICAgICAgaWYgKHMudmFsdWVzKVxuICAgICAgICAgICAgYXR0clZhbHVlc1tzLm5hbWVdID0gcy52YWx1ZXMubWFwKHZhbHVlQ29tcGxldGlvbik7XG4gICAgfVxuICAgIGxldCBhbGxFbGVtZW50cyA9IFtdLCB0b3BFbGVtZW50cyA9IFtdO1xuICAgIGxldCBieU5hbWUgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICAgIGZvciAobGV0IHMgb2YgZWx0U3BlY3MpIHtcbiAgICAgICAgbGV0IGF0dHJzID0gZ2xvYmFsQXR0cnMsIGF0dHJWYWxzID0gYXR0clZhbHVlcztcbiAgICAgICAgaWYgKHMuYXR0cmlidXRlcylcbiAgICAgICAgICAgIGF0dHJzID0gYXR0cnMuY29uY2F0KHMuYXR0cmlidXRlcy5tYXAocyA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBzID09IFwic3RyaW5nXCIpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBhbGxBdHRycy5maW5kKGEgPT4gYS5sYWJlbCA9PSBzKSB8fCB7IGxhYmVsOiBzLCB0eXBlOiBcInByb3BlcnR5XCIgfTtcbiAgICAgICAgICAgICAgICBpZiAocy52YWx1ZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGF0dHJWYWxzID09IGF0dHJWYWx1ZXMpXG4gICAgICAgICAgICAgICAgICAgICAgICBhdHRyVmFscyA9IE9iamVjdC5jcmVhdGUoYXR0clZhbHMpO1xuICAgICAgICAgICAgICAgICAgICBhdHRyVmFsc1tzLm5hbWVdID0gcy52YWx1ZXMubWFwKHZhbHVlQ29tcGxldGlvbik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBhdHRyQ29tcGxldGlvbihzKTtcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgbGV0IGVsdCA9IG5ldyBFbGVtZW50KHMsIGF0dHJzLCBhdHRyVmFscyk7XG4gICAgICAgIGJ5TmFtZVtlbHQubmFtZV0gPSBlbHQ7XG4gICAgICAgIGFsbEVsZW1lbnRzLnB1c2goZWx0KTtcbiAgICAgICAgaWYgKHMudG9wKVxuICAgICAgICAgICAgdG9wRWxlbWVudHMucHVzaChlbHQpO1xuICAgIH1cbiAgICBpZiAoIXRvcEVsZW1lbnRzLmxlbmd0aClcbiAgICAgICAgdG9wRWxlbWVudHMgPSBhbGxFbGVtZW50cztcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGFsbEVsZW1lbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGxldCBzID0gZWx0U3BlY3NbaV0sIGVsdCA9IGFsbEVsZW1lbnRzW2ldO1xuICAgICAgICBpZiAocy5jaGlsZHJlbikge1xuICAgICAgICAgICAgZm9yIChsZXQgY2ggb2Ygcy5jaGlsZHJlbilcbiAgICAgICAgICAgICAgICBpZiAoYnlOYW1lW2NoXSlcbiAgICAgICAgICAgICAgICAgICAgZWx0LmNoaWxkcmVuLnB1c2goYnlOYW1lW2NoXSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBlbHQuY2hpbGRyZW4gPSBhbGxFbGVtZW50cztcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gY3ggPT4ge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIGxldCB7IGRvYyB9ID0gY3guc3RhdGUsIGxvYyA9IGZpbmRMb2NhdGlvbihjeC5zdGF0ZSwgY3gucG9zKTtcbiAgICAgICAgaWYgKCFsb2MgfHwgKGxvYy50eXBlID09IFwidGFnXCIgJiYgIWN4LmV4cGxpY2l0KSlcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICBsZXQgeyB0eXBlLCBmcm9tLCBjb250ZXh0IH0gPSBsb2M7XG4gICAgICAgIGlmICh0eXBlID09IFwib3BlblRhZ1wiKSB7XG4gICAgICAgICAgICBsZXQgY2hpbGRyZW4gPSB0b3BFbGVtZW50cztcbiAgICAgICAgICAgIGxldCBwYXJlbnROYW1lID0gZWxlbWVudE5hbWUkMShkb2MsIGNvbnRleHQpO1xuICAgICAgICAgICAgaWYgKHBhcmVudE5hbWUpIHtcbiAgICAgICAgICAgICAgICBsZXQgcGFyZW50ID0gYnlOYW1lW3BhcmVudE5hbWVdO1xuICAgICAgICAgICAgICAgIGNoaWxkcmVuID0gKHBhcmVudCA9PT0gbnVsbCB8fCBwYXJlbnQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHBhcmVudC5jaGlsZHJlbikgfHwgYWxsRWxlbWVudHM7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIGZyb20sXG4gICAgICAgICAgICAgICAgb3B0aW9uczogY2hpbGRyZW4ubWFwKGNoID0+IGNoLmNvbXBsZXRpb24pLFxuICAgICAgICAgICAgICAgIHZhbGlkRm9yOiBJZGVudGlmaWVyXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHR5cGUgPT0gXCJjbG9zZVRhZ1wiKSB7XG4gICAgICAgICAgICBsZXQgcGFyZW50TmFtZSA9IGVsZW1lbnROYW1lJDEoZG9jLCBjb250ZXh0KTtcbiAgICAgICAgICAgIHJldHVybiBwYXJlbnROYW1lID8ge1xuICAgICAgICAgICAgICAgIGZyb20sXG4gICAgICAgICAgICAgICAgdG86IGN4LnBvcyArIChkb2Muc2xpY2VTdHJpbmcoY3gucG9zLCBjeC5wb3MgKyAxKSA9PSBcIj5cIiA/IDEgOiAwKSxcbiAgICAgICAgICAgICAgICBvcHRpb25zOiBbKChfYSA9IGJ5TmFtZVtwYXJlbnROYW1lXSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmNsb3NlTmFtZUNvbXBsZXRpb24pIHx8IHsgbGFiZWw6IHBhcmVudE5hbWUgKyBcIj5cIiwgdHlwZTogXCJ0eXBlXCIgfV0sXG4gICAgICAgICAgICAgICAgdmFsaWRGb3I6IElkZW50aWZpZXJcbiAgICAgICAgICAgIH0gOiBudWxsO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHR5cGUgPT0gXCJhdHRyTmFtZVwiKSB7XG4gICAgICAgICAgICBsZXQgcGFyZW50ID0gYnlOYW1lW3RhZ05hbWUoZG9jLCBjb250ZXh0KV07XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIGZyb20sXG4gICAgICAgICAgICAgICAgb3B0aW9uczogKHBhcmVudCA9PT0gbnVsbCB8fCBwYXJlbnQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHBhcmVudC5hdHRycykgfHwgZ2xvYmFsQXR0cnMsXG4gICAgICAgICAgICAgICAgdmFsaWRGb3I6IElkZW50aWZpZXJcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodHlwZSA9PSBcImF0dHJWYWx1ZVwiKSB7XG4gICAgICAgICAgICBsZXQgYXR0ciA9IGF0dHJOYW1lKGRvYywgY29udGV4dCwgZnJvbSk7XG4gICAgICAgICAgICBpZiAoIWF0dHIpXG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICBsZXQgcGFyZW50ID0gYnlOYW1lW3RhZ05hbWUoZG9jLCBjb250ZXh0KV07XG4gICAgICAgICAgICBsZXQgdmFsdWVzID0gKChwYXJlbnQgPT09IG51bGwgfHwgcGFyZW50ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBwYXJlbnQuYXR0clZhbHVlcykgfHwgYXR0clZhbHVlcylbYXR0cl07XG4gICAgICAgICAgICBpZiAoIXZhbHVlcyB8fCAhdmFsdWVzLmxlbmd0aClcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgZnJvbSxcbiAgICAgICAgICAgICAgICB0bzogY3gucG9zICsgKGRvYy5zbGljZVN0cmluZyhjeC5wb3MsIGN4LnBvcyArIDEpID09ICdcIicgPyAxIDogMCksXG4gICAgICAgICAgICAgICAgb3B0aW9uczogdmFsdWVzLFxuICAgICAgICAgICAgICAgIHZhbGlkRm9yOiAvXlwiW15cIl0qXCI/JC9cbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodHlwZSA9PSBcInRhZ1wiKSB7XG4gICAgICAgICAgICBsZXQgcGFyZW50TmFtZSA9IGVsZW1lbnROYW1lJDEoZG9jLCBjb250ZXh0KSwgcGFyZW50ID0gYnlOYW1lW3BhcmVudE5hbWVdO1xuICAgICAgICAgICAgbGV0IGNsb3NpbmcgPSBbXSwgbGFzdCA9IGNvbnRleHQgJiYgY29udGV4dC5sYXN0Q2hpbGQ7XG4gICAgICAgICAgICBpZiAocGFyZW50TmFtZSAmJiAoIWxhc3QgfHwgbGFzdC5uYW1lICE9IFwiQ2xvc2VUYWdcIiB8fCB0YWdOYW1lKGRvYywgbGFzdCkgIT0gcGFyZW50TmFtZSkpXG4gICAgICAgICAgICAgICAgY2xvc2luZy5wdXNoKHBhcmVudCA/IHBhcmVudC5jbG9zZUNvbXBsZXRpb24gOiB7IGxhYmVsOiBcIjwvXCIgKyBwYXJlbnROYW1lICsgXCI+XCIsIHR5cGU6IFwidHlwZVwiLCBib29zdDogMiB9KTtcbiAgICAgICAgICAgIGxldCBvcHRpb25zID0gY2xvc2luZy5jb25jYXQoKChwYXJlbnQgPT09IG51bGwgfHwgcGFyZW50ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBwYXJlbnQuY2hpbGRyZW4pIHx8IChjb250ZXh0ID8gYWxsRWxlbWVudHMgOiB0b3BFbGVtZW50cykpLm1hcChlID0+IGUub3BlbkNvbXBsZXRpb24pKTtcbiAgICAgICAgICAgIGlmIChjb250ZXh0ICYmIChwYXJlbnQgPT09IG51bGwgfHwgcGFyZW50ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBwYXJlbnQudGV4dC5sZW5ndGgpKSB7XG4gICAgICAgICAgICAgICAgbGV0IG9wZW5UYWcgPSBjb250ZXh0LmZpcnN0Q2hpbGQ7XG4gICAgICAgICAgICAgICAgaWYgKG9wZW5UYWcudG8gPiBjeC5wb3MgLSAyMCAmJiAhL1xcUy8udGVzdChjeC5zdGF0ZS5zbGljZURvYyhvcGVuVGFnLnRvLCBjeC5wb3MpKSlcbiAgICAgICAgICAgICAgICAgICAgb3B0aW9ucyA9IG9wdGlvbnMuY29uY2F0KHBhcmVudC50ZXh0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgZnJvbSxcbiAgICAgICAgICAgICAgICBvcHRpb25zLFxuICAgICAgICAgICAgICAgIHZhbGlkRm9yOiAvXjxcXC8/WzpcXC1cXC5cXHdcXHUwMGI3LVxcdWZmZmZdKiQvXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICB9O1xufVxuXG4vKipcbkEgbGFuZ3VhZ2UgcHJvdmlkZXIgYmFzZWQgb24gdGhlIFtMZXplciBYTUxcbnBhcnNlcl0oaHR0cHM6Ly9naXRodWIuY29tL2xlemVyLXBhcnNlci94bWwpLCBleHRlbmRlZCB3aXRoXG5oaWdobGlnaHRpbmcgYW5kIGluZGVudGF0aW9uIGluZm9ybWF0aW9uLlxuKi9cbmNvbnN0IHhtbExhbmd1YWdlID0gLypAX19QVVJFX18qL0xSTGFuZ3VhZ2UuZGVmaW5lKHtcbiAgICBuYW1lOiBcInhtbFwiLFxuICAgIHBhcnNlcjogLypAX19QVVJFX18qL3BhcnNlci5jb25maWd1cmUoe1xuICAgICAgICBwcm9wczogW1xuICAgICAgICAgICAgLypAX19QVVJFX18qL2luZGVudE5vZGVQcm9wLmFkZCh7XG4gICAgICAgICAgICAgICAgRWxlbWVudChjb250ZXh0KSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBjbG9zZWQgPSAvXlxccyo8XFwvLy50ZXN0KGNvbnRleHQudGV4dEFmdGVyKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNvbnRleHQubGluZUluZGVudChjb250ZXh0Lm5vZGUuZnJvbSkgKyAoY2xvc2VkID8gMCA6IGNvbnRleHQudW5pdCk7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBcIk9wZW5UYWcgQ2xvc2VUYWcgU2VsZkNsb3NpbmdUYWdcIihjb250ZXh0KSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBjb250ZXh0LmNvbHVtbihjb250ZXh0Lm5vZGUuZnJvbSkgKyBjb250ZXh0LnVuaXQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAvKkBfX1BVUkVfXyovZm9sZE5vZGVQcm9wLmFkZCh7XG4gICAgICAgICAgICAgICAgRWxlbWVudChzdWJ0cmVlKSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBmaXJzdCA9IHN1YnRyZWUuZmlyc3RDaGlsZCwgbGFzdCA9IHN1YnRyZWUubGFzdENoaWxkO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWZpcnN0IHx8IGZpcnN0Lm5hbWUgIT0gXCJPcGVuVGFnXCIpXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsgZnJvbTogZmlyc3QudG8sIHRvOiBsYXN0Lm5hbWUgPT0gXCJDbG9zZVRhZ1wiID8gbGFzdC5mcm9tIDogc3VidHJlZS50byB9O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgLypAX19QVVJFX18qL2JyYWNrZXRNYXRjaGluZ0hhbmRsZS5hZGQoe1xuICAgICAgICAgICAgICAgIFwiT3BlblRhZyBDbG9zZVRhZ1wiOiBub2RlID0+IG5vZGUuZ2V0Q2hpbGQoXCJUYWdOYW1lXCIpXG4gICAgICAgICAgICB9KVxuICAgICAgICBdXG4gICAgfSksXG4gICAgbGFuZ3VhZ2VEYXRhOiB7XG4gICAgICAgIGNvbW1lbnRUb2tlbnM6IHsgYmxvY2s6IHsgb3BlbjogXCI8IS0tXCIsIGNsb3NlOiBcIi0tPlwiIH0gfSxcbiAgICAgICAgaW5kZW50T25JbnB1dDogL15cXHMqPFxcLyQvXG4gICAgfVxufSk7XG4vKipcblhNTCBsYW5ndWFnZSBzdXBwb3J0LiBJbmNsdWRlcyBzY2hlbWEtYmFzZWQgYXV0b2NvbXBsZXRpb24gd2hlblxuY29uZmlndXJlZC5cbiovXG5mdW5jdGlvbiB4bWwoY29uZiA9IHt9KSB7XG4gICAgbGV0IHN1cHBvcnQgPSBbeG1sTGFuZ3VhZ2UuZGF0YS5vZih7XG4gICAgICAgICAgICBhdXRvY29tcGxldGU6IGNvbXBsZXRlRnJvbVNjaGVtYShjb25mLmVsZW1lbnRzIHx8IFtdLCBjb25mLmF0dHJpYnV0ZXMgfHwgW10pXG4gICAgICAgIH0pXTtcbiAgICBpZiAoY29uZi5hdXRvQ2xvc2VUYWdzICE9PSBmYWxzZSlcbiAgICAgICAgc3VwcG9ydC5wdXNoKGF1dG9DbG9zZVRhZ3MpO1xuICAgIHJldHVybiBuZXcgTGFuZ3VhZ2VTdXBwb3J0KHhtbExhbmd1YWdlLCBzdXBwb3J0KTtcbn1cbmZ1bmN0aW9uIGVsZW1lbnROYW1lKGRvYywgdHJlZSwgbWF4ID0gZG9jLmxlbmd0aCkge1xuICAgIGlmICghdHJlZSlcbiAgICAgICAgcmV0dXJuIFwiXCI7XG4gICAgbGV0IHRhZyA9IHRyZWUuZmlyc3RDaGlsZDtcbiAgICBsZXQgbmFtZSA9IHRhZyAmJiB0YWcuZ2V0Q2hpbGQoXCJUYWdOYW1lXCIpO1xuICAgIHJldHVybiBuYW1lID8gZG9jLnNsaWNlU3RyaW5nKG5hbWUuZnJvbSwgTWF0aC5taW4obmFtZS50bywgbWF4KSkgOiBcIlwiO1xufVxuLyoqXG5FeHRlbnNpb24gdGhhdCB3aWxsIGF1dG9tYXRpY2FsbHkgaW5zZXJ0IGNsb3NlIHRhZ3Mgd2hlbiBhIGA+YCBvclxuYC9gIGlzIHR5cGVkLlxuKi9cbmNvbnN0IGF1dG9DbG9zZVRhZ3MgPSAvKkBfX1BVUkVfXyovRWRpdG9yVmlldy5pbnB1dEhhbmRsZXIub2YoKHZpZXcsIGZyb20sIHRvLCB0ZXh0LCBpbnNlcnRUcmFuc2FjdGlvbikgPT4ge1xuICAgIGlmICh2aWV3LmNvbXBvc2luZyB8fCB2aWV3LnN0YXRlLnJlYWRPbmx5IHx8IGZyb20gIT0gdG8gfHwgKHRleHQgIT0gXCI+XCIgJiYgdGV4dCAhPSBcIi9cIikgfHxcbiAgICAgICAgIXhtbExhbmd1YWdlLmlzQWN0aXZlQXQodmlldy5zdGF0ZSwgZnJvbSwgLTEpKVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgbGV0IGJhc2UgPSBpbnNlcnRUcmFuc2FjdGlvbigpLCB7IHN0YXRlIH0gPSBiYXNlO1xuICAgIGxldCBjbG9zZVRhZ3MgPSBzdGF0ZS5jaGFuZ2VCeVJhbmdlKHJhbmdlID0+IHtcbiAgICAgICAgdmFyIF9hLCBfYiwgX2M7XG4gICAgICAgIGxldCB7IGhlYWQgfSA9IHJhbmdlO1xuICAgICAgICBsZXQgZGlkVHlwZSA9IHN0YXRlLmRvYy5zbGljZVN0cmluZyhoZWFkIC0gMSwgaGVhZCkgPT0gdGV4dDtcbiAgICAgICAgbGV0IGFmdGVyID0gc3ludGF4VHJlZShzdGF0ZSkucmVzb2x2ZUlubmVyKGhlYWQsIC0xKSwgbmFtZTtcbiAgICAgICAgaWYgKGRpZFR5cGUgJiYgdGV4dCA9PSBcIj5cIiAmJiBhZnRlci5uYW1lID09IFwiRW5kVGFnXCIpIHtcbiAgICAgICAgICAgIGxldCB0YWcgPSBhZnRlci5wYXJlbnQ7XG4gICAgICAgICAgICBpZiAoKChfYiA9IChfYSA9IHRhZy5wYXJlbnQpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5sYXN0Q2hpbGQpID09PSBudWxsIHx8IF9iID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYi5uYW1lKSAhPSBcIkNsb3NlVGFnXCIgJiZcbiAgICAgICAgICAgICAgICAobmFtZSA9IGVsZW1lbnROYW1lKHN0YXRlLmRvYywgdGFnLnBhcmVudCwgaGVhZCkpKSB7XG4gICAgICAgICAgICAgICAgbGV0IHRvID0gaGVhZCArIChzdGF0ZS5kb2Muc2xpY2VTdHJpbmcoaGVhZCwgaGVhZCArIDEpID09PSBcIj5cIiA/IDEgOiAwKTtcbiAgICAgICAgICAgICAgICBsZXQgaW5zZXJ0ID0gYDwvJHtuYW1lfT5gO1xuICAgICAgICAgICAgICAgIHJldHVybiB7IHJhbmdlLCBjaGFuZ2VzOiB7IGZyb206IGhlYWQsIHRvLCBpbnNlcnQgfSB9O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGRpZFR5cGUgJiYgdGV4dCA9PSBcIi9cIiAmJiBhZnRlci5uYW1lID09IFwiU3RhcnRDbG9zZVRhZ1wiKSB7XG4gICAgICAgICAgICBsZXQgYmFzZSA9IGFmdGVyLnBhcmVudDtcbiAgICAgICAgICAgIGlmIChhZnRlci5mcm9tID09IGhlYWQgLSAyICYmICgoX2MgPSBiYXNlLmxhc3RDaGlsZCkgPT09IG51bGwgfHwgX2MgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9jLm5hbWUpICE9IFwiQ2xvc2VUYWdcIiAmJlxuICAgICAgICAgICAgICAgIChuYW1lID0gZWxlbWVudE5hbWUoc3RhdGUuZG9jLCBiYXNlLCBoZWFkKSkpIHtcbiAgICAgICAgICAgICAgICBsZXQgdG8gPSBoZWFkICsgKHN0YXRlLmRvYy5zbGljZVN0cmluZyhoZWFkLCBoZWFkICsgMSkgPT09IFwiPlwiID8gMSA6IDApO1xuICAgICAgICAgICAgICAgIGxldCBpbnNlcnQgPSBgJHtuYW1lfT5gO1xuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIHJhbmdlOiBFZGl0b3JTZWxlY3Rpb24uY3Vyc29yKGhlYWQgKyBpbnNlcnQubGVuZ3RoLCAtMSksXG4gICAgICAgICAgICAgICAgICAgIGNoYW5nZXM6IHsgZnJvbTogaGVhZCwgdG8sIGluc2VydCB9XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4geyByYW5nZSB9O1xuICAgIH0pO1xuICAgIGlmIChjbG9zZVRhZ3MuY2hhbmdlcy5lbXB0eSlcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIHZpZXcuZGlzcGF0Y2goW1xuICAgICAgICBiYXNlLFxuICAgICAgICBzdGF0ZS51cGRhdGUoY2xvc2VUYWdzLCB7XG4gICAgICAgICAgICB1c2VyRXZlbnQ6IFwiaW5wdXQuY29tcGxldGVcIixcbiAgICAgICAgICAgIHNjcm9sbEludG9WaWV3OiB0cnVlXG4gICAgICAgIH0pXG4gICAgXSk7XG4gICAgcmV0dXJuIHRydWU7XG59KTtcblxuZXhwb3J0IHsgYXV0b0Nsb3NlVGFncywgY29tcGxldGVGcm9tU2NoZW1hLCB4bWwsIHhtbExhbmd1YWdlIH07XG4iLAogICAgImltcG9ydCB7IEVkaXRvclZpZXcsIGJhc2ljU2V0dXAgfSBmcm9tIFwiY29kZW1pcnJvclwiO1xuaW1wb3J0IHsgRWRpdG9yU3RhdGUgfSBmcm9tIFwiQGNvZGVtaXJyb3Ivc3RhdGVcIjtcbmltcG9ydCB7IGphdmFzY3JpcHQgfSBmcm9tIFwiQGNvZGVtaXJyb3IvbGFuZy1qYXZhc2NyaXB0XCI7XG5pbXBvcnQgeyBjc3MgfSBmcm9tIFwiQGNvZGVtaXJyb3IvbGFuZy1jc3NcIjtcbmltcG9ydCB7IGh0bWwgfSBmcm9tIFwiQGNvZGVtaXJyb3IvbGFuZy1odG1sXCI7XG5pbXBvcnQgeyBqc29uIH0gZnJvbSBcIkBjb2RlbWlycm9yL2xhbmctanNvblwiO1xuaW1wb3J0IHsgbWFya2Rvd24gfSBmcm9tIFwiQGNvZGVtaXJyb3IvbGFuZy1tYXJrZG93blwiO1xuaW1wb3J0IHsgeG1sIH0gZnJvbSBcIkBjb2RlbWlycm9yL2xhbmcteG1sXCI7XG5pbXBvcnQgeyBhdXRvY29tcGxldGlvbiB9IGZyb20gXCJAY29kZW1pcnJvci9hdXRvY29tcGxldGVcIjtcbmltcG9ydCB7IHNlYXJjaCwgc2VhcmNoS2V5bWFwIH0gZnJvbSBcIkBjb2RlbWlycm9yL3NlYXJjaFwiO1xuaW1wb3J0IHsgZm9sZEtleW1hcCB9IGZyb20gXCJAY29kZW1pcnJvci9sYW5ndWFnZVwiO1xuaW1wb3J0IHsgZGVmYXVsdEtleW1hcCwgaGlzdG9yeUtleW1hcCwgaW5zZXJ0VGFiIH0gZnJvbSBcIkBjb2RlbWlycm9yL2NvbW1hbmRzXCI7XG5pbXBvcnQgeyBrZXltYXAsIFZpZXdVcGRhdGUgfSBmcm9tIFwiQGNvZGVtaXJyb3Ivdmlld1wiO1xuaW1wb3J0IHsgdGFncyBhcyB0IH0gZnJvbSBcIkBsZXplci9oaWdobGlnaHRcIjtcbmltcG9ydCB7IEhpZ2hsaWdodFN0eWxlLCBzeW50YXhIaWdobGlnaHRpbmcsIGluZGVudFVuaXQgfSBmcm9tIFwiQGNvZGVtaXJyb3IvbGFuZ3VhZ2VcIjtcbmltcG9ydCB0eXBlIHsgRXh0ZW5zaW9uIH0gZnJvbSBcIkBjb2RlbWlycm9yL3N0YXRlXCI7XG5cbmZ1bmN0aW9uIGNyZWF0ZVRoZW1lKGNvbmZpZzoge1xuXHR0aGVtZTogXCJsaWdodFwiIHwgXCJkYXJrXCI7XG5cdHNldHRpbmdzOiB7XG5cdFx0YmFja2dyb3VuZDogc3RyaW5nO1xuXHRcdGJhY2tncm91bmRJbWFnZTogc3RyaW5nO1xuXHRcdGZvcmVncm91bmQ6IHN0cmluZztcblx0XHRjYXJldDogc3RyaW5nO1xuXHRcdGxpbmVIaWdobGlnaHQ6IHN0cmluZztcblx0XHRndXR0ZXJCYWNrZ3JvdW5kOiBzdHJpbmc7XG5cdFx0Z3V0dGVyRm9yZWdyb3VuZDogc3RyaW5nO1xuXHRcdGZvbnRGYW1pbHk6IHN0cmluZztcblx0XHRmb250U2l6ZTogc3RyaW5nO1xuXHR9O1xuXHRzdHlsZXM6IEFycmF5PHsgdGFnOiBhbnk7IGNvbG9yOiBzdHJpbmcgfT47XG59KSB7XG5cdGNvbnN0IHRoZW1lID0gRWRpdG9yVmlldy50aGVtZShcblx0XHR7XG5cdFx0XHRcIiZcIjoge1xuXHRcdFx0XHRiYWNrZ3JvdW5kQ29sb3I6IGNvbmZpZy5zZXR0aW5ncy5iYWNrZ3JvdW5kLFxuXHRcdFx0XHRjb2xvcjogY29uZmlnLnNldHRpbmdzLmZvcmVncm91bmQsXG5cdFx0XHRcdGZvbnRTaXplOiBjb25maWcuc2V0dGluZ3MuZm9udFNpemUsXG5cdFx0XHRcdGZvbnRGYW1pbHk6IGNvbmZpZy5zZXR0aW5ncy5mb250RmFtaWx5LFxuXHRcdFx0XHRoZWlnaHQ6IFwiMTAwJVwiLFxuXHRcdFx0XHR3aWR0aDogXCIxMDAlXCIsXG5cdFx0XHR9LFxuXHRcdFx0XCIuY20tc2Nyb2xsZXJcIjoge1xuXHRcdFx0XHRvdmVyZmxvdzogXCJhdXRvXCIsXG5cdFx0XHRcdGhlaWdodDogXCIxMDAlXCIsXG5cdFx0XHR9LFxuXHRcdFx0XCIuY20tY29udGVudFwiOiB7XG5cdFx0XHRcdGNhcmV0Q29sb3I6IGNvbmZpZy5zZXR0aW5ncy5jYXJldCxcblx0XHRcdFx0Zm9udFNpemU6IGNvbmZpZy5zZXR0aW5ncy5mb250U2l6ZSxcblx0XHRcdFx0Zm9udEZhbWlseTogY29uZmlnLnNldHRpbmdzLmZvbnRGYW1pbHksXG5cdFx0XHR9LFxuXHRcdFx0XCIuY20tY3Vyc29yLCAuY20tZHJvcEN1cnNvclwiOiB7XG5cdFx0XHRcdGJvcmRlckxlZnRDb2xvcjogY29uZmlnLnNldHRpbmdzLmNhcmV0LFxuXHRcdFx0fSxcblx0XHRcdFwiJi5jbS1mb2N1c2VkIC5jbS1zZWxlY3Rpb25CYWNrZ3JvdW5kLCA6OnNlbGVjdGlvblwiOiB7XG5cdFx0XHRcdGJhY2tncm91bmRDb2xvcjogY29uZmlnLnNldHRpbmdzLmxpbmVIaWdobGlnaHQsXG5cdFx0XHR9LFxuXHRcdFx0XCIuY20tYWN0aXZlTGluZVwiOiB7XG5cdFx0XHRcdGJhY2tncm91bmRDb2xvcjogY29uZmlnLnNldHRpbmdzLmxpbmVIaWdobGlnaHQsXG5cdFx0XHR9LFxuXHRcdFx0XCIuY20tZ3V0dGVyc1wiOiB7XG5cdFx0XHRcdGJhY2tncm91bmRDb2xvcjogY29uZmlnLnNldHRpbmdzLmd1dHRlckJhY2tncm91bmQsXG5cdFx0XHRcdGNvbG9yOiBjb25maWcuc2V0dGluZ3MuZ3V0dGVyRm9yZWdyb3VuZCxcblx0XHRcdFx0Ym9yZGVyOiBcIm5vbmVcIixcblx0XHRcdFx0Zm9udFNpemU6IGNvbmZpZy5zZXR0aW5ncy5mb250U2l6ZSxcblx0XHRcdFx0Zm9udEZhbWlseTogY29uZmlnLnNldHRpbmdzLmZvbnRGYW1pbHksXG5cdFx0XHR9LFxuXHRcdFx0XCIuY20tYWN0aXZlTGluZUd1dHRlclwiOiB7XG5cdFx0XHRcdGJhY2tncm91bmRDb2xvcjogY29uZmlnLnNldHRpbmdzLmxpbmVIaWdobGlnaHQsXG5cdFx0XHR9LFxuXHRcdH0sXG5cdFx0eyBkYXJrOiBjb25maWcudGhlbWUgPT09IFwiZGFya1wiIH0sXG5cdCk7XG5cblx0Y29uc3QgaGlnaGxpZ2h0aW5nID0gSGlnaGxpZ2h0U3R5bGUuZGVmaW5lKGNvbmZpZy5zdHlsZXMpO1xuXG5cdHJldHVybiBbdGhlbWUsIHN5bnRheEhpZ2hsaWdodGluZyhoaWdobGlnaHRpbmcpXTtcbn1cblxuZXhwb3J0IGNvbnN0IG1pbmltYWxEYXJrID0gY3JlYXRlVGhlbWUoe1xuXHR0aGVtZTogXCJkYXJrXCIsXG5cdHNldHRpbmdzOiB7XG5cdFx0YmFja2dyb3VuZDogXCIjMTAxMDEwXCIsXG5cdFx0YmFja2dyb3VuZEltYWdlOiBcIlwiLFxuXHRcdGZvcmVncm91bmQ6IFwiI2ZmZmZmZlwiLFxuXHRcdGNhcmV0OiBcIiNjYWNhY2FcIixcblx0XHRsaW5lSGlnaGxpZ2h0OiBcIiNhYWZlZTcxN1wiLFxuXHRcdGd1dHRlckJhY2tncm91bmQ6IFwiIzEwMTAxMFwiLFxuXHRcdGd1dHRlckZvcmVncm91bmQ6IFwiIzQ0NDQ0NFwiLFxuXHRcdGZvbnRGYW1pbHk6IFwiJ0pldGJyYWlucyBNb25vJywgJ0dlaXN0IE1vbm8nLCBtb25vc3BhY2VcIixcblx0XHRmb250U2l6ZTogXCIxMnB4XCIsXG5cdH0sXG5cdHN0eWxlczogW1xuXHRcdHsgdGFnOiB0LmNvbW1lbnQsIGNvbG9yOiBcIiNhYWZlZTdcIiB9LFxuXHRcdHsgdGFnOiB0LnZhcmlhYmxlTmFtZSwgY29sb3I6IFwiI2ZmZmZmZlwiIH0sXG5cdFx0eyB0YWc6IFt0LnN0cmluZywgdC5zcGVjaWFsKHQuYnJhY2UpXSwgY29sb3I6IFwiI2QwZDBkMFwiIH0sXG5cdFx0eyB0YWc6IHQubnVtYmVyLCBjb2xvcjogXCIjZDBkMGQwXCIgfSxcblx0XHR7IHRhZzogdC5ib29sLCBjb2xvcjogXCIjZDBkMGQwXCIgfSxcblx0XHR7IHRhZzogdC5udWxsLCBjb2xvcjogXCIjZDBkMGQwXCIgfSxcblx0XHR7IHRhZzogdC5rZXl3b3JkLCBjb2xvcjogXCIjYTBhMGEwXCIgfSxcblx0XHR7IHRhZzogdC5vcGVyYXRvciwgY29sb3I6IFwiI2ZmZmZmZlwiIH0sXG5cdFx0eyB0YWc6IHQuY2xhc3NOYW1lLCBjb2xvcjogXCIjZmZmZmZmXCIgfSxcblx0XHR7IHRhZzogdC5kZWZpbml0aW9uKHQudHlwZU5hbWUpLCBjb2xvcjogXCIjZmZmZmZmXCIgfSxcblx0XHR7IHRhZzogdC50eXBlTmFtZSwgY29sb3I6IFwiI2ZmZmZmZlwiIH0sXG5cdFx0eyB0YWc6IHQuYW5nbGVCcmFja2V0LCBjb2xvcjogXCIjZmZmZmZmXCIgfSxcblx0XHR7IHRhZzogdC50YWdOYW1lLCBjb2xvcjogXCIjZmZmZmZmXCIgfSxcblx0XHR7IHRhZzogdC5hdHRyaWJ1dGVOYW1lLCBjb2xvcjogXCIjZmZmZmZmXCIgfSxcblx0XSxcbn0pO1xuXG5leHBvcnQgY29uc3QgbWluaW1hbExpZ2h0ID0gY3JlYXRlVGhlbWUoe1xuXHR0aGVtZTogXCJsaWdodFwiLFxuXHRzZXR0aW5nczoge1xuXHRcdGJhY2tncm91bmQ6IFwiI2ZmZmZmZlwiLFxuXHRcdGJhY2tncm91bmRJbWFnZTogXCJcIixcblx0XHRmb3JlZ3JvdW5kOiBcIiMxYTFhMWFcIixcblx0XHRjYXJldDogXCIjMWExYTFhXCIsXG5cdFx0bGluZUhpZ2hsaWdodDogXCIjMDA2NmZmMGFcIixcblx0XHRndXR0ZXJCYWNrZ3JvdW5kOiBcIiNmZmZmZmZcIixcblx0XHRndXR0ZXJGb3JlZ3JvdW5kOiBcIiM5OTk5OTlcIixcblx0XHRmb250RmFtaWx5OiBcIidKZXRicmFpbnMgTW9ubycsICdHZWlzdCBNb25vJywgbW9ub3NwYWNlXCIsXG5cdFx0Zm9udFNpemU6IFwiMTJweFwiLFxuXHR9LFxuXHRzdHlsZXM6IFtcblx0XHR7IHRhZzogdC5jb21tZW50LCBjb2xvcjogXCIjMDA4MDgwXCIgfSxcblx0XHR7IHRhZzogdC52YXJpYWJsZU5hbWUsIGNvbG9yOiBcIiMxYTFhMWFcIiB9LFxuXHRcdHsgdGFnOiBbdC5zdHJpbmcsIHQuc3BlY2lhbCh0LmJyYWNlKV0sIGNvbG9yOiBcIiM1MDUwNTBcIiB9LFxuXHRcdHsgdGFnOiB0Lm51bWJlciwgY29sb3I6IFwiIzUwNTA1MFwiIH0sXG5cdFx0eyB0YWc6IHQuYm9vbCwgY29sb3I6IFwiIzUwNTA1MFwiIH0sXG5cdFx0eyB0YWc6IHQubnVsbCwgY29sb3I6IFwiIzUwNTA1MFwiIH0sXG5cdFx0eyB0YWc6IHQua2V5d29yZCwgY29sb3I6IFwiIzcwNzA3MFwiIH0sXG5cdFx0eyB0YWc6IHQub3BlcmF0b3IsIGNvbG9yOiBcIiMxYTFhMWFcIiB9LFxuXHRcdHsgdGFnOiB0LmNsYXNzTmFtZSwgY29sb3I6IFwiIzFhMWExYVwiIH0sXG5cdFx0eyB0YWc6IHQuZGVmaW5pdGlvbih0LnR5cGVOYW1lKSwgY29sb3I6IFwiIzFhMWExYVwiIH0sXG5cdFx0eyB0YWc6IHQudHlwZU5hbWUsIGNvbG9yOiBcIiMxYTFhMWFcIiB9LFxuXHRcdHsgdGFnOiB0LmFuZ2xlQnJhY2tldCwgY29sb3I6IFwiIzFhMWExYVwiIH0sXG5cdFx0eyB0YWc6IHQudGFnTmFtZSwgY29sb3I6IFwiIzFhMWExYVwiIH0sXG5cdFx0eyB0YWc6IHQuYXR0cmlidXRlTmFtZSwgY29sb3I6IFwiIzFhMWExYVwiIH0sXG5cdF0sXG59KTtcblxuZXhwb3J0IGNvbnN0IGZvbnRPdmVycmlkZSA9IEVkaXRvclZpZXcudGhlbWUoe1xuXHRcIiZcIjoge1xuXHRcdGZvbnRTaXplOiBcIjEycHhcIixcblx0XHRmb250RmFtaWx5OiBcIidKZXRicmFpbnMgTW9ubycsICdHZWlzdCBNb25vJywgbW9ub3NwYWNlXCIsXG5cdH0sXG5cdFwiLmNtLWNvbnRlbnRcIjoge1xuXHRcdGZvbnRTaXplOiBcIjEycHhcIixcblx0XHRmb250RmFtaWx5OiBcIidKZXRicmFpbnMgTW9ubycsICdHZWlzdCBNb25vJywgbW9ub3NwYWNlXCIsXG5cdH0sXG5cdFwiLmNtLWd1dHRlcnNcIjoge1xuXHRcdGZvbnRTaXplOiBcIjEycHhcIixcblx0XHRmb250RmFtaWx5OiBcIidKZXRicmFpbnMgTW9ubycsICdHZWlzdCBNb25vJywgbW9ub3NwYWNlXCIsXG5cdH0sXG59KTtcblxuY29uc3QgbGFuZ3VhZ2VfbWFwID0ge1xuXHRqYXZhc2NyaXB0OiAoKSA9PiBqYXZhc2NyaXB0KCksXG5cdHR5cGVzY3JpcHQ6ICgpID0+IGphdmFzY3JpcHQoeyB0eXBlc2NyaXB0OiB0cnVlIH0pLFxuXHRqc3g6ICgpID0+IGphdmFzY3JpcHQoeyBqc3g6IHRydWUgfSksXG5cdHRzeDogKCkgPT4gamF2YXNjcmlwdCh7IGpzeDogdHJ1ZSwgdHlwZXNjcmlwdDogdHJ1ZSB9KSxcblx0Y3NzOiAoKSA9PiBjc3MoKSxcblx0aHRtbDogKCkgPT4gaHRtbCgpLFxuXHRqc29uOiAoKSA9PiBqc29uKCksXG5cdG1hcmtkb3duOiAoKSA9PiBtYXJrZG93bigpLFxuXHR4bWw6ICgpID0+IHhtbCgpLFxuXHRiYXNoOiAoKSA9PiBudWxsLFxufTtcblxudHlwZSBMYW5ndWFnZVR5cGUgPSBrZXlvZiB0eXBlb2YgbGFuZ3VhZ2VfbWFwO1xudHlwZSBUaGVtZVR5cGUgPSBcImRhcmtcIiB8IFwibGlnaHRcIjtcblxuZXhwb3J0IHR5cGUgRWRpdG9yQ29uZmlnID0ge1xuXHRob3N0OiBIVE1MRWxlbWVudDtcblx0bGFuZ3VhZ2U6IExhbmd1YWdlVHlwZTtcblx0c291cmNlOiBzdHJpbmc7XG5cdHRoZW1lOiBUaGVtZVR5cGU7XG5cdG9uSW5wdXQ/OiAodmFsdWU6IHN0cmluZykgPT4gdm9pZDtcbn07XG5cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVFZGl0b3IoY29uZmlnOiBFZGl0b3JDb25maWcsIGV4dGVuc2lvbnM6IEV4dGVuc2lvbltdID0gW10pOiBFZGl0b3JWaWV3IHtcblx0Y29uc3QgeyBob3N0LCBsYW5ndWFnZSwgc291cmNlLCB0aGVtZSwgb25JbnB1dCB9ID0gY29uZmlnO1xuXG5cdGNvbnN0IGxhbmd1YWdlX2V4dGVuc2lvbiA9IGxhbmd1YWdlX21hcFtsYW5ndWFnZV0oKTtcblx0Y29uc3QgdGhlbWVfZXh0ZW5zaW9uID0gdGhlbWUgPT09IFwiZGFya1wiID8gbWluaW1hbERhcmsgOiBtaW5pbWFsTGlnaHQ7XG5cblx0Y29uc3QgZGVmYXVsdF9leHRlbnNpb25zOiBFeHRlbnNpb25bXSA9IFtcblx0XHRiYXNpY1NldHVwLFxuXHRcdGtleW1hcC5vZihbXG5cdFx0XHQuLi5kZWZhdWx0S2V5bWFwLFxuXHRcdFx0Li4uc2VhcmNoS2V5bWFwLFxuXHRcdFx0Li4uaGlzdG9yeUtleW1hcCxcblx0XHRcdC4uLmZvbGRLZXltYXAsXG5cdFx0XHR7IGtleTogXCJUYWJcIiwgcnVuOiBpbnNlcnRUYWIgfSxcblx0XHRdKSxcblx0XHQuLi50aGVtZV9leHRlbnNpb24sXG5cdFx0Zm9udE92ZXJyaWRlLFxuXHRcdGF1dG9jb21wbGV0aW9uKCksXG5cdFx0c2VhcmNoKHsgdG9wOiB0cnVlIH0pLFxuXHRcdEVkaXRvclZpZXcubGluZVdyYXBwaW5nLFxuXHRcdEVkaXRvclN0YXRlLnRhYlNpemUub2YoNCksXG5cdFx0aW5kZW50VW5pdC5vZihcIlxcdFwiKSxcblx0XHQuLi5leHRlbnNpb25zLFxuXHRdO1xuXG5cdGlmIChvbklucHV0KSB7XG5cdFx0ZGVmYXVsdF9leHRlbnNpb25zLnB1c2goXG5cdFx0XHRFZGl0b3JWaWV3LnVwZGF0ZUxpc3RlbmVyLm9mKCh1cGRhdGU6IFZpZXdVcGRhdGUpID0+IHtcblx0XHRcdFx0aWYgKHVwZGF0ZS5kb2NDaGFuZ2VkKSB7XG5cdFx0XHRcdFx0Y29uc3QgbmV3X3ZhbHVlID0gdXBkYXRlLnN0YXRlLmRvYy50b1N0cmluZygpO1xuXHRcdFx0XHRcdG9uSW5wdXQobmV3X3ZhbHVlKTtcblx0XHRcdFx0fVxuXHRcdFx0fSksXG5cdFx0KTtcblx0fVxuXG5cdGlmIChsYW5ndWFnZV9leHRlbnNpb24pIHtcblx0XHRkZWZhdWx0X2V4dGVuc2lvbnMucHVzaChsYW5ndWFnZV9leHRlbnNpb24pO1xuXHR9XG5cblx0Y29uc3Qgc3RhdGUgPSBFZGl0b3JTdGF0ZS5jcmVhdGUoe1xuXHRcdGRvYzogc291cmNlLFxuXHRcdGV4dGVuc2lvbnM6IGRlZmF1bHRfZXh0ZW5zaW9ucyxcblx0fSk7XG5cblx0Y29uc3QgdmlldyA9IG5ldyBFZGl0b3JWaWV3KHtcblx0XHRzdGF0ZSxcblx0XHRwYXJlbnQ6IGhvc3QsXG5cdH0pO1xuXG5cdHJldHVybiB2aWV3O1xufVxuIgogIF0sCiAgIm1hcHBpbmdzIjogIjtBQUVBLElBQUksWUFBWSxDQUFDO0FBQWpCLElBQW9CLFVBQVUsQ0FBQztBQUFBLENBRTdCLE1BQU07QUFBQSxFQU9OLElBQUksVUFBVSxpekNBQWl6QyxNQUFNLEdBQUcsRUFBRSxJQUFJLE9BQUssSUFBSSxTQUFTLEdBQUcsRUFBRSxJQUFJLENBQUM7QUFBQSxFQUMxMkMsU0FBUyxJQUFJLEdBQUcsSUFBSSxFQUFHLElBQUksUUFBUSxRQUFRO0FBQUEsS0FDeEMsSUFBSSxJQUFJLFVBQVUsV0FBVyxLQUFLLElBQUksSUFBSSxRQUFRLEVBQUU7QUFBQSxHQUN0RDtBQUVJLFNBQVMsZUFBZSxDQUFDLE1BQU07QUFBQSxFQUNwQyxJQUFJLE9BQU87QUFBQSxJQUFLLE9BQU87QUFBQSxFQUN2QixTQUFTLE9BQU8sR0FBRyxLQUFLLFVBQVUsV0FBVTtBQUFBLElBQzFDLElBQUksTUFBTyxPQUFPLE1BQU87QUFBQSxJQUN6QixJQUFJLE9BQU8sVUFBVTtBQUFBLE1BQU0sS0FBSztBQUFBLElBQzNCLFNBQUksUUFBUSxRQUFRO0FBQUEsTUFBTSxPQUFPLE1BQU07QUFBQSxJQUN2QztBQUFBLGFBQU87QUFBQSxJQUNaLElBQUksUUFBUTtBQUFBLE1BQUksT0FBTztBQUFBLEVBQ3pCO0FBQUE7QUFHRixTQUFTLG1CQUFtQixDQUFDLE1BQU07QUFBQSxFQUNqQyxPQUFPLFFBQVEsVUFBVyxRQUFRO0FBQUE7QUFVcEMsSUFBTSxNQUFNO0FBRUwsU0FBUyxnQkFBZ0IsQ0FBQyxLQUFLLEtBQUssVUFBVSxNQUFNLG1CQUFtQixNQUFNO0FBQUEsRUFDbEYsUUFBUSxVQUFVLG1CQUFtQixrQkFBa0IsS0FBSyxLQUFLLGdCQUFnQjtBQUFBO0FBR25GLFNB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LElBQ2QsSUFBSSxLQUFLLFlBQVksS0FBSyxTQUFTLGFBQWEsT0FBTyxLQUFLO0FBQUEsTUFDMUQsS0FBSyxTQUFTLGFBQWEsU0FBUyxLQUFLO0FBQUE7QUFFL0M7OztBQ2pKTyxJQUFJLE9BQU87QUFBQSxFQUNoQixHQUFHO0FBQUEsRUFDSCxHQUFHO0FBQUEsRUFDSCxJQUFJO0FBQUEsRUFDSixJQUFJO0FBQUEsRUFDSixJQUFJO0FBQUEsRUFDSixJQUFJO0FBQUEsRUFDSixJQUFJO0FBQUEsRUFDSixJQUFJO0FBQUEsRUFDSixJQUFJO0FBQUEsRUFDSixJQUFJO0FBQUEsRUFDSixJQUFJO0FBQUEsRUFDSixJQUFJO0FBQUEsRUFDSixJQUFJO0FBQUEsRUFDSixJQUFJO0FBQUEsRUFDSixJQUFJO0FBQUEsRUFDSixJQUFJO0FBQUEsRUFDSixJQUFJO0FBQUEsRUFDSixJQUFJO0FBQUEsRUFDSixJQUFJO0FBQUEsRUFDSixJQUFJO0FBQUEsRUFDSixJQUFJO0FBQUEsRUFDSixJQUFJO0FBQUEsRUFDSixJQUFJO0FBQUEsRUFDSixJQUFJO0FBQUEsRUFDSixJQUFJO0FBQUEsRUFDSixJQUFJO0FBQUEsRUFDSixLQUFLO0FBQUEsRUFDTCxLQUFLO0FBQUEsRUFDTCxLQUFLO0FBQUEsRUFDTCxLQUFLO0FBQUEsRUFDTCxLQUFLO0FBQUEsRUFDTCxLQUFLO0FBQUEsRUFDTCxLQUFLO0FBQUEsRUFDTCxLQUFLO0FBQUEsRUFDTCxLQUFLO0FBQUEsRUFDTCxLQUFLO0FBQUEsRUFDTCxLQUFLO0FBQUEsRUFDTCxLQUFLO0FBQUEsRUFDTCxLQUFLO0FBQUEsRUFDTCxLQUFLO0FBQUEsRUFDTCxLQUFLO0FBQUEsRUFDTCxLQUFLO0FBQUEsRUFDTCxLQUFLO0FBQUEsRUFDTCxLQUFLO0FBQUEsRUFDTCxLQUFLO0FBQUEsRUFDTCxLQUFLO0FBQUEsRUFDTCxLQUFLO0FBQUEsRUFDTCxLQUFLO0FBQUEsRUFDTCxLQUFLO0FBQUEsRUFDTCxLQUFLO0FBQUEsRUFDTCxLQUFLO0FBQUEsRUFDTCxLQUFLO0FBQ1A7QUFF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QSxFQUFZO0FBQUEsRUFBZTtBQUFBLEVBQVc7QUFBQSxFQUFjO0FBQUEsRUFDcEQ7QUFBQSxFQUFlO0FBQUEsRUFBZTtBQUFBLEVBQVc7QUFBQSxFQUFhO0FBQUEsRUFDdEQ7QUFBQSxFQUFRO0FBQUEsRUFBYTtBQUFBLEVBQVE7QUFBQSxFQUFRO0FBQUEsRUFBUztBQUFBLEVBQWU7QUFBQSxFQUM3RDtBQUFBLEVBQVc7QUFBQSxFQUFhO0FBQUEsRUFBVTtBQUFBLEVBQVM7QUFBQSxFQUFTO0FBQUEsRUFDcEQ7QUFBQSxFQUFpQjtBQUFBLEVBQWE7QUFBQSxFQUFnQjtBQUFBLEVBQWE7QUFBQSxFQUMzRDtBQUFBLEVBQWE7QUFBQSxFQUF3QjtBQUFBLEVBQWE7QUFBQSxFQUFjO0FBQUEsRUFDaEU7QUFBQSxFQUFlO0FBQUEsRUFBaUI7QUFBQSxFQUFnQjtBQUFBLEVBQ2hEO0FBQUEsRUFBa0I7QUFBQSxFQUFlO0FBQUEsRUFBUTtBQUFBLEVBQWE7QUFBQSxFQUFTO0FBQUEsRUFDL0Q7QUFBQSxFQUFVO0FBQUEsRUFBb0I7QUFBQSxFQUFjO0FBQUEsRUFBZ0I7QUFBQSxFQUM1RDtBQUFBLEVBQWtCO0FBQUEsRUFBbUI7QUFBQSxFQUFxQjtBQUFBLEVBQzFEO0FBQUEsRUFBbUI7QUFBQSxFQUFnQjtBQUFBLEVBQWE7QUFBQSxFQUFhO0FBQUEsRUFDN0Q7QUFBQSxFQUFlO0FBQUEsRUFBUTtBQUFBLEVBQVc7QUFBQSxFQUFTO0FBQUEsRUFBYTtBQUFBLEVBQVU7QUFBQSxFQUNsRTtBQUFBLEVBQVU7QUFBQSxFQUFpQjtBQUFBLEVBQWE7QUFBQSxFQUFpQjtBQUFBLEVBQ3pEO0FBQUEsRUFBYztBQUFBLEVBQWE7QUFBQSxFQUFRO0FBQUEsRUFBUTtBQUFBLEVBQVE7QUFBQSxFQUNuRDtBQUFBLEVBQVU7QUFBQSxFQUFpQjtBQUFBLEVBQU87QUFBQSxFQUFhO0FBQUEsRUFBYTtBQUFBLEVBQzVEO0FBQUEsRUFBVTtBQUFBLEVBQWM7QUFBQSxFQUFZO0FBQUEsRUFBWTtBQUFBLEVBQVU7QUFBQSxFQUFVO0FB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
